var YD=Object.defineProperty;var QD=(n,e,t)=>e in n?YD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ay=(n,e,t)=>QD(n,typeof e!="symbol"?e+"":e,t);function BC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $m(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ly={exports:{}},vh={},cy={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sb;function ZD(){if(sb)return Bt;sb=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function T(ae){return ae===null||typeof ae!="object"?null:(ae=E&&ae[E]||ae["@@iterator"],typeof ae=="function"?ae:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,D={};function L(ae,he,Se){this.props=ae,this.context=he,this.refs=D,this.updater=Se||R}L.prototype.isReactComponent={},L.prototype.setState=function(ae,he){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,he,"setState")},L.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function G(){}G.prototype=L.prototype;function z(ae,he,Se){this.props=ae,this.context=he,this.refs=D,this.updater=Se||R}var W=z.prototype=new G;W.constructor=z,M(W,L.prototype),W.isPureReactComponent=!0;var Y=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function B(ae,he,Se){var Le,it={},Re=null,Pe=null;if(he!=null)for(Le in he.ref!==void 0&&(Pe=he.ref),he.key!==void 0&&(Re=""+he.key),he)Z.call(he,Le)&&!F.hasOwnProperty(Le)&&(it[Le]=he[Le]);var Ge=arguments.length-2;if(Ge===1)it.children=Se;else if(1<Ge){for(var at=Array(Ge),st=0;st<Ge;st++)at[st]=arguments[st+2];it.children=at}if(ae&&ae.defaultProps)for(Le in Ge=ae.defaultProps,Ge)it[Le]===void 0&&(it[Le]=Ge[Le]);return{$$typeof:n,type:ae,key:Re,ref:Pe,props:it,_owner:ie.current}}function H(ae,he){return{$$typeof:n,type:ae.type,key:he,ref:ae.ref,props:ae.props,_owner:ae._owner}}function ee(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===n}function ne(ae){var he={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(Se){return he[Se]})}var te=/\/+/g;function K(ae,he){return typeof ae=="object"&&ae!==null&&ae.key!=null?ne(""+ae.key):he.toString(36)}function we(ae,he,Se,Le,it){var Re=typeof ae;(Re==="undefined"||Re==="boolean")&&(ae=null);var Pe=!1;if(ae===null)Pe=!0;else switch(Re){case"string":case"number":Pe=!0;break;case"object":switch(ae.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=ae,it=it(Pe),ae=Le===""?"."+K(Pe,0):Le,Y(it)?(Se="",ae!=null&&(Se=ae.replace(te,"$&/")+"/"),we(it,he,Se,"",function(st){return st})):it!=null&&(ee(it)&&(it=H(it,Se+(!it.key||Pe&&Pe.key===it.key?"":(""+it.key).replace(te,"$&/")+"/")+ae)),he.push(it)),1;if(Pe=0,Le=Le===""?".":Le+":",Y(ae))for(var Ge=0;Ge<ae.length;Ge++){Re=ae[Ge];var at=Le+K(Re,Ge);Pe+=we(Re,he,Se,at,it)}else if(at=T(ae),typeof at=="function")for(ae=at.call(ae),Ge=0;!(Re=ae.next()).done;)Re=Re.value,at=Le+K(Re,Ge++),Pe+=we(Re,he,Se,at,it);else if(Re==="object")throw he=String(ae),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return Pe}function se(ae,he,Se){if(ae==null)return ae;var Le=[],it=0;return we(ae,Le,"","",function(Re){return he.call(Se,Re,it++)}),Le}function Ae(ae){if(ae._status===-1){var he=ae._result;he=he(),he.then(function(Se){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=Se)},function(Se){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=Se)}),ae._status===-1&&(ae._status=0,ae._result=he)}if(ae._status===1)return ae._result.default;throw ae._result}var xe={current:null},oe={transition:null},Te={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ie};function Ne(){throw Error("act(...) is not supported in production builds of React.")}return Bt.Children={map:se,forEach:function(ae,he,Se){se(ae,function(){he.apply(this,arguments)},Se)},count:function(ae){var he=0;return se(ae,function(){he++}),he},toArray:function(ae){return se(ae,function(he){return he})||[]},only:function(ae){if(!ee(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},Bt.Component=L,Bt.Fragment=t,Bt.Profiler=i,Bt.PureComponent=z,Bt.StrictMode=r,Bt.Suspense=m,Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,Bt.act=Ne,Bt.cloneElement=function(ae,he,Se){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var Le=M({},ae.props),it=ae.key,Re=ae.ref,Pe=ae._owner;if(he!=null){if(he.ref!==void 0&&(Re=he.ref,Pe=ie.current),he.key!==void 0&&(it=""+he.key),ae.type&&ae.type.defaultProps)var Ge=ae.type.defaultProps;for(at in he)Z.call(he,at)&&!F.hasOwnProperty(at)&&(Le[at]=he[at]===void 0&&Ge!==void 0?Ge[at]:he[at])}var at=arguments.length-2;if(at===1)Le.children=Se;else if(1<at){Ge=Array(at);for(var st=0;st<at;st++)Ge[st]=arguments[st+2];Le.children=Ge}return{$$typeof:n,type:ae.type,key:it,ref:Re,props:Le,_owner:Pe}},Bt.createContext=function(ae){return ae={$$typeof:c,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:o,_context:ae},ae.Consumer=ae},Bt.createElement=B,Bt.createFactory=function(ae){var he=B.bind(null,ae);return he.type=ae,he},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(ae){return{$$typeof:h,render:ae}},Bt.isValidElement=ee,Bt.lazy=function(ae){return{$$typeof:w,_payload:{_status:-1,_result:ae},_init:Ae}},Bt.memo=function(ae,he){return{$$typeof:g,type:ae,compare:he===void 0?null:he}},Bt.startTransition=function(ae){var he=oe.transition;oe.transition={};try{ae()}finally{oe.transition=he}},Bt.unstable_act=Ne,Bt.useCallback=function(ae,he){return xe.current.useCallback(ae,he)},Bt.useContext=function(ae){return xe.current.useContext(ae)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(ae){return xe.current.useDeferredValue(ae)},Bt.useEffect=function(ae,he){return xe.current.useEffect(ae,he)},Bt.useId=function(){return xe.current.useId()},Bt.useImperativeHandle=function(ae,he,Se){return xe.current.useImperativeHandle(ae,he,Se)},Bt.useInsertionEffect=function(ae,he){return xe.current.useInsertionEffect(ae,he)},Bt.useLayoutEffect=function(ae,he){return xe.current.useLayoutEffect(ae,he)},Bt.useMemo=function(ae,he){return xe.current.useMemo(ae,he)},Bt.useReducer=function(ae,he,Se){return xe.current.useReducer(ae,he,Se)},Bt.useRef=function(ae){return xe.current.useRef(ae)},Bt.useState=function(ae){return xe.current.useState(ae)},Bt.useSyncExternalStore=function(ae,he,Se){return xe.current.useSyncExternalStore(ae,he,Se)},Bt.useTransition=function(){return xe.current.useTransition()},Bt.version="18.3.1",Bt}var ob;function Uw(){return ob||(ob=1,cy.exports=ZD()),cy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function JD(){if(ab)return vh;ab=1;var n=Uw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(h,m,g){var w,E={},T=null,R=null;g!==void 0&&(T=""+g),m.key!==void 0&&(T=""+m.key),m.ref!==void 0&&(R=m.ref);for(w in m)r.call(m,w)&&!o.hasOwnProperty(w)&&(E[w]=m[w]);if(h&&h.defaultProps)for(w in m=h.defaultProps,m)E[w]===void 0&&(E[w]=m[w]);return{$$typeof:e,type:h,key:T,ref:R,props:E,_owner:i.current}}return vh.Fragment=t,vh.jsx=c,vh.jsxs=c,vh}var lb;function e8(){return lb||(lb=1,ly.exports=JD()),ly.exports}var A=e8(),P=Uw();const ze=$m(P),jC=BC({__proto__:null,default:ze},[P]);var n0={},uy={exports:{}},as={},dy={exports:{}},hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function t8(){return cb||(cb=1,function(n){function e(oe,Te){var Ne=oe.length;oe.push(Te);e:for(;0<Ne;){var ae=Ne-1>>>1,he=oe[ae];if(0<i(he,Te))oe[ae]=Te,oe[Ne]=he,Ne=ae;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var Te=oe[0],Ne=oe.pop();if(Ne!==Te){oe[0]=Ne;e:for(var ae=0,he=oe.length,Se=he>>>1;ae<Se;){var Le=2*(ae+1)-1,it=oe[Le],Re=Le+1,Pe=oe[Re];if(0>i(it,Ne))Re<he&&0>i(Pe,it)?(oe[ae]=Pe,oe[Re]=Ne,ae=Re):(oe[ae]=it,oe[Le]=Ne,ae=Le);else if(Re<he&&0>i(Pe,Ne))oe[ae]=Pe,oe[Re]=Ne,ae=Re;else break e}}return Te}function i(oe,Te){var Ne=oe.sortIndex-Te.sortIndex;return Ne!==0?Ne:oe.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],g=[],w=1,E=null,T=3,R=!1,M=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(oe){for(var Te=t(g);Te!==null;){if(Te.callback===null)r(g);else if(Te.startTime<=oe)r(g),Te.sortIndex=Te.expirationTime,e(m,Te);else break;Te=t(g)}}function Y(oe){if(D=!1,W(oe),!M)if(t(m)!==null)M=!0,Ae(Z);else{var Te=t(g);Te!==null&&xe(Y,Te.startTime-oe)}}function Z(oe,Te){M=!1,D&&(D=!1,G(B),B=-1),R=!0;var Ne=T;try{for(W(Te),E=t(m);E!==null&&(!(E.expirationTime>Te)||oe&&!ne());){var ae=E.callback;if(typeof ae=="function"){E.callback=null,T=E.priorityLevel;var he=ae(E.expirationTime<=Te);Te=n.unstable_now(),typeof he=="function"?E.callback=he:E===t(m)&&r(m),W(Te)}else r(m);E=t(m)}if(E!==null)var Se=!0;else{var Le=t(g);Le!==null&&xe(Y,Le.startTime-Te),Se=!1}return Se}finally{E=null,T=Ne,R=!1}}var ie=!1,F=null,B=-1,H=5,ee=-1;function ne(){return!(n.unstable_now()-ee<H)}function te(){if(F!==null){var oe=n.unstable_now();ee=oe;var Te=!0;try{Te=F(!0,oe)}finally{Te?K():(ie=!1,F=null)}}else ie=!1}var K;if(typeof z=="function")K=function(){z(te)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,se=we.port2;we.port1.onmessage=te,K=function(){se.postMessage(null)}}else K=function(){L(te,0)};function Ae(oe){F=oe,ie||(ie=!0,K())}function xe(oe,Te){B=L(function(){oe(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){M||R||(M=!0,Ae(Z))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var Te=3;break;default:Te=T}var Ne=T;T=Te;try{return oe()}finally{T=Ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,Te){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Ne=T;T=oe;try{return Te()}finally{T=Ne}},n.unstable_scheduleCallback=function(oe,Te,Ne){var ae=n.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?ae+Ne:ae):Ne=ae,oe){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Ne+he,oe={id:w++,callback:Te,priorityLevel:oe,startTime:Ne,expirationTime:he,sortIndex:-1},Ne>ae?(oe.sortIndex=Ne,e(g,oe),t(m)===null&&oe===t(g)&&(D?(G(B),B=-1):D=!0,xe(Y,Ne-ae))):(oe.sortIndex=he,e(m,oe),M||R||(M=!0,Ae(Z))),oe},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(oe){var Te=T;return function(){var Ne=T;T=Te;try{return oe.apply(this,arguments)}finally{T=Ne}}}}(hy)),hy}var ub;function n8(){return ub||(ub=1,dy.exports=t8()),dy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function r8(){if(db)return as;db=1;var n=Uw(),e=n8();function t(a){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+a,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,d){c(a,d),c(a+"Capture",d)}function c(a,d){for(i[a]=d,a=0;a<d.length;a++)r.add(d[a])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function T(a){return m.call(E,a)?!0:m.call(w,a)?!1:g.test(a)?E[a]=!0:(w[a]=!0,!1)}function R(a,d,x,b){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:x!==null?!x.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function M(a,d,x,b){if(d===null||typeof d>"u"||R(a,d,x,b))return!0;if(b)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function D(a,d,x,b,S,k,$){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=S,this.mustUseProperty=x,this.propertyName=a,this.type=d,this.sanitizeURL=k,this.removeEmptyString=$}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new D(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var d=a[0];L[d]=new D(d,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new D(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new D(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new D(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new D(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){L[a]=new D(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new D(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new D(a,5,!1,a.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!1,!1)}),L.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!0,!0)});function W(a,d,x,b){var S=L.hasOwnProperty(d)?L[d]:null;(S!==null?S.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(M(d,x,S,b)&&(x=null),b||S===null?T(d)&&(x===null?a.removeAttribute(d):a.setAttribute(d,""+x)):S.mustUseProperty?a[S.propertyName]=x===null?S.type===3?!1:"":x:(d=S.attributeName,b=S.attributeNamespace,x===null?a.removeAttribute(d):(S=S.type,x=S===3||S===4&&x===!0?"":""+x,b?a.setAttributeNS(b,d,x):a.setAttribute(d,x))))}var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),ne=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Te(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var Ne=Object.assign,ae;function he(a){if(ae===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);ae=d&&d[1]||""}return`
`+ae+a}var Se=!1;function Le(a,d){if(!a||Se)return"";Se=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(be){var b=be}Reflect.construct(a,[],d)}else{try{d.call()}catch(be){b=be}a.call(d.prototype)}else{try{throw Error()}catch(be){b=be}a()}}catch(be){if(be&&b&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),k=b.stack.split(`
`),$=S.length-1,re=k.length-1;1<=$&&0<=re&&S[$]!==k[re];)re--;for(;1<=$&&0<=re;$--,re--)if(S[$]!==k[re]){if($!==1||re!==1)do if($--,re--,0>re||S[$]!==k[re]){var ce=`
`+S[$].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=$&&0<=re);break}}}finally{Se=!1,Error.prepareStackTrace=x}return(a=a?a.displayName||a.name:"")?he(a):""}function it(a){switch(a.tag){case 5:return he(a.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return a=Le(a.type,!1),a;case 11:return a=Le(a.type.render,!1),a;case 1:return a=Le(a.type,!0),a;default:return""}}function Re(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case F:return"Fragment";case ie:return"Portal";case H:return"Profiler";case B:return"StrictMode";case K:return"Suspense";case we:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case ne:return(a.displayName||"Context")+".Consumer";case ee:return(a._context.displayName||"Context")+".Provider";case te:var d=a.render;return a=a.displayName,a||(a=d.displayName||d.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case se:return d=a.displayName||null,d!==null?d:Re(a.type)||"Memo";case Ae:d=a._payload,a=a._init;try{return Re(a(d))}catch{}}return null}function Pe(a){var d=a.type;switch(a.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=d.render,a=a.displayName||a.name||"",d.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(d);case 8:return d===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ge(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function at(a){var d=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function st(a){var d=at(a)?"checked":"value",x=Object.getOwnPropertyDescriptor(a.constructor.prototype,d),b=""+a[d];if(!a.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var S=x.get,k=x.set;return Object.defineProperty(a,d,{configurable:!0,get:function(){return S.call(this)},set:function($){b=""+$,k.call(this,$)}}),Object.defineProperty(a,d,{enumerable:x.enumerable}),{getValue:function(){return b},setValue:function($){b=""+$},stopTracking:function(){a._valueTracker=null,delete a[d]}}}}function ct(a){a._valueTracker||(a._valueTracker=st(a))}function bt(a){if(!a)return!1;var d=a._valueTracker;if(!d)return!0;var x=d.getValue(),b="";return a&&(b=at(a)?a.checked?"true":"false":a.value),a=b,a!==x?(d.setValue(a),!0):!1}function ht(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function gn(a,d){var x=d.checked;return Ne({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??a._wrapperState.initialChecked})}function Vn(a,d){var x=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;x=Ge(d.value!=null?d.value:x),a._wrapperState={initialChecked:b,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Dr(a,d){d=d.checked,d!=null&&W(a,"checked",d,!1)}function Qt(a,d){Dr(a,d);var x=Ge(d.value),b=d.type;if(x!=null)b==="number"?(x===0&&a.value===""||a.value!=x)&&(a.value=""+x):a.value!==""+x&&(a.value=""+x);else if(b==="submit"||b==="reset"){a.removeAttribute("value");return}d.hasOwnProperty("value")?pt(a,d.type,x):d.hasOwnProperty("defaultValue")&&pt(a,d.type,Ge(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(a.defaultChecked=!!d.defaultChecked)}function zt(a,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+a._wrapperState.initialValue,x||d===a.value||(a.value=d),a.defaultValue=d}x=a.name,x!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,x!==""&&(a.name=x)}function pt(a,d,x){(d!=="number"||ht(a.ownerDocument)!==a)&&(x==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+x&&(a.defaultValue=""+x))}var xi=Array.isArray;function Xe(a,d,x,b){if(a=a.options,d){d={};for(var S=0;S<x.length;S++)d["$"+x[S]]=!0;for(x=0;x<a.length;x++)S=d.hasOwnProperty("$"+a[x].value),a[x].selected!==S&&(a[x].selected=S),S&&b&&(a[x].defaultSelected=!0)}else{for(x=""+Ge(x),d=null,S=0;S<a.length;S++){if(a[S].value===x){a[S].selected=!0,b&&(a[S].defaultSelected=!0);return}d!==null||a[S].disabled||(d=a[S])}d!==null&&(d.selected=!0)}}function Kn(a,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ne({},d,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function wi(a,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(t(92));if(xi(x)){if(1<x.length)throw Error(t(93));x=x[0]}d=x}d==null&&(d=""),x=d}a._wrapperState={initialValue:Ge(x)}}function Yr(a,d){var x=Ge(d.value),b=Ge(d.defaultValue);x!=null&&(x=""+x,x!==a.value&&(a.value=x),d.defaultValue==null&&a.defaultValue!==x&&(a.defaultValue=x)),b!=null&&(a.defaultValue=""+b)}function Qs(a){var d=a.textContent;d===a._wrapperState.initialValue&&d!==""&&d!==null&&(a.value=d)}function Wt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xn(a,d){return a==null||a==="http://www.w3.org/1999/xhtml"?Wt(d):a==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Er,Fn=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,b,S){MSApp.execUnsafeLocalFunction(function(){return a(d,x,b,S)})}:a}(function(a,d){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=d;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Er.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}});function Qr(a,d){if(d){var x=a.firstChild;if(x&&x===a.lastChild&&x.nodeType===3){x.nodeValue=d;return}}a.textContent=d}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(a){vi.forEach(function(d){d=d+a.charAt(0).toUpperCase()+a.substring(1),Fi[d]=Fi[a]})});function In(a,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||Fi.hasOwnProperty(a)&&Fi[a]?(""+d).trim():d+"px"}function We(a,d){a=a.style;for(var x in d)if(d.hasOwnProperty(x)){var b=x.indexOf("--")===0,S=In(x,d[x],b);x==="float"&&(x="cssFloat"),b?a.setProperty(x,S):a[x]=S}}var An=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(a,d){if(d){if(An[a]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function pn(a,d){if(a.indexOf("-")===-1)return typeof d.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function jr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zs=null,Ct=null,br=null;function Ds(a){if(a=sh(a)){if(typeof Zs!="function")throw Error(t(280));var d=a.stateNode;d&&(d=gp(d),Zs(a.stateNode,a.type,d))}}function mt(a){Ct?br?br.push(a):br=[a]:Ct=a}function Gt(){if(Ct){var a=Ct,d=br;if(br=Ct=null,Ds(a),d)for(a=0;a<d.length;a++)Ds(d[a])}}function Tn(a,d){return a(d)}function $t(){}var Ir=!1;function Cn(a,d,x){if(Ir)return a(d,x);Ir=!0;try{return Tn(a,d,x)}finally{Ir=!1,(Ct!==null||br!==null)&&($t(),Gt())}}function Rt(a,d){var x=a.stateNode;if(x===null)return null;var b=gp(x);if(b===null)return null;x=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(a=a.type,b=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!b;break e;default:a=!1}if(a)return null;if(x&&typeof x!="function")throw Error(t(231,d,typeof x));return x}var fs=!1;if(h)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){fs=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{fs=!1}function ir(a,d,x,b,S,k,$,re,ce){var be=Array.prototype.slice.call(arguments,3);try{d.apply(x,be)}catch(Me){this.onError(Me)}}var Bn=!1,dr=null,jn=!1,Ye=null,wo={onError:function(a){Bn=!0,dr=a}};function vo(a,d,x,b,S,k,$,re,ce){Bn=!1,dr=null,ir.apply(wo,arguments)}function Ur(a,d,x,b,S,k,$,re,ce){if(vo.apply(this,arguments),Bn){if(Bn){var be=dr;Bn=!1,dr=null}else throw Error(t(198));jn||(jn=!0,Ye=be)}}function Zr(a){var d=a,x=a;if(a.alternate)for(;d.return;)d=d.return;else{a=d;do d=a,(d.flags&4098)!==0&&(x=d.return),a=d.return;while(a)}return d.tag===3?x:null}function Os(a){if(a.tag===13){var d=a.memoizedState;if(d===null&&(a=a.alternate,a!==null&&(d=a.memoizedState)),d!==null)return d.dehydrated}return null}function _i(a){if(Zr(a)!==a)throw Error(t(188))}function Bi(a){var d=a.alternate;if(!d){if(d=Zr(a),d===null)throw Error(t(188));return d!==a?null:a}for(var x=a,b=d;;){var S=x.return;if(S===null)break;var k=S.alternate;if(k===null){if(b=S.return,b!==null){x=b;continue}break}if(S.child===k.child){for(k=S.child;k;){if(k===x)return _i(S),a;if(k===b)return _i(S),d;k=k.sibling}throw Error(t(188))}if(x.return!==b.return)x=S,b=k;else{for(var $=!1,re=S.child;re;){if(re===x){$=!0,x=S,b=k;break}if(re===b){$=!0,b=S,x=k;break}re=re.sibling}if(!$){for(re=k.child;re;){if(re===x){$=!0,x=k,b=S;break}if(re===b){$=!0,b=k,x=S;break}re=re.sibling}if(!$)throw Error(t(189))}}if(x.alternate!==b)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?a:d}function Jl(a){return a=Bi(a),a!==null?Wa(a):null}function Wa(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var d=Wa(a);if(d!==null)return d;a=a.sibling}return null}var li=e.unstable_scheduleCallback,Ar=e.unstable_cancelCallback,yn=e.unstable_shouldYield,du=e.unstable_requestPaint,Zt=e.unstable_now,Ha=e.unstable_getCurrentPriorityLevel,ke=e.unstable_ImmediatePriority,_o=e.unstable_UserBlockingPriority,Jt=e.unstable_NormalPriority,Ms=e.unstable_LowPriority,hu=e.unstable_IdlePriority,Ft=null,Nt=null;function Dt(a){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Ft,a,void 0,(a.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:Yn,ia=Math.log,Ga=Math.LN2;function Yn(a){return a>>>=0,a===0?32:31-(ia(a)/Ga|0)|0}var ji=64,$a=4194304;function mn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ei(a,d){var x=a.pendingLanes;if(x===0)return 0;var b=0,S=a.suspendedLanes,k=a.pingedLanes,$=x&268435455;if($!==0){var re=$&~S;re!==0?b=mn(re):(k&=$,k!==0&&(b=mn(k)))}else $=x&~S,$!==0?b=mn($):k!==0&&(b=mn(k));if(b===0)return 0;if(d!==0&&d!==b&&(d&S)===0&&(S=b&-b,k=d&-d,S>=k||S===16&&(k&4194240)!==0))return d;if((b&4)!==0&&(b|=x&16),d=a.entangledLanes,d!==0)for(a=a.entanglements,d&=b;0<d;)x=31-zr(d),S=1<<x,b|=a[x],d&=~S;return b}function Qd(a,d){switch(a){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(a,d){for(var x=a.suspendedLanes,b=a.pingedLanes,S=a.expirationTimes,k=a.pendingLanes;0<k;){var $=31-zr(k),re=1<<$,ce=S[$];ce===-1?((re&x)===0||(re&b)!==0)&&(S[$]=Qd(re,d)):ce<=d&&(a.expiredLanes|=re),k&=~re}}function Ot(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Qn(){var a=ji;return ji<<=1,(ji&4194240)===0&&(ji=64),a}function pe(a){for(var d=[],x=0;31>x;x++)d.push(a);return d}function Q(a,d,x){a.pendingLanes|=d,d!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,d=31-zr(d),a[d]=x}function $e(a,d){var x=a.pendingLanes&~d;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=d,a.mutableReadLanes&=d,a.entangledLanes&=d,d=a.entanglements;var b=a.eventTimes;for(a=a.expirationTimes;0<x;){var S=31-zr(x),k=1<<S;d[S]=0,b[S]=-1,a[S]=-1,x&=~k}}function Rn(a,d){var x=a.entangledLanes|=d;for(a=a.entanglements;x;){var b=31-zr(x),S=1<<b;S&d|a[b]&d&&(a[b]|=d),x&=~S}}var It=0;function Eo(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var qa,Wr,ut,Sn,ec,tc=!1,Zi=[],hr=null,Ui=null,ps=null,Nn=new Map,Jr=new Map,Hr=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fu(a,d){switch(a){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Nn.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(d.pointerId)}}function gt(a,d,x,b,S,k){return a===null||a.nativeEvent!==k?(a={blockedOn:d,domEventName:x,eventSystemFlags:b,nativeEvent:k,targetContainers:[S]},d!==null&&(d=sh(d),d!==null&&Wr(d)),a):(a.eventSystemFlags|=b,d=a.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),a)}function Tr(a,d,x,b,S){switch(d){case"focusin":return hr=gt(hr,a,d,x,b,S),!0;case"dragenter":return Ui=gt(Ui,a,d,x,b,S),!0;case"mouseover":return ps=gt(ps,a,d,x,b,S),!0;case"pointerover":var k=S.pointerId;return Nn.set(k,gt(Nn.get(k)||null,a,d,x,b,S)),!0;case"gotpointercapture":return k=S.pointerId,Jr.set(k,gt(Jr.get(k)||null,a,d,x,b,S)),!0}return!1}function pu(a){var d=sc(a.target);if(d!==null){var x=Zr(d);if(x!==null){if(d=x.tag,d===13){if(d=Os(x),d!==null){a.blockedOn=d,ec(a.priority,function(){ut(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){a.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ms(a){if(a.blockedOn!==null)return!1;for(var d=a.targetContainers;0<d.length;){var x=oa(a.domEventName,a.eventSystemFlags,d[0],a.nativeEvent);if(x===null){x=a.nativeEvent;var b=new x.constructor(x.type,x);ai=b,x.target.dispatchEvent(b),ai=null}else return d=sh(x),d!==null&&Wr(d),a.blockedOn=x,!1;d.shift()}return!0}function bo(a,d,x){ms(a)&&x.delete(d)}function Ls(){tc=!1,hr!==null&&ms(hr)&&(hr=null),Ui!==null&&ms(Ui)&&(Ui=null),ps!==null&&ms(ps)&&(ps=null),Nn.forEach(bo),Jr.forEach(bo)}function gs(a,d){a.blockedOn===d&&(a.blockedOn=null,tc||(tc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ls)))}function ci(a){function d(S){return gs(S,a)}if(0<Zi.length){gs(Zi[0],a);for(var x=1;x<Zi.length;x++){var b=Zi[x];b.blockedOn===a&&(b.blockedOn=null)}}for(hr!==null&&gs(hr,a),Ui!==null&&gs(Ui,a),ps!==null&&gs(ps,a),Nn.forEach(d),Jr.forEach(d),x=0;x<Hr.length;x++)b=Hr[x],b.blockedOn===a&&(b.blockedOn=null);for(;0<Hr.length&&(x=Hr[0],x.blockedOn===null);)pu(x),x.blockedOn===null&&Hr.shift()}var zi=Y.ReactCurrentBatchConfig,Ji=!0;function kn(a,d,x,b){var S=It,k=zi.transition;zi.transition=null;try{It=1,Js(a,d,x,b)}finally{It=S,zi.transition=k}}function sa(a,d,x,b){var S=It,k=zi.transition;zi.transition=null;try{It=4,Js(a,d,x,b)}finally{It=S,zi.transition=k}}function Js(a,d,x,b){if(Ji){var S=oa(a,d,x,b);if(S===null)Qg(a,d,b,fr,x),fu(a,b);else if(Tr(S,a,d,x,b))b.stopPropagation();else if(fu(a,b),d&4&&-1<xt.indexOf(a)){for(;S!==null;){var k=sh(S);if(k!==null&&qa(k),k=oa(a,d,x,b),k===null&&Qg(a,d,b,fr,x),k===S)break;S=k}S!==null&&b.stopPropagation()}else Qg(a,d,b,null,x)}}var fr=null;function oa(a,d,x,b){if(fr=null,a=jr(b),a=sc(a),a!==null)if(d=Zr(a),d===null)a=null;else if(x=d.tag,x===13){if(a=Os(d),a!==null)return a;a=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;a=null}else d!==a&&(a=null);return fr=a,null}function Ka(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ha()){case ke:return 1;case _o:return 4;case Jt:case Ms:return 16;case hu:return 536870912;default:return 16}default:return 16}}var Ii=null,Xa=null,Ai=null;function nc(){if(Ai)return Ai;var a,d=Xa,x=d.length,b,S="value"in Ii?Ii.value:Ii.textContent,k=S.length;for(a=0;a<x&&d[a]===S[a];a++);var $=x-a;for(b=1;b<=$&&d[x-b]===S[k-b];b++);return Ai=S.slice(a,1<b?1-b:void 0)}function en(a){var d=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&d===13&&(a=13)):a=d,a===10&&(a=13),32<=a||a===13?a:0}function ys(){return!0}function Io(){return!1}function Dn(a){function d(x,b,S,k,$){this._reactName=x,this._targetInst=S,this.type=b,this.nativeEvent=k,this.target=$,this.currentTarget=null;for(var re in a)a.hasOwnProperty(re)&&(x=a[re],this[re]=x?x(k):k[re]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?ys:Io,this.isPropagationStopped=Io,this}return Ne(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),d}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_e=Dn(xs),_t=Ne({},xs,{view:0,detail:0}),Cr=Dn(_t),eo,Vs,Ao,aa=Ne({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ao&&(Ao&&a.type==="mousemove"?(eo=a.screenX-Ao.screenX,Vs=a.screenY-Ao.screenY):Vs=eo=0,Ao=a),eo)},movementY:function(a){return"movementY"in a?a.movementY:Vs}}),Ya=Dn(aa),la=Ne({},aa,{dataTransfer:0}),Zn=Dn(la),To=Ne({},_t,{relatedTarget:0}),xn=Dn(To),ca=Ne({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),ui=Dn(ca),sn=Ne({},xs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ft=Dn(sn),mu=Ne({},xs,{data:0}),un=Dn(mu),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wi(a){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(a):(a=gu[a])?!!d[a]:!1}function ts(){return Wi}var _=Ne({},_t,{key:function(a){if(a.key){var d=es[a.key]||a.key;if(d!=="Unidentified")return d}return a.type==="keypress"?(a=en(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?pr[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(a){return a.type==="keypress"?en(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?en(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),N=Dn(_),V=Ne({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X=Dn(V),me=Ne({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Ie=Dn(me),He=Ne({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),dn=Dn(He),Un=Ne({},aa,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qt=Dn(Un),Pn=[9,13,27,32],zn=h&&"CompositionEvent"in window,Wn=null;h&&"documentMode"in document&&(Wn=document.documentMode);var Ti=h&&"TextEvent"in window&&!Wn,ei=h&&(!zn||Wn&&8<Wn&&11>=Wn),Qa=" ",yu=!1;function up(a,d){switch(a){case"keyup":return Pn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var di=!1;function qg(a,d){switch(a){case"compositionend":return Zd(d);case"keypress":return d.which!==32?null:(yu=!0,Qa);case"textInput":return a=d.data,a===Qa&&yu?null:a;default:return null}}function Jd(a,d){if(di)return a==="compositionend"||!zn&&up(a,d)?(a=nc(),Ai=Xa=Ii=null,di=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return ei&&d.locale!=="ko"?null:d.data;default:return null}}var rc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d==="input"?!!rc[a.type]:d==="textarea"}function ic(a,d,x,b){mt(b),d=fp(d,"onChange"),0<d.length&&(x=new _e("onChange","change",null,x,b),a.push({event:x,listeners:d}))}var j=null,s=null;function l(a){__(a,0)}function u(a){var d=vu(a);if(bt(d))return a}function f(a,d){if(a==="change")return d}var p=!1;if(h){var y;if(h){var v="oninput"in document;if(!v){var I=document.createElement("div");I.setAttribute("oninput","return;"),v=typeof I.oninput=="function"}y=v}else y=!1;p=y&&(!document.documentMode||9<document.documentMode)}function C(){j&&(j.detachEvent("onpropertychange",O),s=j=null)}function O(a){if(a.propertyName==="value"&&u(s)){var d=[];ic(d,s,a,jr(a)),Cn(l,d)}}function U(a,d,x){a==="focusin"?(C(),j=d,s=x,j.attachEvent("onpropertychange",O)):a==="focusout"&&C()}function q(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return u(s)}function J(a,d){if(a==="click")return u(d)}function le(a,d){if(a==="input"||a==="change")return u(d)}function ue(a,d){return a===d&&(a!==0||1/a===1/d)||a!==a&&d!==d}var fe=typeof Object.is=="function"?Object.is:ue;function Ee(a,d){if(fe(a,d))return!0;if(typeof a!="object"||a===null||typeof d!="object"||d===null)return!1;var x=Object.keys(a),b=Object.keys(d);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var S=x[b];if(!m.call(d,S)||!fe(a[S],d[S]))return!1}return!0}function Fe(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function je(a,d){var x=Fe(a);a=0;for(var b;x;){if(x.nodeType===3){if(b=a+x.textContent.length,a<=d&&b>=d)return{node:x,offset:d-a};a=b}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Fe(x)}}function Oe(a,d){return a&&d?a===d?!0:a&&a.nodeType===3?!1:d&&d.nodeType===3?Oe(a,d.parentNode):"contains"in a?a.contains(d):a.compareDocumentPosition?!!(a.compareDocumentPosition(d)&16):!1:!1}function Mt(){for(var a=window,d=ht();d instanceof a.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)a=d.contentWindow;else break;d=ht(a.document)}return d}function St(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d&&(d==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||d==="textarea"||a.contentEditable==="true")}function Ci(a){var d=Mt(),x=a.focusedElem,b=a.selectionRange;if(d!==x&&x&&x.ownerDocument&&Oe(x.ownerDocument.documentElement,x)){if(b!==null&&St(x)){if(d=b.start,a=b.end,a===void 0&&(a=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(a,x.value.length);else if(a=(d=x.ownerDocument||document)&&d.defaultView||window,a.getSelection){a=a.getSelection();var S=x.textContent.length,k=Math.min(b.start,S);b=b.end===void 0?k:Math.min(b.end,S),!a.extend&&k>b&&(S=b,b=k,k=S),S=je(x,k);var $=je(x,b);S&&$&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==$.node||a.focusOffset!==$.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),a.removeAllRanges(),k>b?(a.addRange(d),a.extend($.node,$.offset)):(d.setEnd($.node,$.offset),a.addRange(d)))}}for(d=[],a=x;a=a.parentNode;)a.nodeType===1&&d.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)a=d[x],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var ws=h&&"documentMode"in document&&11>=document.documentMode,Sr=null,hn=null,sr=null,hi=!1;function ua(a,d,x){var b=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;hi||Sr==null||Sr!==ht(b)||(b=Sr,"selectionStart"in b&&St(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),sr&&Ee(sr,b)||(sr=b,b=fp(hn,"onSelect"),0<b.length&&(d=new _e("onSelect","select",null,d,x),a.push({event:d,listeners:b}),d.target=Sr)))}function to(a,d){var x={};return x[a.toLowerCase()]=d.toLowerCase(),x["Webkit"+a]="webkit"+d,x["Moz"+a]="moz"+d,x}var Za={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},eh={},f_={};h&&(f_=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function dp(a){if(eh[a])return eh[a];if(!Za[a])return a;var d=Za[a],x;for(x in d)if(d.hasOwnProperty(x)&&x in f_)return eh[a]=d[x];return a}var p_=dp("animationend"),m_=dp("animationiteration"),g_=dp("animationstart"),y_=dp("transitionend"),x_=new Map,w_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(a,d){x_.set(a,d),o(d,[a])}for(var Kg=0;Kg<w_.length;Kg++){var Xg=w_[Kg],sD=Xg.toLowerCase(),oD=Xg[0].toUpperCase()+Xg.slice(1);Ja(sD,"on"+oD)}Ja(p_,"onAnimationEnd"),Ja(m_,"onAnimationIteration"),Ja(g_,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(y_,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aD=new Set("cancel close invalid load scroll toggle".split(" ").concat(th));function v_(a,d,x){var b=a.type||"unknown-event";a.currentTarget=x,Ur(b,d,void 0,a),a.currentTarget=null}function __(a,d){d=(d&4)!==0;for(var x=0;x<a.length;x++){var b=a[x],S=b.event;b=b.listeners;e:{var k=void 0;if(d)for(var $=b.length-1;0<=$;$--){var re=b[$],ce=re.instance,be=re.currentTarget;if(re=re.listener,ce!==k&&S.isPropagationStopped())break e;v_(S,re,be),k=ce}else for($=0;$<b.length;$++){if(re=b[$],ce=re.instance,be=re.currentTarget,re=re.listener,ce!==k&&S.isPropagationStopped())break e;v_(S,re,be),k=ce}}}if(jn)throw a=Ye,jn=!1,Ye=null,a}function Hn(a,d){var x=d[r1];x===void 0&&(x=d[r1]=new Set);var b=a+"__bubble";x.has(b)||(E_(d,a,2,!1),x.add(b))}function Yg(a,d,x){var b=0;d&&(b|=4),E_(x,a,b,d)}var hp="_reactListening"+Math.random().toString(36).slice(2);function nh(a){if(!a[hp]){a[hp]=!0,r.forEach(function(x){x!=="selectionchange"&&(aD.has(x)||Yg(x,!1,a),Yg(x,!0,a))});var d=a.nodeType===9?a:a.ownerDocument;d===null||d[hp]||(d[hp]=!0,Yg("selectionchange",!1,d))}}function E_(a,d,x,b){switch(Ka(d)){case 1:var S=kn;break;case 4:S=sa;break;default:S=Js}x=S.bind(null,d,x,a),S=void 0,!fs||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),b?S!==void 0?a.addEventListener(d,x,{capture:!0,passive:S}):a.addEventListener(d,x,!0):S!==void 0?a.addEventListener(d,x,{passive:S}):a.addEventListener(d,x,!1)}function Qg(a,d,x,b,S){var k=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var $=b.tag;if($===3||$===4){var re=b.stateNode.containerInfo;if(re===S||re.nodeType===8&&re.parentNode===S)break;if($===4)for($=b.return;$!==null;){var ce=$.tag;if((ce===3||ce===4)&&(ce=$.stateNode.containerInfo,ce===S||ce.nodeType===8&&ce.parentNode===S))return;$=$.return}for(;re!==null;){if($=sc(re),$===null)return;if(ce=$.tag,ce===5||ce===6){b=k=$;continue e}re=re.parentNode}}b=b.return}Cn(function(){var be=k,Me=jr(x),Ve=[];e:{var De=x_.get(a);if(De!==void 0){var Qe=_e,et=a;switch(a){case"keypress":if(en(x)===0)break e;case"keydown":case"keyup":Qe=N;break;case"focusin":et="focus",Qe=xn;break;case"focusout":et="blur",Qe=xn;break;case"beforeblur":case"afterblur":Qe=xn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=Ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=Zn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=Ie;break;case p_:case m_:case g_:Qe=ui;break;case y_:Qe=dn;break;case"scroll":Qe=Cr;break;case"wheel":Qe=qt;break;case"copy":case"cut":case"paste":Qe=ft;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=X}var ot=(d&4)!==0,Rr=!ot&&a==="scroll",ye=ot?De!==null?De+"Capture":null:De;ot=[];for(var de=be,ve;de!==null;){ve=de;var Ue=ve.stateNode;if(ve.tag===5&&Ue!==null&&(ve=Ue,ye!==null&&(Ue=Rt(de,ye),Ue!=null&&ot.push(rh(de,Ue,ve)))),Rr)break;de=de.return}0<ot.length&&(De=new Qe(De,et,null,x,Me),Ve.push({event:De,listeners:ot}))}}if((d&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",Qe=a==="mouseout"||a==="pointerout",De&&x!==ai&&(et=x.relatedTarget||x.fromElement)&&(sc(et)||et[da]))break e;if((Qe||De)&&(De=Me.window===Me?Me:(De=Me.ownerDocument)?De.defaultView||De.parentWindow:window,Qe?(et=x.relatedTarget||x.toElement,Qe=be,et=et?sc(et):null,et!==null&&(Rr=Zr(et),et!==Rr||et.tag!==5&&et.tag!==6)&&(et=null)):(Qe=null,et=be),Qe!==et)){if(ot=Ya,Ue="onMouseLeave",ye="onMouseEnter",de="mouse",(a==="pointerout"||a==="pointerover")&&(ot=X,Ue="onPointerLeave",ye="onPointerEnter",de="pointer"),Rr=Qe==null?De:vu(Qe),ve=et==null?De:vu(et),De=new ot(Ue,de+"leave",Qe,x,Me),De.target=Rr,De.relatedTarget=ve,Ue=null,sc(Me)===be&&(ot=new ot(ye,de+"enter",et,x,Me),ot.target=ve,ot.relatedTarget=Rr,Ue=ot),Rr=Ue,Qe&&et)t:{for(ot=Qe,ye=et,de=0,ve=ot;ve;ve=xu(ve))de++;for(ve=0,Ue=ye;Ue;Ue=xu(Ue))ve++;for(;0<de-ve;)ot=xu(ot),de--;for(;0<ve-de;)ye=xu(ye),ve--;for(;de--;){if(ot===ye||ye!==null&&ot===ye.alternate)break t;ot=xu(ot),ye=xu(ye)}ot=null}else ot=null;Qe!==null&&b_(Ve,De,Qe,ot,!1),et!==null&&Rr!==null&&b_(Ve,Rr,et,ot,!0)}}e:{if(De=be?vu(be):window,Qe=De.nodeName&&De.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&De.type==="file")var lt=f;else if(Kt(De))if(p)lt=le;else{lt=q;var wt=U}else(Qe=De.nodeName)&&Qe.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(lt=J);if(lt&&(lt=lt(a,be))){ic(Ve,lt,x,Me);break e}wt&&wt(a,De,be),a==="focusout"&&(wt=De._wrapperState)&&wt.controlled&&De.type==="number"&&pt(De,"number",De.value)}switch(wt=be?vu(be):window,a){case"focusin":(Kt(wt)||wt.contentEditable==="true")&&(Sr=wt,hn=be,sr=null);break;case"focusout":sr=hn=Sr=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,ua(Ve,x,Me);break;case"selectionchange":if(ws)break;case"keydown":case"keyup":ua(Ve,x,Me)}var vt;if(zn)e:{switch(a){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else di?up(a,x)&&(Tt="onCompositionEnd"):a==="keydown"&&x.keyCode===229&&(Tt="onCompositionStart");Tt&&(ei&&x.locale!=="ko"&&(di||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&di&&(vt=nc()):(Ii=Me,Xa="value"in Ii?Ii.value:Ii.textContent,di=!0)),wt=fp(be,Tt),0<wt.length&&(Tt=new un(Tt,a,null,x,Me),Ve.push({event:Tt,listeners:wt}),vt?Tt.data=vt:(vt=Zd(x),vt!==null&&(Tt.data=vt)))),(vt=Ti?qg(a,x):Jd(a,x))&&(be=fp(be,"onBeforeInput"),0<be.length&&(Me=new un("onBeforeInput","beforeinput",null,x,Me),Ve.push({event:Me,listeners:be}),Me.data=vt))}__(Ve,d)})}function rh(a,d,x){return{instance:a,listener:d,currentTarget:x}}function fp(a,d){for(var x=d+"Capture",b=[];a!==null;){var S=a,k=S.stateNode;S.tag===5&&k!==null&&(S=k,k=Rt(a,x),k!=null&&b.unshift(rh(a,k,S)),k=Rt(a,d),k!=null&&b.push(rh(a,k,S))),a=a.return}return b}function xu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function b_(a,d,x,b,S){for(var k=d._reactName,$=[];x!==null&&x!==b;){var re=x,ce=re.alternate,be=re.stateNode;if(ce!==null&&ce===b)break;re.tag===5&&be!==null&&(re=be,S?(ce=Rt(x,k),ce!=null&&$.unshift(rh(x,ce,re))):S||(ce=Rt(x,k),ce!=null&&$.push(rh(x,ce,re)))),x=x.return}$.length!==0&&a.push({event:d,listeners:$})}var lD=/\r\n?/g,cD=/\u0000|\uFFFD/g;function I_(a){return(typeof a=="string"?a:""+a).replace(lD,`
`).replace(cD,"")}function pp(a,d,x){if(d=I_(d),I_(a)!==d&&x)throw Error(t(425))}function mp(){}var Zg=null,Jg=null;function e1(a,d){return a==="textarea"||a==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var t1=typeof setTimeout=="function"?setTimeout:void 0,uD=typeof clearTimeout=="function"?clearTimeout:void 0,A_=typeof Promise=="function"?Promise:void 0,dD=typeof queueMicrotask=="function"?queueMicrotask:typeof A_<"u"?function(a){return A_.resolve(null).then(a).catch(hD)}:t1;function hD(a){setTimeout(function(){throw a})}function n1(a,d){var x=d,b=0;do{var S=x.nextSibling;if(a.removeChild(x),S&&S.nodeType===8)if(x=S.data,x==="/$"){if(b===0){a.removeChild(S),ci(d);return}b--}else x!=="$"&&x!=="$?"&&x!=="$!"||b++;x=S}while(x);ci(d)}function el(a){for(;a!=null;a=a.nextSibling){var d=a.nodeType;if(d===1||d===3)break;if(d===8){if(d=a.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return a}function T_(a){a=a.previousSibling;for(var d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return a;d--}else x==="/$"&&d++}a=a.previousSibling}return null}var wu=Math.random().toString(36).slice(2),Co="__reactFiber$"+wu,ih="__reactProps$"+wu,da="__reactContainer$"+wu,r1="__reactEvents$"+wu,fD="__reactListeners$"+wu,pD="__reactHandles$"+wu;function sc(a){var d=a[Co];if(d)return d;for(var x=a.parentNode;x;){if(d=x[da]||x[Co]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(a=T_(a);a!==null;){if(x=a[Co])return x;a=T_(a)}return d}a=x,x=a.parentNode}return null}function sh(a){return a=a[Co]||a[da],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function vu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function gp(a){return a[ih]||null}var i1=[],_u=-1;function tl(a){return{current:a}}function Gn(a){0>_u||(a.current=i1[_u],i1[_u]=null,_u--)}function On(a,d){_u++,i1[_u]=a.current,a.current=d}var nl={},Si=tl(nl),ns=tl(!1),oc=nl;function Eu(a,d){var x=a.type.contextTypes;if(!x)return nl;var b=a.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var S={},k;for(k in x)S[k]=d[k];return b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=S),S}function rs(a){return a=a.childContextTypes,a!=null}function yp(){Gn(ns),Gn(Si)}function C_(a,d,x){if(Si.current!==nl)throw Error(t(168));On(Si,d),On(ns,x)}function S_(a,d,x){var b=a.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return x;b=b.getChildContext();for(var S in b)if(!(S in d))throw Error(t(108,Pe(a)||"Unknown",S));return Ne({},x,b)}function xp(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||nl,oc=Si.current,On(Si,a),On(ns,ns.current),!0}function R_(a,d,x){var b=a.stateNode;if(!b)throw Error(t(169));x?(a=S_(a,d,oc),b.__reactInternalMemoizedMergedChildContext=a,Gn(ns),Gn(Si),On(Si,a)):Gn(ns),On(ns,x)}var ha=null,wp=!1,s1=!1;function N_(a){ha===null?ha=[a]:ha.push(a)}function mD(a){wp=!0,N_(a)}function rl(){if(!s1&&ha!==null){s1=!0;var a=0,d=It;try{var x=ha;for(It=1;a<x.length;a++){var b=x[a];do b=b(!0);while(b!==null)}ha=null,wp=!1}catch(S){throw ha!==null&&(ha=ha.slice(a+1)),li(ke,rl),S}finally{It=d,s1=!1}}return null}var bu=[],Iu=0,vp=null,_p=0,Fs=[],Bs=0,ac=null,fa=1,pa="";function lc(a,d){bu[Iu++]=_p,bu[Iu++]=vp,vp=a,_p=d}function k_(a,d,x){Fs[Bs++]=fa,Fs[Bs++]=pa,Fs[Bs++]=ac,ac=a;var b=fa;a=pa;var S=32-zr(b)-1;b&=~(1<<S),x+=1;var k=32-zr(d)+S;if(30<k){var $=S-S%5;k=(b&(1<<$)-1).toString(32),b>>=$,S-=$,fa=1<<32-zr(d)+S|x<<S|b,pa=k+a}else fa=1<<k|x<<S|b,pa=a}function o1(a){a.return!==null&&(lc(a,1),k_(a,1,0))}function a1(a){for(;a===vp;)vp=bu[--Iu],bu[Iu]=null,_p=bu[--Iu],bu[Iu]=null;for(;a===ac;)ac=Fs[--Bs],Fs[Bs]=null,pa=Fs[--Bs],Fs[Bs]=null,fa=Fs[--Bs],Fs[Bs]=null}var vs=null,_s=null,Jn=!1,no=null;function P_(a,d){var x=Ws(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=a,d=a.deletions,d===null?(a.deletions=[x],a.flags|=16):d.push(x)}function D_(a,d){switch(a.tag){case 5:var x=a.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(a.stateNode=d,vs=a,_s=el(d.firstChild),!0):!1;case 6:return d=a.pendingProps===""||d.nodeType!==3?null:d,d!==null?(a.stateNode=d,vs=a,_s=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=ac!==null?{id:fa,overflow:pa}:null,a.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=Ws(18,null,null,0),x.stateNode=d,x.return=a,a.child=x,vs=a,_s=null,!0):!1;default:return!1}}function l1(a){return(a.mode&1)!==0&&(a.flags&128)===0}function c1(a){if(Jn){var d=_s;if(d){var x=d;if(!D_(a,d)){if(l1(a))throw Error(t(418));d=el(x.nextSibling);var b=vs;d&&D_(a,d)?P_(b,x):(a.flags=a.flags&-4097|2,Jn=!1,vs=a)}}else{if(l1(a))throw Error(t(418));a.flags=a.flags&-4097|2,Jn=!1,vs=a}}}function O_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;vs=a}function Ep(a){if(a!==vs)return!1;if(!Jn)return O_(a),Jn=!0,!1;var d;if((d=a.tag!==3)&&!(d=a.tag!==5)&&(d=a.type,d=d!=="head"&&d!=="body"&&!e1(a.type,a.memoizedProps)),d&&(d=_s)){if(l1(a))throw M_(),Error(t(418));for(;d;)P_(a,d),d=el(d.nextSibling)}if(O_(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="/$"){if(d===0){_s=el(a.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}a=a.nextSibling}_s=null}}else _s=vs?el(a.stateNode.nextSibling):null;return!0}function M_(){for(var a=_s;a;)a=el(a.nextSibling)}function Au(){_s=vs=null,Jn=!1}function u1(a){no===null?no=[a]:no.push(a)}var gD=Y.ReactCurrentBatchConfig;function oh(a,d,x){if(a=x.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(t(309));var b=x.stateNode}if(!b)throw Error(t(147,a));var S=b,k=""+a;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===k?d.ref:(d=function($){var re=S.refs;$===null?delete re[k]:re[k]=$},d._stringRef=k,d)}if(typeof a!="string")throw Error(t(284));if(!x._owner)throw Error(t(290,a))}return a}function bp(a,d){throw a=Object.prototype.toString.call(d),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":a))}function L_(a){var d=a._init;return d(a._payload)}function V_(a){function d(ye,de){if(a){var ve=ye.deletions;ve===null?(ye.deletions=[de],ye.flags|=16):ve.push(de)}}function x(ye,de){if(!a)return null;for(;de!==null;)d(ye,de),de=de.sibling;return null}function b(ye,de){for(ye=new Map;de!==null;)de.key!==null?ye.set(de.key,de):ye.set(de.index,de),de=de.sibling;return ye}function S(ye,de){return ye=dl(ye,de),ye.index=0,ye.sibling=null,ye}function k(ye,de,ve){return ye.index=ve,a?(ve=ye.alternate,ve!==null?(ve=ve.index,ve<de?(ye.flags|=2,de):ve):(ye.flags|=2,de)):(ye.flags|=1048576,de)}function $(ye){return a&&ye.alternate===null&&(ye.flags|=2),ye}function re(ye,de,ve,Ue){return de===null||de.tag!==6?(de=ty(ve,ye.mode,Ue),de.return=ye,de):(de=S(de,ve),de.return=ye,de)}function ce(ye,de,ve,Ue){var lt=ve.type;return lt===F?Me(ye,de,ve.props.children,Ue,ve.key):de!==null&&(de.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ae&&L_(lt)===de.type)?(Ue=S(de,ve.props),Ue.ref=oh(ye,de,ve),Ue.return=ye,Ue):(Ue=qp(ve.type,ve.key,ve.props,null,ye.mode,Ue),Ue.ref=oh(ye,de,ve),Ue.return=ye,Ue)}function be(ye,de,ve,Ue){return de===null||de.tag!==4||de.stateNode.containerInfo!==ve.containerInfo||de.stateNode.implementation!==ve.implementation?(de=ny(ve,ye.mode,Ue),de.return=ye,de):(de=S(de,ve.children||[]),de.return=ye,de)}function Me(ye,de,ve,Ue,lt){return de===null||de.tag!==7?(de=gc(ve,ye.mode,Ue,lt),de.return=ye,de):(de=S(de,ve),de.return=ye,de)}function Ve(ye,de,ve){if(typeof de=="string"&&de!==""||typeof de=="number")return de=ty(""+de,ye.mode,ve),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Z:return ve=qp(de.type,de.key,de.props,null,ye.mode,ve),ve.ref=oh(ye,null,de),ve.return=ye,ve;case ie:return de=ny(de,ye.mode,ve),de.return=ye,de;case Ae:var Ue=de._init;return Ve(ye,Ue(de._payload),ve)}if(xi(de)||Te(de))return de=gc(de,ye.mode,ve,null),de.return=ye,de;bp(ye,de)}return null}function De(ye,de,ve,Ue){var lt=de!==null?de.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return lt!==null?null:re(ye,de,""+ve,Ue);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Z:return ve.key===lt?ce(ye,de,ve,Ue):null;case ie:return ve.key===lt?be(ye,de,ve,Ue):null;case Ae:return lt=ve._init,De(ye,de,lt(ve._payload),Ue)}if(xi(ve)||Te(ve))return lt!==null?null:Me(ye,de,ve,Ue,null);bp(ye,ve)}return null}function Qe(ye,de,ve,Ue,lt){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return ye=ye.get(ve)||null,re(de,ye,""+Ue,lt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case Z:return ye=ye.get(Ue.key===null?ve:Ue.key)||null,ce(de,ye,Ue,lt);case ie:return ye=ye.get(Ue.key===null?ve:Ue.key)||null,be(de,ye,Ue,lt);case Ae:var wt=Ue._init;return Qe(ye,de,ve,wt(Ue._payload),lt)}if(xi(Ue)||Te(Ue))return ye=ye.get(ve)||null,Me(de,ye,Ue,lt,null);bp(de,Ue)}return null}function et(ye,de,ve,Ue){for(var lt=null,wt=null,vt=de,Tt=de=0,ri=null;vt!==null&&Tt<ve.length;Tt++){vt.index>Tt?(ri=vt,vt=null):ri=vt.sibling;var on=De(ye,vt,ve[Tt],Ue);if(on===null){vt===null&&(vt=ri);break}a&&vt&&on.alternate===null&&d(ye,vt),de=k(on,de,Tt),wt===null?lt=on:wt.sibling=on,wt=on,vt=ri}if(Tt===ve.length)return x(ye,vt),Jn&&lc(ye,Tt),lt;if(vt===null){for(;Tt<ve.length;Tt++)vt=Ve(ye,ve[Tt],Ue),vt!==null&&(de=k(vt,de,Tt),wt===null?lt=vt:wt.sibling=vt,wt=vt);return Jn&&lc(ye,Tt),lt}for(vt=b(ye,vt);Tt<ve.length;Tt++)ri=Qe(vt,ye,Tt,ve[Tt],Ue),ri!==null&&(a&&ri.alternate!==null&&vt.delete(ri.key===null?Tt:ri.key),de=k(ri,de,Tt),wt===null?lt=ri:wt.sibling=ri,wt=ri);return a&&vt.forEach(function(hl){return d(ye,hl)}),Jn&&lc(ye,Tt),lt}function ot(ye,de,ve,Ue){var lt=Te(ve);if(typeof lt!="function")throw Error(t(150));if(ve=lt.call(ve),ve==null)throw Error(t(151));for(var wt=lt=null,vt=de,Tt=de=0,ri=null,on=ve.next();vt!==null&&!on.done;Tt++,on=ve.next()){vt.index>Tt?(ri=vt,vt=null):ri=vt.sibling;var hl=De(ye,vt,on.value,Ue);if(hl===null){vt===null&&(vt=ri);break}a&&vt&&hl.alternate===null&&d(ye,vt),de=k(hl,de,Tt),wt===null?lt=hl:wt.sibling=hl,wt=hl,vt=ri}if(on.done)return x(ye,vt),Jn&&lc(ye,Tt),lt;if(vt===null){for(;!on.done;Tt++,on=ve.next())on=Ve(ye,on.value,Ue),on!==null&&(de=k(on,de,Tt),wt===null?lt=on:wt.sibling=on,wt=on);return Jn&&lc(ye,Tt),lt}for(vt=b(ye,vt);!on.done;Tt++,on=ve.next())on=Qe(vt,ye,Tt,on.value,Ue),on!==null&&(a&&on.alternate!==null&&vt.delete(on.key===null?Tt:on.key),de=k(on,de,Tt),wt===null?lt=on:wt.sibling=on,wt=on);return a&&vt.forEach(function(XD){return d(ye,XD)}),Jn&&lc(ye,Tt),lt}function Rr(ye,de,ve,Ue){if(typeof ve=="object"&&ve!==null&&ve.type===F&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Z:e:{for(var lt=ve.key,wt=de;wt!==null;){if(wt.key===lt){if(lt=ve.type,lt===F){if(wt.tag===7){x(ye,wt.sibling),de=S(wt,ve.props.children),de.return=ye,ye=de;break e}}else if(wt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ae&&L_(lt)===wt.type){x(ye,wt.sibling),de=S(wt,ve.props),de.ref=oh(ye,wt,ve),de.return=ye,ye=de;break e}x(ye,wt);break}else d(ye,wt);wt=wt.sibling}ve.type===F?(de=gc(ve.props.children,ye.mode,Ue,ve.key),de.return=ye,ye=de):(Ue=qp(ve.type,ve.key,ve.props,null,ye.mode,Ue),Ue.ref=oh(ye,de,ve),Ue.return=ye,ye=Ue)}return $(ye);case ie:e:{for(wt=ve.key;de!==null;){if(de.key===wt)if(de.tag===4&&de.stateNode.containerInfo===ve.containerInfo&&de.stateNode.implementation===ve.implementation){x(ye,de.sibling),de=S(de,ve.children||[]),de.return=ye,ye=de;break e}else{x(ye,de);break}else d(ye,de);de=de.sibling}de=ny(ve,ye.mode,Ue),de.return=ye,ye=de}return $(ye);case Ae:return wt=ve._init,Rr(ye,de,wt(ve._payload),Ue)}if(xi(ve))return et(ye,de,ve,Ue);if(Te(ve))return ot(ye,de,ve,Ue);bp(ye,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,de!==null&&de.tag===6?(x(ye,de.sibling),de=S(de,ve),de.return=ye,ye=de):(x(ye,de),de=ty(ve,ye.mode,Ue),de.return=ye,ye=de),$(ye)):x(ye,de)}return Rr}var Tu=V_(!0),F_=V_(!1),Ip=tl(null),Ap=null,Cu=null,d1=null;function h1(){d1=Cu=Ap=null}function f1(a){var d=Ip.current;Gn(Ip),a._currentValue=d}function p1(a,d,x){for(;a!==null;){var b=a.alternate;if((a.childLanes&d)!==d?(a.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),a===x)break;a=a.return}}function Su(a,d){Ap=a,d1=Cu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&d)!==0&&(is=!0),a.firstContext=null)}function js(a){var d=a._currentValue;if(d1!==a)if(a={context:a,memoizedValue:d,next:null},Cu===null){if(Ap===null)throw Error(t(308));Cu=a,Ap.dependencies={lanes:0,firstContext:a}}else Cu=Cu.next=a;return d}var cc=null;function m1(a){cc===null?cc=[a]:cc.push(a)}function B_(a,d,x,b){var S=d.interleaved;return S===null?(x.next=x,m1(d)):(x.next=S.next,S.next=x),d.interleaved=x,ma(a,b)}function ma(a,d){a.lanes|=d;var x=a.alternate;for(x!==null&&(x.lanes|=d),x=a,a=a.return;a!==null;)a.childLanes|=d,x=a.alternate,x!==null&&(x.childLanes|=d),x=a,a=a.return;return x.tag===3?x.stateNode:null}var il=!1;function g1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j_(a,d){a=a.updateQueue,d.updateQueue===a&&(d.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ga(a,d){return{eventTime:a,lane:d,tag:0,payload:null,callback:null,next:null}}function sl(a,d,x){var b=a.updateQueue;if(b===null)return null;if(b=b.shared,(rn&2)!==0){var S=b.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),b.pending=d,ma(a,x)}return S=b.interleaved,S===null?(d.next=d,m1(b)):(d.next=S.next,S.next=d),b.interleaved=d,ma(a,x)}function Tp(a,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}function U_(a,d){var x=a.updateQueue,b=a.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var S=null,k=null;if(x=x.firstBaseUpdate,x!==null){do{var $={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};k===null?S=k=$:k=k.next=$,x=x.next}while(x!==null);k===null?S=k=d:k=k.next=d}else S=k=d;x={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:k,shared:b.shared,effects:b.effects},a.updateQueue=x;return}a=x.lastBaseUpdate,a===null?x.firstBaseUpdate=d:a.next=d,x.lastBaseUpdate=d}function Cp(a,d,x,b){var S=a.updateQueue;il=!1;var k=S.firstBaseUpdate,$=S.lastBaseUpdate,re=S.shared.pending;if(re!==null){S.shared.pending=null;var ce=re,be=ce.next;ce.next=null,$===null?k=be:$.next=be,$=ce;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,re=Me.lastBaseUpdate,re!==$&&(re===null?Me.firstBaseUpdate=be:re.next=be,Me.lastBaseUpdate=ce))}if(k!==null){var Ve=S.baseState;$=0,Me=be=ce=null,re=k;do{var De=re.lane,Qe=re.eventTime;if((b&De)===De){Me!==null&&(Me=Me.next={eventTime:Qe,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var et=a,ot=re;switch(De=d,Qe=x,ot.tag){case 1:if(et=ot.payload,typeof et=="function"){Ve=et.call(Qe,Ve,De);break e}Ve=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=ot.payload,De=typeof et=="function"?et.call(Qe,Ve,De):et,De==null)break e;Ve=Ne({},Ve,De);break e;case 2:il=!0}}re.callback!==null&&re.lane!==0&&(a.flags|=64,De=S.effects,De===null?S.effects=[re]:De.push(re))}else Qe={eventTime:Qe,lane:De,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Me===null?(be=Me=Qe,ce=Ve):Me=Me.next=Qe,$|=De;if(re=re.next,re===null){if(re=S.shared.pending,re===null)break;De=re,re=De.next,De.next=null,S.lastBaseUpdate=De,S.shared.pending=null}}while(!0);if(Me===null&&(ce=Ve),S.baseState=ce,S.firstBaseUpdate=be,S.lastBaseUpdate=Me,d=S.shared.interleaved,d!==null){S=d;do $|=S.lane,S=S.next;while(S!==d)}else k===null&&(S.shared.lanes=0);hc|=$,a.lanes=$,a.memoizedState=Ve}}function z_(a,d,x){if(a=d.effects,d.effects=null,a!==null)for(d=0;d<a.length;d++){var b=a[d],S=b.callback;if(S!==null){if(b.callback=null,b=x,typeof S!="function")throw Error(t(191,S));S.call(b)}}}var ah={},So=tl(ah),lh=tl(ah),ch=tl(ah);function uc(a){if(a===ah)throw Error(t(174));return a}function y1(a,d){switch(On(ch,d),On(lh,a),On(So,ah),a=d.nodeType,a){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Xn(null,"");break;default:a=a===8?d.parentNode:d,d=a.namespaceURI||null,a=a.tagName,d=Xn(d,a)}Gn(So),On(So,d)}function Ru(){Gn(So),Gn(lh),Gn(ch)}function W_(a){uc(ch.current);var d=uc(So.current),x=Xn(d,a.type);d!==x&&(On(lh,a),On(So,x))}function x1(a){lh.current===a&&(Gn(So),Gn(lh))}var or=tl(0);function Sp(a){for(var d=a;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var w1=[];function v1(){for(var a=0;a<w1.length;a++)w1[a]._workInProgressVersionPrimary=null;w1.length=0}var Rp=Y.ReactCurrentDispatcher,_1=Y.ReactCurrentBatchConfig,dc=0,ar=null,Gr=null,ti=null,Np=!1,uh=!1,dh=0,yD=0;function Ri(){throw Error(t(321))}function E1(a,d){if(d===null)return!1;for(var x=0;x<d.length&&x<a.length;x++)if(!fe(a[x],d[x]))return!1;return!0}function b1(a,d,x,b,S,k){if(dc=k,ar=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Rp.current=a===null||a.memoizedState===null?_D:ED,a=x(b,S),uh){k=0;do{if(uh=!1,dh=0,25<=k)throw Error(t(301));k+=1,ti=Gr=null,d.updateQueue=null,Rp.current=bD,a=x(b,S)}while(uh)}if(Rp.current=Dp,d=Gr!==null&&Gr.next!==null,dc=0,ti=Gr=ar=null,Np=!1,d)throw Error(t(300));return a}function I1(){var a=dh!==0;return dh=0,a}function Ro(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?ar.memoizedState=ti=a:ti=ti.next=a,ti}function Us(){if(Gr===null){var a=ar.alternate;a=a!==null?a.memoizedState:null}else a=Gr.next;var d=ti===null?ar.memoizedState:ti.next;if(d!==null)ti=d,Gr=a;else{if(a===null)throw Error(t(310));Gr=a,a={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},ti===null?ar.memoizedState=ti=a:ti=ti.next=a}return ti}function hh(a,d){return typeof d=="function"?d(a):d}function A1(a){var d=Us(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=Gr,S=b.baseQueue,k=x.pending;if(k!==null){if(S!==null){var $=S.next;S.next=k.next,k.next=$}b.baseQueue=S=k,x.pending=null}if(S!==null){k=S.next,b=b.baseState;var re=$=null,ce=null,be=k;do{var Me=be.lane;if((dc&Me)===Me)ce!==null&&(ce=ce.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),b=be.hasEagerState?be.eagerState:a(b,be.action);else{var Ve={lane:Me,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ce===null?(re=ce=Ve,$=b):ce=ce.next=Ve,ar.lanes|=Me,hc|=Me}be=be.next}while(be!==null&&be!==k);ce===null?$=b:ce.next=re,fe(b,d.memoizedState)||(is=!0),d.memoizedState=b,d.baseState=$,d.baseQueue=ce,x.lastRenderedState=b}if(a=x.interleaved,a!==null){S=a;do k=S.lane,ar.lanes|=k,hc|=k,S=S.next;while(S!==a)}else S===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function T1(a){var d=Us(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=x.dispatch,S=x.pending,k=d.memoizedState;if(S!==null){x.pending=null;var $=S=S.next;do k=a(k,$.action),$=$.next;while($!==S);fe(k,d.memoizedState)||(is=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),x.lastRenderedState=k}return[k,b]}function H_(){}function G_(a,d){var x=ar,b=Us(),S=d(),k=!fe(b.memoizedState,S);if(k&&(b.memoizedState=S,is=!0),b=b.queue,C1(K_.bind(null,x,b,a),[a]),b.getSnapshot!==d||k||ti!==null&&ti.memoizedState.tag&1){if(x.flags|=2048,fh(9,q_.bind(null,x,b,S,d),void 0,null),ni===null)throw Error(t(349));(dc&30)!==0||$_(x,d,S)}return S}function $_(a,d,x){a.flags|=16384,a={getSnapshot:d,value:x},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.stores=[a]):(x=d.stores,x===null?d.stores=[a]:x.push(a))}function q_(a,d,x,b){d.value=x,d.getSnapshot=b,X_(d)&&Y_(a)}function K_(a,d,x){return x(function(){X_(d)&&Y_(a)})}function X_(a){var d=a.getSnapshot;a=a.value;try{var x=d();return!fe(a,x)}catch{return!0}}function Y_(a){var d=ma(a,1);d!==null&&oo(d,a,1,-1)}function Q_(a){var d=Ro();return typeof a=="function"&&(a=a()),d.memoizedState=d.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hh,lastRenderedState:a},d.queue=a,a=a.dispatch=vD.bind(null,ar,a),[d.memoizedState,a]}function fh(a,d,x,b){return a={tag:a,create:d,destroy:x,deps:b,next:null},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.lastEffect=a.next=a):(x=d.lastEffect,x===null?d.lastEffect=a.next=a:(b=x.next,x.next=a,a.next=b,d.lastEffect=a)),a}function Z_(){return Us().memoizedState}function kp(a,d,x,b){var S=Ro();ar.flags|=a,S.memoizedState=fh(1|d,x,void 0,b===void 0?null:b)}function Pp(a,d,x,b){var S=Us();b=b===void 0?null:b;var k=void 0;if(Gr!==null){var $=Gr.memoizedState;if(k=$.destroy,b!==null&&E1(b,$.deps)){S.memoizedState=fh(d,x,k,b);return}}ar.flags|=a,S.memoizedState=fh(1|d,x,k,b)}function J_(a,d){return kp(8390656,8,a,d)}function C1(a,d){return Pp(2048,8,a,d)}function eE(a,d){return Pp(4,2,a,d)}function tE(a,d){return Pp(4,4,a,d)}function nE(a,d){if(typeof d=="function")return a=a(),d(a),function(){d(null)};if(d!=null)return a=a(),d.current=a,function(){d.current=null}}function rE(a,d,x){return x=x!=null?x.concat([a]):null,Pp(4,4,nE.bind(null,d,a),x)}function S1(){}function iE(a,d){var x=Us();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&E1(d,b[1])?b[0]:(x.memoizedState=[a,d],a)}function sE(a,d){var x=Us();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&E1(d,b[1])?b[0]:(a=a(),x.memoizedState=[a,d],a)}function oE(a,d,x){return(dc&21)===0?(a.baseState&&(a.baseState=!1,is=!0),a.memoizedState=x):(fe(x,d)||(x=Qn(),ar.lanes|=x,hc|=x,a.baseState=!0),d)}function xD(a,d){var x=It;It=x!==0&&4>x?x:4,a(!0);var b=_1.transition;_1.transition={};try{a(!1),d()}finally{It=x,_1.transition=b}}function aE(){return Us().memoizedState}function wD(a,d,x){var b=cl(a);if(x={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null},lE(a))cE(d,x);else if(x=B_(a,d,x,b),x!==null){var S=Gi();oo(x,a,b,S),uE(x,d,b)}}function vD(a,d,x){var b=cl(a),S={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null};if(lE(a))cE(d,S);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var $=d.lastRenderedState,re=k($,x);if(S.hasEagerState=!0,S.eagerState=re,fe(re,$)){var ce=d.interleaved;ce===null?(S.next=S,m1(d)):(S.next=ce.next,ce.next=S),d.interleaved=S;return}}catch{}finally{}x=B_(a,d,S,b),x!==null&&(S=Gi(),oo(x,a,b,S),uE(x,d,b))}}function lE(a){var d=a.alternate;return a===ar||d!==null&&d===ar}function cE(a,d){uh=Np=!0;var x=a.pending;x===null?d.next=d:(d.next=x.next,x.next=d),a.pending=d}function uE(a,d,x){if((x&4194240)!==0){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}var Dp={readContext:js,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},_D={readContext:js,useCallback:function(a,d){return Ro().memoizedState=[a,d===void 0?null:d],a},useContext:js,useEffect:J_,useImperativeHandle:function(a,d,x){return x=x!=null?x.concat([a]):null,kp(4194308,4,nE.bind(null,d,a),x)},useLayoutEffect:function(a,d){return kp(4194308,4,a,d)},useInsertionEffect:function(a,d){return kp(4,2,a,d)},useMemo:function(a,d){var x=Ro();return d=d===void 0?null:d,a=a(),x.memoizedState=[a,d],a},useReducer:function(a,d,x){var b=Ro();return d=x!==void 0?x(d):d,b.memoizedState=b.baseState=d,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:d},b.queue=a,a=a.dispatch=wD.bind(null,ar,a),[b.memoizedState,a]},useRef:function(a){var d=Ro();return a={current:a},d.memoizedState=a},useState:Q_,useDebugValue:S1,useDeferredValue:function(a){return Ro().memoizedState=a},useTransition:function(){var a=Q_(!1),d=a[0];return a=xD.bind(null,a[1]),Ro().memoizedState=a,[d,a]},useMutableSource:function(){},useSyncExternalStore:function(a,d,x){var b=ar,S=Ro();if(Jn){if(x===void 0)throw Error(t(407));x=x()}else{if(x=d(),ni===null)throw Error(t(349));(dc&30)!==0||$_(b,d,x)}S.memoizedState=x;var k={value:x,getSnapshot:d};return S.queue=k,J_(K_.bind(null,b,k,a),[a]),b.flags|=2048,fh(9,q_.bind(null,b,k,x,d),void 0,null),x},useId:function(){var a=Ro(),d=ni.identifierPrefix;if(Jn){var x=pa,b=fa;x=(b&~(1<<32-zr(b)-1)).toString(32)+x,d=":"+d+"R"+x,x=dh++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=yD++,d=":"+d+"r"+x.toString(32)+":";return a.memoizedState=d},unstable_isNewReconciler:!1},ED={readContext:js,useCallback:iE,useContext:js,useEffect:C1,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:A1,useRef:Z_,useState:function(){return A1(hh)},useDebugValue:S1,useDeferredValue:function(a){var d=Us();return oE(d,Gr.memoizedState,a)},useTransition:function(){var a=A1(hh)[0],d=Us().memoizedState;return[a,d]},useMutableSource:H_,useSyncExternalStore:G_,useId:aE,unstable_isNewReconciler:!1},bD={readContext:js,useCallback:iE,useContext:js,useEffect:C1,useImperativeHandle:rE,useInsertionEffect:eE,useLayoutEffect:tE,useMemo:sE,useReducer:T1,useRef:Z_,useState:function(){return T1(hh)},useDebugValue:S1,useDeferredValue:function(a){var d=Us();return Gr===null?d.memoizedState=a:oE(d,Gr.memoizedState,a)},useTransition:function(){var a=T1(hh)[0],d=Us().memoizedState;return[a,d]},useMutableSource:H_,useSyncExternalStore:G_,useId:aE,unstable_isNewReconciler:!1};function ro(a,d){if(a&&a.defaultProps){d=Ne({},d),a=a.defaultProps;for(var x in a)d[x]===void 0&&(d[x]=a[x]);return d}return d}function R1(a,d,x,b){d=a.memoizedState,x=x(b,d),x=x==null?d:Ne({},d,x),a.memoizedState=x,a.lanes===0&&(a.updateQueue.baseState=x)}var Op={isMounted:function(a){return(a=a._reactInternals)?Zr(a)===a:!1},enqueueSetState:function(a,d,x){a=a._reactInternals;var b=Gi(),S=cl(a),k=ga(b,S);k.payload=d,x!=null&&(k.callback=x),d=sl(a,k,S),d!==null&&(oo(d,a,S,b),Tp(d,a,S))},enqueueReplaceState:function(a,d,x){a=a._reactInternals;var b=Gi(),S=cl(a),k=ga(b,S);k.tag=1,k.payload=d,x!=null&&(k.callback=x),d=sl(a,k,S),d!==null&&(oo(d,a,S,b),Tp(d,a,S))},enqueueForceUpdate:function(a,d){a=a._reactInternals;var x=Gi(),b=cl(a),S=ga(x,b);S.tag=2,d!=null&&(S.callback=d),d=sl(a,S,b),d!==null&&(oo(d,a,b,x),Tp(d,a,b))}};function dE(a,d,x,b,S,k,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(b,k,$):d.prototype&&d.prototype.isPureReactComponent?!Ee(x,b)||!Ee(S,k):!0}function hE(a,d,x){var b=!1,S=nl,k=d.contextType;return typeof k=="object"&&k!==null?k=js(k):(S=rs(d)?oc:Si.current,b=d.contextTypes,k=(b=b!=null)?Eu(a,S):nl),d=new d(x,k),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Op,a.stateNode=d,d._reactInternals=a,b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=k),d}function fE(a,d,x,b){a=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,b),d.state!==a&&Op.enqueueReplaceState(d,d.state,null)}function N1(a,d,x,b){var S=a.stateNode;S.props=x,S.state=a.memoizedState,S.refs={},g1(a);var k=d.contextType;typeof k=="object"&&k!==null?S.context=js(k):(k=rs(d)?oc:Si.current,S.context=Eu(a,k)),S.state=a.memoizedState,k=d.getDerivedStateFromProps,typeof k=="function"&&(R1(a,d,k,x),S.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&Op.enqueueReplaceState(S,S.state,null),Cp(a,x,S,b),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function Nu(a,d){try{var x="",b=d;do x+=it(b),b=b.return;while(b);var S=x}catch(k){S=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:d,stack:S,digest:null}}function k1(a,d,x){return{value:a,source:null,stack:x??null,digest:d??null}}function P1(a,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var ID=typeof WeakMap=="function"?WeakMap:Map;function pE(a,d,x){x=ga(-1,x),x.tag=3,x.payload={element:null};var b=d.value;return x.callback=function(){Up||(Up=!0,q1=b),P1(a,d)},x}function mE(a,d,x){x=ga(-1,x),x.tag=3;var b=a.type.getDerivedStateFromError;if(typeof b=="function"){var S=d.value;x.payload=function(){return b(S)},x.callback=function(){P1(a,d)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(x.callback=function(){P1(a,d),typeof b!="function"&&(al===null?al=new Set([this]):al.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})}),x}function gE(a,d,x){var b=a.pingCache;if(b===null){b=a.pingCache=new ID;var S=new Set;b.set(d,S)}else S=b.get(d),S===void 0&&(S=new Set,b.set(d,S));S.has(x)||(S.add(x),a=FD.bind(null,a,d,x),d.then(a,a))}function yE(a){do{var d;if((d=a.tag===13)&&(d=a.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return a;a=a.return}while(a!==null);return null}function xE(a,d,x,b,S){return(a.mode&1)===0?(a===d?a.flags|=65536:(a.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=ga(-1,1),d.tag=2,sl(x,d,1))),x.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var AD=Y.ReactCurrentOwner,is=!1;function Hi(a,d,x,b){d.child=a===null?F_(d,null,x,b):Tu(d,a.child,x,b)}function wE(a,d,x,b,S){x=x.render;var k=d.ref;return Su(d,S),b=b1(a,d,x,b,k,S),x=I1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,ya(a,d,S)):(Jn&&x&&o1(d),d.flags|=1,Hi(a,d,b,S),d.child)}function vE(a,d,x,b,S){if(a===null){var k=x.type;return typeof k=="function"&&!ey(k)&&k.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=k,_E(a,d,k,b,S)):(a=qp(x.type,null,b,d,d.mode,S),a.ref=d.ref,a.return=d,d.child=a)}if(k=a.child,(a.lanes&S)===0){var $=k.memoizedProps;if(x=x.compare,x=x!==null?x:Ee,x($,b)&&a.ref===d.ref)return ya(a,d,S)}return d.flags|=1,a=dl(k,b),a.ref=d.ref,a.return=d,d.child=a}function _E(a,d,x,b,S){if(a!==null){var k=a.memoizedProps;if(Ee(k,b)&&a.ref===d.ref)if(is=!1,d.pendingProps=b=k,(a.lanes&S)!==0)(a.flags&131072)!==0&&(is=!0);else return d.lanes=a.lanes,ya(a,d,S)}return D1(a,d,x,b,S)}function EE(a,d,x){var b=d.pendingProps,S=b.children,k=a!==null?a.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(Pu,Es),Es|=x;else{if((x&1073741824)===0)return a=k!==null?k.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:a,cachePool:null,transitions:null},d.updateQueue=null,On(Pu,Es),Es|=a,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=k!==null?k.baseLanes:x,On(Pu,Es),Es|=b}else k!==null?(b=k.baseLanes|x,d.memoizedState=null):b=x,On(Pu,Es),Es|=b;return Hi(a,d,S,x),d.child}function bE(a,d){var x=d.ref;(a===null&&x!==null||a!==null&&a.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function D1(a,d,x,b,S){var k=rs(x)?oc:Si.current;return k=Eu(d,k),Su(d,S),x=b1(a,d,x,b,k,S),b=I1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,ya(a,d,S)):(Jn&&b&&o1(d),d.flags|=1,Hi(a,d,x,S),d.child)}function IE(a,d,x,b,S){if(rs(x)){var k=!0;xp(d)}else k=!1;if(Su(d,S),d.stateNode===null)Lp(a,d),hE(d,x,b),N1(d,x,b,S),b=!0;else if(a===null){var $=d.stateNode,re=d.memoizedProps;$.props=re;var ce=$.context,be=x.contextType;typeof be=="object"&&be!==null?be=js(be):(be=rs(x)?oc:Si.current,be=Eu(d,be));var Me=x.getDerivedStateFromProps,Ve=typeof Me=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ve||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(re!==b||ce!==be)&&fE(d,$,b,be),il=!1;var De=d.memoizedState;$.state=De,Cp(d,b,$,S),ce=d.memoizedState,re!==b||De!==ce||ns.current||il?(typeof Me=="function"&&(R1(d,x,Me,b),ce=d.memoizedState),(re=il||dE(d,x,re,b,De,ce,be))?(Ve||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ce),$.props=b,$.state=ce,$.context=be,b=re):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{$=d.stateNode,j_(a,d),re=d.memoizedProps,be=d.type===d.elementType?re:ro(d.type,re),$.props=be,Ve=d.pendingProps,De=$.context,ce=x.contextType,typeof ce=="object"&&ce!==null?ce=js(ce):(ce=rs(x)?oc:Si.current,ce=Eu(d,ce));var Qe=x.getDerivedStateFromProps;(Me=typeof Qe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(re!==Ve||De!==ce)&&fE(d,$,b,ce),il=!1,De=d.memoizedState,$.state=De,Cp(d,b,$,S);var et=d.memoizedState;re!==Ve||De!==et||ns.current||il?(typeof Qe=="function"&&(R1(d,x,Qe,b),et=d.memoizedState),(be=il||dE(d,x,be,b,De,et,ce)||!1)?(Me||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(b,et,ce),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(b,et,ce)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=et),$.props=b,$.state=et,$.context=ce,b=be):(typeof $.componentDidUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),b=!1)}return O1(a,d,x,b,k,S)}function O1(a,d,x,b,S,k){bE(a,d);var $=(d.flags&128)!==0;if(!b&&!$)return S&&R_(d,x,!1),ya(a,d,k);b=d.stateNode,AD.current=d;var re=$&&typeof x.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,a!==null&&$?(d.child=Tu(d,a.child,null,k),d.child=Tu(d,null,re,k)):Hi(a,d,re,k),d.memoizedState=b.state,S&&R_(d,x,!0),d.child}function AE(a){var d=a.stateNode;d.pendingContext?C_(a,d.pendingContext,d.pendingContext!==d.context):d.context&&C_(a,d.context,!1),y1(a,d.containerInfo)}function TE(a,d,x,b,S){return Au(),u1(S),d.flags|=256,Hi(a,d,x,b),d.child}var M1={dehydrated:null,treeContext:null,retryLane:0};function L1(a){return{baseLanes:a,cachePool:null,transitions:null}}function CE(a,d,x){var b=d.pendingProps,S=or.current,k=!1,$=(d.flags&128)!==0,re;if((re=$)||(re=a!==null&&a.memoizedState===null?!1:(S&2)!==0),re?(k=!0,d.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),On(or,S&1),a===null)return c1(d),a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((d.mode&1)===0?d.lanes=1:a.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($=b.children,a=b.fallback,k?(b=d.mode,k=d.child,$={mode:"hidden",children:$},(b&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=$):k=Kp($,b,0,null),a=gc(a,b,x,null),k.return=d,a.return=d,k.sibling=a,d.child=k,d.child.memoizedState=L1(x),d.memoizedState=M1,a):V1(d,$));if(S=a.memoizedState,S!==null&&(re=S.dehydrated,re!==null))return TD(a,d,$,b,re,S,x);if(k){k=b.fallback,$=d.mode,S=a.child,re=S.sibling;var ce={mode:"hidden",children:b.children};return($&1)===0&&d.child!==S?(b=d.child,b.childLanes=0,b.pendingProps=ce,d.deletions=null):(b=dl(S,ce),b.subtreeFlags=S.subtreeFlags&14680064),re!==null?k=dl(re,k):(k=gc(k,$,x,null),k.flags|=2),k.return=d,b.return=d,b.sibling=k,d.child=b,b=k,k=d.child,$=a.child.memoizedState,$=$===null?L1(x):{baseLanes:$.baseLanes|x,cachePool:null,transitions:$.transitions},k.memoizedState=$,k.childLanes=a.childLanes&~x,d.memoizedState=M1,b}return k=a.child,a=k.sibling,b=dl(k,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=x),b.return=d,b.sibling=null,a!==null&&(x=d.deletions,x===null?(d.deletions=[a],d.flags|=16):x.push(a)),d.child=b,d.memoizedState=null,b}function V1(a,d){return d=Kp({mode:"visible",children:d},a.mode,0,null),d.return=a,a.child=d}function Mp(a,d,x,b){return b!==null&&u1(b),Tu(d,a.child,null,x),a=V1(d,d.pendingProps.children),a.flags|=2,d.memoizedState=null,a}function TD(a,d,x,b,S,k,$){if(x)return d.flags&256?(d.flags&=-257,b=k1(Error(t(422))),Mp(a,d,$,b)):d.memoizedState!==null?(d.child=a.child,d.flags|=128,null):(k=b.fallback,S=d.mode,b=Kp({mode:"visible",children:b.children},S,0,null),k=gc(k,S,$,null),k.flags|=2,b.return=d,k.return=d,b.sibling=k,d.child=b,(d.mode&1)!==0&&Tu(d,a.child,null,$),d.child.memoizedState=L1($),d.memoizedState=M1,k);if((d.mode&1)===0)return Mp(a,d,$,null);if(S.data==="$!"){if(b=S.nextSibling&&S.nextSibling.dataset,b)var re=b.dgst;return b=re,k=Error(t(419)),b=k1(k,b,void 0),Mp(a,d,$,b)}if(re=($&a.childLanes)!==0,is||re){if(b=ni,b!==null){switch($&-$){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(b.suspendedLanes|$))!==0?0:S,S!==0&&S!==k.retryLane&&(k.retryLane=S,ma(a,S),oo(b,a,S,-1))}return J1(),b=k1(Error(t(421))),Mp(a,d,$,b)}return S.data==="$?"?(d.flags|=128,d.child=a.child,d=BD.bind(null,a),S._reactRetry=d,null):(a=k.treeContext,_s=el(S.nextSibling),vs=d,Jn=!0,no=null,a!==null&&(Fs[Bs++]=fa,Fs[Bs++]=pa,Fs[Bs++]=ac,fa=a.id,pa=a.overflow,ac=d),d=V1(d,b.children),d.flags|=4096,d)}function SE(a,d,x){a.lanes|=d;var b=a.alternate;b!==null&&(b.lanes|=d),p1(a.return,d,x)}function F1(a,d,x,b,S){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:S}:(k.isBackwards=d,k.rendering=null,k.renderingStartTime=0,k.last=b,k.tail=x,k.tailMode=S)}function RE(a,d,x){var b=d.pendingProps,S=b.revealOrder,k=b.tail;if(Hi(a,d,b.children,x),b=or.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=d.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&SE(a,x,d);else if(a.tag===19)SE(a,x,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===d)break e;for(;a.sibling===null;){if(a.return===null||a.return===d)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}b&=1}if(On(or,b),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(x=d.child,S=null;x!==null;)a=x.alternate,a!==null&&Sp(a)===null&&(S=x),x=x.sibling;x=S,x===null?(S=d.child,d.child=null):(S=x.sibling,x.sibling=null),F1(d,!1,S,x,k);break;case"backwards":for(x=null,S=d.child,d.child=null;S!==null;){if(a=S.alternate,a!==null&&Sp(a)===null){d.child=S;break}a=S.sibling,S.sibling=x,x=S,S=a}F1(d,!0,x,null,k);break;case"together":F1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Lp(a,d){(d.mode&1)===0&&a!==null&&(a.alternate=null,d.alternate=null,d.flags|=2)}function ya(a,d,x){if(a!==null&&(d.dependencies=a.dependencies),hc|=d.lanes,(x&d.childLanes)===0)return null;if(a!==null&&d.child!==a.child)throw Error(t(153));if(d.child!==null){for(a=d.child,x=dl(a,a.pendingProps),d.child=x,x.return=d;a.sibling!==null;)a=a.sibling,x=x.sibling=dl(a,a.pendingProps),x.return=d;x.sibling=null}return d.child}function CD(a,d,x){switch(d.tag){case 3:AE(d),Au();break;case 5:W_(d);break;case 1:rs(d.type)&&xp(d);break;case 4:y1(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,S=d.memoizedProps.value;On(Ip,b._currentValue),b._currentValue=S;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(On(or,or.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?CE(a,d,x):(On(or,or.current&1),a=ya(a,d,x),a!==null?a.sibling:null);On(or,or.current&1);break;case 19:if(b=(x&d.childLanes)!==0,(a.flags&128)!==0){if(b)return RE(a,d,x);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),On(or,or.current),b)break;return null;case 22:case 23:return d.lanes=0,EE(a,d,x)}return ya(a,d,x)}var NE,B1,kE,PE;NE=function(a,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},B1=function(){},kE=function(a,d,x,b){var S=a.memoizedProps;if(S!==b){a=d.stateNode,uc(So.current);var k=null;switch(x){case"input":S=gn(a,S),b=gn(a,b),k=[];break;case"select":S=Ne({},S,{value:void 0}),b=Ne({},b,{value:void 0}),k=[];break;case"textarea":S=Kn(a,S),b=Kn(a,b),k=[];break;default:typeof S.onClick!="function"&&typeof b.onClick=="function"&&(a.onclick=mp)}Ht(x,b);var $;x=null;for(be in S)if(!b.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var re=S[be];for($ in re)re.hasOwnProperty($)&&(x||(x={}),x[$]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(i.hasOwnProperty(be)?k||(k=[]):(k=k||[]).push(be,null));for(be in b){var ce=b[be];if(re=S!=null?S[be]:void 0,b.hasOwnProperty(be)&&ce!==re&&(ce!=null||re!=null))if(be==="style")if(re){for($ in re)!re.hasOwnProperty($)||ce&&ce.hasOwnProperty($)||(x||(x={}),x[$]="");for($ in ce)ce.hasOwnProperty($)&&re[$]!==ce[$]&&(x||(x={}),x[$]=ce[$])}else x||(k||(k=[]),k.push(be,x)),x=ce;else be==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,re=re?re.__html:void 0,ce!=null&&re!==ce&&(k=k||[]).push(be,ce)):be==="children"?typeof ce!="string"&&typeof ce!="number"||(k=k||[]).push(be,""+ce):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(i.hasOwnProperty(be)?(ce!=null&&be==="onScroll"&&Hn("scroll",a),k||re===ce||(k=[])):(k=k||[]).push(be,ce))}x&&(k=k||[]).push("style",x);var be=k;(d.updateQueue=be)&&(d.flags|=4)}},PE=function(a,d,x,b){x!==b&&(d.flags|=4)};function ph(a,d){if(!Jn)switch(a.tailMode){case"hidden":d=a.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?a.tail=null:x.sibling=null;break;case"collapsed":x=a.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?d||a.tail===null?a.tail=null:a.tail.sibling=null:b.sibling=null}}function Ni(a){var d=a.alternate!==null&&a.alternate.child===a.child,x=0,b=0;if(d)for(var S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags&14680064,b|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=b,a.childLanes=x,d}function SD(a,d,x){var b=d.pendingProps;switch(a1(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(d),null;case 1:return rs(d.type)&&yp(),Ni(d),null;case 3:return b=d.stateNode,Ru(),Gn(ns),Gn(Si),v1(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(a===null||a.child===null)&&(Ep(d)?d.flags|=4:a===null||a.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,no!==null&&(Y1(no),no=null))),B1(a,d),Ni(d),null;case 5:x1(d);var S=uc(ch.current);if(x=d.type,a!==null&&d.stateNode!=null)kE(a,d,x,b,S),a.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(t(166));return Ni(d),null}if(a=uc(So.current),Ep(d)){b=d.stateNode,x=d.type;var k=d.memoizedProps;switch(b[Co]=d,b[ih]=k,a=(d.mode&1)!==0,x){case"dialog":Hn("cancel",b),Hn("close",b);break;case"iframe":case"object":case"embed":Hn("load",b);break;case"video":case"audio":for(S=0;S<th.length;S++)Hn(th[S],b);break;case"source":Hn("error",b);break;case"img":case"image":case"link":Hn("error",b),Hn("load",b);break;case"details":Hn("toggle",b);break;case"input":Vn(b,k),Hn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!k.multiple},Hn("invalid",b);break;case"textarea":wi(b,k),Hn("invalid",b)}Ht(x,k),S=null;for(var $ in k)if(k.hasOwnProperty($)){var re=k[$];$==="children"?typeof re=="string"?b.textContent!==re&&(k.suppressHydrationWarning!==!0&&pp(b.textContent,re,a),S=["children",re]):typeof re=="number"&&b.textContent!==""+re&&(k.suppressHydrationWarning!==!0&&pp(b.textContent,re,a),S=["children",""+re]):i.hasOwnProperty($)&&re!=null&&$==="onScroll"&&Hn("scroll",b)}switch(x){case"input":ct(b),zt(b,k,!0);break;case"textarea":ct(b),Qs(b);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(b.onclick=mp)}b=S,d.updateQueue=b,b!==null&&(d.flags|=4)}else{$=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Wt(x)),a==="http://www.w3.org/1999/xhtml"?x==="script"?(a=$.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof b.is=="string"?a=$.createElement(x,{is:b.is}):(a=$.createElement(x),x==="select"&&($=a,b.multiple?$.multiple=!0:b.size&&($.size=b.size))):a=$.createElementNS(a,x),a[Co]=d,a[ih]=b,NE(a,d,!1,!1),d.stateNode=a;e:{switch($=pn(x,b),x){case"dialog":Hn("cancel",a),Hn("close",a),S=b;break;case"iframe":case"object":case"embed":Hn("load",a),S=b;break;case"video":case"audio":for(S=0;S<th.length;S++)Hn(th[S],a);S=b;break;case"source":Hn("error",a),S=b;break;case"img":case"image":case"link":Hn("error",a),Hn("load",a),S=b;break;case"details":Hn("toggle",a),S=b;break;case"input":Vn(a,b),S=gn(a,b),Hn("invalid",a);break;case"option":S=b;break;case"select":a._wrapperState={wasMultiple:!!b.multiple},S=Ne({},b,{value:void 0}),Hn("invalid",a);break;case"textarea":wi(a,b),S=Kn(a,b),Hn("invalid",a);break;default:S=b}Ht(x,S),re=S;for(k in re)if(re.hasOwnProperty(k)){var ce=re[k];k==="style"?We(a,ce):k==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&Fn(a,ce)):k==="children"?typeof ce=="string"?(x!=="textarea"||ce!=="")&&Qr(a,ce):typeof ce=="number"&&Qr(a,""+ce):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?ce!=null&&k==="onScroll"&&Hn("scroll",a):ce!=null&&W(a,k,ce,$))}switch(x){case"input":ct(a),zt(a,b,!1);break;case"textarea":ct(a),Qs(a);break;case"option":b.value!=null&&a.setAttribute("value",""+Ge(b.value));break;case"select":a.multiple=!!b.multiple,k=b.value,k!=null?Xe(a,!!b.multiple,k,!1):b.defaultValue!=null&&Xe(a,!!b.multiple,b.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=mp)}switch(x){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ni(d),null;case 6:if(a&&d.stateNode!=null)PE(a,d,a.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(t(166));if(x=uc(ch.current),uc(So.current),Ep(d)){if(b=d.stateNode,x=d.memoizedProps,b[Co]=d,(k=b.nodeValue!==x)&&(a=vs,a!==null))switch(a.tag){case 3:pp(b.nodeValue,x,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&pp(b.nodeValue,x,(a.mode&1)!==0)}k&&(d.flags|=4)}else b=(x.nodeType===9?x:x.ownerDocument).createTextNode(b),b[Co]=d,d.stateNode=b}return Ni(d),null;case 13:if(Gn(or),b=d.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Jn&&_s!==null&&(d.mode&1)!==0&&(d.flags&128)===0)M_(),Au(),d.flags|=98560,k=!1;else if(k=Ep(d),b!==null&&b.dehydrated!==null){if(a===null){if(!k)throw Error(t(318));if(k=d.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[Co]=d}else Au(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ni(d),k=!1}else no!==null&&(Y1(no),no=null),k=!0;if(!k)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(b=b!==null,b!==(a!==null&&a.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(a===null||(or.current&1)!==0?$r===0&&($r=3):J1())),d.updateQueue!==null&&(d.flags|=4),Ni(d),null);case 4:return Ru(),B1(a,d),a===null&&nh(d.stateNode.containerInfo),Ni(d),null;case 10:return f1(d.type._context),Ni(d),null;case 17:return rs(d.type)&&yp(),Ni(d),null;case 19:if(Gn(or),k=d.memoizedState,k===null)return Ni(d),null;if(b=(d.flags&128)!==0,$=k.rendering,$===null)if(b)ph(k,!1);else{if($r!==0||a!==null&&(a.flags&128)!==0)for(a=d.child;a!==null;){if($=Sp(a),$!==null){for(d.flags|=128,ph(k,!1),b=$.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=x,x=d.child;x!==null;)k=x,a=b,k.flags&=14680066,$=k.alternate,$===null?(k.childLanes=0,k.lanes=a,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=$.childLanes,k.lanes=$.lanes,k.child=$.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=$.memoizedProps,k.memoizedState=$.memoizedState,k.updateQueue=$.updateQueue,k.type=$.type,a=$.dependencies,k.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),x=x.sibling;return On(or,or.current&1|2),d.child}a=a.sibling}k.tail!==null&&Zt()>Du&&(d.flags|=128,b=!0,ph(k,!1),d.lanes=4194304)}else{if(!b)if(a=Sp($),a!==null){if(d.flags|=128,b=!0,x=a.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),ph(k,!0),k.tail===null&&k.tailMode==="hidden"&&!$.alternate&&!Jn)return Ni(d),null}else 2*Zt()-k.renderingStartTime>Du&&x!==1073741824&&(d.flags|=128,b=!0,ph(k,!1),d.lanes=4194304);k.isBackwards?($.sibling=d.child,d.child=$):(x=k.last,x!==null?x.sibling=$:d.child=$,k.last=$)}return k.tail!==null?(d=k.tail,k.rendering=d,k.tail=d.sibling,k.renderingStartTime=Zt(),d.sibling=null,x=or.current,On(or,b?x&1|2:x&1),d):(Ni(d),null);case 22:case 23:return Z1(),b=d.memoizedState!==null,a!==null&&a.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(Es&1073741824)!==0&&(Ni(d),d.subtreeFlags&6&&(d.flags|=8192)):Ni(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function RD(a,d){switch(a1(d),d.tag){case 1:return rs(d.type)&&yp(),a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 3:return Ru(),Gn(ns),Gn(Si),v1(),a=d.flags,(a&65536)!==0&&(a&128)===0?(d.flags=a&-65537|128,d):null;case 5:return x1(d),null;case 13:if(Gn(or),a=d.memoizedState,a!==null&&a.dehydrated!==null){if(d.alternate===null)throw Error(t(340));Au()}return a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 19:return Gn(or),null;case 4:return Ru(),null;case 10:return f1(d.type._context),null;case 22:case 23:return Z1(),null;case 24:return null;default:return null}}var Vp=!1,ki=!1,ND=typeof WeakSet=="function"?WeakSet:Set,Je=null;function ku(a,d){var x=a.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(b){mr(a,d,b)}else x.current=null}function j1(a,d,x){try{x()}catch(b){mr(a,d,b)}}var DE=!1;function kD(a,d){if(Zg=Ji,a=Mt(),St(a)){if("selectionStart"in a)var x={start:a.selectionStart,end:a.selectionEnd};else e:{x=(x=a.ownerDocument)&&x.defaultView||window;var b=x.getSelection&&x.getSelection();if(b&&b.rangeCount!==0){x=b.anchorNode;var S=b.anchorOffset,k=b.focusNode;b=b.focusOffset;try{x.nodeType,k.nodeType}catch{x=null;break e}var $=0,re=-1,ce=-1,be=0,Me=0,Ve=a,De=null;t:for(;;){for(var Qe;Ve!==x||S!==0&&Ve.nodeType!==3||(re=$+S),Ve!==k||b!==0&&Ve.nodeType!==3||(ce=$+b),Ve.nodeType===3&&($+=Ve.nodeValue.length),(Qe=Ve.firstChild)!==null;)De=Ve,Ve=Qe;for(;;){if(Ve===a)break t;if(De===x&&++be===S&&(re=$),De===k&&++Me===b&&(ce=$),(Qe=Ve.nextSibling)!==null)break;Ve=De,De=Ve.parentNode}Ve=Qe}x=re===-1||ce===-1?null:{start:re,end:ce}}else x=null}x=x||{start:0,end:0}}else x=null;for(Jg={focusedElem:a,selectionRange:x},Ji=!1,Je=d;Je!==null;)if(d=Je,a=d.child,(d.subtreeFlags&1028)!==0&&a!==null)a.return=d,Je=a;else for(;Je!==null;){d=Je;try{var et=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var ot=et.memoizedProps,Rr=et.memoizedState,ye=d.stateNode,de=ye.getSnapshotBeforeUpdate(d.elementType===d.type?ot:ro(d.type,ot),Rr);ye.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var ve=d.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ue){mr(d,d.return,Ue)}if(a=d.sibling,a!==null){a.return=d.return,Je=a;break}Je=d.return}return et=DE,DE=!1,et}function mh(a,d,x){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var S=b=b.next;do{if((S.tag&a)===a){var k=S.destroy;S.destroy=void 0,k!==void 0&&j1(d,x,k)}S=S.next}while(S!==b)}}function Fp(a,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&a)===a){var b=x.create;x.destroy=b()}x=x.next}while(x!==d)}}function U1(a){var d=a.ref;if(d!==null){var x=a.stateNode;switch(a.tag){case 5:a=x;break;default:a=x}typeof d=="function"?d(a):d.current=a}}function OE(a){var d=a.alternate;d!==null&&(a.alternate=null,OE(d)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(d=a.stateNode,d!==null&&(delete d[Co],delete d[ih],delete d[r1],delete d[fD],delete d[pD])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function ME(a){return a.tag===5||a.tag===3||a.tag===4}function LE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ME(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function z1(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(a,d):x.insertBefore(a,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(a,x)):(d=x,d.appendChild(a)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=mp));else if(b!==4&&(a=a.child,a!==null))for(z1(a,d,x),a=a.sibling;a!==null;)z1(a,d,x),a=a.sibling}function W1(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.insertBefore(a,d):x.appendChild(a);else if(b!==4&&(a=a.child,a!==null))for(W1(a,d,x),a=a.sibling;a!==null;)W1(a,d,x),a=a.sibling}var fi=null,io=!1;function ol(a,d,x){for(x=x.child;x!==null;)VE(a,d,x),x=x.sibling}function VE(a,d,x){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Ft,x)}catch{}switch(x.tag){case 5:ki||ku(x,d);case 6:var b=fi,S=io;fi=null,ol(a,d,x),fi=b,io=S,fi!==null&&(io?(a=fi,x=x.stateNode,a.nodeType===8?a.parentNode.removeChild(x):a.removeChild(x)):fi.removeChild(x.stateNode));break;case 18:fi!==null&&(io?(a=fi,x=x.stateNode,a.nodeType===8?n1(a.parentNode,x):a.nodeType===1&&n1(a,x),ci(a)):n1(fi,x.stateNode));break;case 4:b=fi,S=io,fi=x.stateNode.containerInfo,io=!0,ol(a,d,x),fi=b,io=S;break;case 0:case 11:case 14:case 15:if(!ki&&(b=x.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){S=b=b.next;do{var k=S,$=k.destroy;k=k.tag,$!==void 0&&((k&2)!==0||(k&4)!==0)&&j1(x,d,$),S=S.next}while(S!==b)}ol(a,d,x);break;case 1:if(!ki&&(ku(x,d),b=x.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=x.memoizedProps,b.state=x.memoizedState,b.componentWillUnmount()}catch(re){mr(x,d,re)}ol(a,d,x);break;case 21:ol(a,d,x);break;case 22:x.mode&1?(ki=(b=ki)||x.memoizedState!==null,ol(a,d,x),ki=b):ol(a,d,x);break;default:ol(a,d,x)}}function FE(a){var d=a.updateQueue;if(d!==null){a.updateQueue=null;var x=a.stateNode;x===null&&(x=a.stateNode=new ND),d.forEach(function(b){var S=jD.bind(null,a,b);x.has(b)||(x.add(b),b.then(S,S))})}}function so(a,d){var x=d.deletions;if(x!==null)for(var b=0;b<x.length;b++){var S=x[b];try{var k=a,$=d,re=$;e:for(;re!==null;){switch(re.tag){case 5:fi=re.stateNode,io=!1;break e;case 3:fi=re.stateNode.containerInfo,io=!0;break e;case 4:fi=re.stateNode.containerInfo,io=!0;break e}re=re.return}if(fi===null)throw Error(t(160));VE(k,$,S),fi=null,io=!1;var ce=S.alternate;ce!==null&&(ce.return=null),S.return=null}catch(be){mr(S,d,be)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)BE(d,a),d=d.sibling}function BE(a,d){var x=a.alternate,b=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(so(d,a),No(a),b&4){try{mh(3,a,a.return),Fp(3,a)}catch(ot){mr(a,a.return,ot)}try{mh(5,a,a.return)}catch(ot){mr(a,a.return,ot)}}break;case 1:so(d,a),No(a),b&512&&x!==null&&ku(x,x.return);break;case 5:if(so(d,a),No(a),b&512&&x!==null&&ku(x,x.return),a.flags&32){var S=a.stateNode;try{Qr(S,"")}catch(ot){mr(a,a.return,ot)}}if(b&4&&(S=a.stateNode,S!=null)){var k=a.memoizedProps,$=x!==null?x.memoizedProps:k,re=a.type,ce=a.updateQueue;if(a.updateQueue=null,ce!==null)try{re==="input"&&k.type==="radio"&&k.name!=null&&Dr(S,k),pn(re,$);var be=pn(re,k);for($=0;$<ce.length;$+=2){var Me=ce[$],Ve=ce[$+1];Me==="style"?We(S,Ve):Me==="dangerouslySetInnerHTML"?Fn(S,Ve):Me==="children"?Qr(S,Ve):W(S,Me,Ve,be)}switch(re){case"input":Qt(S,k);break;case"textarea":Yr(S,k);break;case"select":var De=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!k.multiple;var Qe=k.value;Qe!=null?Xe(S,!!k.multiple,Qe,!1):De!==!!k.multiple&&(k.defaultValue!=null?Xe(S,!!k.multiple,k.defaultValue,!0):Xe(S,!!k.multiple,k.multiple?[]:"",!1))}S[ih]=k}catch(ot){mr(a,a.return,ot)}}break;case 6:if(so(d,a),No(a),b&4){if(a.stateNode===null)throw Error(t(162));S=a.stateNode,k=a.memoizedProps;try{S.nodeValue=k}catch(ot){mr(a,a.return,ot)}}break;case 3:if(so(d,a),No(a),b&4&&x!==null&&x.memoizedState.isDehydrated)try{ci(d.containerInfo)}catch(ot){mr(a,a.return,ot)}break;case 4:so(d,a),No(a);break;case 13:so(d,a),No(a),S=a.child,S.flags&8192&&(k=S.memoizedState!==null,S.stateNode.isHidden=k,!k||S.alternate!==null&&S.alternate.memoizedState!==null||($1=Zt())),b&4&&FE(a);break;case 22:if(Me=x!==null&&x.memoizedState!==null,a.mode&1?(ki=(be=ki)||Me,so(d,a),ki=be):so(d,a),No(a),b&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!Me&&(a.mode&1)!==0)for(Je=a,Me=a.child;Me!==null;){for(Ve=Je=Me;Je!==null;){switch(De=Je,Qe=De.child,De.tag){case 0:case 11:case 14:case 15:mh(4,De,De.return);break;case 1:ku(De,De.return);var et=De.stateNode;if(typeof et.componentWillUnmount=="function"){b=De,x=De.return;try{d=b,et.props=d.memoizedProps,et.state=d.memoizedState,et.componentWillUnmount()}catch(ot){mr(b,x,ot)}}break;case 5:ku(De,De.return);break;case 22:if(De.memoizedState!==null){zE(Ve);continue}}Qe!==null?(Qe.return=De,Je=Qe):zE(Ve)}Me=Me.sibling}e:for(Me=null,Ve=a;;){if(Ve.tag===5){if(Me===null){Me=Ve;try{S=Ve.stateNode,be?(k=S.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(re=Ve.stateNode,ce=Ve.memoizedProps.style,$=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,re.style.display=In("display",$))}catch(ot){mr(a,a.return,ot)}}}else if(Ve.tag===6){if(Me===null)try{Ve.stateNode.nodeValue=be?"":Ve.memoizedProps}catch(ot){mr(a,a.return,ot)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===a)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===a)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===a)break e;Me===Ve&&(Me=null),Ve=Ve.return}Me===Ve&&(Me=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:so(d,a),No(a),b&4&&FE(a);break;case 21:break;default:so(d,a),No(a)}}function No(a){var d=a.flags;if(d&2){try{e:{for(var x=a.return;x!==null;){if(ME(x)){var b=x;break e}x=x.return}throw Error(t(160))}switch(b.tag){case 5:var S=b.stateNode;b.flags&32&&(Qr(S,""),b.flags&=-33);var k=LE(a);W1(a,k,S);break;case 3:case 4:var $=b.stateNode.containerInfo,re=LE(a);z1(a,re,$);break;default:throw Error(t(161))}}catch(ce){mr(a,a.return,ce)}a.flags&=-3}d&4096&&(a.flags&=-4097)}function PD(a,d,x){Je=a,jE(a)}function jE(a,d,x){for(var b=(a.mode&1)!==0;Je!==null;){var S=Je,k=S.child;if(S.tag===22&&b){var $=S.memoizedState!==null||Vp;if(!$){var re=S.alternate,ce=re!==null&&re.memoizedState!==null||ki;re=Vp;var be=ki;if(Vp=$,(ki=ce)&&!be)for(Je=S;Je!==null;)$=Je,ce=$.child,$.tag===22&&$.memoizedState!==null?WE(S):ce!==null?(ce.return=$,Je=ce):WE(S);for(;k!==null;)Je=k,jE(k),k=k.sibling;Je=S,Vp=re,ki=be}UE(a)}else(S.subtreeFlags&8772)!==0&&k!==null?(k.return=S,Je=k):UE(a)}}function UE(a){for(;Je!==null;){var d=Je;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:ki||Fp(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!ki)if(x===null)b.componentDidMount();else{var S=d.elementType===d.type?x.memoizedProps:ro(d.type,x.memoizedProps);b.componentDidUpdate(S,x.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var k=d.updateQueue;k!==null&&z_(d,k,b);break;case 3:var $=d.updateQueue;if($!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}z_(d,$,x)}break;case 5:var re=d.stateNode;if(x===null&&d.flags&4){x=re;var ce=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&x.focus();break;case"img":ce.src&&(x.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var be=d.alternate;if(be!==null){var Me=be.memoizedState;if(Me!==null){var Ve=Me.dehydrated;Ve!==null&&ci(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ki||d.flags&512&&U1(d)}catch(De){mr(d,d.return,De)}}if(d===a){Je=null;break}if(x=d.sibling,x!==null){x.return=d.return,Je=x;break}Je=d.return}}function zE(a){for(;Je!==null;){var d=Je;if(d===a){Je=null;break}var x=d.sibling;if(x!==null){x.return=d.return,Je=x;break}Je=d.return}}function WE(a){for(;Je!==null;){var d=Je;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{Fp(4,d)}catch(ce){mr(d,x,ce)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var S=d.return;try{b.componentDidMount()}catch(ce){mr(d,S,ce)}}var k=d.return;try{U1(d)}catch(ce){mr(d,k,ce)}break;case 5:var $=d.return;try{U1(d)}catch(ce){mr(d,$,ce)}}}catch(ce){mr(d,d.return,ce)}if(d===a){Je=null;break}var re=d.sibling;if(re!==null){re.return=d.return,Je=re;break}Je=d.return}}var DD=Math.ceil,Bp=Y.ReactCurrentDispatcher,H1=Y.ReactCurrentOwner,zs=Y.ReactCurrentBatchConfig,rn=0,ni=null,Or=null,pi=0,Es=0,Pu=tl(0),$r=0,gh=null,hc=0,jp=0,G1=0,yh=null,ss=null,$1=0,Du=1/0,xa=null,Up=!1,q1=null,al=null,zp=!1,ll=null,Wp=0,xh=0,K1=null,Hp=-1,Gp=0;function Gi(){return(rn&6)!==0?Zt():Hp!==-1?Hp:Hp=Zt()}function cl(a){return(a.mode&1)===0?1:(rn&2)!==0&&pi!==0?pi&-pi:gD.transition!==null?(Gp===0&&(Gp=Qn()),Gp):(a=It,a!==0||(a=window.event,a=a===void 0?16:Ka(a.type)),a)}function oo(a,d,x,b){if(50<xh)throw xh=0,K1=null,Error(t(185));Q(a,x,b),((rn&2)===0||a!==ni)&&(a===ni&&((rn&2)===0&&(jp|=x),$r===4&&ul(a,pi)),os(a,b),x===1&&rn===0&&(d.mode&1)===0&&(Du=Zt()+500,wp&&rl()))}function os(a,d){var x=a.callbackNode;bi(a,d);var b=Ei(a,a===ni?pi:0);if(b===0)x!==null&&Ar(x),a.callbackNode=null,a.callbackPriority=0;else if(d=b&-b,a.callbackPriority!==d){if(x!=null&&Ar(x),d===1)a.tag===0?mD(GE.bind(null,a)):N_(GE.bind(null,a)),dD(function(){(rn&6)===0&&rl()}),x=null;else{switch(Eo(b)){case 1:x=ke;break;case 4:x=_o;break;case 16:x=Jt;break;case 536870912:x=hu;break;default:x=Jt}x=JE(x,HE.bind(null,a))}a.callbackPriority=d,a.callbackNode=x}}function HE(a,d){if(Hp=-1,Gp=0,(rn&6)!==0)throw Error(t(327));var x=a.callbackNode;if(Ou()&&a.callbackNode!==x)return null;var b=Ei(a,a===ni?pi:0);if(b===0)return null;if((b&30)!==0||(b&a.expiredLanes)!==0||d)d=$p(a,b);else{d=b;var S=rn;rn|=2;var k=qE();(ni!==a||pi!==d)&&(xa=null,Du=Zt()+500,pc(a,d));do try{LD();break}catch(re){$E(a,re)}while(!0);h1(),Bp.current=k,rn=S,Or!==null?d=0:(ni=null,pi=0,d=$r)}if(d!==0){if(d===2&&(S=Ot(a),S!==0&&(b=S,d=X1(a,S))),d===1)throw x=gh,pc(a,0),ul(a,b),os(a,Zt()),x;if(d===6)ul(a,b);else{if(S=a.current.alternate,(b&30)===0&&!OD(S)&&(d=$p(a,b),d===2&&(k=Ot(a),k!==0&&(b=k,d=X1(a,k))),d===1))throw x=gh,pc(a,0),ul(a,b),os(a,Zt()),x;switch(a.finishedWork=S,a.finishedLanes=b,d){case 0:case 1:throw Error(t(345));case 2:mc(a,ss,xa);break;case 3:if(ul(a,b),(b&130023424)===b&&(d=$1+500-Zt(),10<d)){if(Ei(a,0)!==0)break;if(S=a.suspendedLanes,(S&b)!==b){Gi(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=t1(mc.bind(null,a,ss,xa),d);break}mc(a,ss,xa);break;case 4:if(ul(a,b),(b&4194240)===b)break;for(d=a.eventTimes,S=-1;0<b;){var $=31-zr(b);k=1<<$,$=d[$],$>S&&(S=$),b&=~k}if(b=S,b=Zt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*DD(b/1960))-b,10<b){a.timeoutHandle=t1(mc.bind(null,a,ss,xa),b);break}mc(a,ss,xa);break;case 5:mc(a,ss,xa);break;default:throw Error(t(329))}}}return os(a,Zt()),a.callbackNode===x?HE.bind(null,a):null}function X1(a,d){var x=yh;return a.current.memoizedState.isDehydrated&&(pc(a,d).flags|=256),a=$p(a,d),a!==2&&(d=ss,ss=x,d!==null&&Y1(d)),a}function Y1(a){ss===null?ss=a:ss.push.apply(ss,a)}function OD(a){for(var d=a;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var b=0;b<x.length;b++){var S=x[b],k=S.getSnapshot;S=S.value;try{if(!fe(k(),S))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ul(a,d){for(d&=~G1,d&=~jp,a.suspendedLanes|=d,a.pingedLanes&=~d,a=a.expirationTimes;0<d;){var x=31-zr(d),b=1<<x;a[x]=-1,d&=~b}}function GE(a){if((rn&6)!==0)throw Error(t(327));Ou();var d=Ei(a,0);if((d&1)===0)return os(a,Zt()),null;var x=$p(a,d);if(a.tag!==0&&x===2){var b=Ot(a);b!==0&&(d=b,x=X1(a,b))}if(x===1)throw x=gh,pc(a,0),ul(a,d),os(a,Zt()),x;if(x===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=d,mc(a,ss,xa),os(a,Zt()),null}function Q1(a,d){var x=rn;rn|=1;try{return a(d)}finally{rn=x,rn===0&&(Du=Zt()+500,wp&&rl())}}function fc(a){ll!==null&&ll.tag===0&&(rn&6)===0&&Ou();var d=rn;rn|=1;var x=zs.transition,b=It;try{if(zs.transition=null,It=1,a)return a()}finally{It=b,zs.transition=x,rn=d,(rn&6)===0&&rl()}}function Z1(){Es=Pu.current,Gn(Pu)}function pc(a,d){a.finishedWork=null,a.finishedLanes=0;var x=a.timeoutHandle;if(x!==-1&&(a.timeoutHandle=-1,uD(x)),Or!==null)for(x=Or.return;x!==null;){var b=x;switch(a1(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&yp();break;case 3:Ru(),Gn(ns),Gn(Si),v1();break;case 5:x1(b);break;case 4:Ru();break;case 13:Gn(or);break;case 19:Gn(or);break;case 10:f1(b.type._context);break;case 22:case 23:Z1()}x=x.return}if(ni=a,Or=a=dl(a.current,null),pi=Es=d,$r=0,gh=null,G1=jp=hc=0,ss=yh=null,cc!==null){for(d=0;d<cc.length;d++)if(x=cc[d],b=x.interleaved,b!==null){x.interleaved=null;var S=b.next,k=x.pending;if(k!==null){var $=k.next;k.next=S,b.next=$}x.pending=b}cc=null}return a}function $E(a,d){do{var x=Or;try{if(h1(),Rp.current=Dp,Np){for(var b=ar.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}Np=!1}if(dc=0,ti=Gr=ar=null,uh=!1,dh=0,H1.current=null,x===null||x.return===null){$r=1,gh=d,Or=null;break}e:{var k=a,$=x.return,re=x,ce=d;if(d=pi,re.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var be=ce,Me=re,Ve=Me.tag;if((Me.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var De=Me.alternate;De?(Me.updateQueue=De.updateQueue,Me.memoizedState=De.memoizedState,Me.lanes=De.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Qe=yE($);if(Qe!==null){Qe.flags&=-257,xE(Qe,$,re,k,d),Qe.mode&1&&gE(k,be,d),d=Qe,ce=be;var et=d.updateQueue;if(et===null){var ot=new Set;ot.add(ce),d.updateQueue=ot}else et.add(ce);break e}else{if((d&1)===0){gE(k,be,d),J1();break e}ce=Error(t(426))}}else if(Jn&&re.mode&1){var Rr=yE($);if(Rr!==null){(Rr.flags&65536)===0&&(Rr.flags|=256),xE(Rr,$,re,k,d),u1(Nu(ce,re));break e}}k=ce=Nu(ce,re),$r!==4&&($r=2),yh===null?yh=[k]:yh.push(k),k=$;do{switch(k.tag){case 3:k.flags|=65536,d&=-d,k.lanes|=d;var ye=pE(k,ce,d);U_(k,ye);break e;case 1:re=ce;var de=k.type,ve=k.stateNode;if((k.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(al===null||!al.has(ve)))){k.flags|=65536,d&=-d,k.lanes|=d;var Ue=mE(k,re,d);U_(k,Ue);break e}}k=k.return}while(k!==null)}XE(x)}catch(lt){d=lt,Or===x&&x!==null&&(Or=x=x.return);continue}break}while(!0)}function qE(){var a=Bp.current;return Bp.current=Dp,a===null?Dp:a}function J1(){($r===0||$r===3||$r===2)&&($r=4),ni===null||(hc&268435455)===0&&(jp&268435455)===0||ul(ni,pi)}function $p(a,d){var x=rn;rn|=2;var b=qE();(ni!==a||pi!==d)&&(xa=null,pc(a,d));do try{MD();break}catch(S){$E(a,S)}while(!0);if(h1(),rn=x,Bp.current=b,Or!==null)throw Error(t(261));return ni=null,pi=0,$r}function MD(){for(;Or!==null;)KE(Or)}function LD(){for(;Or!==null&&!yn();)KE(Or)}function KE(a){var d=ZE(a.alternate,a,Es);a.memoizedProps=a.pendingProps,d===null?XE(a):Or=d,H1.current=null}function XE(a){var d=a;do{var x=d.alternate;if(a=d.return,(d.flags&32768)===0){if(x=SD(x,d,Es),x!==null){Or=x;return}}else{if(x=RD(x,d),x!==null){x.flags&=32767,Or=x;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{$r=6,Or=null;return}}if(d=d.sibling,d!==null){Or=d;return}Or=d=a}while(d!==null);$r===0&&($r=5)}function mc(a,d,x){var b=It,S=zs.transition;try{zs.transition=null,It=1,VD(a,d,x,b)}finally{zs.transition=S,It=b}return null}function VD(a,d,x,b){do Ou();while(ll!==null);if((rn&6)!==0)throw Error(t(327));x=a.finishedWork;var S=a.finishedLanes;if(x===null)return null;if(a.finishedWork=null,a.finishedLanes=0,x===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var k=x.lanes|x.childLanes;if($e(a,k),a===ni&&(Or=ni=null,pi=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||zp||(zp=!0,JE(Jt,function(){return Ou(),null})),k=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||k){k=zs.transition,zs.transition=null;var $=It;It=1;var re=rn;rn|=4,H1.current=null,kD(a,x),BE(x,a),Ci(Jg),Ji=!!Zg,Jg=Zg=null,a.current=x,PD(x),du(),rn=re,It=$,zs.transition=k}else a.current=x;if(zp&&(zp=!1,ll=a,Wp=S),k=a.pendingLanes,k===0&&(al=null),Dt(x.stateNode),os(a,Zt()),d!==null)for(b=a.onRecoverableError,x=0;x<d.length;x++)S=d[x],b(S.value,{componentStack:S.stack,digest:S.digest});if(Up)throw Up=!1,a=q1,q1=null,a;return(Wp&1)!==0&&a.tag!==0&&Ou(),k=a.pendingLanes,(k&1)!==0?a===K1?xh++:(xh=0,K1=a):xh=0,rl(),null}function Ou(){if(ll!==null){var a=Eo(Wp),d=zs.transition,x=It;try{if(zs.transition=null,It=16>a?16:a,ll===null)var b=!1;else{if(a=ll,ll=null,Wp=0,(rn&6)!==0)throw Error(t(331));var S=rn;for(rn|=4,Je=a.current;Je!==null;){var k=Je,$=k.child;if((Je.flags&16)!==0){var re=k.deletions;if(re!==null){for(var ce=0;ce<re.length;ce++){var be=re[ce];for(Je=be;Je!==null;){var Me=Je;switch(Me.tag){case 0:case 11:case 15:mh(8,Me,k)}var Ve=Me.child;if(Ve!==null)Ve.return=Me,Je=Ve;else for(;Je!==null;){Me=Je;var De=Me.sibling,Qe=Me.return;if(OE(Me),Me===be){Je=null;break}if(De!==null){De.return=Qe,Je=De;break}Je=Qe}}}var et=k.alternate;if(et!==null){var ot=et.child;if(ot!==null){et.child=null;do{var Rr=ot.sibling;ot.sibling=null,ot=Rr}while(ot!==null)}}Je=k}}if((k.subtreeFlags&2064)!==0&&$!==null)$.return=k,Je=$;else e:for(;Je!==null;){if(k=Je,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:mh(9,k,k.return)}var ye=k.sibling;if(ye!==null){ye.return=k.return,Je=ye;break e}Je=k.return}}var de=a.current;for(Je=de;Je!==null;){$=Je;var ve=$.child;if(($.subtreeFlags&2064)!==0&&ve!==null)ve.return=$,Je=ve;else e:for($=de;Je!==null;){if(re=Je,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:Fp(9,re)}}catch(lt){mr(re,re.return,lt)}if(re===$){Je=null;break e}var Ue=re.sibling;if(Ue!==null){Ue.return=re.return,Je=Ue;break e}Je=re.return}}if(rn=S,rl(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Ft,a)}catch{}b=!0}return b}finally{It=x,zs.transition=d}}return!1}function YE(a,d,x){d=Nu(x,d),d=pE(a,d,1),a=sl(a,d,1),d=Gi(),a!==null&&(Q(a,1,d),os(a,d))}function mr(a,d,x){if(a.tag===3)YE(a,a,x);else for(;d!==null;){if(d.tag===3){YE(d,a,x);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(al===null||!al.has(b))){a=Nu(x,a),a=mE(d,a,1),d=sl(d,a,1),a=Gi(),d!==null&&(Q(d,1,a),os(d,a));break}}d=d.return}}function FD(a,d,x){var b=a.pingCache;b!==null&&b.delete(d),d=Gi(),a.pingedLanes|=a.suspendedLanes&x,ni===a&&(pi&x)===x&&($r===4||$r===3&&(pi&130023424)===pi&&500>Zt()-$1?pc(a,0):G1|=x),os(a,d)}function QE(a,d){d===0&&((a.mode&1)===0?d=1:(d=$a,$a<<=1,($a&130023424)===0&&($a=4194304)));var x=Gi();a=ma(a,d),a!==null&&(Q(a,d,x),os(a,x))}function BD(a){var d=a.memoizedState,x=0;d!==null&&(x=d.retryLane),QE(a,x)}function jD(a,d){var x=0;switch(a.tag){case 13:var b=a.stateNode,S=a.memoizedState;S!==null&&(x=S.retryLane);break;case 19:b=a.stateNode;break;default:throw Error(t(314))}b!==null&&b.delete(d),QE(a,x)}var ZE;ZE=function(a,d,x){if(a!==null)if(a.memoizedProps!==d.pendingProps||ns.current)is=!0;else{if((a.lanes&x)===0&&(d.flags&128)===0)return is=!1,CD(a,d,x);is=(a.flags&131072)!==0}else is=!1,Jn&&(d.flags&1048576)!==0&&k_(d,_p,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;Lp(a,d),a=d.pendingProps;var S=Eu(d,Si.current);Su(d,x),S=b1(null,d,b,a,S,x);var k=I1();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,rs(b)?(k=!0,xp(d)):k=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,g1(d),S.updater=Op,d.stateNode=S,S._reactInternals=d,N1(d,b,a,x),d=O1(null,d,b,!0,k,x)):(d.tag=0,Jn&&k&&o1(d),Hi(null,d,S,x),d=d.child),d;case 16:b=d.elementType;e:{switch(Lp(a,d),a=d.pendingProps,S=b._init,b=S(b._payload),d.type=b,S=d.tag=zD(b),a=ro(b,a),S){case 0:d=D1(null,d,b,a,x);break e;case 1:d=IE(null,d,b,a,x);break e;case 11:d=wE(null,d,b,a,x);break e;case 14:d=vE(null,d,b,ro(b.type,a),x);break e}throw Error(t(306,b,""))}return d;case 0:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),D1(a,d,b,S,x);case 1:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),IE(a,d,b,S,x);case 3:e:{if(AE(d),a===null)throw Error(t(387));b=d.pendingProps,k=d.memoizedState,S=k.element,j_(a,d),Cp(d,b,null,x);var $=d.memoizedState;if(b=$.element,k.isDehydrated)if(k={element:b,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){S=Nu(Error(t(423)),d),d=TE(a,d,b,x,S);break e}else if(b!==S){S=Nu(Error(t(424)),d),d=TE(a,d,b,x,S);break e}else for(_s=el(d.stateNode.containerInfo.firstChild),vs=d,Jn=!0,no=null,x=F_(d,null,b,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Au(),b===S){d=ya(a,d,x);break e}Hi(a,d,b,x)}d=d.child}return d;case 5:return W_(d),a===null&&c1(d),b=d.type,S=d.pendingProps,k=a!==null?a.memoizedProps:null,$=S.children,e1(b,S)?$=null:k!==null&&e1(b,k)&&(d.flags|=32),bE(a,d),Hi(a,d,$,x),d.child;case 6:return a===null&&c1(d),null;case 13:return CE(a,d,x);case 4:return y1(d,d.stateNode.containerInfo),b=d.pendingProps,a===null?d.child=Tu(d,null,b,x):Hi(a,d,b,x),d.child;case 11:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),wE(a,d,b,S,x);case 7:return Hi(a,d,d.pendingProps,x),d.child;case 8:return Hi(a,d,d.pendingProps.children,x),d.child;case 12:return Hi(a,d,d.pendingProps.children,x),d.child;case 10:e:{if(b=d.type._context,S=d.pendingProps,k=d.memoizedProps,$=S.value,On(Ip,b._currentValue),b._currentValue=$,k!==null)if(fe(k.value,$)){if(k.children===S.children&&!ns.current){d=ya(a,d,x);break e}}else for(k=d.child,k!==null&&(k.return=d);k!==null;){var re=k.dependencies;if(re!==null){$=k.child;for(var ce=re.firstContext;ce!==null;){if(ce.context===b){if(k.tag===1){ce=ga(-1,x&-x),ce.tag=2;var be=k.updateQueue;if(be!==null){be=be.shared;var Me=be.pending;Me===null?ce.next=ce:(ce.next=Me.next,Me.next=ce),be.pending=ce}}k.lanes|=x,ce=k.alternate,ce!==null&&(ce.lanes|=x),p1(k.return,x,d),re.lanes|=x;break}ce=ce.next}}else if(k.tag===10)$=k.type===d.type?null:k.child;else if(k.tag===18){if($=k.return,$===null)throw Error(t(341));$.lanes|=x,re=$.alternate,re!==null&&(re.lanes|=x),p1($,x,d),$=k.sibling}else $=k.child;if($!==null)$.return=k;else for($=k;$!==null;){if($===d){$=null;break}if(k=$.sibling,k!==null){k.return=$.return,$=k;break}$=$.return}k=$}Hi(a,d,S.children,x),d=d.child}return d;case 9:return S=d.type,b=d.pendingProps.children,Su(d,x),S=js(S),b=b(S),d.flags|=1,Hi(a,d,b,x),d.child;case 14:return b=d.type,S=ro(b,d.pendingProps),S=ro(b.type,S),vE(a,d,b,S,x);case 15:return _E(a,d,d.type,d.pendingProps,x);case 17:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),Lp(a,d),d.tag=1,rs(b)?(a=!0,xp(d)):a=!1,Su(d,x),hE(d,b,S),N1(d,b,S,x),O1(null,d,b,!0,a,x);case 19:return RE(a,d,x);case 22:return EE(a,d,x)}throw Error(t(156,d.tag))};function JE(a,d){return li(a,d)}function UD(a,d,x,b){this.tag=a,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(a,d,x,b){return new UD(a,d,x,b)}function ey(a){return a=a.prototype,!(!a||!a.isReactComponent)}function zD(a){if(typeof a=="function")return ey(a)?1:0;if(a!=null){if(a=a.$$typeof,a===te)return 11;if(a===se)return 14}return 2}function dl(a,d){var x=a.alternate;return x===null?(x=Ws(a.tag,d,a.key,a.mode),x.elementType=a.elementType,x.type=a.type,x.stateNode=a.stateNode,x.alternate=a,a.alternate=x):(x.pendingProps=d,x.type=a.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=a.flags&14680064,x.childLanes=a.childLanes,x.lanes=a.lanes,x.child=a.child,x.memoizedProps=a.memoizedProps,x.memoizedState=a.memoizedState,x.updateQueue=a.updateQueue,d=a.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=a.sibling,x.index=a.index,x.ref=a.ref,x}function qp(a,d,x,b,S,k){var $=2;if(b=a,typeof a=="function")ey(a)&&($=1);else if(typeof a=="string")$=5;else e:switch(a){case F:return gc(x.children,S,k,d);case B:$=8,S|=8;break;case H:return a=Ws(12,x,d,S|2),a.elementType=H,a.lanes=k,a;case K:return a=Ws(13,x,d,S),a.elementType=K,a.lanes=k,a;case we:return a=Ws(19,x,d,S),a.elementType=we,a.lanes=k,a;case xe:return Kp(x,S,k,d);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case ee:$=10;break e;case ne:$=9;break e;case te:$=11;break e;case se:$=14;break e;case Ae:$=16,b=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return d=Ws($,x,d,S),d.elementType=a,d.type=b,d.lanes=k,d}function gc(a,d,x,b){return a=Ws(7,a,b,d),a.lanes=x,a}function Kp(a,d,x,b){return a=Ws(22,a,b,d),a.elementType=xe,a.lanes=x,a.stateNode={isHidden:!1},a}function ty(a,d,x){return a=Ws(6,a,null,d),a.lanes=x,a}function ny(a,d,x){return d=Ws(4,a.children!==null?a.children:[],a.key,d),d.lanes=x,d.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},d}function WD(a,d,x,b,S){this.tag=d,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pe(0),this.expirationTimes=pe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pe(0),this.identifierPrefix=b,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function ry(a,d,x,b,S,k,$,re,ce){return a=new WD(a,d,x,re,ce),d===1?(d=1,k===!0&&(d|=8)):d=0,k=Ws(3,null,null,d),a.current=k,k.stateNode=a,k.memoizedState={element:b,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},g1(k),a}function HD(a,d,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:b==null?null:""+b,children:a,containerInfo:d,implementation:x}}function eb(a){if(!a)return nl;a=a._reactInternals;e:{if(Zr(a)!==a||a.tag!==1)throw Error(t(170));var d=a;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(rs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(a.tag===1){var x=a.type;if(rs(x))return S_(a,x,d)}return d}function tb(a,d,x,b,S,k,$,re,ce){return a=ry(x,b,!0,a,S,k,$,re,ce),a.context=eb(null),x=a.current,b=Gi(),S=cl(x),k=ga(b,S),k.callback=d??null,sl(x,k,S),a.current.lanes=S,Q(a,S,b),os(a,b),a}function Xp(a,d,x,b){var S=d.current,k=Gi(),$=cl(S);return x=eb(x),d.context===null?d.context=x:d.pendingContext=x,d=ga(k,$),d.payload={element:a},b=b===void 0?null:b,b!==null&&(d.callback=b),a=sl(S,d,$),a!==null&&(oo(a,S,$,k),Tp(a,S,$)),$}function Yp(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nb(a,d){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var x=a.retryLane;a.retryLane=x!==0&&x<d?x:d}}function iy(a,d){nb(a,d),(a=a.alternate)&&nb(a,d)}function GD(){return null}var rb=typeof reportError=="function"?reportError:function(a){console.error(a)};function sy(a){this._internalRoot=a}Qp.prototype.render=sy.prototype.render=function(a){var d=this._internalRoot;if(d===null)throw Error(t(409));Xp(a,d,null,null)},Qp.prototype.unmount=sy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var d=a.containerInfo;fc(function(){Xp(null,a,null,null)}),d[da]=null}};function Qp(a){this._internalRoot=a}Qp.prototype.unstable_scheduleHydration=function(a){if(a){var d=Sn();a={blockedOn:null,target:a,priority:d};for(var x=0;x<Hr.length&&d!==0&&d<Hr[x].priority;x++);Hr.splice(x,0,a),x===0&&pu(a)}};function oy(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Zp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ib(){}function $D(a,d,x,b,S){if(S){if(typeof b=="function"){var k=b;b=function(){var be=Yp($);k.call(be)}}var $=tb(d,b,a,0,null,!1,!1,"",ib);return a._reactRootContainer=$,a[da]=$.current,nh(a.nodeType===8?a.parentNode:a),fc(),$}for(;S=a.lastChild;)a.removeChild(S);if(typeof b=="function"){var re=b;b=function(){var be=Yp(ce);re.call(be)}}var ce=ry(a,0,!1,null,null,!1,!1,"",ib);return a._reactRootContainer=ce,a[da]=ce.current,nh(a.nodeType===8?a.parentNode:a),fc(function(){Xp(d,ce,x,b)}),ce}function Jp(a,d,x,b,S){var k=x._reactRootContainer;if(k){var $=k;if(typeof S=="function"){var re=S;S=function(){var ce=Yp($);re.call(ce)}}Xp(d,$,a,S)}else $=$D(x,d,a,S,b);return Yp($)}qa=function(a){switch(a.tag){case 3:var d=a.stateNode;if(d.current.memoizedState.isDehydrated){var x=mn(d.pendingLanes);x!==0&&(Rn(d,x|1),os(d,Zt()),(rn&6)===0&&(Du=Zt()+500,rl()))}break;case 13:fc(function(){var b=ma(a,1);if(b!==null){var S=Gi();oo(b,a,1,S)}}),iy(a,1)}},Wr=function(a){if(a.tag===13){var d=ma(a,134217728);if(d!==null){var x=Gi();oo(d,a,134217728,x)}iy(a,134217728)}},ut=function(a){if(a.tag===13){var d=cl(a),x=ma(a,d);if(x!==null){var b=Gi();oo(x,a,d,b)}iy(a,d)}},Sn=function(){return It},ec=function(a,d){var x=It;try{return It=a,d()}finally{It=x}},Zs=function(a,d,x){switch(d){case"input":if(Qt(a,x),d=x.name,x.type==="radio"&&d!=null){for(x=a;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var b=x[d];if(b!==a&&b.form===a.form){var S=gp(b);if(!S)throw Error(t(90));bt(b),Qt(b,S)}}}break;case"textarea":Yr(a,x);break;case"select":d=x.value,d!=null&&Xe(a,!!x.multiple,d,!1)}},Tn=Q1,$t=fc;var qD={usingClientEntryPoint:!1,Events:[sh,vu,gp,mt,Gt,Q1]},wh={findFiberByHostInstance:sc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KD={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Jl(a),a===null?null:a.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||GD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var e0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!e0.isDisabled&&e0.supportsFiber)try{Ft=e0.inject(KD),Nt=e0}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qD,as.createPortal=function(a,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oy(d))throw Error(t(200));return HD(a,d,null,x)},as.createRoot=function(a,d){if(!oy(a))throw Error(t(299));var x=!1,b="",S=rb;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=ry(a,1,!1,null,null,x,!1,b,S),a[da]=d.current,nh(a.nodeType===8?a.parentNode:a),new sy(d)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var d=a._reactInternals;if(d===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Jl(d),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return fc(a)},as.hydrate=function(a,d,x){if(!Zp(d))throw Error(t(200));return Jp(null,a,d,!0,x)},as.hydrateRoot=function(a,d,x){if(!oy(a))throw Error(t(405));var b=x!=null&&x.hydratedSources||null,S=!1,k="",$=rb;if(x!=null&&(x.unstable_strictMode===!0&&(S=!0),x.identifierPrefix!==void 0&&(k=x.identifierPrefix),x.onRecoverableError!==void 0&&($=x.onRecoverableError)),d=tb(d,null,a,1,x??null,S,!1,k,$),a[da]=d.current,nh(a),b)for(a=0;a<b.length;a++)x=b[a],S=x._getVersion,S=S(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,S]:d.mutableSourceEagerHydrationData.push(x,S);return new Qp(d)},as.render=function(a,d,x){if(!Zp(d))throw Error(t(200));return Jp(null,a,d,!1,x)},as.unmountComponentAtNode=function(a){if(!Zp(a))throw Error(t(40));return a._reactRootContainer?(fc(function(){Jp(null,null,a,!1,function(){a._reactRootContainer=null,a[da]=null})}),!0):!1},as.unstable_batchedUpdates=Q1,as.unstable_renderSubtreeIntoContainer=function(a,d,x,b){if(!Zp(x))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Jp(a,d,x,!1,b)},as.version="18.3.1-next-f1338f8080-20240426",as}var hb;function UC(){if(hb)return uy.exports;hb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uy.exports=r8(),uy.exports}var fb;function i8(){if(fb)return n0;fb=1;var n=UC();return n0.createRoot=n.createRoot,n0.hydrateRoot=n.hydrateRoot,n0}var s8=i8();const o8=$m(s8);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pb="popstate";function a8(n={}){function e(r,i){let{pathname:o,search:c,hash:h}=r.location;return dx("",{pathname:o,search:c,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:af(i)}return c8(e,t,null,n)}function ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Yo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l8(){return Math.random().toString(36).substring(2,10)}function mb(n,e){return{usr:n.state,key:n.key,idx:e}}function dx(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Dd(e):e,state:t,key:e&&e.key||r||l8()}}function af({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Dd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function c8(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,h="POP",m=null,g=w();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function w(){return(c.state||{idx:null}).idx}function E(){h="POP";let L=w(),G=L==null?null:L-g;g=L,m&&m({action:h,location:D.location,delta:G})}function T(L,G){h="PUSH";let z=dx(D.location,L,G);g=w()+1;let W=mb(z,g),Y=D.createHref(z);try{c.pushState(W,"",Y)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;i.location.assign(Y)}o&&m&&m({action:h,location:D.location,delta:1})}function R(L,G){h="REPLACE";let z=dx(D.location,L,G);g=w();let W=mb(z,g),Y=D.createHref(z);c.replaceState(W,"",Y),o&&m&&m({action:h,location:D.location,delta:0})}function M(L){return u8(L)}let D={get action(){return h},get location(){return n(i,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(pb,E),m=L,()=>{i.removeEventListener(pb,E),m=null}},createHref(L){return e(i,L)},createURL:M,encodeLocation(L){let G=M(L);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:T,replace:R,go(L){return c.go(L)}};return D}function u8(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ur(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:af(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function zC(n,e,t="/"){return d8(n,e,t,!1)}function d8(n,e,t,r){let i=typeof e=="string"?Dd(e):e,o=Sa(i.pathname||"/",t);if(o==null)return null;let c=WC(n);h8(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let g=b8(o);h=_8(c[m],g,r)}return h}function WC(n,e=[],t=[],r=""){let i=(o,c,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};m.relativePath.startsWith("/")&&(ur(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let g=Aa([r,m.relativePath]),w=t.concat(m);o.children&&o.children.length>0&&(ur(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),WC(o.children,e,w,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:w8(g,o.index),routesMeta:w})};return n.forEach((o,c)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,c);else for(let m of HC(o.path))i(o,c,m)}),e}function HC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=HC(r.join("/")),h=[];return h.push(...c.map(m=>m===""?o:[o,m].join("/"))),i&&h.push(...c),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function h8(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:v8(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var f8=/^:[\w-]+$/,p8=3,m8=2,g8=1,y8=10,x8=-2,gb=n=>n==="*";function w8(n,e){let t=n.split("/"),r=t.length;return t.some(gb)&&(r+=x8),e&&(r+=m8),t.filter(i=>!gb(i)).reduce((i,o)=>i+(f8.test(o)?p8:o===""?g8:y8),r)}function v8(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function _8(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",c=[];for(let h=0;h<r.length;++h){let m=r[h],g=h===r.length-1,w=o==="/"?e:e.slice(o.length)||"/",E=nm({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},w),T=m.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=nm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},w)),!E)return null;Object.assign(i,E.params),c.push({params:i,pathname:Aa([o,E.pathname]),pathnameBase:C8(Aa([o,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(o=Aa([o,E.pathnameBase]))}return c}function nm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=E8(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((g,{paramName:w,isOptional:E},T)=>{if(w==="*"){let M=h[T]||"";c=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const R=h[T];return E&&!R?g[w]=void 0:g[w]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:n}}function E8(n,e=!1,t=!0){Yo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function b8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Sa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function I8(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Dd(n):n;return{pathname:t?t.startsWith("/")?t:A8(t,e):e,search:S8(r),hash:R8(i)}}function A8(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function fy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function T8(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function GC(n){let e=T8(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function $C(n,e,t,r=!1){let i;typeof n=="string"?i=Dd(n):(i={...n},ur(!i.pathname||!i.pathname.includes("?"),fy("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),fy("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),fy("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,h;if(c==null)h=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;i.pathname=T.join("/")}h=E>=0?e[E]:"/"}let m=I8(i,h),g=c&&c!=="/"&&c.endsWith("/"),w=(o||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||w)&&(m.pathname+="/"),m}var Aa=n=>n.join("/").replace(/\/\/+/g,"/"),C8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),S8=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,R8=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function N8(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var qC=["POST","PUT","PATCH","DELETE"];new Set(qC);var k8=["GET",...qC];new Set(k8);var Od=P.createContext(null);Od.displayName="DataRouter";var qm=P.createContext(null);qm.displayName="DataRouterState";P.createContext(!1);var KC=P.createContext({isTransitioning:!1});KC.displayName="ViewTransition";var P8=P.createContext(new Map);P8.displayName="Fetchers";var D8=P.createContext(null);D8.displayName="Await";var ea=P.createContext(null);ea.displayName="Navigation";var Vf=P.createContext(null);Vf.displayName="Location";var Fa=P.createContext({outlet:null,matches:[],isDataRoute:!1});Fa.displayName="Route";var zw=P.createContext(null);zw.displayName="RouteError";function O8(n,{relative:e}={}){ur(Ff(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(ea),{hash:i,pathname:o,search:c}=Bf(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Aa([t,o])),r.createHref({pathname:h,search:c,hash:i})}function Ff(){return P.useContext(Vf)!=null}function Ba(){return ur(Ff(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Vf).location}var XC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YC(n){P.useContext(ea).static||P.useLayoutEffect(n)}function ta(){let{isDataRoute:n}=P.useContext(Fa);return n?q8():M8()}function M8(){ur(Ff(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Od),{basename:e,navigator:t}=P.useContext(ea),{matches:r}=P.useContext(Fa),{pathname:i}=Ba(),o=JSON.stringify(GC(r)),c=P.useRef(!1);return YC(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(Yo(c.current,XC),!c.current)return;if(typeof m=="number"){t.go(m);return}let w=$C(m,JSON.parse(o),i,g.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Aa([e,w.pathname])),(g.replace?t.replace:t.push)(w,g.state,g)},[e,t,o,i,n])}P.createContext(null);function Bf(n,{relative:e}={}){let{matches:t}=P.useContext(Fa),{pathname:r}=Ba(),i=JSON.stringify(GC(t));return P.useMemo(()=>$C(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function L8(n,e){return QC(n,e)}function QC(n,e,t,r){var G;ur(Ff(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(ea),{matches:o}=P.useContext(Fa),c=o[o.length-1],h=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",w=c&&c.route;{let z=w&&w.path||"";ZC(m,!w||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=Ba(),T;if(e){let z=typeof e=="string"?Dd(e):e;ur(g==="/"||((G=z.pathname)==null?void 0:G.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=E;let R=T.pathname||"/",M=R;if(g!=="/"){let z=g.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=zC(n,{pathname:M});Yo(w||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Yo(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=U8(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Aa([g,i.encodeLocation?i.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:Aa([g,i.encodeLocation?i.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,t,r);return e&&L?P.createElement(Vf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},L):L}function V8(){let n=$8(),e=N8(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,c)}var F8=P.createElement(V8,null),B8=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(Fa.Provider,{value:this.props.routeContext},P.createElement(zw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function j8({routeContext:n,match:e,children:t}){let r=P.useContext(Od);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Fa.Provider,{value:n},t)}function U8(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let m=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);ur(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,h=-1;if(t)for(let m=0;m<i.length;m++){let g=i[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:w,errors:E}=t,T=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||T){c=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((m,g,w)=>{let E,T=!1,R=null,M=null;t&&(E=o&&g.route.id?o[g.route.id]:void 0,R=g.route.errorElement||F8,c&&(h<0&&w===0?(ZC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,M=null):h===w&&(T=!0,M=g.route.hydrateFallbackElement||null)));let D=e.concat(i.slice(0,w+1)),L=()=>{let G;return E?G=R:T?G=M:g.route.Component?G=P.createElement(g.route.Component,null):g.route.element?G=g.route.element:G=m,P.createElement(j8,{match:g,routeContext:{outlet:m,matches:D,isDataRoute:t!=null},children:G})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?P.createElement(B8,{location:t.location,revalidation:t.revalidation,component:R,error:E,children:L(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):L()},null)}function Ww(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z8(n){let e=P.useContext(Od);return ur(e,Ww(n)),e}function W8(n){let e=P.useContext(qm);return ur(e,Ww(n)),e}function H8(n){let e=P.useContext(Fa);return ur(e,Ww(n)),e}function Hw(n){let e=H8(n),t=e.matches[e.matches.length-1];return ur(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function G8(){return Hw("useRouteId")}function $8(){var r;let n=P.useContext(zw),e=W8("useRouteError"),t=Hw("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function q8(){let{router:n}=z8("useNavigate"),e=Hw("useNavigate"),t=P.useRef(!1);return YC(()=>{t.current=!0}),P.useCallback(async(i,o={})=>{Yo(t.current,XC),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var yb={};function ZC(n,e,t){!e&&!yb[n]&&(yb[n]=!0,Yo(!1,t))}P.memo(K8);function K8({routes:n,future:e,state:t}){return QC(n,void 0,t,e)}function wl(n){ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function X8({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){ur(!Ff(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:c,navigator:i,static:o,future:{}}),[c,i,o]);typeof t=="string"&&(t=Dd(t));let{pathname:m="/",search:g="",hash:w="",state:E=null,key:T="default"}=t,R=P.useMemo(()=>{let M=Sa(m,c);return M==null?null:{location:{pathname:M,search:g,hash:w,state:E,key:T},navigationType:r}},[c,m,g,w,E,T,r]);return Yo(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:P.createElement(ea.Provider,{value:h},P.createElement(Vf.Provider,{children:e,value:R}))}function Y8({children:n,location:e}){return L8(hx(n),e)}function hx(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let o=[...e,i];if(r.type===P.Fragment){t.push.apply(t,hx(r.props.children,o));return}ur(r.type===wl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ur(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=hx(r.props.children,o)),t.push(c)}),t}var S0="get",R0="application/x-www-form-urlencoded";function Km(n){return n!=null&&typeof n.tagName=="string"}function Q8(n){return Km(n)&&n.tagName.toLowerCase()==="button"}function Z8(n){return Km(n)&&n.tagName.toLowerCase()==="form"}function J8(n){return Km(n)&&n.tagName.toLowerCase()==="input"}function eO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function tO(n,e){return n.button===0&&(!e||e==="_self")&&!eO(n)}var r0=null;function nO(){if(r0===null)try{new FormData(document.createElement("form"),0),r0=!1}catch{r0=!0}return r0}var rO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function py(n){return n!=null&&!rO.has(n)?(Yo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${R0}"`),null):n}function iO(n,e){let t,r,i,o,c;if(Z8(n)){let h=n.getAttribute("action");r=h?Sa(h,e):null,t=n.getAttribute("method")||S0,i=py(n.getAttribute("enctype"))||R0,o=new FormData(n)}else if(Q8(n)||J8(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(r=m?Sa(m,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||S0,i=py(n.getAttribute("formenctype"))||py(h.getAttribute("enctype"))||R0,o=new FormData(h,n),!nO()){let{name:g,type:w,value:E}=n;if(w==="image"){let T=g?`${g}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else g&&o.append(g,E)}}else{if(Km(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=S0,r=null,i=R0,c=n}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Gw(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function sO(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Sa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function oO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function lO(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await oO(o,t);return c.links?c.links():[]}return[]}));return hO(r.flat(1).filter(aO).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function xb(n,e,t,r,i,o){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,h=(m,g)=>{var w;return t[g].pathname!==m.pathname||((w=t[g].route.path)==null?void 0:w.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,g)=>c(m,g)||h(m,g)):o==="data"?e.filter((m,g)=>{var E;let w=r.routes[m.route.id];if(!w||!w.hasLoader)return!1;if(c(m,g)||h(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function cO(n,e,{includeHydrateFallback:t}={}){return uO(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function uO(n){return[...new Set(n)]}function dO(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function hO(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(dO(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function JC(){let n=P.useContext(Od);return Gw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function fO(){let n=P.useContext(qm);return Gw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $w=P.createContext(void 0);$w.displayName="FrameworkContext";function eS(){let n=P.useContext($w);return Gw(n,"You must render this element inside a <HydratedRouter> element"),n}function pO(n,e){let t=P.useContext($w),[r,i]=P.useState(!1),[o,c]=P.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:g,onMouseLeave:w,onTouchStart:E}=e,T=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=G=>{G.forEach(z=>{c(z.isIntersecting)})},L=new IntersectionObserver(D,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),P.useEffect(()=>{if(r){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[r]);let R=()=>{i(!0)},M=()=>{i(!1),c(!1)};return t?n!=="intent"?[o,T,{}]:[o,T,{onFocus:_h(h,R),onBlur:_h(m,M),onMouseEnter:_h(g,R),onMouseLeave:_h(w,M),onTouchStart:_h(E,R)}]:[!1,T,{}]}function _h(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function mO({page:n,...e}){let{router:t}=JC(),r=P.useMemo(()=>zC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(yO,{page:n,matches:r,...e}):null}function gO(n){let{manifest:e,routeModules:t}=eS(),[r,i]=P.useState([]);return P.useEffect(()=>{let o=!1;return lO(n,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[n,e,t]),r}function yO({page:n,matches:e,...t}){let r=Ba(),{manifest:i,routeModules:o}=eS(),{basename:c}=JC(),{loaderData:h,matches:m}=fO(),g=P.useMemo(()=>xb(n,e,m,i,r,"data"),[n,e,m,i,r]),w=P.useMemo(()=>xb(n,e,m,i,r,"assets"),[n,e,m,i,r]),E=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,D=!1;if(e.forEach(G=>{var W;let z=i.routes[G.route.id];!z||!z.hasLoader||(!g.some(Y=>Y.route.id===G.route.id)&&G.route.id in h&&((W=o[G.route.id])!=null&&W.shouldRevalidate)||z.hasClientLoader?D=!0:M.add(G.route.id))}),M.size===0)return[];let L=sO(n,c,"data");return D&&M.size>0&&L.searchParams.set("_routes",e.filter(G=>M.has(G.route.id)).map(G=>G.route.id).join(",")),[L.pathname+L.search]},[c,h,r,i,g,e,n,o]),T=P.useMemo(()=>cO(w,i),[w,i]),R=gO(w);return P.createElement(P.Fragment,null,E.map(M=>P.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),T.map(M=>P.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),R.map(({key:M,link:D})=>P.createElement("link",{key:M,...D})))}function xO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tS&&(window.__reactRouterVersion="7.7.1")}catch{}function wO({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=a8({window:t,v5Compat:!0}));let i=r.current,[o,c]=P.useState({action:i.action,location:i.location}),h=P.useCallback(m=>{P.startTransition(()=>c(m))},[c]);return P.useLayoutEffect(()=>i.listen(h),[i,h]),P.createElement(X8,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var nS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rS=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:h,target:m,to:g,preventScrollReset:w,viewTransition:E,...T},R){let{basename:M}=P.useContext(ea),D=typeof g=="string"&&nS.test(g),L,G=!1;if(typeof g=="string"&&D&&(L=g,tS))try{let H=new URL(window.location.href),ee=g.startsWith("//")?new URL(H.protocol+g):new URL(g),ne=Sa(ee.pathname,M);ee.origin===H.origin&&ne!=null?g=ne+ee.search+ee.hash:G=!0}catch{Yo(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=O8(g,{relative:i}),[W,Y,Z]=pO(r,T),ie=bO(g,{replace:c,state:h,target:m,preventScrollReset:w,relative:i,viewTransition:E});function F(H){e&&e(H),H.defaultPrevented||ie(H)}let B=P.createElement("a",{...T,...Z,href:L||z,onClick:G||o?e:F,ref:xO(R,Y),target:m,"data-discover":!D&&t==="render"?"true":void 0});return W&&!D?P.createElement(P.Fragment,null,B,P.createElement(mO,{page:z})):B});rS.displayName="Link";var vO=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:h,children:m,...g},w){let E=Bf(c,{relative:g.relative}),T=Ba(),R=P.useContext(qm),{navigator:M,basename:D}=P.useContext(ea),L=R!=null&&SO(E)&&h===!0,G=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,z=T.pathname,W=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(z=z.toLowerCase(),W=W?W.toLowerCase():null,G=G.toLowerCase()),W&&D&&(W=Sa(W,D)||W);const Y=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let Z=z===G||!i&&z.startsWith(G)&&z.charAt(Y)==="/",ie=W!=null&&(W===G||!i&&W.startsWith(G)&&W.charAt(G.length)==="/"),F={isActive:Z,isPending:ie,isTransitioning:L},B=Z?e:void 0,H;typeof r=="function"?H=r(F):H=[r,Z?"active":null,ie?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let ee=typeof o=="function"?o(F):o;return P.createElement(rS,{...g,"aria-current":B,className:H,ref:w,style:ee,to:c,viewTransition:h},typeof m=="function"?m(F):m)});vO.displayName="NavLink";var _O=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:c=S0,action:h,onSubmit:m,relative:g,preventScrollReset:w,viewTransition:E,...T},R)=>{let M=TO(),D=CO(h,{relative:g}),L=c.toLowerCase()==="get"?"get":"post",G=typeof h=="string"&&nS.test(h),z=W=>{if(m&&m(W),W.defaultPrevented)return;W.preventDefault();let Y=W.nativeEvent.submitter,Z=(Y==null?void 0:Y.getAttribute("formmethod"))||c;M(Y||W.currentTarget,{fetcherKey:e,method:Z,navigate:t,replace:i,state:o,relative:g,preventScrollReset:w,viewTransition:E})};return P.createElement("form",{ref:R,method:L,action:D,onSubmit:r?m:z,...T,"data-discover":!G&&n==="render"?"true":void 0})});_O.displayName="Form";function EO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iS(n){let e=P.useContext(Od);return ur(e,EO(n)),e}function bO(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:c}={}){let h=ta(),m=Ba(),g=Bf(n,{relative:o});return P.useCallback(w=>{if(tO(w,e)){w.preventDefault();let E=t!==void 0?t:af(m)===af(g);h(n,{replace:E,state:r,preventScrollReset:i,relative:o,viewTransition:c})}},[m,h,g,t,r,e,n,i,o,c])}var IO=0,AO=()=>`__${String(++IO)}__`;function TO(){let{router:n}=iS("useSubmit"),{basename:e}=P.useContext(ea),t=G8();return P.useCallback(async(r,i={})=>{let{action:o,method:c,encType:h,formData:m,body:g}=iO(r,e);if(i.navigate===!1){let w=i.fetcherKey||AO();await n.fetch(w,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||c,formEncType:i.encType||h,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||c,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function CO(n,{relative:e}={}){let{basename:t}=P.useContext(ea),r=P.useContext(Fa);ur(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Bf(n||".",{relative:e})},c=Ba();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),m=h.getAll("index");if(m.some(w=>w==="")){h.delete("index"),m.filter(E=>E).forEach(E=>h.append("index",E));let w=h.toString();o.search=w?`?${w}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Aa([t,o.pathname])),af(o)}function SO(n,{relative:e}={}){let t=P.useContext(KC);ur(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=iS("useViewTransitionState"),i=Bf(n,{relative:e});if(!t.isTransitioning)return!1;let o=Sa(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Sa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return nm(i.pathname,c)!=null||nm(i.pathname,o)!=null}var jf=UC();const sS=$m(jf);function Mn(n){return"/"+n.toLowerCase().replace(/ /g,"-")}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...h},m)=>P.createElement("svg",{ref:m,...NO,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:oS("lucide",i),...h},[...c.map(([g,w])=>P.createElement(g,w)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(n,e)=>{const t=P.forwardRef(({className:r,...i},o)=>P.createElement(kO,{ref:o,iconNode:e,className:oS(`lucide-${RO(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qw=jt("ArrowRight",PO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],OO=jt("Calendar",DO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],fx=jt("Camera",MO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],VO=jt("Check",LO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Kw=jt("ChevronDown",FO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],aS=jt("ChevronUp",BO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xw=jt("CircleAlert",jO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zO=jt("CircleCheckBig",UO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Mu=jt("CircleCheck",WO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Yw=jt("Clock",HO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$O=jt("EyeOff",GO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KO=jt("Eye",qO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],lS=jt("Filter",XO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],cS=jt("Hash",YO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],fd=jt("Heart",QO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],JO=jt("House",ZO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],tM=jt("LogOut",eM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],rM=jt("Mail",nM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],lf=jt("MessageCircle",iM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],oM=jt("PartyPopper",sM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],px=jt("Phone",aM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],cM=jt("QrCode",lM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],dM=jt("RefreshCw",uM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],fM=jt("Ruler",hM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],my=jt("Save",pM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],gM=jt("Send",mM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],wb=jt("Share",yM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],wM=jt("Sparkles",xM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gy=jt("SquarePen",vM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],EM=jt("Star",_M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],IM=jt("Trash2",bM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TM=jt("TriangleAlert",AM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],SM=jt("Upload",CM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Uf=jt("User",RM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],cf=jt("Users",NM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],PM=jt("WifiOff",kM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],OM=jt("Wifi",DM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yi=jt("X",MM),LM=()=>{};var vb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},VM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],h=n[t++],m=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},dS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,h=c?n[i+1]:0,m=i+2<n.length,g=m?n[i+2]:0,w=o>>2,E=(o&3)<<4|h>>4;let T=(h&15)<<2|g>>6,R=g&63;m||(R=64,c||(T=64)),r.push(t[w],t[E],t[T],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const E=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||g==null||E==null)throw new FM;const T=o<<2|h>>4;if(r.push(T),g!==64){const R=h<<4&240|g>>2;if(r.push(R),E!==64){const M=g<<6&192|E;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class FM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BM=function(n){const e=uS(n);return dS.encodeByteArray(e,!0)},rm=function(n){return BM(n).replace(/\./g,"")},hS=function(n){try{return dS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=()=>fS().__FIREBASE_DEFAULTS__,UM=()=>{if(typeof process>"u"||typeof vb>"u")return;const n=vb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hS(n[1]);return e&&JSON.parse(e)},Xm=()=>{try{return LM()||jM()||UM()||zM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pS=n=>{var e,t;return(t=(e=Xm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},mS=n=>{const e=pS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gS=()=>{var n;return(n=Xm())==null?void 0:n.config},yS=n=>{var e;return(e=Xm())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[rm(JSON.stringify(t)),rm(JSON.stringify(c)),""].join(".")}const Wh={};function HM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wh))Wh[e]?n.emulator.push(e):n.prod.push(e);return n}function GM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let _b=!1;function Zw(n,e){if(typeof window>"u"||typeof document>"u"||!Gl(window.location.host)||Wh[n]===e||Wh[n]||_b)return;Wh[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",o=HM().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{_b=!0,c()},T}function w(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=GM(r),R=t("text"),M=document.getElementById(R)||document.createElement("span"),D=t("learnmore"),L=document.getElementById(D)||document.createElement("a"),G=t("preprendIcon"),z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;h(W),w(L,D);const Y=g();m(z,G),W.append(z,M,L,Y),document.body.appendChild(W)}o?(M.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $M(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function wS(){var e;const n=(e=Xm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YM(){const n=Kr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vS(){return!wS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _S(){return!wS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function QM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="FirebaseError";class na extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ZM,Object.setPrototypeOf(this,na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zf.prototype.create)}}class zf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?JM(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new na(i,h,r)}}function JM(n,e){return n.replace(e5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const e5=/\{\$([^}]+)}/g;function t5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(Eb(o)&&Eb(c)){if(!zc(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Eb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ph(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Dh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function n5(n,e){const t=new r5(n,e);return t.subscribe.bind(t)}class r5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");i5(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yy),i.error===void 0&&(i.error=yy),i.complete===void 0&&(i.complete=yy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(n){return n&&n._delegate?n._delegate:n}class Ml{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new WM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(a5(e))try{this.getOrInitializeService({instanceIdentifier:_c})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=_c){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_c){return this.instances.has(e)}getOptions(e=_c){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_c){return this.component?this.component.multipleInstances?e:_c:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function o5(n){return n===_c?void 0:n}function a5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xt||(Xt={}));const c5={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},u5=Xt.INFO,d5={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},h5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=d5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jw{constructor(e){this.name=e,this._logLevel=u5,this._logHandler=h5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const f5=(n,e)=>e.some(t=>n instanceof t);let bb,Ib;function p5(){return bb||(bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function m5(){return Ib||(Ib=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bS=new WeakMap,mx=new WeakMap,IS=new WeakMap,xy=new WeakMap,ev=new WeakMap;function g5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Rl(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&bS.set(t,n)}).catch(()=>{}),ev.set(e,n),e}function y5(n){if(mx.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});mx.set(n,e)}let gx={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mx.get(n);if(e==="objectStoreNames")return n.objectStoreNames||IS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function x5(n){gx=n(gx)}function w5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(wy(this),e,...t);return IS.set(r,e.sort?e.sort():[e]),Rl(r)}:m5().includes(n)?function(...e){return n.apply(wy(this),e),Rl(bS.get(this))}:function(...e){return Rl(n.apply(wy(this),e))}}function v5(n){return typeof n=="function"?w5(n):(n instanceof IDBTransaction&&y5(n),f5(n,p5())?new Proxy(n,gx):n)}function Rl(n){if(n instanceof IDBRequest)return g5(n);if(xy.has(n))return xy.get(n);const e=v5(n);return e!==n&&(xy.set(n,e),ev.set(e,n)),e}const wy=n=>ev.get(n);function _5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),h=Rl(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Rl(c.result),m.oldVersion,m.newVersion,Rl(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),i&&m.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const E5=["get","getKey","getAll","getAllKeys","count"],b5=["put","add","delete","clear"],vy=new Map;function Ab(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vy.get(e))return vy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=b5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||E5.includes(t)))return;const o=async function(c,...h){const m=this.transaction(c,i?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),i&&m.done]))[0]};return vy.set(e,o),o}x5(n=>({...n,get:(e,t,r)=>Ab(e,t)||n.get(e,t,r),has:(e,t)=>!!Ab(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(A5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function A5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yx="@firebase/app",Tb="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Jw("@firebase/app"),T5="@firebase/app-compat",C5="@firebase/analytics-compat",S5="@firebase/analytics",R5="@firebase/app-check-compat",N5="@firebase/app-check",k5="@firebase/auth",P5="@firebase/auth-compat",D5="@firebase/database",O5="@firebase/data-connect",M5="@firebase/database-compat",L5="@firebase/functions",V5="@firebase/functions-compat",F5="@firebase/installations",B5="@firebase/installations-compat",j5="@firebase/messaging",U5="@firebase/messaging-compat",z5="@firebase/performance",W5="@firebase/performance-compat",H5="@firebase/remote-config",G5="@firebase/remote-config-compat",$5="@firebase/storage",q5="@firebase/storage-compat",K5="@firebase/firestore",X5="@firebase/ai",Y5="@firebase/firestore-compat",Q5="firebase",Z5="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="[DEFAULT]",J5={[yx]:"fire-core",[T5]:"fire-core-compat",[S5]:"fire-analytics",[C5]:"fire-analytics-compat",[N5]:"fire-app-check",[R5]:"fire-app-check-compat",[k5]:"fire-auth",[P5]:"fire-auth-compat",[D5]:"fire-rtdb",[O5]:"fire-data-connect",[M5]:"fire-rtdb-compat",[L5]:"fire-fn",[V5]:"fire-fn-compat",[F5]:"fire-iid",[B5]:"fire-iid-compat",[j5]:"fire-fcm",[U5]:"fire-fcm-compat",[z5]:"fire-perf",[W5]:"fire-perf-compat",[H5]:"fire-rc",[G5]:"fire-rc-compat",[$5]:"fire-gcs",[q5]:"fire-gcs-compat",[K5]:"fire-fst",[Y5]:"fire-fst-compat",[X5]:"fire-vertex","fire-js":"fire-js",[Q5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=new Map,e9=new Map,wx=new Map;function Cb(n,e){try{n.container.addComponent(e)}catch(t){Ra.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wc(n){const e=n.name;if(wx.has(e))return Ra.debug(`There were multiple attempts to register component ${e}.`),!1;wx.set(e,n);for(const t of im.values())Cb(t,n);for(const t of e9.values())Cb(t,n);return!0}function Ym(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ts(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nl=new zf("app","Firebase",t9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ml("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=Z5;function vx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:xx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Nl.create("bad-app-name",{appName:String(i)});if(t||(t=gS()),!t)throw Nl.create("no-options");const o=im.get(i);if(o){if(zc(t,o.options)&&zc(r,o.config))return o;throw Nl.create("duplicate-app",{appName:i})}const c=new l5(i);for(const m of wx.values())c.addComponent(m);const h=new n9(t,r,c);return im.set(i,h),h}function tv(n=xx){const e=im.get(n);if(!e&&n===xx&&gS())return vx();if(!e)throw Nl.create("no-app",{appName:n});return e}function Bo(n,e,t){let r=J5[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ra.warn(c.join(" "));return}Wc(new Ml(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="firebase-heartbeat-database",i9=1,uf="firebase-heartbeat-store";let _y=null;function AS(){return _y||(_y=_5(r9,i9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Nl.create("idb-open",{originalErrorMessage:n.message})})),_y}async function s9(n){try{const t=(await AS()).transaction(uf),r=await t.objectStore(uf).get(TS(n));return await t.done,r}catch(e){if(e instanceof na)Ra.warn(e.message);else{const t=Nl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ra.warn(t.message)}}}async function Sb(n,e){try{const r=(await AS()).transaction(uf,"readwrite");await r.objectStore(uf).put(e,TS(n)),await r.done}catch(t){if(t instanceof na)Ra.warn(t.message);else{const r=Nl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ra.warn(r.message)}}}function TS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9=1024,a9=30;class l9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new u9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Rb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>a9){const c=d9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ra.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Rb(),{heartbeatsToSend:r,unsentEntries:i}=c9(this._heartbeatsCache.heartbeats),o=rm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ra.warn(t),""}}}function Rb(){return new Date().toISOString().substring(0,10)}function c9(n,e=o9){const t=[];let r=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Nb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Nb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class u9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?QM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await s9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Nb(n){return rm(JSON.stringify({version:2,heartbeats:n})).length}function d9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(n){Wc(new Ml("platform-logger",e=>new I5(e),"PRIVATE")),Wc(new Ml("heartbeat",e=>new l9(e),"PRIVATE")),Bo(yx,Tb,n),Bo(yx,Tb,"esm2020"),Bo("fire-js","")}h9("");var f9="firebase",p9="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bo(f9,p9,"app");function CS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m9=CS,SS=new zf("auth","Firebase",CS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm=new Jw("@firebase/auth");function g9(n,...e){sm.logLevel<=Xt.WARN&&sm.warn(`Auth (${au}): ${n}`,...e)}function N0(n,...e){sm.logLevel<=Xt.ERROR&&sm.error(`Auth (${au}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(n,...e){throw nv(n,...e)}function jo(n,...e){return nv(n,...e)}function RS(n,e,t){const r={...m9(),[e]:t};return new zf("auth","Firebase",r).create(e,{appName:n.name})}function Ta(n){return RS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return SS.create(n,...e)}function Et(n,e,...t){if(!n)throw nv(e,...t)}function _a(n){const e="INTERNAL ASSERTION FAILED: "+n;throw N0(e),new Error(e)}function Na(n,e){n||_a(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function y9(){return kb()==="http:"||kb()==="https:"}function kb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y9()||KM()||"connection"in navigator)?navigator.onLine:!0}function w9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Na(t>e,"Short delay should be less than long delay!"),this.isMobile=$M()||XM()}get(){return x9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){Na(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],E9=new Hf(3e4,6e4);function $l(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ja(n,e,t,r,i={}){return kS(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const h=Wf({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...o};return qM()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Gl(n.emulatorConfig.host)&&(g.credentials="include"),NS.fetch()(await PS(n,n.config.apiHost,t,h),g)})}async function kS(n,e,t){n._canInitEmulator=!1;const r={...v9,...e};try{const i=new I9(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw i0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[m,g]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw i0(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw i0(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw i0(n,"user-disabled",c);const w=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw RS(n,w,g);po(n,w)}}catch(i){if(i instanceof na)throw i;po(n,"network-request-failed",{message:String(i)})}}async function Gf(n,e,t,r,i={}){const o=await ja(n,e,t,r,i);return"mfaPendingCredential"in o&&po(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function PS(n,e,t,r){const i=`${e}${t}?${r}`,o=n,c=o.config.emulator?rv(n.config,i):`${n.config.apiScheme}://${i}`;return _9.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function b9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class I9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jo(this.auth,"network-request-failed")),E9.get())})}}function i0(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=jo(n,e,r);return i.customData._tokenResponse=t,i}function Pb(n){return n!==void 0&&n.enterprise!==void 0}class A9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return b9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function T9(n,e){return ja(n,"GET","/v2/recaptchaConfig",$l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(n,e){return ja(n,"POST","/v1/accounts:delete",e)}async function om(n,e){return ja(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S9(n,e=!1){const t=nr(n),r=await t.getIdToken(e),i=iv(r);Et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Hh(Ey(i.auth_time)),issuedAtTime:Hh(Ey(i.iat)),expirationTime:Hh(Ey(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ey(n){return Number(n)*1e3}function iv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return N0("JWT malformed, contained fewer than 3 sections"),null;try{const i=hS(t);return i?JSON.parse(i):(N0("Failed to decode base64 JWT payload"),null)}catch(i){return N0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Db(n){const e=iv(n);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof na&&R9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function R9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hh(this.lastLoginAt),this.creationTime=Hh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function am(n){var E;const e=n.auth,t=await n.getIdToken(),r=await pd(n,om(e,{idToken:t}));Et(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(E=i.providerUserInfo)!=null&&E.length?DS(i.providerUserInfo):[],c=P9(n.providerData,o),h=n.isAnonymous,m=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),g=h?m:!1,w={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Ex(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(n,w)}async function k9(n){const e=nr(n);await am(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function P9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function DS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D9(n,e){const t=await kS(n,{},async()=>{const r=Wf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await PS(n,i,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return n.emulatorConfig&&Gl(n.emulatorConfig.host)&&(m.credentials="include"),NS.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function O9(n,e){return ja(n,"POST","/v2/accounts:revokeToken",$l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Db(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const t=Db(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await D9(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new sd;return r&&(Et(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Et(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Et(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sd,this.toJSON())}_performRefresh(){return _a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n,e){Et(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ho{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new N9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ex(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await pd(this,this.stsTokenManager.getToken(this.auth,e));return Et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return S9(this,e)}reload(){return k9(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ho({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await am(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ts(this.auth.app))return Promise.reject(Ta(this.auth));const e=await this.getIdToken();return await pd(this,C9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:R,providerData:M,stsTokenManager:D}=t;Et(E&&D,e,"internal-error");const L=sd.fromJSON(this.name,D);Et(typeof E=="string",e,"internal-error"),fl(r,e.name),fl(i,e.name),Et(typeof T=="boolean",e,"internal-error"),Et(typeof R=="boolean",e,"internal-error"),fl(o,e.name),fl(c,e.name),fl(h,e.name),fl(m,e.name),fl(g,e.name),fl(w,e.name);const G=new ho({uid:E,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:R,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:L,createdAt:g,lastLoginAt:w});return M&&Array.isArray(M)&&(G.providerData=M.map(z=>({...z}))),m&&(G._redirectEventId=m),G}static async _fromIdTokenResponse(e,t,r=!1){const i=new sd;i.updateFromServerResponse(t);const o=new ho({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await am(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Et(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?DS(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),h=new sd;h.updateFromIdToken(r);const m=new ho({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ex(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map;function Ea(n){Na(n instanceof Function,"Expected a class definition");let e=Ob.get(n);return e?(Na(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ob.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OS.type="NONE";const Mb=OS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(n,e,t){return`firebase:${n}:${e}:${t}`}class od{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=k0(this.userKey,i.apiKey,o),this.fullPersistenceKey=k0("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await om(this.auth,{idToken:e}).catch(()=>{});return t?ho._fromGetAccountInfoResponse(this.auth,t,e):null}return ho._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new od(Ea(Mb),e,r);const i=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||Ea(Mb);const c=k0(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const w=await g._get(c);if(w){let E;if(typeof w=="string"){const T=await om(e,{idToken:w}).catch(()=>{});if(!T)break;E=await ho._fromGetAccountInfoResponse(e,T,w)}else E=ho._fromJSON(e,w);g!==o&&(h=E),o=g;break}}catch{}const m=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new od(o,e,r):(o=m[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new od(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jS(e))return"Blackberry";if(US(e))return"Webos";if(LS(e))return"Safari";if((e.includes("chrome/")||VS(e))&&!e.includes("edge/"))return"Chrome";if(BS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MS(n=Kr()){return/firefox\//i.test(n)}function LS(n=Kr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VS(n=Kr()){return/crios\//i.test(n)}function FS(n=Kr()){return/iemobile/i.test(n)}function BS(n=Kr()){return/android/i.test(n)}function jS(n=Kr()){return/blackberry/i.test(n)}function US(n=Kr()){return/webos/i.test(n)}function sv(n=Kr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function M9(n=Kr()){var e;return sv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function L9(){return YM()&&document.documentMode===10}function zS(n=Kr()){return sv(n)||BS(n)||US(n)||jS(n)||/windows phone/i.test(n)||FS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n,e=[]){let t;switch(n){case"Browser":t=Lb(Kr());break;case"Worker":t=`${Lb(Kr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${au}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,h)=>{try{const m=e(o);c(m)}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F9(n,e={}){return ja(n,"GET","/v2/passwordPolicy",$l(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=6;class j9{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??B9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vb(this),this.idTokenSubscription=new Vb(this),this.beforeStateQueue=new V9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ea(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await od.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await om(this,{idToken:e}),r=await ho._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ts(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await am(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ts(this.app))return Promise.reject(Ta(this));const t=e?nr(e):null;return t&&Et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ts(this.app)?Promise.reject(Ta(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ts(this.app)?Promise.reject(Ta(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F9(this),t=new j9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await O9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ea(e)||this._popupRedirectResolver;Et(t,this,"argument-error"),this.redirectPersistenceManager=await od.create(this,[Ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,i);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&g9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function lu(n){return nr(n)}class Vb{constructor(e){this.auth=e,this.observer=null,this.addObserver=n5(t=>this.observer=t)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z9(n){Qm=n}function HS(n){return Qm.loadJS(n)}function W9(){return Qm.recaptchaEnterpriseScript}function H9(){return Qm.gapiScript}function G9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class $9{constructor(){this.enterprise=new q9}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class q9{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const K9="recaptcha-enterprise",GS="NO_RECAPTCHA";class X9{constructor(e){this.type=K9,this.auth=lu(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{T9(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new A9(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(m=>{h(m)})})}function i(o,c,h){const m=window.grecaptcha;Pb(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(g=>{c(g)}).catch(()=>{c(GS)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $9().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(h=>{if(!t&&Pb(window.grecaptcha))i(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=W9();m.length!==0&&(m+=h),HS(m).then(()=>{i(h,o,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function Fb(n,e,t,r=!1,i=!1){const o=new X9(n);let c;if(i)c=GS;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function bx(n,e,t,r,i){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Fb(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Fb(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(n,e){const t=Ym(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(zc(o,e??{}))return i;po(i,"already-initialized")}return t.initialize({options:e})}function Q9(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ea);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Z9(n,e,t){const r=lu(n);Et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=$S(e),{host:c,port:h}=J9(e),m=h===null?"":`:${h}`,g={url:`${o}//${c}${m}/`},w=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Et(zc(g,r.config.emulator)&&zc(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,Gl(c)?(Qw(`${o}//${c}${m}`),Zw("Auth",!0)):eL()}function $S(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function J9(n){const e=$S(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Bb(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Bb(c)}}}function Bb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function eL(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _a("not implemented")}_getIdTokenResponse(e){return _a("not implemented")}_linkToIdToken(e,t){return _a("not implemented")}_getReauthenticationResolver(e){return _a("not implemented")}}async function tL(n,e){return ja(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(n,e){return Gf(n,"POST","/v1/accounts:signInWithPassword",$l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(n,e){return Gf(n,"POST","/v1/accounts:signInWithEmailLink",$l(n,e))}async function iL(n,e){return Gf(n,"POST","/v1/accounts:signInWithEmailLink",$l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends ov{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new df(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new df(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bx(e,t,"signInWithPassword",nL);case"emailLink":return rL(e,{email:this._email,oobCode:this._password});default:po(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bx(e,r,"signUpPassword",tL);case"emailLink":return iL(e,{idToken:t,email:this._email,oobCode:this._password});default:po(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(n,e){return Gf(n,"POST","/v1/accounts:signInWithIdp",$l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="http://localhost";class Hc extends ov{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):po("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new Hc(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ad(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ad(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ad(e,t)}buildRequest(){const e={requestUri:sL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Wf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aL(n){const e=Ph(Dh(n)).link,t=e?Ph(Dh(e)).deep_link_id:null,r=Ph(Dh(n)).deep_link_id;return(r?Ph(Dh(r)).link:null)||r||t||e||n}class av{constructor(e){const t=Ph(Dh(e)),r=t.apiKey??null,i=t.oobCode??null,o=oL(t.mode??null);Et(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=aL(e);try{return new av(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this.providerId=Md.PROVIDER_ID}static credential(e,t){return df._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=av.parseLink(t);return Et(r,"argument-error"),df._fromEmailAndCode(e,r.code,r.tenantId)}}Md.PROVIDER_ID="password";Md.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Md.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends qS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends $f{constructor(){super("facebook.com")}static credential(e){return Hc._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return El.credential(e.oauthAccessToken)}catch{return null}}}El.FACEBOOK_SIGN_IN_METHOD="facebook.com";El.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends $f{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hc._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return bl.credential(t,r)}catch{return null}}}bl.GOOGLE_SIGN_IN_METHOD="google.com";bl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends $f{constructor(){super("github.com")}static credential(e){return Hc._fromParams({providerId:Il.PROVIDER_ID,signInMethod:Il.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Il.credentialFromTaggedObject(e)}static credentialFromError(e){return Il.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Il.credential(e.oauthAccessToken)}catch{return null}}}Il.GITHUB_SIGN_IN_METHOD="github.com";Il.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends $f{constructor(){super("twitter.com")}static credential(e,t){return Hc._fromParams({providerId:Al.PROVIDER_ID,signInMethod:Al.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Al.credentialFromTaggedObject(e)}static credentialFromError(e){return Al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Al.credential(t,r)}catch{return null}}}Al.TWITTER_SIGN_IN_METHOD="twitter.com";Al.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(n,e){return Gf(n,"POST","/v1/accounts:signUp",$l(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await ho._fromIdTokenResponse(e,r,i),c=jb(r);return new Gc({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=jb(r);return new Gc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function jb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm extends na{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new lm(e,t,r,i)}}function KS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lm._fromErrorAndOperation(n,o,e,r):o})}async function cL(n,e,t=!1){const r=await pd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Gc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(n,e,t=!1){const{auth:r}=n;if(Ts(r.app))return Promise.reject(Ta(r));const i="reauthenticate";try{const o=await pd(n,KS(r,i,e,n),t);Et(o.idToken,r,"internal-error");const c=iv(o.idToken);Et(c,r,"internal-error");const{sub:h}=c;return Et(n.uid===h,r,"user-mismatch"),Gc._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&po(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(n,e,t=!1){if(Ts(n.app))return Promise.reject(Ta(n));const r="signIn",i=await KS(n,r,e),o=await Gc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function dL(n,e){return XS(lu(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(n){const e=lu(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hL(n,e,t){if(Ts(n.app))return Promise.reject(Ta(n));const r=lu(n),c=await bx(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lL).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&YS(n),m}),h=await Gc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function fL(n,e,t){return Ts(n.app)?Promise.reject(Ta(n)):dL(nr(n),Md.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&YS(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(n,e){return ja(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=nr(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await pd(r,pL(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function gL(n,e,t,r){return nr(n).onIdTokenChanged(e,t,r)}function yL(n,e,t){return nr(n).beforeAuthStateChanged(e,t)}function xL(n,e,t,r){return nr(n).onAuthStateChanged(e,t,r)}function wL(n){return nr(n).signOut()}const cm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cm,"1"),this.storage.removeItem(cm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=1e3,_L=10;class ZS extends QS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);L9()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_L):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},vL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZS.type="LOCAL";const EL=ZS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS extends QS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}JS.type="SESSION";const eR=JS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Zm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(c).map(async g=>g(t.origin,o)),m=await bL(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((h,m)=>{const g=lv("",20);i.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(w),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(w),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(){return window}function AL(n){Uo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return typeof Uo().WorkerGlobalScope<"u"&&typeof Uo().importScripts=="function"}async function TL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function SL(){return tR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="firebaseLocalStorageDb",RL=1,um="firebaseLocalStorage",rR="fbase_key";class qf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jm(n,e){return n.transaction([um],e?"readwrite":"readonly").objectStore(um)}function NL(){const n=indexedDB.deleteDatabase(nR);return new qf(n).toPromise()}function Ix(){const n=indexedDB.open(nR,RL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(um,{keyPath:rR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(um)?e(r):(r.close(),await NL(),e(await Ix()))})})}async function Ub(n,e,t){const r=Jm(n,!0).put({[rR]:e,value:t});return new qf(r).toPromise()}async function kL(n,e){const t=Jm(n,!1).get(e),r=await new qf(t).toPromise();return r===void 0?null:r.value}function zb(n,e){const t=Jm(n,!0).delete(e);return new qf(t).toPromise()}const PL=800,DL=3;class iR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ix(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>DL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zm._getInstance(SL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await TL(),!this.activeServiceWorker)return;this.sender=new IL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ix();return await Ub(e,cm,"1"),await zb(e,cm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ub(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>kL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Jm(i,!1).getAll();return new qf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iR.type="LOCAL";const OL=iR;new Hf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(n,e){return e?Ea(e):(Et(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends ov{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ad(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ad(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ad(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function LL(n){return XS(n.auth,new cv(n),n.bypassAuthState)}function VL(n){const{auth:e,user:t}=n;return Et(t,e,"internal-error"),uL(t,new cv(n),n.bypassAuthState)}async function FL(n){const{auth:e,user:t}=n;return Et(t,e,"internal-error"),cL(t,new cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LL;case"linkViaPopup":case"linkViaRedirect":return FL;case"reauthViaPopup":case"reauthViaRedirect":return VL;default:po(this.auth,"internal-error")}}resolve(e){Na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Na(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new Hf(2e3,1e4);class Zu extends sR{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Zu.currentPopupAction&&Zu.currentPopupAction.cancel(),Zu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){Na(this.filter.length===1,"Popup operations only handle one event");const e=lv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(jo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BL.get())};e()}}Zu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="pendingRedirect",P0=new Map;class UL extends sR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=P0.get(this.auth._key());if(!e){try{const r=await zL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}P0.set(this.auth._key(),e)}return this.bypassAuthState||P0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zL(n,e){const t=GL(e),r=HL(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function WL(n,e){P0.set(n._key(),e)}function HL(n){return Ea(n._redirectPersistence)}function GL(n){return k0(jL,n.config.apiKey,n.name)}async function $L(n,e,t=!1){if(Ts(n.app))return Promise.reject(Ta(n));const r=lu(n),i=ML(r,e),c=await new UL(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=600*1e3;class KL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!oR(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(jo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wb(e))}saveEventToCache(e){this.cachedEventUids.add(Wb(e)),this.lastProcessedEventTime=Date.now()}}function Wb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(n,e={}){return ja(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZL=/^https?/;async function JL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await YL(n);for(const t of e)try{if(e7(t))return}catch{}po(n,"unauthorized-domain")}function e7(n){const e=_x(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!ZL.test(t))return!1;if(QL.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=new Hf(3e4,6e4);function Hb(){const n=Uo().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function n7(n){return new Promise((e,t)=>{var i,o,c;function r(){Hb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hb(),t(jo(n,"network-request-failed"))},timeout:t7.get()})}if((o=(i=Uo().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Uo().gapi)!=null&&c.load)r();else{const h=G9("iframefcb");return Uo()[h]=()=>{gapi.load?r():t(jo(n,"network-request-failed"))},HS(`${H9()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw D0=null,e})}let D0=null;function r7(n){return D0=D0||n7(n),D0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=new Hf(5e3,15e3),s7="__/auth/iframe",o7="emulator/auth/iframe",a7={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l7=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c7(n){const e=n.config;Et(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rv(e,o7):`https://${n.config.authDomain}/${s7}`,r={apiKey:e.apiKey,appName:n.name,v:au},i=l7.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Wf(r).slice(1)}`}async function u7(n){const e=await r7(n),t=Uo().gapi;return Et(t,n,"internal-error"),e.open({where:document.body,url:c7(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a7,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=jo(n,"network-request-failed"),h=Uo().setTimeout(()=>{o(c)},i7.get());function m(){Uo().clearTimeout(h),i(r)}r.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h7=500,f7=600,p7="_blank",m7="http://localhost";class Gb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g7(n,e,t,r=h7,i=f7){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...d7,width:r.toString(),height:i.toString(),top:o,left:c},g=Kr().toLowerCase();t&&(h=VS(g)?p7:t),MS(g)&&(e=e||m7,m.scrollbars="yes");const w=Object.entries(m).reduce((T,[R,M])=>`${T}${R}=${M},`,"");if(M9(g)&&h!=="_self")return y7(e||"",h),new Gb(null);const E=window.open(e||"",h,w);Et(E,n,"popup-blocked");try{E.focus()}catch{}return new Gb(E)}function y7(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7="__/auth/handler",w7="emulator/auth/handler",v7=encodeURIComponent("fac");async function $b(n,e,t,r,i,o){Et(n.config.authDomain,n,"auth-domain-config-required"),Et(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:au,eventId:i};if(e instanceof qS){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",t5(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))c[w]=E}if(e instanceof $f){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const w of Object.keys(h))h[w]===void 0&&delete h[w];const m=await n._getAppCheckToken(),g=m?`#${v7}=${encodeURIComponent(m)}`:"";return`${_7(n)}?${Wf(h).slice(1)}${g}`}function _7({config:n}){return n.emulator?rv(n,w7):`https://${n.authDomain}/${x7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="webStorageSupport";class E7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eR,this._completeRedirectFn=$L,this._overrideRedirectResult=WL}async _openPopup(e,t,r,i){var c;Na((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await $b(e,t,r,_x(),i);return g7(e,o,lv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await $b(e,t,r,_x(),i);return AL(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Na(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await u7(e),r=new KL(e);return t.register("authEvent",i=>(Et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(by,{type:by},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[by];o!==void 0&&t(!!o),po(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zS()||LS()||sv()}}const b7=E7;var qb="@firebase/auth",Kb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T7(n){Wc(new Ml("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WS(n)},g=new U9(r,i,o,m);return Q9(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wc(new Ml("auth-internal",e=>{const t=lu(e.getProvider("auth").getImmediate());return(r=>new I7(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bo(qb,Kb,A7(n)),Bo(qb,Kb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=300,S7=yS("authIdTokenMaxAge")||C7;let Xb=null;const R7=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>S7)return;const i=t==null?void 0:t.token;Xb!==i&&(Xb=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function N7(n=tv()){const e=Ym(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Y9(n,{popupRedirectResolver:b7,persistence:[OL,EL,eR]}),r=yS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=R7(o.toString());yL(t,c,()=>c(t.currentUser)),gL(t,h=>c(h))}}const i=pS("auth");return i&&Z9(t,`http://${i}`),t}function k7(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}z9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=jo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",k7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T7("Browser");var Yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kl,aR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,B){function H(){}H.prototype=B.prototype,F.D=B.prototype,F.prototype=new H,F.prototype.constructor=F,F.C=function(ee,ne,te){for(var K=Array(arguments.length-2),we=2;we<arguments.length;we++)K[we-2]=arguments[we];return B.prototype[ne].apply(ee,K)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,B,H){H||(H=0);var ee=Array(16);if(typeof B=="string")for(var ne=0;16>ne;++ne)ee[ne]=B.charCodeAt(H++)|B.charCodeAt(H++)<<8|B.charCodeAt(H++)<<16|B.charCodeAt(H++)<<24;else for(ne=0;16>ne;++ne)ee[ne]=B[H++]|B[H++]<<8|B[H++]<<16|B[H++]<<24;B=F.g[0],H=F.g[1],ne=F.g[2];var te=F.g[3],K=B+(te^H&(ne^te))+ee[0]+3614090360&4294967295;B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[1]+3905402710&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[2]+606105819&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[3]+3250441966&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(te^H&(ne^te))+ee[4]+4118548399&4294967295,B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[5]+1200080426&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[6]+2821735955&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[7]+4249261313&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(te^H&(ne^te))+ee[8]+1770035416&4294967295,B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[9]+2336552879&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[10]+4294925233&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[11]+2304563134&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(te^H&(ne^te))+ee[12]+1804603682&4294967295,B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[13]+4254626195&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[14]+2792965006&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[15]+1236535329&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(ne^te&(H^ne))+ee[1]+4129170786&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[6]+3225465664&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[11]+643717713&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[0]+3921069994&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(ne^te&(H^ne))+ee[5]+3593408605&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[10]+38016083&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[15]+3634488961&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[4]+3889429448&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(ne^te&(H^ne))+ee[9]+568446438&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[14]+3275163606&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[3]+4107603335&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[8]+1163531501&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(ne^te&(H^ne))+ee[13]+2850285829&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[2]+4243563512&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[7]+1735328473&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[12]+2368359562&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(H^ne^te)+ee[5]+4294588738&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[8]+2272392833&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[11]+1839030562&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[14]+4259657740&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(H^ne^te)+ee[1]+2763975236&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[4]+1272893353&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[7]+4139469664&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[10]+3200236656&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(H^ne^te)+ee[13]+681279174&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[0]+3936430074&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[3]+3572445317&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[6]+76029189&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(H^ne^te)+ee[9]+3654602809&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[12]+3873151461&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[15]+530742520&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[2]+3299628645&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(ne^(H|~te))+ee[0]+4096336452&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[7]+1126891415&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[14]+2878612391&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[5]+4237533241&4294967295,H=ne+(K<<21&4294967295|K>>>11),K=B+(ne^(H|~te))+ee[12]+1700485571&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[3]+2399980690&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[10]+4293915773&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[1]+2240044497&4294967295,H=ne+(K<<21&4294967295|K>>>11),K=B+(ne^(H|~te))+ee[8]+1873313359&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[15]+4264355552&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[6]+2734768916&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[13]+1309151649&4294967295,H=ne+(K<<21&4294967295|K>>>11),K=B+(ne^(H|~te))+ee[4]+4149444226&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[11]+3174756917&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[2]+718787259&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[9]+3951481745&4294967295,F.g[0]=F.g[0]+B&4294967295,F.g[1]=F.g[1]+(ne+(K<<21&4294967295|K>>>11))&4294967295,F.g[2]=F.g[2]+ne&4294967295,F.g[3]=F.g[3]+te&4294967295}r.prototype.u=function(F,B){B===void 0&&(B=F.length);for(var H=B-this.blockSize,ee=this.B,ne=this.h,te=0;te<B;){if(ne==0)for(;te<=H;)i(this,F,te),te+=this.blockSize;if(typeof F=="string"){for(;te<B;)if(ee[ne++]=F.charCodeAt(te++),ne==this.blockSize){i(this,ee),ne=0;break}}else for(;te<B;)if(ee[ne++]=F[te++],ne==this.blockSize){i(this,ee),ne=0;break}}this.h=ne,this.o+=B},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var B=1;B<F.length-8;++B)F[B]=0;var H=8*this.o;for(B=F.length-8;B<F.length;++B)F[B]=H&255,H/=256;for(this.u(F),F=Array(16),B=H=0;4>B;++B)for(var ee=0;32>ee;ee+=8)F[H++]=this.g[B]>>>ee&255;return F};function o(F,B){var H=h;return Object.prototype.hasOwnProperty.call(H,F)?H[F]:H[F]=B(F)}function c(F,B){this.h=B;for(var H=[],ee=!0,ne=F.length-1;0<=ne;ne--){var te=F[ne]|0;ee&&te==B||(H[ne]=te,ee=!1)}this.g=H}var h={};function m(F){return-128<=F&&128>F?o(F,function(B){return new c([B|0],0>B?-1:0)}):new c([F|0],0>F?-1:0)}function g(F){if(isNaN(F)||!isFinite(F))return E;if(0>F)return L(g(-F));for(var B=[],H=1,ee=0;F>=H;ee++)B[ee]=F/H|0,H*=4294967296;return new c(B,0)}function w(F,B){if(F.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(F.charAt(0)=="-")return L(w(F.substring(1),B));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var H=g(Math.pow(B,8)),ee=E,ne=0;ne<F.length;ne+=8){var te=Math.min(8,F.length-ne),K=parseInt(F.substring(ne,ne+te),B);8>te?(te=g(Math.pow(B,te)),ee=ee.j(te).add(g(K))):(ee=ee.j(H),ee=ee.add(g(K)))}return ee}var E=m(0),T=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(D(this))return-L(this).m();for(var F=0,B=1,H=0;H<this.g.length;H++){var ee=this.i(H);F+=(0<=ee?ee:4294967296+ee)*B,B*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(M(this))return"0";if(D(this))return"-"+L(this).toString(F);for(var B=g(Math.pow(F,6)),H=this,ee="";;){var ne=Y(H,B).g;H=G(H,ne.j(B));var te=((0<H.g.length?H.g[0]:H.h)>>>0).toString(F);if(H=ne,M(H))return te+ee;for(;6>te.length;)te="0"+te;ee=te+ee}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function M(F){if(F.h!=0)return!1;for(var B=0;B<F.g.length;B++)if(F.g[B]!=0)return!1;return!0}function D(F){return F.h==-1}n.l=function(F){return F=G(this,F),D(F)?-1:M(F)?0:1};function L(F){for(var B=F.g.length,H=[],ee=0;ee<B;ee++)H[ee]=~F.g[ee];return new c(H,~F.h).add(T)}n.abs=function(){return D(this)?L(this):this},n.add=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0,ne=0;ne<=B;ne++){var te=ee+(this.i(ne)&65535)+(F.i(ne)&65535),K=(te>>>16)+(this.i(ne)>>>16)+(F.i(ne)>>>16);ee=K>>>16,te&=65535,K&=65535,H[ne]=K<<16|te}return new c(H,H[H.length-1]&-2147483648?-1:0)};function G(F,B){return F.add(L(B))}n.j=function(F){if(M(this)||M(F))return E;if(D(this))return D(F)?L(this).j(L(F)):L(L(this).j(F));if(D(F))return L(this.j(L(F)));if(0>this.l(R)&&0>F.l(R))return g(this.m()*F.m());for(var B=this.g.length+F.g.length,H=[],ee=0;ee<2*B;ee++)H[ee]=0;for(ee=0;ee<this.g.length;ee++)for(var ne=0;ne<F.g.length;ne++){var te=this.i(ee)>>>16,K=this.i(ee)&65535,we=F.i(ne)>>>16,se=F.i(ne)&65535;H[2*ee+2*ne]+=K*se,z(H,2*ee+2*ne),H[2*ee+2*ne+1]+=te*se,z(H,2*ee+2*ne+1),H[2*ee+2*ne+1]+=K*we,z(H,2*ee+2*ne+1),H[2*ee+2*ne+2]+=te*we,z(H,2*ee+2*ne+2)}for(ee=0;ee<B;ee++)H[ee]=H[2*ee+1]<<16|H[2*ee];for(ee=B;ee<2*B;ee++)H[ee]=0;return new c(H,0)};function z(F,B){for(;(F[B]&65535)!=F[B];)F[B+1]+=F[B]>>>16,F[B]&=65535,B++}function W(F,B){this.g=F,this.h=B}function Y(F,B){if(M(B))throw Error("division by zero");if(M(F))return new W(E,E);if(D(F))return B=Y(L(F),B),new W(L(B.g),L(B.h));if(D(B))return B=Y(F,L(B)),new W(L(B.g),B.h);if(30<F.g.length){if(D(F)||D(B))throw Error("slowDivide_ only works with positive integers.");for(var H=T,ee=B;0>=ee.l(F);)H=Z(H),ee=Z(ee);var ne=ie(H,1),te=ie(ee,1);for(ee=ie(ee,2),H=ie(H,2);!M(ee);){var K=te.add(ee);0>=K.l(F)&&(ne=ne.add(H),te=K),ee=ie(ee,1),H=ie(H,1)}return B=G(F,ne.j(B)),new W(ne,B)}for(ne=E;0<=F.l(B);){for(H=Math.max(1,Math.floor(F.m()/B.m())),ee=Math.ceil(Math.log(H)/Math.LN2),ee=48>=ee?1:Math.pow(2,ee-48),te=g(H),K=te.j(B);D(K)||0<K.l(F);)H-=ee,te=g(H),K=te.j(B);M(te)&&(te=T),ne=ne.add(te),F=G(F,K)}return new W(ne,F)}n.A=function(F){return Y(this,F).h},n.and=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0;ee<B;ee++)H[ee]=this.i(ee)&F.i(ee);return new c(H,this.h&F.h)},n.or=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0;ee<B;ee++)H[ee]=this.i(ee)|F.i(ee);return new c(H,this.h|F.h)},n.xor=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0;ee<B;ee++)H[ee]=this.i(ee)^F.i(ee);return new c(H,this.h^F.h)};function Z(F){for(var B=F.g.length+1,H=[],ee=0;ee<B;ee++)H[ee]=F.i(ee)<<1|F.i(ee-1)>>>31;return new c(H,F.h)}function ie(F,B){var H=B>>5;B%=32;for(var ee=F.g.length-H,ne=[],te=0;te<ee;te++)ne[te]=0<B?F.i(te+H)>>>B|F.i(te+H+1)<<32-B:F.i(te+H);return new c(ne,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=w,kl=c}).apply(typeof Yb<"u"?Yb:typeof self<"u"?self:typeof window<"u"?window:{});var s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lR,Oh,cR,O0,Ax,uR,dR,hR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,N,V){return _==Array.prototype||_==Object.prototype||(_[N]=V.value),_};function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof s0=="object"&&s0];for(var N=0;N<_.length;++N){var V=_[N];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=t(this);function i(_,N){if(N)e:{var V=r;_=_.split(".");for(var X=0;X<_.length-1;X++){var me=_[X];if(!(me in V))break e;V=V[me]}_=_[_.length-1],X=V[_],N=N(X),N!=X&&N!=null&&e(V,_,{configurable:!0,writable:!0,value:N})}}function o(_,N){_ instanceof String&&(_+="");var V=0,X=!1,me={next:function(){if(!X&&V<_.length){var Ie=V++;return{value:N(Ie,_[Ie]),done:!1}}return X=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(_){return _||function(){return o(this,function(N,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(_){var N=typeof _;return N=N!="object"?N:_?Array.isArray(_)?"array":N:"null",N=="array"||N=="object"&&typeof _.length=="number"}function g(_){var N=typeof _;return N=="object"&&_!=null||N=="function"}function w(_,N,V){return _.call.apply(_.bind,arguments)}function E(_,N,V){if(!_)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,X),_.apply(N,me)}}return function(){return _.apply(N,arguments)}}function T(_,N,V){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:E,T.apply(null,arguments)}function R(_,N){var V=Array.prototype.slice.call(arguments,1);return function(){var X=V.slice();return X.push.apply(X,arguments),_.apply(this,X)}}function M(_,N){function V(){}V.prototype=N.prototype,_.aa=N.prototype,_.prototype=new V,_.prototype.constructor=_,_.Qb=function(X,me,Ie){for(var He=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)He[dn-2]=arguments[dn];return N.prototype[me].apply(X,He)}}function D(_){const N=_.length;if(0<N){const V=Array(N);for(let X=0;X<N;X++)V[X]=_[X];return V}return[]}function L(_,N){for(let V=1;V<arguments.length;V++){const X=arguments[V];if(m(X)){const me=_.length||0,Ie=X.length||0;_.length=me+Ie;for(let He=0;He<Ie;He++)_[me+He]=X[He]}else _.push(X)}}class G{constructor(N,V){this.i=N,this.j=V,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function z(_){return/^[\s\xa0]*$/.test(_)}function W(){var _=h.navigator;return _&&(_=_.userAgent)?_:""}function Y(_){return Y[" "](_),_}Y[" "]=function(){};var Z=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ie(_,N,V){for(const X in _)N.call(V,_[X],X,_)}function F(_,N){for(const V in _)N.call(void 0,_[V],V,_)}function B(_){const N={};for(const V in _)N[V]=_[V];return N}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(_,N){let V,X;for(let me=1;me<arguments.length;me++){X=arguments[me];for(V in X)_[V]=X[V];for(let Ie=0;Ie<H.length;Ie++)V=H[Ie],Object.prototype.hasOwnProperty.call(X,V)&&(_[V]=X[V])}}function ne(_){var N=1;_=_.split(":");const V=[];for(;0<N&&_.length;)V.push(_.shift()),N--;return _.length&&V.push(_.join(":")),V}function te(_){h.setTimeout(()=>{throw _},0)}function K(){var _=Te;let N=null;return _.g&&(N=_.g,_.g=_.g.next,_.g||(_.h=null),N.next=null),N}class we{constructor(){this.h=this.g=null}add(N,V){const X=se.get();X.set(N,V),this.h?this.h.next=X:this.g=X,this.h=X}}var se=new G(()=>new Ae,_=>_.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(N,V){this.h=N,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,oe=!1,Te=new we,Ne=()=>{const _=h.Promise.resolve(void 0);xe=()=>{_.then(ae)}};var ae=()=>{for(var _;_=K();){try{_.h.call(_.g)}catch(V){te(V)}var N=se;N.j(_),100>N.h&&(N.h++,_.next=N.g,N.g=_)}oe=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(_,N){this.type=_,this.g=this.target=N,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var _=!1,N=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const V=()=>{};h.addEventListener("test",V,N),h.removeEventListener("test",V,N)}catch{}return _}();function it(_,N){if(Se.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var V=this.type=_.type,X=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=N,N=_.relatedTarget){if(Z){e:{try{Y(N.nodeName);var me=!0;break e}catch{}me=!1}me||(N=null)}}else V=="mouseover"?N=_.fromElement:V=="mouseout"&&(N=_.toElement);this.relatedTarget=N,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:Re[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&it.aa.h.call(this)}}M(it,Se);var Re={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function at(_,N,V,X,me){this.listener=_,this.proxy=null,this.src=N,this.type=V,this.capture=!!X,this.ha=me,this.key=++Ge,this.da=this.fa=!1}function st(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ct(_){this.src=_,this.g={},this.h=0}ct.prototype.add=function(_,N,V,X,me){var Ie=_.toString();_=this.g[Ie],_||(_=this.g[Ie]=[],this.h++);var He=ht(_,N,X,me);return-1<He?(N=_[He],V||(N.fa=!1)):(N=new at(N,this.src,Ie,!!X,me),N.fa=V,_.push(N)),N};function bt(_,N){var V=N.type;if(V in _.g){var X=_.g[V],me=Array.prototype.indexOf.call(X,N,void 0),Ie;(Ie=0<=me)&&Array.prototype.splice.call(X,me,1),Ie&&(st(N),_.g[V].length==0&&(delete _.g[V],_.h--))}}function ht(_,N,V,X){for(var me=0;me<_.length;++me){var Ie=_[me];if(!Ie.da&&Ie.listener==N&&Ie.capture==!!V&&Ie.ha==X)return me}return-1}var gn="closure_lm_"+(1e6*Math.random()|0),Vn={};function Dr(_,N,V,X,me){if(Array.isArray(N)){for(var Ie=0;Ie<N.length;Ie++)Dr(_,N[Ie],V,X,me);return null}return V=Qs(V),_&&_[Pe]?_.K(N,V,g(X)?!!X.capture:!1,me):Qt(_,N,V,!1,X,me)}function Qt(_,N,V,X,me,Ie){if(!N)throw Error("Invalid event type");var He=g(me)?!!me.capture:!!me,dn=wi(_);if(dn||(_[gn]=dn=new ct(_)),V=dn.add(N,V,X,He,Ie),V.proxy)return V;if(X=zt(),V.proxy=X,X.src=_,X.listener=V,_.addEventListener)Le||(me=He),me===void 0&&(me=!1),_.addEventListener(N.toString(),X,me);else if(_.attachEvent)_.attachEvent(Xe(N.toString()),X);else if(_.addListener&&_.removeListener)_.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return V}function zt(){function _(V){return N.call(_.src,_.listener,V)}const N=Kn;return _}function pt(_,N,V,X,me){if(Array.isArray(N))for(var Ie=0;Ie<N.length;Ie++)pt(_,N[Ie],V,X,me);else X=g(X)?!!X.capture:!!X,V=Qs(V),_&&_[Pe]?(_=_.i,N=String(N).toString(),N in _.g&&(Ie=_.g[N],V=ht(Ie,V,X,me),-1<V&&(st(Ie[V]),Array.prototype.splice.call(Ie,V,1),Ie.length==0&&(delete _.g[N],_.h--)))):_&&(_=wi(_))&&(N=_.g[N.toString()],_=-1,N&&(_=ht(N,V,X,me)),(V=-1<_?N[_]:null)&&xi(V))}function xi(_){if(typeof _!="number"&&_&&!_.da){var N=_.src;if(N&&N[Pe])bt(N.i,_);else{var V=_.type,X=_.proxy;N.removeEventListener?N.removeEventListener(V,X,_.capture):N.detachEvent?N.detachEvent(Xe(V),X):N.addListener&&N.removeListener&&N.removeListener(X),(V=wi(N))?(bt(V,_),V.h==0&&(V.src=null,N[gn]=null)):st(_)}}}function Xe(_){return _ in Vn?Vn[_]:Vn[_]="on"+_}function Kn(_,N){if(_.da)_=!0;else{N=new it(N,this);var V=_.listener,X=_.ha||_.src;_.fa&&xi(_),_=V.call(X,N)}return _}function wi(_){return _=_[gn],_ instanceof ct?_:null}var Yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qs(_){return typeof _=="function"?_:(_[Yr]||(_[Yr]=function(N){return _.handleEvent(N)}),_[Yr])}function Wt(){he.call(this),this.i=new ct(this),this.M=this,this.F=null}M(Wt,he),Wt.prototype[Pe]=!0,Wt.prototype.removeEventListener=function(_,N,V,X){pt(this,_,N,V,X)};function Xn(_,N){var V,X=_.F;if(X)for(V=[];X;X=X.F)V.push(X);if(_=_.M,X=N.type||N,typeof N=="string")N=new Se(N,_);else if(N instanceof Se)N.target=N.target||_;else{var me=N;N=new Se(X,_),ee(N,me)}if(me=!0,V)for(var Ie=V.length-1;0<=Ie;Ie--){var He=N.g=V[Ie];me=Er(He,X,!0,N)&&me}if(He=N.g=_,me=Er(He,X,!0,N)&&me,me=Er(He,X,!1,N)&&me,V)for(Ie=0;Ie<V.length;Ie++)He=N.g=V[Ie],me=Er(He,X,!1,N)&&me}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var _=this.i,N;for(N in _.g){for(var V=_.g[N],X=0;X<V.length;X++)st(V[X]);delete _.g[N],_.h--}}this.F=null},Wt.prototype.K=function(_,N,V,X){return this.i.add(String(_),N,!1,V,X)},Wt.prototype.L=function(_,N,V,X){return this.i.add(String(_),N,!0,V,X)};function Er(_,N,V,X){if(N=_.i.g[String(N)],!N)return!0;N=N.concat();for(var me=!0,Ie=0;Ie<N.length;++Ie){var He=N[Ie];if(He&&!He.da&&He.capture==V){var dn=He.listener,Un=He.ha||He.src;He.fa&&bt(_.i,He),me=dn.call(Un,X)!==!1&&me}}return me&&!X.defaultPrevented}function Fn(_,N,V){if(typeof _=="function")V&&(_=T(_,V));else if(_&&typeof _.handleEvent=="function")_=T(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:h.setTimeout(_,N||0)}function Qr(_){_.g=Fn(()=>{_.g=null,_.i&&(_.i=!1,Qr(_))},_.l);const N=_.h;_.h=null,_.m.apply(null,N)}class Fi extends he{constructor(N,V){super(),this.m=N,this.l=V,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Qr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(_){he.call(this),this.h=_,this.g={}}M(vi,he);var In=[];function We(_){ie(_.g,function(N,V){this.g.hasOwnProperty(V)&&xi(N)},_),_.g={}}vi.prototype.N=function(){vi.aa.N.call(this),We(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=h.JSON.stringify,Ht=h.JSON.parse,pn=class{stringify(_){return h.JSON.stringify(_,void 0)}parse(_){return h.JSON.parse(_,void 0)}};function ai(){}ai.prototype.h=null;function jr(_){return _.h||(_.h=_.i())}function Zs(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){Se.call(this,"d")}M(br,Se);function Ds(){Se.call(this,"c")}M(Ds,Se);var mt={},Gt=null;function Tn(){return Gt=Gt||new Wt}mt.La="serverreachability";function $t(_){Se.call(this,mt.La,_)}M($t,Se);function Ir(_){const N=Tn();Xn(N,new $t(N))}mt.STAT_EVENT="statevent";function Cn(_,N){Se.call(this,mt.STAT_EVENT,_),this.stat=N}M(Cn,Se);function Rt(_){const N=Tn();Xn(N,new Cn(N,_))}mt.Ma="timingevent";function fs(_,N){Se.call(this,mt.Ma,_),this.size=N}M(fs,Se);function cn(_,N){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){_()},N)}function ir(){this.g=!0}ir.prototype.xa=function(){this.g=!1};function Bn(_,N,V,X,me,Ie){_.info(function(){if(_.g)if(Ie)for(var He="",dn=Ie.split("&"),Un=0;Un<dn.length;Un++){var qt=dn[Un].split("=");if(1<qt.length){var Pn=qt[0];qt=qt[1];var zn=Pn.split("_");He=2<=zn.length&&zn[1]=="type"?He+(Pn+"="+qt+"&"):He+(Pn+"=redacted&")}}else He=null;else He=Ie;return"XMLHTTP REQ ("+X+") [attempt "+me+"]: "+N+`
`+V+`
`+He})}function dr(_,N,V,X,me,Ie,He){_.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+me+"]: "+N+`
`+V+`
`+Ie+" "+He})}function jn(_,N,V,X){_.info(function(){return"XMLHTTP TEXT ("+N+"): "+wo(_,V)+(X?" "+X:"")})}function Ye(_,N){_.info(function(){return"TIMEOUT: "+N})}ir.prototype.info=function(){};function wo(_,N){if(!_.g)return N;if(!N)return null;try{var V=JSON.parse(N);if(V){for(_=0;_<V.length;_++)if(Array.isArray(V[_])){var X=V[_];if(!(2>X.length)){var me=X[1];if(Array.isArray(me)&&!(1>me.length)){var Ie=me[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var He=1;He<me.length;He++)me[He]=""}}}}return An(V)}catch{return N}}var vo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zr;function Os(){}M(Os,ai),Os.prototype.g=function(){return new XMLHttpRequest},Os.prototype.i=function(){return{}},Zr=new Os;function _i(_,N,V,X){this.j=_,this.i=N,this.l=V,this.R=X||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bi}function Bi(){this.i=null,this.g="",this.h=!1}var Jl={},Wa={};function li(_,N,V){_.L=1,_.v=Rn(Ot(N)),_.m=V,_.P=!0,Ar(_,null)}function Ar(_,N){_.F=Date.now(),Zt(_),_.A=Ot(_.v);var V=_.A,X=_.R;Array.isArray(X)||(X=[String(X)]),Nn(V.i,"t",X),_.C=0,V=_.j.J,_.h=new Bi,_.g=mu(_.j,V?N:null,!_.m),0<_.O&&(_.M=new Fi(T(_.Y,_,_.g),_.O)),N=_.U,V=_.g,X=_.ca;var me="readystatechange";Array.isArray(me)||(me&&(In[0]=me.toString()),me=In);for(var Ie=0;Ie<me.length;Ie++){var He=Dr(V,me[Ie],X||N.handleEvent,!1,N.h||N);if(!He)break;N.g[He.key]=He}N=_.H?B(_.H):{},_.m?(_.u||(_.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,N)):(_.u="GET",_.g.ea(_.A,_.u,null,N)),Ir(),Bn(_.i,_.u,_.A,_.l,_.R,_.m)}_i.prototype.ca=function(_){_=_.target;const N=this.M;N&&Ai(_)==3?N.j():this.Y(_)},_i.prototype.Y=function(_){try{if(_==this.g)e:{const zn=Ai(this.g);var N=this.g.Ba();const Wn=this.g.Z();if(!(3>zn)&&(zn!=3||this.g&&(this.h.h||this.g.oa()||nc(this.g)))){this.J||zn!=4||N==7||(N==8||0>=Wn?Ir(3):Ir(2)),ke(this);var V=this.g.Z();this.X=V;t:if(yn(this)){var X=nc(this.g);_="";var me=X.length,Ie=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),_o(this);var He="";break t}this.h.i=new h.TextDecoder}for(N=0;N<me;N++)this.h.h=!0,_+=this.h.i.decode(X[N],{stream:!(Ie&&N==me-1)});X.length=0,this.h.g+=_,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=V==200,dr(this.i,this.u,this.A,this.l,this.R,zn,V),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,Un=this.g;if((dn=Un.g?Un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(dn)){var qt=dn;break t}}qt=null}if(V=qt)jn(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ms(this,V);else{this.o=!1,this.s=3,Rt(12),Jt(this),_o(this);break e}}if(this.P){V=!0;let Ti;for(;!this.J&&this.C<He.length;)if(Ti=du(this,He),Ti==Wa){zn==4&&(this.s=4,Rt(14),V=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ti==Jl){this.s=4,Rt(15),jn(this.i,this.l,He,"[Invalid Chunk]"),V=!1;break}else jn(this.i,this.l,Ti,null),Ms(this,Ti);if(yn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zn!=4||He.length!=0||this.h.h||(this.s=1,Rt(16),V=!1),this.o=this.o&&V,!V)jn(this.i,this.l,He,"[Invalid Chunked Response]"),Jt(this),_o(this);else if(0<He.length&&!this.W){this.W=!0;var Pn=this.j;Pn.g==this&&Pn.ba&&!Pn.M&&(Pn.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),la(Pn),Pn.M=!0,Rt(11))}}else jn(this.i,this.l,He,null),Ms(this,He);zn==4&&Jt(this),this.o&&!this.J&&(zn==4?xn(this.j,this):(this.o=!1,Zt(this)))}else en(this.g),V==400&&0<He.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Jt(this),_o(this)}}}catch{}finally{}};function yn(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function du(_,N){var V=_.C,X=N.indexOf(`
`,V);return X==-1?Wa:(V=Number(N.substring(V,X)),isNaN(V)?Jl:(X+=1,X+V>N.length?Wa:(N=N.slice(X,X+V),_.C=X+V,N)))}_i.prototype.cancel=function(){this.J=!0,Jt(this)};function Zt(_){_.S=Date.now()+_.I,Ha(_,_.I)}function Ha(_,N){if(_.B!=null)throw Error("WatchDog timer not null");_.B=cn(T(_.ba,_),N)}function ke(_){_.B&&(h.clearTimeout(_.B),_.B=null)}_i.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Ye(this.i,this.A),this.L!=2&&(Ir(),Rt(17)),Jt(this),this.s=2,_o(this)):Ha(this,this.S-_)};function _o(_){_.j.G==0||_.J||xn(_.j,_)}function Jt(_){ke(_);var N=_.M;N&&typeof N.ma=="function"&&N.ma(),_.M=null,We(_.U),_.g&&(N=_.g,_.g=null,N.abort(),N.ma())}function Ms(_,N){try{var V=_.j;if(V.G!=0&&(V.g==_||zr(V.h,_))){if(!_.K&&zr(V.h,_)&&V.G==3){try{var X=V.Da.g.parse(N)}catch{X=null}if(Array.isArray(X)&&X.length==3){var me=X;if(me[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<_.F)To(V),xs(V);else break e;Ya(V),Rt(18)}}else V.za=me[1],0<V.za-V.T&&37500>me[2]&&V.F&&V.v==0&&!V.C&&(V.C=cn(T(V.Za,V),6e3));if(1>=Dt(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else ui(V,11)}else if((_.K||V.g==_)&&To(V),!z(N))for(me=V.Da.g.parse(N),N=0;N<me.length;N++){let qt=me[N];if(V.T=qt[0],qt=qt[1],V.G==2)if(qt[0]=="c"){V.K=qt[1],V.ia=qt[2];const Pn=qt[3];Pn!=null&&(V.la=Pn,V.j.info("VER="+V.la));const zn=qt[4];zn!=null&&(V.Aa=zn,V.j.info("SVER="+V.Aa));const Wn=qt[5];Wn!=null&&typeof Wn=="number"&&0<Wn&&(X=1.5*Wn,V.L=X,V.j.info("backChannelRequestTimeoutMs_="+X)),X=V;const Ti=_.g;if(Ti){const ei=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ei){var Ie=X.h;Ie.g||ei.indexOf("spdy")==-1&&ei.indexOf("quic")==-1&&ei.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(ia(Ie,Ie.h),Ie.h=null))}if(X.D){const Qa=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Qa&&(X.ya=Qa,$e(X.I,X.D,Qa))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-_.F,V.j.info("Handshake RTT: "+V.R+"ms")),X=V;var He=_;if(X.qa=ft(X,X.J?X.ia:null,X.W),He.K){Ga(X.h,He);var dn=He,Un=X.L;Un&&(dn.I=Un),dn.B&&(ke(dn),Zt(dn)),X.g=He}else aa(X);0<V.i.length&&_t(V)}else qt[0]!="stop"&&qt[0]!="close"||ui(V,7);else V.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?ui(V,7):Dn(V):qt[0]!="noop"&&V.l&&V.l.ta(qt),V.v=0)}}Ir(4)}catch{}}var hu=class{constructor(_,N){this.g=_,this.map=N}};function Ft(_){this.l=_||10,h.PerformanceNavigationTiming?(_=h.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Dt(_){return _.h?1:_.g?_.g.size:0}function zr(_,N){return _.h?_.h==N:_.g?_.g.has(N):!1}function ia(_,N){_.g?_.g.add(N):_.h=N}function Ga(_,N){_.h&&_.h==N?_.h=null:_.g&&_.g.has(N)&&_.g.delete(N)}Ft.prototype.cancel=function(){if(this.i=Yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Yn(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let N=_.i;for(const V of _.g.values())N=N.concat(V.D);return N}return D(_.i)}function ji(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(m(_)){for(var N=[],V=_.length,X=0;X<V;X++)N.push(_[X]);return N}N=[],V=0;for(X in _)N[V++]=_[X];return N}function $a(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(m(_)||typeof _=="string"){var N=[];_=_.length;for(var V=0;V<_;V++)N.push(V);return N}N=[],V=0;for(const X in _)N[V++]=X;return N}}}function mn(_,N){if(_.forEach&&typeof _.forEach=="function")_.forEach(N,void 0);else if(m(_)||typeof _=="string")Array.prototype.forEach.call(_,N,void 0);else for(var V=$a(_),X=ji(_),me=X.length,Ie=0;Ie<me;Ie++)N.call(void 0,X[Ie],V&&V[Ie],_)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qd(_,N){if(_){_=_.split("&");for(var V=0;V<_.length;V++){var X=_[V].indexOf("="),me=null;if(0<=X){var Ie=_[V].substring(0,X);me=_[V].substring(X+1)}else Ie=_[V];N(Ie,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function bi(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof bi){this.h=_.h,Qn(this,_.j),this.o=_.o,this.g=_.g,pe(this,_.s),this.l=_.l;var N=_.i,V=new Zi;V.i=N.i,N.g&&(V.g=new Map(N.g),V.h=N.h),Q(this,V),this.m=_.m}else _&&(N=String(_).match(Ei))?(this.h=!1,Qn(this,N[1]||"",!0),this.o=It(N[2]||""),this.g=It(N[3]||"",!0),pe(this,N[4]),this.l=It(N[5]||"",!0),Q(this,N[6]||"",!0),this.m=It(N[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}bi.prototype.toString=function(){var _=[],N=this.j;N&&_.push(Eo(N,Wr,!0),":");var V=this.g;return(V||N=="file")&&(_.push("//"),(N=this.o)&&_.push(Eo(N,Wr,!0),"@"),_.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&_.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&_.push("/"),_.push(Eo(V,V.charAt(0)=="/"?Sn:ut,!0))),(V=this.i.toString())&&_.push("?",V),(V=this.m)&&_.push("#",Eo(V,tc)),_.join("")};function Ot(_){return new bi(_)}function Qn(_,N,V){_.j=V?It(N,!0):N,_.j&&(_.j=_.j.replace(/:$/,""))}function pe(_,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);_.s=N}else _.s=null}function Q(_,N,V){N instanceof Zi?(_.i=N,Hr(_.i,_.h)):(V||(N=Eo(N,ec)),_.i=new Zi(N,_.h))}function $e(_,N,V){_.i.set(N,V)}function Rn(_){return $e(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function It(_,N){return _?N?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Eo(_,N,V){return typeof _=="string"?(_=encodeURI(_).replace(N,qa),V&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function qa(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Wr=/[#\/\?@]/g,ut=/[#\?:]/g,Sn=/[#\?]/g,ec=/[#\?@]/g,tc=/#/g;function Zi(_,N){this.h=this.g=null,this.i=_||null,this.j=!!N}function hr(_){_.g||(_.g=new Map,_.h=0,_.i&&Qd(_.i,function(N,V){_.add(decodeURIComponent(N.replace(/\+/g," ")),V)}))}n=Zi.prototype,n.add=function(_,N){hr(this),this.i=null,_=Jr(this,_);var V=this.g.get(_);return V||this.g.set(_,V=[]),V.push(N),this.h+=1,this};function Ui(_,N){hr(_),N=Jr(_,N),_.g.has(N)&&(_.i=null,_.h-=_.g.get(N).length,_.g.delete(N))}function ps(_,N){return hr(_),N=Jr(_,N),_.g.has(N)}n.forEach=function(_,N){hr(this),this.g.forEach(function(V,X){V.forEach(function(me){_.call(N,me,X,this)},this)},this)},n.na=function(){hr(this);const _=Array.from(this.g.values()),N=Array.from(this.g.keys()),V=[];for(let X=0;X<N.length;X++){const me=_[X];for(let Ie=0;Ie<me.length;Ie++)V.push(N[X])}return V},n.V=function(_){hr(this);let N=[];if(typeof _=="string")ps(this,_)&&(N=N.concat(this.g.get(Jr(this,_))));else{_=Array.from(this.g.values());for(let V=0;V<_.length;V++)N=N.concat(_[V])}return N},n.set=function(_,N){return hr(this),this.i=null,_=Jr(this,_),ps(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[N]),this.h+=1,this},n.get=function(_,N){return _?(_=this.V(_),0<_.length?String(_[0]):N):N};function Nn(_,N,V){Ui(_,N),0<V.length&&(_.i=null,_.g.set(Jr(_,N),D(V)),_.h+=V.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],N=Array.from(this.g.keys());for(var V=0;V<N.length;V++){var X=N[V];const Ie=encodeURIComponent(String(X)),He=this.V(X);for(X=0;X<He.length;X++){var me=Ie;He[X]!==""&&(me+="="+encodeURIComponent(String(He[X]))),_.push(me)}}return this.i=_.join("&")};function Jr(_,N){return N=String(N),_.j&&(N=N.toLowerCase()),N}function Hr(_,N){N&&!_.j&&(hr(_),_.i=null,_.g.forEach(function(V,X){var me=X.toLowerCase();X!=me&&(Ui(this,X),Nn(this,me,V))},_)),_.j=N}function xt(_,N){const V=new ir;if(h.Image){const X=new Image;X.onload=R(gt,V,"TestLoadImage: loaded",!0,N,X),X.onerror=R(gt,V,"TestLoadImage: error",!1,N,X),X.onabort=R(gt,V,"TestLoadImage: abort",!1,N,X),X.ontimeout=R(gt,V,"TestLoadImage: timeout",!1,N,X),h.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=_}else N(!1)}function fu(_,N){const V=new ir,X=new AbortController,me=setTimeout(()=>{X.abort(),gt(V,"TestPingServer: timeout",!1,N)},1e4);fetch(_,{signal:X.signal}).then(Ie=>{clearTimeout(me),Ie.ok?gt(V,"TestPingServer: ok",!0,N):gt(V,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(me),gt(V,"TestPingServer: error",!1,N)})}function gt(_,N,V,X,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),X(V)}catch{}}function Tr(){this.g=new pn}function pu(_,N,V){const X=V||"";try{mn(_,function(me,Ie){let He=me;g(me)&&(He=An(me)),N.push(X+Ie+"="+encodeURIComponent(He))})}catch(me){throw N.push(X+"type="+encodeURIComponent("_badmap")),me}}function ms(_){this.l=_.Ub||null,this.j=_.eb||!1}M(ms,ai),ms.prototype.g=function(){return new bo(this.l,this.j)},ms.prototype.i=function(_){return function(){return _}}({});function bo(_,N){Wt.call(this),this.D=_,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(bo,Wt),n=bo.prototype,n.open=function(_,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=N,this.readyState=1,ci(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(N.body=_),(this.D||h).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ls(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ls(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var N=_.value?_.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!_.done}))&&(this.response=this.responseText+=N)}_.done?gs(this):ci(this),this.readyState==3&&Ls(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,gs(this))},n.Qa=function(_){this.g&&(this.response=_,gs(this))},n.ga=function(){this.g&&gs(this)};function gs(_){_.readyState=4,_.l=null,_.j=null,_.v=null,ci(_)}n.setRequestHeader=function(_,N){this.u.append(_,N)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],N=this.h.entries();for(var V=N.next();!V.done;)V=V.value,_.push(V[0]+": "+V[1]),V=N.next();return _.join(`\r
`)};function ci(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function zi(_){let N="";return ie(_,function(V,X){N+=X,N+=":",N+=V,N+=`\r
`}),N}function Ji(_,N,V){e:{for(X in V){var X=!1;break e}X=!0}X||(V=zi(V),typeof _=="string"?V!=null&&encodeURIComponent(String(V)):$e(_,N,V))}function kn(_){Wt.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(kn,Wt);var sa=/^https?$/i,Js=["POST","PUT"];n=kn.prototype,n.Ha=function(_){this.J=_},n.ea=function(_,N,V,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);N=N?N.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zr.g(),this.v=this.o?jr(this.o):jr(Zr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(N,String(_),!0),this.B=!1}catch(Ie){fr(this,Ie);return}if(_=V||"",V=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var me in X)V.set(me,X[me]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ie of X.keys())V.set(Ie,X.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(V.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),me=h.FormData&&_ instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Js,N,void 0))||X||me||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,He]of V)this.g.setRequestHeader(Ie,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xa(this),this.u=!0,this.g.send(_),this.u=!1}catch(Ie){fr(this,Ie)}};function fr(_,N){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=N,_.m=5,oa(_),Ii(_)}function oa(_){_.A||(_.A=!0,Xn(_,"complete"),Xn(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Xn(this,"complete"),Xn(this,"abort"),Ii(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ka(this):this.bb())},n.bb=function(){Ka(this)};function Ka(_){if(_.h&&typeof c<"u"&&(!_.v[1]||Ai(_)!=4||_.Z()!=2)){if(_.u&&Ai(_)==4)Fn(_.Ea,0,_);else if(Xn(_,"readystatechange"),Ai(_)==4){_.h=!1;try{const He=_.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var V;if(!(V=N)){var X;if(X=He===0){var me=String(_.D).match(Ei)[1]||null;!me&&h.self&&h.self.location&&(me=h.self.location.protocol.slice(0,-1)),X=!sa.test(me?me.toLowerCase():"")}V=X}if(V)Xn(_,"complete"),Xn(_,"success");else{_.m=6;try{var Ie=2<Ai(_)?_.g.statusText:""}catch{Ie=""}_.l=Ie+" ["+_.Z()+"]",oa(_)}}finally{Ii(_)}}}}function Ii(_,N){if(_.g){Xa(_);const V=_.g,X=_.v[0]?()=>{}:null;_.g=null,_.v=null,N||Xn(_,"ready");try{V.onreadystatechange=X}catch{}}}function Xa(_){_.I&&(h.clearTimeout(_.I),_.I=null)}n.isActive=function(){return!!this.g};function Ai(_){return _.g?_.g.readyState:0}n.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var N=this.g.responseText;return _&&N.indexOf(_)==0&&(N=N.substring(_.length)),Ht(N)}};function nc(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function en(_){const N={};_=(_.g&&2<=Ai(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<_.length;X++){if(z(_[X]))continue;var V=ne(_[X]);const me=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ie=N[me]||[];N[me]=Ie,Ie.push(V)}F(N,function(X){return X.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(_,N,V){return V&&V.internalChannelParams&&V.internalChannelParams[_]||N}function Io(_){this.Aa=0,this.i=[],this.j=new ir,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ys("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ys("baseRetryDelayMs",5e3,_),this.cb=ys("retryDelaySeedMs",1e4,_),this.Wa=ys("forwardChannelMaxRetries",2,_),this.wa=ys("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new Ft(_&&_.concurrentRequestLimit),this.Da=new Tr,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Io.prototype,n.la=8,n.G=1,n.connect=function(_,N,V,X){Rt(0),this.W=_,this.H=N||{},V&&X!==void 0&&(this.H.OSID=V,this.H.OAID=X),this.F=this.X,this.I=ft(this,null,this.W),_t(this)};function Dn(_){if(_e(_),_.G==3){var N=_.U++,V=Ot(_.I);if($e(V,"SID",_.K),$e(V,"RID",N),$e(V,"TYPE","terminate"),Vs(_,V),N=new _i(_,_.j,N),N.L=2,N.v=Rn(Ot(V)),V=!1,h.navigator&&h.navigator.sendBeacon)try{V=h.navigator.sendBeacon(N.v.toString(),"")}catch{}!V&&h.Image&&(new Image().src=N.v,V=!0),V||(N.g=mu(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Zt(N)}sn(_)}function xs(_){_.g&&(la(_),_.g.cancel(),_.g=null)}function _e(_){xs(_),_.u&&(h.clearTimeout(_.u),_.u=null),To(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&h.clearTimeout(_.s),_.s=null)}function _t(_){if(!Nt(_.h)&&!_.s){_.s=!0;var N=_.Ga;xe||Ne(),oe||(xe(),oe=!0),Te.add(N,_),_.B=0}}function Cr(_,N){return Dt(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=N.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=cn(T(_.Ga,_,N),ca(_,_.B)),_.B++,!0)}n.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const me=new _i(this,this.j,_);let Ie=this.o;if(this.S&&(Ie?(Ie=B(Ie),ee(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(me.H=Ie,Ie=null),this.P)e:{for(var N=0,V=0;V<this.i.length;V++){t:{var X=this.i[V];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(N+=X,4096<N){N=V;break e}if(N===4096||V===this.i.length-1){N=V+1;break e}}N=1e3}else N=1e3;N=Ao(this,me,N),V=Ot(this.I),$e(V,"RID",_),$e(V,"CVER",22),this.D&&$e(V,"X-HTTP-Session-Id",this.D),Vs(this,V),Ie&&(this.O?N="headers="+encodeURIComponent(String(zi(Ie)))+"&"+N:this.m&&Ji(V,this.m,Ie)),ia(this.h,me),this.Ua&&$e(V,"TYPE","init"),this.P?($e(V,"$req",N),$e(V,"SID","null"),me.T=!0,li(me,V,null)):li(me,V,N),this.G=2}}else this.G==3&&(_?eo(this,_):this.i.length==0||Nt(this.h)||eo(this))};function eo(_,N){var V;N?V=N.l:V=_.U++;const X=Ot(_.I);$e(X,"SID",_.K),$e(X,"RID",V),$e(X,"AID",_.T),Vs(_,X),_.m&&_.o&&Ji(X,_.m,_.o),V=new _i(_,_.j,V,_.B+1),_.m===null&&(V.H=_.o),N&&(_.i=N.D.concat(_.i)),N=Ao(_,V,1e3),V.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),ia(_.h,V),li(V,X,N)}function Vs(_,N){_.H&&ie(_.H,function(V,X){$e(N,X,V)}),_.l&&mn({},function(V,X){$e(N,X,V)})}function Ao(_,N,V){V=Math.min(_.i.length,V);var X=_.l?T(_.l.Na,_.l,_):null;e:{var me=_.i;let Ie=-1;for(;;){const He=["count="+V];Ie==-1?0<V?(Ie=me[0].g,He.push("ofs="+Ie)):Ie=0:He.push("ofs="+Ie);let dn=!0;for(let Un=0;Un<V;Un++){let qt=me[Un].g;const Pn=me[Un].map;if(qt-=Ie,0>qt)Ie=Math.max(0,me[Un].g-100),dn=!1;else try{pu(Pn,He,"req"+qt+"_")}catch{X&&X(Pn)}}if(dn){X=He.join("&");break e}}}return _=_.i.splice(0,V),N.D=_,X}function aa(_){if(!_.g&&!_.u){_.Y=1;var N=_.Fa;xe||Ne(),oe||(xe(),oe=!0),Te.add(N,_),_.v=0}}function Ya(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=cn(T(_.Fa,_),ca(_,_.v)),_.v++,!0)}n.Fa=function(){if(this.u=null,Zn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=cn(T(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),xs(this),Zn(this))};function la(_){_.A!=null&&(h.clearTimeout(_.A),_.A=null)}function Zn(_){_.g=new _i(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var N=Ot(_.qa);$e(N,"RID","rpc"),$e(N,"SID",_.K),$e(N,"AID",_.T),$e(N,"CI",_.F?"0":"1"),!_.F&&_.ja&&$e(N,"TO",_.ja),$e(N,"TYPE","xmlhttp"),Vs(_,N),_.m&&_.o&&Ji(N,_.m,_.o),_.L&&(_.g.I=_.L);var V=_.g;_=_.ia,V.L=1,V.v=Rn(Ot(N)),V.m=null,V.P=!0,Ar(V,_)}n.Za=function(){this.C!=null&&(this.C=null,xs(this),Ya(this),Rt(19))};function To(_){_.C!=null&&(h.clearTimeout(_.C),_.C=null)}function xn(_,N){var V=null;if(_.g==N){To(_),la(_),_.g=null;var X=2}else if(zr(_.h,N))V=N.D,Ga(_.h,N),X=1;else return;if(_.G!=0){if(N.o)if(X==1){V=N.m?N.m.length:0,N=Date.now()-N.F;var me=_.B;X=Tn(),Xn(X,new fs(X,V)),_t(_)}else aa(_);else if(me=N.s,me==3||me==0&&0<N.X||!(X==1&&Cr(_,N)||X==2&&Ya(_)))switch(V&&0<V.length&&(N=_.h,N.i=N.i.concat(V)),me){case 1:ui(_,5);break;case 4:ui(_,10);break;case 3:ui(_,6);break;default:ui(_,2)}}}function ca(_,N){let V=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(V*=2),V*N}function ui(_,N){if(_.j.info("Error code "+N),N==2){var V=T(_.fb,_),X=_.Xa;const me=!X;X=new bi(X||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qn(X,"https"),Rn(X),me?xt(X.toString(),V):fu(X.toString(),V)}else Rt(2);_.G=0,_.l&&_.l.sa(N),sn(_),_e(_)}n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function sn(_){if(_.G=0,_.ka=[],_.l){const N=Yn(_.h);(N.length!=0||_.i.length!=0)&&(L(_.ka,N),L(_.ka,_.i),_.h.i.length=0,D(_.i),_.i.length=0),_.l.ra()}}function ft(_,N,V){var X=V instanceof bi?Ot(V):new bi(V);if(X.g!="")N&&(X.g=N+"."+X.g),pe(X,X.s);else{var me=h.location;X=me.protocol,N=N?N+"."+me.hostname:me.hostname,me=+me.port;var Ie=new bi(null);X&&Qn(Ie,X),N&&(Ie.g=N),me&&pe(Ie,me),V&&(Ie.l=V),X=Ie}return V=_.D,N=_.ya,V&&N&&$e(X,V,N),$e(X,"VER",_.la),Vs(_,X),X}function mu(_,N,V){if(N&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=_.Ca&&!_.pa?new kn(new ms({eb:V})):new kn(_.pa),N.Ha(_.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function un(){}n=un.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function es(){}es.prototype.g=function(_,N){return new pr(_,N)};function pr(_,N){Wt.call(this),this.g=new Io(N),this.l=_,this.h=N&&N.messageUrlParams||null,_=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(_?_["X-WebChannel-Content-Type"]=N.messageContentType:_={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(_?_["X-WebChannel-Client-Profile"]=N.va:_={"X-WebChannel-Client-Profile":N.va}),this.g.S=_,(_=N&&N.Sb)&&!z(_)&&(this.g.m=_),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!z(N)&&(this.g.D=N,_=this.h,_!==null&&N in _&&(_=this.h,N in _&&delete _[N])),this.j=new ts(this)}M(pr,Wt),pr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pr.prototype.close=function(){Dn(this.g)},pr.prototype.o=function(_){var N=this.g;if(typeof _=="string"){var V={};V.__data__=_,_=V}else this.u&&(V={},V.__data__=An(_),_=V);N.i.push(new hu(N.Ya++,_)),N.G==3&&_t(N)},pr.prototype.N=function(){this.g.l=null,delete this.j,Dn(this.g),delete this.g,pr.aa.N.call(this)};function gu(_){br.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var N=_.__sm__;if(N){e:{for(const V in N){_=V;break e}_=void 0}(this.i=_)&&(_=this.i,N=N!==null&&_ in N?N[_]:void 0),this.data=N}else this.data=_}M(gu,br);function Wi(){Ds.call(this),this.status=1}M(Wi,Ds);function ts(_){this.g=_}M(ts,un),ts.prototype.ua=function(){Xn(this.g,"a")},ts.prototype.ta=function(_){Xn(this.g,new gu(_))},ts.prototype.sa=function(_){Xn(this.g,new Wi)},ts.prototype.ra=function(){Xn(this.g,"b")},es.prototype.createWebChannel=es.prototype.g,pr.prototype.send=pr.prototype.o,pr.prototype.open=pr.prototype.m,pr.prototype.close=pr.prototype.close,hR=function(){return new es},dR=function(){return Tn()},uR=mt,Ax={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vo.NO_ERROR=0,vo.TIMEOUT=8,vo.HTTP_ERROR=6,O0=vo,Ur.COMPLETE="complete",cR=Ur,Zs.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,Oh=Zs,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,lR=kn}).apply(typeof s0<"u"?s0:typeof self<"u"?self:typeof window<"u"?window:{});const Qb="@firebase/firestore",Zb="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new Jw("@firebase/firestore");function qu(){return $c.logLevel}function Be(n,...e){if($c.logLevel<=Xt.DEBUG){const t=e.map(uv);$c.debug(`Firestore (${Ld}): ${n}`,...t)}}function qi(n,...e){if($c.logLevel<=Xt.ERROR){const t=e.map(uv);$c.error(`Firestore (${Ld}): ${n}`,...t)}}function qc(n,...e){if($c.logLevel<=Xt.WARN){const t=e.map(uv);$c.warn(`Firestore (${Ld}): ${n}`,...t)}}function uv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,fR(n,r,t)}function fR(n,e,t){let r=`FIRESTORE (${Ld}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qi(r),new Error(r)}function dt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||fR(e,i,r)}function Pt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends na{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class P7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class D7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class O7{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let o=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zo,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await i(this.currentUser)})},h=m=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new pR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new gi(e)}}class M7{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class L7{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new M7(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V7{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ts(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Jb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=F7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function Tx(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Iy(i)===Iy(o)?kt(i,o):Iy(i)?1:-1}return kt(n.length,e.length)}const B7=55296,j7=57343;function Iy(n){const e=n.charCodeAt(0);return e>=B7&&e<=j7}function md(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="__name__";class Do{constructor(e,t,r){t===void 0?t=0:t>e.length&&rt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&rt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Do.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Do?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Do.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return kt(e.length,t.length)}static compareSegments(e,t){const r=Do.isNumericId(e),i=Do.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Do.extractNumericId(e).compare(Do.extractNumericId(t)):Tx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kl.fromString(e.substring(4,e.length-2))}}class fn extends Do{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const U7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Do{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return U7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eI}static keyField(){return new lr([eI])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new qe(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new qe(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else h==="`"?(c=!c,i++):h!=="."||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new qe(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(fn.fromString(e))}static fromName(e){return new Ke(fn.fromString(e).popFirst(5))}static empty(){return new Ke(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new fn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(n,e,t){if(!t)throw new qe(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z7(n,e,t,r){if(e===!0&&r===!0)throw new qe(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tI(n){if(!Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nI(n){if(Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function eg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":rt(12329,{type:typeof n})}function Rs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new qe(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eg(n);throw new qe(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,e){const t={typeString:n};return e&&(t.value=e),t}function Kf(n,e){if(!yR(n))throw new qe(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new qe(Ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=-62135596800,iI=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*iI);return new vn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rI)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iI}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kf(e,vn._jsonSchema))return new vn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vn._jsonSchemaVersion="firestore/timestamp/1.0",vn._jsonSchema={type:Fr("string",vn._jsonSchemaVersion),seconds:Fr("number"),nanoseconds:Fr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new vn(0,0))}static max(){return new yt(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=-1;class dm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Cx(n){return n.fields.find(e=>e.kind===2)}function Ec(n){return n.fields.filter(e=>e.kind!==2)}dm.UNKNOWN_ID=-1;class M0{constructor(e,t){this.fieldPath=e,this.kind=t}}class ff{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ff(0,Ps.min())}}function W7(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(r===1e9?new vn(t+1,0):new vn(t,r));return new Ps(i,Ke.empty(),e)}function xR(n){return new Ps(n.readTime,n.key,hf)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(yt.min(),Ke.empty(),hf)}static max(){return new Ps(yt.max(),Ke.empty(),hf)}}function hv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ke.comparator(n.documentKey,e.documentKey),t!==0?t:kt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(n){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==wR)throw n;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},m=>r(m))}),c=!0,o===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ge((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let m=0;m<o;m++){const g=m;t(e[g]).next(w=>{c[g]=w,++h,h===o&&r(c)},w=>i(w))}})}static doWhile(e,t){return new ge((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="SimpleDb";class tg{static open(e,t,r,i){try{return new tg(t,e.transaction(i,r))}catch(o){throw new Gh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new zo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Gh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=fv(r.target.error);this.S.reject(new Gh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Be(Is,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new G7(t)}}class Pl{static delete(e){return Be(Is,"Removing database:",e),Tc(fS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ES())return!1;if(Pl.F())return!0;const e=Kr(),t=Pl.M(e),r=0<t&&t<10,i=_R(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Pl.M(Kr())===12.2&&qi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Be(Is,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const c=o.target.result;t(c)},i.onblocked=()=>{r(new Gh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new qe(Ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new qe(Ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Gh(e,c))},i.onupgradeneeded=o=>{Be(Is,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,i.transaction,o.oldVersion,this.version).next(()=>{Be(Is,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const h=tg.open(this.db,e,o?"readonly":"readwrite",r),m=i(h).next(g=>(h.C(),g)).catch(g=>(h.abort(g),ge.reject(g))).toPromise();return m.catch(()=>{}),await h.D,m}catch(h){const m=h,g=m.name!=="FirebaseError"&&c<3;if(Be(Is,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _R(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class H7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Tc(this.U.delete())}}class Gh extends qe{constructor(e,t){super(Ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ql(n){return n.name==="IndexedDbTransactionError"}class G7{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Be(Is,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be(Is,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Tc(r)}add(e){return Be(Is,"ADD",this.store.name,e,e),Tc(this.store.add(e))}get(e){return Tc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Be(Is,"GET",this.store.name,e,t),t))}delete(e){return Be(Is,"DELETE",this.store.name,e),Tc(this.store.delete(e))}count(){return Be(Is,"COUNT",this.store.name),Tc(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ge((c,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{c(m.target.result)}})}{const o=this.cursor(r),c=[];return this.H(o,(h,m)=>{c.push(m)}).next(()=>c)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ge((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Z(e,t){Be(Is,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,c,h)=>h.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=o=>{const c=fv(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ge((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const m=new H7(h),g=t(h.primaryKey,h.value,m);if(g instanceof ge){const w=g.catch(E=>(m.done(),ge.reject(E)));r.push(w)}m.isDone?i():m.G===null?h.continue():h.continue(m.G)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tc(n){return new ge((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=fv(r.target.error);t(i)}})}let sI=!1;function fv(n){const e=Pl.M(Kr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sI||(sI=!0,setTimeout(()=>{throw r},0)),r}}return n}const $h="IndexBackfiller";class $7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Be($h,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();Be($h,`Documents written: ${t}`)}catch(t){ql(t)?Be($h,"Ignoring IndexedDB error during index backfill: ",t):await cu(t)}await this.re(6e4)})}}class q7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let i=t,o=!0;return ge.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Be($h,`Processing collection: ${c}`),this.oe(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this._e(i,o)).next(h=>(Be($h,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=xR(o);hv(c,r)>0&&(r=c)}),new Ps(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qs.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=-1;function ng(n){return n==null}function pf(n){return n===0&&1/n==-1/0}function K7(n){return typeof n=="number"&&Number.isInteger(n)&&!pf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="";function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oI(e)),e=X7(n.get(t),e);return oI(e)}function X7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case hm:t+="";break;default:t+=o}}return t}function oI(n){return n+hm+""}function Mo(n){const e=n.length;if(dt(e>=2,64408,{path:n}),e===2)return dt(n.charAt(0)===hm&&n.charAt(1)==="",56145,{path:n}),fn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf(hm,o);switch((c<0||c>t)&&rt(50515,{path:n}),n.charAt(c+1)){case"":const h=n.substring(o,c);let m;i.length===0?m=h:(i+=h,m=i,i=""),r.push(m);break;case"":i+=n.substring(o,c),i+="\0";break;case"":i+=n.substring(o,c+1);break;default:rt(61167,{path:n})}o=c+2}return new fn(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="remoteDocuments",Xf="owner",Lu="owner",mf="mutationQueues",Y7="userId",uo="mutations",aI="batchId",Nc="userMutationsIndex",lI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(n,e){return[n,Li(e)]}function ER(n,e,t){return[n,Li(e),t]}const Q7={},gd="documentMutations",fm="remoteDocumentsV14",Z7=["prefixPath","collectionGroup","readTime","documentId"],V0="documentKeyIndex",J7=["prefixPath","collectionGroup","documentId"],bR="collectionGroupIndex",eV=["collectionGroup","readTime","prefixPath","documentId"],gf="remoteDocumentGlobal",Sx="remoteDocumentGlobalKey",yd="targets",IR="queryTargetsIndex",tV=["canonicalId","targetId"],xd="targetDocuments",nV=["targetId","path"],pv="documentTargetsIndex",rV=["path","targetId"],pm="targetGlobalKey",Mc="targetGlobal",yf="collectionParents",iV=["collectionId","parent"],wd="clientMetadata",sV="clientId",rg="bundles",oV="bundleId",ig="namedQueries",aV="name",mv="indexConfiguration",lV="indexId",Rx="collectionGroupIndex",cV="collectionGroup",qh="indexState",uV=["indexId","uid"],AR="sequenceNumberIndex",dV=["uid","sequenceNumber"],Kh="indexEntries",hV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],TR="documentKeyIndex",fV=["indexId","uid","orderedDocumentKey"],sg="documentOverlays",pV=["userId","collectionPath","documentId"],Nx="collectionPathOverlayIndex",mV=["userId","collectionPath","largestBatchId"],CR="collectionGroupOverlayIndex",gV=["userId","collectionGroup","largestBatchId"],gv="globals",yV="name",SR=[mf,uo,gd,bc,yd,Xf,Mc,xd,wd,gf,yf,rg,ig],xV=[...SR,sg],RR=[mf,uo,gd,fm,yd,Xf,Mc,xd,wd,gf,yf,rg,ig,sg],NR=RR,yv=[...NR,mv,qh,Kh],wV=yv,kR=[...yv,gv],vV=kR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx extends vR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Xr(n,e){const t=Pt(n);return Pl.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Kl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o0(this.root,e,this.comparator,!1)}getReverseIterator(){return new o0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o0(this.root,e,this.comparator,!0)}}class o0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??yi.RED,this.left=i??yi.EMPTY,this.right=o??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new yi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1;yi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uI(this.data.getIterator())}getIteratorFrom(e){return new uI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class uI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new ds([])}unionWith(e){let t=new En(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return md(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new DR("Invalid base64 string: "+o):o}}(e);return new Br(t)}static fromUint8Array(e){const t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const _V=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ka(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const t=_V.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pa(n){return typeof n=="string"?Br.fromBase64String(n):Br.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="server_timestamp",MR="__type__",LR="__previous_value__",VR="__local_write_time__";function xv(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[MR])==null?void 0:r.stringValue)===OR}function og(n){const e=n.mapValue.fields[LR];return xv(e)?og(e):e}function xf(n){const e=ka(n.mapValue.fields[VR].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t,r,i,o,c,h,m,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=w}}const mm="(default)";class Kc{constructor(e,t){this.projectId=e,this.database=t||mm}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===mm}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__type__",FR="__max__",Sl={mapValue:{fields:{__type__:{stringValue:FR}}}},vv="__vector__",vd="value",F0={nullValue:"NULL_VALUE"};function Ll(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xv(n)?4:BR(n)?9007199254740991:ag(n)?10:11:rt(28295,{value:n})}function Qo(n,e){if(n===e)return!0;const t=Ll(n);if(t!==Ll(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xf(n).isEqual(xf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=ka(i.timestampValue),h=ka(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Pa(i.bytesValue).isEqual(Pa(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return er(i.geoPointValue.latitude)===er(o.geoPointValue.latitude)&&er(i.geoPointValue.longitude)===er(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return er(i.integerValue)===er(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=er(i.doubleValue),h=er(o.doubleValue);return c===h?pf(c)===pf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return md(n.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},h=o.mapValue.fields||{};if(cI(c)!==cI(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!Qo(c[m],h[m])))return!1;return!0}(n,e);default:return rt(52216,{left:n})}}function wf(n,e){return(n.values||[]).find(t=>Qo(t,e))!==void 0}function Vl(n,e){if(n===e)return 0;const t=Ll(n),r=Ll(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=er(o.integerValue||o.doubleValue),m=er(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return dI(n.timestampValue,e.timestampValue);case 4:return dI(xf(n),xf(e));case 5:return Tx(n.stringValue,e.stringValue);case 6:return function(o,c){const h=Pa(o),m=Pa(c);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),m=c.split("/");for(let g=0;g<h.length&&g<m.length;g++){const w=kt(h[g],m[g]);if(w!==0)return w}return kt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=kt(er(o.latitude),er(c.latitude));return h!==0?h:kt(er(o.longitude),er(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return hI(n.arrayValue,e.arrayValue);case 10:return function(o,c){var T,R,M,D;const h=o.fields||{},m=c.fields||{},g=(T=h[vd])==null?void 0:T.arrayValue,w=(R=m[vd])==null?void 0:R.arrayValue,E=kt(((M=g==null?void 0:g.values)==null?void 0:M.length)||0,((D=w==null?void 0:w.values)==null?void 0:D.length)||0);return E!==0?E:hI(g,w)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Sl.mapValue&&c===Sl.mapValue)return 0;if(o===Sl.mapValue)return 1;if(c===Sl.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),g=c.fields||{},w=Object.keys(g);m.sort(),w.sort();for(let E=0;E<m.length&&E<w.length;++E){const T=Tx(m[E],w[E]);if(T!==0)return T;const R=Vl(h[m[E]],g[w[E]]);if(R!==0)return R}return kt(m.length,w.length)}(n.mapValue,e.mapValue);default:throw rt(23264,{he:t})}}function dI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kt(n,e);const t=ka(n),r=ka(e),i=kt(t.seconds,r.seconds);return i!==0?i:kt(t.nanos,r.nanos)}function hI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Vl(t[i],r[i]);if(o)return o}return kt(t.length,r.length)}function _d(n){return Px(n)}function Px(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ka(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ke.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Px(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${Px(t.fields[c])}`;return i+"}"}(n.mapValue):rt(61005,{value:n})}function B0(n){switch(Ll(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=og(n);return e?16+B0(e):16;case 5:return 2*n.stringValue.length;case 6:return Pa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+B0(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Kl(r.fields,(o,c)=>{i+=o.length+B0(c)}),i}(n.mapValue);default:throw rt(13486,{value:n})}}function vf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dx(n){return!!n&&"integerValue"in n}function _f(n){return!!n&&"arrayValue"in n}function fI(n){return!!n&&"nullValue"in n}function pI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function j0(n){return!!n&&"mapValue"in n}function ag(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[wv])==null?void 0:r.stringValue)===vv}function Xh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Kl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xh(n.arrayValue.values[t]);return e}return{...n}}function BR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FR}const jR={mapValue:{fields:{[wv]:{stringValue:vv},[vd]:{arrayValue:{}}}}};function bV(n){return"nullValue"in n?F0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vf(Kc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ag(n)?jR:{mapValue:{}}:rt(35942,{value:n})}function IV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vf(Kc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?jR:"mapValue"in n?ag(n)?{mapValue:{}}:Sl:rt(61959,{value:n})}function mI(n,e){const t=Vl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function gI(n,e){const t=Vl(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!j0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xh(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Xh(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());j0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];j0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Kl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Oi(Xh(this.value))}}function UR(n){const e=[];return Kl(n.fields,(t,r)=>{const i=new lr([t]);if(j0(r)){const o=UR(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,r,i,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new wr(e,0,yt.min(),yt.min(),yt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,yt.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,yt.min(),yt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,yt.min(),yt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function yI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?r=Ke.comparator(Ke.fromName(c.referenceValue),t.key):r=Vl(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function xI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t="asc"){this.field=e,this.dir=t}}function AV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{}class Yt extends zR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TV(e,t,r):t==="array-contains"?new RV(e,r):t==="in"?new KR(e,r):t==="not-in"?new NV(e,r):t==="array-contains-any"?new kV(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new CV(e,r):new SV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vl(t,this.value)):t!==null&&Ll(this.value)===Ll(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends zR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _n(e,t)}matches(e){return bd(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bd(n){return n.op==="and"}function Ox(n){return n.op==="or"}function _v(n){return WR(n)&&bd(n)}function WR(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function Mx(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+_d(n.value);if(_v(n))return n.filters.map(e=>Mx(e)).join(",");{const e=n.filters.map(t=>Mx(t)).join(",");return`${n.op}(${e})`}}function HR(n,e){return n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&Qo(r.value,i.value)}(n,e):n instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,h)=>o&&HR(c,i.filters[h]),!0):!1}(n,e):void rt(19439)}function GR(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function $R(n){return n instanceof Yt?function(t){return`${t.field.canonicalString()} ${t.op} ${_d(t.value)}`}(n):n instanceof _n?function(t){return t.op.toString()+" {"+t.getFilters().map($R).join(" ,")+"}"}(n):"Filter"}class TV extends Yt{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class CV extends Yt{constructor(e,t){super(e,"in",t),this.keys=qR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SV extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=qR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class RV extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _f(t)&&wf(t.arrayValue,this.value)}}class KR extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wf(this.value.arrayValue,t)}}class NV extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wf(this.value.arrayValue,t)}}class kV extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_f(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function Lx(n,e=null,t=[],r=[],i=null,o=null,c=null){return new PV(n,e,t,r,i,o,c)}function Xc(n){const e=Pt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Mx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ng(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_d(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_d(r)).join(",")),e.Te=t}return e.Te}function Yf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!xI(n.startAt,e.startAt)&&xI(n.endAt,e.endAt)}function gm(n){return Ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ym(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function wI(n,e,t){let r=F0,i=!0;for(const o of ym(n,e)){let c=F0,h=!0;switch(o.op){case"<":case"<=":c=bV(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=F0}mI({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];mI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}function vI(n,e,t){let r=Sl,i=!0;for(const o of ym(n,e)){let c=Sl,h=!0;switch(o.op){case">=":case">":c=IV(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=Sl}gI({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];gI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function DV(n,e,t,r,i,o,c,h){return new Vd(n,e,t,r,i,o,c,h)}function Qf(n){return new Vd(n)}function _I(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function XR(n){return n.collectionGroup!==null}function Yh(n){const e=Pt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new En(lr.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ef(o,r))}),t.has(lr.keyField().canonicalString())||e.Ie.push(new Ef(lr.keyField(),r))}return e.Ie}function Xs(n){const e=Pt(n);return e.Ee||(e.Ee=OV(e,Yh(n))),e.Ee}function OV(n,e){if(n.limitType==="F")return Lx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Ef(i.field,o)});const t=n.endAt?new Ed(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ed(n.startAt.position,n.startAt.inclusive):null;return Lx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Vx(n,e){const t=n.filters.concat([e]);return new Vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Fx(n,e,t){return new Vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lg(n,e){return Yf(Xs(n),Xs(e))&&n.limitType===e.limitType}function YR(n){return`${Xc(Xs(n))}|lt:${n.limitType}`}function Ku(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$R(i)).join(", ")}]`),ng(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_d(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_d(i)).join(",")),`Target(${r})`}(Xs(n))}; limitType=${n.limitType})`}function Zf(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Yh(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,h,m){const g=yI(c,h,m);return c.inclusive?g<=0:g<0}(r.startAt,Yh(r),i)||r.endAt&&!function(c,h,m){const g=yI(c,h,m);return c.inclusive?g>=0:g>0}(r.endAt,Yh(r),i))}(n,e)}function MV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QR(n){return(e,t)=>{let r=!1;for(const i of Yh(n)){const o=LV(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function LV(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(o,c,h){const m=c.data.field(o),g=h.data.field(o);return m!==null&&g!==null?Vl(m,g):rt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Kl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return PR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=new rr(Ke.comparator);function Cs(){return VV}const ZR=new rr(Ke.comparator);function Mh(...n){let e=ZR;for(const t of n)e=e.insert(t.key,t);return e}function JR(n){let e=ZR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Lo(){return Qh()}function e3(){return Qh()}function Qh(){return new Ua(n=>n.toString(),(n,e)=>n.isEqual(e))}const FV=new rr(Ke.comparator),BV=new En(Ke.comparator);function Vt(...n){let e=BV;for(const t of n)e=e.add(t);return e}const jV=new En(kt);function UV(){return jV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function t3(n){return{integerValue:""+n}}function zV(n,e){return K7(e)?t3(e):Ev(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this._=void 0}}function WV(n,e,t){return n instanceof Id?function(i,o){const c={fields:{[MR]:{stringValue:OR},[VR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&xv(o)&&(o=og(o)),o&&(c.fields[LR]=o),{mapValue:c}}(t,e):n instanceof Ad?r3(n,e):n instanceof Td?i3(n,e):function(i,o){const c=n3(i,o),h=EI(c)+EI(i.Ae);return Dx(c)&&Dx(i.Ae)?t3(h):Ev(i.serializer,h)}(n,e)}function HV(n,e,t){return n instanceof Ad?r3(n,e):n instanceof Td?i3(n,e):t}function n3(n,e){return n instanceof bf?function(r){return Dx(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Id extends cg{}class Ad extends cg{constructor(e){super(),this.elements=e}}function r3(n,e){const t=s3(e);for(const r of n.elements)t.some(i=>Qo(i,r))||t.push(r);return{arrayValue:{values:t}}}class Td extends cg{constructor(e){super(),this.elements=e}}function i3(n,e){let t=s3(e);for(const r of n.elements)t=t.filter(i=>!Qo(i,r));return{arrayValue:{values:t}}}class bf extends cg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function EI(n){return er(n.integerValue||n.doubleValue)}function s3(n){return _f(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,t){this.field=e,this.transform=t}}function GV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ad&&i instanceof Ad||r instanceof Td&&i instanceof Td?md(r.elements,i.elements,Qo):r instanceof bf&&i instanceof bf?Qo(r.Ae,i.Ae):r instanceof Id&&i instanceof Id}(n.transform,e.transform)}class $V{constructor(e,t){this.version=e,this.transformResults=t}}class Ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function U0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ug{}function a3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new dg(n.key,Ki.none()):new Fd(n.key,n.data,Ki.none());{const t=n.data,r=Oi.empty();let i=new En(lr.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new za(n.key,r,new ds(i.toArray()),Ki.none())}}function qV(n,e,t){n instanceof Fd?function(i,o,c){const h=i.value.clone(),m=II(i.fieldTransforms,o,c.transformResults);h.setAll(m),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof za?function(i,o,c){if(!U0(i.precondition,o))return void o.convertToUnknownDocument(c.version);const h=II(i.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(l3(i)),m.setAll(h),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Zh(n,e,t,r){return n instanceof Fd?function(o,c,h,m){if(!U0(o.precondition,c))return h;const g=o.value.clone(),w=AI(o.fieldTransforms,m,c);return g.setAll(w),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof za?function(o,c,h,m){if(!U0(o.precondition,c))return h;const g=AI(o.fieldTransforms,m,c),w=c.data;return w.setAll(l3(o)),w.setAll(g),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(o,c,h){return U0(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function KV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=n3(r.transform,i||null);o!=null&&(t===null&&(t=Oi.empty()),t.set(r.field,o))}return t||null}function bI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&md(r,i,(o,c)=>GV(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fd extends ug{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class za extends ug{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function l3(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function II(n,e,t){const r=new Map;dt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,HV(c,h,t[i]))}return r}function AI(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,WV(o,c,e))}return r}class dg extends ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c3 extends ug{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&qV(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Zh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=e3();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const m=a3(c,h);m!==null&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&md(this.mutations,e.mutations,(t,r)=>bI(t,r))&&md(this.baseMutations,e.baseMutations,(t,r)=>bI(t,r))}}class Iv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){dt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return FV}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new Iv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Av=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr,tn;function YV(n){switch(n){case Ce.OK:return rt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return rt(15467,{code:n})}}function u3(n){if(n===void 0)return qi("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case Mr.OK:return Ce.OK;case Mr.CANCELLED:return Ce.CANCELLED;case Mr.UNKNOWN:return Ce.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return Ce.INTERNAL;case Mr.UNAVAILABLE:return Ce.UNAVAILABLE;case Mr.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Mr.NOT_FOUND:return Ce.NOT_FOUND;case Mr.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Mr.ABORTED:return Ce.ABORTED;case Mr.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Mr.DATA_LOSS:return Ce.DATA_LOSS;default:return rt(39323,{code:n})}}(tn=Mr||(Mr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=new kl([4294967295,4294967295],0);function TI(n){const e=QV().encode(n),t=new aR;return t.update(e),new Uint8Array(t.digest())}function CI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new kl([t,r],0),new kl([i,o],0)]}class Tv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lh(`Invalid padding: ${t}`);if(r<0)throw new Lh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=kl.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(kl.fromNumber(r)));return i.compare(ZV)===1&&(i=new kl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=TI(e),[r,i]=CI(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Tv(o,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.ge===0)return;const t=TI(e),[r,i]=CI(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Jf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new hg(yt.min(),i,new rr(kt),Cs(),Vt())}}class Jf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jf(r,t,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class d3{constructor(e,t){this.targetId=e,this.Ce=t}}class h3{constructor(e,t,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class SI{constructor(){this.ve=0,this.Fe=RI(),this.Me=Br.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vt(),t=Vt(),r=Vt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt(38017,{changeType:o})}}),new Jf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=RI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cs(),this.Je=a0(),this.He=a0(),this.Ye=new rr(kt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(gm(o))if(r===0){const c=new Ke(o.path);this.et(t,c,wr.newNoDocument(c,yt.min()))}else dt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,h;try{c=Pa(r).toUint8Array()}catch(m){if(m instanceof DR)return qc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Tv(c,i,o)}catch(m){return qc(m instanceof Lh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,c)=>{const h=this.ot(c);if(h){if(o.current&&gm(h.target)){const m=new Ke(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,wr.newNoDocument(m,e))}o.Be&&(t.set(c,o.ke()),o.qe())}});let r=Vt();this.He.forEach((o,c)=>{let h=!0;c.forEachWhile(m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,c)=>c.setReadTime(e));const i=new hg(e,t,this.Ye,this.je,r);return this.je=Cs(),this.Je=a0(),this.He=a0(),this.Ye=new rr(kt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new SI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(kt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(kt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new SI),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function a0(){return new rr(Ke.comparator)}function RI(){return new rr(Ke.comparator)}const eF={asc:"ASCENDING",desc:"DESCENDING"},tF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nF={and:"AND",or:"OR"};class rF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bx(n,e){return n.useProto3Json||ng(e)?e:{value:e}}function Cd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function iF(n,e){return Cd(n,e.toTimestamp())}function Qi(n){return dt(!!n,49232),yt.fromTimestamp(function(t){const r=ka(t);return new vn(r.seconds,r.nanos)}(n))}function Cv(n,e){return jx(n,e).canonicalString()}function jx(n,e){const t=function(i){return new fn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function p3(n){const e=fn.fromString(n);return dt(b3(e),10190,{key:e.toString()}),e}function xm(n,e){return Cv(n.databaseId,e.path)}function Lc(n,e){const t=p3(e);if(t.get(1)!==n.databaseId.projectId)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(y3(t))}function m3(n,e){return Cv(n.databaseId,e)}function g3(n){const e=p3(n);return e.length===4?fn.emptyPath():y3(e)}function Ux(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function y3(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function NI(n,e,t){return{name:xm(n,e),fields:t.value.mapValue.fields}}function sF(n,e,t){const r=Lc(n,e.name),i=Qi(e.updateTime),o=e.createTime?Qi(e.createTime):yt.min(),c=new Oi({mapValue:{fields:e.fields}}),h=wr.newFoundDocument(r,i,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function oF(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:rt(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,w){return g.useProto3Json?(dt(w===void 0||typeof w=="string",58123),Br.fromBase64String(w||"")):(dt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Br.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const w=g.code===void 0?Ce.UNKNOWN:u3(g.code);return new qe(w,g.message||"")}(c);t=new h3(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lc(n,r.document.name),o=Qi(r.document.updateTime),c=r.document.createTime?Qi(r.document.createTime):yt.min(),h=new Oi({mapValue:{fields:r.document.fields}}),m=wr.newFoundDocument(i,o,c,h),g=r.targetIds||[],w=r.removedTargetIds||[];t=new z0(g,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lc(n,r.document),o=r.readTime?Qi(r.readTime):yt.min(),c=wr.newNoDocument(i,o),h=r.removedTargetIds||[];t=new z0([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lc(n,r.document),o=r.removedTargetIds||[];t=new z0([],o,i,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new XV(i,o),h=r.targetId;t=new d3(h,c)}}return t}function wm(n,e){let t;if(e instanceof Fd)t={update:NI(n,e.key,e.value)};else if(e instanceof dg)t={delete:xm(n,e.key)};else if(e instanceof za)t={update:NI(n,e.key,e.data),updateMask:hF(e.fieldMask)};else{if(!(e instanceof c3))return rt(16599,{Vt:e.type});t={verify:xm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const h=c.transform;if(h instanceof Id)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ad)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Td)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof bf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw rt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:iF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:rt(27497)}(n,e.precondition)),t}function zx(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?Ki.updateTime(Qi(o.updateTime)):o.exists!==void 0?Ki.exists(o.exists):Ki.none()}(e.currentDocument):Ki.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(c,h){let m=null;if("setToServerValue"in h)dt(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),m=new Id;else if("appendMissingElements"in h){const w=h.appendMissingElements.values||[];m=new Ad(w)}else if("removeAllFromArray"in h){const w=h.removeAllFromArray.values||[];m=new Td(w)}else"increment"in h?m=new bf(c,h.increment):rt(16584,{proto:h});const g=lr.fromServerFormat(h.fieldPath);return new o3(g,m)}(n,i)):[];if(e.update){e.update.name;const i=Lc(n,e.update.name),o=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const g=m.fieldPaths||[];return new ds(g.map(w=>lr.fromServerFormat(w)))}(e.updateMask);return new za(i,o,c,t,r)}return new Fd(i,o,t,r)}if(e.delete){const i=Lc(n,e.delete);return new dg(i,t)}if(e.verify){const i=Lc(n,e.verify);return new c3(i,t)}return rt(1463,{proto:e})}function aF(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map(t=>function(i,o){let c=i.updateTime?Qi(i.updateTime):Qi(o);return c.isEqual(yt.min())&&(c=Qi(o)),new $V(c,i.transformResults||[])}(t,e))):[]}function x3(n,e){return{documents:[m3(n,e.path)]}}function w3(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=m3(n,i);const o=function(g){if(g.length!==0)return E3(_n.create(g,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(w=>function(T){return{field:Xu(T.field),direction:cF(T.dir)}}(w))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Bx(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:i}}function v3(n){let e=g3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){dt(r===1,65062);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let o=[];t.where&&(o=function(E){const T=_3(E);return T instanceof _n&&_v(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(T=>function(M){return new Ef(Yu(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(E){let T;return T=typeof E=="object"?E.value:E,ng(T)?null:T}(t.limit));let m=null;t.startAt&&(m=function(E){const T=!!E.before,R=E.values||[];return new Ed(R,T)}(t.startAt));let g=null;return t.endAt&&(g=function(E){const T=!E.before,R=E.values||[];return new Ed(R,T)}(t.endAt)),DV(e,i,c,o,h,"F",m,g)}function lF(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _3(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yu(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yu(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Yu(t.unaryFilter.field);return Yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Yu(t.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Yt.create(Yu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _n.create(t.compositeFilter.filters.map(r=>_3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(t.compositeFilter.op))}(n):rt(30097,{filter:n})}function cF(n){return eF[n]}function uF(n){return tF[n]}function dF(n){return nF[n]}function Xu(n){return{fieldPath:n.canonicalString()}}function Yu(n){return lr.fromServerFormat(n.fieldPath)}function E3(n){return n instanceof Yt?function(t){if(t.op==="=="){if(pI(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NAN"}};if(fI(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pI(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NAN"}};if(fI(t.value))return{unaryFilter:{field:Xu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xu(t.field),op:uF(t.op),value:t.value}}}(n):n instanceof _n?function(t){const r=t.getFilters().map(i=>E3(i));return r.length===1?r[0]:{compositeFilter:{op:dF(t.op),filters:r}}}(n):rt(54877,{filter:n})}function hF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function b3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t,r,i,o=yt.min(),c=yt.min(),h=Br.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.yt=e}}function fF(n,e){let t;if(e.document)t=sF(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Qc(e.noDocument.readTime);t=wr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt(56709);{const r=Ke.fromSegments(e.unknownDocument.path),i=Qc(e.unknownDocument.version);t=wr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new vn(i[0],i[1]);return yt.fromTimestamp(o)}(e.readTime)),t}function kI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,c){return{name:xm(o,c.key),fields:c.data.value.mapValue.fields,updateTime:Cd(o,c.version.toTimestamp()),createTime:Cd(o,c.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yc(e.version)};else{if(!e.isUnknownDocument())return rt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Yc(e.version)}}return r}function vm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qc(n){const e=new vn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Cc(n,e){const t=(e.baseMutations||[]).map(o=>zx(n.yt,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];c.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>zx(n.yt,o)),i=vn.fromMillis(e.localWriteTimeMs);return new bv(e.batchId,i,t,r)}function Vh(n){const e=Qc(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Qc(n.lastLimboFreeSnapshotVersion):yt.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){const c=o.documents.length;return dt(c===1,1966,{count:c}),Xs(Qf(g3(o.documents[0])))}(n.query):function(o){return Xs(v3(o))}(n.query),new ba(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function A3(n,e){const t=Yc(e.snapshotVersion),r=Yc(e.lastLimboFreeSnapshotVersion);let i;i=gm(e.target)?x3(n.yt,e.target):w3(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Xc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function T3(n){const e=v3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Fx(e,e.limit,"L"):e}function Ay(n,e){return new Av(e.largestBatchId,zx(n.yt,e.overlayMutation))}function PI(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}function DI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yc(r.readTime),documentKey:Li(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{getBundleMetadata(e,t){return OI(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Qc(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return OI(e).put(function(i){return{bundleId:i.id,createTime:Yc(Qi(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return MI(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:T3(o.bundledQuery),readTime:Qc(o.readTime)}}(r)})}saveNamedQuery(e,t){return MI(e).put(function(i){return{name:i.name,readTime:Yc(Qi(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function OI(n){return Xr(n,rg)}function MI(n){return Xr(n,ig)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new fg(e,r)}getOverlay(e,t){return Eh(e).get(PI(this.userId,t)).next(r=>r?Ay(this.serializer,r):null)}getOverlays(e,t){const r=Lo();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new Av(t,c);i.push(this.St(e,h))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Li(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Eh(e).Z(Nx,h))}),ge.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Lo(),o=Li(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Eh(e).J(Nx,c).next(h=>{for(const m of h){const g=Ay(this.serializer,m);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Lo();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Eh(e).ee({index:CR,range:h},(m,g,w)=>{const E=Ay(this.serializer,g);o.size()<i||E.largestBatchId===c?(o.set(E.getKey(),E),c=E.largestBatchId):w.done()}).next(()=>o)}St(e,t){return Eh(e).put(function(i,o,c){const[h,m,g]=PI(o,c.mutation.key);return{userId:o,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:wm(i.yt,c.mutation)}}(this.serializer,this.userId,t))}}function Eh(n){return Xr(n,sg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{bt(e){return Xr(e,gv)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Br.fromUint8Array(r):Br.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),pf(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=ka(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Pa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?BR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ag(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):rt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var c,h;const r=e.fields||{};this.Ft(t,53);const i=vd,o=((h=(c=r[i].arrayValue)==null?void 0:c.values)==null?void 0:h.length)||0;this.Ft(t,15),t.Mt(er(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ke.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Sc.Kt=new Sc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=255;function gF(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function LI(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const c=gF(255&r[o]);if(i+=c,c!==8)break}return i}(n);return Math.ceil(e/8)}class yF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=LI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=LI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Fu),this.sn(255)}_n(){this.an(Fu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Fu?(this.sn(Fu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Fu?(this.an(Fu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class xF{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class wF{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class bh{constructor(){this.cn=new yF,this.ln=new xF(this.cn),this.hn=new wF(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Rc(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:W0(this.En),directionalValue:W0(this.dn),orderedDocumentKey:W0(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function pl(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=VI(n.En,e.En),t!==0?t:(t=VI(n.dn,e.dn),t!==0?t:Ke.comparator(n.In,e.In)))}function VI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function W0(n){return _S()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function FI(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}class BI{constructor(e){this.mn=new En((t,r)=>lr.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(dt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Cx(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ec(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!i.has(h.field.canonicalString())){const m=r[o];if(!this.Sn(h,m)||!this.bn(this.fn[c++],m))return!1}++o}for(;o<r.length;++o){const h=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new En(lr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new M0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new M0(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new M0(r.field,r.dir==="asc"?0:1)));return new dm(dm.UNKNOWN_ID,this.collectionId,t,ff.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(n){var t,r;if(dt(n instanceof Yt||n instanceof _n,20012),n instanceof Yt){if(n instanceof KR){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(o=>Yt.create(n.field,"==",o)))||[];return _n.create(i,"or")}return n}const e=n.filters.map(i=>C3(i));return _n.create(e,n.op)}function vF(n){if(n.getFilters().length===0)return[];const e=Gx(C3(n));return dt(S3(e),7391),Wx(e)||Hx(e)?[e]:e.getFilters()}function Wx(n){return n instanceof Yt}function Hx(n){return n instanceof _n&&_v(n)}function S3(n){return Wx(n)||Hx(n)||function(t){if(t instanceof _n&&Ox(t)){for(const r of t.getFilters())if(!Wx(r)&&!Hx(r))return!1;return!0}return!1}(n)}function Gx(n){if(dt(n instanceof Yt||n instanceof _n,34018),n instanceof Yt)return n;if(n.filters.length===1)return Gx(n.filters[0]);const e=n.filters.map(r=>Gx(r));let t=_n.create(e,n.op);return t=_m(t),S3(t)?t:(dt(t instanceof _n,64498),dt(bd(t),40251),dt(t.filters.length>1,57927),t.filters.reduce((r,i)=>Sv(r,i)))}function Sv(n,e){let t;return dt(n instanceof Yt||n instanceof _n,38388),dt(e instanceof Yt||e instanceof _n,25473),t=n instanceof Yt?e instanceof Yt?function(i,o){return _n.create([i,o],"and")}(n,e):jI(n,e):e instanceof Yt?jI(e,n):function(i,o){if(dt(i.filters.length>0&&o.filters.length>0,48005),bd(i)&&bd(o))return GR(i,o.getFilters());const c=Ox(i)?i:o,h=Ox(i)?o:i,m=c.filters.map(g=>Sv(g,h));return _n.create(m,"or")}(n,e),_m(t)}function jI(n,e){if(bd(e))return GR(e,n.getFilters());{const t=e.filters.map(r=>Sv(n,r));return _n.create(t,"or")}}function _m(n){if(dt(n instanceof Yt||n instanceof _n,11850),n instanceof Yt)return n;const e=n.getFilters();if(e.length===1)return _m(e[0]);if(WR(n))return n;const t=e.map(i=>_m(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof _n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_n.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(){this.Cn=new Rv}addToCollectionParentIndex(e,t){return this.Cn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(Ps.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Rv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(fn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(fn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="IndexedDbIndexManager",l0=new Uint8Array(0);class EF{constructor(e,t){this.databaseId=t,this.vn=new Rv,this.Fn=new Ua(r=>Xc(r),(r,i)=>Yf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const o={collectionId:r,parent:Li(i)};return zI(e).put(o)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mR(t),""],!1,!0);return zI(e).J(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Mo(c.parent))}return r})}addFieldIndex(e,t){const r=Ih(e),i=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete i.indexId;const o=r.add(i);if(t.indexState){const c=ju(e);return o.next(h=>{c.put(DI(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Ih(e),i=ju(e),o=Bu(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ih(e),r=Bu(e),i=ju(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return ge.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new BI(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Bu(e);let i=!0;const o=new Map;return ge.forEach(this.Mn(t),c=>this.xn(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Vt();const h=[];return ge.forEach(o,(m,g)=>{Be(UI,`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(m)} to execute ${Xc(t)}`);const w=function(W,Y){const Z=Cx(Y);if(Z===void 0)return null;for(const ie of ym(W,Z.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(g,m),E=function(W,Y){const Z=new Map;for(const ie of Ec(Y))for(const F of ym(W,ie.fieldPath))switch(F.op){case"==":case"in":Z.set(ie.fieldPath.canonicalString(),F.value);break;case"not-in":case"!=":return Z.set(ie.fieldPath.canonicalString(),F.value),Array.from(Z.values())}return null}(g,m),T=function(W,Y){const Z=[];let ie=!0;for(const F of Ec(Y)){const B=F.kind===0?wI(W,F.fieldPath,W.startAt):vI(W,F.fieldPath,W.startAt);Z.push(B.value),ie&&(ie=B.inclusive)}return new Ed(Z,ie)}(g,m),R=function(W,Y){const Z=[];let ie=!0;for(const F of Ec(Y)){const B=F.kind===0?vI(W,F.fieldPath,W.endAt):wI(W,F.fieldPath,W.endAt);Z.push(B.value),ie&&(ie=B.inclusive)}return new Ed(Z,ie)}(g,m),M=this.On(m,g,T),D=this.On(m,g,R),L=this.Nn(m,g,E),G=this.Bn(m.indexId,w,M,T.inclusive,D,R.inclusive,L);return ge.forEach(G,z=>r.Y(z,t.limit).next(W=>{W.forEach(Y=>{const Z=Ke.fromSegments(Y.documentKey);c.has(Z)||(c=c.add(Z),h.push(Z))})}))}).next(()=>h)}return ge.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=vF(_n.create(e.filters,"and")).map(r=>Lx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,c,h){const m=(t!=null?t.length:1)*Math.max(r.length,o.length),g=m/(t!=null?t.length:1),w=[];for(let E=0;E<m;++E){const T=t?this.Ln(t[E/g]):l0,R=this.kn(e,T,r[E%g],i),M=this.qn(e,T,o[E%g],c),D=h.map(L=>this.kn(e,T,L,!0));w.push(...this.createRange(R,M,D))}return w}kn(e,t,r,i){const o=new Rc(e,Ke.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new Rc(e,Ke.empty(),t,r);return i?o.An():o}xn(e,t){const r=new BI(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.yn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.Mn(t);return ge.forEach(i,o=>this.xn(e,o).next(c=>{c?r!==0&&c.fields.length<function(m){let g=new En(lr.comparator),w=!1;for(const E of m.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?w=!0:g=g.add(T.field));for(const E of m.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){const r=new bh;for(const i of Ec(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const c=r.Pn(i.kind);Sc.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new bh;return Sc.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new bh;return Sc.Kt.Dt(vf(this.databaseId,t),r.Pn(function(o){const c=Ec(o);return c.length===0?0:c[c.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new bh);let o=0;for(const c of Ec(e)){const h=r[o++];for(const m of i)if(this.Un(t,c.fieldPath)&&_f(h))i=this.Kn(i,c,h);else{const g=m.Pn(c.kind);Sc.Kt.Dt(h,g)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const m=new bh;m.seed(h.un()),Sc.Kt.Dt(c,m.Pn(t.kind)),o.push(m)}return o}Un(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ih(e),i=ju(e);return(t?r.J(Rx,IDBKeyRange.bound(t,t)):r.J()).next(o=>{const c=[];return ge.forEach(o,h=>i.get([h.indexId,this.uid]).next(m=>{c.push(function(w,E){const T=E?new ff(E.sequenceNumber,new Ps(Qc(E.readTime),new Ke(Mo(E.documentKey)),E.largestBatchId)):ff.empty(),R=w.fields.map(([M,D])=>new M0(lr.fromServerFormat(M),D));return new dm(w.indexId,w.collectionGroup,R,T)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ih(e),o=ju(e);return this.Gn(e).next(c=>i.J(Rx,IDBKeyRange.bound(t,t)).next(h=>ge.forEach(h,m=>o.put(DI(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ge.forEach(h,m=>this.zn(e,i,m).next(g=>{const w=this.jn(o,m);return g.isEqual(w)?ge.resolve():this.Jn(e,o,m,g,w)}))))})}Hn(e,t,r,i){return Bu(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Bu(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Bu(e);let o=new En(pl);return i.ee({index:TR,range:IDBKeyRange.only([r.indexId,this.uid,W0(this.$n(r,t))])},(c,h)=>{o=o.add(new Rc(r.indexId,t,FI(h.arrayValue),FI(h.directionalValue)))}).next(()=>o)}jn(e,t){let r=new En(pl);const i=this.Qn(t,e);if(i==null)return r;const o=Cx(t);if(o!=null){const c=e.data.field(o.fieldPath);if(_f(c))for(const h of c.arrayValue.values||[])r=r.add(new Rc(t.indexId,e.key,this.Ln(h),i))}else r=r.add(new Rc(t.indexId,e.key,l0,i));return r}Jn(e,t,r,i,o){Be(UI,"Updating index entries for document '%s'",t.key);const c=[];return function(m,g,w,E,T){const R=m.getIterator(),M=g.getIterator();let D=Vu(R),L=Vu(M);for(;D||L;){let G=!1,z=!1;if(D&&L){const W=w(D,L);W<0?z=!0:W>0&&(G=!0)}else D!=null?z=!0:G=!0;G?(E(L),L=Vu(M)):z?(T(D),D=Vu(R)):(D=Vu(R),L=Vu(M))}}(i,o,pl,h=>{c.push(this.Hn(e,t,r,h))},h=>{c.push(this.Yn(e,t,r,h))}),ge.waitFor(c)}Gn(e){let t=1;return ju(e).ee({index:AR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>pl(c,h)).filter((c,h,m)=>!h||pl(c,m[h-1])!==0);const i=[];i.push(e);for(const c of r){const h=pl(c,e),m=pl(c,t);if(h===0)i[0]=e.An();else if(h>0&&m<0)i.push(c),i.push(c.An());else if(m>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.Zn(i[c],i[c+1]))return[];const h=i[c].Vn(this.uid,l0,Ke.empty()),m=i[c+1].Vn(this.uid,l0,Ke.empty());o.push(IDBKeyRange.bound(h,m))}return o}Zn(e,t){return pl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(WI)}getMinOffset(e,t){return ge.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||rt(44426))).next(WI)}}function zI(n){return Xr(n,yf)}function Bu(n){return Xr(n,Kh)}function Ih(n){return Xr(n,mv)}function ju(n){return Xr(n,qh)}function WI(n){dt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;hv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ps(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R3=41943040;class Di{static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(n,e,t){const r=n.store(uo),i=n.store(gd),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.ee({range:c},(w,E,T)=>(h++,T.delete()));o.push(m.next(()=>{dt(h===1,47070,{batchId:t.batchId})}));const g=[];for(const w of t.mutations){const E=ER(e,w.key.path,t.batchId);o.push(i.delete(E)),g.push(w.key)}return ge.waitFor(o).next(()=>g)}function Em(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(R3,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class pg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){dt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new pg(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).ee({index:Nc,range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Qu(e),c=ml(e);return c.add({}).next(h=>{dt(typeof h=="number",49019);const m=new bv(h,t,r,i),g=function(R,M,D){const L=D.baseMutations.map(z=>wm(R.yt,z)),G=D.mutations.map(z=>wm(R.yt,z));return{userId:M,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:L,mutations:G}}(this.serializer,this.userId,m),w=[];let E=new En((T,R)=>kt(T.canonicalString(),R.canonicalString()));for(const T of i){const R=ER(this.userId,T.key.path,h);E=E.add(T.key.path.popLast()),w.push(c.put(g)),w.push(o.put(R,Q7))}return E.forEach(T=>{w.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Xn[h]=m.keys()}),ge.waitFor(w).next(()=>m)})}lookupMutationBatch(e,t){return ml(e).get(t).next(r=>r?(dt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Cc(this.serializer,r)):null)}er(e,t){return this.Xn[t]?ge.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return ml(e).ee({index:Nc,range:i},(c,h,m)=>{h.userId===this.userId&&(dt(h.batchId>=r,47524,{tr:r}),o=Cc(this.serializer,h)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Oc;return ml(e).ee({index:Nc,range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Oc],[this.userId,Number.POSITIVE_INFINITY]);return ml(e).J(Nc,t).next(r=>r.map(i=>Cc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=L0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Qu(e).ee({range:i},(c,h,m)=>{const[g,w,E]=c,T=Mo(w);if(g===this.userId&&t.path.isEqual(T))return ml(e).get(E).next(R=>{if(!R)throw rt(61480,{nr:c,batchId:E});dt(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:E}),o.push(Cc(this.serializer,R))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);const i=[];return t.forEach(o=>{const c=L0(this.userId,o.path),h=IDBKeyRange.lowerBound(c),m=Qu(e).ee({range:h},(g,w,E)=>{const[T,R,M]=g,D=Mo(R);T===this.userId&&o.path.isEqual(D)?r=r.add(M):E.done()});i.push(m)}),ge.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=L0(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new En(kt);return Qu(e).ee({range:c},(m,g,w)=>{const[E,T,R]=m,M=Mo(T);E===this.userId&&r.isPrefixOf(M)?M.length===i&&(h=h.add(R)):w.done()}).next(()=>this.rr(e,h))}rr(e,t){const r=[],i=[];return t.forEach(o=>{i.push(ml(e).get(o).next(c=>{if(c===null)throw rt(35274,{batchId:o});dt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(Cc(this.serializer,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return N3(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),i=[];return Qu(e).ee({range:r},(o,c,h)=>{if(o[0]===this.userId){const m=Mo(o[1]);i.push(m)}else h.done()}).next(()=>{dt(i.length===0,56720,{sr:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return k3(e,this.userId,t)}_r(e){return P3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Oc,lastStreamToken:""})}}function k3(n,e,t){const r=L0(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return Qu(n).ee({range:o,X:!0},(h,m,g)=>{const[w,E,T]=h;w===e&&E===i&&(c=!0),g.done()}).next(()=>c)}function ml(n){return Xr(n,uo)}function Qu(n){return Xr(n,gd)}function P3(n){return Xr(n,mf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zc(0)}static cr(){return new Zc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new Zc(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>yt.fromTimestamp(new vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Uu(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(dt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Uu(e).ee((c,h)=>{const m=Vh(h);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>ge.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Uu(e).ee((r,i)=>{const o=Vh(i);t(o)})}lr(e){return GI(e).get(pm).next(t=>(dt(t!==null,2888),t))}hr(e,t){return GI(e).put(pm,t)}Pr(e,t){return Uu(e).put(A3(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Xc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Uu(e).ee({range:i,index:IR},(c,h,m)=>{const g=Vh(h);Yf(t,g.target)&&(o=g,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Tl(e);return t.forEach(c=>{const h=Li(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=Tl(e);return ge.forEach(t,o=>{const c=Li(o.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Tl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Tl(e);let o=Vt();return i.ee({range:r,X:!0},(c,h,m)=>{const g=Mo(c[1]),w=new Ke(g);o=o.add(w)}).next(()=>o)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[mR(r)],!1,!0);let o=0;return Tl(e).ee({index:pv,X:!0,range:i},([c,h],m,g)=>{c!==0&&(o++,g.done())}).next(()=>o>0)}At(e,t){return Uu(e).get(t).next(r=>r?Vh(r):null)}}function Uu(n){return Xr(n,yd)}function GI(n){return Xr(n,Mc)}function Tl(n){return Xr(n,xd)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="LruGarbageCollector",IF=1048576;function qI([n,e],[t,r]){const i=kt(n,t);return i===0?kt(e,r):i}class AF{constructor(e){this.Ir=e,this.buffer=new En(qI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();qI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class D3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Be($I,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ql(t)?Be($I,"Ignoring IndexedDB error during garbage collection: ",t):await cu(t)}await this.Vr(3e5)})}}class TF{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(qs.ce);const r=new AF(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(HI)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HI):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,c,h,m,g;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,h=Date.now(),this.removeTargets(e,r,t))).next(E=>(o=E,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(g=Date.now(),qu()<=Xt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${i} in `+(h-c)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-w}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}function O3(n,e){return new TF(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,t){this.db=e,this.garbageCollector=O3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return c0(e,r)}removeReference(e,t,r){return c0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return c0(e,t)}br(e,t){return function(i,o){let c=!1;return P3(i).te(h=>k3(i,h,o).next(m=>(m&&(c=!0),ge.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,(c,h)=>{if(h<=t){const m=this.br(e,c).next(g=>{if(!g)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,yt.min()),Tl(e).delete(function(E){return[0,Li(E.path)]}(c))))});i.push(m)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return c0(e,t)}Sr(e,t){const r=Tl(e);let i,o=qs.ce;return r.ee({index:pv},([c,h],{path:m,sequenceNumber:g})=>{c===0?(o!==qs.ce&&t(new Ke(Mo(i)),o),o=g,i=m):o=qs.ce}).next(()=>{o!==qs.ce&&t(new Ke(Mo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function c0(n,e){return Tl(n).put(function(r,i){return{targetId:0,path:Li(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.changes=new Ua(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yc(e).put(r)}removeEntry(e,t,r){return yc(e).delete(function(o,c){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],vm(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=wr.newInvalidDocument(t);return yc(e).ee({index:V0,range:IDBKeyRange.only(Ah(t))},(i,o)=>{r=this.Cr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:wr.newInvalidDocument(t)};return yc(e).ee({index:V0,range:IDBKeyRange.only(Ah(t))},(i,o)=>{r={document:this.Cr(t,o),size:Em(o)}}).next(()=>r)}getEntries(e,t){let r=Cs();return this.Fr(e,t,(i,o)=>{const c=this.Cr(i,o);r=r.insert(i,c)}).next(()=>r)}Mr(e,t){let r=Cs(),i=new rr(Ke.comparator);return this.Fr(e,t,(o,c)=>{const h=this.Cr(o,c);r=r.insert(o,h),i=i.insert(o,Em(c))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return ge.resolve();let i=new En(YI);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(Ah(i.first()),Ah(i.last())),c=i.getIterator();let h=c.getNext();return yc(e).ee({index:V0,range:o},(m,g,w)=>{const E=Ke.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&YI(h,E)<0;)r(h,null),h=c.getNext();h&&h.isEqual(E)&&(r(h,g),h=c.hasNext()?c.getNext():null),h?w.j(Ah(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const c=t.path,h=[c.popLast().toArray(),c.lastSegment(),vm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yc(e).J(IDBKeyRange.bound(h,m,!0)).next(g=>{o==null||o.incrementDocumentReadCount(g.length);let w=Cs();for(const E of g){const T=this.Cr(Ke.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(Zf(t,T)||i.has(T.key))&&(w=w.insert(T.key,T))}return w})}getAllFromCollectionGroup(e,t,r,i){let o=Cs();const c=XI(t,r),h=XI(t,Ps.max());return yc(e).ee({index:bR,range:IDBKeyRange.bound(c,h,!0)},(m,g,w)=>{const E=this.Cr(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(E.key,E),o.size===i&&w.done()}).next(()=>o)}newChangeBuffer(e){return new RF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return KI(e).get(Sx).next(t=>(dt(!!t,20021),t))}Dr(e,t){return KI(e).put(Sx,t)}Cr(e,t){if(t){const r=fF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(yt.min())))return r}return wr.newInvalidDocument(e)}}function L3(n){return new SF(n)}class RF extends M3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ua(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new En((o,c)=>kt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),c.isValidDocument()){const m=kI(this.Nr.serializer,c);i=i.add(o.path.popLast());const g=Em(m);r+=g-h.size,t.push(this.Nr.addEntry(e,o,m))}else if(r-=h.size,this.trackRemovals){const m=kI(this.Nr.serializer,c.convertToNoDocument(yt.min()));t.push(this.Nr.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Nr.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function KI(n){return Xr(n,gf)}function yc(n){return Xr(n,fm)}function Ah(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XI(n,e){const t=e.documentKey.path.toArray();return[n,vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function YI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=kt(t[o],r[o]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zh(r.mutation,i,ds.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const i=Lo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=Mh();return o.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=Cs();const c=Qh(),h=function(){return Qh()}();return t.forEach((m,g)=>{const w=r.get(g.key);i.has(g.key)&&(w===void 0||w.mutation instanceof za)?o=o.insert(g.key,g):w!==void 0?(c.set(g.key,w.mutation.getFieldMask()),Zh(w.mutation,g,w.mutation.getFieldMask(),vn.now())):c.set(g.key,ds.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((g,w)=>c.set(g,w)),t.forEach((g,w)=>h.set(g,new NF(w,c.get(g)??null))),h))}recalculateAndSaveOverlays(e,t){const r=Qh();let i=new rr((c,h)=>c-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let w=r.get(m)||ds.empty();w=h.applyToLocalView(g,w),r.set(m,w);const E=(i.get(h.batchId)||Vt()).add(m);i=i.insert(h.batchId,E)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,w=m.value,E=e3();w.forEach(T=>{if(!o.has(T)){const R=a3(t.get(T),r.get(T));R!==null&&E.set(T,R),o=o.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ge.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return Ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):XR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ge.resolve(Lo());let h=hf,m=o;return c.next(g=>ge.forEach(g,(w,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(w)?ge.resolve():this.remoteDocumentCache.getEntry(e,w).next(T=>{m=m.insert(w,T)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,m,g,Vt())).next(w=>({batchId:h,changes:JR(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Mh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=Mh();return this.indexManager.getCollectionParents(e,o).next(h=>ge.forEach(h,m=>{const g=function(E,T){return new Vd(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(w=>{w.forEach((E,T)=>{c=c.insert(E,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((m,g)=>{const w=g.getKey();c.get(w)===null&&(c=c.insert(w,wr.newInvalidDocument(w)))});let h=Mh();return c.forEach((m,g)=>{const w=o.get(m);w!==void 0&&Zh(w.mutation,g,ds.empty(),vn.now()),Zf(t,g)&&(h=h.insert(m,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qi(i.createTime)}}(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:T3(i.bundledQuery),readTime:Qi(i.readTime)}}(t)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.overlays=new rr(Ke.comparator),this.qr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Lo();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=Lo(),o=t.length+1,c=new Ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new rr((g,w)=>g-w);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let w=o.get(g.largestBatchId);w===null&&(w=Lo(),o=o.insert(g.largestBatchId,w)),w.set(g.getKey(),g)}}const h=Lo(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,w)=>h.set(g,w)),!(h.size()>=i)););return ge.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Av(t,r));let o=this.qr.get(t);o===void 0&&(o=Vt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(){this.sessionToken=Br.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this.Qr=new En(ii.$r),this.Ur=new En(ii.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ii(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new ii(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Ke(new fn([])),r=new ii(t,e),i=new ii(t,e+1),o=[];return this.Ur.forEachInRange([r,i],c=>{this.Gr(c),o.push(c.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ke(new fn([])),r=new ii(t,e),i=new ii(t,e+1);let o=Vt();return this.Ur.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new ii(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ii{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ke.comparator(e.key,t.key)||kt(e.Yr,t.Yr)}static Kr(e,t){return kt(e.Yr,t.Yr)||Ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(ii.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new bv(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Zr=this.Zr.add(new ii(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?Oc:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ii(t,0),i=new ii(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],c=>{const h=this.Xr(c.Yr);o.push(h)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);return t.forEach(i=>{const o=new ii(i,0),c=new ii(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],h=>{r=r.add(h.Yr)})}),ge.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const c=new ii(new Ke(o),0);let h=new En(kt);return this.Zr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(h=h.add(m.Yr)),!0)},c),ge.resolve(this.ti(h))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ge.forEach(t.mutations,i=>{const o=new ii(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new ii(t,0),i=this.Zr.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.ri=e,this.docs=function(){return new rr(Ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=Cs();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():wr.newInvalidDocument(i))}),ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Cs();const c=t.path,h=new Ke(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:w}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||hv(xR(w),r)<=0||(i.has(w.key)||Zf(t,w))&&(o=o.insert(w.key,w.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,t,r,i){rt(9500)}ii(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new LF(this)}getSize(e){return ge.resolve(this.size)}}class LF extends M3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.persistence=e,this.si=new Ua(t=>Xc(t),Yf),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Nv,this.targetCount=0,this.ai=Zc.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Pr(t),ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ge.waitFor(o).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t){this.ui={},this.overlays={},this.ci=new qs(0),this.li=!1,this.li=!0,this.hi=new DF,this.referenceDelegate=e(this),this.Pi=new VF(this),this.indexManager=new _F,this.remoteDocumentCache=function(i){return new MF(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new I3(t),this.Ii=new kF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new OF(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new FF(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return ge.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class FF extends vR{constructor(e){super(),this.currentSequenceNumber=e}}class mg{constructor(e){this.persistence=e,this.Ri=new Nv,this.Vi=null}static mi(e){return new mg(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,r=>{const i=Ke.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,yt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class bm{constructor(e,t){this.persistence=e,this.pi=new Ua(r=>Li(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=O3(this,t)}static mi(e,t){return new bm(e,t)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ge.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ge.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,c=>this.br(e,c,t).next(h=>{h||(r++,o.removeEntry(c,yt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=B0(e.data.value)),t}br(e,t,r){return ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ge.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.serializer=e}k(e,t,r,i){const o=new tg("createOrUpgrade",t);r<1&&i>=1&&(function(m){m.createObjectStore(Xf)}(e),function(m){m.createObjectStore(mf,{keyPath:Y7}),m.createObjectStore(uo,{keyPath:aI,autoIncrement:!0}).createIndex(Nc,lI,{unique:!0}),m.createObjectStore(gd)}(e),QI(e),function(m){m.createObjectStore(bc)}(e));let c=ge.resolve();return r<3&&i>=3&&(r!==0&&(function(m){m.deleteObjectStore(xd),m.deleteObjectStore(yd),m.deleteObjectStore(Mc)}(e),QI(e)),c=c.next(()=>function(m){const g=m.store(Mc),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return g.put(pm,w)}(o))),r<4&&i>=4&&(r!==0&&(c=c.next(()=>function(m,g){return g.store(uo).J().next(E=>{m.deleteObjectStore(uo),m.createObjectStore(uo,{keyPath:aI,autoIncrement:!0}).createIndex(Nc,lI,{unique:!0});const T=g.store(uo),R=E.map(M=>T.put(M));return ge.waitFor(R)})}(e,o))),c=c.next(()=>{(function(m){m.createObjectStore(wd,{keyPath:sV})})(e)})),r<5&&i>=5&&(c=c.next(()=>this.yi(o))),r<6&&i>=6&&(c=c.next(()=>(function(m){m.createObjectStore(gf)}(e),this.wi(o)))),r<7&&i>=7&&(c=c.next(()=>this.Si(o))),r<8&&i>=8&&(c=c.next(()=>this.bi(e,o))),r<9&&i>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(c=c.next(()=>this.Di(o))),r<11&&i>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(rg,{keyPath:oV})})(e),function(m){m.createObjectStore(ig,{keyPath:aV})}(e)})),r<12&&i>=12&&(c=c.next(()=>{(function(m){const g=m.createObjectStore(sg,{keyPath:pV});g.createIndex(Nx,mV,{unique:!1}),g.createIndex(CR,gV,{unique:!1})})(e)})),r<13&&i>=13&&(c=c.next(()=>function(m){const g=m.createObjectStore(fm,{keyPath:Z7});g.createIndex(V0,J7),g.createIndex(bR,eV)}(e)).next(()=>this.Ci(e,o)).next(()=>e.deleteObjectStore(bc))),r<14&&i>=14&&(c=c.next(()=>this.Fi(e,o))),r<15&&i>=15&&(c=c.next(()=>function(m){m.createObjectStore(mv,{keyPath:lV,autoIncrement:!0}).createIndex(Rx,cV,{unique:!1}),m.createObjectStore(qh,{keyPath:uV}).createIndex(AR,dV,{unique:!1}),m.createObjectStore(Kh,{keyPath:hV}).createIndex(TR,fV,{unique:!1})}(e))),r<16&&i>=16&&(c=c.next(()=>{t.objectStore(qh).clear()}).next(()=>{t.objectStore(Kh).clear()})),r<17&&i>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(gv,{keyPath:yV})})(e)})),r<18&&i>=18&&_S()&&(c=c.next(()=>{t.objectStore(qh).clear()}).next(()=>{t.objectStore(Kh).clear()})),c}wi(e){let t=0;return e.store(bc).ee((r,i)=>{t+=Em(i)}).next(()=>{const r={byteSize:t};return e.store(gf).put(Sx,r)})}yi(e){const t=e.store(mf),r=e.store(uo);return t.J().next(i=>ge.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,Oc],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Nc,c).next(h=>ge.forEach(h,m=>{dt(m.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Cc(this.serializer,m);return N3(e,o.userId,g).next(()=>{})}))}))}Si(e){const t=e.store(xd),r=e.store(bc);return e.store(Mc).get(pm).next(i=>{const o=[];return r.ee((c,h)=>{const m=new fn(c),g=function(E){return[0,Li(E)]}(m);o.push(t.get(g).next(w=>w?ge.resolve():(E=>t.put({targetId:0,path:Li(E),sequenceNumber:i.highestListenSequenceNumber}))(m)))}).next(()=>ge.waitFor(o))})}bi(e,t){e.createObjectStore(yf,{keyPath:iV});const r=t.store(yf),i=new Rv,o=c=>{if(i.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:Li(m)})}};return t.store(bc).ee({X:!0},(c,h)=>{const m=new fn(c);return o(m.popLast())}).next(()=>t.store(gd).ee({X:!0},([c,h,m],g)=>{const w=Mo(h);return o(w.popLast())}))}Di(e){const t=e.store(yd);return t.ee((r,i)=>{const o=Vh(i),c=A3(this.serializer,o);return t.put(c)})}Ci(e,t){const r=t.store(bc),i=[];return r.ee((o,c)=>{const h=t.store(fm),m=function(E){return E.document?new Ke(fn.fromString(E.document.name).popFirst(5)):E.noDocument?Ke.fromSegments(E.noDocument.path):E.unknownDocument?Ke.fromSegments(E.unknownDocument.path):rt(36783)}(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(g))}).next(()=>ge.waitFor(i))}Fi(e,t){const r=t.store(uo),i=L3(this.serializer),o=new kv(mg.mi,this.serializer.yt);return r.J().next(c=>{const h=new Map;return c.forEach(m=>{let g=h.get(m.userId)??Vt();Cc(this.serializer,m).keys().forEach(w=>g=g.add(w)),h.set(m.userId,g)}),ge.forEach(h,(m,g)=>{const w=new gi(g),E=fg.wt(this.serializer,w),T=o.getIndexManager(w),R=pg.wt(w,this.serializer,T,o.referenceDelegate);return new V3(i,R,E,T).recalculateAndSaveOverlaysForDocumentKeys(new kx(t,qs.ce),m).next()})})}}function QI(n){n.createObjectStore(xd,{keyPath:nV}).createIndex(pv,rV,{unique:!0}),n.createObjectStore(yd,{keyPath:"targetId"}).createIndex(IR,tV,{unique:!0}),n.createObjectStore(Mc)}const gl="IndexedDbPersistence",Ty=18e5,Cy=5e3,Sy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jF="main";class Pv{constructor(e,t,r,i,o,c,h,m,g,w,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=h,this.xi=g,this.Oi=w,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!Pv.v())throw new qe(Ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CF(this,i),this.$i=t+jF,this.serializer=new I3(m),this.Ui=new Pl(this.$i,this.Ni,new BF(this.serializer)),this.hi=new mF,this.Pi=new bF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=L3(this.serializer),this.Ii=new pF,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&qi(gl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,Sy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new qs(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>u0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(ql(e))return Be(gl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be(gl,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Th(e).get(Lu).next(t=>ge.resolve(this.es(t)))}ts(e){return u0(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ty)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Xr(t,wd);return r.J().next(i=>{const o=this.ss(i,Ty),c=i.filter(h=>o.indexOf(h)===-1);return ge.forEach(c,h=>r.delete(h.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ge.resolve(!0):Th(e).get(Lu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,Sy);return!1}}return!(!this.networkEnabled||!this.inForeground)||u0(e).J().next(r=>this.ss(r,Cy).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(o||c&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Be(gl,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Xf,wd],e=>{const t=new kx(e,qs.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>u0(e).J().next(t=>this.ss(t,Ty).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return pg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new EF(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return fg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be(gl,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=function(m){return m===18?vV:m===17?kR:m===16?wV:m===15?yv:m===14?NR:m===13?RR:m===12?xV:m===11?SR:void rt(60245)}(this.Ni);let c;return this.Ui.runTransaction(e,i,o,h=>(c=new kx(h,this.ci?this.ci.next():qs.ce),t==="readwrite-primary"?this.Hi(c).next(m=>!!m||this.Yi(c)).next(m=>{if(!m)throw qi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new qe(Ce.FAILED_PRECONDITION,wR);return r(c)}).next(m=>this.Xi(c).next(()=>m)):this.Is(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Is(e){return Th(e).get(Lu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Cy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(Ce.FAILED_PRECONDITION,Sy)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Th(e).put(Lu,t)}static v(){return Pl.v()}Zi(e){const t=Th(e);return t.get(Lu).next(r=>this.es(r)?(Be(gl,"Releasing primary lease."),t.delete(Lu)):ge.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(qi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;vS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Be(gl,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qi(gl,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){qi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Th(n){return Xr(n,Xf)}function u0(n){return Xr(n,wd)}function UF(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Vt(),i=Vt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Dv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vS()?8:_R(Kr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new zF;return this.Ss(e,t,c).next(h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(qu()<=Xt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",Ku(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(qu()<=Xt.DEBUG&&Be("QueryEngine","Query:",Ku(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(qu()<=Xt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",Ku(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(t))):ge.resolve())}ys(e,t){if(_I(t))return ge.resolve(null);let r=Xs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Fx(t,null,"F"),r=Xs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Vt(...o);return this.ps.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const g=this.Ds(t,h);return this.Cs(t,g,c,m.readTime)?this.ys(e,Fx(t,null,"F")):this.vs(e,g,t,m)}))})))}ws(e,t,r,i){return _I(t)||i.isEqual(yt.min())?ge.resolve(null):this.ps.getDocuments(e,r).next(o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,i)?ge.resolve(null):(qu()<=Xt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ku(t)),this.vs(e,c,t,W7(i,hf)).next(h=>h))})}Ds(e,t){let r=new En(QR(e));return t.forEach((i,o)=>{Zf(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return qu()<=Xt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Ku(t)),this.ps.getDocumentsMatchingQuery(e,t,Ps.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LocalStore",WF=3e8;class HF{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new rr(kt),this.xs=new Ua(o=>Xc(o),Yf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function B3(n,e,t,r){return new HF(n,e,t,r)}async function j3(n,e){const t=Pt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let m=Vt();for(const g of i){c.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}for(const g of o){h.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(r,m).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:h}))})})}function GF(n,e){const t=Pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(h,m,g,w){const E=g.batch,T=E.keys();let R=ge.resolve();return T.forEach(M=>{R=R.next(()=>w.getEntry(m,M)).next(D=>{const L=g.docVersions.get(M);dt(L!==null,48541),D.version.compareTo(L)<0&&(E.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),w.addEntry(D)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(m,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let m=Vt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function U3(n){const e=Pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function $F(n,e){const t=Pt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((w,E)=>{const T=i.get(E);if(!T)return;h.push(t.Pi.removeMatchingKeys(o,w.removedDocuments,E).next(()=>t.Pi.addMatchingKeys(o,w.addedDocuments,E)));let R=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Br.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):w.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(w.resumeToken,r)),i=i.insert(E,R),function(D,L,G){return D.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=WF?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(T,R,w)&&h.push(t.Pi.updateTargetData(o,R))});let m=Cs(),g=Vt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,w))}),h.push(qF(o,c,e.documentUpdates).next(w=>{m=w.ks,g=w.qs})),!r.isEqual(yt.min())){const w=t.Pi.getLastRemoteSnapshotVersion(o).next(E=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(w)}return ge.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,g)).next(()=>m)}).then(o=>(t.Ms=i,o))}function qF(n,e,t){let r=Vt(),i=Vt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Cs();return t.forEach((h,m)=>{const g=o.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Be(Ov,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)}),{ks:c,qs:i}})}function KF(n,e){const t=Pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Oc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XF(n,e){const t=Pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,ge.resolve(i)):t.Pi.allocateTargetId(r).next(c=>(i=new ba(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function $x(n,e,t){const r=Pt(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!ql(c))throw c;Be(Ov,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ZI(n,e,t){const r=Pt(n);let i=yt.min(),o=Vt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,w){const E=Pt(m),T=E.xs.get(w);return T!==void 0?ge.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,w)}(r,c,Xs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next(m=>{o=m})}).next(()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:yt.min(),t?o:Vt())).next(h=>(YF(r,MV(e),h),{documents:h,Qs:o})))}function YF(n,e,t){let r=n.Os.get(e)||yt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class JI{constructor(){this.activeTargetIds=UV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z3{constructor(){this.Mo=new JI,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="ConnectivityMonitor";class tA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Be(eA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Be(eA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d0=null;function qx(){return d0===null?d0=function(){return 268435456+Math.round(2147483648*Math.random())}():d0++,"0x"+d0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="RestConnection",ZF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===mm?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const c=qx(),h=this.zo(e,t.toUriEncodedString());Be(Ry,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,o);const{host:g}=new URL(h),w=Gl(g);return this.Jo(e,h,m,r,w).then(E=>(Be(Ry,`Received RPC '${e}' ${c}: `,E),E),E=>{throw qc(Ry,`RPC '${e}' ${c} failed with error: `,E,"url: ",h,"request:",r),E})}Ho(e,t,r,i,o,c){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ld}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=ZF[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="WebChannelConnection";class tB extends JF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const c=qx();return new Promise((h,m)=>{const g=new lR;g.setWithCredentials(!0),g.listenOnce(cR.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case O0.NO_ERROR:const E=g.getResponseJson();Be(Pi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),h(E);break;case O0.TIMEOUT:Be(Pi,`RPC '${e}' ${c} timed out`),m(new qe(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case O0.HTTP_ERROR:const T=g.getStatus();if(Be(Pi,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const D=function(G){const z=G.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(z)>=0?z:Ce.UNKNOWN}(M.status);m(new qe(D,M.message))}else m(new qe(Ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new qe(Ce.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Be(Pi,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(i);Be(Pi,`RPC '${e}' ${c} sending request:`,i),g.send(t,"POST",w,r,15)})}T_(e,t,r){const i=qx(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=hR(),h=dR(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Be(Pi,`Creating RPC '${e}' stream ${i}: ${w}`,m);const E=c.createWebChannel(w,m);this.I_(E);let T=!1,R=!1;const M=new eB({Yo:L=>{R?Be(Pi,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(T||(Be(Pi,`Opening RPC '${e}' stream ${i} transport.`),E.open(),T=!0),Be(Pi,`RPC '${e}' stream ${i} sending:`,L),E.send(L))},Zo:()=>E.close()}),D=(L,G,z)=>{L.listen(G,W=>{try{z(W)}catch(Y){setTimeout(()=>{throw Y},0)}})};return D(E,Oh.EventType.OPEN,()=>{R||(Be(Pi,`RPC '${e}' stream ${i} transport opened.`),M.o_())}),D(E,Oh.EventType.CLOSE,()=>{R||(R=!0,Be(Pi,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(E))}),D(E,Oh.EventType.ERROR,L=>{R||(R=!0,qc(Pi,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),M.a_(new qe(Ce.UNAVAILABLE,"The operation could not be completed")))}),D(E,Oh.EventType.MESSAGE,L=>{var G;if(!R){const z=L.data[0];dt(!!z,16349);const W=z,Y=(W==null?void 0:W.error)||((G=W[0])==null?void 0:G.error);if(Y){Be(Pi,`RPC '${e}' stream ${i} received error:`,Y);const Z=Y.status;let ie=function(H){const ee=Mr[H];if(ee!==void 0)return u3(ee)}(Z),F=Y.message;ie===void 0&&(ie=Ce.INTERNAL,F="Unknown error status: "+Z+" with message "+Y.message),R=!0,M.a_(new qe(ie,F)),E.close()}else Be(Pi,`RPC '${e}' stream ${i} received:`,z),M.u_(z)}}),D(h,uR.STAT_EVENT,L=>{L.stat===Ax.PROXY?Be(Pi,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Ax.NOPROXY&&Be(Pi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nB(){return typeof window<"u"?window:null}function H0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(n){return new rF(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="PersistentStream";class H3{constructor(e,t,r,i,o,c,h,m){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(qi(t.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new qe(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Be(nA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Be(nA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rB extends H3{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oF(this.serializer,e),r=function(o){if(!("targetChange"in o))return yt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?yt.min():c.readTime?Qi(c.readTime):yt.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Ux(this.serializer),t.addTarget=function(o,c){let h;const m=c.target;if(h=gm(m)?{documents:x3(o,m)}:{query:w3(o,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=f3(o,c.resumeToken);const g=Bx(o,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(yt.min())>0){h.readTime=Cd(o,c.snapshotVersion.toTimestamp());const g=Bx(o,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const r=lF(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Ux(this.serializer),t.removeTarget=e,this.q_(t)}}class iB extends H3{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aF(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Ux(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wm(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{}class oB extends sB{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Go(e,jx(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(Ce.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Ho(e,jx(t,r),i,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(Ce.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class aB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qi(t),this.aa=!1):Be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="RemoteStore";class lB{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(c=>{r.enqueueAndForget(async()=>{uu(this)&&(Be(Jc,"Restarting streams for network reachability change."),await async function(m){const g=Pt(m);g.Ea.add(4),await ep(g),g.Ra.set("Unknown"),g.Ea.delete(4),await yg(g)}(this))})}),this.Ra=new aB(r,i)}}async function yg(n){if(uu(n))for(const e of n.da)await e(!0)}async function ep(n){for(const e of n.da)await e(!1)}function G3(n,e){const t=Pt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fv(t)?Vv(t):Bd(t).O_()&&Lv(t,e))}function Mv(n,e){const t=Pt(n),r=Bd(t);t.Ia.delete(e),r.O_()&&$3(t,e),t.Ia.size===0&&(r.O_()?r.L_():uu(t)&&t.Ra.set("Unknown"))}function Lv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bd(n).Y_(e)}function $3(n,e){n.Va.Ue(e),Bd(n).Z_(e)}function Vv(n){n.Va=new JV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Bd(n).start(),n.Ra.ua()}function Fv(n){return uu(n)&&!Bd(n).x_()&&n.Ia.size>0}function uu(n){return Pt(n).Ea.size===0}function q3(n){n.Va=void 0}async function cB(n){n.Ra.set("Online")}async function uB(n){n.Ia.forEach((e,t)=>{Lv(n,e)})}async function dB(n,e){q3(n),Fv(n)?(n.Ra.ha(e),Vv(n)):n.Ra.set("Unknown")}async function hB(n,e,t){if(n.Ra.set("Online"),e instanceof h3&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,c),i.Ia.delete(h),i.Va.removeTarget(h))}(n,e)}catch(r){Be(Jc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Im(n,r)}else if(e instanceof z0?n.Va.Ze(e):e instanceof d3?n.Va.st(e):n.Va.tt(e),!t.isEqual(yt.min()))try{const r=await U3(n.localStore);t.compareTo(r)>=0&&await function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const w=o.Ia.get(g);w&&o.Ia.set(g,w.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,g)=>{const w=o.Ia.get(m);if(!w)return;o.Ia.set(m,w.withResumeToken(Br.EMPTY_BYTE_STRING,w.snapshotVersion)),$3(o,m);const E=new ba(w.target,m,g,w.sequenceNumber);Lv(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){Be(Jc,"Failed to raise snapshot:",r),await Im(n,r)}}async function Im(n,e,t){if(!ql(e))throw e;n.Ea.add(1),await ep(n),n.Ra.set("Offline"),t||(t=()=>U3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Be(Jc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await yg(n)})}function K3(n,e){return e().catch(t=>Im(n,t,e))}async function tp(n){const e=Pt(n),t=Fl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Oc;for(;fB(e);)try{const i=await KF(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,pB(e,i)}catch(i){await Im(e,i)}X3(e)&&Y3(e)}function fB(n){return uu(n)&&n.Ta.length<10}function pB(n,e){n.Ta.push(e);const t=Fl(n);t.O_()&&t.X_&&t.ea(e.mutations)}function X3(n){return uu(n)&&!Fl(n).x_()&&n.Ta.length>0}function Y3(n){Fl(n).start()}async function mB(n){Fl(n).ra()}async function gB(n){const e=Fl(n);for(const t of n.Ta)e.ea(t.mutations)}async function yB(n,e,t){const r=n.Ta.shift(),i=Iv.from(r,e,t);await K3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await tp(n)}async function xB(n,e){e&&Fl(n).X_&&await async function(r,i){if(function(c){return YV(c)&&c!==Ce.ABORTED}(i.code)){const o=r.Ta.shift();Fl(r).B_(),await K3(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await tp(r)}}(n,e),X3(n)&&Y3(n)}async function rA(n,e){const t=Pt(n);t.asyncQueue.verifyOperationInProgress(),Be(Jc,"RemoteStore received new credentials");const r=uu(t);t.Ea.add(3),await ep(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await yg(t)}async function wB(n,e){const t=Pt(n);e?(t.Ea.delete(2),await yg(t)):e||(t.Ea.add(2),await ep(t),t.Ra.set("Unknown"))}function Bd(n){return n.ma||(n.ma=function(t,r,i){const o=Pt(t);return o.sa(),new rB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:cB.bind(null,n),t_:uB.bind(null,n),r_:dB.bind(null,n),H_:hB.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Fv(n)?Vv(n):n.Ra.set("Unknown")):(await n.ma.stop(),q3(n))})),n.ma}function Fl(n){return n.fa||(n.fa=function(t,r,i){const o=Pt(t);return o.sa(),new iB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:mB.bind(null,n),r_:xB.bind(null,n),ta:gB.bind(null,n),na:yB.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await tp(n)):(await n.fa.stop(),n.Ta.length>0&&(Be(Jc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new Bv(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jv(n,e){if(qi("AsyncQueue",`${e}: ${n}`),ql(n))return new qe(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{static emptySet(e){return new ld(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Mh(),this.sortedSet=new rr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ld)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ld;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.ga=new rr(Ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sd{constructor(e,t,r,i,o,c,h,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Sd(e,t,ld.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _B{constructor(){this.queries=sA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Pt(t),o=i.queries;i.queries=sA(),o.forEach((c,h)=>{for(const m of h.Sa)m.onError(r)})})(this,new qe(Ce.ABORTED,"Firestore shutting down"))}}function sA(){return new Ua(n=>YR(n),lg)}async function Uv(n,e){const t=Pt(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new vB,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const h=jv(c,`Initialization of query '${Ku(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Wv(t)}async function zv(n,e){const t=Pt(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function EB(n,e){const t=Pt(n);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(i)&&(r=!0);c.wa=i}}r&&Wv(t)}function bB(n,e,t){const r=Pt(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Wv(n){n.Ca.forEach(e=>{e.next()})}var Kx,oA;(oA=Kx||(Kx={})).Ma="default",oA.Cache="cache";class Hv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Sd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.key=e}}class Z3{constructor(e){this.key=e}}class IB{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=QR(e),this.tu=new ld(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new iA,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,E)=>{const T=i.get(w),R=Zf(this.query,E)?E:null,M=!!T&&this.mutatedKeys.has(T.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;T&&R?T.data.isEqual(R.data)?M!==D&&(r.track({type:3,doc:R}),L=!0):this.su(T,R)||(r.track({type:2,doc:R}),L=!0,(m&&this.eu(R,m)>0||g&&this.eu(R,g)<0)&&(h=!0)):!T&&R?(r.track({type:0,doc:R}),L=!0):T&&!R&&(r.track({type:1,doc:T}),L=!0,(m||g)&&(h=!0)),L&&(R?(c=c.add(R),o=D?o.add(w):o.delete(w)):(c=c.delete(w),o=o.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{tu:c,iu:r,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((w,E)=>function(R,M){const D=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:L})}};return D(R)-D(M)}(w.type,E.type)||this.eu(w.doc,E.doc)),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Sd(this.query,e.tu,o,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Z3(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Q3(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Vt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gv="SyncEngine";class AB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class TB{constructor(e){this.key=e,this.hu=!1}}class CB{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ua(h=>YR(h),lg),this.Iu=new Map,this.Eu=new Set,this.du=new rr(Ke.comparator),this.Au=new Map,this.Ru=new Nv,this.Vu={},this.mu=new Map,this.fu=Zc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SB(n,e,t=!0){const r=iN(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await J3(r,e,t,!0),i}async function RB(n,e){const t=iN(n);await J3(t,e,!0,!1)}async function J3(n,e,t,r){const i=await XF(n.localStore,Xs(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await NB(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&G3(n.remoteStore,i),h}async function NB(n,e,t,r,i){n.pu=(E,T,R)=>async function(D,L,G,z){let W=L.view.ru(G);W.Cs&&(W=await ZI(D.localStore,L.query,!1).then(({documents:F})=>L.view.ru(F,W)));const Y=z&&z.targetChanges.get(L.targetId),Z=z&&z.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(W,D.isPrimaryClient,Y,Z);return lA(D,L.targetId,ie.au),ie.snapshot}(n,E,T,R);const o=await ZI(n.localStore,e,!0),c=new IB(e,o.Qs),h=c.ru(o.documents),m=Jf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),g=c.applyChanges(h,n.isPrimaryClient,m);lA(n,t,g.au);const w=new AB(e,t,c);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function kB(n,e,t){const r=Pt(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(c=>!lg(c,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await $x(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Mv(r.remoteStore,i.targetId),Xx(r,i.targetId)}).catch(cu)):(Xx(r,i.targetId),await $x(r.localStore,i.targetId,!0))}async function PB(n,e){const t=Pt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mv(t.remoteStore,r.targetId))}async function DB(n,e,t){const r=sN(n);try{const i=await function(c,h){const m=Pt(c),g=vn.now(),w=h.reduce((R,M)=>R.add(M.key),Vt());let E,T;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Cs(),D=Vt();return m.Ns.getEntries(R,w).next(L=>{M=L,M.forEach((G,z)=>{z.isValidDocument()||(D=D.add(G))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,M)).next(L=>{E=L;const G=[];for(const z of h){const W=KV(z,E.get(z.key).overlayedDocument);W!=null&&G.push(new za(z.key,W,UR(W.value.mapValue),Ki.exists(!0)))}return m.mutationQueue.addMutationBatch(R,g,G,h)}).next(L=>{T=L;const G=L.applyToLocalDocumentSet(E,D);return m.documentOverlayCache.saveOverlays(R,L.batchId,G)})}).then(()=>({batchId:T.batchId,changes:JR(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,h,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new rr(kt)),g=g.insert(h,m),c.Vu[c.currentUser.toKey()]=g}(r,i.batchId,t),await np(r,i.changes),await tp(r.remoteStore)}catch(i){const o=jv(i,"Failed to persist write");t.reject(o)}}async function eN(n,e){const t=Pt(n);try{const r=await $F(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.Au.get(o);c&&(dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?dt(c.hu,14607):i.removedDocuments.size>0&&(dt(c.hu,42227),c.hu=!1))}),await np(t,r,e)}catch(r){await cu(r)}}function aA(n,e,t){const r=Pt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,c)=>{const h=c.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(c,h){const m=Pt(c);m.onlineState=h;let g=!1;m.queries.forEach((w,E)=>{for(const T of E.Sa)T.va(h)&&(g=!0)}),g&&Wv(m)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function OB(n,e,t){const r=Pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new rr(Ke.comparator);c=c.insert(o,wr.newNoDocument(o,yt.min()));const h=Vt().add(o),m=new hg(yt.min(),new Map,new rr(kt),c,h);await eN(r,m),r.du=r.du.remove(o),r.Au.delete(e),$v(r)}else await $x(r.localStore,e,!1).then(()=>Xx(r,e,t)).catch(cu)}async function MB(n,e){const t=Pt(n),r=e.batch.batchId;try{const i=await GF(t.localStore,e);nN(t,r,null),tN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await np(t,i)}catch(i){await cu(i)}}async function LB(n,e,t){const r=Pt(n);try{const i=await function(c,h){const m=Pt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return m.mutationQueue.lookupMutationBatch(g,h).next(E=>(dt(E!==null,37113),w=E.keys(),m.mutationQueue.removeMutationBatch(g,E))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,w,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w)).next(()=>m.localDocuments.getDocuments(g,w))})}(r.localStore,e);nN(r,e,t),tN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await np(r,i)}catch(i){await cu(i)}}function tN(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function nN(n,e,t){const r=Pt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Xx(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||rN(n,r)})}function rN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Mv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),$v(n))}function lA(n,e,t){for(const r of t)r instanceof Q3?(n.Ru.addReference(r.key,e),VB(n,r)):r instanceof Z3?(Be(Gv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||rN(n,r.key)):rt(19791,{wu:r})}function VB(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Be(Gv,"New document in limbo: "+t),n.Eu.add(r),$v(n))}function $v(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ke(fn.fromString(e)),r=n.fu.next();n.Au.set(r,new TB(t)),n.du=n.du.insert(t,r),G3(n.remoteStore,new ba(Xs(Qf(t.path)),r,"TargetPurposeLimboResolution",qs.ce))}}async function np(n,e,t){const r=Pt(n),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach((h,m)=>{c.push(r.pu(m,e,t).then(g=>{var w;if((g||t)&&r.isPrimaryClient){const E=g?!g.fromCache:(w=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:w.current;r.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){i.push(g);const E=Dv.As(m.targetId,g);o.push(E)}}))}),await Promise.all(c),r.Pu.H_(i),await async function(m,g){const w=Pt(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ge.forEach(g,T=>ge.forEach(T.Es,R=>w.persistence.referenceDelegate.addReference(E,T.targetId,R)).next(()=>ge.forEach(T.ds,R=>w.persistence.referenceDelegate.removeReference(E,T.targetId,R)))))}catch(E){if(!ql(E))throw E;Be(Ov,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const R=w.Ms.get(T),M=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(M);w.Ms=w.Ms.insert(T,D)}}}(r.localStore,o))}async function FB(n,e){const t=Pt(n);if(!t.currentUser.isEqual(e)){Be(Gv,"User change. New user:",e.toKey());const r=await j3(t.localStore,e);t.currentUser=e,function(o,c){o.mu.forEach(h=>{h.forEach(m=>{m.reject(new qe(Ce.CANCELLED,c))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await np(t,r.Ls)}}function BB(n,e){const t=Pt(n),r=t.Au.get(e);if(r&&r.hu)return Vt().add(r.key);{let i=Vt();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const h=t.Tu.get(c);i=i.unionWith(h.view.nu)}return i}}function iN(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OB.bind(null,e),e.Pu.H_=EB.bind(null,e.eventManager),e.Pu.yu=bB.bind(null,e.eventManager),e}function sN(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=MB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LB.bind(null,e),e}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return B3(this.persistence,new F3,e.initialUser,this.serializer)}Cu(e){return new kv(mg.mi,this.serializer)}Du(e){return new z3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class jB extends If{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof bm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new D3(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new kv(r=>bm.mi(r,t),this.serializer)}}class UB extends If{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await sN(this.xu.syncEngine),await tp(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return B3(this.persistence,new F3,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new D3(r,e.asyncQueue,t)}Mu(e,t){const r=new q7(t,this.persistence);return new $7(e.asyncQueue,r)}Cu(e){const t=UF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new Pv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,nB(),H0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new z3}}class Am{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FB.bind(null,this.syncEngine),await wB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _B}()}createDatastore(e){const t=gg(e.databaseInfo.databaseId),r=function(o){return new tB(o)}(e.databaseInfo);return function(o,c,h,m){return new oB(o,c,h,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,c,h){return new lB(r,i,o,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>aA(this.syncEngine,t,0),function(){return tA.v()?new tA:new QF}())}createSyncEngine(e,t){return function(i,o,c,h,m,g,w){const E=new CB(i,o,c,h,m,g);return w&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Pt(i);Be(Jc,"RemoteStore shutting down."),o.Ea.add(5),await ep(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Am.provider={build:()=>new Am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl="FirestoreClient";class zB{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=dv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Be(Bl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Be(Bl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=jv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ny(n,e){n.asyncQueue.verifyOperationInProgress(),Be(Bl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await j3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await WB(n);Be(Bl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>rA(e.remoteStore,i)),n._onlineComponents=e}async function WB(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be(Bl,"Using user provided OfflineComponentProvider");try{await Ny(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;qc("Error using user provided cache. Falling back to memory cache: "+t),await Ny(n,new If)}}else Be(Bl,"Using default OfflineComponentProvider"),await Ny(n,new jB(void 0));return n._offlineComponents}async function oN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be(Bl,"Using user provided OnlineComponentProvider"),await cA(n,n._uninitializedComponentsProvider._online)):(Be(Bl,"Using default OnlineComponentProvider"),await cA(n,new Am))),n._onlineComponents}function HB(n){return oN(n).then(e=>e.syncEngine)}async function Tm(n){const e=await oN(n),t=e.eventManager;return t.onListen=SB.bind(null,e.syncEngine),t.onUnlisten=kB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PB.bind(null,e.syncEngine),t}function GB(n,e,t={}){const r=new zo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,m,g){const w=new qv({next:T=>{w.Nu(),c.enqueueAndForget(()=>zv(o,E));const R=T.docs.has(h);!R&&T.fromCache?g.reject(new qe(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&m&&m.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Hv(Qf(h.path),w,{includeMetadataChanges:!0,qa:!0});return Uv(o,E)}(await Tm(n),n.asyncQueue,e,t,r)),r.promise}function $B(n,e,t={}){const r=new zo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,m,g){const w=new qv({next:T=>{w.Nu(),c.enqueueAndForget(()=>zv(o,E)),T.fromCache&&m.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Hv(h,w,{includeMetadataChanges:!0,qa:!0});return Uv(o,E)}(await Tm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firestore.googleapis.com",dA=!0;class hA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lN,this.ssl=dA}else this.host=e.host,this.ssl=e.ssl??dA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IF)throw new qe(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new P7;switch(r.type){case"firstParty":return new L7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=uA.get(t);r&&(Be("ComponentProvider","Removing Datastore"),uA.delete(t),r.terminate())}(this),Promise.resolve()}}function qB(n,e,t,r={}){var g;n=Rs(n,xg);const i=Gl(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(Qw(`https://${h}`),Zw("Firestore",!0)),o.host!==lN&&o.host!==h&&qc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:i,emulatorOptions:r};if(!zc(m,c)&&(n._setSettings(m),r.mockUserToken)){let w,E;if(typeof r.mockUserToken=="string")w=r.mockUserToken,E=gi.MOCK_USER;else{w=xS(r.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new qe(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new gi(T)}n._authCredentials=new D7(new pR(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xl(this.firestore,e,this._query)}}class Pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}toJSON(){return{type:Pr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Kf(t,Pr._jsonSchema))return new Pr(e,r||null,new Ke(fn.fromString(t.referencePath)))}}Pr._jsonSchemaVersion="firestore/documentReference/1.0",Pr._jsonSchema={type:Fr("string",Pr._jsonSchemaVersion),referencePath:Fr("string")};class Dl extends Xl{constructor(e,t,r){super(e,t,Qf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new Ke(e))}withConverter(e){return new Dl(this.firestore,e,this._path)}}function Ns(n,e,...t){if(n=nr(n),gR("collection","path",e),n instanceof xg){const r=fn.fromString(e,...t);return nI(r),new Dl(n,null,r)}{if(!(n instanceof Pr||n instanceof Dl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return nI(r),new Dl(n.firestore,null,r)}}function Ks(n,e,...t){if(n=nr(n),arguments.length===1&&(e=dv.newId()),gR("doc","path",e),n instanceof xg){const r=fn.fromString(e,...t);return tI(r),new Pr(n,null,new Ke(r))}{if(!(n instanceof Pr||n instanceof Dl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return tI(r),new Pr(n.firestore,n instanceof Dl?n.converter:null,new Ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="AsyncQueue";class pA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W3(this,"async_queue_retry"),this._c=()=>{const r=H0();r&&Be(fA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=H0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=H0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new zo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ql(e))throw e;Be(fA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,qi("INTERNAL UNHANDLED ERROR: ",mA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Bv.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&rt(47125,{Pc:mA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Da extends xg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new pA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pA(e),this._firestoreClient=void 0,await e}}}function KB(n,e){const t=typeof n=="object"?n:tv(),r=typeof n=="string"?n:mm,i=Ym(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=mS("firestore");o&&qB(i,...o)}return i}function wg(n){if(n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cN(n),n._firestoreClient}function cN(n){var r,i,o;const e=n._freezeSettings(),t=function(h,m,g,w){return new EV(h,m,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,aN(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new zB(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(n._componentsProvider))}function XB(n,e){qc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return YB(n,Am.provider,{build:r=>new UB(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function YB(n,e,t){if((n=Rs(n,Da))._firestoreClient||n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new qe(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(Br.fromBase64String(e))}catch(t){throw new qe(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $s(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$s._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kf(e,$s._jsonSchema))return $s.fromBase64String(e.bytes)}}$s._jsonSchemaVersion="firestore/bytes/1.0",$s._jsonSchema={type:Fr("string",$s._jsonSchemaVersion),bytes:Fr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wo._jsonSchemaVersion}}static fromJSON(e){if(Kf(e,Wo._jsonSchema))return new Wo(e.latitude,e.longitude)}}Wo._jsonSchemaVersion="firestore/geoPoint/1.0",Wo._jsonSchema={type:Fr("string",Wo._jsonSchemaVersion),latitude:Fr("number"),longitude:Fr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ho._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kf(e,Ho._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ho(e.vectorValues);throw new qe(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ho._jsonSchemaVersion="firestore/vectorValue/1.0",Ho._jsonSchema={type:Fr("string",Ho._jsonSchemaVersion),vectorValues:Fr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QB=/^__.*__$/;class ZB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new za(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fd(e,this.data,t,this.fieldTransforms)}}class uN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:n})}}class Kv{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Cm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dN(this.Ac)&&QB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class JB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gg(e)}Cc(e,t,r,i=!1){return new Kv({Ac:e,methodName:t,Dc:r,path:lr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xv(n){const e=n._freezeSettings(),t=gg(n._databaseId);return new JB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ej(n,e,t,r,i,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Qv("Data must be an object, but it was:",c,r);const h=hN(r,c);let m,g;if(o.merge)m=new ds(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const w=[];for(const E of o.mergeFields){const T=Yx(e,E,t);if(!c.contains(T))throw new qe(Ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);pN(w,T)||w.push(T)}m=new ds(w),g=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,g=c.fieldTransforms;return new ZB(new Oi(h),m,g)}class Eg extends _g{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eg}}class Yv extends _g{_toFieldTransform(e){return new o3(e.path,new Id)}isEqual(e){return e instanceof Yv}}function tj(n,e,t,r){const i=n.Cc(1,e,t);Qv("Data must be an object, but it was:",i,r);const o=[],c=Oi.empty();Kl(r,(m,g)=>{const w=Zv(e,m,t);g=nr(g);const E=i.yc(w);if(g instanceof Eg)o.push(w);else{const T=rp(g,E);T!=null&&(o.push(w),c.set(w,T))}});const h=new ds(o);return new uN(c,h,i.fieldTransforms)}function nj(n,e,t,r,i,o){const c=n.Cc(1,e,t),h=[Yx(e,r,t)],m=[i];if(o.length%2!=0)throw new qe(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(Yx(e,o[T])),m.push(o[T+1]);const g=[],w=Oi.empty();for(let T=h.length-1;T>=0;--T)if(!pN(g,h[T])){const R=h[T];let M=m[T];M=nr(M);const D=c.yc(R);if(M instanceof Eg)g.push(R);else{const L=rp(M,D);L!=null&&(g.push(R),w.set(R,L))}}const E=new ds(g);return new uN(w,E,c.fieldTransforms)}function rj(n,e,t,r=!1){return rp(t,n.Cc(r?4:3,e))}function rp(n,e){if(fN(n=nr(n)))return Qv("Unsupported field value:",e,n),hN(n,e);if(n instanceof _g)return function(r,i){if(!dN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const h of r){let m=rp(h,i.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=nr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vn.fromDate(r);return{timestampValue:Cd(i.serializer,o)}}if(r instanceof vn){const o=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cd(i.serializer,o)}}if(r instanceof Wo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $s)return{bytesValue:f3(i.serializer,r._byteString)};if(r instanceof Pr){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Cv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ho)return function(c,h){return{mapValue:{fields:{[wv]:{stringValue:vv},[vd]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Ev(h.serializer,g)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${eg(r)}`)}(n,e)}function hN(n,e){const t={};return PR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Kl(n,(r,i)=>{const o=rp(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function fN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof Wo||n instanceof $s||n instanceof Pr||n instanceof _g||n instanceof Ho)}function Qv(n,e,t){if(!fN(t)||!yR(t)){const r=eg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Yx(n,e,t){if((e=nr(e))instanceof vg)return e._internalPath;if(typeof e=="string")return Zv(n,e);throw Cm("Field path arguments must be of type string or ",n,!1,void 0,t)}const ij=new RegExp("[~\\*/\\[\\]]");function Zv(n,e,t){if(e.search(ij)>=0)throw Cm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vg(...e.split("."))._internalPath}catch{throw Cm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cm(n,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new qe(Ce.INVALID_ARGUMENT,h+n+m)}function pN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class sj extends mN{data(){return super.data()}}function bg(n,e){return typeof e=="string"?Zv(n,e):e instanceof vg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new qe(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jv{}class yN extends Jv{}function Vr(n,e,...t){let r=[];e instanceof Jv&&r.push(e),r=r.concat(t),function(o){const c=o.filter(m=>m instanceof e2).length,h=o.filter(m=>m instanceof Ig).length;if(c>1||c>0&&h>0)throw new qe(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ig extends yN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ig(e,t,r)}_apply(e){const t=this._parse(e);return xN(e._query,t),new Xl(e.firestore,e.converter,Vx(e._query,t))}_parse(e){const t=Xv(e.firestore);return function(o,c,h,m,g,w,E){let T;if(g.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){wA(E,w);const M=[];for(const D of E)M.push(xA(m,o,D));T={arrayValue:{values:M}}}else T=xA(m,o,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||wA(E,w),T=rj(h,c,E,w==="in"||w==="not-in");return Yt.create(g,w,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kr(n,e,t){const r=e,i=bg("where",n);return Ig._create(i,r,t)}class e2 extends Jv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new e2(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let c=i;const h=o.getFlattenedFilters();for(const m of h)xN(c,m),c=Vx(c,m)}(e._query,t),new Xl(e.firestore,e.converter,Vx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t2 extends yN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new t2(e,t)}_apply(e){const t=function(i,o,c){if(i.startAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ef(o,c)}(e._query,this._field,this._direction);return new Xl(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new Vd(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function yA(n,e="asc"){const t=e,r=bg("orderBy",n);return t2._create(r,t)}function xA(n,e,t){if(typeof(t=nr(t))=="string"){if(t==="")throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XR(e)&&t.indexOf("/")!==-1)throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ke.isDocumentKey(r))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vf(n,new Ke(r))}if(t instanceof Pr)return vf(n,t._key);throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eg(t)}.`)}function wA(n,e){if(!Array.isArray(n)||n.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xN(n,e){const t=function(i,o){for(const c of i)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class oj{convertValue(e,t="none"){switch(Ll(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Kl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var r,i,o;const t=(o=(i=(r=e.fields)==null?void 0:r[vd].arrayValue)==null?void 0:i.values)==null?void 0:o.map(c=>er(c.doubleValue));return new Ho(t)}convertGeoPoint(e){return new Wo(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=og(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xf(e));default:return null}}convertTimestamp(e){const t=ka(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);dt(b3(r),9688,{name:e});const i=new Kc(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(t)||qi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Fh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends mN{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new G0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vc._jsonSchema={type:Fr("string",Vc._jsonSchemaVersion),bundleSource:Fr("string","DocumentSnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class G0 extends Vc{data(e={}){return super.data(e)}}class Fc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new G0(this._firestore,this._userDataWriter,r.key,r,new Fh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(h=>{const m=new G0(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Fh(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const m=new G0(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Fh(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,w=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),w=c.indexOf(h.doc.key)),{type:lj(h.type),doc:m,oldIndex:g,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n){n=Rs(n,Pr);const e=Rs(n.firestore,Da);return GB(wg(e),n._key).then(t=>wN(e,n,t))}Fc._jsonSchemaVersion="firestore/querySnapshot/1.0",Fc._jsonSchema={type:Fr("string",Fc._jsonSchemaVersion),bundleSource:Fr("string","QuerySnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class r2 extends oj{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,t)}}function Ag(n){n=Rs(n,Xl);const e=Rs(n.firestore,Da),t=wg(e),r=new r2(e);return gN(n._query),$B(t,n._query).then(i=>new Fc(e,r,n,i))}function Sm(n,e,t,...r){n=Rs(n,Pr);const i=Rs(n.firestore,Da),o=Xv(i);let c;return c=typeof(e=nr(e))=="string"||e instanceof vg?nj(o,"updateDoc",n._key,e,t,r):tj(o,"updateDoc",n._key,e),i2(i,[c.toMutation(n._key,Ki.exists(!0))])}function Tg(n){return i2(Rs(n.firestore,Da),[new dg(n._key,Ki.none())])}function jd(n,e){const t=Rs(n.firestore,Da),r=Ks(n),i=aj(n.converter,e);return i2(t,[ej(Xv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ki.exists(!1))]).then(()=>r)}function cj(n,...e){var m,g,w;n=nr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||gA(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(gA(e[r])){const E=e[r];e[r]=(m=E.next)==null?void 0:m.bind(E),e[r+1]=(g=E.error)==null?void 0:g.bind(E),e[r+2]=(w=E.complete)==null?void 0:w.bind(E)}let o,c,h;if(n instanceof Pr)c=Rs(n.firestore,Da),h=Qf(n._key.path),o={next:E=>{e[r]&&e[r](wN(c,n,E))},error:e[r+1],complete:e[r+2]};else{const E=Rs(n,Xl);c=Rs(E.firestore,Da),h=E._query;const T=new r2(c);o={next:R=>{e[r]&&e[r](new Fc(c,T,E,R))},error:e[r+1],complete:e[r+2]},gN(n._query)}return function(T,R,M,D){const L=new qv(D),G=new Hv(R,L,M);return T.asyncQueue.enqueueAndForget(async()=>Uv(await Tm(T),G)),()=>{L.Nu(),T.asyncQueue.enqueueAndForget(async()=>zv(await Tm(T),G))}}(wg(c),h,i,o)}function i2(n,e){return function(r,i){const o=new zo;return r.asyncQueue.enqueueAndForget(async()=>DB(await HB(r),i,o)),o.promise}(wg(n),e)}function wN(n,e,t){const r=t.docs.get(e._key),i=new r2(n);return new Vc(n,i,e._key,r,new Fh(t.hasPendingWrites,t.fromCache),e.converter)}function fo(){return new Yv("serverTimestamp")}(function(e,t=!0){(function(i){Ld=i})(au),Wc(new Ml("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),h=new Da(new O7(r.getProvider("auth-internal")),new V7(c,r.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new qe(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(g.options.projectId,w)}(c,i),c);return o={useFetchStreams:t,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Bo(Qb,Zb,e),Bo(Qb,Zb,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="firebasestorage.googleapis.com",_N="storageBucket",uj=120*1e3,dj=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends na{constructor(e,t,r=0){super(ky(e),`Firebase Storage: ${t} (${ky(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ky(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vr||(vr={}));function ky(n){return"storage/"+n}function s2(){const n="An unknown error occurred, please check the error payload for server response.";return new _r(vr.UNKNOWN,n)}function hj(n){return new _r(vr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function fj(n){return new _r(vr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pj(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _r(vr.UNAUTHENTICATED,n)}function mj(){return new _r(vr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gj(n){return new _r(vr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function yj(){return new _r(vr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xj(){return new _r(vr.CANCELED,"User canceled the upload/download.")}function wj(n){return new _r(vr.INVALID_URL,"Invalid URL '"+n+"'.")}function vj(n){return new _r(vr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _j(){return new _r(vr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_N+"' property when initializing the app?")}function Ej(){return new _r(vr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bj(){return new _r(vr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ij(n){return new _r(vr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qx(n){return new _r(vr.INVALID_ARGUMENT,n)}function EN(){return new _r(vr.APP_DELETED,"The Firebase app was deleted.")}function Aj(n){return new _r(vr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jh(n,e){return new _r(vr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ch(n){throw new _r(vr.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ss.makeFromUrl(e,t)}catch{return new Ss(e,"")}if(r.path==="")return r;throw vj(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+i+c,"i"),m={bucket:1,path:3};function g(Y){Y.path_=decodeURIComponent(Y.path)}const w="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${w}/b/${i}/o${T}`,"i"),M={bucket:1,path:3},D=t===vN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",G=new RegExp(`^https?://${D}/${i}/${L}`,"i"),W=[{regex:h,indices:m,postModify:o},{regex:R,indices:M,postModify:g},{regex:G,indices:{bucket:1,path:2},postModify:g}];for(let Y=0;Y<W.length;Y++){const Z=W[Y],ie=Z.regex.exec(e);if(ie){const F=ie[Z.indices.bucket];let B=ie[Z.indices.path];B||(B=""),r=new Ss(F,B),Z.postModify(r);break}}if(r==null)throw wj(e);return r}}class Tj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(n,e,t){let r=1,i=null,o=null,c=!1,h=0;function m(){return h===2}let g=!1;function w(...L){g||(g=!0,e.apply(null,L))}function E(L){i=setTimeout(()=>{i=null,n(R,m())},L)}function T(){o&&clearTimeout(o)}function R(L,...G){if(g){T();return}if(L){T(),w.call(null,L,...G);return}if(m()||c){T(),w.call(null,L,...G);return}r<64&&(r*=2);let W;h===1?(h=2,W=0):W=(r+Math.random())*1e3,E(W)}let M=!1;function D(L){M||(M=!0,T(),!g&&(i!==null?(L||(h=2),clearTimeout(i),E(0)):L||(h=1)))}return E(0),o=setTimeout(()=>{c=!0,D(!0)},t),D}function Sj(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(n){return n!==void 0}function Nj(n){return typeof n=="object"&&!Array.isArray(n)}function o2(n){return typeof n=="string"||n instanceof String}function vA(n){return a2()&&n instanceof Blob}function a2(){return typeof Blob<"u"}function _A(n,e,t,r){if(r<e)throw Qx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Qx(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function bN(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Bc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Bc||(Bc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,t,r,i,o,c,h,m,g,w,E,T=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=w,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,D)=>{this.resolve_=M,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new h0(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const m=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===Bc.NO_ERROR,m=o.getStatus();if(!h||kj(m,this.additionalRetryCodes_)&&this.retry){const w=o.getErrorCode()===Bc.ABORT;r(!1,new h0(!1,null,w));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new h0(g,o))})},t=(r,i)=>{const o=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());Rj(m)?o(m):o()}catch(m){c(m)}else if(h!==null){const m=s2();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(i.canceled){const m=this.appDelete_?EN():xj();c(m)}else{const m=yj();c(m)}};this.canceled_?t(!1,new h0(!1,null,!0)):this.backoffId_=Cj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class h0{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Dj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Oj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Mj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Lj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Vj(n,e,t,r,i,o,c=!0,h=!1){const m=bN(n.urlParams),g=n.url+m,w=Object.assign({},n.headers);return Mj(w,e),Dj(w,t),Oj(w,o),Lj(w,r),new Pj(g,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Bj(...n){const e=Fj();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(a2())return new Blob(n);throw new _r(vr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(n){if(typeof atob>"u")throw Ij("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Py{constructor(e,t){this.data=e,this.contentType=t||null}}function zj(n,e){switch(n){case Vo.RAW:return new Py(IN(e));case Vo.BASE64:case Vo.BASE64URL:return new Py(AN(n,e));case Vo.DATA_URL:return new Py(Hj(e),Gj(e))}throw s2()}function IN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=n.charCodeAt(++t);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Wj(n){let e;try{e=decodeURIComponent(n)}catch{throw Jh(Vo.DATA_URL,"Malformed data URL.")}return IN(e)}function AN(n,e){switch(n){case Vo.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Jh(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Jh(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Uj(e)}catch(i){throw i.message.includes("polyfill")?i:Jh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class TN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Jh(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=$j(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Hj(n){const e=new TN(n);return e.base64?AN(Vo.BASE64,e.rest):Wj(e.rest)}function Gj(n){return new TN(n).contentType}function $j(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){let r=0,i="";vA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(vA(this.data_)){const r=this.data_,i=jj(r,e,t);return i===null?null:new Cl(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Cl(r,!0)}}static getBlob(...e){if(a2()){const t=e.map(r=>r instanceof Cl?r.data_:r);return new Cl(Bj.apply(null,t))}else{const t=e.map(c=>o2(c)?zj(Vo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[o++]=c[h]}),new Cl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){let e;try{e=JSON.parse(n)}catch{return null}return Nj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Kj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function SN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(n,e){return e}class $i{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Xj}}let f0=null;function Yj(n){return!o2(n)||n.length<2?n:SN(n)}function RN(){if(f0)return f0;const n=[];n.push(new $i("bucket")),n.push(new $i("generation")),n.push(new $i("metageneration")),n.push(new $i("name","fullPath",!0));function e(o,c){return Yj(c)}const t=new $i("name");t.xform=e,n.push(t);function r(o,c){return c!==void 0?Number(c):c}const i=new $i("size");return i.xform=r,n.push(i),n.push(new $i("timeCreated")),n.push(new $i("updated")),n.push(new $i("md5Hash",null,!0)),n.push(new $i("cacheControl",null,!0)),n.push(new $i("contentDisposition",null,!0)),n.push(new $i("contentEncoding",null,!0)),n.push(new $i("contentLanguage",null,!0)),n.push(new $i("contentType",null,!0)),n.push(new $i("metadata","customMetadata",!0)),f0=n,f0}function Qj(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new Ss(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Zj(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return Qj(r,n),r}function NN(n,e,t){const r=CN(e);return r===null?null:Zj(n,r,t)}function Jj(n,e,t,r){const i=CN(e);if(i===null||!o2(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const w=n.bucket,E=n.fullPath,T="/b/"+c(w)+"/o/"+c(E),R=l2(T,t,r),M=bN({alt:"media",token:g});return R+M})[0]}function eU(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class kN{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(n){if(!n)throw s2()}function tU(n,e){function t(r,i){const o=NN(n,i,e);return PN(o!==null),o}return t}function nU(n,e){function t(r,i){const o=NN(n,i,e);return PN(o!==null),Jj(o,i,n.host,n._protocol)}return t}function DN(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=mj():i=pj():t.getStatus()===402?i=fj(n.bucket):t.getStatus()===403?i=gj(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function rU(n){const e=DN(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=hj(n.path)),o.serverResponse=i.serverResponse,o}return t}function iU(n,e,t){const r=e.fullServerUrl(),i=l2(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,h=new kN(i,o,nU(n,t),c);return h.errorHandler=rU(e),h}function sU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function oU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=sU(null,e)),r}function aU(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let W="";for(let Y=0;Y<2;Y++)W=W+Math.random().toString().slice(2);return W}const m=h();c["Content-Type"]="multipart/related; boundary="+m;const g=oU(e,r,i),w=eU(g,t),E="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,T=`\r
--`+m+"--",R=Cl.getBlob(E,r,T);if(R===null)throw Ej();const M={name:g.fullPath},D=l2(o,n.host,n._protocol),L="POST",G=n.maxUploadRetryTime,z=new kN(D,L,tU(n,t),G);return z.urlParams=M,z.headers=c,z.body=R.uploadData(),z.errorHandler=DN(e),z}class lU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Ch("cannot .send() more than once");if(Gl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ch("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ch("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ch("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ch("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class cU extends lU{initXhr(){this.xhr_.responseType="text"}}function ON(){return new cU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this._service=e,t instanceof Ss?this._location=t:this._location=Ss.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new eu(e,t)}get root(){const e=new Ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SN(this._location.path)}get storage(){return this._service}get parent(){const e=qj(this._location.path);if(e===null)return null;const t=new Ss(this._location.bucket,e);return new eu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Aj(e)}}function uU(n,e,t){n._throwIfRoot("uploadBytes");const r=aU(n.storage,n._location,RN(),new Cl(e,!0),t);return n.storage.makeRequestWithTokens(r,ON).then(i=>({metadata:i,ref:n}))}function dU(n){n._throwIfRoot("getDownloadURL");const e=iU(n.storage,n._location,RN());return n.storage.makeRequestWithTokens(e,ON).then(t=>{if(t===null)throw bj();return t})}function hU(n,e){const t=Kj(n._location.path,e),r=new Ss(n._location.bucket,t);return new eu(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n){return/^[A-Za-z]+:\/\//.test(n)}function pU(n,e){return new eu(n,e)}function MN(n,e){if(n instanceof c2){const t=n;if(t._bucket==null)throw _j();const r=new eu(t,t._bucket);return e!=null?MN(r,e):r}else return e!==void 0?hU(n,e):n}function mU(n,e){if(e&&fU(e)){if(n instanceof c2)return pU(n,e);throw Qx("To use ref(service, url), the first argument must be a Storage instance.")}else return MN(n,e)}function EA(n,e){const t=e==null?void 0:e[_N];return t==null?null:Ss.makeFromBucketSpec(t,n)}function gU(n,e,t,r={}){n.host=`${e}:${t}`;const i=Gl(e);i&&(Qw(`https://${n.host}/b`),Zw("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:xS(o,n.app.options.projectId))}class c2{constructor(e,t,r,i,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=vN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uj,this._maxUploadRetryTime=dj,this._requests=new Set,i!=null?this._bucket=Ss.makeFromBucketSpec(i,this._host):this._bucket=EA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ss.makeFromBucketSpec(this._url,e):this._bucket=EA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_A("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_A("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ts(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eu(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Tj(EN());{const c=Vj(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const bA="@firebase/storage",IA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="storage";function yU(n,e,t){return n=nr(n),uU(n,e,t)}function xU(n){return n=nr(n),dU(n)}function wU(n,e){return n=nr(n),mU(n,e)}function vU(n=tv(),e){n=nr(n);const r=Ym(n,LN).getImmediate({identifier:e}),i=mS("storage");return i&&_U(r,...i),r}function _U(n,e,t,r={}){gU(n,e,t,r)}function EU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new c2(t,r,i,e,au)}function bU(){Wc(new Ml(LN,EU,"PUBLIC").setMultipleInstances(!0)),Bo(bA,IA,""),Bo(bA,IA,"esm2020")}bU();const AA={apiKey:"AIzaSyDkVAo_xXbBHy8FYwFtMQA66aju08qK_yE",authDomain:"hooked-69.firebaseapp.com",projectId:"hooked-69",storageBucket:"hooked-69.firebasestorage.app",messagingSenderId:"741889428835",appId:"1:741889428835:web:d5f88b43a503c9e6351756",measurementId:"G-6YHKXLN806"};let Af;try{Af=vx(AA),console.log("✅ Firebase app initialized successfully")}catch(n){console.error("❌ Failed to initialize Firebase app:",n);try{Af=vx(AA,"fallback-app"),console.log("✅ Firebase app initialized with fallback name")}catch(e){throw console.error("❌ Failed to initialize Firebase app with fallback:",e),new Error("Firebase initialization failed completely")}}const xc=N7(Af),qn=KB(Af),IU=vU(Af),AU=async()=>{try{await XB(qn,{synchronizeTabs:!0}),console.log("✅ Firestore offline persistence enabled")}catch(n){n.code==="failed-precondition"?console.warn("⚠️ Multiple tabs open, persistence can only be enabled in one tab at a time"):n.code==="unimplemented"?console.warn("⚠️ Browser doesn't support persistence"):console.error("❌ Error enabling Firestore persistence:",n)}};AU();const $0={activeListeners:new Map,registerListener(n,e){this.activeListeners.set(n,e),console.log(`📡 Registered listener: ${n} (total: ${this.activeListeners.size})`)},unregisterListener(n){const e=this.activeListeners.get(n);e&&(e(),this.activeListeners.delete(n),console.log(`🧹 Cleaned up listener: ${n} (remaining: ${this.activeListeners.size})`))},cleanupAllListeners(){console.log(`🧹 Cleaning up ${this.activeListeners.size} active listeners...`),this.activeListeners.forEach((n,e)=>{n(),console.log(`🧹 Cleaned up listener: ${e}`)}),this.activeListeners.clear(),console.log("✅ All listeners cleaned up")},getListenerCount(){return this.activeListeners.size}};typeof window<"u"&&(window.addEventListener("beforeunload",()=>{$0.cleanupAllListeners()}),document.addEventListener("visibilitychange",()=>{document.hidden&&console.log("📱 Tab hidden, listeners remain active for background updates")}));class TU{constructor(){this.isOnline=navigator.onLine,this.retryQueue=[],this.maxRetries=3,this.baseDelay=1e3,this.offlineActions=new Map,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.checkConnectivity()}async checkConnectivity(){try{const e=await fetch("/favicon.png",{method:"HEAD",cache:"no-cache",timeout:5e3});this.isOnline=e.ok}catch{this.isOnline=!1}return this.isOnline=this.isOnline&&navigator.onLine,this.isOnline}async handleOnline(){console.log("🌐 Device is back online"),this.isOnline=!0,await this.processOfflineQueue(),window.dispatchEvent(new CustomEvent("appOnline"))}handleOffline(){console.log("📴 Device is offline"),this.isOnline=!1,window.dispatchEvent(new CustomEvent("appOffline"))}async retryOperation(e,t={}){const{maxRetries:r=this.maxRetries,baseDelay:i=this.baseDelay,operationName:o="Unknown operation",shouldRetry:c=this.shouldRetryError,onRetry:h=null}=t;let m;for(let g=1;g<=r;g++)try{if(!await this.checkConnectivity())throw new Error("No internet connection");return await e()}catch(w){if(m=w,this.logError(w,{operation:o,attempt:g,maxRetries:r,isOnline:this.isOnline}),!c(w,g))throw w;if(g<r){const E=this.calculateDelay(g,i);console.log(`⏳ Retrying ${o} in ${Math.round(E)}ms (attempt ${g}/${r})`),h&&h(w,g,E),await this.sleep(E)}}throw m}shouldRetryError(e,t){return e.code==="permission-denied"||e.code==="not-found"||e.code==="invalid-argument"||e.code==="auth/user-not-found"||e.code==="auth/wrong-password"||e.code==="auth/invalid-email"?!1:e.code==="unavailable"||e.code==="deadline-exceeded"||e.message.includes("network")||e.message.includes("timeout")||e.message.includes("No internet connection")||e.code>=500}calculateDelay(e,t){const r=t*Math.pow(2,e-1),i=Math.random()*1e3;return Math.min(r+i,1e4)}queueOfflineAction(e,t={}){const r={id:Date.now()+Math.random(),action:e,metadata:t,timestamp:new Date().toISOString()};return this.retryQueue.push(r),this.saveOfflineQueue(),console.log(`📝 Queued offline action: ${t.operation||"Unknown"}`),r.id}async processOfflineQueue(){if(this.retryQueue.length===0)return;console.log(`🔄 Processing ${this.retryQueue.length} queued actions`);const e=[...this.retryQueue];this.retryQueue=[];for(const t of e)try{await this.retryOperation(()=>t.action(),{operationName:`Offline action: ${t.metadata.operation||"Unknown"}`,maxRetries:2,baseDelay:2e3}),console.log(`✅ Successfully processed offline action: ${t.metadata.operation||"Unknown"}`)}catch(r){console.error("❌ Failed to process offline action:",r),this.shouldRetryError(r,1)&&this.retryQueue.push(t)}this.saveOfflineQueue()}saveOfflineQueue(){try{localStorage.setItem("hooked_offline_queue",JSON.stringify(this.retryQueue))}catch(e){console.error("Failed to save offline queue:",e)}}loadOfflineQueue(){try{const e=localStorage.getItem("hooked_offline_queue");e&&(this.retryQueue=JSON.parse(e),console.log(`📋 Loaded ${this.retryQueue.length} offline actions`))}catch(e){console.error("Failed to load offline queue:",e),this.retryQueue=[]}}getErrorMessage(e){if(!e)return"An unknown error occurred";if(e.message.includes("No internet connection")||e.code==="unavailable"||!navigator.onLine)return"No internet connection. Please check your network and try again.";switch(e.code){case"permission-denied":return"You don't have permission to perform this action.";case"not-found":return"The requested resource was not found.";case"already-exists":return"This resource already exists.";case"deadline-exceeded":return"The operation timed out. Please try again.";case"auth/user-not-found":return"User account not found.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-email":return"Invalid email address.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";default:return e.message||"An unexpected error occurred. Please try again."}}logError(e,t={}){const r={message:e.message,code:e.code,stack:e.stack,timestamp:new Date().toISOString(),isOnline:this.isOnline,userAgent:navigator.userAgent,url:window.location.href,...t};console.error("🚨 Error occurred:",r)}reportError(e){}sleep(e){return new Promise(t=>setTimeout(t,e))}getOnlineStatus(){return this.isOnline}getOfflineQueueLength(){return this.retryQueue.length}clearOfflineQueue(){this.retryQueue=[],this.saveOfflineQueue()}}const Ol=new TU;Ol.loadOfflineQueue();const VN=(n,e={})=>Ol.retryOperation(n,e),CU=(n,e)=>Ol.queueOfflineAction(n,e),TA=n=>Ol.getErrorMessage(n),p0=()=>Ol.getOfflineQueueLength();async function Ln(n,e=3,t=1e3,r="Firebase operation"){return VN(n,{maxRetries:e,baseDelay:t,operationName:r})}const Dy={async compressImage(n,e=800,t=.8){return new Promise(r=>{const i=document.createElement("canvas"),o=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:h,height:m}=c;h>e&&(m=m*e/h,h=e),i.width=h,i.height=m,o.drawImage(c,0,0,h,m),i.toBlob(r,"image/jpeg",t)},c.src=URL.createObjectURL(n)})},generateOptimizedFilename(n){const e=Date.now(),t=n.split(".").pop()||"jpg";return`optimized_${e}.${t}`},validateFile(n,e=5){const t=["image/jpeg","image/jpg","image/png","image/webp"],r=e*1024*1024;if(!t.includes(n.type))throw new Error("Invalid file type. Please upload a JPEG, PNG, or WebP image.");if(n.size>r)throw new Error(`File too large. Maximum size is ${e}MB.`);return!0}};class SU{constructor(){this.listeners=new Map,this.listenerCounts=new Map}createListener(e,t,r,i={}){this.cleanupListener(e);const o=cj(t,h=>{const m=h.docs.map(g=>({id:g.id,...g.data()}));r(m)},h=>{console.error(`❌ Listener error for ${e}:`,h),i.onError&&i.onError(h)});$0.registerListener(e,o),this.listeners.set(e,o);const c=this.listenerCounts.get(e)||0;return this.listenerCounts.set(e,c+1),console.log(`📡 Created listener: ${e} (count: ${c+1})`),o}cleanupListener(e){const t=this.listeners.get(e);t&&(t(),this.listeners.delete(e),$0.unregisterListener(e),console.log(`🧹 Cleaned up listener: ${e}`))}cleanupAll(){this.listeners.forEach((e,t)=>{e(),$0.unregisterListener(t)}),this.listeners.clear(),this.listenerCounts.clear(),console.log("🧹 All listeners cleaned up")}getStats(){return{activeListeners:this.listeners.size,listenerCounts:Object.fromEntries(this.listenerCounts)}}}const u2=new SU,Tf={async create(n){return await Ln(async()=>({id:(await jd(Ns(qn,"events"),{...n,created_at:fo(),updated_at:fo()})).id,...n}),3,1e3,"Event.create")},async filter(n={}){return await Ln(async()=>{let e=Ns(qn,"events");return n.id&&(e=Vr(e,kr("id","==",n.id))),n.event_code&&(e=Vr(e,kr("event_code","==",n.event_code))),n.starts_at&&(e=Vr(e,kr("starts_at",">=",n.starts_at))),n.expires_at&&(e=Vr(e,kr("expires_at","<=",n.expires_at))),(await Ag(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Event.filter")},async get(n){return await Ln(async()=>{const e=Ks(qn,"events",n),t=await n2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Event.get")},async update(n,e){return await Ln(async()=>{const t=Ks(qn,"events",n);await Sm(t,{...e,updated_at:fo()})},3,1e3,"Event.update")},async delete(n){return await Ln(async()=>{const e=Ks(qn,"events",n);await Tg(e)},3,1e3,"Event.delete")},async list(){return await this.filter()}},Ca={async create(n){return await Ln(async()=>({id:(await jd(Ns(qn,"event_profiles"),{...n,created_at:fo(),updated_at:fo()})).id,...n}),3,1e3,"EventProfile.create")},async filter(n={}){return await Ln(async()=>{let e=Ns(qn,"event_profiles");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.session_id&&(e=Vr(e,kr("session_id","==",n.session_id))),n.email&&(e=Vr(e,kr("email","==",n.email))),n.is_visible!==void 0&&(e=Vr(e,kr("is_visible","==",n.is_visible))),(await Ag(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"EventProfile.filter")},async get(n){return await Ln(async()=>{const e=Ks(qn,"event_profiles",n),t=await n2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"EventProfile.get")},async update(n,e){return await Ln(async()=>{const t=Ks(qn,"event_profiles",n);await Sm(t,{...e,updated_at:fo()})},3,1e3,"EventProfile.update")},async delete(n){return await Ln(async()=>{const e=Ks(qn,"event_profiles",n);await Tg(e)},3,1e3,"EventProfile.delete")},async toggleVisibility(n,e){return await Ln(async()=>{const t=Ks(qn,"event_profiles",n);await Sm(t,{is_visible:e,updated_at:fo()})},3,1e3,"EventProfile.toggleVisibility")},async list(){return await this.filter()},onProfilesChange(n,e,t={}){let r=Vr(Ns(qn,"event_profiles"),kr("event_id","==",n));t.is_visible!==void 0&&(r=Vr(r,kr("is_visible","==",t.is_visible)));const i=`profiles_${n}_${JSON.stringify(t)}`;return u2.createListener(i,r,e)}},us={async create(n){return await Ln(async()=>({id:(await jd(Ns(qn,"likes"),{...n,created_at:fo()})).id,...n}),3,1e3,"Like.create")},async filter(n={}){return await Ln(async()=>{let e=Ns(qn,"likes");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.from_profile_id&&(e=Vr(e,kr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Vr(e,kr("to_profile_id","==",n.to_profile_id))),n.is_mutual!==void 0&&(e=Vr(e,kr("is_mutual","==",n.is_mutual))),(await Ag(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Like.filter")},async get(n){return await Ln(async()=>{const e=Ks(qn,"likes",n),t=await n2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Like.get")},async update(n,e){return await Ln(async()=>{const t=Ks(qn,"likes",n);await Sm(t,e)},3,1e3,"Like.update")},async delete(n){return await Ln(async()=>{const e=Ks(qn,"likes",n);await Tg(e)},3,1e3,"Like.delete")},async list(){return await this.filter()},onLikesChange(n,e,t){const r=Vr(Ns(qn,"likes"),kr("event_id","==",n),kr("liker_session_id","==",e)),i=`likes_${n}_${e}`;return u2.createListener(i,r,t)}},kc={async create(n){return await Ln(async()=>({id:(await jd(Ns(qn,"messages"),{...n,created_at:fo()})).id,...n}),3,1e3,"Message.create")},async filter(n={}){return await Ln(async()=>{let e=Ns(qn,"messages");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.from_profile_id&&(e=Vr(e,kr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Vr(e,kr("to_profile_id","==",n.to_profile_id))),e=Vr(e,yA("created_at","desc")),(await Ag(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Message.filter")},async delete(n){return await Ln(async()=>{const e=Ks(qn,"messages",n);await Tg(e)},3,1e3,"Message.delete")},async list(){return await this.filter()},onMessagesChange(n,e,t){const r=Vr(Ns(qn,"messages"),kr("event_id","==",n),kr("from_profile_id","==",e),yA("created_at","asc")),i=`messages_${n}_${e}`;return u2.createListener(i,r,t)}},Oy={async create(n){return await Ln(async()=>({id:(await jd(Ns(qn,"contact_shares"),{...n,created_at:fo()})).id,...n}),3,1e3,"ContactShare.create")},async list(){return await this.filter()}},RU={async create(n){return await Ln(async()=>({id:(await jd(Ns(qn,"event_feedback"),{...n,created_at:fo()})).id,...n}),3,1e3,"EventFeedback.create")},async list(){return await this.filter()}},My={async signUp(n,e){return await Ln(async()=>(await hL(xc,n,e)).user,3,1e3,"User.signUp")},async signIn(n,e){return await Ln(async()=>(await fL(xc,n,e)).user,3,1e3,"User.signIn")},async signOut(){return await Ln(async()=>{await wL(xc)},3,1e3,"User.signOut")},async updateProfile(n){return await Ln(async()=>{const e=xc.currentUser;if(!e)throw new Error("No user signed in");await mL(e,n)},3,1e3,"User.updateProfile")},getCurrentUser(){return xc.currentUser},async me(){return xc.currentUser},onAuthStateChanged(n){return xL(xc,n)}},NU=async(n,e={})=>await Ln(async()=>{Dy.validateFile(n,e.maxSizeMB||5);let t=n;if(n.type.startsWith("image/"))try{const h=await Dy.compressImage(n,e.maxWidth||800,e.quality||.8);t=new File([h],n.name,{type:"image/jpeg"}),console.log("✅ Image compressed successfully")}catch(h){console.warn("⚠️ Image compression failed, uploading original:",h)}const r=Dy.generateOptimizedFilename(n.name),i=wU(IU,`uploads/${Date.now()}_${r}`),o=await yU(i,t),c=await xU(o.ref);return console.log("✅ File uploaded successfully:",{originalSize:n.size,uploadedSize:t.size,compressionRatio:((n.size-t.size)/n.size*100).toFixed(1)+"%"}),{file_url:c}},3,1e3,"uploadFile");function CA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function FN(...n){return e=>{let t=!1;const r=n.map(i=>{const o=CA(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():CA(n[i],null)}}}}function bn(...n){return P.useCallback(FN(...n),n)}function Rd(n){const e=PU(n),t=P.forwardRef((r,i)=>{const{children:o,...c}=r,h=P.Children.toArray(o),m=h.find(OU);if(m){const g=m.props.children,w=h.map(E=>E===m?P.Children.count(g)>1?P.Children.only(null):P.isValidElement(g)?g.props.children:null:E);return A.jsx(e,{...c,ref:i,children:P.isValidElement(g)?P.cloneElement(g,void 0,w):null})}return A.jsx(e,{...c,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var kU=Rd("Slot");function PU(n){const e=P.forwardRef((t,r)=>{const{children:i,...o}=t;if(P.isValidElement(i)){const c=LU(i),h=MU(o,i.props);return i.type!==P.Fragment&&(h.ref=r?FN(r,c):c),P.cloneElement(i,h)}return P.Children.count(i)>1?P.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var DU=Symbol("radix.slottable");function OU(n){return P.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===DU}function MU(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...h)=>{const m=o(...h);return i(...h),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function LU(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function BN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=BN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function jN(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=BN(n))&&(r&&(r+=" "),r+=e);return r}const SA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,RA=jN,Cg=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return RA(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:o}=e,c=Object.keys(i).map(g=>{const w=t==null?void 0:t[g],E=o==null?void 0:o[g];if(w===null)return null;const T=SA(w)||SA(E);return i[g][T]}),h=t&&Object.entries(t).reduce((g,w)=>{let[E,T]=w;return T===void 0||(g[E]=T),g},{}),m=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((g,w)=>{let{class:E,className:T,...R}=w;return Object.entries(R).every(M=>{let[D,L]=M;return Array.isArray(L)?L.includes({...o,...h}[D]):{...o,...h}[D]===L})?[...g,E,T]:g},[]);return RA(n,c,m,t==null?void 0:t.class,t==null?void 0:t.className)},d2="-",VU=n=>{const e=BU(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const h=c.split(d2);return h[0]===""&&h.length!==1&&h.shift(),UN(h,e)||FU(c)},getConflictingClassGroupIds:(c,h)=>{const m=t[c]||[];return h&&r[c]?[...m,...r[c]]:m}}},UN=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?UN(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(d2);return(c=e.validators.find(({validator:h})=>h(o)))==null?void 0:c.classGroupId},NA=/^\[(.+)\]$/,FU=n=>{if(NA.test(n)){const e=NA.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},BU=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)Zx(t[i],r,i,e);return r},Zx=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:kA(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(jU(i)){Zx(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,c])=>{Zx(c,kA(e,o),t,r)})})},kA=(n,e)=>{let t=n;return e.split(d2).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},jU=n=>n.isThemeGetter,UU=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){t.has(o)?t.set(o,c):i(o,c)}}},Jx="!",ew=":",zU=ew.length,WU=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let c=0,h=0,m=0,g;for(let M=0;M<i.length;M++){let D=i[M];if(c===0&&h===0){if(D===ew){o.push(i.slice(m,M)),m=M+zU;continue}if(D==="/"){g=M;continue}}D==="["?c++:D==="]"?c--:D==="("?h++:D===")"&&h--}const w=o.length===0?i:i.substring(m),E=HU(w),T=E!==w,R=g&&g>m?g-m:void 0;return{modifiers:o,hasImportantModifier:T,baseClassName:E,maybePostfixModifierPosition:R}};if(e){const i=e+ew,o=r;r=c=>c.startsWith(i)?o(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},HU=n=>n.endsWith(Jx)?n.substring(0,n.length-1):n.startsWith(Jx)?n.substring(1):n,GU=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(c=>{c[0]==="["||e[c]?(i.push(...o.sort(),c),o=[]):o.push(c)}),i.push(...o.sort()),i}},$U=n=>({cache:UU(n.cacheSize),parseClassName:WU(n),sortModifiers:GU(n),...VU(n)}),qU=/\s+/,KU=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,c=[],h=n.trim().split(qU);let m="";for(let g=h.length-1;g>=0;g-=1){const w=h[g],{isExternal:E,modifiers:T,hasImportantModifier:R,baseClassName:M,maybePostfixModifierPosition:D}=t(w);if(E){m=w+(m.length>0?" "+m:m);continue}let L=!!D,G=r(L?M.substring(0,D):M);if(!G){if(!L){m=w+(m.length>0?" "+m:m);continue}if(G=r(M),!G){m=w+(m.length>0?" "+m:m);continue}L=!1}const z=o(T).join(":"),W=R?z+Jx:z,Y=W+G;if(c.includes(Y))continue;c.push(Y);const Z=i(G,L);for(let ie=0;ie<Z.length;++ie){const F=Z[ie];c.push(W+F)}m=w+(m.length>0?" "+m:m)}return m};function XU(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=zN(e))&&(r&&(r+=" "),r+=t);return r}const zN=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=zN(n[r]))&&(t&&(t+=" "),t+=e);return t};function YU(n,...e){let t,r,i,o=c;function c(m){const g=e.reduce((w,E)=>E(w),n());return t=$U(g),r=t.cache.get,i=t.cache.set,o=h,h(m)}function h(m){const g=r(m);if(g)return g;const w=KU(m,t);return i(m,w),w}return function(){return o(XU.apply(null,arguments))}}const qr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},WN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,HN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,QU=/^\d+\/\d+$/,ZU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ez=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zu=n=>QU.test(n),Lt=n=>!!n&&!Number.isNaN(Number(n)),yl=n=>!!n&&Number.isInteger(Number(n)),Ly=n=>n.endsWith("%")&&Lt(n.slice(0,-1)),wa=n=>ZU.test(n),rz=()=>!0,iz=n=>JU.test(n)&&!ez.test(n),GN=()=>!1,sz=n=>tz.test(n),oz=n=>nz.test(n),az=n=>!tt(n)&&!nt(n),lz=n=>Ud(n,KN,GN),tt=n=>WN.test(n),wc=n=>Ud(n,XN,iz),Vy=n=>Ud(n,fz,Lt),PA=n=>Ud(n,$N,GN),cz=n=>Ud(n,qN,oz),m0=n=>Ud(n,YN,sz),nt=n=>HN.test(n),Sh=n=>zd(n,XN),uz=n=>zd(n,pz),DA=n=>zd(n,$N),dz=n=>zd(n,KN),hz=n=>zd(n,qN),g0=n=>zd(n,YN,!0),Ud=(n,e,t)=>{const r=WN.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},zd=(n,e,t=!1)=>{const r=HN.exec(n);return r?r[1]?e(r[1]):t:!1},$N=n=>n==="position"||n==="percentage",qN=n=>n==="image"||n==="url",KN=n=>n==="length"||n==="size"||n==="bg-size",XN=n=>n==="length",fz=n=>n==="number",pz=n=>n==="family-name",YN=n=>n==="shadow",mz=()=>{const n=qr("color"),e=qr("font"),t=qr("text"),r=qr("font-weight"),i=qr("tracking"),o=qr("leading"),c=qr("breakpoint"),h=qr("container"),m=qr("spacing"),g=qr("radius"),w=qr("shadow"),E=qr("inset-shadow"),T=qr("text-shadow"),R=qr("drop-shadow"),M=qr("blur"),D=qr("perspective"),L=qr("aspect"),G=qr("ease"),z=qr("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Z=()=>[...Y(),nt,tt],ie=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],B=()=>[nt,tt,m],H=()=>[zu,"full","auto",...B()],ee=()=>[yl,"none","subgrid",nt,tt],ne=()=>["auto",{span:["full",yl,nt,tt]},yl,nt,tt],te=()=>[yl,"auto",nt,tt],K=()=>["auto","min","max","fr",nt,tt],we=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],Ae=()=>["auto",...B()],xe=()=>[zu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],oe=()=>[n,nt,tt],Te=()=>[...Y(),DA,PA,{position:[nt,tt]}],Ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ae=()=>["auto","cover","contain",dz,lz,{size:[nt,tt]}],he=()=>[Ly,Sh,wc],Se=()=>["","none","full",g,nt,tt],Le=()=>["",Lt,Sh,wc],it=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Lt,Ly,DA,PA],Ge=()=>["","none",M,nt,tt],at=()=>["none",Lt,nt,tt],st=()=>["none",Lt,nt,tt],ct=()=>[Lt,nt,tt],bt=()=>[zu,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wa],breakpoint:[wa],color:[rz],container:[wa],"drop-shadow":[wa],ease:["in","out","in-out"],font:[az],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wa],shadow:[wa],spacing:["px",Lt],text:[wa],"text-shadow":[wa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zu,tt,nt,L]}],container:["container"],columns:[{columns:[Lt,tt,nt,h]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Z()}],overflow:[{overflow:ie()}],"overflow-x":[{"overflow-x":ie()}],"overflow-y":[{"overflow-y":ie()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[yl,"auto",nt,tt]}],basis:[{basis:[zu,"full","auto",h,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Lt,zu,"auto","initial","none",tt]}],grow:[{grow:["",Lt,nt,tt]}],shrink:[{shrink:["",Lt,nt,tt]}],order:[{order:[yl,"first","last","none",nt,tt]}],"grid-cols":[{"grid-cols":ee()}],"col-start-end":[{col:ne()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":ee()}],"row-start-end":[{row:ne()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...we(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...we()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":we()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:Ae()}],mx:[{mx:Ae()}],my:[{my:Ae()}],ms:[{ms:Ae()}],me:[{me:Ae()}],mt:[{mt:Ae()}],mr:[{mr:Ae()}],mb:[{mb:Ae()}],ml:[{ml:Ae()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:xe()}],w:[{w:[h,"screen",...xe()]}],"min-w":[{"min-w":[h,"screen","none",...xe()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...xe()]}],h:[{h:["screen","lh",...xe()]}],"min-h":[{"min-h":["screen","lh","none",...xe()]}],"max-h":[{"max-h":["screen","lh",...xe()]}],"font-size":[{text:["base",t,Sh,wc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,nt,Vy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ly,tt]}],"font-family":[{font:[uz,tt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,nt,tt]}],"line-clamp":[{"line-clamp":[Lt,"none",nt,Vy]}],leading:[{leading:[o,...B()]}],"list-image":[{"list-image":["none",nt,tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nt,tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:oe()}],"text-color":[{text:oe()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...it(),"wavy"]}],"text-decoration-thickness":[{decoration:[Lt,"from-font","auto",nt,wc]}],"text-decoration-color":[{decoration:oe()}],"underline-offset":[{"underline-offset":[Lt,"auto",nt,tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt,tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt,tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Te()}],"bg-repeat":[{bg:Ne()}],"bg-size":[{bg:ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yl,nt,tt],radial:["",nt,tt],conic:[yl,nt,tt]},hz,cz]}],"bg-color":[{bg:oe()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:oe()}],"gradient-via":[{via:oe()}],"gradient-to":[{to:oe()}],rounded:[{rounded:Se()}],"rounded-s":[{"rounded-s":Se()}],"rounded-e":[{"rounded-e":Se()}],"rounded-t":[{"rounded-t":Se()}],"rounded-r":[{"rounded-r":Se()}],"rounded-b":[{"rounded-b":Se()}],"rounded-l":[{"rounded-l":Se()}],"rounded-ss":[{"rounded-ss":Se()}],"rounded-se":[{"rounded-se":Se()}],"rounded-ee":[{"rounded-ee":Se()}],"rounded-es":[{"rounded-es":Se()}],"rounded-tl":[{"rounded-tl":Se()}],"rounded-tr":[{"rounded-tr":Se()}],"rounded-br":[{"rounded-br":Se()}],"rounded-bl":[{"rounded-bl":Se()}],"border-w":[{border:Le()}],"border-w-x":[{"border-x":Le()}],"border-w-y":[{"border-y":Le()}],"border-w-s":[{"border-s":Le()}],"border-w-e":[{"border-e":Le()}],"border-w-t":[{"border-t":Le()}],"border-w-r":[{"border-r":Le()}],"border-w-b":[{"border-b":Le()}],"border-w-l":[{"border-l":Le()}],"divide-x":[{"divide-x":Le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...it(),"hidden","none"]}],"divide-style":[{divide:[...it(),"hidden","none"]}],"border-color":[{border:oe()}],"border-color-x":[{"border-x":oe()}],"border-color-y":[{"border-y":oe()}],"border-color-s":[{"border-s":oe()}],"border-color-e":[{"border-e":oe()}],"border-color-t":[{"border-t":oe()}],"border-color-r":[{"border-r":oe()}],"border-color-b":[{"border-b":oe()}],"border-color-l":[{"border-l":oe()}],"divide-color":[{divide:oe()}],"outline-style":[{outline:[...it(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Lt,nt,tt]}],"outline-w":[{outline:["",Lt,Sh,wc]}],"outline-color":[{outline:oe()}],shadow:[{shadow:["","none",w,g0,m0]}],"shadow-color":[{shadow:oe()}],"inset-shadow":[{"inset-shadow":["none",E,g0,m0]}],"inset-shadow-color":[{"inset-shadow":oe()}],"ring-w":[{ring:Le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:oe()}],"ring-offset-w":[{"ring-offset":[Lt,wc]}],"ring-offset-color":[{"ring-offset":oe()}],"inset-ring-w":[{"inset-ring":Le()}],"inset-ring-color":[{"inset-ring":oe()}],"text-shadow":[{"text-shadow":["none",T,g0,m0]}],"text-shadow-color":[{"text-shadow":oe()}],opacity:[{opacity:[Lt,nt,tt]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":oe()}],"mask-image-linear-to-color":[{"mask-linear-to":oe()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":oe()}],"mask-image-t-to-color":[{"mask-t-to":oe()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":oe()}],"mask-image-r-to-color":[{"mask-r-to":oe()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":oe()}],"mask-image-b-to-color":[{"mask-b-to":oe()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":oe()}],"mask-image-l-to-color":[{"mask-l-to":oe()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":oe()}],"mask-image-x-to-color":[{"mask-x-to":oe()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":oe()}],"mask-image-y-to-color":[{"mask-y-to":oe()}],"mask-image-radial":[{"mask-radial":[nt,tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":oe()}],"mask-image-radial-to-color":[{"mask-radial-to":oe()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Y()}],"mask-image-conic-pos":[{"mask-conic":[Lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":oe()}],"mask-image-conic-to-color":[{"mask-conic-to":oe()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Te()}],"mask-repeat":[{mask:Ne()}],"mask-size":[{mask:ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nt,tt]}],filter:[{filter:["","none",nt,tt]}],blur:[{blur:Ge()}],brightness:[{brightness:[Lt,nt,tt]}],contrast:[{contrast:[Lt,nt,tt]}],"drop-shadow":[{"drop-shadow":["","none",R,g0,m0]}],"drop-shadow-color":[{"drop-shadow":oe()}],grayscale:[{grayscale:["",Lt,nt,tt]}],"hue-rotate":[{"hue-rotate":[Lt,nt,tt]}],invert:[{invert:["",Lt,nt,tt]}],saturate:[{saturate:[Lt,nt,tt]}],sepia:[{sepia:["",Lt,nt,tt]}],"backdrop-filter":[{"backdrop-filter":["","none",nt,tt]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[Lt,nt,tt]}],"backdrop-contrast":[{"backdrop-contrast":[Lt,nt,tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Lt,nt,tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Lt,nt,tt]}],"backdrop-invert":[{"backdrop-invert":["",Lt,nt,tt]}],"backdrop-opacity":[{"backdrop-opacity":[Lt,nt,tt]}],"backdrop-saturate":[{"backdrop-saturate":[Lt,nt,tt]}],"backdrop-sepia":[{"backdrop-sepia":["",Lt,nt,tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nt,tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Lt,"initial",nt,tt]}],ease:[{ease:["linear","initial",G,nt,tt]}],delay:[{delay:[Lt,nt,tt]}],animate:[{animate:["none",z,nt,tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,nt,tt]}],"perspective-origin":[{"perspective-origin":Z()}],rotate:[{rotate:at()}],"rotate-x":[{"rotate-x":at()}],"rotate-y":[{"rotate-y":at()}],"rotate-z":[{"rotate-z":at()}],scale:[{scale:st()}],"scale-x":[{"scale-x":st()}],"scale-y":[{"scale-y":st()}],"scale-z":[{"scale-z":st()}],"scale-3d":["scale-3d"],skew:[{skew:ct()}],"skew-x":[{"skew-x":ct()}],"skew-y":[{"skew-y":ct()}],transform:[{transform:[nt,tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:Z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:bt()}],"translate-x":[{"translate-x":bt()}],"translate-y":[{"translate-y":bt()}],"translate-z":[{"translate-z":bt()}],"translate-none":["translate-none"],accent:[{accent:oe()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:oe()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt,tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt,tt]}],fill:[{fill:["none",...oe()]}],"stroke-w":[{stroke:[Lt,Sh,wc,Vy]}],stroke:[{stroke:["none",...oe()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},gz=YU(mz);function ln(...n){return gz(jN(n))}const yz=Cg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ut=P.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const c=r?kU:"button";return A.jsx(c,{className:ln(yz({variant:e,size:t,className:n})),ref:o,...i})});Ut.displayName="Button";const h2=P.createContext({});function f2(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const p2=typeof window<"u",QN=p2?P.useLayoutEffect:P.useEffect,Sg=P.createContext(null);function m2(n,e){n.indexOf(e)===-1&&n.push(e)}function g2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Oa=(n,e,t)=>t>e?e:t<n?n:t;let y2=()=>{};const Ma={},ZN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function JN(n){return typeof n=="object"&&n!==null}const ek=n=>/^0[^.\s]+$/u.test(n);function x2(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ys=n=>n,xz=(n,e)=>t=>e(n(t)),ip=(...n)=>n.reduce(xz),Cf=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class w2{constructor(){this.subscriptions=[]}add(e){return m2(this.subscriptions,e),()=>g2(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Go=n=>n*1e3,$o=n=>n/1e3;function tk(n,e){return e?n*(1e3/e):0}const nk=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,wz=1e-7,vz=12;function _z(n,e,t,r,i){let o,c,h=0;do c=e+(t-e)/2,o=nk(c,r,i)-n,o>0?t=c:e=c;while(Math.abs(o)>wz&&++h<vz);return c}function sp(n,e,t,r){if(n===e&&t===r)return Ys;const i=o=>_z(o,0,1,n,t);return o=>o===0||o===1?o:nk(i(o),e,r)}const rk=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,ik=n=>e=>1-n(1-e),sk=sp(.33,1.53,.69,.99),v2=ik(sk),ok=rk(v2),ak=n=>(n*=2)<1?.5*v2(n):.5*(2-Math.pow(2,-10*(n-1))),_2=n=>1-Math.sin(Math.acos(n)),lk=ik(_2),ck=rk(_2),Ez=sp(.42,0,1,1),bz=sp(0,0,.58,1),uk=sp(.42,0,.58,1),Iz=n=>Array.isArray(n)&&typeof n[0]!="number",dk=n=>Array.isArray(n)&&typeof n[0]=="number",Az={linear:Ys,easeIn:Ez,easeInOut:uk,easeOut:bz,circIn:_2,circInOut:ck,circOut:lk,backIn:v2,backInOut:ok,backOut:sk,anticipate:ak},Tz=n=>typeof n=="string",OA=n=>{if(dk(n)){y2(n.length===4);const[e,t,r,i]=n;return sp(e,t,r,i)}else if(Tz(n))return Az[n];return n},y0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Cz(n,e){let t=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(w){c.has(w)&&(g.schedule(w),n()),w(h)}const g={schedule:(w,E=!1,T=!1)=>{const M=T&&i?t:r;return E&&c.add(w),M.has(w)||M.add(w),w},cancel:w=>{r.delete(w),c.delete(w)},process:w=>{if(h=w,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(m),t.clear(),i=!1,o&&(o=!1,g.process(w))}};return g}const Sz=40;function hk(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,c=y0.reduce((W,Y)=>(W[Y]=Cz(o),W),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:w,update:E,preRender:T,render:R,postRender:M}=c,D=()=>{const W=Ma.useManualTiming?i.timestamp:performance.now();t=!1,Ma.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(W-i.timestamp,Sz),1)),i.timestamp=W,i.isProcessing=!0,h.process(i),m.process(i),g.process(i),w.process(i),E.process(i),T.process(i),R.process(i),M.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(D))},L=()=>{t=!0,r=!0,i.isProcessing||n(D)};return{schedule:y0.reduce((W,Y)=>{const Z=c[Y];return W[Y]=(ie,F=!1,B=!1)=>(t||L(),Z.schedule(ie,F,B)),W},{}),cancel:W=>{for(let Y=0;Y<y0.length;Y++)c[y0[Y]].cancel(W)},state:i,steps:c}}const{schedule:tr,cancel:jl,state:mi,steps:Fy}=hk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ys,!0);let q0;function Rz(){q0=void 0}const hs={now:()=>(q0===void 0&&hs.set(mi.isProcessing||Ma.useManualTiming?mi.timestamp:performance.now()),q0),set:n=>{q0=n,queueMicrotask(Rz)}},fk=n=>e=>typeof e=="string"&&e.startsWith(n),E2=fk("--"),Nz=fk("var(--"),b2=n=>Nz(n)?kz.test(n.split("/*")[0].trim()):!1,kz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Wd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Sf={...Wd,transform:n=>Oa(0,1,n)},x0={...Wd,default:1},ef=n=>Math.round(n*1e5)/1e5,I2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Pz(n){return n==null}const Dz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,A2=(n,e)=>t=>!!(typeof t=="string"&&Dz.test(t)&&t.startsWith(n)||e&&!Pz(t)&&Object.prototype.hasOwnProperty.call(t,e)),pk=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,c,h]=r.match(I2);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},Oz=n=>Oa(0,255,n),By={...Wd,transform:n=>Math.round(Oz(n))},Pc={test:A2("rgb","red"),parse:pk("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+By.transform(n)+", "+By.transform(e)+", "+By.transform(t)+", "+ef(Sf.transform(r))+")"};function Mz(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const tw={test:A2("#"),parse:Mz,transform:Pc.transform},op=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),vl=op("deg"),qo=op("%"),At=op("px"),Lz=op("vh"),Vz=op("vw"),MA={...qo,parse:n=>qo.parse(n)/100,transform:n=>qo.transform(n*100)},Ju={test:A2("hsl","hue"),parse:pk("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+qo.transform(ef(e))+", "+qo.transform(ef(t))+", "+ef(Sf.transform(r))+")"},Lr={test:n=>Pc.test(n)||tw.test(n)||Ju.test(n),parse:n=>Pc.test(n)?Pc.parse(n):Ju.test(n)?Ju.parse(n):tw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Pc.transform(n):Ju.transform(n),getAnimatableNone:n=>{const e=Lr.parse(n);return e.alpha=0,Lr.transform(e)}},Fz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Bz(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(I2))==null?void 0:e.length)||0)+(((t=n.match(Fz))==null?void 0:t.length)||0)>0}const mk="number",gk="color",jz="var",Uz="var(",LA="${}",zz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Rf(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const h=e.replace(zz,m=>(Lr.test(m)?(r.color.push(o),i.push(gk),t.push(Lr.parse(m))):m.startsWith(Uz)?(r.var.push(o),i.push(jz),t.push(m)):(r.number.push(o),i.push(mk),t.push(parseFloat(m))),++o,LA)).split(LA);return{values:t,split:h,indexes:r,types:i}}function yk(n){return Rf(n).values}function xk(n){const{split:e,types:t}=Rf(n),r=e.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],i[c]!==void 0){const h=t[c];h===mk?o+=ef(i[c]):h===gk?o+=Lr.transform(i[c]):o+=i[c]}return o}}const Wz=n=>typeof n=="number"?0:Lr.test(n)?Lr.getAnimatableNone(n):n;function Hz(n){const e=yk(n);return xk(n)(e.map(Wz))}const Ul={test:Bz,parse:yk,createTransformer:xk,getAnimatableNone:Hz};function jy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Gz({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,c=0;if(!e)i=o=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,m=2*t-h;i=jy(m,h,n+1/3),o=jy(m,h,n),c=jy(m,h,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function Rm(n,e){return t=>t>0?e:n}const cr=(n,e,t)=>n+(e-n)*t,Uy=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},$z=[tw,Pc,Ju],qz=n=>$z.find(e=>e.test(n));function VA(n){const e=qz(n);if(!e)return!1;let t=e.parse(n);return e===Ju&&(t=Gz(t)),t}const FA=(n,e)=>{const t=VA(n),r=VA(e);if(!t||!r)return Rm(n,e);const i={...t};return o=>(i.red=Uy(t.red,r.red,o),i.green=Uy(t.green,r.green,o),i.blue=Uy(t.blue,r.blue,o),i.alpha=cr(t.alpha,r.alpha,o),Pc.transform(i))},nw=new Set(["none","hidden"]);function Kz(n,e){return nw.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Xz(n,e){return t=>cr(n,e,t)}function T2(n){return typeof n=="number"?Xz:typeof n=="string"?b2(n)?Rm:Lr.test(n)?FA:Zz:Array.isArray(n)?wk:typeof n=="object"?Lr.test(n)?FA:Yz:Rm}function wk(n,e){const t=[...n],r=t.length,i=n.map((o,c)=>T2(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)t[c]=i[c](o);return t}}function Yz(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=T2(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function Qz(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],c=n.indexes[o][r[o]],h=n.values[c]??0;t[i]=h,r[o]++}return t}const Zz=(n,e)=>{const t=Ul.createTransformer(e),r=Rf(n),i=Rf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?nw.has(n)&&!i.values.length||nw.has(e)&&!r.values.length?Kz(n,e):ip(wk(Qz(r,i),i.values),t):Rm(n,e)};function vk(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?cr(n,e,t):T2(n)(n,e)}const Jz=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>tr.update(e,t),stop:()=>jl(e),now:()=>mi.isProcessing?mi.timestamp:hs.now()}},_k=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Nm=2e4;function C2(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Nm;)e+=t,r=n.next(e);return e>=Nm?1/0:e}function eW(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(C2(r),Nm);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:$o(i)}}const tW=5;function Ek(n,e,t){const r=Math.max(e-tW,0);return tk(t-n(r),e-r)}const yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zy=.001;function nW({duration:n=yr.duration,bounce:e=yr.bounce,velocity:t=yr.velocity,mass:r=yr.mass}){let i,o,c=1-e;c=Oa(yr.minDamping,yr.maxDamping,c),n=Oa(yr.minDuration,yr.maxDuration,$o(n)),c<1?(i=g=>{const w=g*c,E=w*n,T=w-t,R=rw(g,c),M=Math.exp(-E);return zy-T/R*M},o=g=>{const E=g*c*n,T=E*t+t,R=Math.pow(c,2)*Math.pow(g,2)*n,M=Math.exp(-E),D=rw(Math.pow(g,2),c);return(-i(g)+zy>0?-1:1)*((T-R)*M)/D}):(i=g=>{const w=Math.exp(-g*n),E=(g-t)*n+1;return-zy+w*E},o=g=>{const w=Math.exp(-g*n),E=(t-g)*(n*n);return w*E});const h=5/n,m=iW(i,o,h);if(n=Go(n),isNaN(m))return{stiffness:yr.stiffness,damping:yr.damping,duration:n};{const g=Math.pow(m,2)*r;return{stiffness:g,damping:c*2*Math.sqrt(r*g),duration:n}}}const rW=12;function iW(n,e,t){let r=t;for(let i=1;i<rW;i++)r=r-n(r)/e(r);return r}function rw(n,e){return n*Math.sqrt(1-e*e)}const sW=["duration","bounce"],oW=["stiffness","damping","mass"];function BA(n,e){return e.some(t=>n[t]!==void 0)}function aW(n){let e={velocity:yr.velocity,stiffness:yr.stiffness,damping:yr.damping,mass:yr.mass,isResolvedFromDuration:!1,...n};if(!BA(n,oW)&&BA(n,sW))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*Oa(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:yr.mass,stiffness:i,damping:o}}else{const t=nW(n);e={...e,...t,mass:yr.mass},e.isResolvedFromDuration=!0}return e}function km(n=yr.visualDuration,e=yr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:m,damping:g,mass:w,duration:E,velocity:T,isResolvedFromDuration:R}=aW({...t,velocity:-$o(t.velocity||0)}),M=T||0,D=g/(2*Math.sqrt(m*w)),L=c-o,G=$o(Math.sqrt(m/w)),z=Math.abs(L)<5;r||(r=z?yr.restSpeed.granular:yr.restSpeed.default),i||(i=z?yr.restDelta.granular:yr.restDelta.default);let W;if(D<1){const Z=rw(G,D);W=ie=>{const F=Math.exp(-D*G*ie);return c-F*((M+D*G*L)/Z*Math.sin(Z*ie)+L*Math.cos(Z*ie))}}else if(D===1)W=Z=>c-Math.exp(-G*Z)*(L+(M+G*L)*Z);else{const Z=G*Math.sqrt(D*D-1);W=ie=>{const F=Math.exp(-D*G*ie),B=Math.min(Z*ie,300);return c-F*((M+D*G*L)*Math.sinh(B)+Z*L*Math.cosh(B))/Z}}const Y={calculatedDuration:R&&E||null,next:Z=>{const ie=W(Z);if(R)h.done=Z>=E;else{let F=Z===0?M:0;D<1&&(F=Z===0?Go(M):Ek(W,Z,ie));const B=Math.abs(F)<=r,H=Math.abs(c-ie)<=i;h.done=B&&H}return h.value=h.done?c:ie,h},toString:()=>{const Z=Math.min(C2(Y),Nm),ie=_k(F=>Y.next(Z*F).value,Z,30);return Z+"ms "+ie},toTransition:()=>{}};return Y}km.applyToOptions=n=>{const e=eW(n,100,km);return n.ease=e.ease,n.duration=Go(e.duration),n.type="keyframes",n};function iw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:m,restDelta:g=.5,restSpeed:w}){const E=n[0],T={done:!1,value:E},R=B=>h!==void 0&&B<h||m!==void 0&&B>m,M=B=>h===void 0?m:m===void 0||Math.abs(h-B)<Math.abs(m-B)?h:m;let D=t*e;const L=E+D,G=c===void 0?L:c(L);G!==L&&(D=G-E);const z=B=>-D*Math.exp(-B/r),W=B=>G+z(B),Y=B=>{const H=z(B),ee=W(B);T.done=Math.abs(H)<=g,T.value=T.done?G:ee};let Z,ie;const F=B=>{R(T.value)&&(Z=B,ie=km({keyframes:[T.value,M(T.value)],velocity:Ek(W,B,T.value),damping:i,stiffness:o,restDelta:g,restSpeed:w}))};return F(0),{calculatedDuration:null,next:B=>{let H=!1;return!ie&&Z===void 0&&(H=!0,Y(B),F(B)),Z!==void 0&&B>=Z?ie.next(B-Z):(!H&&Y(B),T)}}}function lW(n,e,t){const r=[],i=t||Ma.mix||vk,o=n.length-1;for(let c=0;c<o;c++){let h=i(n[c],n[c+1]);if(e){const m=Array.isArray(e)?e[c]||Ys:e;h=ip(m,h)}r.push(h)}return r}function cW(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(y2(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=lW(e,r,i),m=h.length,g=w=>{if(c&&w<n[0])return e[0];let E=0;if(m>1)for(;E<n.length-2&&!(w<n[E+1]);E++);const T=Cf(n[E],n[E+1],w);return h[E](T)};return t?w=>g(Oa(n[0],n[o-1],w)):g}function uW(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Cf(0,e,r);n.push(cr(t,1,i))}}function dW(n){const e=[0];return uW(e,n.length-1),e}function hW(n,e){return n.map(t=>t*e)}function fW(n,e){return n.map(()=>e||uk).splice(0,n.length-1)}function tf({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Iz(r)?r.map(OA):OA(r),o={done:!1,value:e[0]},c=hW(t&&t.length===e.length?t:dW(e),n),h=cW(c,e,{ease:Array.isArray(i)?i:fW(e,i)});return{calculatedDuration:n,next:m=>(o.value=h(m),o.done=m>=n,o)}}const pW=n=>n!==null;function S2(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(pW),h=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||r===void 0?o[h]:r}const mW={decay:iw,inertia:iw,tween:tf,keyframes:tf,spring:km};function bk(n){typeof n.type=="string"&&(n.type=mW[n.type])}class R2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const gW=n=>n/100;class N2 extends R2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==hs.now()&&this.tick(hs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;bk(e);const{type:t=tf,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=e;let{keyframes:h}=e;const m=t||tf;m!==tf&&typeof h[0]!="number"&&(this.mixKeyframes=ip(gW,vk(h[0],h[1])),h=[0,100]);const g=m({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...h].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=C2(g));const{calculatedDuration:w}=g;this.calculatedDuration=w,this.resolvedDuration=w+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=g}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:w,repeat:E,repeatType:T,repeatDelay:R,type:M,onUpdate:D,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const G=this.currentTime-g*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?G<0:G>i;this.currentTime=Math.max(G,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let W=this.currentTime,Y=r;if(E){const B=Math.min(this.currentTime,i)/h;let H=Math.floor(B),ee=B%1;!ee&&B>=1&&(ee=1),ee===1&&H--,H=Math.min(H,E+1),!!(H%2)&&(T==="reverse"?(ee=1-ee,R&&(ee-=R/h)):T==="mirror"&&(Y=c)),W=Oa(0,1,ee)*h}const Z=z?{done:!1,value:w[0]}:Y.next(W);o&&(Z.value=o(Z.value));let{done:ie}=Z;!z&&m!==null&&(ie=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return F&&M!==iw&&(Z.value=S2(w,this.options,L,this.speed)),D&&D(Z.value),F&&this.finish(),Z}then(e,t){return this.finished.then(e,t)}get duration(){return $o(this.calculatedDuration)}get time(){return $o(this.currentTime)}set time(e){var t;e=Go(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=$o(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=Jz,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function yW(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Dc=n=>n*180/Math.PI,sw=n=>{const e=Dc(Math.atan2(n[1],n[0]));return ow(e)},xW={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:sw,rotateZ:sw,skewX:n=>Dc(Math.atan(n[1])),skewY:n=>Dc(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},ow=n=>(n=n%360,n<0&&(n+=360),n),jA=sw,UA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),zA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),wW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:UA,scaleY:zA,scale:n=>(UA(n)+zA(n))/2,rotateX:n=>ow(Dc(Math.atan2(n[6],n[5]))),rotateY:n=>ow(Dc(Math.atan2(-n[2],n[0]))),rotateZ:jA,rotate:jA,skewX:n=>Dc(Math.atan(n[4])),skewY:n=>Dc(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function aw(n){return n.includes("scale")?1:0}function lw(n,e){if(!n||n==="none")return aw(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=wW,i=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=xW,i=h}if(!i)return aw(e);const o=r[e],c=i[1].split(",").map(_W);return typeof o=="function"?o(c):c[o]}const vW=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return lw(t,e)};function _W(n){return parseFloat(n.trim())}const Hd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gd=new Set(Hd),WA=n=>n===Wd||n===At,EW=new Set(["x","y","z"]),bW=Hd.filter(n=>!EW.has(n));function IW(n){const e=[];return bW.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const jc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>lw(e,"x"),y:(n,{transform:e})=>lw(e,"y")};jc.translateX=jc.x;jc.translateY=jc.y;const Uc=new Set;let cw=!1,uw=!1,dw=!1;function Ik(){if(uw){const n=Array.from(Uc).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=IW(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,c])=>{var h;(h=r.getValue(o))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}uw=!1,cw=!1,Uc.forEach(n=>n.complete(dw)),Uc.clear()}function Ak(){Uc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(uw=!0)})}function AW(){dw=!0,Ak(),Ik(),dw=!1}class k2{constructor(e,t,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Uc.add(this),cw||(cw=!0,tr.read(Ak),tr.resolveKeyframes(Ik))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}yW(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Uc.delete(this)}cancel(){this.state==="scheduled"&&(Uc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const TW=n=>n.startsWith("--");function CW(n,e,t){TW(e)?n.style.setProperty(e,t):n.style[e]=t}const SW=x2(()=>window.ScrollTimeline!==void 0),RW={};function NW(n,e){const t=x2(n);return()=>RW[e]??t()}const Tk=NW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bh=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,HA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bh([0,.65,.55,1]),circOut:Bh([.55,0,1,.45]),backIn:Bh([.31,.01,.66,-.59]),backOut:Bh([.33,1.53,.69,.99])};function Ck(n,e){if(n)return typeof n=="function"?Tk()?_k(n,e):"ease-out":dk(n)?Bh(n):Array.isArray(n)?n.map(t=>Ck(t,e)||HA.easeOut):HA[n]}function kW(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:h="easeOut",times:m}={},g=void 0){const w={[e]:t};m&&(w.offset=m);const E=Ck(h,i);Array.isArray(E)&&(w.easing=E);const T={delay:r,duration:i,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return g&&(T.pseudoElement=g),n.animate(w,T)}function Sk(n){return typeof n=="function"&&"applyToOptions"in n}function PW({type:n,...e}){return Sk(n)&&Tk()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class DW extends R2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:h,onComplete:m}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,y2(typeof e.type!="string");const g=PW(e);this.animation=kW(t,r,i,g,o),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const w=S2(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(w):CW(t,r,w),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return $o(Number(e))}get time(){return $o(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Go(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&SW()?(this.animation.timeline=e,Ys):t(this)}}const Rk={anticipate:ak,backInOut:ok,circInOut:ck};function OW(n){return n in Rk}function MW(n){typeof n.ease=="string"&&OW(n.ease)&&(n.ease=Rk[n.ease])}const GA=10;class LW extends DW{constructor(e){MW(e),bk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new N2({...c,autoplay:!1}),m=Go(this.finishedTime??this.time);t.setWithVelocity(h.sample(m-GA).value,h.sample(m).value,GA),h.stop()}}const $A=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ul.test(n)||n==="0")&&!n.startsWith("url("));function VW(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function FW(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],c=$A(i,e),h=$A(o,e);return!c||!h?!1:VW(n)||(t==="spring"||Sk(t))&&r}function hw(n){n.duration=0,n.type}const BW=new Set(["opacity","clipPath","filter","transform"]),jW=x2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function UW(n){var w;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:c}=n;if(!(((w=e==null?void 0:e.owner)==null?void 0:w.current)instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=e.owner.getProps();return jW()&&t&&BW.has(t)&&(t!=="transform"||!g)&&!m&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const zW=40;class WW extends R2{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:h,name:m,motionValue:g,element:w,...E}){var M;super(),this.stop=()=>{var D,L;this._animation&&(this._animation.stop(),(D=this.stopTimeline)==null||D.call(this)),(L=this.keyframeResolver)==null||L.cancel()},this.createdAt=hs.now();const T={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:c,name:m,motionValue:g,element:w,...E},R=(w==null?void 0:w.KeyframeResolver)||k2;this.keyframeResolver=new R(h,(D,L,G)=>this.onKeyframesResolved(D,L,T,!G),m,g,w),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:h,delay:m,isHandoff:g,onUpdate:w}=r;this.resolvedAt=hs.now(),FW(e,o,c,h)||((Ma.instantAnimations||!m)&&(w==null||w(S2(e,r,t))),e[0]=e[e.length-1],hw(r),r.repeat=0);const T={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>zW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},R=!g&&UW(T)?new LW({...T,element:T.motionValue.owner.current}):new N2(T);R.finished.then(()=>this.notifyFinished()).catch(Ys),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),AW()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const HW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function GW(n){const e=HW.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function Nk(n,e,t=1){const[r,i]=GW(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return ZN(c)?parseFloat(c):c}return b2(i)?Nk(i,e,t+1):i}function P2(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const kk=new Set(["width","height","top","left","right","bottom",...Hd]),$W={test:n=>n==="auto",parse:n=>n},Pk=n=>e=>e.test(n),Dk=[Wd,At,qo,vl,Vz,Lz,$W],qA=n=>Dk.find(Pk(n));function qW(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ek(n):!0}const KW=new Set(["brightness","contrast","saturate","opacity"]);function XW(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(I2)||[];if(!r)return n;const i=t.replace(r,"");let o=KW.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const YW=/\b([a-z-]*)\(.*?\)/gu,fw={...Ul,getAnimatableNone:n=>{const e=n.match(YW);return e?e.map(XW).join(" "):n}},KA={...Wd,transform:Math.round},QW={rotate:vl,rotateX:vl,rotateY:vl,rotateZ:vl,scale:x0,scaleX:x0,scaleY:x0,scaleZ:x0,skew:vl,skewX:vl,skewY:vl,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:Sf,originX:MA,originY:MA,originZ:At},D2={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At,...QW,zIndex:KA,fillOpacity:Sf,strokeOpacity:Sf,numOctaves:KA},ZW={...D2,color:Lr,backgroundColor:Lr,outlineColor:Lr,fill:Lr,stroke:Lr,borderColor:Lr,borderTopColor:Lr,borderRightColor:Lr,borderBottomColor:Lr,borderLeftColor:Lr,filter:fw,WebkitFilter:fw},Ok=n=>ZW[n];function Mk(n,e){let t=Ok(n);return t!==fw&&(t=Ul),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const JW=new Set(["auto","none","0"]);function eH(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!JW.has(o)&&Rf(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=Mk(t,i)}class tH extends k2{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let g=e[m];if(typeof g=="string"&&(g=g.trim(),b2(g))){const w=Nk(g,t.current);w!==void 0&&(e[m]=w),m===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!kk.has(r)||e.length!==2)return;const[i,o]=e,c=qA(i),h=qA(o);if(c!==h)if(WA(c)&&WA(h))for(let m=0;m<e.length;m++){const g=e[m];typeof g=="string"&&(e[m]=parseFloat(g))}else jc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||qW(e[i]))&&r.push(i);r.length&&eH(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=jc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=jc[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([m,g])=>{e.getValue(m).set(g)}),this.resolveNoneKeyframes()}}function nH(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const Lk=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function Vk(n){return JN(n)&&"offsetHeight"in n}const XA=30,rH=n=>!isNaN(parseFloat(n));class iH{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=hs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rH(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new w2);const r=this.events[e].add(t);return e==="change"?()=>{r(),tr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>XA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,XA);return tk(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nd(n,e){return new iH(n,e)}const{schedule:O2}=hk(queueMicrotask,!1),ao={x:!1,y:!1};function Fk(){return ao.x||ao.y}function sH(n){return n==="x"||n==="y"?ao[n]?null:(ao[n]=!0,()=>{ao[n]=!1}):ao.x||ao.y?null:(ao.x=ao.y=!0,()=>{ao.x=ao.y=!1})}function Bk(n,e){const t=nH(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function YA(n){return!(n.pointerType==="touch"||Fk())}function oH(n,e,t={}){const[r,i,o]=Bk(n,t),c=h=>{if(!YA(h))return;const{target:m}=h,g=e(m,h);if(typeof g!="function"||!m)return;const w=E=>{YA(E)&&(g(E),m.removeEventListener("pointerleave",w))};m.addEventListener("pointerleave",w,i)};return r.forEach(h=>{h.addEventListener("pointerenter",c,i)}),o}const jk=(n,e)=>e?n===e?!0:jk(n,e.parentElement):!1,M2=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,aH=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lH(n){return aH.has(n.tagName)||n.tabIndex!==-1}const K0=new WeakSet;function QA(n){return e=>{e.key==="Enter"&&n(e)}}function Wy(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const cH=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=QA(()=>{if(K0.has(t))return;Wy(t,"down");const i=QA(()=>{Wy(t,"up")}),o=()=>Wy(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function ZA(n){return M2(n)&&!Fk()}function uH(n,e,t={}){const[r,i,o]=Bk(n,t),c=h=>{const m=h.currentTarget;if(!ZA(h))return;K0.add(m);const g=e(m,h),w=(R,M)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",T),K0.has(m)&&K0.delete(m),ZA(R)&&typeof g=="function"&&g(R,{success:M})},E=R=>{w(R,m===window||m===document||t.useGlobalTarget||jk(m,R.target))},T=R=>{w(R,!1)};window.addEventListener("pointerup",E,i),window.addEventListener("pointercancel",T,i)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,i),Vk(h)&&(h.addEventListener("focus",g=>cH(g,i)),!lH(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function Uk(n){return JN(n)&&"ownerSVGElement"in n}function dH(n){return Uk(n)&&n.tagName==="svg"}const Mi=n=>!!(n&&n.getVelocity),hH=[...Dk,Lr,Ul],fH=n=>hH.find(Pk(n)),L2=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class pH extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=Vk(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function mH({children:n,isPresent:e,anchorX:t,root:r}){const i=P.useId(),o=P.useRef(null),c=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=P.useContext(L2);return P.useInsertionEffect(()=>{const{width:m,height:g,top:w,left:E,right:T}=c.current;if(e||!o.current||!m||!g)return;const R=t==="left"?`left: ${E}`:`right: ${T}`;o.current.dataset.motionPopId=i;const M=document.createElement("style");h&&(M.nonce=h);const D=r??document.head;return D.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${w}px !important;
          }
        `),()=>{D.contains(M)&&D.removeChild(M)}},[e]),A.jsx(pH,{isPresent:e,childRef:o,sizeRef:c,children:P.cloneElement(n,{ref:o})})}const gH=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:h,root:m})=>{const g=f2(yH),w=P.useId();let E=!0,T=P.useMemo(()=>(E=!1,{id:w,initial:e,isPresent:t,custom:i,onExitComplete:R=>{g.set(R,!0);for(const M of g.values())if(!M)return;r&&r()},register:R=>(g.set(R,!1),()=>g.delete(R))}),[t,g,r]);return o&&E&&(T={...T}),P.useMemo(()=>{g.forEach((R,M)=>g.set(M,!1))},[t]),P.useEffect(()=>{!t&&!g.size&&r&&r()},[t]),c==="popLayout"&&(n=A.jsx(mH,{isPresent:t,anchorX:h,root:m,children:n})),A.jsx(Sg.Provider,{value:T,children:n})};function yH(){return new Map}function zk(n=!0){const e=P.useContext(Sg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=P.useId();P.useEffect(()=>{if(n)return i(o)},[n]);const c=P.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,c]:[!0]}const w0=n=>n.key||"";function JA(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const ap=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:h="left",root:m})=>{const[g,w]=zk(c),E=P.useMemo(()=>JA(n),[n]),T=c&&!g?[]:E.map(w0),R=P.useRef(!0),M=P.useRef(E),D=f2(()=>new Map),[L,G]=P.useState(E),[z,W]=P.useState(E);QN(()=>{R.current=!1,M.current=E;for(let ie=0;ie<z.length;ie++){const F=w0(z[ie]);T.includes(F)?D.delete(F):D.get(F)!==!0&&D.set(F,!1)}},[z,T.length,T.join("-")]);const Y=[];if(E!==L){let ie=[...E];for(let F=0;F<z.length;F++){const B=z[F],H=w0(B);T.includes(H)||(ie.splice(F,0,B),Y.push(B))}return o==="wait"&&Y.length&&(ie=Y),W(JA(ie)),G(E),null}const{forceRender:Z}=P.useContext(h2);return A.jsx(A.Fragment,{children:z.map(ie=>{const F=w0(ie),B=c&&!g?!1:E===z||T.includes(F),H=()=>{if(D.has(F))D.set(F,!0);else return;let ee=!0;D.forEach(ne=>{ne||(ee=!1)}),ee&&(Z==null||Z(),W(M.current),c&&(w==null||w()),r&&r())};return A.jsx(gH,{isPresent:B,initial:!R.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:m,onExitComplete:B?void 0:H,anchorX:h,children:ie},F)})})},Wk=P.createContext({strict:!1}),eT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kd={};for(const n in eT)kd[n]={isEnabled:e=>eT[n].some(t=>!!e[t])};function xH(n){for(const e in n)kd[e]={...kd[e],...n[e]}}const wH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pm(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||wH.has(n)}let Hk=n=>!Pm(n);function vH(n){typeof n=="function"&&(Hk=e=>e.startsWith("on")?!Pm(e):n(e))}try{vH(require("@emotion/is-prop-valid").default)}catch{}function _H(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(Hk(i)||t===!0&&Pm(i)||!e&&!Pm(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Rg=P.createContext({});function Ng(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Nf(n){return typeof n=="string"||Array.isArray(n)}const V2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],F2=["initial",...V2];function kg(n){return Ng(n.animate)||F2.some(e=>Nf(n[e]))}function Gk(n){return!!(kg(n)||n.variants)}function EH(n,e){if(kg(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Nf(t)?t:void 0,animate:Nf(r)?r:void 0}}return n.inherit!==!1?e:{}}function bH(n){const{initial:e,animate:t}=EH(n,P.useContext(Rg));return P.useMemo(()=>({initial:e,animate:t}),[tT(e),tT(t)])}function tT(n){return Array.isArray(n)?n.join(" "):n}const kf={};function IH(n){for(const e in n)kf[e]=n[e],E2(e)&&(kf[e].isCSSVariable=!0)}function $k(n,{layout:e,layoutId:t}){return Gd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!kf[n]||n==="opacity")}const AH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TH=Hd.length;function CH(n,e,t){let r="",i=!0;for(let o=0;o<TH;o++){const c=Hd[o],h=n[c];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(c.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||t){const g=Lk(h,D2[c]);if(!m){i=!1;const w=AH[c]||c;r+=`${w}(${g}) `}t&&(e[c]=g)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function B2(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let c=!1,h=!1;for(const m in e){const g=e[m];if(Gd.has(m)){c=!0;continue}else if(E2(m)){i[m]=g;continue}else{const w=Lk(g,D2[m]);m.startsWith("origin")?(h=!0,o[m]=w):r[m]=w}}if(e.transform||(c||t?r.transform=CH(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:w=0}=o;r.transformOrigin=`${m} ${g} ${w}`}}const j2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qk(n,e,t){for(const r in e)!Mi(e[r])&&!$k(r,t)&&(n[r]=e[r])}function SH({transformTemplate:n},e){return P.useMemo(()=>{const t=j2();return B2(t,e,n),Object.assign({},t.vars,t.style)},[e])}function RH(n,e){const t=n.style||{},r={};return qk(r,t,n),Object.assign(r,SH(n,e)),r}function NH(n,e){const t={},r=RH(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const kH={offset:"stroke-dashoffset",array:"stroke-dasharray"},PH={offset:"strokeDashoffset",array:"strokeDasharray"};function DH(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?kH:PH;n[o.offset]=At.transform(-r);const c=At.transform(e),h=At.transform(t);n[o.array]=`${c} ${h}`}function Kk(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...h},m,g,w){if(B2(n,h,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:T}=n;E.transform&&(T.transform=E.transform,delete E.transform),(T.transform||E.transformOrigin)&&(T.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),T.transform&&(T.transformBox=(w==null?void 0:w.transformBox)??"fill-box",delete E.transformBox),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),r!==void 0&&(E.scale=r),i!==void 0&&DH(E,i,o,c,!1)}const Xk=()=>({...j2(),attrs:{}}),Yk=n=>typeof n=="string"&&n.toLowerCase()==="svg";function OH(n,e,t,r){const i=P.useMemo(()=>{const o=Xk();return Kk(o,e,Yk(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};qk(o,n.style,n),i.style={...o,...i.style}}return i}const MH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function U2(n){return typeof n!="string"||n.includes("-")?!1:!!(MH.indexOf(n)>-1||/[A-Z]/u.test(n))}function LH(n,e,t,{latestValues:r},i,o=!1){const h=(U2(n)?OH:NH)(e,r,i,n),m=_H(e,typeof n=="string",o),g=n!==P.Fragment?{...m,...h,ref:t}:{},{children:w}=e,E=P.useMemo(()=>Mi(w)?w.get():w,[w]);return P.createElement(n,{...g,children:E})}function nT(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function z2(n,e,t,r){if(typeof e=="function"){const[i,o]=nT(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=nT(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function X0(n){return Mi(n)?n.get():n}function VH({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:FH(t,r,i,n),renderState:e()}}function FH(n,e,t,r){const i={},o=r(n,{});for(const T in o)i[T]=X0(o[T]);let{initial:c,animate:h}=n;const m=kg(n),g=Gk(n);e&&g&&!m&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let w=t?t.initial===!1:!1;w=w||c===!1;const E=w?h:c;if(E&&typeof E!="boolean"&&!Ng(E)){const T=Array.isArray(E)?E:[E];for(let R=0;R<T.length;R++){const M=z2(n,T[R]);if(M){const{transitionEnd:D,transition:L,...G}=M;for(const z in G){let W=G[z];if(Array.isArray(W)){const Y=w?W.length-1:0;W=W[Y]}W!==null&&(i[z]=W)}for(const z in D)i[z]=D[z]}}}return i}const Qk=n=>(e,t)=>{const r=P.useContext(Rg),i=P.useContext(Sg),o=()=>VH(n,e,r,i);return t?o():f2(o)};function W2(n,e,t){var o;const{style:r}=n,i={};for(const c in r)(Mi(r[c])||e.style&&Mi(e.style[c])||$k(c,n)||((o=t==null?void 0:t.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const BH=Qk({scrapeMotionValuesFromProps:W2,createRenderState:j2});function Zk(n,e,t){const r=W2(n,e,t);for(const i in n)if(Mi(n[i])||Mi(e[i])){const o=Hd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const jH=Qk({scrapeMotionValuesFromProps:Zk,createRenderState:Xk}),UH=Symbol.for("motionComponentSymbol");function ed(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zH(n,e,t){return P.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ed(t)&&(t.current=r))},[e])}const H2=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WH="framerAppearId",Jk="data-"+H2(WH),e4=P.createContext({});function HH(n,e,t,r,i){var D,L;const{visualElement:o}=P.useContext(Rg),c=P.useContext(Wk),h=P.useContext(Sg),m=P.useContext(L2).reducedMotion,g=P.useRef(null);r=r||c.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const w=g.current,E=P.useContext(e4);w&&!w.projection&&i&&(w.type==="html"||w.type==="svg")&&GH(g.current,t,i,E);const T=P.useRef(!1);P.useInsertionEffect(()=>{w&&T.current&&w.update(t,h)});const R=t[Jk],M=P.useRef(!!R&&!((D=window.MotionHandoffIsComplete)!=null&&D.call(window,R))&&((L=window.MotionHasOptimisedAnimation)==null?void 0:L.call(window,R)));return QN(()=>{w&&(T.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),M.current&&w.animationState&&w.animationState.animateChanges())}),P.useEffect(()=>{w&&(!M.current&&w.animationState&&w.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var G;(G=window.MotionHandoffMarkAsComplete)==null||G.call(window,R)}),M.current=!1),w.enteringChildren=void 0)}),w}function GH(n,e,t,r){const{layoutId:i,layout:o,drag:c,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:w}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:t4(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||h&&ed(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:w,layoutScroll:m,layoutRoot:g})}function t4(n){if(n)return n.options.allowProjection!==!1?n.projection:t4(n.parent)}function Hy(n,{forwardMotionProps:e=!1}={},t,r){t&&xH(t);const i=U2(n)?jH:BH;function o(h,m){let g;const w={...P.useContext(L2),...h,layoutId:$H(h)},{isStatic:E}=w,T=bH(h),R=i(h,E);if(!E&&p2){qH();const M=KH(w);g=M.MeasureLayout,T.visualElement=HH(n,R,w,r,M.ProjectionNode)}return A.jsxs(Rg.Provider,{value:T,children:[g&&T.visualElement?A.jsx(g,{visualElement:T.visualElement,...w}):null,LH(n,h,zH(R,T.visualElement,m),R,E,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=P.forwardRef(o);return c[UH]=n,c}function $H({layoutId:n}){const e=P.useContext(h2).id;return e&&n!==void 0?e+"-"+n:n}function qH(n,e){P.useContext(Wk).strict}function KH(n){const{drag:e,layout:t}=kd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function XH(n,e){if(typeof Proxy>"u")return Hy;const t=new Map,r=(o,c)=>Hy(o,c,n,e),i=(o,c)=>r(o,c);return new Proxy(i,{get:(o,c)=>c==="create"?r:(t.has(c)||t.set(c,Hy(c,void 0,n,e)),t.get(c))})}function n4({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function YH({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function QH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Gy(n){return n===void 0||n===1}function pw({scale:n,scaleX:e,scaleY:t}){return!Gy(n)||!Gy(e)||!Gy(t)}function Ic(n){return pw(n)||r4(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function r4(n){return rT(n.x)||rT(n.y)}function rT(n){return n&&n!=="0%"}function Dm(n,e,t){const r=n-t,i=e*r;return t+i}function iT(n,e,t,r,i){return i!==void 0&&(n=Dm(n,i,r)),Dm(n,t,r)+e}function mw(n,e=0,t=1,r,i){n.min=iT(n.min,e,t,r,i),n.max=iT(n.max,e,t,r,i)}function i4(n,{x:e,y:t}){mw(n.x,e.translate,e.scale,e.originPoint),mw(n.y,t.translate,t.scale,t.originPoint)}const sT=.999999999999,oT=1.0000000000001;function ZH(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,c;for(let h=0;h<i;h++){o=t[h],c=o.projectionDelta;const{visualElement:m}=o.options;m&&m.props.style&&m.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&nd(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,i4(n,c)),r&&Ic(o.latestValues)&&nd(n,o.latestValues))}e.x<oT&&e.x>sT&&(e.x=1),e.y<oT&&e.y>sT&&(e.y=1)}function td(n,e){n.min=n.min+e,n.max=n.max+e}function aT(n,e,t,r,i=.5){const o=cr(n.min,n.max,i);mw(n,e,t,o,r)}function nd(n,e){aT(n.x,e.x,e.scaleX,e.scale,e.originX),aT(n.y,e.y,e.scaleY,e.scale,e.originY)}function s4(n,e){return n4(QH(n.getBoundingClientRect(),e))}function JH(n,e,t){const r=s4(n,t),{scroll:i}=e;return i&&(td(r.x,i.offset.x),td(r.y,i.offset.y)),r}const lT=()=>({translate:0,scale:1,origin:0,originPoint:0}),rd=()=>({x:lT(),y:lT()}),cT=()=>({min:0,max:0}),Nr=()=>({x:cT(),y:cT()}),gw={current:null},o4={current:!1};function eG(){if(o4.current=!0,!!p2)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>gw.current=n.matches;n.addEventListener("change",e),e()}else gw.current=!1}const tG=new WeakMap;function nG(n,e,t){for(const r in e){const i=e[r],o=t[r];if(Mi(i))n.addValue(r,i);else if(Mi(o))n.addValue(r,Nd(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=n.getStaticValue(r);n.addValue(r,Nd(c!==void 0?c:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const uT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rG{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=k2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=hs.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,tr.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=c;this.latestValues=m,this.baseTarget={...m},this.initialValues=t.initial?{...m}:{},this.renderState=g,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=kg(t),this.isVariantNode=Gk(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...E}=this.scrapeMotionValuesFromProps(t,{},this);for(const T in E){const R=E[T];m[T]!==void 0&&Mi(R)&&R.set(m[T])}}mount(e){var t;this.current=e,tG.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),o4.current||eG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:gw.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),jl(this.notifyUpdate),jl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Gd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&tr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kd){const t=kd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<uT.length;r++){const i=uT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=e[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=nG(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Nd(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ZN(r)||ek(r))?r=parseFloat(r):!fH(r)&&Ul.test(t)&&(r=Mk(e,t)),this.setBaseTarget(e,Mi(r)?r.get():r)),Mi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=z2(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Mi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new w2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){O2.render(this.render)}}class a4 extends rG{constructor(){super(...arguments),this.KeyframeResolver=tH}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function l4(n,{style:e,vars:t},r,i){const o=n.style;let c;for(c in e)o[c]=e[c];i==null||i.applyProjectionStyles(o,r);for(c in t)o.setProperty(c,t[c])}function iG(n){return window.getComputedStyle(n)}class sG extends a4{constructor(){super(...arguments),this.type="html",this.renderInstance=l4}readValueFromInstance(e,t){var r;if(Gd.has(t))return(r=this.projection)!=null&&r.isProjecting?aw(t):vW(e,t);{const i=iG(e),o=(E2(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return s4(e,t)}build(e,t,r){B2(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return W2(e,t,r)}}const c4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oG(n,e,t,r){l4(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(c4.has(i)?i:H2(i),e.attrs[i])}class aG extends a4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Gd.has(t)){const r=Ok(t);return r&&r.default||0}return t=c4.has(t)?t:H2(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Zk(e,t,r)}build(e,t,r){Kk(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){oG(e,t,r,i)}mount(e){this.isSVGTag=Yk(e.tagName),super.mount(e)}}const lG=(n,e)=>U2(n)?new aG(e):new sG(e,{allowProjection:n!==P.Fragment});function cd(n,e,t){const r=n.getProps();return z2(r,e,t!==void 0?t:r.custom,n)}const yw=n=>Array.isArray(n);function cG(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Nd(t))}function uG(n){return yw(n)?n[n.length-1]||0:n}function dG(n,e){const t=cd(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const c in o){const h=uG(o[c]);cG(n,c,h)}}function hG(n){return!!(Mi(n)&&n.add)}function xw(n,e){const t=n.getValue("willChange");if(hG(t))return t.add(e);if(!t&&Ma.WillChange){const r=new Ma.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function u4(n){return n.props[Jk]}const fG=n=>n!==null;function pG(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(fG),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const mG={type:"spring",stiffness:500,damping:25,restSpeed:10},gG=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),yG={type:"keyframes",duration:.8},xG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wG=(n,{keyframes:e})=>e.length>2?yG:Gd.has(n)?n.startsWith("scale")?gG(e[1]):mG:xG;function vG({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:h,from:m,elapsed:g,...w}){return!!Object.keys(w).length}const G2=(n,e,t,r={},i,o)=>c=>{const h=P2(r,n)||{},m=h.delay||r.delay||0;let{elapsed:g=0}=r;g=g-Go(m);const w={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:i};vG(h)||Object.assign(w,wG(n,w)),w.duration&&(w.duration=Go(w.duration)),w.repeatDelay&&(w.repeatDelay=Go(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let E=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(hw(w),w.delay===0&&(E=!0)),(Ma.instantAnimations||Ma.skipAnimations)&&(E=!0,hw(w),w.delay=0),w.allowFlatten=!h.type&&!h.ease,E&&!o&&e.get()!==void 0){const T=pG(w.keyframes,h);if(T!==void 0){tr.update(()=>{w.onUpdate(T),w.onComplete()});return}}return h.isSync?new N2(w):new WW(w)};function _G({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function d4(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(o=r);const m=[],g=i&&n.animationState&&n.animationState.getState()[i];for(const w in h){const E=n.getValue(w,n.latestValues[w]??null),T=h[w];if(T===void 0||g&&_G(g,w))continue;const R={delay:t,...P2(o||{},w)},M=E.get();if(M!==void 0&&!E.isAnimating&&!Array.isArray(T)&&T===M&&!R.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const G=u4(n);if(G){const z=window.MotionHandoffAnimation(G,w,tr);z!==null&&(R.startTime=z,D=!0)}}xw(n,w),E.start(G2(w,E,T,n.shouldReduceMotion&&kk.has(w)?{type:!1}:R,n,D));const L=E.animation;L&&m.push(L)}return c&&Promise.all(m).then(()=>{tr.update(()=>{c&&dG(n,c)})}),m}function h4(n,e,t,r=0,i=1){const o=Array.from(n).sort((g,w)=>g.sortNodePosition(w)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(o,c):i===1?o*r:h-o*r}function ww(n,e,t={}){var m;const r=cd(n,e,t.type==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(d4(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(g=0)=>{const{delayChildren:w=0,staggerChildren:E,staggerDirection:T}=i;return EG(n,e,g,w,E,T,t)}:()=>Promise.resolve(),{when:h}=i;if(h){const[g,w]=h==="beforeChildren"?[o,c]:[c,o];return g().then(()=>w())}else return Promise.all([o(),c(t.delay)])}function EG(n,e,t=0,r=0,i=0,o=1,c){const h=[];for(const m of n.variantChildren)m.notify("AnimationStart",e),h.push(ww(m,e,{...c,delay:t+(typeof r=="function"?0:r)+h4(n.variantChildren,m,r,i,o)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(h)}function bG(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>ww(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=ww(n,e,t);else{const i=typeof e=="function"?cd(n,e,t.custom):e;r=Promise.all(d4(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function f4(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const IG=F2.length;function p4(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?p4(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<IG;t++){const r=F2[t],i=n.props[r];(Nf(i)||i===!1)&&(e[r]=i)}return e}const AG=[...V2].reverse(),TG=V2.length;function CG(n){return e=>Promise.all(e.map(({animation:t,options:r})=>bG(n,t,r)))}function SG(n){let e=CG(n),t=dT(),r=!0;const i=m=>(g,w)=>{var T;const E=cd(n,w,m==="exit"?(T=n.presenceContext)==null?void 0:T.custom:void 0);if(E){const{transition:R,transitionEnd:M,...D}=E;g={...g,...D,...M}}return g};function o(m){e=m(n)}function c(m){const{props:g}=n,w=p4(n.parent)||{},E=[],T=new Set;let R={},M=1/0;for(let L=0;L<TG;L++){const G=AG[L],z=t[G],W=g[G]!==void 0?g[G]:w[G],Y=Nf(W),Z=G===m?z.isActive:null;Z===!1&&(M=L);let ie=W===w[G]&&W!==g[G]&&Y;if(ie&&r&&n.manuallyAnimateOnMount&&(ie=!1),z.protectedKeys={...R},!z.isActive&&Z===null||!W&&!z.prevProp||Ng(W)||typeof W=="boolean")continue;const F=RG(z.prevProp,W);let B=F||G===m&&z.isActive&&!ie&&Y||L>M&&Y,H=!1;const ee=Array.isArray(W)?W:[W];let ne=ee.reduce(i(G),{});Z===!1&&(ne={});const{prevResolvedValues:te={}}=z,K={...te,...ne},we=xe=>{B=!0,T.has(xe)&&(H=!0,T.delete(xe)),z.needsAnimating[xe]=!0;const oe=n.getValue(xe);oe&&(oe.liveStyle=!1)};for(const xe in K){const oe=ne[xe],Te=te[xe];if(R.hasOwnProperty(xe))continue;let Ne=!1;yw(oe)&&yw(Te)?Ne=!f4(oe,Te):Ne=oe!==Te,Ne?oe!=null?we(xe):T.add(xe):oe!==void 0&&T.has(xe)?we(xe):z.protectedKeys[xe]=!0}z.prevProp=W,z.prevResolvedValues=ne,z.isActive&&(R={...R,...ne}),r&&n.blockInitialAnimation&&(B=!1);const se=ie&&F;B&&(!se||H)&&E.push(...ee.map(xe=>{const oe={type:G};if(typeof xe=="string"&&r&&!se&&n.manuallyAnimateOnMount&&n.parent){const{parent:Te}=n,Ne=cd(Te,xe);if(Te.enteringChildren&&Ne){const{delayChildren:ae}=Ne.transition||{};oe.delay=h4(Te.enteringChildren,n,ae)}}return{animation:xe,options:oe}}))}if(T.size){const L={};if(typeof g.initial!="boolean"){const G=cd(n,Array.isArray(g.initial)?g.initial[0]:g.initial);G&&G.transition&&(L.transition=G.transition)}T.forEach(G=>{const z=n.getBaseTarget(G),W=n.getValue(G);W&&(W.liveStyle=!0),L[G]=z??null}),E.push({animation:L})}let D=!!E.length;return r&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(E):Promise.resolve()}function h(m,g){var E;if(t[m].isActive===g)return Promise.resolve();(E=n.variantChildren)==null||E.forEach(T=>{var R;return(R=T.animationState)==null?void 0:R.setActive(m,g)}),t[m].isActive=g;const w=c(m);for(const T in t)t[T].protectedKeys={};return w}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=dT(),r=!0}}}function RG(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!f4(e,n):!1}function vc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dT(){return{animate:vc(!0),whileInView:vc(),whileHover:vc(),whileTap:vc(),whileDrag:vc(),whileFocus:vc(),exit:vc()}}class Yl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NG extends Yl{constructor(e){super(e),e.animationState||(e.animationState=SG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ng(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let kG=0;class PG extends Yl{constructor(){super(...arguments),this.id=kG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const DG={animation:{Feature:NG},exit:{Feature:PG}};function Pf(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function lp(n){return{point:{x:n.pageX,y:n.pageY}}}const OG=n=>e=>M2(e)&&n(e,lp(e));function nf(n,e,t,r){return Pf(n,e,OG(t),r)}const m4=1e-4,MG=1-m4,LG=1+m4,g4=.01,VG=0-g4,FG=0+g4;function Xi(n){return n.max-n.min}function BG(n,e,t){return Math.abs(n-e)<=t}function hT(n,e,t,r=.5){n.origin=r,n.originPoint=cr(e.min,e.max,n.origin),n.scale=Xi(t)/Xi(e),n.translate=cr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=MG&&n.scale<=LG||isNaN(n.scale))&&(n.scale=1),(n.translate>=VG&&n.translate<=FG||isNaN(n.translate))&&(n.translate=0)}function rf(n,e,t,r){hT(n.x,e.x,t.x,r?r.originX:void 0),hT(n.y,e.y,t.y,r?r.originY:void 0)}function fT(n,e,t){n.min=t.min+e.min,n.max=n.min+Xi(e)}function jG(n,e,t){fT(n.x,e.x,t.x),fT(n.y,e.y,t.y)}function pT(n,e,t){n.min=e.min-t.min,n.max=n.min+Xi(e)}function sf(n,e,t){pT(n.x,e.x,t.x),pT(n.y,e.y,t.y)}function Gs(n){return[n("x"),n("y")]}const y4=({current:n})=>n?n.ownerDocument.defaultView:null,mT=(n,e)=>Math.abs(n-e);function UG(n,e){const t=mT(n.x,e.x),r=mT(n.y,e.y);return Math.sqrt(t**2+r**2)}class x4{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=qy(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,M=UG(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!R&&!M)return;const{point:D}=T,{timestamp:L}=mi;this.history.push({...D,timestamp:L});const{onStart:G,onMove:z}=this.handlers;R||(G&&G(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,T)},this.handlePointerMove=(T,R)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=$y(R,this.transformPagePoint),tr.update(this.updatePoint,!0)},this.handlePointerUp=(T,R)=>{this.end();const{onEnd:M,onSessionEnd:D,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const G=qy(T.type==="pointercancel"?this.lastMoveEventInfo:$y(R,this.transformPagePoint),this.history);this.startEvent&&M&&M(T,G),D&&D(T,G)},!M2(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const h=lp(e),m=$y(h,this.transformPagePoint),{point:g}=m,{timestamp:w}=mi;this.history=[{...g,timestamp:w}];const{onSessionStart:E}=t;E&&E(e,qy(m,this.history)),this.removeListeners=ip(nf(this.contextWindow,"pointermove",this.handlePointerMove),nf(this.contextWindow,"pointerup",this.handlePointerUp),nf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jl(this.updatePoint)}}function $y(n,e){return e?{point:e(n.point)}:n}function gT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function qy({point:n},e){return{point:n,delta:gT(n,w4(e)),offset:gT(n,zG(e)),velocity:WG(e,.1)}}function zG(n){return n[0]}function w4(n){return n[n.length-1]}function WG(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=w4(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Go(e)));)t--;if(!r)return{x:0,y:0};const o=$o(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function HG(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?cr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?cr(t,n,r.max):Math.min(n,t)),n}function yT(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function GG(n,{top:e,left:t,bottom:r,right:i}){return{x:yT(n.x,t,i),y:yT(n.y,e,r)}}function xT(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function $G(n,e){return{x:xT(n.x,e.x),y:xT(n.y,e.y)}}function qG(n,e){let t=.5;const r=Xi(n),i=Xi(e);return i>r?t=Cf(e.min,e.max-r,n.min):r>i&&(t=Cf(n.min,n.max-i,e.min)),Oa(0,1,t)}function KG(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const vw=.35;function XG(n=vw){return n===!1?n=0:n===!0&&(n=vw),{x:wT(n,"left","right"),y:wT(n,"top","bottom")}}function wT(n,e,t){return{min:vT(n,e),max:vT(n,t)}}function vT(n,e){return typeof n=="number"?n:n[e]||0}const YG=new WeakMap;class QG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=E=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(lp(E).point)},c=(E,T)=>{const{drag:R,dragPropagation:M,onDragStart:D}=this.getProps();if(R&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sH(R),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gs(G=>{let z=this.getAxisMotionValue(G).get()||0;if(qo.test(z)){const{projection:W}=this.visualElement;if(W&&W.layout){const Y=W.layout.layoutBox[G];Y&&(z=Xi(Y)*(parseFloat(z)/100))}}this.originPoint[G]=z}),D&&tr.postRender(()=>D(E,T)),xw(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},h=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T;const{dragPropagation:R,dragDirectionLock:M,onDirectionLock:D,onDrag:L}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:G}=T;if(M&&this.currentDirection===null){this.currentDirection=ZG(G),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",T.point,G),this.updateAxis("y",T.point,G),this.visualElement.render(),L&&L(E,T)},m=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T,this.stop(E,T),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Gs(E=>{var T;return this.getAnimationState(E)==="paused"&&((T=this.getAxisMotionValue(E).animation)==null?void 0:T.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new x4(e,{onSessionStart:o,onStart:c,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:r,contextWindow:y4(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&tr.postRender(()=>h(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!v0(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=HG(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&ed(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=GG(r.layoutBox,e):this.constraints=!1,this.elastic=XG(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gs(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=KG(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ed(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=JH(r,i.root,this.visualElement.getTransformPagePoint());let c=$G(i.layout.layoutBox,o);if(t){const h=t(YH(c));this.hasMutatedConstraints=!!h,h&&(c=n4(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=Gs(w=>{if(!v0(w,t,this.currentDirection))return;let E=m&&m[w]||{};c&&(E={min:0,max:0});const T=i?200:1e6,R=i?40:1e7,M={type:"inertia",velocity:r?e[w]:0,bounceStiffness:T,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...o,...E};return this.startAxisValueAnimation(w,M)});return Promise.all(g).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return xw(this.visualElement,e),r.start(G2(e,r,0,t,this.visualElement,!1))}stopAnimation(){Gs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Gs(t=>{const{drag:r}=this.getProps();if(!v0(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:c,max:h}=i.layout.layoutBox[t];o.set(e[t]-cr(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ed(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Gs(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const m=h.get();i[c]=qG({min:m,max:m},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Gs(c=>{if(!v0(c,e,null))return;const h=this.getAxisMotionValue(c),{min:m,max:g}=this.constraints[c];h.set(cr(m,g,i[c]))})}addListeners(){if(!this.visualElement.current)return;YG.set(this.visualElement,this);const e=this.visualElement.current,t=nf(e,"pointerdown",m=>{const{drag:g,dragListener:w=!0}=this.getProps();g&&w&&this.start(m)}),r=()=>{const{dragConstraints:m}=this.getProps();ed(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),tr.read(r);const c=Pf(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(Gs(w=>{const E=this.getAxisMotionValue(w);E&&(this.originPoint[w]+=m[w].translate,E.set(E.get()+m[w].translate))}),this.visualElement.render())});return()=>{c(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=vw,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function v0(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function ZG(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class JG extends Yl{constructor(e){super(e),this.removeGroupControls=Ys,this.removeListeners=Ys,this.controls=new QG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ys}unmount(){this.removeGroupControls(),this.removeListeners()}}const _T=n=>(e,t)=>{n&&tr.postRender(()=>n(e,t))};class e$ extends Yl{constructor(){super(...arguments),this.removePointerDownListener=Ys}onPointerDown(e){this.session=new x4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:y4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_T(e),onStart:_T(t),onMove:r,onEnd:(o,c)=>{delete this.session,i&&tr.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=nf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Y0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ET(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Rh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(At.test(n))n=parseFloat(n);else return n;const t=ET(n,e.target.x),r=ET(n,e.target.y);return`${t}% ${r}%`}},t$={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Ul.parse(n);if(i.length>5)return r;const o=Ul.createTransformer(n),c=typeof i[0]!="number"?1:0,h=t.x.scale*e.x,m=t.y.scale*e.y;i[0+c]/=h,i[1+c]/=m;const g=cr(h,m,.5);return typeof i[2+c]=="number"&&(i[2+c]/=g),typeof i[3+c]=="number"&&(i[3+c]/=g),o(i)}};let Ky=!1;class n$ extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;IH(r$),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),Ky&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Y0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,Ky=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||tr.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),O2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;Ky=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function v4(n){const[e,t]=zk(),r=P.useContext(h2);return A.jsx(n$,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(e4),isPresent:e,safeToRemove:t})}const r$={borderRadius:{...Rh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rh,borderTopRightRadius:Rh,borderBottomLeftRadius:Rh,borderBottomRightRadius:Rh,boxShadow:t$};function i$(n,e,t){const r=Mi(n)?n:Nd(n);return r.start(G2("",r,e,t)),r.animation}const s$=(n,e)=>n.depth-e.depth;class o${constructor(){this.children=[],this.isDirty=!1}add(e){m2(this.children,e),this.isDirty=!0}remove(e){g2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(s$),this.isDirty=!1,this.children.forEach(e)}}function a$(n,e){const t=hs.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(jl(r),n(o-e))};return tr.setup(r,!0),()=>jl(r)}const _4=["TopLeft","TopRight","BottomLeft","BottomRight"],l$=_4.length,bT=n=>typeof n=="string"?parseFloat(n):n,IT=n=>typeof n=="number"||At.test(n);function c$(n,e,t,r,i,o){i?(n.opacity=cr(0,t.opacity??1,u$(r)),n.opacityExit=cr(e.opacity??1,0,d$(r))):o&&(n.opacity=cr(e.opacity??1,t.opacity??1,r));for(let c=0;c<l$;c++){const h=`border${_4[c]}Radius`;let m=AT(e,h),g=AT(t,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||IT(m)===IT(g)?(n[h]=Math.max(cr(bT(m),bT(g),r),0),(qo.test(g)||qo.test(m))&&(n[h]+="%")):n[h]=g}(e.rotate||t.rotate)&&(n.rotate=cr(e.rotate||0,t.rotate||0,r))}function AT(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const u$=E4(0,.5,lk),d$=E4(.5,.95,Ys);function E4(n,e,t){return r=>r<n?0:r>e?1:t(Cf(n,e,r))}function TT(n,e){n.min=e.min,n.max=e.max}function Hs(n,e){TT(n.x,e.x),TT(n.y,e.y)}function CT(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function ST(n,e,t,r,i){return n-=e,n=Dm(n,1/t,r),i!==void 0&&(n=Dm(n,1/i,r)),n}function h$(n,e=0,t=1,r=.5,i,o=n,c=n){if(qo.test(e)&&(e=parseFloat(e),e=cr(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=cr(o.min,o.max,r);n===o&&(h-=e),n.min=ST(n.min,e,t,h,i),n.max=ST(n.max,e,t,h,i)}function RT(n,e,[t,r,i],o,c){h$(n,e[t],e[r],e[i],e.scale,o,c)}const f$=["x","scaleX","originX"],p$=["y","scaleY","originY"];function NT(n,e,t,r){RT(n.x,e,f$,t?t.x:void 0,r?r.x:void 0),RT(n.y,e,p$,t?t.y:void 0,r?r.y:void 0)}function kT(n){return n.translate===0&&n.scale===1}function b4(n){return kT(n.x)&&kT(n.y)}function PT(n,e){return n.min===e.min&&n.max===e.max}function m$(n,e){return PT(n.x,e.x)&&PT(n.y,e.y)}function DT(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function I4(n,e){return DT(n.x,e.x)&&DT(n.y,e.y)}function OT(n){return Xi(n.x)/Xi(n.y)}function MT(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class g${constructor(){this.members=[]}add(e){m2(this.members,e),e.scheduleRender()}remove(e){if(g2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function y$(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:g,rotate:w,rotateX:E,rotateY:T,skewX:R,skewY:M}=t;g&&(r=`perspective(${g}px) ${r}`),w&&(r+=`rotate(${w}deg) `),E&&(r+=`rotateX(${E}deg) `),T&&(r+=`rotateY(${T}deg) `),R&&(r+=`skewX(${R}deg) `),M&&(r+=`skewY(${M}deg) `)}const h=n.x.scale*e.x,m=n.y.scale*e.y;return(h!==1||m!==1)&&(r+=`scale(${h}, ${m})`),r||"none"}const Xy=["","X","Y","Z"],x$=1e3;let w$=0;function Yy(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function A4(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=u4(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",tr,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&A4(r)}function T4({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},h=e==null?void 0:e()){this.id=w$++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(E$),this.nodes.forEach(T$),this.nodes.forEach(C$),this.nodes.forEach(b$)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new o$)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new w2),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const m=this.eventHandlers.get(c);m&&m.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=Uk(c)&&!dH(c),this.instance=c;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),n){let w,E=0;const T=()=>this.root.updateBlockedByResize=!1;tr.read(()=>{E=window.innerWidth}),n(c,()=>{const R=window.innerWidth;R!==E&&(E=R,this.root.updateBlockedByResize=!0,w&&w(),w=a$(T,250),Y0.hasAnimatedSinceResize&&(Y0.hasAnimatedSinceResize=!1,this.nodes.forEach(FT)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeLayoutChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||g.getDefaultTransition()||P$,{onLayoutAnimationStart:D,onLayoutAnimationComplete:L}=g.getProps(),G=!this.targetLayout||!I4(this.targetLayout,R),z=!E&&T;if(this.options.layoutRoot||this.resumeFrom||z||E&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const W={...P2(M,"layout"),onPlay:D,onComplete:L};(g.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W),this.setAnimationOrigin(w,z)}else E||FT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S$),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&A4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const E=this.path[w];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(VT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(A$),this.nodes.forEach(v$),this.nodes.forEach(_$)):this.nodes.forEach(VT),this.clearAllSnapshots();const h=hs.now();mi.delta=Oa(0,1e3/60,h-mi.timestamp),mi.timestamp=h,mi.isProcessing=!0,Fy.update.process(mi),Fy.preRender.process(mi),Fy.render.process(mi),mi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,O2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(I$),this.sharedNodes.forEach(R$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xi(this.snapshot.measuredBox.x)&&!Xi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const m=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:m,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!b4(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,w=g!==this.prevTransformTemplateValue;c&&this.instance&&(h||Ic(this.latestValues)||w)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return c&&(m=this.removeTransform(m)),D$(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:c}=this.options;if(!c)return Nr();const h=c.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(O$))){const{scroll:w}=this.root;w&&(td(h.x,w.offset.x),td(h.y,w.offset.y))}return h}removeElementScroll(c){var m;const h=Nr();if(Hs(h,c),(m=this.scroll)!=null&&m.wasRoot)return h;for(let g=0;g<this.path.length;g++){const w=this.path[g],{scroll:E,options:T}=w;w!==this.root&&E&&T.layoutScroll&&(E.wasRoot&&Hs(h,c),td(h.x,E.offset.x),td(h.y,E.offset.y))}return h}applyTransform(c,h=!1){const m=Nr();Hs(m,c);for(let g=0;g<this.path.length;g++){const w=this.path[g];!h&&w.options.layoutScroll&&w.scroll&&w!==w.root&&nd(m,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Ic(w.latestValues)&&nd(m,w.latestValues)}return Ic(this.latestValues)&&nd(m,this.latestValues),m}removeTransform(c){const h=Nr();Hs(h,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!Ic(g.latestValues))continue;pw(g.latestValues)&&g.updateSnapshot();const w=Nr(),E=g.measurePageBox();Hs(w,E),NT(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,w)}return Ic(this.latestValues)&&NT(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var T;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=mi.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),sf(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),Hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nr(),this.targetWithTransforms=Nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Hs(this.target,this.layout.layoutBox),i4(this.target,this.targetDelta)):Hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),sf(this.relativeTargetOrigin,this.target,R.target),Hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||pw(this.parent.latestValues)||r4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let m=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===mi.timestamp&&(m=!1),m)return;const{layout:g,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||w))return;Hs(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,T=this.treeScale.y;ZH(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Nr());const{target:R}=c;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(CT(this.prevProjectionDelta.x,this.projectionDelta.x),CT(this.prevProjectionDelta.y,this.projectionDelta.y)),rf(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==T||!MT(this.projectionDelta.x,this.prevProjectionDelta.x)||!MT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rd(),this.projectionDelta=rd(),this.projectionDeltaWithTransform=rd()}setAnimationOrigin(c,h=!1){const m=this.snapshot,g=m?m.latestValues:{},w={...this.latestValues},E=rd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=Nr(),R=m?m.source:void 0,M=this.layout?this.layout.source:void 0,D=R!==M,L=this.getStack(),G=!L||L.members.length<=1,z=!!(D&&!G&&this.options.crossfade===!0&&!this.path.some(k$));this.animationProgress=0;let W;this.mixTargetDelta=Y=>{const Z=Y/1e3;BT(E.x,c.x,Z),BT(E.y,c.y,Z),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sf(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),N$(this.relativeTarget,this.relativeTargetOrigin,T,Z),W&&m$(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=Nr()),Hs(W,this.relativeTarget)),D&&(this.animationValues=w,c$(w,g,this.latestValues,Z,z,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,m,g;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(g=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||g.stop(),this.pendingAnimation&&(jl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tr.update(()=>{Y0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nd(0)),this.currentAnimation=i$(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),c.onUpdate&&c.onUpdate(w)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(x$),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:w}=c;if(!(!h||!m||!g)){if(this!==c&&this.layout&&g&&C4(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||Nr();const E=Xi(this.layout.layoutBox.x);m.x.min=c.target.x.min,m.x.max=m.x.min+E;const T=Xi(this.layout.layoutBox.y);m.y.min=c.target.y.min,m.y.max=m.y.min+T}Hs(h,m),nd(h,w),rf(this.projectionDeltaWithTransform,this.layoutCorrected,h,w)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new g$),this.sharedNodes.get(c).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:m}=c;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&Yy("z",c,g,this.animationValues);for(let w=0;w<Xy.length;w++)Yy(`rotate${Xy[w]}`,c,g,this.animationValues),Yy(`skew${Xy[w]}`,c,g,this.animationValues);c.render();for(const w in g)c.setStaticValue(w,g[w]),this.animationValues&&(this.animationValues[w]=g[w]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=X0(h==null?void 0:h.pointerEvents)||"",c.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=X0(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Ic(this.latestValues)&&(c.transform=m?m({},""):"none",this.hasProjected=!1);return}c.visibility="";const w=g.animationValues||g.latestValues;this.applyTransformsToTarget();let E=y$(this.projectionDeltaWithTransform,this.treeScale,w);m&&(E=m(w,E)),c.transform=E;const{x:T,y:R}=this.projectionDelta;c.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,g.animationValues?c.opacity=g===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:c.opacity=g===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const M in kf){if(w[M]===void 0)continue;const{correct:D,applyTo:L,isCSSVariable:G}=kf[M],z=E==="none"?w[M]:D(w[M],g);if(L){const W=L.length;for(let Y=0;Y<W;Y++)c[L[Y]]=z}else G?this.options.visualElement.renderState.vars[M]=z:c[M]=z}this.options.layoutId&&(c.pointerEvents=g===this?X0(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(LT),this.root.sharedNodes.clear()}}}function v$(n){n.updateLayout()}function _$(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,c=e.source!==n.layout.source;o==="size"?Gs(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],R=Xi(T);T.min=r[E].min,T.max=T.min+R}):C4(o,e.layoutBox,r)&&Gs(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],R=Xi(r[E]);T.max=T.min+R,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[E].max=n.relativeTarget[E].min+R)});const h=rd();rf(h,r,e.layoutBox);const m=rd();c?rf(m,n.applyTransform(i,!0),e.measuredBox):rf(m,r,e.layoutBox);const g=!b4(h);let w=!1;if(!n.resumeFrom){const E=n.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:T,layout:R}=E;if(T&&R){const M=Nr();sf(M,e.layoutBox,T.layoutBox);const D=Nr();sf(D,r,R.layoutBox),I4(M,D)||(w=!0),E.options.layoutRoot&&(n.relativeTarget=D,n.relativeTargetOrigin=M,n.relativeParent=E)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:m,layoutDelta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:w})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function E$(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function b$(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function I$(n){n.clearSnapshot()}function LT(n){n.clearMeasurements()}function VT(n){n.isLayoutDirty=!1}function A$(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function FT(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function T$(n){n.resolveTargetDelta()}function C$(n){n.calcProjection()}function S$(n){n.resetSkewAndRotation()}function R$(n){n.removeLeadSnapshot()}function BT(n,e,t){n.translate=cr(e.translate,0,t),n.scale=cr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function jT(n,e,t,r){n.min=cr(e.min,t.min,r),n.max=cr(e.max,t.max,r)}function N$(n,e,t,r){jT(n.x,e.x,t.x,r),jT(n.y,e.y,t.y,r)}function k$(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const P$={duration:.45,ease:[.4,0,.1,1]},UT=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),zT=UT("applewebkit/")&&!UT("chrome/")?Math.round:Ys;function WT(n){n.min=zT(n.min),n.max=zT(n.max)}function D$(n){WT(n.x),WT(n.y)}function C4(n,e,t){return n==="position"||n==="preserve-aspect"&&!BG(OT(e),OT(t),.2)}function O$(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const M$=T4({attachResizeListener:(n,e)=>Pf(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qy={current:void 0},S4=T4({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Qy.current){const n=new M$({});n.mount(window),n.setOptions({layoutScroll:!0}),Qy.current=n}return Qy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),L$={pan:{Feature:e$},drag:{Feature:JG,ProjectionNode:S4,MeasureLayout:v4}};function HT(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&tr.postRender(()=>o(e,lp(e)))}class V$ extends Yl{mount(){const{current:e}=this.node;e&&(this.unmount=oH(e,(t,r)=>(HT(this.node,r,"Start"),i=>HT(this.node,i,"End"))))}unmount(){}}class F$ extends Yl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ip(Pf(this.node.current,"focus",()=>this.onFocus()),Pf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function GT(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&tr.postRender(()=>o(e,lp(e)))}class B$ extends Yl{mount(){const{current:e}=this.node;e&&(this.unmount=uH(e,(t,r)=>(GT(this.node,r,"Start"),(i,{success:o})=>GT(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _w=new WeakMap,Zy=new WeakMap,j$=n=>{const e=_w.get(n.target);e&&e(n)},U$=n=>{n.forEach(j$)};function z$({root:n,...e}){const t=n||document;Zy.has(t)||Zy.set(t,{});const r=Zy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(U$,{root:n,...e})),r[i]}function W$(n,e,t){const r=z$(e);return _w.set(n,t),r.observe(n),()=>{_w.delete(n),r.unobserve(n)}}const H$={some:0,all:1};class G$ extends Yl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:H$[i]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:w,onViewportLeave:E}=this.node.getProps(),T=g?w:E;T&&T(m)};return W$(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some($$(e,t))&&this.startObserver()}unmount(){}}function $$({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const q$={inView:{Feature:G$},tap:{Feature:B$},focus:{Feature:F$},hover:{Feature:V$}},K$={layout:{ProjectionNode:S4,MeasureLayout:v4}},X$={...DG,...q$,...L$,...K$},Zo=XH(X$,lG);function Y$({matchName:n,onDismiss:e,onSeeMatches:t}){const r=ta(),i=()=>{t&&t(),r(Mn("Matches")),e()};return A.jsxs(Zo.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-pink-500 via-purple-500 to-indigo-600 text-white rounded-xl shadow-2xl",children:[A.jsx("button",{onClick:e,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:A.jsx(Yi,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(oM,{className:"w-10 h-10 text-yellow-300 flex-shrink-0"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold",children:"It's a Match!"}),A.jsxs("p",{className:"text-sm opacity-90",children:["You and ",n," liked each other."]})]})]}),A.jsxs(Ut,{onClick:i,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["See Matches ",A.jsx(qw,{className:"w-4 h-4 ml-2"})]})]})}function Q$({senderName:n,senderSessionId:e,onDismiss:t,onView:r}){const i=ta(),o=()=>{r&&r(),i(Mn(`Matches?openChat=${e}`)),t()};return A.jsxs(Zo.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-blue-500 via-sky-500 to-cyan-600 text-white rounded-xl shadow-2xl",children:[A.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:A.jsx(Yi,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(lf,{className:"w-10 h-10 text-white/80 flex-shrink-0"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold",children:"New Message"}),A.jsxs("p",{className:"text-sm opacity-90",children:["You have a new message from ",n,"."]})]})]}),A.jsxs(Ut,{onClick:o,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["View Message ",A.jsx(qw,{className:"w-4 h-4 ml-2"})]})]})}const zl=P.forwardRef(({className:n,type:e,...t},r)=>A.jsx("input",{type:e,className:ln("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));zl.displayName="Input";const Om=P.forwardRef(({className:n,...e},t)=>A.jsx("textarea",{className:ln("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));Om.displayName="Textarea";var Z$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nn=Z$.reduce((n,e)=>{const t=Rd(`Primitive.${e}`),r=P.forwardRef((i,o)=>{const{asChild:c,...h}=i,m=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(m,{...h,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function J$(n,e){n&&jf.flushSync(()=>n.dispatchEvent(e))}var eq="Label",R4=P.forwardRef((n,e)=>A.jsx(nn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));R4.displayName=eq;var N4=R4;const tq=Cg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),cs=P.forwardRef(({className:n,...e},t)=>A.jsx(N4,{ref:t,className:ln(tq(),n),...e}));cs.displayName=N4.displayName;function Mm(n,[e,t]){return Math.min(t,Math.max(e,n))}function an(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function nq(n,e){const t=P.createContext(e),r=o=>{const{children:c,...h}=o,m=P.useMemo(()=>h,Object.values(h));return A.jsx(t.Provider,{value:m,children:c})};r.displayName=n+"Provider";function i(o){const c=P.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,i]}function $d(n,e=[]){let t=[];function r(o,c){const h=P.createContext(c),m=t.length;t=[...t,c];const g=E=>{var G;const{scope:T,children:R,...M}=E,D=((G=T==null?void 0:T[n])==null?void 0:G[m])||h,L=P.useMemo(()=>M,Object.values(M));return A.jsx(D.Provider,{value:L,children:R})};g.displayName=o+"Provider";function w(E,T){var D;const R=((D=T==null?void 0:T[n])==null?void 0:D[m])||h,M=P.useContext(R);if(M)return M;if(c!==void 0)return c;throw new Error(`\`${E}\` must be used within \`${o}\``)}return[g,w]}const i=()=>{const o=t.map(c=>P.createContext(c));return function(h){const m=(h==null?void 0:h[n])||o;return P.useMemo(()=>({[`__scope${n}`]:{...h,[n]:m}}),[h,m])}};return i.scopeName=n,[r,rq(i,...e)]}function rq(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((h,{useScope:m,scopeName:g})=>{const E=m(o)[`__scope${g}`];return{...h,...E}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function k4(n){const e=n+"CollectionProvider",[t,r]=$d(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=D=>{const{scope:L,children:G}=D,z=ze.useRef(null),W=ze.useRef(new Map).current;return A.jsx(i,{scope:L,itemMap:W,collectionRef:z,children:G})};c.displayName=e;const h=n+"CollectionSlot",m=Rd(h),g=ze.forwardRef((D,L)=>{const{scope:G,children:z}=D,W=o(h,G),Y=bn(L,W.collectionRef);return A.jsx(m,{ref:Y,children:z})});g.displayName=h;const w=n+"CollectionItemSlot",E="data-radix-collection-item",T=Rd(w),R=ze.forwardRef((D,L)=>{const{scope:G,children:z,...W}=D,Y=ze.useRef(null),Z=bn(L,Y),ie=o(w,G);return ze.useEffect(()=>(ie.itemMap.set(Y,{ref:Y,...W}),()=>void ie.itemMap.delete(Y))),A.jsx(T,{[E]:"",ref:Z,children:z})});R.displayName=w;function M(D){const L=o(n+"CollectionConsumer",D);return ze.useCallback(()=>{const z=L.collectionRef.current;if(!z)return[];const W=Array.from(z.querySelectorAll(`[${E}]`));return Array.from(L.itemMap.values()).sort((ie,F)=>W.indexOf(ie.ref.current)-W.indexOf(F.ref.current))},[L.collectionRef,L.itemMap])}return[{Provider:c,Slot:g,ItemSlot:R},M,r]}var iq=P.createContext(void 0);function P4(n){const e=P.useContext(iq);return n||e||"ltr"}function tu(n){const e=P.useRef(n);return P.useEffect(()=>{e.current=n}),P.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function sq(n,e=globalThis==null?void 0:globalThis.document){const t=tu(n);P.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var oq="DismissableLayer",Ew="dismissableLayer.update",aq="dismissableLayer.pointerDownOutside",lq="dismissableLayer.focusOutside",$T,D4=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$2=P.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:c,onDismiss:h,...m}=n,g=P.useContext(D4),[w,E]=P.useState(null),T=(w==null?void 0:w.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,R]=P.useState({}),M=bn(e,F=>E(F)),D=Array.from(g.layers),[L]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),G=D.indexOf(L),z=w?D.indexOf(w):-1,W=g.layersWithOutsidePointerEventsDisabled.size>0,Y=z>=G,Z=dq(F=>{const B=F.target,H=[...g.branches].some(ee=>ee.contains(B));!Y||H||(i==null||i(F),c==null||c(F),F.defaultPrevented||h==null||h())},T),ie=hq(F=>{const B=F.target;[...g.branches].some(ee=>ee.contains(B))||(o==null||o(F),c==null||c(F),F.defaultPrevented||h==null||h())},T);return sq(F=>{z===g.layers.size-1&&(r==null||r(F),!F.defaultPrevented&&h&&(F.preventDefault(),h()))},T),P.useEffect(()=>{if(w)return t&&(g.layersWithOutsidePointerEventsDisabled.size===0&&($T=T.body.style.pointerEvents,T.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(w)),g.layers.add(w),qT(),()=>{t&&g.layersWithOutsidePointerEventsDisabled.size===1&&(T.body.style.pointerEvents=$T)}},[w,T,t,g]),P.useEffect(()=>()=>{w&&(g.layers.delete(w),g.layersWithOutsidePointerEventsDisabled.delete(w),qT())},[w,g]),P.useEffect(()=>{const F=()=>R({});return document.addEventListener(Ew,F),()=>document.removeEventListener(Ew,F)},[]),A.jsx(nn.div,{...m,ref:M,style:{pointerEvents:W?Y?"auto":"none":void 0,...n.style},onFocusCapture:an(n.onFocusCapture,ie.onFocusCapture),onBlurCapture:an(n.onBlurCapture,ie.onBlurCapture),onPointerDownCapture:an(n.onPointerDownCapture,Z.onPointerDownCapture)})});$2.displayName=oq;var cq="DismissableLayerBranch",uq=P.forwardRef((n,e)=>{const t=P.useContext(D4),r=P.useRef(null),i=bn(e,r);return P.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),A.jsx(nn.div,{...n,ref:i})});uq.displayName=cq;function dq(n,e=globalThis==null?void 0:globalThis.document){const t=tu(n),r=P.useRef(!1),i=P.useRef(()=>{});return P.useEffect(()=>{const o=h=>{if(h.target&&!r.current){let m=function(){O4(aq,t,g,{discrete:!0})};const g={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=m,e.addEventListener("click",i.current,{once:!0})):m()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function hq(n,e=globalThis==null?void 0:globalThis.document){const t=tu(n),r=P.useRef(!1);return P.useEffect(()=>{const i=o=>{o.target&&!r.current&&O4(lq,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qT(){const n=new CustomEvent(Ew);document.dispatchEvent(n)}function O4(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?J$(i,o):i.dispatchEvent(o)}var Jy=0;function M4(){P.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??KT()),document.body.insertAdjacentElement("beforeend",n[1]??KT()),Jy++,()=>{Jy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Jy--}},[])}function KT(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var ex="focusScope.autoFocusOnMount",tx="focusScope.autoFocusOnUnmount",XT={bubbles:!1,cancelable:!0},fq="FocusScope",q2=P.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...c}=n,[h,m]=P.useState(null),g=tu(i),w=tu(o),E=P.useRef(null),T=bn(e,D=>m(D)),R=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(r){let D=function(W){if(R.paused||!h)return;const Y=W.target;h.contains(Y)?E.current=Y:_l(E.current,{select:!0})},L=function(W){if(R.paused||!h)return;const Y=W.relatedTarget;Y!==null&&(h.contains(Y)||_l(E.current,{select:!0}))},G=function(W){if(document.activeElement===document.body)for(const Z of W)Z.removedNodes.length>0&&_l(h)};document.addEventListener("focusin",D),document.addEventListener("focusout",L);const z=new MutationObserver(G);return h&&z.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",L),z.disconnect()}}},[r,h,R.paused]),P.useEffect(()=>{if(h){QT.add(R);const D=document.activeElement;if(!h.contains(D)){const G=new CustomEvent(ex,XT);h.addEventListener(ex,g),h.dispatchEvent(G),G.defaultPrevented||(pq(wq(L4(h)),{select:!0}),document.activeElement===D&&_l(h))}return()=>{h.removeEventListener(ex,g),setTimeout(()=>{const G=new CustomEvent(tx,XT);h.addEventListener(tx,w),h.dispatchEvent(G),G.defaultPrevented||_l(D??document.body,{select:!0}),h.removeEventListener(tx,w),QT.remove(R)},0)}}},[h,g,w,R]);const M=P.useCallback(D=>{if(!t&&!r||R.paused)return;const L=D.key==="Tab"&&!D.altKey&&!D.ctrlKey&&!D.metaKey,G=document.activeElement;if(L&&G){const z=D.currentTarget,[W,Y]=mq(z);W&&Y?!D.shiftKey&&G===Y?(D.preventDefault(),t&&_l(W,{select:!0})):D.shiftKey&&G===W&&(D.preventDefault(),t&&_l(Y,{select:!0})):G===z&&D.preventDefault()}},[t,r,R.paused]);return A.jsx(nn.div,{tabIndex:-1,...c,ref:T,onKeyDown:M})});q2.displayName=fq;function pq(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(_l(r,{select:e}),document.activeElement!==t)return}function mq(n){const e=L4(n),t=YT(e,n),r=YT(e.reverse(),n);return[t,r]}function L4(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function YT(n,e){for(const t of n)if(!gq(t,{upTo:e}))return t}function gq(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function yq(n){return n instanceof HTMLInputElement&&"select"in n}function _l(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&yq(n)&&e&&n.select()}}var QT=xq();function xq(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=ZT(n,e),n.unshift(e)},remove(e){var t;n=ZT(n,e),(t=n[0])==null||t.resume()}}}function ZT(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function wq(n){return n.filter(e=>e.tagName!=="A")}var Vi=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},vq=jC[" useId ".trim().toString()]||(()=>{}),_q=0;function ud(n){const[e,t]=P.useState(vq());return Vi(()=>{t(r=>r??String(_q++))},[n]),e?`radix-${e}`:""}const Eq=["top","right","bottom","left"],Wl=Math.min,As=Math.max,Lm=Math.round,_0=Math.floor,Ko=n=>({x:n,y:n}),bq={left:"right",right:"left",bottom:"top",top:"bottom"},Iq={start:"end",end:"start"};function bw(n,e,t){return As(n,Wl(e,t))}function La(n,e){return typeof n=="function"?n(e):n}function Va(n){return n.split("-")[0]}function qd(n){return n.split("-")[1]}function K2(n){return n==="x"?"y":"x"}function X2(n){return n==="y"?"height":"width"}const Aq=new Set(["top","bottom"]);function Fo(n){return Aq.has(Va(n))?"y":"x"}function Y2(n){return K2(Fo(n))}function Tq(n,e,t){t===void 0&&(t=!1);const r=qd(n),i=Y2(n),o=X2(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=Vm(c)),[c,Vm(c)]}function Cq(n){const e=Vm(n);return[Iw(n),e,Iw(e)]}function Iw(n){return n.replace(/start|end/g,e=>Iq[e])}const JT=["left","right"],eC=["right","left"],Sq=["top","bottom"],Rq=["bottom","top"];function Nq(n,e,t){switch(n){case"top":case"bottom":return t?e?eC:JT:e?JT:eC;case"left":case"right":return e?Sq:Rq;default:return[]}}function kq(n,e,t,r){const i=qd(n);let o=Nq(Va(n),t==="start",r);return i&&(o=o.map(c=>c+"-"+i),e&&(o=o.concat(o.map(Iw)))),o}function Vm(n){return n.replace(/left|right|bottom|top/g,e=>bq[e])}function Pq(n){return{top:0,right:0,bottom:0,left:0,...n}}function V4(n){return typeof n!="number"?Pq(n):{top:n,right:n,bottom:n,left:n}}function Fm(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function tC(n,e,t){let{reference:r,floating:i}=n;const o=Fo(e),c=Y2(e),h=X2(c),m=Va(e),g=o==="y",w=r.x+r.width/2-i.width/2,E=r.y+r.height/2-i.height/2,T=r[h]/2-i[h]/2;let R;switch(m){case"top":R={x:w,y:r.y-i.height};break;case"bottom":R={x:w,y:r.y+r.height};break;case"right":R={x:r.x+r.width,y:E};break;case"left":R={x:r.x-i.width,y:E};break;default:R={x:r.x,y:r.y}}switch(qd(e)){case"start":R[c]-=T*(t&&g?-1:1);break;case"end":R[c]+=T*(t&&g?-1:1);break}return R}const Dq=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:c}=t,h=o.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(e));let g=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:w,y:E}=tC(g,r,m),T=r,R={},M=0;for(let D=0;D<h.length;D++){const{name:L,fn:G}=h[D],{x:z,y:W,data:Y,reset:Z}=await G({x:w,y:E,initialPlacement:r,placement:T,strategy:i,middlewareData:R,rects:g,platform:c,elements:{reference:n,floating:e}});w=z??w,E=W??E,R={...R,[L]:{...R[L],...Y}},Z&&M<=50&&(M++,typeof Z=="object"&&(Z.placement&&(T=Z.placement),Z.rects&&(g=Z.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):Z.rects),{x:w,y:E}=tC(g,T,m)),D=-1)}return{x:w,y:E,placement:T,strategy:i,middlewareData:R}};async function Df(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:c,elements:h,strategy:m}=n,{boundary:g="clippingAncestors",rootBoundary:w="viewport",elementContext:E="floating",altBoundary:T=!1,padding:R=0}=La(e,n),M=V4(R),L=h[T?E==="floating"?"reference":"floating":E],G=Fm(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(L)))==null||t?L:L.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(h.floating)),boundary:g,rootBoundary:w,strategy:m})),z=E==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,W=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h.floating)),Y=await(o.isElement==null?void 0:o.isElement(W))?await(o.getScale==null?void 0:o.getScale(W))||{x:1,y:1}:{x:1,y:1},Z=Fm(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:z,offsetParent:W,strategy:m}):z);return{top:(G.top-Z.top+M.top)/Y.y,bottom:(Z.bottom-G.bottom+M.bottom)/Y.y,left:(G.left-Z.left+M.left)/Y.x,right:(Z.right-G.right+M.right)/Y.x}}const Oq=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:o,platform:c,elements:h,middlewareData:m}=e,{element:g,padding:w=0}=La(n,e)||{};if(g==null)return{};const E=V4(w),T={x:t,y:r},R=Y2(i),M=X2(R),D=await c.getDimensions(g),L=R==="y",G=L?"top":"left",z=L?"bottom":"right",W=L?"clientHeight":"clientWidth",Y=o.reference[M]+o.reference[R]-T[R]-o.floating[M],Z=T[R]-o.reference[R],ie=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g));let F=ie?ie[W]:0;(!F||!await(c.isElement==null?void 0:c.isElement(ie)))&&(F=h.floating[W]||o.floating[M]);const B=Y/2-Z/2,H=F/2-D[M]/2-1,ee=Wl(E[G],H),ne=Wl(E[z],H),te=ee,K=F-D[M]-ne,we=F/2-D[M]/2+B,se=bw(te,we,K),Ae=!m.arrow&&qd(i)!=null&&we!==se&&o.reference[M]/2-(we<te?ee:ne)-D[M]/2<0,xe=Ae?we<te?we-te:we-K:0;return{[R]:T[R]+xe,data:{[R]:se,centerOffset:we-se-xe,...Ae&&{alignmentOffset:xe}},reset:Ae}}}),Mq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:c,initialPlacement:h,platform:m,elements:g}=e,{mainAxis:w=!0,crossAxis:E=!0,fallbackPlacements:T,fallbackStrategy:R="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:D=!0,...L}=La(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const G=Va(i),z=Fo(h),W=Va(h)===h,Y=await(m.isRTL==null?void 0:m.isRTL(g.floating)),Z=T||(W||!D?[Vm(h)]:Cq(h)),ie=M!=="none";!T&&ie&&Z.push(...kq(h,D,M,Y));const F=[h,...Z],B=await Df(e,L),H=[];let ee=((r=o.flip)==null?void 0:r.overflows)||[];if(w&&H.push(B[G]),E){const we=Tq(i,c,Y);H.push(B[we[0]],B[we[1]])}if(ee=[...ee,{placement:i,overflows:H}],!H.every(we=>we<=0)){var ne,te;const we=(((ne=o.flip)==null?void 0:ne.index)||0)+1,se=F[we];if(se&&(!(E==="alignment"?z!==Fo(se):!1)||ee.every(oe=>Fo(oe.placement)===z?oe.overflows[0]>0:!0)))return{data:{index:we,overflows:ee},reset:{placement:se}};let Ae=(te=ee.filter(xe=>xe.overflows[0]<=0).sort((xe,oe)=>xe.overflows[1]-oe.overflows[1])[0])==null?void 0:te.placement;if(!Ae)switch(R){case"bestFit":{var K;const xe=(K=ee.filter(oe=>{if(ie){const Te=Fo(oe.placement);return Te===z||Te==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(Te=>Te>0).reduce((Te,Ne)=>Te+Ne,0)]).sort((oe,Te)=>oe[1]-Te[1])[0])==null?void 0:K[0];xe&&(Ae=xe);break}case"initialPlacement":Ae=h;break}if(i!==Ae)return{reset:{placement:Ae}}}return{}}}};function nC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function rC(n){return Eq.some(e=>n[e]>=0)}const Lq=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=La(n,e);switch(r){case"referenceHidden":{const o=await Df(e,{...i,elementContext:"reference"}),c=nC(o,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:rC(c)}}}case"escaped":{const o=await Df(e,{...i,altBoundary:!0}),c=nC(o,t.floating);return{data:{escapedOffsets:c,escaped:rC(c)}}}default:return{}}}}},F4=new Set(["left","top"]);async function Vq(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=Va(t),h=qd(t),m=Fo(t)==="y",g=F4.has(c)?-1:1,w=o&&m?-1:1,E=La(e,n);let{mainAxis:T,crossAxis:R,alignmentAxis:M}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return h&&typeof M=="number"&&(R=h==="end"?M*-1:M),m?{x:R*w,y:T*g}:{x:T*g,y:R*w}}const Fq=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:c,middlewareData:h}=e,m=await Vq(e,n);return c===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:i+m.x,y:o+m.y,data:{...m,placement:c}}}}},Bq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:h={fn:L=>{let{x:G,y:z}=L;return{x:G,y:z}}},...m}=La(n,e),g={x:t,y:r},w=await Df(e,m),E=Fo(Va(i)),T=K2(E);let R=g[T],M=g[E];if(o){const L=T==="y"?"top":"left",G=T==="y"?"bottom":"right",z=R+w[L],W=R-w[G];R=bw(z,R,W)}if(c){const L=E==="y"?"top":"left",G=E==="y"?"bottom":"right",z=M+w[L],W=M-w[G];M=bw(z,M,W)}const D=h.fn({...e,[T]:R,[E]:M});return{...D,data:{x:D.x-t,y:D.y-r,enabled:{[T]:o,[E]:c}}}}}},jq=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:o,middlewareData:c}=e,{offset:h=0,mainAxis:m=!0,crossAxis:g=!0}=La(n,e),w={x:t,y:r},E=Fo(i),T=K2(E);let R=w[T],M=w[E];const D=La(h,e),L=typeof D=="number"?{mainAxis:D,crossAxis:0}:{mainAxis:0,crossAxis:0,...D};if(m){const W=T==="y"?"height":"width",Y=o.reference[T]-o.floating[W]+L.mainAxis,Z=o.reference[T]+o.reference[W]-L.mainAxis;R<Y?R=Y:R>Z&&(R=Z)}if(g){var G,z;const W=T==="y"?"width":"height",Y=F4.has(Va(i)),Z=o.reference[E]-o.floating[W]+(Y&&((G=c.offset)==null?void 0:G[E])||0)+(Y?0:L.crossAxis),ie=o.reference[E]+o.reference[W]+(Y?0:((z=c.offset)==null?void 0:z[E])||0)-(Y?L.crossAxis:0);M<Z?M=Z:M>ie&&(M=ie)}return{[T]:R,[E]:M}}}},Uq=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:o,platform:c,elements:h}=e,{apply:m=()=>{},...g}=La(n,e),w=await Df(e,g),E=Va(i),T=qd(i),R=Fo(i)==="y",{width:M,height:D}=o.floating;let L,G;E==="top"||E==="bottom"?(L=E,G=T===(await(c.isRTL==null?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(G=E,L=T==="end"?"top":"bottom");const z=D-w.top-w.bottom,W=M-w.left-w.right,Y=Wl(D-w[L],z),Z=Wl(M-w[G],W),ie=!e.middlewareData.shift;let F=Y,B=Z;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(B=W),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=z),ie&&!T){const ee=As(w.left,0),ne=As(w.right,0),te=As(w.top,0),K=As(w.bottom,0);R?B=M-2*(ee!==0||ne!==0?ee+ne:As(w.left,w.right)):F=D-2*(te!==0||K!==0?te+K:As(w.top,w.bottom))}await m({...e,availableWidth:B,availableHeight:F});const H=await c.getDimensions(h.floating);return M!==H.width||D!==H.height?{reset:{rects:!0}}:{}}}};function Pg(){return typeof window<"u"}function Kd(n){return B4(n)?(n.nodeName||"").toLowerCase():"#document"}function ks(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ra(n){var e;return(e=(B4(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function B4(n){return Pg()?n instanceof Node||n instanceof ks(n).Node:!1}function mo(n){return Pg()?n instanceof Element||n instanceof ks(n).Element:!1}function Jo(n){return Pg()?n instanceof HTMLElement||n instanceof ks(n).HTMLElement:!1}function iC(n){return!Pg()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ks(n).ShadowRoot}const zq=new Set(["inline","contents"]);function cp(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=go(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!zq.has(i)}const Wq=new Set(["table","td","th"]);function Hq(n){return Wq.has(Kd(n))}const Gq=[":popover-open",":modal"];function Dg(n){return Gq.some(e=>{try{return n.matches(e)}catch{return!1}})}const $q=["transform","translate","scale","rotate","perspective"],qq=["transform","translate","scale","rotate","perspective","filter"],Kq=["paint","layout","strict","content"];function Q2(n){const e=Z2(),t=mo(n)?go(n):n;return $q.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||qq.some(r=>(t.willChange||"").includes(r))||Kq.some(r=>(t.contain||"").includes(r))}function Xq(n){let e=Hl(n);for(;Jo(e)&&!Pd(e);){if(Q2(e))return e;if(Dg(e))return null;e=Hl(e)}return null}function Z2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Yq=new Set(["html","body","#document"]);function Pd(n){return Yq.has(Kd(n))}function go(n){return ks(n).getComputedStyle(n)}function Og(n){return mo(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Hl(n){if(Kd(n)==="html")return n;const e=n.assignedSlot||n.parentNode||iC(n)&&n.host||ra(n);return iC(e)?e.host:e}function j4(n){const e=Hl(n);return Pd(e)?n.ownerDocument?n.ownerDocument.body:n.body:Jo(e)&&cp(e)?e:j4(e)}function Of(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=j4(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),c=ks(i);if(o){const h=Aw(c);return e.concat(c,c.visualViewport||[],cp(i)?i:[],h&&t?Of(h):[])}return e.concat(i,Of(i,[],t))}function Aw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function U4(n){const e=go(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Jo(n),o=i?n.offsetWidth:t,c=i?n.offsetHeight:r,h=Lm(t)!==o||Lm(r)!==c;return h&&(t=o,r=c),{width:t,height:r,$:h}}function J2(n){return mo(n)?n:n.contextElement}function dd(n){const e=J2(n);if(!Jo(e))return Ko(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=U4(e);let c=(o?Lm(t.width):t.width)/r,h=(o?Lm(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const Qq=Ko(0);function z4(n){const e=ks(n);return!Z2()||!e.visualViewport?Qq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Zq(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ks(n)?!1:e}function nu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=J2(n);let c=Ko(1);e&&(r?mo(r)&&(c=dd(r)):c=dd(n));const h=Zq(o,t,r)?z4(o):Ko(0);let m=(i.left+h.x)/c.x,g=(i.top+h.y)/c.y,w=i.width/c.x,E=i.height/c.y;if(o){const T=ks(o),R=r&&mo(r)?ks(r):r;let M=T,D=Aw(M);for(;D&&r&&R!==M;){const L=dd(D),G=D.getBoundingClientRect(),z=go(D),W=G.left+(D.clientLeft+parseFloat(z.paddingLeft))*L.x,Y=G.top+(D.clientTop+parseFloat(z.paddingTop))*L.y;m*=L.x,g*=L.y,w*=L.x,E*=L.y,m+=W,g+=Y,M=ks(D),D=Aw(M)}}return Fm({width:w,height:E,x:m,y:g})}function e_(n,e){const t=Og(n).scrollLeft;return e?e.left+t:nu(ra(n)).left+t}function W4(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:e_(n,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function Jq(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",c=ra(r),h=e?Dg(e.floating):!1;if(r===c||h&&o)return t;let m={scrollLeft:0,scrollTop:0},g=Ko(1);const w=Ko(0),E=Jo(r);if((E||!E&&!o)&&((Kd(r)!=="body"||cp(c))&&(m=Og(r)),Jo(r))){const R=nu(r);g=dd(r),w.x=R.x+r.clientLeft,w.y=R.y+r.clientTop}const T=c&&!E&&!o?W4(c,m,!0):Ko(0);return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-m.scrollLeft*g.x+w.x+T.x,y:t.y*g.y-m.scrollTop*g.y+w.y+T.y}}function eK(n){return Array.from(n.getClientRects())}function tK(n){const e=ra(n),t=Og(n),r=n.ownerDocument.body,i=As(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=As(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+e_(n);const h=-t.scrollTop;return go(r).direction==="rtl"&&(c+=As(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:c,y:h}}function nK(n,e){const t=ks(n),r=ra(n),i=t.visualViewport;let o=r.clientWidth,c=r.clientHeight,h=0,m=0;if(i){o=i.width,c=i.height;const g=Z2();(!g||g&&e==="fixed")&&(h=i.offsetLeft,m=i.offsetTop)}return{width:o,height:c,x:h,y:m}}const rK=new Set(["absolute","fixed"]);function iK(n,e){const t=nu(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=Jo(n)?dd(n):Ko(1),c=n.clientWidth*o.x,h=n.clientHeight*o.y,m=i*o.x,g=r*o.y;return{width:c,height:h,x:m,y:g}}function sC(n,e,t){let r;if(e==="viewport")r=nK(n,t);else if(e==="document")r=tK(ra(n));else if(mo(e))r=iK(e,t);else{const i=z4(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Fm(r)}function H4(n,e){const t=Hl(n);return t===e||!mo(t)||Pd(t)?!1:go(t).position==="fixed"||H4(t,e)}function sK(n,e){const t=e.get(n);if(t)return t;let r=Of(n,[],!1).filter(h=>mo(h)&&Kd(h)!=="body"),i=null;const o=go(n).position==="fixed";let c=o?Hl(n):n;for(;mo(c)&&!Pd(c);){const h=go(c),m=Q2(c);!m&&h.position==="fixed"&&(i=null),(o?!m&&!i:!m&&h.position==="static"&&!!i&&rK.has(i.position)||cp(c)&&!m&&H4(n,c))?r=r.filter(w=>w!==c):i=h,c=Hl(c)}return e.set(n,r),r}function oK(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?Dg(e)?[]:sK(e,this._c):[].concat(t),r],h=c[0],m=c.reduce((g,w)=>{const E=sC(e,w,i);return g.top=As(E.top,g.top),g.right=Wl(E.right,g.right),g.bottom=Wl(E.bottom,g.bottom),g.left=As(E.left,g.left),g},sC(e,h,i));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function aK(n){const{width:e,height:t}=U4(n);return{width:e,height:t}}function lK(n,e,t){const r=Jo(e),i=ra(e),o=t==="fixed",c=nu(n,!0,o,e);let h={scrollLeft:0,scrollTop:0};const m=Ko(0);function g(){m.x=e_(i)}if(r||!r&&!o)if((Kd(e)!=="body"||cp(i))&&(h=Og(e)),r){const R=nu(e,!0,o,e);m.x=R.x+e.clientLeft,m.y=R.y+e.clientTop}else i&&g();o&&!r&&i&&g();const w=i&&!r&&!o?W4(i,h):Ko(0),E=c.left+h.scrollLeft-m.x-w.x,T=c.top+h.scrollTop-m.y-w.y;return{x:E,y:T,width:c.width,height:c.height}}function nx(n){return go(n).position==="static"}function oC(n,e){if(!Jo(n)||go(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ra(n)===t&&(t=t.ownerDocument.body),t}function G4(n,e){const t=ks(n);if(Dg(n))return t;if(!Jo(n)){let i=Hl(n);for(;i&&!Pd(i);){if(mo(i)&&!nx(i))return i;i=Hl(i)}return t}let r=oC(n,e);for(;r&&Hq(r)&&nx(r);)r=oC(r,e);return r&&Pd(r)&&nx(r)&&!Q2(r)?t:r||Xq(n)||t}const cK=async function(n){const e=this.getOffsetParent||G4,t=this.getDimensions,r=await t(n.floating);return{reference:lK(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uK(n){return go(n).direction==="rtl"}const dK={convertOffsetParentRelativeRectToViewportRelativeRect:Jq,getDocumentElement:ra,getClippingRect:oK,getOffsetParent:G4,getElementRects:cK,getClientRects:eK,getDimensions:aK,getScale:dd,isElement:mo,isRTL:uK};function $4(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function hK(n,e){let t=null,r;const i=ra(n);function o(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function c(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),o();const g=n.getBoundingClientRect(),{left:w,top:E,width:T,height:R}=g;if(h||e(),!T||!R)return;const M=_0(E),D=_0(i.clientWidth-(w+T)),L=_0(i.clientHeight-(E+R)),G=_0(w),W={rootMargin:-M+"px "+-D+"px "+-L+"px "+-G+"px",threshold:As(0,Wl(1,m))||1};let Y=!0;function Z(ie){const F=ie[0].intersectionRatio;if(F!==m){if(!Y)return c();F?c(!1,F):r=setTimeout(()=>{c(!1,1e-7)},1e3)}F===1&&!$4(g,n.getBoundingClientRect())&&c(),Y=!1}try{t=new IntersectionObserver(Z,{...W,root:i.ownerDocument})}catch{t=new IntersectionObserver(Z,W)}t.observe(n)}return c(!0),o}function fK(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=r,g=J2(n),w=i||o?[...g?Of(g):[],...Of(e)]:[];w.forEach(G=>{i&&G.addEventListener("scroll",t,{passive:!0}),o&&G.addEventListener("resize",t)});const E=g&&h?hK(g,t):null;let T=-1,R=null;c&&(R=new ResizeObserver(G=>{let[z]=G;z&&z.target===g&&R&&(R.unobserve(e),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var W;(W=R)==null||W.observe(e)})),t()}),g&&!m&&R.observe(g),R.observe(e));let M,D=m?nu(n):null;m&&L();function L(){const G=nu(n);D&&!$4(D,G)&&t(),D=G,M=requestAnimationFrame(L)}return t(),()=>{var G;w.forEach(z=>{i&&z.removeEventListener("scroll",t),o&&z.removeEventListener("resize",t)}),E==null||E(),(G=R)==null||G.disconnect(),R=null,m&&cancelAnimationFrame(M)}}const pK=Fq,mK=Bq,gK=Mq,yK=Uq,xK=Lq,aC=Oq,wK=jq,vK=(n,e,t)=>{const r=new Map,i={platform:dK,...t},o={...i.platform,_c:r};return Dq(n,e,{...i,platform:o})};var _K=typeof document<"u",EK=function(){},Q0=_K?P.useLayoutEffect:EK;function Bm(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Bm(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const o=i[r];if(!(o==="_owner"&&n.$$typeof)&&!Bm(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function q4(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function lC(n,e){const t=q4(n);return Math.round(e*t)/t}function rx(n){const e=P.useRef(n);return Q0(()=>{e.current=n}),e}function bK(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:c}={},transform:h=!0,whileElementsMounted:m,open:g}=n,[w,E]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[T,R]=P.useState(r);Bm(T,r)||R(r);const[M,D]=P.useState(null),[L,G]=P.useState(null),z=P.useCallback(oe=>{oe!==ie.current&&(ie.current=oe,D(oe))},[]),W=P.useCallback(oe=>{oe!==F.current&&(F.current=oe,G(oe))},[]),Y=o||M,Z=c||L,ie=P.useRef(null),F=P.useRef(null),B=P.useRef(w),H=m!=null,ee=rx(m),ne=rx(i),te=rx(g),K=P.useCallback(()=>{if(!ie.current||!F.current)return;const oe={placement:e,strategy:t,middleware:T};ne.current&&(oe.platform=ne.current),vK(ie.current,F.current,oe).then(Te=>{const Ne={...Te,isPositioned:te.current!==!1};we.current&&!Bm(B.current,Ne)&&(B.current=Ne,jf.flushSync(()=>{E(Ne)}))})},[T,e,t,ne,te]);Q0(()=>{g===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,E(oe=>({...oe,isPositioned:!1})))},[g]);const we=P.useRef(!1);Q0(()=>(we.current=!0,()=>{we.current=!1}),[]),Q0(()=>{if(Y&&(ie.current=Y),Z&&(F.current=Z),Y&&Z){if(ee.current)return ee.current(Y,Z,K);K()}},[Y,Z,K,ee,H]);const se=P.useMemo(()=>({reference:ie,floating:F,setReference:z,setFloating:W}),[z,W]),Ae=P.useMemo(()=>({reference:Y,floating:Z}),[Y,Z]),xe=P.useMemo(()=>{const oe={position:t,left:0,top:0};if(!Ae.floating)return oe;const Te=lC(Ae.floating,w.x),Ne=lC(Ae.floating,w.y);return h?{...oe,transform:"translate("+Te+"px, "+Ne+"px)",...q4(Ae.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Te,top:Ne}},[t,h,Ae.floating,w.x,w.y]);return P.useMemo(()=>({...w,update:K,refs:se,elements:Ae,floatingStyles:xe}),[w,K,se,Ae,xe])}const IK=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?aC({element:r.current,padding:i}).fn(t):{}:r?aC({element:r,padding:i}).fn(t):{}}}},AK=(n,e)=>({...pK(n),options:[n,e]}),TK=(n,e)=>({...mK(n),options:[n,e]}),CK=(n,e)=>({...wK(n),options:[n,e]}),SK=(n,e)=>({...gK(n),options:[n,e]}),RK=(n,e)=>({...yK(n),options:[n,e]}),NK=(n,e)=>({...xK(n),options:[n,e]}),kK=(n,e)=>({...IK(n),options:[n,e]});var PK="Arrow",K4=P.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...o}=n;return A.jsx(nn.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:A.jsx("polygon",{points:"0,0 30,0 15,10"})})});K4.displayName=PK;var DK=K4;function t_(n){const[e,t]=P.useState(void 0);return Vi(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let c,h;if("borderBoxSize"in o){const m=o.borderBoxSize,g=Array.isArray(m)?m[0]:m;c=g.inlineSize,h=g.blockSize}else c=n.offsetWidth,h=n.offsetHeight;t({width:c,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var n_="Popper",[X4,Y4]=$d(n_),[OK,Q4]=X4(n_),Z4=n=>{const{__scopePopper:e,children:t}=n,[r,i]=P.useState(null);return A.jsx(OK,{scope:e,anchor:r,onAnchorChange:i,children:t})};Z4.displayName=n_;var J4="PopperAnchor",eP=P.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,o=Q4(J4,t),c=P.useRef(null),h=bn(e,c);return P.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:A.jsx(nn.div,{...i,ref:h})});eP.displayName=J4;var r_="PopperContent",[MK,LK]=X4(r_),tP=P.forwardRef((n,e)=>{var Pe,Ge,at,st,ct,bt;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:c=0,arrowPadding:h=0,avoidCollisions:m=!0,collisionBoundary:g=[],collisionPadding:w=0,sticky:E="partial",hideWhenDetached:T=!1,updatePositionStrategy:R="optimized",onPlaced:M,...D}=n,L=Q4(r_,t),[G,z]=P.useState(null),W=bn(e,ht=>z(ht)),[Y,Z]=P.useState(null),ie=t_(Y),F=(ie==null?void 0:ie.width)??0,B=(ie==null?void 0:ie.height)??0,H=r+(o!=="center"?"-"+o:""),ee=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},ne=Array.isArray(g)?g:[g],te=ne.length>0,K={padding:ee,boundary:ne.filter(FK),altBoundary:te},{refs:we,floatingStyles:se,placement:Ae,isPositioned:xe,middlewareData:oe}=bK({strategy:"fixed",placement:H,whileElementsMounted:(...ht)=>fK(...ht,{animationFrame:R==="always"}),elements:{reference:L.anchor},middleware:[AK({mainAxis:i+B,alignmentAxis:c}),m&&TK({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?CK():void 0,...K}),m&&SK({...K}),RK({...K,apply:({elements:ht,rects:gn,availableWidth:Vn,availableHeight:Dr})=>{const{width:Qt,height:zt}=gn.reference,pt=ht.floating.style;pt.setProperty("--radix-popper-available-width",`${Vn}px`),pt.setProperty("--radix-popper-available-height",`${Dr}px`),pt.setProperty("--radix-popper-anchor-width",`${Qt}px`),pt.setProperty("--radix-popper-anchor-height",`${zt}px`)}}),Y&&kK({element:Y,padding:h}),BK({arrowWidth:F,arrowHeight:B}),T&&NK({strategy:"referenceHidden",...K})]}),[Te,Ne]=iP(Ae),ae=tu(M);Vi(()=>{xe&&(ae==null||ae())},[xe,ae]);const he=(Pe=oe.arrow)==null?void 0:Pe.x,Se=(Ge=oe.arrow)==null?void 0:Ge.y,Le=((at=oe.arrow)==null?void 0:at.centerOffset)!==0,[it,Re]=P.useState();return Vi(()=>{G&&Re(window.getComputedStyle(G).zIndex)},[G]),A.jsx("div",{ref:we.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:xe?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:it,"--radix-popper-transform-origin":[(st=oe.transformOrigin)==null?void 0:st.x,(ct=oe.transformOrigin)==null?void 0:ct.y].join(" "),...((bt=oe.hide)==null?void 0:bt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:A.jsx(MK,{scope:t,placedSide:Te,onArrowChange:Z,arrowX:he,arrowY:Se,shouldHideArrow:Le,children:A.jsx(nn.div,{"data-side":Te,"data-align":Ne,...D,ref:W,style:{...D.style,animation:xe?void 0:"none"}})})})});tP.displayName=r_;var nP="PopperArrow",VK={top:"bottom",right:"left",bottom:"top",left:"right"},rP=P.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,o=LK(nP,r),c=VK[o.placedSide];return A.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:A.jsx(DK,{...i,ref:t,style:{...i.style,display:"block"}})})});rP.displayName=nP;function FK(n){return n!==null}var BK=n=>({name:"transformOrigin",options:n,fn(e){var L,G,z;const{placement:t,rects:r,middlewareData:i}=e,c=((L=i.arrow)==null?void 0:L.centerOffset)!==0,h=c?0:n.arrowWidth,m=c?0:n.arrowHeight,[g,w]=iP(t),E={start:"0%",center:"50%",end:"100%"}[w],T=(((G=i.arrow)==null?void 0:G.x)??0)+h/2,R=(((z=i.arrow)==null?void 0:z.y)??0)+m/2;let M="",D="";return g==="bottom"?(M=c?E:`${T}px`,D=`${-m}px`):g==="top"?(M=c?E:`${T}px`,D=`${r.floating.height+m}px`):g==="right"?(M=`${-m}px`,D=c?E:`${R}px`):g==="left"&&(M=`${r.floating.width+m}px`,D=c?E:`${R}px`),{data:{x:M,y:D}}}});function iP(n){const[e,t="center"]=n.split("-");return[e,t]}var jK=Z4,UK=eP,zK=tP,WK=rP,HK="Portal",i_=P.forwardRef((n,e)=>{var h;const{container:t,...r}=n,[i,o]=P.useState(!1);Vi(()=>o(!0),[]);const c=t||i&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return c?sS.createPortal(A.jsx(nn.div,{...r,ref:e}),c):null});i_.displayName=HK;var GK=jC[" useInsertionEffect ".trim().toString()]||Vi;function Mf({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,c]=$K({defaultProp:e,onChange:t}),h=n!==void 0,m=h?n:i;{const w=P.useRef(n!==void 0);P.useEffect(()=>{const E=w.current;E!==h&&console.warn(`${r} is changing from ${E?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),w.current=h},[h,r])}const g=P.useCallback(w=>{var E;if(h){const T=qK(w)?w(n):w;T!==n&&((E=c.current)==null||E.call(c,T))}else o(w)},[h,n,o,c]);return[m,g]}function $K({defaultProp:n,onChange:e}){const[t,r]=P.useState(n),i=P.useRef(t),o=P.useRef(e);return GK(()=>{o.current=e},[e]),P.useEffect(()=>{var c;i.current!==t&&((c=o.current)==null||c.call(o,t),i.current=t)},[t,i]),[t,r,o]}function qK(n){return typeof n=="function"}function s_(n){const e=P.useRef({value:n,previous:n});return P.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var sP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),KK="VisuallyHidden",XK=P.forwardRef((n,e)=>A.jsx(nn.span,{...n,ref:e,style:{...sP,...n.style}}));XK.displayName=KK;var YK=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Wu=new WeakMap,E0=new WeakMap,b0={},ix=0,oP=function(n){return n&&(n.host||oP(n.parentNode))},QK=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=oP(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},ZK=function(n,e,t,r){var i=QK(e,Array.isArray(n)?n:[n]);b0[t]||(b0[t]=new WeakMap);var o=b0[t],c=[],h=new Set,m=new Set(i),g=function(E){!E||h.has(E)||(h.add(E),g(E.parentNode))};i.forEach(g);var w=function(E){!E||m.has(E)||Array.prototype.forEach.call(E.children,function(T){if(h.has(T))w(T);else try{var R=T.getAttribute(r),M=R!==null&&R!=="false",D=(Wu.get(T)||0)+1,L=(o.get(T)||0)+1;Wu.set(T,D),o.set(T,L),c.push(T),D===1&&M&&E0.set(T,!0),L===1&&T.setAttribute(t,"true"),M||T.setAttribute(r,"true")}catch(G){console.error("aria-hidden: cannot operate on ",T,G)}})};return w(e),h.clear(),ix++,function(){c.forEach(function(E){var T=Wu.get(E)-1,R=o.get(E)-1;Wu.set(E,T),o.set(E,R),T||(E0.has(E)||E.removeAttribute(r),E0.delete(E)),R||E.removeAttribute(t)}),ix--,ix||(Wu=new WeakMap,Wu=new WeakMap,E0=new WeakMap,b0={})}},aP=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=YK(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),ZK(r,i,t,"aria-hidden")):function(){return null}},Oo=function(){return Oo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Oo.apply(this,arguments)};function lP(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function JK(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var Z0="right-scroll-bar-position",J0="width-before-scroll-bar",eX="with-scroll-bars-hidden",tX="--removed-body-scroll-bar-size";function sx(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function nX(n,e){var t=P.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var rX=typeof window<"u"?P.useLayoutEffect:P.useEffect,cC=new WeakMap;function iX(n,e){var t=nX(null,function(r){return n.forEach(function(i){return sx(i,r)})});return rX(function(){var r=cC.get(t);if(r){var i=new Set(r),o=new Set(n),c=t.current;i.forEach(function(h){o.has(h)||sx(h,null)}),o.forEach(function(h){i.has(h)||sx(h,c)})}cC.set(t,n)},[n]),t}function sX(n){return n}function oX(n,e){e===void 0&&(e=sX);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var c=e(o,r);return t.push(c),function(){t=t.filter(function(h){return h!==c})}},assignSyncMedium:function(o){for(r=!0;t.length;){var c=t;t=[],c.forEach(o)}t={push:function(h){return o(h)},filter:function(){return t}}},assignMedium:function(o){r=!0;var c=[];if(t.length){var h=t;t=[],h.forEach(o),c=t}var m=function(){var w=c;c=[],w.forEach(o)},g=function(){return Promise.resolve().then(m)};g(),t={push:function(w){c.push(w),g()},filter:function(w){return c=c.filter(w),t}}}};return i}function aX(n){n===void 0&&(n={});var e=oX(null);return e.options=Oo({async:!0,ssr:!1},n),e}var cP=function(n){var e=n.sideCar,t=lP(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,Oo({},t))};cP.isSideCarExport=!0;function lX(n,e){return n.useMedium(e),cP}var uP=aX(),ox=function(){},Mg=P.forwardRef(function(n,e){var t=P.useRef(null),r=P.useState({onScrollCapture:ox,onWheelCapture:ox,onTouchMoveCapture:ox}),i=r[0],o=r[1],c=n.forwardProps,h=n.children,m=n.className,g=n.removeScrollBar,w=n.enabled,E=n.shards,T=n.sideCar,R=n.noRelative,M=n.noIsolation,D=n.inert,L=n.allowPinchZoom,G=n.as,z=G===void 0?"div":G,W=n.gapMode,Y=lP(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Z=T,ie=iX([t,e]),F=Oo(Oo({},Y),i);return P.createElement(P.Fragment,null,w&&P.createElement(Z,{sideCar:uP,removeScrollBar:g,shards:E,noRelative:R,noIsolation:M,inert:D,setCallbacks:o,allowPinchZoom:!!L,lockRef:t,gapMode:W}),c?P.cloneElement(P.Children.only(h),Oo(Oo({},F),{ref:ie})):P.createElement(z,Oo({},F,{className:m,ref:ie}),h))});Mg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Mg.classNames={fullWidth:J0,zeroRight:Z0};var cX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function uX(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=cX();return e&&n.setAttribute("nonce",e),n}function dX(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function hX(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var fX=function(){var n=0,e=null;return{add:function(t){n==0&&(e=uX())&&(dX(e,t),hX(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},pX=function(){var n=fX();return function(e,t){P.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},dP=function(){var n=pX(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},mX={left:0,top:0,right:0,gap:0},ax=function(n){return parseInt(n||"",10)||0},gX=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[ax(t),ax(r),ax(i)]},yX=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return mX;var e=gX(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},xX=dP(),hd="data-scroll-locked",wX=function(n,e,t,r){var i=n.left,o=n.top,c=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(eX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(hd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Z0,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(J0,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(Z0," .").concat(Z0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(J0," .").concat(J0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hd,`] {
    `).concat(tX,": ").concat(h,`px;
  }
`)},uC=function(){var n=parseInt(document.body.getAttribute(hd)||"0",10);return isFinite(n)?n:0},vX=function(){P.useEffect(function(){return document.body.setAttribute(hd,(uC()+1).toString()),function(){var n=uC()-1;n<=0?document.body.removeAttribute(hd):document.body.setAttribute(hd,n.toString())}},[])},_X=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;vX();var o=P.useMemo(function(){return yX(i)},[i]);return P.createElement(xX,{styles:wX(o,!e,i,t?"":"!important")})},Tw=!1;if(typeof window<"u")try{var I0=Object.defineProperty({},"passive",{get:function(){return Tw=!0,!0}});window.addEventListener("test",I0,I0),window.removeEventListener("test",I0,I0)}catch{Tw=!1}var Hu=Tw?{passive:!1}:!1,EX=function(n){return n.tagName==="TEXTAREA"},hP=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!EX(n)&&t[e]==="visible")},bX=function(n){return hP(n,"overflowY")},IX=function(n){return hP(n,"overflowX")},dC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=fP(n,r);if(i){var o=pP(n,r),c=o[1],h=o[2];if(c>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},AX=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},TX=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},fP=function(n,e){return n==="v"?bX(e):IX(e)},pP=function(n,e){return n==="v"?AX(e):TX(e)},CX=function(n,e){return n==="h"&&e==="rtl"?-1:1},SX=function(n,e,t,r,i){var o=CX(n,window.getComputedStyle(e).direction),c=o*r,h=t.target,m=e.contains(h),g=!1,w=c>0,E=0,T=0;do{if(!h)break;var R=pP(n,h),M=R[0],D=R[1],L=R[2],G=D-L-o*M;(M||G)&&fP(n,h)&&(E+=G,T+=M);var z=h.parentNode;h=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!m&&h!==document.body||m&&(e.contains(h)||e===h));return(w&&Math.abs(E)<1||!w&&Math.abs(T)<1)&&(g=!0),g},A0=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},hC=function(n){return[n.deltaX,n.deltaY]},fC=function(n){return n&&"current"in n?n.current:n},RX=function(n,e){return n[0]===e[0]&&n[1]===e[1]},NX=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},kX=0,Gu=[];function PX(n){var e=P.useRef([]),t=P.useRef([0,0]),r=P.useRef(),i=P.useState(kX++)[0],o=P.useState(dP)[0],c=P.useRef(n);P.useEffect(function(){c.current=n},[n]),P.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var D=JK([n.lockRef.current],(n.shards||[]).map(fC),!0).filter(Boolean);return D.forEach(function(L){return L.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),D.forEach(function(L){return L.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var h=P.useCallback(function(D,L){if("touches"in D&&D.touches.length===2||D.type==="wheel"&&D.ctrlKey)return!c.current.allowPinchZoom;var G=A0(D),z=t.current,W="deltaX"in D?D.deltaX:z[0]-G[0],Y="deltaY"in D?D.deltaY:z[1]-G[1],Z,ie=D.target,F=Math.abs(W)>Math.abs(Y)?"h":"v";if("touches"in D&&F==="h"&&ie.type==="range")return!1;var B=dC(F,ie);if(!B)return!0;if(B?Z=F:(Z=F==="v"?"h":"v",B=dC(F,ie)),!B)return!1;if(!r.current&&"changedTouches"in D&&(W||Y)&&(r.current=Z),!Z)return!0;var H=r.current||Z;return SX(H,L,D,H==="h"?W:Y)},[]),m=P.useCallback(function(D){var L=D;if(!(!Gu.length||Gu[Gu.length-1]!==o)){var G="deltaY"in L?hC(L):A0(L),z=e.current.filter(function(Z){return Z.name===L.type&&(Z.target===L.target||L.target===Z.shadowParent)&&RX(Z.delta,G)})[0];if(z&&z.should){L.cancelable&&L.preventDefault();return}if(!z){var W=(c.current.shards||[]).map(fC).filter(Boolean).filter(function(Z){return Z.contains(L.target)}),Y=W.length>0?h(L,W[0]):!c.current.noIsolation;Y&&L.cancelable&&L.preventDefault()}}},[]),g=P.useCallback(function(D,L,G,z){var W={name:D,delta:L,target:G,should:z,shadowParent:DX(G)};e.current.push(W),setTimeout(function(){e.current=e.current.filter(function(Y){return Y!==W})},1)},[]),w=P.useCallback(function(D){t.current=A0(D),r.current=void 0},[]),E=P.useCallback(function(D){g(D.type,hC(D),D.target,h(D,n.lockRef.current))},[]),T=P.useCallback(function(D){g(D.type,A0(D),D.target,h(D,n.lockRef.current))},[]);P.useEffect(function(){return Gu.push(o),n.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:T}),document.addEventListener("wheel",m,Hu),document.addEventListener("touchmove",m,Hu),document.addEventListener("touchstart",w,Hu),function(){Gu=Gu.filter(function(D){return D!==o}),document.removeEventListener("wheel",m,Hu),document.removeEventListener("touchmove",m,Hu),document.removeEventListener("touchstart",w,Hu)}},[]);var R=n.removeScrollBar,M=n.inert;return P.createElement(P.Fragment,null,M?P.createElement(o,{styles:NX(i)}):null,R?P.createElement(_X,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function DX(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const OX=lX(uP,PX);var o_=P.forwardRef(function(n,e){return P.createElement(Mg,Oo({},n,{ref:e,sideCar:OX}))});o_.classNames=Mg.classNames;var MX=[" ","Enter","ArrowUp","ArrowDown"],LX=[" ","Enter"],ru="Select",[Lg,Vg,VX]=k4(ru),[Xd,$J]=$d(ru,[VX,Y4]),Fg=Y4(),[FX,Ql]=Xd(ru),[BX,jX]=Xd(ru),mP=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:o,value:c,defaultValue:h,onValueChange:m,dir:g,name:w,autoComplete:E,disabled:T,required:R,form:M}=n,D=Fg(e),[L,G]=P.useState(null),[z,W]=P.useState(null),[Y,Z]=P.useState(!1),ie=P4(g),[F,B]=Mf({prop:r,defaultProp:i??!1,onChange:o,caller:ru}),[H,ee]=Mf({prop:c,defaultProp:h,onChange:m,caller:ru}),ne=P.useRef(null),te=L?M||!!L.closest("form"):!0,[K,we]=P.useState(new Set),se=Array.from(K).map(Ae=>Ae.props.value).join(";");return A.jsx(jK,{...D,children:A.jsxs(FX,{required:R,scope:e,trigger:L,onTriggerChange:G,valueNode:z,onValueNodeChange:W,valueNodeHasChildren:Y,onValueNodeHasChildrenChange:Z,contentId:ud(),value:H,onValueChange:ee,open:F,onOpenChange:B,dir:ie,triggerPointerDownPosRef:ne,disabled:T,children:[A.jsx(Lg.Provider,{scope:e,children:A.jsx(BX,{scope:n.__scopeSelect,onNativeOptionAdd:P.useCallback(Ae=>{we(xe=>new Set(xe).add(Ae))},[]),onNativeOptionRemove:P.useCallback(Ae=>{we(xe=>{const oe=new Set(xe);return oe.delete(Ae),oe})},[]),children:t})}),te?A.jsxs(BP,{"aria-hidden":!0,required:R,tabIndex:-1,name:w,autoComplete:E,value:H,onChange:Ae=>ee(Ae.target.value),disabled:T,form:M,children:[H===void 0?A.jsx("option",{value:""}):null,Array.from(K)]},se):null]})})};mP.displayName=ru;var gP="SelectTrigger",yP=P.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,o=Fg(t),c=Ql(gP,t),h=c.disabled||r,m=bn(e,c.onTriggerChange),g=Vg(t),w=P.useRef("touch"),[E,T,R]=UP(D=>{const L=g().filter(W=>!W.disabled),G=L.find(W=>W.value===c.value),z=zP(L,D,G);z!==void 0&&c.onValueChange(z.value)}),M=D=>{h||(c.onOpenChange(!0),R()),D&&(c.triggerPointerDownPosRef.current={x:Math.round(D.pageX),y:Math.round(D.pageY)})};return A.jsx(UK,{asChild:!0,...o,children:A.jsx(nn.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":jP(c.value)?"":void 0,...i,ref:m,onClick:an(i.onClick,D=>{D.currentTarget.focus(),w.current!=="mouse"&&M(D)}),onPointerDown:an(i.onPointerDown,D=>{w.current=D.pointerType;const L=D.target;L.hasPointerCapture(D.pointerId)&&L.releasePointerCapture(D.pointerId),D.button===0&&D.ctrlKey===!1&&D.pointerType==="mouse"&&(M(D),D.preventDefault())}),onKeyDown:an(i.onKeyDown,D=>{const L=E.current!=="";!(D.ctrlKey||D.altKey||D.metaKey)&&D.key.length===1&&T(D.key),!(L&&D.key===" ")&&MX.includes(D.key)&&(M(),D.preventDefault())})})})});yP.displayName=gP;var xP="SelectValue",wP=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:o,placeholder:c="",...h}=n,m=Ql(xP,t),{onValueNodeHasChildrenChange:g}=m,w=o!==void 0,E=bn(e,m.onValueNodeChange);return Vi(()=>{g(w)},[g,w]),A.jsx(nn.span,{...h,ref:E,style:{pointerEvents:"none"},children:jP(m.value)?A.jsx(A.Fragment,{children:c}):o})});wP.displayName=xP;var UX="SelectIcon",vP=P.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return A.jsx(nn.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});vP.displayName=UX;var zX="SelectPortal",_P=n=>A.jsx(i_,{asChild:!0,...n});_P.displayName=zX;var iu="SelectContent",EP=P.forwardRef((n,e)=>{const t=Ql(iu,n.__scopeSelect),[r,i]=P.useState();if(Vi(()=>{i(new DocumentFragment)},[]),!t.open){const o=r;return o?jf.createPortal(A.jsx(bP,{scope:n.__scopeSelect,children:A.jsx(Lg.Slot,{scope:n.__scopeSelect,children:A.jsx("div",{children:n.children})})}),o):null}return A.jsx(IP,{...n,ref:e})});EP.displayName=iu;var lo=10,[bP,Zl]=Xd(iu),WX="SelectContentImpl",HX=Rd("SelectContent.RemoveScroll"),IP=P.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:h,sideOffset:m,align:g,alignOffset:w,arrowPadding:E,collisionBoundary:T,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L,...G}=n,z=Ql(iu,t),[W,Y]=P.useState(null),[Z,ie]=P.useState(null),F=bn(e,Pe=>Y(Pe)),[B,H]=P.useState(null),[ee,ne]=P.useState(null),te=Vg(t),[K,we]=P.useState(!1),se=P.useRef(!1);P.useEffect(()=>{if(W)return aP(W)},[W]),M4();const Ae=P.useCallback(Pe=>{const[Ge,...at]=te().map(bt=>bt.ref.current),[st]=at.slice(-1),ct=document.activeElement;for(const bt of Pe)if(bt===ct||(bt==null||bt.scrollIntoView({block:"nearest"}),bt===Ge&&Z&&(Z.scrollTop=0),bt===st&&Z&&(Z.scrollTop=Z.scrollHeight),bt==null||bt.focus(),document.activeElement!==ct))return},[te,Z]),xe=P.useCallback(()=>Ae([B,W]),[Ae,B,W]);P.useEffect(()=>{K&&xe()},[K,xe]);const{onOpenChange:oe,triggerPointerDownPosRef:Te}=z;P.useEffect(()=>{if(W){let Pe={x:0,y:0};const Ge=st=>{var ct,bt;Pe={x:Math.abs(Math.round(st.pageX)-(((ct=Te.current)==null?void 0:ct.x)??0)),y:Math.abs(Math.round(st.pageY)-(((bt=Te.current)==null?void 0:bt.y)??0))}},at=st=>{Pe.x<=10&&Pe.y<=10?st.preventDefault():W.contains(st.target)||oe(!1),document.removeEventListener("pointermove",Ge),Te.current=null};return Te.current!==null&&(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",at,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ge),document.removeEventListener("pointerup",at,{capture:!0})}}},[W,oe,Te]),P.useEffect(()=>{const Pe=()=>oe(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[oe]);const[Ne,ae]=UP(Pe=>{const Ge=te().filter(ct=>!ct.disabled),at=Ge.find(ct=>ct.ref.current===document.activeElement),st=zP(Ge,Pe,at);st&&setTimeout(()=>st.ref.current.focus())}),he=P.useCallback((Pe,Ge,at)=>{const st=!se.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&(H(Pe),st&&(se.current=!0))},[z.value]),Se=P.useCallback(()=>W==null?void 0:W.focus(),[W]),Le=P.useCallback((Pe,Ge,at)=>{const st=!se.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&ne(Pe)},[z.value]),it=r==="popper"?Cw:AP,Re=it===Cw?{side:h,sideOffset:m,align:g,alignOffset:w,arrowPadding:E,collisionBoundary:T,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L}:{};return A.jsx(bP,{scope:t,content:W,viewport:Z,onViewportChange:ie,itemRefCallback:he,selectedItem:B,onItemLeave:Se,itemTextRefCallback:Le,focusSelectedItem:xe,selectedItemText:ee,position:r,isPositioned:K,searchRef:Ne,children:A.jsx(o_,{as:HX,allowPinchZoom:!0,children:A.jsx(q2,{asChild:!0,trapped:z.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:an(i,Pe=>{var Ge;(Ge=z.trigger)==null||Ge.focus({preventScroll:!0}),Pe.preventDefault()}),children:A.jsx($2,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:A.jsx(it,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:Pe=>Pe.preventDefault(),...G,...Re,onPlaced:()=>we(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...G.style},onKeyDown:an(G.onKeyDown,Pe=>{const Ge=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Ge&&Pe.key.length===1&&ae(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let st=te().filter(ct=>!ct.disabled).map(ct=>ct.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(st=st.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const ct=Pe.target,bt=st.indexOf(ct);st=st.slice(bt+1)}setTimeout(()=>Ae(st)),Pe.preventDefault()}})})})})})})});IP.displayName=WX;var GX="SelectItemAlignedPosition",AP=P.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,o=Ql(iu,t),c=Zl(iu,t),[h,m]=P.useState(null),[g,w]=P.useState(null),E=bn(e,F=>w(F)),T=Vg(t),R=P.useRef(!1),M=P.useRef(!0),{viewport:D,selectedItem:L,selectedItemText:G,focusSelectedItem:z}=c,W=P.useCallback(()=>{if(o.trigger&&o.valueNode&&h&&g&&D&&L&&G){const F=o.trigger.getBoundingClientRect(),B=g.getBoundingClientRect(),H=o.valueNode.getBoundingClientRect(),ee=G.getBoundingClientRect();if(o.dir!=="rtl"){const ct=ee.left-B.left,bt=H.left-ct,ht=F.left-bt,gn=F.width+ht,Vn=Math.max(gn,B.width),Dr=window.innerWidth-lo,Qt=Mm(bt,[lo,Math.max(lo,Dr-Vn)]);h.style.minWidth=gn+"px",h.style.left=Qt+"px"}else{const ct=B.right-ee.right,bt=window.innerWidth-H.right-ct,ht=window.innerWidth-F.right-bt,gn=F.width+ht,Vn=Math.max(gn,B.width),Dr=window.innerWidth-lo,Qt=Mm(bt,[lo,Math.max(lo,Dr-Vn)]);h.style.minWidth=gn+"px",h.style.right=Qt+"px"}const ne=T(),te=window.innerHeight-lo*2,K=D.scrollHeight,we=window.getComputedStyle(g),se=parseInt(we.borderTopWidth,10),Ae=parseInt(we.paddingTop,10),xe=parseInt(we.borderBottomWidth,10),oe=parseInt(we.paddingBottom,10),Te=se+Ae+K+oe+xe,Ne=Math.min(L.offsetHeight*5,Te),ae=window.getComputedStyle(D),he=parseInt(ae.paddingTop,10),Se=parseInt(ae.paddingBottom,10),Le=F.top+F.height/2-lo,it=te-Le,Re=L.offsetHeight/2,Pe=L.offsetTop+Re,Ge=se+Ae+Pe,at=Te-Ge;if(Ge<=Le){const ct=ne.length>0&&L===ne[ne.length-1].ref.current;h.style.bottom="0px";const bt=g.clientHeight-D.offsetTop-D.offsetHeight,ht=Math.max(it,Re+(ct?Se:0)+bt+xe),gn=Ge+ht;h.style.height=gn+"px"}else{const ct=ne.length>0&&L===ne[0].ref.current;h.style.top="0px";const ht=Math.max(Le,se+D.offsetTop+(ct?he:0)+Re)+at;h.style.height=ht+"px",D.scrollTop=Ge-Le+D.offsetTop}h.style.margin=`${lo}px 0`,h.style.minHeight=Ne+"px",h.style.maxHeight=te+"px",r==null||r(),requestAnimationFrame(()=>R.current=!0)}},[T,o.trigger,o.valueNode,h,g,D,L,G,o.dir,r]);Vi(()=>W(),[W]);const[Y,Z]=P.useState();Vi(()=>{g&&Z(window.getComputedStyle(g).zIndex)},[g]);const ie=P.useCallback(F=>{F&&M.current===!0&&(W(),z==null||z(),M.current=!1)},[W,z]);return A.jsx(qX,{scope:t,contentWrapper:h,shouldExpandOnScrollRef:R,onScrollButtonChange:ie,children:A.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Y},children:A.jsx(nn.div,{...i,ref:E,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});AP.displayName=GX;var $X="SelectPopperPosition",Cw=P.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=lo,...o}=n,c=Fg(t);return A.jsx(zK,{...c,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cw.displayName=$X;var[qX,a_]=Xd(iu,{}),Sw="SelectViewport",TP=P.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,o=Zl(Sw,t),c=a_(Sw,t),h=bn(e,o.onViewportChange),m=P.useRef(0);return A.jsxs(A.Fragment,{children:[A.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),A.jsx(Lg.Slot,{scope:t,children:A.jsx(nn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:an(i.onScroll,g=>{const w=g.currentTarget,{contentWrapper:E,shouldExpandOnScrollRef:T}=c;if(T!=null&&T.current&&E){const R=Math.abs(m.current-w.scrollTop);if(R>0){const M=window.innerHeight-lo*2,D=parseFloat(E.style.minHeight),L=parseFloat(E.style.height),G=Math.max(D,L);if(G<M){const z=G+R,W=Math.min(M,z),Y=z-W;E.style.height=W+"px",E.style.bottom==="0px"&&(w.scrollTop=Y>0?Y:0,E.style.justifyContent="flex-end")}}}m.current=w.scrollTop})})})]})});TP.displayName=Sw;var CP="SelectGroup",[KX,XX]=Xd(CP),YX=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=ud();return A.jsx(KX,{scope:t,id:i,children:A.jsx(nn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});YX.displayName=CP;var SP="SelectLabel",RP=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=XX(SP,t);return A.jsx(nn.div,{id:i.id,...r,ref:e})});RP.displayName=SP;var jm="SelectItem",[QX,NP]=Xd(jm),kP=P.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:o,...c}=n,h=Ql(jm,t),m=Zl(jm,t),g=h.value===r,[w,E]=P.useState(o??""),[T,R]=P.useState(!1),M=bn(e,z=>{var W;return(W=m.itemRefCallback)==null?void 0:W.call(m,z,r,i)}),D=ud(),L=P.useRef("touch"),G=()=>{i||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return A.jsx(QX,{scope:t,value:r,disabled:i,textId:D,isSelected:g,onItemTextChange:P.useCallback(z=>{E(W=>W||((z==null?void 0:z.textContent)??"").trim())},[]),children:A.jsx(Lg.ItemSlot,{scope:t,value:r,disabled:i,textValue:w,children:A.jsx(nn.div,{role:"option","aria-labelledby":D,"data-highlighted":T?"":void 0,"aria-selected":g&&T,"data-state":g?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:M,onFocus:an(c.onFocus,()=>R(!0)),onBlur:an(c.onBlur,()=>R(!1)),onClick:an(c.onClick,()=>{L.current!=="mouse"&&G()}),onPointerUp:an(c.onPointerUp,()=>{L.current==="mouse"&&G()}),onPointerDown:an(c.onPointerDown,z=>{L.current=z.pointerType}),onPointerMove:an(c.onPointerMove,z=>{var W;L.current=z.pointerType,i?(W=m.onItemLeave)==null||W.call(m):L.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:an(c.onPointerLeave,z=>{var W;z.currentTarget===document.activeElement&&((W=m.onItemLeave)==null||W.call(m))}),onKeyDown:an(c.onKeyDown,z=>{var Y;((Y=m.searchRef)==null?void 0:Y.current)!==""&&z.key===" "||(LX.includes(z.key)&&G(),z.key===" "&&z.preventDefault())})})})})});kP.displayName=jm;var jh="SelectItemText",PP=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...o}=n,c=Ql(jh,t),h=Zl(jh,t),m=NP(jh,t),g=jX(jh,t),[w,E]=P.useState(null),T=bn(e,G=>E(G),m.onItemTextChange,G=>{var z;return(z=h.itemTextRefCallback)==null?void 0:z.call(h,G,m.value,m.disabled)}),R=w==null?void 0:w.textContent,M=P.useMemo(()=>A.jsx("option",{value:m.value,disabled:m.disabled,children:R},m.value),[m.disabled,m.value,R]),{onNativeOptionAdd:D,onNativeOptionRemove:L}=g;return Vi(()=>(D(M),()=>L(M)),[D,L,M]),A.jsxs(A.Fragment,{children:[A.jsx(nn.span,{id:m.textId,...o,ref:T}),m.isSelected&&c.valueNode&&!c.valueNodeHasChildren?jf.createPortal(o.children,c.valueNode):null]})});PP.displayName=jh;var DP="SelectItemIndicator",OP=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return NP(DP,t).isSelected?A.jsx(nn.span,{"aria-hidden":!0,...r,ref:e}):null});OP.displayName=DP;var Rw="SelectScrollUpButton",MP=P.forwardRef((n,e)=>{const t=Zl(Rw,n.__scopeSelect),r=a_(Rw,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Vi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=m.scrollTop>0;o(g)};const m=t.viewport;return h(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?A.jsx(VP,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:m}=t;h&&m&&(h.scrollTop=h.scrollTop-m.offsetHeight)}}):null});MP.displayName=Rw;var Nw="SelectScrollDownButton",LP=P.forwardRef((n,e)=>{const t=Zl(Nw,n.__scopeSelect),r=a_(Nw,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Vi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=m.scrollHeight-m.clientHeight,w=Math.ceil(m.scrollTop)<g;o(w)};const m=t.viewport;return h(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?A.jsx(VP,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:m}=t;h&&m&&(h.scrollTop=h.scrollTop+m.offsetHeight)}}):null});LP.displayName=Nw;var VP=P.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,o=Zl("SelectScrollButton",t),c=P.useRef(null),h=Vg(t),m=P.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return P.useEffect(()=>()=>m(),[m]),Vi(()=>{var w;const g=h().find(E=>E.ref.current===document.activeElement);(w=g==null?void 0:g.ref.current)==null||w.scrollIntoView({block:"nearest"})},[h]),A.jsx(nn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:an(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:an(i.onPointerMove,()=>{var g;(g=o.onItemLeave)==null||g.call(o),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:an(i.onPointerLeave,()=>{m()})})}),ZX="SelectSeparator",FP=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return A.jsx(nn.div,{"aria-hidden":!0,...r,ref:e})});FP.displayName=ZX;var kw="SelectArrow",JX=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Fg(t),o=Ql(kw,t),c=Zl(kw,t);return o.open&&c.position==="popper"?A.jsx(WK,{...i,...r,ref:e}):null});JX.displayName=kw;var eY="SelectBubbleInput",BP=P.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(r,i),c=s_(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const m=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(c!==e&&w){const E=new Event("change",{bubbles:!0});w.call(h,e),h.dispatchEvent(E)}},[c,e]),A.jsx(nn.select,{...t,style:{...sP,...t.style},ref:o,defaultValue:e})});BP.displayName=eY;function jP(n){return n===""||n===void 0}function UP(n){const e=tu(n),t=P.useRef(""),r=P.useRef(0),i=P.useCallback(c=>{const h=t.current+c;e(h),function m(g){t.current=g,window.clearTimeout(r.current),g!==""&&(r.current=window.setTimeout(()=>m(""),1e3))}(h)},[e]),o=P.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,o]}function zP(n,e,t){const i=e.length>1&&Array.from(e).every(g=>g===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let c=tY(n,Math.max(o,0));i.length===1&&(c=c.filter(g=>g!==t));const m=c.find(g=>g.textValue.toLowerCase().startsWith(i.toLowerCase()));return m!==t?m:void 0}function tY(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var nY=mP,WP=yP,rY=wP,iY=vP,sY=_P,HP=EP,oY=TP,GP=RP,$P=kP,aY=PP,lY=OP,qP=MP,KP=LP,XP=FP;const pC=nY,mC=rY,Pw=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(WP,{ref:r,className:ln("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,A.jsx(iY,{asChild:!0,children:A.jsx(Kw,{className:"h-4 w-4 opacity-50"})})]}));Pw.displayName=WP.displayName;const YP=P.forwardRef(({className:n,...e},t)=>A.jsx(qP,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:A.jsx(aS,{className:"h-4 w-4"})}));YP.displayName=qP.displayName;const QP=P.forwardRef(({className:n,...e},t)=>A.jsx(KP,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:A.jsx(Kw,{className:"h-4 w-4"})}));QP.displayName=KP.displayName;const Dw=P.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>A.jsx(sY,{children:A.jsxs(HP,{ref:i,className:ln("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[A.jsx(YP,{}),A.jsx(oY,{className:ln("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),A.jsx(QP,{})]})}));Dw.displayName=HP.displayName;const cY=P.forwardRef(({className:n,...e},t)=>A.jsx(GP,{ref:t,className:ln("px-2 py-1.5 text-sm font-semibold",n),...e}));cY.displayName=GP.displayName;const Uh=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs($P,{ref:r,className:ln("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[A.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:A.jsx(lY,{children:A.jsx(VO,{className:"h-4 w-4"})})}),A.jsx(aY,{children:e})]}));Uh.displayName=$P.displayName;const uY=P.forwardRef(({className:n,...e},t)=>A.jsx(XP,{ref:t,className:ln("-mx-1 my-1 h-px bg-muted",n),...e}));uY.displayName=XP.displayName;function dY(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const hY=n=>{switch(n){case"success":return mY;case"info":return yY;case"warning":return gY;case"error":return xY;default:return null}},fY=Array(12).fill(0),pY=({visible:n,className:e})=>ze.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ze.createElement("div",{className:"sonner-spinner"},fY.map((t,r)=>ze.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),mY=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),gY=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),yY=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xY=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),wY=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ze.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ze.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),vY=()=>{const[n,e]=ze.useState(document.hidden);return ze.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Ow=1;class _Y{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ow++,c=this.toasts.find(m=>m.id===o),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),c?this.toasts=this.toasts.map(m=>m.id===o?(this.publish({...m,...e,id:o,title:r}),{...m,...e,id:o,dismissible:h,title:r}):m):this.addToast({title:r,...i,dismissible:h,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,c;const h=i.then(async g=>{if(c=["resolve",g],ze.isValidElement(g))o=!1,this.create({id:r,type:"default",message:g});else if(bY(g)&&!g.ok){o=!1;const E=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,T=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"error",description:T,...M})}else if(g instanceof Error){o=!1;const E=typeof t.error=="function"?await t.error(g):t.error,T=typeof t.description=="function"?await t.description(g):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"error",description:T,...M})}else if(t.success!==void 0){o=!1;const E=typeof t.success=="function"?await t.success(g):t.success,T=typeof t.description=="function"?await t.description(g):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"success",description:T,...M})}}).catch(async g=>{if(c=["reject",g],t.error!==void 0){o=!1;const w=typeof t.error=="function"?await t.error(g):t.error,E=typeof t.description=="function"?await t.description(g):t.description,R=typeof w=="object"&&!ze.isValidElement(w)?w:{message:w};this.create({id:r,type:"error",description:E,...R})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),m=()=>new Promise((g,w)=>h.then(()=>c[0]==="reject"?w(c[1]):g(c[1])).catch(w));return typeof r!="string"&&typeof r!="number"?{unwrap:m}:Object.assign(r,{unwrap:m})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Ow++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ls=new _Y,EY=(n,e)=>{const t=(e==null?void 0:e.id)||Ow++;return ls.addToast({title:n,...e,id:t}),t},bY=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",IY=EY,AY=()=>ls.toasts,TY=()=>ls.getActiveToasts(),xr=Object.assign(IY,{success:ls.success,info:ls.info,warning:ls.warning,error:ls.error,custom:ls.custom,message:ls.message,promise:ls.promise,dismiss:ls.dismiss,loading:ls.loading},{getHistory:AY,getToasts:TY});dY("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function T0(n){return n.label!==void 0}const CY=3,SY="24px",RY="16px",gC=4e3,NY=356,kY=14,PY=45,DY=200;function ko(...n){return n.filter(Boolean).join(" ")}function OY(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const MY=n=>{var e,t,r,i,o,c,h,m,g;const{invert:w,toast:E,unstyled:T,interacting:R,setHeights:M,visibleToasts:D,heights:L,index:G,toasts:z,expanded:W,removeToast:Y,defaultRichColors:Z,closeButton:ie,style:F,cancelButtonStyle:B,actionButtonStyle:H,className:ee="",descriptionClassName:ne="",duration:te,position:K,gap:we,expandByDefault:se,classNames:Ae,icons:xe,closeButtonAriaLabel:oe="Close toast"}=n,[Te,Ne]=ze.useState(null),[ae,he]=ze.useState(null),[Se,Le]=ze.useState(!1),[it,Re]=ze.useState(!1),[Pe,Ge]=ze.useState(!1),[at,st]=ze.useState(!1),[ct,bt]=ze.useState(!1),[ht,gn]=ze.useState(0),[Vn,Dr]=ze.useState(0),Qt=ze.useRef(E.duration||te||gC),zt=ze.useRef(null),pt=ze.useRef(null),xi=G===0,Xe=G+1<=D,Kn=E.type,wi=E.dismissible!==!1,Yr=E.className||"",Qs=E.descriptionClassName||"",Wt=ze.useMemo(()=>L.findIndex(mt=>mt.toastId===E.id)||0,[L,E.id]),Xn=ze.useMemo(()=>{var mt;return(mt=E.closeButton)!=null?mt:ie},[E.closeButton,ie]),Er=ze.useMemo(()=>E.duration||te||gC,[E.duration,te]),Fn=ze.useRef(0),Qr=ze.useRef(0),Fi=ze.useRef(0),vi=ze.useRef(null),[In,We]=K.split("-"),An=ze.useMemo(()=>L.reduce((mt,Gt,Tn)=>Tn>=Wt?mt:mt+Gt.height,0),[L,Wt]),Ht=vY(),pn=E.invert||w,ai=Kn==="loading";Qr.current=ze.useMemo(()=>Wt*we+An,[Wt,An]),ze.useEffect(()=>{Qt.current=Er},[Er]),ze.useEffect(()=>{Le(!0)},[]),ze.useEffect(()=>{const mt=pt.current;if(mt){const Gt=mt.getBoundingClientRect().height;return Dr(Gt),M(Tn=>[{toastId:E.id,height:Gt,position:E.position},...Tn]),()=>M(Tn=>Tn.filter($t=>$t.toastId!==E.id))}},[M,E.id]),ze.useLayoutEffect(()=>{if(!Se)return;const mt=pt.current,Gt=mt.style.height;mt.style.height="auto";const Tn=mt.getBoundingClientRect().height;mt.style.height=Gt,Dr(Tn),M($t=>$t.find(Cn=>Cn.toastId===E.id)?$t.map(Cn=>Cn.toastId===E.id?{...Cn,height:Tn}:Cn):[{toastId:E.id,height:Tn,position:E.position},...$t])},[Se,E.title,E.description,M,E.id,E.jsx,E.action,E.cancel]);const jr=ze.useCallback(()=>{Re(!0),gn(Qr.current),M(mt=>mt.filter(Gt=>Gt.toastId!==E.id)),setTimeout(()=>{Y(E)},DY)},[E,Y,M,Qr]);ze.useEffect(()=>{if(E.promise&&Kn==="loading"||E.duration===1/0||E.type==="loading")return;let mt;return W||R||Ht?(()=>{if(Fi.current<Fn.current){const $t=new Date().getTime()-Fn.current;Qt.current=Qt.current-$t}Fi.current=new Date().getTime()})():(()=>{Qt.current!==1/0&&(Fn.current=new Date().getTime(),mt=setTimeout(()=>{E.onAutoClose==null||E.onAutoClose.call(E,E),jr()},Qt.current))})(),()=>clearTimeout(mt)},[W,R,E,Kn,Ht,jr]),ze.useEffect(()=>{E.delete&&(jr(),E.onDismiss==null||E.onDismiss.call(E,E))},[jr,E.delete]);function Zs(){var mt;if(xe!=null&&xe.loading){var Gt;return ze.createElement("div",{className:ko(Ae==null?void 0:Ae.loader,E==null||(Gt=E.classNames)==null?void 0:Gt.loader,"sonner-loader"),"data-visible":Kn==="loading"},xe.loading)}return ze.createElement(pY,{className:ko(Ae==null?void 0:Ae.loader,E==null||(mt=E.classNames)==null?void 0:mt.loader),visible:Kn==="loading"})}const Ct=E.icon||(xe==null?void 0:xe[Kn])||hY(Kn);var br,Ds;return ze.createElement("li",{tabIndex:0,ref:pt,className:ko(ee,Yr,Ae==null?void 0:Ae.toast,E==null||(e=E.classNames)==null?void 0:e.toast,Ae==null?void 0:Ae.default,Ae==null?void 0:Ae[Kn],E==null||(t=E.classNames)==null?void 0:t[Kn]),"data-sonner-toast":"","data-rich-colors":(br=E.richColors)!=null?br:Z,"data-styled":!(E.jsx||E.unstyled||T),"data-mounted":Se,"data-promise":!!E.promise,"data-swiped":ct,"data-removed":it,"data-visible":Xe,"data-y-position":In,"data-x-position":We,"data-index":G,"data-front":xi,"data-swiping":Pe,"data-dismissible":wi,"data-type":Kn,"data-invert":pn,"data-swipe-out":at,"data-swipe-direction":ae,"data-expanded":!!(W||se&&Se),style:{"--index":G,"--toasts-before":G,"--z-index":z.length-G,"--offset":`${it?ht:Qr.current}px`,"--initial-height":se?"auto":`${Vn}px`,...F,...E.style},onDragEnd:()=>{Ge(!1),Ne(null),vi.current=null},onPointerDown:mt=>{mt.button!==2&&(ai||!wi||(zt.current=new Date,gn(Qr.current),mt.target.setPointerCapture(mt.pointerId),mt.target.tagName!=="BUTTON"&&(Ge(!0),vi.current={x:mt.clientX,y:mt.clientY})))},onPointerUp:()=>{var mt,Gt,Tn;if(at||!wi)return;vi.current=null;const $t=Number(((mt=pt.current)==null?void 0:mt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ir=Number(((Gt=pt.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Cn=new Date().getTime()-((Tn=zt.current)==null?void 0:Tn.getTime()),Rt=Te==="x"?$t:Ir,fs=Math.abs(Rt)/Cn;if(Math.abs(Rt)>=PY||fs>.11){gn(Qr.current),E.onDismiss==null||E.onDismiss.call(E,E),he(Te==="x"?$t>0?"right":"left":Ir>0?"down":"up"),jr(),st(!0);return}else{var cn,ir;(cn=pt.current)==null||cn.style.setProperty("--swipe-amount-x","0px"),(ir=pt.current)==null||ir.style.setProperty("--swipe-amount-y","0px")}bt(!1),Ge(!1),Ne(null)},onPointerMove:mt=>{var Gt,Tn,$t;if(!vi.current||!wi||((Gt=window.getSelection())==null?void 0:Gt.toString().length)>0)return;const Cn=mt.clientY-vi.current.y,Rt=mt.clientX-vi.current.x;var fs;const cn=(fs=n.swipeDirections)!=null?fs:OY(K);!Te&&(Math.abs(Rt)>1||Math.abs(Cn)>1)&&Ne(Math.abs(Rt)>Math.abs(Cn)?"x":"y");let ir={x:0,y:0};const Bn=dr=>1/(1.5+Math.abs(dr)/20);if(Te==="y"){if(cn.includes("top")||cn.includes("bottom"))if(cn.includes("top")&&Cn<0||cn.includes("bottom")&&Cn>0)ir.y=Cn;else{const dr=Cn*Bn(Cn);ir.y=Math.abs(dr)<Math.abs(Cn)?dr:Cn}}else if(Te==="x"&&(cn.includes("left")||cn.includes("right")))if(cn.includes("left")&&Rt<0||cn.includes("right")&&Rt>0)ir.x=Rt;else{const dr=Rt*Bn(Rt);ir.x=Math.abs(dr)<Math.abs(Rt)?dr:Rt}(Math.abs(ir.x)>0||Math.abs(ir.y)>0)&&bt(!0),(Tn=pt.current)==null||Tn.style.setProperty("--swipe-amount-x",`${ir.x}px`),($t=pt.current)==null||$t.style.setProperty("--swipe-amount-y",`${ir.y}px`)}},Xn&&!E.jsx&&Kn!=="loading"?ze.createElement("button",{"aria-label":oe,"data-disabled":ai,"data-close-button":!0,onClick:ai||!wi?()=>{}:()=>{jr(),E.onDismiss==null||E.onDismiss.call(E,E)},className:ko(Ae==null?void 0:Ae.closeButton,E==null||(r=E.classNames)==null?void 0:r.closeButton)},(Ds=xe==null?void 0:xe.close)!=null?Ds:wY):null,(Kn||E.icon||E.promise)&&E.icon!==null&&((xe==null?void 0:xe[Kn])!==null||E.icon)?ze.createElement("div",{"data-icon":"",className:ko(Ae==null?void 0:Ae.icon,E==null||(i=E.classNames)==null?void 0:i.icon)},E.promise||E.type==="loading"&&!E.icon?E.icon||Zs():null,E.type!=="loading"?Ct:null):null,ze.createElement("div",{"data-content":"",className:ko(Ae==null?void 0:Ae.content,E==null||(o=E.classNames)==null?void 0:o.content)},ze.createElement("div",{"data-title":"",className:ko(Ae==null?void 0:Ae.title,E==null||(c=E.classNames)==null?void 0:c.title)},E.jsx?E.jsx:typeof E.title=="function"?E.title():E.title),E.description?ze.createElement("div",{"data-description":"",className:ko(ne,Qs,Ae==null?void 0:Ae.description,E==null||(h=E.classNames)==null?void 0:h.description)},typeof E.description=="function"?E.description():E.description):null),ze.isValidElement(E.cancel)?E.cancel:E.cancel&&T0(E.cancel)?ze.createElement("button",{"data-button":!0,"data-cancel":!0,style:E.cancelButtonStyle||B,onClick:mt=>{T0(E.cancel)&&wi&&(E.cancel.onClick==null||E.cancel.onClick.call(E.cancel,mt),jr())},className:ko(Ae==null?void 0:Ae.cancelButton,E==null||(m=E.classNames)==null?void 0:m.cancelButton)},E.cancel.label):null,ze.isValidElement(E.action)?E.action:E.action&&T0(E.action)?ze.createElement("button",{"data-button":!0,"data-action":!0,style:E.actionButtonStyle||H,onClick:mt=>{T0(E.action)&&(E.action.onClick==null||E.action.onClick.call(E.action,mt),!mt.defaultPrevented&&jr())},className:ko(Ae==null?void 0:Ae.actionButton,E==null||(g=E.classNames)==null?void 0:g.actionButton)},E.action.label):null)};function yC(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function LY(n,e){const t={};return[n,e].forEach((r,i)=>{const o=i===1,c=o?"--mobile-offset":"--offset",h=o?RY:SY;function m(g){["top","right","bottom","left"].forEach(w=>{t[`${c}-${w}`]=typeof g=="number"?`${g}px`:g})}typeof r=="number"||typeof r=="string"?m(r):typeof r=="object"?["top","right","bottom","left"].forEach(g=>{r[g]===void 0?t[`${c}-${g}`]=h:t[`${c}-${g}`]=typeof r[g]=="number"?`${r[g]}px`:r[g]}):m(h)}),t}const VY=ze.forwardRef(function(e,t){const{invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:h,className:m,offset:g,mobileOffset:w,theme:E="light",richColors:T,duration:R,style:M,visibleToasts:D=CY,toastOptions:L,dir:G=yC(),gap:z=kY,icons:W,containerAriaLabel:Y="Notifications"}=e,[Z,ie]=ze.useState([]),F=ze.useMemo(()=>Array.from(new Set([i].concat(Z.filter(ae=>ae.position).map(ae=>ae.position)))),[Z,i]),[B,H]=ze.useState([]),[ee,ne]=ze.useState(!1),[te,K]=ze.useState(!1),[we,se]=ze.useState(E!=="system"?E:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ae=ze.useRef(null),xe=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),oe=ze.useRef(null),Te=ze.useRef(!1),Ne=ze.useCallback(ae=>{ie(he=>{var Se;return(Se=he.find(Le=>Le.id===ae.id))!=null&&Se.delete||ls.dismiss(ae.id),he.filter(({id:Le})=>Le!==ae.id)})},[]);return ze.useEffect(()=>ls.subscribe(ae=>{if(ae.dismiss){requestAnimationFrame(()=>{ie(he=>he.map(Se=>Se.id===ae.id?{...Se,delete:!0}:Se))});return}setTimeout(()=>{sS.flushSync(()=>{ie(he=>{const Se=he.findIndex(Le=>Le.id===ae.id);return Se!==-1?[...he.slice(0,Se),{...he[Se],...ae},...he.slice(Se+1)]:[ae,...he]})})})}),[Z]),ze.useEffect(()=>{if(E!=="system"){se(E);return}if(E==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;const ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:he})=>{se(he?"dark":"light")})}catch{ae.addListener(({matches:Se})=>{try{se(Se?"dark":"light")}catch(Le){console.error(Le)}})}},[E]),ze.useEffect(()=>{Z.length<=1&&ne(!1)},[Z]),ze.useEffect(()=>{const ae=he=>{var Se;if(o.every(Re=>he[Re]||he.code===Re)){var it;ne(!0),(it=Ae.current)==null||it.focus()}he.code==="Escape"&&(document.activeElement===Ae.current||(Se=Ae.current)!=null&&Se.contains(document.activeElement))&&ne(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[o]),ze.useEffect(()=>{if(Ae.current)return()=>{oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null,Te.current=!1)}},[Ae.current]),ze.createElement("section",{ref:t,"aria-label":`${Y} ${xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((ae,he)=>{var Se;const[Le,it]=ae.split("-");return Z.length?ze.createElement("ol",{key:ae,dir:G==="auto"?yC():G,tabIndex:-1,ref:Ae,className:m,"data-sonner-toaster":!0,"data-sonner-theme":we,"data-y-position":Le,"data-x-position":it,style:{"--front-toast-height":`${((Se=B[0])==null?void 0:Se.height)||0}px`,"--width":`${NY}px`,"--gap":`${z}px`,...M,...LY(g,w)},onBlur:Re=>{Te.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(Te.current=!1,oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||Te.current||(Te.current=!0,oe.current=Re.relatedTarget)},onMouseEnter:()=>ne(!0),onMouseMove:()=>ne(!0),onMouseLeave:()=>{te||ne(!1)},onDragEnd:()=>ne(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},Z.filter(Re=>!Re.position&&he===0||Re.position===ae).map((Re,Pe)=>{var Ge,at;return ze.createElement(MY,{key:Re.id,icons:W,index:Pe,toast:Re,defaultRichColors:T,duration:(Ge=L==null?void 0:L.duration)!=null?Ge:R,className:L==null?void 0:L.className,descriptionClassName:L==null?void 0:L.descriptionClassName,invert:r,visibleToasts:D,closeButton:(at=L==null?void 0:L.closeButton)!=null?at:h,interacting:te,position:ae,style:L==null?void 0:L.style,unstyled:L==null?void 0:L.unstyled,classNames:L==null?void 0:L.classNames,cancelButtonStyle:L==null?void 0:L.cancelButtonStyle,actionButtonStyle:L==null?void 0:L.actionButtonStyle,closeButtonAriaLabel:L==null?void 0:L.closeButtonAriaLabel,removeToast:Ne,toasts:Z.filter(st=>st.position==Re.position),heights:B.filter(st=>st.position==Re.position),setHeights:H,expandByDefault:c,gap:z,expanded:ee,swipeDirections:e.swipeDirections})})):null}))});function FY({event:n,sessionId:e,onClose:t}){const[r,i]=P.useState({rating_profile_setup:"",rating_interests_helpful:"",rating_social_usefulness:"",met_match_in_person:"",open_to_other_event_types:"",match_experience_feedback:"",general_feedback:""}),[o,c]=P.useState(!1),[h,m]=P.useState({}),g=(R,M)=>{i(D=>({...D,[R]:M})),h[R]&&m(D=>({...D,[R]:null}))},w=()=>{const R={};return r.rating_profile_setup||(R.rating_profile_setup="Please rate the profile setup experience."),r.rating_interests_helpful||(R.rating_interests_helpful="Please rate how helpful interests were."),r.rating_social_usefulness||(R.rating_social_usefulness="Please rate the social interaction experience."),r.met_match_in_person||(R.met_match_in_person="Please let us know if you met someone in person."),r.open_to_other_event_types||(R.open_to_other_event_types="Please let us know about future event interest."),r.match_experience_feedback.trim()||(R.match_experience_feedback="Please share what we could improve."),m(R),Object.keys(R).length===0},E=async R=>{if(R.preventDefault(),!w()){xr.error("Please complete all required fields.");return}c(!0);try{await RU.create({event_id:n.id,session_id:e,rating_profile_setup:parseInt(r.rating_profile_setup),rating_interests_helpful:parseInt(r.rating_interests_helpful),rating_social_usefulness:parseInt(r.rating_social_usefulness),met_match_in_person:r.met_match_in_person==="true",open_to_other_event_types:r.open_to_other_event_types==="true",match_experience_feedback:r.match_experience_feedback.trim(),general_feedback:r.general_feedback.trim()||null}),localStorage.setItem(`feedback_given_for_${n.id}`,"true"),xr.success("Thanks for your feedback 💘"),t()}catch(M){console.error("Error submitting feedback:",M),xr.error("Failed to submit feedback. Please try again.")}finally{c(!1)}},T=({value:R,onChange:M,error:D})=>A.jsxs("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(L=>A.jsx("button",{type:"button",onClick:()=>M(L.toString()),className:`p-1 transition-colors ${parseInt(R)>=L?"text-yellow-500 hover:text-yellow-600":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:A.jsx(EM,{className:`w-6 h-6 ${parseInt(R)>=L?"fill-current":""}`})},L)),D&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs ml-2 mt-1",children:D})]});return A.jsx(ap,{children:A.jsx(Zo.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",children:A.jsxs(Zo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:A.jsx(fd,{className:"w-6 h-6 text-white"})}),A.jsx("button",{onClick:t,className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:A.jsx(Yi,{className:"w-5 h-5"})})]}),A.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:["Enjoyed Hooked at ",n.name,"? 💘"]}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Help us make the next one even better — takes 1 minute!"})]}),A.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to set up your profile? *"}),A.jsx(T,{value:r.rating_profile_setup,onChange:R=>g("rating_profile_setup",R),error:h.rating_profile_setup})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How helpful were profile interests in choosing who to like? *"}),A.jsx(T,{value:r.rating_interests_helpful,onChange:R=>g("rating_interests_helpful",R),error:h.rating_interests_helpful})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to interact with others? *"}),A.jsx(T,{value:r.rating_social_usefulness,onChange:R=>g("rating_social_usefulness",R),error:h.rating_social_usefulness})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Did you meet up with a match? *"}),A.jsxs(pC,{value:r.met_match_in_person,onValueChange:R=>g("met_match_in_person",R),children:[A.jsx(Pw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:A.jsx(mC,{placeholder:"Select an option"})}),A.jsxs(Dw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[A.jsx(Uh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),A.jsx(Uh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.met_match_in_person&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.met_match_in_person})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Would you use Hooked at other event types? *"}),A.jsxs(pC,{value:r.open_to_other_event_types,onValueChange:R=>g("open_to_other_event_types",R),children:[A.jsx(Pw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:A.jsx(mC,{placeholder:"Select an option"})}),A.jsxs(Dw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[A.jsx(Uh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),A.jsx(Uh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.open_to_other_event_types&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.open_to_other_event_types})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"What would you improve? *"}),A.jsx(Om,{value:r.match_experience_feedback,onChange:R=>g("match_experience_feedback",R.target.value),placeholder:"Tell us what could make the experience better...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"}),h.match_experience_feedback&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.match_experience_feedback})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Other feedback?"}),A.jsx(Om,{value:r.general_feedback,onChange:R=>g("general_feedback",R.target.value),placeholder:"Anything else you'd like to share...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"})]}),A.jsx(Ut,{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-3",children:o?A.jsxs("div",{className:"flex items-center justify-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Feedback"})]})]})})})}var BY=(n,e,t,r,i,o,c,h)=>{let m=document.documentElement,g=["light","dark"];function w(R){(Array.isArray(n)?n:[n]).forEach(M=>{let D=M==="class",L=D&&o?i.map(G=>o[G]||G):i;D?(m.classList.remove(...L),m.classList.add(o&&o[R]?o[R]:R)):m.setAttribute(M,R)}),E(R)}function E(R){h&&g.includes(R)&&(m.style.colorScheme=R)}function T(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)w(r);else try{let R=localStorage.getItem(e)||t,M=c&&R==="system"?T():R;w(M)}catch{}},jY=P.createContext(void 0),UY={setTheme:n=>{},themes:[]},zY=()=>{var n;return(n=P.useContext(jY))!=null?n:UY};P.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,themes:h,nonce:m,scriptProps:g})=>{let w=JSON.stringify([t,e,o,n,h,c,r,i]).slice(1,-1);return P.createElement("script",{...g,suppressHydrationWarning:!0,nonce:typeof window>"u"?m:"",dangerouslySetInnerHTML:{__html:`(${BY.toString()})(${w})`}})});const WY=({...n})=>{const{theme:e="system"}=zY();return A.jsx(VY,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function HY({children:n,currentPageName:e}){const t=Ba(),r=ta(),[i,o]=P.useState(!!(localStorage.getItem("currentEventId")&&localStorage.getItem("currentSessionId"))),[c,h]=P.useState(!1),[m,g]=P.useState(!1),[w,E]=P.useState(!1),[T,R]=P.useState({name:"",profileId:""}),[M,D]=P.useState(new Set),[L,G]=P.useState(!1),[z,W]=P.useState({name:"",senderSessionId:""}),[Y,Z]=P.useState(new Set),[ie,F]=P.useState(!1),[B,H]=P.useState(null),[ee,ne]=P.useState(null),te=P.useCallback(async()=>{try{const we=localStorage.getItem("currentEventId")||localStorage.getItem("last_event_id"),se=localStorage.getItem("currentSessionId")||localStorage.getItem("last_session_id");if(!we||!se||localStorage.getItem(`feedback_given_for_${we}`))return;const xe=await Tf.filter({id:we});if(xe.length===0)return;const oe=xe[0],Te=new Date().toISOString();oe.expires_at&&Te>oe.expires_at&&(H(oe),ne(se),F(!0),localStorage.setItem("last_event_id",we),localStorage.setItem("last_session_id",se))}catch(we){console.error("Error checking feedback eligibility:",we)}},[]);P.useEffect(()=>{te()},[te]);const K=P.useCallback(async()=>{const we=localStorage.getItem("currentEventId"),se=localStorage.getItem("currentSessionId"),Ae=!!(we&&se);if(o(Ae),!Ae){h(!1),g(!1),E(!1),G(!1),D(new Set),Z(new Set);return}try{const xe=await us.filter({liker_session_id:se,event_id:we,is_mutual:!0}),oe=await us.filter({liked_session_id:se,event_id:we,is_mutual:!0});let Te=!1,Ne=null;if([...xe,...oe].forEach(he=>{const Se=he.liker_session_id===se;(Se&&!he.liker_notified_of_match||!Se&&!he.liked_notified_of_match)&&(Te=!0,!Ne&&!M.has(he.id)&&(Ne={...he,otherUserSessionId:Se?he.liked_session_id:he.liker_session_id,type:Se?"liker":"liked"}))}),h(Te),Ne&&!w){const he=await Ca.filter({session_id:Ne.otherUserSessionId,event_id:we});if(he.length>0){R({name:he[0].first_name,profileId:he[0].id}),E(!0),D(Le=>new Set([...Le,Ne.id]));const Se={};Ne.type==="liker"?Se.liker_notified_of_match=!0:Se.liked_notified_of_match=!0,await us.update(Ne.id,Se)}}const ae=await kc.filter({receiver_session_id:se,event_id:we,is_read:!1});if(g(ae.length>0),ae.length>0&&!L){const he=ae.sort((Se,Le)=>new Date(Le.created_date)-new Date(Se.created_date))[0];if(!Y.has(he.id)){const Se=await Ca.filter({session_id:he.sender_session_id,event_id:we});Se.length>0&&(W({name:Se[0].first_name,senderSessionId:he.sender_session_id}),G(!0),Z(Le=>new Set([...Le,he.id])))}}}catch(xe){console.error("Error checking notifications:",xe)}},[M,w,Y,L]);return P.useEffect(()=>{K();const we=setInterval(K,45e3);return()=>clearInterval(we)},[K]),P.useEffect(()=>{K()},[t.pathname,K]),A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[A.jsx(WY,{position:"bottom-center",expand:!1,visibleToasts:1,closeButton:!1,duration:3e3,toastOptions:{style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)",borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",fontWeight:"500",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}}}),A.jsx("style",{children:`
        :root {
          --primary: #1a1d29;
          --accent: #ff6b6b;
          --secondary: #4f46e5;
          --muted: #64748b;
          --background: #ffffff;
          --card: #ffffff;
          --toast-bg: #ffffff;
          --toast-color: #000000;
          --toast-border: rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
          :root {
            --background: #111827;
            --card: #1f2937;
            --primary: #ffffff;
            --muted: #94a3b8;
            --toast-bg: #1f2937;
            --toast-color: #ffffff;
            --toast-border: rgba(255, 255, 255, 0.15);
          }
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          background: var(--background);
          color: var(--primary);
        }

        .glass-effect {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @media (prefers-color-scheme: dark) {
          .glass-effect {
            background: rgba(31, 41, 55, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
          }
        }

        .gradient-text {
          background: linear-gradient(135deg, var(--accent) 0%, var(--secondary) 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Modal overlay improvements */
        [data-radix-popper-content-wrapper],
        [data-state="open"][data-side] {
          z-index: 50;
        }

        /* Dark mode modal backgrounds */
        @media (prefers-color-scheme: dark) {
          .modal-content {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
            color: #ffffff !important;
          }

          .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7) !important;
          }
        }

        .modal-content {
          background-color: #ffffff;
          border: 1px solid #e5e7eb;
          border-radius: 16px;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .modal-overlay {
          background-color: rgba(0, 0, 0, 0.4);
        }

        /* Enhanced Toaster Styles */
        [data-sonner-toast] {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
          border: 1px solid var(--toast-border) !important;
          border-radius: 0.5rem !important;
          padding: 1rem !important;
          font-size: 0.875rem !important;
          font-weight: 500 !important;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1) !important;
          backdrop-filter: none !important;
        }

        [data-sonner-toast]:not([data-styled]) {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
        }

        /* Toaster container */
        [data-sonner-toaster] {
          max-width: 90vw;
        }

        [data-sonner-toast] [data-content] {
          color: var(--toast-color) !important;
        }

        [data-sonner-toast] [data-title] {
          color: var(--toast-color) !important;
          font-weight: 600 !important;
        }

        [data-sonner-toast] [data-description] {
          color: var(--toast-color) !important;
          opacity: 0.8;
        }
      `}),A.jsx("main",{className:"relative",children:n}),A.jsxs(ap,{children:[w&&A.jsx(Y$,{matchName:T.name,onDismiss:()=>{E(!1)},onSeeMatches:()=>{E(!1),r(Mn("Matches"))}}),L&&A.jsx(Q$,{senderName:z.name,senderSessionId:z.senderSessionId,onDismiss:()=>G(!1),onView:()=>{G(!1)}}),ie&&B&&ee&&A.jsx(FY,{event:B,sessionId:ee,onClose:()=>F(!1)})]})]})}function GY(n,e){return P.useReducer((t,r)=>e[t][r]??t,n)}var Bg=n=>{const{present:e,children:t}=n,r=$Y(e),i=typeof t=="function"?t({present:r.isPresent}):P.Children.only(t),o=bn(r.ref,qY(i));return typeof t=="function"||r.isPresent?P.cloneElement(i,{ref:o}):null};Bg.displayName="Presence";function $Y(n){const[e,t]=P.useState(),r=P.useRef(null),i=P.useRef(n),o=P.useRef("none"),c=n?"mounted":"unmounted",[h,m]=GY(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const g=C0(r.current);o.current=h==="mounted"?g:"none"},[h]),Vi(()=>{const g=r.current,w=i.current;if(w!==n){const T=o.current,R=C0(g);n?m("MOUNT"):R==="none"||(g==null?void 0:g.display)==="none"?m("UNMOUNT"):m(w&&T!==R?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,m]),Vi(()=>{if(e){let g;const w=e.ownerDocument.defaultView??window,E=R=>{const D=C0(r.current).includes(R.animationName);if(R.target===e&&D&&(m("ANIMATION_END"),!i.current)){const L=e.style.animationFillMode;e.style.animationFillMode="forwards",g=w.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=L)})}},T=R=>{R.target===e&&(o.current=C0(r.current))};return e.addEventListener("animationstart",T),e.addEventListener("animationcancel",E),e.addEventListener("animationend",E),()=>{w.clearTimeout(g),e.removeEventListener("animationstart",T),e.removeEventListener("animationcancel",E),e.removeEventListener("animationend",E)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:P.useCallback(g=>{r.current=g?getComputedStyle(g):null,t(g)},[])}}function C0(n){return(n==null?void 0:n.animationName)||"none"}function qY(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var jg="Dialog",[ZP,qJ]=$d(jg),[KY,yo]=ZP(jg),JP=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:o,modal:c=!0}=n,h=P.useRef(null),m=P.useRef(null),[g,w]=Mf({prop:r,defaultProp:i??!1,onChange:o,caller:jg});return A.jsx(KY,{scope:e,triggerRef:h,contentRef:m,contentId:ud(),titleId:ud(),descriptionId:ud(),open:g,onOpenChange:w,onOpenToggle:P.useCallback(()=>w(E=>!E),[w]),modal:c,children:t})};JP.displayName=jg;var e6="DialogTrigger",XY=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(e6,t),o=bn(e,i.triggerRef);return A.jsx(nn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":u_(i.open),...r,ref:o,onClick:an(n.onClick,i.onOpenToggle)})});XY.displayName=e6;var l_="DialogPortal",[YY,t6]=ZP(l_,{forceMount:void 0}),n6=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,o=yo(l_,e);return A.jsx(YY,{scope:e,forceMount:t,children:P.Children.map(r,c=>A.jsx(Bg,{present:t||o.open,children:A.jsx(i_,{asChild:!0,container:i,children:c})}))})};n6.displayName=l_;var Um="DialogOverlay",r6=P.forwardRef((n,e)=>{const t=t6(Um,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=yo(Um,n.__scopeDialog);return o.modal?A.jsx(Bg,{present:r||o.open,children:A.jsx(ZY,{...i,ref:e})}):null});r6.displayName=Um;var QY=Rd("DialogOverlay.RemoveScroll"),ZY=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(Um,t);return A.jsx(o_,{as:QY,allowPinchZoom:!0,shards:[i.contentRef],children:A.jsx(nn.div,{"data-state":u_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),su="DialogContent",i6=P.forwardRef((n,e)=>{const t=t6(su,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=yo(su,n.__scopeDialog);return A.jsx(Bg,{present:r||o.open,children:o.modal?A.jsx(JY,{...i,ref:e}):A.jsx(eQ,{...i,ref:e})})});i6.displayName=su;var JY=P.forwardRef((n,e)=>{const t=yo(su,n.__scopeDialog),r=P.useRef(null),i=bn(e,t.contentRef,r);return P.useEffect(()=>{const o=r.current;if(o)return aP(o)},[]),A.jsx(s6,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:an(n.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:an(n.onPointerDownOutside,o=>{const c=o.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0;(c.button===2||h)&&o.preventDefault()}),onFocusOutside:an(n.onFocusOutside,o=>o.preventDefault())})}),eQ=P.forwardRef((n,e)=>{const t=yo(su,n.__scopeDialog),r=P.useRef(!1),i=P.useRef(!1);return A.jsx(s6,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,h;(c=n.onCloseAutoFocus)==null||c.call(n,o),o.defaultPrevented||(r.current||(h=t.triggerRef.current)==null||h.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var m,g;(m=n.onInteractOutside)==null||m.call(n,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=o.target;((g=t.triggerRef.current)==null?void 0:g.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),s6=P.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...c}=n,h=yo(su,t),m=P.useRef(null),g=bn(e,m);return M4(),A.jsxs(A.Fragment,{children:[A.jsx(q2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:A.jsx($2,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":u_(h.open),...c,ref:g,onDismiss:()=>h.onOpenChange(!1)})}),A.jsxs(A.Fragment,{children:[A.jsx(tQ,{titleId:h.titleId}),A.jsx(rQ,{contentRef:m,descriptionId:h.descriptionId})]})]})}),c_="DialogTitle",o6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(c_,t);return A.jsx(nn.h2,{id:i.titleId,...r,ref:e})});o6.displayName=c_;var a6="DialogDescription",l6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(a6,t);return A.jsx(nn.p,{id:i.descriptionId,...r,ref:e})});l6.displayName=a6;var c6="DialogClose",u6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(c6,t);return A.jsx(nn.button,{type:"button",...r,ref:e,onClick:an(n.onClick,()=>i.onOpenChange(!1))})});u6.displayName=c6;function u_(n){return n?"open":"closed"}var d6="DialogTitleWarning",[KJ,h6]=nq(d6,{contentName:su,titleName:c_,docsSlug:"dialog"}),tQ=({titleId:n})=>{const e=h6(d6),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return P.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},nQ="DialogDescriptionWarning",rQ=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${h6(nQ).contentName}}.`;return P.useEffect(()=>{var o;const i=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},iQ=JP,sQ=n6,f6=r6,p6=i6,m6=o6,g6=l6,oQ=u6;const Ug=iQ,aQ=sQ,y6=P.forwardRef(({className:n,...e},t)=>A.jsx(f6,{ref:t,className:ln("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));y6.displayName=f6.displayName;const lQ=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(aQ,{children:[A.jsx(y6,{}),A.jsxs(p6,{ref:r,className:ln("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,A.jsxs(oQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[A.jsx(Yi,{className:"h-4 w-4"}),A.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lQ.displayName=p6.displayName;const zg=({className:n,...e})=>A.jsx("div",{className:ln("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});zg.displayName="DialogHeader";const Wg=P.forwardRef(({className:n,...e},t)=>A.jsx(m6,{ref:t,className:ln("text-lg font-semibold leading-none tracking-tight",n),...e}));Wg.displayName=m6.displayName;const cQ=P.forwardRef(({className:n,...e},t)=>A.jsx(g6,{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));cQ.displayName=g6.displayName;var Ze;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ze||(Ze={}));var xC=new Map([[Ze.QR_CODE,"QR_CODE"],[Ze.AZTEC,"AZTEC"],[Ze.CODABAR,"CODABAR"],[Ze.CODE_39,"CODE_39"],[Ze.CODE_93,"CODE_93"],[Ze.CODE_128,"CODE_128"],[Ze.DATA_MATRIX,"DATA_MATRIX"],[Ze.MAXICODE,"MAXICODE"],[Ze.ITF,"ITF"],[Ze.EAN_13,"EAN_13"],[Ze.EAN_8,"EAN_8"],[Ze.PDF_417,"PDF_417"],[Ze.RSS_14,"RSS_14"],[Ze.RSS_EXPANDED,"RSS_EXPANDED"],[Ze.UPC_A,"UPC_A"],[Ze.UPC_E,"UPC_E"],[Ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),wC;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(wC||(wC={}));function uQ(n){return Object.values(Ze).includes(n)}var zm;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(zm||(zm={}));var dQ=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[zm.SCAN_TYPE_CAMERA,zm.SCAN_TYPE_FILE],n}(),x6=function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!xC.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,xC.get(e))},n}(),vC=function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n}(),Mw;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Mw||(Mw={}));var hQ=function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:Mw.UNKWOWN_ERROR}},n}(),fQ=function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n}();function va(n){return typeof n>"u"||n===null}var id=function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),w6=function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(e),h=0,m=c;h<m.length;h++){var g=m[h];if(o.has(g))return t.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},n}(),zh={exports:{}},pQ=zh.exports,_C;function mQ(){return _C||(_C=1,function(n,e){(function(t,r){r(e)})(pQ,function(t){function r(j){return j==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,s){j.__proto__=s}||function(j,s){for(var l in s)s.hasOwnProperty(l)&&(j[l]=s[l])};function o(j,s){i(j,s);function l(){this.constructor=j}j.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}function c(j,s){var l=Object.setPrototypeOf;l?l(j,s):j.__proto__=s}function h(j,s){s===void 0&&(s=j.constructor);var l=Error.captureStackTrace;l&&l(j,s)}var m=function(j){o(s,j);function s(l){var u=this.constructor,f=j.call(this,l)||this;return Object.defineProperty(f,"name",{value:u.name,enumerable:!1}),c(f,u.prototype),h(f),f}return s}(Error);class g extends m{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class E extends g{}E.kind="IllegalArgumentException";class T{constructor(s){if(this.binarizer=s,s===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,l){return this.binarizer.getBlackRow(s,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,l,u,f){const p=this.binarizer.getLuminanceSource().crop(s,l,u,f);return new T(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends g{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class M{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(s,l,u,f,p){for(;p--;)u[f++]=s[l++]}static currentTimeMillis(){return Date.now()}}class L extends g{}L.kind="IndexOutOfBoundsException";class G extends L{constructor(s=void 0,l=void 0){super(l),this.index=s,this.message=l}}G.kind="ArrayIndexOutOfBoundsException";class z{static fill(s,l){for(let u=0,f=s.length;u<f;u++)s[u]=l}static fillWithin(s,l,u,f){z.rangeCheck(s.length,l,u);for(let p=l;p<u;p++)s[p]=f}static rangeCheck(s,l,u){if(l>u)throw new E("fromIndex("+l+") > toIndex("+u+")");if(l<0)throw new G(l);if(u>s)throw new G(u)}static asList(...s){return s}static create(s,l,u){return Array.from({length:s}).map(p=>Array.from({length:l}).fill(u))}static createInt32Array(s,l,u){return Array.from({length:s}).map(p=>Int32Array.from({length:l}).fill(u))}static equals(s,l){if(!s||!l||!s.length||!l.length||s.length!==l.length)return!1;for(let u=0,f=s.length;u<f;u++)if(s[u]!==l[u])return!1;return!0}static hashCode(s){if(s===null)return 0;let l=1;for(const u of s)l=31*l+u;return l}static fillUint8Array(s,l){for(let u=0;u!==s.length;u++)s[u]=l}static copyOf(s,l){return s.slice(0,l)}static copyOfUint8Array(s,l){if(s.length<=l){const u=new Uint8Array(l);return u.set(s),u}return s.slice(0,l)}static copyOfRange(s,l,u){const f=u-l,p=new Int32Array(f);return D.arraycopy(s,l,p,0,f),p}static binarySearch(s,l,u){u===void 0&&(u=z.numberComparator);let f=0,p=s.length-1;for(;f<=p;){const y=p+f>>1,v=u(l,s[y]);if(v>0)f=y+1;else if(v<0)p=y-1;else return y}return-f-1}static numberComparator(s,l){return s-l}}class W{static numberOfTrailingZeros(s){let l;if(s===0)return 32;let u=31;return l=s<<16,l!==0&&(u-=16,s=l),l=s<<8,l!==0&&(u-=8,s=l),l=s<<4,l!==0&&(u-=4,s=l),l=s<<2,l!==0&&(u-=2,s=l),u-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let l=1;return s>>>16||(l+=16,s<<=16),s>>>24||(l+=8,s<<=8),s>>>28||(l+=4,s<<=4),s>>>30||(l+=2,s<<=2),l-=s>>>31,l}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,l){return Math.trunc(s/l)}static parseInt(s,l=void 0){return parseInt(s,l)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(s,l){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,l==null?this.bits=Y.makeArray(s):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const l=Y.makeArray(s);D.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),p=u[f];p&=~((1<<(s&31))-1);const y=u.length;for(;p===0;){if(++f===y)return l;p=u[f]}const v=f*32+W.numberOfTrailingZeros(p);return v>l?l:v}getNextUnset(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),p=~u[f];p&=~((1<<(s&31))-1);const y=u.length;for(;p===0;){if(++f===y)return l;p=~u[f]}const v=f*32+W.numberOfTrailingZeros(p);return v>l?l:v}setBulk(s,l){this.bits[Math.floor(s/32)]=l}setRange(s,l){if(l<s||s<0||l>this.size)throw new E;if(l===s)return;l--;const u=Math.floor(s/32),f=Math.floor(l/32),p=this.bits;for(let y=u;y<=f;y++){const v=y>u?0:s&31,C=(2<<(y<f?31:l&31))-(1<<v);p[y]|=C}}clear(){const s=this.bits.length,l=this.bits;for(let u=0;u<s;u++)l[u]=0}isRange(s,l,u){if(l<s||s<0||l>this.size)throw new E;if(l===s)return!0;l--;const f=Math.floor(s/32),p=Math.floor(l/32),y=this.bits;for(let v=f;v<=p;v++){const I=v>f?0:s&31,O=(2<<(v<p?31:l&31))-(1<<I)&4294967295;if((y[v]&O)!==(u?O:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,l){if(l<0||l>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let u=l;u>0;u--)this.appendBit((s>>u-1&1)===1)}appendBitArray(s){const l=s.size;this.ensureCapacity(this.size+l);for(let u=0;u<l;u++)this.appendBit(s.get(u))}xor(s){if(this.size!==s.size)throw new E("Sizes don't match");const l=this.bits;for(let u=0,f=l.length;u<f;u++)l[u]^=s.bits[u]}toBytes(s,l,u,f){for(let p=0;p<f;p++){let y=0;for(let v=0;v<8;v++)this.get(s)&&(y|=1<<7-v),s++;l[u+p]=y}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),u=l+1,f=this.bits;for(let p=0;p<u;p++){let y=f[p];y=y>>1&1431655765|(y&1431655765)<<1,y=y>>2&858993459|(y&858993459)<<2,y=y>>4&252645135|(y&252645135)<<4,y=y>>8&16711935|(y&16711935)<<8,y=y>>16&65535|(y&65535)<<16,s[l-p]=y}if(this.size!==u*32){const p=u*32-this.size;let y=s[0]>>>p;for(let v=1;v<u;v++){const I=s[v];y|=I<<32-p,s[v-1]=y,y=I>>>p}s[u-1]=y}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof Y))return!1;const l=s;return this.size===l.size&&z.equals(this.bits,l.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let s="";for(let l=0,u=this.size;l<u;l++)(l&7)===0&&(s+=" "),s+=this.get(l)?"X":".";return s}clone(){return new Y(this.size,this.bits.slice())}}var Z;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var ie=Z;class F extends g{static getFormatInstance(){return new F}}F.kind="FormatException";var B;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(B||(B={}));class H{constructor(s,l,u,...f){this.valueIdentifier=s,this.name=u,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=f,H.VALUE_IDENTIFIER_TO_ECI.set(s,this),H.NAME_TO_ECI.set(u,this);const p=this.values;for(let y=0,v=p.length;y!==v;y++){const I=p[y];H.VALUES_TO_ECI.set(I,this)}for(const y of f)H.NAME_TO_ECI.set(y,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new F("incorect value");const l=H.VALUES_TO_ECI.get(s);if(l===void 0)throw new F("incorect value");return l}static getCharacterSetECIByName(s){const l=H.NAME_TO_ECI.get(s);if(l===void 0)throw new F("incorect value");return l}equals(s){if(!(s instanceof H))return!1;const l=s;return this.getName()===l.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(B.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(B.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(B.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(B.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(B.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(B.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(B.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(B.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(B.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(B.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(B.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(B.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(B.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(B.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(B.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(B.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(B.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(B.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(B.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(B.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(B.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(B.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(B.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(B.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(B.Big5,28,"Big5"),H.GB18030=new H(B.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(B.EUC_KR,30,"EUC_KR","EUC-KR");class ee extends g{}ee.kind="UnsupportedOperationException";class ne{static decode(s,l){const u=this.encodingName(l);return this.customDecoder?this.customDecoder(s,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(s,u):new TextDecoder(u).decode(s)}static shouldDecodeOnFallback(s){return!ne.isBrowser()&&s==="ISO-8859-1"}static encode(s,l){const u=this.encodingName(l);return this.customEncoder?this.customEncoder(s,u):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof H?s:H.getCharacterSetECIByName(s)}static decodeFallback(s,l){const u=this.encodingCharacterSet(l);if(ne.isDecodeFallbackSupported(u)){let f="";for(let p=0,y=s.length;p<y;p++){let v=s[p].toString(16);v.length<2&&(v="0"+v),f+="%"+v}return decodeURIComponent(f)}if(u.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new ee(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(H.UTF8)||s.equals(H.ISO8859_1)||s.equals(H.ASCII)}static encodeFallback(s){const u=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let p=0;p<u.length;p++)f.push(u[p].charCodeAt(0));return new Uint8Array(f)}}class te{static castAsNonUtf8Char(s,l=null){const u=l?l.getName():this.ISO88591;return ne.decode(new Uint8Array([s]),u)}static guessEncoding(s,l){if(l!=null&&l.get(ie.CHARACTER_SET)!==void 0)return l.get(ie.CHARACTER_SET).toString();const u=s.length;let f=!0,p=!0,y=!0,v=0,I=0,C=0,O=0,U=0,q=0,J=0,le=0,ue=0,fe=0,Ee=0;const Fe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let je=0;je<u&&(f||p||y);je++){const Oe=s[je]&255;y&&(v>0?(Oe&128)===0?y=!1:v--:(Oe&128)!==0&&((Oe&64)===0?y=!1:(v++,(Oe&32)===0?I++:(v++,(Oe&16)===0?C++:(v++,(Oe&8)===0?O++:y=!1))))),f&&(Oe>127&&Oe<160?f=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&Ee++),p&&(U>0?Oe<64||Oe===127||Oe>252?p=!1:U--:Oe===128||Oe===160||Oe>239?p=!1:Oe>160&&Oe<224?(q++,le=0,J++,J>ue&&(ue=J)):Oe>127?(U++,J=0,le++,le>fe&&(fe=le)):(J=0,le=0))}return y&&v>0&&(y=!1),p&&U>0&&(p=!1),y&&(Fe||I+C+O>0)?te.UTF8:p&&(te.ASSUME_SHIFT_JIS||ue>=3||fe>=3)?te.SHIFT_JIS:f&&p?ue===2&&q===2||Ee*10>=u?te.SHIFT_JIS:te.ISO88591:f?te.ISO88591:p?te.SHIFT_JIS:y?te.UTF8:te.PLATFORM_DEFAULT_ENCODING}static format(s,...l){let u=-1;function f(y,v,I,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let q=O?parseInt(O.substr(1)):void 0,J;switch(U){case"s":J=l[u];break;case"c":J=l[u][0];break;case"f":J=parseFloat(l[u]).toFixed(y);break;case"p":J=parseFloat(l[u]).toPrecision(y);break;case"e":J=parseFloat(l[u]).toExponential(y);break;case"x":J=parseInt(l[u]).toString(q||16);break;case"d":J=parseFloat(parseInt(l[u],q||10).toPrecision(y)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(q);let le=parseInt(I),ue=I&&I[0]+""=="0"?"0":" ";for(;J.length<le;)J=v!==void 0?J+ue:ue+J;return J}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(p,f)}static getBytes(s,l){return ne.encode(s,l)}static getCharCode(s,l=0){return s.charCodeAt(l)}static getCharAt(s){return String.fromCharCode(s)}}te.SHIFT_JIS=H.SJIS.getName(),te.GB2312="GB2312",te.ISO88591=H.ISO8859_1.getName(),te.EUC_JP="EUC_JP",te.UTF8=H.UTF8.getName(),te.PLATFORM_DEFAULT_ENCODING=te.UTF8,te.ASSUME_SHIFT_JIS=!1;class K{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=te.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,l,u){for(let f=l;l<l+u;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+1)}substring(s,l){return this.value.substring(s,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+l.length)}}class we{constructor(s,l,u,f){if(this.width=s,this.height=l,this.rowSize=u,this.bits=f,l==null&&(l=s),this.height=l,s<1||l<1)throw new E("Both dimensions must be greater than 0");u==null&&(u=Math.floor((s+31)/32)),this.rowSize=u,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const l=s.length,u=s[0].length,f=new we(u,l);for(let p=0;p<l;p++){const y=s[p];for(let v=0;v<u;v++)y[v]&&f.set(v,p)}return f}static parseFromString(s,l,u){if(s===null)throw new E("stringRepresentation cannot be null");const f=new Array(s.length);let p=0,y=0,v=-1,I=0,C=0;for(;C<s.length;)if(s.charAt(C)===`
`||s.charAt(C)==="\r"){if(p>y){if(v===-1)v=p-y;else if(p-y!==v)throw new E("row lengths do not match");y=p,I++}C++}else if(s.substring(C,C+l.length)===l)C+=l.length,f[p]=!0,p++;else if(s.substring(C,C+u.length)===u)C+=u.length,f[p]=!1,p++;else throw new E("illegal character encountered: "+s.substring(C));if(p>y){if(v===-1)v=p-y;else if(p-y!==v)throw new E("row lengths do not match");I++}const O=new we(v,I);for(let U=0;U<p;U++)f[U]&&O.set(Math.floor(U%v),Math.floor(U/v));return O}get(s,l){const u=l*this.rowSize+Math.floor(s/32);return(this.bits[u]>>>(s&31)&1)!==0}set(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]|=1<<(s&31)&4294967295}unset(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]&=~(1<<(s&31)&4294967295)}flip(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new E("input matrix dimensions do not match");const l=new Y(Math.floor(this.width/32)+1),u=this.rowSize,f=this.bits;for(let p=0,y=this.height;p<y;p++){const v=p*u,I=s.getRow(p,l).getBitArray();for(let C=0;C<u;C++)f[v+C]^=I[C]}}clear(){const s=this.bits,l=s.length;for(let u=0;u<l;u++)s[u]=0}setRegion(s,l,u,f){if(l<0||s<0)throw new E("Left and top must be nonnegative");if(f<1||u<1)throw new E("Height and width must be at least 1");const p=s+u,y=l+f;if(y>this.height||p>this.width)throw new E("The region must fit inside the matrix");const v=this.rowSize,I=this.bits;for(let C=l;C<y;C++){const O=C*v;for(let U=s;U<p;U++)I[O+Math.floor(U/32)]|=1<<(U&31)&4294967295}}getRow(s,l){l==null||l.getSize()<this.width?l=new Y(this.width):l.clear();const u=this.rowSize,f=this.bits,p=s*u;for(let y=0;y<u;y++)l.setBulk(y*32,f[p+y]);return l}setRow(s,l){D.arraycopy(l.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),l=this.getHeight();let u=new Y(s),f=new Y(s);for(let p=0,y=Math.floor((l+1)/2);p<y;p++)u=this.getRow(p,u),f=this.getRow(l-1-p,f),u.reverse(),f.reverse(),this.setRow(p,f),this.setRow(l-1-p,u)}getEnclosingRectangle(){const s=this.width,l=this.height,u=this.rowSize,f=this.bits;let p=s,y=l,v=-1,I=-1;for(let C=0;C<l;C++)for(let O=0;O<u;O++){const U=f[C*u+O];if(U!==0){if(C<y&&(y=C),C>I&&(I=C),O*32<p){let q=0;for(;(U<<31-q&4294967295)===0;)q++;O*32+q<p&&(p=O*32+q)}if(O*32+31>v){let q=31;for(;!(U>>>q);)q--;O*32+q>v&&(v=O*32+q)}}}return v<p||I<y?null:Int32Array.from([p,y,v-p+1,I-y+1])}getTopLeftOnBit(){const s=this.rowSize,l=this.bits;let u=0;for(;u<l.length&&l[u]===0;)u++;if(u===l.length)return null;const f=u/s;let p=u%s*32;const y=l[u];let v=0;for(;(y<<31-v&4294967295)===0;)v++;return p+=v,Int32Array.from([p,f])}getBottomRightOnBit(){const s=this.rowSize,l=this.bits;let u=l.length-1;for(;u>=0&&l[u]===0;)u--;if(u<0)return null;const f=Math.floor(u/s);let p=Math.floor(u%s)*32;const y=l[u];let v=31;for(;!(y>>>v);)v--;return p+=v,Int32Array.from([p,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof we))return!1;const l=s;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&z.equals(this.bits,l.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+z.hashCode(this.bits),s}toString(s="X ",l="  ",u=`
`){return this.buildToString(s,l,u)}buildToString(s,l,u){let f=new K;for(let p=0,y=this.height;p<y;p++){for(let v=0,I=this.width;v<I;v++)f.append(this.get(v,p)?s:l);f.append(u)}return f.toString()}clone(){return new we(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends g{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class Ae extends M{constructor(s){super(s),this.luminances=Ae.EMPTY,this.buckets=new Int32Array(Ae.LUMINANCE_BUCKETS)}getBlackRow(s,l){const u=this.getLuminanceSource(),f=u.getWidth();l==null||l.getSize()<f?l=new Y(f):l.clear(),this.initArrays(f);const p=u.getRow(s,this.luminances),y=this.buckets;for(let I=0;I<f;I++)y[(p[I]&255)>>Ae.LUMINANCE_SHIFT]++;const v=Ae.estimateBlackPoint(y);if(f<3)for(let I=0;I<f;I++)(p[I]&255)<v&&l.set(I);else{let I=p[0]&255,C=p[1]&255;for(let O=1;O<f-1;O++){const U=p[O+1]&255;(C*4-I-U)/2<v&&l.set(O),I=C,C=U}}return l}getBlackMatrix(){const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight(),f=new we(l,u);this.initArrays(l);const p=this.buckets;for(let I=1;I<5;I++){const C=Math.floor(u*I/5),O=s.getRow(C,this.luminances),U=Math.floor(l*4/5);for(let q=Math.floor(l/5);q<U;q++){const J=O[q]&255;p[J>>Ae.LUMINANCE_SHIFT]++}}const y=Ae.estimateBlackPoint(p),v=s.getMatrix();for(let I=0;I<u;I++){const C=I*l;for(let O=0;O<l;O++)(v[C+O]&255)<y&&f.set(O,I)}return f}createBinarizer(s){return new Ae(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const l=this.buckets;for(let u=0;u<Ae.LUMINANCE_BUCKETS;u++)l[u]=0}static estimateBlackPoint(s){const l=s.length;let u=0,f=0,p=0;for(let O=0;O<l;O++)s[O]>p&&(f=O,p=s[O]),s[O]>u&&(u=s[O]);let y=0,v=0;for(let O=0;O<l;O++){const U=O-f,q=s[O]*U*U;q>v&&(y=O,v=q)}if(f>y){const O=f;f=y,y=O}if(y-f<=l/16)throw new se;let I=y-1,C=-1;for(let O=y-1;O>f;O--){const U=O-f,q=U*U*(y-O)*(u-s[O]);q>C&&(I=O,C=q)}return I<<Ae.LUMINANCE_SHIFT}}Ae.LUMINANCE_BITS=5,Ae.LUMINANCE_SHIFT=8-Ae.LUMINANCE_BITS,Ae.LUMINANCE_BUCKETS=1<<Ae.LUMINANCE_BITS,Ae.EMPTY=Uint8ClampedArray.from([0]);class xe extends Ae{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight();if(l>=xe.MINIMUM_DIMENSION&&u>=xe.MINIMUM_DIMENSION){const f=s.getMatrix();let p=l>>xe.BLOCK_SIZE_POWER;(l&xe.BLOCK_SIZE_MASK)!==0&&p++;let y=u>>xe.BLOCK_SIZE_POWER;(u&xe.BLOCK_SIZE_MASK)!==0&&y++;const v=xe.calculateBlackPoints(f,p,y,l,u),I=new we(l,u);xe.calculateThresholdForBlock(f,p,y,l,u,v,I),this.matrix=I}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new xe(s)}static calculateThresholdForBlock(s,l,u,f,p,y,v){const I=p-xe.BLOCK_SIZE,C=f-xe.BLOCK_SIZE;for(let O=0;O<u;O++){let U=O<<xe.BLOCK_SIZE_POWER;U>I&&(U=I);const q=xe.cap(O,2,u-3);for(let J=0;J<l;J++){let le=J<<xe.BLOCK_SIZE_POWER;le>C&&(le=C);const ue=xe.cap(J,2,l-3);let fe=0;for(let Fe=-2;Fe<=2;Fe++){const je=y[q+Fe];fe+=je[ue-2]+je[ue-1]+je[ue]+je[ue+1]+je[ue+2]}const Ee=fe/25;xe.thresholdBlock(s,le,U,Ee,f,v)}}}static cap(s,l,u){return s<l?l:s>u?u:s}static thresholdBlock(s,l,u,f,p,y){for(let v=0,I=u*p+l;v<xe.BLOCK_SIZE;v++,I+=p)for(let C=0;C<xe.BLOCK_SIZE;C++)(s[I+C]&255)<=f&&y.set(l+C,u+v)}static calculateBlackPoints(s,l,u,f,p){const y=p-xe.BLOCK_SIZE,v=f-xe.BLOCK_SIZE,I=new Array(u);for(let C=0;C<u;C++){I[C]=new Int32Array(l);let O=C<<xe.BLOCK_SIZE_POWER;O>y&&(O=y);for(let U=0;U<l;U++){let q=U<<xe.BLOCK_SIZE_POWER;q>v&&(q=v);let J=0,le=255,ue=0;for(let Ee=0,Fe=O*f+q;Ee<xe.BLOCK_SIZE;Ee++,Fe+=f){for(let je=0;je<xe.BLOCK_SIZE;je++){const Oe=s[Fe+je]&255;J+=Oe,Oe<le&&(le=Oe),Oe>ue&&(ue=Oe)}if(ue-le>xe.MIN_DYNAMIC_RANGE)for(Ee++,Fe+=f;Ee<xe.BLOCK_SIZE;Ee++,Fe+=f)for(let je=0;je<xe.BLOCK_SIZE;je++)J+=s[Fe+je]&255}let fe=J>>xe.BLOCK_SIZE_POWER*2;if(ue-le<=xe.MIN_DYNAMIC_RANGE&&(fe=le/2,C>0&&U>0)){const Ee=(I[C-1][U]+2*I[C][U-1]+I[C-1][U-1])/4;le<Ee&&(fe=Ee)}I[C][U]=fe}}return I}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class oe{constructor(s,l){this.width=s,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,l,u,f){throw new ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ee("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let l=new K;for(let u=0;u<this.height;u++){const f=this.getRow(u,s);for(let p=0;p<this.width;p++){const y=f[p]&255;let v;y<64?v="#":y<128?v="+":y<192?v=".":v=" ",l.append(v)}l.append(`
`)}return l.toString()}}class Te extends oe{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,l){const u=this.delegate.getRow(s,l),f=this.getWidth();for(let p=0;p<f;p++)u[p]=255-(u[p]&255);return u}getMatrix(){const s=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(l);for(let f=0;f<l;f++)u[f]=255-(s[f]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(s,l,u,f){return new Te(this.delegate.crop(s,l,u,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class Ne extends oe{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ne.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const l=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ne.toGrayscaleBuffer(l.data,s.width,s.height)}static toGrayscaleBuffer(s,l,u){const f=new Uint8ClampedArray(l*u);for(let p=0,y=0,v=s.length;p<v;p+=4,y++){let I;if(s[p+3]===0)I=255;else{const O=s[p],U=s[p+1],q=s[p+2];I=306*O+601*U+117*q+512>>10}f[y]=I}return f}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth(),f=s*u;return l===null?l=this.buffer.slice(f,f+u):(l.length<u&&(l=new Uint8ClampedArray(u)),l.set(this.buffer.slice(f,f+u))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,l,u,f){return super.crop(s,l,u,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const l=this.getTempCanvasElement(),u=l.getContext("2d"),f=s*Ne.DEGREE_TO_RADIANS,p=this.canvas.width,y=this.canvas.height,v=Math.ceil(Math.abs(Math.cos(f))*p+Math.abs(Math.sin(f))*y),I=Math.ceil(Math.abs(Math.sin(f))*p+Math.abs(Math.cos(f))*y);return l.width=v,l.height=I,u.translate(v/2,I/2),u.rotate(f),u.drawImage(this.canvas,p/-2,y/-2),this.buffer=Ne.makeBufferFromCanvasImageData(l),this}invert(){return new Te(this)}}Ne.DEGREE_TO_RADIANS=Math.PI/180;class ae{constructor(s,l,u){this.deviceId=s,this.label=l,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||t0||self||window||void 0)&&(globalThis||t0||self||window||void 0).__awaiter||function(j,s,l,u){function f(p){return p instanceof l?p:new l(function(y){y(p)})}return new(l||(l=Promise))(function(p,y){function v(O){try{C(u.next(O))}catch(U){y(U)}}function I(O){try{C(u.throw(O))}catch(U){y(U)}}function C(O){O.done?p(O.value):f(O.value).then(v,I)}C((u=u.apply(j,s||[])).next())})};class Se{constructor(s,l=500,u){this.reader=s,this.timeBetweenScansMillis=l,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const u of s){const f=u.kind==="video"?"videoinput":u.kind;if(f!=="videoinput")continue;const p=u.deviceId||u.id,y=u.label||`Video device ${l.length+1}`,v=u.groupId,I={deviceId:p,label:y,kind:f,groupId:v};l.push(I)}return l})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new ae(l.deviceId,l.label))})}findDeviceById(s){return he(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(u=>u.deviceId===s):null})}decodeFromInputVideoDevice(s,l){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,l)})}decodeOnceFromVideoDevice(s,l){return he(this,void 0,void 0,function*(){this.reset();let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeOnceFromConstraints(f,l)})}decodeOnceFromConstraints(s,l){return he(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(u,l)})}decodeOnceFromStream(s,l){return he(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,l);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(s,l,u){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,l,u)})}decodeFromVideoDevice(s,l,u){return he(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const p={video:f};return yield this.decodeFromConstraints(p,l,u)})}decodeFromConstraints(s,l,u){return he(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,l,u)})}decodeFromStream(s,l,u){return he(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,l);return yield this.decodeContinuously(f,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,l){return he(this,void 0,void 0,function*(){const u=this.prepareVideoElement(l);return this.addVideoSource(u,s),this.videoElement=u,this.stream=s,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(s){return new Promise((l,u)=>this.playVideoOnLoad(s,()=>l()))}playVideoOnLoad(s,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",l),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,l){const u=document.getElementById(s);if(!u)throw new w(`element with id '${s}' not found`);if(u.nodeName.toLowerCase()!==l.toLowerCase())throw new w(`element with id '${s}' must be an ${l} element`);return u}decodeFromImage(s,l){if(!s&&!l)throw new w("either imageElement with a src set or an url must be provided");return l&&!s?this.decodeFromImageUrl(l):this.decodeFromImageElement(s)}decodeFromVideo(s,l){if(!s&&!l)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,l,u){if(s===void 0&&l===void 0)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrlContinuously(l,u):this.decodeFromVideoElementContinuously(s,u)}decodeFromImageElement(s){if(!s)throw new w("An image element must be provided.");this.reset();const l=this.prepareImageElement(s);this.imageElement=l;let u;return this.isImageLoaded(l)?u=this.decodeOnce(l,!1,!0):u=this._decodeOnLoadImage(l),u}decodeFromVideoElement(s){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(s,l){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(u,l)}_decodeFromVideoElementSetup(s){if(!s)throw new w("A video element must be provided.");this.reset();const l=this.prepareVideoElement(s);return this.videoElement=l,l}decodeFromImageUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const u=this._decodeOnLoadImage(l);return l.src=s,u}decodeFromVideoUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElement(l);return l.src=s,u}decodeFromVideoUrlContinuously(s,l){if(!s)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(u,l);return u.src=s,f}_decodeOnLoadImage(s){return new Promise((l,u)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(l,u),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,l){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,l)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let l;return typeof s>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(l=s),l}prepareVideoElement(s){let l;return!s&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(l=s),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(s,l=!0,u=!0){this._stopAsyncDecode=!1;const f=(p,y)=>{if(this._stopAsyncDecode){y(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const v=this.decode(s);p(v)}catch(v){const I=l&&v instanceof se,O=(v instanceof R||v instanceof F)&&u;if(I||O)return setTimeout(f,this._timeBetweenDecodingAttempts,p,y);y(v)}};return new Promise((p,y)=>f(p,y))}decodeContinuously(s,l){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);l(f,null),setTimeout(u,this.timeBetweenScansMillis)}catch(f){l(null,f);const p=f instanceof R||f instanceof F,y=f instanceof se;(p||y)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(s){const l=this.createBinaryBitmap(s);return this.decodeBitmap(l)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,l,u){l||(l={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(s,l,u=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const l=this.getCaptureCanvas(s),u=new Ne(l),f=new xe(u);return new T(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const l=this.createCaptureCanvas(s);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let u,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(u=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(u=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),l.style.width=u+"px",l.style.height=f+"px",l.width=u,l.height=f,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,l){try{s.srcObject=l}catch{s.src=URL.createObjectURL(l)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Le{constructor(s,l,u=l==null?0:8*l.length,f,p,y=D.currentTimeMillis()){this.text=s,this.rawBytes=l,this.numBits=u,this.resultPoints=f,this.format=p,this.timestamp=y,this.text=s,this.rawBytes=l,u==null?this.numBits=l==null?0:8*l.length:this.numBits=u,this.resultPoints=f,this.format=p,this.resultMetadata=null,y==null?this.timestamp=D.currentTimeMillis():this.timestamp=y}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,l)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const l=this.resultPoints;if(l===null)this.resultPoints=s;else if(s!==null&&s.length>0){const u=new Array(l.length+s.length);D.arraycopy(l,0,u,0,l.length),D.arraycopy(s,0,u,l.length,s.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var it;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(it||(it={}));var Re=it,Pe;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pe||(Pe={}));var Ge=Pe;class at{constructor(s,l,u,f,p=-1,y=-1){this.rawBytes=s,this.text=l,this.byteSegments=u,this.ecLevel=f,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=y,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class st{exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}static addOrSubtract(s,l){return s^l}}class ct{constructor(s,l){if(l.length===0)throw new E;this.field=s;const u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const l=this.coefficients;let u;if(s===1){u=0;for(let y=0,v=l.length;y!==v;y++){const I=l[y];u=st.addOrSubtract(u,I)}return u}u=l[0];const f=l.length,p=this.field;for(let y=1;y<f;y++)u=st.addOrSubtract(p.multiply(s,u),l[y]);return u}addOrSubtract(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){const y=l;l=u,u=y}let f=new Int32Array(u.length);const p=u.length-l.length;D.arraycopy(u,0,f,0,p);for(let y=p;y<u.length;y++)f[y]=st.addOrSubtract(l[y-p],u[y]);return new ct(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const l=this.coefficients,u=l.length,f=s.coefficients,p=f.length,y=new Int32Array(u+p-1),v=this.field;for(let I=0;I<u;I++){const C=l[I];for(let O=0;O<p;O++)y[I+O]=st.addOrSubtract(y[I+O],v.multiply(C,f[O]))}return new ct(v,y)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const l=this.coefficients.length,u=this.field,f=new Int32Array(l),p=this.coefficients;for(let y=0;y<l;y++)f[y]=u.multiply(p[y],s);return new ct(u,f)}multiplyByMonomial(s,l){if(s<0)throw new E;if(l===0)return this.field.getZero();const u=this.coefficients,f=u.length,p=new Int32Array(f+s),y=this.field;for(let v=0;v<f;v++)p[v]=y.multiply(u[v],l);return new ct(y,p)}divide(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new E("Divide by 0");const l=this.field;let u=l.getZero(),f=this;const p=s.getCoefficient(s.getDegree()),y=l.inverse(p);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const v=f.getDegree()-s.getDegree(),I=l.multiply(f.getCoefficient(f.getDegree()),y),C=s.multiplyByMonomial(v,I),O=l.buildMonomial(v,I);u=u.addOrSubtract(O),f=f.addOrSubtract(C)}return[u,f]}toString(){let s="";for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);if(u!==0){if(u<0?(s+=" - ",u=-u):s.length>0&&(s+=" + "),l===0||u!==1){const f=this.field.log(u);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}l!==0&&(l===1?s+="x":(s+="x^",s+=l))}}return s}}class bt extends g{}bt.kind="ArithmeticException";class ht extends st{constructor(s,l,u){super(),this.primitive=s,this.size=l,this.generatorBase=u;const f=new Int32Array(l);let p=1;for(let v=0;v<l;v++)f[v]=p,p*=2,p>=l&&(p^=s,p&=l-1);this.expTable=f;const y=new Int32Array(l);for(let v=0;v<l-1;v++)y[f[v]]=v;this.logTable=y,this.zero=new ct(this,Int32Array.from([0])),this.one=new ct(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new E;if(l===0)return this.zero;const u=new Int32Array(s+1);return u[0]=l,new ct(this,u)}inverse(s){if(s===0)throw new bt;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class gn extends g{}gn.kind="ReedSolomonException";class Vn extends g{}Vn.kind="IllegalStateException";class Dr{constructor(s){this.field=s}decode(s,l){const u=this.field,f=new ct(u,s),p=new Int32Array(l);let y=!0;for(let J=0;J<l;J++){const le=f.evaluateAt(u.exp(J+u.getGeneratorBase()));p[p.length-1-J]=le,le!==0&&(y=!1)}if(y)return;const v=new ct(u,p),I=this.runEuclideanAlgorithm(u.buildMonomial(l,1),v,l),C=I[0],O=I[1],U=this.findErrorLocations(C),q=this.findErrorMagnitudes(O,U);for(let J=0;J<U.length;J++){const le=s.length-1-u.log(U[J]);if(le<0)throw new gn("Bad error location");s[le]=ht.addOrSubtract(s[le],q[J])}}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){const J=s;s=l,l=J}const f=this.field;let p=s,y=l,v=f.getZero(),I=f.getOne();for(;y.getDegree()>=(u/2|0);){let J=p,le=v;if(p=y,v=I,p.isZero())throw new gn("r_{i-1} was zero");y=J;let ue=f.getZero();const fe=p.getCoefficient(p.getDegree()),Ee=f.inverse(fe);for(;y.getDegree()>=p.getDegree()&&!y.isZero();){const Fe=y.getDegree()-p.getDegree(),je=f.multiply(y.getCoefficient(y.getDegree()),Ee);ue=ue.addOrSubtract(f.buildMonomial(Fe,je)),y=y.addOrSubtract(p.multiplyByMonomial(Fe,je))}if(I=ue.multiply(v).addOrSubtract(le),y.getDegree()>=p.getDegree())throw new Vn("Division algorithm failed to reduce polynomial?")}const C=I.getCoefficient(0);if(C===0)throw new gn("sigmaTilde(0) was zero");const O=f.inverse(C),U=I.multiplyScalar(O),q=y.multiplyScalar(O);return[U,q]}findErrorLocations(s){const l=s.getDegree();if(l===1)return Int32Array.from([s.getCoefficient(1)]);const u=new Int32Array(l);let f=0;const p=this.field;for(let y=1;y<p.getSize()&&f<l;y++)s.evaluateAt(y)===0&&(u[f]=p.inverse(y),f++);if(f!==l)throw new gn("Error locator degree does not match number of roots");return u}findErrorMagnitudes(s,l){const u=l.length,f=new Int32Array(u),p=this.field;for(let y=0;y<u;y++){const v=p.inverse(l[y]);let I=1;for(let C=0;C<u;C++)if(y!==C){const O=p.multiply(l[C],v),U=(O&1)===0?O|1:O&-2;I=p.multiply(I,U)}f[y]=p.multiply(s.evaluateAt(v),p.inverse(I)),p.getGeneratorBase()!==0&&(f[y]=p.multiply(f[y],v))}return f}}var Qt;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})(Qt||(Qt={}));class zt{decode(s){this.ddata=s;let l=s.getBits(),u=this.extractBits(l),f=this.correctBits(u),p=zt.convertBoolArrayToByteArray(f),y=zt.getEncodedData(f),v=new at(p,y,null,null);return v.setNumBits(f.length),v}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let l=s.length,u=Qt.UPPER,f=Qt.UPPER,p="",y=0;for(;y<l;)if(f===Qt.BINARY){if(l-y<5)break;let v=zt.readCode(s,y,5);if(y+=5,v===0){if(l-y<11)break;v=zt.readCode(s,y,11)+31,y+=11}for(let I=0;I<v;I++){if(l-y<8){y=l;break}const C=zt.readCode(s,y,8);p+=te.castAsNonUtf8Char(C),y+=8}f=u}else{let v=f===Qt.DIGIT?4:5;if(l-y<v)break;let I=zt.readCode(s,y,v);y+=v;let C=zt.getCharacter(f,I);C.startsWith("CTRL_")?(u=f,f=zt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(u=f)):(p+=C,f=u)}return p}static getTable(s){switch(s){case"L":return Qt.LOWER;case"P":return Qt.PUNCT;case"M":return Qt.MIXED;case"D":return Qt.DIGIT;case"B":return Qt.BINARY;case"U":default:return Qt.UPPER}}static getCharacter(s,l){switch(s){case Qt.UPPER:return zt.UPPER_TABLE[l];case Qt.LOWER:return zt.LOWER_TABLE[l];case Qt.MIXED:return zt.MIXED_TABLE[l];case Qt.PUNCT:return zt.PUNCT_TABLE[l];case Qt.DIGIT:return zt.DIGIT_TABLE[l];default:throw new Vn("Bad table")}}correctBits(s){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=ht.AZTEC_DATA_10):(u=12,l=ht.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),p=s.length/u;if(p<f)throw new F;let y=s.length%u,v=new Int32Array(p);for(let q=0;q<p;q++,y+=u)v[q]=zt.readCode(s,y,u);try{new Dr(l).decode(v,p-f)}catch(q){throw new F(q)}let I=(1<<u)-1,C=0;for(let q=0;q<f;q++){let J=v[q];if(J===0||J===I)throw new F;(J===1||J===I-1)&&C++}let O=new Array(f*u-C),U=0;for(let q=0;q<f;q++){let J=v[q];if(J===1||J===I-1)O.fill(J>1,U,U+u-1),U+=u-1;else for(let le=u-1;le>=0;--le)O[U++]=(J&1<<le)!==0}return O}extractBits(s){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),f=(l?11:14)+u*4,p=new Int32Array(f),y=new Array(this.totalBitsInLayer(u,l));if(l)for(let v=0;v<p.length;v++)p[v]=v;else{let v=f+1+2*W.truncDivision(W.truncDivision(f,2)-1,15),I=f/2,C=W.truncDivision(v,2);for(let O=0;O<I;O++){let U=O+W.truncDivision(O,15);p[I-O-1]=C-U-1,p[I+O]=C+U+1}}for(let v=0,I=0;v<u;v++){let C=(u-v)*4+(l?9:12),O=v*2,U=f-1-O;for(let q=0;q<C;q++){let J=q*2;for(let le=0;le<2;le++)y[I+J+le]=s.get(p[O+le],p[O+q]),y[I+2*C+J+le]=s.get(p[O+q],p[U-le]),y[I+4*C+J+le]=s.get(p[U-le],p[U-q]),y[I+6*C+J+le]=s.get(p[U-q],p[O+le])}I+=C*8}return y}static readCode(s,l,u){let f=0;for(let p=l;p<l+u;p++)f<<=1,s[p]&&(f|=1);return f}static readByte(s,l){let u=s.length-l;return u>=8?zt.readCode(s,l,8):zt.readCode(s,l,u)<<8-u}static convertBoolArrayToByteArray(s){let l=new Uint8Array((s.length+7)/8);for(let u=0;u<l.length;u++)l[u]=zt.readByte(s,8*u);return l}totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,l,u,f){const p=s-u,y=l-f;return Math.sqrt(p*p+y*y)}static sum(s){let l=0;for(let u=0,f=s.length;u!==f;u++){const p=s[u];l+=p}return l}}class xi{static floatToIntBits(s){return s}}xi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Xe{constructor(s,l){this.x=s,this.y=l}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Xe){const l=s;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*xi.floatToIntBits(this.x)+xi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const l=this.distance(s[0],s[1]),u=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let p,y,v;if(u>=l&&u>=f?(y=s[0],p=s[1],v=s[2]):f>=u&&f>=l?(y=s[1],p=s[0],v=s[2]):(y=s[2],p=s[0],v=s[1]),this.crossProductZ(p,y,v)<0){const I=p;p=v,v=I}s[0]=p,s[1]=y,s[2]=v}static distance(s,l){return pt.distance(s.x,s.y,l.x,l.y)}static crossProductZ(s,l,u){const f=l.x,p=l.y;return(u.x-f)*(s.y-p)-(u.y-p)*(s.x-f)}}class Kn{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class wi extends Kn{constructor(s,l,u,f,p){super(s,l),this.compact=u,this.nbDatablocks=f,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Yr{constructor(s,l,u,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),l==null&&(l=Yr.INIT_SIZE),u==null&&(u=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const p=l/2|0;if(this.leftInit=u-p,this.rightInit=u+p,this.upInit=f-p,this.downInit=f+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let s=this.leftInit,l=this.rightInit,u=this.upInit,f=this.downInit,p=!1,y=!0,v=!1,I=!1,C=!1,O=!1,U=!1;const q=this.width,J=this.height;for(;y;){y=!1;let le=!0;for(;(le||!I)&&l<q;)le=this.containsBlackPoint(u,f,l,!1),le?(l++,y=!0,I=!0):I||l++;if(l>=q){p=!0;break}let ue=!0;for(;(ue||!C)&&f<J;)ue=this.containsBlackPoint(s,l,f,!0),ue?(f++,y=!0,C=!0):C||f++;if(f>=J){p=!0;break}let fe=!0;for(;(fe||!O)&&s>=0;)fe=this.containsBlackPoint(u,f,s,!1),fe?(s--,y=!0,O=!0):O||s--;if(s<0){p=!0;break}let Ee=!0;for(;(Ee||!U)&&u>=0;)Ee=this.containsBlackPoint(s,l,u,!0),Ee?(u--,y=!0,U=!0):U||u--;if(u<0){p=!0;break}y&&(v=!0)}if(!p&&v){const le=l-s;let ue=null;for(let je=1;ue===null&&je<le;je++)ue=this.getBlackPointOnSegment(s,f-je,s+je,f);if(ue==null)throw new se;let fe=null;for(let je=1;fe===null&&je<le;je++)fe=this.getBlackPointOnSegment(s,u+je,s+je,u);if(fe==null)throw new se;let Ee=null;for(let je=1;Ee===null&&je<le;je++)Ee=this.getBlackPointOnSegment(l,u+je,l-je,u);if(Ee==null)throw new se;let Fe=null;for(let je=1;Fe===null&&je<le;je++)Fe=this.getBlackPointOnSegment(l,f-je,l-je,f);if(Fe==null)throw new se;return this.centerEdges(Fe,ue,Ee,fe)}else throw new se}getBlackPointOnSegment(s,l,u,f){const p=pt.round(pt.distance(s,l,u,f)),y=(u-s)/p,v=(f-l)/p,I=this.image;for(let C=0;C<p;C++){const O=pt.round(s+C*y),U=pt.round(l+C*v);if(I.get(O,U))return new Xe(O,U)}return null}centerEdges(s,l,u,f){const p=s.getX(),y=s.getY(),v=l.getX(),I=l.getY(),C=u.getX(),O=u.getY(),U=f.getX(),q=f.getY(),J=Yr.CORR;return p<this.width/2?[new Xe(U-J,q+J),new Xe(v+J,I+J),new Xe(C-J,O-J),new Xe(p+J,y-J)]:[new Xe(U+J,q+J),new Xe(v+J,I-J),new Xe(C-J,O+J),new Xe(p-J,y-J)]}containsBlackPoint(s,l,u,f){const p=this.image;if(f){for(let y=s;y<=l;y++)if(p.get(y,u))return!0}else for(let y=s;y<=l;y++)if(p.get(u,y))return!0;return!1}}Yr.INIT_SIZE=10,Yr.CORR=1;class Qs{static checkAndNudgePoints(s,l){const u=s.getWidth(),f=s.getHeight();let p=!0;for(let y=0;y<l.length&&p;y+=2){const v=Math.floor(l[y]),I=Math.floor(l[y+1]);if(v<-1||v>u||I<-1||I>f)throw new se;p=!1,v===-1?(l[y]=0,p=!0):v===u&&(l[y]=u-1,p=!0),I===-1?(l[y+1]=0,p=!0):I===f&&(l[y+1]=f-1,p=!0)}p=!0;for(let y=l.length-2;y>=0&&p;y-=2){const v=Math.floor(l[y]),I=Math.floor(l[y+1]);if(v<-1||v>u||I<-1||I>f)throw new se;p=!1,v===-1?(l[y]=0,p=!0):v===u&&(l[y]=u-1,p=!0),I===-1?(l[y+1]=0,p=!0):I===f&&(l[y+1]=f-1,p=!0)}}}class Wt{constructor(s,l,u,f,p,y,v,I,C){this.a11=s,this.a21=l,this.a31=u,this.a12=f,this.a22=p,this.a32=y,this.a13=v,this.a23=I,this.a33=C}static quadrilateralToQuadrilateral(s,l,u,f,p,y,v,I,C,O,U,q,J,le,ue,fe){const Ee=Wt.quadrilateralToSquare(s,l,u,f,p,y,v,I);return Wt.squareToQuadrilateral(C,O,U,q,J,le,ue,fe).times(Ee)}transformPoints(s){const l=s.length,u=this.a11,f=this.a12,p=this.a13,y=this.a21,v=this.a22,I=this.a23,C=this.a31,O=this.a32,U=this.a33;for(let q=0;q<l;q+=2){const J=s[q],le=s[q+1],ue=p*J+I*le+U;s[q]=(u*J+y*le+C)/ue,s[q+1]=(f*J+v*le+O)/ue}}transformPointsWithValues(s,l){const u=this.a11,f=this.a12,p=this.a13,y=this.a21,v=this.a22,I=this.a23,C=this.a31,O=this.a32,U=this.a33,q=s.length;for(let J=0;J<q;J++){const le=s[J],ue=l[J],fe=p*le+I*ue+U;s[J]=(u*le+y*ue+C)/fe,l[J]=(f*le+v*ue+O)/fe}}static squareToQuadrilateral(s,l,u,f,p,y,v,I){const C=s-u+p-v,O=l-f+y-I;if(C===0&&O===0)return new Wt(u-s,p-u,s,f-l,y-f,l,0,0,1);{const U=u-p,q=v-p,J=f-y,le=I-y,ue=U*le-q*J,fe=(C*le-q*O)/ue,Ee=(U*O-C*J)/ue;return new Wt(u-s+fe*u,v-s+Ee*v,s,f-l+fe*f,I-l+Ee*I,l,fe,Ee,1)}}static quadrilateralToSquare(s,l,u,f,p,y,v,I){return Wt.squareToQuadrilateral(s,l,u,f,p,y,v,I).buildAdjoint()}buildAdjoint(){return new Wt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Wt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Xn extends Qs{sampleGrid(s,l,u,f,p,y,v,I,C,O,U,q,J,le,ue,fe,Ee,Fe,je){const Oe=Wt.quadrilateralToQuadrilateral(f,p,y,v,I,C,O,U,q,J,le,ue,fe,Ee,Fe,je);return this.sampleGridWithTransform(s,l,u,Oe)}sampleGridWithTransform(s,l,u,f){if(l<=0||u<=0)throw new se;const p=new we(l,u),y=new Float32Array(2*l);for(let v=0;v<u;v++){const I=y.length,C=v+.5;for(let O=0;O<I;O+=2)y[O]=O/2+.5,y[O+1]=C;f.transformPoints(y),Qs.checkAndNudgePoints(s,y);try{for(let O=0;O<I;O+=2)s.get(Math.floor(y[O]),Math.floor(y[O+1]))&&p.set(O/2,v)}catch{throw new se}}return p}}class Er{static setGridSampler(s){Er.gridSampler=s}static getInstance(){return Er.gridSampler}}Er.gridSampler=new Xn;class Fn{constructor(s,l){this.x=s,this.y=l}toResultPoint(){return new Xe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Qr{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let l=this.getMatrixCenter(),u=this.getBullsEyeCorners(l);if(s){let y=u[0];u[0]=u[2],u[2]=y}this.extractParameters(u);let f=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),p=this.getMatrixCornerPoints(u);return new wi(f,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new se;let l=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(s[0],s[1],l),this.sampleLine(s[1],s[2],l),this.sampleLine(s[2],s[3],l),this.sampleLine(s[3],s[0],l)]);this.shift=this.getRotation(u,l);let f=0;for(let y=0;y<4;y++){let v=u[(this.shift+y)%4];this.compact?(f<<=7,f+=v>>1&127):(f<<=10,f+=(v>>2&992)+(v>>1&31))}let p=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(s,l){let u=0;s.forEach((f,p,y)=>{let v=(f>>l-2<<1)+(f&1);u=(u<<3)+v}),u=((u&1)<<11)+(u>>1);for(let f=0;f<4;f++)if(W.bitCount(u^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new se}getCorrectedParameterData(s,l){let u,f;l?(u=7,f=2):(u=10,f=4);let p=u-f,y=new Int32Array(u);for(let I=u-1;I>=0;--I)y[I]=s&15,s>>=4;try{new Dr(ht.AZTEC_PARAM).decode(y,p)}catch{throw new se}let v=0;for(let I=0;I<f;I++)v=(v<<4)+y[I];return v}getBullsEyeCorners(s){let l=s,u=s,f=s,p=s,y=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let U=this.getFirstDifferent(l,y,1,-1),q=this.getFirstDifferent(u,y,1,1),J=this.getFirstDifferent(f,y,-1,1),le=this.getFirstDifferent(p,y,-1,-1);if(this.nbCenterLayers>2){let ue=this.distancePoint(le,U)*this.nbCenterLayers/(this.distancePoint(p,l)*(this.nbCenterLayers+2));if(ue<.75||ue>1.25||!this.isWhiteOrBlackRectangle(U,q,J,le))break}l=U,u=q,f=J,p=le,y=!y}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let v=new Xe(l.getX()+.5,l.getY()-.5),I=new Xe(u.getX()+.5,u.getY()+.5),C=new Xe(f.getX()-.5,f.getY()+.5),O=new Xe(p.getX()-.5,p.getY()-.5);return this.expandSquare([v,I,C,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,l,u,f;try{let v=new Yr(this.image).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{let I=this.image.getWidth()/2,C=this.image.getHeight()/2;s=this.getFirstDifferent(new Fn(I+7,C-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Fn(I+7,C+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Fn(I-7,C+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Fn(I-7,C-7),!1,-1,-1).toResultPoint()}let p=pt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=pt.round((s.getY()+f.getY()+l.getY()+u.getY())/4);try{let v=new Yr(this.image,15,p,y).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{s=this.getFirstDifferent(new Fn(p+7,y-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Fn(p+7,y+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Fn(p-7,y+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Fn(p-7,y-7),!1,-1,-1).toResultPoint()}return p=pt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=pt.round((s.getY()+f.getY()+l.getY()+u.getY())/4),new Fn(p,y)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,l,u,f,p){let y=Er.getInstance(),v=this.getDimension(),I=v/2-this.nbCenterLayers,C=v/2+this.nbCenterLayers;return y.sampleGrid(s,v,v,I,I,C,I,C,C,I,C,l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY(),p.getX(),p.getY())}sampleLine(s,l,u){let f=0,p=this.distanceResultPoint(s,l),y=p/u,v=s.getX(),I=s.getY(),C=y*(l.getX()-s.getX())/p,O=y*(l.getY()-s.getY())/p;for(let U=0;U<u;U++)this.image.get(pt.round(v+U*C),pt.round(I+U*O))&&(f|=1<<u-U-1);return f}isWhiteOrBlackRectangle(s,l,u,f){let p=3;s=new Fn(s.getX()-p,s.getY()+p),l=new Fn(l.getX()-p,l.getY()-p),u=new Fn(u.getX()+p,u.getY()-p),f=new Fn(f.getX()+p,f.getY()+p);let y=this.getColor(f,s);if(y===0)return!1;let v=this.getColor(s,l);return v!==y||(v=this.getColor(l,u),v!==y)?!1:(v=this.getColor(u,f),v===y)}getColor(s,l){let u=this.distancePoint(s,l),f=(l.getX()-s.getX())/u,p=(l.getY()-s.getY())/u,y=0,v=s.getX(),I=s.getY(),C=this.image.get(s.getX(),s.getY()),O=Math.ceil(u);for(let q=0;q<O;q++)v+=f,I+=p,this.image.get(pt.round(v),pt.round(I))!==C&&y++;let U=y/u;return U>.1&&U<.9?0:U<=.1===C?1:-1}getFirstDifferent(s,l,u,f){let p=s.getX()+u,y=s.getY()+f;for(;this.isValid(p,y)&&this.image.get(p,y)===l;)p+=u,y+=f;for(p-=u,y-=f;this.isValid(p,y)&&this.image.get(p,y)===l;)p+=u;for(p-=u;this.isValid(p,y)&&this.image.get(p,y)===l;)y+=f;return y-=f,new Fn(p,y)}expandSquare(s,l,u){let f=u/(2*l),p=s[0].getX()-s[2].getX(),y=s[0].getY()-s[2].getY(),v=(s[0].getX()+s[2].getX())/2,I=(s[0].getY()+s[2].getY())/2,C=new Xe(v+f*p,I+f*y),O=new Xe(v-f*p,I-f*y);p=s[1].getX()-s[3].getX(),y=s[1].getY()-s[3].getY(),v=(s[1].getX()+s[3].getX())/2,I=(s[1].getY()+s[3].getY())/2;let U=new Xe(v+f*p,I+f*y),q=new Xe(v-f*p,I-f*y);return[C,U,O,q]}isValid(s,l){return s>=0&&s<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(s){let l=pt.round(s.getX()),u=pt.round(s.getY());return this.isValid(l,u)}distancePoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}distanceResultPoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Fi{decode(s,l=null){let u=null,f=new Qr(s.getBlackMatrix()),p=null,y=null;try{let O=f.detectMirror(!1);p=O.getPoints(),this.reportFoundResultPoints(l,p),y=new zt().decode(O)}catch(O){u=O}if(y==null)try{let O=f.detectMirror(!0);p=O.getPoints(),this.reportFoundResultPoints(l,p),y=new zt().decode(O)}catch(O){throw u??O}let v=new Le(y.getText(),y.getRawBytes(),y.getNumBits(),p,Re.AZTEC,D.currentTimeMillis()),I=y.getByteSegments();I!=null&&v.putMetadata(Ge.BYTE_SEGMENTS,I);let C=y.getECLevel();return C!=null&&v.putMetadata(Ge.ERROR_CORRECTION_LEVEL,C),v}reportFoundResultPoints(s,l){if(s!=null){let u=s.get(ie.NEED_RESULT_POINT_CALLBACK);u!=null&&l.forEach((f,p,y)=>{u.foundPossibleResultPoint(f)})}}reset(){}}class vi extends Se{constructor(s=500){super(new Fi,s)}}class In{decode(s,l){try{return this.doDecode(s,l)}catch{if(l&&l.get(ie.TRY_HARDER)===!0&&s.isRotateSupported()){const p=s.rotateCounterClockwise(),y=this.doDecode(p,l),v=y.getResultMetadata();let I=270;v!==null&&v.get(Ge.ORIENTATION)===!0&&(I=I+v.get(Ge.ORIENTATION)%360),y.putMetadata(Ge.ORIENTATION,I);const C=y.getResultPoints();if(C!==null){const O=p.getHeight();for(let U=0;U<C.length;U++)C[U]=new Xe(O-C[U].getY()-1,C[U].getX())}return y}else throw new se}}reset(){}doDecode(s,l){const u=s.getWidth(),f=s.getHeight();let p=new Y(u);const y=l&&l.get(ie.TRY_HARDER)===!0,v=Math.max(1,f>>(y?8:5));let I;y?I=f:I=15;const C=Math.trunc(f/2);for(let O=0;O<I;O++){const U=Math.trunc((O+1)/2),q=(O&1)===0,J=C+v*(q?U:-U);if(J<0||J>=f)break;try{p=s.getBlackRow(J,p)}catch{continue}for(let le=0;le<2;le++){if(le===1&&(p.reverse(),l&&l.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const ue=new Map;l.forEach((fe,Ee)=>ue.set(Ee,fe)),ue.delete(ie.NEED_RESULT_POINT_CALLBACK),l=ue}try{const ue=this.decodeRow(J,p,l);if(le===1){ue.putMetadata(Ge.ORIENTATION,180);const fe=ue.getResultPoints();fe!==null&&(fe[0]=new Xe(u-fe[0].getX()-1,fe[0].getY()),fe[1]=new Xe(u-fe[1].getX()-1,fe[1].getY()))}return ue}catch{}}}throw new se}static recordPattern(s,l,u){const f=u.length;for(let C=0;C<f;C++)u[C]=0;const p=s.getSize();if(l>=p)throw new se;let y=!s.get(l),v=0,I=l;for(;I<p;){if(s.get(I)!==y)u[v]++;else{if(++v===f)break;u[v]=1,y=!y}I++}if(!(v===f||v===f-1&&I===p))throw new se}static recordPatternInReverse(s,l,u){let f=u.length,p=s.get(l);for(;l>0&&f>=0;)s.get(--l)!==p&&(f--,p=!p);if(f>=0)throw new se;In.recordPattern(s,l+1,u)}static patternMatchVariance(s,l,u){const f=s.length;let p=0,y=0;for(let C=0;C<f;C++)p+=s[C],y+=l[C];if(p<y)return Number.POSITIVE_INFINITY;const v=p/y;u*=v;let I=0;for(let C=0;C<f;C++){const O=s[C],U=l[C]*v,q=O>U?O-U:U-O;if(q>u)return Number.POSITIVE_INFINITY;I+=q}return I/p}}class We extends In{static findStartPattern(s){const l=s.getSize(),u=s.getNextSet(0);let f=0,p=Int32Array.from([0,0,0,0,0,0]),y=u,v=!1;const I=6;for(let C=u;C<l;C++)if(s.get(C)!==v)p[f]++;else{if(f===I-1){let O=We.MAX_AVG_VARIANCE,U=-1;for(let q=We.CODE_START_A;q<=We.CODE_START_C;q++){const J=In.patternMatchVariance(p,We.CODE_PATTERNS[q],We.MAX_INDIVIDUAL_VARIANCE);J<O&&(O=J,U=q)}if(U>=0&&s.isRange(Math.max(0,y-(C-y)/2),y,!1))return Int32Array.from([y,C,U]);y+=p[0]+p[1],p=p.slice(2,p.length-1),p[f-1]=0,p[f]=0,f--}else f++;p[f]=1,v=!v}throw new se}static decodeCode(s,l,u){In.recordPattern(s,u,l);let f=We.MAX_AVG_VARIANCE,p=-1;for(let y=0;y<We.CODE_PATTERNS.length;y++){const v=We.CODE_PATTERNS[y],I=this.patternMatchVariance(l,v,We.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,p=y)}if(p>=0)return p;throw new se}decodeRow(s,l,u){const f=u&&u.get(ie.ASSUME_GS1)===!0,p=We.findStartPattern(l),y=p[2];let v=0;const I=new Uint8Array(20);I[v++]=y;let C;switch(y){case We.CODE_START_A:C=We.CODE_CODE_A;break;case We.CODE_START_B:C=We.CODE_CODE_B;break;case We.CODE_START_C:C=We.CODE_CODE_C;break;default:throw new F}let O=!1,U=!1,q="",J=p[0],le=p[1];const ue=Int32Array.from([0,0,0,0,0,0]);let fe=0,Ee=0,Fe=y,je=0,Oe=!0,Mt=!1,St=!1;for(;!O;){const to=U;switch(U=!1,fe=Ee,Ee=We.decodeCode(l,ue,le),I[v++]=Ee,Ee!==We.CODE_STOP&&(Oe=!0),Ee!==We.CODE_STOP&&(je++,Fe+=je*Ee),J=le,le+=ue.reduce((Za,eh)=>Za+eh,0),Ee){case We.CODE_START_A:case We.CODE_START_B:case We.CODE_START_C:throw new F}switch(C){case We.CODE_CODE_A:if(Ee<64)St===Mt?q+=String.fromCharCode(32+Ee):q+=String.fromCharCode(32+Ee+128),St=!1;else if(Ee<96)St===Mt?q+=String.fromCharCode(Ee-64):q+=String.fromCharCode(Ee+64),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_A:!Mt&&St?(Mt=!0,St=!1):Mt&&St?(Mt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_B;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_B:if(Ee<96)St===Mt?q+=String.fromCharCode(32+Ee):q+=String.fromCharCode(32+Ee+128),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_B:!Mt&&St?(Mt=!0,St=!1):Mt&&St?(Mt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_A;break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_C:if(Ee<100)Ee<10&&(q+="0"),q+=Ee;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_STOP:O=!0;break}break}to&&(C=C===We.CODE_CODE_A?We.CODE_CODE_B:We.CODE_CODE_A)}const Ci=le-J;if(le=l.getNextUnset(le),!l.isRange(le,Math.min(l.getSize(),le+(le-J)/2),!1))throw new se;if(Fe-=je*fe,Fe%103!==fe)throw new R;const ws=q.length;if(ws===0)throw new se;ws>0&&Oe&&(C===We.CODE_CODE_C?q=q.substring(0,ws-2):q=q.substring(0,ws-1));const Sr=(p[1]+p[0])/2,hn=J+Ci/2,sr=I.length,hi=new Uint8Array(sr);for(let to=0;to<sr;to++)hi[to]=I[to];const ua=[new Xe(Sr,s),new Xe(hn,s)];return new Le(q,hi,0,ua,Re.CODE_128,new Date().getTime())}}We.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],We.MAX_AVG_VARIANCE=.25,We.MAX_INDIVIDUAL_VARIANCE=.7,We.CODE_SHIFT=98,We.CODE_CODE_C=99,We.CODE_CODE_B=100,We.CODE_CODE_A=101,We.CODE_FNC_1=102,We.CODE_FNC_2=97,We.CODE_FNC_3=96,We.CODE_FNC_4_A=101,We.CODE_FNC_4_B=100,We.CODE_START_A=103,We.CODE_START_B=104,We.CODE_START_C=105,We.CODE_STOP=106;class An extends In{constructor(s=!1,l=!1){super(),this.usingCheckDigit=s,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,l,u){let f=this.counters;f.fill(0),this.decodeRowResult="";let p=An.findAsteriskPattern(l,f),y=l.getNextSet(p[1]),v=l.getSize(),I,C;do{An.recordPattern(l,y,f);let ue=An.toNarrowWidePattern(f);if(ue<0)throw new se;I=An.patternToChar(ue),this.decodeRowResult+=I,C=y;for(let fe of f)y+=fe;y=l.getNextSet(y)}while(I!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ue of f)O+=ue;let U=y-C-O;if(y!==v&&U*2<O)throw new se;if(this.usingCheckDigit){let ue=this.decodeRowResult.length-1,fe=0;for(let Ee=0;Ee<ue;Ee++)fe+=An.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(ue)!==An.ALPHABET_STRING.charAt(fe%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,ue)}if(this.decodeRowResult.length===0)throw new se;let q;this.extendedMode?q=An.decodeExtended(this.decodeRowResult):q=this.decodeRowResult;let J=(p[1]+p[0])/2,le=C+O/2;return new Le(q,null,0,[new Xe(J,s),new Xe(le,s)],Re.CODE_39,new Date().getTime())}static findAsteriskPattern(s,l){let u=s.getSize(),f=s.getNextSet(0),p=0,y=f,v=!1,I=l.length;for(let C=f;C<u;C++)if(s.get(C)!==v)l[p]++;else{if(p===I-1){if(this.toNarrowWidePattern(l)===An.ASTERISK_ENCODING&&s.isRange(Math.max(0,y-Math.floor((C-y)/2)),y,!1))return[y,C];y+=l[0]+l[1],l.copyWithin(0,2,2+p-1),l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,v=!v}throw new se}static toNarrowWidePattern(s){let l=s.length,u=0,f;do{let p=2147483647;for(let I of s)I<p&&I>u&&(p=I);u=p,f=0;let y=0,v=0;for(let I=0;I<l;I++){let C=s[I];C>u&&(v|=1<<l-1-I,f++,y+=C)}if(f===3){for(let I=0;I<l&&f>0;I++){let C=s[I];if(C>u&&(f--,C*2>=y))return-1}return v}}while(f>3);return-1}static patternToChar(s){for(let l=0;l<An.CHARACTER_ENCODINGS.length;l++)if(An.CHARACTER_ENCODINGS[l]===s)return An.ALPHABET_STRING.charAt(l);if(s===An.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(s){let l=s.length,u="";for(let f=0;f<l;f++){let p=s.charAt(f);if(p==="+"||p==="$"||p==="%"||p==="/"){let y=s.charAt(f+1),v="\0";switch(p){case"+":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)+32);else throw new F;break;case"$":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)-64);else throw new F;break;case"%":if(y>="A"&&y<="E")v=String.fromCharCode(y.charCodeAt(0)-38);else if(y>="F"&&y<="J")v=String.fromCharCode(y.charCodeAt(0)-11);else if(y>="K"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)+16);else if(y>="P"&&y<="T")v=String.fromCharCode(y.charCodeAt(0)+43);else if(y==="U")v="\0";else if(y==="V")v="@";else if(y==="W")v="`";else if(y==="X"||y==="Y"||y==="Z")v="";else throw new F;break;case"/":if(y>="A"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)-32);else if(y==="Z")v=":";else throw new F;break}u+=v,f++}else u+=p}return u}}An.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",An.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],An.ASTERISK_ENCODING=148;class Ht extends In{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,l,u){let f=this.decodeStart(l),p=this.decodeEnd(l),y=new K;Ht.decodeMiddle(l,f[1],p[0],y);let v=y.toString(),I=null;u!=null&&(I=u.get(ie.ALLOWED_LENGTHS)),I==null&&(I=Ht.DEFAULT_ALLOWED_LENGTHS);let C=v.length,O=!1,U=0;for(let le of I){if(C===le){O=!0;break}le>U&&(U=le)}if(!O&&C>U&&(O=!0),!O)throw new F;const q=[new Xe(f[1],s),new Xe(p[0],s)];return new Le(v,null,0,q,Re.ITF,new Date().getTime())}static decodeMiddle(s,l,u,f){let p=new Int32Array(10),y=new Int32Array(5),v=new Int32Array(5);for(p.fill(0),y.fill(0),v.fill(0);l<u;){In.recordPattern(s,l,p);for(let C=0;C<5;C++){let O=2*C;y[C]=p[O],v[C]=p[O+1]}let I=Ht.decodeDigit(y);f.append(I.toString()),I=this.decodeDigit(v),f.append(I.toString()),p.forEach(function(C){l+=C})}}decodeStart(s){let l=Ht.skipWhiteSpace(s),u=Ht.findGuardPattern(s,l,Ht.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(s,u[0]),u}validateQuietZone(s,l){let u=this.narrowLineWidth*10;u=u<l?u:l;for(let f=l-1;u>0&&f>=0&&!s.get(f);f--)u--;if(u!==0)throw new se}static skipWhiteSpace(s){const l=s.getSize(),u=s.getNextSet(0);if(u===l)throw new se;return u}decodeEnd(s){s.reverse();try{let l=Ht.skipWhiteSpace(s),u;try{u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[0])}catch(p){p instanceof se&&(u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,u[0]);let f=u[0];return u[0]=s.getSize()-u[1],u[1]=s.getSize()-f,u}finally{s.reverse()}}static findGuardPattern(s,l,u){let f=u.length,p=new Int32Array(f),y=s.getSize(),v=!1,I=0,C=l;p.fill(0);for(let O=l;O<y;O++)if(s.get(O)!==v)p[I]++;else{if(I===f-1){if(In.patternMatchVariance(p,u,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return[C,O];C+=p[0]+p[1],D.arraycopy(p,2,p,0,I-1),p[I-1]=0,p[I]=0,I--}else I++;p[I]=1,v=!v}throw new se}static decodeDigit(s){let l=Ht.MAX_AVG_VARIANCE,u=-1,f=Ht.PATTERNS.length;for(let p=0;p<f;p++){let y=Ht.PATTERNS[p],v=In.patternMatchVariance(s,y,Ht.MAX_INDIVIDUAL_VARIANCE);v<l?(l=v,u=p):v===l&&(u=-1)}if(u>=0)return u%10;throw new se}}Ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ht.MAX_AVG_VARIANCE=.38,Ht.MAX_INDIVIDUAL_VARIANCE=.5,Ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ht.START_PATTERN=Int32Array.from([1,1,1,1]),Ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class pn extends In{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let l=!1,u,f=0,p=Int32Array.from([0,0,0]);for(;!l;){p=Int32Array.from([0,0,0]),u=pn.findGuardPattern(s,f,!1,this.START_END_PATTERN,p);let y=u[0];f=u[1];let v=y-(f-y);v>=0&&(l=s.isRange(v,y,!1))}return u}static checkChecksum(s){return pn.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return pn.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}u*=3;for(let f=l-2;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}return(1e3-u)%10}static decodeEnd(s,l){return pn.findGuardPattern(s,l,!1,pn.START_END_PATTERN,new Int32Array(pn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,l,u,f){return this.findGuardPattern(s,l,u,f,new Int32Array(f.length))}static findGuardPattern(s,l,u,f,p){let y=s.getSize();l=u?s.getNextUnset(l):s.getNextSet(l);let v=0,I=l,C=f.length,O=u;for(let U=l;U<y;U++)if(s.get(U)!==O)p[v]++;else{if(v===C-1){if(In.patternMatchVariance(p,f,pn.MAX_INDIVIDUAL_VARIANCE)<pn.MAX_AVG_VARIANCE)return Int32Array.from([I,U]);I+=p[0]+p[1];let q=p.slice(2,p.length-1);for(let J=0;J<v-1;J++)p[J]=q[J];p[v-1]=0,p[v]=0,v--}else v++;p[v]=1,O=!O}throw new se}static decodeDigit(s,l,u,f){this.recordPattern(s,u,l);let p=this.MAX_AVG_VARIANCE,y=-1,v=f.length;for(let I=0;I<v;I++){let C=f[I],O=In.patternMatchVariance(l,C,pn.MAX_INDIVIDUAL_VARIANCE);O<p&&(p=O,y=I)}if(y>=0)return y;throw new se}}pn.MAX_AVG_VARIANCE=.48,pn.MAX_INDIVIDUAL_VARIANCE=.7,pn.START_END_PATTERN=Int32Array.from([1,1,1]),pn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),pn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ai{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(l,u,f),y=f.toString(),v=ai.parseExtensionString(y),I=[new Xe((u[0]+u[1])/2,s),new Xe(p,s)],C=new Le(y,null,0,I,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let C=0;C<5&&y<p;C++){let O=pn.decodeDigit(s,f,y,pn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<4-C),C!==4&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==5)throw new se;let I=this.determineCheckDigit(v);if(ai.extensionChecksum(u.toString())!==I)throw new se;return y}static extensionChecksum(s){let l=s.length,u=0;for(let f=l-2;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;u*=3;for(let f=l-1;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(s){for(let l=0;l<10;l++)if(s===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new se}static parseExtensionString(s){if(s.length!==5)return null;let l=ai.parseExtension5String(s);return l==null?null:new Map([[Ge.SUGGESTED_PRICE,l]])}static parseExtension5String(s){let l;switch(s.charAt(0)){case"0":l="£";break;case"5":l="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let u=parseInt(s.substring(1)),f=(u/100).toString(),p=u%100,y=p<10?"0"+p:p.toString();return l+f+"."+y}}class jr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(l,u,f),y=f.toString(),v=jr.parseExtensionString(y),I=[new Xe((u[0]+u[1])/2,s),new Xe(p,s)],C=new Le(y,null,0,I,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let I=0;I<2&&y<p;I++){let C=pn.decodeDigit(s,f,y,pn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+C%10);for(let O of f)y+=O;C>=10&&(v|=1<<1-I),I!==1&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==2)throw new se;if(parseInt(u.toString())%4!==v)throw new se;return y}static parseExtensionString(s){return s.length!==2?null:new Map([[Ge.ISSUE_NUMBER,parseInt(s)]])}}class Zs{static decodeRow(s,l,u){let f=pn.findGuardPattern(l,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ai().decodeRow(s,l,f)}catch{return new jr().decodeRow(s,l,f)}}}Zs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ct extends pn{constructor(){super(),this.decodeRowStringBuffer="",Ct.L_AND_G_PATTERNS=Ct.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let l=Ct.L_PATTERNS[s-10],u=new Int32Array(l.length);for(let f=0;f<l.length;f++)u[f]=l[l.length-f-1];Ct.L_AND_G_PATTERNS[s]=u}}decodeRow(s,l,u){let f=Ct.findStartGuardPattern(l),p=u==null?null:u.get(ie.NEED_RESULT_POINT_CALLBACK);if(p!=null){const Oe=new Xe((f[0]+f[1])/2,s);p.foundPossibleResultPoint(Oe)}let y=this.decodeMiddle(l,f,this.decodeRowStringBuffer),v=y.rowOffset,I=y.resultString;if(p!=null){const Oe=new Xe(v,s);p.foundPossibleResultPoint(Oe)}let C=this.decodeEnd(l,v);if(p!=null){const Oe=new Xe((C[0]+C[1])/2,s);p.foundPossibleResultPoint(Oe)}let O=C[1],U=O+(O-C[0]);if(U>=l.getSize()||!l.isRange(O,U,!1))throw new se;let q=I.toString();if(q.length<8)throw new F;if(!Ct.checkChecksum(q))throw new R;let J=(f[1]+f[0])/2,le=(C[1]+C[0])/2,ue=this.getBarcodeFormat(),fe=[new Xe(J,s),new Xe(le,s)],Ee=new Le(q,null,0,fe,ue,new Date().getTime()),Fe=0;try{let Oe=Zs.decodeRow(s,l,C[1]);Ee.putMetadata(Ge.UPC_EAN_EXTENSION,Oe.getText()),Ee.putAllMetadata(Oe.getResultMetadata()),Ee.addResultPoints(Oe.getResultPoints()),Fe=Oe.getText().length}catch{}let je=u==null?null:u.get(ie.ALLOWED_EAN_EXTENSIONS);if(je!=null){let Oe=!1;for(let Mt in je)if(Fe.toString()===Mt){Oe=!0;break}if(!Oe)throw new se}return Ee}decodeEnd(s,l){return Ct.findGuardPattern(s,l,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return Ct.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}u*=3;for(let f=l-2;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}return(1e3-u)%10}}class br extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let C=0;C<6&&y<p;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}u=br.determineFirstDigit(u,v),y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&y<p;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+O);for(let U of f)y+=U}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_13}static determineFirstDigit(s,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return s=String.fromCharCode(48+u)+s,s;throw new se}}br.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ds extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1];for(let I=0;I<4&&y<p;I++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<4&&y<p;I++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_8}}class mt extends Ct{constructor(){super(...arguments),this.ean13Reader=new br}getBarcodeFormat(){return Re.UPC_A}decode(s,l){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,l,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,l,u))}decodeMiddle(s,l,u){return this.ean13Reader.decodeMiddle(s,l,u)}maybeReturnResult(s){let l=s.getText();if(l.charAt(0)==="0"){let u=new Le(l.substring(1),null,null,s.getResultPoints(),Re.UPC_A);return s.getResultMetadata()!=null&&u.putAllMetadata(s.getResultMetadata()),u}else throw new se}reset(){this.ean13Reader.reset()}}class Gt extends Ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters.map(C=>C);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const p=s.getSize();let y=l[1],v=0;for(let C=0;C<6&&y<p;C++){const O=Gt.decodeDigit(s,f,y,Gt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}let I=Gt.determineNumSysAndCheckDigit(u,v);return{rowOffset:y,resultString:I}}decodeEnd(s,l){return Gt.findGuardPatternWithoutCounters(s,l,!0,Gt.MIDDLE_END_PATTERN)}checkChecksum(s){return Ct.checkChecksum(Gt.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,l){for(let u=0;u<=1;u++)for(let f=0;f<10;f++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][f]){let p=String.fromCharCode(48+u),y=String.fromCharCode(48+f);return p+s+y}throw se.getNotFoundInstance()}getBarcodeFormat(){return Re.UPC_E}static convertUPCEtoUPCA(s){const l=s.slice(1,7).split("").map(p=>p.charCodeAt(0)),u=new K;u.append(s.charAt(0));let f=l[5];switch(f){case 0:case 1:case 2:u.appendChars(l,0,2),u.append(f),u.append("0000"),u.appendChars(l,2,3);break;case 3:u.appendChars(l,0,3),u.append("00000"),u.appendChars(l,3,2);break;case 4:u.appendChars(l,0,4),u.append("00000"),u.append(l[4]);break;default:u.appendChars(l,0,5),u.append("0000"),u.append(f);break}return s.length>=8&&u.append(s.charAt(7)),u.toString()}}Gt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Tn extends In{constructor(s){super();let l=s==null?null:s.get(ie.POSSIBLE_FORMATS),u=[];r(l)?(u.push(new br),u.push(new mt),u.push(new Ds),u.push(new Gt)):(l.indexOf(Re.EAN_13)>-1&&u.push(new br),l.indexOf(Re.UPC_A)>-1&&u.push(new mt),l.indexOf(Re.EAN_8)>-1&&u.push(new Ds),l.indexOf(Re.UPC_E)>-1&&u.push(new Gt)),this.readers=u}decodeRow(s,l,u){for(let f of this.readers)try{const p=f.decodeRow(s,l,u),y=p.getBarcodeFormat()===Re.EAN_13&&p.getText().charAt(0)==="0",v=u==null?null:u.get(ie.POSSIBLE_FORMATS),I=v==null||v.includes(Re.UPC_A);if(y&&I){const C=p.getRawBytes(),O=new Le(p.getText().substring(1),C,C?C.length:null,p.getResultPoints(),Re.UPC_A);return O.putAllMetadata(p.getResultMetadata()),O}return p}catch{}throw new se}reset(){for(let s of this.readers)s.reset()}}class $t extends In{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,l){for(let u=0;u<l.length;u++)if(In.patternMatchVariance(s,l[u],$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE)return u;throw new se}static count(s){return pt.sum(new Int32Array(s))}static increment(s,l){let u=0,f=l[0];for(let p=1;p<s.length;p++)l[p]>f&&(f=l[p],u=p);s[u]++}static decrement(s,l){let u=0,f=l[0];for(let p=1;p<s.length;p++)l[p]<f&&(f=l[p],u=p);s[u]--}static isFinderPattern(s){let l=s[0]+s[1],u=l+s[2]+s[3],f=l/u;if(f>=$t.MIN_FINDER_PATTERN_RATIO&&f<=$t.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;for(let v of s)v>y&&(y=v),v<p&&(p=v);return y<10*p}return!1}}$t.MAX_AVG_VARIANCE=.2,$t.MAX_INDIVIDUAL_VARIANCE=.45,$t.MIN_FINDER_PATTERN_RATIO=9.5/12,$t.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(s,l){this.value=s,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Ir))return!1;const l=s;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Cn{constructor(s,l,u,f,p){this.value=s,this.startEnd=l,this.value=s,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new Xe(u,p)),this.resultPoints.push(new Xe(f,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Cn))return!1;const l=s;return this.value===l.value}hashCode(){return this.value}}class Rt{constructor(){}static getRSSvalue(s,l,u){let f=0;for(let I of s)f+=I;let p=0,y=0,v=s.length;for(let I=0;I<v-1;I++){let C;for(C=1,y|=1<<I;C<s[I];C++,y&=~(1<<I)){let O=Rt.combins(f-C-1,v-I-2);if(u&&y===0&&f-C-(v-I-1)>=v-I-1&&(O-=Rt.combins(f-C-(v-I),v-I-2)),v-I-1>1){let U=0;for(let q=f-C-(v-I-2);q>l;q--)U+=Rt.combins(f-C-q-1,v-I-3);O-=U*(v-1-I)}else f-C>l&&O--;p+=O}f-=C}return p}static combins(s,l){let u,f;s-l>l?(f=l,u=s-l):(f=s-l,u=l);let p=1,y=1;for(let v=s;v>u;v--)p*=v,y<=f&&(p/=y,y++);for(;y<=f;)p/=y,y++;return p}}class fs{static buildBitArray(s){let l=s.length*2-1;s[s.length-1].getRightChar()==null&&(l-=1);let u=12*l,f=new Y(u),p=0,v=s[0].getRightChar().getValue();for(let I=11;I>=0;--I)(v&1<<I)!=0&&f.set(p),p++;for(let I=1;I<s.length;++I){let C=s[I],O=C.getLeftChar().getValue();for(let U=11;U>=0;--U)(O&1<<U)!=0&&f.set(p),p++;if(C.getRightChar()!=null){let U=C.getRightChar().getValue();for(let q=11;q>=0;--q)(U&1<<q)!=0&&f.set(p),p++}}return f}}class cn{constructor(s,l){l?this.decodedInformation=null:(this.finished=s,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ir{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Bn extends ir{constructor(s,l){super(s),this.value=l}getValue(){return this.value}isFNC1(){return this.value===Bn.FNC1}}Bn.FNC1="$";class dr extends ir{constructor(s,l,u){super(s),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class jn extends ir{constructor(s,l,u){if(super(s),l<0||l>10||u<0||u>10)throw new F;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===jn.FNC1}isSecondDigitFNC1(){return this.secondDigit===jn.FNC1}isAnyFNC1(){return this.firstDigit===jn.FNC1||this.secondDigit===jn.FNC1}}jn.FNC1=10;class Ye{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new se;let l=s.substring(0,2);for(let p of Ye.TWO_DIGIT_DATA_LENGTH)if(p[0]===l)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(2,p[2],s):Ye.processFixedAI(2,p[1],s);if(s.length<3)throw new se;let u=s.substring(0,3);for(let p of Ye.THREE_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(3,p[2],s):Ye.processFixedAI(3,p[1],s);for(let p of Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,p[2],s):Ye.processFixedAI(4,p[1],s);if(s.length<4)throw new se;let f=s.substring(0,4);for(let p of Ye.FOUR_DIGIT_DATA_LENGTH)if(p[0]===f)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,p[2],s):Ye.processFixedAI(4,p[1],s);throw new se}static processFixedAI(s,l,u){if(u.length<s)throw new se;let f=u.substring(0,s);if(u.length<s+l)throw new se;let p=u.substring(s,s+l),y=u.substring(s+l),v="("+f+")"+p,I=Ye.parseFieldsInGeneralPurpose(y);return I==null?v:v+I}static processVariableAI(s,l,u){let f=u.substring(0,s),p;u.length<s+l?p=u.length:p=s+l;let y=u.substring(s,p),v=u.substring(p),I="("+f+")"+y,C=Ye.parseFieldsInGeneralPurpose(v);return C==null?I:I+C}}Ye.VARIABLE_LENGTH=[],Ye.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ye.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ye.VARIABLE_LENGTH,20],["22",Ye.VARIABLE_LENGTH,29],["30",Ye.VARIABLE_LENGTH,8],["37",Ye.VARIABLE_LENGTH,8],["90",Ye.VARIABLE_LENGTH,30],["91",Ye.VARIABLE_LENGTH,30],["92",Ye.VARIABLE_LENGTH,30],["93",Ye.VARIABLE_LENGTH,30],["94",Ye.VARIABLE_LENGTH,30],["95",Ye.VARIABLE_LENGTH,30],["96",Ye.VARIABLE_LENGTH,30],["97",Ye.VARIABLE_LENGTH,3],["98",Ye.VARIABLE_LENGTH,30],["99",Ye.VARIABLE_LENGTH,30]],Ye.THREE_DIGIT_DATA_LENGTH=[["240",Ye.VARIABLE_LENGTH,30],["241",Ye.VARIABLE_LENGTH,30],["242",Ye.VARIABLE_LENGTH,6],["250",Ye.VARIABLE_LENGTH,30],["251",Ye.VARIABLE_LENGTH,30],["253",Ye.VARIABLE_LENGTH,17],["254",Ye.VARIABLE_LENGTH,20],["400",Ye.VARIABLE_LENGTH,30],["401",Ye.VARIABLE_LENGTH,30],["402",17],["403",Ye.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ye.VARIABLE_LENGTH,20],["421",Ye.VARIABLE_LENGTH,15],["422",3],["423",Ye.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ye.VARIABLE_LENGTH,15],["391",Ye.VARIABLE_LENGTH,18],["392",Ye.VARIABLE_LENGTH,15],["393",Ye.VARIABLE_LENGTH,18],["703",Ye.VARIABLE_LENGTH,30]],Ye.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ye.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ye.VARIABLE_LENGTH,20],["8003",Ye.VARIABLE_LENGTH,30],["8004",Ye.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ye.VARIABLE_LENGTH,30],["8008",Ye.VARIABLE_LENGTH,12],["8018",18],["8020",Ye.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ye.VARIABLE_LENGTH,70],["8200",Ye.VARIABLE_LENGTH,70]];class wo{constructor(s){this.buffer=new K,this.information=s}decodeAllCodes(s,l){let u=l,f=null;do{let p=this.decodeGeneralPurposeField(u,f),y=Ye.parseFieldsInGeneralPurpose(p.getNewString());if(y!=null&&s.append(y),p.isRemaining()?f=""+p.getRemainingValue():f=null,u===p.getNewPosition())break;u=p.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let l=s;l<s+3;++l)if(this.information.get(l))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(s,4);return p===0?new jn(this.information.getSize(),jn.FNC1,jn.FNC1):new jn(this.information.getSize(),p-1,jn.FNC1)}let l=this.extractNumericValueFromBitArray(s,7),u=(l-8)/11,f=(l-8)%11;return new jn(s+7,u,f)}extractNumericValueFromBitArray(s,l){return wo.extractNumericValueFromBitArray(this.information,s,l)}static extractNumericValueFromBitArray(s,l,u){let f=0;for(let p=0;p<u;++p)s.get(l+p)&&(f|=1<<u-p-1);return f}decodeGeneralPurposeField(s,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(s);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new dr(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new dr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,l;do{let u=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),s=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),s=l.isFinished()):(l=this.parseNumericBlock(),s=l.isFinished()),!(u!==this.current.getPosition())&&!s)break}while(!s);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let l;return s.isSecondDigitFNC1()?l=new dr(this.current.getPosition(),this.buffer.toString()):l=new dr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new cn(!0,l)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new cn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new cn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new cn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new Bn(s+5,Bn.FNC1);if(l>=5&&l<15)return new Bn(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<90)return new Bn(s+7,""+(u+1));if(u>=90&&u<116)return new Bn(s+7,""+(u+7));let f=this.extractNumericValueFromBitArray(s,8),p;switch(f){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new F}return new Bn(s+8,p)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,6);return u>=16&&u<63}decodeAlphanumeric(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new Bn(s+5,Bn.FNC1);if(l>=5&&l<15)return new Bn(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,6);if(u>=32&&u<58)return new Bn(s+6,""+(u+33));let f;switch(u){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Vn("Decoding invalid alphanumeric value: "+u)}return new Bn(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<5&&l+s<this.information.getSize();++l)if(l===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+l))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let l=s;l<s+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<4&&l+s<this.information.getSize();++l)if(this.information.get(s+l))return!1;return!0}}class vo{constructor(s){this.information=s,this.generalDecoder=new wo(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ur extends vo{constructor(s){super(s)}encodeCompressedGtin(s,l){s.append("(01)");let u=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,l,u)}encodeCompressedGtinWithoutAI(s,l,u){for(let f=0;f<4;++f){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*f,10);p/100===0&&s.append("0"),p/10===0&&s.append("0"),s.append(p)}Ur.appendCheckDigit(s,u)}static appendCheckDigit(s,l){let u=0;for(let f=0;f<13;f++){let p=s.charAt(f+l).charCodeAt(0)-48;u+=(f&1)===0?3*p:p}u=10-u%10,u===10&&(u=0),s.append(u)}}Ur.GTIN_SIZE=40;class Zr extends Ur{constructor(s){super(s)}parseInformation(){let s=new K;s.append("(01)");let l=s.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(Zr.HEADER_SIZE,4);return s.append(u),this.encodeCompressedGtinWithoutAI(s,Zr.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(s,Zr.HEADER_SIZE+44)}}Zr.HEADER_SIZE=4;class Os extends vo{constructor(s){super(s)}parseInformation(){let s=new K;return this.getGeneralDecoder().decodeAllCodes(s,Os.HEADER_SIZE)}}Os.HEADER_SIZE=5;class _i extends Ur{constructor(s){super(s)}encodeCompressedWeight(s,l,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l,u);this.addWeightCode(s,f);let p=this.checkWeight(f),y=1e5;for(let v=0;v<5;++v)p/y===0&&s.append("0"),y/=10;s.append(p)}}class Bi extends _i{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Bi.HEADER_SIZE+_i.GTIN_SIZE+Bi.WEIGHT_SIZE)throw new se;let s=new K;return this.encodeCompressedGtin(s,Bi.HEADER_SIZE),this.encodeCompressedWeight(s,Bi.HEADER_SIZE+_i.GTIN_SIZE,Bi.WEIGHT_SIZE),s.toString()}}Bi.HEADER_SIZE=5,Bi.WEIGHT_SIZE=15;class Jl extends Bi{constructor(s){super(s)}addWeightCode(s,l){s.append("(3103)")}checkWeight(s){return s}}class Wa extends Bi{constructor(s){super(s)}addWeightCode(s,l){l<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class li extends Ur{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<li.HEADER_SIZE+Ur.GTIN_SIZE)throw new se;let s=new K;this.encodeCompressedGtin(s,li.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(li.HEADER_SIZE+Ur.GTIN_SIZE,li.LAST_DIGIT_SIZE);s.append("(392"),s.append(l),s.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(li.HEADER_SIZE+Ur.GTIN_SIZE+li.LAST_DIGIT_SIZE,null);return s.append(u.getNewString()),s.toString()}}li.HEADER_SIZE=8,li.LAST_DIGIT_SIZE=2;class Ar extends Ur{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Ar.HEADER_SIZE+Ur.GTIN_SIZE)throw new se;let s=new K;this.encodeCompressedGtin(s,Ar.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Ur.GTIN_SIZE,Ar.LAST_DIGIT_SIZE);s.append("(393"),s.append(l),s.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Ur.GTIN_SIZE+Ar.LAST_DIGIT_SIZE,Ar.FIRST_THREE_DIGITS_SIZE);u/100==0&&s.append("0"),u/10==0&&s.append("0"),s.append(u);let f=this.getGeneralDecoder().decodeGeneralPurposeField(Ar.HEADER_SIZE+Ur.GTIN_SIZE+Ar.LAST_DIGIT_SIZE+Ar.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}Ar.HEADER_SIZE=8,Ar.LAST_DIGIT_SIZE=2,Ar.FIRST_THREE_DIGITS_SIZE=10;class yn extends _i{constructor(s,l,u){super(s),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE+yn.DATE_SIZE)throw new se;let s=new K;return this.encodeCompressedGtin(s,yn.HEADER_SIZE),this.encodeCompressedWeight(s,yn.HEADER_SIZE+yn.GTIN_SIZE,yn.WEIGHT_SIZE),this.encodeCompressedDate(s,yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,yn.DATE_SIZE);if(u==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=u%32;u/=32;let p=u%12+1;u/=12;let y=u;y/10==0&&s.append("0"),s.append(y),p/10==0&&s.append("0"),s.append(p),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,l){s.append("("),s.append(this.firstAIdigits),s.append(l/1e5),s.append(")")}checkWeight(s){return s%1e5}}yn.HEADER_SIZE=8,yn.WEIGHT_SIZE=20,yn.DATE_SIZE=16;function du(j){try{if(j.get(1))return new Zr(j);if(!j.get(2))return new Os(j);switch(wo.extractNumericValueFromBitArray(j,1,4)){case 4:return new Jl(j);case 5:return new Wa(j)}switch(wo.extractNumericValueFromBitArray(j,1,5)){case 12:return new li(j);case 13:return new Ar(j)}switch(wo.extractNumericValueFromBitArray(j,1,7)){case 56:return new yn(j,"310","11");case 57:return new yn(j,"320","11");case 58:return new yn(j,"310","13");case 59:return new yn(j,"320","13");case 60:return new yn(j,"310","15");case 61:return new yn(j,"320","15");case 62:return new yn(j,"310","17");case 63:return new yn(j,"320","17")}}catch(s){throw console.log(s),new Vn("unknown decoder: "+j)}}class Zt{constructor(s,l,u,f){this.leftchar=s,this.rightchar=l,this.finderpattern=u,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,l){return s instanceof Zt?Zt.equalsOrNull(s.leftchar,l.leftchar)&&Zt.equalsOrNull(s.rightchar,l.rightchar)&&Zt.equalsOrNull(s.finderpattern,l.finderpattern):!1}static equalsOrNull(s,l){return s===null?l===null:Zt.equals(s,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ha{constructor(s,l,u){this.pairs=s,this.rowNumber=l,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,l){return s instanceof Ha?this.checkEqualitity(s,l)&&s.wasReversed===l.wasReversed:!1}checkEqualitity(s,l){if(!s||!l)return;let u;return s.forEach((f,p)=>{l.forEach(y=>{f.getLeftChar().getValue()===y.getLeftChar().getValue()&&f.getRightChar().getValue()===y.getRightChar().getValue()&&f.getFinderPatter().getValue()===y.getFinderPatter().getValue()&&(u=!0)})}),u}}class ke extends $t{constructor(s){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,l,u){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(s,l))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(s,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,l){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,s))}catch(p){if(p instanceof se){if(!this.pairs.length)throw new se;u=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new se}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return s&&(this.rows=this.rows.reverse()),l}checkRows(s,l){for(let u=l;u<this.rows.length;u++){let f=this.rows[u];this.pairs.length=0;for(let y of s)this.pairs.push(y.getPairs());if(this.pairs.push(f.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(s);p.push(f);try{return this.checkRows(p,u+1)}catch(y){this.verbose&&console.log(y)}}throw new se}static isValidSequence(s){for(let l of ke.FINDER_PATTERN_SEQUENCES){if(s.length>l.length)continue;let u=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=l[f]){u=!1;break}if(u)return!0}return!1}storeRow(s,l){let u=0,f=!1,p=!1;for(;u<this.rows.length;){let y=this.rows[u];if(y.getRowNumber()>s){p=y.isEquivalent(this.pairs);break}f=y.isEquivalent(this.pairs),u++}p||f||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Ha(this.pairs,s,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,l){for(let u of l)if(u.getPairs().length!==s.length){for(let f of u.getPairs())for(let p of s)if(Zt.equals(f,p))break}}static isPartialRow(s,l){for(let u of l){let f=!0;for(let p of s){let y=!1;for(let v of u.getPairs())if(p.equals(v)){y=!0;break}if(!y){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let l=fs.buildBitArray(s),f=du(l).parseInformation(),p=s[0].getFinderPattern().getResultPoints(),y=s[s.length-1].getFinderPattern().getResultPoints(),v=[p[0],p[1],y[0],y[1]];return new Le(f,null,null,v,Re.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),l=s.getLeftChar(),u=s.getRightChar();if(u==null)return!1;let f=u.getChecksumPortion(),p=2;for(let v=1;v<this.pairs.size();++v){let I=this.pairs.get(v);f+=I.getLeftChar().getChecksumPortion(),p++;let C=I.getRightChar();C!=null&&(f+=C.getChecksumPortion(),p++)}return f%=211,211*(p-4)+f==l.getValue()}static getNextSecondBar(s,l){let u;return s.get(l)?(u=s.getNextUnset(l),u=s.getNextSet(u)):(u=s.getNextSet(l),u=s.getNextUnset(u)),u}retrieveNextPair(s,l,u){let f=l.length%2==0;this.startFromEven&&(f=!f);let p,y=!0,v=-1;do this.findNextPair(s,l,v),p=this.parseFoundFinderPattern(s,u,f),p==null?v=ke.getNextSecondBar(s,this.startEnd[0]):y=!1;while(y);let I=this.decodeDataCharacter(s,p,f,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new se;let C;try{C=this.decodeDataCharacter(s,p,f,!1)}catch(O){C=null,this.verbose&&console.log(O)}return new Zt(I,C,p,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,l,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y;u>=0?y=u:this.isEmptyPair(l)?y=0:y=l[l.length-1].getFinderPattern().getStartEnd()[1];let v=l.length%2!=0;this.startFromEven&&(v=!v);let I=!1;for(;y<p&&(I=!s.get(y),!!I);)y++;let C=0,O=y;for(let U=y;U<p;U++)if(s.get(U)!=I)f[C]++;else{if(C==3){if(v&&ke.reverseCounters(f),ke.isFinderPattern(f)){this.startEnd[0]=O,this.startEnd[1]=U;return}v&&ke.reverseCounters(f),O+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,C--}else C++;f[C]=1,I=!I}throw new se}static reverseCounters(s){let l=s.length;for(let u=0;u<l/2;++u){let f=s[u];s[u]=s[l-u-1],s[l-u-1]=f}}parseFoundFinderPattern(s,l,u){let f,p,y;if(u){let C=this.startEnd[0]-1;for(;C>=0&&!s.get(C);)C--;C++,f=this.startEnd[0]-C,p=C,y=this.startEnd[1]}else p=this.startEnd[0],y=s.getNextUnset(this.startEnd[1]+1),f=y-this.startEnd[1];let v=this.getDecodeFinderCounters();D.arraycopy(v,0,v,1,v.length-1),v[0]=f;let I;try{I=this.parseFinderValue(v,ke.FINDER_PATTERNS)}catch{return null}return new Cn(I,[p,y],p,y,l)}decodeDataCharacter(s,l,u,f){let p=this.getDataCharacterCounters();for(let hn=0;hn<p.length;hn++)p[hn]=0;if(f)ke.recordPatternInReverse(s,l.getStartEnd()[0],p);else{ke.recordPattern(s,l.getStartEnd()[1],p);for(let hn=0,sr=p.length-1;hn<sr;hn++,sr--){let hi=p[hn];p[hn]=p[sr],p[sr]=hi}}let y=17,v=pt.sum(new Int32Array(p))/y,I=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(v-I)/I>.3)throw new se;let C=this.getOddCounts(),O=this.getEvenCounts(),U=this.getOddRoundingErrors(),q=this.getEvenRoundingErrors();for(let hn=0;hn<p.length;hn++){let sr=1*p[hn]/v,hi=sr+.5;if(hi<1){if(sr<.3)throw new se;hi=1}else if(hi>8){if(sr>8.7)throw new se;hi=8}let ua=hn/2;(hn&1)==0?(C[ua]=hi,U[ua]=sr-hi):(O[ua]=hi,q[ua]=sr-hi)}this.adjustOddEvenCounts(y);let J=4*l.getValue()+(u?0:2)+(f?0:1)-1,le=0,ue=0;for(let hn=C.length-1;hn>=0;hn--){if(ke.isNotA1left(l,u,f)){let sr=ke.WEIGHTS[J][2*hn];ue+=C[hn]*sr}le+=C[hn]}let fe=0;for(let hn=O.length-1;hn>=0;hn--)if(ke.isNotA1left(l,u,f)){let sr=ke.WEIGHTS[J][2*hn+1];fe+=O[hn]*sr}let Ee=ue+fe;if((le&1)!=0||le>13||le<4)throw new se;let Fe=(13-le)/2,je=ke.SYMBOL_WIDEST[Fe],Oe=9-je,Mt=Rt.getRSSvalue(C,je,!0),St=Rt.getRSSvalue(O,Oe,!1),Ci=ke.EVEN_TOTAL_SUBSET[Fe],ws=ke.GSUM[Fe],Sr=Mt*Ci+St+ws;return new Ir(Sr,Ee)}static isNotA1left(s,l,u){return!(s.getValue()==0&&l&&u)}adjustOddEvenCounts(s){let l=pt.sum(new Int32Array(this.getOddCounts())),u=pt.sum(new Int32Array(this.getEvenCounts())),f=!1,p=!1;l>13?p=!0:l<4&&(f=!0);let y=!1,v=!1;u>13?v=!0:u<4&&(y=!0);let I=l+u-s,C=(l&1)==1,O=(u&1)==0;if(I==1)if(C){if(O)throw new se;p=!0}else{if(!O)throw new se;v=!0}else if(I==-1)if(C){if(O)throw new se;f=!0}else{if(!O)throw new se;y=!0}else if(I==0){if(C){if(!O)throw new se;l<u?(f=!0,v=!0):(p=!0,y=!0)}else if(O)throw new se}else throw new se;if(f){if(p)throw new se;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(v)throw new se;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class _o extends Ir{constructor(s,l,u){super(s,l),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends $t{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,l,u){const f=this.decodePair(l,!1,s,u);Jt.addOrTally(this.possibleLeftPairs,f),l.reverse();let p=this.decodePair(l,!0,s,u);Jt.addOrTally(this.possibleRightPairs,p),l.reverse();for(let y of this.possibleLeftPairs)if(y.getCount()>1){for(let v of this.possibleRightPairs)if(v.getCount()>1&&Jt.checkChecksum(y,v))return Jt.constructResult(y,v)}throw new se}static addOrTally(s,l){if(l==null)return;let u=!1;for(let f of s)if(f.getValue()===l.getValue()){f.incrementCount(),u=!0;break}u||s.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,l){let u=4537077*s.getValue()+l.getValue(),f=new String(u).toString(),p=new K;for(let C=13-f.length;C>0;C--)p.append("0");p.append(f);let y=0;for(let C=0;C<13;C++){let O=p.charAt(C).charCodeAt(0)-48;y+=(C&1)===0?3*O:O}y=10-y%10,y===10&&(y=0),p.append(y.toString());let v=s.getFinderPattern().getResultPoints(),I=l.getFinderPattern().getResultPoints();return new Le(p.toString(),null,0,[v[0],v[1],I[0],I[1]],Re.RSS_14,new Date().getTime())}static checkChecksum(s,l){let u=(s.getChecksumPortion()+16*l.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+l.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,u===f}decodePair(s,l,u,f){try{let p=this.findFinderPattern(s,l),y=this.parseFoundFinderPattern(s,u,l,p),v=f==null?null:f.get(ie.NEED_RESULT_POINT_CALLBACK);if(v!=null){let O=(p[0]+p[1])/2;l&&(O=s.getSize()-1-O),v.foundPossibleResultPoint(new Xe(O,u))}let I=this.decodeDataCharacter(s,y,!0),C=this.decodeDataCharacter(s,y,!1);return new _o(1597*I.getValue()+C.getValue(),I.getChecksumPortion()+4*C.getChecksumPortion(),y)}catch{return null}}decodeDataCharacter(s,l,u){let f=this.getDataCharacterCounters();for(let fe=0;fe<f.length;fe++)f[fe]=0;if(u)In.recordPatternInReverse(s,l.getStartEnd()[0],f);else{In.recordPattern(s,l.getStartEnd()[1]+1,f);for(let fe=0,Ee=f.length-1;fe<Ee;fe++,Ee--){let Fe=f[fe];f[fe]=f[Ee],f[Ee]=Fe}}let p=u?16:15,y=pt.sum(new Int32Array(f))/p,v=this.getOddCounts(),I=this.getEvenCounts(),C=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let fe=0;fe<f.length;fe++){let Ee=f[fe]/y,Fe=Math.floor(Ee+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let je=Math.floor(fe/2);(fe&1)===0?(v[je]=Fe,C[je]=Ee-Fe):(I[je]=Fe,O[je]=Ee-Fe)}this.adjustOddEvenCounts(u,p);let U=0,q=0;for(let fe=v.length-1;fe>=0;fe--)q*=9,q+=v[fe],U+=v[fe];let J=0,le=0;for(let fe=I.length-1;fe>=0;fe--)J*=9,J+=I[fe],le+=I[fe];let ue=q+3*J;if(u){if((U&1)!==0||U>12||U<4)throw new se;let fe=(12-U)/2,Ee=Jt.OUTSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!1),Oe=Rt.getRSSvalue(I,Fe,!0),Mt=Jt.OUTSIDE_EVEN_TOTAL_SUBSET[fe],St=Jt.OUTSIDE_GSUM[fe];return new Ir(je*Mt+Oe+St,ue)}else{if((le&1)!==0||le>10||le<4)throw new se;let fe=(10-le)/2,Ee=Jt.INSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!0),Oe=Rt.getRSSvalue(I,Fe,!1),Mt=Jt.INSIDE_ODD_TOTAL_SUBSET[fe],St=Jt.INSIDE_GSUM[fe];return new Ir(Oe*Mt+je+St,ue)}}findFinderPattern(s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=s.getSize(),p=!1,y=0;for(;y<f&&(p=!s.get(y),l!==p);)y++;let v=0,I=y;for(let C=y;C<f;C++)if(s.get(C)!==p)u[v]++;else{if(v===3){if($t.isFinderPattern(u))return[I,C];I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,p=!p}throw new se}parseFoundFinderPattern(s,l,u,f){let p=s.get(f[0]),y=f[0]-1;for(;y>=0&&p!==s.get(y);)y--;y++;const v=f[0]-y,I=this.getDecodeFinderCounters(),C=new Int32Array(I.length);D.arraycopy(I,0,C,1,I.length-1),C[0]=v;const O=this.parseFinderValue(C,Jt.FINDER_PATTERNS);let U=y,q=f[1];return u&&(U=s.getSize()-1-U,q=s.getSize()-1-q),new Cn(O,[y,f[1]],U,q,l)}adjustOddEvenCounts(s,l){let u=pt.sum(new Int32Array(this.getOddCounts())),f=pt.sum(new Int32Array(this.getEvenCounts())),p=!1,y=!1,v=!1,I=!1;s?(u>12?y=!0:u<4&&(p=!0),f>12?I=!0:f<4&&(v=!0)):(u>11?y=!0:u<5&&(p=!0),f>10?I=!0:f<4&&(v=!0));let C=u+f-l,O=(u&1)===(s?1:0),U=(f&1)===1;if(C===1)if(O){if(U)throw new se;y=!0}else{if(!U)throw new se;I=!0}else if(C===-1)if(O){if(U)throw new se;p=!0}else{if(!U)throw new se;v=!0}else if(C===0){if(O){if(!U)throw new se;u<f?(p=!0,I=!0):(y=!0,v=!0)}else if(U)throw new se}else throw new se;if(p){if(y)throw new se;$t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&$t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(I)throw new se;$t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}I&&$t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ms extends In{constructor(s,l){super(),this.readers=[],this.verbose=l===!0;const u=s?s.get(ie.POSSIBLE_FORMATS):null,f=s&&s.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(Re.EAN_13)||u.includes(Re.UPC_A)||u.includes(Re.EAN_8)||u.includes(Re.UPC_E))&&this.readers.push(new Tn(s)),u.includes(Re.CODE_39)&&this.readers.push(new An(f)),u.includes(Re.CODE_128)&&this.readers.push(new We),u.includes(Re.ITF)&&this.readers.push(new Ht),u.includes(Re.RSS_14)&&this.readers.push(new Jt),u.includes(Re.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new Tn(s)),this.readers.push(new An),this.readers.push(new Tn(s)),this.readers.push(new We),this.readers.push(new Ht),this.readers.push(new Jt),this.readers.push(new ke(this.verbose)))}decodeRow(s,l,u){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,l,u)}catch{}throw new se}reset(){this.readers.forEach(s=>s.reset())}}class hu extends Se{constructor(s=500,l){super(new Ms(l),s,l)}}class Ft{constructor(s,l,u){this.ecCodewords=s,this.ecBlocks=[l],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Dt{constructor(s,l,u,f,p,y){this.versionNumber=s,this.symbolSizeRows=l,this.symbolSizeColumns=u,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=p,this.ecBlocks=y;let v=0;const I=y.getECCodewords(),C=y.getECBlocks();for(let O of C)v+=O.getCount()*(O.getDataCodewords()+I);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,l){if((s&1)!==0||(l&1)!==0)throw new F;for(let u of Dt.VERSIONS)if(u.symbolSizeRows===s&&u.symbolSizeColumns===l)return u;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Dt(1,10,10,8,8,new Ft(5,new Nt(1,3))),new Dt(2,12,12,10,10,new Ft(7,new Nt(1,5))),new Dt(3,14,14,12,12,new Ft(10,new Nt(1,8))),new Dt(4,16,16,14,14,new Ft(12,new Nt(1,12))),new Dt(5,18,18,16,16,new Ft(14,new Nt(1,18))),new Dt(6,20,20,18,18,new Ft(18,new Nt(1,22))),new Dt(7,22,22,20,20,new Ft(20,new Nt(1,30))),new Dt(8,24,24,22,22,new Ft(24,new Nt(1,36))),new Dt(9,26,26,24,24,new Ft(28,new Nt(1,44))),new Dt(10,32,32,14,14,new Ft(36,new Nt(1,62))),new Dt(11,36,36,16,16,new Ft(42,new Nt(1,86))),new Dt(12,40,40,18,18,new Ft(48,new Nt(1,114))),new Dt(13,44,44,20,20,new Ft(56,new Nt(1,144))),new Dt(14,48,48,22,22,new Ft(68,new Nt(1,174))),new Dt(15,52,52,24,24,new Ft(42,new Nt(2,102))),new Dt(16,64,64,14,14,new Ft(56,new Nt(2,140))),new Dt(17,72,72,16,16,new Ft(36,new Nt(4,92))),new Dt(18,80,80,18,18,new Ft(48,new Nt(4,114))),new Dt(19,88,88,20,20,new Ft(56,new Nt(4,144))),new Dt(20,96,96,22,22,new Ft(68,new Nt(4,174))),new Dt(21,104,104,24,24,new Ft(56,new Nt(6,136))),new Dt(22,120,120,18,18,new Ft(68,new Nt(6,175))),new Dt(23,132,132,20,20,new Ft(62,new Nt(8,163))),new Dt(24,144,144,22,22,new Ft(62,new Nt(8,156),new Nt(2,155))),new Dt(25,8,18,6,16,new Ft(7,new Nt(1,5))),new Dt(26,8,32,6,14,new Ft(11,new Nt(1,10))),new Dt(27,12,26,10,24,new Ft(14,new Nt(1,16))),new Dt(28,12,36,10,16,new Ft(18,new Nt(1,22))),new Dt(29,16,36,14,16,new Ft(24,new Nt(1,32))),new Dt(30,16,48,14,22,new Ft(28,new Nt(1,49)))]}}Dt.VERSIONS=Dt.buildVersions();class zr{constructor(s){const l=s.getHeight();if(l<8||l>144||(l&1)!==0)throw new F;this.version=zr.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new we(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const l=s.getHeight(),u=s.getWidth();return Dt.getVersionForDimensions(l,u)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let l=0,u=4,f=0;const p=this.mappingBitMatrix.getHeight(),y=this.mappingBitMatrix.getWidth();let v=!1,I=!1,C=!1,O=!1;do if(u===p&&f===0&&!v)s[l++]=this.readCorner1(p,y)&255,u-=2,f+=2,v=!0;else if(u===p-2&&f===0&&(y&3)!==0&&!I)s[l++]=this.readCorner2(p,y)&255,u-=2,f+=2,I=!0;else if(u===p+4&&f===2&&(y&7)===0&&!C)s[l++]=this.readCorner3(p,y)&255,u-=2,f+=2,C=!0;else if(u===p-2&&f===0&&(y&7)===4&&!O)s[l++]=this.readCorner4(p,y)&255,u-=2,f+=2,O=!0;else{do u<p&&f>=0&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,p,y)&255),u-=2,f+=2;while(u>=0&&f<y);u+=1,f+=3;do u>=0&&f<y&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,p,y)&255),u+=2,f-=2;while(u<p&&f>=0);u+=3,f+=1}while(u<p||f<y);if(l!==this.version.getTotalCodewords())throw new F;return s}readModule(s,l,u,f){return s<0&&(s+=u,l+=4-(u+4&7)),l<0&&(l+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(l,s),this.mappingBitMatrix.get(l,s)}readUtah(s,l,u,f){let p=0;return this.readModule(s-2,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s-2,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l,u,f)&&(p|=1),p<<=1,this.readModule(s,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s,l,u,f)&&(p|=1),p}readCorner1(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,1,s,l)&&(u|=1),u<<=1,this.readModule(s-1,2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}readCorner2(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-4,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner3(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-3,s,l)&&(u|=1),u<<=1,this.readModule(1,l-2,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner4(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}extractDataRegion(s){const l=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(s.getHeight()!==l)throw new E("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),y=l/f|0,v=u/p|0,I=y*f,C=v*p,O=new we(C,I);for(let U=0;U<y;++U){const q=U*f;for(let J=0;J<v;++J){const le=J*p;for(let ue=0;ue<f;++ue){const fe=U*(f+2)+1+ue,Ee=q+ue;for(let Fe=0;Fe<p;++Fe){const je=J*(p+2)+1+Fe;if(s.get(je,fe)){const Oe=le+Fe;O.set(Oe,Ee)}}}}}return O}}class ia{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l){const u=l.getECBlocks();let f=0;const p=u.getECBlocks();for(let ue of p)f+=ue.getCount();const y=new Array(f);let v=0;for(let ue of p)for(let fe=0;fe<ue.getCount();fe++){const Ee=ue.getDataCodewords(),Fe=u.getECCodewords()+Ee;y[v++]=new ia(Ee,new Uint8Array(Fe))}const C=y[0].codewords.length-u.getECCodewords(),O=C-1;let U=0;for(let ue=0;ue<O;ue++)for(let fe=0;fe<v;fe++)y[fe].codewords[ue]=s[U++];const q=l.getVersionNumber()===24,J=q?8:v;for(let ue=0;ue<J;ue++)y[ue].codewords[C-1]=s[U++];const le=y[0].codewords.length;for(let ue=C;ue<le;ue++)for(let fe=0;fe<v;fe++){const Ee=q?(fe+8)%v:fe,Fe=q&&Ee>7?ue-1:ue;y[Ee].codewords[Fe]=s[U++]}if(U!==s.length)throw new E;return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ga{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new E(""+s);let l=0,u=this.bitOffset,f=this.byteOffset;const p=this.bytes;if(u>0){const y=8-u,v=s<y?s:y,I=y-v,C=255>>8-v<<I;l=(p[f]&C)>>I,s-=v,u+=v,u===8&&(u=0,f++)}if(s>0){for(;s>=8;)l=l<<8|p[f]&255,f++,s-=8;if(s>0){const y=8-s,v=255>>y<<y;l=l<<s|(p[f]&v)>>y,u+=s}}return this.bitOffset=u,this.byteOffset=f,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Yn;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(Yn||(Yn={}));class ji{static decode(s){const l=new Ga(s),u=new K,f=new K,p=new Array;let y=Yn.ASCII_ENCODE;do if(y===Yn.ASCII_ENCODE)y=this.decodeAsciiSegment(l,u,f);else{switch(y){case Yn.C40_ENCODE:this.decodeC40Segment(l,u);break;case Yn.TEXT_ENCODE:this.decodeTextSegment(l,u);break;case Yn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,u);break;case Yn.EDIFACT_ENCODE:this.decodeEdifactSegment(l,u);break;case Yn.BASE256_ENCODE:this.decodeBase256Segment(l,u,p);break;default:throw new F}y=Yn.ASCII_ENCODE}while(y!==Yn.PAD_ENCODE&&l.available()>0);return f.length()>0&&u.append(f.toString()),new at(s,u.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(s,l,u){let f=!1;do{let p=s.readBits(8);if(p===0)throw new F;if(p<=128)return f&&(p+=128),l.append(String.fromCharCode(p-1)),Yn.ASCII_ENCODE;if(p===129)return Yn.PAD_ENCODE;if(p<=229){const y=p-130;y<10&&l.append("0"),l.append(""+y)}else switch(p){case 230:return Yn.C40_ENCODE;case 231:return Yn.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:l.append("[)>05"),u.insert(0,"");break;case 237:l.append("[)>06"),u.insert(0,"");break;case 238:return Yn.ANSIX12_ENCODE;case 239:return Yn.TEXT_ENCODE;case 240:return Yn.EDIFACT_ENCODE;case 241:break;default:if(p!==254||s.available()!==0)throw new F;break}}while(s.available()>0);return Yn.ASCII_ENCODE}static decodeC40Segment(s,l){let u=!1;const f=[];let p=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const I=f[v];switch(p){case 0:if(I<3)p=I+1;else if(I<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new F;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),p=0;break;case 2:if(I<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new F}p=0;break;case 3:u?(l.append(String.fromCharCode(I+224)),u=!1):l.append(String.fromCharCode(I+96)),p=0;break;default:throw new F}}}while(s.available()>0)}static decodeTextSegment(s,l){let u=!1,f=[],p=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const I=f[v];switch(p){case 0:if(I<3)p=I+1;else if(I<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new F;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),p=0;break;case 2:if(I<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new F}p=0;break;case 3:if(I<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C),p=0}else throw new F;break;default:throw new F}}}while(s.available()>0)}static decodeAnsiX12Segment(s,l){const u=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){const y=u[p];switch(y){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(y<14)l.append(String.fromCharCode(y+44));else if(y<40)l.append(String.fromCharCode(y+51));else throw new F;break}}}while(s.available()>0)}static parseTwoBytes(s,l,u){let f=(s<<8)+l-1,p=Math.floor(f/1600);u[0]=p,f-=p*1600,p=Math.floor(f/40),u[1]=p,u[2]=f-p*40}static decodeEdifactSegment(s,l){do{if(s.available()<=16)return;for(let u=0;u<4;u++){let f=s.readBits(6);if(f===31){const p=8-s.getBitOffset();p!==8&&s.readBits(p);return}(f&32)===0&&(f|=64),l.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,l,u){let f=1+s.getByteOffset();const p=this.unrandomize255State(s.readBits(8),f++);let y;if(p===0?y=s.available()/8|0:p<250?y=p:y=250*(p-249)+this.unrandomize255State(s.readBits(8),f++),y<0)throw new F;const v=new Uint8Array(y);for(let I=0;I<y;I++){if(s.available()<8)throw new F;v[I]=this.unrandomize255State(s.readBits(8),f++)}u.push(v);try{l.append(ne.decode(v,te.ISO88591))}catch(I){throw new Vn("Platform does not support required encoding: "+I.message)}}static unrandomize255State(s,l){const u=149*l%255+1,f=s-u;return f>=0?f:f+256}}ji.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ji.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ji.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ji.TEXT_SHIFT2_SET_CHARS=ji.C40_SHIFT2_SET_CHARS,ji.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class $a{constructor(){this.rsDecoder=new Dr(ht.DATA_MATRIX_FIELD_256)}decode(s){const l=new zr(s),u=l.getVersion(),f=l.readCodewords(),p=ia.getDataBlocks(f,u);let y=0;for(let C of p)y+=C.getNumDataCodewords();const v=new Uint8Array(y),I=p.length;for(let C=0;C<I;C++){const O=p[C],U=O.getCodewords(),q=O.getNumDataCodewords();this.correctErrors(U,q);for(let J=0;J<q;J++)v[J*I+C]=U[J]}return ji.decode(v)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class mn{constructor(s){this.image=s,this.rectangleDetector=new Yr(this.image)}detect(){const s=this.rectangleDetector.detect();let l=this.detectSolid1(s);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new se;l=this.shiftToModuleCenter(l);const u=l[0],f=l[1],p=l[2],y=l[3];let v=this.transitionsBetween(u,y)+1,I=this.transitionsBetween(p,y)+1;(v&1)===1&&(v+=1),(I&1)===1&&(I+=1),4*v<7*I&&4*I<7*v&&(v=I=Math.max(v,I));let C=mn.sampleGrid(this.image,u,f,p,y,v,I);return new Kn(C,[u,f,p,y])}static shiftPoint(s,l,u){let f=(l.getX()-s.getX())/(u+1),p=(l.getY()-s.getY())/(u+1);return new Xe(s.getX()+f,s.getY()+p)}static moveAway(s,l,u){let f=s.getX(),p=s.getY();return f<l?f-=1:f+=1,p<u?p-=1:p+=1,new Xe(f,p)}detectSolid1(s){let l=s[0],u=s[1],f=s[3],p=s[2],y=this.transitionsBetween(l,u),v=this.transitionsBetween(u,f),I=this.transitionsBetween(f,p),C=this.transitionsBetween(p,l),O=y,U=[p,l,u,f];return O>v&&(O=v,U[0]=l,U[1]=u,U[2]=f,U[3]=p),O>I&&(O=I,U[0]=u,U[1]=f,U[2]=p,U[3]=l),O>C&&(U[0]=f,U[1]=p,U[2]=l,U[3]=u),U}detectSolid2(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p),v=mn.shiftPoint(u,f,(y+1)*4),I=mn.shiftPoint(f,u,(y+1)*4),C=this.transitionsBetween(v,l),O=this.transitionsBetween(I,p);return C<O?(s[0]=l,s[1]=u,s[2]=f,s[3]=p):(s[0]=u,s[1]=f,s[2]=p,s[3]=l),s}correctTopRight(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p),v=this.transitionsBetween(u,p),I=mn.shiftPoint(l,u,(v+1)*4),C=mn.shiftPoint(f,u,(y+1)*4);y=this.transitionsBetween(I,p),v=this.transitionsBetween(C,p);let O=new Xe(p.getX()+(f.getX()-u.getX())/(y+1),p.getY()+(f.getY()-u.getY())/(y+1)),U=new Xe(p.getX()+(l.getX()-u.getX())/(v+1),p.getY()+(l.getY()-u.getY())/(v+1));if(!this.isValid(O))return this.isValid(U)?U:null;if(!this.isValid(U))return O;let q=this.transitionsBetween(I,O)+this.transitionsBetween(C,O),J=this.transitionsBetween(I,U)+this.transitionsBetween(C,U);return q>J?O:U}shiftToModuleCenter(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p)+1,v=this.transitionsBetween(f,p)+1,I=mn.shiftPoint(l,u,v*4),C=mn.shiftPoint(f,u,y*4);y=this.transitionsBetween(I,p)+1,v=this.transitionsBetween(C,p)+1,(y&1)===1&&(y+=1),(v&1)===1&&(v+=1);let O=(l.getX()+u.getX()+f.getX()+p.getX())/4,U=(l.getY()+u.getY()+f.getY()+p.getY())/4;l=mn.moveAway(l,O,U),u=mn.moveAway(u,O,U),f=mn.moveAway(f,O,U),p=mn.moveAway(p,O,U);let q,J;return I=mn.shiftPoint(l,u,v*4),I=mn.shiftPoint(I,p,y*4),q=mn.shiftPoint(u,l,v*4),q=mn.shiftPoint(q,f,y*4),C=mn.shiftPoint(f,p,v*4),C=mn.shiftPoint(C,u,y*4),J=mn.shiftPoint(p,f,v*4),J=mn.shiftPoint(J,l,y*4),[I,q,C,J]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,l,u,f,p,y,v){return Er.getInstance().sampleGrid(s,y,v,.5,.5,y-.5,.5,y-.5,v-.5,.5,v-.5,l.getX(),l.getY(),p.getX(),p.getY(),f.getX(),f.getY(),u.getX(),u.getY())}transitionsBetween(s,l){let u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),p=Math.trunc(l.getX()),y=Math.trunc(l.getY()),v=Math.abs(y-f)>Math.abs(p-u);if(v){let ue=u;u=f,f=ue,ue=p,p=y,y=ue}let I=Math.abs(p-u),C=Math.abs(y-f),O=-I/2,U=f<y?1:-1,q=u<p?1:-1,J=0,le=this.image.get(v?f:u,v?u:f);for(let ue=u,fe=f;ue!==p;ue+=q){let Ee=this.image.get(v?fe:ue,v?ue:fe);if(Ee!==le&&(J++,le=Ee),O+=C,O>0){if(fe===y)break;fe+=U,O-=I}}return J}}class Ei{constructor(){this.decoder=new $a}decode(s,l=null){let u,f;if(l!=null&&l.has(ie.PURE_BARCODE)){const C=Ei.extractPureBits(s.getBlackMatrix());u=this.decoder.decode(C),f=Ei.NO_POINTS}else{const C=new mn(s.getBlackMatrix()).detect();u=this.decoder.decode(C.getBits()),f=C.getPoints()}const p=u.getRawBytes(),y=new Le(u.getText(),p,8*p.length,f,Re.DATA_MATRIX,D.currentTimeMillis()),v=u.getByteSegments();v!=null&&y.putMetadata(Ge.BYTE_SEGMENTS,v);const I=u.getECLevel();return I!=null&&y.putMetadata(Ge.ERROR_CORRECTION_LEVEL,I),y}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l==null||u==null)throw new se;const f=this.moduleSize(l,s);let p=l[1];const y=u[1];let v=l[0];const C=(u[0]-v+1)/f,O=(y-p+1)/f;if(C<=0||O<=0)throw new se;const U=f/2;p+=U,v+=U;const q=new we(C,O);for(let J=0;J<O;J++){const le=p+J*f;for(let ue=0;ue<C;ue++)s.get(v+ue*f,le)&&q.set(ue,J)}return q}static moduleSize(s,l){const u=l.getWidth();let f=s[0];const p=s[1];for(;f<u&&l.get(f,p);)f++;if(f===u)throw new se;const y=f-s[0];if(y===0)throw new se;return y}}Ei.NO_POINTS=[];class Qd extends Se{constructor(s=500){super(new Ei,s)}}var bi;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(bi||(bi={}));class Ot{constructor(s,l,u){this.value=s,this.stringValue=l,this.bits=u,Ot.FOR_BITS.set(u,this),Ot.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Ot.L;case"M":return Ot.M;case"Q":return Ot.Q;case"H":return Ot.H;default:throw new w(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Ot))return!1;const l=s;return this.value===l.value}static forBits(s){if(s<0||s>=Ot.FOR_BITS.size)throw new E;return Ot.FOR_BITS.get(s)}}Ot.FOR_BITS=new Map,Ot.FOR_VALUE=new Map,Ot.L=new Ot(bi.L,"L",1),Ot.M=new Ot(bi.M,"M",0),Ot.Q=new Ot(bi.Q,"Q",3),Ot.H=new Ot(bi.H,"H",2);class Qn{constructor(s){this.errorCorrectionLevel=Ot.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,l){return W.bitCount(s^l)}static decodeFormatInformation(s,l){const u=Qn.doDecodeFormatInformation(s,l);return u!==null?u:Qn.doDecodeFormatInformation(s^Qn.FORMAT_INFO_MASK_QR,l^Qn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,l){let u=Number.MAX_SAFE_INTEGER,f=0;for(const p of Qn.FORMAT_INFO_DECODE_LOOKUP){const y=p[0];if(y===s||y===l)return new Qn(p[1]);let v=Qn.numBitsDiffering(s,y);v<u&&(f=p[1],u=v),s!==l&&(v=Qn.numBitsDiffering(l,y),v<u&&(f=p[1],u=v))}return u<=3?new Qn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Qn))return!1;const l=s;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}Qn.FORMAT_INFO_MASK_QR=21522,Qn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class pe{constructor(s,...l){this.ecCodewordsPerBlock=s,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const l=this.ecBlocks;for(const u of l)s+=u.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(s,l,...u){this.versionNumber=s,this.alignmentPatternCenters=l,this.ecBlocks=u;let f=0;const p=u[0].getECCodewordsPerBlock(),y=u[0].getECBlocks();for(const v of y)f+=v.getCount()*(v.getDataCodewords()+p);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new F;try{return this.getVersionForNumber((s-17)/4)}catch{throw new F}}static getVersionForNumber(s){if(s<1||s>40)throw new E;return $e.VERSIONS[s-1]}static decodeVersionInformation(s){let l=Number.MAX_SAFE_INTEGER,u=0;for(let f=0;f<$e.VERSION_DECODE_INFO.length;f++){const p=$e.VERSION_DECODE_INFO[f];if(p===s)return $e.getVersionForNumber(f+7);const y=Qn.numBitsDiffering(s,p);y<l&&(u=f+7,l=y)}return l<=3?$e.getVersionForNumber(u):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),l=new we(s);l.setRegion(0,0,9,9),l.setRegion(s-8,0,8,9),l.setRegion(0,s-8,9,8);const u=this.alignmentPatternCenters.length;for(let f=0;f<u;f++){const p=this.alignmentPatternCenters[f]-2;for(let y=0;y<u;y++)f===0&&(y===0||y===u-1)||f===u-1&&y===0||l.setRegion(this.alignmentPatternCenters[y]-2,p,5,5)}return l.setRegion(6,9,1,s-17),l.setRegion(9,6,s-17,1),this.versionNumber>6&&(l.setRegion(s-11,0,3,6),l.setRegion(0,s-11,6,3)),l}toString(){return""+this.versionNumber}}$e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$e.VERSIONS=[new $e(1,new Int32Array(0),new pe(7,new Q(1,19)),new pe(10,new Q(1,16)),new pe(13,new Q(1,13)),new pe(17,new Q(1,9))),new $e(2,Int32Array.from([6,18]),new pe(10,new Q(1,34)),new pe(16,new Q(1,28)),new pe(22,new Q(1,22)),new pe(28,new Q(1,16))),new $e(3,Int32Array.from([6,22]),new pe(15,new Q(1,55)),new pe(26,new Q(1,44)),new pe(18,new Q(2,17)),new pe(22,new Q(2,13))),new $e(4,Int32Array.from([6,26]),new pe(20,new Q(1,80)),new pe(18,new Q(2,32)),new pe(26,new Q(2,24)),new pe(16,new Q(4,9))),new $e(5,Int32Array.from([6,30]),new pe(26,new Q(1,108)),new pe(24,new Q(2,43)),new pe(18,new Q(2,15),new Q(2,16)),new pe(22,new Q(2,11),new Q(2,12))),new $e(6,Int32Array.from([6,34]),new pe(18,new Q(2,68)),new pe(16,new Q(4,27)),new pe(24,new Q(4,19)),new pe(28,new Q(4,15))),new $e(7,Int32Array.from([6,22,38]),new pe(20,new Q(2,78)),new pe(18,new Q(4,31)),new pe(18,new Q(2,14),new Q(4,15)),new pe(26,new Q(4,13),new Q(1,14))),new $e(8,Int32Array.from([6,24,42]),new pe(24,new Q(2,97)),new pe(22,new Q(2,38),new Q(2,39)),new pe(22,new Q(4,18),new Q(2,19)),new pe(26,new Q(4,14),new Q(2,15))),new $e(9,Int32Array.from([6,26,46]),new pe(30,new Q(2,116)),new pe(22,new Q(3,36),new Q(2,37)),new pe(20,new Q(4,16),new Q(4,17)),new pe(24,new Q(4,12),new Q(4,13))),new $e(10,Int32Array.from([6,28,50]),new pe(18,new Q(2,68),new Q(2,69)),new pe(26,new Q(4,43),new Q(1,44)),new pe(24,new Q(6,19),new Q(2,20)),new pe(28,new Q(6,15),new Q(2,16))),new $e(11,Int32Array.from([6,30,54]),new pe(20,new Q(4,81)),new pe(30,new Q(1,50),new Q(4,51)),new pe(28,new Q(4,22),new Q(4,23)),new pe(24,new Q(3,12),new Q(8,13))),new $e(12,Int32Array.from([6,32,58]),new pe(24,new Q(2,92),new Q(2,93)),new pe(22,new Q(6,36),new Q(2,37)),new pe(26,new Q(4,20),new Q(6,21)),new pe(28,new Q(7,14),new Q(4,15))),new $e(13,Int32Array.from([6,34,62]),new pe(26,new Q(4,107)),new pe(22,new Q(8,37),new Q(1,38)),new pe(24,new Q(8,20),new Q(4,21)),new pe(22,new Q(12,11),new Q(4,12))),new $e(14,Int32Array.from([6,26,46,66]),new pe(30,new Q(3,115),new Q(1,116)),new pe(24,new Q(4,40),new Q(5,41)),new pe(20,new Q(11,16),new Q(5,17)),new pe(24,new Q(11,12),new Q(5,13))),new $e(15,Int32Array.from([6,26,48,70]),new pe(22,new Q(5,87),new Q(1,88)),new pe(24,new Q(5,41),new Q(5,42)),new pe(30,new Q(5,24),new Q(7,25)),new pe(24,new Q(11,12),new Q(7,13))),new $e(16,Int32Array.from([6,26,50,74]),new pe(24,new Q(5,98),new Q(1,99)),new pe(28,new Q(7,45),new Q(3,46)),new pe(24,new Q(15,19),new Q(2,20)),new pe(30,new Q(3,15),new Q(13,16))),new $e(17,Int32Array.from([6,30,54,78]),new pe(28,new Q(1,107),new Q(5,108)),new pe(28,new Q(10,46),new Q(1,47)),new pe(28,new Q(1,22),new Q(15,23)),new pe(28,new Q(2,14),new Q(17,15))),new $e(18,Int32Array.from([6,30,56,82]),new pe(30,new Q(5,120),new Q(1,121)),new pe(26,new Q(9,43),new Q(4,44)),new pe(28,new Q(17,22),new Q(1,23)),new pe(28,new Q(2,14),new Q(19,15))),new $e(19,Int32Array.from([6,30,58,86]),new pe(28,new Q(3,113),new Q(4,114)),new pe(26,new Q(3,44),new Q(11,45)),new pe(26,new Q(17,21),new Q(4,22)),new pe(26,new Q(9,13),new Q(16,14))),new $e(20,Int32Array.from([6,34,62,90]),new pe(28,new Q(3,107),new Q(5,108)),new pe(26,new Q(3,41),new Q(13,42)),new pe(30,new Q(15,24),new Q(5,25)),new pe(28,new Q(15,15),new Q(10,16))),new $e(21,Int32Array.from([6,28,50,72,94]),new pe(28,new Q(4,116),new Q(4,117)),new pe(26,new Q(17,42)),new pe(28,new Q(17,22),new Q(6,23)),new pe(30,new Q(19,16),new Q(6,17))),new $e(22,Int32Array.from([6,26,50,74,98]),new pe(28,new Q(2,111),new Q(7,112)),new pe(28,new Q(17,46)),new pe(30,new Q(7,24),new Q(16,25)),new pe(24,new Q(34,13))),new $e(23,Int32Array.from([6,30,54,78,102]),new pe(30,new Q(4,121),new Q(5,122)),new pe(28,new Q(4,47),new Q(14,48)),new pe(30,new Q(11,24),new Q(14,25)),new pe(30,new Q(16,15),new Q(14,16))),new $e(24,Int32Array.from([6,28,54,80,106]),new pe(30,new Q(6,117),new Q(4,118)),new pe(28,new Q(6,45),new Q(14,46)),new pe(30,new Q(11,24),new Q(16,25)),new pe(30,new Q(30,16),new Q(2,17))),new $e(25,Int32Array.from([6,32,58,84,110]),new pe(26,new Q(8,106),new Q(4,107)),new pe(28,new Q(8,47),new Q(13,48)),new pe(30,new Q(7,24),new Q(22,25)),new pe(30,new Q(22,15),new Q(13,16))),new $e(26,Int32Array.from([6,30,58,86,114]),new pe(28,new Q(10,114),new Q(2,115)),new pe(28,new Q(19,46),new Q(4,47)),new pe(28,new Q(28,22),new Q(6,23)),new pe(30,new Q(33,16),new Q(4,17))),new $e(27,Int32Array.from([6,34,62,90,118]),new pe(30,new Q(8,122),new Q(4,123)),new pe(28,new Q(22,45),new Q(3,46)),new pe(30,new Q(8,23),new Q(26,24)),new pe(30,new Q(12,15),new Q(28,16))),new $e(28,Int32Array.from([6,26,50,74,98,122]),new pe(30,new Q(3,117),new Q(10,118)),new pe(28,new Q(3,45),new Q(23,46)),new pe(30,new Q(4,24),new Q(31,25)),new pe(30,new Q(11,15),new Q(31,16))),new $e(29,Int32Array.from([6,30,54,78,102,126]),new pe(30,new Q(7,116),new Q(7,117)),new pe(28,new Q(21,45),new Q(7,46)),new pe(30,new Q(1,23),new Q(37,24)),new pe(30,new Q(19,15),new Q(26,16))),new $e(30,Int32Array.from([6,26,52,78,104,130]),new pe(30,new Q(5,115),new Q(10,116)),new pe(28,new Q(19,47),new Q(10,48)),new pe(30,new Q(15,24),new Q(25,25)),new pe(30,new Q(23,15),new Q(25,16))),new $e(31,Int32Array.from([6,30,56,82,108,134]),new pe(30,new Q(13,115),new Q(3,116)),new pe(28,new Q(2,46),new Q(29,47)),new pe(30,new Q(42,24),new Q(1,25)),new pe(30,new Q(23,15),new Q(28,16))),new $e(32,Int32Array.from([6,34,60,86,112,138]),new pe(30,new Q(17,115)),new pe(28,new Q(10,46),new Q(23,47)),new pe(30,new Q(10,24),new Q(35,25)),new pe(30,new Q(19,15),new Q(35,16))),new $e(33,Int32Array.from([6,30,58,86,114,142]),new pe(30,new Q(17,115),new Q(1,116)),new pe(28,new Q(14,46),new Q(21,47)),new pe(30,new Q(29,24),new Q(19,25)),new pe(30,new Q(11,15),new Q(46,16))),new $e(34,Int32Array.from([6,34,62,90,118,146]),new pe(30,new Q(13,115),new Q(6,116)),new pe(28,new Q(14,46),new Q(23,47)),new pe(30,new Q(44,24),new Q(7,25)),new pe(30,new Q(59,16),new Q(1,17))),new $e(35,Int32Array.from([6,30,54,78,102,126,150]),new pe(30,new Q(12,121),new Q(7,122)),new pe(28,new Q(12,47),new Q(26,48)),new pe(30,new Q(39,24),new Q(14,25)),new pe(30,new Q(22,15),new Q(41,16))),new $e(36,Int32Array.from([6,24,50,76,102,128,154]),new pe(30,new Q(6,121),new Q(14,122)),new pe(28,new Q(6,47),new Q(34,48)),new pe(30,new Q(46,24),new Q(10,25)),new pe(30,new Q(2,15),new Q(64,16))),new $e(37,Int32Array.from([6,28,54,80,106,132,158]),new pe(30,new Q(17,122),new Q(4,123)),new pe(28,new Q(29,46),new Q(14,47)),new pe(30,new Q(49,24),new Q(10,25)),new pe(30,new Q(24,15),new Q(46,16))),new $e(38,Int32Array.from([6,32,58,84,110,136,162]),new pe(30,new Q(4,122),new Q(18,123)),new pe(28,new Q(13,46),new Q(32,47)),new pe(30,new Q(48,24),new Q(14,25)),new pe(30,new Q(42,15),new Q(32,16))),new $e(39,Int32Array.from([6,26,54,82,110,138,166]),new pe(30,new Q(20,117),new Q(4,118)),new pe(28,new Q(40,47),new Q(7,48)),new pe(30,new Q(43,24),new Q(22,25)),new pe(30,new Q(10,15),new Q(67,16))),new $e(40,Int32Array.from([6,30,58,86,114,142,170]),new pe(30,new Q(19,118),new Q(6,119)),new pe(28,new Q(18,47),new Q(31,48)),new pe(30,new Q(34,24),new Q(34,25)),new pe(30,new Q(20,15),new Q(61,16)))];var Rn;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class It{constructor(s,l){this.value=s,this.isMasked=l}unmaskBitMatrix(s,l){for(let u=0;u<l;u++)for(let f=0;f<l;f++)this.isMasked(u,f)&&s.flip(f,u)}}It.values=new Map([[Rn.DATA_MASK_000,new It(Rn.DATA_MASK_000,(j,s)=>(j+s&1)===0)],[Rn.DATA_MASK_001,new It(Rn.DATA_MASK_001,(j,s)=>(j&1)===0)],[Rn.DATA_MASK_010,new It(Rn.DATA_MASK_010,(j,s)=>s%3===0)],[Rn.DATA_MASK_011,new It(Rn.DATA_MASK_011,(j,s)=>(j+s)%3===0)],[Rn.DATA_MASK_100,new It(Rn.DATA_MASK_100,(j,s)=>(Math.floor(j/2)+Math.floor(s/3)&1)===0)],[Rn.DATA_MASK_101,new It(Rn.DATA_MASK_101,(j,s)=>j*s%6===0)],[Rn.DATA_MASK_110,new It(Rn.DATA_MASK_110,(j,s)=>j*s%6<3)],[Rn.DATA_MASK_111,new It(Rn.DATA_MASK_111,(j,s)=>(j+s+j*s%3&1)===0)]]);class Eo{constructor(s){const l=s.getHeight();if(l<21||(l&3)!==1)throw new F;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let p=0;p<6;p++)s=this.copyBit(p,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let p=5;p>=0;p--)s=this.copyBit(8,p,s);const l=this.bitMatrix.getHeight();let u=0;const f=l-7;for(let p=l-1;p>=f;p--)u=this.copyBit(8,p,u);for(let p=l-8;p<l;p++)u=this.copyBit(p,8,u);if(this.parsedFormatInfo=Qn.decodeFormatInformation(s,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),l=Math.floor((s-17)/4);if(l<=6)return $e.getVersionForNumber(l);let u=0;const f=s-11;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(v,y,u);let p=$e.decodeVersionInformation(u);if(p!==null&&p.getDimensionForVersion()===s)return this.parsedVersion=p,p;u=0;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(y,v,u);if(p=$e.decodeVersionInformation(u),p!==null&&p.getDimensionForVersion()===s)return this.parsedVersion=p,p;throw new F}copyBit(s,l,u){return(this.isMirror?this.bitMatrix.get(l,s):this.bitMatrix.get(s,l))?u<<1|1:u<<1}readCodewords(){const s=this.readFormatInformation(),l=this.readVersion(),u=It.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,f);const p=l.buildFunctionPattern();let y=!0;const v=new Uint8Array(l.getTotalCodewords());let I=0,C=0,O=0;for(let U=f-1;U>0;U-=2){U===6&&U--;for(let q=0;q<f;q++){const J=y?f-1-q:q;for(let le=0;le<2;le++)p.get(U-le,J)||(O++,C<<=1,this.bitMatrix.get(U-le,J)&&(C|=1),O===8&&(v[I++]=C,O=0,C=0))}y=!y}if(I!==l.getTotalCodewords())throw new F;return v}remask(){if(this.parsedFormatInfo===null)return;const s=It.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let l=0,u=s.getWidth();l<u;l++)for(let f=l+1,p=s.getHeight();f<p;f++)s.get(l,f)!==s.get(f,l)&&(s.flip(f,l),s.flip(l,f))}}class qa{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l,u){if(s.length!==l.getTotalCodewords())throw new E;const f=l.getECBlocksForLevel(u);let p=0;const y=f.getECBlocks();for(const le of y)p+=le.getCount();const v=new Array(p);let I=0;for(const le of y)for(let ue=0;ue<le.getCount();ue++){const fe=le.getDataCodewords(),Ee=f.getECCodewordsPerBlock()+fe;v[I++]=new qa(fe,new Uint8Array(Ee))}const C=v[0].codewords.length;let O=v.length-1;for(;O>=0&&v[O].codewords.length!==C;)O--;O++;const U=C-f.getECCodewordsPerBlock();let q=0;for(let le=0;le<U;le++)for(let ue=0;ue<I;ue++)v[ue].codewords[le]=s[q++];for(let le=O;le<I;le++)v[le].codewords[U]=s[q++];const J=v[0].codewords.length;for(let le=U;le<J;le++)for(let ue=0;ue<I;ue++){const fe=ue<O?le:le+1;v[ue].codewords[fe]=s[q++]}return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Wr;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(Wr||(Wr={}));class ut{constructor(s,l,u,f){this.value=s,this.stringValue=l,this.characterCountBitsForVersions=u,this.bits=f,ut.FOR_BITS.set(f,this),ut.FOR_VALUE.set(s,this)}static forBits(s){const l=ut.FOR_BITS.get(s);if(l===void 0)throw new E;return l}getCharacterCountBits(s){const l=s.getVersionNumber();let u;return l<=9?u=0:l<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof ut))return!1;const l=s;return this.value===l.value}toString(){return this.stringValue}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.TERMINATOR=new ut(Wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ut.NUMERIC=new ut(Wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ut.ALPHANUMERIC=new ut(Wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ut.STRUCTURED_APPEND=new ut(Wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ut.BYTE=new ut(Wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ut.ECI=new ut(Wr.ECI,"ECI",Int32Array.from([0,0,0]),7),ut.KANJI=new ut(Wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ut.FNC1_FIRST_POSITION=new ut(Wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ut.FNC1_SECOND_POSITION=new ut(Wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ut.HANZI=new ut(Wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Sn{static decode(s,l,u,f){const p=new Ga(s);let y=new K;const v=new Array;let I=-1,C=-1;try{let O=null,U=!1,q;do{if(p.available()<4)q=ut.TERMINATOR;else{const J=p.readBits(4);q=ut.forBits(J)}switch(q){case ut.TERMINATOR:break;case ut.FNC1_FIRST_POSITION:case ut.FNC1_SECOND_POSITION:U=!0;break;case ut.STRUCTURED_APPEND:if(p.available()<16)throw new F;I=p.readBits(8),C=p.readBits(8);break;case ut.ECI:const J=Sn.parseECIValue(p);if(O=H.getCharacterSetECIByValue(J),O===null)throw new F;break;case ut.HANZI:const le=p.readBits(4),ue=p.readBits(q.getCharacterCountBits(l));le===Sn.GB2312_SUBSET&&Sn.decodeHanziSegment(p,y,ue);break;default:const fe=p.readBits(q.getCharacterCountBits(l));switch(q){case ut.NUMERIC:Sn.decodeNumericSegment(p,y,fe);break;case ut.ALPHANUMERIC:Sn.decodeAlphanumericSegment(p,y,fe,U);break;case ut.BYTE:Sn.decodeByteSegment(p,y,fe,O,v,f);break;case ut.KANJI:Sn.decodeKanjiSegment(p,y,fe);break;default:throw new F}break}}while(q!==ut.TERMINATOR)}catch{throw new F}return new at(s,y.toString(),v.length===0?null:v,u===null?null:u.toString(),I,C)}static decodeHanziSegment(s,l,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let p=0;for(;u>0;){const y=s.readBits(13);let v=y/96<<8&4294967295|y%96;v<959?v+=41377:v+=42657,f[p]=v>>8&255,f[p+1]=v&255,p+=2,u--}try{l.append(ne.decode(f,te.GB2312))}catch(y){throw new F(y)}}static decodeKanjiSegment(s,l,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let p=0;for(;u>0;){const y=s.readBits(13);let v=y/192<<8&4294967295|y%192;v<7936?v+=33088:v+=49472,f[p]=v>>8,f[p+1]=v,p+=2,u--}try{l.append(ne.decode(f,te.SHIFT_JIS))}catch(y){throw new F(y)}}static decodeByteSegment(s,l,u,f,p,y){if(8*u>s.available())throw new F;const v=new Uint8Array(u);for(let C=0;C<u;C++)v[C]=s.readBits(8);let I;f===null?I=te.guessEncoding(v,y):I=f.getName();try{l.append(ne.decode(v,I))}catch(C){throw new F(C)}p.push(v)}static toAlphaNumericChar(s){if(s>=Sn.ALPHANUMERIC_CHARS.length)throw new F;return Sn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,l,u,f){const p=l.length();for(;u>1;){if(s.available()<11)throw new F;const y=s.readBits(11);l.append(Sn.toAlphaNumericChar(Math.floor(y/45))),l.append(Sn.toAlphaNumericChar(y%45)),u-=2}if(u===1){if(s.available()<6)throw new F;l.append(Sn.toAlphaNumericChar(s.readBits(6)))}if(f)for(let y=p;y<l.length();y++)l.charAt(y)==="%"&&(y<l.length()-1&&l.charAt(y+1)==="%"?l.deleteCharAt(y+1):l.setCharAt(y,""))}static decodeNumericSegment(s,l,u){for(;u>=3;){if(s.available()<10)throw new F;const f=s.readBits(10);if(f>=1e3)throw new F;l.append(Sn.toAlphaNumericChar(Math.floor(f/100))),l.append(Sn.toAlphaNumericChar(Math.floor(f/10)%10)),l.append(Sn.toAlphaNumericChar(f%10)),u-=3}if(u===2){if(s.available()<7)throw new F;const f=s.readBits(7);if(f>=100)throw new F;l.append(Sn.toAlphaNumericChar(Math.floor(f/10))),l.append(Sn.toAlphaNumericChar(f%10))}else if(u===1){if(s.available()<4)throw new F;const f=s.readBits(4);if(f>=10)throw new F;l.append(Sn.toAlphaNumericChar(f))}}static parseECIValue(s){const l=s.readBits(8);if((l&128)===0)return l&127;if((l&192)===128){const u=s.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){const u=s.readBits(16);return(l&31)<<16&4294967295|u}throw new F}}Sn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Sn.GB2312_SUBSET=1;class ec{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const l=s[0];s[0]=s[2],s[2]=l}}class tc{constructor(){this.rsDecoder=new Dr(ht.QR_CODE_FIELD_256)}decodeBooleanArray(s,l){return this.decodeBitMatrix(we.parseFromBooleanArray(s),l)}decodeBitMatrix(s,l){const u=new Eo(s);let f=null;try{return this.decodeBitMatrixParser(u,l)}catch(p){f=p}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const p=this.decodeBitMatrixParser(u,l);return p.setOther(new ec(!0)),p}catch(p){throw f!==null?f:p}}decodeBitMatrixParser(s,l){const u=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),p=s.readCodewords(),y=qa.getDataBlocks(p,u,f);let v=0;for(const O of y)v+=O.getNumDataCodewords();const I=new Uint8Array(v);let C=0;for(const O of y){const U=O.getCodewords(),q=O.getNumDataCodewords();this.correctErrors(U,q);for(let J=0;J<q;J++)I[C++]=U[J]}return Sn.decode(I,u,f,l)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class Zi extends Xe{constructor(s,l,u){super(s,l),this.estimatedModuleSize=u}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=(this.getX()+l)/2,p=(this.getY()+s)/2,y=(this.estimatedModuleSize+u)/2;return new Zi(f,p,y)}}class hr{constructor(s,l,u,f,p,y,v){this.image=s,this.startX=l,this.startY=u,this.width=f,this.height=p,this.moduleSize=y,this.resultPointCallback=v,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,l=this.height,u=this.width,f=s+u,p=this.startY+l/2,y=new Int32Array(3),v=this.image;for(let I=0;I<l;I++){const C=p+((I&1)===0?Math.floor((I+1)/2):-Math.floor((I+1)/2));y[0]=0,y[1]=0,y[2]=0;let O=s;for(;O<f&&!v.get(O,C);)O++;let U=0;for(;O<f;){if(v.get(O,C))if(U===1)y[1]++;else if(U===2){if(this.foundPatternCross(y)){const q=this.handlePossibleCenter(y,C,O);if(q!==null)return q}y[0]=y[2],y[1]=1,y[2]=0,U=1}else y[++U]++;else U===1&&U++,y[U]++;O++}if(this.foundPatternCross(y)){const q=this.handlePossibleCenter(y,C,f);if(q!==null)return q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(s,l){return l-s[2]-s[1]/2}foundPatternCross(s){const l=this.moduleSize,u=l/2;for(let f=0;f<3;f++)if(Math.abs(l-s[f])>=u)return!1;return!0}crossCheckVertical(s,l,u,f){const p=this.image,y=p.getHeight(),v=this.crossCheckStateCount;v[0]=0,v[1]=0,v[2]=0;let I=s;for(;I>=0&&p.get(l,I)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&!p.get(l,I)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&p.get(l,I)&&v[1]<=u;)v[1]++,I++;if(I===y||v[1]>u)return NaN;for(;I<y&&!p.get(l,I)&&v[2]<=u;)v[2]++,I++;if(v[2]>u)return NaN;const C=v[0]+v[1]+v[2];return 5*Math.abs(C-f)>=2*f?NaN:this.foundPatternCross(v)?hr.centerFromEnd(v,I):NaN}handlePossibleCenter(s,l,u){const f=s[0]+s[1]+s[2],p=hr.centerFromEnd(s,u),y=this.crossCheckVertical(l,p,2*s[1],f);if(!isNaN(y)){const v=(s[0]+s[1]+s[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(v,y,p))return C.combineEstimate(y,p,v);const I=new Zi(p,y,v);this.possibleCenters.push(I),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(I)}return null}}class Ui extends Xe{constructor(s,l,u,f){super(s,l),this.estimatedModuleSize=u,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=this.count+1,p=(this.count*this.getX()+l)/f,y=(this.count*this.getY()+s)/f,v=(this.count*this.estimatedModuleSize+u)/f;return new Ui(p,y,v,f)}}class ps{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nn{constructor(s,l){this.image=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const l=s!=null&&s.get(ie.TRY_HARDER)!==void 0,u=s!=null&&s.get(ie.PURE_BARCODE)!==void 0,f=this.image,p=f.getHeight(),y=f.getWidth();let v=Math.floor(3*p/(4*Nn.MAX_MODULES));(v<Nn.MIN_SKIP||l)&&(v=Nn.MIN_SKIP);let I=!1;const C=new Int32Array(5);for(let U=v-1;U<p&&!I;U+=v){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let q=0;for(let J=0;J<y;J++)if(f.get(J,U))(q&1)===1&&q++,C[q]++;else if((q&1)===0)if(q===4)if(Nn.foundPatternCross(C)){if(this.handlePossibleCenter(C,U,J,u)===!0)if(v=2,this.hasSkipped===!0)I=this.haveMultiplyConfirmedCenters();else{const ue=this.findRowSkip();ue>C[2]&&(U+=ue-C[2]-v,J=y-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,q=3;continue}q=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,q=3;else C[++q]++;else C[q]++;Nn.foundPatternCross(C)&&this.handlePossibleCenter(C,U,y,u)===!0&&(v=C[0],this.hasSkipped&&(I=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Xe.orderBestPatterns(O),new ps(O)}static centerFromEnd(s,l){return l-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let l=0;for(let p=0;p<5;p++){const y=s[p];if(y===0)return!1;l+=y}if(l<7)return!1;const u=l/7,f=u/2;return Math.abs(u-s[0])<f&&Math.abs(u-s[1])<f&&Math.abs(3*u-s[2])<3*f&&Math.abs(u-s[3])<f&&Math.abs(u-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,l,u,f){const p=this.getCrossCheckStateCount();let y=0;const v=this.image;for(;s>=y&&l>=y&&v.get(l-y,s-y);)p[2]++,y++;if(s<y||l<y)return!1;for(;s>=y&&l>=y&&!v.get(l-y,s-y)&&p[1]<=u;)p[1]++,y++;if(s<y||l<y||p[1]>u)return!1;for(;s>=y&&l>=y&&v.get(l-y,s-y)&&p[0]<=u;)p[0]++,y++;if(p[0]>u)return!1;const I=v.getHeight(),C=v.getWidth();for(y=1;s+y<I&&l+y<C&&v.get(l+y,s+y);)p[2]++,y++;if(s+y>=I||l+y>=C)return!1;for(;s+y<I&&l+y<C&&!v.get(l+y,s+y)&&p[3]<u;)p[3]++,y++;if(s+y>=I||l+y>=C||p[3]>=u)return!1;for(;s+y<I&&l+y<C&&v.get(l+y,s+y)&&p[4]<u;)p[4]++,y++;if(p[4]>=u)return!1;const O=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(O-f)<2*f&&Nn.foundPatternCross(p)}crossCheckVertical(s,l,u,f){const p=this.image,y=p.getHeight(),v=this.getCrossCheckStateCount();let I=s;for(;I>=0&&p.get(l,I);)v[2]++,I--;if(I<0)return NaN;for(;I>=0&&!p.get(l,I)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&p.get(l,I)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&p.get(l,I);)v[2]++,I++;if(I===y)return NaN;for(;I<y&&!p.get(l,I)&&v[3]<u;)v[3]++,I++;if(I===y||v[3]>=u)return NaN;for(;I<y&&p.get(l,I)&&v[4]<u;)v[4]++,I++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=2*f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,I):NaN}crossCheckHorizontal(s,l,u,f){const p=this.image,y=p.getWidth(),v=this.getCrossCheckStateCount();let I=s;for(;I>=0&&p.get(I,l);)v[2]++,I--;if(I<0)return NaN;for(;I>=0&&!p.get(I,l)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&p.get(I,l)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&p.get(I,l);)v[2]++,I++;if(I===y)return NaN;for(;I<y&&!p.get(I,l)&&v[3]<u;)v[3]++,I++;if(I===y||v[3]>=u)return NaN;for(;I<y&&p.get(I,l)&&v[4]<u;)v[4]++,I++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,I):NaN}handlePossibleCenter(s,l,u,f){const p=s[0]+s[1]+s[2]+s[3]+s[4];let y=Nn.centerFromEnd(s,u),v=this.crossCheckVertical(l,Math.floor(y),s[2],p);if(!isNaN(v)&&(y=this.crossCheckHorizontal(Math.floor(y),Math.floor(v),s[2],p),!isNaN(y)&&(!f||this.crossCheckDiagonal(Math.floor(v),Math.floor(y),s[2],p)))){const I=p/7;let C=!1;const O=this.possibleCenters;for(let U=0,q=O.length;U<q;U++){const J=O[U];if(J.aboutEquals(I,v,y)){O[U]=J.combineEstimate(v,y,I),C=!0;break}}if(!C){const U=new Ui(y,v,I);O.push(U),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(U)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const u of this.possibleCenters)if(u.getCount()>=Nn.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,l=0;const u=this.possibleCenters.length;for(const y of this.possibleCenters)y.getCount()>=Nn.CENTER_QUORUM&&(s++,l+=y.getEstimatedModuleSize());if(s<3)return!1;const f=l/u;let p=0;for(const y of this.possibleCenters)p+=Math.abs(y.getEstimatedModuleSize()-f);return p<=.05*l}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new se;const l=this.possibleCenters;let u;if(s>3){let f=0,p=0;for(const I of this.possibleCenters){const C=I.getEstimatedModuleSize();f+=C,p+=C*C}u=f/s;let y=Math.sqrt(p/s-u*u);l.sort((I,C)=>{const O=Math.abs(C.getEstimatedModuleSize()-u),U=Math.abs(I.getEstimatedModuleSize()-u);return O<U?-1:O>U?1:0});const v=Math.max(.2*u,y);for(let I=0;I<l.length&&l.length>3;I++){const C=l[I];Math.abs(C.getEstimatedModuleSize()-u)>v&&(l.splice(I,1),I--)}}if(l.length>3){let f=0;for(const p of l)f+=p.getEstimatedModuleSize();u=f/l.length,l.sort((p,y)=>{if(y.getCount()===p.getCount()){const v=Math.abs(y.getEstimatedModuleSize()-u),I=Math.abs(p.getEstimatedModuleSize()-u);return v<I?1:v>I?-1:0}else return y.getCount()-p.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Nn.CENTER_QUORUM=2,Nn.MIN_SKIP=3,Nn.MAX_MODULES=57;class Jr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ie.NEED_RESULT_POINT_CALLBACK);const u=new Nn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(u)}processFinderPatternInfo(s){const l=s.getTopLeft(),u=s.getTopRight(),f=s.getBottomLeft(),p=this.calculateModuleSize(l,u,f);if(p<1)throw new se("No pattern found in proccess finder.");const y=Jr.computeDimension(l,u,f,p),v=$e.getProvisionalVersionForDimension(y),I=v.getDimensionForVersion()-7;let C=null;if(v.getAlignmentPatternCenters().length>0){const J=u.getX()-l.getX()+f.getX(),le=u.getY()-l.getY()+f.getY(),ue=1-3/I,fe=Math.floor(l.getX()+ue*(J-l.getX())),Ee=Math.floor(l.getY()+ue*(le-l.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{C=this.findAlignmentInRegion(p,fe,Ee,Fe);break}catch(je){if(!(je instanceof se))throw je}}const O=Jr.createTransform(l,u,f,C,y),U=Jr.sampleGrid(this.image,O,y);let q;return C===null?q=[f,l,u]:q=[f,l,u,C],new Kn(U,q)}static createTransform(s,l,u,f,p){const y=p-3.5;let v,I,C,O;return f!==null?(v=f.getX(),I=f.getY(),C=y-3,O=C):(v=l.getX()-s.getX()+u.getX(),I=l.getY()-s.getY()+u.getY(),C=y,O=y),Wt.quadrilateralToQuadrilateral(3.5,3.5,y,3.5,C,O,3.5,y,s.getX(),s.getY(),l.getX(),l.getY(),v,I,u.getX(),u.getY())}static sampleGrid(s,l,u){return Er.getInstance().sampleGridWithTransform(s,u,u,l)}static computeDimension(s,l,u,f){const p=pt.round(Xe.distance(s,l)/f),y=pt.round(Xe.distance(s,u)/f);let v=Math.floor((p+y)/2)+7;switch(v&3){case 0:v++;break;case 2:v--;break;case 3:throw new se("Dimensions could be not found.")}return v}calculateModuleSize(s,l,u){return(this.calculateModuleSizeOneWay(s,l)+this.calculateModuleSizeOneWay(s,u))/2}calculateModuleSizeOneWay(s,l){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(l.getX()),Math.floor(l.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(u)?f/7:isNaN(f)?u/7:(u+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,l,u,f){let p=this.sizeOfBlackWhiteBlackRun(s,l,u,f),y=1,v=s-(u-s);v<0?(y=s/(s-v),v=0):v>=this.image.getWidth()&&(y=(this.image.getWidth()-1-s)/(v-s),v=this.image.getWidth()-1);let I=Math.floor(l-(f-l)*y);return y=1,I<0?(y=l/(l-I),I=0):I>=this.image.getHeight()&&(y=(this.image.getHeight()-1-l)/(I-l),I=this.image.getHeight()-1),v=Math.floor(s+(v-s)*y),p+=this.sizeOfBlackWhiteBlackRun(s,l,v,I),p-1}sizeOfBlackWhiteBlackRun(s,l,u,f){const p=Math.abs(f-l)>Math.abs(u-s);if(p){let J=s;s=l,l=J,J=u,u=f,f=J}const y=Math.abs(u-s),v=Math.abs(f-l);let I=-y/2;const C=s<u?1:-1,O=l<f?1:-1;let U=0;const q=u+C;for(let J=s,le=l;J!==q;J+=C){const ue=p?le:J,fe=p?J:le;if(U===1===this.image.get(ue,fe)){if(U===2)return pt.distance(J,le,s,l);U++}if(I+=v,I>0){if(le===f)break;le+=O,I-=y}}return U===2?pt.distance(u+C,f,s,l):NaN}findAlignmentInRegion(s,l,u,f){const p=Math.floor(f*s),y=Math.max(0,l-p),v=Math.min(this.image.getWidth()-1,l+p);if(v-y<s*3)throw new se("Alignment top exceeds estimated module size.");const I=Math.max(0,u-p),C=Math.min(this.image.getHeight()-1,u+p);if(C-I<s*3)throw new se("Alignment bottom exceeds estimated module size.");return new hr(this.image,y,I,v-y,C-I,s,this.resultPointCallback).find()}}class Hr{constructor(){this.decoder=new tc}getDecoder(){return this.decoder}decode(s,l){let u,f;if(l!=null&&l.get(ie.PURE_BARCODE)!==void 0){const I=Hr.extractPureBits(s.getBlackMatrix());u=this.decoder.decodeBitMatrix(I,l),f=Hr.NO_POINTS}else{const I=new Jr(s.getBlackMatrix()).detect(l);u=this.decoder.decodeBitMatrix(I.getBits(),l),f=I.getPoints()}u.getOther()instanceof ec&&u.getOther().applyMirroredCorrection(f);const p=new Le(u.getText(),u.getRawBytes(),void 0,f,Re.QR_CODE,void 0),y=u.getByteSegments();y!==null&&p.putMetadata(Ge.BYTE_SEGMENTS,y);const v=u.getECLevel();return v!==null&&p.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v),u.hasStructuredAppend()&&(p.putMetadata(Ge.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),p.putMetadata(Ge.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),p}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l===null||u===null)throw new se;const f=this.moduleSize(l,s);let p=l[1],y=u[1],v=l[0],I=u[0];if(v>=I||p>=y)throw new se;if(y-p!==I-v&&(I=v+(y-p),I>=s.getWidth()))throw new se;const C=Math.round((I-v+1)/f),O=Math.round((y-p+1)/f);if(C<=0||O<=0)throw new se;if(O!==C)throw new se;const U=Math.floor(f/2);p+=U,v+=U;const q=v+Math.floor((C-1)*f)-I;if(q>0){if(q>U)throw new se;v-=q}const J=p+Math.floor((O-1)*f)-y;if(J>0){if(J>U)throw new se;p-=J}const le=new we(C,O);for(let ue=0;ue<O;ue++){const fe=p+Math.floor(ue*f);for(let Ee=0;Ee<C;Ee++)s.get(v+Math.floor(Ee*f),fe)&&le.set(Ee,ue)}return le}static moduleSize(s,l){const u=l.getHeight(),f=l.getWidth();let p=s[0],y=s[1],v=!0,I=0;for(;p<f&&y<u;){if(v!==l.get(p,y)){if(++I===5)break;v=!v}p++,y++}if(p===f||y===u)throw new se;return(p-s[0])/7}}Hr.NO_POINTS=new Array;class xt{PDF417Common(){}static getBitCountSum(s){return pt.sum(s)}static toIntArray(s){if(s==null||!s.length)return xt.EMPTY_INT_ARRAY;const l=new Int32Array(s.length);let u=0;for(const f of s)l[u++]=f;return l}static getCodeword(s){const l=z.binarySearch(xt.SYMBOL_TABLE,s&262143);return l<0?-1:(xt.CODEWORD_TABLE[l]-1)%xt.NUMBER_OF_CODEWORDS}}xt.NUMBER_OF_CODEWORDS=929,xt.MAX_CODEWORDS_IN_BARCODE=xt.NUMBER_OF_CODEWORDS-1,xt.MIN_ROWS_IN_BARCODE=3,xt.MAX_ROWS_IN_BARCODE=90,xt.MODULES_IN_CODEWORD=17,xt.MODULES_IN_STOP_PATTERN=18,xt.BARS_IN_MODULE=8,xt.EMPTY_INT_ARRAY=new Int32Array([]),xt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class fu{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class gt{static detectMultiple(s,l,u){let f=s.getBlackMatrix(),p=gt.detect(u,f);return p.length||(f=f.clone(),f.rotate180(),p=gt.detect(u,f)),new fu(f,p)}static detect(s,l){const u=new Array;let f=0,p=0,y=!1;for(;f<l.getHeight();){const v=gt.findVertices(l,f,p);if(v[0]==null&&v[3]==null){if(!y)break;y=!1,p=0;for(const I of u)I[1]!=null&&(f=Math.trunc(Math.max(f,I[1].getY()))),I[3]!=null&&(f=Math.max(f,Math.trunc(I[3].getY())));f+=gt.ROW_STEP;continue}if(y=!0,u.push(v),!s)break;v[2]!=null?(p=Math.trunc(v[2].getX()),f=Math.trunc(v[2].getY())):(p=Math.trunc(v[4].getX()),f=Math.trunc(v[4].getY()))}return u}static findVertices(s,l,u){const f=s.getHeight(),p=s.getWidth(),y=new Array(8);return gt.copyToResult(y,gt.findRowsWithPattern(s,f,p,l,u,gt.START_PATTERN),gt.INDEXES_START_PATTERN),y[4]!=null&&(u=Math.trunc(y[4].getX()),l=Math.trunc(y[4].getY())),gt.copyToResult(y,gt.findRowsWithPattern(s,f,p,l,u,gt.STOP_PATTERN),gt.INDEXES_STOP_PATTERN),y}static copyToResult(s,l,u){for(let f=0;f<u.length;f++)s[u[f]]=l[f]}static findRowsWithPattern(s,l,u,f,p,y){const v=new Array(4);let I=!1;const C=new Int32Array(y.length);for(;f<l;f+=gt.ROW_STEP){let U=gt.findGuardPattern(s,p,f,u,!1,y,C);if(U!=null){for(;f>0;){const q=gt.findGuardPattern(s,p,--f,u,!1,y,C);if(q!=null)U=q;else{f++;break}}v[0]=new Xe(U[0],f),v[1]=new Xe(U[1],f),I=!0;break}}let O=f+1;if(I){let U=0,q=Int32Array.from([Math.trunc(v[0].getX()),Math.trunc(v[1].getX())]);for(;O<l;O++){const J=gt.findGuardPattern(s,q[0],O,u,!1,y,C);if(J!=null&&Math.abs(q[0]-J[0])<gt.MAX_PATTERN_DRIFT&&Math.abs(q[1]-J[1])<gt.MAX_PATTERN_DRIFT)q=J,U=0;else{if(U>gt.SKIPPED_ROW_COUNT_MAX)break;U++}}O-=U+1,v[2]=new Xe(q[0],O),v[3]=new Xe(q[1],O)}return O-f<gt.BARCODE_MIN_HEIGHT&&z.fill(v,null),v}static findGuardPattern(s,l,u,f,p,y,v){z.fillWithin(v,0,v.length,0);let I=l,C=0;for(;s.get(I,u)&&I>0&&C++<gt.MAX_PIXEL_DRIFT;)I--;let O=I,U=0,q=y.length;for(let J=p;O<f;O++)if(s.get(O,u)!==J)v[U]++;else{if(U===q-1){if(gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return new Int32Array([I,O]);I+=v[0]+v[1],D.arraycopy(v,2,v,0,U-1),v[U-1]=0,v[U]=0,U--}else U++;v[U]=1,J=!J}return U===q-1&&gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE?new Int32Array([I,O-1]):null}static patternMatchVariance(s,l,u){let f=s.length,p=0,y=0;for(let C=0;C<f;C++)p+=s[C],y+=l[C];if(p<y)return 1/0;let v=p/y;u*=v;let I=0;for(let C=0;C<f;C++){let O=s[C],U=l[C]*v,q=O>U?O-U:U-O;if(q>u)return 1/0;I+=q}return I/p}}gt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),gt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),gt.MAX_AVG_VARIANCE=.42,gt.MAX_INDIVIDUAL_VARIANCE=.8,gt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),gt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),gt.MAX_PIXEL_DRIFT=3,gt.MAX_PATTERN_DRIFT=5,gt.SKIPPED_ROW_COUNT_MAX=25,gt.ROW_STEP=5,gt.BARCODE_MIN_HEIGHT=10;class Tr{constructor(s,l){if(l.length===0)throw new E;this.field=s;let u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let p of this.coefficients)f=this.field.add(f,p);return f}let l=this.coefficients[0],u=this.coefficients.length;for(let f=1;f<u;f++)l=this.field.add(this.field.multiply(s,l),this.coefficients[f]);return l}add(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){let y=l;l=u,u=y}let f=new Int32Array(u.length),p=u.length-l.length;D.arraycopy(u,0,f,0,p);for(let y=p;y<u.length;y++)f[y]=this.field.add(l[y-p],u[y]);return new Tr(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Tr?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Tr(this.field,new Int32Array([0]));let l=this.coefficients,u=l.length,f=s.coefficients,p=f.length,y=new Int32Array(u+p-1);for(let v=0;v<u;v++){let I=l[v];for(let C=0;C<p;C++)y[v+C]=this.field.add(y[v+C],this.field.multiply(I,f[C]))}return new Tr(this.field,y)}negative(){let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.subtract(0,this.coefficients[u]);return new Tr(this.field,l)}multiplyScalar(s){if(s===0)return new Tr(this.field,new Int32Array([0]));if(s===1)return this;let l=this.coefficients.length,u=new Int32Array(l);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new Tr(this.field,u)}multiplyByMonomial(s,l){if(s<0)throw new E;if(l===0)return new Tr(this.field,new Int32Array([0]));let u=this.coefficients.length,f=new Int32Array(u+s);for(let p=0;p<u;p++)f[p]=this.field.multiply(this.coefficients[p],l);return new Tr(this.field,f)}toString(){let s=new K;for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);u!==0&&(u<0?(s.append(" - "),u=-u):s.length()>0&&s.append(" + "),(l===0||u!==1)&&s.append(u),l!==0&&(l===1?s.append("x"):(s.append("x^"),s.append(l))))}return s.toString()}}class pu{add(s,l){return(s+l)%this.modulus}subtract(s,l){return(this.modulus+s-l)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}inverse(s){if(s===0)throw new bt;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class ms extends pu{constructor(s,l){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let u=1;for(let f=0;f<s;f++)this.expTable[f]=u,u=u*l%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new Tr(this,new Int32Array([0])),this.one=new Tr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new E;if(l===0)return this.zero;let u=new Int32Array(s+1);return u[0]=l,new Tr(this,u)}}ms.PDF417_GF=new ms(xt.NUMBER_OF_CODEWORDS,3);class bo{constructor(){this.field=ms.PDF417_GF}decode(s,l,u){let f=new Tr(this.field,s),p=new Int32Array(l),y=!1;for(let le=l;le>0;le--){let ue=f.evaluateAt(this.field.exp(le));p[l-le]=ue,ue!==0&&(y=!0)}if(!y)return 0;let v=this.field.getOne();if(u!=null)for(const le of u){let ue=this.field.exp(s.length-1-le),fe=new Tr(this.field,new Int32Array([this.field.subtract(0,ue),1]));v=v.multiply(fe)}let I=new Tr(this.field,p),C=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),I,l),O=C[0],U=C[1],q=this.findErrorLocations(O),J=this.findErrorMagnitudes(U,O,q);for(let le=0;le<q.length;le++){let ue=s.length-1-this.field.log(q[le]);if(ue<0)throw R.getChecksumInstance();s[ue]=this.field.subtract(s[ue],J[le])}return q.length}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){let q=s;s=l,l=q}let f=s,p=l,y=this.field.getZero(),v=this.field.getOne();for(;p.getDegree()>=Math.round(u/2);){let q=f,J=y;if(f=p,y=v,f.isZero())throw R.getChecksumInstance();p=q;let le=this.field.getZero(),ue=f.getCoefficient(f.getDegree()),fe=this.field.inverse(ue);for(;p.getDegree()>=f.getDegree()&&!p.isZero();){let Ee=p.getDegree()-f.getDegree(),Fe=this.field.multiply(p.getCoefficient(p.getDegree()),fe);le=le.add(this.field.buildMonomial(Ee,Fe)),p=p.subtract(f.multiplyByMonomial(Ee,Fe))}v=le.multiply(y).subtract(J).negative()}let I=v.getCoefficient(0);if(I===0)throw R.getChecksumInstance();let C=this.field.inverse(I),O=v.multiply(C),U=p.multiply(C);return[O,U]}findErrorLocations(s){let l=s.getDegree(),u=new Int32Array(l),f=0;for(let p=1;p<this.field.getSize()&&f<l;p++)s.evaluateAt(p)===0&&(u[f]=this.field.inverse(p),f++);if(f!==l)throw R.getChecksumInstance();return u}findErrorMagnitudes(s,l,u){let f=l.getDegree(),p=new Int32Array(f);for(let C=1;C<=f;C++)p[f-C]=this.field.multiply(C,l.getCoefficient(C));let y=new Tr(this.field,p),v=u.length,I=new Int32Array(v);for(let C=0;C<v;C++){let O=this.field.inverse(u[C]),U=this.field.subtract(0,s.evaluateAt(O)),q=this.field.inverse(y.evaluateAt(O));I[C]=this.field.multiply(U,q)}return I}}class Ls{constructor(s,l,u,f,p){s instanceof Ls?this.constructor_2(s):this.constructor_1(s,l,u,f,p)}constructor_1(s,l,u,f,p){const y=l==null||u==null,v=f==null||p==null;if(y&&v)throw new se;y?(l=new Xe(0,f.getY()),u=new Xe(0,p.getY())):v&&(f=new Xe(s.getWidth()-1,l.getY()),p=new Xe(s.getWidth()-1,u.getY())),this.image=s,this.topLeft=l,this.bottomLeft=u,this.topRight=f,this.bottomRight=p,this.minX=Math.trunc(Math.min(l.getX(),u.getX())),this.maxX=Math.trunc(Math.max(f.getX(),p.getX())),this.minY=Math.trunc(Math.min(l.getY(),f.getY())),this.maxY=Math.trunc(Math.max(u.getY(),p.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,l){return s==null?l:l==null?s:new Ls(s.image,s.topLeft,s.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(s,l,u){let f=this.topLeft,p=this.bottomLeft,y=this.topRight,v=this.bottomRight;if(s>0){let I=u?this.topLeft:this.topRight,C=Math.trunc(I.getY()-s);C<0&&(C=0);let O=new Xe(I.getX(),C);u?f=O:y=O}if(l>0){let I=u?this.bottomLeft:this.bottomRight,C=Math.trunc(I.getY()+l);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let O=new Xe(I.getX(),C);u?p=O:v=O}return new Ls(this.image,f,p,y,v)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gs{constructor(s,l,u,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=l,this.rowCountLowerPart=u,this.rowCount=l+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ci{constructor(){this.buffer=""}static form(s,l){let u=-1;function f(y,v,I,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let q=O?parseInt(O.substr(1)):void 0,J;switch(U){case"s":J=l[u];break;case"c":J=l[u][0];break;case"f":J=parseFloat(l[u]).toFixed(y);break;case"p":J=parseFloat(l[u]).toPrecision(y);break;case"e":J=parseFloat(l[u]).toExponential(y);break;case"x":J=parseInt(l[u]).toString(q||16);break;case"d":J=parseFloat(parseInt(l[u],q||10).toPrecision(y)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(q);let le=parseInt(I),ue=I&&I[0]+""=="0"?"0":" ";for(;J.length<le;)J=v!==void 0?J+ue:ue+J;return J}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(p,f)}format(s,...l){this.buffer+=ci.form(s,l)}toString(){return this.buffer}}class zi{constructor(s){this.boundingBox=new Ls(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let l=this.getCodeword(s);if(l!=null)return l;for(let u=1;u<zi.MAX_NEARBY_DISTANCE;u++){let f=this.imageRowToCodewordIndex(s)-u;if(f>=0&&(l=this.codewords[f],l!=null)||(f=this.imageRowToCodewordIndex(s)+u,f<this.codewords.length&&(l=this.codewords[f],l!=null)))return l}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,l){this.codewords[this.imageRowToCodewordIndex(s)]=l}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new ci;let l=0;for(const u of this.codewords){if(u==null){s.format("%3d:    |   %n",l++);continue}s.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return s.toString()}}zi.MAX_NEARBY_DISTANCE=5;class Ji{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let l=this.values.get(s);l==null&&(l=0),l++,this.values.set(s,l)}getValue(){let s=-1,l=new Array;for(const[u,f]of this.values.entries()){const p={getKey:()=>u,getValue:()=>f};p.getValue()>s?(s=p.getValue(),l=[],l.push(p.getKey())):p.getValue()===s&&l.push(p.getKey())}return xt.toIntArray(l)}getConfidence(s){return this.values.get(s)}}class kn extends zi{constructor(s,l){super(s),this._isLeft=l}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,s);let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),p=this._isLeft?u.getBottomLeft():u.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.imageRowToCodewordIndex(Math.trunc(p.getY())),I=-1,C=1,O=0;for(let U=y;U<v;U++){if(l[U]==null)continue;let q=l[U],J=q.getRowNumber()-I;if(J===0)O++;else if(J===1)C=Math.max(C,O),O=1,I=q.getRowNumber();else if(J<0||q.getRowNumber()>=s.getRowCount()||J>U)l[U]=null;else{let le;C>2?le=(C-2)*J:le=J;let ue=le>=U;for(let fe=1;fe<=le&&!ue;fe++)ue=l[U-fe]!=null;ue?l[U]=null:(I=q.getRowNumber(),O=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let l=new Int32Array(s.getRowCount());for(let u of this.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=l.length)continue;l[f]++}return l}adjustIncompleteIndicatorColumnRowNumbers(s){let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.getCodewords(),I=-1;for(let C=p;C<y;C++){if(v[C]==null)continue;let O=v[C];O.setRowNumberAsRowIndicatorColumn();let U=O.getRowNumber()-I;U===0||(U===1?I=O.getRowNumber():O.getRowNumber()>=s.getRowCount()?v[C]=null:I=O.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),l=new Ji,u=new Ji,f=new Ji,p=new Ji;for(let v of s){if(v==null)continue;v.setRowNumberAsRowIndicatorColumn();let I=v.getValue()%30,C=v.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:u.setValue(I*3+1);break;case 1:p.setValue(I/3),f.setValue(I%3);break;case 2:l.setValue(I+1);break}}if(l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||p.getValue().length===0||l.getValue()[0]<1||u.getValue()[0]+f.getValue()[0]<xt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+f.getValue()[0]>xt.MAX_ROWS_IN_BARCODE)return null;let y=new gs(l.getValue()[0],u.getValue()[0],f.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(s,y),y}removeIncorrectCodewords(s,l){for(let u=0;u<s.length;u++){let f=s[u];if(s[u]==null)continue;let p=f.getValue()%30,y=f.getRowNumber();if(y>l.getRowCount()){s[u]=null;continue}switch(this._isLeft||(y+=2),y%3){case 0:p*3+1!==l.getRowCountUpperPart()&&(s[u]=null);break;case 1:(Math.trunc(p/3)!==l.getErrorCorrectionLevel()||p%3!==l.getRowCountLowerPart())&&(s[u]=null);break;case 2:p+1!==l.getColumnCount()&&(s[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class sa{constructor(s,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=xt.MAX_CODEWORDS_IN_BARCODE,l;do l=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let u=this.detectionResultColumns[l].getCodewords();for(let f=0;f<u.length;f++)u[f]!=null&&(u[f].hasValidRowNumber()||this.adjustRowNumbers(l,f,u))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<s.length;u++)if(s[u]!=null&&l[u]!=null&&s[u].getRowNumber()===l[u].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let p=this.detectionResultColumns[f].getCodewords()[u];p!=null&&(p.setRowNumber(s[u].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),p=0;for(let y=this.barcodeColumnCount+1;y>0&&p<this.ADJUST_ROW_NUMBER_SKIP;y--){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(p=sa.adjustRowNumberIfValid(f,p,v),v.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,l=this.detectionResultColumns[0].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),p=0;for(let y=1;y<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;y++){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(p=sa.adjustRowNumberIfValid(f,p,v),v.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,l,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(s)?(u.setRowNumber(s),l=0):++l),l}adjustRowNumbers(s,l,u){if(!this.detectionResultColumns[s-1])return;let f=u[l],p=this.detectionResultColumns[s-1].getCodewords(),y=p;this.detectionResultColumns[s+1]!=null&&(y=this.detectionResultColumns[s+1].getCodewords());let v=new Array(14);v[2]=p[l],v[3]=y[l],l>0&&(v[0]=u[l-1],v[4]=p[l-1],v[5]=y[l-1]),l>1&&(v[8]=u[l-2],v[10]=p[l-2],v[11]=y[l-2]),l<u.length-1&&(v[1]=u[l+1],v[6]=p[l+1],v[7]=y[l+1]),l<u.length-2&&(v[9]=u[l+2],v[12]=p[l+2],v[13]=y[l+2]);for(let I of v)if(sa.adjustRowNumber(f,I))return}static adjustRowNumber(s,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===s.getBucket()?(s.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,l){this.detectionResultColumns[s]=l}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new ci;for(let u=0;u<s.getCodewords().length;u++){l.format("CW %3d:",u);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){l.format("    |   ");continue}let p=this.detectionResultColumns[f].getCodewords()[u];if(p==null){l.format("    |   ");continue}l.format(" %3d|%3d",p.getRowNumber(),p.getValue())}l.format("%n")}return l.toString()}}class Js{constructor(s,l,u,f){this.rowNumber=Js.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Js.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Js.BARCODE_ROW_UNKNOWN=-1;class fr{static initialize(){for(let s=0;s<xt.SYMBOL_TABLE.length;s++){let l=xt.SYMBOL_TABLE[s],u=l&1;for(let f=0;f<xt.BARS_IN_MODULE;f++){let p=0;for(;(l&1)===u;)p+=1,l>>=1;u=l&1,fr.RATIOS_TABLE[s]||(fr.RATIOS_TABLE[s]=new Array(xt.BARS_IN_MODULE)),fr.RATIOS_TABLE[s][xt.BARS_IN_MODULE-f-1]=Math.fround(p/xt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let l=fr.getDecodedCodewordValue(fr.sampleBitCounts(s));return l!==-1?l:fr.getClosestDecodedValue(s)}static sampleBitCounts(s){let l=pt.sum(s),u=new Int32Array(xt.BARS_IN_MODULE),f=0,p=0;for(let y=0;y<xt.MODULES_IN_CODEWORD;y++){let v=l/(2*xt.MODULES_IN_CODEWORD)+y*l/xt.MODULES_IN_CODEWORD;p+s[f]<=v&&(p+=s[f],f++),u[f]++}return u}static getDecodedCodewordValue(s){let l=fr.getBitValue(s);return xt.getCodeword(l)===-1?-1:l}static getBitValue(s){let l=0;for(let u=0;u<s.length;u++)for(let f=0;f<s[u];f++)l=l<<1|(u%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(s){let l=pt.sum(s),u=new Array(xt.BARS_IN_MODULE);if(l>1)for(let y=0;y<u.length;y++)u[y]=Math.fround(s[y]/l);let f=xi.MAX_VALUE,p=-1;this.bSymbolTableReady||fr.initialize();for(let y=0;y<fr.RATIOS_TABLE.length;y++){let v=0,I=fr.RATIOS_TABLE[y];for(let C=0;C<xt.BARS_IN_MODULE;C++){let O=Math.fround(I[C]-u[C]);if(v+=Math.fround(O*O),v>=f)break}v<f&&(f=v,p=xt.SYMBOL_TABLE[y])}return p}}fr.bSymbolTableReady=!1,fr.RATIOS_TABLE=new Array(xt.SYMBOL_TABLE.length).map(j=>new Array(xt.BARS_IN_MODULE));class oa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Ka{static parseLong(s,l=void 0){return parseInt(s,l)}}class Ii extends g{}Ii.kind="NullPointerException";class Xa{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,l,u){if(s==null)throw new Ii;if(l<0||l>s.length||u<0||l+u>s.length||l+u<0)throw new L;if(u===0)return;for(let f=0;f<u;f++)this.write(s[l+f])}flush(){}close(){}}class Ai extends g{}class nc extends Xa{constructor(s=32){if(super(),this.count=0,s<0)throw new E("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let u=this.buf.length<<1;if(u-s<0&&(u=s),u<0){if(s<0)throw new Ai;u=W.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,u)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,l,u){if(l<0||l>s.length||u<0||l+u-s.length>0)throw new L;this.ensureCapacity(this.count+u),D.arraycopy(s,l,this.buf,this.count,u),this.count+=u}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var en;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(en||(en={}));function ys(){if(typeof window<"u")return window.BigInt||null;if(typeof t0<"u")return t0.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Io;function Dn(j){if(typeof Io>"u"&&(Io=ys()),Io===null)throw new Error("BigInt is not supported!");return Io(j)}function xs(){let j=[];j[0]=Dn(1);let s=Dn(900);j[1]=s;for(let l=2;l<16;l++)j[l]=j[l-1]*s;return j}class _e{static decode(s,l){let u=new K(""),f=H.ISO8859_1;u.enableDecoding(f);let p=1,y=s[p++],v=new oa;for(;p<s[0];){switch(y){case _e.TEXT_COMPACTION_MODE_LATCH:p=_e.textCompaction(s,p,u);break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:p=_e.byteCompaction(y,s,f,p,u);break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[p++]);break;case _e.NUMERIC_COMPACTION_MODE_LATCH:p=_e.numericCompaction(s,p,u);break;case _e.ECI_CHARSET:H.getCharacterSetECIByValue(s[p++]);break;case _e.ECI_GENERAL_PURPOSE:p+=2;break;case _e.ECI_USER_DEFINED:p++;break;case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=_e.decodeMacroBlock(s,p,v);break;case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:throw new F;default:p--,p=_e.textCompaction(s,p,u);break}if(p<s.length)y=s[p++];else throw F.getFormatInstance()}if(u.length()===0)throw F.getFormatInstance();let I=new at(null,u.toString(),null,l);return I.setOther(v),I}static decodeMacroBlock(s,l,u){if(l+_e.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw F.getFormatInstance();let f=new Int32Array(_e.NUMBER_OF_SEQUENCE_CODEWORDS);for(let v=0;v<_e.NUMBER_OF_SEQUENCE_CODEWORDS;v++,l++)f[v]=s[l];u.setSegmentIndex(W.parseInt(_e.decodeBase900toBase10(f,_e.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new K;l=_e.textCompaction(s,l,p),u.setFileId(p.toString());let y=-1;for(s[l]===_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(y=l+1);l<s[0];)switch(s[l]){case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,s[l]){case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let v=new K;l=_e.textCompaction(s,l+1,v),u.setFileName(v.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let I=new K;l=_e.textCompaction(s,l+1,I),u.setSender(I.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new K;l=_e.textCompaction(s,l+1,C),u.setAddressee(C.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new K;l=_e.numericCompaction(s,l+1,O),u.setSegmentCount(W.parseInt(O.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let U=new K;l=_e.numericCompaction(s,l+1,U),u.setTimestamp(Ka.parseLong(U.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let q=new K;l=_e.numericCompaction(s,l+1,q),u.setChecksum(W.parseInt(q.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let J=new K;l=_e.numericCompaction(s,l+1,J),u.setFileSize(Ka.parseLong(J.toString()));break;default:throw F.getFormatInstance()}break;case _e.MACRO_PDF417_TERMINATOR:l++,u.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(y!==-1){let v=l-y;u.isLastSegment()&&v--,u.setOptionalData(z.copyOfRange(s,y,y+v))}return l}static textCompaction(s,l,u){let f=new Int32Array((s[0]-l)*2),p=new Int32Array((s[0]-l)*2),y=0,v=!1;for(;l<s[0]&&!v;){let I=s[l++];if(I<_e.TEXT_COMPACTION_MODE_LATCH)f[y]=I/30,f[y+1]=I%30,y+=2;else switch(I){case _e.TEXT_COMPACTION_MODE_LATCH:f[y++]=_e.TEXT_COMPACTION_MODE_LATCH;break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,v=!0;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[y]=_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,I=s[l++],p[y]=I,y++;break}}return _e.decodeTextCompaction(f,p,y,u),l}static decodeTextCompaction(s,l,u,f){let p=en.ALPHA,y=en.ALPHA,v=0;for(;v<u;){let I=s[v],C="";switch(p){case en.ALPHA:if(I<26)C=String.fromCharCode(65+I);else switch(I){case 26:C=" ";break;case _e.LL:p=en.LOWER;break;case _e.ML:p=en.MIXED;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.LOWER:if(I<26)C=String.fromCharCode(97+I);else switch(I){case 26:C=" ";break;case _e.AS:y=p,p=en.ALPHA_SHIFT;break;case _e.ML:p=en.MIXED;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.MIXED:if(I<_e.PL)C=_e.MIXED_CHARS[I];else switch(I){case _e.PL:p=en.PUNCT;break;case 26:C=" ";break;case _e.LL:p=en.LOWER;break;case _e.AL:p=en.ALPHA;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.PUNCT:if(I<_e.PAL)C=_e.PUNCT_CHARS[I];else switch(I){case _e.PAL:p=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.ALPHA_SHIFT:if(p=y,I<26)C=String.fromCharCode(65+I);else switch(I){case 26:C=" ";break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.PUNCT_SHIFT:if(p=y,I<_e.PAL)C=_e.PUNCT_CHARS[I];else switch(I){case _e.PAL:p=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break}C!==""&&f.append(C),v++}}static byteCompaction(s,l,u,f,p){let y=new nc,v=0,I=0,C=!1;switch(s){case _e.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),U=l[f++];for(;f<l[0]&&!C;)switch(O[v++]=U,I=900*I+U,U=l[f++],U){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break;default:if(v%5===0&&v>0){for(let q=0;q<6;++q)y.write(Number(Dn(I)>>Dn(8*(5-q))));I=0,v=0}break}f===l[0]&&U<_e.TEXT_COMPACTION_MODE_LATCH&&(O[v++]=U);for(let q=0;q<v;q++)y.write(O[q]);break;case _e.BYTE_COMPACTION_MODE_LATCH_6:for(;f<l[0]&&!C;){let q=l[f++];if(q<_e.TEXT_COMPACTION_MODE_LATCH)v++,I=900*I+q;else switch(q){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break}if(v%5===0&&v>0){for(let J=0;J<6;++J)y.write(Number(Dn(I)>>Dn(8*(5-J))));I=0,v=0}}break}return p.append(ne.decode(y.toByteArray(),u)),f}static numericCompaction(s,l,u){let f=0,p=!1,y=new Int32Array(_e.MAX_NUMERIC_CODEWORDS);for(;l<s[0]&&!p;){let v=s[l++];if(l===s[0]&&(p=!0),v<_e.TEXT_COMPACTION_MODE_LATCH)y[f]=v,f++;else switch(v){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,p=!0;break}(f%_e.MAX_NUMERIC_CODEWORDS===0||v===_e.NUMERIC_COMPACTION_MODE_LATCH||p)&&f>0&&(u.append(_e.decodeBase900toBase10(y,f)),f=0)}return l}static decodeBase900toBase10(s,l){let u=Dn(0);for(let p=0;p<l;p++)u+=_e.EXP900[l-p-1]*Dn(s[p]);let f=u.toString();if(f.charAt(0)!=="1")throw new F;return f.substring(1)}}_e.TEXT_COMPACTION_MODE_LATCH=900,_e.BYTE_COMPACTION_MODE_LATCH=901,_e.NUMERIC_COMPACTION_MODE_LATCH=902,_e.BYTE_COMPACTION_MODE_LATCH_6=924,_e.ECI_USER_DEFINED=925,_e.ECI_GENERAL_PURPOSE=926,_e.ECI_CHARSET=927,_e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,_e.MACRO_PDF417_TERMINATOR=922,_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,_e.MAX_NUMERIC_CODEWORDS=15,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,_e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,_e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,_e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,_e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,_e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,_e.PL=25,_e.LL=27,_e.AS=27,_e.ML=28,_e.AL=28,_e.PS=29,_e.PAL=29,_e.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,_e.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",_e.EXP900=ys()?xs():[],_e.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(s,l,u,f,p,y,v){let I=new Ls(s,l,u,f,p),C=null,O=null,U;for(let le=!0;;le=!1){if(l!=null&&(C=_t.getRowIndicatorColumn(s,I,l,!0,y,v)),f!=null&&(O=_t.getRowIndicatorColumn(s,I,f,!1,y,v)),U=_t.merge(C,O),U==null)throw se.getNotFoundInstance();let ue=U.getBoundingBox();if(le&&ue!=null&&(ue.getMinY()<I.getMinY()||ue.getMaxY()>I.getMaxY()))I=ue;else break}U.setBoundingBox(I);let q=U.getBarcodeColumnCount()+1;U.setDetectionResultColumn(0,C),U.setDetectionResultColumn(q,O);let J=C!=null;for(let le=1;le<=q;le++){let ue=J?le:q-le;if(U.getDetectionResultColumn(ue)!==void 0)continue;let fe;ue===0||ue===q?fe=new kn(I,ue===0):fe=new zi(I),U.setDetectionResultColumn(ue,fe);let Ee=-1,Fe=Ee;for(let je=I.getMinY();je<=I.getMaxY();je++){if(Ee=_t.getStartColumn(U,ue,je,J),Ee<0||Ee>I.getMaxX()){if(Fe===-1)continue;Ee=Fe}let Oe=_t.detectCodeword(s,I.getMinX(),I.getMaxX(),J,Ee,je,y,v);Oe!=null&&(fe.setCodeword(je,Oe),Fe=Ee,y=Math.min(y,Oe.getWidth()),v=Math.max(v,Oe.getWidth()))}}return _t.createDecoderResult(U)}static merge(s,l){if(s==null&&l==null)return null;let u=_t.getBarcodeMetadata(s,l);if(u==null)return null;let f=Ls.merge(_t.adjustBoundingBox(s),_t.adjustBoundingBox(l));return new sa(u,f)}static adjustBoundingBox(s){if(s==null)return null;let l=s.getRowHeights();if(l==null)return null;let u=_t.getMax(l),f=0;for(let v of l)if(f+=u-v,v>0)break;let p=s.getCodewords();for(let v=0;f>0&&p[v]==null;v++)f--;let y=0;for(let v=l.length-1;v>=0&&(y+=u-l[v],!(l[v]>0));v--);for(let v=p.length-1;y>0&&p[v]==null;v--)y--;return s.getBoundingBox().addMissingRows(f,y,s.isLeft())}static getMax(s){let l=-1;for(let u of s)l=Math.max(l,u);return l}static getBarcodeMetadata(s,l){let u;if(s==null||(u=s.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let f;return l==null||(f=l.getBarcodeMetadata())==null?u:u.getColumnCount()!==f.getColumnCount()&&u.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&u.getRowCount()!==f.getRowCount()?null:u}static getRowIndicatorColumn(s,l,u,f,p,y){let v=new kn(l,f);for(let I=0;I<2;I++){let C=I===0?1:-1,O=Math.trunc(Math.trunc(u.getX()));for(let U=Math.trunc(Math.trunc(u.getY()));U<=l.getMaxY()&&U>=l.getMinY();U+=C){let q=_t.detectCodeword(s,0,s.getWidth(),f,O,U,p,y);q!=null&&(v.setCodeword(U,q),f?O=q.getStartX():O=q.getEndX())}}return v}static adjustCodewordCount(s,l){let u=l[0][1],f=u.getValue(),p=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-_t.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(p<1||p>xt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();u.setValue(p)}else f[0]!==p&&u.setValue(p)}static createDecoderResult(s){let l=_t.createBarcodeMatrix(s);_t.adjustCodewordCount(s,l);let u=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),p=[],y=new Array;for(let I=0;I<s.getBarcodeRowCount();I++)for(let C=0;C<s.getBarcodeColumnCount();C++){let O=l[I][C+1].getValue(),U=I*s.getBarcodeColumnCount()+C;O.length===0?u.push(U):O.length===1?f[U]=O[0]:(y.push(U),p.push(O))}let v=new Array(p.length);for(let I=0;I<v.length;I++)v[I]=p[I];return _t.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,xt.toIntArray(u),xt.toIntArray(y),v)}static createDecoderResultFromAmbiguousValues(s,l,u,f,p){let y=new Int32Array(f.length),v=100;for(;v-- >0;){for(let I=0;I<y.length;I++)l[f[I]]=p[I][y[I]];try{return _t.decodeCodewords(l,s,u)}catch(I){if(!(I instanceof R))throw I}if(y.length===0)throw R.getChecksumInstance();for(let I=0;I<y.length;I++)if(y[I]<p[I].length-1){y[I]++;break}else if(y[I]=0,I===y.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(s){let l=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<l.length;f++)for(let p=0;p<l[f].length;p++)l[f][p]=new Ji;let u=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let p of f.getCodewords())if(p!=null){let y=p.getRowNumber();if(y>=0){if(y>=l.length)continue;l[y][u].setValue(p.getValue())}}}u++}return l}static isValidBarcodeColumn(s,l){return l>=0&&l<=s.getBarcodeColumnCount()+1}static getStartColumn(s,l,u,f){let p=f?1:-1,y=null;if(_t.isValidBarcodeColumn(s,l-p)&&(y=s.getDetectionResultColumn(l-p).getCodeword(u)),y!=null)return f?y.getEndX():y.getStartX();if(y=s.getDetectionResultColumn(l).getCodewordNearby(u),y!=null)return f?y.getStartX():y.getEndX();if(_t.isValidBarcodeColumn(s,l-p)&&(y=s.getDetectionResultColumn(l-p).getCodewordNearby(u)),y!=null)return f?y.getEndX():y.getStartX();let v=0;for(;_t.isValidBarcodeColumn(s,l-p);){l-=p;for(let I of s.getDetectionResultColumn(l).getCodewords())if(I!=null)return(f?I.getEndX():I.getStartX())+p*v*(I.getEndX()-I.getStartX());v++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,l,u,f,p,y,v,I){p=_t.adjustCodewordStartColumn(s,l,u,f,p,y);let C=_t.getModuleBitCount(s,l,u,f,p,y);if(C==null)return null;let O,U=pt.sum(C);if(f)O=p+U;else{for(let le=0;le<C.length/2;le++){let ue=C[le];C[le]=C[C.length-1-le],C[C.length-1-le]=ue}O=p,p=O-U}if(!_t.checkCodewordSkew(U,v,I))return null;let q=fr.getDecodedValue(C),J=xt.getCodeword(q);return J===-1?null:new Js(p,O,_t.getCodewordBucketNumber(q),J)}static getModuleBitCount(s,l,u,f,p,y){let v=p,I=new Int32Array(8),C=0,O=f?1:-1,U=f;for(;(f?v<u:v>=l)&&C<I.length;)s.get(v,y)===U?(I[C]++,v+=O):(C++,U=!U);return C===I.length||v===(f?u:l)&&C===I.length-1?I:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,l,u,f,p,y){let v=p,I=f?-1:1;for(let C=0;C<2;C++){for(;(f?v>=l:v<u)&&f===s.get(v,y);){if(Math.abs(p-v)>_t.CODEWORD_SKEW_SIZE)return p;v+=I}I=-I,f=!f}return v}static checkCodewordSkew(s,l,u){return l-_t.CODEWORD_SKEW_SIZE<=s&&s<=u+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(s,l,u){if(s.length===0)throw F.getFormatInstance();let f=1<<l+1,p=_t.correctErrors(s,u,f);_t.verifyCodewordCount(s,f);let y=_e.decode(s,""+l);return y.setErrorsCorrected(p),y.setErasures(u.length),y}static correctErrors(s,l,u){if(l!=null&&l.length>u/2+_t.MAX_ERRORS||u<0||u>_t.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return _t.errorCorrection.decode(s,u,l)}static verifyCodewordCount(s,l){if(s.length<4)throw F.getFormatInstance();let u=s[0];if(u>s.length)throw F.getFormatInstance();if(u===0)if(l<s.length)s[0]=s.length-l;else throw F.getFormatInstance()}static getBitCountForCodeword(s){let l=new Int32Array(8),u=0,f=l.length-1;for(;!((s&1)!==u&&(u=s&1,f--,f<0));)l[f]++,s>>=1;return l}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let l=new ci;for(let u=0;u<s.length;u++){l.format("Row %2d: ",u);for(let f=0;f<s[u].length;f++){let p=s[u][f];p.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}l.format("%n")}return l.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new bo;class Cr{decode(s,l=null){let u=Cr.decode(s,l,!1);if(u==null||u.length===0||u[0]==null)throw se.getNotFoundInstance();return u[0]}decodeMultiple(s,l=null){try{return Cr.decode(s,l,!0)}catch(u){throw u instanceof F||u instanceof R?se.getNotFoundInstance():u}}static decode(s,l,u){const f=new Array,p=gt.detectMultiple(s,l,u);for(const y of p.getPoints()){const v=_t.decode(p.getBits(),y[4],y[5],y[6],y[7],Cr.getMinCodewordWidth(y),Cr.getMaxCodewordWidth(y)),I=new Le(v.getText(),v.getRawBytes(),void 0,y,Re.PDF_417);I.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v.getECLevel());const C=v.getOther();C!=null&&I.putMetadata(Ge.PDF417_EXTRA_METADATA,C),f.push(I)}return f.map(y=>y)}static getMaxWidth(s,l){return s==null||l==null?0:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMinWidth(s,l){return s==null||l==null?W.MAX_VALUE:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Cr.getMaxWidth(s[0],s[4]),Cr.getMaxWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.max(Cr.getMaxWidth(s[1],s[5]),Cr.getMaxWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Cr.getMinWidth(s[0],s[4]),Cr.getMinWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.min(Cr.getMinWidth(s[1],s[5]),Cr.getMinWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}reset(){}}class eo extends g{}eo.kind="ReaderException";class Vs{constructor(s,l){this.verbose=s===!0,l&&this.setHints(l)}decode(s,l){return l&&this.setHints(l),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const l=!r(s)&&s.get(ie.TRY_HARDER)===!0,u=r(s)?null:s.get(ie.POSSIBLE_FORMATS),f=new Array;if(!r(u)){const p=u.some(y=>y===Re.UPC_A||y===Re.UPC_E||y===Re.EAN_13||y===Re.EAN_8||y===Re.CODABAR||y===Re.CODE_39||y===Re.CODE_93||y===Re.CODE_128||y===Re.ITF||y===Re.RSS_14||y===Re.RSS_EXPANDED);p&&!l&&f.push(new Ms(s,this.verbose)),u.includes(Re.QR_CODE)&&f.push(new Hr),u.includes(Re.DATA_MATRIX)&&f.push(new Ei),u.includes(Re.AZTEC)&&f.push(new Fi),u.includes(Re.PDF_417)&&f.push(new Cr),p&&l&&f.push(new Ms(s,this.verbose))}f.length===0&&(l||f.push(new Ms(s,this.verbose)),f.push(new Hr),f.push(new Ei),f.push(new Fi),f.push(new Cr),l&&f.push(new Ms(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new eo("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(s,this.hints)}catch(u){if(u instanceof eo)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class Ao extends Se{constructor(s=null,l=500){const u=new Vs;u.setHints(s),super(u,l)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class aa extends Se{constructor(s=500){super(new Cr,s)}}class Ya extends Se{constructor(s=500){super(new Hr,s)}}var la;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(la||(la={}));var Zn=la;class To{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new ct(s,Int32Array.from([1])))}buildGenerator(s){const l=this.cachedGenerators;if(s>=l.length){let u=l[l.length-1];const f=this.field;for(let p=l.length;p<=s;p++){const y=u.multiply(new ct(f,Int32Array.from([1,f.exp(p-1+f.getGeneratorBase())])));l.push(y),u=y}}return l[s]}encode(s,l){if(l===0)throw new E("No error correction bytes");const u=s.length-l;if(u<=0)throw new E("No data bytes provided");const f=this.buildGenerator(l),p=new Int32Array(u);D.arraycopy(s,0,p,0,u);let y=new ct(this.field,p);y=y.multiplyByMonomial(l,1);const I=y.divide(f)[1].getCoefficients(),C=l-I.length;for(let O=0;O<C;O++)s[u+O]=0;D.arraycopy(I,0,s,u+C,I.length)}}class xn{constructor(){}static applyMaskPenaltyRule1(s){return xn.applyMaskPenaltyRule1Internal(s,!0)+xn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let y=0;y<p-1;y++){const v=u[y];for(let I=0;I<f-1;I++){const C=v[I];C===v[I+1]&&C===u[y+1][I]&&C===u[y+1][I+1]&&l++}}return xn.N2*l}static applyMaskPenaltyRule3(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let y=0;y<p;y++)for(let v=0;v<f;v++){const I=u[y];v+6<f&&I[v]===1&&I[v+1]===0&&I[v+2]===1&&I[v+3]===1&&I[v+4]===1&&I[v+5]===0&&I[v+6]===1&&(xn.isWhiteHorizontal(I,v-4,v)||xn.isWhiteHorizontal(I,v+7,v+11))&&l++,y+6<p&&u[y][v]===1&&u[y+1][v]===0&&u[y+2][v]===1&&u[y+3][v]===1&&u[y+4][v]===1&&u[y+5][v]===0&&u[y+6][v]===1&&(xn.isWhiteVertical(u,v,y-4,y)||xn.isWhiteVertical(u,v,y+7,y+11))&&l++}return l*xn.N3}static isWhiteHorizontal(s,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let f=l;f<u;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,l,u,f){u=Math.max(u,0),f=Math.min(f,s.length);for(let p=u;p<f;p++)if(s[p][l]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let I=0;I<p;I++){const C=u[I];for(let O=0;O<f;O++)C[O]===1&&l++}const y=s.getHeight()*s.getWidth();return Math.floor(Math.abs(l*2-y)*10/y)*xn.N4}static getDataMaskBit(s,l,u){let f,p;switch(s){case 0:f=u+l&1;break;case 1:f=u&1;break;case 2:f=l%3;break;case 3:f=(u+l)%3;break;case 4:f=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:p=u*l,f=(p&1)+p%3;break;case 6:p=u*l,f=(p&1)+p%3&1;break;case 7:p=u*l,f=p%3+(u+l&1)&1;break;default:throw new E("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,l){let u=0;const f=l?s.getHeight():s.getWidth(),p=l?s.getWidth():s.getHeight(),y=s.getArray();for(let v=0;v<f;v++){let I=0,C=-1;for(let O=0;O<p;O++){const U=l?y[v][O]:y[O][v];U===C?I++:(I>=5&&(u+=xn.N1+(I-5)),I=1,C=U)}I>=5&&(u+=xn.N1+(I-5))}return u}}xn.N1=3,xn.N2=3,xn.N3=40,xn.N4=10;class ca{constructor(s,l){this.width=s,this.height=l;const u=new Array(l);for(let f=0;f!==l;f++)u[f]=new Uint8Array(s);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(s,l){return this.bytes[l][s]}getArray(){return this.bytes}setNumber(s,l,u){this.bytes[l][s]=u}setBoolean(s,l,u){this.bytes[l][s]=u?1:0}clear(s){for(const l of this.bytes)z.fill(l,s)}equals(s){if(!(s instanceof ca))return!1;const l=s;if(this.width!==l.width||this.height!==l.height)return!1;for(let u=0,f=this.height;u<f;++u){const p=this.bytes[u],y=l.bytes[u];for(let v=0,I=this.width;v<I;++v)if(p[v]!==y[v])return!1}return!0}toString(){const s=new K;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l];for(let p=0,y=this.width;p<y;++p)switch(f[p]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class ui{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new K;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<ui.NUM_MASK_PATTERNS}}ui.NUM_MASK_PATTERNS=8;class sn extends g{}sn.kind="WriterException";class ft{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,l,u,f,p){ft.clearMatrix(p),ft.embedBasicPatterns(u,p),ft.embedTypeInfo(l,f,p),ft.maybeEmbedVersionInfo(u,p),ft.embedDataBits(s,f,p)}static embedBasicPatterns(s,l){ft.embedPositionDetectionPatternsAndSeparators(l),ft.embedDarkDotAtLeftBottomCorner(l),ft.maybeEmbedPositionAdjustmentPatterns(s,l),ft.embedTimingPatterns(l)}static embedTypeInfo(s,l,u){const f=new Y;ft.makeTypeInfoBits(s,l,f);for(let p=0,y=f.getSize();p<y;++p){const v=f.get(f.getSize()-1-p),I=ft.TYPE_INFO_COORDINATES[p],C=I[0],O=I[1];if(u.setBoolean(C,O,v),p<8){const U=u.getWidth()-p-1;u.setBoolean(U,8,v)}else{const q=u.getHeight()-7+(p-8);u.setBoolean(8,q,v)}}}static maybeEmbedVersionInfo(s,l){if(s.getVersionNumber()<7)return;const u=new Y;ft.makeVersionInfoBits(s,u);let f=17;for(let p=0;p<6;++p)for(let y=0;y<3;++y){const v=u.get(f);f--,l.setBoolean(p,l.getHeight()-11+y,v),l.setBoolean(l.getHeight()-11+y,p,v)}}static embedDataBits(s,l,u){let f=0,p=-1,y=u.getWidth()-1,v=u.getHeight()-1;for(;y>0;){for(y===6&&(y-=1);v>=0&&v<u.getHeight();){for(let I=0;I<2;++I){const C=y-I;if(!ft.isEmpty(u.get(C,v)))continue;let O;f<s.getSize()?(O=s.get(f),++f):O=!1,l!==255&&xn.getDataMaskBit(l,C,v)&&(O=!O),u.setBoolean(C,v,O)}v+=p}p=-p,v+=p,y-=2}if(f!==s.getSize())throw new sn("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-W.numberOfLeadingZeros(s)}static calculateBCHCode(s,l){if(l===0)throw new E("0 polynomial");const u=ft.findMSBSet(l);for(s<<=u-1;ft.findMSBSet(s)>=u;)s^=l<<ft.findMSBSet(s)-u;return s}static makeTypeInfoBits(s,l,u){if(!ui.isValidMaskPattern(l))throw new sn("Invalid mask pattern");const f=s.getBits()<<3|l;u.appendBits(f,5);const p=ft.calculateBCHCode(f,ft.TYPE_INFO_POLY);u.appendBits(p,10);const y=new Y;if(y.appendBits(ft.TYPE_INFO_MASK_PATTERN,15),u.xor(y),u.getSize()!==15)throw new sn("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(s,l){l.appendBits(s.getVersionNumber(),6);const u=ft.calculateBCHCode(s.getVersionNumber(),ft.VERSION_INFO_POLY);if(l.appendBits(u,12),l.getSize()!==18)throw new sn("should not happen but we got: "+l.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let l=8;l<s.getWidth()-8;++l){const u=(l+1)%2;ft.isEmpty(s.get(l,6))&&s.setNumber(l,6,u),ft.isEmpty(s.get(6,l))&&s.setNumber(6,l,u)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new sn;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,l,u){for(let f=0;f<8;++f){if(!ft.isEmpty(u.get(s+f,l)))throw new sn;u.setNumber(s+f,l,0)}}static embedVerticalSeparationPattern(s,l,u){for(let f=0;f<7;++f){if(!ft.isEmpty(u.get(s,l+f)))throw new sn;u.setNumber(s,l+f,0)}}static embedPositionAdjustmentPattern(s,l,u){for(let f=0;f<5;++f){const p=ft.POSITION_ADJUSTMENT_PATTERN[f];for(let y=0;y<5;++y)u.setNumber(s+y,l+f,p[y])}}static embedPositionDetectionPattern(s,l,u){for(let f=0;f<7;++f){const p=ft.POSITION_DETECTION_PATTERN[f];for(let y=0;y<7;++y)u.setNumber(s+y,l+f,p[y])}}static embedPositionDetectionPatternsAndSeparators(s){const l=ft.POSITION_DETECTION_PATTERN[0].length;ft.embedPositionDetectionPattern(0,0,s),ft.embedPositionDetectionPattern(s.getWidth()-l,0,s),ft.embedPositionDetectionPattern(0,s.getWidth()-l,s);const u=8;ft.embedHorizontalSeparationPattern(0,u-1,s),ft.embedHorizontalSeparationPattern(s.getWidth()-u,u-1,s),ft.embedHorizontalSeparationPattern(0,s.getWidth()-u,s);const f=7;ft.embedVerticalSeparationPattern(f,0,s),ft.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),ft.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,l){if(s.getVersionNumber()<2)return;const u=s.getVersionNumber()-1,f=ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let p=0,y=f.length;p!==y;p++){const v=f[p];if(v>=0)for(let I=0;I!==y;I++){const C=f[I];C>=0&&ft.isEmpty(l.get(C,v))&&ft.embedPositionAdjustmentPattern(C-2,v-2,l)}}}}ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ft.VERSION_INFO_POLY=7973,ft.TYPE_INFO_POLY=1335,ft.TYPE_INFO_MASK_PATTERN=21522;class mu{constructor(s,l){this.dataBytes=s,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class un{constructor(){}static calculateMaskPenalty(s){return xn.applyMaskPenaltyRule1(s)+xn.applyMaskPenaltyRule2(s)+xn.applyMaskPenaltyRule3(s)+xn.applyMaskPenaltyRule4(s)}static encode(s,l,u=null){let f=un.DEFAULT_BYTE_MODE_ENCODING;const p=u!==null&&u.get(Zn.CHARACTER_SET)!==void 0;p&&(f=u.get(Zn.CHARACTER_SET).toString());const y=this.chooseMode(s,f),v=new Y;if(y===ut.BYTE&&(p||un.DEFAULT_BYTE_MODE_ENCODING!==f)){const je=H.getCharacterSetECIByName(f);je!==void 0&&this.appendECI(je,v)}this.appendModeInfo(y,v);const I=new Y;this.appendBytes(s,y,I,f);let C;if(u!==null&&u.get(Zn.QR_VERSION)!==void 0){const je=Number.parseInt(u.get(Zn.QR_VERSION).toString(),10);C=$e.getVersionForNumber(je);const Oe=this.calculateBitsNeeded(y,v,I,C);if(!this.willFit(Oe,C,l))throw new sn("Data too big for requested version")}else C=this.recommendVersion(l,y,v,I);const O=new Y;O.appendBitArray(v);const U=y===ut.BYTE?I.getSizeInBytes():s.length;this.appendLengthInfo(U,C,y,O),O.appendBitArray(I);const q=C.getECBlocksForLevel(l),J=C.getTotalCodewords()-q.getTotalECCodewords();this.terminateBits(J,O);const le=this.interleaveWithECBytes(O,C.getTotalCodewords(),J,q.getNumBlocks()),ue=new ui;ue.setECLevel(l),ue.setMode(y),ue.setVersion(C);const fe=C.getDimensionForVersion(),Ee=new ca(fe,fe),Fe=this.chooseMaskPattern(le,l,C,Ee);return ue.setMaskPattern(Fe),ft.buildMatrix(le,l,C,Fe,Ee),ue.setMatrix(Ee),ue}static recommendVersion(s,l,u,f){const p=this.calculateBitsNeeded(l,u,f,$e.getVersionForNumber(1)),y=this.chooseVersion(p,s),v=this.calculateBitsNeeded(l,u,f,y);return this.chooseVersion(v,s)}static calculateBitsNeeded(s,l,u,f){return l.getSize()+s.getCharacterCountBits(f)+u.getSize()}static getAlphanumericCode(s){return s<un.ALPHANUMERIC_TABLE.length?un.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,l=null){if(H.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(s))return ut.KANJI;let u=!1,f=!1;for(let p=0,y=s.length;p<y;++p){const v=s.charAt(p);if(un.isDigit(v))u=!0;else if(this.getAlphanumericCode(v.charCodeAt(0))!==-1)f=!0;else return ut.BYTE}return f?ut.ALPHANUMERIC:u?ut.NUMERIC:ut.BYTE}static isOnlyDoubleByteKanji(s){let l;try{l=ne.encode(s,H.SJIS)}catch{return!1}const u=l.length;if(u%2!==0)return!1;for(let f=0;f<u;f+=2){const p=l[f]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(s,l,u,f){let p=Number.MAX_SAFE_INTEGER,y=-1;for(let v=0;v<ui.NUM_MASK_PATTERNS;v++){ft.buildMatrix(s,l,u,v,f);let I=this.calculateMaskPenalty(f);I<p&&(p=I,y=v)}return y}static chooseVersion(s,l){for(let u=1;u<=40;u++){const f=$e.getVersionForNumber(u);if(un.willFit(s,f,l))return f}throw new sn("Data too big")}static willFit(s,l,u){const f=l.getTotalCodewords(),y=l.getECBlocksForLevel(u).getTotalECCodewords(),v=f-y,I=(s+7)/8;return v>=I}static terminateBits(s,l){const u=s*8;if(l.getSize()>u)throw new sn("data bits cannot fit in the QR Code"+l.getSize()+" > "+u);for(let y=0;y<4&&l.getSize()<u;++y)l.appendBit(!1);const f=l.getSize()&7;if(f>0)for(let y=f;y<8;y++)l.appendBit(!1);const p=s-l.getSizeInBytes();for(let y=0;y<p;++y)l.appendBits((y&1)===0?236:17,8);if(l.getSize()!==u)throw new sn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,l,u,f,p,y){if(f>=u)throw new sn("Block ID too large");const v=s%u,I=u-v,C=Math.floor(s/u),O=C+1,U=Math.floor(l/u),q=U+1,J=C-U,le=O-q;if(J!==le)throw new sn("EC bytes mismatch");if(u!==I+v)throw new sn("RS blocks mismatch");if(s!==(U+J)*I+(q+le)*v)throw new sn("Total bytes mismatch");f<I?(p[0]=U,y[0]=J):(p[0]=q,y[0]=le)}static interleaveWithECBytes(s,l,u,f){if(s.getSizeInBytes()!==u)throw new sn("Number of bits and data bytes does not match");let p=0,y=0,v=0;const I=new Array;for(let O=0;O<f;++O){const U=new Int32Array(1),q=new Int32Array(1);un.getNumDataBytesAndNumECBytesForBlockID(l,u,f,O,U,q);const J=U[0],le=new Uint8Array(J);s.toBytes(8*p,le,0,J);const ue=un.generateECBytes(le,q[0]);I.push(new mu(le,ue)),y=Math.max(y,J),v=Math.max(v,ue.length),p+=U[0]}if(u!==p)throw new sn("Data bytes does not match offset");const C=new Y;for(let O=0;O<y;++O)for(const U of I){const q=U.getDataBytes();O<q.length&&C.appendBits(q[O],8)}for(let O=0;O<v;++O)for(const U of I){const q=U.getErrorCorrectionBytes();O<q.length&&C.appendBits(q[O],8)}if(l!==C.getSizeInBytes())throw new sn("Interleaving error: "+l+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(s,l){const u=s.length,f=new Int32Array(u+l);for(let y=0;y<u;y++)f[y]=s[y]&255;new To(ht.QR_CODE_FIELD_256).encode(f,l);const p=new Uint8Array(l);for(let y=0;y<l;y++)p[y]=f[u+y];return p}static appendModeInfo(s,l){l.appendBits(s.getBits(),4)}static appendLengthInfo(s,l,u,f){const p=u.getCharacterCountBits(l);if(s>=1<<p)throw new sn(s+" is bigger than "+((1<<p)-1));f.appendBits(s,p)}static appendBytes(s,l,u,f){switch(l){case ut.NUMERIC:un.appendNumericBytes(s,u);break;case ut.ALPHANUMERIC:un.appendAlphanumericBytes(s,u);break;case ut.BYTE:un.append8BitBytes(s,u,f);break;case ut.KANJI:un.appendKanjiBytes(s,u);break;default:throw new sn("Invalid mode: "+l)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const l=un.getDigit(s);return l>=0&&l<=9}static appendNumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const p=un.getDigit(s.charAt(f));if(f+2<u){const y=un.getDigit(s.charAt(f+1)),v=un.getDigit(s.charAt(f+2));l.appendBits(p*100+y*10+v,10),f+=3}else if(f+1<u){const y=un.getDigit(s.charAt(f+1));l.appendBits(p*10+y,7),f+=2}else l.appendBits(p,4),f++}}static appendAlphanumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const p=un.getAlphanumericCode(s.charCodeAt(f));if(p===-1)throw new sn;if(f+1<u){const y=un.getAlphanumericCode(s.charCodeAt(f+1));if(y===-1)throw new sn;l.appendBits(p*45+y,11),f+=2}else l.appendBits(p,6),f++}}static append8BitBytes(s,l,u){let f;try{f=ne.encode(s,u)}catch(p){throw new sn(p)}for(let p=0,y=f.length;p!==y;p++){const v=f[p];l.appendBits(v,8)}}static appendKanjiBytes(s,l){let u;try{u=ne.encode(s,H.SJIS)}catch(p){throw new sn(p)}const f=u.length;for(let p=0;p<f;p+=2){const y=u[p]&255,v=u[p+1]&255,I=y<<8&4294967295|v;let C=-1;if(I>=33088&&I<=40956?C=I-33088:I>=57408&&I<=60351&&(C=I-49472),C===-1)throw new sn("Invalid byte sequence");const O=(C>>8)*192+(C&255);l.appendBits(O,13)}}static appendECI(s,l){l.appendBits(ut.ECI.getBits(),4),l.appendBits(s.getValue(),8)}}un.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),un.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class es{write(s,l,u,f=null){if(s.length===0)throw new E("Found empty contents");if(l<0||u<0)throw new E("Requested dimensions are too small: "+l+"x"+u);let p=Ot.L,y=es.QUIET_ZONE_SIZE;f!==null&&(f.get(Zn.ERROR_CORRECTION)!==void 0&&(p=Ot.fromString(f.get(Zn.ERROR_CORRECTION).toString())),f.get(Zn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Zn.MARGIN).toString(),10)));const v=un.encode(s,p,f);return this.renderResult(v,l,u,y)}writeToDom(s,l,u,f,p=null){typeof s=="string"&&(s=document.querySelector(s));const y=this.write(l,u,f,p);s&&s.appendChild(y)}renderResult(s,l,u,f){const p=s.getMatrix();if(p===null)throw new Vn;const y=p.getWidth(),v=p.getHeight(),I=y+f*2,C=v+f*2,O=Math.max(l,I),U=Math.max(u,C),q=Math.min(Math.floor(O/I),Math.floor(U/C)),J=Math.floor((O-y*q)/2),le=Math.floor((U-v*q)/2),ue=this.createSVGElement(O,U);for(let fe=0,Ee=le;fe<v;fe++,Ee+=q)for(let Fe=0,je=J;Fe<y;Fe++,je+=q)if(p.get(Fe,fe)===1){const Oe=this.createSvgRectElement(je,Ee,q,q);ue.appendChild(Oe)}return ue}createSVGElement(s,l){const u=document.createElementNS(es.SVG_NS,"svg");return u.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(s,l,u,f){const p=document.createElementNS(es.SVG_NS,"rect");return p.setAttributeNS(null,"x",s.toString()),p.setAttributeNS(null,"y",l.toString()),p.setAttributeNS(null,"height",u.toString()),p.setAttributeNS(null,"width",f.toString()),p.setAttributeNS(null,"fill","#000000"),p}}es.QUIET_ZONE_SIZE=4,es.SVG_NS="http://www.w3.org/2000/svg";class pr{encode(s,l,u,f,p){if(s.length===0)throw new E("Found empty contents");if(l!==Re.QR_CODE)throw new E("Can only encode QR_CODE, but got "+l);if(u<0||f<0)throw new E(`Requested dimensions are too small: ${u}x${f}`);let y=Ot.L,v=pr.QUIET_ZONE_SIZE;p!==null&&(p.get(Zn.ERROR_CORRECTION)!==void 0&&(y=Ot.fromString(p.get(Zn.ERROR_CORRECTION).toString())),p.get(Zn.MARGIN)!==void 0&&(v=Number.parseInt(p.get(Zn.MARGIN).toString(),10)));const I=un.encode(s,y,p);return pr.renderResult(I,u,f,v)}static renderResult(s,l,u,f){const p=s.getMatrix();if(p===null)throw new Vn;const y=p.getWidth(),v=p.getHeight(),I=y+f*2,C=v+f*2,O=Math.max(l,I),U=Math.max(u,C),q=Math.min(Math.floor(O/I),Math.floor(U/C)),J=Math.floor((O-y*q)/2),le=Math.floor((U-v*q)/2),ue=new we(O,U);for(let fe=0,Ee=le;fe<v;fe++,Ee+=q)for(let Fe=0,je=J;Fe<y;Fe++,je+=q)p.get(Fe,fe)===1&&ue.setRegion(je,Ee,q,q);return ue}}pr.QUIET_ZONE_SIZE=4;class gu{encode(s,l,u,f,p){let y;switch(l){case Re.QR_CODE:y=new pr;break;default:throw new E("No encoder available for format "+l)}return y.encode(s,l,u,f,p)}}class Wi extends oe{constructor(s,l,u,f,p,y,v,I){if(super(y,v),this.yuvData=s,this.dataWidth=l,this.dataHeight=u,this.left=f,this.top=p,f+y>l||p+v>u)throw new E("Crop rectangle does not fit within image data.");I&&this.reverseHorizontal(y,v)}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.yuvData;const u=s*l,f=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.yuvData,p,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.yuvData,p,f,v,s),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new Wi(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+l,u,f,!1)}renderThumbnail(){const s=this.getWidth()/Wi.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/Wi.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(s*l),f=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let y=0;y<l;y++){const v=y*s;for(let I=0;I<s;I++){const C=f[p+I*Wi.THUMBNAIL_SCALE_FACTOR]&255;u[v+I]=4278190080|C*65793}p+=this.dataWidth*Wi.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Wi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Wi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,l){const u=this.yuvData;for(let f=0,p=this.top*this.dataWidth+this.left;f<l;f++,p+=this.dataWidth){const y=p+s/2;for(let v=p,I=p+s-1;v<y;v++,I--){const C=u[v];u[v]=u[I],u[I]=C}}}invert(){return new Te(this)}}Wi.THUMBNAIL_SCALE_FACTOR=2;class ts extends oe{constructor(s,l,u,f,p,y,v){if(super(l,u),this.dataWidth=f,this.dataHeight=p,this.left=y,this.top=v,s.BYTES_PER_ELEMENT===4){const I=l*u,C=new Uint8ClampedArray(I);for(let O=0;O<I;O++){const U=s[O],q=U>>16&255,J=U>>7&510,le=U&255;C[O]=(q+J+le)/4&255}this.luminances=C}else this.luminances=s;if(f===void 0&&(this.dataWidth=l),p===void 0&&(this.dataHeight=u),y===void 0&&(this.left=0),v===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+u>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.luminances;const u=s*l,f=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.luminances,p,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.luminances,p,f,v,s),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new ts(this.luminances,u,f,this.dataWidth,this.dataHeight,this.left+s,this.top+l)}invert(){return new Te(this)}}class _ extends H{static forName(s){return this.getCharacterSetECIByName(s)}}class N{}N.ISO_8859_1=H.ISO8859_1;class V{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class X{static singletonList(s){return[s]}static min(s,l){return s.sort(l)[0]}}class me{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ie extends me{constructor(s,l,u){super(s),this.value=l,this.bitCount=u}appendTo(s,l){s.appendBits(this.value,this.bitCount)}add(s,l){return new Ie(this,s,l)}addBinaryShift(s,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ie(this,s,l)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+W.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class He extends Ie{constructor(s,l,u){super(s,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=u}appendTo(s,l){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):u===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(l[this.binaryShiftStart+u],8)}addBinaryShift(s,l){return new He(this,s,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function dn(j,s,l){return new He(j,s,l)}function Un(j,s,l){return new Ie(j,s,l)}const qt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pn=0,zn=1,Wn=2,Ti=3,ei=4,Qa=new Ie(null,0,0),yu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function up(j){for(let s of j)z.fill(s,-1);return j[Pn][ei]=0,j[zn][ei]=0,j[zn][Pn]=28,j[Ti][ei]=0,j[Wn][ei]=0,j[Wn][Pn]=15,j}const Zd=up(z.createInt32Array(6,6));class di{constructor(s,l,u,f){this.token=s,this.mode=l,this.binaryShiftByteCount=u,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,l){let u=this.bitCount,f=this.token;if(s!==this.mode){let y=yu[this.mode][s];f=Un(f,y&65535,y>>16),u+=y>>16}let p=s===Wn?4:5;return f=Un(f,l,p),new di(f,s,0,u+p)}shiftAndAppend(s,l){let u=this.token,f=this.mode===Wn?4:5;return u=Un(u,Zd[this.mode][s],f),u=Un(u,l,5),new di(u,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let l=this.token,u=this.mode,f=this.bitCount;if(this.mode===ei||this.mode===Wn){let v=yu[u][Pn];l=Un(l,v&65535,v>>16),f+=v>>16,u=Pn}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,y=new di(l,u,this.binaryShiftByteCount+1,f+p);return y.binaryShiftByteCount===2078&&(y=y.endBinaryShift(s+1)),y}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=dn(l,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new di(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let l=this.bitCount+(yu[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?l+=di.calculateBinaryShiftCost(s)-di.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(l+=10),l<=s.bitCount}toBitArray(s){let l=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())l.unshift(f);let u=new Y;for(const f of l)f.appendTo(u,s);return u}toString(){return te.format("%s bits=%d bytes=%d",qt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}di.INITIAL_STATE=new di(Qa,Pn,0,0);function qg(j){const s=te.getCharCode(" "),l=te.getCharCode("."),u=te.getCharCode(",");j[Pn][s]=1;const f=te.getCharCode("Z"),p=te.getCharCode("A");for(let q=p;q<=f;q++)j[Pn][q]=q-p+2;j[zn][s]=1;const y=te.getCharCode("z"),v=te.getCharCode("a");for(let q=v;q<=y;q++)j[zn][q]=q-v+2;j[Wn][s]=1;const I=te.getCharCode("9"),C=te.getCharCode("0");for(let q=C;q<=I;q++)j[Wn][q]=q-C+2;j[Wn][u]=12,j[Wn][l]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let q=0;q<O.length;q++)j[Ti][te.getCharCode(O[q])]=q;const U=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let q=0;q<U.length;q++)te.getCharCode(U[q])>0&&(j[ei][te.getCharCode(U[q])]=q);return j}const Jd=qg(z.createInt32Array(5,256));class rc{constructor(s){this.text=s}encode(){const s=te.getCharCode(" "),l=te.getCharCode(`
`);let u=X.singletonList(di.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let y,v=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case te.getCharCode("\r"):y=v===l?2:0;break;case te.getCharCode("."):y=v===s?3:0;break;case te.getCharCode(","):y=v===s?4:0;break;case te.getCharCode(":"):y=v===s?5:0;break;default:y=0}y>0?(u=rc.updateStateListForPair(u,p,y),p++):u=this.updateStateListForChar(u,p)}return X.min(u,(p,y)=>p.getBitCount()-y.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,l){const u=[];for(let f of s)this.updateStateForChar(f,l,u);return rc.simplifyStates(u)}updateStateForChar(s,l,u){let f=this.text[l]&255,p=Jd[s.getMode()][f]>0,y=null;for(let v=0;v<=ei;v++){let I=Jd[v][f];if(I>0){if(y==null&&(y=s.endBinaryShift(l)),!p||v===s.getMode()||v===Wn){const C=y.latchAndAppend(v,I);u.push(C)}if(!p&&Zd[s.getMode()][v]>=0){const C=y.shiftAndAppend(v,I);u.push(C)}}}if(s.getBinaryShiftByteCount()>0||Jd[s.getMode()][f]===0){let v=s.addBinaryShiftChar(l);u.push(v)}}static updateStateListForPair(s,l,u){const f=[];for(let p of s)this.updateStateForPair(p,l,u,f);return this.simplifyStates(f)}static updateStateForPair(s,l,u,f){let p=s.endBinaryShift(l);if(f.push(p.latchAndAppend(ei,u)),s.getMode()!==ei&&f.push(p.shiftAndAppend(ei,u)),u===3||u===4){let y=p.latchAndAppend(Wn,16-u).latchAndAppend(Wn,1);f.push(y)}if(s.getBinaryShiftByteCount()>0){let y=s.addBinaryShiftChar(l).addBinaryShiftChar(l+1);f.push(y)}}static simplifyStates(s){let l=[];for(const u of s){let f=!0;for(const p of l){if(p.isBetterThanOrEqualTo(u)){f=!1;break}u.isBetterThanOrEqualTo(p)&&(l=l.filter(y=>y!==p))}f&&l.push(u)}return l}}class Kt{constructor(){}static encodeBytes(s){return Kt.encode(s,Kt.DEFAULT_EC_PERCENT,Kt.DEFAULT_AZTEC_LAYERS)}static encode(s,l,u){let f=new rc(s).encode(),p=W.truncDivision(f.getSize()*l,100)+11,y=f.getSize()+p,v,I,C,O,U;if(u!==Kt.DEFAULT_AZTEC_LAYERS){if(v=u<0,I=Math.abs(u),I>(v?Kt.MAX_NB_BITS_COMPACT:Kt.MAX_NB_BITS))throw new E(te.format("Illegal value %s for layers",u));C=Kt.totalBitsInLayer(I,v),O=Kt.WORD_SIZE[I];let Oe=C-C%O;if(U=Kt.stuffBits(f,O),U.getSize()+p>Oe)throw new E("Data to large for user specified layer");if(v&&U.getSize()>O*64)throw new E("Data to large for user specified layer")}else{O=0,U=null;for(let Oe=0;;Oe++){if(Oe>Kt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(v=Oe<=3,I=v?Oe+1:Oe,C=Kt.totalBitsInLayer(I,v),y>C)continue;(U==null||O!==Kt.WORD_SIZE[I])&&(O=Kt.WORD_SIZE[I],U=Kt.stuffBits(f,O));let Mt=C-C%O;if(!(v&&U.getSize()>O*64)&&U.getSize()+p<=Mt)break}}let q=Kt.generateCheckWords(U,C,O),J=U.getSize()/O,le=Kt.generateModeMessage(v,I,J),ue=(v?11:14)+I*4,fe=new Int32Array(ue),Ee;if(v){Ee=ue;for(let Oe=0;Oe<fe.length;Oe++)fe[Oe]=Oe}else{Ee=ue+1+2*W.truncDivision(W.truncDivision(ue,2)-1,15);let Oe=W.truncDivision(ue,2),Mt=W.truncDivision(Ee,2);for(let St=0;St<Oe;St++){let Ci=St+W.truncDivision(St,15);fe[Oe-St-1]=Mt-Ci-1,fe[Oe+St]=Mt+Ci+1}}let Fe=new we(Ee);for(let Oe=0,Mt=0;Oe<I;Oe++){let St=(I-Oe)*4+(v?9:12);for(let Ci=0;Ci<St;Ci++){let ws=Ci*2;for(let Sr=0;Sr<2;Sr++)q.get(Mt+ws+Sr)&&Fe.set(fe[Oe*2+Sr],fe[Oe*2+Ci]),q.get(Mt+St*2+ws+Sr)&&Fe.set(fe[Oe*2+Ci],fe[ue-1-Oe*2-Sr]),q.get(Mt+St*4+ws+Sr)&&Fe.set(fe[ue-1-Oe*2-Sr],fe[ue-1-Oe*2-Ci]),q.get(Mt+St*6+ws+Sr)&&Fe.set(fe[ue-1-Oe*2-Ci],fe[Oe*2+Sr])}Mt+=St*8}if(Kt.drawModeMessage(Fe,v,Ee,le),v)Kt.drawBullsEye(Fe,W.truncDivision(Ee,2),5);else{Kt.drawBullsEye(Fe,W.truncDivision(Ee,2),7);for(let Oe=0,Mt=0;Oe<W.truncDivision(ue,2)-1;Oe+=15,Mt+=16)for(let St=W.truncDivision(Ee,2)&1;St<Ee;St+=2)Fe.set(W.truncDivision(Ee,2)-Mt,St),Fe.set(W.truncDivision(Ee,2)+Mt,St),Fe.set(St,W.truncDivision(Ee,2)-Mt),Fe.set(St,W.truncDivision(Ee,2)+Mt)}let je=new V;return je.setCompact(v),je.setSize(Ee),je.setLayers(I),je.setCodeWords(J),je.setMatrix(Fe),je}static drawBullsEye(s,l,u){for(let f=0;f<u;f+=2)for(let p=l-f;p<=l+f;p++)s.set(p,l-f),s.set(p,l+f),s.set(l-f,p),s.set(l+f,p);s.set(l-u,l-u),s.set(l-u+1,l-u),s.set(l-u,l-u+1),s.set(l+u,l-u),s.set(l+u,l-u+1),s.set(l+u,l+u-1)}static generateModeMessage(s,l,u){let f=new Y;return s?(f.appendBits(l-1,2),f.appendBits(u-1,6),f=Kt.generateCheckWords(f,28,4)):(f.appendBits(l-1,5),f.appendBits(u-1,11),f=Kt.generateCheckWords(f,40,4)),f}static drawModeMessage(s,l,u,f){let p=W.truncDivision(u,2);if(l)for(let y=0;y<7;y++){let v=p-3+y;f.get(y)&&s.set(v,p-5),f.get(y+7)&&s.set(p+5,v),f.get(20-y)&&s.set(v,p+5),f.get(27-y)&&s.set(p-5,v)}else for(let y=0;y<10;y++){let v=p-5+y+W.truncDivision(y,5);f.get(y)&&s.set(v,p-7),f.get(y+10)&&s.set(p+7,v),f.get(29-y)&&s.set(v,p+7),f.get(39-y)&&s.set(p-7,v)}}static generateCheckWords(s,l,u){let f=s.getSize()/u,p=new To(Kt.getGF(u)),y=W.truncDivision(l,u),v=Kt.bitsToWords(s,u,y);p.encode(v,y-f);let I=l%u,C=new Y;C.appendBits(0,I);for(const O of Array.from(v))C.appendBits(O,u);return C}static bitsToWords(s,l,u){let f=new Int32Array(u),p,y;for(p=0,y=s.getSize()/l;p<y;p++){let v=0;for(let I=0;I<l;I++)v|=s.get(p*l+I)?1<<l-I-1:0;f[p]=v}return f}static getGF(s){switch(s){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new E("Unsupported word size "+s)}}static stuffBits(s,l){let u=new Y,f=s.getSize(),p=(1<<l)-2;for(let y=0;y<f;y+=l){let v=0;for(let I=0;I<l;I++)(y+I>=f||s.get(y+I))&&(v|=1<<l-1-I);(v&p)===p?(u.appendBits(v&p,l),y--):(v&p)===0?(u.appendBits(v|1,l),y--):u.appendBits(v,l)}return u}static totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}Kt.DEFAULT_EC_PERCENT=33,Kt.DEFAULT_AZTEC_LAYERS=0,Kt.MAX_NB_BITS=32,Kt.MAX_NB_BITS_COMPACT=4,Kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ic{encode(s,l,u,f){return this.encodeWithHints(s,l,u,f,null)}encodeWithHints(s,l,u,f,p){let y=N.ISO_8859_1,v=Kt.DEFAULT_EC_PERCENT,I=Kt.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(Zn.CHARACTER_SET)&&(y=_.forName(p.get(Zn.CHARACTER_SET).toString())),p.has(Zn.ERROR_CORRECTION)&&(v=W.parseInt(p.get(Zn.ERROR_CORRECTION).toString())),p.has(Zn.AZTEC_LAYERS)&&(I=W.parseInt(p.get(Zn.AZTEC_LAYERS).toString()))),ic.encodeLayers(s,l,u,f,y,v,I)}static encodeLayers(s,l,u,f,p,y,v){if(l!==Re.AZTEC)throw new E("Can only encode AZTEC, but got "+l);let I=Kt.encode(te.getBytes(s,p),y,v);return ic.renderResult(I,u,f)}static renderResult(s,l,u){let f=s.getMatrix();if(f==null)throw new Vn;let p=f.getWidth(),y=f.getHeight(),v=Math.max(l,p),I=Math.max(u,y),C=Math.min(v/p,I/y),O=(v-p*C)/2,U=(I-y*C)/2,q=new we(v,I);for(let J=0,le=U;J<y;J++,le+=C)for(let ue=0,fe=O;ue<p;ue++,fe+=C)f.get(ue,J)&&q.setRegion(fe,le,C,C);return q}}t.AbstractExpandedDecoder=vo,t.ArgumentException=w,t.ArithmeticException=bt,t.AztecCode=V,t.AztecCodeReader=Fi,t.AztecCodeWriter=ic,t.AztecDecoder=zt,t.AztecDetector=Qr,t.AztecDetectorResult=wi,t.AztecEncoder=Kt,t.AztecHighLevelEncoder=rc,t.AztecPoint=Fn,t.BarcodeFormat=Re,t.Binarizer=M,t.BinaryBitmap=T,t.BitArray=Y,t.BitMatrix=we,t.BitSource=Ga,t.BrowserAztecCodeReader=vi,t.BrowserBarcodeReader=hu,t.BrowserCodeReader=Se,t.BrowserDatamatrixCodeReader=Qd,t.BrowserMultiFormatReader=Ao,t.BrowserPDF417Reader=aa,t.BrowserQRCodeReader=Ya,t.BrowserQRCodeSvgWriter=es,t.CharacterSetECI=H,t.ChecksumException=R,t.Code128Reader=We,t.Code39Reader=An,t.DataMatrixDecodedBitStreamParser=ji,t.DataMatrixReader=Ei,t.DecodeHintType=ie,t.DecoderResult=at,t.DefaultGridSampler=Xn,t.DetectorResult=Kn,t.EAN13Reader=br,t.EncodeHintType=Zn,t.Exception=g,t.FormatException=F,t.GenericGF=ht,t.GenericGFPoly=ct,t.GlobalHistogramBinarizer=Ae,t.GridSampler=Qs,t.GridSamplerInstance=Er,t.HTMLCanvasElementLuminanceSource=Ne,t.HybridBinarizer=xe,t.ITFReader=Ht,t.IllegalArgumentException=E,t.IllegalStateException=Vn,t.InvertedLuminanceSource=Te,t.LuminanceSource=oe,t.MathUtils=pt,t.MultiFormatOneDReader=Ms,t.MultiFormatReader=Vs,t.MultiFormatWriter=gu,t.NotFoundException=se,t.OneDReader=In,t.PDF417DecodedBitStreamParser=_e,t.PDF417DecoderErrorCorrection=bo,t.PDF417Reader=Cr,t.PDF417ResultMetadata=oa,t.PerspectiveTransform=Wt,t.PlanarYUVLuminanceSource=Wi,t.QRCodeByteMatrix=ca,t.QRCodeDataMask=It,t.QRCodeDecodedBitStreamParser=Sn,t.QRCodeDecoderErrorCorrectionLevel=Ot,t.QRCodeDecoderFormatInformation=Qn,t.QRCodeEncoder=un,t.QRCodeEncoderQRCode=ui,t.QRCodeMaskUtil=xn,t.QRCodeMatrixUtil=ft,t.QRCodeMode=ut,t.QRCodeReader=Hr,t.QRCodeVersion=$e,t.QRCodeWriter=pr,t.RGBLuminanceSource=ts,t.RSS14Reader=Jt,t.RSSExpandedReader=ke,t.ReaderException=eo,t.ReedSolomonDecoder=Dr,t.ReedSolomonEncoder=To,t.ReedSolomonException=gn,t.Result=Le,t.ResultMetadataType=Ge,t.ResultPoint=Xe,t.StringUtils=te,t.UnsupportedOperationException=ee,t.VideoInputDevice=ae,t.WhiteRectangleDetector=Yr,t.WriterException=sn,t.ZXingArrays=z,t.ZXingCharset=_,t.ZXingInteger=W,t.ZXingStandardCharsets=N,t.ZXingStringBuilder=K,t.ZXingStringEncoding=ne,t.ZXingSystem=D,t.createAbstractExpandedDecoder=du,Object.defineProperty(t,"__esModule",{value:!0})})}(zh,zh.exports)),zh.exports}var $n=mQ();const gQ=$m($n),yQ=BC({__proto__:null,default:gQ},[$n]);var EC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,$n.BarcodeFormat.QR_CODE],[Ze.AZTEC,$n.BarcodeFormat.AZTEC],[Ze.CODABAR,$n.BarcodeFormat.CODABAR],[Ze.CODE_39,$n.BarcodeFormat.CODE_39],[Ze.CODE_93,$n.BarcodeFormat.CODE_93],[Ze.CODE_128,$n.BarcodeFormat.CODE_128],[Ze.DATA_MATRIX,$n.BarcodeFormat.DATA_MATRIX],[Ze.MAXICODE,$n.BarcodeFormat.MAXICODE],[Ze.ITF,$n.BarcodeFormat.ITF],[Ze.EAN_13,$n.BarcodeFormat.EAN_13],[Ze.EAN_8,$n.BarcodeFormat.EAN_8],[Ze.PDF_417,$n.BarcodeFormat.PDF_417],[Ze.RSS_14,$n.BarcodeFormat.RSS_14],[Ze.RSS_EXPANDED,$n.BarcodeFormat.RSS_EXPANDED],[Ze.UPC_A,$n.BarcodeFormat.UPC_A],[Ze.UPC_E,$n.BarcodeFormat.UPC_E],[Ze.UPC_EAN_EXTENSION,$n.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!yQ)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set($n.DecodeHintType.POSSIBLE_FORMATS,i),o.set($n.DecodeHintType.TRY_HARDER,!1),this.hints=o}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,i){try{r(t.decode(e))}catch(o){i(o)}})},n.prototype.decode=function(e){var t=new $n.MultiFormatReader(this.verbose,this.hints),r=new $n.HTMLCanvasElementLuminanceSource(e),i=new $n.BinaryBitmap(new $n.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:x6.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),xQ=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},wQ=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},bC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,"qr_code"],[Ze.AZTEC,"aztec"],[Ze.CODABAR,"codabar"],[Ze.CODE_39,"code_39"],[Ze.CODE_93,"code_93"],[Ze.CODE_128,"code_128"],[Ze.DATA_MATRIX,"data_matrix"],[Ze.ITF,"itf"],[Ze.EAN_13,"ean_13"],[Ze.EAN_8,"ean_8"],[Ze.PDF_417,"pdf417"],[Ze.UPC_A,"upc_a"],[Ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return xQ(this,void 0,void 0,function(){var t,r;return wQ(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:x6.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,i=0,o=e;i<o.length;i++){var c=o[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,t=c)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),IC=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},AC=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},vQ=function(){function n(e,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&bC.isSupported()?(this.primaryDecoder=new bC(e,r,i),this.secondaryDecoder=new EC(e,r,i)):this.primaryDecoder=new EC(e,r,i)}return n.prototype.decodeAsync=function(e){return IC(this,void 0,void 0,function(){var t;return AC(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return IC(this,void 0,void 0,function(){var t,r;return AC(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),d_=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wm=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},Hm=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},v6=function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n}(),_Q=function(n){d_(e,n);function e(t,r){return n.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(v6),EQ=function(n){d_(e,n);function e(t){return n.call(this,"zoom",t)||this}return e}(_Q),bQ=function(n){d_(e,n);function e(t){return n.call(this,"torch",t)||this}return e}(v6),IQ=function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new EQ(this.track)},n.prototype.torchFeature=function(){return new bQ(this.track)},n}(),AQ=function(){function n(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,r,i){return Wm(this,void 0,void 0,function(){var o,c;return Hm(this,function(h){switch(h.label){case 0:return o=new n(e,t,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return Wm(this,void 0,void 0,function(){return Hm(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var i=e.mediaStream.getVideoTracks(),o=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(h){e.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new IQ(this.getFirstTrackOrFail())},n}(),TQ=function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,r){return Wm(this,void 0,void 0,function(){return Hm(this,function(i){return[2,AQ.create(e,this.mediaStream,t,r)]})})},n.create=function(e){return Wm(this,void 0,void 0,function(){var t,r;return Hm(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new n(r)]}})})},n}(),TC=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},CC=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},CQ=function(){function n(){}return n.failIfNotSupported=function(){return TC(this,void 0,void 0,function(){return CC(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return TC(this,void 0,void 0,function(){return CC(this,function(t){return[2,TQ.create(e)]})})},n}(),SQ=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},RQ=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},NQ=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=id.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=id.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return SQ(this,void 0,void 0,function(){var e,t,r,i,o,c,h;return RQ(this,function(m){switch(m.label){case 0:return e=function(g){for(var w=g.getVideoTracks(),E=0,T=w;E<T.length;E++){var R=T[E];R.enabled=!1,R.stop(),g.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),i=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return e(t),[2,i]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(o){for(var c=[],h=0,m=o;h<m.length;h++){var g=m[h];g.kind==="video"&&c.push({id:g.id,label:g.label})}e(c)},i=MediaStreamTrack;i.getSources(r)})},n}(),gr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(gr||(gr={}));var kQ=function(){function n(){this.state=gr.NOT_STARTED,this.onGoingTransactionNewState=gr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case gr.UNKNOWN:throw"Transition from unknown is not allowed";case gr.NOT_STARTED:this.failIfNewStateIs(e,[gr.PAUSED]);break;case gr.SCANNING:break;case gr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n}(),PQ=function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===gr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==gr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===gr.PAUSED},n}(),DQ=function(){function n(){}return n.create=function(){return new PQ(new kQ)},n}(),OQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bs=function(n){OQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(dQ),MQ=function(){function n(e,t){this.logger=t,this.fps=bs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=bs.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?w6.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!va(this.qrbox)},n.create=function(e,t){return new n(e,t)},n}(),SC=function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new fQ(this.verbose),this.qrcode=new vQ(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=DQ.create()}return n.prototype.start=function(e,t,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=MQ.create(t,this.logger);this.clearElement();var m=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=m,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:bs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var E=this,T=this.stateManagerProxy.startTransition(gr.SCANNING);return new Promise(function(R,M){var D=g?h.videoConstraints:E.createVideoConstraints(e);if(!D){T.cancel(),M("videoConstraints should be defined");return}var L={};(!g||h.aspectRatio)&&(L.aspectRatio=h.aspectRatio);var G={onRenderSurfaceReady:function(z,W){E.setupUi(z,W,h),E.isScanning=!0,E.foreverScan(h,r,c)}};CQ.failIfNotSupported().then(function(z){z.create(D).then(function(W){return W.render(o.element,L,G).then(function(Y){E.renderedCamera=Y,T.execute(),R(null)}).catch(function(Y){T.cancel(),M(Y)})}).catch(function(W){T.cancel(),M(id.errorGettingUserMedia(W))})}).catch(function(z){T.cancel(),M(id.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gr.PAUSED),this.showPausedState(),(va(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(gr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(gr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(bs.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},n.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(va(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var h=c.width,m=c.height,g=document.getElementById(r.elementId),w=g.clientWidth?g.clientWidth:bs.DEFAULT_WIDTH,E=Math.max(g.clientHeight?g.clientHeight:m,bs.FILE_SCAN_MIN_HEIGHT),T=r.computeCanvasDrawConfig(h,m,w,E);if(t){var R=r.createCanvasElement(w,E,"qr-canvas-visible");R.style.display="inline-block",g.appendChild(R);var M=R.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=w,M.canvas.height=E,M.drawImage(c,0,0,h,m,T.x,T.y,T.width,T.height)}var D=bs.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(c.width,T.width),G=Math.max(c.height,T.height),z=L+2*D,W=G+2*D,Y=r.createCanvasElement(z,W);g.appendChild(Y);var Z=Y.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=z,Z.canvas.height=W,Z.drawImage(c,0,0,h,m,D,D,L,G);try{r.qrcode.decodeRobustlyAsync(Y).then(function(ie){i(vC.createFromQrcodeResult(ie))}).catch(o)}catch(ie){o("QR code parse error, error = ".concat(ie))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return NQ.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!w6.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Ze.QR_CODE,Ze.AZTEC,Ze.CODABAR,Ze.CODE_39,Ze.CODE_93,Ze.CODE_128,Ze.DATA_MATRIX,Ze.MAXICODE,Ze.ITF,Ze.EAN_13,Ze.EAN_8,Ze.PDF_417,Ze.RSS_14,Ze.RSS_EXPANDED,Ze.UPC_A,Ze.UPC_E,Ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var c=o[i];uQ(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(va(e))return!0;if(!va(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(va(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return va(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,t,o),h=function(g){if(g<bs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(bs.MIN_QR_BOX_SIZE,"px.")},m=function(g){return g>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};h(c.width),h(c.height),c.width=m(c.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},n.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var i=va(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:e,height:t},m=c?this.getShadedRegionBounds(e,t,o):h,g=this.createCanvasElement(m.width,m.height),w={willReadFrequently:!0},E=g.getContext("2d",w);E.canvas.width=m.width,E.canvas.height=m.height,this.element.append(g),c&&this.possiblyInsertShadingElement(this.element,e,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=E,this.canvasElement=g},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=id.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,vC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=id.codeParseError(i);return t(o,hQ.createFrom(o)),!1})},n.prototype.foreverScan=function(e,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*c,g=this.qrRegion.height*h,w=this.qrRegion.x*c,E=this.qrRegion.y*h;this.context.drawImage(o,w,E,m,g,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,t,r)},i.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(R){!R&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){T()})):T()}).catch(function(R){i.logger.logError("Error happend while scanning context",R),T()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(M){if(M in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},h=Object.keys(e);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var m=Object.keys(e)[0];if(m!==t&&m!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===t){var g=e.facingMode;if(typeof g=="string"){if(c(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(c(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(o in E)return{deviceId:{exact:E["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var T=typeof E;throw"Invalid type of 'deviceId' = ".concat(T)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},n.prototype.computeCanvasDrawConfig=function(e,t,r,i){if(e<=r&&t<=i){var o=(r-e)/2,c=(i-t)/2;return{x:o,y:c,width:e,height:t}}else{var h=e,m=t;return e>r&&(t=r/e*t,e=r),t>i&&(e=i/t*e,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(m)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,i)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?bs.BORDER_SHADER_MATCH_COLOR:bs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,r){var i=e,o=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=va(r)?"qr-canvas":r,c},n.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},n.prototype.possiblyInsertShadingElement=function(e,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(bs.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var m=5,g=40;this.insertShaderBorders(o,g,m,-m,null,0,!0),this.insertShaderBorders(o,g,m,-m,null,0,!1),this.insertShaderBorders(o,g,m,null,-m,0,!0),this.insertShaderBorders(o,g,m,null,-m,0,!1),this.insertShaderBorders(o,m,g+m,-m,null,-m,!0),this.insertShaderBorders(o,m,g+m,null,-m,-m,!0),this.insertShaderBorders(o,m,g+m,-m,null,-m,!1),this.insertShaderBorders(o,m,g+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(o)}},n.prototype.insertShaderBorders=function(e,t,r,i,o,c,h){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=bs.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(t,"px"),m.style.height="".concat(r,"px"),i!==null&&(m.style.top="".concat(i,"px")),o!==null&&(m.style.bottom="".concat(o,"px")),h?m.style.left="".concat(c,"px"):m.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n}(),RC;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(RC||(RC={}));function LQ({onScan:n,onClose:e,onSwitchToManual:t}){const[r,i]=P.useState(!0),[o,c]=P.useState(null),[h,m]=P.useState(!1),g=P.useRef(null);P.useRef(null);const w=P.useCallback(()=>{g.current&&h?g.current.stop().then(()=>{m(!1)}).catch(M=>{console.error("Error stopping scanner:",M),m(!1)}):m(!1)},[h]),E=P.useCallback(async()=>{try{i(!0),c(null);const M=await SC.getCameras();if(M&&M.length===0){c("No camera found. Please enter the code manually."),i(!1);return}g.current=new SC("qr-reader"),await g.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},(D,L)=>{w(),xr.success("Event found — joining now…"),n(D)},D=>{}),m(!0),i(!1)}catch(M){console.error("Scanner error:",M),M.name==="NotAllowedError"||M.name==="PermissionDeniedError"?c("Please allow camera access to scan codes."):M.name==="NotFoundError"?c("No camera found. Please enter the code manually."):c("Could not start camera. Try entering the code manually."),i(!1)}},[n,w]);P.useEffect(()=>(E(),()=>{try{w()}catch(M){console.error("Error during component cleanup:",M),m(!1)}}),[E,w]);const T=()=>{try{w()}catch(M){console.error("Error during scanner cleanup:",M)}e()},R=()=>{try{w()}catch(M){console.error("Error during scanner cleanup:",M)}t()};return A.jsx(Ug,{open:!0,onOpenChange:T,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[A.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent p-4",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("h3",{className:"text-white flex items-center gap-2 font-semibold",children:[A.jsx(fx,{className:"w-5 h-5"}),"Scan Event QR Code"]}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:T,className:"text-white hover:bg-white/20 rounded-full",children:A.jsx(Yi,{className:"w-5 h-5"})})]})}),A.jsxs("div",{className:"relative aspect-square bg-black",children:[r&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:A.jsxs("div",{className:"text-white text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),A.jsx("p",{className:"text-sm",children:"Starting camera..."})]})}),o&&A.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-20",children:[A.jsx(fx,{className:"w-12 h-12 mx-auto mb-4 text-white opacity-50"}),A.jsx("p",{className:"text-white text-sm mb-4",children:o}),A.jsx(Ut,{variant:"outline",onClick:R,className:"text-white border-white hover:bg-white hover:text-black",children:"Enter Code Manually"})]}),A.jsx("div",{id:"qr-reader",className:`w-full h-full ${r||o?"opacity-0":"opacity-100"}`}),!o&&!r&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:A.jsxs("div",{className:"relative w-64 h-64",children:[A.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-pink-500 rounded-tl-2xl"}),A.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-pink-500 rounded-tr-2xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-pink-500 rounded-bl-2xl"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-pink-500 rounded-br-2xl"})]})})]}),A.jsx("div",{className:"bg-white dark:bg-gray-900 p-4 text-center",children:A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Position the QR code inside the frame."})})]})})})}function VQ({onSubmit:n,onClose:e}){const[t,r]=P.useState(""),[i,o]=P.useState(!1),c=async h=>{h.preventDefault(),t.trim()&&(o(!0),await n(t.trim().toUpperCase()),o(!1))};return A.jsx(Ug,{open:!0,onOpenChange:e,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl",children:[A.jsxs(zg,{className:"text-center pb-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("div",{className:"flex-1"}),A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center",children:A.jsx(cS,{className:"w-8 h-8 text-white"})}),A.jsx("div",{className:"flex-1 flex justify-end",children:A.jsx(Ut,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:A.jsx(Yi,{className:"w-5 h-5"})})})]}),A.jsx(Wg,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Enter Event Code"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Enter the code provided by the event organizer"})]}),A.jsxs("form",{onSubmit:c,className:"space-y-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(zl,{type:"text",placeholder:"e.g., WED2025",value:t,onChange:h=>r(h.target.value.toUpperCase()),className:"text-center text-lg font-mono tracking-wider border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 rounded-xl py-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",autoFocus:!0}),A.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Codes are usually 6-8 characters"})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx(Ut,{type:"button",variant:"outline",onClick:e,className:"flex-1 rounded-xl py-3 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Cancel"}),A.jsx(Ut,{type:"submit",disabled:!t.trim()||i,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl py-3",children:i?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):A.jsxs(A.Fragment,{children:["Join Event",A.jsx(qw,{className:"w-4 h-4 ml-2"})]})})]})]})]})})})}function Lw(){const n=ta(),[e,t]=P.useState(null),[r,i]=P.useState(!1),o=w=>{try{const T=new URL(w).searchParams.get("code");T?(m(),n(Mn(`join?code=${T.toUpperCase()}`))):alert("Invalid QR code: No event code found in URL.")}catch{typeof w=="string"&&w.trim().length>3?(m(),n(Mn(`join?code=${w.toUpperCase()}`))):alert("Invalid QR code format.")}},c=w=>{m(),n(Mn(`join?code=${w.toUpperCase()}`))},h=w=>{t(w)},m=()=>{t(null)},g=()=>{t("manualCodeEntry")};return A.jsxs("div",{className:"min-h-screen flex flex-col justify-between items-center px-6 py-8 relative overflow-hidden bg-white dark:bg-gray-900",children:[A.jsx("div",{className:"absolute inset-0 z-0",style:{background:"linear-gradient(135deg, rgba(251, 167, 213, 0.8) 0%, rgba(193, 135, 253, 0.8) 100%)"}}),A.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 w-full max-w-sm mx-auto",children:[A.jsxs("div",{className:"text-center mb-12",children:[A.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:A.jsx(fd,{className:"w-10 h-10 text-white"})}),A.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("h2",{className:"text-2xl font-medium text-white mb-4",children:"Meet singles at this event."}),A.jsx("button",{onClick:()=>i(!0),className:"text-white underline text-lg hover:opacity-80 transition-opacity",children:"See how it works"})]}),A.jsxs("div",{className:"space-y-4 w-full",children:[A.jsxs(Ut,{onClick:()=>h("qrScanner"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[A.jsx(cM,{className:"w-5 h-5 mr-3"}),"Scan QR Code"]}),A.jsxs(Ut,{onClick:()=>h("manualCodeEntry"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[A.jsx(cS,{className:"w-5 h-5 mr-3"}),"Enter Code Manually"]})]})]}),A.jsx("div",{className:"relative z-10 text-center",children:A.jsxs("p",{className:"text-white text-sm leading-relaxed",children:["By creating a temporary profile, you agree to our"," ",A.jsx("a",{href:"https://hooked-app.com/terms",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Terms"})," ","and"," ",A.jsx("a",{href:"https://hooked-app.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Privacy Policy"}),"."]})}),r&&A.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-sm w-full max-h-[70vh] overflow-y-auto relative",children:[A.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(Yi,{className:"w-5 h-5"})}),A.jsxs("div",{className:"pr-8",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"How it works"}),A.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 space-y-3 text-sm leading-relaxed",children:[A.jsx("li",{children:"• Scan the event's unique QR code"}),A.jsx("li",{children:"• Create a temporary profile (first name only)"}),A.jsx("li",{children:"• Discover other singles at this event"}),A.jsx("li",{children:"• Match and chat privately"}),A.jsx("li",{children:"• Everything expires when the event ends"})]})]})]})}),e==="qrScanner"&&A.jsx(LQ,{onScan:o,onClose:m,onSwitchToManual:g}),e==="manualCodeEntry"&&A.jsx(VQ,{onSubmit:c,onClose:m})]})}const FQ={UploadFile:NU},_6=FQ.UploadFile,si=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("rounded-xl border bg-card text-card-foreground shadow",n),...e}));si.displayName="Card";const Po=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("flex flex-col space-y-1.5 p-6",n),...e}));Po.displayName="CardHeader";const co=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("font-semibold leading-none tracking-tight",n),...e}));co.displayName="CardTitle";const BQ=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));BQ.displayName="CardDescription";const oi=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("p-6 pt-0",n),...e}));oi.displayName="CardContent";const jQ=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("flex items-center p-6 pt-0",n),...e}));jQ.displayName="CardFooter";function UQ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}function E6(){const n=ta(),[e,t]=P.useState(null),[r,i]=P.useState("manual"),[o,c]=P.useState({first_name:"",age:"",gender_identity:"",interested_in:"",profile_photo_url:""}),[h,m]=P.useState(!1),[g,w]=P.useState(!1),E={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}};P.useEffect(()=>{(async()=>{const D=localStorage.getItem("currentEventId");if(!D){n(Mn("Home"));return}try{const L=await Tf.filter({id:D});L.length>0?t(L[0]):n(Mn("Home"))}catch(L){console.error("Error fetching event details:",L),n(Mn("Home"))}})()},[n]);const T=async M=>{const D=M.target.files[0];if(D){if(!D.type.startsWith("image/")){xr.error("Please select an image file.");return}if(D.size>10*1024*1024){xr.error("Image must be smaller than 10MB.");return}w(!0);try{const{file_url:L}=await _6({file:D});c(G=>({...G,profile_photo_url:L})),xr.success("Photo uploaded successfully!")}catch(L){console.error("Error uploading photo:",L),xr.error("Failed to upload photo. Please try again.")}finally{w(!1)}}},R=async M=>{if(M.preventDefault(),!o.first_name||!o.age||!o.gender_identity||!o.interested_in){xr.error("Please fill in all fields.");return}if(!o.profile_photo_url){xr.error("Please upload a profile photo.");return}m(!0),i("processing");try{const D=UQ(),L="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),G=`user_${D}@hooked-app.com`;await Ca.create({event_id:e.id,session_id:D,first_name:o.first_name,email:G,age:parseInt(o.age),gender_identity:o.gender_identity,interested_in:o.interested_in,profile_color:L,profile_photo_url:o.profile_photo_url,is_visible:!0}),localStorage.setItem("currentSessionId",D),localStorage.setItem("currentProfileColor",L),localStorage.setItem("currentProfilePhotoUrl",o.profile_photo_url),xr.success("Profile created! Welcome to the event."),n(Mn("Discovery"))}catch(D){console.error("Error creating profile:",D),xr.error("Failed to create profile. Please try again."),i("manual")}finally{m(!1)}};return A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center px-4 py-8",children:A.jsx("div",{className:"w-full max-w-md",children:A.jsxs(ap,{mode:"wait",children:[r==="manual"&&A.jsx(Zo.div,{...E,children:A.jsxs(si,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"text-center",children:[A.jsx(co,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Your Event Profile For:"}),A.jsx(co,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(e==null?void 0:e.name)||"This Event"})]}),A.jsx(oi,{children:A.jsxs("form",{onSubmit:R,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Profile Photo *"}),A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsxs("div",{className:"relative",children:[A.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:g}),A.jsx("label",{htmlFor:"profile-photo-upload",className:"w-32 h-32 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-purple-400 transition-colors bg-gray-50 dark:bg-gray-700",children:g?A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}):o.profile_photo_url?A.jsx("img",{src:o.profile_photo_url,alt:"Profile preview",className:"w-full h-full rounded-full object-cover"}):A.jsxs("div",{className:"text-center",children:[A.jsx(SM,{className:"w-8 h-8 text-gray-400 dark:text-gray-500 mx-auto mb-2"}),A.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload Photo"})]})})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Required • Max 10MB"})]})]}),A.jsx("div",{children:A.jsx(zl,{type:"text",placeholder:"First Name *",value:o.first_name,onChange:M=>c(D=>({...D,first_name:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",required:!0})}),A.jsx("div",{children:A.jsx(zl,{type:"number",placeholder:"Age *",value:o.age,onChange:M=>c(D=>({...D,age:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",min:"18",max:"99",required:!0})}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I am a... *"}),A.jsx("div",{className:"grid grid-cols-2 gap-3",children:["man","woman"].map(M=>A.jsx("button",{type:"button",onClick:()=>c(D=>({...D,gender_identity:M})),className:`py-3 px-4 rounded-xl border-2 transition-all font-medium ${o.gender_identity===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I'm interested in... *"}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:["men","women","everyone"].map(M=>A.jsx("button",{type:"button",onClick:()=>c(D=>({...D,interested_in:M})),className:`py-3 px-2 rounded-xl border-2 transition-all font-medium text-sm ${o.interested_in===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),A.jsx(Ut,{type:"submit",disabled:h||g,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white py-3 rounded-xl",children:h?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating Profile..."]}):"Join Event"})]})})]})},"manual"),r==="processing"&&A.jsx(Zo.div,{...E,children:A.jsx(si,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Creating Your Profile"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Setting up your temporary profile for this event."})]})})},"processing")]})})})}const zQ=Cg("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xo({className:n,variant:e,...t}){return A.jsx("div",{className:ln(zQ({variant:e}),n),...t})}var b6=["PageUp","PageDown"],I6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],A6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yd="Slider",[Vw,WQ,HQ]=k4(Yd),[T6,XJ]=$d(Yd,[HQ]),[GQ,Hg]=T6(Yd),C6=P.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:o=1,orientation:c="horizontal",disabled:h=!1,minStepsBetweenThumbs:m=0,defaultValue:g=[r],value:w,onValueChange:E=()=>{},onValueCommit:T=()=>{},inverted:R=!1,form:M,...D}=n,L=P.useRef(new Set),G=P.useRef(0),W=c==="horizontal"?$Q:qQ,[Y=[],Z]=Mf({prop:w,defaultProp:g,onChange:ne=>{var K;(K=[...L.current][G.current])==null||K.focus(),E(ne)}}),ie=P.useRef(Y);function F(ne){const te=ZQ(Y,ne);ee(ne,te)}function B(ne){ee(ne,G.current)}function H(){const ne=ie.current[G.current];Y[G.current]!==ne&&T(Y)}function ee(ne,te,{commit:K}={commit:!1}){const we=nZ(o),se=rZ(Math.round((ne-r)/o)*o+r,we),Ae=Mm(se,[r,i]);Z((xe=[])=>{const oe=YQ(xe,Ae,te);if(tZ(oe,m*o)){G.current=oe.indexOf(Ae);const Te=String(oe)!==String(xe);return Te&&K&&T(oe),Te?oe:xe}else return xe})}return A.jsx(GQ,{scope:n.__scopeSlider,name:t,disabled:h,min:r,max:i,valueIndexToChangeRef:G,thumbs:L.current,values:Y,orientation:c,form:M,children:A.jsx(Vw.Provider,{scope:n.__scopeSlider,children:A.jsx(Vw.Slot,{scope:n.__scopeSlider,children:A.jsx(W,{"aria-disabled":h,"data-disabled":h?"":void 0,...D,ref:e,onPointerDown:an(D.onPointerDown,()=>{h||(ie.current=Y)}),min:r,max:i,inverted:R,onSlideStart:h?void 0:F,onSlideMove:h?void 0:B,onSlideEnd:h?void 0:H,onHomeKeyDown:()=>!h&&ee(r,0,{commit:!0}),onEndKeyDown:()=>!h&&ee(i,Y.length-1,{commit:!0}),onStepKeyDown:({event:ne,direction:te})=>{if(!h){const se=b6.includes(ne.key)||ne.shiftKey&&I6.includes(ne.key)?10:1,Ae=G.current,xe=Y[Ae],oe=o*se*te;ee(xe+oe,Ae,{commit:!0})}}})})})})});C6.displayName=Yd;var[S6,R6]=T6(Yd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),$Q=P.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:o,onSlideStart:c,onSlideMove:h,onSlideEnd:m,onStepKeyDown:g,...w}=n,[E,T]=P.useState(null),R=bn(e,W=>T(W)),M=P.useRef(void 0),D=P4(i),L=D==="ltr",G=L&&!o||!L&&o;function z(W){const Y=M.current||E.getBoundingClientRect(),Z=[0,Y.width],F=h_(Z,G?[t,r]:[r,t]);return M.current=Y,F(W-Y.left)}return A.jsx(S6,{scope:n.__scopeSlider,startEdge:G?"left":"right",endEdge:G?"right":"left",direction:G?1:-1,size:"width",children:A.jsx(N6,{dir:D,"data-orientation":"horizontal",...w,ref:R,style:{...w.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:W=>{const Y=z(W.clientX);c==null||c(Y)},onSlideMove:W=>{const Y=z(W.clientX);h==null||h(Y)},onSlideEnd:()=>{M.current=void 0,m==null||m()},onStepKeyDown:W=>{const Z=A6[G?"from-left":"from-right"].includes(W.key);g==null||g({event:W,direction:Z?-1:1})}})})}),qQ=P.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:h,onStepKeyDown:m,...g}=n,w=P.useRef(null),E=bn(e,w),T=P.useRef(void 0),R=!i;function M(D){const L=T.current||w.current.getBoundingClientRect(),G=[0,L.height],W=h_(G,R?[r,t]:[t,r]);return T.current=L,W(D-L.top)}return A.jsx(S6,{scope:n.__scopeSlider,startEdge:R?"bottom":"top",endEdge:R?"top":"bottom",size:"height",direction:R?1:-1,children:A.jsx(N6,{"data-orientation":"vertical",...g,ref:E,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:D=>{const L=M(D.clientY);o==null||o(L)},onSlideMove:D=>{const L=M(D.clientY);c==null||c(L)},onSlideEnd:()=>{T.current=void 0,h==null||h()},onStepKeyDown:D=>{const G=A6[R?"from-bottom":"from-top"].includes(D.key);m==null||m({event:D,direction:G?-1:1})}})})}),N6=P.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:h,onStepKeyDown:m,...g}=n,w=Hg(Yd,t);return A.jsx(nn.span,{...g,ref:e,onKeyDown:an(n.onKeyDown,E=>{E.key==="Home"?(c(E),E.preventDefault()):E.key==="End"?(h(E),E.preventDefault()):b6.concat(I6).includes(E.key)&&(m(E),E.preventDefault())}),onPointerDown:an(n.onPointerDown,E=>{const T=E.target;T.setPointerCapture(E.pointerId),E.preventDefault(),w.thumbs.has(T)?T.focus():r(E)}),onPointerMove:an(n.onPointerMove,E=>{E.target.hasPointerCapture(E.pointerId)&&i(E)}),onPointerUp:an(n.onPointerUp,E=>{const T=E.target;T.hasPointerCapture(E.pointerId)&&(T.releasePointerCapture(E.pointerId),o(E))})})}),k6="SliderTrack",P6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=Hg(k6,t);return A.jsx(nn.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});P6.displayName=k6;var Fw="SliderRange",D6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=Hg(Fw,t),o=R6(Fw,t),c=P.useRef(null),h=bn(e,c),m=i.values.length,g=i.values.map(T=>L6(T,i.min,i.max)),w=m>1?Math.min(...g):0,E=100-Math.max(...g);return A.jsx(nn.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:h,style:{...n.style,[o.startEdge]:w+"%",[o.endEdge]:E+"%"}})});D6.displayName=Fw;var Bw="SliderThumb",O6=P.forwardRef((n,e)=>{const t=WQ(n.__scopeSlider),[r,i]=P.useState(null),o=bn(e,h=>i(h)),c=P.useMemo(()=>r?t().findIndex(h=>h.ref.current===r):-1,[t,r]);return A.jsx(KQ,{...n,ref:o,index:c})}),KQ=P.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...o}=n,c=Hg(Bw,t),h=R6(Bw,t),[m,g]=P.useState(null),w=bn(e,z=>g(z)),E=m?c.form||!!m.closest("form"):!0,T=t_(m),R=c.values[r],M=R===void 0?0:L6(R,c.min,c.max),D=QQ(r,c.values.length),L=T==null?void 0:T[h.size],G=L?JQ(L,M,h.direction):0;return P.useEffect(()=>{if(m)return c.thumbs.add(m),()=>{c.thumbs.delete(m)}},[m,c.thumbs]),A.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${M}% + ${G}px)`},children:[A.jsx(Vw.ItemSlot,{scope:n.__scopeSlider,children:A.jsx(nn.span,{role:"slider","aria-label":n["aria-label"]||D,"aria-valuemin":c.min,"aria-valuenow":R,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:w,style:R===void 0?{display:"none"}:n.style,onFocus:an(n.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),E&&A.jsx(M6,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:R},r)]})});O6.displayName=Bw;var XQ="RadioBubbleInput",M6=P.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(i,r),c=s_(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const m=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(c!==e&&w){const E=new Event("input",{bubbles:!0});w.call(h,e),h.dispatchEvent(E)}},[c,e]),A.jsx(nn.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});M6.displayName=XQ;function YQ(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,o)=>i-o)}function L6(n,e,t){const o=100/(t-e)*(n-e);return Mm(o,[0,100])}function QQ(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function ZQ(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function JQ(n,e,t){const r=n/2,o=h_([0,50],[0,r]);return(r-o(e)*t)*t}function eZ(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function tZ(n,e){if(e>0){const t=eZ(n);return Math.min(...t)>=e}return!0}function h_(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function nZ(n){return(String(n).split(".")[1]||"").length}function rZ(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var V6=C6,iZ=P6,sZ=D6,oZ=O6;const jw=P.forwardRef(({className:n,...e},t)=>A.jsxs(V6,{ref:t,className:ln("relative flex w-full touch-none select-none items-center",n),...e,children:[A.jsx(iZ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:A.jsx(sZ,{className:"absolute h-full bg-primary"})}),A.jsx(oZ,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));jw.displayName=V6.displayName;const aZ=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing"],NC=["yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function lZ({filters:n,onFiltersChange:e,onClose:t}){const[r,i]=P.useState(n),[o,c]=P.useState(!1),h=w=>{i(E=>({...E,interests:E.interests.includes(w)?E.interests.filter(T=>T!==w):[...E.interests,w]}))},m=()=>{e(r),t()},g=()=>{const w={age_min:18,age_max:99,gender:"all",interests:[]};i(w),e(w),t()};return A.jsxs(Ug,{open:!0,onOpenChange:t,children:[A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[A.jsx(zg,{className:"mb-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs(Wg,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[A.jsx(lS,{className:"w-5 h-5"}),"Filter Profiles"]}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:A.jsx(Yi,{className:"w-4 h-4"})})]})}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-base font-medium mb-4 block text-gray-900 dark:text-white",children:"Age Range"}),A.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[A.jsxs("span",{className:"text-sm font-medium text-pink-600 dark:text-pink-400",children:["Min Age: ",r.age_min]}),A.jsxs("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:["Max Age: ",r.age_max]})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Drag the handles to set your preferred age range"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Minimum Age"}),A.jsx("div",{className:"relative",children:A.jsx(jw,{value:[r.age_min],onValueChange:([w])=>i(E=>({...E,age_min:w<E.age_max?w:E.age_max-1})),min:18,max:99,step:1,className:"age-slider-min"})})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Maximum Age"}),A.jsx("div",{className:"relative",children:A.jsx(jw,{value:[r.age_max],onValueChange:([w])=>i(E=>({...E,age_max:w>E.age_min?w:E.age_min+1})),min:18,max:99,step:1,className:"age-slider-max"})})]})]})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-base font-medium mb-3 block text-gray-900 dark:text-white",children:"Must Share These Interests"}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[aZ.map(w=>A.jsx(Xo,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w)),!o&&r.interests.filter(w=>NC.includes(w)).map(w=>A.jsx(Xo,{variant:"default",className:"cursor-pointer px-3 py-2 rounded-full transition-all bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",onClick:()=>h(w),children:w},`selected-${w}`))]}),A.jsx("div",{className:"text-center mt-3",children:A.jsx(Ut,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(!o),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","aria-label":o?"Show less interests":"Show more interests",children:o?A.jsx(aS,{className:"w-5 h-5"}):A.jsx(Kw,{className:"w-5 h-5"})})}),A.jsx(ap,{children:o&&A.jsx(Zo.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:A.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:NC.map(w=>A.jsx(Xo,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w))})})}),r.interests.length>0&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Showing only people who share at least one selected interest."})]}),A.jsxs("div",{className:"flex gap-3 pt-4",children:[A.jsx(Ut,{onClick:g,variant:"outline",className:"flex-1 rounded-xl border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Reset All"}),A.jsx(Ut,{onClick:m,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl",children:"Apply Filters"})]})]})]})}),A.jsx("style",{jsx:!0,children:`
        .age-slider-min [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #f87171 0%, #f87171 100%);
          border-radius: 3px;
        }
        
        .age-slider-max [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #a855f7 0%, #a855f7 100%);
          border-radius: 3px;
        }
        
        .age-slider-min [role="slider"],
        .age-slider-max [role="slider"] {
          width: 20px;
          height: 20px;
          background: white;
          border: 3px solid;
          border-radius: 50%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          transition: all 0.2s ease;
        }
        
        .age-slider-min [role="slider"] {
          border-color: #f87171;
        }
        
        .age-slider-max [role="slider"] {
          border-color: #a855f7;
        }
        
        .age-slider-min [role="slider"]:hover,
        .age-slider-max [role="slider"]:hover {
          transform: scale(1.1);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .age-slider-min [role="slider"]:focus,
        .age-slider-max [role="slider"]:focus {
          outline: none;
          transform: scale(1.15);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
      `})]})}function F6({profile:n,onClose:e,onLike:t,isLiked:r}){if(P.useEffect(()=>{const T=R=>{R.key==="Escape"&&e()};return document.addEventListener("keydown",T),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",T),document.body.style.overflow="auto"}},[e]),!n)return null;const{profile_photo_url:i,profile_color:o,first_name:c,age:h,height:m,interests:g,bio:w}=n,E=c?c[0].toUpperCase():"?";return A.jsx(ap,{children:A.jsx(Zo.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",onClick:e,children:A.jsxs(Zo.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"relative w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[i?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:i,alt:`${c}'s profile photo`,className:"w-full h-80 object-cover",loading:"lazy",onError:T=>{T.target.style.display="none";const R=T.target.nextElementSibling;R&&(R.style.display="flex")}}),A.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl absolute inset-0",style:{backgroundColor:o||"#cccccc",display:"none"},children:E})]}):A.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl",style:{backgroundColor:o||"#cccccc"},children:E}),A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors z-10","aria-label":"Close profile",children:A.jsx(Yi,{className:"w-6 h-6"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:c}),A.jsxs("div",{className:"flex items-center gap-4 text-gray-600 dark:text-gray-400",children:[h&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(OO,{className:"w-4 h-4"}),A.jsxs("span",{children:[h," years old"]})]}),m&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(fM,{className:"w-4 h-4"}),A.jsxs("span",{children:[m," cm"]})]})]})]}),w&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"About"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:w})]}),g&&g.length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Interests"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(T=>A.jsx(Xo,{variant:"outline",className:"rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:T},T))})]}),A.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:A.jsxs(Ut,{onClick:t,disabled:r,className:`w-full rounded-xl py-3 transition-all ${r?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white"}`,children:[A.jsx(fd,{className:`w-5 h-5 mr-2 ${r?"":"hover:fill-current"}`}),r?"Already Liked":`Like ${c}`]})})]})]})})})}function B6(){const n=ta(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState([]),[h,m]=P.useState(null),[g,w]=P.useState(null),[E,T]=P.useState({age_min:18,age_max:99,gender:"all",interests:[]}),[R,M]=P.useState(!1),[D,L]=P.useState(!0),[G,z]=P.useState(new Set),[W,Y]=P.useState(null),[Z,ie]=P.useState(!0),F=P.useRef({profiles:null,likes:null});P.useEffect(()=>(ee(),()=>{B()}),[]),P.useEffect(()=>{r&&e.length>=0&&ne()},[e,E,r]),P.useEffect(()=>{const we=()=>{ie(!document.hidden)};return ie(!document.hidden),document.addEventListener("visibilitychange",we),()=>document.removeEventListener("visibilitychange",we)},[]),P.useEffect(()=>{if(!(h!=null&&h.id)||!g){B();return}H()},[h==null?void 0:h.id,g]);const B=()=>{Object.values(F.current).forEach(we=>{we&&we()}),F.current={profiles:null,likes:null},console.log("🧹 All Discovery listeners cleaned up")},H=()=>{B();try{F.current.profiles=Ca.onProfilesChange(h.id,we=>{const se=we.filter(oe=>oe.is_visible),Ae=se.find(oe=>oe.session_id===g),xe=se.filter(oe=>oe.session_id!==g);i(Ae),t(xe),Ae||(console.warn("Current user profile not found for session, redirecting."),n(Mn("Home")))},{is_visible:!0}),F.current.likes=us.onLikesChange(h.id,g,we=>{z(new Set(we.map(se=>se.liked_session_id)))}),console.log("📡 Real-time listeners setup complete")}catch(we){console.error("❌ Error setting up real-time listeners:",we)}},ee=async()=>{const we=localStorage.getItem("currentEventId"),se=localStorage.getItem("currentSessionId");if(!we||!se){n(Mn("Home"));return}w(se);try{const Ae=await Tf.filter({id:we});if(Ae.length>0)m(Ae[0]);else{n(Mn("Home"));return}}catch(Ae){console.error("Error initializing session:",Ae)}L(!1)},ne=()=>{if(!r){c([]);return}let we=e.filter(se=>{var oe;const Ae=r.interested_in==="everyone"||r.interested_in==="men"&&se.gender_identity==="man"||r.interested_in==="women"&&se.gender_identity==="woman"||r.interested_in==="non-binary"&&se.gender_identity==="non-binary",xe=se.interested_in==="everyone"||se.interested_in==="men"&&r.gender_identity==="man"||se.interested_in==="women"&&r.gender_identity==="woman"||se.interested_in==="non-binary"&&r.gender_identity==="non-binary";return!(!Ae||!xe||!(se.age>=E.age_min&&se.age<=E.age_max)||E.gender!=="all"&&se.gender_identity!==E.gender||E.interests.length>0&&!((oe=se.interests)!=null&&oe.some(Te=>E.interests.includes(Te))))});c(we)},te=async we=>{if(G.has(we.session_id)||!r)return;const se=localStorage.getItem("currentEventId"),Ae=r.session_id;try{z(Te=>new Set([...Te,we.session_id]));const xe=await us.create({event_id:se,liker_session_id:Ae,liked_session_id:we.session_id,is_mutual:!1,liker_notified_of_match:!1,liked_notified_of_match:!1}),oe=await us.filter({event_id:se,liker_session_id:we.session_id,liked_session_id:Ae});if(oe.length>0){const Te=oe[0];await us.update(xe.id,{is_mutual:!0,liker_notified_of_match:!0}),await us.update(Te.id,{is_mutual:!0,liked_notified_of_match:!0}),alert(`🎉 It's a Match! You and ${we.first_name} liked each other.`),n(Mn("Matches"))}}catch(xe){console.error("Error liking profile:",xe),z(oe=>{const Te=new Set(oe);return Te.delete(we.session_id),Te})}},K=we=>{Y(we)};return P.useEffect(()=>{const we=setInterval(()=>{},3e4);return()=>clearInterval(we)},[]),D?A.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading singles at this event..."})]})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:A.jsx(fd,{className:"w-3 h-3 text-white"})}),A.jsx("span",{className:"font-semibold text-lg bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),A.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Singles at ",h==null?void 0:h.name]}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[o.length," people discovered"]})]}),A.jsx(Ut,{onClick:()=>M(!0),variant:"outline",size:"icon",className:"rounded-full border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:A.jsx(lS,{className:"w-5 h-5"})})]}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map(we=>A.jsx("div",{className:"relative",children:A.jsx(si,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer overflow-hidden bg-white dark:bg-gray-800",onClick:()=>K(we),children:A.jsx(oi,{className:"p-0",children:A.jsxs("div",{className:"relative aspect-square",children:[we.profile_photo_url?A.jsx("img",{src:we.profile_photo_url,alt:`${we.first_name}'s profile`,className:"w-full h-full object-cover",loading:"lazy",onError:se=>{se.target.style.display="none";const Ae=se.target.nextElementSibling;Ae&&(Ae.style.display="flex")}}):null,A.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-semibold text-lg absolute inset-0",style:{backgroundColor:we.profile_color||"#cccccc",display:we.profile_photo_url?"none":"flex"},children:we.first_name[0]}),A.jsx("button",{onClick:se=>{se.stopPropagation(),te(we)},disabled:G.has(we.session_id),className:`absolute top-2 right-2 p-2 rounded-full shadow-lg transition-all ${G.has(we.session_id)?"bg-white/90 dark:bg-gray-800/90 text-pink-500 cursor-not-allowed":"bg-white/90 dark:bg-gray-800/90 text-gray-400 dark:text-gray-500 hover:bg-pink-50 dark:hover:bg-pink-900/20 hover:text-pink-500 hover:scale-110"}`,children:A.jsx(fd,{className:`w-4 h-4 ${G.has(we.session_id)?"fill-current text-pink-500":"text-gray-400 dark:text-gray-500 hover:text-pink-500"}`})}),A.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:A.jsx("h3",{className:"font-semibold text-white text-sm truncate",children:we.first_name})})]})})})},we.id))}),o.length===0&&!D&&A.jsx(si,{className:"border-0 shadow-lg mt-8 bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx(cf,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"No singles found"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"Try adjusting your filters or check back later as more people join the event."}),A.jsx(Ut,{onClick:()=>M(!0),variant:"outline",className:"rounded-xl border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:"Adjust Filters"})]})}),R&&A.jsx(lZ,{filters:E,onFiltersChange:T,onClose:()=>M(!1)}),W&&A.jsx(F6,{profile:W,onClose:()=>Y(null),onLike:()=>{te(W),Y(null)},isLiked:G.has(W.session_id)})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{onClick:()=>n(Mn("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(Uf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Profile"})]}),A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(cf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Discover"})]}),A.jsxs("button",{onClick:()=>n(Mn("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(lf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Matches"})]})]})})})]})}function xo(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function ou(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const j6=6048e5,cZ=864e5;let uZ={};function Gg(){return uZ}function Lf(n,e){var h,m,g,w;const t=Gg(),r=(e==null?void 0:e.weekStartsOn)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,i=xo(n),o=i.getDay(),c=(o<r?7:0)+o-r;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function Gm(n){return Lf(n,{weekStartsOn:1})}function U6(n){const e=xo(n),t=e.getFullYear(),r=ou(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=Gm(r),o=ou(n,0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);const c=Gm(o);return e.getTime()>=i.getTime()?t+1:e.getTime()>=c.getTime()?t:t-1}function kC(n){const e=xo(n);return e.setHours(0,0,0,0),e}function PC(n){const e=xo(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function dZ(n,e){const t=kC(n),r=kC(e),i=+t-PC(t),o=+r-PC(r);return Math.round((i-o)/cZ)}function hZ(n){const e=U6(n),t=ou(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Gm(t)}function fZ(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function pZ(n){if(!fZ(n)&&typeof n!="number")return!1;const e=xo(n);return!isNaN(Number(e))}function mZ(n){const e=xo(n),t=ou(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const gZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yZ=(n,e,t)=>{let r;const i=gZ[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function lx(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const xZ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wZ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vZ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},_Z={date:lx({formats:xZ,defaultWidth:"full"}),time:lx({formats:wZ,defaultWidth:"full"}),dateTime:lx({formats:vZ,defaultWidth:"full"})},EZ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bZ=(n,e,t,r)=>EZ[n];function Nh(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,h=t!=null&&t.width?String(t.width):c;i=n.formattingValues[h]||n.formattingValues[c]}else{const c=n.defaultWidth,h=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[h]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const IZ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},AZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},TZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},CZ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},RZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NZ=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},kZ={ordinalNumber:NZ,era:Nh({values:IZ,defaultWidth:"wide"}),quarter:Nh({values:AZ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Nh({values:TZ,defaultWidth:"wide"}),day:Nh({values:CZ,defaultWidth:"wide"}),dayPeriod:Nh({values:SZ,defaultWidth:"wide",formattingValues:RZ,defaultFormattingWidth:"wide"})};function kh(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const c=o[0],h=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(h)?DZ(h,E=>E.test(c)):PZ(h,E=>E.test(c));let g;g=n.valueCallback?n.valueCallback(m):m,g=t.valueCallback?t.valueCallback(g):g;const w=e.slice(c.length);return{value:g,rest:w}}}function PZ(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function DZ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function OZ(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(i.length);return{value:c,rest:h}}}const MZ=/^(\d+)(th|st|nd|rd)?/i,LZ=/\d+/i,VZ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FZ={any:[/^b/i,/^(a|c)/i]},BZ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jZ={any:[/1/i,/2/i,/3/i,/4/i]},UZ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WZ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HZ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},GZ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$Z={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qZ={ordinalNumber:OZ({matchPattern:MZ,parsePattern:LZ,valueCallback:n=>parseInt(n,10)}),era:kh({matchPatterns:VZ,defaultMatchWidth:"wide",parsePatterns:FZ,defaultParseWidth:"any"}),quarter:kh({matchPatterns:BZ,defaultMatchWidth:"wide",parsePatterns:jZ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:kh({matchPatterns:UZ,defaultMatchWidth:"wide",parsePatterns:zZ,defaultParseWidth:"any"}),day:kh({matchPatterns:WZ,defaultMatchWidth:"wide",parsePatterns:HZ,defaultParseWidth:"any"}),dayPeriod:kh({matchPatterns:GZ,defaultMatchWidth:"any",parsePatterns:$Z,defaultParseWidth:"any"})},KZ={code:"en-US",formatDistance:yZ,formatLong:_Z,formatRelative:bZ,localize:kZ,match:qZ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function XZ(n){const e=xo(n);return dZ(e,mZ(e))+1}function YZ(n){const e=xo(n),t=+Gm(e)-+hZ(e);return Math.round(t/j6)+1}function z6(n,e){var w,E,T,R;const t=xo(n),r=t.getFullYear(),i=Gg(),o=(e==null?void 0:e.firstWeekContainsDate)??((E=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((R=(T=i.locale)==null?void 0:T.options)==null?void 0:R.firstWeekContainsDate)??1,c=ou(n,0);c.setFullYear(r+1,0,o),c.setHours(0,0,0,0);const h=Lf(c,e),m=ou(n,0);m.setFullYear(r,0,o),m.setHours(0,0,0,0);const g=Lf(m,e);return t.getTime()>=h.getTime()?r+1:t.getTime()>=g.getTime()?r:r-1}function QZ(n,e){var h,m,g,w;const t=Gg(),r=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,i=z6(n,e),o=ou(n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Lf(o,e)}function ZZ(n,e){const t=xo(n),r=+Lf(t,e)-+QZ(t,e);return Math.round(r/j6)+1}function wn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const xl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return wn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):wn(t+1,2)},d(n,e){return wn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return wn(n.getHours()%12||12,e.length)},H(n,e){return wn(n.getHours(),e.length)},m(n,e){return wn(n.getMinutes(),e.length)},s(n,e){return wn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return wn(i,e.length)}},$u={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DC={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return xl.y(n,e)},Y:function(n,e,t,r){const i=z6(n,r),o=i>0?i:1-i;if(e==="YY"){const c=o%100;return wn(c,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):wn(o,e.length)},R:function(n,e){const t=U6(n);return wn(t,e.length)},u:function(n,e){const t=n.getFullYear();return wn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return xl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=ZZ(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):wn(i,e.length)},I:function(n,e,t){const r=YZ(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):xl.d(n,e)},D:function(n,e,t){const r=XZ(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return wn(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return wn(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return wn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=$u.noon:r===0?i=$u.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=$u.evening:r>=12?i=$u.afternoon:r>=4?i=$u.morning:i=$u.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return xl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):xl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):xl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):xl.s(n,e)},S:function(n,e){return xl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return MC(r);case"XXXX":case"XX":return Ac(r);case"XXXXX":case"XXX":default:return Ac(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return MC(r);case"xxxx":case"xx":return Ac(r);case"xxxxx":case"xxx":default:return Ac(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+OC(r,":");case"OOOO":default:return"GMT"+Ac(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+OC(r,":");case"zzzz":default:return"GMT"+Ac(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return wn(r,e.length)},T:function(n,e,t){const r=n.getTime();return wn(r,e.length)}};function OC(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+wn(o,2)}function MC(n,e){return n%60===0?(n>0?"-":"+")+wn(Math.abs(n)/60,2):Ac(n,e)}function Ac(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=wn(Math.trunc(r/60),2),o=wn(r%60,2);return t+i+e+o}const LC=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},W6=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},JZ=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return LC(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",LC(r,e)).replace("{{time}}",W6(i,e))},eJ={p:W6,P:JZ},tJ=/^D+$/,nJ=/^Y+$/,rJ=["D","DD","YY","YYYY"];function iJ(n){return tJ.test(n)}function sJ(n){return nJ.test(n)}function oJ(n,e,t){const r=aJ(n,e,t);if(console.warn(r),rJ.includes(n))throw new RangeError(r)}function aJ(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uJ=/^'([^]*?)'?$/,dJ=/''/g,hJ=/[a-zA-Z]/;function fJ(n,e,t){var w,E,T,R;const r=Gg(),i=r.locale??KZ,o=r.firstWeekContainsDate??((E=(w=r.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)??1,c=r.weekStartsOn??((R=(T=r.locale)==null?void 0:T.options)==null?void 0:R.weekStartsOn)??0,h=xo(n);if(!pZ(h))throw new RangeError("Invalid time value");let m=e.match(cJ).map(M=>{const D=M[0];if(D==="p"||D==="P"){const L=eJ[D];return L(M,i.formatLong)}return M}).join("").match(lJ).map(M=>{if(M==="''")return{isToken:!1,value:"'"};const D=M[0];if(D==="'")return{isToken:!1,value:pJ(M)};if(DC[D])return{isToken:!0,value:M};if(D.match(hJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:M}});i.localize.preprocessor&&(m=i.localize.preprocessor(h,m));const g={firstWeekContainsDate:o,weekStartsOn:c,locale:i};return m.map(M=>{if(!M.isToken)return M.value;const D=M.value;(sJ(D)||iJ(D))&&oJ(D,e,String(n));const L=DC[D[0]];return L(h,D,i.localize,g)}).join("")}function pJ(n){const e=n.match(uJ);return e?e[1].replace(dJ,"'"):n}function mJ({matchName:n,onConfirm:e,onCancel:t,isSharing:r}){const[i,o]=P.useState({fullName:"",phoneNumber:""}),[c,h]=P.useState("confirm"),[m,g]=P.useState(!1),w=async()=>{var R,M,D,L;if(g(!0),navigator.contacts)try{const G=await navigator.contacts.select(["name","tel"]);if(G&&G.length>0){const z=G[0],W=((M=(R=z.name)==null?void 0:R[0])==null?void 0:M.formatted)||"",Y=((L=(D=z.tel)==null?void 0:D[0])==null?void 0:L.value)||"";if(W&&Y){o({fullName:W,phoneNumber:Y}),T({fullName:W,phoneNumber:Y}),g(!1);return}}}catch{console.log("Contact access not available or denied, falling back to manual entry")}h("enter"),g(!1)},E=()=>{!i.fullName.trim()||!i.phoneNumber.trim()||T(i)},T=async R=>{g(!0);try{await e(R),h("success"),setTimeout(()=>{t()},2e3)}catch(M){console.error("Error sharing contact info:",M),alert("Failed to share contact info. Please try again.")}g(!1)};return A.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:A.jsxs(Zo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl relative",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:A.jsx(Yi,{className:"w-5 h-5"})}),c==="confirm"&&A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(px,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Share Contact Info?"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:["This will share your name and phone number with ",A.jsx("span",{className:"font-medium",children:n}),". This action cannot be undone."]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx(Ut,{onClick:t,variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:m,children:"Not Yet"}),A.jsx(Ut,{onClick:w,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:m,children:m?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Share"})]})]}),c==="enter"&&A.jsxs("div",{children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Uf,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-center text-gray-900 dark:text-white",children:"Enter Your Contact Info"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center text-sm",children:["Please enter your details to share with ",n]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx(cs,{htmlFor:"fullName",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),A.jsx(zl,{id:"fullName",type:"text",placeholder:"Your full name",value:i.fullName,onChange:R=>o(M=>({...M,fullName:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",autoFocus:!0})]}),A.jsxs("div",{children:[A.jsx(cs,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),A.jsx(zl,{id:"phoneNumber",type:"tel",placeholder:"Your phone number",value:i.phoneNumber,onChange:R=>o(M=>({...M,phoneNumber:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),A.jsxs("div",{className:"flex gap-3 mt-6",children:[A.jsx(Ut,{onClick:()=>h("confirm"),variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Back"}),A.jsx(Ut,{onClick:E,disabled:!i.fullName.trim()||!i.phoneNumber.trim()||m,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",children:m?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Confirm Share"})]})]}),c==="success"&&A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(zO,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Contact Info Shared!"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:["Your contact information has been shared with ",n,". They can now see your name and phone number."]})]})]})})}function gJ({match:n,onClose:e}){var te;const[t,r]=P.useState([]),[i,o]=P.useState(""),[c,h]=P.useState(!0),[m,g]=P.useState(!1),[w,E]=P.useState(!1),[T,R]=P.useState(null),[M,D]=P.useState(!0),L=P.useRef(null),G=localStorage.getItem("currentSessionId"),z=localStorage.getItem("currentEventId"),W=`${G}_${n.session_id}`.split("").sort().join(""),[Y,Z]=P.useState(!1);P.useEffect(()=>{Z(!1)},[n.session_id]);const ie=P.useCallback(async()=>{try{const K=await kc.filter({match_id:W,receiver_session_id:G,is_read:!1,event_id:z});K.length>0&&await Promise.all(K.map(we=>kc.update(we.id,{is_read:!0})))}catch(K){console.error("Error marking messages as read:",K)}},[W,G,z]),F=P.useCallback(async()=>{try{const K=await kc.filter({event_id:z,match_id:W},"created_date");r(K),ie()}catch(K){console.error("Error loading messages:",K)}h(!1)},[z,W,ie]);P.useEffect(()=>{const K=()=>{D(!document.hidden)};return document.addEventListener("visibilitychange",K),()=>document.removeEventListener("visibilitychange",K)},[]),P.useEffect(()=>{F(),H();const K=setInterval(()=>{M&&(F(),H())},3e4);return()=>clearInterval(K)},[M,F]),P.useEffect(()=>{B()},[t]);const B=()=>{var K;(K=L.current)==null||K.scrollIntoView({behavior:"smooth"})},H=async()=>{try{(await Oy.filter({event_id:z,match_id:W,sharer_session_id:G})).length>0&&E(!0);const we=await Oy.filter({event_id:z,match_id:W,sharer_session_id:n.session_id,recipient_session_id:G});we.length>0&&R(we[0])}catch(K){console.error("Error loading contact shares:",K)}},ee=async K=>{if(K.preventDefault(),!i.trim())return;const we=i.trim();o("");try{const se={id:`temp_${Date.now()}`,content:we,sender_session_id:G,created_date:new Date().toISOString()};r(Ae=>[...Ae,se]),await kc.create({event_id:z,sender_session_id:G,receiver_session_id:n.session_id,content:we,match_id:W,is_read:!1})}catch(se){console.error("Error sending message:",se),r(Ae=>Ae.filter(xe=>!xe.id.startsWith("temp_"))),o(we)}},ne=async K=>{try{await Oy.create({event_id:z,sharer_session_id:G,recipient_session_id:n.session_id,full_name:K.fullName,phone_number:K.phoneNumber,match_id:W}),E(!0),g(!1),H()}catch(we){throw console.error("Error sharing contact info:",we),we}};return A.jsx(Ug,{open:!0,onOpenChange:e,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm h-[600px] bg-white dark:bg-gray-900 rounded-2xl flex flex-col shadow-2xl",children:[A.jsxs(zg,{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-t-2xl",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[n.profile_photo_url&&!Y?A.jsx("img",{src:n.profile_photo_url,alt:`${n.first_name}'s avatar`,className:"w-10 h-10 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700",loading:"lazy",onError:()=>Z(!0)}):A.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:n.profile_color},children:n.first_name[0]}),A.jsxs("div",{children:[A.jsx(Wg,{className:"text-lg text-gray-900 dark:text-white",children:n.first_name}),A.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A.jsx(Yw,{className:"w-3 h-3 text-gray-400 dark:text-gray-500"}),A.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Expires at midnight"})]})]}),A.jsxs("div",{className:"flex gap-1",children:[!w&&A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>g(!0),className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",title:"Share contact info",children:A.jsx(wb,{className:"w-4 h-4"})}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(Yi,{className:"w-4 h-4"})})]})]}),A.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:(te=n.interests)==null?void 0:te.map(K=>A.jsx(Xo,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-700 text-purple-600 dark:text-purple-300 bg-white dark:bg-gray-800",children:K},K))}),(w||T)&&A.jsxs("div",{className:"mt-3 space-y-2",children:[w&&A.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[A.jsx(wb,{className:"w-3 h-3"}),A.jsx("span",{children:"You shared your contact info"})]}),T&&A.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 mb-2",children:[A.jsx(px,{className:"w-3 h-3"}),A.jsxs("span",{children:[n.first_name," shared their contact info"]})]}),A.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(Uf,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),A.jsx("span",{className:"font-medium",children:T.full_name})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(px,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),A.jsx("span",{className:"font-mono",children:T.phone_number})]})]})]})]})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-800",children:[c?A.jsx("div",{className:"flex justify-center py-8",children:A.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):t.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:A.jsxs("p",{className:"text-sm",children:["🎉 You matched! Say hello to ",n.first_name]})}):t.map(K=>A.jsx("div",{className:`flex ${K.sender_session_id===G?"justify-end":"justify-start"}`,children:A.jsxs("div",{className:`max-w-[80%] px-4 py-2 rounded-2xl ${K.sender_session_id===G?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[A.jsx("p",{className:"text-sm",children:K.content}),A.jsx("p",{className:`text-xs mt-1 ${K.sender_session_id===G?"text-purple-100":"text-gray-500 dark:text-gray-400"}`,children:fJ(new Date(K.created_date),"HH:mm")})]})},K.id)),A.jsx("div",{ref:L})]}),A.jsx("form",{onSubmit:ee,className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 rounded-b-2xl",children:A.jsxs("div",{className:"flex gap-2",children:[A.jsx(zl,{value:i,onChange:K=>o(K.target.value),placeholder:`Message ${n.first_name}...`,className:"flex-1 rounded-full border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsx(Ut,{type:"submit",disabled:!i.trim(),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-full",size:"icon",children:A.jsx(gM,{className:"w-4 h-4"})})]})}),m&&A.jsx(mJ,{matchName:n.first_name,onConfirm:ne,onCancel:()=>g(!1)})]})})})}function H6(){const n=ta(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState(null),[h,m]=P.useState(!0),[g,w]=P.useState(!0),E=localStorage.getItem("currentSessionId"),T=localStorage.getItem("currentEventId"),R=P.useRef({matches:null,messages:null}),M=P.useCallback(async z=>{if(!E||!T||z.length===0)return;const W=await us.filter({event_id:T,is_mutual:!0});for(const Y of z){const Z=W.find(F=>F.liker_session_id===E&&F.liked_session_id===Y.session_id);if(Z&&!Z.liker_notified_of_match)try{await us.update(Z.id,{liker_notified_of_match:!0})}catch(F){console.error("Error updating my like notification status:",F)}const ie=W.find(F=>F.liker_session_id===Y.session_id&&F.liked_session_id===E);if(ie&&!ie.liked_notified_of_match)try{await us.update(ie.id,{liked_notified_of_match:!0})}catch(F){console.error("Error updating their like notification status:",F)}}},[E,T]),D=P.useCallback(async()=>{if(!E||!T){m(!1);return}try{const z=await us.filter({liker_session_id:E,event_id:T,is_mutual:!0}),W=await us.filter({liked_session_id:E,event_id:T,is_mutual:!0}),Y=new Set([...z.map(F=>F.liked_session_id),...W.map(F=>F.liker_session_id)]);if(Y.size===0){t([]),m(!1);return}const Z=await Ca.filter({session_id:Array.from(Y),event_id:T}),ie=await Promise.all(Z.map(async F=>{const B=[E,F.session_id].sort(),H=`${B[0]}_${B[1]}`,ee=await kc.filter({match_id:H,receiver_session_id:E,is_read:!1,event_id:T});return{...F,unreadCount:ee.length}}));t(ie.filter(Boolean)),Z.length>0&&M(Z)}catch(z){console.error("Error loading matches:",z)}m(!1)},[E,T,M]),L=()=>{Object.values(R.current).forEach(z=>{z&&z()}),R.current={matches:null,messages:null},console.log("🧹 All Matches listeners cleaned up")},G=P.useCallback(()=>{if(!E||!T){L();return}L();try{R.current.matches=us.onLikesChange(T,E,async z=>{z.filter(Y=>Y.is_mutual).length>0&&await D()}),R.current.messages=kc.onMessagesChange(T,E,async z=>{await D()}),console.log("📡 Matches real-time listeners setup complete")}catch(z){console.error("❌ Error setting up Matches real-time listeners:",z)}},[E,T,D]);return P.useEffect(()=>(D(),G(),()=>{L()}),[D,G]),P.useEffect(()=>{const z=()=>{w(!document.hidden)};return document.addEventListener("visibilitychange",z),()=>document.removeEventListener("visibilitychange",z)},[]),P.useEffect(()=>{const W=new URLSearchParams(window.location.search).get("openChat");if(W&&e.length>0){const Y=e.find(Z=>Z.session_id===W);Y&&(i(Y),window.history.replaceState({},document.title,window.location.pathname))}},[e]),P.useEffect(()=>{const z=setInterval(()=>{},3e4);return()=>clearInterval(z)},[]),h?A.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your matches..."})]})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:A.jsx(fd,{className:"w-8 h-8 text-white"})}),A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Matches"}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.length," mutual ",e.length===1?"connection":"connections"," at this event"]})]}),A.jsxs("div",{className:"space-y-4",children:[e.map(z=>{var W,Y;return A.jsx(si,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-white dark:bg-gray-800",children:A.jsx(oi,{className:"p-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("div",{className:"relative",children:[z.profile_photo_url?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:z.profile_photo_url,alt:`${z.first_name}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700 cursor-pointer hover:opacity-80 transition-opacity",loading:"lazy",onClick:()=>c(z),onError:Z=>{Z.target.style.display="none";const ie=Z.target.nextElementSibling;ie&&(ie.style.display="flex")}}),A.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity absolute inset-0 border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color,display:"none"},onClick:()=>c(z),children:z.first_name[0]})]}):A.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color},onClick:()=>c(z),children:z.first_name[0]}),A.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center shadow-md",children:A.jsx(wM,{className:"w-3 h-3 text-white"})})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:z.first_name}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[z.age," years old"]}),A.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(W=z.interests)==null?void 0:W.slice(0,2).map(Z=>A.jsx(Xo,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:Z},Z)),((Y=z.interests)==null?void 0:Y.length)>2&&A.jsxs(Xo,{variant:"outline",className:"text-xs rounded-full border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:["+",z.interests.length-2]})]})]})]}),A.jsxs("div",{className:"flex flex-col items-center gap-2",children:[A.jsx(Ut,{onClick:()=>i(z),className:"bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full",size:"icon",children:A.jsx(lf,{className:"w-5 h-5"})}),z.unreadCount>0&&A.jsx(Xo,{className:"bg-red-500 text-white rounded-full px-2 py-0.5 text-xs",children:z.unreadCount})]})]})})},z.id)}),e.length===0&&!h&&A.jsx(si,{className:"border-0 shadow-lg bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx(cf,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),A.jsx("h3",{className:"font-semibold text-xl text-gray-900 dark:text-white mb-2",children:"No matches yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start liking profiles to find your matches! When someone likes you back, they'll appear here."}),A.jsx(Ut,{onClick:()=>n(Mn("Discovery")),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl px-6",children:"Discover Singles"})]})})]})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{onClick:()=>n(Mn("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(Uf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Profile"})]}),A.jsxs("button",{onClick:()=>n(Mn("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(cf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Discover"})]}),A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(lf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Matches"})]})]})})}),r&&A.jsx(gJ,{match:r,onClose:()=>{i(null),D()}}),o&&A.jsx(F6,{profile:o,onClose:()=>c(null),onLike:()=>{c(null)},isLiked:!0})]})}function yJ(){const n=ta(),[e,t]=P.useState(!0),[r,i]=P.useState(null);P.useEffect(()=>{o()},[]);const o=async()=>{try{console.log("Starting event join process...");const m=new URLSearchParams(window.location.search).get("code");if(console.log("Event code from URL:",m),!m){i("No event code provided in the URL."),t(!1);return}console.log("Fetching events with code:",m.toUpperCase());try{const M=await Tf.list();console.log("All events in database:",M)}catch(M){console.error("Error listing all events:",M)}const g=await Tf.filter({event_code:m.toUpperCase()});if(console.log("Found events:",g),g.length===0){i(`Event code "${m.toUpperCase()}" not found. Please check the code and try again.`),t(!1);return}const w=g[0],E=new Date().toISOString();if(!w.starts_at||!w.expires_at){i("This event is not configured correctly. Please contact the organizer."),t(!1);return}const T=w.starts_at<=E&&E<w.expires_at;if(E<w.starts_at){i("This event hasn't started yet. Try again soon!"),t(!1);return}if(E>=w.expires_at){i("This event has ended."),t(!1);return}localStorage.setItem("currentEventId",w.id),localStorage.setItem("currentEventCode",w.event_code);const R=localStorage.getItem("currentSessionId");if(R)try{if((await Ca.filter({session_id:R,event_id:w.id})).length>0){n(Mn("Discovery"));return}}catch(M){console.warn("Error checking existing profile:",M)}n(Mn("Consent"))}catch(h){console.error("Error processing event join:",h),console.error("Error details:",{message:h.message,stack:h.stack,name:h.name}),i(`Unable to process event access: ${h.message}. Please try again.`),t(!1)}},c=()=>{n(Mn("Home"))};return e?A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(si,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Joining Event..."}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we verify your event access."})]})})}):r?A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(si,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx(Xw,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to Join Event"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),A.jsx("div",{className:"flex gap-3",children:A.jsx(Ut,{onClick:c,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",children:"Return to Home"})})]})})}):A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(si,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Processing..."}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Redirecting you to the event."})]})})})}var $g="Switch",[xJ,YJ]=$d($g),[wJ,vJ]=xJ($g),G6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:o,required:c,disabled:h,value:m="on",onCheckedChange:g,form:w,...E}=n,[T,R]=P.useState(null),M=bn(e,W=>R(W)),D=P.useRef(!1),L=T?w||!!T.closest("form"):!0,[G,z]=Mf({prop:i,defaultProp:o??!1,onChange:g,caller:$g});return A.jsxs(wJ,{scope:t,checked:G,disabled:h,children:[A.jsx(nn.button,{type:"button",role:"switch","aria-checked":G,"aria-required":c,"data-state":X6(G),"data-disabled":h?"":void 0,disabled:h,value:m,...E,ref:M,onClick:an(n.onClick,W=>{z(Y=>!Y),L&&(D.current=W.isPropagationStopped(),D.current||W.stopPropagation())})}),L&&A.jsx(K6,{control:T,bubbles:!D.current,name:r,value:m,checked:G,required:c,disabled:h,form:w,style:{transform:"translateX(-100%)"}})]})});G6.displayName=$g;var $6="SwitchThumb",q6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=vJ($6,t);return A.jsx(nn.span,{"data-state":X6(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});q6.displayName=$6;var _J="SwitchBubbleInput",K6=P.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},o)=>{const c=P.useRef(null),h=bn(c,o),m=s_(t),g=t_(e);return P.useEffect(()=>{const w=c.current;if(!w)return;const E=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(E,"checked").set;if(m!==t&&R){const M=new Event("click",{bubbles:r});R.call(w,t),w.dispatchEvent(M)}},[m,t,r]),A.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:h,style:{...i.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});K6.displayName=_J;function X6(n){return n?"checked":"unchecked"}var Y6=G6,EJ=q6;const Q6=P.forwardRef(({className:n,...e},t)=>A.jsx(Y6,{className:ln("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:A.jsx(EJ,{className:ln("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Q6.displayName=Y6.displayName;const bJ=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing","yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function Z6(){var Y;const n=ta(),[e,t]=P.useState(null),[r,i]=P.useState(null),[o,c]=P.useState({bio:!1,interests:!1,height:!1}),[h,m]=P.useState({bio:"",interests:[],height:""}),[g,w]=P.useState(!0),[E,T]=P.useState(!1),R=P.useCallback(async()=>{w(!0);try{const Z=await My.me();if(!Z){n(Mn("Home"));return}t(Z),m({bio:Z.bio||"",interests:Z.interests||[],height:Z.height||""});const ie=localStorage.getItem("currentEventId"),F=localStorage.getItem("currentSessionId");if(ie&&F){const B=await Ca.filter({event_id:ie,session_id:F});B.length>0&&i(B[0])}}catch(Z){console.error("Error loading profile data:",Z),xr.error("Failed to load profile.")}finally{w(!1)}},[n]);P.useEffect(()=>{R()},[R]);const M=Z=>{c(ie=>({...ie,[Z]:!ie[Z]}))},D=Z=>{m(ie=>{const F=ie.interests.includes(Z)?ie.interests.filter(B=>B!==Z):[...ie.interests,Z];return F.length>3?(xr.warning("You can select up to 3 interests."),ie):{...ie,interests:F}})},L=async Z=>{try{await My.updateMyUserData({[Z]:h[Z]}),xr.success(`${Z.charAt(0).toUpperCase()+Z.slice(1)} updated!`),M(Z),await R()}catch(ie){console.error(`Error updating ${Z}:`,ie),xr.error(`Failed to update ${Z}.`)}},G=async Z=>{const ie=Z.target.files[0];if(ie){T(!0);try{const{file_url:F}=await _6({file:ie});await My.updateMyUserData({profile_photo_url:F}),xr.success("Profile photo updated!"),await R()}catch(F){console.error("Error uploading photo:",F),xr.error("Failed to upload photo.")}finally{T(!1)}}},z=async()=>{if(r)try{const Z=!r.is_visible;await Ca.update(r.id,{is_visible:Z}),i(ie=>({...ie,is_visible:Z})),xr.success(`Profile is now ${Z?"visible":"hidden"}.`)}catch(Z){console.error("Error updating visibility:",Z),xr.error("Failed to update visibility.")}},W=async()=>{if(!(!r||!confirm("Are you sure you want to leave this event? This will delete your profile for this event and cannot be undone.")))try{await Ca.delete(r.id),localStorage.removeItem("currentEventId"),localStorage.removeItem("currentSessionId"),localStorage.removeItem("currentEventCode"),localStorage.removeItem("currentProfileColor"),localStorage.removeItem("currentProfilePhotoUrl"),xr.success("You have left the event."),n(Mn("Home"))}catch(Z){console.error("Error leaving event:",Z),xr.error("Failed to leave event.")}};return g?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsx("style",{children:`
        .visibility-switch[data-state='checked'] {
          background-color: #34D399;
        }
        .visibility-switch[data-state='unchecked'] {
          background-color: #E5E7EB;
        }
        .dark .visibility-switch[data-state='unchecked'] {
          background-color: #4B5563;
        }
        .visibility-switch span {
          background-color: white !important;
        }
      `}),A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-4",children:[A.jsxs("label",{htmlFor:"profile-photo-upload",className:"cursor-pointer group",children:[e.profile_photo_url?A.jsx("img",{src:e.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg"}):A.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center text-white font-semibold text-4xl",style:{backgroundColor:e.profile_color},children:e.full_name?e.full_name[0]:"?"}),A.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx(fx,{className:"w-8 h-8 text-white"})})]}),A.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:G,className:"hidden",disabled:E}),E&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-white"})})]}),A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.full_name}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.age," years old"]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsx(co,{className:"text-lg text-gray-900 dark:text-white",children:"About Me"}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>M("bio"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.bio?A.jsx(Yi,{className:"w-4 h-4"}):A.jsx(gy,{className:"w-4 h-4"})})]}),A.jsx(oi,{children:o.bio?A.jsxs("div",{className:"space-y-4",children:[A.jsx(Om,{value:h.bio,onChange:Z=>m(ie=>({...ie,bio:Z.target.value})),placeholder:"Tell us a little about yourself...",className:"h-24 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsxs(Ut,{onClick:()=>L("bio"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(my,{className:"w-4 h-4 mr-2"})," Save Bio"]})]}):A.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.bio||"No bio yet. Add one!"})})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsx(co,{className:"text-lg text-gray-900 dark:text-white",children:"Interests"}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>M("interests"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.interests?A.jsx(Yi,{className:"w-4 h-4"}):A.jsx(gy,{className:"w-4 h-4"})})]}),A.jsx(oi,{children:o.interests?A.jsxs("div",{className:"space-y-4",children:[A.jsx("div",{className:"flex flex-wrap gap-2",children:bJ.map(Z=>A.jsx(Xo,{onClick:()=>D(Z),className:`cursor-pointer px-3 py-2 rounded-full transition-all ${h.interests.includes(Z)?"interest-chip-selected bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"interest-chip-default border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,children:Z},Z))}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h.interests.length," / 3 selected"]}),A.jsxs(Ut,{onClick:()=>L("interests"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(my,{className:"w-4 h-4 mr-2"})," Save Interests"]})]}):A.jsx("div",{className:"flex flex-wrap gap-2",children:((Y=e.interests)==null?void 0:Y.map(Z=>A.jsx(Xo,{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:Z},Z)))||A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No interests added yet."})})})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsx(co,{className:"text-lg text-gray-900 dark:text-white",children:"Height"}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>M("height"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.height?A.jsx(Yi,{className:"w-4 h-4"}):A.jsx(gy,{className:"w-4 h-4"})})]}),A.jsx(oi,{children:o.height?A.jsxs("div",{className:"space-y-4",children:[A.jsx(zl,{type:"number",value:h.height,onChange:Z=>m(ie=>({...ie,height:Z.target.value})),placeholder:"Height in cm",className:"w-full height-input bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsxs(Ut,{onClick:()=>L("height"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(my,{className:"w-4 h-4 mr-2"})," Save Height"]})]}):A.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.height?`${e.height} cm`:"Not specified"})})]}),r&&A.jsxs(A.Fragment,{children:[A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[r.is_visible?A.jsx(KO,{className:"w-5 h-5 text-green-500"}):A.jsx($O,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),"Event Visibility"]}),A.jsx(Q6,{checked:r.is_visible,onCheckedChange:z,className:"visibility-switch"})]}),A.jsx(oi,{children:A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.is_visible?"Your profile is visible to others at the current event.":"You are currently hidden from other attendees."})})]}),A.jsxs(si,{className:"border-0 shadow-lg border-red-100 dark:border-red-900/20 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-red-600 dark:text-red-400",children:[A.jsx(tM,{className:"w-5 h-5"}),"Leave Event"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Permanently remove your profile from this event. This action cannot be undone."}),A.jsxs(Ut,{onClick:W,variant:"destructive",className:"w-full h-auto whitespace-normal",children:[A.jsx(IM,{className:"w-4 h-4 mr-2"}),"Leave Event & Delete Event Profile"]})]})]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 mt-8 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(Xw,{className:"w-5 h-5 text-orange-500"}),"Safety & Reporting"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"If you encounter inappropriate behavior, you can report users to event moderators."}),A.jsx(Ut,{variant:"outline",className:"w-full border-orange-200 dark:border-orange-700 text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 bg-white dark:bg-gray-800",onClick:()=>{alert("Report functionality will be implemented soon.")},children:"Report a User"})]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(Yw,{className:"w-5 h-5 text-blue-500"}),"Automatic Data Expiration"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your profile, matches, and chat messages will be automatically deleted when this event ends. No data is stored permanently."}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(Mu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Profile expires automatically"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(Mu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Messages deleted at midnight"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(Mu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"No permanent account created"})]})]})]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(rM,{className:"w-5 h-5 text-purple-500"}),"Email Data Usage"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your email address is only used for post-event feedback surveys and is never visible to other users at this event."}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(Mu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Only used for feedback requests"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(Mu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Never shared with other users"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(Mu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Not used for marketing purposes"})]})]})]})]})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(Uf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Profile"})]}),A.jsxs("button",{onClick:()=>n(Mn("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(cf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Discover"})]}),A.jsxs("button",{onClick:()=>n(Mn("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(lf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Matches"})]})]})})})]})}const VC={Home:Lw,Consent:E6,Discovery:B6,Matches:H6,join:yJ,Profile:Z6};function IJ(n){n.endsWith("/")&&(n=n.slice(0,-1));let e=n.split("/").pop();return e.includes("?")&&(e=e.split("?")[0]),Object.keys(VC).find(r=>r.toLowerCase()===e.toLowerCase())||Object.keys(VC)[0]}function AJ(){const n=Ba(),e=IJ(n.pathname);return A.jsx(HY,{currentPageName:e,children:A.jsxs(Y8,{children:[A.jsx(wl,{path:"/",element:A.jsx(Lw,{})}),A.jsx(wl,{path:"/Home",element:A.jsx(Lw,{})}),A.jsx(wl,{path:"/Consent",element:A.jsx(E6,{})}),A.jsx(wl,{path:"/Discovery",element:A.jsx(B6,{})}),A.jsx(wl,{path:"/Matches",element:A.jsx(H6,{})}),A.jsx(wl,{path:"/join",element:A.jsx("join",{})}),A.jsx(wl,{path:"/Profile",element:A.jsx(Z6,{})})]})})}function TJ(){return A.jsx(wO,{children:A.jsx(AJ,{})})}const CJ=20,SJ=1e6,Ia={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let cx=0;function RJ(){return cx=(cx+1)%Number.MAX_VALUE,cx.toString()}const ux=new Map,FC=n=>{if(ux.has(n))return;const e=setTimeout(()=>{ux.delete(n),of({type:Ia.REMOVE_TOAST,toastId:n})},SJ);ux.set(n,e)},NJ=(n,e)=>{switch(e.type){case Ia.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,CJ)};case Ia.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case Ia.DISMISS_TOAST:{const{toastId:t}=e;return t?FC(t):n.toasts.forEach(r=>{FC(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case Ia.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},em=[];let tm={toasts:[]};function of(n){tm=NJ(tm,n),em.forEach(e=>{e(tm)})}function kJ({...n}){const e=RJ(),t=i=>of({type:Ia.UPDATE_TOAST,toast:{...i,id:e}}),r=()=>of({type:Ia.DISMISS_TOAST,toastId:e});return of({type:Ia.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function PJ(){const[n,e]=P.useState(tm);return P.useEffect(()=>(em.push(e),()=>{const t=em.indexOf(e);t>-1&&em.splice(t,1)}),[n]),{...n,toast:kJ,dismiss:t=>of({type:Ia.DISMISS_TOAST,toastId:t})}}const J6=P.forwardRef(({...n},e)=>A.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));J6.displayName="ToastProvider";const eD=P.forwardRef(({...n},e)=>A.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));eD.displayName="ToastViewport";const DJ=Cg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tD=P.forwardRef(({className:n,variant:e,...t},r)=>A.jsx("div",{ref:r,className:ln(DJ({variant:e}),n),...t}));tD.displayName="Toast";const OJ=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));OJ.displayName="ToastAction";const nD=P.forwardRef(({className:n,...e},t)=>A.jsx("button",{ref:t,className:ln("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:A.jsx(Yi,{className:"h-4 w-4"})}));nD.displayName="ToastClose";const rD=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm font-semibold",n),...e}));rD.displayName="ToastTitle";const iD=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm opacity-90",n),...e}));iD.displayName="ToastDescription";function MJ(){const{toasts:n}=PJ();return A.jsxs(J6,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return A.jsxs(tD,{...o,children:[A.jsxs("div",{className:"grid gap-1",children:[t&&A.jsx(rD,{children:t}),r&&A.jsx(iD,{children:r})]}),i,A.jsx(nD,{})]},e)}),A.jsx(eD,{})]})}class LJ extends ze.Component{constructor(t){super(t);ay(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ay(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("🚨 Error Boundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}reportError(t,r){const i={message:t.message,stack:t.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent};console.log("Would report error:",i)}render(){return this.state.hasError?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(TM,{className:"w-8 h-8 text-red-600"})}),A.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),A.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[A.jsx(dM,{className:"w-4 h-4"}),"Try Again"]}),A.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[A.jsx(JO,{className:"w-4 h-4"}),"Go to Home"]})]}),!1]})}):this.props.children}}const VJ=()=>{const[n,e]=P.useState(Ol.getOnlineStatus()),[t,r]=P.useState(p0()),[i,o]=P.useState(!1);P.useEffect(()=>{const g=()=>{e(!0),o(!0)},w=()=>{e(!1)},E=()=>{setTimeout(()=>{r(p0()),o(!1)},1e3)};return window.addEventListener("online",g),window.addEventListener("offline",w),window.addEventListener("appOnline",E),e(Ol.getOnlineStatus()),r(p0()),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",w),window.removeEventListener("appOnline",E)}},[]);const c=P.useCallback(async(g,w={})=>{try{return await VN(g,w)}catch(E){const T=TA(E);throw{...E,userMessage:T}}},[]),h=P.useCallback((g,w={})=>{const E=CU(g,w);return r(p0()),E},[]),m=P.useCallback(async()=>{const g=await Ol.checkConnectivity();return e(g),g},[]);return{isOnline:n,offlineQueueLength:t,isProcessingQueue:i,executeWithRetry:c,queueForOffline:h,checkConnectivity:m,getErrorMessage:TA}},FJ=()=>{const{isOnline:n,offlineQueueLength:e,isProcessingQueue:t}=VJ(),r=P.useCallback(()=>n?t?{type:"processing",message:"Processing offline actions...",icon:"🔄"}:e>0?{type:"queued",message:`${e} action${e>1?"s":""} queued for when you're back online.`,icon:"📝"}:{type:"online",message:"You're online",icon:"🌐"}:{type:"offline",message:"You're offline. Some features may be limited.",icon:"📴"},[n,e,t]);return{isOnline:n,offlineQueueLength:e,isProcessingQueue:t,statusMessage:r()}},BJ=({className:n=""})=>{const{statusMessage:e,isOnline:t,offlineQueueLength:r}=FJ();if(t&&r===0)return null;const o=(()=>{switch(e.type){case"offline":return{bgColor:"bg-red-500",textColor:"text-white",icon:A.jsx(PM,{className:"w-4 h-4"})};case"processing":return{bgColor:"bg-blue-500",textColor:"text-white",icon:A.jsx(Yw,{className:"w-4 h-4 animate-spin"})};case"queued":return{bgColor:"bg-yellow-500",textColor:"text-white",icon:A.jsx(Xw,{className:"w-4 h-4"})};default:return{bgColor:"bg-green-500",textColor:"text-white",icon:A.jsx(OM,{className:"w-4 h-4"})}}})();return A.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${n}`,children:A.jsxs("div",{className:`${o.bgColor} ${o.textColor} px-4 py-2 text-sm font-medium flex items-center justify-center gap-2`,children:[o.icon,A.jsx("span",{children:e.message})]})})};function jJ(){return A.jsxs(LJ,{children:[A.jsx(BJ,{}),A.jsx(TJ,{}),A.jsx(MJ,{}),!1]})}o8.createRoot(document.getElementById("root")).render(A.jsx(jJ,{}));
