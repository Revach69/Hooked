var LD=Object.defineProperty;var VD=(n,e,t)=>e in n?LD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ey=(n,e,t)=>VD(n,typeof e!="symbol"?e+"":e,t);function CC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zp(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ty={exports:{}},wh={},ny={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function FD(){if(XE)return Ut;XE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function T(oe){return oe===null||typeof oe!="object"?null:(oe=E&&oe[E]||oe["@@iterator"],typeof oe=="function"?oe:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,D={};function L(oe,he,Se){this.props=oe,this.context=he,this.refs=D,this.updater=Se||R}L.prototype.isReactComponent={},L.prototype.setState=function(oe,he){if(typeof oe!="object"&&typeof oe!="function"&&oe!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,oe,he,"setState")},L.prototype.forceUpdate=function(oe){this.updater.enqueueForceUpdate(this,oe,"forceUpdate")};function H(){}H.prototype=L.prototype;function z(oe,he,Se){this.props=oe,this.context=he,this.refs=D,this.updater=Se||R}var W=z.prototype=new H;W.constructor=z,M(W,L.prototype),W.isPureReactComponent=!0;var Q=Array.isArray,ie=Object.prototype.hasOwnProperty,le={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function B(oe,he,Se){var Le,it={},Re=null,Pe=null;if(he!=null)for(Le in he.ref!==void 0&&(Pe=he.ref),he.key!==void 0&&(Re=""+he.key),he)ie.call(he,Le)&&!F.hasOwnProperty(Le)&&(it[Le]=he[Le]);var Ge=arguments.length-2;if(Ge===1)it.children=Se;else if(1<Ge){for(var at=Array(Ge),st=0;st<Ge;st++)at[st]=arguments[st+2];it.children=at}if(oe&&oe.defaultProps)for(Le in Ge=oe.defaultProps,Ge)it[Le]===void 0&&(it[Le]=Ge[Le]);return{$$typeof:n,type:oe,key:Re,ref:Pe,props:it,_owner:le.current}}function G(oe,he){return{$$typeof:n,type:oe.type,key:he,ref:oe.ref,props:oe.props,_owner:oe._owner}}function J(oe){return typeof oe=="object"&&oe!==null&&oe.$$typeof===n}function te(oe){var he={"=":"=0",":":"=2"};return"$"+oe.replace(/[=:]/g,function(Se){return he[Se]})}var X=/\/+/g;function q(oe,he){return typeof oe=="object"&&oe!==null&&oe.key!=null?te(""+oe.key):he.toString(36)}function pe(oe,he,Se,Le,it){var Re=typeof oe;(Re==="undefined"||Re==="boolean")&&(oe=null);var Pe=!1;if(oe===null)Pe=!0;else switch(Re){case"string":case"number":Pe=!0;break;case"object":switch(oe.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=oe,it=it(Pe),oe=Le===""?"."+q(Pe,0):Le,Q(it)?(Se="",oe!=null&&(Se=oe.replace(X,"$&/")+"/"),pe(it,he,Se,"",function(st){return st})):it!=null&&(J(it)&&(it=G(it,Se+(!it.key||Pe&&Pe.key===it.key?"":(""+it.key).replace(X,"$&/")+"/")+oe)),he.push(it)),1;if(Pe=0,Le=Le===""?".":Le+":",Q(oe))for(var Ge=0;Ge<oe.length;Ge++){Re=oe[Ge];var at=Le+q(Re,Ge);Pe+=pe(Re,he,Se,at,it)}else if(at=T(oe),typeof at=="function")for(oe=at.call(oe),Ge=0;!(Re=oe.next()).done;)Re=Re.value,at=Le+q(Re,Ge++),Pe+=pe(Re,he,Se,at,it);else if(Re==="object")throw he=String(oe),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(oe).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return Pe}function re(oe,he,Se){if(oe==null)return oe;var Le=[],it=0;return pe(oe,Le,"","",function(Re){return he.call(Se,Re,it++)}),Le}function Ie(oe){if(oe._status===-1){var he=oe._result;he=he(),he.then(function(Se){(oe._status===0||oe._status===-1)&&(oe._status=1,oe._result=Se)},function(Se){(oe._status===0||oe._status===-1)&&(oe._status=2,oe._result=Se)}),oe._status===-1&&(oe._status=0,oe._result=he)}if(oe._status===1)return oe._result.default;throw oe._result}var we={current:null},se={transition:null},Te={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:se,ReactCurrentOwner:le};function Ne(){throw Error("act(...) is not supported in production builds of React.")}return Ut.Children={map:re,forEach:function(oe,he,Se){re(oe,function(){he.apply(this,arguments)},Se)},count:function(oe){var he=0;return re(oe,function(){he++}),he},toArray:function(oe){return re(oe,function(he){return he})||[]},only:function(oe){if(!J(oe))throw Error("React.Children.only expected to receive a single React element child.");return oe}},Ut.Component=L,Ut.Fragment=t,Ut.Profiler=i,Ut.PureComponent=z,Ut.StrictMode=r,Ut.Suspense=p,Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,Ut.act=Ne,Ut.cloneElement=function(oe,he,Se){if(oe==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+oe+".");var Le=M({},oe.props),it=oe.key,Re=oe.ref,Pe=oe._owner;if(he!=null){if(he.ref!==void 0&&(Re=he.ref,Pe=le.current),he.key!==void 0&&(it=""+he.key),oe.type&&oe.type.defaultProps)var Ge=oe.type.defaultProps;for(at in he)ie.call(he,at)&&!F.hasOwnProperty(at)&&(Le[at]=he[at]===void 0&&Ge!==void 0?Ge[at]:he[at])}var at=arguments.length-2;if(at===1)Le.children=Se;else if(1<at){Ge=Array(at);for(var st=0;st<at;st++)Ge[st]=arguments[st+2];Le.children=Ge}return{$$typeof:n,type:oe.type,key:it,ref:Re,props:Le,_owner:Pe}},Ut.createContext=function(oe){return oe={$$typeof:c,_currentValue:oe,_currentValue2:oe,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},oe.Provider={$$typeof:o,_context:oe},oe.Consumer=oe},Ut.createElement=B,Ut.createFactory=function(oe){var he=B.bind(null,oe);return he.type=oe,he},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(oe){return{$$typeof:h,render:oe}},Ut.isValidElement=J,Ut.lazy=function(oe){return{$$typeof:w,_payload:{_status:-1,_result:oe},_init:Ie}},Ut.memo=function(oe,he){return{$$typeof:g,type:oe,compare:he===void 0?null:he}},Ut.startTransition=function(oe){var he=se.transition;se.transition={};try{oe()}finally{se.transition=he}},Ut.unstable_act=Ne,Ut.useCallback=function(oe,he){return we.current.useCallback(oe,he)},Ut.useContext=function(oe){return we.current.useContext(oe)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(oe){return we.current.useDeferredValue(oe)},Ut.useEffect=function(oe,he){return we.current.useEffect(oe,he)},Ut.useId=function(){return we.current.useId()},Ut.useImperativeHandle=function(oe,he,Se){return we.current.useImperativeHandle(oe,he,Se)},Ut.useInsertionEffect=function(oe,he){return we.current.useInsertionEffect(oe,he)},Ut.useLayoutEffect=function(oe,he){return we.current.useLayoutEffect(oe,he)},Ut.useMemo=function(oe,he){return we.current.useMemo(oe,he)},Ut.useReducer=function(oe,he,Se){return we.current.useReducer(oe,he,Se)},Ut.useRef=function(oe){return we.current.useRef(oe)},Ut.useState=function(oe){return we.current.useState(oe)},Ut.useSyncExternalStore=function(oe,he,Se){return we.current.useSyncExternalStore(oe,he,Se)},Ut.useTransition=function(){return we.current.useTransition()},Ut.version="18.3.1",Ut}var YE;function Nw(){return YE||(YE=1,ny.exports=FD()),ny.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function BD(){if(QE)return wh;QE=1;var n=Nw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,g){var w,E={},T=null,R=null;g!==void 0&&(T=""+g),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(R=p.ref);for(w in p)r.call(p,w)&&!o.hasOwnProperty(w)&&(E[w]=p[w]);if(h&&h.defaultProps)for(w in p=h.defaultProps,p)E[w]===void 0&&(E[w]=p[w]);return{$$typeof:e,type:h,key:T,ref:R,props:E,_owner:i.current}}return wh.Fragment=t,wh.jsx=c,wh.jsxs=c,wh}var ZE;function jD(){return ZE||(ZE=1,ty.exports=BD()),ty.exports}var A=jD(),P=Nw();const ze=zp(P),SC=CC({__proto__:null,default:ze},[P]);var Q0={},ry={exports:{}},as={},iy={exports:{}},sy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE;function UD(){return JE||(JE=1,function(n){function e(se,Te){var Ne=se.length;se.push(Te);e:for(;0<Ne;){var oe=Ne-1>>>1,he=se[oe];if(0<i(he,Te))se[oe]=Te,se[Ne]=he,Ne=oe;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var Te=se[0],Ne=se.pop();if(Ne!==Te){se[0]=Ne;e:for(var oe=0,he=se.length,Se=he>>>1;oe<Se;){var Le=2*(oe+1)-1,it=se[Le],Re=Le+1,Pe=se[Re];if(0>i(it,Ne))Re<he&&0>i(Pe,it)?(se[oe]=Pe,se[Re]=Ne,oe=Re):(se[oe]=it,se[Le]=Ne,oe=Le);else if(Re<he&&0>i(Pe,Ne))se[oe]=Pe,se[Re]=Ne,oe=Re;else break e}}return Te}function i(se,Te){var Ne=se.sortIndex-Te.sortIndex;return Ne!==0?Ne:se.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],g=[],w=1,E=null,T=3,R=!1,M=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(se){for(var Te=t(g);Te!==null;){if(Te.callback===null)r(g);else if(Te.startTime<=se)r(g),Te.sortIndex=Te.expirationTime,e(p,Te);else break;Te=t(g)}}function Q(se){if(D=!1,W(se),!M)if(t(p)!==null)M=!0,Ie(ie);else{var Te=t(g);Te!==null&&we(Q,Te.startTime-se)}}function ie(se,Te){M=!1,D&&(D=!1,H(B),B=-1),R=!0;var Ne=T;try{for(W(Te),E=t(p);E!==null&&(!(E.expirationTime>Te)||se&&!te());){var oe=E.callback;if(typeof oe=="function"){E.callback=null,T=E.priorityLevel;var he=oe(E.expirationTime<=Te);Te=n.unstable_now(),typeof he=="function"?E.callback=he:E===t(p)&&r(p),W(Te)}else r(p);E=t(p)}if(E!==null)var Se=!0;else{var Le=t(g);Le!==null&&we(Q,Le.startTime-Te),Se=!1}return Se}finally{E=null,T=Ne,R=!1}}var le=!1,F=null,B=-1,G=5,J=-1;function te(){return!(n.unstable_now()-J<G)}function X(){if(F!==null){var se=n.unstable_now();J=se;var Te=!0;try{Te=F(!0,se)}finally{Te?q():(le=!1,F=null)}}else le=!1}var q;if(typeof z=="function")q=function(){z(X)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,re=pe.port2;pe.port1.onmessage=X,q=function(){re.postMessage(null)}}else q=function(){L(X,0)};function Ie(se){F=se,le||(le=!0,q())}function we(se,Te){B=L(function(){se(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){M||R||(M=!0,Ie(ie))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(se){switch(T){case 1:case 2:case 3:var Te=3;break;default:Te=T}var Ne=T;T=Te;try{return se()}finally{T=Ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,Te){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Ne=T;T=se;try{return Te()}finally{T=Ne}},n.unstable_scheduleCallback=function(se,Te,Ne){var oe=n.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?oe+Ne:oe):Ne=oe,se){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Ne+he,se={id:w++,callback:Te,priorityLevel:se,startTime:Ne,expirationTime:he,sortIndex:-1},Ne>oe?(se.sortIndex=Ne,e(g,se),t(p)===null&&se===t(g)&&(D?(H(B),B=-1):D=!0,we(Q,Ne-oe))):(se.sortIndex=he,e(p,se),M||R||(M=!0,Ie(ie))),se},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(se){var Te=T;return function(){var Ne=T;T=Te;try{return se.apply(this,arguments)}finally{T=Ne}}}}(sy)),sy}var eb;function zD(){return eb||(eb=1,iy.exports=UD()),iy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb;function WD(){if(tb)return as;tb=1;var n=Nw(),e=zD();function t(a){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+a,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,d){c(a,d),c(a+"Capture",d)}function c(a,d){for(i[a]=d,a=0;a<d.length;a++)r.add(d[a])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function T(a){return p.call(E,a)?!0:p.call(w,a)?!1:g.test(a)?E[a]=!0:(w[a]=!0,!1)}function R(a,d,x,b){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:x!==null?!x.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function M(a,d,x,b){if(d===null||typeof d>"u"||R(a,d,x,b))return!0;if(b)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function D(a,d,x,b,S,k,$){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=S,this.mustUseProperty=x,this.propertyName=a,this.type=d,this.sanitizeURL=k,this.removeEmptyString=$}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new D(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var d=a[0];L[d]=new D(d,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new D(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new D(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new D(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new D(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){L[a]=new D(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new D(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new D(a,5,!1,a.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var d=a.replace(H,z);L[d]=new D(d,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var d=a.replace(H,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var d=a.replace(H,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!1,!1)}),L.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!0,!0)});function W(a,d,x,b){var S=L.hasOwnProperty(d)?L[d]:null;(S!==null?S.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(M(d,x,S,b)&&(x=null),b||S===null?T(d)&&(x===null?a.removeAttribute(d):a.setAttribute(d,""+x)):S.mustUseProperty?a[S.propertyName]=x===null?S.type===3?!1:"":x:(d=S.attributeName,b=S.attributeNamespace,x===null?a.removeAttribute(d):(S=S.type,x=S===3||S===4&&x===!0?"":""+x,b?a.setAttributeNS(b,d,x):a.setAttribute(d,x))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),le=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),te=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),se=Symbol.iterator;function Te(a){return a===null||typeof a!="object"?null:(a=se&&a[se]||a["@@iterator"],typeof a=="function"?a:null)}var Ne=Object.assign,oe;function he(a){if(oe===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);oe=d&&d[1]||""}return`
`+oe+a}var Se=!1;function Le(a,d){if(!a||Se)return"";Se=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(be){var b=be}Reflect.construct(a,[],d)}else{try{d.call()}catch(be){b=be}a.call(d.prototype)}else{try{throw Error()}catch(be){b=be}a()}}catch(be){if(be&&b&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),k=b.stack.split(`
`),$=S.length-1,ne=k.length-1;1<=$&&0<=ne&&S[$]!==k[ne];)ne--;for(;1<=$&&0<=ne;$--,ne--)if(S[$]!==k[ne]){if($!==1||ne!==1)do if($--,ne--,0>ne||S[$]!==k[ne]){var ce=`
`+S[$].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=$&&0<=ne);break}}}finally{Se=!1,Error.prepareStackTrace=x}return(a=a?a.displayName||a.name:"")?he(a):""}function it(a){switch(a.tag){case 5:return he(a.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return a=Le(a.type,!1),a;case 11:return a=Le(a.type.render,!1),a;case 1:return a=Le(a.type,!0),a;default:return""}}function Re(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case F:return"Fragment";case le:return"Portal";case G:return"Profiler";case B:return"StrictMode";case q:return"Suspense";case pe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case te:return(a.displayName||"Context")+".Consumer";case J:return(a._context.displayName||"Context")+".Provider";case X:var d=a.render;return a=a.displayName,a||(a=d.displayName||d.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case re:return d=a.displayName||null,d!==null?d:Re(a.type)||"Memo";case Ie:d=a._payload,a=a._init;try{return Re(a(d))}catch{}}return null}function Pe(a){var d=a.type;switch(a.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=d.render,a=a.displayName||a.name||"",d.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(d);case 8:return d===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ge(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function at(a){var d=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function st(a){var d=at(a)?"checked":"value",x=Object.getOwnPropertyDescriptor(a.constructor.prototype,d),b=""+a[d];if(!a.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var S=x.get,k=x.set;return Object.defineProperty(a,d,{configurable:!0,get:function(){return S.call(this)},set:function($){b=""+$,k.call(this,$)}}),Object.defineProperty(a,d,{enumerable:x.enumerable}),{getValue:function(){return b},setValue:function($){b=""+$},stopTracking:function(){a._valueTracker=null,delete a[d]}}}}function ct(a){a._valueTracker||(a._valueTracker=st(a))}function Et(a){if(!a)return!1;var d=a._valueTracker;if(!d)return!0;var x=d.getValue(),b="";return a&&(b=at(a)?a.checked?"true":"false":a.value),a=b,a!==x?(d.setValue(a),!0):!1}function ht(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function gn(a,d){var x=d.checked;return Ne({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??a._wrapperState.initialChecked})}function Mn(a,d){var x=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;x=Ge(d.value!=null?d.value:x),a._wrapperState={initialChecked:b,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Pr(a,d){d=d.checked,d!=null&&W(a,"checked",d,!1)}function Qt(a,d){Pr(a,d);var x=Ge(d.value),b=d.type;if(x!=null)b==="number"?(x===0&&a.value===""||a.value!=x)&&(a.value=""+x):a.value!==""+x&&(a.value=""+x);else if(b==="submit"||b==="reset"){a.removeAttribute("value");return}d.hasOwnProperty("value")?mt(a,d.type,x):d.hasOwnProperty("defaultValue")&&mt(a,d.type,Ge(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(a.defaultChecked=!!d.defaultChecked)}function zt(a,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+a._wrapperState.initialValue,x||d===a.value||(a.value=d),a.defaultValue=d}x=a.name,x!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,x!==""&&(a.name=x)}function mt(a,d,x){(d!=="number"||ht(a.ownerDocument)!==a)&&(x==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+x&&(a.defaultValue=""+x))}var xi=Array.isArray;function Xe(a,d,x,b){if(a=a.options,d){d={};for(var S=0;S<x.length;S++)d["$"+x[S]]=!0;for(x=0;x<a.length;x++)S=d.hasOwnProperty("$"+a[x].value),a[x].selected!==S&&(a[x].selected=S),S&&b&&(a[x].defaultSelected=!0)}else{for(x=""+Ge(x),d=null,S=0;S<a.length;S++){if(a[S].value===x){a[S].selected=!0,b&&(a[S].defaultSelected=!0);return}d!==null||a[S].disabled||(d=a[S])}d!==null&&(d.selected=!0)}}function Kn(a,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ne({},d,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function wi(a,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(t(92));if(xi(x)){if(1<x.length)throw Error(t(93));x=x[0]}d=x}d==null&&(d=""),x=d}a._wrapperState={initialValue:Ge(x)}}function Zr(a,d){var x=Ge(d.value),b=Ge(d.defaultValue);x!=null&&(x=""+x,x!==a.value&&(a.value=x),d.defaultValue==null&&a.defaultValue!==x&&(a.defaultValue=x)),b!=null&&(a.defaultValue=""+b)}function Qs(a){var d=a.textContent;d===a._wrapperState.initialValue&&d!==""&&d!==null&&(a.value=d)}function Wt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xn(a,d){return a==null||a==="http://www.w3.org/1999/xhtml"?Wt(d):a==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var _r,Ln=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,b,S){MSApp.execUnsafeLocalFunction(function(){return a(d,x,b,S)})}:a}(function(a,d){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=d;else{for(_r=_r||document.createElement("div"),_r.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=_r.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}});function Jr(a,d){if(d){var x=a.firstChild;if(x&&x===a.lastChild&&x.nodeType===3){x.nodeValue=d;return}}a.textContent=d}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(a){vi.forEach(function(d){d=d+a.charAt(0).toUpperCase()+a.substring(1),Bi[d]=Bi[a]})});function An(a,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||Bi.hasOwnProperty(a)&&Bi[a]?(""+d).trim():d+"px"}function We(a,d){a=a.style;for(var x in d)if(d.hasOwnProperty(x)){var b=x.indexOf("--")===0,S=An(x,d[x],b);x==="float"&&(x="cssFloat"),b?a.setProperty(x,S):a[x]=S}}var In=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(a,d){if(d){if(In[a]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function mn(a,d){if(a.indexOf("-")===-1)return typeof d.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function zr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zs=null,Ct=null,Er=null;function Ps(a){if(a=ih(a)){if(typeof Zs!="function")throw Error(t(280));var d=a.stateNode;d&&(d=d0(d),Zs(a.stateNode,a.type,d))}}function pt(a){Ct?Er?Er.push(a):Er=[a]:Ct=a}function Gt(){if(Ct){var a=Ct,d=Er;if(Er=Ct=null,Ps(a),d)for(a=0;a<d.length;a++)Ps(d[a])}}function Tn(a,d){return a(d)}function $t(){}var br=!1;function Cn(a,d,x){if(br)return a(d,x);br=!0;try{return Tn(a,d,x)}finally{br=!1,(Ct!==null||Er!==null)&&($t(),Gt())}}function Rt(a,d){var x=a.stateNode;if(x===null)return null;var b=d0(x);if(b===null)return null;x=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(a=a.type,b=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!b;break e;default:a=!1}if(a)return null;if(x&&typeof x!="function")throw Error(t(231,d,typeof x));return x}var fs=!1;if(h)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){fs=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{fs=!1}function rr(a,d,x,b,S,k,$,ne,ce){var be=Array.prototype.slice.call(arguments,3);try{d.apply(x,be)}catch(Me){this.onError(Me)}}var Vn=!1,ur=null,Fn=!1,Ye=null,wo={onError:function(a){Vn=!0,ur=a}};function vo(a,d,x,b,S,k,$,ne,ce){Vn=!1,ur=null,rr.apply(wo,arguments)}function Wr(a,d,x,b,S,k,$,ne,ce){if(vo.apply(this,arguments),Vn){if(Vn){var be=ur;Vn=!1,ur=null}else throw Error(t(198));Fn||(Fn=!0,Ye=be)}}function ei(a){var d=a,x=a;if(a.alternate)for(;d.return;)d=d.return;else{a=d;do d=a,(d.flags&4098)!==0&&(x=d.return),a=d.return;while(a)}return d.tag===3?x:null}function Ds(a){if(a.tag===13){var d=a.memoizedState;if(d===null&&(a=a.alternate,a!==null&&(d=a.memoizedState)),d!==null)return d.dehydrated}return null}function _i(a){if(ei(a)!==a)throw Error(t(188))}function ji(a){var d=a.alternate;if(!d){if(d=ei(a),d===null)throw Error(t(188));return d!==a?null:a}for(var x=a,b=d;;){var S=x.return;if(S===null)break;var k=S.alternate;if(k===null){if(b=S.return,b!==null){x=b;continue}break}if(S.child===k.child){for(k=S.child;k;){if(k===x)return _i(S),a;if(k===b)return _i(S),d;k=k.sibling}throw Error(t(188))}if(x.return!==b.return)x=S,b=k;else{for(var $=!1,ne=S.child;ne;){if(ne===x){$=!0,x=S,b=k;break}if(ne===b){$=!0,b=S,x=k;break}ne=ne.sibling}if(!$){for(ne=k.child;ne;){if(ne===x){$=!0,x=k,b=S;break}if(ne===b){$=!0,b=k,x=S;break}ne=ne.sibling}if(!$)throw Error(t(189))}}if(x.alternate!==b)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?a:d}function Yl(a){return a=ji(a),a!==null?Ua(a):null}function Ua(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var d=Ua(a);if(d!==null)return d;a=a.sibling}return null}var li=e.unstable_scheduleCallback,Ar=e.unstable_cancelCallback,yn=e.unstable_shouldYield,au=e.unstable_requestPaint,Zt=e.unstable_now,za=e.unstable_getCurrentPriorityLevel,ke=e.unstable_ImmediatePriority,_o=e.unstable_UserBlockingPriority,Jt=e.unstable_NormalPriority,Os=e.unstable_LowPriority,lu=e.unstable_IdlePriority,jt=null,Nt=null;function Mt(a){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(jt,a,void 0,(a.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:Yn,ia=Math.log,Wa=Math.LN2;function Yn(a){return a>>>=0,a===0?32:31-(ia(a)/Wa|0)|0}var Ui=64,Ha=4194304;function pn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ei(a,d){var x=a.pendingLanes;if(x===0)return 0;var b=0,S=a.suspendedLanes,k=a.pingedLanes,$=x&268435455;if($!==0){var ne=$&~S;ne!==0?b=pn(ne):(k&=$,k!==0&&(b=pn(k)))}else $=x&~S,$!==0?b=pn($):k!==0&&(b=pn(k));if(b===0)return 0;if(d!==0&&d!==b&&(d&S)===0&&(S=b&-b,k=d&-d,S>=k||S===16&&(k&4194240)!==0))return d;if((b&4)!==0&&(b|=x&16),d=a.entangledLanes,d!==0)for(a=a.entanglements,d&=b;0<d;)x=31-Hr(d),S=1<<x,b|=a[x],d&=~S;return b}function Yd(a,d){switch(a){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(a,d){for(var x=a.suspendedLanes,b=a.pingedLanes,S=a.expirationTimes,k=a.pendingLanes;0<k;){var $=31-Hr(k),ne=1<<$,ce=S[$];ce===-1?((ne&x)===0||(ne&b)!==0)&&(S[$]=Yd(ne,d)):ce<=d&&(a.expiredLanes|=ne),k&=~ne}}function Lt(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Qn(){var a=Ui;return Ui<<=1,(Ui&4194240)===0&&(Ui=64),a}function me(a){for(var d=[],x=0;31>x;x++)d.push(a);return d}function Z(a,d,x){a.pendingLanes|=d,d!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,d=31-Hr(d),a[d]=x}function $e(a,d){var x=a.pendingLanes&~d;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=d,a.mutableReadLanes&=d,a.entangledLanes&=d,d=a.entanglements;var b=a.eventTimes;for(a=a.expirationTimes;0<x;){var S=31-Hr(x),k=1<<S;d[S]=0,b[S]=-1,a[S]=-1,x&=~k}}function Rn(a,d){var x=a.entangledLanes|=d;for(a=a.entanglements;x;){var b=31-Hr(x),S=1<<b;S&d|a[b]&d&&(a[b]|=d),x&=~S}}var bt=0;function Eo(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ga,Gr,ut,Sn,Ql,Zl=!1,Zi=[],dr=null,zi=null,ms=null,Nn=new Map,ti=new Map,$r=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cu(a,d){switch(a){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":Nn.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(d.pointerId)}}function gt(a,d,x,b,S,k){return a===null||a.nativeEvent!==k?(a={blockedOn:d,domEventName:x,eventSystemFlags:b,nativeEvent:k,targetContainers:[S]},d!==null&&(d=ih(d),d!==null&&Gr(d)),a):(a.eventSystemFlags|=b,d=a.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),a)}function Ir(a,d,x,b,S){switch(d){case"focusin":return dr=gt(dr,a,d,x,b,S),!0;case"dragenter":return zi=gt(zi,a,d,x,b,S),!0;case"mouseover":return ms=gt(ms,a,d,x,b,S),!0;case"pointerover":var k=S.pointerId;return Nn.set(k,gt(Nn.get(k)||null,a,d,x,b,S)),!0;case"gotpointercapture":return k=S.pointerId,ti.set(k,gt(ti.get(k)||null,a,d,x,b,S)),!0}return!1}function uu(a){var d=nc(a.target);if(d!==null){var x=ei(d);if(x!==null){if(d=x.tag,d===13){if(d=Ds(x),d!==null){a.blockedOn=d,Ql(a.priority,function(){ut(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){a.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ps(a){if(a.blockedOn!==null)return!1;for(var d=a.targetContainers;0<d.length;){var x=oa(a.domEventName,a.eventSystemFlags,d[0],a.nativeEvent);if(x===null){x=a.nativeEvent;var b=new x.constructor(x.type,x);ai=b,x.target.dispatchEvent(b),ai=null}else return d=ih(x),d!==null&&Gr(d),a.blockedOn=x,!1;d.shift()}return!0}function bo(a,d,x){ps(a)&&x.delete(d)}function Ms(){Zl=!1,dr!==null&&ps(dr)&&(dr=null),zi!==null&&ps(zi)&&(zi=null),ms!==null&&ps(ms)&&(ms=null),Nn.forEach(bo),ti.forEach(bo)}function gs(a,d){a.blockedOn===d&&(a.blockedOn=null,Zl||(Zl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ms)))}function ci(a){function d(S){return gs(S,a)}if(0<Zi.length){gs(Zi[0],a);for(var x=1;x<Zi.length;x++){var b=Zi[x];b.blockedOn===a&&(b.blockedOn=null)}}for(dr!==null&&gs(dr,a),zi!==null&&gs(zi,a),ms!==null&&gs(ms,a),Nn.forEach(d),ti.forEach(d),x=0;x<$r.length;x++)b=$r[x],b.blockedOn===a&&(b.blockedOn=null);for(;0<$r.length&&(x=$r[0],x.blockedOn===null);)uu(x),x.blockedOn===null&&$r.shift()}var Wi=Q.ReactCurrentBatchConfig,Ji=!0;function kn(a,d,x,b){var S=bt,k=Wi.transition;Wi.transition=null;try{bt=1,Js(a,d,x,b)}finally{bt=S,Wi.transition=k}}function sa(a,d,x,b){var S=bt,k=Wi.transition;Wi.transition=null;try{bt=4,Js(a,d,x,b)}finally{bt=S,Wi.transition=k}}function Js(a,d,x,b){if(Ji){var S=oa(a,d,x,b);if(S===null)Hg(a,d,b,hr,x),cu(a,b);else if(Ir(S,a,d,x,b))b.stopPropagation();else if(cu(a,b),d&4&&-1<xt.indexOf(a)){for(;S!==null;){var k=ih(S);if(k!==null&&Ga(k),k=oa(a,d,x,b),k===null&&Hg(a,d,b,hr,x),k===S)break;S=k}S!==null&&b.stopPropagation()}else Hg(a,d,b,null,x)}}var hr=null;function oa(a,d,x,b){if(hr=null,a=zr(b),a=nc(a),a!==null)if(d=ei(a),d===null)a=null;else if(x=d.tag,x===13){if(a=Ds(d),a!==null)return a;a=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;a=null}else d!==a&&(a=null);return hr=a,null}function $a(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(za()){case ke:return 1;case _o:return 4;case Jt:case Os:return 16;case lu:return 536870912;default:return 16}default:return 16}}var Ai=null,qa=null,Ii=null;function Jl(){if(Ii)return Ii;var a,d=qa,x=d.length,b,S="value"in Ai?Ai.value:Ai.textContent,k=S.length;for(a=0;a<x&&d[a]===S[a];a++);var $=x-a;for(b=1;b<=$&&d[x-b]===S[k-b];b++);return Ii=S.slice(a,1<b?1-b:void 0)}function en(a){var d=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&d===13&&(a=13)):a=d,a===10&&(a=13),32<=a||a===13?a:0}function ys(){return!0}function Ao(){return!1}function Dn(a){function d(x,b,S,k,$){this._reactName=x,this._targetInst=S,this.type=b,this.nativeEvent=k,this.target=$,this.currentTarget=null;for(var ne in a)a.hasOwnProperty(ne)&&(x=a[ne],this[ne]=x?x(k):k[ne]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?ys:Ao,this.isPropagationStopped=Ao,this}return Ne(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),d}var xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_e=Dn(xs),_t=Ne({},xs,{view:0,detail:0}),Tr=Dn(_t),eo,Ls,Io,aa=Ne({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Io&&(Io&&a.type==="mousemove"?(eo=a.screenX-Io.screenX,Ls=a.screenY-Io.screenY):Ls=eo=0,Io=a),eo)},movementY:function(a){return"movementY"in a?a.movementY:Ls}}),Ka=Dn(aa),la=Ne({},aa,{dataTransfer:0}),Zn=Dn(la),To=Ne({},_t,{relatedTarget:0}),xn=Dn(To),ca=Ne({},xs,{animationName:0,elapsedTime:0,pseudoElement:0}),ui=Dn(ca),sn=Ne({},xs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ft=Dn(sn),du=Ne({},xs,{data:0}),un=Dn(du),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hi(a){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(a):(a=hu[a])?!!d[a]:!1}function ts(){return Hi}var _=Ne({},_t,{key:function(a){if(a.key){var d=es[a.key]||a.key;if(d!=="Unidentified")return d}return a.type==="keypress"?(a=en(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?fr[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(a){return a.type==="keypress"?en(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?en(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),N=Dn(_),V=Ne({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y=Dn(V),ge=Ne({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Ae=Dn(ge),He=Ne({},xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),dn=Dn(He),Bn=Ne({},aa,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qt=Dn(Bn),Pn=[9,13,27,32],jn=h&&"CompositionEvent"in window,Un=null;h&&"documentMode"in document&&(Un=document.documentMode);var Ti=h&&"TextEvent"in window&&!Un,ni=h&&(!jn||Un&&8<Un&&11>=Un),Xa=" ",fu=!1;function s0(a,d){switch(a){case"keyup":return Pn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var di=!1;function jg(a,d){switch(a){case"compositionend":return Qd(d);case"keypress":return d.which!==32?null:(fu=!0,Xa);case"textInput":return a=d.data,a===Xa&&fu?null:a;default:return null}}function Zd(a,d){if(di)return a==="compositionend"||!jn&&s0(a,d)?(a=Jl(),Ii=qa=Ai=null,di=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return ni&&d.locale!=="ko"?null:d.data;default:return null}}var ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d==="input"?!!ec[a.type]:d==="textarea"}function tc(a,d,x,b){pt(b),d=l0(d,"onChange"),0<d.length&&(x=new _e("onChange","change",null,x,b),a.push({event:x,listeners:d}))}var j=null,s=null;function l(a){d_(a,0)}function u(a){var d=gu(a);if(Et(d))return a}function f(a,d){if(a==="change")return d}var m=!1;if(h){var y;if(h){var v="oninput"in document;if(!v){var I=document.createElement("div");I.setAttribute("oninput","return;"),v=typeof I.oninput=="function"}y=v}else y=!1;m=y&&(!document.documentMode||9<document.documentMode)}function C(){j&&(j.detachEvent("onpropertychange",O),s=j=null)}function O(a){if(a.propertyName==="value"&&u(s)){var d=[];tc(d,s,a,zr(a)),Cn(l,d)}}function U(a,d,x){a==="focusin"?(C(),j=d,s=x,j.attachEvent("onpropertychange",O)):a==="focusout"&&C()}function K(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return u(s)}function ee(a,d){if(a==="click")return u(d)}function ae(a,d){if(a==="input"||a==="change")return u(d)}function ue(a,d){return a===d&&(a!==0||1/a===1/d)||a!==a&&d!==d}var fe=typeof Object.is=="function"?Object.is:ue;function Ee(a,d){if(fe(a,d))return!0;if(typeof a!="object"||a===null||typeof d!="object"||d===null)return!1;var x=Object.keys(a),b=Object.keys(d);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var S=x[b];if(!p.call(d,S)||!fe(a[S],d[S]))return!1}return!0}function Fe(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function je(a,d){var x=Fe(a);a=0;for(var b;x;){if(x.nodeType===3){if(b=a+x.textContent.length,a<=d&&b>=d)return{node:x,offset:d-a};a=b}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Fe(x)}}function Oe(a,d){return a&&d?a===d?!0:a&&a.nodeType===3?!1:d&&d.nodeType===3?Oe(a,d.parentNode):"contains"in a?a.contains(d):a.compareDocumentPosition?!!(a.compareDocumentPosition(d)&16):!1:!1}function Vt(){for(var a=window,d=ht();d instanceof a.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)a=d.contentWindow;else break;d=ht(a.document)}return d}function St(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d&&(d==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||d==="textarea"||a.contentEditable==="true")}function Ci(a){var d=Vt(),x=a.focusedElem,b=a.selectionRange;if(d!==x&&x&&x.ownerDocument&&Oe(x.ownerDocument.documentElement,x)){if(b!==null&&St(x)){if(d=b.start,a=b.end,a===void 0&&(a=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(a,x.value.length);else if(a=(d=x.ownerDocument||document)&&d.defaultView||window,a.getSelection){a=a.getSelection();var S=x.textContent.length,k=Math.min(b.start,S);b=b.end===void 0?k:Math.min(b.end,S),!a.extend&&k>b&&(S=b,b=k,k=S),S=je(x,k);var $=je(x,b);S&&$&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==$.node||a.focusOffset!==$.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),a.removeAllRanges(),k>b?(a.addRange(d),a.extend($.node,$.offset)):(d.setEnd($.node,$.offset),a.addRange(d)))}}for(d=[],a=x;a=a.parentNode;)a.nodeType===1&&d.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)a=d[x],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var ws=h&&"documentMode"in document&&11>=document.documentMode,Cr=null,hn=null,ir=null,hi=!1;function ua(a,d,x){var b=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;hi||Cr==null||Cr!==ht(b)||(b=Cr,"selectionStart"in b&&St(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),ir&&Ee(ir,b)||(ir=b,b=l0(hn,"onSelect"),0<b.length&&(d=new _e("onSelect","select",null,d,x),a.push({event:d,listeners:b}),d.target=Cr)))}function to(a,d){var x={};return x[a.toLowerCase()]=d.toLowerCase(),x["Webkit"+a]="webkit"+d,x["Moz"+a]="moz"+d,x}var Ya={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},Jd={},r_={};h&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function o0(a){if(Jd[a])return Jd[a];if(!Ya[a])return a;var d=Ya[a],x;for(x in d)if(d.hasOwnProperty(x)&&x in r_)return Jd[a]=d[x];return a}var i_=o0("animationend"),s_=o0("animationiteration"),o_=o0("animationstart"),a_=o0("transitionend"),l_=new Map,c_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qa(a,d){l_.set(a,d),o(d,[a])}for(var Ug=0;Ug<c_.length;Ug++){var zg=c_[Ug],G6=zg.toLowerCase(),$6=zg[0].toUpperCase()+zg.slice(1);Qa(G6,"on"+$6)}Qa(i_,"onAnimationEnd"),Qa(s_,"onAnimationIteration"),Qa(o_,"onAnimationStart"),Qa("dblclick","onDoubleClick"),Qa("focusin","onFocus"),Qa("focusout","onBlur"),Qa(a_,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q6=new Set("cancel close invalid load scroll toggle".split(" ").concat(eh));function u_(a,d,x){var b=a.type||"unknown-event";a.currentTarget=x,Wr(b,d,void 0,a),a.currentTarget=null}function d_(a,d){d=(d&4)!==0;for(var x=0;x<a.length;x++){var b=a[x],S=b.event;b=b.listeners;e:{var k=void 0;if(d)for(var $=b.length-1;0<=$;$--){var ne=b[$],ce=ne.instance,be=ne.currentTarget;if(ne=ne.listener,ce!==k&&S.isPropagationStopped())break e;u_(S,ne,be),k=ce}else for($=0;$<b.length;$++){if(ne=b[$],ce=ne.instance,be=ne.currentTarget,ne=ne.listener,ce!==k&&S.isPropagationStopped())break e;u_(S,ne,be),k=ce}}}if(Fn)throw a=Ye,Fn=!1,Ye=null,a}function zn(a,d){var x=d[Yg];x===void 0&&(x=d[Yg]=new Set);var b=a+"__bubble";x.has(b)||(h_(d,a,2,!1),x.add(b))}function Wg(a,d,x){var b=0;d&&(b|=4),h_(x,a,b,d)}var a0="_reactListening"+Math.random().toString(36).slice(2);function th(a){if(!a[a0]){a[a0]=!0,r.forEach(function(x){x!=="selectionchange"&&(q6.has(x)||Wg(x,!1,a),Wg(x,!0,a))});var d=a.nodeType===9?a:a.ownerDocument;d===null||d[a0]||(d[a0]=!0,Wg("selectionchange",!1,d))}}function h_(a,d,x,b){switch($a(d)){case 1:var S=kn;break;case 4:S=sa;break;default:S=Js}x=S.bind(null,d,x,a),S=void 0,!fs||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),b?S!==void 0?a.addEventListener(d,x,{capture:!0,passive:S}):a.addEventListener(d,x,!0):S!==void 0?a.addEventListener(d,x,{passive:S}):a.addEventListener(d,x,!1)}function Hg(a,d,x,b,S){var k=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var $=b.tag;if($===3||$===4){var ne=b.stateNode.containerInfo;if(ne===S||ne.nodeType===8&&ne.parentNode===S)break;if($===4)for($=b.return;$!==null;){var ce=$.tag;if((ce===3||ce===4)&&(ce=$.stateNode.containerInfo,ce===S||ce.nodeType===8&&ce.parentNode===S))return;$=$.return}for(;ne!==null;){if($=nc(ne),$===null)return;if(ce=$.tag,ce===5||ce===6){b=k=$;continue e}ne=ne.parentNode}}b=b.return}Cn(function(){var be=k,Me=zr(x),Ve=[];e:{var De=l_.get(a);if(De!==void 0){var Qe=_e,et=a;switch(a){case"keypress":if(en(x)===0)break e;case"keydown":case"keyup":Qe=N;break;case"focusin":et="focus",Qe=xn;break;case"focusout":et="blur",Qe=xn;break;case"beforeblur":case"afterblur":Qe=xn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=Ka;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=Zn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=Ae;break;case i_:case s_:case o_:Qe=ui;break;case a_:Qe=dn;break;case"scroll":Qe=Tr;break;case"wheel":Qe=qt;break;case"copy":case"cut":case"paste":Qe=ft;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=Y}var ot=(d&4)!==0,Sr=!ot&&a==="scroll",xe=ot?De!==null?De+"Capture":null:De;ot=[];for(var de=be,ve;de!==null;){ve=de;var Ue=ve.stateNode;if(ve.tag===5&&Ue!==null&&(ve=Ue,xe!==null&&(Ue=Rt(de,xe),Ue!=null&&ot.push(nh(de,Ue,ve)))),Sr)break;de=de.return}0<ot.length&&(De=new Qe(De,et,null,x,Me),Ve.push({event:De,listeners:ot}))}}if((d&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",Qe=a==="mouseout"||a==="pointerout",De&&x!==ai&&(et=x.relatedTarget||x.fromElement)&&(nc(et)||et[da]))break e;if((Qe||De)&&(De=Me.window===Me?Me:(De=Me.ownerDocument)?De.defaultView||De.parentWindow:window,Qe?(et=x.relatedTarget||x.toElement,Qe=be,et=et?nc(et):null,et!==null&&(Sr=ei(et),et!==Sr||et.tag!==5&&et.tag!==6)&&(et=null)):(Qe=null,et=be),Qe!==et)){if(ot=Ka,Ue="onMouseLeave",xe="onMouseEnter",de="mouse",(a==="pointerout"||a==="pointerover")&&(ot=Y,Ue="onPointerLeave",xe="onPointerEnter",de="pointer"),Sr=Qe==null?De:gu(Qe),ve=et==null?De:gu(et),De=new ot(Ue,de+"leave",Qe,x,Me),De.target=Sr,De.relatedTarget=ve,Ue=null,nc(Me)===be&&(ot=new ot(xe,de+"enter",et,x,Me),ot.target=ve,ot.relatedTarget=Sr,Ue=ot),Sr=Ue,Qe&&et)t:{for(ot=Qe,xe=et,de=0,ve=ot;ve;ve=mu(ve))de++;for(ve=0,Ue=xe;Ue;Ue=mu(Ue))ve++;for(;0<de-ve;)ot=mu(ot),de--;for(;0<ve-de;)xe=mu(xe),ve--;for(;de--;){if(ot===xe||xe!==null&&ot===xe.alternate)break t;ot=mu(ot),xe=mu(xe)}ot=null}else ot=null;Qe!==null&&f_(Ve,De,Qe,ot,!1),et!==null&&Sr!==null&&f_(Ve,Sr,et,ot,!0)}}e:{if(De=be?gu(be):window,Qe=De.nodeName&&De.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&De.type==="file")var lt=f;else if(Kt(De))if(m)lt=ae;else{lt=K;var wt=U}else(Qe=De.nodeName)&&Qe.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(lt=ee);if(lt&&(lt=lt(a,be))){tc(Ve,lt,x,Me);break e}wt&&wt(a,De,be),a==="focusout"&&(wt=De._wrapperState)&&wt.controlled&&De.type==="number"&&mt(De,"number",De.value)}switch(wt=be?gu(be):window,a){case"focusin":(Kt(wt)||wt.contentEditable==="true")&&(Cr=wt,hn=be,ir=null);break;case"focusout":ir=hn=Cr=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,ua(Ve,x,Me);break;case"selectionchange":if(ws)break;case"keydown":case"keyup":ua(Ve,x,Me)}var vt;if(jn)e:{switch(a){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else di?s0(a,x)&&(It="onCompositionEnd"):a==="keydown"&&x.keyCode===229&&(It="onCompositionStart");It&&(ni&&x.locale!=="ko"&&(di||It!=="onCompositionStart"?It==="onCompositionEnd"&&di&&(vt=Jl()):(Ai=Me,qa="value"in Ai?Ai.value:Ai.textContent,di=!0)),wt=l0(be,It),0<wt.length&&(It=new un(It,a,null,x,Me),Ve.push({event:It,listeners:wt}),vt?It.data=vt:(vt=Qd(x),vt!==null&&(It.data=vt)))),(vt=Ti?jg(a,x):Zd(a,x))&&(be=l0(be,"onBeforeInput"),0<be.length&&(Me=new un("onBeforeInput","beforeinput",null,x,Me),Ve.push({event:Me,listeners:be}),Me.data=vt))}d_(Ve,d)})}function nh(a,d,x){return{instance:a,listener:d,currentTarget:x}}function l0(a,d){for(var x=d+"Capture",b=[];a!==null;){var S=a,k=S.stateNode;S.tag===5&&k!==null&&(S=k,k=Rt(a,x),k!=null&&b.unshift(nh(a,k,S)),k=Rt(a,d),k!=null&&b.push(nh(a,k,S))),a=a.return}return b}function mu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function f_(a,d,x,b,S){for(var k=d._reactName,$=[];x!==null&&x!==b;){var ne=x,ce=ne.alternate,be=ne.stateNode;if(ce!==null&&ce===b)break;ne.tag===5&&be!==null&&(ne=be,S?(ce=Rt(x,k),ce!=null&&$.unshift(nh(x,ce,ne))):S||(ce=Rt(x,k),ce!=null&&$.push(nh(x,ce,ne)))),x=x.return}$.length!==0&&a.push({event:d,listeners:$})}var K6=/\r\n?/g,X6=/\u0000|\uFFFD/g;function m_(a){return(typeof a=="string"?a:""+a).replace(K6,`
`).replace(X6,"")}function c0(a,d,x){if(d=m_(d),m_(a)!==d&&x)throw Error(t(425))}function u0(){}var Gg=null,$g=null;function qg(a,d){return a==="textarea"||a==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Kg=typeof setTimeout=="function"?setTimeout:void 0,Y6=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,Q6=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(a){return p_.resolve(null).then(a).catch(Z6)}:Kg;function Z6(a){setTimeout(function(){throw a})}function Xg(a,d){var x=d,b=0;do{var S=x.nextSibling;if(a.removeChild(x),S&&S.nodeType===8)if(x=S.data,x==="/$"){if(b===0){a.removeChild(S),ci(d);return}b--}else x!=="$"&&x!=="$?"&&x!=="$!"||b++;x=S}while(x);ci(d)}function Za(a){for(;a!=null;a=a.nextSibling){var d=a.nodeType;if(d===1||d===3)break;if(d===8){if(d=a.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return a}function g_(a){a=a.previousSibling;for(var d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return a;d--}else x==="/$"&&d++}a=a.previousSibling}return null}var pu=Math.random().toString(36).slice(2),Co="__reactFiber$"+pu,rh="__reactProps$"+pu,da="__reactContainer$"+pu,Yg="__reactEvents$"+pu,J6="__reactListeners$"+pu,eD="__reactHandles$"+pu;function nc(a){var d=a[Co];if(d)return d;for(var x=a.parentNode;x;){if(d=x[da]||x[Co]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(a=g_(a);a!==null;){if(x=a[Co])return x;a=g_(a)}return d}a=x,x=a.parentNode}return null}function ih(a){return a=a[Co]||a[da],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function gu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function d0(a){return a[rh]||null}var Qg=[],yu=-1;function Ja(a){return{current:a}}function Wn(a){0>yu||(a.current=Qg[yu],Qg[yu]=null,yu--)}function On(a,d){yu++,Qg[yu]=a.current,a.current=d}var el={},Si=Ja(el),ns=Ja(!1),rc=el;function xu(a,d){var x=a.type.contextTypes;if(!x)return el;var b=a.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var S={},k;for(k in x)S[k]=d[k];return b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=S),S}function rs(a){return a=a.childContextTypes,a!=null}function h0(){Wn(ns),Wn(Si)}function y_(a,d,x){if(Si.current!==el)throw Error(t(168));On(Si,d),On(ns,x)}function x_(a,d,x){var b=a.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return x;b=b.getChildContext();for(var S in b)if(!(S in d))throw Error(t(108,Pe(a)||"Unknown",S));return Ne({},x,b)}function f0(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||el,rc=Si.current,On(Si,a),On(ns,ns.current),!0}function w_(a,d,x){var b=a.stateNode;if(!b)throw Error(t(169));x?(a=x_(a,d,rc),b.__reactInternalMemoizedMergedChildContext=a,Wn(ns),Wn(Si),On(Si,a)):Wn(ns),On(ns,x)}var ha=null,m0=!1,Zg=!1;function v_(a){ha===null?ha=[a]:ha.push(a)}function tD(a){m0=!0,v_(a)}function tl(){if(!Zg&&ha!==null){Zg=!0;var a=0,d=bt;try{var x=ha;for(bt=1;a<x.length;a++){var b=x[a];do b=b(!0);while(b!==null)}ha=null,m0=!1}catch(S){throw ha!==null&&(ha=ha.slice(a+1)),li(ke,tl),S}finally{bt=d,Zg=!1}}return null}var wu=[],vu=0,p0=null,g0=0,Vs=[],Fs=0,ic=null,fa=1,ma="";function sc(a,d){wu[vu++]=g0,wu[vu++]=p0,p0=a,g0=d}function __(a,d,x){Vs[Fs++]=fa,Vs[Fs++]=ma,Vs[Fs++]=ic,ic=a;var b=fa;a=ma;var S=32-Hr(b)-1;b&=~(1<<S),x+=1;var k=32-Hr(d)+S;if(30<k){var $=S-S%5;k=(b&(1<<$)-1).toString(32),b>>=$,S-=$,fa=1<<32-Hr(d)+S|x<<S|b,ma=k+a}else fa=1<<k|x<<S|b,ma=a}function Jg(a){a.return!==null&&(sc(a,1),__(a,1,0))}function e1(a){for(;a===p0;)p0=wu[--vu],wu[vu]=null,g0=wu[--vu],wu[vu]=null;for(;a===ic;)ic=Vs[--Fs],Vs[Fs]=null,ma=Vs[--Fs],Vs[Fs]=null,fa=Vs[--Fs],Vs[Fs]=null}var vs=null,_s=null,Jn=!1,no=null;function E_(a,d){var x=zs(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=a,d=a.deletions,d===null?(a.deletions=[x],a.flags|=16):d.push(x)}function b_(a,d){switch(a.tag){case 5:var x=a.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(a.stateNode=d,vs=a,_s=Za(d.firstChild),!0):!1;case 6:return d=a.pendingProps===""||d.nodeType!==3?null:d,d!==null?(a.stateNode=d,vs=a,_s=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=ic!==null?{id:fa,overflow:ma}:null,a.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=zs(18,null,null,0),x.stateNode=d,x.return=a,a.child=x,vs=a,_s=null,!0):!1;default:return!1}}function t1(a){return(a.mode&1)!==0&&(a.flags&128)===0}function n1(a){if(Jn){var d=_s;if(d){var x=d;if(!b_(a,d)){if(t1(a))throw Error(t(418));d=Za(x.nextSibling);var b=vs;d&&b_(a,d)?E_(b,x):(a.flags=a.flags&-4097|2,Jn=!1,vs=a)}}else{if(t1(a))throw Error(t(418));a.flags=a.flags&-4097|2,Jn=!1,vs=a}}}function A_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;vs=a}function y0(a){if(a!==vs)return!1;if(!Jn)return A_(a),Jn=!0,!1;var d;if((d=a.tag!==3)&&!(d=a.tag!==5)&&(d=a.type,d=d!=="head"&&d!=="body"&&!qg(a.type,a.memoizedProps)),d&&(d=_s)){if(t1(a))throw I_(),Error(t(418));for(;d;)E_(a,d),d=Za(d.nextSibling)}if(A_(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="/$"){if(d===0){_s=Za(a.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}a=a.nextSibling}_s=null}}else _s=vs?Za(a.stateNode.nextSibling):null;return!0}function I_(){for(var a=_s;a;)a=Za(a.nextSibling)}function _u(){_s=vs=null,Jn=!1}function r1(a){no===null?no=[a]:no.push(a)}var nD=Q.ReactCurrentBatchConfig;function sh(a,d,x){if(a=x.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(t(309));var b=x.stateNode}if(!b)throw Error(t(147,a));var S=b,k=""+a;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===k?d.ref:(d=function($){var ne=S.refs;$===null?delete ne[k]:ne[k]=$},d._stringRef=k,d)}if(typeof a!="string")throw Error(t(284));if(!x._owner)throw Error(t(290,a))}return a}function x0(a,d){throw a=Object.prototype.toString.call(d),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":a))}function T_(a){var d=a._init;return d(a._payload)}function C_(a){function d(xe,de){if(a){var ve=xe.deletions;ve===null?(xe.deletions=[de],xe.flags|=16):ve.push(de)}}function x(xe,de){if(!a)return null;for(;de!==null;)d(xe,de),de=de.sibling;return null}function b(xe,de){for(xe=new Map;de!==null;)de.key!==null?xe.set(de.key,de):xe.set(de.index,de),de=de.sibling;return xe}function S(xe,de){return xe=cl(xe,de),xe.index=0,xe.sibling=null,xe}function k(xe,de,ve){return xe.index=ve,a?(ve=xe.alternate,ve!==null?(ve=ve.index,ve<de?(xe.flags|=2,de):ve):(xe.flags|=2,de)):(xe.flags|=1048576,de)}function $(xe){return a&&xe.alternate===null&&(xe.flags|=2),xe}function ne(xe,de,ve,Ue){return de===null||de.tag!==6?(de=K1(ve,xe.mode,Ue),de.return=xe,de):(de=S(de,ve),de.return=xe,de)}function ce(xe,de,ve,Ue){var lt=ve.type;return lt===F?Me(xe,de,ve.props.children,Ue,ve.key):de!==null&&(de.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ie&&T_(lt)===de.type)?(Ue=S(de,ve.props),Ue.ref=sh(xe,de,ve),Ue.return=xe,Ue):(Ue=z0(ve.type,ve.key,ve.props,null,xe.mode,Ue),Ue.ref=sh(xe,de,ve),Ue.return=xe,Ue)}function be(xe,de,ve,Ue){return de===null||de.tag!==4||de.stateNode.containerInfo!==ve.containerInfo||de.stateNode.implementation!==ve.implementation?(de=X1(ve,xe.mode,Ue),de.return=xe,de):(de=S(de,ve.children||[]),de.return=xe,de)}function Me(xe,de,ve,Ue,lt){return de===null||de.tag!==7?(de=fc(ve,xe.mode,Ue,lt),de.return=xe,de):(de=S(de,ve),de.return=xe,de)}function Ve(xe,de,ve){if(typeof de=="string"&&de!==""||typeof de=="number")return de=K1(""+de,xe.mode,ve),de.return=xe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case ie:return ve=z0(de.type,de.key,de.props,null,xe.mode,ve),ve.ref=sh(xe,null,de),ve.return=xe,ve;case le:return de=X1(de,xe.mode,ve),de.return=xe,de;case Ie:var Ue=de._init;return Ve(xe,Ue(de._payload),ve)}if(xi(de)||Te(de))return de=fc(de,xe.mode,ve,null),de.return=xe,de;x0(xe,de)}return null}function De(xe,de,ve,Ue){var lt=de!==null?de.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return lt!==null?null:ne(xe,de,""+ve,Ue);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case ie:return ve.key===lt?ce(xe,de,ve,Ue):null;case le:return ve.key===lt?be(xe,de,ve,Ue):null;case Ie:return lt=ve._init,De(xe,de,lt(ve._payload),Ue)}if(xi(ve)||Te(ve))return lt!==null?null:Me(xe,de,ve,Ue,null);x0(xe,ve)}return null}function Qe(xe,de,ve,Ue,lt){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return xe=xe.get(ve)||null,ne(de,xe,""+Ue,lt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case ie:return xe=xe.get(Ue.key===null?ve:Ue.key)||null,ce(de,xe,Ue,lt);case le:return xe=xe.get(Ue.key===null?ve:Ue.key)||null,be(de,xe,Ue,lt);case Ie:var wt=Ue._init;return Qe(xe,de,ve,wt(Ue._payload),lt)}if(xi(Ue)||Te(Ue))return xe=xe.get(ve)||null,Me(de,xe,Ue,lt,null);x0(de,Ue)}return null}function et(xe,de,ve,Ue){for(var lt=null,wt=null,vt=de,It=de=0,si=null;vt!==null&&It<ve.length;It++){vt.index>It?(si=vt,vt=null):si=vt.sibling;var on=De(xe,vt,ve[It],Ue);if(on===null){vt===null&&(vt=si);break}a&&vt&&on.alternate===null&&d(xe,vt),de=k(on,de,It),wt===null?lt=on:wt.sibling=on,wt=on,vt=si}if(It===ve.length)return x(xe,vt),Jn&&sc(xe,It),lt;if(vt===null){for(;It<ve.length;It++)vt=Ve(xe,ve[It],Ue),vt!==null&&(de=k(vt,de,It),wt===null?lt=vt:wt.sibling=vt,wt=vt);return Jn&&sc(xe,It),lt}for(vt=b(xe,vt);It<ve.length;It++)si=Qe(vt,xe,It,ve[It],Ue),si!==null&&(a&&si.alternate!==null&&vt.delete(si.key===null?It:si.key),de=k(si,de,It),wt===null?lt=si:wt.sibling=si,wt=si);return a&&vt.forEach(function(ul){return d(xe,ul)}),Jn&&sc(xe,It),lt}function ot(xe,de,ve,Ue){var lt=Te(ve);if(typeof lt!="function")throw Error(t(150));if(ve=lt.call(ve),ve==null)throw Error(t(151));for(var wt=lt=null,vt=de,It=de=0,si=null,on=ve.next();vt!==null&&!on.done;It++,on=ve.next()){vt.index>It?(si=vt,vt=null):si=vt.sibling;var ul=De(xe,vt,on.value,Ue);if(ul===null){vt===null&&(vt=si);break}a&&vt&&ul.alternate===null&&d(xe,vt),de=k(ul,de,It),wt===null?lt=ul:wt.sibling=ul,wt=ul,vt=si}if(on.done)return x(xe,vt),Jn&&sc(xe,It),lt;if(vt===null){for(;!on.done;It++,on=ve.next())on=Ve(xe,on.value,Ue),on!==null&&(de=k(on,de,It),wt===null?lt=on:wt.sibling=on,wt=on);return Jn&&sc(xe,It),lt}for(vt=b(xe,vt);!on.done;It++,on=ve.next())on=Qe(vt,xe,It,on.value,Ue),on!==null&&(a&&on.alternate!==null&&vt.delete(on.key===null?It:on.key),de=k(on,de,It),wt===null?lt=on:wt.sibling=on,wt=on);return a&&vt.forEach(function(MD){return d(xe,MD)}),Jn&&sc(xe,It),lt}function Sr(xe,de,ve,Ue){if(typeof ve=="object"&&ve!==null&&ve.type===F&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case ie:e:{for(var lt=ve.key,wt=de;wt!==null;){if(wt.key===lt){if(lt=ve.type,lt===F){if(wt.tag===7){x(xe,wt.sibling),de=S(wt,ve.props.children),de.return=xe,xe=de;break e}}else if(wt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ie&&T_(lt)===wt.type){x(xe,wt.sibling),de=S(wt,ve.props),de.ref=sh(xe,wt,ve),de.return=xe,xe=de;break e}x(xe,wt);break}else d(xe,wt);wt=wt.sibling}ve.type===F?(de=fc(ve.props.children,xe.mode,Ue,ve.key),de.return=xe,xe=de):(Ue=z0(ve.type,ve.key,ve.props,null,xe.mode,Ue),Ue.ref=sh(xe,de,ve),Ue.return=xe,xe=Ue)}return $(xe);case le:e:{for(wt=ve.key;de!==null;){if(de.key===wt)if(de.tag===4&&de.stateNode.containerInfo===ve.containerInfo&&de.stateNode.implementation===ve.implementation){x(xe,de.sibling),de=S(de,ve.children||[]),de.return=xe,xe=de;break e}else{x(xe,de);break}else d(xe,de);de=de.sibling}de=X1(ve,xe.mode,Ue),de.return=xe,xe=de}return $(xe);case Ie:return wt=ve._init,Sr(xe,de,wt(ve._payload),Ue)}if(xi(ve))return et(xe,de,ve,Ue);if(Te(ve))return ot(xe,de,ve,Ue);x0(xe,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,de!==null&&de.tag===6?(x(xe,de.sibling),de=S(de,ve),de.return=xe,xe=de):(x(xe,de),de=K1(ve,xe.mode,Ue),de.return=xe,xe=de),$(xe)):x(xe,de)}return Sr}var Eu=C_(!0),S_=C_(!1),w0=Ja(null),v0=null,bu=null,i1=null;function s1(){i1=bu=v0=null}function o1(a){var d=w0.current;Wn(w0),a._currentValue=d}function a1(a,d,x){for(;a!==null;){var b=a.alternate;if((a.childLanes&d)!==d?(a.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),a===x)break;a=a.return}}function Au(a,d){v0=a,i1=bu=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&d)!==0&&(is=!0),a.firstContext=null)}function Bs(a){var d=a._currentValue;if(i1!==a)if(a={context:a,memoizedValue:d,next:null},bu===null){if(v0===null)throw Error(t(308));bu=a,v0.dependencies={lanes:0,firstContext:a}}else bu=bu.next=a;return d}var oc=null;function l1(a){oc===null?oc=[a]:oc.push(a)}function R_(a,d,x,b){var S=d.interleaved;return S===null?(x.next=x,l1(d)):(x.next=S.next,S.next=x),d.interleaved=x,pa(a,b)}function pa(a,d){a.lanes|=d;var x=a.alternate;for(x!==null&&(x.lanes|=d),x=a,a=a.return;a!==null;)a.childLanes|=d,x=a.alternate,x!==null&&(x.childLanes|=d),x=a,a=a.return;return x.tag===3?x.stateNode:null}var nl=!1;function c1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N_(a,d){a=a.updateQueue,d.updateQueue===a&&(d.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ga(a,d){return{eventTime:a,lane:d,tag:0,payload:null,callback:null,next:null}}function rl(a,d,x){var b=a.updateQueue;if(b===null)return null;if(b=b.shared,(rn&2)!==0){var S=b.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),b.pending=d,pa(a,x)}return S=b.interleaved,S===null?(d.next=d,l1(b)):(d.next=S.next,S.next=d),b.interleaved=d,pa(a,x)}function _0(a,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}function k_(a,d){var x=a.updateQueue,b=a.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var S=null,k=null;if(x=x.firstBaseUpdate,x!==null){do{var $={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};k===null?S=k=$:k=k.next=$,x=x.next}while(x!==null);k===null?S=k=d:k=k.next=d}else S=k=d;x={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:k,shared:b.shared,effects:b.effects},a.updateQueue=x;return}a=x.lastBaseUpdate,a===null?x.firstBaseUpdate=d:a.next=d,x.lastBaseUpdate=d}function E0(a,d,x,b){var S=a.updateQueue;nl=!1;var k=S.firstBaseUpdate,$=S.lastBaseUpdate,ne=S.shared.pending;if(ne!==null){S.shared.pending=null;var ce=ne,be=ce.next;ce.next=null,$===null?k=be:$.next=be,$=ce;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,ne=Me.lastBaseUpdate,ne!==$&&(ne===null?Me.firstBaseUpdate=be:ne.next=be,Me.lastBaseUpdate=ce))}if(k!==null){var Ve=S.baseState;$=0,Me=be=ce=null,ne=k;do{var De=ne.lane,Qe=ne.eventTime;if((b&De)===De){Me!==null&&(Me=Me.next={eventTime:Qe,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var et=a,ot=ne;switch(De=d,Qe=x,ot.tag){case 1:if(et=ot.payload,typeof et=="function"){Ve=et.call(Qe,Ve,De);break e}Ve=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=ot.payload,De=typeof et=="function"?et.call(Qe,Ve,De):et,De==null)break e;Ve=Ne({},Ve,De);break e;case 2:nl=!0}}ne.callback!==null&&ne.lane!==0&&(a.flags|=64,De=S.effects,De===null?S.effects=[ne]:De.push(ne))}else Qe={eventTime:Qe,lane:De,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Me===null?(be=Me=Qe,ce=Ve):Me=Me.next=Qe,$|=De;if(ne=ne.next,ne===null){if(ne=S.shared.pending,ne===null)break;De=ne,ne=De.next,De.next=null,S.lastBaseUpdate=De,S.shared.pending=null}}while(!0);if(Me===null&&(ce=Ve),S.baseState=ce,S.firstBaseUpdate=be,S.lastBaseUpdate=Me,d=S.shared.interleaved,d!==null){S=d;do $|=S.lane,S=S.next;while(S!==d)}else k===null&&(S.shared.lanes=0);cc|=$,a.lanes=$,a.memoizedState=Ve}}function P_(a,d,x){if(a=d.effects,d.effects=null,a!==null)for(d=0;d<a.length;d++){var b=a[d],S=b.callback;if(S!==null){if(b.callback=null,b=x,typeof S!="function")throw Error(t(191,S));S.call(b)}}}var oh={},So=Ja(oh),ah=Ja(oh),lh=Ja(oh);function ac(a){if(a===oh)throw Error(t(174));return a}function u1(a,d){switch(On(lh,d),On(ah,a),On(So,oh),a=d.nodeType,a){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Xn(null,"");break;default:a=a===8?d.parentNode:d,d=a.namespaceURI||null,a=a.tagName,d=Xn(d,a)}Wn(So),On(So,d)}function Iu(){Wn(So),Wn(ah),Wn(lh)}function D_(a){ac(lh.current);var d=ac(So.current),x=Xn(d,a.type);d!==x&&(On(ah,a),On(So,x))}function d1(a){ah.current===a&&(Wn(So),Wn(ah))}var sr=Ja(0);function b0(a){for(var d=a;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var h1=[];function f1(){for(var a=0;a<h1.length;a++)h1[a]._workInProgressVersionPrimary=null;h1.length=0}var A0=Q.ReactCurrentDispatcher,m1=Q.ReactCurrentBatchConfig,lc=0,or=null,qr=null,ri=null,I0=!1,ch=!1,uh=0,rD=0;function Ri(){throw Error(t(321))}function p1(a,d){if(d===null)return!1;for(var x=0;x<d.length&&x<a.length;x++)if(!fe(a[x],d[x]))return!1;return!0}function g1(a,d,x,b,S,k){if(lc=k,or=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,A0.current=a===null||a.memoizedState===null?aD:lD,a=x(b,S),ch){k=0;do{if(ch=!1,uh=0,25<=k)throw Error(t(301));k+=1,ri=qr=null,d.updateQueue=null,A0.current=cD,a=x(b,S)}while(ch)}if(A0.current=S0,d=qr!==null&&qr.next!==null,lc=0,ri=qr=or=null,I0=!1,d)throw Error(t(300));return a}function y1(){var a=uh!==0;return uh=0,a}function Ro(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?or.memoizedState=ri=a:ri=ri.next=a,ri}function js(){if(qr===null){var a=or.alternate;a=a!==null?a.memoizedState:null}else a=qr.next;var d=ri===null?or.memoizedState:ri.next;if(d!==null)ri=d,qr=a;else{if(a===null)throw Error(t(310));qr=a,a={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},ri===null?or.memoizedState=ri=a:ri=ri.next=a}return ri}function dh(a,d){return typeof d=="function"?d(a):d}function x1(a){var d=js(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=qr,S=b.baseQueue,k=x.pending;if(k!==null){if(S!==null){var $=S.next;S.next=k.next,k.next=$}b.baseQueue=S=k,x.pending=null}if(S!==null){k=S.next,b=b.baseState;var ne=$=null,ce=null,be=k;do{var Me=be.lane;if((lc&Me)===Me)ce!==null&&(ce=ce.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),b=be.hasEagerState?be.eagerState:a(b,be.action);else{var Ve={lane:Me,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ce===null?(ne=ce=Ve,$=b):ce=ce.next=Ve,or.lanes|=Me,cc|=Me}be=be.next}while(be!==null&&be!==k);ce===null?$=b:ce.next=ne,fe(b,d.memoizedState)||(is=!0),d.memoizedState=b,d.baseState=$,d.baseQueue=ce,x.lastRenderedState=b}if(a=x.interleaved,a!==null){S=a;do k=S.lane,or.lanes|=k,cc|=k,S=S.next;while(S!==a)}else S===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function w1(a){var d=js(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=x.dispatch,S=x.pending,k=d.memoizedState;if(S!==null){x.pending=null;var $=S=S.next;do k=a(k,$.action),$=$.next;while($!==S);fe(k,d.memoizedState)||(is=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),x.lastRenderedState=k}return[k,b]}function O_(){}function M_(a,d){var x=or,b=js(),S=d(),k=!fe(b.memoizedState,S);if(k&&(b.memoizedState=S,is=!0),b=b.queue,v1(F_.bind(null,x,b,a),[a]),b.getSnapshot!==d||k||ri!==null&&ri.memoizedState.tag&1){if(x.flags|=2048,hh(9,V_.bind(null,x,b,S,d),void 0,null),ii===null)throw Error(t(349));(lc&30)!==0||L_(x,d,S)}return S}function L_(a,d,x){a.flags|=16384,a={getSnapshot:d,value:x},d=or.updateQueue,d===null?(d={lastEffect:null,stores:null},or.updateQueue=d,d.stores=[a]):(x=d.stores,x===null?d.stores=[a]:x.push(a))}function V_(a,d,x,b){d.value=x,d.getSnapshot=b,B_(d)&&j_(a)}function F_(a,d,x){return x(function(){B_(d)&&j_(a)})}function B_(a){var d=a.getSnapshot;a=a.value;try{var x=d();return!fe(a,x)}catch{return!0}}function j_(a){var d=pa(a,1);d!==null&&oo(d,a,1,-1)}function U_(a){var d=Ro();return typeof a=="function"&&(a=a()),d.memoizedState=d.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dh,lastRenderedState:a},d.queue=a,a=a.dispatch=oD.bind(null,or,a),[d.memoizedState,a]}function hh(a,d,x,b){return a={tag:a,create:d,destroy:x,deps:b,next:null},d=or.updateQueue,d===null?(d={lastEffect:null,stores:null},or.updateQueue=d,d.lastEffect=a.next=a):(x=d.lastEffect,x===null?d.lastEffect=a.next=a:(b=x.next,x.next=a,a.next=b,d.lastEffect=a)),a}function z_(){return js().memoizedState}function T0(a,d,x,b){var S=Ro();or.flags|=a,S.memoizedState=hh(1|d,x,void 0,b===void 0?null:b)}function C0(a,d,x,b){var S=js();b=b===void 0?null:b;var k=void 0;if(qr!==null){var $=qr.memoizedState;if(k=$.destroy,b!==null&&p1(b,$.deps)){S.memoizedState=hh(d,x,k,b);return}}or.flags|=a,S.memoizedState=hh(1|d,x,k,b)}function W_(a,d){return T0(8390656,8,a,d)}function v1(a,d){return C0(2048,8,a,d)}function H_(a,d){return C0(4,2,a,d)}function G_(a,d){return C0(4,4,a,d)}function $_(a,d){if(typeof d=="function")return a=a(),d(a),function(){d(null)};if(d!=null)return a=a(),d.current=a,function(){d.current=null}}function q_(a,d,x){return x=x!=null?x.concat([a]):null,C0(4,4,$_.bind(null,d,a),x)}function _1(){}function K_(a,d){var x=js();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&p1(d,b[1])?b[0]:(x.memoizedState=[a,d],a)}function X_(a,d){var x=js();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&p1(d,b[1])?b[0]:(a=a(),x.memoizedState=[a,d],a)}function Y_(a,d,x){return(lc&21)===0?(a.baseState&&(a.baseState=!1,is=!0),a.memoizedState=x):(fe(x,d)||(x=Qn(),or.lanes|=x,cc|=x,a.baseState=!0),d)}function iD(a,d){var x=bt;bt=x!==0&&4>x?x:4,a(!0);var b=m1.transition;m1.transition={};try{a(!1),d()}finally{bt=x,m1.transition=b}}function Q_(){return js().memoizedState}function sD(a,d,x){var b=al(a);if(x={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null},Z_(a))J_(d,x);else if(x=R_(a,d,x,b),x!==null){var S=$i();oo(x,a,b,S),eE(x,d,b)}}function oD(a,d,x){var b=al(a),S={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null};if(Z_(a))J_(d,S);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var $=d.lastRenderedState,ne=k($,x);if(S.hasEagerState=!0,S.eagerState=ne,fe(ne,$)){var ce=d.interleaved;ce===null?(S.next=S,l1(d)):(S.next=ce.next,ce.next=S),d.interleaved=S;return}}catch{}finally{}x=R_(a,d,S,b),x!==null&&(S=$i(),oo(x,a,b,S),eE(x,d,b))}}function Z_(a){var d=a.alternate;return a===or||d!==null&&d===or}function J_(a,d){ch=I0=!0;var x=a.pending;x===null?d.next=d:(d.next=x.next,x.next=d),a.pending=d}function eE(a,d,x){if((x&4194240)!==0){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}var S0={readContext:Bs,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},aD={readContext:Bs,useCallback:function(a,d){return Ro().memoizedState=[a,d===void 0?null:d],a},useContext:Bs,useEffect:W_,useImperativeHandle:function(a,d,x){return x=x!=null?x.concat([a]):null,T0(4194308,4,$_.bind(null,d,a),x)},useLayoutEffect:function(a,d){return T0(4194308,4,a,d)},useInsertionEffect:function(a,d){return T0(4,2,a,d)},useMemo:function(a,d){var x=Ro();return d=d===void 0?null:d,a=a(),x.memoizedState=[a,d],a},useReducer:function(a,d,x){var b=Ro();return d=x!==void 0?x(d):d,b.memoizedState=b.baseState=d,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:d},b.queue=a,a=a.dispatch=sD.bind(null,or,a),[b.memoizedState,a]},useRef:function(a){var d=Ro();return a={current:a},d.memoizedState=a},useState:U_,useDebugValue:_1,useDeferredValue:function(a){return Ro().memoizedState=a},useTransition:function(){var a=U_(!1),d=a[0];return a=iD.bind(null,a[1]),Ro().memoizedState=a,[d,a]},useMutableSource:function(){},useSyncExternalStore:function(a,d,x){var b=or,S=Ro();if(Jn){if(x===void 0)throw Error(t(407));x=x()}else{if(x=d(),ii===null)throw Error(t(349));(lc&30)!==0||L_(b,d,x)}S.memoizedState=x;var k={value:x,getSnapshot:d};return S.queue=k,W_(F_.bind(null,b,k,a),[a]),b.flags|=2048,hh(9,V_.bind(null,b,k,x,d),void 0,null),x},useId:function(){var a=Ro(),d=ii.identifierPrefix;if(Jn){var x=ma,b=fa;x=(b&~(1<<32-Hr(b)-1)).toString(32)+x,d=":"+d+"R"+x,x=uh++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=rD++,d=":"+d+"r"+x.toString(32)+":";return a.memoizedState=d},unstable_isNewReconciler:!1},lD={readContext:Bs,useCallback:K_,useContext:Bs,useEffect:v1,useImperativeHandle:q_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:X_,useReducer:x1,useRef:z_,useState:function(){return x1(dh)},useDebugValue:_1,useDeferredValue:function(a){var d=js();return Y_(d,qr.memoizedState,a)},useTransition:function(){var a=x1(dh)[0],d=js().memoizedState;return[a,d]},useMutableSource:O_,useSyncExternalStore:M_,useId:Q_,unstable_isNewReconciler:!1},cD={readContext:Bs,useCallback:K_,useContext:Bs,useEffect:v1,useImperativeHandle:q_,useInsertionEffect:H_,useLayoutEffect:G_,useMemo:X_,useReducer:w1,useRef:z_,useState:function(){return w1(dh)},useDebugValue:_1,useDeferredValue:function(a){var d=js();return qr===null?d.memoizedState=a:Y_(d,qr.memoizedState,a)},useTransition:function(){var a=w1(dh)[0],d=js().memoizedState;return[a,d]},useMutableSource:O_,useSyncExternalStore:M_,useId:Q_,unstable_isNewReconciler:!1};function ro(a,d){if(a&&a.defaultProps){d=Ne({},d),a=a.defaultProps;for(var x in a)d[x]===void 0&&(d[x]=a[x]);return d}return d}function E1(a,d,x,b){d=a.memoizedState,x=x(b,d),x=x==null?d:Ne({},d,x),a.memoizedState=x,a.lanes===0&&(a.updateQueue.baseState=x)}var R0={isMounted:function(a){return(a=a._reactInternals)?ei(a)===a:!1},enqueueSetState:function(a,d,x){a=a._reactInternals;var b=$i(),S=al(a),k=ga(b,S);k.payload=d,x!=null&&(k.callback=x),d=rl(a,k,S),d!==null&&(oo(d,a,S,b),_0(d,a,S))},enqueueReplaceState:function(a,d,x){a=a._reactInternals;var b=$i(),S=al(a),k=ga(b,S);k.tag=1,k.payload=d,x!=null&&(k.callback=x),d=rl(a,k,S),d!==null&&(oo(d,a,S,b),_0(d,a,S))},enqueueForceUpdate:function(a,d){a=a._reactInternals;var x=$i(),b=al(a),S=ga(x,b);S.tag=2,d!=null&&(S.callback=d),d=rl(a,S,b),d!==null&&(oo(d,a,b,x),_0(d,a,b))}};function tE(a,d,x,b,S,k,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(b,k,$):d.prototype&&d.prototype.isPureReactComponent?!Ee(x,b)||!Ee(S,k):!0}function nE(a,d,x){var b=!1,S=el,k=d.contextType;return typeof k=="object"&&k!==null?k=Bs(k):(S=rs(d)?rc:Si.current,b=d.contextTypes,k=(b=b!=null)?xu(a,S):el),d=new d(x,k),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=R0,a.stateNode=d,d._reactInternals=a,b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=k),d}function rE(a,d,x,b){a=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,b),d.state!==a&&R0.enqueueReplaceState(d,d.state,null)}function b1(a,d,x,b){var S=a.stateNode;S.props=x,S.state=a.memoizedState,S.refs={},c1(a);var k=d.contextType;typeof k=="object"&&k!==null?S.context=Bs(k):(k=rs(d)?rc:Si.current,S.context=xu(a,k)),S.state=a.memoizedState,k=d.getDerivedStateFromProps,typeof k=="function"&&(E1(a,d,k,x),S.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&R0.enqueueReplaceState(S,S.state,null),E0(a,x,S,b),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function Tu(a,d){try{var x="",b=d;do x+=it(b),b=b.return;while(b);var S=x}catch(k){S=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:d,stack:S,digest:null}}function A1(a,d,x){return{value:a,source:null,stack:x??null,digest:d??null}}function I1(a,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var uD=typeof WeakMap=="function"?WeakMap:Map;function iE(a,d,x){x=ga(-1,x),x.tag=3,x.payload={element:null};var b=d.value;return x.callback=function(){L0||(L0=!0,j1=b),I1(a,d)},x}function sE(a,d,x){x=ga(-1,x),x.tag=3;var b=a.type.getDerivedStateFromError;if(typeof b=="function"){var S=d.value;x.payload=function(){return b(S)},x.callback=function(){I1(a,d)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(x.callback=function(){I1(a,d),typeof b!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})}),x}function oE(a,d,x){var b=a.pingCache;if(b===null){b=a.pingCache=new uD;var S=new Set;b.set(d,S)}else S=b.get(d),S===void 0&&(S=new Set,b.set(d,S));S.has(x)||(S.add(x),a=AD.bind(null,a,d,x),d.then(a,a))}function aE(a){do{var d;if((d=a.tag===13)&&(d=a.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return a;a=a.return}while(a!==null);return null}function lE(a,d,x,b,S){return(a.mode&1)===0?(a===d?a.flags|=65536:(a.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=ga(-1,1),d.tag=2,rl(x,d,1))),x.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var dD=Q.ReactCurrentOwner,is=!1;function Gi(a,d,x,b){d.child=a===null?S_(d,null,x,b):Eu(d,a.child,x,b)}function cE(a,d,x,b,S){x=x.render;var k=d.ref;return Au(d,S),b=g1(a,d,x,b,k,S),x=y1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,ya(a,d,S)):(Jn&&x&&Jg(d),d.flags|=1,Gi(a,d,b,S),d.child)}function uE(a,d,x,b,S){if(a===null){var k=x.type;return typeof k=="function"&&!q1(k)&&k.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=k,dE(a,d,k,b,S)):(a=z0(x.type,null,b,d,d.mode,S),a.ref=d.ref,a.return=d,d.child=a)}if(k=a.child,(a.lanes&S)===0){var $=k.memoizedProps;if(x=x.compare,x=x!==null?x:Ee,x($,b)&&a.ref===d.ref)return ya(a,d,S)}return d.flags|=1,a=cl(k,b),a.ref=d.ref,a.return=d,d.child=a}function dE(a,d,x,b,S){if(a!==null){var k=a.memoizedProps;if(Ee(k,b)&&a.ref===d.ref)if(is=!1,d.pendingProps=b=k,(a.lanes&S)!==0)(a.flags&131072)!==0&&(is=!0);else return d.lanes=a.lanes,ya(a,d,S)}return T1(a,d,x,b,S)}function hE(a,d,x){var b=d.pendingProps,S=b.children,k=a!==null?a.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(Su,Es),Es|=x;else{if((x&1073741824)===0)return a=k!==null?k.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:a,cachePool:null,transitions:null},d.updateQueue=null,On(Su,Es),Es|=a,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=k!==null?k.baseLanes:x,On(Su,Es),Es|=b}else k!==null?(b=k.baseLanes|x,d.memoizedState=null):b=x,On(Su,Es),Es|=b;return Gi(a,d,S,x),d.child}function fE(a,d){var x=d.ref;(a===null&&x!==null||a!==null&&a.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function T1(a,d,x,b,S){var k=rs(x)?rc:Si.current;return k=xu(d,k),Au(d,S),x=g1(a,d,x,b,k,S),b=y1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,ya(a,d,S)):(Jn&&b&&Jg(d),d.flags|=1,Gi(a,d,x,S),d.child)}function mE(a,d,x,b,S){if(rs(x)){var k=!0;f0(d)}else k=!1;if(Au(d,S),d.stateNode===null)k0(a,d),nE(d,x,b),b1(d,x,b,S),b=!0;else if(a===null){var $=d.stateNode,ne=d.memoizedProps;$.props=ne;var ce=$.context,be=x.contextType;typeof be=="object"&&be!==null?be=Bs(be):(be=rs(x)?rc:Si.current,be=xu(d,be));var Me=x.getDerivedStateFromProps,Ve=typeof Me=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ve||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ne!==b||ce!==be)&&rE(d,$,b,be),nl=!1;var De=d.memoizedState;$.state=De,E0(d,b,$,S),ce=d.memoizedState,ne!==b||De!==ce||ns.current||nl?(typeof Me=="function"&&(E1(d,x,Me,b),ce=d.memoizedState),(ne=nl||tE(d,x,ne,b,De,ce,be))?(Ve||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ce),$.props=b,$.state=ce,$.context=be,b=ne):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{$=d.stateNode,N_(a,d),ne=d.memoizedProps,be=d.type===d.elementType?ne:ro(d.type,ne),$.props=be,Ve=d.pendingProps,De=$.context,ce=x.contextType,typeof ce=="object"&&ce!==null?ce=Bs(ce):(ce=rs(x)?rc:Si.current,ce=xu(d,ce));var Qe=x.getDerivedStateFromProps;(Me=typeof Qe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ne!==Ve||De!==ce)&&rE(d,$,b,ce),nl=!1,De=d.memoizedState,$.state=De,E0(d,b,$,S);var et=d.memoizedState;ne!==Ve||De!==et||ns.current||nl?(typeof Qe=="function"&&(E1(d,x,Qe,b),et=d.memoizedState),(be=nl||tE(d,x,be,b,De,et,ce)||!1)?(Me||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(b,et,ce),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(b,et,ce)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=et),$.props=b,$.state=et,$.context=ce,b=be):(typeof $.componentDidUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),b=!1)}return C1(a,d,x,b,k,S)}function C1(a,d,x,b,S,k){fE(a,d);var $=(d.flags&128)!==0;if(!b&&!$)return S&&w_(d,x,!1),ya(a,d,k);b=d.stateNode,dD.current=d;var ne=$&&typeof x.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,a!==null&&$?(d.child=Eu(d,a.child,null,k),d.child=Eu(d,null,ne,k)):Gi(a,d,ne,k),d.memoizedState=b.state,S&&w_(d,x,!0),d.child}function pE(a){var d=a.stateNode;d.pendingContext?y_(a,d.pendingContext,d.pendingContext!==d.context):d.context&&y_(a,d.context,!1),u1(a,d.containerInfo)}function gE(a,d,x,b,S){return _u(),r1(S),d.flags|=256,Gi(a,d,x,b),d.child}var S1={dehydrated:null,treeContext:null,retryLane:0};function R1(a){return{baseLanes:a,cachePool:null,transitions:null}}function yE(a,d,x){var b=d.pendingProps,S=sr.current,k=!1,$=(d.flags&128)!==0,ne;if((ne=$)||(ne=a!==null&&a.memoizedState===null?!1:(S&2)!==0),ne?(k=!0,d.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),On(sr,S&1),a===null)return n1(d),a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((d.mode&1)===0?d.lanes=1:a.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($=b.children,a=b.fallback,k?(b=d.mode,k=d.child,$={mode:"hidden",children:$},(b&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=$):k=W0($,b,0,null),a=fc(a,b,x,null),k.return=d,a.return=d,k.sibling=a,d.child=k,d.child.memoizedState=R1(x),d.memoizedState=S1,a):N1(d,$));if(S=a.memoizedState,S!==null&&(ne=S.dehydrated,ne!==null))return hD(a,d,$,b,ne,S,x);if(k){k=b.fallback,$=d.mode,S=a.child,ne=S.sibling;var ce={mode:"hidden",children:b.children};return($&1)===0&&d.child!==S?(b=d.child,b.childLanes=0,b.pendingProps=ce,d.deletions=null):(b=cl(S,ce),b.subtreeFlags=S.subtreeFlags&14680064),ne!==null?k=cl(ne,k):(k=fc(k,$,x,null),k.flags|=2),k.return=d,b.return=d,b.sibling=k,d.child=b,b=k,k=d.child,$=a.child.memoizedState,$=$===null?R1(x):{baseLanes:$.baseLanes|x,cachePool:null,transitions:$.transitions},k.memoizedState=$,k.childLanes=a.childLanes&~x,d.memoizedState=S1,b}return k=a.child,a=k.sibling,b=cl(k,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=x),b.return=d,b.sibling=null,a!==null&&(x=d.deletions,x===null?(d.deletions=[a],d.flags|=16):x.push(a)),d.child=b,d.memoizedState=null,b}function N1(a,d){return d=W0({mode:"visible",children:d},a.mode,0,null),d.return=a,a.child=d}function N0(a,d,x,b){return b!==null&&r1(b),Eu(d,a.child,null,x),a=N1(d,d.pendingProps.children),a.flags|=2,d.memoizedState=null,a}function hD(a,d,x,b,S,k,$){if(x)return d.flags&256?(d.flags&=-257,b=A1(Error(t(422))),N0(a,d,$,b)):d.memoizedState!==null?(d.child=a.child,d.flags|=128,null):(k=b.fallback,S=d.mode,b=W0({mode:"visible",children:b.children},S,0,null),k=fc(k,S,$,null),k.flags|=2,b.return=d,k.return=d,b.sibling=k,d.child=b,(d.mode&1)!==0&&Eu(d,a.child,null,$),d.child.memoizedState=R1($),d.memoizedState=S1,k);if((d.mode&1)===0)return N0(a,d,$,null);if(S.data==="$!"){if(b=S.nextSibling&&S.nextSibling.dataset,b)var ne=b.dgst;return b=ne,k=Error(t(419)),b=A1(k,b,void 0),N0(a,d,$,b)}if(ne=($&a.childLanes)!==0,is||ne){if(b=ii,b!==null){switch($&-$){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(b.suspendedLanes|$))!==0?0:S,S!==0&&S!==k.retryLane&&(k.retryLane=S,pa(a,S),oo(b,a,S,-1))}return $1(),b=A1(Error(t(421))),N0(a,d,$,b)}return S.data==="$?"?(d.flags|=128,d.child=a.child,d=ID.bind(null,a),S._reactRetry=d,null):(a=k.treeContext,_s=Za(S.nextSibling),vs=d,Jn=!0,no=null,a!==null&&(Vs[Fs++]=fa,Vs[Fs++]=ma,Vs[Fs++]=ic,fa=a.id,ma=a.overflow,ic=d),d=N1(d,b.children),d.flags|=4096,d)}function xE(a,d,x){a.lanes|=d;var b=a.alternate;b!==null&&(b.lanes|=d),a1(a.return,d,x)}function k1(a,d,x,b,S){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:S}:(k.isBackwards=d,k.rendering=null,k.renderingStartTime=0,k.last=b,k.tail=x,k.tailMode=S)}function wE(a,d,x){var b=d.pendingProps,S=b.revealOrder,k=b.tail;if(Gi(a,d,b.children,x),b=sr.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=d.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&xE(a,x,d);else if(a.tag===19)xE(a,x,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===d)break e;for(;a.sibling===null;){if(a.return===null||a.return===d)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}b&=1}if(On(sr,b),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(x=d.child,S=null;x!==null;)a=x.alternate,a!==null&&b0(a)===null&&(S=x),x=x.sibling;x=S,x===null?(S=d.child,d.child=null):(S=x.sibling,x.sibling=null),k1(d,!1,S,x,k);break;case"backwards":for(x=null,S=d.child,d.child=null;S!==null;){if(a=S.alternate,a!==null&&b0(a)===null){d.child=S;break}a=S.sibling,S.sibling=x,x=S,S=a}k1(d,!0,x,null,k);break;case"together":k1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function k0(a,d){(d.mode&1)===0&&a!==null&&(a.alternate=null,d.alternate=null,d.flags|=2)}function ya(a,d,x){if(a!==null&&(d.dependencies=a.dependencies),cc|=d.lanes,(x&d.childLanes)===0)return null;if(a!==null&&d.child!==a.child)throw Error(t(153));if(d.child!==null){for(a=d.child,x=cl(a,a.pendingProps),d.child=x,x.return=d;a.sibling!==null;)a=a.sibling,x=x.sibling=cl(a,a.pendingProps),x.return=d;x.sibling=null}return d.child}function fD(a,d,x){switch(d.tag){case 3:pE(d),_u();break;case 5:D_(d);break;case 1:rs(d.type)&&f0(d);break;case 4:u1(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,S=d.memoizedProps.value;On(w0,b._currentValue),b._currentValue=S;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(On(sr,sr.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?yE(a,d,x):(On(sr,sr.current&1),a=ya(a,d,x),a!==null?a.sibling:null);On(sr,sr.current&1);break;case 19:if(b=(x&d.childLanes)!==0,(a.flags&128)!==0){if(b)return wE(a,d,x);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),On(sr,sr.current),b)break;return null;case 22:case 23:return d.lanes=0,hE(a,d,x)}return ya(a,d,x)}var vE,P1,_E,EE;vE=function(a,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},P1=function(){},_E=function(a,d,x,b){var S=a.memoizedProps;if(S!==b){a=d.stateNode,ac(So.current);var k=null;switch(x){case"input":S=gn(a,S),b=gn(a,b),k=[];break;case"select":S=Ne({},S,{value:void 0}),b=Ne({},b,{value:void 0}),k=[];break;case"textarea":S=Kn(a,S),b=Kn(a,b),k=[];break;default:typeof S.onClick!="function"&&typeof b.onClick=="function"&&(a.onclick=u0)}Ht(x,b);var $;x=null;for(be in S)if(!b.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var ne=S[be];for($ in ne)ne.hasOwnProperty($)&&(x||(x={}),x[$]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(i.hasOwnProperty(be)?k||(k=[]):(k=k||[]).push(be,null));for(be in b){var ce=b[be];if(ne=S!=null?S[be]:void 0,b.hasOwnProperty(be)&&ce!==ne&&(ce!=null||ne!=null))if(be==="style")if(ne){for($ in ne)!ne.hasOwnProperty($)||ce&&ce.hasOwnProperty($)||(x||(x={}),x[$]="");for($ in ce)ce.hasOwnProperty($)&&ne[$]!==ce[$]&&(x||(x={}),x[$]=ce[$])}else x||(k||(k=[]),k.push(be,x)),x=ce;else be==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ne=ne?ne.__html:void 0,ce!=null&&ne!==ce&&(k=k||[]).push(be,ce)):be==="children"?typeof ce!="string"&&typeof ce!="number"||(k=k||[]).push(be,""+ce):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(i.hasOwnProperty(be)?(ce!=null&&be==="onScroll"&&zn("scroll",a),k||ne===ce||(k=[])):(k=k||[]).push(be,ce))}x&&(k=k||[]).push("style",x);var be=k;(d.updateQueue=be)&&(d.flags|=4)}},EE=function(a,d,x,b){x!==b&&(d.flags|=4)};function fh(a,d){if(!Jn)switch(a.tailMode){case"hidden":d=a.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?a.tail=null:x.sibling=null;break;case"collapsed":x=a.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?d||a.tail===null?a.tail=null:a.tail.sibling=null:b.sibling=null}}function Ni(a){var d=a.alternate!==null&&a.alternate.child===a.child,x=0,b=0;if(d)for(var S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags&14680064,b|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=b,a.childLanes=x,d}function mD(a,d,x){var b=d.pendingProps;switch(e1(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(d),null;case 1:return rs(d.type)&&h0(),Ni(d),null;case 3:return b=d.stateNode,Iu(),Wn(ns),Wn(Si),f1(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(a===null||a.child===null)&&(y0(d)?d.flags|=4:a===null||a.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,no!==null&&(W1(no),no=null))),P1(a,d),Ni(d),null;case 5:d1(d);var S=ac(lh.current);if(x=d.type,a!==null&&d.stateNode!=null)_E(a,d,x,b,S),a.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(t(166));return Ni(d),null}if(a=ac(So.current),y0(d)){b=d.stateNode,x=d.type;var k=d.memoizedProps;switch(b[Co]=d,b[rh]=k,a=(d.mode&1)!==0,x){case"dialog":zn("cancel",b),zn("close",b);break;case"iframe":case"object":case"embed":zn("load",b);break;case"video":case"audio":for(S=0;S<eh.length;S++)zn(eh[S],b);break;case"source":zn("error",b);break;case"img":case"image":case"link":zn("error",b),zn("load",b);break;case"details":zn("toggle",b);break;case"input":Mn(b,k),zn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!k.multiple},zn("invalid",b);break;case"textarea":wi(b,k),zn("invalid",b)}Ht(x,k),S=null;for(var $ in k)if(k.hasOwnProperty($)){var ne=k[$];$==="children"?typeof ne=="string"?b.textContent!==ne&&(k.suppressHydrationWarning!==!0&&c0(b.textContent,ne,a),S=["children",ne]):typeof ne=="number"&&b.textContent!==""+ne&&(k.suppressHydrationWarning!==!0&&c0(b.textContent,ne,a),S=["children",""+ne]):i.hasOwnProperty($)&&ne!=null&&$==="onScroll"&&zn("scroll",b)}switch(x){case"input":ct(b),zt(b,k,!0);break;case"textarea":ct(b),Qs(b);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(b.onclick=u0)}b=S,d.updateQueue=b,b!==null&&(d.flags|=4)}else{$=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Wt(x)),a==="http://www.w3.org/1999/xhtml"?x==="script"?(a=$.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof b.is=="string"?a=$.createElement(x,{is:b.is}):(a=$.createElement(x),x==="select"&&($=a,b.multiple?$.multiple=!0:b.size&&($.size=b.size))):a=$.createElementNS(a,x),a[Co]=d,a[rh]=b,vE(a,d,!1,!1),d.stateNode=a;e:{switch($=mn(x,b),x){case"dialog":zn("cancel",a),zn("close",a),S=b;break;case"iframe":case"object":case"embed":zn("load",a),S=b;break;case"video":case"audio":for(S=0;S<eh.length;S++)zn(eh[S],a);S=b;break;case"source":zn("error",a),S=b;break;case"img":case"image":case"link":zn("error",a),zn("load",a),S=b;break;case"details":zn("toggle",a),S=b;break;case"input":Mn(a,b),S=gn(a,b),zn("invalid",a);break;case"option":S=b;break;case"select":a._wrapperState={wasMultiple:!!b.multiple},S=Ne({},b,{value:void 0}),zn("invalid",a);break;case"textarea":wi(a,b),S=Kn(a,b),zn("invalid",a);break;default:S=b}Ht(x,S),ne=S;for(k in ne)if(ne.hasOwnProperty(k)){var ce=ne[k];k==="style"?We(a,ce):k==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&Ln(a,ce)):k==="children"?typeof ce=="string"?(x!=="textarea"||ce!=="")&&Jr(a,ce):typeof ce=="number"&&Jr(a,""+ce):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?ce!=null&&k==="onScroll"&&zn("scroll",a):ce!=null&&W(a,k,ce,$))}switch(x){case"input":ct(a),zt(a,b,!1);break;case"textarea":ct(a),Qs(a);break;case"option":b.value!=null&&a.setAttribute("value",""+Ge(b.value));break;case"select":a.multiple=!!b.multiple,k=b.value,k!=null?Xe(a,!!b.multiple,k,!1):b.defaultValue!=null&&Xe(a,!!b.multiple,b.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=u0)}switch(x){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ni(d),null;case 6:if(a&&d.stateNode!=null)EE(a,d,a.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(t(166));if(x=ac(lh.current),ac(So.current),y0(d)){if(b=d.stateNode,x=d.memoizedProps,b[Co]=d,(k=b.nodeValue!==x)&&(a=vs,a!==null))switch(a.tag){case 3:c0(b.nodeValue,x,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&c0(b.nodeValue,x,(a.mode&1)!==0)}k&&(d.flags|=4)}else b=(x.nodeType===9?x:x.ownerDocument).createTextNode(b),b[Co]=d,d.stateNode=b}return Ni(d),null;case 13:if(Wn(sr),b=d.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Jn&&_s!==null&&(d.mode&1)!==0&&(d.flags&128)===0)I_(),_u(),d.flags|=98560,k=!1;else if(k=y0(d),b!==null&&b.dehydrated!==null){if(a===null){if(!k)throw Error(t(318));if(k=d.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[Co]=d}else _u(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ni(d),k=!1}else no!==null&&(W1(no),no=null),k=!0;if(!k)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(b=b!==null,b!==(a!==null&&a.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(a===null||(sr.current&1)!==0?Kr===0&&(Kr=3):$1())),d.updateQueue!==null&&(d.flags|=4),Ni(d),null);case 4:return Iu(),P1(a,d),a===null&&th(d.stateNode.containerInfo),Ni(d),null;case 10:return o1(d.type._context),Ni(d),null;case 17:return rs(d.type)&&h0(),Ni(d),null;case 19:if(Wn(sr),k=d.memoizedState,k===null)return Ni(d),null;if(b=(d.flags&128)!==0,$=k.rendering,$===null)if(b)fh(k,!1);else{if(Kr!==0||a!==null&&(a.flags&128)!==0)for(a=d.child;a!==null;){if($=b0(a),$!==null){for(d.flags|=128,fh(k,!1),b=$.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=x,x=d.child;x!==null;)k=x,a=b,k.flags&=14680066,$=k.alternate,$===null?(k.childLanes=0,k.lanes=a,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=$.childLanes,k.lanes=$.lanes,k.child=$.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=$.memoizedProps,k.memoizedState=$.memoizedState,k.updateQueue=$.updateQueue,k.type=$.type,a=$.dependencies,k.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),x=x.sibling;return On(sr,sr.current&1|2),d.child}a=a.sibling}k.tail!==null&&Zt()>Ru&&(d.flags|=128,b=!0,fh(k,!1),d.lanes=4194304)}else{if(!b)if(a=b0($),a!==null){if(d.flags|=128,b=!0,x=a.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),fh(k,!0),k.tail===null&&k.tailMode==="hidden"&&!$.alternate&&!Jn)return Ni(d),null}else 2*Zt()-k.renderingStartTime>Ru&&x!==1073741824&&(d.flags|=128,b=!0,fh(k,!1),d.lanes=4194304);k.isBackwards?($.sibling=d.child,d.child=$):(x=k.last,x!==null?x.sibling=$:d.child=$,k.last=$)}return k.tail!==null?(d=k.tail,k.rendering=d,k.tail=d.sibling,k.renderingStartTime=Zt(),d.sibling=null,x=sr.current,On(sr,b?x&1|2:x&1),d):(Ni(d),null);case 22:case 23:return G1(),b=d.memoizedState!==null,a!==null&&a.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(Es&1073741824)!==0&&(Ni(d),d.subtreeFlags&6&&(d.flags|=8192)):Ni(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function pD(a,d){switch(e1(d),d.tag){case 1:return rs(d.type)&&h0(),a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 3:return Iu(),Wn(ns),Wn(Si),f1(),a=d.flags,(a&65536)!==0&&(a&128)===0?(d.flags=a&-65537|128,d):null;case 5:return d1(d),null;case 13:if(Wn(sr),a=d.memoizedState,a!==null&&a.dehydrated!==null){if(d.alternate===null)throw Error(t(340));_u()}return a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 19:return Wn(sr),null;case 4:return Iu(),null;case 10:return o1(d.type._context),null;case 22:case 23:return G1(),null;case 24:return null;default:return null}}var P0=!1,ki=!1,gD=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Cu(a,d){var x=a.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(b){mr(a,d,b)}else x.current=null}function D1(a,d,x){try{x()}catch(b){mr(a,d,b)}}var bE=!1;function yD(a,d){if(Gg=Ji,a=Vt(),St(a)){if("selectionStart"in a)var x={start:a.selectionStart,end:a.selectionEnd};else e:{x=(x=a.ownerDocument)&&x.defaultView||window;var b=x.getSelection&&x.getSelection();if(b&&b.rangeCount!==0){x=b.anchorNode;var S=b.anchorOffset,k=b.focusNode;b=b.focusOffset;try{x.nodeType,k.nodeType}catch{x=null;break e}var $=0,ne=-1,ce=-1,be=0,Me=0,Ve=a,De=null;t:for(;;){for(var Qe;Ve!==x||S!==0&&Ve.nodeType!==3||(ne=$+S),Ve!==k||b!==0&&Ve.nodeType!==3||(ce=$+b),Ve.nodeType===3&&($+=Ve.nodeValue.length),(Qe=Ve.firstChild)!==null;)De=Ve,Ve=Qe;for(;;){if(Ve===a)break t;if(De===x&&++be===S&&(ne=$),De===k&&++Me===b&&(ce=$),(Qe=Ve.nextSibling)!==null)break;Ve=De,De=Ve.parentNode}Ve=Qe}x=ne===-1||ce===-1?null:{start:ne,end:ce}}else x=null}x=x||{start:0,end:0}}else x=null;for($g={focusedElem:a,selectionRange:x},Ji=!1,Je=d;Je!==null;)if(d=Je,a=d.child,(d.subtreeFlags&1028)!==0&&a!==null)a.return=d,Je=a;else for(;Je!==null;){d=Je;try{var et=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var ot=et.memoizedProps,Sr=et.memoizedState,xe=d.stateNode,de=xe.getSnapshotBeforeUpdate(d.elementType===d.type?ot:ro(d.type,ot),Sr);xe.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var ve=d.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ue){mr(d,d.return,Ue)}if(a=d.sibling,a!==null){a.return=d.return,Je=a;break}Je=d.return}return et=bE,bE=!1,et}function mh(a,d,x){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var S=b=b.next;do{if((S.tag&a)===a){var k=S.destroy;S.destroy=void 0,k!==void 0&&D1(d,x,k)}S=S.next}while(S!==b)}}function D0(a,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&a)===a){var b=x.create;x.destroy=b()}x=x.next}while(x!==d)}}function O1(a){var d=a.ref;if(d!==null){var x=a.stateNode;switch(a.tag){case 5:a=x;break;default:a=x}typeof d=="function"?d(a):d.current=a}}function AE(a){var d=a.alternate;d!==null&&(a.alternate=null,AE(d)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(d=a.stateNode,d!==null&&(delete d[Co],delete d[rh],delete d[Yg],delete d[J6],delete d[eD])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function IE(a){return a.tag===5||a.tag===3||a.tag===4}function TE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||IE(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function M1(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(a,d):x.insertBefore(a,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(a,x)):(d=x,d.appendChild(a)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=u0));else if(b!==4&&(a=a.child,a!==null))for(M1(a,d,x),a=a.sibling;a!==null;)M1(a,d,x),a=a.sibling}function L1(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.insertBefore(a,d):x.appendChild(a);else if(b!==4&&(a=a.child,a!==null))for(L1(a,d,x),a=a.sibling;a!==null;)L1(a,d,x),a=a.sibling}var fi=null,io=!1;function il(a,d,x){for(x=x.child;x!==null;)CE(a,d,x),x=x.sibling}function CE(a,d,x){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(jt,x)}catch{}switch(x.tag){case 5:ki||Cu(x,d);case 6:var b=fi,S=io;fi=null,il(a,d,x),fi=b,io=S,fi!==null&&(io?(a=fi,x=x.stateNode,a.nodeType===8?a.parentNode.removeChild(x):a.removeChild(x)):fi.removeChild(x.stateNode));break;case 18:fi!==null&&(io?(a=fi,x=x.stateNode,a.nodeType===8?Xg(a.parentNode,x):a.nodeType===1&&Xg(a,x),ci(a)):Xg(fi,x.stateNode));break;case 4:b=fi,S=io,fi=x.stateNode.containerInfo,io=!0,il(a,d,x),fi=b,io=S;break;case 0:case 11:case 14:case 15:if(!ki&&(b=x.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){S=b=b.next;do{var k=S,$=k.destroy;k=k.tag,$!==void 0&&((k&2)!==0||(k&4)!==0)&&D1(x,d,$),S=S.next}while(S!==b)}il(a,d,x);break;case 1:if(!ki&&(Cu(x,d),b=x.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=x.memoizedProps,b.state=x.memoizedState,b.componentWillUnmount()}catch(ne){mr(x,d,ne)}il(a,d,x);break;case 21:il(a,d,x);break;case 22:x.mode&1?(ki=(b=ki)||x.memoizedState!==null,il(a,d,x),ki=b):il(a,d,x);break;default:il(a,d,x)}}function SE(a){var d=a.updateQueue;if(d!==null){a.updateQueue=null;var x=a.stateNode;x===null&&(x=a.stateNode=new gD),d.forEach(function(b){var S=TD.bind(null,a,b);x.has(b)||(x.add(b),b.then(S,S))})}}function so(a,d){var x=d.deletions;if(x!==null)for(var b=0;b<x.length;b++){var S=x[b];try{var k=a,$=d,ne=$;e:for(;ne!==null;){switch(ne.tag){case 5:fi=ne.stateNode,io=!1;break e;case 3:fi=ne.stateNode.containerInfo,io=!0;break e;case 4:fi=ne.stateNode.containerInfo,io=!0;break e}ne=ne.return}if(fi===null)throw Error(t(160));CE(k,$,S),fi=null,io=!1;var ce=S.alternate;ce!==null&&(ce.return=null),S.return=null}catch(be){mr(S,d,be)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)RE(d,a),d=d.sibling}function RE(a,d){var x=a.alternate,b=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(so(d,a),No(a),b&4){try{mh(3,a,a.return),D0(3,a)}catch(ot){mr(a,a.return,ot)}try{mh(5,a,a.return)}catch(ot){mr(a,a.return,ot)}}break;case 1:so(d,a),No(a),b&512&&x!==null&&Cu(x,x.return);break;case 5:if(so(d,a),No(a),b&512&&x!==null&&Cu(x,x.return),a.flags&32){var S=a.stateNode;try{Jr(S,"")}catch(ot){mr(a,a.return,ot)}}if(b&4&&(S=a.stateNode,S!=null)){var k=a.memoizedProps,$=x!==null?x.memoizedProps:k,ne=a.type,ce=a.updateQueue;if(a.updateQueue=null,ce!==null)try{ne==="input"&&k.type==="radio"&&k.name!=null&&Pr(S,k),mn(ne,$);var be=mn(ne,k);for($=0;$<ce.length;$+=2){var Me=ce[$],Ve=ce[$+1];Me==="style"?We(S,Ve):Me==="dangerouslySetInnerHTML"?Ln(S,Ve):Me==="children"?Jr(S,Ve):W(S,Me,Ve,be)}switch(ne){case"input":Qt(S,k);break;case"textarea":Zr(S,k);break;case"select":var De=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!k.multiple;var Qe=k.value;Qe!=null?Xe(S,!!k.multiple,Qe,!1):De!==!!k.multiple&&(k.defaultValue!=null?Xe(S,!!k.multiple,k.defaultValue,!0):Xe(S,!!k.multiple,k.multiple?[]:"",!1))}S[rh]=k}catch(ot){mr(a,a.return,ot)}}break;case 6:if(so(d,a),No(a),b&4){if(a.stateNode===null)throw Error(t(162));S=a.stateNode,k=a.memoizedProps;try{S.nodeValue=k}catch(ot){mr(a,a.return,ot)}}break;case 3:if(so(d,a),No(a),b&4&&x!==null&&x.memoizedState.isDehydrated)try{ci(d.containerInfo)}catch(ot){mr(a,a.return,ot)}break;case 4:so(d,a),No(a);break;case 13:so(d,a),No(a),S=a.child,S.flags&8192&&(k=S.memoizedState!==null,S.stateNode.isHidden=k,!k||S.alternate!==null&&S.alternate.memoizedState!==null||(B1=Zt())),b&4&&SE(a);break;case 22:if(Me=x!==null&&x.memoizedState!==null,a.mode&1?(ki=(be=ki)||Me,so(d,a),ki=be):so(d,a),No(a),b&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!Me&&(a.mode&1)!==0)for(Je=a,Me=a.child;Me!==null;){for(Ve=Je=Me;Je!==null;){switch(De=Je,Qe=De.child,De.tag){case 0:case 11:case 14:case 15:mh(4,De,De.return);break;case 1:Cu(De,De.return);var et=De.stateNode;if(typeof et.componentWillUnmount=="function"){b=De,x=De.return;try{d=b,et.props=d.memoizedProps,et.state=d.memoizedState,et.componentWillUnmount()}catch(ot){mr(b,x,ot)}}break;case 5:Cu(De,De.return);break;case 22:if(De.memoizedState!==null){PE(Ve);continue}}Qe!==null?(Qe.return=De,Je=Qe):PE(Ve)}Me=Me.sibling}e:for(Me=null,Ve=a;;){if(Ve.tag===5){if(Me===null){Me=Ve;try{S=Ve.stateNode,be?(k=S.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(ne=Ve.stateNode,ce=Ve.memoizedProps.style,$=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,ne.style.display=An("display",$))}catch(ot){mr(a,a.return,ot)}}}else if(Ve.tag===6){if(Me===null)try{Ve.stateNode.nodeValue=be?"":Ve.memoizedProps}catch(ot){mr(a,a.return,ot)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===a)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===a)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===a)break e;Me===Ve&&(Me=null),Ve=Ve.return}Me===Ve&&(Me=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:so(d,a),No(a),b&4&&SE(a);break;case 21:break;default:so(d,a),No(a)}}function No(a){var d=a.flags;if(d&2){try{e:{for(var x=a.return;x!==null;){if(IE(x)){var b=x;break e}x=x.return}throw Error(t(160))}switch(b.tag){case 5:var S=b.stateNode;b.flags&32&&(Jr(S,""),b.flags&=-33);var k=TE(a);L1(a,k,S);break;case 3:case 4:var $=b.stateNode.containerInfo,ne=TE(a);M1(a,ne,$);break;default:throw Error(t(161))}}catch(ce){mr(a,a.return,ce)}a.flags&=-3}d&4096&&(a.flags&=-4097)}function xD(a,d,x){Je=a,NE(a)}function NE(a,d,x){for(var b=(a.mode&1)!==0;Je!==null;){var S=Je,k=S.child;if(S.tag===22&&b){var $=S.memoizedState!==null||P0;if(!$){var ne=S.alternate,ce=ne!==null&&ne.memoizedState!==null||ki;ne=P0;var be=ki;if(P0=$,(ki=ce)&&!be)for(Je=S;Je!==null;)$=Je,ce=$.child,$.tag===22&&$.memoizedState!==null?DE(S):ce!==null?(ce.return=$,Je=ce):DE(S);for(;k!==null;)Je=k,NE(k),k=k.sibling;Je=S,P0=ne,ki=be}kE(a)}else(S.subtreeFlags&8772)!==0&&k!==null?(k.return=S,Je=k):kE(a)}}function kE(a){for(;Je!==null;){var d=Je;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:ki||D0(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!ki)if(x===null)b.componentDidMount();else{var S=d.elementType===d.type?x.memoizedProps:ro(d.type,x.memoizedProps);b.componentDidUpdate(S,x.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var k=d.updateQueue;k!==null&&P_(d,k,b);break;case 3:var $=d.updateQueue;if($!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}P_(d,$,x)}break;case 5:var ne=d.stateNode;if(x===null&&d.flags&4){x=ne;var ce=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&x.focus();break;case"img":ce.src&&(x.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var be=d.alternate;if(be!==null){var Me=be.memoizedState;if(Me!==null){var Ve=Me.dehydrated;Ve!==null&&ci(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ki||d.flags&512&&O1(d)}catch(De){mr(d,d.return,De)}}if(d===a){Je=null;break}if(x=d.sibling,x!==null){x.return=d.return,Je=x;break}Je=d.return}}function PE(a){for(;Je!==null;){var d=Je;if(d===a){Je=null;break}var x=d.sibling;if(x!==null){x.return=d.return,Je=x;break}Je=d.return}}function DE(a){for(;Je!==null;){var d=Je;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{D0(4,d)}catch(ce){mr(d,x,ce)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var S=d.return;try{b.componentDidMount()}catch(ce){mr(d,S,ce)}}var k=d.return;try{O1(d)}catch(ce){mr(d,k,ce)}break;case 5:var $=d.return;try{O1(d)}catch(ce){mr(d,$,ce)}}}catch(ce){mr(d,d.return,ce)}if(d===a){Je=null;break}var ne=d.sibling;if(ne!==null){ne.return=d.return,Je=ne;break}Je=d.return}}var wD=Math.ceil,O0=Q.ReactCurrentDispatcher,V1=Q.ReactCurrentOwner,Us=Q.ReactCurrentBatchConfig,rn=0,ii=null,Dr=null,mi=0,Es=0,Su=Ja(0),Kr=0,ph=null,cc=0,M0=0,F1=0,gh=null,ss=null,B1=0,Ru=1/0,xa=null,L0=!1,j1=null,sl=null,V0=!1,ol=null,F0=0,yh=0,U1=null,B0=-1,j0=0;function $i(){return(rn&6)!==0?Zt():B0!==-1?B0:B0=Zt()}function al(a){return(a.mode&1)===0?1:(rn&2)!==0&&mi!==0?mi&-mi:nD.transition!==null?(j0===0&&(j0=Qn()),j0):(a=bt,a!==0||(a=window.event,a=a===void 0?16:$a(a.type)),a)}function oo(a,d,x,b){if(50<yh)throw yh=0,U1=null,Error(t(185));Z(a,x,b),((rn&2)===0||a!==ii)&&(a===ii&&((rn&2)===0&&(M0|=x),Kr===4&&ll(a,mi)),os(a,b),x===1&&rn===0&&(d.mode&1)===0&&(Ru=Zt()+500,m0&&tl()))}function os(a,d){var x=a.callbackNode;bi(a,d);var b=Ei(a,a===ii?mi:0);if(b===0)x!==null&&Ar(x),a.callbackNode=null,a.callbackPriority=0;else if(d=b&-b,a.callbackPriority!==d){if(x!=null&&Ar(x),d===1)a.tag===0?tD(ME.bind(null,a)):v_(ME.bind(null,a)),Q6(function(){(rn&6)===0&&tl()}),x=null;else{switch(Eo(b)){case 1:x=ke;break;case 4:x=_o;break;case 16:x=Jt;break;case 536870912:x=lu;break;default:x=Jt}x=WE(x,OE.bind(null,a))}a.callbackPriority=d,a.callbackNode=x}}function OE(a,d){if(B0=-1,j0=0,(rn&6)!==0)throw Error(t(327));var x=a.callbackNode;if(Nu()&&a.callbackNode!==x)return null;var b=Ei(a,a===ii?mi:0);if(b===0)return null;if((b&30)!==0||(b&a.expiredLanes)!==0||d)d=U0(a,b);else{d=b;var S=rn;rn|=2;var k=VE();(ii!==a||mi!==d)&&(xa=null,Ru=Zt()+500,dc(a,d));do try{ED();break}catch(ne){LE(a,ne)}while(!0);s1(),O0.current=k,rn=S,Dr!==null?d=0:(ii=null,mi=0,d=Kr)}if(d!==0){if(d===2&&(S=Lt(a),S!==0&&(b=S,d=z1(a,S))),d===1)throw x=ph,dc(a,0),ll(a,b),os(a,Zt()),x;if(d===6)ll(a,b);else{if(S=a.current.alternate,(b&30)===0&&!vD(S)&&(d=U0(a,b),d===2&&(k=Lt(a),k!==0&&(b=k,d=z1(a,k))),d===1))throw x=ph,dc(a,0),ll(a,b),os(a,Zt()),x;switch(a.finishedWork=S,a.finishedLanes=b,d){case 0:case 1:throw Error(t(345));case 2:hc(a,ss,xa);break;case 3:if(ll(a,b),(b&130023424)===b&&(d=B1+500-Zt(),10<d)){if(Ei(a,0)!==0)break;if(S=a.suspendedLanes,(S&b)!==b){$i(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=Kg(hc.bind(null,a,ss,xa),d);break}hc(a,ss,xa);break;case 4:if(ll(a,b),(b&4194240)===b)break;for(d=a.eventTimes,S=-1;0<b;){var $=31-Hr(b);k=1<<$,$=d[$],$>S&&(S=$),b&=~k}if(b=S,b=Zt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*wD(b/1960))-b,10<b){a.timeoutHandle=Kg(hc.bind(null,a,ss,xa),b);break}hc(a,ss,xa);break;case 5:hc(a,ss,xa);break;default:throw Error(t(329))}}}return os(a,Zt()),a.callbackNode===x?OE.bind(null,a):null}function z1(a,d){var x=gh;return a.current.memoizedState.isDehydrated&&(dc(a,d).flags|=256),a=U0(a,d),a!==2&&(d=ss,ss=x,d!==null&&W1(d)),a}function W1(a){ss===null?ss=a:ss.push.apply(ss,a)}function vD(a){for(var d=a;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var b=0;b<x.length;b++){var S=x[b],k=S.getSnapshot;S=S.value;try{if(!fe(k(),S))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ll(a,d){for(d&=~F1,d&=~M0,a.suspendedLanes|=d,a.pingedLanes&=~d,a=a.expirationTimes;0<d;){var x=31-Hr(d),b=1<<x;a[x]=-1,d&=~b}}function ME(a){if((rn&6)!==0)throw Error(t(327));Nu();var d=Ei(a,0);if((d&1)===0)return os(a,Zt()),null;var x=U0(a,d);if(a.tag!==0&&x===2){var b=Lt(a);b!==0&&(d=b,x=z1(a,b))}if(x===1)throw x=ph,dc(a,0),ll(a,d),os(a,Zt()),x;if(x===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=d,hc(a,ss,xa),os(a,Zt()),null}function H1(a,d){var x=rn;rn|=1;try{return a(d)}finally{rn=x,rn===0&&(Ru=Zt()+500,m0&&tl())}}function uc(a){ol!==null&&ol.tag===0&&(rn&6)===0&&Nu();var d=rn;rn|=1;var x=Us.transition,b=bt;try{if(Us.transition=null,bt=1,a)return a()}finally{bt=b,Us.transition=x,rn=d,(rn&6)===0&&tl()}}function G1(){Es=Su.current,Wn(Su)}function dc(a,d){a.finishedWork=null,a.finishedLanes=0;var x=a.timeoutHandle;if(x!==-1&&(a.timeoutHandle=-1,Y6(x)),Dr!==null)for(x=Dr.return;x!==null;){var b=x;switch(e1(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&h0();break;case 3:Iu(),Wn(ns),Wn(Si),f1();break;case 5:d1(b);break;case 4:Iu();break;case 13:Wn(sr);break;case 19:Wn(sr);break;case 10:o1(b.type._context);break;case 22:case 23:G1()}x=x.return}if(ii=a,Dr=a=cl(a.current,null),mi=Es=d,Kr=0,ph=null,F1=M0=cc=0,ss=gh=null,oc!==null){for(d=0;d<oc.length;d++)if(x=oc[d],b=x.interleaved,b!==null){x.interleaved=null;var S=b.next,k=x.pending;if(k!==null){var $=k.next;k.next=S,b.next=$}x.pending=b}oc=null}return a}function LE(a,d){do{var x=Dr;try{if(s1(),A0.current=S0,I0){for(var b=or.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}I0=!1}if(lc=0,ri=qr=or=null,ch=!1,uh=0,V1.current=null,x===null||x.return===null){Kr=1,ph=d,Dr=null;break}e:{var k=a,$=x.return,ne=x,ce=d;if(d=mi,ne.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var be=ce,Me=ne,Ve=Me.tag;if((Me.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var De=Me.alternate;De?(Me.updateQueue=De.updateQueue,Me.memoizedState=De.memoizedState,Me.lanes=De.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Qe=aE($);if(Qe!==null){Qe.flags&=-257,lE(Qe,$,ne,k,d),Qe.mode&1&&oE(k,be,d),d=Qe,ce=be;var et=d.updateQueue;if(et===null){var ot=new Set;ot.add(ce),d.updateQueue=ot}else et.add(ce);break e}else{if((d&1)===0){oE(k,be,d),$1();break e}ce=Error(t(426))}}else if(Jn&&ne.mode&1){var Sr=aE($);if(Sr!==null){(Sr.flags&65536)===0&&(Sr.flags|=256),lE(Sr,$,ne,k,d),r1(Tu(ce,ne));break e}}k=ce=Tu(ce,ne),Kr!==4&&(Kr=2),gh===null?gh=[k]:gh.push(k),k=$;do{switch(k.tag){case 3:k.flags|=65536,d&=-d,k.lanes|=d;var xe=iE(k,ce,d);k_(k,xe);break e;case 1:ne=ce;var de=k.type,ve=k.stateNode;if((k.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(sl===null||!sl.has(ve)))){k.flags|=65536,d&=-d,k.lanes|=d;var Ue=sE(k,ne,d);k_(k,Ue);break e}}k=k.return}while(k!==null)}BE(x)}catch(lt){d=lt,Dr===x&&x!==null&&(Dr=x=x.return);continue}break}while(!0)}function VE(){var a=O0.current;return O0.current=S0,a===null?S0:a}function $1(){(Kr===0||Kr===3||Kr===2)&&(Kr=4),ii===null||(cc&268435455)===0&&(M0&268435455)===0||ll(ii,mi)}function U0(a,d){var x=rn;rn|=2;var b=VE();(ii!==a||mi!==d)&&(xa=null,dc(a,d));do try{_D();break}catch(S){LE(a,S)}while(!0);if(s1(),rn=x,O0.current=b,Dr!==null)throw Error(t(261));return ii=null,mi=0,Kr}function _D(){for(;Dr!==null;)FE(Dr)}function ED(){for(;Dr!==null&&!yn();)FE(Dr)}function FE(a){var d=zE(a.alternate,a,Es);a.memoizedProps=a.pendingProps,d===null?BE(a):Dr=d,V1.current=null}function BE(a){var d=a;do{var x=d.alternate;if(a=d.return,(d.flags&32768)===0){if(x=mD(x,d,Es),x!==null){Dr=x;return}}else{if(x=pD(x,d),x!==null){x.flags&=32767,Dr=x;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Kr=6,Dr=null;return}}if(d=d.sibling,d!==null){Dr=d;return}Dr=d=a}while(d!==null);Kr===0&&(Kr=5)}function hc(a,d,x){var b=bt,S=Us.transition;try{Us.transition=null,bt=1,bD(a,d,x,b)}finally{Us.transition=S,bt=b}return null}function bD(a,d,x,b){do Nu();while(ol!==null);if((rn&6)!==0)throw Error(t(327));x=a.finishedWork;var S=a.finishedLanes;if(x===null)return null;if(a.finishedWork=null,a.finishedLanes=0,x===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var k=x.lanes|x.childLanes;if($e(a,k),a===ii&&(Dr=ii=null,mi=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||V0||(V0=!0,WE(Jt,function(){return Nu(),null})),k=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||k){k=Us.transition,Us.transition=null;var $=bt;bt=1;var ne=rn;rn|=4,V1.current=null,yD(a,x),RE(x,a),Ci($g),Ji=!!Gg,$g=Gg=null,a.current=x,xD(x),au(),rn=ne,bt=$,Us.transition=k}else a.current=x;if(V0&&(V0=!1,ol=a,F0=S),k=a.pendingLanes,k===0&&(sl=null),Mt(x.stateNode),os(a,Zt()),d!==null)for(b=a.onRecoverableError,x=0;x<d.length;x++)S=d[x],b(S.value,{componentStack:S.stack,digest:S.digest});if(L0)throw L0=!1,a=j1,j1=null,a;return(F0&1)!==0&&a.tag!==0&&Nu(),k=a.pendingLanes,(k&1)!==0?a===U1?yh++:(yh=0,U1=a):yh=0,tl(),null}function Nu(){if(ol!==null){var a=Eo(F0),d=Us.transition,x=bt;try{if(Us.transition=null,bt=16>a?16:a,ol===null)var b=!1;else{if(a=ol,ol=null,F0=0,(rn&6)!==0)throw Error(t(331));var S=rn;for(rn|=4,Je=a.current;Je!==null;){var k=Je,$=k.child;if((Je.flags&16)!==0){var ne=k.deletions;if(ne!==null){for(var ce=0;ce<ne.length;ce++){var be=ne[ce];for(Je=be;Je!==null;){var Me=Je;switch(Me.tag){case 0:case 11:case 15:mh(8,Me,k)}var Ve=Me.child;if(Ve!==null)Ve.return=Me,Je=Ve;else for(;Je!==null;){Me=Je;var De=Me.sibling,Qe=Me.return;if(AE(Me),Me===be){Je=null;break}if(De!==null){De.return=Qe,Je=De;break}Je=Qe}}}var et=k.alternate;if(et!==null){var ot=et.child;if(ot!==null){et.child=null;do{var Sr=ot.sibling;ot.sibling=null,ot=Sr}while(ot!==null)}}Je=k}}if((k.subtreeFlags&2064)!==0&&$!==null)$.return=k,Je=$;else e:for(;Je!==null;){if(k=Je,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:mh(9,k,k.return)}var xe=k.sibling;if(xe!==null){xe.return=k.return,Je=xe;break e}Je=k.return}}var de=a.current;for(Je=de;Je!==null;){$=Je;var ve=$.child;if(($.subtreeFlags&2064)!==0&&ve!==null)ve.return=$,Je=ve;else e:for($=de;Je!==null;){if(ne=Je,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:D0(9,ne)}}catch(lt){mr(ne,ne.return,lt)}if(ne===$){Je=null;break e}var Ue=ne.sibling;if(Ue!==null){Ue.return=ne.return,Je=Ue;break e}Je=ne.return}}if(rn=S,tl(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(jt,a)}catch{}b=!0}return b}finally{bt=x,Us.transition=d}}return!1}function jE(a,d,x){d=Tu(x,d),d=iE(a,d,1),a=rl(a,d,1),d=$i(),a!==null&&(Z(a,1,d),os(a,d))}function mr(a,d,x){if(a.tag===3)jE(a,a,x);else for(;d!==null;){if(d.tag===3){jE(d,a,x);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(sl===null||!sl.has(b))){a=Tu(x,a),a=sE(d,a,1),d=rl(d,a,1),a=$i(),d!==null&&(Z(d,1,a),os(d,a));break}}d=d.return}}function AD(a,d,x){var b=a.pingCache;b!==null&&b.delete(d),d=$i(),a.pingedLanes|=a.suspendedLanes&x,ii===a&&(mi&x)===x&&(Kr===4||Kr===3&&(mi&130023424)===mi&&500>Zt()-B1?dc(a,0):F1|=x),os(a,d)}function UE(a,d){d===0&&((a.mode&1)===0?d=1:(d=Ha,Ha<<=1,(Ha&130023424)===0&&(Ha=4194304)));var x=$i();a=pa(a,d),a!==null&&(Z(a,d,x),os(a,x))}function ID(a){var d=a.memoizedState,x=0;d!==null&&(x=d.retryLane),UE(a,x)}function TD(a,d){var x=0;switch(a.tag){case 13:var b=a.stateNode,S=a.memoizedState;S!==null&&(x=S.retryLane);break;case 19:b=a.stateNode;break;default:throw Error(t(314))}b!==null&&b.delete(d),UE(a,x)}var zE;zE=function(a,d,x){if(a!==null)if(a.memoizedProps!==d.pendingProps||ns.current)is=!0;else{if((a.lanes&x)===0&&(d.flags&128)===0)return is=!1,fD(a,d,x);is=(a.flags&131072)!==0}else is=!1,Jn&&(d.flags&1048576)!==0&&__(d,g0,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;k0(a,d),a=d.pendingProps;var S=xu(d,Si.current);Au(d,x),S=g1(null,d,b,a,S,x);var k=y1();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,rs(b)?(k=!0,f0(d)):k=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,c1(d),S.updater=R0,d.stateNode=S,S._reactInternals=d,b1(d,b,a,x),d=C1(null,d,b,!0,k,x)):(d.tag=0,Jn&&k&&Jg(d),Gi(null,d,S,x),d=d.child),d;case 16:b=d.elementType;e:{switch(k0(a,d),a=d.pendingProps,S=b._init,b=S(b._payload),d.type=b,S=d.tag=SD(b),a=ro(b,a),S){case 0:d=T1(null,d,b,a,x);break e;case 1:d=mE(null,d,b,a,x);break e;case 11:d=cE(null,d,b,a,x);break e;case 14:d=uE(null,d,b,ro(b.type,a),x);break e}throw Error(t(306,b,""))}return d;case 0:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),T1(a,d,b,S,x);case 1:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),mE(a,d,b,S,x);case 3:e:{if(pE(d),a===null)throw Error(t(387));b=d.pendingProps,k=d.memoizedState,S=k.element,N_(a,d),E0(d,b,null,x);var $=d.memoizedState;if(b=$.element,k.isDehydrated)if(k={element:b,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){S=Tu(Error(t(423)),d),d=gE(a,d,b,x,S);break e}else if(b!==S){S=Tu(Error(t(424)),d),d=gE(a,d,b,x,S);break e}else for(_s=Za(d.stateNode.containerInfo.firstChild),vs=d,Jn=!0,no=null,x=S_(d,null,b,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(_u(),b===S){d=ya(a,d,x);break e}Gi(a,d,b,x)}d=d.child}return d;case 5:return D_(d),a===null&&n1(d),b=d.type,S=d.pendingProps,k=a!==null?a.memoizedProps:null,$=S.children,qg(b,S)?$=null:k!==null&&qg(b,k)&&(d.flags|=32),fE(a,d),Gi(a,d,$,x),d.child;case 6:return a===null&&n1(d),null;case 13:return yE(a,d,x);case 4:return u1(d,d.stateNode.containerInfo),b=d.pendingProps,a===null?d.child=Eu(d,null,b,x):Gi(a,d,b,x),d.child;case 11:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),cE(a,d,b,S,x);case 7:return Gi(a,d,d.pendingProps,x),d.child;case 8:return Gi(a,d,d.pendingProps.children,x),d.child;case 12:return Gi(a,d,d.pendingProps.children,x),d.child;case 10:e:{if(b=d.type._context,S=d.pendingProps,k=d.memoizedProps,$=S.value,On(w0,b._currentValue),b._currentValue=$,k!==null)if(fe(k.value,$)){if(k.children===S.children&&!ns.current){d=ya(a,d,x);break e}}else for(k=d.child,k!==null&&(k.return=d);k!==null;){var ne=k.dependencies;if(ne!==null){$=k.child;for(var ce=ne.firstContext;ce!==null;){if(ce.context===b){if(k.tag===1){ce=ga(-1,x&-x),ce.tag=2;var be=k.updateQueue;if(be!==null){be=be.shared;var Me=be.pending;Me===null?ce.next=ce:(ce.next=Me.next,Me.next=ce),be.pending=ce}}k.lanes|=x,ce=k.alternate,ce!==null&&(ce.lanes|=x),a1(k.return,x,d),ne.lanes|=x;break}ce=ce.next}}else if(k.tag===10)$=k.type===d.type?null:k.child;else if(k.tag===18){if($=k.return,$===null)throw Error(t(341));$.lanes|=x,ne=$.alternate,ne!==null&&(ne.lanes|=x),a1($,x,d),$=k.sibling}else $=k.child;if($!==null)$.return=k;else for($=k;$!==null;){if($===d){$=null;break}if(k=$.sibling,k!==null){k.return=$.return,$=k;break}$=$.return}k=$}Gi(a,d,S.children,x),d=d.child}return d;case 9:return S=d.type,b=d.pendingProps.children,Au(d,x),S=Bs(S),b=b(S),d.flags|=1,Gi(a,d,b,x),d.child;case 14:return b=d.type,S=ro(b,d.pendingProps),S=ro(b.type,S),uE(a,d,b,S,x);case 15:return dE(a,d,d.type,d.pendingProps,x);case 17:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:ro(b,S),k0(a,d),d.tag=1,rs(b)?(a=!0,f0(d)):a=!1,Au(d,x),nE(d,b,S),b1(d,b,S,x),C1(null,d,b,!0,a,x);case 19:return wE(a,d,x);case 22:return hE(a,d,x)}throw Error(t(156,d.tag))};function WE(a,d){return li(a,d)}function CD(a,d,x,b){this.tag=a,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(a,d,x,b){return new CD(a,d,x,b)}function q1(a){return a=a.prototype,!(!a||!a.isReactComponent)}function SD(a){if(typeof a=="function")return q1(a)?1:0;if(a!=null){if(a=a.$$typeof,a===X)return 11;if(a===re)return 14}return 2}function cl(a,d){var x=a.alternate;return x===null?(x=zs(a.tag,d,a.key,a.mode),x.elementType=a.elementType,x.type=a.type,x.stateNode=a.stateNode,x.alternate=a,a.alternate=x):(x.pendingProps=d,x.type=a.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=a.flags&14680064,x.childLanes=a.childLanes,x.lanes=a.lanes,x.child=a.child,x.memoizedProps=a.memoizedProps,x.memoizedState=a.memoizedState,x.updateQueue=a.updateQueue,d=a.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=a.sibling,x.index=a.index,x.ref=a.ref,x}function z0(a,d,x,b,S,k){var $=2;if(b=a,typeof a=="function")q1(a)&&($=1);else if(typeof a=="string")$=5;else e:switch(a){case F:return fc(x.children,S,k,d);case B:$=8,S|=8;break;case G:return a=zs(12,x,d,S|2),a.elementType=G,a.lanes=k,a;case q:return a=zs(13,x,d,S),a.elementType=q,a.lanes=k,a;case pe:return a=zs(19,x,d,S),a.elementType=pe,a.lanes=k,a;case we:return W0(x,S,k,d);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case J:$=10;break e;case te:$=9;break e;case X:$=11;break e;case re:$=14;break e;case Ie:$=16,b=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return d=zs($,x,d,S),d.elementType=a,d.type=b,d.lanes=k,d}function fc(a,d,x,b){return a=zs(7,a,b,d),a.lanes=x,a}function W0(a,d,x,b){return a=zs(22,a,b,d),a.elementType=we,a.lanes=x,a.stateNode={isHidden:!1},a}function K1(a,d,x){return a=zs(6,a,null,d),a.lanes=x,a}function X1(a,d,x){return d=zs(4,a.children!==null?a.children:[],a.key,d),d.lanes=x,d.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},d}function RD(a,d,x,b,S){this.tag=d,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=b,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Y1(a,d,x,b,S,k,$,ne,ce){return a=new RD(a,d,x,ne,ce),d===1?(d=1,k===!0&&(d|=8)):d=0,k=zs(3,null,null,d),a.current=k,k.stateNode=a,k.memoizedState={element:b,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},c1(k),a}function ND(a,d,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:b==null?null:""+b,children:a,containerInfo:d,implementation:x}}function HE(a){if(!a)return el;a=a._reactInternals;e:{if(ei(a)!==a||a.tag!==1)throw Error(t(170));var d=a;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(rs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(a.tag===1){var x=a.type;if(rs(x))return x_(a,x,d)}return d}function GE(a,d,x,b,S,k,$,ne,ce){return a=Y1(x,b,!0,a,S,k,$,ne,ce),a.context=HE(null),x=a.current,b=$i(),S=al(x),k=ga(b,S),k.callback=d??null,rl(x,k,S),a.current.lanes=S,Z(a,S,b),os(a,b),a}function H0(a,d,x,b){var S=d.current,k=$i(),$=al(S);return x=HE(x),d.context===null?d.context=x:d.pendingContext=x,d=ga(k,$),d.payload={element:a},b=b===void 0?null:b,b!==null&&(d.callback=b),a=rl(S,d,$),a!==null&&(oo(a,S,$,k),_0(a,S,$)),$}function G0(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function $E(a,d){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var x=a.retryLane;a.retryLane=x!==0&&x<d?x:d}}function Q1(a,d){$E(a,d),(a=a.alternate)&&$E(a,d)}function kD(){return null}var qE=typeof reportError=="function"?reportError:function(a){console.error(a)};function Z1(a){this._internalRoot=a}$0.prototype.render=Z1.prototype.render=function(a){var d=this._internalRoot;if(d===null)throw Error(t(409));H0(a,d,null,null)},$0.prototype.unmount=Z1.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var d=a.containerInfo;uc(function(){H0(null,a,null,null)}),d[da]=null}};function $0(a){this._internalRoot=a}$0.prototype.unstable_scheduleHydration=function(a){if(a){var d=Sn();a={blockedOn:null,target:a,priority:d};for(var x=0;x<$r.length&&d!==0&&d<$r[x].priority;x++);$r.splice(x,0,a),x===0&&uu(a)}};function J1(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function q0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function KE(){}function PD(a,d,x,b,S){if(S){if(typeof b=="function"){var k=b;b=function(){var be=G0($);k.call(be)}}var $=GE(d,b,a,0,null,!1,!1,"",KE);return a._reactRootContainer=$,a[da]=$.current,th(a.nodeType===8?a.parentNode:a),uc(),$}for(;S=a.lastChild;)a.removeChild(S);if(typeof b=="function"){var ne=b;b=function(){var be=G0(ce);ne.call(be)}}var ce=Y1(a,0,!1,null,null,!1,!1,"",KE);return a._reactRootContainer=ce,a[da]=ce.current,th(a.nodeType===8?a.parentNode:a),uc(function(){H0(d,ce,x,b)}),ce}function K0(a,d,x,b,S){var k=x._reactRootContainer;if(k){var $=k;if(typeof S=="function"){var ne=S;S=function(){var ce=G0($);ne.call(ce)}}H0(d,$,a,S)}else $=PD(x,d,a,S,b);return G0($)}Ga=function(a){switch(a.tag){case 3:var d=a.stateNode;if(d.current.memoizedState.isDehydrated){var x=pn(d.pendingLanes);x!==0&&(Rn(d,x|1),os(d,Zt()),(rn&6)===0&&(Ru=Zt()+500,tl()))}break;case 13:uc(function(){var b=pa(a,1);if(b!==null){var S=$i();oo(b,a,1,S)}}),Q1(a,1)}},Gr=function(a){if(a.tag===13){var d=pa(a,134217728);if(d!==null){var x=$i();oo(d,a,134217728,x)}Q1(a,134217728)}},ut=function(a){if(a.tag===13){var d=al(a),x=pa(a,d);if(x!==null){var b=$i();oo(x,a,d,b)}Q1(a,d)}},Sn=function(){return bt},Ql=function(a,d){var x=bt;try{return bt=a,d()}finally{bt=x}},Zs=function(a,d,x){switch(d){case"input":if(Qt(a,x),d=x.name,x.type==="radio"&&d!=null){for(x=a;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var b=x[d];if(b!==a&&b.form===a.form){var S=d0(b);if(!S)throw Error(t(90));Et(b),Qt(b,S)}}}break;case"textarea":Zr(a,x);break;case"select":d=x.value,d!=null&&Xe(a,!!x.multiple,d,!1)}},Tn=H1,$t=uc;var DD={usingClientEntryPoint:!1,Events:[ih,gu,d0,pt,Gt,H1]},xh={findFiberByHostInstance:nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OD={bundleType:xh.bundleType,version:xh.version,rendererPackageName:xh.rendererPackageName,rendererConfig:xh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Yl(a),a===null?null:a.stateNode},findFiberByHostInstance:xh.findFiberByHostInstance||kD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var X0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!X0.isDisabled&&X0.supportsFiber)try{jt=X0.inject(OD),Nt=X0}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DD,as.createPortal=function(a,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J1(d))throw Error(t(200));return ND(a,d,null,x)},as.createRoot=function(a,d){if(!J1(a))throw Error(t(299));var x=!1,b="",S=qE;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=Y1(a,1,!1,null,null,x,!1,b,S),a[da]=d.current,th(a.nodeType===8?a.parentNode:a),new Z1(d)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var d=a._reactInternals;if(d===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Yl(d),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return uc(a)},as.hydrate=function(a,d,x){if(!q0(d))throw Error(t(200));return K0(null,a,d,!0,x)},as.hydrateRoot=function(a,d,x){if(!J1(a))throw Error(t(405));var b=x!=null&&x.hydratedSources||null,S=!1,k="",$=qE;if(x!=null&&(x.unstable_strictMode===!0&&(S=!0),x.identifierPrefix!==void 0&&(k=x.identifierPrefix),x.onRecoverableError!==void 0&&($=x.onRecoverableError)),d=GE(d,null,a,1,x??null,S,!1,k,$),a[da]=d.current,th(a),b)for(a=0;a<b.length;a++)x=b[a],S=x._getVersion,S=S(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,S]:d.mutableSourceEagerHydrationData.push(x,S);return new $0(d)},as.render=function(a,d,x){if(!q0(d))throw Error(t(200));return K0(null,a,d,!1,x)},as.unmountComponentAtNode=function(a){if(!q0(a))throw Error(t(40));return a._reactRootContainer?(uc(function(){K0(null,null,a,!1,function(){a._reactRootContainer=null,a[da]=null})}),!0):!1},as.unstable_batchedUpdates=H1,as.unstable_renderSubtreeIntoContainer=function(a,d,x,b){if(!q0(x))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return K0(a,d,x,!1,b)},as.version="18.3.1-next-f1338f8080-20240426",as}var nb;function RC(){if(nb)return ry.exports;nb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ry.exports=WD(),ry.exports}var rb;function HD(){if(rb)return Q0;rb=1;var n=RC();return Q0.createRoot=n.createRoot,Q0.hydrateRoot=n.hydrateRoot,Q0}var GD=HD();const $D=zp(GD);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ib="popstate";function qD(n={}){function e(r,i){let{pathname:o,search:c,hash:h}=r.location;return rx("",{pathname:o,search:c,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:rf(i)}return XD(e,t,null,n)}function cr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Yo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KD(){return Math.random().toString(36).substring(2,10)}function sb(n,e){return{usr:n.state,key:n.key,idx:e}}function rx(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?kd(e):e,state:t,key:e&&e.key||r||KD()}}function rf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function kd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function XD(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,h="POP",p=null,g=w();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function w(){return(c.state||{idx:null}).idx}function E(){h="POP";let L=w(),H=L==null?null:L-g;g=L,p&&p({action:h,location:D.location,delta:H})}function T(L,H){h="PUSH";let z=rx(D.location,L,H);g=w()+1;let W=sb(z,g),Q=D.createHref(z);try{c.pushState(W,"",Q)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;i.location.assign(Q)}o&&p&&p({action:h,location:D.location,delta:1})}function R(L,H){h="REPLACE";let z=rx(D.location,L,H);g=w();let W=sb(z,g),Q=D.createHref(z);c.replaceState(W,"",Q),o&&p&&p({action:h,location:D.location,delta:0})}function M(L){return YD(L)}let D={get action(){return h},get location(){return n(i,c)},listen(L){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(ib,E),p=L,()=>{i.removeEventListener(ib,E),p=null}},createHref(L){return e(i,L)},createURL:M,encodeLocation(L){let H=M(L);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:R,go(L){return c.go(L)}};return D}function YD(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),cr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:rf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function NC(n,e,t="/"){return QD(n,e,t,!1)}function QD(n,e,t,r){let i=typeof e=="string"?kd(e):e,o=Ta(i.pathname||"/",t);if(o==null)return null;let c=kC(n);ZD(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let g=c8(o);h=a8(c[p],g,r)}return h}function kC(n,e=[],t=[],r=""){let i=(o,c,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};p.relativePath.startsWith("/")&&(cr(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let g=Ia([r,p.relativePath]),w=t.concat(p);o.children&&o.children.length>0&&(cr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),kC(o.children,e,w,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:s8(g,o.index),routesMeta:w})};return n.forEach((o,c)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,c);else for(let p of PC(o.path))i(o,c,p)}),e}function PC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=PC(r.join("/")),h=[];return h.push(...c.map(p=>p===""?o:[o,p].join("/"))),i&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function ZD(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:o8(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var JD=/^:[\w-]+$/,e8=3,t8=2,n8=1,r8=10,i8=-2,ob=n=>n==="*";function s8(n,e){let t=n.split("/"),r=t.length;return t.some(ob)&&(r+=i8),e&&(r+=t8),t.filter(i=>!ob(i)).reduce((i,o)=>i+(JD.test(o)?e8:o===""?n8:r8),r)}function o8(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function a8(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",c=[];for(let h=0;h<r.length;++h){let p=r[h],g=h===r.length-1,w=o==="/"?e:e.slice(o.length)||"/",E=Qm({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},w),T=p.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=Qm({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!E)return null;Object.assign(i,E.params),c.push({params:i,pathname:Ia([o,E.pathname]),pathnameBase:f8(Ia([o,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(o=Ia([o,E.pathnameBase]))}return c}function Qm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=l8(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((g,{paramName:w,isOptional:E},T)=>{if(w==="*"){let M=h[T]||"";c=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const R=h[T];return E&&!R?g[w]=void 0:g[w]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:n}}function l8(n,e=!1,t=!0){Yo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(r.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function c8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ta(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function u8(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?kd(n):n;return{pathname:t?t.startsWith("/")?t:d8(t,e):e,search:m8(r),hash:p8(i)}}function d8(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function oy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function h8(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function DC(n){let e=h8(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function OC(n,e,t,r=!1){let i;typeof n=="string"?i=kd(n):(i={...n},cr(!i.pathname||!i.pathname.includes("?"),oy("?","pathname","search",i)),cr(!i.pathname||!i.pathname.includes("#"),oy("#","pathname","hash",i)),cr(!i.search||!i.search.includes("#"),oy("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,h;if(c==null)h=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;i.pathname=T.join("/")}h=E>=0?e[E]:"/"}let p=u8(i,h),g=c&&c!=="/"&&c.endsWith("/"),w=(o||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||w)&&(p.pathname+="/"),p}var Ia=n=>n.join("/").replace(/\/\/+/g,"/"),f8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),m8=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,p8=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function g8(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var MC=["POST","PUT","PATCH","DELETE"];new Set(MC);var y8=["GET",...MC];new Set(y8);var Pd=P.createContext(null);Pd.displayName="DataRouter";var Wp=P.createContext(null);Wp.displayName="DataRouterState";P.createContext(!1);var LC=P.createContext({isTransitioning:!1});LC.displayName="ViewTransition";var x8=P.createContext(new Map);x8.displayName="Fetchers";var w8=P.createContext(null);w8.displayName="Await";var ea=P.createContext(null);ea.displayName="Navigation";var kf=P.createContext(null);kf.displayName="Location";var Va=P.createContext({outlet:null,matches:[],isDataRoute:!1});Va.displayName="Route";var kw=P.createContext(null);kw.displayName="RouteError";function v8(n,{relative:e}={}){cr(Pf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(ea),{hash:i,pathname:o,search:c}=Df(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Ia([t,o])),r.createHref({pathname:h,search:c,hash:i})}function Pf(){return P.useContext(kf)!=null}function Fa(){return cr(Pf(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(kf).location}var VC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FC(n){P.useContext(ea).static||P.useLayoutEffect(n)}function ta(){let{isDataRoute:n}=P.useContext(Va);return n?D8():_8()}function _8(){cr(Pf(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Pd),{basename:e,navigator:t}=P.useContext(ea),{matches:r}=P.useContext(Va),{pathname:i}=Fa(),o=JSON.stringify(DC(r)),c=P.useRef(!1);return FC(()=>{c.current=!0}),P.useCallback((p,g={})=>{if(Yo(c.current,VC),!c.current)return;if(typeof p=="number"){t.go(p);return}let w=OC(p,JSON.parse(o),i,g.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Ia([e,w.pathname])),(g.replace?t.replace:t.push)(w,g.state,g)},[e,t,o,i,n])}P.createContext(null);function Df(n,{relative:e}={}){let{matches:t}=P.useContext(Va),{pathname:r}=Fa(),i=JSON.stringify(DC(t));return P.useMemo(()=>OC(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function E8(n,e){return BC(n,e)}function BC(n,e,t,r){var H;cr(Pf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(ea),{matches:o}=P.useContext(Va),c=o[o.length-1],h=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",w=c&&c.route;{let z=w&&w.path||"";jC(p,!w||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=Fa(),T;if(e){let z=typeof e=="string"?kd(e):e;cr(g==="/"||((H=z.pathname)==null?void 0:H.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=E;let R=T.pathname||"/",M=R;if(g!=="/"){let z=g.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=NC(n,{pathname:M});Yo(w||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Yo(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=C8(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Ia([g,i.encodeLocation?i.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:Ia([g,i.encodeLocation?i.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,t,r);return e&&L?P.createElement(kf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},L):L}function b8(){let n=P8(),e=g8(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,c)}var A8=P.createElement(b8,null),I8=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(Va.Provider,{value:this.props.routeContext},P.createElement(kw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function T8({routeContext:n,match:e,children:t}){let r=P.useContext(Pd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Va.Provider,{value:n},t)}function C8(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let p=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);cr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,h=-1;if(t)for(let p=0;p<i.length;p++){let g=i[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:w,errors:E}=t,T=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||T){c=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((p,g,w)=>{let E,T=!1,R=null,M=null;t&&(E=o&&g.route.id?o[g.route.id]:void 0,R=g.route.errorElement||A8,c&&(h<0&&w===0?(jC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,M=null):h===w&&(T=!0,M=g.route.hydrateFallbackElement||null)));let D=e.concat(i.slice(0,w+1)),L=()=>{let H;return E?H=R:T?H=M:g.route.Component?H=P.createElement(g.route.Component,null):g.route.element?H=g.route.element:H=p,P.createElement(T8,{match:g,routeContext:{outlet:p,matches:D,isDataRoute:t!=null},children:H})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?P.createElement(I8,{location:t.location,revalidation:t.revalidation,component:R,error:E,children:L(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):L()},null)}function Pw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S8(n){let e=P.useContext(Pd);return cr(e,Pw(n)),e}function R8(n){let e=P.useContext(Wp);return cr(e,Pw(n)),e}function N8(n){let e=P.useContext(Va);return cr(e,Pw(n)),e}function Dw(n){let e=N8(n),t=e.matches[e.matches.length-1];return cr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function k8(){return Dw("useRouteId")}function P8(){var r;let n=P.useContext(kw),e=R8("useRouteError"),t=Dw("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function D8(){let{router:n}=S8("useNavigate"),e=Dw("useNavigate"),t=P.useRef(!1);return FC(()=>{t.current=!0}),P.useCallback(async(i,o={})=>{Yo(t.current,VC),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var ab={};function jC(n,e,t){!e&&!ab[n]&&(ab[n]=!0,Yo(!1,t))}P.memo(O8);function O8({routes:n,future:e,state:t}){return BC(n,void 0,t,e)}function yl(n){cr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function M8({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){cr(!Pf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:c,navigator:i,static:o,future:{}}),[c,i,o]);typeof t=="string"&&(t=kd(t));let{pathname:p="/",search:g="",hash:w="",state:E=null,key:T="default"}=t,R=P.useMemo(()=>{let M=Ta(p,c);return M==null?null:{location:{pathname:M,search:g,hash:w,state:E,key:T},navigationType:r}},[c,p,g,w,E,T,r]);return Yo(R!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:P.createElement(ea.Provider,{value:h},P.createElement(kf.Provider,{children:e,value:R}))}function L8({children:n,location:e}){return E8(ix(n),e)}function ix(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let o=[...e,i];if(r.type===P.Fragment){t.push.apply(t,ix(r.props.children,o));return}cr(r.type===yl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ix(r.props.children,o)),t.push(c)}),t}var bm="get",Am="application/x-www-form-urlencoded";function Hp(n){return n!=null&&typeof n.tagName=="string"}function V8(n){return Hp(n)&&n.tagName.toLowerCase()==="button"}function F8(n){return Hp(n)&&n.tagName.toLowerCase()==="form"}function B8(n){return Hp(n)&&n.tagName.toLowerCase()==="input"}function j8(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function U8(n,e){return n.button===0&&(!e||e==="_self")&&!j8(n)}var Z0=null;function z8(){if(Z0===null)try{new FormData(document.createElement("form"),0),Z0=!1}catch{Z0=!0}return Z0}var W8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ay(n){return n!=null&&!W8.has(n)?(Yo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Am}"`),null):n}function H8(n,e){let t,r,i,o,c;if(F8(n)){let h=n.getAttribute("action");r=h?Ta(h,e):null,t=n.getAttribute("method")||bm,i=ay(n.getAttribute("enctype"))||Am,o=new FormData(n)}else if(V8(n)||B8(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(r=p?Ta(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||bm,i=ay(n.getAttribute("formenctype"))||ay(h.getAttribute("enctype"))||Am,o=new FormData(h,n),!z8()){let{name:g,type:w,value:E}=n;if(w==="image"){let T=g?`${g}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else g&&o.append(g,E)}}else{if(Hp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bm,r=null,i=Am,c=n}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ow(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function G8(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ta(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function $8(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function q8(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function K8(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await $8(o,t);return c.links?c.links():[]}return[]}));return Z8(r.flat(1).filter(q8).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function lb(n,e,t,r,i,o){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,h=(p,g)=>{var w;return t[g].pathname!==p.pathname||((w=t[g].route.path)==null?void 0:w.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return o==="assets"?e.filter((p,g)=>c(p,g)||h(p,g)):o==="data"?e.filter((p,g)=>{var E;let w=r.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(c(p,g)||h(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function X8(n,e,{includeHydrateFallback:t}={}){return Y8(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function Y8(n){return[...new Set(n)]}function Q8(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Z8(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(Q8(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function UC(){let n=P.useContext(Pd);return Ow(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function J8(){let n=P.useContext(Wp);return Ow(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Mw=P.createContext(void 0);Mw.displayName="FrameworkContext";function zC(){let n=P.useContext(Mw);return Ow(n,"You must render this element inside a <HydratedRouter> element"),n}function eO(n,e){let t=P.useContext(Mw),[r,i]=P.useState(!1),[o,c]=P.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:g,onMouseLeave:w,onTouchStart:E}=e,T=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=H=>{H.forEach(z=>{c(z.isIntersecting)})},L=new IntersectionObserver(D,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),P.useEffect(()=>{if(r){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[r]);let R=()=>{i(!0)},M=()=>{i(!1),c(!1)};return t?n!=="intent"?[o,T,{}]:[o,T,{onFocus:vh(h,R),onBlur:vh(p,M),onMouseEnter:vh(g,R),onMouseLeave:vh(w,M),onTouchStart:vh(E,R)}]:[!1,T,{}]}function vh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function tO({page:n,...e}){let{router:t}=UC(),r=P.useMemo(()=>NC(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(rO,{page:n,matches:r,...e}):null}function nO(n){let{manifest:e,routeModules:t}=zC(),[r,i]=P.useState([]);return P.useEffect(()=>{let o=!1;return K8(n,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[n,e,t]),r}function rO({page:n,matches:e,...t}){let r=Fa(),{manifest:i,routeModules:o}=zC(),{basename:c}=UC(),{loaderData:h,matches:p}=J8(),g=P.useMemo(()=>lb(n,e,p,i,r,"data"),[n,e,p,i,r]),w=P.useMemo(()=>lb(n,e,p,i,r,"assets"),[n,e,p,i,r]),E=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,D=!1;if(e.forEach(H=>{var W;let z=i.routes[H.route.id];!z||!z.hasLoader||(!g.some(Q=>Q.route.id===H.route.id)&&H.route.id in h&&((W=o[H.route.id])!=null&&W.shouldRevalidate)||z.hasClientLoader?D=!0:M.add(H.route.id))}),M.size===0)return[];let L=G8(n,c,"data");return D&&M.size>0&&L.searchParams.set("_routes",e.filter(H=>M.has(H.route.id)).map(H=>H.route.id).join(",")),[L.pathname+L.search]},[c,h,r,i,g,e,n,o]),T=P.useMemo(()=>X8(w,i),[w,i]),R=nO(w);return P.createElement(P.Fragment,null,E.map(M=>P.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),T.map(M=>P.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),R.map(({key:M,link:D})=>P.createElement("link",{key:M,...D})))}function iO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var WC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{WC&&(window.__reactRouterVersion="7.7.1")}catch{}function sO({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=qD({window:t,v5Compat:!0}));let i=r.current,[o,c]=P.useState({action:i.action,location:i.location}),h=P.useCallback(p=>{P.startTransition(()=>c(p))},[c]);return P.useLayoutEffect(()=>i.listen(h),[i,h]),P.createElement(M8,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var HC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GC=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:h,target:p,to:g,preventScrollReset:w,viewTransition:E,...T},R){let{basename:M}=P.useContext(ea),D=typeof g=="string"&&HC.test(g),L,H=!1;if(typeof g=="string"&&D&&(L=g,WC))try{let G=new URL(window.location.href),J=g.startsWith("//")?new URL(G.protocol+g):new URL(g),te=Ta(J.pathname,M);J.origin===G.origin&&te!=null?g=te+J.search+J.hash:H=!0}catch{Yo(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=v8(g,{relative:i}),[W,Q,ie]=eO(r,T),le=cO(g,{replace:c,state:h,target:p,preventScrollReset:w,relative:i,viewTransition:E});function F(G){e&&e(G),G.defaultPrevented||le(G)}let B=P.createElement("a",{...T,...ie,href:L||z,onClick:H||o?e:F,ref:iO(R,Q),target:p,"data-discover":!D&&t==="render"?"true":void 0});return W&&!D?P.createElement(P.Fragment,null,B,P.createElement(tO,{page:z})):B});GC.displayName="Link";var oO=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:h,children:p,...g},w){let E=Df(c,{relative:g.relative}),T=Fa(),R=P.useContext(Wp),{navigator:M,basename:D}=P.useContext(ea),L=R!=null&&mO(E)&&h===!0,H=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,z=T.pathname,W=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(z=z.toLowerCase(),W=W?W.toLowerCase():null,H=H.toLowerCase()),W&&D&&(W=Ta(W,D)||W);const Q=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let ie=z===H||!i&&z.startsWith(H)&&z.charAt(Q)==="/",le=W!=null&&(W===H||!i&&W.startsWith(H)&&W.charAt(H.length)==="/"),F={isActive:ie,isPending:le,isTransitioning:L},B=ie?e:void 0,G;typeof r=="function"?G=r(F):G=[r,ie?"active":null,le?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let J=typeof o=="function"?o(F):o;return P.createElement(GC,{...g,"aria-current":B,className:G,ref:w,style:J,to:c,viewTransition:h},typeof p=="function"?p(F):p)});oO.displayName="NavLink";var aO=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:c=bm,action:h,onSubmit:p,relative:g,preventScrollReset:w,viewTransition:E,...T},R)=>{let M=hO(),D=fO(h,{relative:g}),L=c.toLowerCase()==="get"?"get":"post",H=typeof h=="string"&&HC.test(h),z=W=>{if(p&&p(W),W.defaultPrevented)return;W.preventDefault();let Q=W.nativeEvent.submitter,ie=(Q==null?void 0:Q.getAttribute("formmethod"))||c;M(Q||W.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:i,state:o,relative:g,preventScrollReset:w,viewTransition:E})};return P.createElement("form",{ref:R,method:L,action:D,onSubmit:r?p:z,...T,"data-discover":!H&&n==="render"?"true":void 0})});aO.displayName="Form";function lO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $C(n){let e=P.useContext(Pd);return cr(e,lO(n)),e}function cO(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:c}={}){let h=ta(),p=Fa(),g=Df(n,{relative:o});return P.useCallback(w=>{if(U8(w,e)){w.preventDefault();let E=t!==void 0?t:rf(p)===rf(g);h(n,{replace:E,state:r,preventScrollReset:i,relative:o,viewTransition:c})}},[p,h,g,t,r,e,n,i,o,c])}var uO=0,dO=()=>`__${String(++uO)}__`;function hO(){let{router:n}=$C("useSubmit"),{basename:e}=P.useContext(ea),t=k8();return P.useCallback(async(r,i={})=>{let{action:o,method:c,encType:h,formData:p,body:g}=H8(r,e);if(i.navigate===!1){let w=i.fetcherKey||dO();await n.fetch(w,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:g,formMethod:i.method||c,formEncType:i.encType||h,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:p,body:g,formMethod:i.method||c,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function fO(n,{relative:e}={}){let{basename:t}=P.useContext(ea),r=P.useContext(Va);cr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Df(n||".",{relative:e})},c=Fa();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),p=h.getAll("index");if(p.some(w=>w==="")){h.delete("index"),p.filter(E=>E).forEach(E=>h.append("index",E));let w=h.toString();o.search=w?`?${w}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ia([t,o.pathname])),rf(o)}function mO(n,{relative:e}={}){let t=P.useContext(LC);cr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=$C("useViewTransitionState"),i=Df(n,{relative:e});if(!t.isTransitioning)return!1;let o=Ta(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Ta(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Qm(i.pathname,c)!=null||Qm(i.pathname,o)!=null}var Of=RC();const qC=zp(Of);function qn(n){return"/"+n.toLowerCase().replace(/ /g,"-")}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...h},p)=>P.createElement("svg",{ref:p,...gO,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:KC("lucide",i),...h},[...c.map(([g,w])=>P.createElement(g,w)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=(n,e)=>{const t=P.forwardRef(({className:r,...i},o)=>P.createElement(yO,{ref:o,iconNode:e,className:KC(`lucide-${pO(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lw=Ot("ArrowRight",xO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],vO=Ot("Calendar",wO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Zm=Ot("Camera",_O);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bO=Ot("Check",EO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vw=Ot("ChevronDown",AO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],TO=Ot("ChevronLeft",IO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],XC=Ot("ChevronUp",CO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Fw=Ot("CircleAlert",SO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],NO=Ot("CircleCheckBig",RO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],yc=Ot("CircleCheck",kO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Bw=Ot("Clock",PO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],OO=Ot("EyeOff",DO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LO=Ot("Eye",MO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],YC=Ot("Filter",VO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],BO=Ot("Flag",FO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],QC=Ot("Hash",jO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],ld=Ot("Heart",UO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],WO=Ot("House",zO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],GO=Ot("LogOut",HO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],qO=Ot("Mail",$O);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],cd=Ot("MessageCircle",KO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],YO=Ot("PartyPopper",XO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Jm=Ot("Phone",QO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],JO=Ot("QrCode",ZO);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tM=Ot("RefreshCw",eM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],rM=Ot("Ruler",nM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ly=Ot("Save",iM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],oM=Ot("Send",sM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],cb=Ot("Share",aM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cM=Ot("Shield",lM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],dM=Ot("Sparkles",uM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],cy=Ot("SquarePen",hM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],mM=Ot("Star",fM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],gM=Ot("Trash2",pM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ZC=Ot("TriangleAlert",yM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],wM=Ot("Upload",xM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Dd=Ot("User",vM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ud=Ot("Users",_M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bM=Ot("WifiOff",EM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],IM=Ot("Wifi",AM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Li=Ot("X",TM),CM=()=>{};var ub={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},SM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],h=n[t++],p=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},eS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,h=c?n[i+1]:0,p=i+2<n.length,g=p?n[i+2]:0,w=o>>2,E=(o&3)<<4|h>>4;let T=(h&15)<<2|g>>6,R=g&63;p||(R=64,c||(T=64)),r.push(t[w],t[E],t[T],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(JC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const E=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||g==null||E==null)throw new RM;const T=o<<2|h>>4;if(r.push(T),g!==64){const R=h<<4&240|g>>2;if(r.push(R),E!==64){const M=g<<6&192|E;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NM=function(n){const e=JC(n);return eS.encodeByteArray(e,!0)},ep=function(n){return NM(n).replace(/\./g,"")},tS=function(n){try{return eS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=()=>nS().__FIREBASE_DEFAULTS__,PM=()=>{if(typeof process>"u"||typeof ub>"u")return;const n=ub.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&tS(n[1]);return e&&JSON.parse(e)},Gp=()=>{try{return CM()||kM()||PM()||DM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rS=n=>{var e,t;return(t=(e=Gp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},iS=n=>{const e=rS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},sS=()=>{var n;return(n=Gp())==null?void 0:n.config},oS=n=>{var e;return(e=Gp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ep(JSON.stringify(t)),ep(JSON.stringify(c)),""].join(".")}const jh={};function MM(){const n={prod:[],emulator:[]};for(const e of Object.keys(jh))jh[e]?n.emulator.push(e):n.prod.push(e);return n}function LM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let db=!1;function Uw(n,e){if(typeof window>"u"||typeof document>"u"||!Wl(window.location.host)||jh[n]===e||jh[n]||db)return;jh[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",o=MM().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{db=!0,c()},T}function w(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=LM(r),R=t("text"),M=document.getElementById(R)||document.createElement("span"),D=t("learnmore"),L=document.getElementById(D)||document.createElement("a"),H=t("preprendIcon"),z=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;h(W),w(L,D);const Q=g();p(z,H),W.append(z,M,L,Q),document.body.appendChild(W)}o?(M.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yr())}function lS(){var e;const n=(e=Gp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UM(){const n=Yr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cS(){return!lS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uS(){return!lS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function dS(){try{return typeof indexedDB=="object"}catch{return!1}}function zM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="FirebaseError";class na extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=WM,Object.setPrototypeOf(this,na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mf.prototype.create)}}class Mf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?HM(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new na(i,h,r)}}function HM(n,e){return n.replace(GM,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const GM=/\{\$([^}]+)}/g;function $M(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function jc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(hb(o)&&hb(c)){if(!jc(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function hb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qM(n,e){const t=new KM(n,e);return t.subscribe.bind(t)}class KM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XM(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=uy),i.error===void 0&&(i.error=uy),i.complete===void 0&&(i.complete=uy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function uy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(n){return n&&n._delegate?n._delegate:n}class Dl{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new OM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZM(e))try{this.getOrInitializeService({instanceIdentifier:xc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=xc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xc){return this.instances.has(e)}getOptions(e=xc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xc){return this.component?this.component.multipleInstances?e:xc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QM(n){return n===xc?void 0:n}function ZM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new YM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xt||(Xt={}));const e5={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},t5=Xt.INFO,n5={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},r5=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=n5[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zw{constructor(e){this.name=e,this._logLevel=t5,this._logHandler=r5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const i5=(n,e)=>e.some(t=>n instanceof t);let fb,mb;function s5(){return fb||(fb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o5(){return mb||(mb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hS=new WeakMap,sx=new WeakMap,fS=new WeakMap,dy=new WeakMap,Ww=new WeakMap;function a5(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Cl(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&hS.set(t,n)}).catch(()=>{}),Ww.set(e,n),e}function l5(n){if(sx.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});sx.set(n,e)}let ox={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sx.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function c5(n){ox=n(ox)}function u5(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(hy(this),e,...t);return fS.set(r,e.sort?e.sort():[e]),Cl(r)}:o5().includes(n)?function(...e){return n.apply(hy(this),e),Cl(hS.get(this))}:function(...e){return Cl(n.apply(hy(this),e))}}function d5(n){return typeof n=="function"?u5(n):(n instanceof IDBTransaction&&l5(n),i5(n,s5())?new Proxy(n,ox):n)}function Cl(n){if(n instanceof IDBRequest)return a5(n);if(dy.has(n))return dy.get(n);const e=d5(n);return e!==n&&(dy.set(n,e),Ww.set(e,n)),e}const hy=n=>Ww.get(n);function h5(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),h=Cl(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Cl(c.result),p.oldVersion,p.newVersion,Cl(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{o&&p.addEventListener("close",()=>o()),i&&p.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const f5=["get","getKey","getAll","getAllKeys","count"],m5=["put","add","delete","clear"],fy=new Map;function pb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fy.get(e))return fy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=m5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||f5.includes(t)))return;const o=async function(c,...h){const p=this.transaction(c,i?"readwrite":"readonly");let g=p.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),i&&p.done]))[0]};return fy.set(e,o),o}c5(n=>({...n,get:(e,t,r)=>pb(e,t)||n.get(e,t,r),has:(e,t)=>!!pb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function g5(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ax="@firebase/app",gb="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new zw("@firebase/app"),y5="@firebase/app-compat",x5="@firebase/analytics-compat",w5="@firebase/analytics",v5="@firebase/app-check-compat",_5="@firebase/app-check",E5="@firebase/auth",b5="@firebase/auth-compat",A5="@firebase/database",I5="@firebase/data-connect",T5="@firebase/database-compat",C5="@firebase/functions",S5="@firebase/functions-compat",R5="@firebase/installations",N5="@firebase/installations-compat",k5="@firebase/messaging",P5="@firebase/messaging-compat",D5="@firebase/performance",O5="@firebase/performance-compat",M5="@firebase/remote-config",L5="@firebase/remote-config-compat",V5="@firebase/storage",F5="@firebase/storage-compat",B5="@firebase/firestore",j5="@firebase/ai",U5="@firebase/firestore-compat",z5="firebase",W5="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="[DEFAULT]",H5={[ax]:"fire-core",[y5]:"fire-core-compat",[w5]:"fire-analytics",[x5]:"fire-analytics-compat",[_5]:"fire-app-check",[v5]:"fire-app-check-compat",[E5]:"fire-auth",[b5]:"fire-auth-compat",[A5]:"fire-rtdb",[I5]:"fire-data-connect",[T5]:"fire-rtdb-compat",[C5]:"fire-fn",[S5]:"fire-fn-compat",[R5]:"fire-iid",[N5]:"fire-iid-compat",[k5]:"fire-fcm",[P5]:"fire-fcm-compat",[D5]:"fire-perf",[O5]:"fire-perf-compat",[M5]:"fire-rc",[L5]:"fire-rc-compat",[V5]:"fire-gcs",[F5]:"fire-gcs-compat",[B5]:"fire-fst",[U5]:"fire-fst-compat",[j5]:"fire-vertex","fire-js":"fire-js",[z5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Map,G5=new Map,cx=new Map;function yb(n,e){try{n.container.addComponent(e)}catch(t){Ca.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uc(n){const e=n.name;if(cx.has(e))return Ca.debug(`There were multiple attempts to register component ${e}.`),!1;cx.set(e,n);for(const t of tp.values())yb(t,n);for(const t of G5.values())yb(t,n);return!0}function $p(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ho(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sl=new Mf("app","Firebase",$5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=W5;function ux(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:lx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Sl.create("bad-app-name",{appName:String(i)});if(t||(t=sS()),!t)throw Sl.create("no-options");const o=tp.get(i);if(o){if(jc(t,o.options)&&jc(r,o.config))return o;throw Sl.create("duplicate-app",{appName:i})}const c=new JM(i);for(const p of cx.values())c.addComponent(p);const h=new q5(t,r,c);return tp.set(i,h),h}function Hw(n=lx){const e=tp.get(n);if(!e&&n===lx&&sS())return ux();if(!e)throw Sl.create("no-app",{appName:n});return e}function Bo(n,e,t){let r=H5[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ca.warn(c.join(" "));return}Uc(new Dl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5="firebase-heartbeat-database",X5=1,sf="firebase-heartbeat-store";let my=null;function mS(){return my||(my=h5(K5,X5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sl.create("idb-open",{originalErrorMessage:n.message})})),my}async function Y5(n){try{const t=(await mS()).transaction(sf),r=await t.objectStore(sf).get(pS(n));return await t.done,r}catch(e){if(e instanceof na)Ca.warn(e.message);else{const t=Sl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ca.warn(t.message)}}}async function xb(n,e){try{const r=(await mS()).transaction(sf,"readwrite");await r.objectStore(sf).put(e,pS(n)),await r.done}catch(t){if(t instanceof na)Ca.warn(t.message);else{const r=Sl.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ca.warn(r.message)}}}function pS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=1024,Z5=30;class J5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new t9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Z5){const c=n9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ca.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wb(),{heartbeatsToSend:r,unsentEntries:i}=e9(this._heartbeatsCache.heartbeats),o=ep(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ca.warn(t),""}}}function wb(){return new Date().toISOString().substring(0,10)}function e9(n,e=Q5){const t=[];let r=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),vb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),vb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class t9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dS()?zM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Y5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vb(n){return ep(JSON.stringify({version:2,heartbeats:n})).length}function n9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(n){Uc(new Dl("platform-logger",e=>new p5(e),"PRIVATE")),Uc(new Dl("heartbeat",e=>new J5(e),"PRIVATE")),Bo(ax,gb,n),Bo(ax,gb,"esm2020"),Bo("fire-js","")}r9("");var i9="firebase",s9="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bo(i9,s9,"app");function gS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o9=gS,yS=new Mf("auth","Firebase",gS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=new zw("@firebase/auth");function a9(n,...e){np.logLevel<=Xt.WARN&&np.warn(`Auth (${iu}): ${n}`,...e)}function Im(n,...e){np.logLevel<=Xt.ERROR&&np.error(`Auth (${iu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(n,...e){throw Gw(n,...e)}function jo(n,...e){return Gw(n,...e)}function xS(n,e,t){const r={...o9(),[e]:t};return new Mf("auth","Firebase",r).create(e,{appName:n.name})}function kc(n){return xS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gw(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return yS.create(n,...e)}function Tt(n,e,...t){if(!n)throw Gw(e,...t)}function _a(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Im(e),new Error(e)}function Ra(n,e){n||_a(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function l9(){return _b()==="http:"||_b()==="https:"}function _b(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l9()||BM()||"connection"in navigator)?navigator.onLine:!0}function u9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ra(t>e,"Short delay should be less than long delay!"),this.isMobile=VM()||jM()}get(){return c9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n,e){Ra(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f9=new Vf(3e4,6e4);function qw(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Od(n,e,t,r,i={}){return vS(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const h=Lf({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...o};return FM()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Wl(n.emulatorConfig.host)&&(g.credentials="include"),wS.fetch()(await _S(n,n.config.apiHost,t,h),g)})}async function vS(n,e,t){n._canInitEmulator=!1;const r={...d9,...e};try{const i=new p9(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw J0(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw J0(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw J0(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw J0(n,"user-disabled",c);const w=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw xS(n,w,g);Sa(n,w)}}catch(i){if(i instanceof na)throw i;Sa(n,"network-request-failed",{message:String(i)})}}async function m9(n,e,t,r,i={}){const o=await Od(n,e,t,r,i);return"mfaPendingCredential"in o&&Sa(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function _S(n,e,t,r){const i=`${e}${t}?${r}`,o=n,c=o.config.emulator?$w(n.config,i):`${n.config.apiScheme}://${i}`;return h9.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}class p9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jo(this.auth,"network-request-failed")),f9.get())})}}function J0(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=jo(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g9(n,e){return Od(n,"POST","/v1/accounts:delete",e)}async function rp(n,e){return Od(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y9(n,e=!1){const t=jr(n),r=await t.getIdToken(e),i=Kw(r);Tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Uh(py(i.auth_time)),issuedAtTime:Uh(py(i.iat)),expirationTime:Uh(py(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function py(n){return Number(n)*1e3}function Kw(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Im("JWT malformed, contained fewer than 3 sections"),null;try{const i=tS(t);return i?JSON.parse(i):(Im("Failed to decode base64 JWT payload"),null)}catch(i){return Im("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Eb(n){const e=Kw(n);return Tt(e,"internal-error"),Tt(typeof e.exp<"u","internal-error"),Tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof na&&x9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function x9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uh(this.lastLoginAt),this.creationTime=Uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ip(n){var E;const e=n.auth,t=await n.getIdToken(),r=await of(n,rp(e,{idToken:t}));Tt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(E=i.providerUserInfo)!=null&&E.length?ES(i.providerUserInfo):[],c=_9(n.providerData,o),h=n.isAnonymous,p=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),g=h?p:!1,w={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new hx(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(n,w)}async function v9(n){const e=jr(n);await ip(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ES(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E9(n,e){const t=await vS(n,{},async()=>{const r=Lf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await _S(n,i,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:r};return n.emulatorConfig&&Wl(n.emulatorConfig.host)&&(p.credentials="include"),wS.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function b9(n,e){return Od(n,"POST","/v2/accounts:revokeToken",qw(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Tt(e.idToken,"internal-error"),Tt(typeof e.idToken<"u","internal-error"),Tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Eb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Tt(e.length!==0,"internal-error");const t=Eb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await E9(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new ed;return r&&(Tt(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Tt(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Tt(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ed,this.toJSON())}_performRefresh(){return _a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(n,e){Tt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fo{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new w9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new hx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await of(this,this.stsTokenManager.getToken(this.auth,e));return Tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return y9(this,e)}reload(){return v9(this)}_assign(e){this!==e&&(Tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ip(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ho(this.auth.app))return Promise.reject(kc(this.auth));const e=await this.getIdToken();return await of(this,g9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:R,providerData:M,stsTokenManager:D}=t;Tt(E&&D,e,"internal-error");const L=ed.fromJSON(this.name,D);Tt(typeof E=="string",e,"internal-error"),dl(r,e.name),dl(i,e.name),Tt(typeof T=="boolean",e,"internal-error"),Tt(typeof R=="boolean",e,"internal-error"),dl(o,e.name),dl(c,e.name),dl(h,e.name),dl(p,e.name),dl(g,e.name),dl(w,e.name);const H=new fo({uid:E,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:R,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:L,createdAt:g,lastLoginAt:w});return M&&Array.isArray(M)&&(H.providerData=M.map(z=>({...z}))),p&&(H._redirectEventId=p),H}static async _fromIdTokenResponse(e,t,r=!1){const i=new ed;i.updateFromServerResponse(t);const o=new fo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ip(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Tt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?ES(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),h=new ed;h.updateFromIdToken(r);const p=new fo({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new hx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;function Ea(n){Ra(n instanceof Function,"Expected a class definition");let e=bb.get(n);return e?(Ra(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bS.type="NONE";const Ab=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(n,e,t){return`firebase:${n}:${e}:${t}`}class td{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Tm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Tm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rp(this.auth,{idToken:e}).catch(()=>{});return t?fo._fromGetAccountInfoResponse(this.auth,t,e):null}return fo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new td(Ea(Ab),e,r);const i=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||Ea(Ab);const c=Tm(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const w=await g._get(c);if(w){let E;if(typeof w=="string"){const T=await rp(e,{idToken:w}).catch(()=>{});if(!T)break;E=await fo._fromGetAccountInfoResponse(e,T,w)}else E=fo._fromJSON(e,w);g!==o&&(h=E),o=g;break}}catch{}const p=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!p.length?new td(o,e,r):(o=p[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new td(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RS(e))return"Blackberry";if(NS(e))return"Webos";if(IS(e))return"Safari";if((e.includes("chrome/")||TS(e))&&!e.includes("edge/"))return"Chrome";if(SS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function AS(n=Yr()){return/firefox\//i.test(n)}function IS(n=Yr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TS(n=Yr()){return/crios\//i.test(n)}function CS(n=Yr()){return/iemobile/i.test(n)}function SS(n=Yr()){return/android/i.test(n)}function RS(n=Yr()){return/blackberry/i.test(n)}function NS(n=Yr()){return/webos/i.test(n)}function Xw(n=Yr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function A9(n=Yr()){var e;return Xw(n)&&!!((e=window.navigator)!=null&&e.standalone)}function I9(){return UM()&&document.documentMode===10}function kS(n=Yr()){return Xw(n)||SS(n)||NS(n)||RS(n)||/windows phone/i.test(n)||CS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n,e=[]){let t;switch(n){case"Browser":t=Ib(Yr());break;case"Worker":t=`${Ib(Yr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${iu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,h)=>{try{const p=e(o);c(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(n,e={}){return Od(n,"GET","/v2/passwordPolicy",qw(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=6;class R9{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??S9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tb(this),this.idTokenSubscription=new Tb(this),this.beforeStateQueue=new T9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ea(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await td.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rp(this,{idToken:e}),r=await fo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(ho(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&(p!=null&&p.user)&&(r=p.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ip(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ho(this.app))return Promise.reject(kc(this));const t=e?jr(e):null;return t&&Tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ho(this.app)?Promise.reject(kc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ho(this.app)?Promise.reject(kc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C9(this),t=new R9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await b9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ea(e)||this._popupRedirectResolver;Tt(t,this,"argument-error"),this.redirectPersistenceManager=await td.create(this,[Ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,i);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(ho(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&a9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Yw(n){return jr(n)}class Tb{constructor(e){this.auth=e,this.observer=null,this.addObserver=qM(t=>this.observer=t)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k9(n){Qw=n}function P9(n){return Qw.loadJS(n)}function D9(){return Qw.gapiScript}function O9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(n,e){const t=$p(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(jc(o,e??{}))return i;Sa(i,"already-initialized")}return t.initialize({options:e})}function L9(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ea);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function V9(n,e,t){const r=Yw(n);Tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=DS(e),{host:c,port:h}=F9(e),p=h===null?"":`:${h}`,g={url:`${o}//${c}${p}/`},w=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Tt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Tt(jc(g,r.config.emulator)&&jc(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,Wl(c)?(jw(`${o}//${c}${p}`),Uw("Auth",!0)):B9()}function DS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function F9(n){const e=DS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Cb(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Cb(c)}}}function Cb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function B9(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _a("not implemented")}_getIdTokenResponse(e){return _a("not implemented")}_linkToIdToken(e,t){return _a("not implemented")}_getReauthenticationResolver(e){return _a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(n,e){return m9(n,"POST","/v1/accounts:signInWithIdp",qw(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9="http://localhost";class zc extends OS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new zc(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return nd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nd(e,t)}buildRequest(){const e={requestUri:j9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends MS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Ff{constructor(){super("facebook.com")}static credential(e){return zc._fromParams({providerId:vl.PROVIDER_ID,signInMethod:vl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vl.credentialFromTaggedObject(e)}static credentialFromError(e){return vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vl.credential(e.oauthAccessToken)}catch{return null}}}vl.FACEBOOK_SIGN_IN_METHOD="facebook.com";vl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends Ff{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zc._fromParams({providerId:_l.PROVIDER_ID,signInMethod:_l.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _l.credentialFromTaggedObject(e)}static credentialFromError(e){return _l.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _l.credential(t,r)}catch{return null}}}_l.GOOGLE_SIGN_IN_METHOD="google.com";_l.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Ff{constructor(){super("github.com")}static credential(e){return zc._fromParams({providerId:El.PROVIDER_ID,signInMethod:El.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return El.credentialFromTaggedObject(e)}static credentialFromError(e){return El.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return El.credential(e.oauthAccessToken)}catch{return null}}}El.GITHUB_SIGN_IN_METHOD="github.com";El.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Ff{constructor(){super("twitter.com")}static credential(e,t){return zc._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return bl.credential(t,r)}catch{return null}}}bl.TWITTER_SIGN_IN_METHOD="twitter.com";bl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await fo._fromIdTokenResponse(e,r,i),c=Sb(r);return new dd({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Sb(r);return new dd({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Sb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp extends na{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new sp(e,t,r,i)}}function LS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sp._fromErrorAndOperation(n,o,e,r):o})}async function U9(n,e,t=!1){const r=await of(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return dd._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(n,e,t=!1){const{auth:r}=n;if(ho(r.app))return Promise.reject(kc(r));const i="reauthenticate";try{const o=await of(n,LS(r,i,e,n),t);Tt(o.idToken,r,"internal-error");const c=Kw(o.idToken);Tt(c,r,"internal-error");const{sub:h}=c;return Tt(n.uid===h,r,"user-mismatch"),dd._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Sa(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W9(n,e,t=!1){if(ho(n.app))return Promise.reject(kc(n));const r="signIn",i=await LS(n,r,e),o=await dd._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function H9(n,e,t,r){return jr(n).onIdTokenChanged(e,t,r)}function G9(n,e,t){return jr(n).beforeAuthStateChanged(e,t)}const op="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(op,"1"),this.storage.removeItem(op),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=1e3,q9=10;class FS extends VS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);I9()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,q9):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},$9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FS.type="LOCAL";const K9=FS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends VS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BS.type="SESSION";const jS=BS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new qp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(c).map(async g=>g(t.origin,o)),p=await X9(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((h,p)=>{const g=Zw("",20);i.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(w),o=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(w),clearTimeout(o),p(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(){return window}function Q9(n){Uo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(){return typeof Uo().WorkerGlobalScope<"u"&&typeof Uo().importScripts=="function"}async function Z9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function J9(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function eL(){return US()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="firebaseLocalStorageDb",tL=1,ap="firebaseLocalStorage",WS="fbase_key";class Bf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kp(n,e){return n.transaction([ap],e?"readwrite":"readonly").objectStore(ap)}function nL(){const n=indexedDB.deleteDatabase(zS);return new Bf(n).toPromise()}function fx(){const n=indexedDB.open(zS,tL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ap,{keyPath:WS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ap)?e(r):(r.close(),await nL(),e(await fx()))})})}async function Rb(n,e,t){const r=Kp(n,!0).put({[WS]:e,value:t});return new Bf(r).toPromise()}async function rL(n,e){const t=Kp(n,!1).get(e),r=await new Bf(t).toPromise();return r===void 0?null:r.value}function Nb(n,e){const t=Kp(n,!0).delete(e);return new Bf(t).toPromise()}const iL=800,sL=3;class HS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fx(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>sL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return US()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qp._getInstance(eL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Z9(),!this.activeServiceWorker)return;this.sender=new Y9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||J9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fx();return await Rb(e,op,"1"),await Nb(e,op),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>rL(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Kp(i,!1).getAll();return new Bf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}HS.type="LOCAL";const oL=HS;new Vf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(n,e){return e?Ea(e):(Tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends OS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lL(n){return W9(n.auth,new Jw(n),n.bypassAuthState)}function cL(n){const{auth:e,user:t}=n;return Tt(t,e,"internal-error"),z9(t,new Jw(n),n.bypassAuthState)}async function uL(n){const{auth:e,user:t}=n;return Tt(t,e,"internal-error"),U9(t,new Jw(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lL;case"linkViaPopup":case"linkViaRedirect":return uL;case"reauthViaPopup":case"reauthViaRedirect":return cL;default:Sa(this.auth,"internal-error")}}resolve(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ra(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=new Vf(2e3,1e4);class qu extends GS{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,qu.currentPopupAction&&qu.currentPopupAction.cancel(),qu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Tt(e,this.auth,"internal-error"),e}async onExecution(){Ra(this.filter.length===1,"Popup operations only handle one event");const e=Zw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(jo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dL.get())};e()}}qu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL="pendingRedirect",Cm=new Map;class fL extends GS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Cm.get(this.auth._key());if(!e){try{const r=await mL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Cm.set(this.auth._key(),e)}return this.bypassAuthState||Cm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mL(n,e){const t=yL(e),r=gL(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function pL(n,e){Cm.set(n._key(),e)}function gL(n){return Ea(n._redirectPersistence)}function yL(n){return Tm(hL,n.config.apiKey,n.name)}async function xL(n,e,t=!1){if(ho(n.app))return Promise.reject(kc(n));const r=Yw(n),i=aL(r,e),c=await new fL(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=600*1e3;class vL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_L(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$S(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(jo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wL&&this.cachedEventUids.clear(),this.cachedEventUids.has(kb(e))}saveEventToCache(e){this.cachedEventUids.add(kb(e)),this.lastProcessedEventTime=Date.now()}}function kb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $S({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _L(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $S(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(n,e={}){return Od(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AL=/^https?/;async function IL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await EL(n);for(const t of e)try{if(TL(t))return}catch{}Sa(n,"unauthorized-domain")}function TL(n){const e=dx(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!AL.test(t))return!1;if(bL.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new Vf(3e4,6e4);function Pb(){const n=Uo().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function SL(n){return new Promise((e,t)=>{var i,o,c;function r(){Pb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pb(),t(jo(n,"network-request-failed"))},timeout:CL.get()})}if((o=(i=Uo().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Uo().gapi)!=null&&c.load)r();else{const h=O9("iframefcb");return Uo()[h]=()=>{gapi.load?r():t(jo(n,"network-request-failed"))},P9(`${D9()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw Sm=null,e})}let Sm=null;function RL(n){return Sm=Sm||SL(n),Sm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new Vf(5e3,15e3),kL="__/auth/iframe",PL="emulator/auth/iframe",DL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},OL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ML(n){const e=n.config;Tt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$w(e,PL):`https://${n.config.authDomain}/${kL}`,r={apiKey:e.apiKey,appName:n.name,v:iu},i=OL.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Lf(r).slice(1)}`}async function LL(n){const e=await RL(n),t=Uo().gapi;return Tt(t,n,"internal-error"),e.open({where:document.body,url:ML(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DL,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=jo(n,"network-request-failed"),h=Uo().setTimeout(()=>{o(c)},NL.get());function p(){Uo().clearTimeout(h),i(r)}r.ping(p).then(p,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FL=500,BL=600,jL="_blank",UL="http://localhost";class Db{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zL(n,e,t,r=FL,i=BL){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const p={...VL,width:r.toString(),height:i.toString(),top:o,left:c},g=Yr().toLowerCase();t&&(h=TS(g)?jL:t),AS(g)&&(e=e||UL,p.scrollbars="yes");const w=Object.entries(p).reduce((T,[R,M])=>`${T}${R}=${M},`,"");if(A9(g)&&h!=="_self")return WL(e||"",h),new Db(null);const E=window.open(e||"",h,w);Tt(E,n,"popup-blocked");try{E.focus()}catch{}return new Db(E)}function WL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="__/auth/handler",GL="emulator/auth/handler",$L=encodeURIComponent("fac");async function Ob(n,e,t,r,i,o){Tt(n.config.authDomain,n,"auth-domain-config-required"),Tt(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:iu,eventId:i};if(e instanceof MS){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",$M(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))c[w]=E}if(e instanceof Ff){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const w of Object.keys(h))h[w]===void 0&&delete h[w];const p=await n._getAppCheckToken(),g=p?`#${$L}=${encodeURIComponent(p)}`:"";return`${qL(n)}?${Lf(h).slice(1)}${g}`}function qL({config:n}){return n.emulator?$w(n,GL):`https://${n.authDomain}/${HL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="webStorageSupport";class KL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jS,this._completeRedirectFn=xL,this._overrideRedirectResult=pL}async _openPopup(e,t,r,i){var c;Ra((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await Ob(e,t,r,dx(),i);return zL(e,o,Zw())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Ob(e,t,r,dx(),i);return Q9(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ra(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await LL(e),r=new vL(e);return t.register("authEvent",i=>(Tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gy,{type:gy},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[gy];o!==void 0&&t(!!o),Sa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kS()||IS()||Xw()}}const XL=KL;var Mb="@firebase/auth",Lb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZL(n){Uc(new Dl("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Tt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(n)},g=new N9(r,i,o,p);return L9(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Uc(new Dl("auth-internal",e=>{const t=Yw(e.getProvider("auth").getImmediate());return(r=>new YL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bo(Mb,Lb,QL(n)),Bo(Mb,Lb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=300,e7=oS("authIdTokenMaxAge")||JL;let Vb=null;const t7=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>e7)return;const i=t==null?void 0:t.token;Vb!==i&&(Vb=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function n7(n=Hw()){const e=$p(n,"auth");if(e.isInitialized())return e.getImmediate();const t=M9(n,{popupRedirectResolver:XL,persistence:[oL,K9,jS]}),r=oS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=t7(o.toString());G9(t,c,()=>c(t.currentUser)),H9(t,h=>c(h))}}const i=rS("auth");return i&&V9(t,`http://${i}`),t}function r7(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}k9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=jo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",r7().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZL("Browser");var Fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rl,qS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,B){function G(){}G.prototype=B.prototype,F.D=B.prototype,F.prototype=new G,F.prototype.constructor=F,F.C=function(J,te,X){for(var q=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)q[pe-2]=arguments[pe];return B.prototype[te].apply(J,q)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,B,G){G||(G=0);var J=Array(16);if(typeof B=="string")for(var te=0;16>te;++te)J[te]=B.charCodeAt(G++)|B.charCodeAt(G++)<<8|B.charCodeAt(G++)<<16|B.charCodeAt(G++)<<24;else for(te=0;16>te;++te)J[te]=B[G++]|B[G++]<<8|B[G++]<<16|B[G++]<<24;B=F.g[0],G=F.g[1],te=F.g[2];var X=F.g[3],q=B+(X^G&(te^X))+J[0]+3614090360&4294967295;B=G+(q<<7&4294967295|q>>>25),q=X+(te^B&(G^te))+J[1]+3905402710&4294967295,X=B+(q<<12&4294967295|q>>>20),q=te+(G^X&(B^G))+J[2]+606105819&4294967295,te=X+(q<<17&4294967295|q>>>15),q=G+(B^te&(X^B))+J[3]+3250441966&4294967295,G=te+(q<<22&4294967295|q>>>10),q=B+(X^G&(te^X))+J[4]+4118548399&4294967295,B=G+(q<<7&4294967295|q>>>25),q=X+(te^B&(G^te))+J[5]+1200080426&4294967295,X=B+(q<<12&4294967295|q>>>20),q=te+(G^X&(B^G))+J[6]+2821735955&4294967295,te=X+(q<<17&4294967295|q>>>15),q=G+(B^te&(X^B))+J[7]+4249261313&4294967295,G=te+(q<<22&4294967295|q>>>10),q=B+(X^G&(te^X))+J[8]+1770035416&4294967295,B=G+(q<<7&4294967295|q>>>25),q=X+(te^B&(G^te))+J[9]+2336552879&4294967295,X=B+(q<<12&4294967295|q>>>20),q=te+(G^X&(B^G))+J[10]+4294925233&4294967295,te=X+(q<<17&4294967295|q>>>15),q=G+(B^te&(X^B))+J[11]+2304563134&4294967295,G=te+(q<<22&4294967295|q>>>10),q=B+(X^G&(te^X))+J[12]+1804603682&4294967295,B=G+(q<<7&4294967295|q>>>25),q=X+(te^B&(G^te))+J[13]+4254626195&4294967295,X=B+(q<<12&4294967295|q>>>20),q=te+(G^X&(B^G))+J[14]+2792965006&4294967295,te=X+(q<<17&4294967295|q>>>15),q=G+(B^te&(X^B))+J[15]+1236535329&4294967295,G=te+(q<<22&4294967295|q>>>10),q=B+(te^X&(G^te))+J[1]+4129170786&4294967295,B=G+(q<<5&4294967295|q>>>27),q=X+(G^te&(B^G))+J[6]+3225465664&4294967295,X=B+(q<<9&4294967295|q>>>23),q=te+(B^G&(X^B))+J[11]+643717713&4294967295,te=X+(q<<14&4294967295|q>>>18),q=G+(X^B&(te^X))+J[0]+3921069994&4294967295,G=te+(q<<20&4294967295|q>>>12),q=B+(te^X&(G^te))+J[5]+3593408605&4294967295,B=G+(q<<5&4294967295|q>>>27),q=X+(G^te&(B^G))+J[10]+38016083&4294967295,X=B+(q<<9&4294967295|q>>>23),q=te+(B^G&(X^B))+J[15]+3634488961&4294967295,te=X+(q<<14&4294967295|q>>>18),q=G+(X^B&(te^X))+J[4]+3889429448&4294967295,G=te+(q<<20&4294967295|q>>>12),q=B+(te^X&(G^te))+J[9]+568446438&4294967295,B=G+(q<<5&4294967295|q>>>27),q=X+(G^te&(B^G))+J[14]+3275163606&4294967295,X=B+(q<<9&4294967295|q>>>23),q=te+(B^G&(X^B))+J[3]+4107603335&4294967295,te=X+(q<<14&4294967295|q>>>18),q=G+(X^B&(te^X))+J[8]+1163531501&4294967295,G=te+(q<<20&4294967295|q>>>12),q=B+(te^X&(G^te))+J[13]+2850285829&4294967295,B=G+(q<<5&4294967295|q>>>27),q=X+(G^te&(B^G))+J[2]+4243563512&4294967295,X=B+(q<<9&4294967295|q>>>23),q=te+(B^G&(X^B))+J[7]+1735328473&4294967295,te=X+(q<<14&4294967295|q>>>18),q=G+(X^B&(te^X))+J[12]+2368359562&4294967295,G=te+(q<<20&4294967295|q>>>12),q=B+(G^te^X)+J[5]+4294588738&4294967295,B=G+(q<<4&4294967295|q>>>28),q=X+(B^G^te)+J[8]+2272392833&4294967295,X=B+(q<<11&4294967295|q>>>21),q=te+(X^B^G)+J[11]+1839030562&4294967295,te=X+(q<<16&4294967295|q>>>16),q=G+(te^X^B)+J[14]+4259657740&4294967295,G=te+(q<<23&4294967295|q>>>9),q=B+(G^te^X)+J[1]+2763975236&4294967295,B=G+(q<<4&4294967295|q>>>28),q=X+(B^G^te)+J[4]+1272893353&4294967295,X=B+(q<<11&4294967295|q>>>21),q=te+(X^B^G)+J[7]+4139469664&4294967295,te=X+(q<<16&4294967295|q>>>16),q=G+(te^X^B)+J[10]+3200236656&4294967295,G=te+(q<<23&4294967295|q>>>9),q=B+(G^te^X)+J[13]+681279174&4294967295,B=G+(q<<4&4294967295|q>>>28),q=X+(B^G^te)+J[0]+3936430074&4294967295,X=B+(q<<11&4294967295|q>>>21),q=te+(X^B^G)+J[3]+3572445317&4294967295,te=X+(q<<16&4294967295|q>>>16),q=G+(te^X^B)+J[6]+76029189&4294967295,G=te+(q<<23&4294967295|q>>>9),q=B+(G^te^X)+J[9]+3654602809&4294967295,B=G+(q<<4&4294967295|q>>>28),q=X+(B^G^te)+J[12]+3873151461&4294967295,X=B+(q<<11&4294967295|q>>>21),q=te+(X^B^G)+J[15]+530742520&4294967295,te=X+(q<<16&4294967295|q>>>16),q=G+(te^X^B)+J[2]+3299628645&4294967295,G=te+(q<<23&4294967295|q>>>9),q=B+(te^(G|~X))+J[0]+4096336452&4294967295,B=G+(q<<6&4294967295|q>>>26),q=X+(G^(B|~te))+J[7]+1126891415&4294967295,X=B+(q<<10&4294967295|q>>>22),q=te+(B^(X|~G))+J[14]+2878612391&4294967295,te=X+(q<<15&4294967295|q>>>17),q=G+(X^(te|~B))+J[5]+4237533241&4294967295,G=te+(q<<21&4294967295|q>>>11),q=B+(te^(G|~X))+J[12]+1700485571&4294967295,B=G+(q<<6&4294967295|q>>>26),q=X+(G^(B|~te))+J[3]+2399980690&4294967295,X=B+(q<<10&4294967295|q>>>22),q=te+(B^(X|~G))+J[10]+4293915773&4294967295,te=X+(q<<15&4294967295|q>>>17),q=G+(X^(te|~B))+J[1]+2240044497&4294967295,G=te+(q<<21&4294967295|q>>>11),q=B+(te^(G|~X))+J[8]+1873313359&4294967295,B=G+(q<<6&4294967295|q>>>26),q=X+(G^(B|~te))+J[15]+4264355552&4294967295,X=B+(q<<10&4294967295|q>>>22),q=te+(B^(X|~G))+J[6]+2734768916&4294967295,te=X+(q<<15&4294967295|q>>>17),q=G+(X^(te|~B))+J[13]+1309151649&4294967295,G=te+(q<<21&4294967295|q>>>11),q=B+(te^(G|~X))+J[4]+4149444226&4294967295,B=G+(q<<6&4294967295|q>>>26),q=X+(G^(B|~te))+J[11]+3174756917&4294967295,X=B+(q<<10&4294967295|q>>>22),q=te+(B^(X|~G))+J[2]+718787259&4294967295,te=X+(q<<15&4294967295|q>>>17),q=G+(X^(te|~B))+J[9]+3951481745&4294967295,F.g[0]=F.g[0]+B&4294967295,F.g[1]=F.g[1]+(te+(q<<21&4294967295|q>>>11))&4294967295,F.g[2]=F.g[2]+te&4294967295,F.g[3]=F.g[3]+X&4294967295}r.prototype.u=function(F,B){B===void 0&&(B=F.length);for(var G=B-this.blockSize,J=this.B,te=this.h,X=0;X<B;){if(te==0)for(;X<=G;)i(this,F,X),X+=this.blockSize;if(typeof F=="string"){for(;X<B;)if(J[te++]=F.charCodeAt(X++),te==this.blockSize){i(this,J),te=0;break}}else for(;X<B;)if(J[te++]=F[X++],te==this.blockSize){i(this,J),te=0;break}}this.h=te,this.o+=B},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var B=1;B<F.length-8;++B)F[B]=0;var G=8*this.o;for(B=F.length-8;B<F.length;++B)F[B]=G&255,G/=256;for(this.u(F),F=Array(16),B=G=0;4>B;++B)for(var J=0;32>J;J+=8)F[G++]=this.g[B]>>>J&255;return F};function o(F,B){var G=h;return Object.prototype.hasOwnProperty.call(G,F)?G[F]:G[F]=B(F)}function c(F,B){this.h=B;for(var G=[],J=!0,te=F.length-1;0<=te;te--){var X=F[te]|0;J&&X==B||(G[te]=X,J=!1)}this.g=G}var h={};function p(F){return-128<=F&&128>F?o(F,function(B){return new c([B|0],0>B?-1:0)}):new c([F|0],0>F?-1:0)}function g(F){if(isNaN(F)||!isFinite(F))return E;if(0>F)return L(g(-F));for(var B=[],G=1,J=0;F>=G;J++)B[J]=F/G|0,G*=4294967296;return new c(B,0)}function w(F,B){if(F.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(F.charAt(0)=="-")return L(w(F.substring(1),B));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var G=g(Math.pow(B,8)),J=E,te=0;te<F.length;te+=8){var X=Math.min(8,F.length-te),q=parseInt(F.substring(te,te+X),B);8>X?(X=g(Math.pow(B,X)),J=J.j(X).add(g(q))):(J=J.j(G),J=J.add(g(q)))}return J}var E=p(0),T=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(D(this))return-L(this).m();for(var F=0,B=1,G=0;G<this.g.length;G++){var J=this.i(G);F+=(0<=J?J:4294967296+J)*B,B*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(M(this))return"0";if(D(this))return"-"+L(this).toString(F);for(var B=g(Math.pow(F,6)),G=this,J="";;){var te=Q(G,B).g;G=H(G,te.j(B));var X=((0<G.g.length?G.g[0]:G.h)>>>0).toString(F);if(G=te,M(G))return X+J;for(;6>X.length;)X="0"+X;J=X+J}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function M(F){if(F.h!=0)return!1;for(var B=0;B<F.g.length;B++)if(F.g[B]!=0)return!1;return!0}function D(F){return F.h==-1}n.l=function(F){return F=H(this,F),D(F)?-1:M(F)?0:1};function L(F){for(var B=F.g.length,G=[],J=0;J<B;J++)G[J]=~F.g[J];return new c(G,~F.h).add(T)}n.abs=function(){return D(this)?L(this):this},n.add=function(F){for(var B=Math.max(this.g.length,F.g.length),G=[],J=0,te=0;te<=B;te++){var X=J+(this.i(te)&65535)+(F.i(te)&65535),q=(X>>>16)+(this.i(te)>>>16)+(F.i(te)>>>16);J=q>>>16,X&=65535,q&=65535,G[te]=q<<16|X}return new c(G,G[G.length-1]&-2147483648?-1:0)};function H(F,B){return F.add(L(B))}n.j=function(F){if(M(this)||M(F))return E;if(D(this))return D(F)?L(this).j(L(F)):L(L(this).j(F));if(D(F))return L(this.j(L(F)));if(0>this.l(R)&&0>F.l(R))return g(this.m()*F.m());for(var B=this.g.length+F.g.length,G=[],J=0;J<2*B;J++)G[J]=0;for(J=0;J<this.g.length;J++)for(var te=0;te<F.g.length;te++){var X=this.i(J)>>>16,q=this.i(J)&65535,pe=F.i(te)>>>16,re=F.i(te)&65535;G[2*J+2*te]+=q*re,z(G,2*J+2*te),G[2*J+2*te+1]+=X*re,z(G,2*J+2*te+1),G[2*J+2*te+1]+=q*pe,z(G,2*J+2*te+1),G[2*J+2*te+2]+=X*pe,z(G,2*J+2*te+2)}for(J=0;J<B;J++)G[J]=G[2*J+1]<<16|G[2*J];for(J=B;J<2*B;J++)G[J]=0;return new c(G,0)};function z(F,B){for(;(F[B]&65535)!=F[B];)F[B+1]+=F[B]>>>16,F[B]&=65535,B++}function W(F,B){this.g=F,this.h=B}function Q(F,B){if(M(B))throw Error("division by zero");if(M(F))return new W(E,E);if(D(F))return B=Q(L(F),B),new W(L(B.g),L(B.h));if(D(B))return B=Q(F,L(B)),new W(L(B.g),B.h);if(30<F.g.length){if(D(F)||D(B))throw Error("slowDivide_ only works with positive integers.");for(var G=T,J=B;0>=J.l(F);)G=ie(G),J=ie(J);var te=le(G,1),X=le(J,1);for(J=le(J,2),G=le(G,2);!M(J);){var q=X.add(J);0>=q.l(F)&&(te=te.add(G),X=q),J=le(J,1),G=le(G,1)}return B=H(F,te.j(B)),new W(te,B)}for(te=E;0<=F.l(B);){for(G=Math.max(1,Math.floor(F.m()/B.m())),J=Math.ceil(Math.log(G)/Math.LN2),J=48>=J?1:Math.pow(2,J-48),X=g(G),q=X.j(B);D(q)||0<q.l(F);)G-=J,X=g(G),q=X.j(B);M(X)&&(X=T),te=te.add(X),F=H(F,q)}return new W(te,F)}n.A=function(F){return Q(this,F).h},n.and=function(F){for(var B=Math.max(this.g.length,F.g.length),G=[],J=0;J<B;J++)G[J]=this.i(J)&F.i(J);return new c(G,this.h&F.h)},n.or=function(F){for(var B=Math.max(this.g.length,F.g.length),G=[],J=0;J<B;J++)G[J]=this.i(J)|F.i(J);return new c(G,this.h|F.h)},n.xor=function(F){for(var B=Math.max(this.g.length,F.g.length),G=[],J=0;J<B;J++)G[J]=this.i(J)^F.i(J);return new c(G,this.h^F.h)};function ie(F){for(var B=F.g.length+1,G=[],J=0;J<B;J++)G[J]=F.i(J)<<1|F.i(J-1)>>>31;return new c(G,F.h)}function le(F,B){var G=B>>5;B%=32;for(var J=F.g.length-G,te=[],X=0;X<J;X++)te[X]=0<B?F.i(X+G)>>>B|F.i(X+G+1)<<32-B:F.i(X+G);return new c(te,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qS=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=w,Rl=c}).apply(typeof Fb<"u"?Fb:typeof self<"u"?self:typeof window<"u"?window:{});var em=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KS,kh,XS,Rm,mx,YS,QS,ZS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,N,V){return _==Array.prototype||_==Object.prototype||(_[N]=V.value),_};function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof em=="object"&&em];for(var N=0;N<_.length;++N){var V=_[N];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=t(this);function i(_,N){if(N)e:{var V=r;_=_.split(".");for(var Y=0;Y<_.length-1;Y++){var ge=_[Y];if(!(ge in V))break e;V=V[ge]}_=_[_.length-1],Y=V[_],N=N(Y),N!=Y&&N!=null&&e(V,_,{configurable:!0,writable:!0,value:N})}}function o(_,N){_ instanceof String&&(_+="");var V=0,Y=!1,ge={next:function(){if(!Y&&V<_.length){var Ae=V++;return{value:N(Ae,_[Ae]),done:!1}}return Y=!0,{done:!0,value:void 0}}};return ge[Symbol.iterator]=function(){return ge},ge}i("Array.prototype.values",function(_){return _||function(){return o(this,function(N,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(_){var N=typeof _;return N=N!="object"?N:_?Array.isArray(_)?"array":N:"null",N=="array"||N=="object"&&typeof _.length=="number"}function g(_){var N=typeof _;return N=="object"&&_!=null||N=="function"}function w(_,N,V){return _.call.apply(_.bind,arguments)}function E(_,N,V){if(!_)throw Error();if(2<arguments.length){var Y=Array.prototype.slice.call(arguments,2);return function(){var ge=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ge,Y),_.apply(N,ge)}}return function(){return _.apply(N,arguments)}}function T(_,N,V){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:E,T.apply(null,arguments)}function R(_,N){var V=Array.prototype.slice.call(arguments,1);return function(){var Y=V.slice();return Y.push.apply(Y,arguments),_.apply(this,Y)}}function M(_,N){function V(){}V.prototype=N.prototype,_.aa=N.prototype,_.prototype=new V,_.prototype.constructor=_,_.Qb=function(Y,ge,Ae){for(var He=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)He[dn-2]=arguments[dn];return N.prototype[ge].apply(Y,He)}}function D(_){const N=_.length;if(0<N){const V=Array(N);for(let Y=0;Y<N;Y++)V[Y]=_[Y];return V}return[]}function L(_,N){for(let V=1;V<arguments.length;V++){const Y=arguments[V];if(p(Y)){const ge=_.length||0,Ae=Y.length||0;_.length=ge+Ae;for(let He=0;He<Ae;He++)_[ge+He]=Y[He]}else _.push(Y)}}class H{constructor(N,V){this.i=N,this.j=V,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function z(_){return/^[\s\xa0]*$/.test(_)}function W(){var _=h.navigator;return _&&(_=_.userAgent)?_:""}function Q(_){return Q[" "](_),_}Q[" "]=function(){};var ie=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function le(_,N,V){for(const Y in _)N.call(V,_[Y],Y,_)}function F(_,N){for(const V in _)N.call(void 0,_[V],V,_)}function B(_){const N={};for(const V in _)N[V]=_[V];return N}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(_,N){let V,Y;for(let ge=1;ge<arguments.length;ge++){Y=arguments[ge];for(V in Y)_[V]=Y[V];for(let Ae=0;Ae<G.length;Ae++)V=G[Ae],Object.prototype.hasOwnProperty.call(Y,V)&&(_[V]=Y[V])}}function te(_){var N=1;_=_.split(":");const V=[];for(;0<N&&_.length;)V.push(_.shift()),N--;return _.length&&V.push(_.join(":")),V}function X(_){h.setTimeout(()=>{throw _},0)}function q(){var _=Te;let N=null;return _.g&&(N=_.g,_.g=_.g.next,_.g||(_.h=null),N.next=null),N}class pe{constructor(){this.h=this.g=null}add(N,V){const Y=re.get();Y.set(N,V),this.h?this.h.next=Y:this.g=Y,this.h=Y}}var re=new H(()=>new Ie,_=>_.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(N,V){this.h=N,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let we,se=!1,Te=new pe,Ne=()=>{const _=h.Promise.resolve(void 0);we=()=>{_.then(oe)}};var oe=()=>{for(var _;_=q();){try{_.h.call(_.g)}catch(V){X(V)}var N=re;N.j(_),100>N.h&&(N.h++,_.next=N.g,N.g=_)}se=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(_,N){this.type=_,this.g=this.target=N,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var _=!1,N=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const V=()=>{};h.addEventListener("test",V,N),h.removeEventListener("test",V,N)}catch{}return _}();function it(_,N){if(Se.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var V=this.type=_.type,Y=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=N,N=_.relatedTarget){if(ie){e:{try{Q(N.nodeName);var ge=!0;break e}catch{}ge=!1}ge||(N=null)}}else V=="mouseover"?N=_.fromElement:V=="mouseout"&&(N=_.toElement);this.relatedTarget=N,Y?(this.clientX=Y.clientX!==void 0?Y.clientX:Y.pageX,this.clientY=Y.clientY!==void 0?Y.clientY:Y.pageY,this.screenX=Y.screenX||0,this.screenY=Y.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:Re[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&it.aa.h.call(this)}}M(it,Se);var Re={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function at(_,N,V,Y,ge){this.listener=_,this.proxy=null,this.src=N,this.type=V,this.capture=!!Y,this.ha=ge,this.key=++Ge,this.da=this.fa=!1}function st(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ct(_){this.src=_,this.g={},this.h=0}ct.prototype.add=function(_,N,V,Y,ge){var Ae=_.toString();_=this.g[Ae],_||(_=this.g[Ae]=[],this.h++);var He=ht(_,N,Y,ge);return-1<He?(N=_[He],V||(N.fa=!1)):(N=new at(N,this.src,Ae,!!Y,ge),N.fa=V,_.push(N)),N};function Et(_,N){var V=N.type;if(V in _.g){var Y=_.g[V],ge=Array.prototype.indexOf.call(Y,N,void 0),Ae;(Ae=0<=ge)&&Array.prototype.splice.call(Y,ge,1),Ae&&(st(N),_.g[V].length==0&&(delete _.g[V],_.h--))}}function ht(_,N,V,Y){for(var ge=0;ge<_.length;++ge){var Ae=_[ge];if(!Ae.da&&Ae.listener==N&&Ae.capture==!!V&&Ae.ha==Y)return ge}return-1}var gn="closure_lm_"+(1e6*Math.random()|0),Mn={};function Pr(_,N,V,Y,ge){if(Array.isArray(N)){for(var Ae=0;Ae<N.length;Ae++)Pr(_,N[Ae],V,Y,ge);return null}return V=Qs(V),_&&_[Pe]?_.K(N,V,g(Y)?!!Y.capture:!1,ge):Qt(_,N,V,!1,Y,ge)}function Qt(_,N,V,Y,ge,Ae){if(!N)throw Error("Invalid event type");var He=g(ge)?!!ge.capture:!!ge,dn=wi(_);if(dn||(_[gn]=dn=new ct(_)),V=dn.add(N,V,Y,He,Ae),V.proxy)return V;if(Y=zt(),V.proxy=Y,Y.src=_,Y.listener=V,_.addEventListener)Le||(ge=He),ge===void 0&&(ge=!1),_.addEventListener(N.toString(),Y,ge);else if(_.attachEvent)_.attachEvent(Xe(N.toString()),Y);else if(_.addListener&&_.removeListener)_.addListener(Y);else throw Error("addEventListener and attachEvent are unavailable.");return V}function zt(){function _(V){return N.call(_.src,_.listener,V)}const N=Kn;return _}function mt(_,N,V,Y,ge){if(Array.isArray(N))for(var Ae=0;Ae<N.length;Ae++)mt(_,N[Ae],V,Y,ge);else Y=g(Y)?!!Y.capture:!!Y,V=Qs(V),_&&_[Pe]?(_=_.i,N=String(N).toString(),N in _.g&&(Ae=_.g[N],V=ht(Ae,V,Y,ge),-1<V&&(st(Ae[V]),Array.prototype.splice.call(Ae,V,1),Ae.length==0&&(delete _.g[N],_.h--)))):_&&(_=wi(_))&&(N=_.g[N.toString()],_=-1,N&&(_=ht(N,V,Y,ge)),(V=-1<_?N[_]:null)&&xi(V))}function xi(_){if(typeof _!="number"&&_&&!_.da){var N=_.src;if(N&&N[Pe])Et(N.i,_);else{var V=_.type,Y=_.proxy;N.removeEventListener?N.removeEventListener(V,Y,_.capture):N.detachEvent?N.detachEvent(Xe(V),Y):N.addListener&&N.removeListener&&N.removeListener(Y),(V=wi(N))?(Et(V,_),V.h==0&&(V.src=null,N[gn]=null)):st(_)}}}function Xe(_){return _ in Mn?Mn[_]:Mn[_]="on"+_}function Kn(_,N){if(_.da)_=!0;else{N=new it(N,this);var V=_.listener,Y=_.ha||_.src;_.fa&&xi(_),_=V.call(Y,N)}return _}function wi(_){return _=_[gn],_ instanceof ct?_:null}var Zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qs(_){return typeof _=="function"?_:(_[Zr]||(_[Zr]=function(N){return _.handleEvent(N)}),_[Zr])}function Wt(){he.call(this),this.i=new ct(this),this.M=this,this.F=null}M(Wt,he),Wt.prototype[Pe]=!0,Wt.prototype.removeEventListener=function(_,N,V,Y){mt(this,_,N,V,Y)};function Xn(_,N){var V,Y=_.F;if(Y)for(V=[];Y;Y=Y.F)V.push(Y);if(_=_.M,Y=N.type||N,typeof N=="string")N=new Se(N,_);else if(N instanceof Se)N.target=N.target||_;else{var ge=N;N=new Se(Y,_),J(N,ge)}if(ge=!0,V)for(var Ae=V.length-1;0<=Ae;Ae--){var He=N.g=V[Ae];ge=_r(He,Y,!0,N)&&ge}if(He=N.g=_,ge=_r(He,Y,!0,N)&&ge,ge=_r(He,Y,!1,N)&&ge,V)for(Ae=0;Ae<V.length;Ae++)He=N.g=V[Ae],ge=_r(He,Y,!1,N)&&ge}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var _=this.i,N;for(N in _.g){for(var V=_.g[N],Y=0;Y<V.length;Y++)st(V[Y]);delete _.g[N],_.h--}}this.F=null},Wt.prototype.K=function(_,N,V,Y){return this.i.add(String(_),N,!1,V,Y)},Wt.prototype.L=function(_,N,V,Y){return this.i.add(String(_),N,!0,V,Y)};function _r(_,N,V,Y){if(N=_.i.g[String(N)],!N)return!0;N=N.concat();for(var ge=!0,Ae=0;Ae<N.length;++Ae){var He=N[Ae];if(He&&!He.da&&He.capture==V){var dn=He.listener,Bn=He.ha||He.src;He.fa&&Et(_.i,He),ge=dn.call(Bn,Y)!==!1&&ge}}return ge&&!Y.defaultPrevented}function Ln(_,N,V){if(typeof _=="function")V&&(_=T(_,V));else if(_&&typeof _.handleEvent=="function")_=T(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:h.setTimeout(_,N||0)}function Jr(_){_.g=Ln(()=>{_.g=null,_.i&&(_.i=!1,Jr(_))},_.l);const N=_.h;_.h=null,_.m.apply(null,N)}class Bi extends he{constructor(N,V){super(),this.m=N,this.l=V,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Jr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(_){he.call(this),this.h=_,this.g={}}M(vi,he);var An=[];function We(_){le(_.g,function(N,V){this.g.hasOwnProperty(V)&&xi(N)},_),_.g={}}vi.prototype.N=function(){vi.aa.N.call(this),We(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=h.JSON.stringify,Ht=h.JSON.parse,mn=class{stringify(_){return h.JSON.stringify(_,void 0)}parse(_){return h.JSON.parse(_,void 0)}};function ai(){}ai.prototype.h=null;function zr(_){return _.h||(_.h=_.i())}function Zs(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Er(){Se.call(this,"d")}M(Er,Se);function Ps(){Se.call(this,"c")}M(Ps,Se);var pt={},Gt=null;function Tn(){return Gt=Gt||new Wt}pt.La="serverreachability";function $t(_){Se.call(this,pt.La,_)}M($t,Se);function br(_){const N=Tn();Xn(N,new $t(N))}pt.STAT_EVENT="statevent";function Cn(_,N){Se.call(this,pt.STAT_EVENT,_),this.stat=N}M(Cn,Se);function Rt(_){const N=Tn();Xn(N,new Cn(N,_))}pt.Ma="timingevent";function fs(_,N){Se.call(this,pt.Ma,_),this.size=N}M(fs,Se);function cn(_,N){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){_()},N)}function rr(){this.g=!0}rr.prototype.xa=function(){this.g=!1};function Vn(_,N,V,Y,ge,Ae){_.info(function(){if(_.g)if(Ae)for(var He="",dn=Ae.split("&"),Bn=0;Bn<dn.length;Bn++){var qt=dn[Bn].split("=");if(1<qt.length){var Pn=qt[0];qt=qt[1];var jn=Pn.split("_");He=2<=jn.length&&jn[1]=="type"?He+(Pn+"="+qt+"&"):He+(Pn+"=redacted&")}}else He=null;else He=Ae;return"XMLHTTP REQ ("+Y+") [attempt "+ge+"]: "+N+`
`+V+`
`+He})}function ur(_,N,V,Y,ge,Ae,He){_.info(function(){return"XMLHTTP RESP ("+Y+") [ attempt "+ge+"]: "+N+`
`+V+`
`+Ae+" "+He})}function Fn(_,N,V,Y){_.info(function(){return"XMLHTTP TEXT ("+N+"): "+wo(_,V)+(Y?" "+Y:"")})}function Ye(_,N){_.info(function(){return"TIMEOUT: "+N})}rr.prototype.info=function(){};function wo(_,N){if(!_.g)return N;if(!N)return null;try{var V=JSON.parse(N);if(V){for(_=0;_<V.length;_++)if(Array.isArray(V[_])){var Y=V[_];if(!(2>Y.length)){var ge=Y[1];if(Array.isArray(ge)&&!(1>ge.length)){var Ae=ge[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(var He=1;He<ge.length;He++)ge[He]=""}}}}return In(V)}catch{return N}}var vo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ei;function Ds(){}M(Ds,ai),Ds.prototype.g=function(){return new XMLHttpRequest},Ds.prototype.i=function(){return{}},ei=new Ds;function _i(_,N,V,Y){this.j=_,this.i=N,this.l=V,this.R=Y||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ji}function ji(){this.i=null,this.g="",this.h=!1}var Yl={},Ua={};function li(_,N,V){_.L=1,_.v=Rn(Lt(N)),_.m=V,_.P=!0,Ar(_,null)}function Ar(_,N){_.F=Date.now(),Zt(_),_.A=Lt(_.v);var V=_.A,Y=_.R;Array.isArray(Y)||(Y=[String(Y)]),Nn(V.i,"t",Y),_.C=0,V=_.j.J,_.h=new ji,_.g=du(_.j,V?N:null,!_.m),0<_.O&&(_.M=new Bi(T(_.Y,_,_.g),_.O)),N=_.U,V=_.g,Y=_.ca;var ge="readystatechange";Array.isArray(ge)||(ge&&(An[0]=ge.toString()),ge=An);for(var Ae=0;Ae<ge.length;Ae++){var He=Pr(V,ge[Ae],Y||N.handleEvent,!1,N.h||N);if(!He)break;N.g[He.key]=He}N=_.H?B(_.H):{},_.m?(_.u||(_.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,N)):(_.u="GET",_.g.ea(_.A,_.u,null,N)),br(),Vn(_.i,_.u,_.A,_.l,_.R,_.m)}_i.prototype.ca=function(_){_=_.target;const N=this.M;N&&Ii(_)==3?N.j():this.Y(_)},_i.prototype.Y=function(_){try{if(_==this.g)e:{const jn=Ii(this.g);var N=this.g.Ba();const Un=this.g.Z();if(!(3>jn)&&(jn!=3||this.g&&(this.h.h||this.g.oa()||Jl(this.g)))){this.J||jn!=4||N==7||(N==8||0>=Un?br(3):br(2)),ke(this);var V=this.g.Z();this.X=V;t:if(yn(this)){var Y=Jl(this.g);_="";var ge=Y.length,Ae=Ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),_o(this);var He="";break t}this.h.i=new h.TextDecoder}for(N=0;N<ge;N++)this.h.h=!0,_+=this.h.i.decode(Y[N],{stream:!(Ae&&N==ge-1)});Y.length=0,this.h.g+=_,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=V==200,ur(this.i,this.u,this.A,this.l,this.R,jn,V),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,Bn=this.g;if((dn=Bn.g?Bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(dn)){var qt=dn;break t}}qt=null}if(V=qt)Fn(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Os(this,V);else{this.o=!1,this.s=3,Rt(12),Jt(this),_o(this);break e}}if(this.P){V=!0;let Ti;for(;!this.J&&this.C<He.length;)if(Ti=au(this,He),Ti==Ua){jn==4&&(this.s=4,Rt(14),V=!1),Fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ti==Yl){this.s=4,Rt(15),Fn(this.i,this.l,He,"[Invalid Chunk]"),V=!1;break}else Fn(this.i,this.l,Ti,null),Os(this,Ti);if(yn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jn!=4||He.length!=0||this.h.h||(this.s=1,Rt(16),V=!1),this.o=this.o&&V,!V)Fn(this.i,this.l,He,"[Invalid Chunked Response]"),Jt(this),_o(this);else if(0<He.length&&!this.W){this.W=!0;var Pn=this.j;Pn.g==this&&Pn.ba&&!Pn.M&&(Pn.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),la(Pn),Pn.M=!0,Rt(11))}}else Fn(this.i,this.l,He,null),Os(this,He);jn==4&&Jt(this),this.o&&!this.J&&(jn==4?xn(this.j,this):(this.o=!1,Zt(this)))}else en(this.g),V==400&&0<He.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Jt(this),_o(this)}}}catch{}finally{}};function yn(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function au(_,N){var V=_.C,Y=N.indexOf(`
`,V);return Y==-1?Ua:(V=Number(N.substring(V,Y)),isNaN(V)?Yl:(Y+=1,Y+V>N.length?Ua:(N=N.slice(Y,Y+V),_.C=Y+V,N)))}_i.prototype.cancel=function(){this.J=!0,Jt(this)};function Zt(_){_.S=Date.now()+_.I,za(_,_.I)}function za(_,N){if(_.B!=null)throw Error("WatchDog timer not null");_.B=cn(T(_.ba,_),N)}function ke(_){_.B&&(h.clearTimeout(_.B),_.B=null)}_i.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Ye(this.i,this.A),this.L!=2&&(br(),Rt(17)),Jt(this),this.s=2,_o(this)):za(this,this.S-_)};function _o(_){_.j.G==0||_.J||xn(_.j,_)}function Jt(_){ke(_);var N=_.M;N&&typeof N.ma=="function"&&N.ma(),_.M=null,We(_.U),_.g&&(N=_.g,_.g=null,N.abort(),N.ma())}function Os(_,N){try{var V=_.j;if(V.G!=0&&(V.g==_||Hr(V.h,_))){if(!_.K&&Hr(V.h,_)&&V.G==3){try{var Y=V.Da.g.parse(N)}catch{Y=null}if(Array.isArray(Y)&&Y.length==3){var ge=Y;if(ge[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<_.F)To(V),xs(V);else break e;Ka(V),Rt(18)}}else V.za=ge[1],0<V.za-V.T&&37500>ge[2]&&V.F&&V.v==0&&!V.C&&(V.C=cn(T(V.Za,V),6e3));if(1>=Mt(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else ui(V,11)}else if((_.K||V.g==_)&&To(V),!z(N))for(ge=V.Da.g.parse(N),N=0;N<ge.length;N++){let qt=ge[N];if(V.T=qt[0],qt=qt[1],V.G==2)if(qt[0]=="c"){V.K=qt[1],V.ia=qt[2];const Pn=qt[3];Pn!=null&&(V.la=Pn,V.j.info("VER="+V.la));const jn=qt[4];jn!=null&&(V.Aa=jn,V.j.info("SVER="+V.Aa));const Un=qt[5];Un!=null&&typeof Un=="number"&&0<Un&&(Y=1.5*Un,V.L=Y,V.j.info("backChannelRequestTimeoutMs_="+Y)),Y=V;const Ti=_.g;if(Ti){const ni=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var Ae=Y.h;Ae.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(ia(Ae,Ae.h),Ae.h=null))}if(Y.D){const Xa=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Xa&&(Y.ya=Xa,$e(Y.I,Y.D,Xa))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-_.F,V.j.info("Handshake RTT: "+V.R+"ms")),Y=V;var He=_;if(Y.qa=ft(Y,Y.J?Y.ia:null,Y.W),He.K){Wa(Y.h,He);var dn=He,Bn=Y.L;Bn&&(dn.I=Bn),dn.B&&(ke(dn),Zt(dn)),Y.g=He}else aa(Y);0<V.i.length&&_t(V)}else qt[0]!="stop"&&qt[0]!="close"||ui(V,7);else V.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?ui(V,7):Dn(V):qt[0]!="noop"&&V.l&&V.l.ta(qt),V.v=0)}}br(4)}catch{}}var lu=class{constructor(_,N){this.g=_,this.map=N}};function jt(_){this.l=_||10,h.PerformanceNavigationTiming?(_=h.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Mt(_){return _.h?1:_.g?_.g.size:0}function Hr(_,N){return _.h?_.h==N:_.g?_.g.has(N):!1}function ia(_,N){_.g?_.g.add(N):_.h=N}function Wa(_,N){_.h&&_.h==N?_.h=null:_.g&&_.g.has(N)&&_.g.delete(N)}jt.prototype.cancel=function(){if(this.i=Yn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Yn(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let N=_.i;for(const V of _.g.values())N=N.concat(V.D);return N}return D(_.i)}function Ui(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(p(_)){for(var N=[],V=_.length,Y=0;Y<V;Y++)N.push(_[Y]);return N}N=[],V=0;for(Y in _)N[V++]=_[Y];return N}function Ha(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(p(_)||typeof _=="string"){var N=[];_=_.length;for(var V=0;V<_;V++)N.push(V);return N}N=[],V=0;for(const Y in _)N[V++]=Y;return N}}}function pn(_,N){if(_.forEach&&typeof _.forEach=="function")_.forEach(N,void 0);else if(p(_)||typeof _=="string")Array.prototype.forEach.call(_,N,void 0);else for(var V=Ha(_),Y=Ui(_),ge=Y.length,Ae=0;Ae<ge;Ae++)N.call(void 0,Y[Ae],V&&V[Ae],_)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yd(_,N){if(_){_=_.split("&");for(var V=0;V<_.length;V++){var Y=_[V].indexOf("="),ge=null;if(0<=Y){var Ae=_[V].substring(0,Y);ge=_[V].substring(Y+1)}else Ae=_[V];N(Ae,ge?decodeURIComponent(ge.replace(/\+/g," ")):"")}}}function bi(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof bi){this.h=_.h,Qn(this,_.j),this.o=_.o,this.g=_.g,me(this,_.s),this.l=_.l;var N=_.i,V=new Zi;V.i=N.i,N.g&&(V.g=new Map(N.g),V.h=N.h),Z(this,V),this.m=_.m}else _&&(N=String(_).match(Ei))?(this.h=!1,Qn(this,N[1]||"",!0),this.o=bt(N[2]||""),this.g=bt(N[3]||"",!0),me(this,N[4]),this.l=bt(N[5]||"",!0),Z(this,N[6]||"",!0),this.m=bt(N[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}bi.prototype.toString=function(){var _=[],N=this.j;N&&_.push(Eo(N,Gr,!0),":");var V=this.g;return(V||N=="file")&&(_.push("//"),(N=this.o)&&_.push(Eo(N,Gr,!0),"@"),_.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&_.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&_.push("/"),_.push(Eo(V,V.charAt(0)=="/"?Sn:ut,!0))),(V=this.i.toString())&&_.push("?",V),(V=this.m)&&_.push("#",Eo(V,Zl)),_.join("")};function Lt(_){return new bi(_)}function Qn(_,N,V){_.j=V?bt(N,!0):N,_.j&&(_.j=_.j.replace(/:$/,""))}function me(_,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);_.s=N}else _.s=null}function Z(_,N,V){N instanceof Zi?(_.i=N,$r(_.i,_.h)):(V||(N=Eo(N,Ql)),_.i=new Zi(N,_.h))}function $e(_,N,V){_.i.set(N,V)}function Rn(_){return $e(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function bt(_,N){return _?N?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Eo(_,N,V){return typeof _=="string"?(_=encodeURI(_).replace(N,Ga),V&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Ga(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Gr=/[#\/\?@]/g,ut=/[#\?:]/g,Sn=/[#\?]/g,Ql=/[#\?@]/g,Zl=/#/g;function Zi(_,N){this.h=this.g=null,this.i=_||null,this.j=!!N}function dr(_){_.g||(_.g=new Map,_.h=0,_.i&&Yd(_.i,function(N,V){_.add(decodeURIComponent(N.replace(/\+/g," ")),V)}))}n=Zi.prototype,n.add=function(_,N){dr(this),this.i=null,_=ti(this,_);var V=this.g.get(_);return V||this.g.set(_,V=[]),V.push(N),this.h+=1,this};function zi(_,N){dr(_),N=ti(_,N),_.g.has(N)&&(_.i=null,_.h-=_.g.get(N).length,_.g.delete(N))}function ms(_,N){return dr(_),N=ti(_,N),_.g.has(N)}n.forEach=function(_,N){dr(this),this.g.forEach(function(V,Y){V.forEach(function(ge){_.call(N,ge,Y,this)},this)},this)},n.na=function(){dr(this);const _=Array.from(this.g.values()),N=Array.from(this.g.keys()),V=[];for(let Y=0;Y<N.length;Y++){const ge=_[Y];for(let Ae=0;Ae<ge.length;Ae++)V.push(N[Y])}return V},n.V=function(_){dr(this);let N=[];if(typeof _=="string")ms(this,_)&&(N=N.concat(this.g.get(ti(this,_))));else{_=Array.from(this.g.values());for(let V=0;V<_.length;V++)N=N.concat(_[V])}return N},n.set=function(_,N){return dr(this),this.i=null,_=ti(this,_),ms(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[N]),this.h+=1,this},n.get=function(_,N){return _?(_=this.V(_),0<_.length?String(_[0]):N):N};function Nn(_,N,V){zi(_,N),0<V.length&&(_.i=null,_.g.set(ti(_,N),D(V)),_.h+=V.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],N=Array.from(this.g.keys());for(var V=0;V<N.length;V++){var Y=N[V];const Ae=encodeURIComponent(String(Y)),He=this.V(Y);for(Y=0;Y<He.length;Y++){var ge=Ae;He[Y]!==""&&(ge+="="+encodeURIComponent(String(He[Y]))),_.push(ge)}}return this.i=_.join("&")};function ti(_,N){return N=String(N),_.j&&(N=N.toLowerCase()),N}function $r(_,N){N&&!_.j&&(dr(_),_.i=null,_.g.forEach(function(V,Y){var ge=Y.toLowerCase();Y!=ge&&(zi(this,Y),Nn(this,ge,V))},_)),_.j=N}function xt(_,N){const V=new rr;if(h.Image){const Y=new Image;Y.onload=R(gt,V,"TestLoadImage: loaded",!0,N,Y),Y.onerror=R(gt,V,"TestLoadImage: error",!1,N,Y),Y.onabort=R(gt,V,"TestLoadImage: abort",!1,N,Y),Y.ontimeout=R(gt,V,"TestLoadImage: timeout",!1,N,Y),h.setTimeout(function(){Y.ontimeout&&Y.ontimeout()},1e4),Y.src=_}else N(!1)}function cu(_,N){const V=new rr,Y=new AbortController,ge=setTimeout(()=>{Y.abort(),gt(V,"TestPingServer: timeout",!1,N)},1e4);fetch(_,{signal:Y.signal}).then(Ae=>{clearTimeout(ge),Ae.ok?gt(V,"TestPingServer: ok",!0,N):gt(V,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ge),gt(V,"TestPingServer: error",!1,N)})}function gt(_,N,V,Y,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),Y(V)}catch{}}function Ir(){this.g=new mn}function uu(_,N,V){const Y=V||"";try{pn(_,function(ge,Ae){let He=ge;g(ge)&&(He=In(ge)),N.push(Y+Ae+"="+encodeURIComponent(He))})}catch(ge){throw N.push(Y+"type="+encodeURIComponent("_badmap")),ge}}function ps(_){this.l=_.Ub||null,this.j=_.eb||!1}M(ps,ai),ps.prototype.g=function(){return new bo(this.l,this.j)},ps.prototype.i=function(_){return function(){return _}}({});function bo(_,N){Wt.call(this),this.D=_,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(bo,Wt),n=bo.prototype,n.open=function(_,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=N,this.readyState=1,ci(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(N.body=_),(this.D||h).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ms(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ms(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var N=_.value?_.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!_.done}))&&(this.response=this.responseText+=N)}_.done?gs(this):ci(this),this.readyState==3&&Ms(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,gs(this))},n.Qa=function(_){this.g&&(this.response=_,gs(this))},n.ga=function(){this.g&&gs(this)};function gs(_){_.readyState=4,_.l=null,_.j=null,_.v=null,ci(_)}n.setRequestHeader=function(_,N){this.u.append(_,N)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],N=this.h.entries();for(var V=N.next();!V.done;)V=V.value,_.push(V[0]+": "+V[1]),V=N.next();return _.join(`\r
`)};function ci(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function Wi(_){let N="";return le(_,function(V,Y){N+=Y,N+=":",N+=V,N+=`\r
`}),N}function Ji(_,N,V){e:{for(Y in V){var Y=!1;break e}Y=!0}Y||(V=Wi(V),typeof _=="string"?V!=null&&encodeURIComponent(String(V)):$e(_,N,V))}function kn(_){Wt.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(kn,Wt);var sa=/^https?$/i,Js=["POST","PUT"];n=kn.prototype,n.Ha=function(_){this.J=_},n.ea=function(_,N,V,Y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);N=N?N.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ei.g(),this.v=this.o?zr(this.o):zr(ei),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(N,String(_),!0),this.B=!1}catch(Ae){hr(this,Ae);return}if(_=V||"",V=new Map(this.headers),Y)if(Object.getPrototypeOf(Y)===Object.prototype)for(var ge in Y)V.set(ge,Y[ge]);else if(typeof Y.keys=="function"&&typeof Y.get=="function")for(const Ae of Y.keys())V.set(Ae,Y.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(Y));Y=Array.from(V.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),ge=h.FormData&&_ instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Js,N,void 0))||Y||ge||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,He]of V)this.g.setRequestHeader(Ae,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qa(this),this.u=!0,this.g.send(_),this.u=!1}catch(Ae){hr(this,Ae)}};function hr(_,N){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=N,_.m=5,oa(_),Ai(_)}function oa(_){_.A||(_.A=!0,Xn(_,"complete"),Xn(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Xn(this,"complete"),Xn(this,"abort"),Ai(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$a(this):this.bb())},n.bb=function(){$a(this)};function $a(_){if(_.h&&typeof c<"u"&&(!_.v[1]||Ii(_)!=4||_.Z()!=2)){if(_.u&&Ii(_)==4)Ln(_.Ea,0,_);else if(Xn(_,"readystatechange"),Ii(_)==4){_.h=!1;try{const He=_.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var V;if(!(V=N)){var Y;if(Y=He===0){var ge=String(_.D).match(Ei)[1]||null;!ge&&h.self&&h.self.location&&(ge=h.self.location.protocol.slice(0,-1)),Y=!sa.test(ge?ge.toLowerCase():"")}V=Y}if(V)Xn(_,"complete"),Xn(_,"success");else{_.m=6;try{var Ae=2<Ii(_)?_.g.statusText:""}catch{Ae=""}_.l=Ae+" ["+_.Z()+"]",oa(_)}}finally{Ai(_)}}}}function Ai(_,N){if(_.g){qa(_);const V=_.g,Y=_.v[0]?()=>{}:null;_.g=null,_.v=null,N||Xn(_,"ready");try{V.onreadystatechange=Y}catch{}}}function qa(_){_.I&&(h.clearTimeout(_.I),_.I=null)}n.isActive=function(){return!!this.g};function Ii(_){return _.g?_.g.readyState:0}n.Z=function(){try{return 2<Ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var N=this.g.responseText;return _&&N.indexOf(_)==0&&(N=N.substring(_.length)),Ht(N)}};function Jl(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function en(_){const N={};_=(_.g&&2<=Ii(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let Y=0;Y<_.length;Y++){if(z(_[Y]))continue;var V=te(_[Y]);const ge=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ae=N[ge]||[];N[ge]=Ae,Ae.push(V)}F(N,function(Y){return Y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(_,N,V){return V&&V.internalChannelParams&&V.internalChannelParams[_]||N}function Ao(_){this.Aa=0,this.i=[],this.j=new rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ys("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ys("baseRetryDelayMs",5e3,_),this.cb=ys("retryDelaySeedMs",1e4,_),this.Wa=ys("forwardChannelMaxRetries",2,_),this.wa=ys("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new jt(_&&_.concurrentRequestLimit),this.Da=new Ir,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ao.prototype,n.la=8,n.G=1,n.connect=function(_,N,V,Y){Rt(0),this.W=_,this.H=N||{},V&&Y!==void 0&&(this.H.OSID=V,this.H.OAID=Y),this.F=this.X,this.I=ft(this,null,this.W),_t(this)};function Dn(_){if(_e(_),_.G==3){var N=_.U++,V=Lt(_.I);if($e(V,"SID",_.K),$e(V,"RID",N),$e(V,"TYPE","terminate"),Ls(_,V),N=new _i(_,_.j,N),N.L=2,N.v=Rn(Lt(V)),V=!1,h.navigator&&h.navigator.sendBeacon)try{V=h.navigator.sendBeacon(N.v.toString(),"")}catch{}!V&&h.Image&&(new Image().src=N.v,V=!0),V||(N.g=du(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Zt(N)}sn(_)}function xs(_){_.g&&(la(_),_.g.cancel(),_.g=null)}function _e(_){xs(_),_.u&&(h.clearTimeout(_.u),_.u=null),To(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&h.clearTimeout(_.s),_.s=null)}function _t(_){if(!Nt(_.h)&&!_.s){_.s=!0;var N=_.Ga;we||Ne(),se||(we(),se=!0),Te.add(N,_),_.B=0}}function Tr(_,N){return Mt(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=N.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=cn(T(_.Ga,_,N),ca(_,_.B)),_.B++,!0)}n.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const ge=new _i(this,this.j,_);let Ae=this.o;if(this.S&&(Ae?(Ae=B(Ae),J(Ae,this.S)):Ae=this.S),this.m!==null||this.O||(ge.H=Ae,Ae=null),this.P)e:{for(var N=0,V=0;V<this.i.length;V++){t:{var Y=this.i[V];if("__data__"in Y.map&&(Y=Y.map.__data__,typeof Y=="string")){Y=Y.length;break t}Y=void 0}if(Y===void 0)break;if(N+=Y,4096<N){N=V;break e}if(N===4096||V===this.i.length-1){N=V+1;break e}}N=1e3}else N=1e3;N=Io(this,ge,N),V=Lt(this.I),$e(V,"RID",_),$e(V,"CVER",22),this.D&&$e(V,"X-HTTP-Session-Id",this.D),Ls(this,V),Ae&&(this.O?N="headers="+encodeURIComponent(String(Wi(Ae)))+"&"+N:this.m&&Ji(V,this.m,Ae)),ia(this.h,ge),this.Ua&&$e(V,"TYPE","init"),this.P?($e(V,"$req",N),$e(V,"SID","null"),ge.T=!0,li(ge,V,null)):li(ge,V,N),this.G=2}}else this.G==3&&(_?eo(this,_):this.i.length==0||Nt(this.h)||eo(this))};function eo(_,N){var V;N?V=N.l:V=_.U++;const Y=Lt(_.I);$e(Y,"SID",_.K),$e(Y,"RID",V),$e(Y,"AID",_.T),Ls(_,Y),_.m&&_.o&&Ji(Y,_.m,_.o),V=new _i(_,_.j,V,_.B+1),_.m===null&&(V.H=_.o),N&&(_.i=N.D.concat(_.i)),N=Io(_,V,1e3),V.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),ia(_.h,V),li(V,Y,N)}function Ls(_,N){_.H&&le(_.H,function(V,Y){$e(N,Y,V)}),_.l&&pn({},function(V,Y){$e(N,Y,V)})}function Io(_,N,V){V=Math.min(_.i.length,V);var Y=_.l?T(_.l.Na,_.l,_):null;e:{var ge=_.i;let Ae=-1;for(;;){const He=["count="+V];Ae==-1?0<V?(Ae=ge[0].g,He.push("ofs="+Ae)):Ae=0:He.push("ofs="+Ae);let dn=!0;for(let Bn=0;Bn<V;Bn++){let qt=ge[Bn].g;const Pn=ge[Bn].map;if(qt-=Ae,0>qt)Ae=Math.max(0,ge[Bn].g-100),dn=!1;else try{uu(Pn,He,"req"+qt+"_")}catch{Y&&Y(Pn)}}if(dn){Y=He.join("&");break e}}}return _=_.i.splice(0,V),N.D=_,Y}function aa(_){if(!_.g&&!_.u){_.Y=1;var N=_.Fa;we||Ne(),se||(we(),se=!0),Te.add(N,_),_.v=0}}function Ka(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=cn(T(_.Fa,_),ca(_,_.v)),_.v++,!0)}n.Fa=function(){if(this.u=null,Zn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=cn(T(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),xs(this),Zn(this))};function la(_){_.A!=null&&(h.clearTimeout(_.A),_.A=null)}function Zn(_){_.g=new _i(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var N=Lt(_.qa);$e(N,"RID","rpc"),$e(N,"SID",_.K),$e(N,"AID",_.T),$e(N,"CI",_.F?"0":"1"),!_.F&&_.ja&&$e(N,"TO",_.ja),$e(N,"TYPE","xmlhttp"),Ls(_,N),_.m&&_.o&&Ji(N,_.m,_.o),_.L&&(_.g.I=_.L);var V=_.g;_=_.ia,V.L=1,V.v=Rn(Lt(N)),V.m=null,V.P=!0,Ar(V,_)}n.Za=function(){this.C!=null&&(this.C=null,xs(this),Ka(this),Rt(19))};function To(_){_.C!=null&&(h.clearTimeout(_.C),_.C=null)}function xn(_,N){var V=null;if(_.g==N){To(_),la(_),_.g=null;var Y=2}else if(Hr(_.h,N))V=N.D,Wa(_.h,N),Y=1;else return;if(_.G!=0){if(N.o)if(Y==1){V=N.m?N.m.length:0,N=Date.now()-N.F;var ge=_.B;Y=Tn(),Xn(Y,new fs(Y,V)),_t(_)}else aa(_);else if(ge=N.s,ge==3||ge==0&&0<N.X||!(Y==1&&Tr(_,N)||Y==2&&Ka(_)))switch(V&&0<V.length&&(N=_.h,N.i=N.i.concat(V)),ge){case 1:ui(_,5);break;case 4:ui(_,10);break;case 3:ui(_,6);break;default:ui(_,2)}}}function ca(_,N){let V=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(V*=2),V*N}function ui(_,N){if(_.j.info("Error code "+N),N==2){var V=T(_.fb,_),Y=_.Xa;const ge=!Y;Y=new bi(Y||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Qn(Y,"https"),Rn(Y),ge?xt(Y.toString(),V):cu(Y.toString(),V)}else Rt(2);_.G=0,_.l&&_.l.sa(N),sn(_),_e(_)}n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function sn(_){if(_.G=0,_.ka=[],_.l){const N=Yn(_.h);(N.length!=0||_.i.length!=0)&&(L(_.ka,N),L(_.ka,_.i),_.h.i.length=0,D(_.i),_.i.length=0),_.l.ra()}}function ft(_,N,V){var Y=V instanceof bi?Lt(V):new bi(V);if(Y.g!="")N&&(Y.g=N+"."+Y.g),me(Y,Y.s);else{var ge=h.location;Y=ge.protocol,N=N?N+"."+ge.hostname:ge.hostname,ge=+ge.port;var Ae=new bi(null);Y&&Qn(Ae,Y),N&&(Ae.g=N),ge&&me(Ae,ge),V&&(Ae.l=V),Y=Ae}return V=_.D,N=_.ya,V&&N&&$e(Y,V,N),$e(Y,"VER",_.la),Ls(_,Y),Y}function du(_,N,V){if(N&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=_.Ca&&!_.pa?new kn(new ps({eb:V})):new kn(_.pa),N.Ha(_.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function un(){}n=un.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function es(){}es.prototype.g=function(_,N){return new fr(_,N)};function fr(_,N){Wt.call(this),this.g=new Ao(N),this.l=_,this.h=N&&N.messageUrlParams||null,_=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(_?_["X-WebChannel-Content-Type"]=N.messageContentType:_={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(_?_["X-WebChannel-Client-Profile"]=N.va:_={"X-WebChannel-Client-Profile":N.va}),this.g.S=_,(_=N&&N.Sb)&&!z(_)&&(this.g.m=_),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!z(N)&&(this.g.D=N,_=this.h,_!==null&&N in _&&(_=this.h,N in _&&delete _[N])),this.j=new ts(this)}M(fr,Wt),fr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fr.prototype.close=function(){Dn(this.g)},fr.prototype.o=function(_){var N=this.g;if(typeof _=="string"){var V={};V.__data__=_,_=V}else this.u&&(V={},V.__data__=In(_),_=V);N.i.push(new lu(N.Ya++,_)),N.G==3&&_t(N)},fr.prototype.N=function(){this.g.l=null,delete this.j,Dn(this.g),delete this.g,fr.aa.N.call(this)};function hu(_){Er.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var N=_.__sm__;if(N){e:{for(const V in N){_=V;break e}_=void 0}(this.i=_)&&(_=this.i,N=N!==null&&_ in N?N[_]:void 0),this.data=N}else this.data=_}M(hu,Er);function Hi(){Ps.call(this),this.status=1}M(Hi,Ps);function ts(_){this.g=_}M(ts,un),ts.prototype.ua=function(){Xn(this.g,"a")},ts.prototype.ta=function(_){Xn(this.g,new hu(_))},ts.prototype.sa=function(_){Xn(this.g,new Hi)},ts.prototype.ra=function(){Xn(this.g,"b")},es.prototype.createWebChannel=es.prototype.g,fr.prototype.send=fr.prototype.o,fr.prototype.open=fr.prototype.m,fr.prototype.close=fr.prototype.close,ZS=function(){return new es},QS=function(){return Tn()},YS=pt,mx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vo.NO_ERROR=0,vo.TIMEOUT=8,vo.HTTP_ERROR=6,Rm=vo,Wr.COMPLETE="complete",XS=Wr,Zs.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,kh=Zs,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,KS=kn}).apply(typeof em<"u"?em:typeof self<"u"?self:typeof window<"u"?window:{});const Bb="@firebase/firestore",jb="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new zw("@firebase/firestore");function zu(){return Wc.logLevel}function Be(n,...e){if(Wc.logLevel<=Xt.DEBUG){const t=e.map(ev);Wc.debug(`Firestore (${Md}): ${n}`,...t)}}function Ki(n,...e){if(Wc.logLevel<=Xt.ERROR){const t=e.map(ev);Wc.error(`Firestore (${Md}): ${n}`,...t)}}function Hc(n,...e){if(Wc.logLevel<=Xt.WARN){const t=e.map(ev);Wc.warn(`Firestore (${Md}): ${n}`,...t)}}function ev(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,JS(n,r,t)}function JS(n,e,t){let r=`FIRESTORE (${Md}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ki(r),new Error(r)}function dt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||JS(e,i,r)}function Pt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends na{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class s7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class o7{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let r=this.i;const i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let o=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zo,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const p=o;e.enqueueRetryable(async()=>{await p.promise,await i(this.currentUser)})},h=p=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new eR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new gi(e)}}class a7{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class l7{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new a7(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ub{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c7{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ho(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ub(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ub(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=u7(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function px(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return yy(i)===yy(o)?kt(i,o):yy(i)?1:-1}return kt(n.length,e.length)}const d7=55296,h7=57343;function yy(n){const e=n.charCodeAt(0);return e>=d7&&e<=h7}function hd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function tR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="__name__";class Do{constructor(e,t,r){t===void 0?t=0:t>e.length&&rt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&rt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Do.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Do?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Do.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return kt(e.length,t.length)}static compareSegments(e,t){const r=Do.isNumericId(e),i=Do.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Do.extractNumericId(e).compare(Do.extractNumericId(t)):px(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Rl.fromString(e.substring(4,e.length-2))}}class fn extends Do{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const f7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ar extends Do{construct(e,t,r){return new ar(e,t,r)}static isValidIdentifier(e){return f7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zb}static keyField(){return new ar([zb])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new qe(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new qe(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else h==="`"?(c=!c,i++):h!=="."||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new qe(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ar(t)}static emptyPath(){return new ar([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(fn.fromString(e))}static fromName(e){return new Ke(fn.fromString(e).popFirst(5))}static empty(){return new Ke(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new fn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n,e,t){if(!t)throw new qe(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function m7(n,e,t,r){if(e===!0&&r===!0)throw new qe(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Wb(n){if(!Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Hb(n){if(Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function rR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":rt(12329,{type:typeof n})}function Ss(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new qe(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xp(n);throw new qe(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(n,e){const t={typeString:n};return e&&(t.value=e),t}function jf(n,e){if(!rR(n))throw new qe(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new qe(Ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=-62135596800,$b=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*$b);return new vn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Gb)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$b}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jf(e,vn._jsonSchema))return new vn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vn._jsonSchemaVersion="firestore/timestamp/1.0",vn._jsonSchema={type:Br("string",vn._jsonSchemaVersion),seconds:Br("number"),nanoseconds:Br("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new vn(0,0))}static max(){return new yt(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=-1;class lp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gx(n){return n.fields.find(e=>e.kind===2)}function wc(n){return n.fields.filter(e=>e.kind!==2)}lp.UNKNOWN_ID=-1;class Nm{constructor(e,t){this.fieldPath=e,this.kind=t}}class lf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new lf(0,ks.min())}}function p7(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(r===1e9?new vn(t+1,0):new vn(t,r));return new ks(i,Ke.empty(),e)}function iR(n){return new ks(n.readTime,n.key,af)}class ks{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ks(yt.min(),Ke.empty(),af)}static max(){return new ks(yt.max(),Ke.empty(),af)}}function nv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ke.comparator(n.documentKey,e.documentKey),t!==0?t:kt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function su(n){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==sR)throw n;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},p=>r(p))}),c=!0,o===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ye((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let p=0;p<o;p++){const g=p;t(e[g]).next(w=>{c[g]=w,++h,h===o&&r(c)},w=>i(w))}})}static doWhile(e,t){return new ye((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="SimpleDb";class Yp{static open(e,t,r,i){try{return new Yp(t,e.transaction(i,r))}catch(o){throw new zh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new zo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new zh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=rv(r.target.error);this.S.reject(new zh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Be(As,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new y7(t)}}class Nl{static delete(e){return Be(As,"Removing database:",e),bc(nS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!dS())return!1;if(Nl.F())return!0;const e=Yr(),t=Nl.M(e),r=0<t&&t<10,i=aR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Nl.M(Yr())===12.2&&Ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Be(As,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const c=o.target.result;t(c)},i.onblocked=()=>{r(new zh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new qe(Ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new qe(Ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new zh(e,c))},i.onupgradeneeded=o=>{Be(As,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,i.transaction,o.oldVersion,this.version).next(()=>{Be(As,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const h=Yp.open(this.db,e,o?"readonly":"readwrite",r),p=i(h).next(g=>(h.C(),g)).catch(g=>(h.abort(g),ye.reject(g))).toPromise();return p.catch(()=>{}),await h.D,p}catch(h){const p=h,g=p.name!=="FirebaseError"&&c<3;if(Be(As,"Transaction failed with error:",p.message,"Retrying:",g),this.close(),!g)return Promise.reject(p)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class g7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return bc(this.U.delete())}}class zh extends qe{constructor(e,t){super(Ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hl(n){return n.name==="IndexedDbTransactionError"}class y7{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Be(As,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be(As,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bc(r)}add(e){return Be(As,"ADD",this.store.name,e,e),bc(this.store.add(e))}get(e){return bc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Be(As,"GET",this.store.name,e,t),t))}delete(e){return Be(As,"DELETE",this.store.name,e),bc(this.store.delete(e))}count(){return Be(As,"COUNT",this.store.name),bc(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ye((c,h)=>{o.onerror=p=>{h(p.target.error)},o.onsuccess=p=>{c(p.target.result)}})}{const o=this.cursor(r),c=[];return this.H(o,(h,p)=>{c.push(p)}).next(()=>c)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ye((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Z(e,t){Be(As,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,c,h)=>h.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ye((r,i)=>{t.onerror=o=>{const c=rv(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ye((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new g7(h),g=t(h.primaryKey,h.value,p);if(g instanceof ye){const w=g.catch(E=>(p.done(),ye.reject(E)));r.push(w)}p.isDone?i():p.G===null?h.continue():h.continue(p.G)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bc(n){return new ye((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=rv(r.target.error);t(i)}})}let qb=!1;function rv(n){const e=Nl.M(Yr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qb||(qb=!0,setTimeout(()=>{throw r},0)),r}}return n}const Wh="IndexBackfiller";class x7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Be(Wh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();Be(Wh,`Documents written: ${t}`)}catch(t){Hl(t)?Be(Wh,"Ignoring IndexedDB error during index backfill: ",t):await su(t)}await this.re(6e4)})}}class w7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let i=t,o=!0;return ye.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Be(Wh,`Processing collection: ${c}`),this.oe(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this._e(i,o)).next(h=>(Be(Wh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=iR(o);nv(c,r)>0&&(r=c)}),new ks(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}qs.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function Qp(n){return n==null}function cf(n){return n===0&&1/n==-1/0}function v7(n){return typeof n=="number"&&Number.isInteger(n)&&!cf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="";function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kb(e)),e=_7(n.get(t),e);return Kb(e)}function _7(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case cp:t+="";break;default:t+=o}}return t}function Kb(n){return n+cp+""}function Mo(n){const e=n.length;if(dt(e>=2,64408,{path:n}),e===2)return dt(n.charAt(0)===cp&&n.charAt(1)==="",56145,{path:n}),fn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf(cp,o);switch((c<0||c>t)&&rt(50515,{path:n}),n.charAt(c+1)){case"":const h=n.substring(o,c);let p;i.length===0?p=h:(i+=h,p=i,i=""),r.push(p);break;case"":i+=n.substring(o,c),i+="\0";break;case"":i+=n.substring(o,c+1);break;default:rt(61167,{path:n})}o=c+2}return new fn(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc="remoteDocuments",Uf="owner",ku="owner",uf="mutationQueues",E7="userId",uo="mutations",Xb="batchId",Cc="userMutationsIndex",Yb=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(n,e){return[n,Vi(e)]}function lR(n,e,t){return[n,Vi(e),t]}const b7={},fd="documentMutations",up="remoteDocumentsV14",A7=["prefixPath","collectionGroup","readTime","documentId"],Pm="documentKeyIndex",I7=["prefixPath","collectionGroup","documentId"],cR="collectionGroupIndex",T7=["collectionGroup","readTime","prefixPath","documentId"],df="remoteDocumentGlobal",yx="remoteDocumentGlobalKey",md="targets",uR="queryTargetsIndex",C7=["canonicalId","targetId"],pd="targetDocuments",S7=["targetId","path"],iv="documentTargetsIndex",R7=["path","targetId"],dp="targetGlobalKey",Dc="targetGlobal",hf="collectionParents",N7=["collectionId","parent"],gd="clientMetadata",k7="clientId",Zp="bundles",P7="bundleId",Jp="namedQueries",D7="name",sv="indexConfiguration",O7="indexId",xx="collectionGroupIndex",M7="collectionGroup",Hh="indexState",L7=["indexId","uid"],dR="sequenceNumberIndex",V7=["uid","sequenceNumber"],Gh="indexEntries",F7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hR="documentKeyIndex",B7=["indexId","uid","orderedDocumentKey"],eg="documentOverlays",j7=["userId","collectionPath","documentId"],wx="collectionPathOverlayIndex",U7=["userId","collectionPath","largestBatchId"],fR="collectionGroupOverlayIndex",z7=["userId","collectionGroup","largestBatchId"],ov="globals",W7="name",mR=[uf,uo,fd,vc,md,Uf,Dc,pd,gd,df,hf,Zp,Jp],H7=[...mR,eg],pR=[uf,uo,fd,up,md,Uf,Dc,pd,gd,df,hf,Zp,Jp,eg],gR=pR,av=[...gR,sv,Hh,Gh],G7=av,yR=[...av,ov],$7=yR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx extends oR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Qr(n,e){const t=Pt(n);return Nl.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tm(this.root,e,this.comparator,!1)}getReverseIterator(){return new tm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tm(this.root,e,this.comparator,!0)}}class tm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??yi.RED,this.left=i??yi.EMPTY,this.right=o??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new yi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1;yi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Zb(this.data.getIterator())}getIteratorFrom(e){return new Zb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class Zb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(ar.comparator)}static empty(){return new ds([])}unionWith(e){let t=new En(ar.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wR("Invalid base64 string: "+o):o}}(e);return new Ur(t)}static fromUint8Array(e){const t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const q7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Na(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const t=q7.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ka(n){return typeof n=="string"?Ur.fromBase64String(n):Ur.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="server_timestamp",_R="__type__",ER="__previous_value__",bR="__local_write_time__";function lv(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[_R])==null?void 0:r.stringValue)===vR}function tg(n){const e=n.mapValue.fields[ER];return lv(e)?tg(e):e}function ff(n){const e=Na(n.mapValue.fields[bR].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e,t,r,i,o,c,h,p,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=w}}const hp="(default)";class Gc{constructor(e,t){this.projectId=e,this.database=t||hp}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===hp}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__type__",AR="__max__",Tl={mapValue:{fields:{__type__:{stringValue:AR}}}},uv="__vector__",yd="value",Dm={nullValue:"NULL_VALUE"};function Ol(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lv(n)?4:IR(n)?9007199254740991:ng(n)?10:11:rt(28295,{value:n})}function Qo(n,e){if(n===e)return!0;const t=Ol(n);if(t!==Ol(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ff(n).isEqual(ff(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Na(i.timestampValue),h=Na(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ka(i.bytesValue).isEqual(ka(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return er(i.geoPointValue.latitude)===er(o.geoPointValue.latitude)&&er(i.geoPointValue.longitude)===er(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return er(i.integerValue)===er(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=er(i.doubleValue),h=er(o.doubleValue);return c===h?cf(c)===cf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return hd(n.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},h=o.mapValue.fields||{};if(Qb(c)!==Qb(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!Qo(c[p],h[p])))return!1;return!0}(n,e);default:return rt(52216,{left:n})}}function mf(n,e){return(n.values||[]).find(t=>Qo(t,e))!==void 0}function Ml(n,e){if(n===e)return 0;const t=Ol(n),r=Ol(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=er(o.integerValue||o.doubleValue),p=er(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Jb(n.timestampValue,e.timestampValue);case 4:return Jb(ff(n),ff(e));case 5:return px(n.stringValue,e.stringValue);case 6:return function(o,c){const h=ka(o),p=ka(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const w=kt(h[g],p[g]);if(w!==0)return w}return kt(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=kt(er(o.latitude),er(c.latitude));return h!==0?h:kt(er(o.longitude),er(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return eA(n.arrayValue,e.arrayValue);case 10:return function(o,c){var T,R,M,D;const h=o.fields||{},p=c.fields||{},g=(T=h[yd])==null?void 0:T.arrayValue,w=(R=p[yd])==null?void 0:R.arrayValue,E=kt(((M=g==null?void 0:g.values)==null?void 0:M.length)||0,((D=w==null?void 0:w.values)==null?void 0:D.length)||0);return E!==0?E:eA(g,w)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Tl.mapValue&&c===Tl.mapValue)return 0;if(o===Tl.mapValue)return 1;if(c===Tl.mapValue)return-1;const h=o.fields||{},p=Object.keys(h),g=c.fields||{},w=Object.keys(g);p.sort(),w.sort();for(let E=0;E<p.length&&E<w.length;++E){const T=px(p[E],w[E]);if(T!==0)return T;const R=Ml(h[p[E]],g[w[E]]);if(R!==0)return R}return kt(p.length,w.length)}(n.mapValue,e.mapValue);default:throw rt(23264,{he:t})}}function Jb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kt(n,e);const t=Na(n),r=Na(e),i=kt(t.seconds,r.seconds);return i!==0?i:kt(t.nanos,r.nanos)}function eA(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ml(t[i],r[i]);if(o)return o}return kt(t.length,r.length)}function xd(n){return _x(n)}function _x(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Na(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ka(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ke.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=_x(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${_x(t.fields[c])}`;return i+"}"}(n.mapValue):rt(61005,{value:n})}function Om(n){switch(Ol(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tg(n);return e?16+Om(e):16;case 5:return 2*n.stringValue.length;case 6:return ka(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Om(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Gl(r.fields,(o,c)=>{i+=o.length+Om(c)}),i}(n.mapValue);default:throw rt(13486,{value:n})}}function pf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ex(n){return!!n&&"integerValue"in n}function gf(n){return!!n&&"arrayValue"in n}function tA(n){return!!n&&"nullValue"in n}function nA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mm(n){return!!n&&"mapValue"in n}function ng(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cv])==null?void 0:r.stringValue)===uv}function $h(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Gl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=$h(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$h(n.arrayValue.values[t]);return e}return{...n}}function IR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}const TR={mapValue:{fields:{[cv]:{stringValue:uv},[yd]:{arrayValue:{}}}}};function X7(n){return"nullValue"in n?Dm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pf(Gc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ng(n)?TR:{mapValue:{}}:rt(35942,{value:n})}function Y7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pf(Gc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?TR:"mapValue"in n?ng(n)?{mapValue:{}}:Tl:rt(61959,{value:n})}function rA(n,e){const t=Ml(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function iA(n,e){const t=Ml(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$h(t)}setAll(e){let t=ar.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=$h(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Mm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Oi($h(this.value))}}function CR(n){const e=[];return Gl(n.fields,(t,r)=>{const i=new ar([t]);if(Mm(r)){const o=CR(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,r,i,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new yr(e,0,yt.min(),yt.min(),yt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,i){return new yr(e,1,t,yt.min(),r,i,0)}static newNoDocument(e,t){return new yr(e,2,t,yt.min(),yt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new yr(e,3,t,yt.min(),yt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t){this.position=e,this.inclusive=t}}function sA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?r=Ke.comparator(Ke.fromName(c.referenceValue),t.key):r=Ml(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function oA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qo(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{}class Yt extends SR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Z7(e,t,r):t==="array-contains"?new tV(e,r):t==="in"?new OR(e,r):t==="not-in"?new nV(e,r):t==="array-contains-any"?new rV(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new J7(e,r):new eV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ml(t,this.value)):t!==null&&Ol(this.value)===Ol(t)&&this.matchesComparison(Ml(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends SR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _n(e,t)}matches(e){return vd(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vd(n){return n.op==="and"}function bx(n){return n.op==="or"}function dv(n){return RR(n)&&vd(n)}function RR(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function Ax(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+xd(n.value);if(dv(n))return n.filters.map(e=>Ax(e)).join(",");{const e=n.filters.map(t=>Ax(t)).join(",");return`${n.op}(${e})`}}function NR(n,e){return n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&Qo(r.value,i.value)}(n,e):n instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,h)=>o&&NR(c,i.filters[h]),!0):!1}(n,e):void rt(19439)}function kR(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function PR(n){return n instanceof Yt?function(t){return`${t.field.canonicalString()} ${t.op} ${xd(t.value)}`}(n):n instanceof _n?function(t){return t.op.toString()+" {"+t.getFilters().map(PR).join(" ,")+"}"}(n):"Filter"}class Z7 extends Yt{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class J7 extends Yt{constructor(e,t){super(e,"in",t),this.keys=DR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eV extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=DR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function DR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class tV extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gf(t)&&mf(t.arrayValue,this.value)}}class OR extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mf(this.value.arrayValue,t)}}class nV extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(mf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mf(this.value.arrayValue,t)}}class rV extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>mf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function Ix(n,e=null,t=[],r=[],i=null,o=null,c=null){return new iV(n,e,t,r,i,o,c)}function $c(n){const e=Pt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ax(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Qp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xd(r)).join(",")),e.Te=t}return e.Te}function zf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Q7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oA(n.startAt,e.startAt)&&oA(n.endAt,e.endAt)}function fp(n){return Ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function mp(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function aA(n,e,t){let r=Dm,i=!0;for(const o of mp(n,e)){let c=Dm,h=!0;switch(o.op){case"<":case"<=":c=X7(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=Dm}rA({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];rA({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}function lA(n,e,t){let r=Tl,i=!0;for(const o of mp(n,e)){let c=Tl,h=!0;switch(o.op){case">=":case">":c=Y7(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=Tl}iA({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];iA({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sV(n,e,t,r,i,o,c,h){return new Ld(n,e,t,r,i,o,c,h)}function Wf(n){return new Ld(n)}function cA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MR(n){return n.collectionGroup!==null}function qh(n){const e=Pt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new En(ar.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new yf(o,r))}),t.has(ar.keyField().canonicalString())||e.Ie.push(new yf(ar.keyField(),r))}return e.Ie}function Xs(n){const e=Pt(n);return e.Ee||(e.Ee=oV(e,qh(n))),e.Ee}function oV(n,e){if(n.limitType==="F")return Ix(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new yf(i.field,o)});const t=n.endAt?new wd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wd(n.startAt.position,n.startAt.inclusive):null;return Ix(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Tx(n,e){const t=n.filters.concat([e]);return new Ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Cx(n,e,t){return new Ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rg(n,e){return zf(Xs(n),Xs(e))&&n.limitType===e.limitType}function LR(n){return`${$c(Xs(n))}|lt:${n.limitType}`}function Wu(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>PR(i)).join(", ")}]`),Qp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>xd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>xd(i)).join(",")),`Target(${r})`}(Xs(n))}; limitType=${n.limitType})`}function Hf(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of qh(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,h,p){const g=sA(c,h,p);return c.inclusive?g<=0:g<0}(r.startAt,qh(r),i)||r.endAt&&!function(c,h,p){const g=sA(c,h,p);return c.inclusive?g>=0:g>0}(r.endAt,qh(r),i))}(n,e)}function aV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VR(n){return(e,t)=>{let r=!1;for(const i of qh(n)){const o=lV(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function lV(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(o,c,h){const p=c.data.field(o),g=h.data.field(o);return p!==null&&g!==null?Ml(p,g):rt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return xR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new nr(Ke.comparator);function Ts(){return cV}const FR=new nr(Ke.comparator);function Ph(...n){let e=FR;for(const t of n)e=e.insert(t.key,t);return e}function BR(n){let e=FR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Lo(){return Kh()}function jR(){return Kh()}function Kh(){return new Ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const uV=new nr(Ke.comparator),dV=new En(Ke.comparator);function Bt(...n){let e=dV;for(const t of n)e=e.add(t);return e}const hV=new En(kt);function fV(){return hV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function UR(n){return{integerValue:""+n}}function mV(n,e){return v7(e)?UR(e):hv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this._=void 0}}function pV(n,e,t){return n instanceof _d?function(i,o){const c={fields:{[_R]:{stringValue:vR},[bR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lv(o)&&(o=tg(o)),o&&(c.fields[ER]=o),{mapValue:c}}(t,e):n instanceof Ed?WR(n,e):n instanceof bd?HR(n,e):function(i,o){const c=zR(i,o),h=uA(c)+uA(i.Ae);return Ex(c)&&Ex(i.Ae)?UR(h):hv(i.serializer,h)}(n,e)}function gV(n,e,t){return n instanceof Ed?WR(n,e):n instanceof bd?HR(n,e):t}function zR(n,e){return n instanceof xf?function(r){return Ex(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class _d extends ig{}class Ed extends ig{constructor(e){super(),this.elements=e}}function WR(n,e){const t=GR(e);for(const r of n.elements)t.some(i=>Qo(i,r))||t.push(r);return{arrayValue:{values:t}}}class bd extends ig{constructor(e){super(),this.elements=e}}function HR(n,e){let t=GR(e);for(const r of n.elements)t=t.filter(i=>!Qo(i,r));return{arrayValue:{values:t}}}class xf extends ig{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function uA(n){return er(n.integerValue||n.doubleValue)}function GR(n){return gf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t){this.field=e,this.transform=t}}function yV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ed&&i instanceof Ed||r instanceof bd&&i instanceof bd?hd(r.elements,i.elements,Qo):r instanceof xf&&i instanceof xf?Qo(r.Ae,i.Ae):r instanceof _d&&i instanceof _d}(n.transform,e.transform)}class xV{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sg{}function qR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new og(n.key,Xi.none()):new Vd(n.key,n.data,Xi.none());{const t=n.data,r=Oi.empty();let i=new En(ar.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new ja(n.key,r,new ds(i.toArray()),Xi.none())}}function wV(n,e,t){n instanceof Vd?function(i,o,c){const h=i.value.clone(),p=hA(i.fieldTransforms,o,c.transformResults);h.setAll(p),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ja?function(i,o,c){if(!Lm(i.precondition,o))return void o.convertToUnknownDocument(c.version);const h=hA(i.fieldTransforms,o,c.transformResults),p=o.data;p.setAll(KR(i)),p.setAll(h),o.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Xh(n,e,t,r){return n instanceof Vd?function(o,c,h,p){if(!Lm(o.precondition,c))return h;const g=o.value.clone(),w=fA(o.fieldTransforms,p,c);return g.setAll(w),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof ja?function(o,c,h,p){if(!Lm(o.precondition,c))return h;const g=fA(o.fieldTransforms,p,c),w=c.data;return w.setAll(KR(o)),w.setAll(g),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(o,c,h){return Lm(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function vV(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=zR(r.transform,i||null);o!=null&&(t===null&&(t=Oi.empty()),t.set(r.field,o))}return t||null}function dA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hd(r,i,(o,c)=>yV(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vd extends sg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ja extends sg{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function KR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hA(n,e,t){const r=new Map;dt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,gV(c,h,t[i]))}return r}function fA(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,pV(o,c,e))}return r}class og extends sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XR extends sg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&wV(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jR();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const p=qR(c,h);p!==null&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bt())}isEqual(e){return this.batchId===e.batchId&&hd(this.mutations,e.mutations,(t,r)=>dA(t,r))&&hd(this.baseMutations,e.baseMutations,(t,r)=>dA(t,r))}}class mv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){dt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return uV}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new mv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or,tn;function EV(n){switch(n){case Ce.OK:return rt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return rt(15467,{code:n})}}function YR(n){if(n===void 0)return Ki("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case Or.OK:return Ce.OK;case Or.CANCELLED:return Ce.CANCELLED;case Or.UNKNOWN:return Ce.UNKNOWN;case Or.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Or.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Or.INTERNAL:return Ce.INTERNAL;case Or.UNAVAILABLE:return Ce.UNAVAILABLE;case Or.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Or.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Or.NOT_FOUND:return Ce.NOT_FOUND;case Or.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Or.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Or.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Or.ABORTED:return Ce.ABORTED;case Or.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Or.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Or.DATA_LOSS:return Ce.DATA_LOSS;default:return rt(39323,{code:n})}}(tn=Or||(Or={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=new Rl([4294967295,4294967295],0);function mA(n){const e=bV().encode(n),t=new qS;return t.update(e),new Uint8Array(t.digest())}function pA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rl([t,r],0),new Rl([i,o],0)]}class gv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Dh(`Invalid padding: ${t}`);if(r<0)throw new Dh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Dh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Dh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Rl.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Rl.fromNumber(r)));return i.compare(AV)===1&&(i=new Rl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=mA(e),[r,i]=pA(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new gv(o,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.ge===0)return;const t=mA(e),[r,i]=pA(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Dh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Gf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ag(yt.min(),i,new nr(kt),Ts(),Bt())}}class Gf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Gf(r,t,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class QR{constructor(e,t){this.targetId=e,this.Ce=t}}class ZR{constructor(e,t,r=Ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class gA{constructor(){this.ve=0,this.Fe=yA(),this.Me=Ur.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Bt(),t=Bt(),r=Bt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt(38017,{changeType:o})}}),new Gf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=yA()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=nm(),this.He=nm(),this.Ye=new nr(kt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(fp(o))if(r===0){const c=new Ke(o.path);this.et(t,c,yr.newNoDocument(c,yt.min()))}else dt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),p=h?this.ct(h,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,h;try{c=ka(r).toUint8Array()}catch(p){if(p instanceof wR)return Hc("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new gv(c,i,o)}catch(p){return Hc(p instanceof Dh?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,c)=>{const h=this.ot(c);if(h){if(o.current&&fp(h.target)){const p=new Ke(h.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,yr.newNoDocument(p,e))}o.Be&&(t.set(c,o.ke()),o.qe())}});let r=Bt();this.He.forEach((o,c)=>{let h=!0;c.forEachWhile(p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,c)=>c.setReadTime(e));const i=new ag(e,t,this.Ye,this.je,r);return this.je=Ts(),this.Je=nm(),this.He=nm(),this.Ye=new nr(kt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gA,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(kt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(kt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gA),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nm(){return new nr(Ke.comparator)}function yA(){return new nr(Ke.comparator)}const TV={asc:"ASCENDING",desc:"DESCENDING"},CV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SV={and:"AND",or:"OR"};class RV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sx(n,e){return n.useProto3Json||Qp(e)?e:{value:e}}function Ad(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NV(n,e){return Ad(n,e.toTimestamp())}function Qi(n){return dt(!!n,49232),yt.fromTimestamp(function(t){const r=Na(t);return new vn(r.seconds,r.nanos)}(n))}function yv(n,e){return Rx(n,e).canonicalString()}function Rx(n,e){const t=function(i){return new fn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function e3(n){const e=fn.fromString(n);return dt(c3(e),10190,{key:e.toString()}),e}function pp(n,e){return yv(n.databaseId,e.path)}function Oc(n,e){const t=e3(e);if(t.get(1)!==n.databaseId.projectId)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(r3(t))}function t3(n,e){return yv(n.databaseId,e)}function n3(n){const e=e3(n);return e.length===4?fn.emptyPath():r3(e)}function Nx(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function r3(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function xA(n,e,t){return{name:pp(n,e),fields:t.value.mapValue.fields}}function kV(n,e,t){const r=Oc(n,e.name),i=Qi(e.updateTime),o=e.createTime?Qi(e.createTime):yt.min(),c=new Oi({mapValue:{fields:e.fields}}),h=yr.newFoundDocument(r,i,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function PV(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:rt(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,w){return g.useProto3Json?(dt(w===void 0||typeof w=="string",58123),Ur.fromBase64String(w||"")):(dt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ur.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const w=g.code===void 0?Ce.UNKNOWN:YR(g.code);return new qe(w,g.message||"")}(c);t=new ZR(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oc(n,r.document.name),o=Qi(r.document.updateTime),c=r.document.createTime?Qi(r.document.createTime):yt.min(),h=new Oi({mapValue:{fields:r.document.fields}}),p=yr.newFoundDocument(i,o,c,h),g=r.targetIds||[],w=r.removedTargetIds||[];t=new Vm(g,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Oc(n,r.document),o=r.readTime?Qi(r.readTime):yt.min(),c=yr.newNoDocument(i,o),h=r.removedTargetIds||[];t=new Vm([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Oc(n,r.document),o=r.removedTargetIds||[];t=new Vm([],o,i,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new _V(i,o),h=r.targetId;t=new QR(h,c)}}return t}function gp(n,e){let t;if(e instanceof Vd)t={update:xA(n,e.key,e.value)};else if(e instanceof og)t={delete:pp(n,e.key)};else if(e instanceof ja)t={update:xA(n,e.key,e.data),updateMask:FV(e.fieldMask)};else{if(!(e instanceof XR))return rt(16599,{Vt:e.type});t={verify:pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const h=c.transform;if(h instanceof _d)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ed)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof bd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof xf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw rt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:NV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:rt(27497)}(n,e.precondition)),t}function kx(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?Xi.updateTime(Qi(o.updateTime)):o.exists!==void 0?Xi.exists(o.exists):Xi.none()}(e.currentDocument):Xi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(c,h){let p=null;if("setToServerValue"in h)dt(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),p=new _d;else if("appendMissingElements"in h){const w=h.appendMissingElements.values||[];p=new Ed(w)}else if("removeAllFromArray"in h){const w=h.removeAllFromArray.values||[];p=new bd(w)}else"increment"in h?p=new xf(c,h.increment):rt(16584,{proto:h});const g=ar.fromServerFormat(h.fieldPath);return new $R(g,p)}(n,i)):[];if(e.update){e.update.name;const i=Oc(n,e.update.name),o=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(p){const g=p.fieldPaths||[];return new ds(g.map(w=>ar.fromServerFormat(w)))}(e.updateMask);return new ja(i,o,c,t,r)}return new Vd(i,o,t,r)}if(e.delete){const i=Oc(n,e.delete);return new og(i,t)}if(e.verify){const i=Oc(n,e.verify);return new XR(i,t)}return rt(1463,{proto:e})}function DV(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map(t=>function(i,o){let c=i.updateTime?Qi(i.updateTime):Qi(o);return c.isEqual(yt.min())&&(c=Qi(o)),new xV(c,i.transformResults||[])}(t,e))):[]}function i3(n,e){return{documents:[t3(n,e.path)]}}function s3(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=t3(n,i);const o=function(g){if(g.length!==0)return l3(_n.create(g,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(w=>function(T){return{field:Hu(T.field),direction:MV(T.dir)}}(w))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Sx(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:i}}function o3(n){let e=n3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){dt(r===1,65062);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let o=[];t.where&&(o=function(E){const T=a3(E);return T instanceof _n&&dv(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(T=>function(M){return new yf(Gu(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(E){let T;return T=typeof E=="object"?E.value:E,Qp(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(E){const T=!!E.before,R=E.values||[];return new wd(R,T)}(t.startAt));let g=null;return t.endAt&&(g=function(E){const T=!E.before,R=E.values||[];return new wd(R,T)}(t.endAt)),sV(e,i,c,o,h,"F",p,g)}function OV(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function a3(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gu(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gu(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gu(t.unaryFilter.field);return Yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gu(t.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Yt.create(Gu(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _n.create(t.compositeFilter.filters.map(r=>a3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(t.compositeFilter.op))}(n):rt(30097,{filter:n})}function MV(n){return TV[n]}function LV(n){return CV[n]}function VV(n){return SV[n]}function Hu(n){return{fieldPath:n.canonicalString()}}function Gu(n){return ar.fromServerFormat(n.fieldPath)}function l3(n){return n instanceof Yt?function(t){if(t.op==="=="){if(nA(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NAN"}};if(tA(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nA(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NOT_NAN"}};if(tA(t.value))return{unaryFilter:{field:Hu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hu(t.field),op:LV(t.op),value:t.value}}}(n):n instanceof _n?function(t){const r=t.getFilters().map(i=>l3(i));return r.length===1?r[0]:{compositeFilter:{op:VV(t.op),filters:r}}}(n):rt(54877,{filter:n})}function FV(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function c3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t,r,i,o=yt.min(),c=yt.min(),h=Ur.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.yt=e}}function BV(n,e){let t;if(e.document)t=kV(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=Kc(e.noDocument.readTime);t=yr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt(56709);{const r=Ke.fromSegments(e.unknownDocument.path),i=Kc(e.unknownDocument.version);t=yr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new vn(i[0],i[1]);return yt.fromTimestamp(o)}(e.readTime)),t}function wA(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,c){return{name:pp(o,c.key),fields:c.data.value.mapValue.fields,updateTime:Ad(o,c.version.toTimestamp()),createTime:Ad(o,c.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qc(e.version)};else{if(!e.isUnknownDocument())return rt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:qc(e.version)}}return r}function yp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kc(n){const e=new vn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Ac(n,e){const t=(e.baseMutations||[]).map(o=>kx(n.yt,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];c.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>kx(n.yt,o)),i=vn.fromMillis(e.localWriteTimeMs);return new fv(e.batchId,i,t,r)}function Oh(n){const e=Kc(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Kc(n.lastLimboFreeSnapshotVersion):yt.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){const c=o.documents.length;return dt(c===1,1966,{count:c}),Xs(Wf(n3(o.documents[0])))}(n.query):function(o){return Xs(o3(o))}(n.query),new ba(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ur.fromBase64String(n.resumeToken))}function d3(n,e){const t=qc(e.snapshotVersion),r=qc(e.lastLimboFreeSnapshotVersion);let i;i=fp(e.target)?i3(n.yt,e.target):s3(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$c(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function h3(n){const e=o3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Cx(e,e.limit,"L"):e}function xy(n,e){return new pv(e.largestBatchId,kx(n.yt,e.overlayMutation))}function vA(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function _A(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:qc(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{getBundleMetadata(e,t){return EA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Kc(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return EA(e).put(function(i){return{bundleId:i.id,createTime:qc(Qi(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return bA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:h3(o.bundledQuery),readTime:Kc(o.readTime)}}(r)})}saveNamedQuery(e,t){return bA(e).put(function(i){return{name:i.name,readTime:qc(Qi(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function EA(n){return Qr(n,Zp)}function bA(n){return Qr(n,Jp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new lg(e,r)}getOverlay(e,t){return _h(e).get(vA(this.userId,t)).next(r=>r?xy(this.serializer,r):null)}getOverlays(e,t){const r=Lo();return ye.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new pv(t,c);i.push(this.St(e,h))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Vi(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(_h(e).Z(wx,h))}),ye.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Lo(),o=Vi(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return _h(e).J(wx,c).next(h=>{for(const p of h){const g=xy(this.serializer,p);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Lo();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _h(e).ee({index:fR,range:h},(p,g,w)=>{const E=xy(this.serializer,g);o.size()<i||E.largestBatchId===c?(o.set(E.getKey(),E),c=E.largestBatchId):w.done()}).next(()=>o)}St(e,t){return _h(e).put(function(i,o,c){const[h,p,g]=vA(o,c.mutation.key);return{userId:o,collectionPath:p,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:gp(i.yt,c.mutation)}}(this.serializer,this.userId,t))}}function _h(n){return Qr(n,eg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{bt(e){return Qr(e,ov)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Ur.fromUint8Array(r):Ur.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),cf(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Na(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ka(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?IR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ng(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):rt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var c,h;const r=e.fields||{};this.Ft(t,53);const i=yd,o=((h=(c=r[i].arrayValue)==null?void 0:c.values)==null?void 0:h.length)||0;this.Ft(t,15),t.Mt(er(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ke.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ic.Kt=new Ic;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=255;function zV(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function AA(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const c=zV(255&r[o]);if(i+=c,c!==8)break}return i}(n);return Math.ceil(e/8)}class WV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=AA(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=AA(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Du),this.sn(255)}_n(){this.an(Du),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Du?(this.sn(Du),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Du?(this.an(Du),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HV{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class GV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Eh{constructor(){this.cn=new WV,this.ln=new HV(this.cn),this.hn=new GV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Tc(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Fm(this.En),directionalValue:Fm(this.dn),orderedDocumentKey:Fm(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function hl(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=IA(n.En,e.En),t!==0?t:(t=IA(n.dn,e.dn),t!==0?t:Ke.comparator(n.In,e.In)))}function IA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Fm(n){return uS()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function TA(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}class CA{constructor(e){this.mn=new En((t,r)=>ar.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(dt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=gx(e);if(t!==void 0&&!this.wn(t))return!1;const r=wc(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!i.has(h.field.canonicalString())){const p=r[o];if(!this.Sn(h,p)||!this.bn(this.fn[c++],p))return!1}++o}for(;o<r.length;++o){const h=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new En(ar.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Nm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Nm(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Nm(r.field,r.dir==="asc"?0:1)));return new lp(lp.UNKNOWN_ID,this.collectionId,t,lf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(n){var t,r;if(dt(n instanceof Yt||n instanceof _n,20012),n instanceof Yt){if(n instanceof OR){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(o=>Yt.create(n.field,"==",o)))||[];return _n.create(i,"or")}return n}const e=n.filters.map(i=>f3(i));return _n.create(e,n.op)}function $V(n){if(n.getFilters().length===0)return[];const e=Ox(f3(n));return dt(m3(e),7391),Px(e)||Dx(e)?[e]:e.getFilters()}function Px(n){return n instanceof Yt}function Dx(n){return n instanceof _n&&dv(n)}function m3(n){return Px(n)||Dx(n)||function(t){if(t instanceof _n&&bx(t)){for(const r of t.getFilters())if(!Px(r)&&!Dx(r))return!1;return!0}return!1}(n)}function Ox(n){if(dt(n instanceof Yt||n instanceof _n,34018),n instanceof Yt)return n;if(n.filters.length===1)return Ox(n.filters[0]);const e=n.filters.map(r=>Ox(r));let t=_n.create(e,n.op);return t=xp(t),m3(t)?t:(dt(t instanceof _n,64498),dt(vd(t),40251),dt(t.filters.length>1,57927),t.filters.reduce((r,i)=>xv(r,i)))}function xv(n,e){let t;return dt(n instanceof Yt||n instanceof _n,38388),dt(e instanceof Yt||e instanceof _n,25473),t=n instanceof Yt?e instanceof Yt?function(i,o){return _n.create([i,o],"and")}(n,e):SA(n,e):e instanceof Yt?SA(e,n):function(i,o){if(dt(i.filters.length>0&&o.filters.length>0,48005),vd(i)&&vd(o))return kR(i,o.getFilters());const c=bx(i)?i:o,h=bx(i)?o:i,p=c.filters.map(g=>xv(g,h));return _n.create(p,"or")}(n,e),xp(t)}function SA(n,e){if(vd(e))return kR(e,n.getFilters());{const t=e.filters.map(r=>xv(n,r));return _n.create(t,"or")}}function xp(n){if(dt(n instanceof Yt||n instanceof _n,11850),n instanceof Yt)return n;const e=n.getFilters();if(e.length===1)return xp(e[0]);if(RR(n))return n;const t=e.map(i=>xp(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof _n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_n.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(){this.Cn=new wv}addToCollectionParentIndex(e,t){return this.Cn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(ks.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class wv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(fn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(fn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="IndexedDbIndexManager",rm=new Uint8Array(0);class KV{constructor(e,t){this.databaseId=t,this.vn=new wv,this.Fn=new Ba(r=>$c(r),(r,i)=>zf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const o={collectionId:r,parent:Vi(i)};return NA(e).put(o)}return ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[tR(t),""],!1,!0);return NA(e).J(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Mo(c.parent))}return r})}addFieldIndex(e,t){const r=bh(e),i=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])}}(t);delete i.indexId;const o=r.add(i);if(t.indexState){const c=Mu(e);return o.next(h=>{c.put(_A(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=bh(e),i=Mu(e),o=Ou(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=bh(e),r=Ou(e),i=Mu(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return ye.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new CA(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Ou(e);let i=!0;const o=new Map;return ye.forEach(this.Mn(t),c=>this.xn(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Bt();const h=[];return ye.forEach(o,(p,g)=>{Be(RA,`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(Q=>`${Q.fieldPath}:${Q.kind}`).join(",")}`}(p)} to execute ${$c(t)}`);const w=function(W,Q){const ie=gx(Q);if(ie===void 0)return null;for(const le of mp(W,ie.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null}(g,p),E=function(W,Q){const ie=new Map;for(const le of wc(Q))for(const F of mp(W,le.fieldPath))switch(F.op){case"==":case"in":ie.set(le.fieldPath.canonicalString(),F.value);break;case"not-in":case"!=":return ie.set(le.fieldPath.canonicalString(),F.value),Array.from(ie.values())}return null}(g,p),T=function(W,Q){const ie=[];let le=!0;for(const F of wc(Q)){const B=F.kind===0?aA(W,F.fieldPath,W.startAt):lA(W,F.fieldPath,W.startAt);ie.push(B.value),le&&(le=B.inclusive)}return new wd(ie,le)}(g,p),R=function(W,Q){const ie=[];let le=!0;for(const F of wc(Q)){const B=F.kind===0?lA(W,F.fieldPath,W.endAt):aA(W,F.fieldPath,W.endAt);ie.push(B.value),le&&(le=B.inclusive)}return new wd(ie,le)}(g,p),M=this.On(p,g,T),D=this.On(p,g,R),L=this.Nn(p,g,E),H=this.Bn(p.indexId,w,M,T.inclusive,D,R.inclusive,L);return ye.forEach(H,z=>r.Y(z,t.limit).next(W=>{W.forEach(Q=>{const ie=Ke.fromSegments(Q.documentKey);c.has(ie)||(c=c.add(ie),h.push(ie))})}))}).next(()=>h)}return ye.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=$V(_n.create(e.filters,"and")).map(r=>Ix(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,c,h){const p=(t!=null?t.length:1)*Math.max(r.length,o.length),g=p/(t!=null?t.length:1),w=[];for(let E=0;E<p;++E){const T=t?this.Ln(t[E/g]):rm,R=this.kn(e,T,r[E%g],i),M=this.qn(e,T,o[E%g],c),D=h.map(L=>this.kn(e,T,L,!0));w.push(...this.createRange(R,M,D))}return w}kn(e,t,r,i){const o=new Tc(e,Ke.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new Tc(e,Ke.empty(),t,r);return i?o.An():o}xn(e,t){const r=new CA(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.yn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.Mn(t);return ye.forEach(i,o=>this.xn(e,o).next(c=>{c?r!==0&&c.fields.length<function(p){let g=new En(ar.comparator),w=!1;for(const E of p.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?w=!0:g=g.add(T.field));for(const E of p.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){const r=new Eh;for(const i of wc(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const c=r.Pn(i.kind);Ic.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new Eh;return Ic.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Eh;return Ic.Kt.Dt(pf(this.databaseId,t),r.Pn(function(o){const c=wc(o);return c.length===0?0:c[c.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Eh);let o=0;for(const c of wc(e)){const h=r[o++];for(const p of i)if(this.Un(t,c.fieldPath)&&gf(h))i=this.Kn(i,c,h);else{const g=p.Pn(c.kind);Ic.Kt.Dt(h,g)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new Eh;p.seed(h.un()),Ic.Kt.Dt(c,p.Pn(t.kind)),o.push(p)}return o}Un(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=bh(e),i=Mu(e);return(t?r.J(xx,IDBKeyRange.bound(t,t)):r.J()).next(o=>{const c=[];return ye.forEach(o,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(w,E){const T=E?new lf(E.sequenceNumber,new ks(Kc(E.readTime),new Ke(Mo(E.documentKey)),E.largestBatchId)):lf.empty(),R=w.fields.map(([M,D])=>new Nm(ar.fromServerFormat(M),D));return new lp(w.indexId,w.collectionGroup,R,T)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=bh(e),o=Mu(e);return this.Gn(e).next(c=>i.J(xx,IDBKeyRange.bound(t,t)).next(h=>ye.forEach(h,p=>o.put(_A(p.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ye.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?ye.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ye.forEach(h,p=>this.zn(e,i,p).next(g=>{const w=this.jn(o,p);return g.isEqual(w)?ye.resolve():this.Jn(e,o,p,g,w)}))))})}Hn(e,t,r,i){return Ou(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Ou(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Ou(e);let o=new En(hl);return i.ee({index:hR,range:IDBKeyRange.only([r.indexId,this.uid,Fm(this.$n(r,t))])},(c,h)=>{o=o.add(new Tc(r.indexId,t,TA(h.arrayValue),TA(h.directionalValue)))}).next(()=>o)}jn(e,t){let r=new En(hl);const i=this.Qn(t,e);if(i==null)return r;const o=gx(t);if(o!=null){const c=e.data.field(o.fieldPath);if(gf(c))for(const h of c.arrayValue.values||[])r=r.add(new Tc(t.indexId,e.key,this.Ln(h),i))}else r=r.add(new Tc(t.indexId,e.key,rm,i));return r}Jn(e,t,r,i,o){Be(RA,"Updating index entries for document '%s'",t.key);const c=[];return function(p,g,w,E,T){const R=p.getIterator(),M=g.getIterator();let D=Pu(R),L=Pu(M);for(;D||L;){let H=!1,z=!1;if(D&&L){const W=w(D,L);W<0?z=!0:W>0&&(H=!0)}else D!=null?z=!0:H=!0;H?(E(L),L=Pu(M)):z?(T(D),D=Pu(R)):(D=Pu(R),L=Pu(M))}}(i,o,hl,h=>{c.push(this.Hn(e,t,r,h))},h=>{c.push(this.Yn(e,t,r,h))}),ye.waitFor(c)}Gn(e){let t=1;return Mu(e).ee({index:dR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>hl(c,h)).filter((c,h,p)=>!h||hl(c,p[h-1])!==0);const i=[];i.push(e);for(const c of r){const h=hl(c,e),p=hl(c,t);if(h===0)i[0]=e.An();else if(h>0&&p<0)i.push(c),i.push(c.An());else if(p>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.Zn(i[c],i[c+1]))return[];const h=i[c].Vn(this.uid,rm,Ke.empty()),p=i[c+1].Vn(this.uid,rm,Ke.empty());o.push(IDBKeyRange.bound(h,p))}return o}Zn(e,t){return hl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kA)}getMinOffset(e,t){return ye.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||rt(44426))).next(kA)}}function NA(n){return Qr(n,hf)}function Ou(n){return Qr(n,Gh)}function bh(n){return Qr(n,sv)}function Mu(n){return Qr(n,Hh)}function kA(n){dt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;nv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ks(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p3=41943040;class Di{static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(n,e,t){const r=n.store(uo),i=n.store(fd),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.ee({range:c},(w,E,T)=>(h++,T.delete()));o.push(p.next(()=>{dt(h===1,47070,{batchId:t.batchId})}));const g=[];for(const w of t.mutations){const E=lR(e,w.key.path,t.batchId);o.push(i.delete(E)),g.push(w.key)}return ye.waitFor(o).next(()=>g)}function wp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(p3,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class cg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){dt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new cg(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fl(e).ee({index:Cc,range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=$u(e),c=fl(e);return c.add({}).next(h=>{dt(typeof h=="number",49019);const p=new fv(h,t,r,i),g=function(R,M,D){const L=D.baseMutations.map(z=>gp(R.yt,z)),H=D.mutations.map(z=>gp(R.yt,z));return{userId:M,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:L,mutations:H}}(this.serializer,this.userId,p),w=[];let E=new En((T,R)=>kt(T.canonicalString(),R.canonicalString()));for(const T of i){const R=lR(this.userId,T.key.path,h);E=E.add(T.key.path.popLast()),w.push(c.put(g)),w.push(o.put(R,b7))}return E.forEach(T=>{w.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Xn[h]=p.keys()}),ye.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return fl(e).get(t).next(r=>r?(dt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Ac(this.serializer,r)):null)}er(e,t){return this.Xn[t]?ye.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return fl(e).ee({index:Cc,range:i},(c,h,p)=>{h.userId===this.userId&&(dt(h.batchId>=r,47524,{tr:r}),o=Ac(this.serializer,h)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Pc;return fl(e).ee({index:Cc,range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Pc],[this.userId,Number.POSITIVE_INFINITY]);return fl(e).J(Cc,t).next(r=>r.map(i=>Ac(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=km(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return $u(e).ee({range:i},(c,h,p)=>{const[g,w,E]=c,T=Mo(w);if(g===this.userId&&t.path.isEqual(T))return fl(e).get(E).next(R=>{if(!R)throw rt(61480,{nr:c,batchId:E});dt(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:E}),o.push(Ac(this.serializer,R))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);const i=[];return t.forEach(o=>{const c=km(this.userId,o.path),h=IDBKeyRange.lowerBound(c),p=$u(e).ee({range:h},(g,w,E)=>{const[T,R,M]=g,D=Mo(R);T===this.userId&&o.path.isEqual(D)?r=r.add(M):E.done()});i.push(p)}),ye.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=km(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new En(kt);return $u(e).ee({range:c},(p,g,w)=>{const[E,T,R]=p,M=Mo(T);E===this.userId&&r.isPrefixOf(M)?M.length===i&&(h=h.add(R)):w.done()}).next(()=>this.rr(e,h))}rr(e,t){const r=[],i=[];return t.forEach(o=>{i.push(fl(e).get(o).next(c=>{if(c===null)throw rt(35274,{batchId:o});dt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(Ac(this.serializer,c))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return g3(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),i=[];return $u(e).ee({range:r},(o,c,h)=>{if(o[0]===this.userId){const p=Mo(o[1]);i.push(p)}else h.done()}).next(()=>{dt(i.length===0,56720,{sr:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return y3(e,this.userId,t)}_r(e){return x3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Pc,lastStreamToken:""})}}function y3(n,e,t){const r=km(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return $u(n).ee({range:o,X:!0},(h,p,g)=>{const[w,E,T]=h;w===e&&E===i&&(c=!0),g.done()}).next(()=>c)}function fl(n){return Qr(n,uo)}function $u(n){return Qr(n,fd)}function x3(n){return Qr(n,uf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xc(0)}static cr(){return new Xc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new Xc(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>yt.fromTimestamp(new vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Lu(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(dt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Lu(e).ee((c,h)=>{const p=Oh(h);p.sequenceNumber<=t&&r.get(p.targetId)===null&&(i++,o.push(this.removeTargetData(e,p)))}).next(()=>ye.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Lu(e).ee((r,i)=>{const o=Oh(i);t(o)})}lr(e){return DA(e).get(dp).next(t=>(dt(t!==null,2888),t))}hr(e,t){return DA(e).put(dp,t)}Pr(e,t){return Lu(e).put(d3(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$c(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Lu(e).ee({range:i,index:uR},(c,h,p)=>{const g=Oh(h);zf(t,g.target)&&(o=g,p.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Al(e);return t.forEach(c=>{const h=Vi(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=Al(e);return ye.forEach(t,o=>{const c=Vi(o.path);return ye.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Al(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Al(e);let o=Bt();return i.ee({range:r,X:!0},(c,h,p)=>{const g=Mo(c[1]),w=new Ke(g);o=o.add(w)}).next(()=>o)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[tR(r)],!1,!0);let o=0;return Al(e).ee({index:iv,X:!0,range:i},([c,h],p,g)=>{c!==0&&(o++,g.done())}).next(()=>o>0)}At(e,t){return Lu(e).get(t).next(r=>r?Oh(r):null)}}function Lu(n){return Qr(n,md)}function DA(n){return Qr(n,Dc)}function Al(n){return Qr(n,pd)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="LruGarbageCollector",YV=1048576;function MA([n,e],[t,r]){const i=kt(n,t);return i===0?kt(e,r):i}class QV{constructor(e){this.Ir=e,this.buffer=new En(MA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();MA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class w3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Be(OA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Hl(t)?Be(OA,"Ignoring IndexedDB error during garbage collection: ",t):await su(t)}await this.Vr(3e5)})}}class ZV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(qs.ce);const r=new QV(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(PA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PA):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,c,h,p,g;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,h=Date.now(),this.removeTargets(e,r,t))).next(E=>(o=E,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(g=Date.now(),zu()<=Xt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${i} in `+(h-c)+`ms
	Removed ${o} targets in `+(p-h)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-w}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}function v3(n,e){return new ZV(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,t){this.db=e,this.garbageCollector=v3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return im(e,r)}removeReference(e,t,r){return im(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return im(e,t)}br(e,t){return function(i,o){let c=!1;return x3(i).te(h=>y3(i,h,o).next(p=>(p&&(c=!0),ye.resolve(!p)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,(c,h)=>{if(h<=t){const p=this.br(e,c).next(g=>{if(!g)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,yt.min()),Al(e).delete(function(E){return[0,Vi(E.path)]}(c))))});i.push(p)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return im(e,t)}Sr(e,t){const r=Al(e);let i,o=qs.ce;return r.ee({index:iv},([c,h],{path:p,sequenceNumber:g})=>{c===0?(o!==qs.ce&&t(new Ke(Mo(i)),o),o=g,i=p):o=qs.ce}).next(()=>{o!==qs.ce&&t(new Ke(Mo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function im(n,e){return Al(n).put(function(r,i){return{targetId:0,path:Vi(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.changes=new Ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mc(e).put(r)}removeEntry(e,t,r){return mc(e).delete(function(o,c){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],yp(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=yr.newInvalidDocument(t);return mc(e).ee({index:Pm,range:IDBKeyRange.only(Ah(t))},(i,o)=>{r=this.Cr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:yr.newInvalidDocument(t)};return mc(e).ee({index:Pm,range:IDBKeyRange.only(Ah(t))},(i,o)=>{r={document:this.Cr(t,o),size:wp(o)}}).next(()=>r)}getEntries(e,t){let r=Ts();return this.Fr(e,t,(i,o)=>{const c=this.Cr(i,o);r=r.insert(i,c)}).next(()=>r)}Mr(e,t){let r=Ts(),i=new nr(Ke.comparator);return this.Fr(e,t,(o,c)=>{const h=this.Cr(o,c);r=r.insert(o,h),i=i.insert(o,wp(c))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return ye.resolve();let i=new En(FA);t.forEach(p=>i=i.add(p));const o=IDBKeyRange.bound(Ah(i.first()),Ah(i.last())),c=i.getIterator();let h=c.getNext();return mc(e).ee({index:Pm,range:o},(p,g,w)=>{const E=Ke.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&FA(h,E)<0;)r(h,null),h=c.getNext();h&&h.isEqual(E)&&(r(h,g),h=c.hasNext()?c.getNext():null),h?w.j(Ah(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const c=t.path,h=[c.popLast().toArray(),c.lastSegment(),yp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mc(e).J(IDBKeyRange.bound(h,p,!0)).next(g=>{o==null||o.incrementDocumentReadCount(g.length);let w=Ts();for(const E of g){const T=this.Cr(Ke.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(Hf(t,T)||i.has(T.key))&&(w=w.insert(T.key,T))}return w})}getAllFromCollectionGroup(e,t,r,i){let o=Ts();const c=VA(t,r),h=VA(t,ks.max());return mc(e).ee({index:cR,range:IDBKeyRange.bound(c,h,!0)},(p,g,w)=>{const E=this.Cr(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(E.key,E),o.size===i&&w.done()}).next(()=>o)}newChangeBuffer(e){return new tF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return LA(e).get(yx).next(t=>(dt(!!t,20021),t))}Dr(e,t){return LA(e).put(yx,t)}Cr(e,t){if(t){const r=BV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(yt.min())))return r}return yr.newInvalidDocument(e)}}function E3(n){return new eF(n)}class tF extends _3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ba(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new En((o,c)=>kt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),c.isValidDocument()){const p=wA(this.Nr.serializer,c);i=i.add(o.path.popLast());const g=wp(p);r+=g-h.size,t.push(this.Nr.addEntry(e,o,p))}else if(r-=h.size,this.trackRemovals){const p=wA(this.Nr.serializer,c.convertToNoDocument(yt.min()));t.push(this.Nr.addEntry(e,o,p))}}),i.forEach(o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Nr.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function LA(n){return Qr(n,df)}function mc(n){return Qr(n,up)}function Ah(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VA(n,e){const t=e.documentKey.path.toArray();return[n,yp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FA(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=kt(t[o],r[o]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xh(r.mutation,i,ds.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bt()){const i=Lo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=Ph();return o.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=Ts();const c=Kh(),h=function(){return Kh()}();return t.forEach((p,g)=>{const w=r.get(g.key);i.has(g.key)&&(w===void 0||w.mutation instanceof ja)?o=o.insert(g.key,g):w!==void 0?(c.set(g.key,w.mutation.getFieldMask()),Xh(w.mutation,g,w.mutation.getFieldMask(),vn.now())):c.set(g.key,ds.empty())}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((g,w)=>c.set(g,w)),t.forEach((g,w)=>h.set(g,new nF(w,c.get(g)??null))),h))}recalculateAndSaveOverlays(e,t){const r=Kh();let i=new nr((c,h)=>c-h),o=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let w=r.get(p)||ds.empty();w=h.applyToLocalView(g,w),r.set(p,w);const E=(i.get(h.batchId)||Bt()).add(p);i=i.insert(h.batchId,E)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,w=p.value,E=jR();w.forEach(T=>{if(!o.has(T)){const R=qR(t.get(T),r.get(T));R!==null&&E.set(T,R),o=o.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ye.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return Ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ye.resolve(Lo());let h=af,p=o;return c.next(g=>ye.forEach(g,(w,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(w)?ye.resolve():this.remoteDocumentCache.getEntry(e,w).next(T=>{p=p.insert(w,T)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,p,g,Bt())).next(w=>({batchId:h,changes:BR(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Ph();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=Ph();return this.indexManager.getCollectionParents(e,o).next(h=>ye.forEach(h,p=>{const g=function(E,T){return new Ld(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(w=>{w.forEach((E,T)=>{c=c.insert(E,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((p,g)=>{const w=g.getKey();c.get(w)===null&&(c=c.insert(w,yr.newInvalidDocument(w)))});let h=Ph();return c.forEach((p,g)=>{const w=o.get(p);w!==void 0&&Xh(w.mutation,g,ds.empty(),vn.now()),Hf(t,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ye.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qi(i.createTime)}}(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:h3(i.bundledQuery),readTime:Qi(i.readTime)}}(t)),ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(){this.overlays=new nr(Ke.comparator),this.qr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Lo();return ye.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=Lo(),o=t.length+1,c=new Ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new nr((g,w)=>g-w);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let w=o.get(g.largestBatchId);w===null&&(w=Lo(),o=o.insert(g.largestBatchId,w)),w.set(g.getKey(),g)}}const h=Lo(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,w)=>h.set(g,w)),!(h.size()>=i)););return ye.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new pv(t,r));let o=this.qr.get(t);o===void 0&&(o=Bt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.sessionToken=Ur.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.Qr=new En(oi.$r),this.Ur=new En(oi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new oi(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new oi(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Ke(new fn([])),r=new oi(t,e),i=new oi(t,e+1),o=[];return this.Ur.forEachInRange([r,i],c=>{this.Gr(c),o.push(c.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ke(new fn([])),r=new oi(t,e),i=new oi(t,e+1);let o=Bt();return this.Ur.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new oi(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class oi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ke.comparator(e.key,t.key)||kt(e.Yr,t.Yr)}static Kr(e,t){return kt(e.Yr,t.Yr)||Ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(oi.$r)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new fv(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Zr=this.Zr.add(new oi(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(e,t){return ye.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ye.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?Pc:this.tr-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new oi(t,0),i=new oi(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],c=>{const h=this.Xr(c.Yr);o.push(h)}),ye.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);return t.forEach(i=>{const o=new oi(i,0),c=new oi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],h=>{r=r.add(h.Yr)})}),ye.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const c=new oi(new Ke(o),0);let h=new En(kt);return this.Zr.forEachWhile(p=>{const g=p.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(h=h.add(p.Yr)),!0)},c),ye.resolve(this.ti(h))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ye.forEach(t.mutations,i=>{const o=new oi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new oi(t,0),i=this.Zr.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e){this.ri=e,this.docs=function(){return new nr(Ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(t))}getEntries(e,t){let r=Ts();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():yr.newInvalidDocument(i))}),ye.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ts();const c=t.path,h=new Ke(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:w}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||nv(iR(w),r)<=0||(i.has(w.key)||Hf(t,w))&&(o=o.insert(w.key,w.mutableCopy()))}return ye.resolve(o)}getAllFromCollectionGroup(e,t,r,i){rt(9500)}ii(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lF(this)}getSize(e){return ye.resolve(this.size)}}class lF extends _3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.persistence=e,this.si=new Ba(t=>$c(t),zf),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new vv,this.targetCount=0,this.ai=Xc.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ye.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Xc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Pr(t),ye.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ye.waitFor(o).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),ye.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.ui={},this.overlays={},this.ci=new qs(0),this.li=!1,this.li=!0,this.hi=new sF,this.referenceDelegate=e(this),this.Pi=new cF(this),this.indexManager=new qV,this.remoteDocumentCache=function(i){return new aF(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new u3(t),this.Ii=new rF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new oF(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new uF(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return ye.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class uF extends oR{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new vv,this.Vi=null}static mi(e){return new ug(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.fi,r=>{const i=Ke.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,yt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ye.or([()=>ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class vp{constructor(e,t){this.persistence=e,this.pi=new Ba(r=>Vi(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=v3(this,t)}static mi(e,t){return new vp(e,t)}Ei(){}di(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ye.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ye.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,c=>this.br(e,c,t).next(h=>{h||(r++,o.removeEntry(c,yt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ye.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Om(e.data.value)),t}br(e,t,r){return ye.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ye.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.serializer=e}k(e,t,r,i){const o=new Yp("createOrUpgrade",t);r<1&&i>=1&&(function(p){p.createObjectStore(Uf)}(e),function(p){p.createObjectStore(uf,{keyPath:E7}),p.createObjectStore(uo,{keyPath:Xb,autoIncrement:!0}).createIndex(Cc,Yb,{unique:!0}),p.createObjectStore(fd)}(e),BA(e),function(p){p.createObjectStore(vc)}(e));let c=ye.resolve();return r<3&&i>=3&&(r!==0&&(function(p){p.deleteObjectStore(pd),p.deleteObjectStore(md),p.deleteObjectStore(Dc)}(e),BA(e)),c=c.next(()=>function(p){const g=p.store(Dc),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return g.put(dp,w)}(o))),r<4&&i>=4&&(r!==0&&(c=c.next(()=>function(p,g){return g.store(uo).J().next(E=>{p.deleteObjectStore(uo),p.createObjectStore(uo,{keyPath:Xb,autoIncrement:!0}).createIndex(Cc,Yb,{unique:!0});const T=g.store(uo),R=E.map(M=>T.put(M));return ye.waitFor(R)})}(e,o))),c=c.next(()=>{(function(p){p.createObjectStore(gd,{keyPath:k7})})(e)})),r<5&&i>=5&&(c=c.next(()=>this.yi(o))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore(df)}(e),this.wi(o)))),r<7&&i>=7&&(c=c.next(()=>this.Si(o))),r<8&&i>=8&&(c=c.next(()=>this.bi(e,o))),r<9&&i>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(c=c.next(()=>this.Di(o))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(Zp,{keyPath:P7})})(e),function(p){p.createObjectStore(Jp,{keyPath:D7})}(e)})),r<12&&i>=12&&(c=c.next(()=>{(function(p){const g=p.createObjectStore(eg,{keyPath:j7});g.createIndex(wx,U7,{unique:!1}),g.createIndex(fR,z7,{unique:!1})})(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const g=p.createObjectStore(up,{keyPath:A7});g.createIndex(Pm,I7),g.createIndex(cR,T7)}(e)).next(()=>this.Ci(e,o)).next(()=>e.deleteObjectStore(vc))),r<14&&i>=14&&(c=c.next(()=>this.Fi(e,o))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore(sv,{keyPath:O7,autoIncrement:!0}).createIndex(xx,M7,{unique:!1}),p.createObjectStore(Hh,{keyPath:L7}).createIndex(dR,V7,{unique:!1}),p.createObjectStore(Gh,{keyPath:F7}).createIndex(hR,B7,{unique:!1})}(e))),r<16&&i>=16&&(c=c.next(()=>{t.objectStore(Hh).clear()}).next(()=>{t.objectStore(Gh).clear()})),r<17&&i>=17&&(c=c.next(()=>{(function(p){p.createObjectStore(ov,{keyPath:W7})})(e)})),r<18&&i>=18&&uS()&&(c=c.next(()=>{t.objectStore(Hh).clear()}).next(()=>{t.objectStore(Gh).clear()})),c}wi(e){let t=0;return e.store(vc).ee((r,i)=>{t+=wp(i)}).next(()=>{const r={byteSize:t};return e.store(df).put(yx,r)})}yi(e){const t=e.store(uf),r=e.store(uo);return t.J().next(i=>ye.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,Pc],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Cc,c).next(h=>ye.forEach(h,p=>{dt(p.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:p.batchId});const g=Ac(this.serializer,p);return g3(e,o.userId,g).next(()=>{})}))}))}Si(e){const t=e.store(pd),r=e.store(vc);return e.store(Dc).get(dp).next(i=>{const o=[];return r.ee((c,h)=>{const p=new fn(c),g=function(E){return[0,Vi(E)]}(p);o.push(t.get(g).next(w=>w?ye.resolve():(E=>t.put({targetId:0,path:Vi(E),sequenceNumber:i.highestListenSequenceNumber}))(p)))}).next(()=>ye.waitFor(o))})}bi(e,t){e.createObjectStore(hf,{keyPath:N7});const r=t.store(hf),i=new wv,o=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:Vi(p)})}};return t.store(vc).ee({X:!0},(c,h)=>{const p=new fn(c);return o(p.popLast())}).next(()=>t.store(fd).ee({X:!0},([c,h,p],g)=>{const w=Mo(h);return o(w.popLast())}))}Di(e){const t=e.store(md);return t.ee((r,i)=>{const o=Oh(i),c=d3(this.serializer,o);return t.put(c)})}Ci(e,t){const r=t.store(vc),i=[];return r.ee((o,c)=>{const h=t.store(up),p=function(E){return E.document?new Ke(fn.fromString(E.document.name).popFirst(5)):E.noDocument?Ke.fromSegments(E.noDocument.path):E.unknownDocument?Ke.fromSegments(E.unknownDocument.path):rt(36783)}(c).path.toArray(),g={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(g))}).next(()=>ye.waitFor(i))}Fi(e,t){const r=t.store(uo),i=E3(this.serializer),o=new _v(ug.mi,this.serializer.yt);return r.J().next(c=>{const h=new Map;return c.forEach(p=>{let g=h.get(p.userId)??Bt();Ac(this.serializer,p).keys().forEach(w=>g=g.add(w)),h.set(p.userId,g)}),ye.forEach(h,(p,g)=>{const w=new gi(g),E=lg.wt(this.serializer,w),T=o.getIndexManager(w),R=cg.wt(w,this.serializer,T,o.referenceDelegate);return new b3(i,R,E,T).recalculateAndSaveOverlaysForDocumentKeys(new vx(t,qs.ce),p).next()})})}}function BA(n){n.createObjectStore(pd,{keyPath:S7}).createIndex(iv,R7,{unique:!0}),n.createObjectStore(md,{keyPath:"targetId"}).createIndex(uR,C7,{unique:!0}),n.createObjectStore(Dc)}const ml="IndexedDbPersistence",wy=18e5,vy=5e3,_y="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hF="main";class Ev{constructor(e,t,r,i,o,c,h,p,g,w,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=h,this.xi=g,this.Oi=w,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!Ev.v())throw new qe(Ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JV(this,i),this.$i=t+hF,this.serializer=new u3(p),this.Ui=new Nl(this.$i,this.Ni,new dF(this.serializer)),this.hi=new UV,this.Pi=new XV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=E3(this.serializer),this.Ii=new jV,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&Ki(ml,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,_y);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new qs(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Hl(e))return Be(ml,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be(ml,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Ih(e).get(ku).next(t=>ye.resolve(this.es(t)))}ts(e){return sm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,wy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Qr(t,gd);return r.J().next(i=>{const o=this.ss(i,wy),c=i.filter(h=>o.indexOf(h)===-1);return ye.forEach(c,h=>r.delete(h.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ye.resolve(!0):Ih(e).get(ku).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,vy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,_y);return!1}}return!(!this.networkEnabled||!this.inForeground)||sm(e).J().next(r=>this.ss(r,vy).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(o||c&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Be(ml,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Uf,gd],e=>{const t=new vx(e,qs.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>sm(e).J().next(t=>this.ss(t,wy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return cg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new KV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return lg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be(ml,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=function(p){return p===18?$7:p===17?yR:p===16?G7:p===15?av:p===14?gR:p===13?pR:p===12?H7:p===11?mR:void rt(60245)}(this.Ni);let c;return this.Ui.runTransaction(e,i,o,h=>(c=new vx(h,this.ci?this.ci.next():qs.ce),t==="readwrite-primary"?this.Hi(c).next(p=>!!p||this.Yi(c)).next(p=>{if(!p)throw Ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new qe(Ce.FAILED_PRECONDITION,sR);return r(c)}).next(p=>this.Xi(c).next(()=>p)):this.Is(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Is(e){return Ih(e).get(ku).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,vy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(Ce.FAILED_PRECONDITION,_y)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ih(e).put(ku,t)}static v(){return Nl.v()}Zi(e){const t=Ih(e);return t.get(ku).next(r=>this.es(r)?(Be(ml,"Releasing primary lease."),t.delete(ku)):ye.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ki(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;cS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Be(ml,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ki(ml,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ki("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ih(n){return Qr(n,Uf)}function sm(n){return Qr(n,gd)}function fF(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Bt(),i=Bt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new bv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return cS()?8:aR(Yr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new mF;return this.Ss(e,t,c).next(h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(zu()<=Xt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",Wu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ye.resolve()):(zu()<=Xt.DEBUG&&Be("QueryEngine","Query:",Wu(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(zu()<=Xt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",Wu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xs(t))):ye.resolve())}ys(e,t){if(cA(t))return ye.resolve(null);let r=Xs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Cx(t,null,"F"),r=Xs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Bt(...o);return this.ps.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const g=this.Ds(t,h);return this.Cs(t,g,c,p.readTime)?this.ys(e,Cx(t,null,"F")):this.vs(e,g,t,p)}))})))}ws(e,t,r,i){return cA(t)||i.isEqual(yt.min())?ye.resolve(null):this.ps.getDocuments(e,r).next(o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,i)?ye.resolve(null):(zu()<=Xt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wu(t)),this.vs(e,c,t,p7(i,af)).next(h=>h))})}Ds(e,t){let r=new En(VR(e));return t.forEach((i,o)=>{Hf(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return zu()<=Xt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Wu(t)),this.ps.getDocumentsMatchingQuery(e,t,ks.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="LocalStore",pF=3e8;class gF{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new nr(kt),this.xs=new Ba(o=>$c(o),zf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function I3(n,e,t,r){return new gF(n,e,t,r)}async function T3(n,e){const t=Pt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let p=Bt();for(const g of i){c.push(g.batchId);for(const w of g.mutations)p=p.add(w.key)}for(const g of o){h.push(g.batchId);for(const w of g.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:h}))})})}function yF(n,e){const t=Pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(h,p,g,w){const E=g.batch,T=E.keys();let R=ye.resolve();return T.forEach(M=>{R=R.next(()=>w.getEntry(p,M)).next(D=>{const L=g.docVersions.get(M);dt(L!==null,48541),D.version.compareTo(L)<0&&(E.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),w.addEntry(D)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(p,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let p=Bt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function C3(n){const e=Pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function xF(n,e){const t=Pt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((w,E)=>{const T=i.get(E);if(!T)return;h.push(t.Pi.removeMatchingKeys(o,w.removedDocuments,E).next(()=>t.Pi.addMatchingKeys(o,w.addedDocuments,E)));let R=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Ur.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):w.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(w.resumeToken,r)),i=i.insert(E,R),function(D,L,H){return D.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=pF?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(T,R,w)&&h.push(t.Pi.updateTargetData(o,R))});let p=Ts(),g=Bt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,w))}),h.push(wF(o,c,e.documentUpdates).next(w=>{p=w.ks,g=w.qs})),!r.isEqual(yt.min())){const w=t.Pi.getLastRemoteSnapshotVersion(o).next(E=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(w)}return ye.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,g)).next(()=>p)}).then(o=>(t.Ms=i,o))}function wF(n,e,t){let r=Bt(),i=Bt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Ts();return t.forEach((h,p)=>{const g=o.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(yt.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):Be(Av,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{ks:c,qs:i}})}function vF(n,e){const t=Pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Pc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _F(n,e){const t=Pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,ye.resolve(i)):t.Pi.allocateTargetId(r).next(c=>(i=new ba(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Mx(n,e,t){const r=Pt(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Hl(c))throw c;Be(Av,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function jA(n,e,t){const r=Pt(n);let i=yt.min(),o=Bt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,w){const E=Pt(p),T=E.xs.get(w);return T!==void 0?ye.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,w)}(r,c,Xs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next(p=>{o=p})}).next(()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:yt.min(),t?o:Bt())).next(h=>(EF(r,aV(e),h),{documents:h,Qs:o})))}function EF(n,e,t){let r=n.Os.get(e)||yt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class UA{constructor(){this.activeTargetIds=fV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S3{constructor(){this.Mo=new UA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new UA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="ConnectivityMonitor";class WA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Be(zA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Be(zA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om=null;function Lx(){return om===null?om=function(){return 268435456+Math.round(2147483648*Math.random())}():om++,"0x"+om.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="RestConnection",AF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IF{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===hp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const c=Lx(),h=this.zo(e,t.toUriEncodedString());Be(Ey,`Sending RPC '${e}' ${c}:`,h,r);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,i,o);const{host:g}=new URL(h),w=Wl(g);return this.Jo(e,h,p,r,w).then(E=>(Be(Ey,`Received RPC '${e}' ${c}: `,E),E),E=>{throw Hc(Ey,`RPC '${e}' ${c} failed with error: `,E,"url: ",h,"request:",r),E})}Ho(e,t,r,i,o,c){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Md}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=AF[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="WebChannelConnection";class CF extends IF{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const c=Lx();return new Promise((h,p)=>{const g=new KS;g.setWithCredentials(!0),g.listenOnce(XS.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Rm.NO_ERROR:const E=g.getResponseJson();Be(Pi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),h(E);break;case Rm.TIMEOUT:Be(Pi,`RPC '${e}' ${c} timed out`),p(new qe(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Rm.HTTP_ERROR:const T=g.getStatus();if(Be(Pi,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const D=function(H){const z=H.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(z)>=0?z:Ce.UNKNOWN}(M.status);p(new qe(D,M.message))}else p(new qe(Ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new qe(Ce.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Be(Pi,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(i);Be(Pi,`RPC '${e}' ${c} sending request:`,i),g.send(t,"POST",w,r,15)})}T_(e,t,r){const i=Lx(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ZS(),h=QS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const w=o.join("");Be(Pi,`Creating RPC '${e}' stream ${i}: ${w}`,p);const E=c.createWebChannel(w,p);this.I_(E);let T=!1,R=!1;const M=new TF({Yo:L=>{R?Be(Pi,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(T||(Be(Pi,`Opening RPC '${e}' stream ${i} transport.`),E.open(),T=!0),Be(Pi,`RPC '${e}' stream ${i} sending:`,L),E.send(L))},Zo:()=>E.close()}),D=(L,H,z)=>{L.listen(H,W=>{try{z(W)}catch(Q){setTimeout(()=>{throw Q},0)}})};return D(E,kh.EventType.OPEN,()=>{R||(Be(Pi,`RPC '${e}' stream ${i} transport opened.`),M.o_())}),D(E,kh.EventType.CLOSE,()=>{R||(R=!0,Be(Pi,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(E))}),D(E,kh.EventType.ERROR,L=>{R||(R=!0,Hc(Pi,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),M.a_(new qe(Ce.UNAVAILABLE,"The operation could not be completed")))}),D(E,kh.EventType.MESSAGE,L=>{var H;if(!R){const z=L.data[0];dt(!!z,16349);const W=z,Q=(W==null?void 0:W.error)||((H=W[0])==null?void 0:H.error);if(Q){Be(Pi,`RPC '${e}' stream ${i} received error:`,Q);const ie=Q.status;let le=function(G){const J=Or[G];if(J!==void 0)return YR(J)}(ie),F=Q.message;le===void 0&&(le=Ce.INTERNAL,F="Unknown error status: "+ie+" with message "+Q.message),R=!0,M.a_(new qe(le,F)),E.close()}else Be(Pi,`RPC '${e}' stream ${i} received:`,z),M.u_(z)}}),D(h,YS.STAT_EVENT,L=>{L.stat===mx.PROXY?Be(Pi,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===mx.NOPROXY&&Be(Pi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(){return typeof window<"u"?window:null}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(n){return new RV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="PersistentStream";class N3{constructor(e,t,r,i,o,c,h,p){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new R3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new qe(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Be(HA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Be(HA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RF extends N3{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=PV(this.serializer,e),r=function(o){if(!("targetChange"in o))return yt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?yt.min():c.readTime?Qi(c.readTime):yt.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Nx(this.serializer),t.addTarget=function(o,c){let h;const p=c.target;if(h=fp(p)?{documents:i3(o,p)}:{query:s3(o,p).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=JR(o,c.resumeToken);const g=Sx(o,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(yt.min())>0){h.readTime=Ad(o,c.snapshotVersion.toTimestamp());const g=Sx(o,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const r=OV(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Nx(this.serializer),t.removeTarget=e,this.q_(t)}}class NF extends N3{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DV(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Nx(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>gp(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{}class PF extends kF{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Go(e,Rx(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(Ce.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Ho(e,Rx(t,r),i,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(Ce.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class DF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ki(t),this.aa=!1):Be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="RemoteStore";class OF{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(c=>{r.enqueueAndForget(async()=>{ou(this)&&(Be(Yc,"Restarting streams for network reachability change."),await async function(p){const g=Pt(p);g.Ea.add(4),await $f(g),g.Ra.set("Unknown"),g.Ea.delete(4),await hg(g)}(this))})}),this.Ra=new DF(r,i)}}async function hg(n){if(ou(n))for(const e of n.da)await e(!0)}async function $f(n){for(const e of n.da)await e(!1)}function k3(n,e){const t=Pt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Sv(t)?Cv(t):Fd(t).O_()&&Tv(t,e))}function Iv(n,e){const t=Pt(n),r=Fd(t);t.Ia.delete(e),r.O_()&&P3(t,e),t.Ia.size===0&&(r.O_()?r.L_():ou(t)&&t.Ra.set("Unknown"))}function Tv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fd(n).Y_(e)}function P3(n,e){n.Va.Ue(e),Fd(n).Z_(e)}function Cv(n){n.Va=new IV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fd(n).start(),n.Ra.ua()}function Sv(n){return ou(n)&&!Fd(n).x_()&&n.Ia.size>0}function ou(n){return Pt(n).Ea.size===0}function D3(n){n.Va=void 0}async function MF(n){n.Ra.set("Online")}async function LF(n){n.Ia.forEach((e,t)=>{Tv(n,e)})}async function VF(n,e){D3(n),Sv(n)?(n.Ra.ha(e),Cv(n)):n.Ra.set("Unknown")}async function FF(n,e,t){if(n.Ra.set("Online"),e instanceof ZR&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,c),i.Ia.delete(h),i.Va.removeTarget(h))}(n,e)}catch(r){Be(Yc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _p(n,r)}else if(e instanceof Vm?n.Va.Ze(e):e instanceof QR?n.Va.st(e):n.Va.tt(e),!t.isEqual(yt.min()))try{const r=await C3(n.localStore);t.compareTo(r)>=0&&await function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const w=o.Ia.get(g);w&&o.Ia.set(g,w.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,g)=>{const w=o.Ia.get(p);if(!w)return;o.Ia.set(p,w.withResumeToken(Ur.EMPTY_BYTE_STRING,w.snapshotVersion)),P3(o,p);const E=new ba(w.target,p,g,w.sequenceNumber);Tv(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){Be(Yc,"Failed to raise snapshot:",r),await _p(n,r)}}async function _p(n,e,t){if(!Hl(e))throw e;n.Ea.add(1),await $f(n),n.Ra.set("Offline"),t||(t=()=>C3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Be(Yc,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hg(n)})}function O3(n,e){return e().catch(t=>_p(n,t,e))}async function qf(n){const e=Pt(n),t=Ll(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pc;for(;BF(e);)try{const i=await vF(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,jF(e,i)}catch(i){await _p(e,i)}M3(e)&&L3(e)}function BF(n){return ou(n)&&n.Ta.length<10}function jF(n,e){n.Ta.push(e);const t=Ll(n);t.O_()&&t.X_&&t.ea(e.mutations)}function M3(n){return ou(n)&&!Ll(n).x_()&&n.Ta.length>0}function L3(n){Ll(n).start()}async function UF(n){Ll(n).ra()}async function zF(n){const e=Ll(n);for(const t of n.Ta)e.ea(t.mutations)}async function WF(n,e,t){const r=n.Ta.shift(),i=mv.from(r,e,t);await O3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await qf(n)}async function HF(n,e){e&&Ll(n).X_&&await async function(r,i){if(function(c){return EV(c)&&c!==Ce.ABORTED}(i.code)){const o=r.Ta.shift();Ll(r).B_(),await O3(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await qf(r)}}(n,e),M3(n)&&L3(n)}async function GA(n,e){const t=Pt(n);t.asyncQueue.verifyOperationInProgress(),Be(Yc,"RemoteStore received new credentials");const r=ou(t);t.Ea.add(3),await $f(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hg(t)}async function GF(n,e){const t=Pt(n);e?(t.Ea.delete(2),await hg(t)):e||(t.Ea.add(2),await $f(t),t.Ra.set("Unknown"))}function Fd(n){return n.ma||(n.ma=function(t,r,i){const o=Pt(t);return o.sa(),new RF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:MF.bind(null,n),t_:LF.bind(null,n),r_:VF.bind(null,n),H_:FF.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Sv(n)?Cv(n):n.Ra.set("Unknown")):(await n.ma.stop(),D3(n))})),n.ma}function Ll(n){return n.fa||(n.fa=function(t,r,i){const o=Pt(t);return o.sa(),new NF(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:UF.bind(null,n),r_:HF.bind(null,n),ta:zF.bind(null,n),na:WF.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await qf(n)):(await n.fa.stop(),n.Ta.length>0&&(Be(Yc,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new Rv(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nv(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),Hl(n))return new qe(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{static emptySet(e){return new rd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Ph(),this.sortedSet=new nr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new rd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(){this.ga=new nr(Ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Id{constructor(e,t,r,i,o,c,h,p,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Id(e,t,rd.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class qF{constructor(){this.queries=qA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Pt(t),o=i.queries;i.queries=qA(),o.forEach((c,h)=>{for(const p of h.Sa)p.onError(r)})})(this,new qe(Ce.ABORTED,"Firestore shutting down"))}}function qA(){return new Ba(n=>LR(n),rg)}async function kv(n,e){const t=Pt(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new $F,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const h=Nv(c,`Initialization of query '${Wu(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Dv(t)}async function Pv(n,e){const t=Pt(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function KF(n,e){const t=Pt(n);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(i)&&(r=!0);c.wa=i}}r&&Dv(t)}function XF(n,e,t){const r=Pt(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Dv(n){n.Ca.forEach(e=>{e.next()})}var Vx,KA;(KA=Vx||(Vx={})).Ma="default",KA.Cache="cache";class Ov{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Id(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vx.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.key=e}}class F3{constructor(e){this.key=e}}class YF{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bt(),this.mutatedKeys=Bt(),this.eu=VR(e),this.tu=new rd(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new $A,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,E)=>{const T=i.get(w),R=Hf(this.query,E)?E:null,M=!!T&&this.mutatedKeys.has(T.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;T&&R?T.data.isEqual(R.data)?M!==D&&(r.track({type:3,doc:R}),L=!0):this.su(T,R)||(r.track({type:2,doc:R}),L=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(h=!0)):!T&&R?(r.track({type:0,doc:R}),L=!0):T&&!R&&(r.track({type:1,doc:T}),L=!0,(p||g)&&(h=!0)),L&&(R?(c=c.add(R),o=D?o.add(w):o.delete(w)):(c=c.delete(w),o=o.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{tu:c,iu:r,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((w,E)=>function(R,M){const D=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:L})}};return D(R)-D(M)}(w.type,E.type)||this.eu(w.doc,E.doc)),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],p=this.Xa.size===0&&this.current&&!i?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Id(this.query,e.tu,o,c,e.mutatedKeys,p===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $A,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Bt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new F3(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new V3(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Id.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Mv="SyncEngine";class QF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ZF{constructor(e){this.key=e,this.hu=!1}}class JF{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ba(h=>LR(h),rg),this.Iu=new Map,this.Eu=new Set,this.du=new nr(Ke.comparator),this.Au=new Map,this.Ru=new vv,this.Vu={},this.mu=new Map,this.fu=Xc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eB(n,e,t=!0){const r=H3(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await B3(r,e,t,!0),i}async function tB(n,e){const t=H3(n);await B3(t,e,!0,!1)}async function B3(n,e,t,r){const i=await _F(n.localStore,Xs(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await nB(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&k3(n.remoteStore,i),h}async function nB(n,e,t,r,i){n.pu=(E,T,R)=>async function(D,L,H,z){let W=L.view.ru(H);W.Cs&&(W=await jA(D.localStore,L.query,!1).then(({documents:F})=>L.view.ru(F,W)));const Q=z&&z.targetChanges.get(L.targetId),ie=z&&z.targetMismatches.get(L.targetId)!=null,le=L.view.applyChanges(W,D.isPrimaryClient,Q,ie);return YA(D,L.targetId,le.au),le.snapshot}(n,E,T,R);const o=await jA(n.localStore,e,!0),c=new YF(e,o.Qs),h=c.ru(o.documents),p=Gf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),g=c.applyChanges(h,n.isPrimaryClient,p);YA(n,t,g.au);const w=new QF(e,t,c);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function rB(n,e,t){const r=Pt(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(c=>!rg(c,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Mx(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Iv(r.remoteStore,i.targetId),Fx(r,i.targetId)}).catch(su)):(Fx(r,i.targetId),await Mx(r.localStore,i.targetId,!0))}async function iB(n,e){const t=Pt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Iv(t.remoteStore,r.targetId))}async function sB(n,e,t){const r=G3(n);try{const i=await function(c,h){const p=Pt(c),g=vn.now(),w=h.reduce((R,M)=>R.add(M.key),Bt());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Ts(),D=Bt();return p.Ns.getEntries(R,w).next(L=>{M=L,M.forEach((H,z)=>{z.isValidDocument()||(D=D.add(H))})}).next(()=>p.localDocuments.getOverlayedDocuments(R,M)).next(L=>{E=L;const H=[];for(const z of h){const W=vV(z,E.get(z.key).overlayedDocument);W!=null&&H.push(new ja(z.key,W,CR(W.value.mapValue),Xi.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,H,h)}).next(L=>{T=L;const H=L.applyToLocalDocumentSet(E,D);return p.documentOverlayCache.saveOverlays(R,L.batchId,H)})}).then(()=>({batchId:T.batchId,changes:BR(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,h,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new nr(kt)),g=g.insert(h,p),c.Vu[c.currentUser.toKey()]=g}(r,i.batchId,t),await Kf(r,i.changes),await qf(r.remoteStore)}catch(i){const o=Nv(i,"Failed to persist write");t.reject(o)}}async function j3(n,e){const t=Pt(n);try{const r=await xF(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.Au.get(o);c&&(dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?dt(c.hu,14607):i.removedDocuments.size>0&&(dt(c.hu,42227),c.hu=!1))}),await Kf(t,r,e)}catch(r){await su(r)}}function XA(n,e,t){const r=Pt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,c)=>{const h=c.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(c,h){const p=Pt(c);p.onlineState=h;let g=!1;p.queries.forEach((w,E)=>{for(const T of E.Sa)T.va(h)&&(g=!0)}),g&&Dv(p)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oB(n,e,t){const r=Pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new nr(Ke.comparator);c=c.insert(o,yr.newNoDocument(o,yt.min()));const h=Bt().add(o),p=new ag(yt.min(),new Map,new nr(kt),c,h);await j3(r,p),r.du=r.du.remove(o),r.Au.delete(e),Lv(r)}else await Mx(r.localStore,e,!1).then(()=>Fx(r,e,t)).catch(su)}async function aB(n,e){const t=Pt(n),r=e.batch.batchId;try{const i=await yF(t.localStore,e);z3(t,r,null),U3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Kf(t,i)}catch(i){await su(i)}}async function lB(n,e,t){const r=Pt(n);try{const i=await function(c,h){const p=Pt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return p.mutationQueue.lookupMutationBatch(g,h).next(E=>(dt(E!==null,37113),w=E.keys(),p.mutationQueue.removeMutationBatch(g,E))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,w,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w)).next(()=>p.localDocuments.getDocuments(g,w))})}(r.localStore,e);z3(r,e,t),U3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Kf(r,i)}catch(i){await su(i)}}function U3(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function z3(n,e,t){const r=Pt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Fx(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||W3(n,r)})}function W3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Iv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Lv(n))}function YA(n,e,t){for(const r of t)r instanceof V3?(n.Ru.addReference(r.key,e),cB(n,r)):r instanceof F3?(Be(Mv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||W3(n,r.key)):rt(19791,{wu:r})}function cB(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Be(Mv,"New document in limbo: "+t),n.Eu.add(r),Lv(n))}function Lv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ke(fn.fromString(e)),r=n.fu.next();n.Au.set(r,new ZF(t)),n.du=n.du.insert(t,r),k3(n.remoteStore,new ba(Xs(Wf(t.path)),r,"TargetPurposeLimboResolution",qs.ce))}}async function Kf(n,e,t){const r=Pt(n),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach((h,p)=>{c.push(r.pu(p,e,t).then(g=>{var w;if((g||t)&&r.isPrimaryClient){const E=g?!g.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:w.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){i.push(g);const E=bv.As(p.targetId,g);o.push(E)}}))}),await Promise.all(c),r.Pu.H_(i),await async function(p,g){const w=Pt(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ye.forEach(g,T=>ye.forEach(T.Es,R=>w.persistence.referenceDelegate.addReference(E,T.targetId,R)).next(()=>ye.forEach(T.ds,R=>w.persistence.referenceDelegate.removeReference(E,T.targetId,R)))))}catch(E){if(!Hl(E))throw E;Be(Av,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const R=w.Ms.get(T),M=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(M);w.Ms=w.Ms.insert(T,D)}}}(r.localStore,o))}async function uB(n,e){const t=Pt(n);if(!t.currentUser.isEqual(e)){Be(Mv,"User change. New user:",e.toKey());const r=await T3(t.localStore,e);t.currentUser=e,function(o,c){o.mu.forEach(h=>{h.forEach(p=>{p.reject(new qe(Ce.CANCELLED,c))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Kf(t,r.Ls)}}function dB(n,e){const t=Pt(n),r=t.Au.get(e);if(r&&r.hu)return Bt().add(r.key);{let i=Bt();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const h=t.Tu.get(c);i=i.unionWith(h.view.nu)}return i}}function H3(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=j3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oB.bind(null,e),e.Pu.H_=KF.bind(null,e.eventManager),e.Pu.yu=XF.bind(null,e.eventManager),e}function G3(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lB.bind(null,e),e}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return I3(this.persistence,new A3,e.initialUser,this.serializer)}Cu(e){return new _v(ug.mi,this.serializer)}Du(e){return new S3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class hB extends wf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof vp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new w3(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new _v(r=>vp.mi(r,t),this.serializer)}}class fB extends wf{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await G3(this.xu.syncEngine),await qf(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return I3(this.persistence,new A3,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new w3(r,e.asyncQueue,t)}Mu(e,t){const r=new w7(t,this.persistence);return new x7(e.asyncQueue,r)}Cu(e){const t=fF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new Ev(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,SF(),Bm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new S3}}class Ep{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>XA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uB.bind(null,this.syncEngine),await GF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qF}()}createDatastore(e){const t=dg(e.databaseInfo.databaseId),r=function(o){return new CF(o)}(e.databaseInfo);return function(o,c,h,p){return new PF(o,c,h,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,c,h){return new OF(r,i,o,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>XA(this.syncEngine,t,0),function(){return WA.v()?new WA:new bF}())}createSyncEngine(e,t){return function(i,o,c,h,p,g,w){const E=new JF(i,o,c,h,p,g);return w&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Pt(i);Be(Yc,"RemoteStore shutting down."),o.Ea.add(5),await $f(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ep.provider={build:()=>new Ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl="FirestoreClient";class mB{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=tv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Be(Vl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Be(Vl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Nv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function by(n,e){n.asyncQueue.verifyOperationInProgress(),Be(Vl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await T3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function QA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await pB(n);Be(Vl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>GA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>GA(e.remoteStore,i)),n._onlineComponents=e}async function pB(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be(Vl,"Using user provided OfflineComponentProvider");try{await by(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Hc("Error using user provided cache. Falling back to memory cache: "+t),await by(n,new wf)}}else Be(Vl,"Using default OfflineComponentProvider"),await by(n,new hB(void 0));return n._offlineComponents}async function $3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be(Vl,"Using user provided OnlineComponentProvider"),await QA(n,n._uninitializedComponentsProvider._online)):(Be(Vl,"Using default OnlineComponentProvider"),await QA(n,new Ep))),n._onlineComponents}function gB(n){return $3(n).then(e=>e.syncEngine)}async function bp(n){const e=await $3(n),t=e.eventManager;return t.onListen=eB.bind(null,e.syncEngine),t.onUnlisten=rB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iB.bind(null,e.syncEngine),t}function yB(n,e,t={}){const r=new zo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,p,g){const w=new Vv({next:T=>{w.Nu(),c.enqueueAndForget(()=>Pv(o,E));const R=T.docs.has(h);!R&&T.fromCache?g.reject(new qe(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&p&&p.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Ov(Wf(h.path),w,{includeMetadataChanges:!0,qa:!0});return kv(o,E)}(await bp(n),n.asyncQueue,e,t,r)),r.promise}function xB(n,e,t={}){const r=new zo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,p,g){const w=new Vv({next:T=>{w.Nu(),c.enqueueAndForget(()=>Pv(o,E)),T.fromCache&&p.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Ov(h,w,{includeMetadataChanges:!0,qa:!0});return kv(o,E)}(await bp(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3="firestore.googleapis.com",JA=!0;class eI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K3,this.ssl=JA}else this.host=e.host,this.ssl=e.ssl??JA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=p3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YV)throw new qe(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q3(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i7;switch(r.type){case"firstParty":return new l7(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ZA.get(t);r&&(Be("ComponentProvider","Removing Datastore"),ZA.delete(t),r.terminate())}(this),Promise.resolve()}}function wB(n,e,t,r={}){var g;n=Ss(n,fg);const i=Wl(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(jw(`https://${h}`),Uw("Firestore",!0)),o.host!==K3&&o.host!==h&&Hc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...o,host:h,ssl:i,emulatorOptions:r};if(!jc(p,c)&&(n._setSettings(p),r.mockUserToken)){let w,E;if(typeof r.mockUserToken=="string")w=r.mockUserToken,E=gi.MOCK_USER;else{w=aS(r.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new qe(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new gi(T)}n._authCredentials=new s7(new eR(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $l(this.firestore,e,this._query)}}class kr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kr(this.firestore,e,this._key)}toJSON(){return{type:kr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(jf(t,kr._jsonSchema))return new kr(e,r||null,new Ke(fn.fromString(t.referencePath)))}}kr._jsonSchemaVersion="firestore/documentReference/1.0",kr._jsonSchema={type:Br("string",kr._jsonSchemaVersion),referencePath:Br("string")};class kl extends $l{constructor(e,t,r){super(e,t,Wf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kr(this.firestore,null,new Ke(e))}withConverter(e){return new kl(this.firestore,e,this._path)}}function Rs(n,e,...t){if(n=jr(n),nR("collection","path",e),n instanceof fg){const r=fn.fromString(e,...t);return Hb(r),new kl(n,null,r)}{if(!(n instanceof kr||n instanceof kl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return Hb(r),new kl(n.firestore,null,r)}}function Ks(n,e,...t){if(n=jr(n),arguments.length===1&&(e=tv.newId()),nR("doc","path",e),n instanceof fg){const r=fn.fromString(e,...t);return Wb(r),new kr(n,null,new Ke(r))}{if(!(n instanceof kr||n instanceof kl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return Wb(r),new kr(n.firestore,n instanceof kl?n.converter:null,new Ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="AsyncQueue";class nI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new R3(this,"async_queue_retry"),this._c=()=>{const r=Bm();r&&Be(tI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new zo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hl(e))throw e;Be(tI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ki("INTERNAL UNHANDLED ERROR: ",rI(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Rv.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&rt(47125,{Pc:rI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Pa extends fg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nI(e),this._firestoreClient=void 0,await e}}}function vB(n,e){const t=typeof n=="object"?n:Hw(),r=typeof n=="string"?n:hp,i=$p(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=iS("firestore");o&&wB(i,...o)}return i}function mg(n){if(n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||X3(n),n._firestoreClient}function X3(n){var r,i,o;const e=n._freezeSettings(),t=function(h,p,g,w){return new K7(h,p,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,q3(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new mB(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}function _B(n,e){Hc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return EB(n,Ep.provider,{build:r=>new fB(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function EB(n,e,t){if((n=Ss(n,Pa))._firestoreClient||n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new qe(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},X3(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $s(Ur.fromBase64String(e))}catch(t){throw new qe(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $s(Ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$s._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jf(e,$s._jsonSchema))return $s.fromBase64String(e.bytes)}}$s._jsonSchemaVersion="firestore/bytes/1.0",$s._jsonSchema={type:Br("string",$s._jsonSchemaVersion),bytes:Br("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wo._jsonSchemaVersion}}static fromJSON(e){if(jf(e,Wo._jsonSchema))return new Wo(e.latitude,e.longitude)}}Wo._jsonSchemaVersion="firestore/geoPoint/1.0",Wo._jsonSchema={type:Br("string",Wo._jsonSchemaVersion),latitude:Br("number"),longitude:Br("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ho._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jf(e,Ho._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Ho(e.vectorValues);throw new qe(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ho._jsonSchemaVersion="firestore/vectorValue/1.0",Ho._jsonSchema={type:Br("string",Ho._jsonSchemaVersion),vectorValues:Br("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=/^__.*__$/;class AB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ja(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vd(e,this.data,t,this.fieldTransforms)}}class Y3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ja(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Q3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:n})}}class Fv{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ap(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Q3(this.Ac)&&bB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class IB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dg(e)}Cc(e,t,r,i=!1){return new Fv({Ac:e,methodName:t,Dc:r,path:ar.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bv(n){const e=n._freezeSettings(),t=dg(n._databaseId);return new IB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TB(n,e,t,r,i,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Uv("Data must be an object, but it was:",c,r);const h=Z3(r,c);let p,g;if(o.merge)p=new ds(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const w=[];for(const E of o.mergeFields){const T=Bx(e,E,t);if(!c.contains(T))throw new qe(Ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);eN(w,T)||w.push(T)}p=new ds(w),g=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,g=c.fieldTransforms;return new AB(new Oi(h),p,g)}class yg extends gg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yg}}class jv extends gg{_toFieldTransform(e){return new $R(e.path,new _d)}isEqual(e){return e instanceof jv}}function CB(n,e,t,r){const i=n.Cc(1,e,t);Uv("Data must be an object, but it was:",i,r);const o=[],c=Oi.empty();Gl(r,(p,g)=>{const w=zv(e,p,t);g=jr(g);const E=i.yc(w);if(g instanceof yg)o.push(w);else{const T=Xf(g,E);T!=null&&(o.push(w),c.set(w,T))}});const h=new ds(o);return new Y3(c,h,i.fieldTransforms)}function SB(n,e,t,r,i,o){const c=n.Cc(1,e,t),h=[Bx(e,r,t)],p=[i];if(o.length%2!=0)throw new qe(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(Bx(e,o[T])),p.push(o[T+1]);const g=[],w=Oi.empty();for(let T=h.length-1;T>=0;--T)if(!eN(g,h[T])){const R=h[T];let M=p[T];M=jr(M);const D=c.yc(R);if(M instanceof yg)g.push(R);else{const L=Xf(M,D);L!=null&&(g.push(R),w.set(R,L))}}const E=new ds(g);return new Y3(w,E,c.fieldTransforms)}function RB(n,e,t,r=!1){return Xf(t,n.Cc(r?4:3,e))}function Xf(n,e){if(J3(n=jr(n)))return Uv("Unsupported field value:",e,n),Z3(n,e);if(n instanceof gg)return function(r,i){if(!Q3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const h of r){let p=Xf(h,i.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),o.push(p),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=jr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vn.fromDate(r);return{timestampValue:Ad(i.serializer,o)}}if(r instanceof vn){const o=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ad(i.serializer,o)}}if(r instanceof Wo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $s)return{bytesValue:JR(i.serializer,r._byteString)};if(r instanceof kr){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:yv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ho)return function(c,h){return{mapValue:{fields:{[cv]:{stringValue:uv},[yd]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return hv(h.serializer,g)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Xp(r)}`)}(n,e)}function Z3(n,e){const t={};return xR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gl(n,(r,i)=>{const o=Xf(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function J3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof Wo||n instanceof $s||n instanceof kr||n instanceof gg||n instanceof Ho)}function Uv(n,e,t){if(!J3(t)||!rR(t)){const r=Xp(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Bx(n,e,t){if((e=jr(e))instanceof pg)return e._internalPath;if(typeof e=="string")return zv(n,e);throw Ap("Field path arguments must be of type string or ",n,!1,void 0,t)}const NB=new RegExp("[~\\*/\\[\\]]");function zv(n,e,t){if(e.search(NB)>=0)throw Ap(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pg(...e.split("."))._internalPath}catch{throw Ap(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ap(n,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new qe(Ce.INVALID_ARGUMENT,h+n+p)}function eN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kB extends tN{data(){return super.data()}}function xg(n,e){return typeof e=="string"?zv(n,e):e instanceof pg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new qe(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wv{}class rN extends Wv{}function Fr(n,e,...t){let r=[];e instanceof Wv&&r.push(e),r=r.concat(t),function(o){const c=o.filter(p=>p instanceof Hv).length,h=o.filter(p=>p instanceof wg).length;if(c>1||c>0&&h>0)throw new qe(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class wg extends rN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new wg(e,t,r)}_apply(e){const t=this._parse(e);return iN(e._query,t),new $l(e.firestore,e.converter,Tx(e._query,t))}_parse(e){const t=Bv(e.firestore);return function(o,c,h,p,g,w,E){let T;if(g.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){aI(E,w);const M=[];for(const D of E)M.push(oI(p,o,D));T={arrayValue:{values:M}}}else T=oI(p,o,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||aI(E,w),T=RB(h,c,E,w==="in"||w==="not-in");return Yt.create(g,w,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nr(n,e,t){const r=e,i=xg("where",n);return wg._create(i,r,t)}class Hv extends Wv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let c=i;const h=o.getFlattenedFilters();for(const p of h)iN(c,p),c=Tx(c,p)}(e._query,t),new $l(e.firestore,e.converter,Tx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gv extends rN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gv(e,t)}_apply(e){const t=function(i,o,c){if(i.startAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yf(o,c)}(e._query,this._field,this._direction);return new $l(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new Ld(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function sI(n,e="asc"){const t=e,r=xg("orderBy",n);return Gv._create(r,t)}function oI(n,e,t){if(typeof(t=jr(t))=="string"){if(t==="")throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MR(e)&&t.indexOf("/")!==-1)throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ke.isDocumentKey(r))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pf(n,new Ke(r))}if(t instanceof kr)return pf(n,t._key);throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(t)}.`)}function aI(n,e){if(!Array.isArray(n)||n.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iN(n,e){const t=function(i,o){for(const c of i)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class PB{convertValue(e,t="none"){switch(Ol(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Gl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var r,i,o;const t=(o=(i=(r=e.fields)==null?void 0:r[yd].arrayValue)==null?void 0:i.values)==null?void 0:o.map(c=>er(c.doubleValue));return new Ho(t)}convertGeoPoint(e){return new Wo(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=tg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ff(e));default:return null}}convertTimestamp(e){const t=Na(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);dt(c3(r),9688,{name:e});const i=new Gc(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(t)||Ki(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DB(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Mh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mc extends tN{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mc._jsonSchema={type:Br("string",Mc._jsonSchemaVersion),bundleSource:Br("string","DocumentSnapshot"),bundleName:Br("string"),bundle:Br("string")};class jm extends Mc{data(e={}){return super.data(e)}}class Lc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Mh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jm(this._firestore,this._userDataWriter,r.key,r,new Mh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(h=>{const p=new jm(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Mh(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const p=new jm(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Mh(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,w=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),w=c.indexOf(h.doc.key)),{type:OB(h.type),doc:p,oldIndex:g,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n){n=Ss(n,kr);const e=Ss(n.firestore,Pa);return yB(mg(e),n._key).then(t=>sN(e,n,t))}Lc._jsonSchemaVersion="firestore/querySnapshot/1.0",Lc._jsonSchema={type:Br("string",Lc._jsonSchemaVersion),bundleSource:Br("string","QuerySnapshot"),bundleName:Br("string"),bundle:Br("string")};class qv extends PB{constructor(e){super(),this.firestore=e}convertBytes(e){return new $s(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kr(this.firestore,null,t)}}function vg(n){n=Ss(n,$l);const e=Ss(n.firestore,Pa),t=mg(e),r=new qv(e);return nN(n._query),xB(t,n._query).then(i=>new Lc(e,r,n,i))}function Ip(n,e,t,...r){n=Ss(n,kr);const i=Ss(n.firestore,Pa),o=Bv(i);let c;return c=typeof(e=jr(e))=="string"||e instanceof pg?SB(o,"updateDoc",n._key,e,t,r):CB(o,"updateDoc",n._key,e),Kv(i,[c.toMutation(n._key,Xi.exists(!0))])}function _g(n){return Kv(Ss(n.firestore,Pa),[new og(n._key,Xi.none())])}function Bd(n,e){const t=Ss(n.firestore,Pa),r=Ks(n),i=DB(n.converter,e);return Kv(t,[TB(Bv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Xi.exists(!1))]).then(()=>r)}function MB(n,...e){var p,g,w;n=jr(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||iI(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(iI(e[r])){const E=e[r];e[r]=(p=E.next)==null?void 0:p.bind(E),e[r+1]=(g=E.error)==null?void 0:g.bind(E),e[r+2]=(w=E.complete)==null?void 0:w.bind(E)}let o,c,h;if(n instanceof kr)c=Ss(n.firestore,Pa),h=Wf(n._key.path),o={next:E=>{e[r]&&e[r](sN(c,n,E))},error:e[r+1],complete:e[r+2]};else{const E=Ss(n,$l);c=Ss(E.firestore,Pa),h=E._query;const T=new qv(c);o={next:R=>{e[r]&&e[r](new Lc(c,T,E,R))},error:e[r+1],complete:e[r+2]},nN(n._query)}return function(T,R,M,D){const L=new Vv(D),H=new Ov(R,L,M);return T.asyncQueue.enqueueAndForget(async()=>kv(await bp(T),H)),()=>{L.Nu(),T.asyncQueue.enqueueAndForget(async()=>Pv(await bp(T),H))}}(mg(c),h,i,o)}function Kv(n,e){return function(r,i){const o=new zo;return r.asyncQueue.enqueueAndForget(async()=>sB(await gB(r),i,o)),o.promise}(mg(n),e)}function sN(n,e,t){const r=t.docs.get(e._key),i=new qv(n);return new Mc(n,i,e._key,r,new Mh(t.hasPendingWrites,t.fromCache),e.converter)}function mo(){return new jv("serverTimestamp")}(function(e,t=!0){(function(i){Md=i})(iu),Uc(new Dl("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),h=new Pa(new o7(r.getProvider("auth-internal")),new c7(c,r.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new qe(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(g.options.projectId,w)}(c,i),c);return o={useFetchStreams:t,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Bo(Bb,jb,e),Bo(Bb,jb,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="firebasestorage.googleapis.com",aN="storageBucket",LB=120*1e3,VB=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends na{constructor(e,t,r=0){super(Ay(e),`Firebase Storage: ${t} (${Ay(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ay(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wr||(wr={}));function Ay(n){return"storage/"+n}function Xv(){const n="An unknown error occurred, please check the error payload for server response.";return new vr(wr.UNKNOWN,n)}function FB(n){return new vr(wr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function BB(n){return new vr(wr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jB(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vr(wr.UNAUTHENTICATED,n)}function UB(){return new vr(wr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zB(n){return new vr(wr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function WB(){return new vr(wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HB(){return new vr(wr.CANCELED,"User canceled the upload/download.")}function GB(n){return new vr(wr.INVALID_URL,"Invalid URL '"+n+"'.")}function $B(n){return new vr(wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function qB(){return new vr(wr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aN+"' property when initializing the app?")}function KB(){return new vr(wr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XB(){return new vr(wr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function YB(n){return new vr(wr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function jx(n){return new vr(wr.INVALID_ARGUMENT,n)}function lN(){return new vr(wr.APP_DELETED,"The Firebase app was deleted.")}function QB(n){return new vr(wr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yh(n,e){return new vr(wr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Th(n){throw new vr(wr.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Cs.makeFromUrl(e,t)}catch{return new Cs(e,"")}if(r.path==="")return r;throw $B(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+i+c,"i"),p={bucket:1,path:3};function g(Q){Q.path_=decodeURIComponent(Q.path)}const w="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${w}/b/${i}/o${T}`,"i"),M={bucket:1,path:3},D=t===oN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",H=new RegExp(`^https?://${D}/${i}/${L}`,"i"),W=[{regex:h,indices:p,postModify:o},{regex:R,indices:M,postModify:g},{regex:H,indices:{bucket:1,path:2},postModify:g}];for(let Q=0;Q<W.length;Q++){const ie=W[Q],le=ie.regex.exec(e);if(le){const F=le[ie.indices.bucket];let B=le[ie.indices.path];B||(B=""),r=new Cs(F,B),ie.postModify(r);break}}if(r==null)throw GB(e);return r}}class ZB{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(n,e,t){let r=1,i=null,o=null,c=!1,h=0;function p(){return h===2}let g=!1;function w(...L){g||(g=!0,e.apply(null,L))}function E(L){i=setTimeout(()=>{i=null,n(R,p())},L)}function T(){o&&clearTimeout(o)}function R(L,...H){if(g){T();return}if(L){T(),w.call(null,L,...H);return}if(p()||c){T(),w.call(null,L,...H);return}r<64&&(r*=2);let W;h===1?(h=2,W=0):W=(r+Math.random())*1e3,E(W)}let M=!1;function D(L){M||(M=!0,T(),!g&&(i!==null?(L||(h=2),clearTimeout(i),E(0)):L||(h=1)))}return E(0),o=setTimeout(()=>{c=!0,D(!0)},t),D}function ej(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tj(n){return n!==void 0}function nj(n){return typeof n=="object"&&!Array.isArray(n)}function Yv(n){return typeof n=="string"||n instanceof String}function lI(n){return Qv()&&n instanceof Blob}function Qv(){return typeof Blob<"u"}function cI(n,e,t,r){if(r<e)throw jx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw jx(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function cN(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Vc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Vc||(Vc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,t,r,i,o,c,h,p,g,w,E,T=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=w,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,D)=>{this.resolve_=M,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new am(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const p=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===Vc.NO_ERROR,p=o.getStatus();if(!h||rj(p,this.additionalRetryCodes_)&&this.retry){const w=o.getErrorCode()===Vc.ABORT;r(!1,new am(!1,null,w));return}const g=this.successCodes_.indexOf(p)!==-1;r(!0,new am(g,o))})},t=(r,i)=>{const o=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());tj(p)?o(p):o()}catch(p){c(p)}else if(h!==null){const p=Xv();p.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,p)):c(p)}else if(i.canceled){const p=this.appDelete_?lN():HB();c(p)}else{const p=WB();c(p)}};this.canceled_?t(!1,new am(!1,null,!0)):this.backoffId_=JB(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ej(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class am{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function sj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function oj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function lj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function cj(n,e,t,r,i,o,c=!0,h=!1){const p=cN(n.urlParams),g=n.url+p,w=Object.assign({},n.headers);return aj(w,e),sj(w,t),oj(w,o),lj(w,r),new ij(g,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function dj(...n){const e=uj();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Qv())return new Blob(n);throw new vr(wr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function hj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(n){if(typeof atob>"u")throw YB("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Iy{constructor(e,t){this.data=e,this.contentType=t||null}}function mj(n,e){switch(n){case Vo.RAW:return new Iy(uN(e));case Vo.BASE64:case Vo.BASE64URL:return new Iy(dN(n,e));case Vo.DATA_URL:return new Iy(gj(e),yj(e))}throw Xv()}function uN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=n.charCodeAt(++t);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function pj(n){let e;try{e=decodeURIComponent(n)}catch{throw Yh(Vo.DATA_URL,"Malformed data URL.")}return uN(e)}function dN(n,e){switch(n){case Vo.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Yh(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vo.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Yh(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=fj(e)}catch(i){throw i.message.includes("polyfill")?i:Yh(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class hN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Yh(Vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=xj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gj(n){const e=new hN(n);return e.base64?dN(Vo.BASE64,e.rest):pj(e.rest)}function yj(n){return new hN(n).contentType}function xj(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){let r=0,i="";lI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(lI(this.data_)){const r=this.data_,i=hj(r,e,t);return i===null?null:new Il(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Il(r,!0)}}static getBlob(...e){if(Qv()){const t=e.map(r=>r instanceof Il?r.data_:r);return new Il(dj.apply(null,t))}else{const t=e.map(c=>Yv(c)?mj(Vo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[o++]=c[h]}),new Il(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(n){let e;try{e=JSON.parse(n)}catch{return null}return nj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function vj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function mN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(n,e){return e}class qi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||_j}}let lm=null;function Ej(n){return!Yv(n)||n.length<2?n:mN(n)}function pN(){if(lm)return lm;const n=[];n.push(new qi("bucket")),n.push(new qi("generation")),n.push(new qi("metageneration")),n.push(new qi("name","fullPath",!0));function e(o,c){return Ej(c)}const t=new qi("name");t.xform=e,n.push(t);function r(o,c){return c!==void 0?Number(c):c}const i=new qi("size");return i.xform=r,n.push(i),n.push(new qi("timeCreated")),n.push(new qi("updated")),n.push(new qi("md5Hash",null,!0)),n.push(new qi("cacheControl",null,!0)),n.push(new qi("contentDisposition",null,!0)),n.push(new qi("contentEncoding",null,!0)),n.push(new qi("contentLanguage",null,!0)),n.push(new qi("contentType",null,!0)),n.push(new qi("metadata","customMetadata",!0)),lm=n,lm}function bj(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new Cs(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Aj(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return bj(r,n),r}function gN(n,e,t){const r=fN(e);return r===null?null:Aj(n,r,t)}function Ij(n,e,t,r){const i=fN(e);if(i===null||!Yv(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const w=n.bucket,E=n.fullPath,T="/b/"+c(w)+"/o/"+c(E),R=Zv(T,t,r),M=cN({alt:"media",token:g});return R+M})[0]}function Tj(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class yN{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n){if(!n)throw Xv()}function Cj(n,e){function t(r,i){const o=gN(n,i,e);return xN(o!==null),o}return t}function Sj(n,e){function t(r,i){const o=gN(n,i,e);return xN(o!==null),Ij(o,i,n.host,n._protocol)}return t}function wN(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=UB():i=jB():t.getStatus()===402?i=BB(n.bucket):t.getStatus()===403?i=zB(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Rj(n){const e=wN(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=FB(n.path)),o.serverResponse=i.serverResponse,o}return t}function Nj(n,e,t){const r=e.fullServerUrl(),i=Zv(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,h=new yN(i,o,Sj(n,t),c);return h.errorHandler=Rj(e),h}function kj(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function Pj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=kj(null,e)),r}function Dj(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let W="";for(let Q=0;Q<2;Q++)W=W+Math.random().toString().slice(2);return W}const p=h();c["Content-Type"]="multipart/related; boundary="+p;const g=Pj(e,r,i),w=Tj(g,t),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+p+`\r
Content-Type: `+g.contentType+`\r
\r
`,T=`\r
--`+p+"--",R=Il.getBlob(E,r,T);if(R===null)throw KB();const M={name:g.fullPath},D=Zv(o,n.host,n._protocol),L="POST",H=n.maxUploadRetryTime,z=new yN(D,L,Cj(n,t),H);return z.urlParams=M,z.headers=c,z.body=R.uploadData(),z.errorHandler=wN(e),z}class Oj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Vc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Vc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Th("cannot .send() more than once");if(Wl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Th("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Th("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Th("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Th("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Mj extends Oj{initXhr(){this.xhr_.responseType="text"}}function vN(){return new Mj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t){this._service=e,t instanceof Cs?this._location=t:this._location=Cs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qc(e,t)}get root(){const e=new Cs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mN(this._location.path)}get storage(){return this._service}get parent(){const e=wj(this._location.path);if(e===null)return null;const t=new Cs(this._location.bucket,e);return new Qc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw QB(e)}}function Lj(n,e,t){n._throwIfRoot("uploadBytes");const r=Dj(n.storage,n._location,pN(),new Il(e,!0),t);return n.storage.makeRequestWithTokens(r,vN).then(i=>({metadata:i,ref:n}))}function Vj(n){n._throwIfRoot("getDownloadURL");const e=Nj(n.storage,n._location,pN());return n.storage.makeRequestWithTokens(e,vN).then(t=>{if(t===null)throw XB();return t})}function Fj(n,e){const t=vj(n._location.path,e),r=new Cs(n._location.bucket,t);return new Qc(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(n){return/^[A-Za-z]+:\/\//.test(n)}function jj(n,e){return new Qc(n,e)}function _N(n,e){if(n instanceof Jv){const t=n;if(t._bucket==null)throw qB();const r=new Qc(t,t._bucket);return e!=null?_N(r,e):r}else return e!==void 0?Fj(n,e):n}function Uj(n,e){if(e&&Bj(e)){if(n instanceof Jv)return jj(n,e);throw jx("To use ref(service, url), the first argument must be a Storage instance.")}else return _N(n,e)}function uI(n,e){const t=e==null?void 0:e[aN];return t==null?null:Cs.makeFromBucketSpec(t,n)}function zj(n,e,t,r={}){n.host=`${e}:${t}`;const i=Wl(e);i&&(jw(`https://${n.host}/b`),Uw("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:aS(o,n.app.options.projectId))}class Jv{constructor(e,t,r,i,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=oN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LB,this._maxUploadRetryTime=VB,this._requests=new Set,i!=null?this._bucket=Cs.makeFromBucketSpec(i,this._host):this._bucket=uI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cs.makeFromBucketSpec(this._url,e):this._bucket=uI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){cI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){cI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ho(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qc(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new ZB(lN());{const c=cj(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const dI="@firebase/storage",hI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="storage";function Wj(n,e,t){return n=jr(n),Lj(n,e,t)}function Hj(n){return n=jr(n),Vj(n)}function Gj(n,e){return n=jr(n),Uj(n,e)}function $j(n=Hw(),e){n=jr(n);const r=$p(n,EN).getImmediate({identifier:e}),i=iS("storage");return i&&qj(r,...i),r}function qj(n,e,t,r={}){zj(n,e,t,r)}function Kj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Jv(t,r,i,e,iu)}function Xj(){Uc(new Dl(EN,Kj,"PUBLIC").setMultipleInstances(!0)),Bo(dI,hI,""),Bo(dI,hI,"esm2020")}Xj();const fI={apiKey:"AIzaSyDkVAo_xXbBHy8FYwFtMQA66aju08qK_yE",authDomain:"hooked-69.firebaseapp.com",projectId:"hooked-69",storageBucket:"hooked-69.firebasestorage.app",messagingSenderId:"741889428835",appId:"1:741889428835:web:d5f88b43a503c9e6351756",measurementId:"G-6YHKXLN806"};let vf;try{vf=ux(fI),console.log(" Firebase app initialized successfully")}catch(n){console.error(" Failed to initialize Firebase app:",n);try{vf=ux(fI,"fallback-app"),console.log(" Firebase app initialized with fallback name")}catch(e){throw console.error(" Failed to initialize Firebase app with fallback:",e),new Error("Firebase initialization failed completely")}}n7(vf);const $n=vB(vf),Yj=$j(vf),Qj=async()=>{try{await _B($n,{synchronizeTabs:!0}),console.log(" Firestore offline persistence enabled")}catch(n){n.code==="failed-precondition"?console.warn(" Multiple tabs open, persistence can only be enabled in one tab at a time"):n.code==="unimplemented"?console.warn(" Browser doesn't support persistence"):console.error(" Error enabling Firestore persistence:",n)}};Qj();const Um={activeListeners:new Map,registerListener(n,e){this.activeListeners.set(n,e),console.log(` Registered listener: ${n} (total: ${this.activeListeners.size})`)},unregisterListener(n){const e=this.activeListeners.get(n);e&&(e(),this.activeListeners.delete(n),console.log(` Cleaned up listener: ${n} (remaining: ${this.activeListeners.size})`))},cleanupAllListeners(){console.log(` Cleaning up ${this.activeListeners.size} active listeners...`),this.activeListeners.forEach((n,e)=>{n(),console.log(` Cleaned up listener: ${e}`)}),this.activeListeners.clear(),console.log(" All listeners cleaned up")},getListenerCount(){return this.activeListeners.size}};typeof window<"u"&&(window.addEventListener("beforeunload",()=>{Um.cleanupAllListeners()}),document.addEventListener("visibilitychange",()=>{document.hidden&&console.log(" Tab hidden, listeners remain active for background updates")}));class Zj{constructor(){this.isOnline=navigator.onLine,this.retryQueue=[],this.maxRetries=3,this.baseDelay=1e3,this.offlineActions=new Map,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.checkConnectivity()}async checkConnectivity(){try{const e=await fetch("/favicon.png",{method:"HEAD",cache:"no-cache",timeout:5e3});this.isOnline=e.ok}catch{this.isOnline=!1}return this.isOnline=this.isOnline&&navigator.onLine,this.isOnline}async handleOnline(){console.log(" Device is back online"),this.isOnline=!0,await this.processOfflineQueue(),window.dispatchEvent(new CustomEvent("appOnline"))}handleOffline(){console.log(" Device is offline"),this.isOnline=!1,window.dispatchEvent(new CustomEvent("appOffline"))}async retryOperation(e,t={}){const{maxRetries:r=this.maxRetries,baseDelay:i=this.baseDelay,operationName:o="Unknown operation",shouldRetry:c=this.shouldRetryError,onRetry:h=null}=t;let p;for(let g=1;g<=r;g++)try{if(!await this.checkConnectivity())throw new Error("No internet connection");return await e()}catch(w){if(p=w,this.logError(w,{operation:o,attempt:g,maxRetries:r,isOnline:this.isOnline}),!c(w,g))throw w;if(g<r){const E=this.calculateDelay(g,i);console.log(` Retrying ${o} in ${Math.round(E)}ms (attempt ${g}/${r})`),h&&h(w,g,E),await this.sleep(E)}}throw p}shouldRetryError(e,t){return e.code==="permission-denied"||e.code==="not-found"||e.code==="invalid-argument"||e.code==="auth/user-not-found"||e.code==="auth/wrong-password"||e.code==="auth/invalid-email"?!1:e.code==="unavailable"||e.code==="deadline-exceeded"||e.message.includes("network")||e.message.includes("timeout")||e.message.includes("No internet connection")||e.code>=500}calculateDelay(e,t){const r=t*Math.pow(2,e-1),i=Math.random()*1e3;return Math.min(r+i,1e4)}queueOfflineAction(e,t={}){const r={id:Date.now()+Math.random(),action:e,metadata:t,timestamp:new Date().toISOString()};return this.retryQueue.push(r),this.saveOfflineQueue(),console.log(` Queued offline action: ${t.operation||"Unknown"}`),r.id}async processOfflineQueue(){if(this.retryQueue.length===0)return;console.log(` Processing ${this.retryQueue.length} queued actions`);const e=[...this.retryQueue];this.retryQueue=[];for(const t of e)try{await this.retryOperation(()=>t.action(),{operationName:`Offline action: ${t.metadata.operation||"Unknown"}`,maxRetries:2,baseDelay:2e3}),console.log(` Successfully processed offline action: ${t.metadata.operation||"Unknown"}`)}catch(r){console.error(" Failed to process offline action:",r),this.shouldRetryError(r,1)&&this.retryQueue.push(t)}this.saveOfflineQueue()}saveOfflineQueue(){try{localStorage.setItem("hooked_offline_queue",JSON.stringify(this.retryQueue))}catch(e){console.error("Failed to save offline queue:",e)}}loadOfflineQueue(){try{const e=localStorage.getItem("hooked_offline_queue");e&&(this.retryQueue=JSON.parse(e),console.log(` Loaded ${this.retryQueue.length} offline actions`))}catch(e){console.error("Failed to load offline queue:",e),this.retryQueue=[]}}getErrorMessage(e){if(!e)return"An unknown error occurred";if(e.message.includes("No internet connection")||e.code==="unavailable"||!navigator.onLine)return"No internet connection. Please check your network and try again.";switch(e.code){case"permission-denied":return"You don't have permission to perform this action.";case"not-found":return"The requested resource was not found.";case"already-exists":return"This resource already exists.";case"deadline-exceeded":return"The operation timed out. Please try again.";case"auth/user-not-found":return"User account not found.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-email":return"Invalid email address.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";default:return e.message||"An unexpected error occurred. Please try again."}}logError(e,t={}){const r={message:e.message,code:e.code,stack:e.stack,timestamp:new Date().toISOString(),isOnline:this.isOnline,userAgent:navigator.userAgent,url:window.location.href,...t};console.error(" Error occurred:",r)}reportError(e){}sleep(e){return new Promise(t=>setTimeout(t,e))}getOnlineStatus(){return this.isOnline}getOfflineQueueLength(){return this.retryQueue.length}clearOfflineQueue(){this.retryQueue=[],this.saveOfflineQueue()}}const Pl=new Zj;Pl.loadOfflineQueue();const bN=(n,e={})=>Pl.retryOperation(n,e),Jj=(n,e)=>Pl.queueOfflineAction(n,e),mI=n=>Pl.getErrorMessage(n),cm=()=>Pl.getOfflineQueueLength();async function xr(n,e=3,t=1e3,r="Firebase operation"){return bN(n,{maxRetries:e,baseDelay:t,operationName:r})}const Ty={async compressImage(n,e=800,t=.8){return new Promise(r=>{const i=document.createElement("canvas"),o=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:h,height:p}=c;h>e&&(p=p*e/h,h=e),i.width=h,i.height=p,o.drawImage(c,0,0,h,p),i.toBlob(r,"image/jpeg",t)},c.src=URL.createObjectURL(n)})},generateOptimizedFilename(n){const e=Date.now(),t=n.split(".").pop()||"jpg";return`optimized_${e}.${t}`},validateFile(n,e=5){const t=["image/jpeg","image/jpg","image/png","image/webp"],r=e*1024*1024;if(!t.includes(n.type))throw new Error("Invalid file type. Please upload a JPEG, PNG, or WebP image.");if(n.size>r)throw new Error(`File too large. Maximum size is ${e}MB.`);return!0}};class eU{constructor(){this.listeners=new Map,this.listenerCounts=new Map}createListener(e,t,r,i={}){this.cleanupListener(e);const o=MB(t,h=>{const p=h.docs.map(g=>({id:g.id,...g.data()}));r(p)},h=>{console.error(` Listener error for ${e}:`,h),i.onError&&i.onError(h)});Um.registerListener(e,o),this.listeners.set(e,o);const c=this.listenerCounts.get(e)||0;return this.listenerCounts.set(e,c+1),console.log(` Created listener: ${e} (count: ${c+1})`),o}cleanupListener(e){const t=this.listeners.get(e);t&&(t(),this.listeners.delete(e),Um.unregisterListener(e),console.log(` Cleaned up listener: ${e}`))}cleanupAll(){this.listeners.forEach((e,t)=>{e(),Um.unregisterListener(t)}),this.listeners.clear(),this.listenerCounts.clear(),console.log(" All listeners cleaned up")}getStats(){return{activeListeners:this.listeners.size,listenerCounts:Object.fromEntries(this.listenerCounts)}}}const e2=new eU,Eg={async create(n){return await xr(async()=>({id:(await Bd(Rs($n,"events"),{...n,created_at:mo(),updated_at:mo()})).id,...n}),3,1e3,"Event.create")},async filter(n={}){return await xr(async()=>{let e=Rs($n,"events");return n.id&&(e=Fr(e,Nr("id","==",n.id))),n.event_code&&(e=Fr(e,Nr("event_code","==",n.event_code))),n.starts_at&&(e=Fr(e,Nr("starts_at",">=",n.starts_at))),n.expires_at&&(e=Fr(e,Nr("expires_at","<=",n.expires_at))),(await vg(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Event.filter")},async get(n){return await xr(async()=>{const e=Ks($n,"events",n),t=await $v(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Event.get")},async update(n,e){return await xr(async()=>{const t=Ks($n,"events",n);await Ip(t,{...e,updated_at:mo()})},3,1e3,"Event.update")},async delete(n){return await xr(async()=>{const e=Ks($n,"events",n);await _g(e)},3,1e3,"Event.delete")},async list(){return await this.filter()}},Gs={async create(n){return await xr(async()=>({id:(await Bd(Rs($n,"event_profiles"),{...n,created_at:mo(),updated_at:mo()})).id,...n}),3,1e3,"EventProfile.create")},async filter(n={}){return await xr(async()=>{let e=Rs($n,"event_profiles");return n.event_id&&(e=Fr(e,Nr("event_id","==",n.event_id))),n.session_id&&(e=Fr(e,Nr("session_id","==",n.session_id))),n.email&&(e=Fr(e,Nr("email","==",n.email))),n.is_visible!==void 0&&(e=Fr(e,Nr("is_visible","==",n.is_visible))),(await vg(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"EventProfile.filter")},async get(n){return await xr(async()=>{const e=Ks($n,"event_profiles",n),t=await $v(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"EventProfile.get")},async update(n,e){return await xr(async()=>{const t=Ks($n,"event_profiles",n);await Ip(t,{...e,updated_at:mo()})},3,1e3,"EventProfile.update")},async delete(n){return await xr(async()=>{const e=Ks($n,"event_profiles",n);await _g(e)},3,1e3,"EventProfile.delete")},async toggleVisibility(n,e){return await xr(async()=>{const t=Ks($n,"event_profiles",n);await Ip(t,{is_visible:e,updated_at:mo()})},3,1e3,"EventProfile.toggleVisibility")},async list(){return await this.filter()},onProfilesChange(n,e,t={}){let r=Fr(Rs($n,"event_profiles"),Nr("event_id","==",n));t.is_visible!==void 0&&(r=Fr(r,Nr("is_visible","==",t.is_visible)));const i=`profiles_${n}_${JSON.stringify(t)}`;return e2.createListener(i,r,e)}},us={async create(n){return await xr(async()=>({id:(await Bd(Rs($n,"likes"),{...n,created_at:mo()})).id,...n}),3,1e3,"Like.create")},async filter(n={}){return await xr(async()=>{let e=Rs($n,"likes");return n.event_id&&(e=Fr(e,Nr("event_id","==",n.event_id))),n.from_profile_id&&(e=Fr(e,Nr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Fr(e,Nr("to_profile_id","==",n.to_profile_id))),n.is_mutual!==void 0&&(e=Fr(e,Nr("is_mutual","==",n.is_mutual))),(await vg(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Like.filter")},async get(n){return await xr(async()=>{const e=Ks($n,"likes",n),t=await $v(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Like.get")},async update(n,e){return await xr(async()=>{const t=Ks($n,"likes",n);await Ip(t,e)},3,1e3,"Like.update")},async delete(n){return await xr(async()=>{const e=Ks($n,"likes",n);await _g(e)},3,1e3,"Like.delete")},async list(){return await this.filter()},onLikesChange(n,e,t){const r=Fr(Rs($n,"likes"),Nr("event_id","==",n),Nr("liker_session_id","==",e)),i=`likes_${n}_${e}`;return e2.createListener(i,r,t)}},Sc={async create(n){return await xr(async()=>({id:(await Bd(Rs($n,"messages"),{...n,created_at:mo()})).id,...n}),3,1e3,"Message.create")},async filter(n={}){return await xr(async()=>{let e=Rs($n,"messages");return n.event_id&&(e=Fr(e,Nr("event_id","==",n.event_id))),n.from_profile_id&&(e=Fr(e,Nr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Fr(e,Nr("to_profile_id","==",n.to_profile_id))),e=Fr(e,sI("created_at","desc")),(await vg(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Message.filter")},async delete(n){return await xr(async()=>{const e=Ks($n,"messages",n);await _g(e)},3,1e3,"Message.delete")},async list(){return await this.filter()},onMessagesChange(n,e,t){const r=Fr(Rs($n,"messages"),Nr("event_id","==",n),Nr("from_profile_id","==",e),sI("created_at","asc")),i=`messages_${n}_${e}`;return e2.createListener(i,r,t)}},Cy={async create(n){return await xr(async()=>({id:(await Bd(Rs($n,"contact_shares"),{...n,created_at:mo()})).id,...n}),3,1e3,"ContactShare.create")},async list(){return await this.filter()}},tU={async create(n){return await xr(async()=>({id:(await Bd(Rs($n,"event_feedback"),{...n,created_at:mo()})).id,...n}),3,1e3,"EventFeedback.create")},async list(){return await this.filter()}},nU=async(n,e={})=>await xr(async()=>{Ty.validateFile(n,e.maxSizeMB||5);let t=n;if(n.type.startsWith("image/"))try{const h=await Ty.compressImage(n,e.maxWidth||800,e.quality||.8);t=new File([h],n.name,{type:"image/jpeg"}),console.log(" Image compressed successfully")}catch(h){console.warn(" Image compression failed, uploading original:",h)}const r=Ty.generateOptimizedFilename(n.name),i=Gj(Yj,`uploads/${Date.now()}_${r}`),o=await Wj(i,t),c=await Hj(o.ref);return console.log(" File uploaded successfully:",{originalSize:n.size,uploadedSize:t.size,compressionRatio:((n.size-t.size)/n.size*100).toFixed(1)+"%"}),{file_url:c}},3,1e3,"uploadFile");function pI(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function AN(...n){return e=>{let t=!1;const r=n.map(i=>{const o=pI(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():pI(n[i],null)}}}}function bn(...n){return P.useCallback(AN(...n),n)}function Td(n){const e=iU(n),t=P.forwardRef((r,i)=>{const{children:o,...c}=r,h=P.Children.toArray(o),p=h.find(oU);if(p){const g=p.props.children,w=h.map(E=>E===p?P.Children.count(g)>1?P.Children.only(null):P.isValidElement(g)?g.props.children:null:E);return A.jsx(e,{...c,ref:i,children:P.isValidElement(g)?P.cloneElement(g,void 0,w):null})}return A.jsx(e,{...c,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var rU=Td("Slot");function iU(n){const e=P.forwardRef((t,r)=>{const{children:i,...o}=t;if(P.isValidElement(i)){const c=lU(i),h=aU(o,i.props);return i.type!==P.Fragment&&(h.ref=r?AN(r,c):c),P.cloneElement(i,h)}return P.Children.count(i)>1?P.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var sU=Symbol("radix.slottable");function oU(n){return P.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===sU}function aU(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...h)=>{const p=o(...h);return i(...h),p}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function lU(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function IN(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=IN(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function TN(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=IN(n))&&(r&&(r+=" "),r+=e);return r}const gI=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,yI=TN,bg=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return yI(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:o}=e,c=Object.keys(i).map(g=>{const w=t==null?void 0:t[g],E=o==null?void 0:o[g];if(w===null)return null;const T=gI(w)||gI(E);return i[g][T]}),h=t&&Object.entries(t).reduce((g,w)=>{let[E,T]=w;return T===void 0||(g[E]=T),g},{}),p=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((g,w)=>{let{class:E,className:T,...R}=w;return Object.entries(R).every(M=>{let[D,L]=M;return Array.isArray(L)?L.includes({...o,...h}[D]):{...o,...h}[D]===L})?[...g,E,T]:g},[]);return yI(n,c,p,t==null?void 0:t.class,t==null?void 0:t.className)},t2="-",cU=n=>{const e=dU(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const h=c.split(t2);return h[0]===""&&h.length!==1&&h.shift(),CN(h,e)||uU(c)},getConflictingClassGroupIds:(c,h)=>{const p=t[c]||[];return h&&r[c]?[...p,...r[c]]:p}}},CN=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?CN(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(t2);return(c=e.validators.find(({validator:h})=>h(o)))==null?void 0:c.classGroupId},xI=/^\[(.+)\]$/,uU=n=>{if(xI.test(n)){const e=xI.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},dU=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)Ux(t[i],r,i,e);return r},Ux=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:wI(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(hU(i)){Ux(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,c])=>{Ux(c,wI(e,o),t,r)})})},wI=(n,e)=>{let t=n;return e.split(t2).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},hU=n=>n.isThemeGetter,fU=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){t.has(o)?t.set(o,c):i(o,c)}}},zx="!",Wx=":",mU=Wx.length,pU=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let c=0,h=0,p=0,g;for(let M=0;M<i.length;M++){let D=i[M];if(c===0&&h===0){if(D===Wx){o.push(i.slice(p,M)),p=M+mU;continue}if(D==="/"){g=M;continue}}D==="["?c++:D==="]"?c--:D==="("?h++:D===")"&&h--}const w=o.length===0?i:i.substring(p),E=gU(w),T=E!==w,R=g&&g>p?g-p:void 0;return{modifiers:o,hasImportantModifier:T,baseClassName:E,maybePostfixModifierPosition:R}};if(e){const i=e+Wx,o=r;r=c=>c.startsWith(i)?o(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},gU=n=>n.endsWith(zx)?n.substring(0,n.length-1):n.startsWith(zx)?n.substring(1):n,yU=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(c=>{c[0]==="["||e[c]?(i.push(...o.sort(),c),o=[]):o.push(c)}),i.push(...o.sort()),i}},xU=n=>({cache:fU(n.cacheSize),parseClassName:pU(n),sortModifiers:yU(n),...cU(n)}),wU=/\s+/,vU=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,c=[],h=n.trim().split(wU);let p="";for(let g=h.length-1;g>=0;g-=1){const w=h[g],{isExternal:E,modifiers:T,hasImportantModifier:R,baseClassName:M,maybePostfixModifierPosition:D}=t(w);if(E){p=w+(p.length>0?" "+p:p);continue}let L=!!D,H=r(L?M.substring(0,D):M);if(!H){if(!L){p=w+(p.length>0?" "+p:p);continue}if(H=r(M),!H){p=w+(p.length>0?" "+p:p);continue}L=!1}const z=o(T).join(":"),W=R?z+zx:z,Q=W+H;if(c.includes(Q))continue;c.push(Q);const ie=i(H,L);for(let le=0;le<ie.length;++le){const F=ie[le];c.push(W+F)}p=w+(p.length>0?" "+p:p)}return p};function _U(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=SN(e))&&(r&&(r+=" "),r+=t);return r}const SN=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=SN(n[r]))&&(t&&(t+=" "),t+=e);return t};function EU(n,...e){let t,r,i,o=c;function c(p){const g=e.reduce((w,E)=>E(w),n());return t=xU(g),r=t.cache.get,i=t.cache.set,o=h,h(p)}function h(p){const g=r(p);if(g)return g;const w=vU(p,t);return i(p,w),w}return function(){return o(_U.apply(null,arguments))}}const Xr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},RN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,NN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bU=/^\d+\/\d+$/,AU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,CU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,SU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vu=n=>bU.test(n),Ft=n=>!!n&&!Number.isNaN(Number(n)),pl=n=>!!n&&Number.isInteger(Number(n)),Sy=n=>n.endsWith("%")&&Ft(n.slice(0,-1)),wa=n=>AU.test(n),RU=()=>!0,NU=n=>IU.test(n)&&!TU.test(n),kN=()=>!1,kU=n=>CU.test(n),PU=n=>SU.test(n),DU=n=>!tt(n)&&!nt(n),OU=n=>jd(n,ON,kN),tt=n=>RN.test(n),pc=n=>jd(n,MN,NU),Ry=n=>jd(n,BU,Ft),vI=n=>jd(n,PN,kN),MU=n=>jd(n,DN,PU),um=n=>jd(n,LN,kU),nt=n=>NN.test(n),Ch=n=>Ud(n,MN),LU=n=>Ud(n,jU),_I=n=>Ud(n,PN),VU=n=>Ud(n,ON),FU=n=>Ud(n,DN),dm=n=>Ud(n,LN,!0),jd=(n,e,t)=>{const r=RN.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Ud=(n,e,t=!1)=>{const r=NN.exec(n);return r?r[1]?e(r[1]):t:!1},PN=n=>n==="position"||n==="percentage",DN=n=>n==="image"||n==="url",ON=n=>n==="length"||n==="size"||n==="bg-size",MN=n=>n==="length",BU=n=>n==="number",jU=n=>n==="family-name",LN=n=>n==="shadow",UU=()=>{const n=Xr("color"),e=Xr("font"),t=Xr("text"),r=Xr("font-weight"),i=Xr("tracking"),o=Xr("leading"),c=Xr("breakpoint"),h=Xr("container"),p=Xr("spacing"),g=Xr("radius"),w=Xr("shadow"),E=Xr("inset-shadow"),T=Xr("text-shadow"),R=Xr("drop-shadow"),M=Xr("blur"),D=Xr("perspective"),L=Xr("aspect"),H=Xr("ease"),z=Xr("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ie=()=>[...Q(),nt,tt],le=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],B=()=>[nt,tt,p],G=()=>[Vu,"full","auto",...B()],J=()=>[pl,"none","subgrid",nt,tt],te=()=>["auto",{span:["full",pl,nt,tt]},pl,nt,tt],X=()=>[pl,"auto",nt,tt],q=()=>["auto","min","max","fr",nt,tt],pe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],Ie=()=>["auto",...B()],we=()=>[Vu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],se=()=>[n,nt,tt],Te=()=>[...Q(),_I,vI,{position:[nt,tt]}],Ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],oe=()=>["auto","cover","contain",VU,OU,{size:[nt,tt]}],he=()=>[Sy,Ch,pc],Se=()=>["","none","full",g,nt,tt],Le=()=>["",Ft,Ch,pc],it=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Ft,Sy,_I,vI],Ge=()=>["","none",M,nt,tt],at=()=>["none",Ft,nt,tt],st=()=>["none",Ft,nt,tt],ct=()=>[Ft,nt,tt],Et=()=>[Vu,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wa],breakpoint:[wa],color:[RU],container:[wa],"drop-shadow":[wa],ease:["in","out","in-out"],font:[DU],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wa],shadow:[wa],spacing:["px",Ft],text:[wa],"text-shadow":[wa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vu,tt,nt,L]}],container:["container"],columns:[{columns:[Ft,tt,nt,h]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ie()}],overflow:[{overflow:le()}],"overflow-x":[{"overflow-x":le()}],"overflow-y":[{"overflow-y":le()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[pl,"auto",nt,tt]}],basis:[{basis:[Vu,"full","auto",h,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ft,Vu,"auto","initial","none",tt]}],grow:[{grow:["",Ft,nt,tt]}],shrink:[{shrink:["",Ft,nt,tt]}],order:[{order:[pl,"first","last","none",nt,tt]}],"grid-cols":[{"grid-cols":J()}],"col-start-end":[{col:te()}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":J()}],"row-start-end":[{row:te()}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...pe(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...pe()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":pe()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:Ie()}],mx:[{mx:Ie()}],my:[{my:Ie()}],ms:[{ms:Ie()}],me:[{me:Ie()}],mt:[{mt:Ie()}],mr:[{mr:Ie()}],mb:[{mb:Ie()}],ml:[{ml:Ie()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:we()}],w:[{w:[h,"screen",...we()]}],"min-w":[{"min-w":[h,"screen","none",...we()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...we()]}],h:[{h:["screen","lh",...we()]}],"min-h":[{"min-h":["screen","lh","none",...we()]}],"max-h":[{"max-h":["screen","lh",...we()]}],"font-size":[{text:["base",t,Ch,pc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,nt,Ry]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sy,tt]}],"font-family":[{font:[LU,tt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,nt,tt]}],"line-clamp":[{"line-clamp":[Ft,"none",nt,Ry]}],leading:[{leading:[o,...B()]}],"list-image":[{"list-image":["none",nt,tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nt,tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:se()}],"text-color":[{text:se()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...it(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ft,"from-font","auto",nt,pc]}],"text-decoration-color":[{decoration:se()}],"underline-offset":[{"underline-offset":[Ft,"auto",nt,tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt,tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt,tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Te()}],"bg-repeat":[{bg:Ne()}],"bg-size":[{bg:oe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},pl,nt,tt],radial:["",nt,tt],conic:[pl,nt,tt]},FU,MU]}],"bg-color":[{bg:se()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:se()}],"gradient-via":[{via:se()}],"gradient-to":[{to:se()}],rounded:[{rounded:Se()}],"rounded-s":[{"rounded-s":Se()}],"rounded-e":[{"rounded-e":Se()}],"rounded-t":[{"rounded-t":Se()}],"rounded-r":[{"rounded-r":Se()}],"rounded-b":[{"rounded-b":Se()}],"rounded-l":[{"rounded-l":Se()}],"rounded-ss":[{"rounded-ss":Se()}],"rounded-se":[{"rounded-se":Se()}],"rounded-ee":[{"rounded-ee":Se()}],"rounded-es":[{"rounded-es":Se()}],"rounded-tl":[{"rounded-tl":Se()}],"rounded-tr":[{"rounded-tr":Se()}],"rounded-br":[{"rounded-br":Se()}],"rounded-bl":[{"rounded-bl":Se()}],"border-w":[{border:Le()}],"border-w-x":[{"border-x":Le()}],"border-w-y":[{"border-y":Le()}],"border-w-s":[{"border-s":Le()}],"border-w-e":[{"border-e":Le()}],"border-w-t":[{"border-t":Le()}],"border-w-r":[{"border-r":Le()}],"border-w-b":[{"border-b":Le()}],"border-w-l":[{"border-l":Le()}],"divide-x":[{"divide-x":Le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...it(),"hidden","none"]}],"divide-style":[{divide:[...it(),"hidden","none"]}],"border-color":[{border:se()}],"border-color-x":[{"border-x":se()}],"border-color-y":[{"border-y":se()}],"border-color-s":[{"border-s":se()}],"border-color-e":[{"border-e":se()}],"border-color-t":[{"border-t":se()}],"border-color-r":[{"border-r":se()}],"border-color-b":[{"border-b":se()}],"border-color-l":[{"border-l":se()}],"divide-color":[{divide:se()}],"outline-style":[{outline:[...it(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ft,nt,tt]}],"outline-w":[{outline:["",Ft,Ch,pc]}],"outline-color":[{outline:se()}],shadow:[{shadow:["","none",w,dm,um]}],"shadow-color":[{shadow:se()}],"inset-shadow":[{"inset-shadow":["none",E,dm,um]}],"inset-shadow-color":[{"inset-shadow":se()}],"ring-w":[{ring:Le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:se()}],"ring-offset-w":[{"ring-offset":[Ft,pc]}],"ring-offset-color":[{"ring-offset":se()}],"inset-ring-w":[{"inset-ring":Le()}],"inset-ring-color":[{"inset-ring":se()}],"text-shadow":[{"text-shadow":["none",T,dm,um]}],"text-shadow-color":[{"text-shadow":se()}],opacity:[{opacity:[Ft,nt,tt]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ft]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":se()}],"mask-image-linear-to-color":[{"mask-linear-to":se()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":se()}],"mask-image-t-to-color":[{"mask-t-to":se()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":se()}],"mask-image-r-to-color":[{"mask-r-to":se()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":se()}],"mask-image-b-to-color":[{"mask-b-to":se()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":se()}],"mask-image-l-to-color":[{"mask-l-to":se()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":se()}],"mask-image-x-to-color":[{"mask-x-to":se()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":se()}],"mask-image-y-to-color":[{"mask-y-to":se()}],"mask-image-radial":[{"mask-radial":[nt,tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":se()}],"mask-image-radial-to-color":[{"mask-radial-to":se()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Q()}],"mask-image-conic-pos":[{"mask-conic":[Ft]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":se()}],"mask-image-conic-to-color":[{"mask-conic-to":se()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Te()}],"mask-repeat":[{mask:Ne()}],"mask-size":[{mask:oe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nt,tt]}],filter:[{filter:["","none",nt,tt]}],blur:[{blur:Ge()}],brightness:[{brightness:[Ft,nt,tt]}],contrast:[{contrast:[Ft,nt,tt]}],"drop-shadow":[{"drop-shadow":["","none",R,dm,um]}],"drop-shadow-color":[{"drop-shadow":se()}],grayscale:[{grayscale:["",Ft,nt,tt]}],"hue-rotate":[{"hue-rotate":[Ft,nt,tt]}],invert:[{invert:["",Ft,nt,tt]}],saturate:[{saturate:[Ft,nt,tt]}],sepia:[{sepia:["",Ft,nt,tt]}],"backdrop-filter":[{"backdrop-filter":["","none",nt,tt]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[Ft,nt,tt]}],"backdrop-contrast":[{"backdrop-contrast":[Ft,nt,tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ft,nt,tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ft,nt,tt]}],"backdrop-invert":[{"backdrop-invert":["",Ft,nt,tt]}],"backdrop-opacity":[{"backdrop-opacity":[Ft,nt,tt]}],"backdrop-saturate":[{"backdrop-saturate":[Ft,nt,tt]}],"backdrop-sepia":[{"backdrop-sepia":["",Ft,nt,tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nt,tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ft,"initial",nt,tt]}],ease:[{ease:["linear","initial",H,nt,tt]}],delay:[{delay:[Ft,nt,tt]}],animate:[{animate:["none",z,nt,tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,nt,tt]}],"perspective-origin":[{"perspective-origin":ie()}],rotate:[{rotate:at()}],"rotate-x":[{"rotate-x":at()}],"rotate-y":[{"rotate-y":at()}],"rotate-z":[{"rotate-z":at()}],scale:[{scale:st()}],"scale-x":[{"scale-x":st()}],"scale-y":[{"scale-y":st()}],"scale-z":[{"scale-z":st()}],"scale-3d":["scale-3d"],skew:[{skew:ct()}],"skew-x":[{"skew-x":ct()}],"skew-y":[{"skew-y":ct()}],transform:[{transform:[nt,tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:ie()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Et()}],"translate-x":[{"translate-x":Et()}],"translate-y":[{"translate-y":Et()}],"translate-z":[{"translate-z":Et()}],"translate-none":["translate-none"],accent:[{accent:se()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:se()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt,tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt,tt]}],fill:[{fill:["none",...se()]}],"stroke-w":[{stroke:[Ft,Ch,pc,Ry]}],stroke:[{stroke:["none",...se()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},zU=EU(UU);function ln(...n){return zU(TN(n))}const WU=bg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Dt=P.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const c=r?rU:"button";return A.jsx(c,{className:ln(WU({variant:e,size:t,className:n})),ref:o,...i})});Dt.displayName="Button";const n2=P.createContext({});function r2(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const i2=typeof window<"u",VN=i2?P.useLayoutEffect:P.useEffect,Ag=P.createContext(null);function s2(n,e){n.indexOf(e)===-1&&n.push(e)}function o2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Da=(n,e,t)=>t>e?e:t<n?n:t;let a2=()=>{};const Oa={},FN=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function BN(n){return typeof n=="object"&&n!==null}const jN=n=>/^0[^.\s]+$/u.test(n);function l2(n){let e;return()=>(e===void 0&&(e=n()),e)}const Ys=n=>n,HU=(n,e)=>t=>e(n(t)),Yf=(...n)=>n.reduce(HU),_f=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class c2{constructor(){this.subscriptions=[]}add(e){return s2(this.subscriptions,e),()=>o2(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Go=n=>n*1e3,$o=n=>n/1e3;function UN(n,e){return e?n*(1e3/e):0}const zN=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,GU=1e-7,$U=12;function qU(n,e,t,r,i){let o,c,h=0;do c=e+(t-e)/2,o=zN(c,r,i)-n,o>0?t=c:e=c;while(Math.abs(o)>GU&&++h<$U);return c}function Qf(n,e,t,r){if(n===e&&t===r)return Ys;const i=o=>qU(o,0,1,n,t);return o=>o===0||o===1?o:zN(i(o),e,r)}const WN=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,HN=n=>e=>1-n(1-e),GN=Qf(.33,1.53,.69,.99),u2=HN(GN),$N=WN(u2),qN=n=>(n*=2)<1?.5*u2(n):.5*(2-Math.pow(2,-10*(n-1))),d2=n=>1-Math.sin(Math.acos(n)),KN=HN(d2),XN=WN(d2),KU=Qf(.42,0,1,1),XU=Qf(0,0,.58,1),YN=Qf(.42,0,.58,1),YU=n=>Array.isArray(n)&&typeof n[0]!="number",QN=n=>Array.isArray(n)&&typeof n[0]=="number",QU={linear:Ys,easeIn:KU,easeInOut:YN,easeOut:XU,circIn:d2,circInOut:XN,circOut:KN,backIn:u2,backInOut:$N,backOut:GN,anticipate:qN},ZU=n=>typeof n=="string",EI=n=>{if(QN(n)){a2(n.length===4);const[e,t,r,i]=n;return Qf(e,t,r,i)}else if(ZU(n))return QU[n];return n},hm=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function JU(n,e){let t=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function p(w){c.has(w)&&(g.schedule(w),n()),w(h)}const g={schedule:(w,E=!1,T=!1)=>{const M=T&&i?t:r;return E&&c.add(w),M.has(w)||M.add(w),w},cancel:w=>{r.delete(w),c.delete(w)},process:w=>{if(h=w,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(p),t.clear(),i=!1,o&&(o=!1,g.process(w))}};return g}const ez=40;function ZN(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,c=hm.reduce((W,Q)=>(W[Q]=JU(o),W),{}),{setup:h,read:p,resolveKeyframes:g,preUpdate:w,update:E,preRender:T,render:R,postRender:M}=c,D=()=>{const W=Oa.useManualTiming?i.timestamp:performance.now();t=!1,Oa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(W-i.timestamp,ez),1)),i.timestamp=W,i.isProcessing=!0,h.process(i),p.process(i),g.process(i),w.process(i),E.process(i),T.process(i),R.process(i),M.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(D))},L=()=>{t=!0,r=!0,i.isProcessing||n(D)};return{schedule:hm.reduce((W,Q)=>{const ie=c[Q];return W[Q]=(le,F=!1,B=!1)=>(t||L(),ie.schedule(le,F,B)),W},{}),cancel:W=>{for(let Q=0;Q<hm.length;Q++)c[hm[Q]].cancel(W)},state:i,steps:c}}const{schedule:tr,cancel:Fl,state:pi,steps:Ny}=ZN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ys,!0);let zm;function tz(){zm=void 0}const hs={now:()=>(zm===void 0&&hs.set(pi.isProcessing||Oa.useManualTiming?pi.timestamp:performance.now()),zm),set:n=>{zm=n,queueMicrotask(tz)}},JN=n=>e=>typeof e=="string"&&e.startsWith(n),h2=JN("--"),nz=JN("var(--"),f2=n=>nz(n)?rz.test(n.split("/*")[0].trim()):!1,rz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ef={...zd,transform:n=>Da(0,1,n)},fm={...zd,default:1},Qh=n=>Math.round(n*1e5)/1e5,m2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iz(n){return n==null}const sz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,p2=(n,e)=>t=>!!(typeof t=="string"&&sz.test(t)&&t.startsWith(n)||e&&!iz(t)&&Object.prototype.hasOwnProperty.call(t,e)),ek=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,c,h]=r.match(m2);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},oz=n=>Da(0,255,n),ky={...zd,transform:n=>Math.round(oz(n))},Rc={test:p2("rgb","red"),parse:ek("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+ky.transform(n)+", "+ky.transform(e)+", "+ky.transform(t)+", "+Qh(Ef.transform(r))+")"};function az(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Hx={test:p2("#"),parse:az,transform:Rc.transform},Zf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),xl=Zf("deg"),qo=Zf("%"),At=Zf("px"),lz=Zf("vh"),cz=Zf("vw"),bI={...qo,parse:n=>qo.parse(n)/100,transform:n=>qo.transform(n*100)},Ku={test:p2("hsl","hue"),parse:ek("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+qo.transform(Qh(e))+", "+qo.transform(Qh(t))+", "+Qh(Ef.transform(r))+")"},Mr={test:n=>Rc.test(n)||Hx.test(n)||Ku.test(n),parse:n=>Rc.test(n)?Rc.parse(n):Ku.test(n)?Ku.parse(n):Hx.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Rc.transform(n):Ku.transform(n),getAnimatableNone:n=>{const e=Mr.parse(n);return e.alpha=0,Mr.transform(e)}},uz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dz(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(m2))==null?void 0:e.length)||0)+(((t=n.match(uz))==null?void 0:t.length)||0)>0}const tk="number",nk="color",hz="var",fz="var(",AI="${}",mz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bf(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const h=e.replace(mz,p=>(Mr.test(p)?(r.color.push(o),i.push(nk),t.push(Mr.parse(p))):p.startsWith(fz)?(r.var.push(o),i.push(hz),t.push(p)):(r.number.push(o),i.push(tk),t.push(parseFloat(p))),++o,AI)).split(AI);return{values:t,split:h,indexes:r,types:i}}function rk(n){return bf(n).values}function ik(n){const{split:e,types:t}=bf(n),r=e.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],i[c]!==void 0){const h=t[c];h===tk?o+=Qh(i[c]):h===nk?o+=Mr.transform(i[c]):o+=i[c]}return o}}const pz=n=>typeof n=="number"?0:Mr.test(n)?Mr.getAnimatableNone(n):n;function gz(n){const e=rk(n);return ik(n)(e.map(pz))}const Bl={test:dz,parse:rk,createTransformer:ik,getAnimatableNone:gz};function Py(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function yz({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,c=0;if(!e)i=o=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,p=2*t-h;i=Py(p,h,n+1/3),o=Py(p,h,n),c=Py(p,h,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function Tp(n,e){return t=>t>0?e:n}const lr=(n,e,t)=>n+(e-n)*t,Dy=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},xz=[Hx,Rc,Ku],wz=n=>xz.find(e=>e.test(n));function II(n){const e=wz(n);if(!e)return!1;let t=e.parse(n);return e===Ku&&(t=yz(t)),t}const TI=(n,e)=>{const t=II(n),r=II(e);if(!t||!r)return Tp(n,e);const i={...t};return o=>(i.red=Dy(t.red,r.red,o),i.green=Dy(t.green,r.green,o),i.blue=Dy(t.blue,r.blue,o),i.alpha=lr(t.alpha,r.alpha,o),Rc.transform(i))},Gx=new Set(["none","hidden"]);function vz(n,e){return Gx.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function _z(n,e){return t=>lr(n,e,t)}function g2(n){return typeof n=="number"?_z:typeof n=="string"?f2(n)?Tp:Mr.test(n)?TI:Az:Array.isArray(n)?sk:typeof n=="object"?Mr.test(n)?TI:Ez:Tp}function sk(n,e){const t=[...n],r=t.length,i=n.map((o,c)=>g2(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)t[c]=i[c](o);return t}}function Ez(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=g2(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function bz(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],c=n.indexes[o][r[o]],h=n.values[c]??0;t[i]=h,r[o]++}return t}const Az=(n,e)=>{const t=Bl.createTransformer(e),r=bf(n),i=bf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Gx.has(n)&&!i.values.length||Gx.has(e)&&!r.values.length?vz(n,e):Yf(sk(bz(r,i),i.values),t):Tp(n,e)};function ok(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?lr(n,e,t):g2(n)(n,e)}const Iz=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>tr.update(e,t),stop:()=>Fl(e),now:()=>pi.isProcessing?pi.timestamp:hs.now()}},ak=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Cp=2e4;function y2(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Cp;)e+=t,r=n.next(e);return e>=Cp?1/0:e}function Tz(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(y2(r),Cp);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:$o(i)}}const Cz=5;function lk(n,e,t){const r=Math.max(e-Cz,0);return UN(t-n(r),e-r)}const gr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Oy=.001;function Sz({duration:n=gr.duration,bounce:e=gr.bounce,velocity:t=gr.velocity,mass:r=gr.mass}){let i,o,c=1-e;c=Da(gr.minDamping,gr.maxDamping,c),n=Da(gr.minDuration,gr.maxDuration,$o(n)),c<1?(i=g=>{const w=g*c,E=w*n,T=w-t,R=$x(g,c),M=Math.exp(-E);return Oy-T/R*M},o=g=>{const E=g*c*n,T=E*t+t,R=Math.pow(c,2)*Math.pow(g,2)*n,M=Math.exp(-E),D=$x(Math.pow(g,2),c);return(-i(g)+Oy>0?-1:1)*((T-R)*M)/D}):(i=g=>{const w=Math.exp(-g*n),E=(g-t)*n+1;return-Oy+w*E},o=g=>{const w=Math.exp(-g*n),E=(t-g)*(n*n);return w*E});const h=5/n,p=Nz(i,o,h);if(n=Go(n),isNaN(p))return{stiffness:gr.stiffness,damping:gr.damping,duration:n};{const g=Math.pow(p,2)*r;return{stiffness:g,damping:c*2*Math.sqrt(r*g),duration:n}}}const Rz=12;function Nz(n,e,t){let r=t;for(let i=1;i<Rz;i++)r=r-n(r)/e(r);return r}function $x(n,e){return n*Math.sqrt(1-e*e)}const kz=["duration","bounce"],Pz=["stiffness","damping","mass"];function CI(n,e){return e.some(t=>n[t]!==void 0)}function Dz(n){let e={velocity:gr.velocity,stiffness:gr.stiffness,damping:gr.damping,mass:gr.mass,isResolvedFromDuration:!1,...n};if(!CI(n,Pz)&&CI(n,kz))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*Da(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:gr.mass,stiffness:i,damping:o}}else{const t=Sz(n);e={...e,...t,mass:gr.mass},e.isResolvedFromDuration=!0}return e}function Sp(n=gr.visualDuration,e=gr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:p,damping:g,mass:w,duration:E,velocity:T,isResolvedFromDuration:R}=Dz({...t,velocity:-$o(t.velocity||0)}),M=T||0,D=g/(2*Math.sqrt(p*w)),L=c-o,H=$o(Math.sqrt(p/w)),z=Math.abs(L)<5;r||(r=z?gr.restSpeed.granular:gr.restSpeed.default),i||(i=z?gr.restDelta.granular:gr.restDelta.default);let W;if(D<1){const ie=$x(H,D);W=le=>{const F=Math.exp(-D*H*le);return c-F*((M+D*H*L)/ie*Math.sin(ie*le)+L*Math.cos(ie*le))}}else if(D===1)W=ie=>c-Math.exp(-H*ie)*(L+(M+H*L)*ie);else{const ie=H*Math.sqrt(D*D-1);W=le=>{const F=Math.exp(-D*H*le),B=Math.min(ie*le,300);return c-F*((M+D*H*L)*Math.sinh(B)+ie*L*Math.cosh(B))/ie}}const Q={calculatedDuration:R&&E||null,next:ie=>{const le=W(ie);if(R)h.done=ie>=E;else{let F=ie===0?M:0;D<1&&(F=ie===0?Go(M):lk(W,ie,le));const B=Math.abs(F)<=r,G=Math.abs(c-le)<=i;h.done=B&&G}return h.value=h.done?c:le,h},toString:()=>{const ie=Math.min(y2(Q),Cp),le=ak(F=>Q.next(ie*F).value,ie,30);return ie+"ms "+le},toTransition:()=>{}};return Q}Sp.applyToOptions=n=>{const e=Tz(n,100,Sp);return n.ease=e.ease,n.duration=Go(e.duration),n.type="keyframes",n};function qx({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:p,restDelta:g=.5,restSpeed:w}){const E=n[0],T={done:!1,value:E},R=B=>h!==void 0&&B<h||p!==void 0&&B>p,M=B=>h===void 0?p:p===void 0||Math.abs(h-B)<Math.abs(p-B)?h:p;let D=t*e;const L=E+D,H=c===void 0?L:c(L);H!==L&&(D=H-E);const z=B=>-D*Math.exp(-B/r),W=B=>H+z(B),Q=B=>{const G=z(B),J=W(B);T.done=Math.abs(G)<=g,T.value=T.done?H:J};let ie,le;const F=B=>{R(T.value)&&(ie=B,le=Sp({keyframes:[T.value,M(T.value)],velocity:lk(W,B,T.value),damping:i,stiffness:o,restDelta:g,restSpeed:w}))};return F(0),{calculatedDuration:null,next:B=>{let G=!1;return!le&&ie===void 0&&(G=!0,Q(B),F(B)),ie!==void 0&&B>=ie?le.next(B-ie):(!G&&Q(B),T)}}}function Oz(n,e,t){const r=[],i=t||Oa.mix||ok,o=n.length-1;for(let c=0;c<o;c++){let h=i(n[c],n[c+1]);if(e){const p=Array.isArray(e)?e[c]||Ys:e;h=Yf(p,h)}r.push(h)}return r}function Mz(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(a2(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=Oz(e,r,i),p=h.length,g=w=>{if(c&&w<n[0])return e[0];let E=0;if(p>1)for(;E<n.length-2&&!(w<n[E+1]);E++);const T=_f(n[E],n[E+1],w);return h[E](T)};return t?w=>g(Da(n[0],n[o-1],w)):g}function Lz(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=_f(0,e,r);n.push(lr(t,1,i))}}function Vz(n){const e=[0];return Lz(e,n.length-1),e}function Fz(n,e){return n.map(t=>t*e)}function Bz(n,e){return n.map(()=>e||YN).splice(0,n.length-1)}function Zh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=YU(r)?r.map(EI):EI(r),o={done:!1,value:e[0]},c=Fz(t&&t.length===e.length?t:Vz(e),n),h=Mz(c,e,{ease:Array.isArray(i)?i:Bz(e,i)});return{calculatedDuration:n,next:p=>(o.value=h(p),o.done=p>=n,o)}}const jz=n=>n!==null;function x2(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(jz),h=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||r===void 0?o[h]:r}const Uz={decay:qx,inertia:qx,tween:Zh,keyframes:Zh,spring:Sp};function ck(n){typeof n.type=="string"&&(n.type=Uz[n.type])}class w2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const zz=n=>n/100;class v2 extends w2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==hs.now()&&this.tick(hs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ck(e);const{type:t=Zh,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=e;let{keyframes:h}=e;const p=t||Zh;p!==Zh&&typeof h[0]!="number"&&(this.mixKeyframes=Yf(zz,ok(h[0],h[1])),h=[0,100]);const g=p({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=p({...e,keyframes:[...h].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=y2(g));const{calculatedDuration:w}=g;this.calculatedDuration=w,this.resolvedDuration=w+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=g}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:p}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:w,repeat:E,repeatType:T,repeatDelay:R,type:M,onUpdate:D,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const H=this.currentTime-g*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?H<0:H>i;this.currentTime=Math.max(H,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let W=this.currentTime,Q=r;if(E){const B=Math.min(this.currentTime,i)/h;let G=Math.floor(B),J=B%1;!J&&B>=1&&(J=1),J===1&&G--,G=Math.min(G,E+1),!!(G%2)&&(T==="reverse"?(J=1-J,R&&(J-=R/h)):T==="mirror"&&(Q=c)),W=Da(0,1,J)*h}const ie=z?{done:!1,value:w[0]}:Q.next(W);o&&(ie.value=o(ie.value));let{done:le}=ie;!z&&p!==null&&(le=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&le);return F&&M!==qx&&(ie.value=x2(w,this.options,L,this.speed)),D&&D(ie.value),F&&this.finish(),ie}then(e,t){return this.finished.then(e,t)}get duration(){return $o(this.calculatedDuration)}get time(){return $o(this.currentTime)}set time(e){var t;e=Go(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=$o(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=Iz,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function Wz(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Nc=n=>n*180/Math.PI,Kx=n=>{const e=Nc(Math.atan2(n[1],n[0]));return Xx(e)},Hz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Kx,rotateZ:Kx,skewX:n=>Nc(Math.atan(n[1])),skewY:n=>Nc(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Xx=n=>(n=n%360,n<0&&(n+=360),n),SI=Kx,RI=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),NI=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Gz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:RI,scaleY:NI,scale:n=>(RI(n)+NI(n))/2,rotateX:n=>Xx(Nc(Math.atan2(n[6],n[5]))),rotateY:n=>Xx(Nc(Math.atan2(-n[2],n[0]))),rotateZ:SI,rotate:SI,skewX:n=>Nc(Math.atan(n[4])),skewY:n=>Nc(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Yx(n){return n.includes("scale")?1:0}function Qx(n,e){if(!n||n==="none")return Yx(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=Gz,i=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Hz,i=h}if(!i)return Yx(e);const o=r[e],c=i[1].split(",").map(qz);return typeof o=="function"?o(c):c[o]}const $z=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Qx(t,e)};function qz(n){return parseFloat(n.trim())}const Wd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hd=new Set(Wd),kI=n=>n===zd||n===At,Kz=new Set(["x","y","z"]),Xz=Wd.filter(n=>!Kz.has(n));function Yz(n){const e=[];return Xz.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Fc={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Qx(e,"x"),y:(n,{transform:e})=>Qx(e,"y")};Fc.translateX=Fc.x;Fc.translateY=Fc.y;const Bc=new Set;let Zx=!1,Jx=!1,ew=!1;function uk(){if(Jx){const n=Array.from(Bc).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=Yz(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,c])=>{var h;(h=r.getValue(o))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Jx=!1,Zx=!1,Bc.forEach(n=>n.complete(ew)),Bc.clear()}function dk(){Bc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Jx=!0)})}function Qz(){ew=!0,dk(),uk(),ew=!1}class _2{constructor(e,t,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Bc.add(this),Zx||(Zx=!0,tr.read(dk),tr.resolveKeyframes(uk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}Wz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Bc.delete(this)}cancel(){this.state==="scheduled"&&(Bc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Zz=n=>n.startsWith("--");function Jz(n,e,t){Zz(e)?n.style.setProperty(e,t):n.style[e]=t}const eW=l2(()=>window.ScrollTimeline!==void 0),tW={};function nW(n,e){const t=l2(n);return()=>tW[e]??t()}const hk=nW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lh=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,PI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lh([0,.65,.55,1]),circOut:Lh([.55,0,1,.45]),backIn:Lh([.31,.01,.66,-.59]),backOut:Lh([.33,1.53,.69,.99])};function fk(n,e){if(n)return typeof n=="function"?hk()?ak(n,e):"ease-out":QN(n)?Lh(n):Array.isArray(n)?n.map(t=>fk(t,e)||PI.easeOut):PI[n]}function rW(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:h="easeOut",times:p}={},g=void 0){const w={[e]:t};p&&(w.offset=p);const E=fk(h,i);Array.isArray(E)&&(w.easing=E);const T={delay:r,duration:i,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return g&&(T.pseudoElement=g),n.animate(w,T)}function mk(n){return typeof n=="function"&&"applyToOptions"in n}function iW({type:n,...e}){return mk(n)&&hk()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class sW extends w2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:h,onComplete:p}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,a2(typeof e.type!="string");const g=iW(e);this.animation=rW(t,r,i,g,o),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const w=x2(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(w):Jz(t,r,w),this.animation.cancel()}p==null||p(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return $o(Number(e))}get time(){return $o(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Go(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&eW()?(this.animation.timeline=e,Ys):t(this)}}const pk={anticipate:qN,backInOut:$N,circInOut:XN};function oW(n){return n in pk}function aW(n){typeof n.ease=="string"&&oW(n.ease)&&(n.ease=pk[n.ease])}const DI=10;class lW extends sW{constructor(e){aW(e),ck(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new v2({...c,autoplay:!1}),p=Go(this.finishedTime??this.time);t.setWithVelocity(h.sample(p-DI).value,h.sample(p).value,DI),h.stop()}}const OI=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Bl.test(n)||n==="0")&&!n.startsWith("url("));function cW(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function uW(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],c=OI(i,e),h=OI(o,e);return!c||!h?!1:cW(n)||(t==="spring"||mk(t))&&r}function tw(n){n.duration=0,n.type}const dW=new Set(["opacity","clipPath","filter","transform"]),hW=l2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function fW(n){var w;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:c}=n;if(!(((w=e==null?void 0:e.owner)==null?void 0:w.current)instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:g}=e.owner.getProps();return hW()&&t&&dW.has(t)&&(t!=="transform"||!g)&&!p&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const mW=40;class pW extends w2{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:h,name:p,motionValue:g,element:w,...E}){var M;super(),this.stop=()=>{var D,L;this._animation&&(this._animation.stop(),(D=this.stopTimeline)==null||D.call(this)),(L=this.keyframeResolver)==null||L.cancel()},this.createdAt=hs.now();const T={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:c,name:p,motionValue:g,element:w,...E},R=(w==null?void 0:w.KeyframeResolver)||_2;this.keyframeResolver=new R(h,(D,L,H)=>this.onKeyframesResolved(D,L,T,!H),p,g,w),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:h,delay:p,isHandoff:g,onUpdate:w}=r;this.resolvedAt=hs.now(),uW(e,o,c,h)||((Oa.instantAnimations||!p)&&(w==null||w(x2(e,r,t))),e[0]=e[e.length-1],tw(r),r.repeat=0);const T={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>mW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},R=!g&&fW(T)?new lW({...T,element:T.motionValue.owner.current}):new v2(T);R.finished.then(()=>this.notifyFinished()).catch(Ys),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Qz()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const gW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yW(n){const e=gW.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function gk(n,e,t=1){const[r,i]=yW(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return FN(c)?parseFloat(c):c}return f2(i)?gk(i,e,t+1):i}function E2(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const yk=new Set(["width","height","top","left","right","bottom",...Wd]),xW={test:n=>n==="auto",parse:n=>n},xk=n=>e=>e.test(n),wk=[zd,At,qo,xl,cz,lz,xW],MI=n=>wk.find(xk(n));function wW(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||jN(n):!0}const vW=new Set(["brightness","contrast","saturate","opacity"]);function _W(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(m2)||[];if(!r)return n;const i=t.replace(r,"");let o=vW.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const EW=/\b([a-z-]*)\(.*?\)/gu,nw={...Bl,getAnimatableNone:n=>{const e=n.match(EW);return e?e.map(_W).join(" "):n}},LI={...zd,transform:Math.round},bW={rotate:xl,rotateX:xl,rotateY:xl,rotateZ:xl,scale:fm,scaleX:fm,scaleY:fm,scaleZ:fm,skew:xl,skewX:xl,skewY:xl,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:Ef,originX:bI,originY:bI,originZ:At},b2={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At,...bW,zIndex:LI,fillOpacity:Ef,strokeOpacity:Ef,numOctaves:LI},AW={...b2,color:Mr,backgroundColor:Mr,outlineColor:Mr,fill:Mr,stroke:Mr,borderColor:Mr,borderTopColor:Mr,borderRightColor:Mr,borderBottomColor:Mr,borderLeftColor:Mr,filter:nw,WebkitFilter:nw},vk=n=>AW[n];function _k(n,e){let t=vk(n);return t!==nw&&(t=Bl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const IW=new Set(["auto","none","0"]);function TW(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!IW.has(o)&&bf(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=_k(t,i)}class CW extends _2{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let g=e[p];if(typeof g=="string"&&(g=g.trim(),f2(g))){const w=gk(g,t.current);w!==void 0&&(e[p]=w),p===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!yk.has(r)||e.length!==2)return;const[i,o]=e,c=MI(i),h=MI(o);if(c!==h)if(kI(c)&&kI(h))for(let p=0;p<e.length;p++){const g=e[p];typeof g=="string"&&(e[p]=parseFloat(g))}else Fc[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||wW(e[i]))&&r.push(i);r.length&&TW(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fc[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=Fc[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([p,g])=>{e.getValue(p).set(g)}),this.resolveNoneKeyframes()}}function SW(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const Ek=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function bk(n){return BN(n)&&"offsetHeight"in n}const VI=30,RW=n=>!isNaN(parseFloat(n));class NW{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=hs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=RW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new c2);const r=this.events[e].add(t);return e==="change"?()=>{r(),tr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>VI)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,VI);return UN(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cd(n,e){return new NW(n,e)}const{schedule:A2}=ZN(queueMicrotask,!1),ao={x:!1,y:!1};function Ak(){return ao.x||ao.y}function kW(n){return n==="x"||n==="y"?ao[n]?null:(ao[n]=!0,()=>{ao[n]=!1}):ao.x||ao.y?null:(ao.x=ao.y=!0,()=>{ao.x=ao.y=!1})}function Ik(n,e){const t=SW(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function FI(n){return!(n.pointerType==="touch"||Ak())}function PW(n,e,t={}){const[r,i,o]=Ik(n,t),c=h=>{if(!FI(h))return;const{target:p}=h,g=e(p,h);if(typeof g!="function"||!p)return;const w=E=>{FI(E)&&(g(E),p.removeEventListener("pointerleave",w))};p.addEventListener("pointerleave",w,i)};return r.forEach(h=>{h.addEventListener("pointerenter",c,i)}),o}const Tk=(n,e)=>e?n===e?!0:Tk(n,e.parentElement):!1,I2=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,DW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OW(n){return DW.has(n.tagName)||n.tabIndex!==-1}const Wm=new WeakSet;function BI(n){return e=>{e.key==="Enter"&&n(e)}}function My(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const MW=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=BI(()=>{if(Wm.has(t))return;My(t,"down");const i=BI(()=>{My(t,"up")}),o=()=>My(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function jI(n){return I2(n)&&!Ak()}function LW(n,e,t={}){const[r,i,o]=Ik(n,t),c=h=>{const p=h.currentTarget;if(!jI(h))return;Wm.add(p);const g=e(p,h),w=(R,M)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",T),Wm.has(p)&&Wm.delete(p),jI(R)&&typeof g=="function"&&g(R,{success:M})},E=R=>{w(R,p===window||p===document||t.useGlobalTarget||Tk(p,R.target))},T=R=>{w(R,!1)};window.addEventListener("pointerup",E,i),window.addEventListener("pointercancel",T,i)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,i),bk(h)&&(h.addEventListener("focus",g=>MW(g,i)),!OW(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function Ck(n){return BN(n)&&"ownerSVGElement"in n}function VW(n){return Ck(n)&&n.tagName==="svg"}const Mi=n=>!!(n&&n.getVelocity),FW=[...wk,Mr,Bl],BW=n=>FW.find(xk(n)),T2=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class jW extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=bk(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function UW({children:n,isPresent:e,anchorX:t,root:r}){const i=P.useId(),o=P.useRef(null),c=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=P.useContext(T2);return P.useInsertionEffect(()=>{const{width:p,height:g,top:w,left:E,right:T}=c.current;if(e||!o.current||!p||!g)return;const R=t==="left"?`left: ${E}`:`right: ${T}`;o.current.dataset.motionPopId=i;const M=document.createElement("style");h&&(M.nonce=h);const D=r??document.head;return D.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${w}px !important;
          }
        `),()=>{D.contains(M)&&D.removeChild(M)}},[e]),A.jsx(jW,{isPresent:e,childRef:o,sizeRef:c,children:P.cloneElement(n,{ref:o})})}const zW=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:h,root:p})=>{const g=r2(WW),w=P.useId();let E=!0,T=P.useMemo(()=>(E=!1,{id:w,initial:e,isPresent:t,custom:i,onExitComplete:R=>{g.set(R,!0);for(const M of g.values())if(!M)return;r&&r()},register:R=>(g.set(R,!1),()=>g.delete(R))}),[t,g,r]);return o&&E&&(T={...T}),P.useMemo(()=>{g.forEach((R,M)=>g.set(M,!1))},[t]),P.useEffect(()=>{!t&&!g.size&&r&&r()},[t]),c==="popLayout"&&(n=A.jsx(UW,{isPresent:t,anchorX:h,root:p,children:n})),A.jsx(Ag.Provider,{value:T,children:n})};function WW(){return new Map}function Sk(n=!0){const e=P.useContext(Ag);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=P.useId();P.useEffect(()=>{if(n)return i(o)},[n]);const c=P.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,c]:[!0]}const mm=n=>n.key||"";function UI(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const Jf=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:h="left",root:p})=>{const[g,w]=Sk(c),E=P.useMemo(()=>UI(n),[n]),T=c&&!g?[]:E.map(mm),R=P.useRef(!0),M=P.useRef(E),D=r2(()=>new Map),[L,H]=P.useState(E),[z,W]=P.useState(E);VN(()=>{R.current=!1,M.current=E;for(let le=0;le<z.length;le++){const F=mm(z[le]);T.includes(F)?D.delete(F):D.get(F)!==!0&&D.set(F,!1)}},[z,T.length,T.join("-")]);const Q=[];if(E!==L){let le=[...E];for(let F=0;F<z.length;F++){const B=z[F],G=mm(B);T.includes(G)||(le.splice(F,0,B),Q.push(B))}return o==="wait"&&Q.length&&(le=Q),W(UI(le)),H(E),null}const{forceRender:ie}=P.useContext(n2);return A.jsx(A.Fragment,{children:z.map(le=>{const F=mm(le),B=c&&!g?!1:E===z||T.includes(F),G=()=>{if(D.has(F))D.set(F,!0);else return;let J=!0;D.forEach(te=>{te||(J=!1)}),J&&(ie==null||ie(),W(M.current),c&&(w==null||w()),r&&r())};return A.jsx(zW,{isPresent:B,initial:!R.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:p,onExitComplete:B?void 0:G,anchorX:h,children:le},F)})})},Rk=P.createContext({strict:!1}),zI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Sd={};for(const n in zI)Sd[n]={isEnabled:e=>zI[n].some(t=>!!e[t])};function HW(n){for(const e in n)Sd[e]={...Sd[e],...n[e]}}const GW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||GW.has(n)}let Nk=n=>!Rp(n);function $W(n){typeof n=="function"&&(Nk=e=>e.startsWith("on")?!Rp(e):n(e))}try{$W(require("@emotion/is-prop-valid").default)}catch{}function qW(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(Nk(i)||t===!0&&Rp(i)||!e&&!Rp(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Ig=P.createContext({});function Tg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Af(n){return typeof n=="string"||Array.isArray(n)}const C2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],S2=["initial",...C2];function Cg(n){return Tg(n.animate)||S2.some(e=>Af(n[e]))}function kk(n){return!!(Cg(n)||n.variants)}function KW(n,e){if(Cg(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Af(t)?t:void 0,animate:Af(r)?r:void 0}}return n.inherit!==!1?e:{}}function XW(n){const{initial:e,animate:t}=KW(n,P.useContext(Ig));return P.useMemo(()=>({initial:e,animate:t}),[WI(e),WI(t)])}function WI(n){return Array.isArray(n)?n.join(" "):n}const If={};function YW(n){for(const e in n)If[e]=n[e],h2(e)&&(If[e].isCSSVariable=!0)}function Pk(n,{layout:e,layoutId:t}){return Hd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!If[n]||n==="opacity")}const QW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZW=Wd.length;function JW(n,e,t){let r="",i=!0;for(let o=0;o<ZW;o++){const c=Wd[o],h=n[c];if(h===void 0)continue;let p=!0;if(typeof h=="number"?p=h===(c.startsWith("scale")?1:0):p=parseFloat(h)===0,!p||t){const g=Ek(h,b2[c]);if(!p){i=!1;const w=QW[c]||c;r+=`${w}(${g}) `}t&&(e[c]=g)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function R2(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let c=!1,h=!1;for(const p in e){const g=e[p];if(Hd.has(p)){c=!0;continue}else if(h2(p)){i[p]=g;continue}else{const w=Ek(g,b2[p]);p.startsWith("origin")?(h=!0,o[p]=w):r[p]=w}}if(e.transform||(c||t?r.transform=JW(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:p="50%",originY:g="50%",originZ:w=0}=o;r.transformOrigin=`${p} ${g} ${w}`}}const N2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Dk(n,e,t){for(const r in e)!Mi(e[r])&&!Pk(r,t)&&(n[r]=e[r])}function eH({transformTemplate:n},e){return P.useMemo(()=>{const t=N2();return R2(t,e,n),Object.assign({},t.vars,t.style)},[e])}function tH(n,e){const t=n.style||{},r={};return Dk(r,t,n),Object.assign(r,eH(n,e)),r}function nH(n,e){const t={},r=tH(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const rH={offset:"stroke-dashoffset",array:"stroke-dasharray"},iH={offset:"strokeDashoffset",array:"strokeDasharray"};function sH(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?rH:iH;n[o.offset]=At.transform(-r);const c=At.transform(e),h=At.transform(t);n[o.array]=`${c} ${h}`}function Ok(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...h},p,g,w){if(R2(n,h,g),p){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:T}=n;E.transform&&(T.transform=E.transform,delete E.transform),(T.transform||E.transformOrigin)&&(T.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),T.transform&&(T.transformBox=(w==null?void 0:w.transformBox)??"fill-box",delete E.transformBox),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),r!==void 0&&(E.scale=r),i!==void 0&&sH(E,i,o,c,!1)}const Mk=()=>({...N2(),attrs:{}}),Lk=n=>typeof n=="string"&&n.toLowerCase()==="svg";function oH(n,e,t,r){const i=P.useMemo(()=>{const o=Mk();return Ok(o,e,Lk(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};Dk(o,n.style,n),i.style={...o,...i.style}}return i}const aH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function k2(n){return typeof n!="string"||n.includes("-")?!1:!!(aH.indexOf(n)>-1||/[A-Z]/u.test(n))}function lH(n,e,t,{latestValues:r},i,o=!1){const h=(k2(n)?oH:nH)(e,r,i,n),p=qW(e,typeof n=="string",o),g=n!==P.Fragment?{...p,...h,ref:t}:{},{children:w}=e,E=P.useMemo(()=>Mi(w)?w.get():w,[w]);return P.createElement(n,{...g,children:E})}function HI(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function P2(n,e,t,r){if(typeof e=="function"){const[i,o]=HI(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=HI(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function Hm(n){return Mi(n)?n.get():n}function cH({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:uH(t,r,i,n),renderState:e()}}function uH(n,e,t,r){const i={},o=r(n,{});for(const T in o)i[T]=Hm(o[T]);let{initial:c,animate:h}=n;const p=Cg(n),g=kk(n);e&&g&&!p&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let w=t?t.initial===!1:!1;w=w||c===!1;const E=w?h:c;if(E&&typeof E!="boolean"&&!Tg(E)){const T=Array.isArray(E)?E:[E];for(let R=0;R<T.length;R++){const M=P2(n,T[R]);if(M){const{transitionEnd:D,transition:L,...H}=M;for(const z in H){let W=H[z];if(Array.isArray(W)){const Q=w?W.length-1:0;W=W[Q]}W!==null&&(i[z]=W)}for(const z in D)i[z]=D[z]}}}return i}const Vk=n=>(e,t)=>{const r=P.useContext(Ig),i=P.useContext(Ag),o=()=>cH(n,e,r,i);return t?o():r2(o)};function D2(n,e,t){var o;const{style:r}=n,i={};for(const c in r)(Mi(r[c])||e.style&&Mi(e.style[c])||Pk(c,n)||((o=t==null?void 0:t.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const dH=Vk({scrapeMotionValuesFromProps:D2,createRenderState:N2});function Fk(n,e,t){const r=D2(n,e,t);for(const i in n)if(Mi(n[i])||Mi(e[i])){const o=Wd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const hH=Vk({scrapeMotionValuesFromProps:Fk,createRenderState:Mk}),fH=Symbol.for("motionComponentSymbol");function Xu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function mH(n,e,t){return P.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Xu(t)&&(t.current=r))},[e])}const O2=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pH="framerAppearId",Bk="data-"+O2(pH),jk=P.createContext({});function gH(n,e,t,r,i){var D,L;const{visualElement:o}=P.useContext(Ig),c=P.useContext(Rk),h=P.useContext(Ag),p=P.useContext(T2).reducedMotion,g=P.useRef(null);r=r||c.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p}));const w=g.current,E=P.useContext(jk);w&&!w.projection&&i&&(w.type==="html"||w.type==="svg")&&yH(g.current,t,i,E);const T=P.useRef(!1);P.useInsertionEffect(()=>{w&&T.current&&w.update(t,h)});const R=t[Bk],M=P.useRef(!!R&&!((D=window.MotionHandoffIsComplete)!=null&&D.call(window,R))&&((L=window.MotionHasOptimisedAnimation)==null?void 0:L.call(window,R)));return VN(()=>{w&&(T.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),M.current&&w.animationState&&w.animationState.animateChanges())}),P.useEffect(()=>{w&&(!M.current&&w.animationState&&w.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var H;(H=window.MotionHandoffMarkAsComplete)==null||H.call(window,R)}),M.current=!1),w.enteringChildren=void 0)}),w}function yH(n,e,t,r){const{layoutId:i,layout:o,drag:c,dragConstraints:h,layoutScroll:p,layoutRoot:g,layoutCrossfade:w}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Uk(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||h&&Xu(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:w,layoutScroll:p,layoutRoot:g})}function Uk(n){if(n)return n.options.allowProjection!==!1?n.projection:Uk(n.parent)}function Ly(n,{forwardMotionProps:e=!1}={},t,r){t&&HW(t);const i=k2(n)?hH:dH;function o(h,p){let g;const w={...P.useContext(T2),...h,layoutId:xH(h)},{isStatic:E}=w,T=XW(h),R=i(h,E);if(!E&&i2){wH();const M=vH(w);g=M.MeasureLayout,T.visualElement=gH(n,R,w,r,M.ProjectionNode)}return A.jsxs(Ig.Provider,{value:T,children:[g&&T.visualElement?A.jsx(g,{visualElement:T.visualElement,...w}):null,lH(n,h,mH(R,T.visualElement,p),R,E,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=P.forwardRef(o);return c[fH]=n,c}function xH({layoutId:n}){const e=P.useContext(n2).id;return e&&n!==void 0?e+"-"+n:n}function wH(n,e){P.useContext(Rk).strict}function vH(n){const{drag:e,layout:t}=Sd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function _H(n,e){if(typeof Proxy>"u")return Ly;const t=new Map,r=(o,c)=>Ly(o,c,n,e),i=(o,c)=>r(o,c);return new Proxy(i,{get:(o,c)=>c==="create"?r:(t.has(c)||t.set(c,Ly(c,void 0,n,e)),t.get(c))})}function zk({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function EH({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function bH(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Vy(n){return n===void 0||n===1}function rw({scale:n,scaleX:e,scaleY:t}){return!Vy(n)||!Vy(e)||!Vy(t)}function _c(n){return rw(n)||Wk(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Wk(n){return GI(n.x)||GI(n.y)}function GI(n){return n&&n!=="0%"}function Np(n,e,t){const r=n-t,i=e*r;return t+i}function $I(n,e,t,r,i){return i!==void 0&&(n=Np(n,i,r)),Np(n,t,r)+e}function iw(n,e=0,t=1,r,i){n.min=$I(n.min,e,t,r,i),n.max=$I(n.max,e,t,r,i)}function Hk(n,{x:e,y:t}){iw(n.x,e.translate,e.scale,e.originPoint),iw(n.y,t.translate,t.scale,t.originPoint)}const qI=.999999999999,KI=1.0000000000001;function AH(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,c;for(let h=0;h<i;h++){o=t[h],c=o.projectionDelta;const{visualElement:p}=o.options;p&&p.props.style&&p.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Qu(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,Hk(n,c)),r&&_c(o.latestValues)&&Qu(n,o.latestValues))}e.x<KI&&e.x>qI&&(e.x=1),e.y<KI&&e.y>qI&&(e.y=1)}function Yu(n,e){n.min=n.min+e,n.max=n.max+e}function XI(n,e,t,r,i=.5){const o=lr(n.min,n.max,i);iw(n,e,t,o,r)}function Qu(n,e){XI(n.x,e.x,e.scaleX,e.scale,e.originX),XI(n.y,e.y,e.scaleY,e.scale,e.originY)}function Gk(n,e){return zk(bH(n.getBoundingClientRect(),e))}function IH(n,e,t){const r=Gk(n,t),{scroll:i}=e;return i&&(Yu(r.x,i.offset.x),Yu(r.y,i.offset.y)),r}const YI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zu=()=>({x:YI(),y:YI()}),QI=()=>({min:0,max:0}),Rr=()=>({x:QI(),y:QI()}),sw={current:null},$k={current:!1};function TH(){if($k.current=!0,!!i2)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>sw.current=n.matches;n.addEventListener("change",e),e()}else sw.current=!1}const CH=new WeakMap;function SH(n,e,t){for(const r in e){const i=e[r],o=t[r];if(Mi(i))n.addValue(r,i);else if(Mi(o))n.addValue(r,Cd(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=n.getStaticValue(r);n.addValue(r,Cd(c!==void 0?c:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const ZI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class RH{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=hs.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,tr.render(this.render,!1,!0))};const{latestValues:p,renderState:g}=c;this.latestValues=p,this.baseTarget={...p},this.initialValues=t.initial?{...p}:{},this.renderState=g,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Cg(t),this.isVariantNode=kk(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...E}=this.scrapeMotionValuesFromProps(t,{},this);for(const T in E){const R=E[T];p[T]!==void 0&&Mi(R)&&R.set(p[T])}}mount(e){var t;this.current=e,CH.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),$k.current||TH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sw.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Fl(this.notifyUpdate),Fl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Hd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&tr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Sd){const t=Sd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<ZI.length;r++){const i=ZI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=e[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=SH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Cd(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(FN(r)||jN(r))?r=parseFloat(r):!BW(r)&&Bl.test(t)&&(r=_k(e,t)),this.setBaseTarget(e,Mi(r)?r.get():r)),Mi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=P2(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Mi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new c2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){A2.render(this.render)}}class qk extends RH{constructor(){super(...arguments),this.KeyframeResolver=CW}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Kk(n,{style:e,vars:t},r,i){const o=n.style;let c;for(c in e)o[c]=e[c];i==null||i.applyProjectionStyles(o,r);for(c in t)o.setProperty(c,t[c])}function NH(n){return window.getComputedStyle(n)}class kH extends qk{constructor(){super(...arguments),this.type="html",this.renderInstance=Kk}readValueFromInstance(e,t){var r;if(Hd.has(t))return(r=this.projection)!=null&&r.isProjecting?Yx(t):$z(e,t);{const i=NH(e),o=(h2(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Gk(e,t)}build(e,t,r){R2(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return D2(e,t,r)}}const Xk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PH(n,e,t,r){Kk(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(Xk.has(i)?i:O2(i),e.attrs[i])}class DH extends qk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Hd.has(t)){const r=vk(t);return r&&r.default||0}return t=Xk.has(t)?t:O2(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Fk(e,t,r)}build(e,t,r){Ok(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){PH(e,t,r,i)}mount(e){this.isSVGTag=Lk(e.tagName),super.mount(e)}}const OH=(n,e)=>k2(n)?new DH(e):new kH(e,{allowProjection:n!==P.Fragment});function id(n,e,t){const r=n.getProps();return P2(r,e,t!==void 0?t:r.custom,n)}const ow=n=>Array.isArray(n);function MH(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Cd(t))}function LH(n){return ow(n)?n[n.length-1]||0:n}function VH(n,e){const t=id(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const c in o){const h=LH(o[c]);MH(n,c,h)}}function FH(n){return!!(Mi(n)&&n.add)}function aw(n,e){const t=n.getValue("willChange");if(FH(t))return t.add(e);if(!t&&Oa.WillChange){const r=new Oa.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function Yk(n){return n.props[Bk]}const BH=n=>n!==null;function jH(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(BH),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const UH={type:"spring",stiffness:500,damping:25,restSpeed:10},zH=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),WH={type:"keyframes",duration:.8},HH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},GH=(n,{keyframes:e})=>e.length>2?WH:Hd.has(n)?n.startsWith("scale")?zH(e[1]):UH:HH;function $H({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:h,from:p,elapsed:g,...w}){return!!Object.keys(w).length}const M2=(n,e,t,r={},i,o)=>c=>{const h=E2(r,n)||{},p=h.delay||r.delay||0;let{elapsed:g=0}=r;g=g-Go(p);const w={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:i};$H(h)||Object.assign(w,GH(n,w)),w.duration&&(w.duration=Go(w.duration)),w.repeatDelay&&(w.repeatDelay=Go(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let E=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(tw(w),w.delay===0&&(E=!0)),(Oa.instantAnimations||Oa.skipAnimations)&&(E=!0,tw(w),w.delay=0),w.allowFlatten=!h.type&&!h.ease,E&&!o&&e.get()!==void 0){const T=jH(w.keyframes,h);if(T!==void 0){tr.update(()=>{w.onUpdate(T),w.onComplete()});return}}return h.isSync?new v2(w):new pW(w)};function qH({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Qk(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(o=r);const p=[],g=i&&n.animationState&&n.animationState.getState()[i];for(const w in h){const E=n.getValue(w,n.latestValues[w]??null),T=h[w];if(T===void 0||g&&qH(g,w))continue;const R={delay:t,...E2(o||{},w)},M=E.get();if(M!==void 0&&!E.isAnimating&&!Array.isArray(T)&&T===M&&!R.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const H=Yk(n);if(H){const z=window.MotionHandoffAnimation(H,w,tr);z!==null&&(R.startTime=z,D=!0)}}aw(n,w),E.start(M2(w,E,T,n.shouldReduceMotion&&yk.has(w)?{type:!1}:R,n,D));const L=E.animation;L&&p.push(L)}return c&&Promise.all(p).then(()=>{tr.update(()=>{c&&VH(n,c)})}),p}function Zk(n,e,t,r=0,i=1){const o=Array.from(n).sort((g,w)=>g.sortNodePosition(w)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(o,c):i===1?o*r:h-o*r}function lw(n,e,t={}){var p;const r=id(n,e,t.type==="exit"?(p=n.presenceContext)==null?void 0:p.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(Qk(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(g=0)=>{const{delayChildren:w=0,staggerChildren:E,staggerDirection:T}=i;return KH(n,e,g,w,E,T,t)}:()=>Promise.resolve(),{when:h}=i;if(h){const[g,w]=h==="beforeChildren"?[o,c]:[c,o];return g().then(()=>w())}else return Promise.all([o(),c(t.delay)])}function KH(n,e,t=0,r=0,i=0,o=1,c){const h=[];for(const p of n.variantChildren)p.notify("AnimationStart",e),h.push(lw(p,e,{...c,delay:t+(typeof r=="function"?0:r)+Zk(n.variantChildren,p,r,i,o)}).then(()=>p.notify("AnimationComplete",e)));return Promise.all(h)}function XH(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>lw(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=lw(n,e,t);else{const i=typeof e=="function"?id(n,e,t.custom):e;r=Promise.all(Qk(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function Jk(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const YH=S2.length;function e4(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?e4(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<YH;t++){const r=S2[t],i=n.props[r];(Af(i)||i===!1)&&(e[r]=i)}return e}const QH=[...C2].reverse(),ZH=C2.length;function JH(n){return e=>Promise.all(e.map(({animation:t,options:r})=>XH(n,t,r)))}function eG(n){let e=JH(n),t=JI(),r=!0;const i=p=>(g,w)=>{var T;const E=id(n,w,p==="exit"?(T=n.presenceContext)==null?void 0:T.custom:void 0);if(E){const{transition:R,transitionEnd:M,...D}=E;g={...g,...D,...M}}return g};function o(p){e=p(n)}function c(p){const{props:g}=n,w=e4(n.parent)||{},E=[],T=new Set;let R={},M=1/0;for(let L=0;L<ZH;L++){const H=QH[L],z=t[H],W=g[H]!==void 0?g[H]:w[H],Q=Af(W),ie=H===p?z.isActive:null;ie===!1&&(M=L);let le=W===w[H]&&W!==g[H]&&Q;if(le&&r&&n.manuallyAnimateOnMount&&(le=!1),z.protectedKeys={...R},!z.isActive&&ie===null||!W&&!z.prevProp||Tg(W)||typeof W=="boolean")continue;const F=tG(z.prevProp,W);let B=F||H===p&&z.isActive&&!le&&Q||L>M&&Q,G=!1;const J=Array.isArray(W)?W:[W];let te=J.reduce(i(H),{});ie===!1&&(te={});const{prevResolvedValues:X={}}=z,q={...X,...te},pe=we=>{B=!0,T.has(we)&&(G=!0,T.delete(we)),z.needsAnimating[we]=!0;const se=n.getValue(we);se&&(se.liveStyle=!1)};for(const we in q){const se=te[we],Te=X[we];if(R.hasOwnProperty(we))continue;let Ne=!1;ow(se)&&ow(Te)?Ne=!Jk(se,Te):Ne=se!==Te,Ne?se!=null?pe(we):T.add(we):se!==void 0&&T.has(we)?pe(we):z.protectedKeys[we]=!0}z.prevProp=W,z.prevResolvedValues=te,z.isActive&&(R={...R,...te}),r&&n.blockInitialAnimation&&(B=!1);const re=le&&F;B&&(!re||G)&&E.push(...J.map(we=>{const se={type:H};if(typeof we=="string"&&r&&!re&&n.manuallyAnimateOnMount&&n.parent){const{parent:Te}=n,Ne=id(Te,we);if(Te.enteringChildren&&Ne){const{delayChildren:oe}=Ne.transition||{};se.delay=Zk(Te.enteringChildren,n,oe)}}return{animation:we,options:se}}))}if(T.size){const L={};if(typeof g.initial!="boolean"){const H=id(n,Array.isArray(g.initial)?g.initial[0]:g.initial);H&&H.transition&&(L.transition=H.transition)}T.forEach(H=>{const z=n.getBaseTarget(H),W=n.getValue(H);W&&(W.liveStyle=!0),L[H]=z??null}),E.push({animation:L})}let D=!!E.length;return r&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(E):Promise.resolve()}function h(p,g){var E;if(t[p].isActive===g)return Promise.resolve();(E=n.variantChildren)==null||E.forEach(T=>{var R;return(R=T.animationState)==null?void 0:R.setActive(p,g)}),t[p].isActive=g;const w=c(p);for(const T in t)t[T].protectedKeys={};return w}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=JI(),r=!0}}}function tG(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Jk(e,n):!1}function gc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function JI(){return{animate:gc(!0),whileInView:gc(),whileHover:gc(),whileTap:gc(),whileDrag:gc(),whileFocus:gc(),exit:gc()}}class ql{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nG extends ql{constructor(e){super(e),e.animationState||(e.animationState=eG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Tg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let rG=0;class iG extends ql{constructor(){super(...arguments),this.id=rG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const sG={animation:{Feature:nG},exit:{Feature:iG}};function Tf(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function e0(n){return{point:{x:n.pageX,y:n.pageY}}}const oG=n=>e=>I2(e)&&n(e,e0(e));function Jh(n,e,t,r){return Tf(n,e,oG(t),r)}const t4=1e-4,aG=1-t4,lG=1+t4,n4=.01,cG=0-n4,uG=0+n4;function Yi(n){return n.max-n.min}function dG(n,e,t){return Math.abs(n-e)<=t}function eT(n,e,t,r=.5){n.origin=r,n.originPoint=lr(e.min,e.max,n.origin),n.scale=Yi(t)/Yi(e),n.translate=lr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=aG&&n.scale<=lG||isNaN(n.scale))&&(n.scale=1),(n.translate>=cG&&n.translate<=uG||isNaN(n.translate))&&(n.translate=0)}function ef(n,e,t,r){eT(n.x,e.x,t.x,r?r.originX:void 0),eT(n.y,e.y,t.y,r?r.originY:void 0)}function tT(n,e,t){n.min=t.min+e.min,n.max=n.min+Yi(e)}function hG(n,e,t){tT(n.x,e.x,t.x),tT(n.y,e.y,t.y)}function nT(n,e,t){n.min=e.min-t.min,n.max=n.min+Yi(e)}function tf(n,e,t){nT(n.x,e.x,t.x),nT(n.y,e.y,t.y)}function Hs(n){return[n("x"),n("y")]}const r4=({current:n})=>n?n.ownerDocument.defaultView:null,rT=(n,e)=>Math.abs(n-e);function fG(n,e){const t=rT(n.x,e.x),r=rT(n.y,e.y);return Math.sqrt(t**2+r**2)}class i4{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=By(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,M=fG(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!R&&!M)return;const{point:D}=T,{timestamp:L}=pi;this.history.push({...D,timestamp:L});const{onStart:H,onMove:z}=this.handlers;R||(H&&H(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,T)},this.handlePointerMove=(T,R)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=Fy(R,this.transformPagePoint),tr.update(this.updatePoint,!0)},this.handlePointerUp=(T,R)=>{this.end();const{onEnd:M,onSessionEnd:D,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const H=By(T.type==="pointercancel"?this.lastMoveEventInfo:Fy(R,this.transformPagePoint),this.history);this.startEvent&&M&&M(T,H),D&&D(T,H)},!I2(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const h=e0(e),p=Fy(h,this.transformPagePoint),{point:g}=p,{timestamp:w}=pi;this.history=[{...g,timestamp:w}];const{onSessionStart:E}=t;E&&E(e,By(p,this.history)),this.removeListeners=Yf(Jh(this.contextWindow,"pointermove",this.handlePointerMove),Jh(this.contextWindow,"pointerup",this.handlePointerUp),Jh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fl(this.updatePoint)}}function Fy(n,e){return e?{point:e(n.point)}:n}function iT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function By({point:n},e){return{point:n,delta:iT(n,s4(e)),offset:iT(n,mG(e)),velocity:pG(e,.1)}}function mG(n){return n[0]}function s4(n){return n[n.length-1]}function pG(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=s4(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Go(e)));)t--;if(!r)return{x:0,y:0};const o=$o(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function gG(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?lr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?lr(t,n,r.max):Math.min(n,t)),n}function sT(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function yG(n,{top:e,left:t,bottom:r,right:i}){return{x:sT(n.x,t,i),y:sT(n.y,e,r)}}function oT(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function xG(n,e){return{x:oT(n.x,e.x),y:oT(n.y,e.y)}}function wG(n,e){let t=.5;const r=Yi(n),i=Yi(e);return i>r?t=_f(e.min,e.max-r,n.min):r>i&&(t=_f(n.min,n.max-i,e.min)),Da(0,1,t)}function vG(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const cw=.35;function _G(n=cw){return n===!1?n=0:n===!0&&(n=cw),{x:aT(n,"left","right"),y:aT(n,"top","bottom")}}function aT(n,e,t){return{min:lT(n,e),max:lT(n,t)}}function lT(n,e){return typeof n=="number"?n:n[e]||0}const EG=new WeakMap;class bG{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=E=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(e0(E).point)},c=(E,T)=>{const{drag:R,dragPropagation:M,onDragStart:D}=this.getProps();if(R&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kW(R),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hs(H=>{let z=this.getAxisMotionValue(H).get()||0;if(qo.test(z)){const{projection:W}=this.visualElement;if(W&&W.layout){const Q=W.layout.layoutBox[H];Q&&(z=Yi(Q)*(parseFloat(z)/100))}}this.originPoint[H]=z}),D&&tr.postRender(()=>D(E,T)),aw(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},h=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T;const{dragPropagation:R,dragDirectionLock:M,onDirectionLock:D,onDrag:L}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:H}=T;if(M&&this.currentDirection===null){this.currentDirection=AG(H),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",T.point,H),this.updateAxis("y",T.point,H),this.visualElement.render(),L&&L(E,T)},p=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T,this.stop(E,T),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Hs(E=>{var T;return this.getAnimationState(E)==="paused"&&((T=this.getAxisMotionValue(E).animation)==null?void 0:T.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new i4(e,{onSessionStart:o,onStart:c,onMove:h,onSessionEnd:p,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:r,contextWindow:r4(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&tr.postRender(()=>h(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!pm(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=gG(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Xu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=yG(r.layoutBox,e):this.constraints=!1,this.elastic=_G(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Hs(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=vG(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Xu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=IH(r,i.root,this.visualElement.getTransformPagePoint());let c=xG(i.layout.layoutBox,o);if(t){const h=t(EH(c));this.hasMutatedConstraints=!!h,h&&(c=zk(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),p=this.constraints||{},g=Hs(w=>{if(!pm(w,t,this.currentDirection))return;let E=p&&p[w]||{};c&&(E={min:0,max:0});const T=i?200:1e6,R=i?40:1e7,M={type:"inertia",velocity:r?e[w]:0,bounceStiffness:T,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...o,...E};return this.startAxisValueAnimation(w,M)});return Promise.all(g).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return aw(this.visualElement,e),r.start(M2(e,r,0,t,this.visualElement,!1))}stopAnimation(){Hs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Hs(t=>{const{drag:r}=this.getProps();if(!pm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:c,max:h}=i.layout.layoutBox[t];o.set(e[t]-lr(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Xu(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Hs(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const p=h.get();i[c]=wG({min:p,max:p},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Hs(c=>{if(!pm(c,e,null))return;const h=this.getAxisMotionValue(c),{min:p,max:g}=this.constraints[c];h.set(lr(p,g,i[c]))})}addListeners(){if(!this.visualElement.current)return;EG.set(this.visualElement,this);const e=this.visualElement.current,t=Jh(e,"pointerdown",p=>{const{drag:g,dragListener:w=!0}=this.getProps();g&&w&&this.start(p)}),r=()=>{const{dragConstraints:p}=this.getProps();Xu(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),tr.read(r);const c=Tf(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:p,hasLayoutChanged:g})=>{this.isDragging&&g&&(Hs(w=>{const E=this.getAxisMotionValue(w);E&&(this.originPoint[w]+=p[w].translate,E.set(E.get()+p[w].translate))}),this.visualElement.render())});return()=>{c(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=cw,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function pm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function AG(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class IG extends ql{constructor(e){super(e),this.removeGroupControls=Ys,this.removeListeners=Ys,this.controls=new bG(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ys}unmount(){this.removeGroupControls(),this.removeListeners()}}const cT=n=>(e,t)=>{n&&tr.postRender(()=>n(e,t))};class TG extends ql{constructor(){super(...arguments),this.removePointerDownListener=Ys}onPointerDown(e){this.session=new i4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:r4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cT(e),onStart:cT(t),onMove:r,onEnd:(o,c)=>{delete this.session,i&&tr.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=Jh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Sh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(At.test(n))n=parseFloat(n);else return n;const t=uT(n,e.target.x),r=uT(n,e.target.y);return`${t}% ${r}%`}},CG={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Bl.parse(n);if(i.length>5)return r;const o=Bl.createTransformer(n),c=typeof i[0]!="number"?1:0,h=t.x.scale*e.x,p=t.y.scale*e.y;i[0+c]/=h,i[1+c]/=p;const g=lr(h,p,.5);return typeof i[2+c]=="number"&&(i[2+c]/=g),typeof i[3+c]=="number"&&(i[3+c]/=g),o(i)}};let jy=!1;class SG extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;YW(RG),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),jy&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Gm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,jy=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||tr.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),A2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;jy=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function o4(n){const[e,t]=Sk(),r=P.useContext(n2);return A.jsx(SG,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(jk),isPresent:e,safeToRemove:t})}const RG={borderRadius:{...Sh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sh,borderTopRightRadius:Sh,borderBottomLeftRadius:Sh,borderBottomRightRadius:Sh,boxShadow:CG};function NG(n,e,t){const r=Mi(n)?n:Cd(n);return r.start(M2("",r,e,t)),r.animation}const kG=(n,e)=>n.depth-e.depth;class PG{constructor(){this.children=[],this.isDirty=!1}add(e){s2(this.children,e),this.isDirty=!0}remove(e){o2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(kG),this.isDirty=!1,this.children.forEach(e)}}function DG(n,e){const t=hs.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(Fl(r),n(o-e))};return tr.setup(r,!0),()=>Fl(r)}const a4=["TopLeft","TopRight","BottomLeft","BottomRight"],OG=a4.length,dT=n=>typeof n=="string"?parseFloat(n):n,hT=n=>typeof n=="number"||At.test(n);function MG(n,e,t,r,i,o){i?(n.opacity=lr(0,t.opacity??1,LG(r)),n.opacityExit=lr(e.opacity??1,0,VG(r))):o&&(n.opacity=lr(e.opacity??1,t.opacity??1,r));for(let c=0;c<OG;c++){const h=`border${a4[c]}Radius`;let p=fT(e,h),g=fT(t,h);if(p===void 0&&g===void 0)continue;p||(p=0),g||(g=0),p===0||g===0||hT(p)===hT(g)?(n[h]=Math.max(lr(dT(p),dT(g),r),0),(qo.test(g)||qo.test(p))&&(n[h]+="%")):n[h]=g}(e.rotate||t.rotate)&&(n.rotate=lr(e.rotate||0,t.rotate||0,r))}function fT(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const LG=l4(0,.5,KN),VG=l4(.5,.95,Ys);function l4(n,e,t){return r=>r<n?0:r>e?1:t(_f(n,e,r))}function mT(n,e){n.min=e.min,n.max=e.max}function Ws(n,e){mT(n.x,e.x),mT(n.y,e.y)}function pT(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function gT(n,e,t,r,i){return n-=e,n=Np(n,1/t,r),i!==void 0&&(n=Np(n,1/i,r)),n}function FG(n,e=0,t=1,r=.5,i,o=n,c=n){if(qo.test(e)&&(e=parseFloat(e),e=lr(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=lr(o.min,o.max,r);n===o&&(h-=e),n.min=gT(n.min,e,t,h,i),n.max=gT(n.max,e,t,h,i)}function yT(n,e,[t,r,i],o,c){FG(n,e[t],e[r],e[i],e.scale,o,c)}const BG=["x","scaleX","originX"],jG=["y","scaleY","originY"];function xT(n,e,t,r){yT(n.x,e,BG,t?t.x:void 0,r?r.x:void 0),yT(n.y,e,jG,t?t.y:void 0,r?r.y:void 0)}function wT(n){return n.translate===0&&n.scale===1}function c4(n){return wT(n.x)&&wT(n.y)}function vT(n,e){return n.min===e.min&&n.max===e.max}function UG(n,e){return vT(n.x,e.x)&&vT(n.y,e.y)}function _T(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function u4(n,e){return _T(n.x,e.x)&&_T(n.y,e.y)}function ET(n){return Yi(n.x)/Yi(n.y)}function bT(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class zG{constructor(){this.members=[]}add(e){s2(this.members,e),e.scheduleRender()}remove(e){if(o2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WG(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:g,rotate:w,rotateX:E,rotateY:T,skewX:R,skewY:M}=t;g&&(r=`perspective(${g}px) ${r}`),w&&(r+=`rotate(${w}deg) `),E&&(r+=`rotateX(${E}deg) `),T&&(r+=`rotateY(${T}deg) `),R&&(r+=`skewX(${R}deg) `),M&&(r+=`skewY(${M}deg) `)}const h=n.x.scale*e.x,p=n.y.scale*e.y;return(h!==1||p!==1)&&(r+=`scale(${h}, ${p})`),r||"none"}const Uy=["","X","Y","Z"],HG=1e3;let GG=0;function zy(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function d4(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Yk(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",tr,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&d4(r)}function h4({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},h=e==null?void 0:e()){this.id=GG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(KG),this.nodes.forEach(ZG),this.nodes.forEach(JG),this.nodes.forEach(XG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new PG)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new c2),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const p=this.eventHandlers.get(c);p&&p.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=Ck(c)&&!VW(c),this.instance=c;const{layoutId:h,layout:p,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(p||h)&&(this.isLayoutDirty=!0),n){let w,E=0;const T=()=>this.root.updateBlockedByResize=!1;tr.read(()=>{E=window.innerWidth}),n(c,()=>{const R=window.innerWidth;R!==E&&(E=R,this.root.updateBlockedByResize=!0,w&&w(),w=DG(T,250),Gm.hasAnimatedSinceResize&&(Gm.hasAnimatedSinceResize=!1,this.nodes.forEach(TT)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||p)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeLayoutChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||g.getDefaultTransition()||i$,{onLayoutAnimationStart:D,onLayoutAnimationComplete:L}=g.getProps(),H=!this.targetLayout||!u4(this.targetLayout,R),z=!E&&T;if(this.options.layoutRoot||this.resumeFrom||z||E&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const W={...E2(M,"layout"),onPlay:D,onComplete:L};(g.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W),this.setAnimationOrigin(w,z)}else E||TT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e$),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&d4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const E=this.path[w];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:h,layout:p}=this.options;if(h===void 0&&!p)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(AT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(IT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QG),this.nodes.forEach($G),this.nodes.forEach(qG)):this.nodes.forEach(IT),this.clearAllSnapshots();const h=hs.now();pi.delta=Da(0,1e3/60,h-pi.timestamp),pi.timestamp=h,pi.isProcessing=!0,Ny.update.process(pi),Ny.preRender.process(pi),Ny.render.process(pi),pi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,A2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YG),this.sharedNodes.forEach(t$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Yi(this.snapshot.measuredBox.x)&&!Yi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const p=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:p,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!c4(this.projectionDelta),p=this.getTransformTemplate(),g=p?p(this.latestValues,""):void 0,w=g!==this.prevTransformTemplateValue;c&&this.instance&&(h||_c(this.latestValues)||w)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let p=this.removeElementScroll(h);return c&&(p=this.removeTransform(p)),s$(p),{animationId:this.root.animationId,measuredBox:h,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:c}=this.options;if(!c)return Rr();const h=c.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(o$))){const{scroll:w}=this.root;w&&(Yu(h.x,w.offset.x),Yu(h.y,w.offset.y))}return h}removeElementScroll(c){var p;const h=Rr();if(Ws(h,c),(p=this.scroll)!=null&&p.wasRoot)return h;for(let g=0;g<this.path.length;g++){const w=this.path[g],{scroll:E,options:T}=w;w!==this.root&&E&&T.layoutScroll&&(E.wasRoot&&Ws(h,c),Yu(h.x,E.offset.x),Yu(h.y,E.offset.y))}return h}applyTransform(c,h=!1){const p=Rr();Ws(p,c);for(let g=0;g<this.path.length;g++){const w=this.path[g];!h&&w.options.layoutScroll&&w.scroll&&w!==w.root&&Qu(p,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),_c(w.latestValues)&&Qu(p,w.latestValues)}return _c(this.latestValues)&&Qu(p,this.latestValues),p}removeTransform(c){const h=Rr();Ws(h,c);for(let p=0;p<this.path.length;p++){const g=this.path[p];if(!g.instance||!_c(g.latestValues))continue;rw(g.latestValues)&&g.updateSnapshot();const w=Rr(),E=g.measurePageBox();Ws(w,E),xT(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,w)}return _c(this.latestValues)&&xT(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var T;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==h;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=pi.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rr(),this.relativeTargetOrigin=Rr(),tf(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),Ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Rr(),this.targetWithTransforms=Rr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ws(this.target,this.layout.layoutBox),Hk(this.target,this.targetDelta)):Ws(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rr(),this.relativeTargetOrigin=Rr(),tf(this.relativeTargetOrigin,this.target,R.target),Ws(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||rw(this.parent.latestValues)||Wk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let p=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(p=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===pi.timestamp&&(p=!1),p)return;const{layout:g,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||w))return;Ws(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,T=this.treeScale.y;AH(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Rr());const{target:R}=c;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pT(this.prevProjectionDelta.x,this.projectionDelta.x),pT(this.prevProjectionDelta.y,this.projectionDelta.y)),ef(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==T||!bT(this.projectionDelta.x,this.prevProjectionDelta.x)||!bT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zu(),this.projectionDelta=Zu(),this.projectionDeltaWithTransform=Zu()}setAnimationOrigin(c,h=!1){const p=this.snapshot,g=p?p.latestValues:{},w={...this.latestValues},E=Zu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=Rr(),R=p?p.source:void 0,M=this.layout?this.layout.source:void 0,D=R!==M,L=this.getStack(),H=!L||L.members.length<=1,z=!!(D&&!H&&this.options.crossfade===!0&&!this.path.some(r$));this.animationProgress=0;let W;this.mixTargetDelta=Q=>{const ie=Q/1e3;CT(E.x,c.x,ie),CT(E.y,c.y,ie),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tf(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n$(this.relativeTarget,this.relativeTargetOrigin,T,ie),W&&UG(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=Rr()),Ws(W,this.relativeTarget)),D&&(this.animationValues=w,MG(w,g,this.latestValues,ie,z,H)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ie},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,p,g;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(g=(p=this.resumingFrom)==null?void 0:p.currentAnimation)==null||g.stop(),this.pendingAnimation&&(Fl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tr.update(()=>{Gm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cd(0)),this.currentAnimation=NG(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),c.onUpdate&&c.onUpdate(w)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:p,layout:g,latestValues:w}=c;if(!(!h||!p||!g)){if(this!==c&&this.layout&&g&&f4(this.options.animationType,this.layout.layoutBox,g.layoutBox)){p=this.target||Rr();const E=Yi(this.layout.layoutBox.x);p.x.min=c.target.x.min,p.x.max=p.x.min+E;const T=Yi(this.layout.layoutBox.y);p.y.min=c.target.y.min,p.y.max=p.y.min+T}Ws(h,p),Qu(h,w),ef(this.projectionDeltaWithTransform,this.layoutCorrected,h,w)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new zG),this.sharedNodes.get(c).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:p}={}){const g=this.getStack();g&&g.promote(this,p),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:p}=c;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(h=!0),!h)return;const g={};p.z&&zy("z",c,g,this.animationValues);for(let w=0;w<Uy.length;w++)zy(`rotate${Uy[w]}`,c,g,this.animationValues),zy(`skew${Uy[w]}`,c,g,this.animationValues);c.render();for(const w in g)c.setStaticValue(w,g[w]),this.animationValues&&(this.animationValues[w]=g[w]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const p=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Hm(h==null?void 0:h.pointerEvents)||"",c.transform=p?p(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Hm(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!_c(this.latestValues)&&(c.transform=p?p({},""):"none",this.hasProjected=!1);return}c.visibility="";const w=g.animationValues||g.latestValues;this.applyTransformsToTarget();let E=WG(this.projectionDeltaWithTransform,this.treeScale,w);p&&(E=p(w,E)),c.transform=E;const{x:T,y:R}=this.projectionDelta;c.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,g.animationValues?c.opacity=g===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:c.opacity=g===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const M in If){if(w[M]===void 0)continue;const{correct:D,applyTo:L,isCSSVariable:H}=If[M],z=E==="none"?w[M]:D(w[M],g);if(L){const W=L.length;for(let Q=0;Q<W;Q++)c[L[Q]]=z}else H?this.options.visualElement.renderState.vars[M]=z:c[M]=z}this.options.layoutId&&(c.pointerEvents=g===this?Hm(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(AT),this.root.sharedNodes.clear()}}}function $G(n){n.updateLayout()}function qG(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,c=e.source!==n.layout.source;o==="size"?Hs(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],R=Yi(T);T.min=r[E].min,T.max=T.min+R}):f4(o,e.layoutBox,r)&&Hs(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],R=Yi(r[E]);T.max=T.min+R,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[E].max=n.relativeTarget[E].min+R)});const h=Zu();ef(h,r,e.layoutBox);const p=Zu();c?ef(p,n.applyTransform(i,!0),e.measuredBox):ef(p,r,e.layoutBox);const g=!c4(h);let w=!1;if(!n.resumeFrom){const E=n.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:T,layout:R}=E;if(T&&R){const M=Rr();tf(M,e.layoutBox,T.layoutBox);const D=Rr();tf(D,r,R.layoutBox),u4(M,D)||(w=!0),E.options.layoutRoot&&(n.relativeTarget=D,n.relativeTargetOrigin=M,n.relativeParent=E)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:p,layoutDelta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:w})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function KG(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function XG(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function YG(n){n.clearSnapshot()}function AT(n){n.clearMeasurements()}function IT(n){n.isLayoutDirty=!1}function QG(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function TT(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function ZG(n){n.resolveTargetDelta()}function JG(n){n.calcProjection()}function e$(n){n.resetSkewAndRotation()}function t$(n){n.removeLeadSnapshot()}function CT(n,e,t){n.translate=lr(e.translate,0,t),n.scale=lr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function ST(n,e,t,r){n.min=lr(e.min,t.min,r),n.max=lr(e.max,t.max,r)}function n$(n,e,t,r){ST(n.x,e.x,t.x,r),ST(n.y,e.y,t.y,r)}function r$(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const i$={duration:.45,ease:[.4,0,.1,1]},RT=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),NT=RT("applewebkit/")&&!RT("chrome/")?Math.round:Ys;function kT(n){n.min=NT(n.min),n.max=NT(n.max)}function s$(n){kT(n.x),kT(n.y)}function f4(n,e,t){return n==="position"||n==="preserve-aspect"&&!dG(ET(e),ET(t),.2)}function o$(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const a$=h4({attachResizeListener:(n,e)=>Tf(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wy={current:void 0},m4=h4({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Wy.current){const n=new a$({});n.mount(window),n.setOptions({layoutScroll:!0}),Wy.current=n}return Wy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),l$={pan:{Feature:TG},drag:{Feature:IG,ProjectionNode:m4,MeasureLayout:o4}};function PT(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&tr.postRender(()=>o(e,e0(e)))}class c$ extends ql{mount(){const{current:e}=this.node;e&&(this.unmount=PW(e,(t,r)=>(PT(this.node,r,"Start"),i=>PT(this.node,i,"End"))))}unmount(){}}class u$ extends ql{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yf(Tf(this.node.current,"focus",()=>this.onFocus()),Tf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function DT(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&tr.postRender(()=>o(e,e0(e)))}class d$ extends ql{mount(){const{current:e}=this.node;e&&(this.unmount=LW(e,(t,r)=>(DT(this.node,r,"Start"),(i,{success:o})=>DT(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const uw=new WeakMap,Hy=new WeakMap,h$=n=>{const e=uw.get(n.target);e&&e(n)},f$=n=>{n.forEach(h$)};function m$({root:n,...e}){const t=n||document;Hy.has(t)||Hy.set(t,{});const r=Hy.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(f$,{root:n,...e})),r[i]}function p$(n,e,t){const r=m$(e);return uw.set(n,t),r.observe(n),()=>{uw.delete(n),r.unobserve(n)}}const g$={some:0,all:1};class y$ extends ql{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:g$[i]},h=p=>{const{isIntersecting:g}=p;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:w,onViewportLeave:E}=this.node.getProps(),T=g?w:E;T&&T(p)};return p$(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(x$(e,t))&&this.startObserver()}unmount(){}}function x$({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const w$={inView:{Feature:y$},tap:{Feature:d$},focus:{Feature:u$},hover:{Feature:c$}},v$={layout:{ProjectionNode:m4,MeasureLayout:o4}},_$={...sG,...w$,...l$,...v$},Zo=_H(_$,OH);function E$({matchName:n,onDismiss:e,onSeeMatches:t}){const r=ta(),i=()=>{t&&t(),r(qn("Matches")),e()};return A.jsxs(Zo.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-pink-500 via-purple-500 to-indigo-600 text-white rounded-xl shadow-2xl",children:[A.jsx("button",{onClick:e,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:A.jsx(Li,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(YO,{className:"w-10 h-10 text-yellow-300 flex-shrink-0"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold",children:"It's a Match!"}),A.jsxs("p",{className:"text-sm opacity-90",children:["You and ",n," liked each other."]})]})]}),A.jsxs(Dt,{onClick:i,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["See Matches ",A.jsx(Lw,{className:"w-4 h-4 ml-2"})]})]})}function b$({senderName:n,senderSessionId:e,onDismiss:t,onView:r}){const i=ta(),o=()=>{r&&r(),i(qn(`Matches?openChat=${e}`)),t()};return A.jsxs(Zo.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-blue-500 via-sky-500 to-cyan-600 text-white rounded-xl shadow-2xl",children:[A.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:A.jsx(Li,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(cd,{className:"w-10 h-10 text-white/80 flex-shrink-0"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold",children:"New Message"}),A.jsxs("p",{className:"text-sm opacity-90",children:["You have a new message from ",n,"."]})]})]}),A.jsxs(Dt,{onClick:o,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["View Message ",A.jsx(Lw,{className:"w-4 h-4 ml-2"})]})]})}const jl=P.forwardRef(({className:n,type:e,...t},r)=>A.jsx("input",{type:e,className:ln("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));jl.displayName="Input";const Rd=P.forwardRef(({className:n,...e},t)=>A.jsx("textarea",{className:ln("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));Rd.displayName="Textarea";var A$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nn=A$.reduce((n,e)=>{const t=Td(`Primitive.${e}`),r=P.forwardRef((i,o)=>{const{asChild:c,...h}=i,p=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(p,{...h,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function I$(n,e){n&&Of.flushSync(()=>n.dispatchEvent(e))}var T$="Label",p4=P.forwardRef((n,e)=>A.jsx(nn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));p4.displayName=T$;var g4=p4;const C$=bg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),cs=P.forwardRef(({className:n,...e},t)=>A.jsx(g4,{ref:t,className:ln(C$(),n),...e}));cs.displayName=g4.displayName;function kp(n,[e,t]){return Math.min(t,Math.max(e,n))}function an(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function S$(n,e){const t=P.createContext(e),r=o=>{const{children:c,...h}=o,p=P.useMemo(()=>h,Object.values(h));return A.jsx(t.Provider,{value:p,children:c})};r.displayName=n+"Provider";function i(o){const c=P.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,i]}function Gd(n,e=[]){let t=[];function r(o,c){const h=P.createContext(c),p=t.length;t=[...t,c];const g=E=>{var H;const{scope:T,children:R,...M}=E,D=((H=T==null?void 0:T[n])==null?void 0:H[p])||h,L=P.useMemo(()=>M,Object.values(M));return A.jsx(D.Provider,{value:L,children:R})};g.displayName=o+"Provider";function w(E,T){var D;const R=((D=T==null?void 0:T[n])==null?void 0:D[p])||h,M=P.useContext(R);if(M)return M;if(c!==void 0)return c;throw new Error(`\`${E}\` must be used within \`${o}\``)}return[g,w]}const i=()=>{const o=t.map(c=>P.createContext(c));return function(h){const p=(h==null?void 0:h[n])||o;return P.useMemo(()=>({[`__scope${n}`]:{...h,[n]:p}}),[h,p])}};return i.scopeName=n,[r,R$(i,...e)]}function R$(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((h,{useScope:p,scopeName:g})=>{const E=p(o)[`__scope${g}`];return{...h,...E}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function y4(n){const e=n+"CollectionProvider",[t,r]=Gd(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=D=>{const{scope:L,children:H}=D,z=ze.useRef(null),W=ze.useRef(new Map).current;return A.jsx(i,{scope:L,itemMap:W,collectionRef:z,children:H})};c.displayName=e;const h=n+"CollectionSlot",p=Td(h),g=ze.forwardRef((D,L)=>{const{scope:H,children:z}=D,W=o(h,H),Q=bn(L,W.collectionRef);return A.jsx(p,{ref:Q,children:z})});g.displayName=h;const w=n+"CollectionItemSlot",E="data-radix-collection-item",T=Td(w),R=ze.forwardRef((D,L)=>{const{scope:H,children:z,...W}=D,Q=ze.useRef(null),ie=bn(L,Q),le=o(w,H);return ze.useEffect(()=>(le.itemMap.set(Q,{ref:Q,...W}),()=>void le.itemMap.delete(Q))),A.jsx(T,{[E]:"",ref:ie,children:z})});R.displayName=w;function M(D){const L=o(n+"CollectionConsumer",D);return ze.useCallback(()=>{const z=L.collectionRef.current;if(!z)return[];const W=Array.from(z.querySelectorAll(`[${E}]`));return Array.from(L.itemMap.values()).sort((le,F)=>W.indexOf(le.ref.current)-W.indexOf(F.ref.current))},[L.collectionRef,L.itemMap])}return[{Provider:c,Slot:g,ItemSlot:R},M,r]}var N$=P.createContext(void 0);function x4(n){const e=P.useContext(N$);return n||e||"ltr"}function Zc(n){const e=P.useRef(n);return P.useEffect(()=>{e.current=n}),P.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function k$(n,e=globalThis==null?void 0:globalThis.document){const t=Zc(n);P.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var P$="DismissableLayer",dw="dismissableLayer.update",D$="dismissableLayer.pointerDownOutside",O$="dismissableLayer.focusOutside",OT,w4=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),L2=P.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:c,onDismiss:h,...p}=n,g=P.useContext(w4),[w,E]=P.useState(null),T=(w==null?void 0:w.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,R]=P.useState({}),M=bn(e,F=>E(F)),D=Array.from(g.layers),[L]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),H=D.indexOf(L),z=w?D.indexOf(w):-1,W=g.layersWithOutsidePointerEventsDisabled.size>0,Q=z>=H,ie=V$(F=>{const B=F.target,G=[...g.branches].some(J=>J.contains(B));!Q||G||(i==null||i(F),c==null||c(F),F.defaultPrevented||h==null||h())},T),le=F$(F=>{const B=F.target;[...g.branches].some(J=>J.contains(B))||(o==null||o(F),c==null||c(F),F.defaultPrevented||h==null||h())},T);return k$(F=>{z===g.layers.size-1&&(r==null||r(F),!F.defaultPrevented&&h&&(F.preventDefault(),h()))},T),P.useEffect(()=>{if(w)return t&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(OT=T.body.style.pointerEvents,T.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(w)),g.layers.add(w),MT(),()=>{t&&g.layersWithOutsidePointerEventsDisabled.size===1&&(T.body.style.pointerEvents=OT)}},[w,T,t,g]),P.useEffect(()=>()=>{w&&(g.layers.delete(w),g.layersWithOutsidePointerEventsDisabled.delete(w),MT())},[w,g]),P.useEffect(()=>{const F=()=>R({});return document.addEventListener(dw,F),()=>document.removeEventListener(dw,F)},[]),A.jsx(nn.div,{...p,ref:M,style:{pointerEvents:W?Q?"auto":"none":void 0,...n.style},onFocusCapture:an(n.onFocusCapture,le.onFocusCapture),onBlurCapture:an(n.onBlurCapture,le.onBlurCapture),onPointerDownCapture:an(n.onPointerDownCapture,ie.onPointerDownCapture)})});L2.displayName=P$;var M$="DismissableLayerBranch",L$=P.forwardRef((n,e)=>{const t=P.useContext(w4),r=P.useRef(null),i=bn(e,r);return P.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),A.jsx(nn.div,{...n,ref:i})});L$.displayName=M$;function V$(n,e=globalThis==null?void 0:globalThis.document){const t=Zc(n),r=P.useRef(!1),i=P.useRef(()=>{});return P.useEffect(()=>{const o=h=>{if(h.target&&!r.current){let p=function(){v4(D$,t,g,{discrete:!0})};const g={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=p,e.addEventListener("click",i.current,{once:!0})):p()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function F$(n,e=globalThis==null?void 0:globalThis.document){const t=Zc(n),r=P.useRef(!1);return P.useEffect(()=>{const i=o=>{o.target&&!r.current&&v4(O$,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function MT(){const n=new CustomEvent(dw);document.dispatchEvent(n)}function v4(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?I$(i,o):i.dispatchEvent(o)}var Gy=0;function _4(){P.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??LT()),document.body.insertAdjacentElement("beforeend",n[1]??LT()),Gy++,()=>{Gy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gy--}},[])}function LT(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var $y="focusScope.autoFocusOnMount",qy="focusScope.autoFocusOnUnmount",VT={bubbles:!1,cancelable:!0},B$="FocusScope",V2=P.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...c}=n,[h,p]=P.useState(null),g=Zc(i),w=Zc(o),E=P.useRef(null),T=bn(e,D=>p(D)),R=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(r){let D=function(W){if(R.paused||!h)return;const Q=W.target;h.contains(Q)?E.current=Q:wl(E.current,{select:!0})},L=function(W){if(R.paused||!h)return;const Q=W.relatedTarget;Q!==null&&(h.contains(Q)||wl(E.current,{select:!0}))},H=function(W){if(document.activeElement===document.body)for(const ie of W)ie.removedNodes.length>0&&wl(h)};document.addEventListener("focusin",D),document.addEventListener("focusout",L);const z=new MutationObserver(H);return h&&z.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",L),z.disconnect()}}},[r,h,R.paused]),P.useEffect(()=>{if(h){BT.add(R);const D=document.activeElement;if(!h.contains(D)){const H=new CustomEvent($y,VT);h.addEventListener($y,g),h.dispatchEvent(H),H.defaultPrevented||(j$(G$(E4(h)),{select:!0}),document.activeElement===D&&wl(h))}return()=>{h.removeEventListener($y,g),setTimeout(()=>{const H=new CustomEvent(qy,VT);h.addEventListener(qy,w),h.dispatchEvent(H),H.defaultPrevented||wl(D??document.body,{select:!0}),h.removeEventListener(qy,w),BT.remove(R)},0)}}},[h,g,w,R]);const M=P.useCallback(D=>{if(!t&&!r||R.paused)return;const L=D.key==="Tab"&&!D.altKey&&!D.ctrlKey&&!D.metaKey,H=document.activeElement;if(L&&H){const z=D.currentTarget,[W,Q]=U$(z);W&&Q?!D.shiftKey&&H===Q?(D.preventDefault(),t&&wl(W,{select:!0})):D.shiftKey&&H===W&&(D.preventDefault(),t&&wl(Q,{select:!0})):H===z&&D.preventDefault()}},[t,r,R.paused]);return A.jsx(nn.div,{tabIndex:-1,...c,ref:T,onKeyDown:M})});V2.displayName=B$;function j$(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(wl(r,{select:e}),document.activeElement!==t)return}function U$(n){const e=E4(n),t=FT(e,n),r=FT(e.reverse(),n);return[t,r]}function E4(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function FT(n,e){for(const t of n)if(!z$(t,{upTo:e}))return t}function z$(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function W$(n){return n instanceof HTMLInputElement&&"select"in n}function wl(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&W$(n)&&e&&n.select()}}var BT=H$();function H$(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=jT(n,e),n.unshift(e)},remove(e){var t;n=jT(n,e),(t=n[0])==null||t.resume()}}}function jT(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function G$(n){return n.filter(e=>e.tagName!=="A")}var Fi=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},$$=SC[" useId ".trim().toString()]||(()=>{}),q$=0;function sd(n){const[e,t]=P.useState($$());return Fi(()=>{t(r=>r??String(q$++))},[n]),e?`radix-${e}`:""}const K$=["top","right","bottom","left"],Ul=Math.min,Is=Math.max,Pp=Math.round,gm=Math.floor,Ko=n=>({x:n,y:n}),X$={left:"right",right:"left",bottom:"top",top:"bottom"},Y$={start:"end",end:"start"};function hw(n,e,t){return Is(n,Ul(e,t))}function Ma(n,e){return typeof n=="function"?n(e):n}function La(n){return n.split("-")[0]}function $d(n){return n.split("-")[1]}function F2(n){return n==="x"?"y":"x"}function B2(n){return n==="y"?"height":"width"}const Q$=new Set(["top","bottom"]);function Fo(n){return Q$.has(La(n))?"y":"x"}function j2(n){return F2(Fo(n))}function Z$(n,e,t){t===void 0&&(t=!1);const r=$d(n),i=j2(n),o=B2(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=Dp(c)),[c,Dp(c)]}function J$(n){const e=Dp(n);return[fw(n),e,fw(e)]}function fw(n){return n.replace(/start|end/g,e=>Y$[e])}const UT=["left","right"],zT=["right","left"],eq=["top","bottom"],tq=["bottom","top"];function nq(n,e,t){switch(n){case"top":case"bottom":return t?e?zT:UT:e?UT:zT;case"left":case"right":return e?eq:tq;default:return[]}}function rq(n,e,t,r){const i=$d(n);let o=nq(La(n),t==="start",r);return i&&(o=o.map(c=>c+"-"+i),e&&(o=o.concat(o.map(fw)))),o}function Dp(n){return n.replace(/left|right|bottom|top/g,e=>X$[e])}function iq(n){return{top:0,right:0,bottom:0,left:0,...n}}function b4(n){return typeof n!="number"?iq(n):{top:n,right:n,bottom:n,left:n}}function Op(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function WT(n,e,t){let{reference:r,floating:i}=n;const o=Fo(e),c=j2(e),h=B2(c),p=La(e),g=o==="y",w=r.x+r.width/2-i.width/2,E=r.y+r.height/2-i.height/2,T=r[h]/2-i[h]/2;let R;switch(p){case"top":R={x:w,y:r.y-i.height};break;case"bottom":R={x:w,y:r.y+r.height};break;case"right":R={x:r.x+r.width,y:E};break;case"left":R={x:r.x-i.width,y:E};break;default:R={x:r.x,y:r.y}}switch($d(e)){case"start":R[c]-=T*(t&&g?-1:1);break;case"end":R[c]+=T*(t&&g?-1:1);break}return R}const sq=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:c}=t,h=o.filter(Boolean),p=await(c.isRTL==null?void 0:c.isRTL(e));let g=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:w,y:E}=WT(g,r,p),T=r,R={},M=0;for(let D=0;D<h.length;D++){const{name:L,fn:H}=h[D],{x:z,y:W,data:Q,reset:ie}=await H({x:w,y:E,initialPlacement:r,placement:T,strategy:i,middlewareData:R,rects:g,platform:c,elements:{reference:n,floating:e}});w=z??w,E=W??E,R={...R,[L]:{...R[L],...Q}},ie&&M<=50&&(M++,typeof ie=="object"&&(ie.placement&&(T=ie.placement),ie.rects&&(g=ie.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):ie.rects),{x:w,y:E}=WT(g,T,p)),D=-1)}return{x:w,y:E,placement:T,strategy:i,middlewareData:R}};async function Cf(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:c,elements:h,strategy:p}=n,{boundary:g="clippingAncestors",rootBoundary:w="viewport",elementContext:E="floating",altBoundary:T=!1,padding:R=0}=Ma(e,n),M=b4(R),L=h[T?E==="floating"?"reference":"floating":E],H=Op(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(L)))==null||t?L:L.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(h.floating)),boundary:g,rootBoundary:w,strategy:p})),z=E==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,W=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h.floating)),Q=await(o.isElement==null?void 0:o.isElement(W))?await(o.getScale==null?void 0:o.getScale(W))||{x:1,y:1}:{x:1,y:1},ie=Op(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:z,offsetParent:W,strategy:p}):z);return{top:(H.top-ie.top+M.top)/Q.y,bottom:(ie.bottom-H.bottom+M.bottom)/Q.y,left:(H.left-ie.left+M.left)/Q.x,right:(ie.right-H.right+M.right)/Q.x}}const oq=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:o,platform:c,elements:h,middlewareData:p}=e,{element:g,padding:w=0}=Ma(n,e)||{};if(g==null)return{};const E=b4(w),T={x:t,y:r},R=j2(i),M=B2(R),D=await c.getDimensions(g),L=R==="y",H=L?"top":"left",z=L?"bottom":"right",W=L?"clientHeight":"clientWidth",Q=o.reference[M]+o.reference[R]-T[R]-o.floating[M],ie=T[R]-o.reference[R],le=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g));let F=le?le[W]:0;(!F||!await(c.isElement==null?void 0:c.isElement(le)))&&(F=h.floating[W]||o.floating[M]);const B=Q/2-ie/2,G=F/2-D[M]/2-1,J=Ul(E[H],G),te=Ul(E[z],G),X=J,q=F-D[M]-te,pe=F/2-D[M]/2+B,re=hw(X,pe,q),Ie=!p.arrow&&$d(i)!=null&&pe!==re&&o.reference[M]/2-(pe<X?J:te)-D[M]/2<0,we=Ie?pe<X?pe-X:pe-q:0;return{[R]:T[R]+we,data:{[R]:re,centerOffset:pe-re-we,...Ie&&{alignmentOffset:we}},reset:Ie}}}),aq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:c,initialPlacement:h,platform:p,elements:g}=e,{mainAxis:w=!0,crossAxis:E=!0,fallbackPlacements:T,fallbackStrategy:R="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:D=!0,...L}=Ma(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const H=La(i),z=Fo(h),W=La(h)===h,Q=await(p.isRTL==null?void 0:p.isRTL(g.floating)),ie=T||(W||!D?[Dp(h)]:J$(h)),le=M!=="none";!T&&le&&ie.push(...rq(h,D,M,Q));const F=[h,...ie],B=await Cf(e,L),G=[];let J=((r=o.flip)==null?void 0:r.overflows)||[];if(w&&G.push(B[H]),E){const pe=Z$(i,c,Q);G.push(B[pe[0]],B[pe[1]])}if(J=[...J,{placement:i,overflows:G}],!G.every(pe=>pe<=0)){var te,X;const pe=(((te=o.flip)==null?void 0:te.index)||0)+1,re=F[pe];if(re&&(!(E==="alignment"?z!==Fo(re):!1)||J.every(se=>Fo(se.placement)===z?se.overflows[0]>0:!0)))return{data:{index:pe,overflows:J},reset:{placement:re}};let Ie=(X=J.filter(we=>we.overflows[0]<=0).sort((we,se)=>we.overflows[1]-se.overflows[1])[0])==null?void 0:X.placement;if(!Ie)switch(R){case"bestFit":{var q;const we=(q=J.filter(se=>{if(le){const Te=Fo(se.placement);return Te===z||Te==="y"}return!0}).map(se=>[se.placement,se.overflows.filter(Te=>Te>0).reduce((Te,Ne)=>Te+Ne,0)]).sort((se,Te)=>se[1]-Te[1])[0])==null?void 0:q[0];we&&(Ie=we);break}case"initialPlacement":Ie=h;break}if(i!==Ie)return{reset:{placement:Ie}}}return{}}}};function HT(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function GT(n){return K$.some(e=>n[e]>=0)}const lq=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=Ma(n,e);switch(r){case"referenceHidden":{const o=await Cf(e,{...i,elementContext:"reference"}),c=HT(o,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:GT(c)}}}case"escaped":{const o=await Cf(e,{...i,altBoundary:!0}),c=HT(o,t.floating);return{data:{escapedOffsets:c,escaped:GT(c)}}}default:return{}}}}},A4=new Set(["left","top"]);async function cq(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=La(t),h=$d(t),p=Fo(t)==="y",g=A4.has(c)?-1:1,w=o&&p?-1:1,E=Ma(e,n);let{mainAxis:T,crossAxis:R,alignmentAxis:M}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return h&&typeof M=="number"&&(R=h==="end"?M*-1:M),p?{x:R*w,y:T*g}:{x:T*g,y:R*w}}const uq=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:c,middlewareData:h}=e,p=await cq(e,n);return c===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:i+p.x,y:o+p.y,data:{...p,placement:c}}}}},dq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:h={fn:L=>{let{x:H,y:z}=L;return{x:H,y:z}}},...p}=Ma(n,e),g={x:t,y:r},w=await Cf(e,p),E=Fo(La(i)),T=F2(E);let R=g[T],M=g[E];if(o){const L=T==="y"?"top":"left",H=T==="y"?"bottom":"right",z=R+w[L],W=R-w[H];R=hw(z,R,W)}if(c){const L=E==="y"?"top":"left",H=E==="y"?"bottom":"right",z=M+w[L],W=M-w[H];M=hw(z,M,W)}const D=h.fn({...e,[T]:R,[E]:M});return{...D,data:{x:D.x-t,y:D.y-r,enabled:{[T]:o,[E]:c}}}}}},hq=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:o,middlewareData:c}=e,{offset:h=0,mainAxis:p=!0,crossAxis:g=!0}=Ma(n,e),w={x:t,y:r},E=Fo(i),T=F2(E);let R=w[T],M=w[E];const D=Ma(h,e),L=typeof D=="number"?{mainAxis:D,crossAxis:0}:{mainAxis:0,crossAxis:0,...D};if(p){const W=T==="y"?"height":"width",Q=o.reference[T]-o.floating[W]+L.mainAxis,ie=o.reference[T]+o.reference[W]-L.mainAxis;R<Q?R=Q:R>ie&&(R=ie)}if(g){var H,z;const W=T==="y"?"width":"height",Q=A4.has(La(i)),ie=o.reference[E]-o.floating[W]+(Q&&((H=c.offset)==null?void 0:H[E])||0)+(Q?0:L.crossAxis),le=o.reference[E]+o.reference[W]+(Q?0:((z=c.offset)==null?void 0:z[E])||0)-(Q?L.crossAxis:0);M<ie?M=ie:M>le&&(M=le)}return{[T]:R,[E]:M}}}},fq=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:o,platform:c,elements:h}=e,{apply:p=()=>{},...g}=Ma(n,e),w=await Cf(e,g),E=La(i),T=$d(i),R=Fo(i)==="y",{width:M,height:D}=o.floating;let L,H;E==="top"||E==="bottom"?(L=E,H=T===(await(c.isRTL==null?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(H=E,L=T==="end"?"top":"bottom");const z=D-w.top-w.bottom,W=M-w.left-w.right,Q=Ul(D-w[L],z),ie=Ul(M-w[H],W),le=!e.middlewareData.shift;let F=Q,B=ie;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(B=W),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=z),le&&!T){const J=Is(w.left,0),te=Is(w.right,0),X=Is(w.top,0),q=Is(w.bottom,0);R?B=M-2*(J!==0||te!==0?J+te:Is(w.left,w.right)):F=D-2*(X!==0||q!==0?X+q:Is(w.top,w.bottom))}await p({...e,availableWidth:B,availableHeight:F});const G=await c.getDimensions(h.floating);return M!==G.width||D!==G.height?{reset:{rects:!0}}:{}}}};function Sg(){return typeof window<"u"}function qd(n){return I4(n)?(n.nodeName||"").toLowerCase():"#document"}function Ns(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ra(n){var e;return(e=(I4(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function I4(n){return Sg()?n instanceof Node||n instanceof Ns(n).Node:!1}function po(n){return Sg()?n instanceof Element||n instanceof Ns(n).Element:!1}function Jo(n){return Sg()?n instanceof HTMLElement||n instanceof Ns(n).HTMLElement:!1}function $T(n){return!Sg()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ns(n).ShadowRoot}const mq=new Set(["inline","contents"]);function t0(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=go(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!mq.has(i)}const pq=new Set(["table","td","th"]);function gq(n){return pq.has(qd(n))}const yq=[":popover-open",":modal"];function Rg(n){return yq.some(e=>{try{return n.matches(e)}catch{return!1}})}const xq=["transform","translate","scale","rotate","perspective"],wq=["transform","translate","scale","rotate","perspective","filter"],vq=["paint","layout","strict","content"];function U2(n){const e=z2(),t=po(n)?go(n):n;return xq.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||wq.some(r=>(t.willChange||"").includes(r))||vq.some(r=>(t.contain||"").includes(r))}function _q(n){let e=zl(n);for(;Jo(e)&&!Nd(e);){if(U2(e))return e;if(Rg(e))return null;e=zl(e)}return null}function z2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Eq=new Set(["html","body","#document"]);function Nd(n){return Eq.has(qd(n))}function go(n){return Ns(n).getComputedStyle(n)}function Ng(n){return po(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function zl(n){if(qd(n)==="html")return n;const e=n.assignedSlot||n.parentNode||$T(n)&&n.host||ra(n);return $T(e)?e.host:e}function T4(n){const e=zl(n);return Nd(e)?n.ownerDocument?n.ownerDocument.body:n.body:Jo(e)&&t0(e)?e:T4(e)}function Sf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=T4(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),c=Ns(i);if(o){const h=mw(c);return e.concat(c,c.visualViewport||[],t0(i)?i:[],h&&t?Sf(h):[])}return e.concat(i,Sf(i,[],t))}function mw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function C4(n){const e=go(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Jo(n),o=i?n.offsetWidth:t,c=i?n.offsetHeight:r,h=Pp(t)!==o||Pp(r)!==c;return h&&(t=o,r=c),{width:t,height:r,$:h}}function W2(n){return po(n)?n:n.contextElement}function od(n){const e=W2(n);if(!Jo(e))return Ko(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=C4(e);let c=(o?Pp(t.width):t.width)/r,h=(o?Pp(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const bq=Ko(0);function S4(n){const e=Ns(n);return!z2()||!e.visualViewport?bq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Aq(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ns(n)?!1:e}function Jc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=W2(n);let c=Ko(1);e&&(r?po(r)&&(c=od(r)):c=od(n));const h=Aq(o,t,r)?S4(o):Ko(0);let p=(i.left+h.x)/c.x,g=(i.top+h.y)/c.y,w=i.width/c.x,E=i.height/c.y;if(o){const T=Ns(o),R=r&&po(r)?Ns(r):r;let M=T,D=mw(M);for(;D&&r&&R!==M;){const L=od(D),H=D.getBoundingClientRect(),z=go(D),W=H.left+(D.clientLeft+parseFloat(z.paddingLeft))*L.x,Q=H.top+(D.clientTop+parseFloat(z.paddingTop))*L.y;p*=L.x,g*=L.y,w*=L.x,E*=L.y,p+=W,g+=Q,M=Ns(D),D=mw(M)}}return Op({width:w,height:E,x:p,y:g})}function H2(n,e){const t=Ng(n).scrollLeft;return e?e.left+t:Jc(ra(n)).left+t}function R4(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:H2(n,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function Iq(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",c=ra(r),h=e?Rg(e.floating):!1;if(r===c||h&&o)return t;let p={scrollLeft:0,scrollTop:0},g=Ko(1);const w=Ko(0),E=Jo(r);if((E||!E&&!o)&&((qd(r)!=="body"||t0(c))&&(p=Ng(r)),Jo(r))){const R=Jc(r);g=od(r),w.x=R.x+r.clientLeft,w.y=R.y+r.clientTop}const T=c&&!E&&!o?R4(c,p,!0):Ko(0);return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-p.scrollLeft*g.x+w.x+T.x,y:t.y*g.y-p.scrollTop*g.y+w.y+T.y}}function Tq(n){return Array.from(n.getClientRects())}function Cq(n){const e=ra(n),t=Ng(n),r=n.ownerDocument.body,i=Is(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Is(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+H2(n);const h=-t.scrollTop;return go(r).direction==="rtl"&&(c+=Is(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:c,y:h}}function Sq(n,e){const t=Ns(n),r=ra(n),i=t.visualViewport;let o=r.clientWidth,c=r.clientHeight,h=0,p=0;if(i){o=i.width,c=i.height;const g=z2();(!g||g&&e==="fixed")&&(h=i.offsetLeft,p=i.offsetTop)}return{width:o,height:c,x:h,y:p}}const Rq=new Set(["absolute","fixed"]);function Nq(n,e){const t=Jc(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=Jo(n)?od(n):Ko(1),c=n.clientWidth*o.x,h=n.clientHeight*o.y,p=i*o.x,g=r*o.y;return{width:c,height:h,x:p,y:g}}function qT(n,e,t){let r;if(e==="viewport")r=Sq(n,t);else if(e==="document")r=Cq(ra(n));else if(po(e))r=Nq(e,t);else{const i=S4(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Op(r)}function N4(n,e){const t=zl(n);return t===e||!po(t)||Nd(t)?!1:go(t).position==="fixed"||N4(t,e)}function kq(n,e){const t=e.get(n);if(t)return t;let r=Sf(n,[],!1).filter(h=>po(h)&&qd(h)!=="body"),i=null;const o=go(n).position==="fixed";let c=o?zl(n):n;for(;po(c)&&!Nd(c);){const h=go(c),p=U2(c);!p&&h.position==="fixed"&&(i=null),(o?!p&&!i:!p&&h.position==="static"&&!!i&&Rq.has(i.position)||t0(c)&&!p&&N4(n,c))?r=r.filter(w=>w!==c):i=h,c=zl(c)}return e.set(n,r),r}function Pq(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?Rg(e)?[]:kq(e,this._c):[].concat(t),r],h=c[0],p=c.reduce((g,w)=>{const E=qT(e,w,i);return g.top=Is(E.top,g.top),g.right=Ul(E.right,g.right),g.bottom=Ul(E.bottom,g.bottom),g.left=Is(E.left,g.left),g},qT(e,h,i));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function Dq(n){const{width:e,height:t}=C4(n);return{width:e,height:t}}function Oq(n,e,t){const r=Jo(e),i=ra(e),o=t==="fixed",c=Jc(n,!0,o,e);let h={scrollLeft:0,scrollTop:0};const p=Ko(0);function g(){p.x=H2(i)}if(r||!r&&!o)if((qd(e)!=="body"||t0(i))&&(h=Ng(e)),r){const R=Jc(e,!0,o,e);p.x=R.x+e.clientLeft,p.y=R.y+e.clientTop}else i&&g();o&&!r&&i&&g();const w=i&&!r&&!o?R4(i,h):Ko(0),E=c.left+h.scrollLeft-p.x-w.x,T=c.top+h.scrollTop-p.y-w.y;return{x:E,y:T,width:c.width,height:c.height}}function Ky(n){return go(n).position==="static"}function KT(n,e){if(!Jo(n)||go(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ra(n)===t&&(t=t.ownerDocument.body),t}function k4(n,e){const t=Ns(n);if(Rg(n))return t;if(!Jo(n)){let i=zl(n);for(;i&&!Nd(i);){if(po(i)&&!Ky(i))return i;i=zl(i)}return t}let r=KT(n,e);for(;r&&gq(r)&&Ky(r);)r=KT(r,e);return r&&Nd(r)&&Ky(r)&&!U2(r)?t:r||_q(n)||t}const Mq=async function(n){const e=this.getOffsetParent||k4,t=this.getDimensions,r=await t(n.floating);return{reference:Oq(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Lq(n){return go(n).direction==="rtl"}const Vq={convertOffsetParentRelativeRectToViewportRelativeRect:Iq,getDocumentElement:ra,getClippingRect:Pq,getOffsetParent:k4,getElementRects:Mq,getClientRects:Tq,getDimensions:Dq,getScale:od,isElement:po,isRTL:Lq};function P4(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Fq(n,e){let t=null,r;const i=ra(n);function o(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function c(h,p){h===void 0&&(h=!1),p===void 0&&(p=1),o();const g=n.getBoundingClientRect(),{left:w,top:E,width:T,height:R}=g;if(h||e(),!T||!R)return;const M=gm(E),D=gm(i.clientWidth-(w+T)),L=gm(i.clientHeight-(E+R)),H=gm(w),W={rootMargin:-M+"px "+-D+"px "+-L+"px "+-H+"px",threshold:Is(0,Ul(1,p))||1};let Q=!0;function ie(le){const F=le[0].intersectionRatio;if(F!==p){if(!Q)return c();F?c(!1,F):r=setTimeout(()=>{c(!1,1e-7)},1e3)}F===1&&!P4(g,n.getBoundingClientRect())&&c(),Q=!1}try{t=new IntersectionObserver(ie,{...W,root:i.ownerDocument})}catch{t=new IntersectionObserver(ie,W)}t.observe(n)}return c(!0),o}function Bq(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:p=!1}=r,g=W2(n),w=i||o?[...g?Sf(g):[],...Sf(e)]:[];w.forEach(H=>{i&&H.addEventListener("scroll",t,{passive:!0}),o&&H.addEventListener("resize",t)});const E=g&&h?Fq(g,t):null;let T=-1,R=null;c&&(R=new ResizeObserver(H=>{let[z]=H;z&&z.target===g&&R&&(R.unobserve(e),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var W;(W=R)==null||W.observe(e)})),t()}),g&&!p&&R.observe(g),R.observe(e));let M,D=p?Jc(n):null;p&&L();function L(){const H=Jc(n);D&&!P4(D,H)&&t(),D=H,M=requestAnimationFrame(L)}return t(),()=>{var H;w.forEach(z=>{i&&z.removeEventListener("scroll",t),o&&z.removeEventListener("resize",t)}),E==null||E(),(H=R)==null||H.disconnect(),R=null,p&&cancelAnimationFrame(M)}}const jq=uq,Uq=dq,zq=aq,Wq=fq,Hq=lq,XT=oq,Gq=hq,$q=(n,e,t)=>{const r=new Map,i={platform:Vq,...t},o={...i.platform,_c:r};return sq(n,e,{...i,platform:o})};var qq=typeof document<"u",Kq=function(){},$m=qq?P.useLayoutEffect:Kq;function Mp(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Mp(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const o=i[r];if(!(o==="_owner"&&n.$$typeof)&&!Mp(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function D4(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function YT(n,e){const t=D4(n);return Math.round(e*t)/t}function Xy(n){const e=P.useRef(n);return $m(()=>{e.current=n}),e}function Xq(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:c}={},transform:h=!0,whileElementsMounted:p,open:g}=n,[w,E]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[T,R]=P.useState(r);Mp(T,r)||R(r);const[M,D]=P.useState(null),[L,H]=P.useState(null),z=P.useCallback(se=>{se!==le.current&&(le.current=se,D(se))},[]),W=P.useCallback(se=>{se!==F.current&&(F.current=se,H(se))},[]),Q=o||M,ie=c||L,le=P.useRef(null),F=P.useRef(null),B=P.useRef(w),G=p!=null,J=Xy(p),te=Xy(i),X=Xy(g),q=P.useCallback(()=>{if(!le.current||!F.current)return;const se={placement:e,strategy:t,middleware:T};te.current&&(se.platform=te.current),$q(le.current,F.current,se).then(Te=>{const Ne={...Te,isPositioned:X.current!==!1};pe.current&&!Mp(B.current,Ne)&&(B.current=Ne,Of.flushSync(()=>{E(Ne)}))})},[T,e,t,te,X]);$m(()=>{g===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,E(se=>({...se,isPositioned:!1})))},[g]);const pe=P.useRef(!1);$m(()=>(pe.current=!0,()=>{pe.current=!1}),[]),$m(()=>{if(Q&&(le.current=Q),ie&&(F.current=ie),Q&&ie){if(J.current)return J.current(Q,ie,q);q()}},[Q,ie,q,J,G]);const re=P.useMemo(()=>({reference:le,floating:F,setReference:z,setFloating:W}),[z,W]),Ie=P.useMemo(()=>({reference:Q,floating:ie}),[Q,ie]),we=P.useMemo(()=>{const se={position:t,left:0,top:0};if(!Ie.floating)return se;const Te=YT(Ie.floating,w.x),Ne=YT(Ie.floating,w.y);return h?{...se,transform:"translate("+Te+"px, "+Ne+"px)",...D4(Ie.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Te,top:Ne}},[t,h,Ie.floating,w.x,w.y]);return P.useMemo(()=>({...w,update:q,refs:re,elements:Ie,floatingStyles:we}),[w,q,re,Ie,we])}const Yq=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?XT({element:r.current,padding:i}).fn(t):{}:r?XT({element:r,padding:i}).fn(t):{}}}},Qq=(n,e)=>({...jq(n),options:[n,e]}),Zq=(n,e)=>({...Uq(n),options:[n,e]}),Jq=(n,e)=>({...Gq(n),options:[n,e]}),eK=(n,e)=>({...zq(n),options:[n,e]}),tK=(n,e)=>({...Wq(n),options:[n,e]}),nK=(n,e)=>({...Hq(n),options:[n,e]}),rK=(n,e)=>({...Yq(n),options:[n,e]});var iK="Arrow",O4=P.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...o}=n;return A.jsx(nn.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:A.jsx("polygon",{points:"0,0 30,0 15,10"})})});O4.displayName=iK;var sK=O4;function G2(n){const[e,t]=P.useState(void 0);return Fi(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let c,h;if("borderBoxSize"in o){const p=o.borderBoxSize,g=Array.isArray(p)?p[0]:p;c=g.inlineSize,h=g.blockSize}else c=n.offsetWidth,h=n.offsetHeight;t({width:c,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var $2="Popper",[M4,L4]=Gd($2),[oK,V4]=M4($2),F4=n=>{const{__scopePopper:e,children:t}=n,[r,i]=P.useState(null);return A.jsx(oK,{scope:e,anchor:r,onAnchorChange:i,children:t})};F4.displayName=$2;var B4="PopperAnchor",j4=P.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,o=V4(B4,t),c=P.useRef(null),h=bn(e,c);return P.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:A.jsx(nn.div,{...i,ref:h})});j4.displayName=B4;var q2="PopperContent",[aK,lK]=M4(q2),U4=P.forwardRef((n,e)=>{var Pe,Ge,at,st,ct,Et;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:c=0,arrowPadding:h=0,avoidCollisions:p=!0,collisionBoundary:g=[],collisionPadding:w=0,sticky:E="partial",hideWhenDetached:T=!1,updatePositionStrategy:R="optimized",onPlaced:M,...D}=n,L=V4(q2,t),[H,z]=P.useState(null),W=bn(e,ht=>z(ht)),[Q,ie]=P.useState(null),le=G2(Q),F=(le==null?void 0:le.width)??0,B=(le==null?void 0:le.height)??0,G=r+(o!=="center"?"-"+o:""),J=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},te=Array.isArray(g)?g:[g],X=te.length>0,q={padding:J,boundary:te.filter(uK),altBoundary:X},{refs:pe,floatingStyles:re,placement:Ie,isPositioned:we,middlewareData:se}=Xq({strategy:"fixed",placement:G,whileElementsMounted:(...ht)=>Bq(...ht,{animationFrame:R==="always"}),elements:{reference:L.anchor},middleware:[Qq({mainAxis:i+B,alignmentAxis:c}),p&&Zq({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?Jq():void 0,...q}),p&&eK({...q}),tK({...q,apply:({elements:ht,rects:gn,availableWidth:Mn,availableHeight:Pr})=>{const{width:Qt,height:zt}=gn.reference,mt=ht.floating.style;mt.setProperty("--radix-popper-available-width",`${Mn}px`),mt.setProperty("--radix-popper-available-height",`${Pr}px`),mt.setProperty("--radix-popper-anchor-width",`${Qt}px`),mt.setProperty("--radix-popper-anchor-height",`${zt}px`)}}),Q&&rK({element:Q,padding:h}),dK({arrowWidth:F,arrowHeight:B}),T&&nK({strategy:"referenceHidden",...q})]}),[Te,Ne]=H4(Ie),oe=Zc(M);Fi(()=>{we&&(oe==null||oe())},[we,oe]);const he=(Pe=se.arrow)==null?void 0:Pe.x,Se=(Ge=se.arrow)==null?void 0:Ge.y,Le=((at=se.arrow)==null?void 0:at.centerOffset)!==0,[it,Re]=P.useState();return Fi(()=>{H&&Re(window.getComputedStyle(H).zIndex)},[H]),A.jsx("div",{ref:pe.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:we?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:it,"--radix-popper-transform-origin":[(st=se.transformOrigin)==null?void 0:st.x,(ct=se.transformOrigin)==null?void 0:ct.y].join(" "),...((Et=se.hide)==null?void 0:Et.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:A.jsx(aK,{scope:t,placedSide:Te,onArrowChange:ie,arrowX:he,arrowY:Se,shouldHideArrow:Le,children:A.jsx(nn.div,{"data-side":Te,"data-align":Ne,...D,ref:W,style:{...D.style,animation:we?void 0:"none"}})})})});U4.displayName=q2;var z4="PopperArrow",cK={top:"bottom",right:"left",bottom:"top",left:"right"},W4=P.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,o=lK(z4,r),c=cK[o.placedSide];return A.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:A.jsx(sK,{...i,ref:t,style:{...i.style,display:"block"}})})});W4.displayName=z4;function uK(n){return n!==null}var dK=n=>({name:"transformOrigin",options:n,fn(e){var L,H,z;const{placement:t,rects:r,middlewareData:i}=e,c=((L=i.arrow)==null?void 0:L.centerOffset)!==0,h=c?0:n.arrowWidth,p=c?0:n.arrowHeight,[g,w]=H4(t),E={start:"0%",center:"50%",end:"100%"}[w],T=(((H=i.arrow)==null?void 0:H.x)??0)+h/2,R=(((z=i.arrow)==null?void 0:z.y)??0)+p/2;let M="",D="";return g==="bottom"?(M=c?E:`${T}px`,D=`${-p}px`):g==="top"?(M=c?E:`${T}px`,D=`${r.floating.height+p}px`):g==="right"?(M=`${-p}px`,D=c?E:`${R}px`):g==="left"&&(M=`${r.floating.width+p}px`,D=c?E:`${R}px`),{data:{x:M,y:D}}}});function H4(n){const[e,t="center"]=n.split("-");return[e,t]}var hK=F4,fK=j4,mK=U4,pK=W4,gK="Portal",K2=P.forwardRef((n,e)=>{var h;const{container:t,...r}=n,[i,o]=P.useState(!1);Fi(()=>o(!0),[]);const c=t||i&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return c?qC.createPortal(A.jsx(nn.div,{...r,ref:e}),c):null});K2.displayName=gK;var yK=SC[" useInsertionEffect ".trim().toString()]||Fi;function Rf({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,c]=xK({defaultProp:e,onChange:t}),h=n!==void 0,p=h?n:i;{const w=P.useRef(n!==void 0);P.useEffect(()=>{const E=w.current;E!==h&&console.warn(`${r} is changing from ${E?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),w.current=h},[h,r])}const g=P.useCallback(w=>{var E;if(h){const T=wK(w)?w(n):w;T!==n&&((E=c.current)==null||E.call(c,T))}else o(w)},[h,n,o,c]);return[p,g]}function xK({defaultProp:n,onChange:e}){const[t,r]=P.useState(n),i=P.useRef(t),o=P.useRef(e);return yK(()=>{o.current=e},[e]),P.useEffect(()=>{var c;i.current!==t&&((c=o.current)==null||c.call(o,t),i.current=t)},[t,i]),[t,r,o]}function wK(n){return typeof n=="function"}function X2(n){const e=P.useRef({value:n,previous:n});return P.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var G4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vK="VisuallyHidden",_K=P.forwardRef((n,e)=>A.jsx(nn.span,{...n,ref:e,style:{...G4,...n.style}}));_K.displayName=vK;var EK=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Fu=new WeakMap,ym=new WeakMap,xm={},Yy=0,$4=function(n){return n&&(n.host||$4(n.parentNode))},bK=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=$4(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},AK=function(n,e,t,r){var i=bK(e,Array.isArray(n)?n:[n]);xm[t]||(xm[t]=new WeakMap);var o=xm[t],c=[],h=new Set,p=new Set(i),g=function(E){!E||h.has(E)||(h.add(E),g(E.parentNode))};i.forEach(g);var w=function(E){!E||p.has(E)||Array.prototype.forEach.call(E.children,function(T){if(h.has(T))w(T);else try{var R=T.getAttribute(r),M=R!==null&&R!=="false",D=(Fu.get(T)||0)+1,L=(o.get(T)||0)+1;Fu.set(T,D),o.set(T,L),c.push(T),D===1&&M&&ym.set(T,!0),L===1&&T.setAttribute(t,"true"),M||T.setAttribute(r,"true")}catch(H){console.error("aria-hidden: cannot operate on ",T,H)}})};return w(e),h.clear(),Yy++,function(){c.forEach(function(E){var T=Fu.get(E)-1,R=o.get(E)-1;Fu.set(E,T),o.set(E,R),T||(ym.has(E)||E.removeAttribute(r),ym.delete(E)),R||E.removeAttribute(t)}),Yy--,Yy||(Fu=new WeakMap,Fu=new WeakMap,ym=new WeakMap,xm={})}},q4=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=EK(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),AK(r,i,t,"aria-hidden")):function(){return null}},Oo=function(){return Oo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Oo.apply(this,arguments)};function K4(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function IK(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var qm="right-scroll-bar-position",Km="width-before-scroll-bar",TK="with-scroll-bars-hidden",CK="--removed-body-scroll-bar-size";function Qy(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function SK(n,e){var t=P.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var RK=typeof window<"u"?P.useLayoutEffect:P.useEffect,QT=new WeakMap;function NK(n,e){var t=SK(null,function(r){return n.forEach(function(i){return Qy(i,r)})});return RK(function(){var r=QT.get(t);if(r){var i=new Set(r),o=new Set(n),c=t.current;i.forEach(function(h){o.has(h)||Qy(h,null)}),o.forEach(function(h){i.has(h)||Qy(h,c)})}QT.set(t,n)},[n]),t}function kK(n){return n}function PK(n,e){e===void 0&&(e=kK);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var c=e(o,r);return t.push(c),function(){t=t.filter(function(h){return h!==c})}},assignSyncMedium:function(o){for(r=!0;t.length;){var c=t;t=[],c.forEach(o)}t={push:function(h){return o(h)},filter:function(){return t}}},assignMedium:function(o){r=!0;var c=[];if(t.length){var h=t;t=[],h.forEach(o),c=t}var p=function(){var w=c;c=[],w.forEach(o)},g=function(){return Promise.resolve().then(p)};g(),t={push:function(w){c.push(w),g()},filter:function(w){return c=c.filter(w),t}}}};return i}function DK(n){n===void 0&&(n={});var e=PK(null);return e.options=Oo({async:!0,ssr:!1},n),e}var X4=function(n){var e=n.sideCar,t=K4(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,Oo({},t))};X4.isSideCarExport=!0;function OK(n,e){return n.useMedium(e),X4}var Y4=DK(),Zy=function(){},kg=P.forwardRef(function(n,e){var t=P.useRef(null),r=P.useState({onScrollCapture:Zy,onWheelCapture:Zy,onTouchMoveCapture:Zy}),i=r[0],o=r[1],c=n.forwardProps,h=n.children,p=n.className,g=n.removeScrollBar,w=n.enabled,E=n.shards,T=n.sideCar,R=n.noRelative,M=n.noIsolation,D=n.inert,L=n.allowPinchZoom,H=n.as,z=H===void 0?"div":H,W=n.gapMode,Q=K4(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ie=T,le=NK([t,e]),F=Oo(Oo({},Q),i);return P.createElement(P.Fragment,null,w&&P.createElement(ie,{sideCar:Y4,removeScrollBar:g,shards:E,noRelative:R,noIsolation:M,inert:D,setCallbacks:o,allowPinchZoom:!!L,lockRef:t,gapMode:W}),c?P.cloneElement(P.Children.only(h),Oo(Oo({},F),{ref:le})):P.createElement(z,Oo({},F,{className:p,ref:le}),h))});kg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};kg.classNames={fullWidth:Km,zeroRight:qm};var MK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LK(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=MK();return e&&n.setAttribute("nonce",e),n}function VK(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function FK(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var BK=function(){var n=0,e=null;return{add:function(t){n==0&&(e=LK())&&(VK(e,t),FK(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},jK=function(){var n=BK();return function(e,t){P.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},Q4=function(){var n=jK(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},UK={left:0,top:0,right:0,gap:0},Jy=function(n){return parseInt(n||"",10)||0},zK=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[Jy(t),Jy(r),Jy(i)]},WK=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return UK;var e=zK(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},HK=Q4(),ad="data-scroll-locked",GK=function(n,e,t,r){var i=n.left,o=n.top,c=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(TK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(ad,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qm,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(Km,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(qm," .").concat(qm,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Km," .").concat(Km,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ad,`] {
    `).concat(CK,": ").concat(h,`px;
  }
`)},ZT=function(){var n=parseInt(document.body.getAttribute(ad)||"0",10);return isFinite(n)?n:0},$K=function(){P.useEffect(function(){return document.body.setAttribute(ad,(ZT()+1).toString()),function(){var n=ZT()-1;n<=0?document.body.removeAttribute(ad):document.body.setAttribute(ad,n.toString())}},[])},qK=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;$K();var o=P.useMemo(function(){return WK(i)},[i]);return P.createElement(HK,{styles:GK(o,!e,i,t?"":"!important")})},pw=!1;if(typeof window<"u")try{var wm=Object.defineProperty({},"passive",{get:function(){return pw=!0,!0}});window.addEventListener("test",wm,wm),window.removeEventListener("test",wm,wm)}catch{pw=!1}var Bu=pw?{passive:!1}:!1,KK=function(n){return n.tagName==="TEXTAREA"},Z4=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!KK(n)&&t[e]==="visible")},XK=function(n){return Z4(n,"overflowY")},YK=function(n){return Z4(n,"overflowX")},JT=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=J4(n,r);if(i){var o=eP(n,r),c=o[1],h=o[2];if(c>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},QK=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},ZK=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},J4=function(n,e){return n==="v"?XK(e):YK(e)},eP=function(n,e){return n==="v"?QK(e):ZK(e)},JK=function(n,e){return n==="h"&&e==="rtl"?-1:1},eX=function(n,e,t,r,i){var o=JK(n,window.getComputedStyle(e).direction),c=o*r,h=t.target,p=e.contains(h),g=!1,w=c>0,E=0,T=0;do{if(!h)break;var R=eP(n,h),M=R[0],D=R[1],L=R[2],H=D-L-o*M;(M||H)&&J4(n,h)&&(E+=H,T+=M);var z=h.parentNode;h=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!p&&h!==document.body||p&&(e.contains(h)||e===h));return(w&&Math.abs(E)<1||!w&&Math.abs(T)<1)&&(g=!0),g},vm=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},eC=function(n){return[n.deltaX,n.deltaY]},tC=function(n){return n&&"current"in n?n.current:n},tX=function(n,e){return n[0]===e[0]&&n[1]===e[1]},nX=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},rX=0,ju=[];function iX(n){var e=P.useRef([]),t=P.useRef([0,0]),r=P.useRef(),i=P.useState(rX++)[0],o=P.useState(Q4)[0],c=P.useRef(n);P.useEffect(function(){c.current=n},[n]),P.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var D=IK([n.lockRef.current],(n.shards||[]).map(tC),!0).filter(Boolean);return D.forEach(function(L){return L.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),D.forEach(function(L){return L.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var h=P.useCallback(function(D,L){if("touches"in D&&D.touches.length===2||D.type==="wheel"&&D.ctrlKey)return!c.current.allowPinchZoom;var H=vm(D),z=t.current,W="deltaX"in D?D.deltaX:z[0]-H[0],Q="deltaY"in D?D.deltaY:z[1]-H[1],ie,le=D.target,F=Math.abs(W)>Math.abs(Q)?"h":"v";if("touches"in D&&F==="h"&&le.type==="range")return!1;var B=JT(F,le);if(!B)return!0;if(B?ie=F:(ie=F==="v"?"h":"v",B=JT(F,le)),!B)return!1;if(!r.current&&"changedTouches"in D&&(W||Q)&&(r.current=ie),!ie)return!0;var G=r.current||ie;return eX(G,L,D,G==="h"?W:Q)},[]),p=P.useCallback(function(D){var L=D;if(!(!ju.length||ju[ju.length-1]!==o)){var H="deltaY"in L?eC(L):vm(L),z=e.current.filter(function(ie){return ie.name===L.type&&(ie.target===L.target||L.target===ie.shadowParent)&&tX(ie.delta,H)})[0];if(z&&z.should){L.cancelable&&L.preventDefault();return}if(!z){var W=(c.current.shards||[]).map(tC).filter(Boolean).filter(function(ie){return ie.contains(L.target)}),Q=W.length>0?h(L,W[0]):!c.current.noIsolation;Q&&L.cancelable&&L.preventDefault()}}},[]),g=P.useCallback(function(D,L,H,z){var W={name:D,delta:L,target:H,should:z,shadowParent:sX(H)};e.current.push(W),setTimeout(function(){e.current=e.current.filter(function(Q){return Q!==W})},1)},[]),w=P.useCallback(function(D){t.current=vm(D),r.current=void 0},[]),E=P.useCallback(function(D){g(D.type,eC(D),D.target,h(D,n.lockRef.current))},[]),T=P.useCallback(function(D){g(D.type,vm(D),D.target,h(D,n.lockRef.current))},[]);P.useEffect(function(){return ju.push(o),n.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:T}),document.addEventListener("wheel",p,Bu),document.addEventListener("touchmove",p,Bu),document.addEventListener("touchstart",w,Bu),function(){ju=ju.filter(function(D){return D!==o}),document.removeEventListener("wheel",p,Bu),document.removeEventListener("touchmove",p,Bu),document.removeEventListener("touchstart",w,Bu)}},[]);var R=n.removeScrollBar,M=n.inert;return P.createElement(P.Fragment,null,M?P.createElement(o,{styles:nX(i)}):null,R?P.createElement(qK,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function sX(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const oX=OK(Y4,iX);var Y2=P.forwardRef(function(n,e){return P.createElement(kg,Oo({},n,{ref:e,sideCar:oX}))});Y2.classNames=kg.classNames;var aX=[" ","Enter","ArrowUp","ArrowDown"],lX=[" ","Enter"],eu="Select",[Pg,Dg,cX]=y4(eu),[Kd,wJ]=Gd(eu,[cX,L4]),Og=L4(),[uX,Kl]=Kd(eu),[dX,hX]=Kd(eu),tP=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:o,value:c,defaultValue:h,onValueChange:p,dir:g,name:w,autoComplete:E,disabled:T,required:R,form:M}=n,D=Og(e),[L,H]=P.useState(null),[z,W]=P.useState(null),[Q,ie]=P.useState(!1),le=x4(g),[F,B]=Rf({prop:r,defaultProp:i??!1,onChange:o,caller:eu}),[G,J]=Rf({prop:c,defaultProp:h,onChange:p,caller:eu}),te=P.useRef(null),X=L?M||!!L.closest("form"):!0,[q,pe]=P.useState(new Set),re=Array.from(q).map(Ie=>Ie.props.value).join(";");return A.jsx(hK,{...D,children:A.jsxs(uX,{required:R,scope:e,trigger:L,onTriggerChange:H,valueNode:z,onValueNodeChange:W,valueNodeHasChildren:Q,onValueNodeHasChildrenChange:ie,contentId:sd(),value:G,onValueChange:J,open:F,onOpenChange:B,dir:le,triggerPointerDownPosRef:te,disabled:T,children:[A.jsx(Pg.Provider,{scope:e,children:A.jsx(dX,{scope:n.__scopeSelect,onNativeOptionAdd:P.useCallback(Ie=>{pe(we=>new Set(we).add(Ie))},[]),onNativeOptionRemove:P.useCallback(Ie=>{pe(we=>{const se=new Set(we);return se.delete(Ie),se})},[]),children:t})}),X?A.jsxs(IP,{"aria-hidden":!0,required:R,tabIndex:-1,name:w,autoComplete:E,value:G,onChange:Ie=>J(Ie.target.value),disabled:T,form:M,children:[G===void 0?A.jsx("option",{value:""}):null,Array.from(q)]},re):null]})})};tP.displayName=eu;var nP="SelectTrigger",rP=P.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,o=Og(t),c=Kl(nP,t),h=c.disabled||r,p=bn(e,c.onTriggerChange),g=Dg(t),w=P.useRef("touch"),[E,T,R]=CP(D=>{const L=g().filter(W=>!W.disabled),H=L.find(W=>W.value===c.value),z=SP(L,D,H);z!==void 0&&c.onValueChange(z.value)}),M=D=>{h||(c.onOpenChange(!0),R()),D&&(c.triggerPointerDownPosRef.current={x:Math.round(D.pageX),y:Math.round(D.pageY)})};return A.jsx(fK,{asChild:!0,...o,children:A.jsx(nn.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":TP(c.value)?"":void 0,...i,ref:p,onClick:an(i.onClick,D=>{D.currentTarget.focus(),w.current!=="mouse"&&M(D)}),onPointerDown:an(i.onPointerDown,D=>{w.current=D.pointerType;const L=D.target;L.hasPointerCapture(D.pointerId)&&L.releasePointerCapture(D.pointerId),D.button===0&&D.ctrlKey===!1&&D.pointerType==="mouse"&&(M(D),D.preventDefault())}),onKeyDown:an(i.onKeyDown,D=>{const L=E.current!=="";!(D.ctrlKey||D.altKey||D.metaKey)&&D.key.length===1&&T(D.key),!(L&&D.key===" ")&&aX.includes(D.key)&&(M(),D.preventDefault())})})})});rP.displayName=nP;var iP="SelectValue",sP=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:o,placeholder:c="",...h}=n,p=Kl(iP,t),{onValueNodeHasChildrenChange:g}=p,w=o!==void 0,E=bn(e,p.onValueNodeChange);return Fi(()=>{g(w)},[g,w]),A.jsx(nn.span,{...h,ref:E,style:{pointerEvents:"none"},children:TP(p.value)?A.jsx(A.Fragment,{children:c}):o})});sP.displayName=iP;var fX="SelectIcon",oP=P.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return A.jsx(nn.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});oP.displayName=fX;var mX="SelectPortal",aP=n=>A.jsx(K2,{asChild:!0,...n});aP.displayName=mX;var tu="SelectContent",lP=P.forwardRef((n,e)=>{const t=Kl(tu,n.__scopeSelect),[r,i]=P.useState();if(Fi(()=>{i(new DocumentFragment)},[]),!t.open){const o=r;return o?Of.createPortal(A.jsx(cP,{scope:n.__scopeSelect,children:A.jsx(Pg.Slot,{scope:n.__scopeSelect,children:A.jsx("div",{children:n.children})})}),o):null}return A.jsx(uP,{...n,ref:e})});lP.displayName=tu;var lo=10,[cP,Xl]=Kd(tu),pX="SelectContentImpl",gX=Td("SelectContent.RemoveScroll"),uP=P.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:h,sideOffset:p,align:g,alignOffset:w,arrowPadding:E,collisionBoundary:T,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L,...H}=n,z=Kl(tu,t),[W,Q]=P.useState(null),[ie,le]=P.useState(null),F=bn(e,Pe=>Q(Pe)),[B,G]=P.useState(null),[J,te]=P.useState(null),X=Dg(t),[q,pe]=P.useState(!1),re=P.useRef(!1);P.useEffect(()=>{if(W)return q4(W)},[W]),_4();const Ie=P.useCallback(Pe=>{const[Ge,...at]=X().map(Et=>Et.ref.current),[st]=at.slice(-1),ct=document.activeElement;for(const Et of Pe)if(Et===ct||(Et==null||Et.scrollIntoView({block:"nearest"}),Et===Ge&&ie&&(ie.scrollTop=0),Et===st&&ie&&(ie.scrollTop=ie.scrollHeight),Et==null||Et.focus(),document.activeElement!==ct))return},[X,ie]),we=P.useCallback(()=>Ie([B,W]),[Ie,B,W]);P.useEffect(()=>{q&&we()},[q,we]);const{onOpenChange:se,triggerPointerDownPosRef:Te}=z;P.useEffect(()=>{if(W){let Pe={x:0,y:0};const Ge=st=>{var ct,Et;Pe={x:Math.abs(Math.round(st.pageX)-(((ct=Te.current)==null?void 0:ct.x)??0)),y:Math.abs(Math.round(st.pageY)-(((Et=Te.current)==null?void 0:Et.y)??0))}},at=st=>{Pe.x<=10&&Pe.y<=10?st.preventDefault():W.contains(st.target)||se(!1),document.removeEventListener("pointermove",Ge),Te.current=null};return Te.current!==null&&(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",at,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ge),document.removeEventListener("pointerup",at,{capture:!0})}}},[W,se,Te]),P.useEffect(()=>{const Pe=()=>se(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[se]);const[Ne,oe]=CP(Pe=>{const Ge=X().filter(ct=>!ct.disabled),at=Ge.find(ct=>ct.ref.current===document.activeElement),st=SP(Ge,Pe,at);st&&setTimeout(()=>st.ref.current.focus())}),he=P.useCallback((Pe,Ge,at)=>{const st=!re.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&(G(Pe),st&&(re.current=!0))},[z.value]),Se=P.useCallback(()=>W==null?void 0:W.focus(),[W]),Le=P.useCallback((Pe,Ge,at)=>{const st=!re.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&te(Pe)},[z.value]),it=r==="popper"?gw:dP,Re=it===gw?{side:h,sideOffset:p,align:g,alignOffset:w,arrowPadding:E,collisionBoundary:T,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L}:{};return A.jsx(cP,{scope:t,content:W,viewport:ie,onViewportChange:le,itemRefCallback:he,selectedItem:B,onItemLeave:Se,itemTextRefCallback:Le,focusSelectedItem:we,selectedItemText:J,position:r,isPositioned:q,searchRef:Ne,children:A.jsx(Y2,{as:gX,allowPinchZoom:!0,children:A.jsx(V2,{asChild:!0,trapped:z.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:an(i,Pe=>{var Ge;(Ge=z.trigger)==null||Ge.focus({preventScroll:!0}),Pe.preventDefault()}),children:A.jsx(L2,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:A.jsx(it,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:Pe=>Pe.preventDefault(),...H,...Re,onPlaced:()=>pe(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...H.style},onKeyDown:an(H.onKeyDown,Pe=>{const Ge=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Ge&&Pe.key.length===1&&oe(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let st=X().filter(ct=>!ct.disabled).map(ct=>ct.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(st=st.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const ct=Pe.target,Et=st.indexOf(ct);st=st.slice(Et+1)}setTimeout(()=>Ie(st)),Pe.preventDefault()}})})})})})})});uP.displayName=pX;var yX="SelectItemAlignedPosition",dP=P.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,o=Kl(tu,t),c=Xl(tu,t),[h,p]=P.useState(null),[g,w]=P.useState(null),E=bn(e,F=>w(F)),T=Dg(t),R=P.useRef(!1),M=P.useRef(!0),{viewport:D,selectedItem:L,selectedItemText:H,focusSelectedItem:z}=c,W=P.useCallback(()=>{if(o.trigger&&o.valueNode&&h&&g&&D&&L&&H){const F=o.trigger.getBoundingClientRect(),B=g.getBoundingClientRect(),G=o.valueNode.getBoundingClientRect(),J=H.getBoundingClientRect();if(o.dir!=="rtl"){const ct=J.left-B.left,Et=G.left-ct,ht=F.left-Et,gn=F.width+ht,Mn=Math.max(gn,B.width),Pr=window.innerWidth-lo,Qt=kp(Et,[lo,Math.max(lo,Pr-Mn)]);h.style.minWidth=gn+"px",h.style.left=Qt+"px"}else{const ct=B.right-J.right,Et=window.innerWidth-G.right-ct,ht=window.innerWidth-F.right-Et,gn=F.width+ht,Mn=Math.max(gn,B.width),Pr=window.innerWidth-lo,Qt=kp(Et,[lo,Math.max(lo,Pr-Mn)]);h.style.minWidth=gn+"px",h.style.right=Qt+"px"}const te=T(),X=window.innerHeight-lo*2,q=D.scrollHeight,pe=window.getComputedStyle(g),re=parseInt(pe.borderTopWidth,10),Ie=parseInt(pe.paddingTop,10),we=parseInt(pe.borderBottomWidth,10),se=parseInt(pe.paddingBottom,10),Te=re+Ie+q+se+we,Ne=Math.min(L.offsetHeight*5,Te),oe=window.getComputedStyle(D),he=parseInt(oe.paddingTop,10),Se=parseInt(oe.paddingBottom,10),Le=F.top+F.height/2-lo,it=X-Le,Re=L.offsetHeight/2,Pe=L.offsetTop+Re,Ge=re+Ie+Pe,at=Te-Ge;if(Ge<=Le){const ct=te.length>0&&L===te[te.length-1].ref.current;h.style.bottom="0px";const Et=g.clientHeight-D.offsetTop-D.offsetHeight,ht=Math.max(it,Re+(ct?Se:0)+Et+we),gn=Ge+ht;h.style.height=gn+"px"}else{const ct=te.length>0&&L===te[0].ref.current;h.style.top="0px";const ht=Math.max(Le,re+D.offsetTop+(ct?he:0)+Re)+at;h.style.height=ht+"px",D.scrollTop=Ge-Le+D.offsetTop}h.style.margin=`${lo}px 0`,h.style.minHeight=Ne+"px",h.style.maxHeight=X+"px",r==null||r(),requestAnimationFrame(()=>R.current=!0)}},[T,o.trigger,o.valueNode,h,g,D,L,H,o.dir,r]);Fi(()=>W(),[W]);const[Q,ie]=P.useState();Fi(()=>{g&&ie(window.getComputedStyle(g).zIndex)},[g]);const le=P.useCallback(F=>{F&&M.current===!0&&(W(),z==null||z(),M.current=!1)},[W,z]);return A.jsx(wX,{scope:t,contentWrapper:h,shouldExpandOnScrollRef:R,onScrollButtonChange:le,children:A.jsx("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Q},children:A.jsx(nn.div,{...i,ref:E,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});dP.displayName=yX;var xX="SelectPopperPosition",gw=P.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=lo,...o}=n,c=Og(t);return A.jsx(mK,{...c,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gw.displayName=xX;var[wX,Q2]=Kd(tu,{}),yw="SelectViewport",hP=P.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,o=Xl(yw,t),c=Q2(yw,t),h=bn(e,o.onViewportChange),p=P.useRef(0);return A.jsxs(A.Fragment,{children:[A.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),A.jsx(Pg.Slot,{scope:t,children:A.jsx(nn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:an(i.onScroll,g=>{const w=g.currentTarget,{contentWrapper:E,shouldExpandOnScrollRef:T}=c;if(T!=null&&T.current&&E){const R=Math.abs(p.current-w.scrollTop);if(R>0){const M=window.innerHeight-lo*2,D=parseFloat(E.style.minHeight),L=parseFloat(E.style.height),H=Math.max(D,L);if(H<M){const z=H+R,W=Math.min(M,z),Q=z-W;E.style.height=W+"px",E.style.bottom==="0px"&&(w.scrollTop=Q>0?Q:0,E.style.justifyContent="flex-end")}}}p.current=w.scrollTop})})})]})});hP.displayName=yw;var fP="SelectGroup",[vX,_X]=Kd(fP),EX=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=sd();return A.jsx(vX,{scope:t,id:i,children:A.jsx(nn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});EX.displayName=fP;var mP="SelectLabel",pP=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=_X(mP,t);return A.jsx(nn.div,{id:i.id,...r,ref:e})});pP.displayName=mP;var Lp="SelectItem",[bX,gP]=Kd(Lp),yP=P.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:o,...c}=n,h=Kl(Lp,t),p=Xl(Lp,t),g=h.value===r,[w,E]=P.useState(o??""),[T,R]=P.useState(!1),M=bn(e,z=>{var W;return(W=p.itemRefCallback)==null?void 0:W.call(p,z,r,i)}),D=sd(),L=P.useRef("touch"),H=()=>{i||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return A.jsx(bX,{scope:t,value:r,disabled:i,textId:D,isSelected:g,onItemTextChange:P.useCallback(z=>{E(W=>W||((z==null?void 0:z.textContent)??"").trim())},[]),children:A.jsx(Pg.ItemSlot,{scope:t,value:r,disabled:i,textValue:w,children:A.jsx(nn.div,{role:"option","aria-labelledby":D,"data-highlighted":T?"":void 0,"aria-selected":g&&T,"data-state":g?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:M,onFocus:an(c.onFocus,()=>R(!0)),onBlur:an(c.onBlur,()=>R(!1)),onClick:an(c.onClick,()=>{L.current!=="mouse"&&H()}),onPointerUp:an(c.onPointerUp,()=>{L.current==="mouse"&&H()}),onPointerDown:an(c.onPointerDown,z=>{L.current=z.pointerType}),onPointerMove:an(c.onPointerMove,z=>{var W;L.current=z.pointerType,i?(W=p.onItemLeave)==null||W.call(p):L.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:an(c.onPointerLeave,z=>{var W;z.currentTarget===document.activeElement&&((W=p.onItemLeave)==null||W.call(p))}),onKeyDown:an(c.onKeyDown,z=>{var Q;((Q=p.searchRef)==null?void 0:Q.current)!==""&&z.key===" "||(lX.includes(z.key)&&H(),z.key===" "&&z.preventDefault())})})})})});yP.displayName=Lp;var Vh="SelectItemText",xP=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...o}=n,c=Kl(Vh,t),h=Xl(Vh,t),p=gP(Vh,t),g=hX(Vh,t),[w,E]=P.useState(null),T=bn(e,H=>E(H),p.onItemTextChange,H=>{var z;return(z=h.itemTextRefCallback)==null?void 0:z.call(h,H,p.value,p.disabled)}),R=w==null?void 0:w.textContent,M=P.useMemo(()=>A.jsx("option",{value:p.value,disabled:p.disabled,children:R},p.value),[p.disabled,p.value,R]),{onNativeOptionAdd:D,onNativeOptionRemove:L}=g;return Fi(()=>(D(M),()=>L(M)),[D,L,M]),A.jsxs(A.Fragment,{children:[A.jsx(nn.span,{id:p.textId,...o,ref:T}),p.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Of.createPortal(o.children,c.valueNode):null]})});xP.displayName=Vh;var wP="SelectItemIndicator",vP=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return gP(wP,t).isSelected?A.jsx(nn.span,{"aria-hidden":!0,...r,ref:e}):null});vP.displayName=wP;var xw="SelectScrollUpButton",_P=P.forwardRef((n,e)=>{const t=Xl(xw,n.__scopeSelect),r=Q2(xw,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Fi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=p.scrollTop>0;o(g)};const p=t.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?A.jsx(bP,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=t;h&&p&&(h.scrollTop=h.scrollTop-p.offsetHeight)}}):null});_P.displayName=xw;var ww="SelectScrollDownButton",EP=P.forwardRef((n,e)=>{const t=Xl(ww,n.__scopeSelect),r=Q2(ww,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Fi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=p.scrollHeight-p.clientHeight,w=Math.ceil(p.scrollTop)<g;o(w)};const p=t.viewport;return h(),p.addEventListener("scroll",h),()=>p.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?A.jsx(bP,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:p}=t;h&&p&&(h.scrollTop=h.scrollTop+p.offsetHeight)}}):null});EP.displayName=ww;var bP=P.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,o=Xl("SelectScrollButton",t),c=P.useRef(null),h=Dg(t),p=P.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return P.useEffect(()=>()=>p(),[p]),Fi(()=>{var w;const g=h().find(E=>E.ref.current===document.activeElement);(w=g==null?void 0:g.ref.current)==null||w.scrollIntoView({block:"nearest"})},[h]),A.jsx(nn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:an(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:an(i.onPointerMove,()=>{var g;(g=o.onItemLeave)==null||g.call(o),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:an(i.onPointerLeave,()=>{p()})})}),AX="SelectSeparator",AP=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return A.jsx(nn.div,{"aria-hidden":!0,...r,ref:e})});AP.displayName=AX;var vw="SelectArrow",IX=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Og(t),o=Kl(vw,t),c=Xl(vw,t);return o.open&&c.position==="popper"?A.jsx(pK,{...i,...r,ref:e}):null});IX.displayName=vw;var TX="SelectBubbleInput",IP=P.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(r,i),c=X2(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const p=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(p,"value").set;if(c!==e&&w){const E=new Event("change",{bubbles:!0});w.call(h,e),h.dispatchEvent(E)}},[c,e]),A.jsx(nn.select,{...t,style:{...G4,...t.style},ref:o,defaultValue:e})});IP.displayName=TX;function TP(n){return n===""||n===void 0}function CP(n){const e=Zc(n),t=P.useRef(""),r=P.useRef(0),i=P.useCallback(c=>{const h=t.current+c;e(h),function p(g){t.current=g,window.clearTimeout(r.current),g!==""&&(r.current=window.setTimeout(()=>p(""),1e3))}(h)},[e]),o=P.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,o]}function SP(n,e,t){const i=e.length>1&&Array.from(e).every(g=>g===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let c=CX(n,Math.max(o,0));i.length===1&&(c=c.filter(g=>g!==t));const p=c.find(g=>g.textValue.toLowerCase().startsWith(i.toLowerCase()));return p!==t?p:void 0}function CX(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var SX=tP,RP=rP,RX=sP,NX=oP,kX=aP,NP=lP,PX=hP,kP=pP,PP=yP,DX=xP,OX=vP,DP=_P,OP=EP,MP=AP;const nC=SX,rC=RX,_w=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(RP,{ref:r,className:ln("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,A.jsx(NX,{asChild:!0,children:A.jsx(Vw,{className:"h-4 w-4 opacity-50"})})]}));_w.displayName=RP.displayName;const LP=P.forwardRef(({className:n,...e},t)=>A.jsx(DP,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:A.jsx(XC,{className:"h-4 w-4"})}));LP.displayName=DP.displayName;const VP=P.forwardRef(({className:n,...e},t)=>A.jsx(OP,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:A.jsx(Vw,{className:"h-4 w-4"})}));VP.displayName=OP.displayName;const Ew=P.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>A.jsx(kX,{children:A.jsxs(NP,{ref:i,className:ln("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[A.jsx(LP,{}),A.jsx(PX,{className:ln("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),A.jsx(VP,{})]})}));Ew.displayName=NP.displayName;const MX=P.forwardRef(({className:n,...e},t)=>A.jsx(kP,{ref:t,className:ln("px-2 py-1.5 text-sm font-semibold",n),...e}));MX.displayName=kP.displayName;const Fh=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(PP,{ref:r,className:ln("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[A.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:A.jsx(OX,{children:A.jsx(bO,{className:"h-4 w-4"})})}),A.jsx(DX,{children:e})]}));Fh.displayName=PP.displayName;const LX=P.forwardRef(({className:n,...e},t)=>A.jsx(MP,{ref:t,className:ln("-mx-1 my-1 h-px bg-muted",n),...e}));LX.displayName=MP.displayName;function VX(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const FX=n=>{switch(n){case"success":return UX;case"info":return WX;case"warning":return zX;case"error":return HX;default:return null}},BX=Array(12).fill(0),jX=({visible:n,className:e})=>ze.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ze.createElement("div",{className:"sonner-spinner"},BX.map((t,r)=>ze.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),UX=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zX=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),WX=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),HX=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),GX=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ze.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ze.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$X=()=>{const[n,e]=ze.useState(document.hidden);return ze.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let bw=1;class qX{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:bw++,c=this.toasts.find(p=>p.id===o),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),c?this.toasts=this.toasts.map(p=>p.id===o?(this.publish({...p,...e,id:o,title:r}),{...p,...e,id:o,dismissible:h,title:r}):p):this.addToast({title:r,...i,dismissible:h,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,c;const h=i.then(async g=>{if(c=["resolve",g],ze.isValidElement(g))o=!1,this.create({id:r,type:"default",message:g});else if(XX(g)&&!g.ok){o=!1;const E=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,T=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"error",description:T,...M})}else if(g instanceof Error){o=!1;const E=typeof t.error=="function"?await t.error(g):t.error,T=typeof t.description=="function"?await t.description(g):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"error",description:T,...M})}else if(t.success!==void 0){o=!1;const E=typeof t.success=="function"?await t.success(g):t.success,T=typeof t.description=="function"?await t.description(g):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"success",description:T,...M})}}).catch(async g=>{if(c=["reject",g],t.error!==void 0){o=!1;const w=typeof t.error=="function"?await t.error(g):t.error,E=typeof t.description=="function"?await t.description(g):t.description,R=typeof w=="object"&&!ze.isValidElement(w)?w:{message:w};this.create({id:r,type:"error",description:E,...R})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),p=()=>new Promise((g,w)=>h.then(()=>c[0]==="reject"?w(c[1]):g(c[1])).catch(w));return typeof r!="string"&&typeof r!="number"?{unwrap:p}:Object.assign(r,{unwrap:p})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||bw++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ls=new qX,KX=(n,e)=>{const t=(e==null?void 0:e.id)||bw++;return ls.addToast({title:n,...e,id:t}),t},XX=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",YX=KX,QX=()=>ls.toasts,ZX=()=>ls.getActiveToasts(),Gn=Object.assign(YX,{success:ls.success,info:ls.info,warning:ls.warning,error:ls.error,custom:ls.custom,message:ls.message,promise:ls.promise,dismiss:ls.dismiss,loading:ls.loading},{getHistory:QX,getToasts:ZX});VX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _m(n){return n.label!==void 0}const JX=3,eY="24px",tY="16px",iC=4e3,nY=356,rY=14,iY=45,sY=200;function ko(...n){return n.filter(Boolean).join(" ")}function oY(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const aY=n=>{var e,t,r,i,o,c,h,p,g;const{invert:w,toast:E,unstyled:T,interacting:R,setHeights:M,visibleToasts:D,heights:L,index:H,toasts:z,expanded:W,removeToast:Q,defaultRichColors:ie,closeButton:le,style:F,cancelButtonStyle:B,actionButtonStyle:G,className:J="",descriptionClassName:te="",duration:X,position:q,gap:pe,expandByDefault:re,classNames:Ie,icons:we,closeButtonAriaLabel:se="Close toast"}=n,[Te,Ne]=ze.useState(null),[oe,he]=ze.useState(null),[Se,Le]=ze.useState(!1),[it,Re]=ze.useState(!1),[Pe,Ge]=ze.useState(!1),[at,st]=ze.useState(!1),[ct,Et]=ze.useState(!1),[ht,gn]=ze.useState(0),[Mn,Pr]=ze.useState(0),Qt=ze.useRef(E.duration||X||iC),zt=ze.useRef(null),mt=ze.useRef(null),xi=H===0,Xe=H+1<=D,Kn=E.type,wi=E.dismissible!==!1,Zr=E.className||"",Qs=E.descriptionClassName||"",Wt=ze.useMemo(()=>L.findIndex(pt=>pt.toastId===E.id)||0,[L,E.id]),Xn=ze.useMemo(()=>{var pt;return(pt=E.closeButton)!=null?pt:le},[E.closeButton,le]),_r=ze.useMemo(()=>E.duration||X||iC,[E.duration,X]),Ln=ze.useRef(0),Jr=ze.useRef(0),Bi=ze.useRef(0),vi=ze.useRef(null),[An,We]=q.split("-"),In=ze.useMemo(()=>L.reduce((pt,Gt,Tn)=>Tn>=Wt?pt:pt+Gt.height,0),[L,Wt]),Ht=$X(),mn=E.invert||w,ai=Kn==="loading";Jr.current=ze.useMemo(()=>Wt*pe+In,[Wt,In]),ze.useEffect(()=>{Qt.current=_r},[_r]),ze.useEffect(()=>{Le(!0)},[]),ze.useEffect(()=>{const pt=mt.current;if(pt){const Gt=pt.getBoundingClientRect().height;return Pr(Gt),M(Tn=>[{toastId:E.id,height:Gt,position:E.position},...Tn]),()=>M(Tn=>Tn.filter($t=>$t.toastId!==E.id))}},[M,E.id]),ze.useLayoutEffect(()=>{if(!Se)return;const pt=mt.current,Gt=pt.style.height;pt.style.height="auto";const Tn=pt.getBoundingClientRect().height;pt.style.height=Gt,Pr(Tn),M($t=>$t.find(Cn=>Cn.toastId===E.id)?$t.map(Cn=>Cn.toastId===E.id?{...Cn,height:Tn}:Cn):[{toastId:E.id,height:Tn,position:E.position},...$t])},[Se,E.title,E.description,M,E.id,E.jsx,E.action,E.cancel]);const zr=ze.useCallback(()=>{Re(!0),gn(Jr.current),M(pt=>pt.filter(Gt=>Gt.toastId!==E.id)),setTimeout(()=>{Q(E)},sY)},[E,Q,M,Jr]);ze.useEffect(()=>{if(E.promise&&Kn==="loading"||E.duration===1/0||E.type==="loading")return;let pt;return W||R||Ht?(()=>{if(Bi.current<Ln.current){const $t=new Date().getTime()-Ln.current;Qt.current=Qt.current-$t}Bi.current=new Date().getTime()})():(()=>{Qt.current!==1/0&&(Ln.current=new Date().getTime(),pt=setTimeout(()=>{E.onAutoClose==null||E.onAutoClose.call(E,E),zr()},Qt.current))})(),()=>clearTimeout(pt)},[W,R,E,Kn,Ht,zr]),ze.useEffect(()=>{E.delete&&(zr(),E.onDismiss==null||E.onDismiss.call(E,E))},[zr,E.delete]);function Zs(){var pt;if(we!=null&&we.loading){var Gt;return ze.createElement("div",{className:ko(Ie==null?void 0:Ie.loader,E==null||(Gt=E.classNames)==null?void 0:Gt.loader,"sonner-loader"),"data-visible":Kn==="loading"},we.loading)}return ze.createElement(jX,{className:ko(Ie==null?void 0:Ie.loader,E==null||(pt=E.classNames)==null?void 0:pt.loader),visible:Kn==="loading"})}const Ct=E.icon||(we==null?void 0:we[Kn])||FX(Kn);var Er,Ps;return ze.createElement("li",{tabIndex:0,ref:mt,className:ko(J,Zr,Ie==null?void 0:Ie.toast,E==null||(e=E.classNames)==null?void 0:e.toast,Ie==null?void 0:Ie.default,Ie==null?void 0:Ie[Kn],E==null||(t=E.classNames)==null?void 0:t[Kn]),"data-sonner-toast":"","data-rich-colors":(Er=E.richColors)!=null?Er:ie,"data-styled":!(E.jsx||E.unstyled||T),"data-mounted":Se,"data-promise":!!E.promise,"data-swiped":ct,"data-removed":it,"data-visible":Xe,"data-y-position":An,"data-x-position":We,"data-index":H,"data-front":xi,"data-swiping":Pe,"data-dismissible":wi,"data-type":Kn,"data-invert":mn,"data-swipe-out":at,"data-swipe-direction":oe,"data-expanded":!!(W||re&&Se),style:{"--index":H,"--toasts-before":H,"--z-index":z.length-H,"--offset":`${it?ht:Jr.current}px`,"--initial-height":re?"auto":`${Mn}px`,...F,...E.style},onDragEnd:()=>{Ge(!1),Ne(null),vi.current=null},onPointerDown:pt=>{pt.button!==2&&(ai||!wi||(zt.current=new Date,gn(Jr.current),pt.target.setPointerCapture(pt.pointerId),pt.target.tagName!=="BUTTON"&&(Ge(!0),vi.current={x:pt.clientX,y:pt.clientY})))},onPointerUp:()=>{var pt,Gt,Tn;if(at||!wi)return;vi.current=null;const $t=Number(((pt=mt.current)==null?void 0:pt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),br=Number(((Gt=mt.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Cn=new Date().getTime()-((Tn=zt.current)==null?void 0:Tn.getTime()),Rt=Te==="x"?$t:br,fs=Math.abs(Rt)/Cn;if(Math.abs(Rt)>=iY||fs>.11){gn(Jr.current),E.onDismiss==null||E.onDismiss.call(E,E),he(Te==="x"?$t>0?"right":"left":br>0?"down":"up"),zr(),st(!0);return}else{var cn,rr;(cn=mt.current)==null||cn.style.setProperty("--swipe-amount-x","0px"),(rr=mt.current)==null||rr.style.setProperty("--swipe-amount-y","0px")}Et(!1),Ge(!1),Ne(null)},onPointerMove:pt=>{var Gt,Tn,$t;if(!vi.current||!wi||((Gt=window.getSelection())==null?void 0:Gt.toString().length)>0)return;const Cn=pt.clientY-vi.current.y,Rt=pt.clientX-vi.current.x;var fs;const cn=(fs=n.swipeDirections)!=null?fs:oY(q);!Te&&(Math.abs(Rt)>1||Math.abs(Cn)>1)&&Ne(Math.abs(Rt)>Math.abs(Cn)?"x":"y");let rr={x:0,y:0};const Vn=ur=>1/(1.5+Math.abs(ur)/20);if(Te==="y"){if(cn.includes("top")||cn.includes("bottom"))if(cn.includes("top")&&Cn<0||cn.includes("bottom")&&Cn>0)rr.y=Cn;else{const ur=Cn*Vn(Cn);rr.y=Math.abs(ur)<Math.abs(Cn)?ur:Cn}}else if(Te==="x"&&(cn.includes("left")||cn.includes("right")))if(cn.includes("left")&&Rt<0||cn.includes("right")&&Rt>0)rr.x=Rt;else{const ur=Rt*Vn(Rt);rr.x=Math.abs(ur)<Math.abs(Rt)?ur:Rt}(Math.abs(rr.x)>0||Math.abs(rr.y)>0)&&Et(!0),(Tn=mt.current)==null||Tn.style.setProperty("--swipe-amount-x",`${rr.x}px`),($t=mt.current)==null||$t.style.setProperty("--swipe-amount-y",`${rr.y}px`)}},Xn&&!E.jsx&&Kn!=="loading"?ze.createElement("button",{"aria-label":se,"data-disabled":ai,"data-close-button":!0,onClick:ai||!wi?()=>{}:()=>{zr(),E.onDismiss==null||E.onDismiss.call(E,E)},className:ko(Ie==null?void 0:Ie.closeButton,E==null||(r=E.classNames)==null?void 0:r.closeButton)},(Ps=we==null?void 0:we.close)!=null?Ps:GX):null,(Kn||E.icon||E.promise)&&E.icon!==null&&((we==null?void 0:we[Kn])!==null||E.icon)?ze.createElement("div",{"data-icon":"",className:ko(Ie==null?void 0:Ie.icon,E==null||(i=E.classNames)==null?void 0:i.icon)},E.promise||E.type==="loading"&&!E.icon?E.icon||Zs():null,E.type!=="loading"?Ct:null):null,ze.createElement("div",{"data-content":"",className:ko(Ie==null?void 0:Ie.content,E==null||(o=E.classNames)==null?void 0:o.content)},ze.createElement("div",{"data-title":"",className:ko(Ie==null?void 0:Ie.title,E==null||(c=E.classNames)==null?void 0:c.title)},E.jsx?E.jsx:typeof E.title=="function"?E.title():E.title),E.description?ze.createElement("div",{"data-description":"",className:ko(te,Qs,Ie==null?void 0:Ie.description,E==null||(h=E.classNames)==null?void 0:h.description)},typeof E.description=="function"?E.description():E.description):null),ze.isValidElement(E.cancel)?E.cancel:E.cancel&&_m(E.cancel)?ze.createElement("button",{"data-button":!0,"data-cancel":!0,style:E.cancelButtonStyle||B,onClick:pt=>{_m(E.cancel)&&wi&&(E.cancel.onClick==null||E.cancel.onClick.call(E.cancel,pt),zr())},className:ko(Ie==null?void 0:Ie.cancelButton,E==null||(p=E.classNames)==null?void 0:p.cancelButton)},E.cancel.label):null,ze.isValidElement(E.action)?E.action:E.action&&_m(E.action)?ze.createElement("button",{"data-button":!0,"data-action":!0,style:E.actionButtonStyle||G,onClick:pt=>{_m(E.action)&&(E.action.onClick==null||E.action.onClick.call(E.action,pt),!pt.defaultPrevented&&zr())},className:ko(Ie==null?void 0:Ie.actionButton,E==null||(g=E.classNames)==null?void 0:g.actionButton)},E.action.label):null)};function sC(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function lY(n,e){const t={};return[n,e].forEach((r,i)=>{const o=i===1,c=o?"--mobile-offset":"--offset",h=o?tY:eY;function p(g){["top","right","bottom","left"].forEach(w=>{t[`${c}-${w}`]=typeof g=="number"?`${g}px`:g})}typeof r=="number"||typeof r=="string"?p(r):typeof r=="object"?["top","right","bottom","left"].forEach(g=>{r[g]===void 0?t[`${c}-${g}`]=h:t[`${c}-${g}`]=typeof r[g]=="number"?`${r[g]}px`:r[g]}):p(h)}),t}const cY=ze.forwardRef(function(e,t){const{invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:h,className:p,offset:g,mobileOffset:w,theme:E="light",richColors:T,duration:R,style:M,visibleToasts:D=JX,toastOptions:L,dir:H=sC(),gap:z=rY,icons:W,containerAriaLabel:Q="Notifications"}=e,[ie,le]=ze.useState([]),F=ze.useMemo(()=>Array.from(new Set([i].concat(ie.filter(oe=>oe.position).map(oe=>oe.position)))),[ie,i]),[B,G]=ze.useState([]),[J,te]=ze.useState(!1),[X,q]=ze.useState(!1),[pe,re]=ze.useState(E!=="system"?E:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ie=ze.useRef(null),we=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),se=ze.useRef(null),Te=ze.useRef(!1),Ne=ze.useCallback(oe=>{le(he=>{var Se;return(Se=he.find(Le=>Le.id===oe.id))!=null&&Se.delete||ls.dismiss(oe.id),he.filter(({id:Le})=>Le!==oe.id)})},[]);return ze.useEffect(()=>ls.subscribe(oe=>{if(oe.dismiss){requestAnimationFrame(()=>{le(he=>he.map(Se=>Se.id===oe.id?{...Se,delete:!0}:Se))});return}setTimeout(()=>{qC.flushSync(()=>{le(he=>{const Se=he.findIndex(Le=>Le.id===oe.id);return Se!==-1?[...he.slice(0,Se),{...he[Se],...oe},...he.slice(Se+1)]:[oe,...he]})})})}),[ie]),ze.useEffect(()=>{if(E!=="system"){re(E);return}if(E==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;const oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:he})=>{re(he?"dark":"light")})}catch{oe.addListener(({matches:Se})=>{try{re(Se?"dark":"light")}catch(Le){console.error(Le)}})}},[E]),ze.useEffect(()=>{ie.length<=1&&te(!1)},[ie]),ze.useEffect(()=>{const oe=he=>{var Se;if(o.every(Re=>he[Re]||he.code===Re)){var it;te(!0),(it=Ie.current)==null||it.focus()}he.code==="Escape"&&(document.activeElement===Ie.current||(Se=Ie.current)!=null&&Se.contains(document.activeElement))&&te(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[o]),ze.useEffect(()=>{if(Ie.current)return()=>{se.current&&(se.current.focus({preventScroll:!0}),se.current=null,Te.current=!1)}},[Ie.current]),ze.createElement("section",{ref:t,"aria-label":`${Q} ${we}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((oe,he)=>{var Se;const[Le,it]=oe.split("-");return ie.length?ze.createElement("ol",{key:oe,dir:H==="auto"?sC():H,tabIndex:-1,ref:Ie,className:p,"data-sonner-toaster":!0,"data-sonner-theme":pe,"data-y-position":Le,"data-x-position":it,style:{"--front-toast-height":`${((Se=B[0])==null?void 0:Se.height)||0}px`,"--width":`${nY}px`,"--gap":`${z}px`,...M,...lY(g,w)},onBlur:Re=>{Te.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(Te.current=!1,se.current&&(se.current.focus({preventScroll:!0}),se.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||Te.current||(Te.current=!0,se.current=Re.relatedTarget)},onMouseEnter:()=>te(!0),onMouseMove:()=>te(!0),onMouseLeave:()=>{X||te(!1)},onDragEnd:()=>te(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},ie.filter(Re=>!Re.position&&he===0||Re.position===oe).map((Re,Pe)=>{var Ge,at;return ze.createElement(aY,{key:Re.id,icons:W,index:Pe,toast:Re,defaultRichColors:T,duration:(Ge=L==null?void 0:L.duration)!=null?Ge:R,className:L==null?void 0:L.className,descriptionClassName:L==null?void 0:L.descriptionClassName,invert:r,visibleToasts:D,closeButton:(at=L==null?void 0:L.closeButton)!=null?at:h,interacting:X,position:oe,style:L==null?void 0:L.style,unstyled:L==null?void 0:L.unstyled,classNames:L==null?void 0:L.classNames,cancelButtonStyle:L==null?void 0:L.cancelButtonStyle,actionButtonStyle:L==null?void 0:L.actionButtonStyle,closeButtonAriaLabel:L==null?void 0:L.closeButtonAriaLabel,removeToast:Ne,toasts:ie.filter(st=>st.position==Re.position),heights:B.filter(st=>st.position==Re.position),setHeights:G,expandByDefault:c,gap:z,expanded:J,swipeDirections:e.swipeDirections})})):null}))});function uY({event:n,sessionId:e,onClose:t}){const[r,i]=P.useState({rating_profile_setup:"",rating_interests_helpful:"",rating_social_usefulness:"",met_match_in_person:"",open_to_other_event_types:"",match_experience_feedback:"",general_feedback:""}),[o,c]=P.useState(!1),[h,p]=P.useState({}),g=(R,M)=>{i(D=>({...D,[R]:M})),h[R]&&p(D=>({...D,[R]:null}))},w=()=>{const R={};return r.rating_profile_setup||(R.rating_profile_setup="Please rate the profile setup experience."),r.rating_interests_helpful||(R.rating_interests_helpful="Please rate how helpful interests were."),r.rating_social_usefulness||(R.rating_social_usefulness="Please rate the social interaction experience."),r.met_match_in_person||(R.met_match_in_person="Please let us know if you met someone in person."),r.open_to_other_event_types||(R.open_to_other_event_types="Please let us know about future event interest."),r.match_experience_feedback.trim()||(R.match_experience_feedback="Please share what we could improve."),p(R),Object.keys(R).length===0},E=async R=>{if(R.preventDefault(),!w()){Gn.error("Please complete all required fields.");return}c(!0);try{await tU.create({event_id:n.id,session_id:e,rating_profile_setup:parseInt(r.rating_profile_setup),rating_interests_helpful:parseInt(r.rating_interests_helpful),rating_social_usefulness:parseInt(r.rating_social_usefulness),met_match_in_person:r.met_match_in_person==="true",open_to_other_event_types:r.open_to_other_event_types==="true",match_experience_feedback:r.match_experience_feedback.trim(),general_feedback:r.general_feedback.trim()||null}),localStorage.setItem(`feedback_given_for_${n.id}`,"true"),Gn.success("Thanks for your feedback "),t()}catch(M){console.error("Error submitting feedback:",M),Gn.error("Failed to submit feedback. Please try again.")}finally{c(!1)}},T=({value:R,onChange:M,error:D})=>A.jsxs("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(L=>A.jsx("button",{type:"button",onClick:()=>M(L.toString()),className:`p-1 transition-colors ${parseInt(R)>=L?"text-yellow-500 hover:text-yellow-600":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:A.jsx(mM,{className:`w-6 h-6 ${parseInt(R)>=L?"fill-current":""}`})},L)),D&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs ml-2 mt-1",children:D})]});return A.jsx(Jf,{children:A.jsx(Zo.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",children:A.jsxs(Zo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:A.jsx(ld,{className:"w-6 h-6 text-white"})}),A.jsx("button",{onClick:t,className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:A.jsx(Li,{className:"w-5 h-5"})})]}),A.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:["Enjoyed Hooked at ",n.name,"? "]}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Help us make the next one even better  takes 1 minute!"})]}),A.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to set up your profile? *"}),A.jsx(T,{value:r.rating_profile_setup,onChange:R=>g("rating_profile_setup",R),error:h.rating_profile_setup})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How helpful were profile interests in choosing who to like? *"}),A.jsx(T,{value:r.rating_interests_helpful,onChange:R=>g("rating_interests_helpful",R),error:h.rating_interests_helpful})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to interact with others? *"}),A.jsx(T,{value:r.rating_social_usefulness,onChange:R=>g("rating_social_usefulness",R),error:h.rating_social_usefulness})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Did you meet up with a match? *"}),A.jsxs(nC,{value:r.met_match_in_person,onValueChange:R=>g("met_match_in_person",R),children:[A.jsx(_w,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:A.jsx(rC,{placeholder:"Select an option"})}),A.jsxs(Ew,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[A.jsx(Fh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),A.jsx(Fh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.met_match_in_person&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.met_match_in_person})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Would you use Hooked at other event types? *"}),A.jsxs(nC,{value:r.open_to_other_event_types,onValueChange:R=>g("open_to_other_event_types",R),children:[A.jsx(_w,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:A.jsx(rC,{placeholder:"Select an option"})}),A.jsxs(Ew,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[A.jsx(Fh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),A.jsx(Fh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.open_to_other_event_types&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.open_to_other_event_types})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"What would you improve? *"}),A.jsx(Rd,{value:r.match_experience_feedback,onChange:R=>g("match_experience_feedback",R.target.value),placeholder:"Tell us what could make the experience better...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"}),h.match_experience_feedback&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.match_experience_feedback})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Other feedback?"}),A.jsx(Rd,{value:r.general_feedback,onChange:R=>g("general_feedback",R.target.value),placeholder:"Anything else you'd like to share...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"})]}),A.jsx(Dt,{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-3",children:o?A.jsxs("div",{className:"flex items-center justify-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Feedback"})]})]})})})}var dY=(n,e,t,r,i,o,c,h)=>{let p=document.documentElement,g=["light","dark"];function w(R){(Array.isArray(n)?n:[n]).forEach(M=>{let D=M==="class",L=D&&o?i.map(H=>o[H]||H):i;D?(p.classList.remove(...L),p.classList.add(o&&o[R]?o[R]:R)):p.setAttribute(M,R)}),E(R)}function E(R){h&&g.includes(R)&&(p.style.colorScheme=R)}function T(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)w(r);else try{let R=localStorage.getItem(e)||t,M=c&&R==="system"?T():R;w(M)}catch{}},hY=P.createContext(void 0),fY={setTheme:n=>{},themes:[]},mY=()=>{var n;return(n=P.useContext(hY))!=null?n:fY};P.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,themes:h,nonce:p,scriptProps:g})=>{let w=JSON.stringify([t,e,o,n,h,c,r,i]).slice(1,-1);return P.createElement("script",{...g,suppressHydrationWarning:!0,nonce:typeof window>"u"?p:"",dangerouslySetInnerHTML:{__html:`(${dY.toString()})(${w})`}})});const pY=({...n})=>{const{theme:e="system"}=mY();return A.jsx(cY,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function gY({children:n,currentPageName:e}){const t=Fa(),r=ta(),[i,o]=P.useState(!!(localStorage.getItem("currentEventId")&&localStorage.getItem("currentSessionId"))),[c,h]=P.useState(!1),[p,g]=P.useState(!1),[w,E]=P.useState(!1),[T,R]=P.useState({name:"",profileId:""}),[M,D]=P.useState(new Set),[L,H]=P.useState(!1),[z,W]=P.useState({name:"",senderSessionId:""}),[Q,ie]=P.useState(new Set),[le,F]=P.useState(!1),[B,G]=P.useState(null),[J,te]=P.useState(null),X=P.useCallback(async()=>{try{const pe=localStorage.getItem("currentEventId")||localStorage.getItem("last_event_id"),re=localStorage.getItem("currentSessionId")||localStorage.getItem("last_session_id");if(!pe||!re||localStorage.getItem(`feedback_given_for_${pe}`))return;const we=await Eg.filter({id:pe});if(we.length===0)return;const se=we[0],Te=new Date().toISOString();se.expires_at&&Te>se.expires_at&&(G(se),te(re),F(!0),localStorage.setItem("last_event_id",pe),localStorage.setItem("last_session_id",re))}catch(pe){console.error("Error checking feedback eligibility:",pe)}},[]);P.useEffect(()=>{X()},[X]);const q=P.useCallback(async()=>{const pe=localStorage.getItem("currentEventId"),re=localStorage.getItem("currentSessionId"),Ie=!!(pe&&re);if(o(Ie),!Ie){h(!1),g(!1),E(!1),H(!1),D(new Set),ie(new Set);return}try{const we=await us.filter({liker_session_id:re,event_id:pe,is_mutual:!0}),se=await us.filter({liked_session_id:re,event_id:pe,is_mutual:!0});let Te=!1,Ne=null;if([...we,...se].forEach(he=>{const Se=he.liker_session_id===re;(Se&&!he.liker_notified_of_match||!Se&&!he.liked_notified_of_match)&&(Te=!0,!Ne&&!M.has(he.id)&&(Ne={...he,otherUserSessionId:Se?he.liked_session_id:he.liker_session_id,type:Se?"liker":"liked"}))}),h(Te),Ne&&!w){const he=await Gs.filter({session_id:Ne.otherUserSessionId,event_id:pe});if(he.length>0){R({name:he[0].first_name,profileId:he[0].id}),E(!0),D(Le=>new Set([...Le,Ne.id]));const Se={};Ne.type==="liker"?Se.liker_notified_of_match=!0:Se.liked_notified_of_match=!0,await us.update(Ne.id,Se)}}const oe=await Sc.filter({receiver_session_id:re,event_id:pe,is_read:!1});if(g(oe.length>0),oe.length>0&&!L){const he=oe.sort((Se,Le)=>new Date(Le.created_date)-new Date(Se.created_date))[0];if(!Q.has(he.id)){const Se=await Gs.filter({session_id:he.sender_session_id,event_id:pe});Se.length>0&&(W({name:Se[0].first_name,senderSessionId:he.sender_session_id}),H(!0),ie(Le=>new Set([...Le,he.id])))}}}catch(we){console.error("Error checking notifications:",we)}},[M,w,Q,L]);return P.useEffect(()=>{q();const pe=setInterval(q,45e3);return()=>clearInterval(pe)},[q]),P.useEffect(()=>{q()},[t.pathname,q]),A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[A.jsx(pY,{position:"bottom-center",expand:!1,visibleToasts:1,closeButton:!1,duration:3e3,toastOptions:{style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)",borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",fontWeight:"500",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}}}),A.jsx("style",{children:`
        :root {
          --primary: #1a1d29;
          --accent: #ff6b6b;
          --secondary: #4f46e5;
          --muted: #64748b;
          --background: #ffffff;
          --card: #ffffff;
          --toast-bg: #ffffff;
          --toast-color: #000000;
          --toast-border: rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
          :root {
            --background: #111827;
            --card: #1f2937;
            --primary: #ffffff;
            --muted: #94a3b8;
            --toast-bg: #1f2937;
            --toast-color: #ffffff;
            --toast-border: rgba(255, 255, 255, 0.15);
          }
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          background: var(--background);
          color: var(--primary);
        }

        .glass-effect {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @media (prefers-color-scheme: dark) {
          .glass-effect {
            background: rgba(31, 41, 55, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
          }
        }

        .gradient-text {
          background: linear-gradient(135deg, var(--accent) 0%, var(--secondary) 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Modal overlay improvements */
        [data-radix-popper-content-wrapper],
        [data-state="open"][data-side] {
          z-index: 50;
        }

        /* Dark mode modal backgrounds */
        @media (prefers-color-scheme: dark) {
          .modal-content {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
            color: #ffffff !important;
          }

          .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7) !important;
          }
        }

        .modal-content {
          background-color: #ffffff;
          border: 1px solid #e5e7eb;
          border-radius: 16px;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .modal-overlay {
          background-color: rgba(0, 0, 0, 0.4);
        }

        /* Enhanced Toaster Styles */
        [data-sonner-toast] {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
          border: 1px solid var(--toast-border) !important;
          border-radius: 0.5rem !important;
          padding: 1rem !important;
          font-size: 0.875rem !important;
          font-weight: 500 !important;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1) !important;
          backdrop-filter: none !important;
        }

        [data-sonner-toast]:not([data-styled]) {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
        }

        /* Toaster container */
        [data-sonner-toaster] {
          max-width: 90vw;
        }

        [data-sonner-toast] [data-content] {
          color: var(--toast-color) !important;
        }

        [data-sonner-toast] [data-title] {
          color: var(--toast-color) !important;
          font-weight: 600 !important;
        }

        [data-sonner-toast] [data-description] {
          color: var(--toast-color) !important;
          opacity: 0.8;
        }
      `}),A.jsx("main",{className:"relative",children:n}),A.jsxs(Jf,{children:[w&&A.jsx(E$,{matchName:T.name,onDismiss:()=>{E(!1)},onSeeMatches:()=>{E(!1),r(qn("Matches"))}}),L&&A.jsx(b$,{senderName:z.name,senderSessionId:z.senderSessionId,onDismiss:()=>H(!1),onView:()=>{H(!1)}}),le&&B&&J&&A.jsx(uY,{event:B,sessionId:J,onClose:()=>F(!1)})]})]})}function yY(n,e){return P.useReducer((t,r)=>e[t][r]??t,n)}var Mg=n=>{const{present:e,children:t}=n,r=xY(e),i=typeof t=="function"?t({present:r.isPresent}):P.Children.only(t),o=bn(r.ref,wY(i));return typeof t=="function"||r.isPresent?P.cloneElement(i,{ref:o}):null};Mg.displayName="Presence";function xY(n){const[e,t]=P.useState(),r=P.useRef(null),i=P.useRef(n),o=P.useRef("none"),c=n?"mounted":"unmounted",[h,p]=yY(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const g=Em(r.current);o.current=h==="mounted"?g:"none"},[h]),Fi(()=>{const g=r.current,w=i.current;if(w!==n){const T=o.current,R=Em(g);n?p("MOUNT"):R==="none"||(g==null?void 0:g.display)==="none"?p("UNMOUNT"):p(w&&T!==R?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,p]),Fi(()=>{if(e){let g;const w=e.ownerDocument.defaultView??window,E=R=>{const D=Em(r.current).includes(R.animationName);if(R.target===e&&D&&(p("ANIMATION_END"),!i.current)){const L=e.style.animationFillMode;e.style.animationFillMode="forwards",g=w.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=L)})}},T=R=>{R.target===e&&(o.current=Em(r.current))};return e.addEventListener("animationstart",T),e.addEventListener("animationcancel",E),e.addEventListener("animationend",E),()=>{w.clearTimeout(g),e.removeEventListener("animationstart",T),e.removeEventListener("animationcancel",E),e.removeEventListener("animationend",E)}}else p("ANIMATION_END")},[e,p]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:P.useCallback(g=>{r.current=g?getComputedStyle(g):null,t(g)},[])}}function Em(n){return(n==null?void 0:n.animationName)||"none"}function wY(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Lg="Dialog",[FP,vJ]=Gd(Lg),[vY,yo]=FP(Lg),BP=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:o,modal:c=!0}=n,h=P.useRef(null),p=P.useRef(null),[g,w]=Rf({prop:r,defaultProp:i??!1,onChange:o,caller:Lg});return A.jsx(vY,{scope:e,triggerRef:h,contentRef:p,contentId:sd(),titleId:sd(),descriptionId:sd(),open:g,onOpenChange:w,onOpenToggle:P.useCallback(()=>w(E=>!E),[w]),modal:c,children:t})};BP.displayName=Lg;var jP="DialogTrigger",_Y=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(jP,t),o=bn(e,i.triggerRef);return A.jsx(nn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":e_(i.open),...r,ref:o,onClick:an(n.onClick,i.onOpenToggle)})});_Y.displayName=jP;var Z2="DialogPortal",[EY,UP]=FP(Z2,{forceMount:void 0}),zP=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,o=yo(Z2,e);return A.jsx(EY,{scope:e,forceMount:t,children:P.Children.map(r,c=>A.jsx(Mg,{present:t||o.open,children:A.jsx(K2,{asChild:!0,container:i,children:c})}))})};zP.displayName=Z2;var Vp="DialogOverlay",WP=P.forwardRef((n,e)=>{const t=UP(Vp,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=yo(Vp,n.__scopeDialog);return o.modal?A.jsx(Mg,{present:r||o.open,children:A.jsx(AY,{...i,ref:e})}):null});WP.displayName=Vp;var bY=Td("DialogOverlay.RemoveScroll"),AY=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(Vp,t);return A.jsx(Y2,{as:bY,allowPinchZoom:!0,shards:[i.contentRef],children:A.jsx(nn.div,{"data-state":e_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),nu="DialogContent",HP=P.forwardRef((n,e)=>{const t=UP(nu,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=yo(nu,n.__scopeDialog);return A.jsx(Mg,{present:r||o.open,children:o.modal?A.jsx(IY,{...i,ref:e}):A.jsx(TY,{...i,ref:e})})});HP.displayName=nu;var IY=P.forwardRef((n,e)=>{const t=yo(nu,n.__scopeDialog),r=P.useRef(null),i=bn(e,t.contentRef,r);return P.useEffect(()=>{const o=r.current;if(o)return q4(o)},[]),A.jsx(GP,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:an(n.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:an(n.onPointerDownOutside,o=>{const c=o.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0;(c.button===2||h)&&o.preventDefault()}),onFocusOutside:an(n.onFocusOutside,o=>o.preventDefault())})}),TY=P.forwardRef((n,e)=>{const t=yo(nu,n.__scopeDialog),r=P.useRef(!1),i=P.useRef(!1);return A.jsx(GP,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,h;(c=n.onCloseAutoFocus)==null||c.call(n,o),o.defaultPrevented||(r.current||(h=t.triggerRef.current)==null||h.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var p,g;(p=n.onInteractOutside)==null||p.call(n,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=o.target;((g=t.triggerRef.current)==null?void 0:g.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),GP=P.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...c}=n,h=yo(nu,t),p=P.useRef(null),g=bn(e,p);return _4(),A.jsxs(A.Fragment,{children:[A.jsx(V2,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:A.jsx(L2,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":e_(h.open),...c,ref:g,onDismiss:()=>h.onOpenChange(!1)})}),A.jsxs(A.Fragment,{children:[A.jsx(CY,{titleId:h.titleId}),A.jsx(RY,{contentRef:p,descriptionId:h.descriptionId})]})]})}),J2="DialogTitle",$P=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(J2,t);return A.jsx(nn.h2,{id:i.titleId,...r,ref:e})});$P.displayName=J2;var qP="DialogDescription",KP=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(qP,t);return A.jsx(nn.p,{id:i.descriptionId,...r,ref:e})});KP.displayName=qP;var XP="DialogClose",YP=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=yo(XP,t);return A.jsx(nn.button,{type:"button",...r,ref:e,onClick:an(n.onClick,()=>i.onOpenChange(!1))})});YP.displayName=XP;function e_(n){return n?"open":"closed"}var QP="DialogTitleWarning",[_J,ZP]=S$(QP,{contentName:nu,titleName:J2,docsSlug:"dialog"}),CY=({titleId:n})=>{const e=ZP(QP),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return P.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},SY="DialogDescriptionWarning",RY=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ZP(SY).contentName}}.`;return P.useEffect(()=>{var o;const i=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},NY=BP,kY=zP,JP=WP,e6=HP,t6=$P,n6=KP,PY=YP;const n0=NY,DY=kY,r6=P.forwardRef(({className:n,...e},t)=>A.jsx(JP,{ref:t,className:ln("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));r6.displayName=JP.displayName;const OY=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(DY,{children:[A.jsx(r6,{}),A.jsxs(e6,{ref:r,className:ln("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,A.jsxs(PY,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[A.jsx(Li,{className:"h-4 w-4"}),A.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));OY.displayName=e6.displayName;const r0=({className:n,...e})=>A.jsx("div",{className:ln("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});r0.displayName="DialogHeader";const i0=P.forwardRef(({className:n,...e},t)=>A.jsx(t6,{ref:t,className:ln("text-lg font-semibold leading-none tracking-tight",n),...e}));i0.displayName=t6.displayName;const MY=P.forwardRef(({className:n,...e},t)=>A.jsx(n6,{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));MY.displayName=n6.displayName;var Ze;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ze||(Ze={}));var oC=new Map([[Ze.QR_CODE,"QR_CODE"],[Ze.AZTEC,"AZTEC"],[Ze.CODABAR,"CODABAR"],[Ze.CODE_39,"CODE_39"],[Ze.CODE_93,"CODE_93"],[Ze.CODE_128,"CODE_128"],[Ze.DATA_MATRIX,"DATA_MATRIX"],[Ze.MAXICODE,"MAXICODE"],[Ze.ITF,"ITF"],[Ze.EAN_13,"EAN_13"],[Ze.EAN_8,"EAN_8"],[Ze.PDF_417,"PDF_417"],[Ze.RSS_14,"RSS_14"],[Ze.RSS_EXPANDED,"RSS_EXPANDED"],[Ze.UPC_A,"UPC_A"],[Ze.UPC_E,"UPC_E"],[Ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),aC;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(aC||(aC={}));function LY(n){return Object.values(Ze).includes(n)}var Fp;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Fp||(Fp={}));var VY=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Fp.SCAN_TYPE_CAMERA,Fp.SCAN_TYPE_FILE],n}(),i6=function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!oC.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,oC.get(e))},n}(),lC=function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n}(),Aw;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Aw||(Aw={}));var FY=function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:Aw.UNKWOWN_ERROR}},n}(),BY=function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n}();function va(n){return typeof n>"u"||n===null}var Ju=function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),s6=function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(e),h=0,p=c;h<p.length;h++){var g=p[h];if(o.has(g))return t.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},n}(),Bh={exports:{}},jY=Bh.exports,cC;function UY(){return cC||(cC=1,function(n,e){(function(t,r){r(e)})(jY,function(t){function r(j){return j==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,s){j.__proto__=s}||function(j,s){for(var l in s)s.hasOwnProperty(l)&&(j[l]=s[l])};function o(j,s){i(j,s);function l(){this.constructor=j}j.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}function c(j,s){var l=Object.setPrototypeOf;l?l(j,s):j.__proto__=s}function h(j,s){s===void 0&&(s=j.constructor);var l=Error.captureStackTrace;l&&l(j,s)}var p=function(j){o(s,j);function s(l){var u=this.constructor,f=j.call(this,l)||this;return Object.defineProperty(f,"name",{value:u.name,enumerable:!1}),c(f,u.prototype),h(f),f}return s}(Error);class g extends p{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class E extends g{}E.kind="IllegalArgumentException";class T{constructor(s){if(this.binarizer=s,s===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,l){return this.binarizer.getBlackRow(s,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,l,u,f){const m=this.binarizer.getLuminanceSource().crop(s,l,u,f);return new T(this.binarizer.createBinarizer(m))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends g{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class M{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(s,l,u,f,m){for(;m--;)u[f++]=s[l++]}static currentTimeMillis(){return Date.now()}}class L extends g{}L.kind="IndexOutOfBoundsException";class H extends L{constructor(s=void 0,l=void 0){super(l),this.index=s,this.message=l}}H.kind="ArrayIndexOutOfBoundsException";class z{static fill(s,l){for(let u=0,f=s.length;u<f;u++)s[u]=l}static fillWithin(s,l,u,f){z.rangeCheck(s.length,l,u);for(let m=l;m<u;m++)s[m]=f}static rangeCheck(s,l,u){if(l>u)throw new E("fromIndex("+l+") > toIndex("+u+")");if(l<0)throw new H(l);if(u>s)throw new H(u)}static asList(...s){return s}static create(s,l,u){return Array.from({length:s}).map(m=>Array.from({length:l}).fill(u))}static createInt32Array(s,l,u){return Array.from({length:s}).map(m=>Int32Array.from({length:l}).fill(u))}static equals(s,l){if(!s||!l||!s.length||!l.length||s.length!==l.length)return!1;for(let u=0,f=s.length;u<f;u++)if(s[u]!==l[u])return!1;return!0}static hashCode(s){if(s===null)return 0;let l=1;for(const u of s)l=31*l+u;return l}static fillUint8Array(s,l){for(let u=0;u!==s.length;u++)s[u]=l}static copyOf(s,l){return s.slice(0,l)}static copyOfUint8Array(s,l){if(s.length<=l){const u=new Uint8Array(l);return u.set(s),u}return s.slice(0,l)}static copyOfRange(s,l,u){const f=u-l,m=new Int32Array(f);return D.arraycopy(s,l,m,0,f),m}static binarySearch(s,l,u){u===void 0&&(u=z.numberComparator);let f=0,m=s.length-1;for(;f<=m;){const y=m+f>>1,v=u(l,s[y]);if(v>0)f=y+1;else if(v<0)m=y-1;else return y}return-f-1}static numberComparator(s,l){return s-l}}class W{static numberOfTrailingZeros(s){let l;if(s===0)return 32;let u=31;return l=s<<16,l!==0&&(u-=16,s=l),l=s<<8,l!==0&&(u-=8,s=l),l=s<<4,l!==0&&(u-=4,s=l),l=s<<2,l!==0&&(u-=2,s=l),u-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let l=1;return s>>>16||(l+=16,s<<=16),s>>>24||(l+=8,s<<=8),s>>>28||(l+=4,s<<=4),s>>>30||(l+=2,s<<=2),l-=s>>>31,l}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,l){return Math.trunc(s/l)}static parseInt(s,l=void 0){return parseInt(s,l)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(s,l){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,l==null?this.bits=Q.makeArray(s):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const l=Q.makeArray(s);D.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),m=u[f];m&=~((1<<(s&31))-1);const y=u.length;for(;m===0;){if(++f===y)return l;m=u[f]}const v=f*32+W.numberOfTrailingZeros(m);return v>l?l:v}getNextUnset(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),m=~u[f];m&=~((1<<(s&31))-1);const y=u.length;for(;m===0;){if(++f===y)return l;m=~u[f]}const v=f*32+W.numberOfTrailingZeros(m);return v>l?l:v}setBulk(s,l){this.bits[Math.floor(s/32)]=l}setRange(s,l){if(l<s||s<0||l>this.size)throw new E;if(l===s)return;l--;const u=Math.floor(s/32),f=Math.floor(l/32),m=this.bits;for(let y=u;y<=f;y++){const v=y>u?0:s&31,C=(2<<(y<f?31:l&31))-(1<<v);m[y]|=C}}clear(){const s=this.bits.length,l=this.bits;for(let u=0;u<s;u++)l[u]=0}isRange(s,l,u){if(l<s||s<0||l>this.size)throw new E;if(l===s)return!0;l--;const f=Math.floor(s/32),m=Math.floor(l/32),y=this.bits;for(let v=f;v<=m;v++){const I=v>f?0:s&31,O=(2<<(v<m?31:l&31))-(1<<I)&4294967295;if((y[v]&O)!==(u?O:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,l){if(l<0||l>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let u=l;u>0;u--)this.appendBit((s>>u-1&1)===1)}appendBitArray(s){const l=s.size;this.ensureCapacity(this.size+l);for(let u=0;u<l;u++)this.appendBit(s.get(u))}xor(s){if(this.size!==s.size)throw new E("Sizes don't match");const l=this.bits;for(let u=0,f=l.length;u<f;u++)l[u]^=s.bits[u]}toBytes(s,l,u,f){for(let m=0;m<f;m++){let y=0;for(let v=0;v<8;v++)this.get(s)&&(y|=1<<7-v),s++;l[u+m]=y}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),u=l+1,f=this.bits;for(let m=0;m<u;m++){let y=f[m];y=y>>1&1431655765|(y&1431655765)<<1,y=y>>2&858993459|(y&858993459)<<2,y=y>>4&252645135|(y&252645135)<<4,y=y>>8&16711935|(y&16711935)<<8,y=y>>16&65535|(y&65535)<<16,s[l-m]=y}if(this.size!==u*32){const m=u*32-this.size;let y=s[0]>>>m;for(let v=1;v<u;v++){const I=s[v];y|=I<<32-m,s[v-1]=y,y=I>>>m}s[u-1]=y}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof Q))return!1;const l=s;return this.size===l.size&&z.equals(this.bits,l.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let s="";for(let l=0,u=this.size;l<u;l++)(l&7)===0&&(s+=" "),s+=this.get(l)?"X":".";return s}clone(){return new Q(this.size,this.bits.slice())}}var ie;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ie||(ie={}));var le=ie;class F extends g{static getFormatInstance(){return new F}}F.kind="FormatException";var B;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(B||(B={}));class G{constructor(s,l,u,...f){this.valueIdentifier=s,this.name=u,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=f,G.VALUE_IDENTIFIER_TO_ECI.set(s,this),G.NAME_TO_ECI.set(u,this);const m=this.values;for(let y=0,v=m.length;y!==v;y++){const I=m[y];G.VALUES_TO_ECI.set(I,this)}for(const y of f)G.NAME_TO_ECI.set(y,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new F("incorect value");const l=G.VALUES_TO_ECI.get(s);if(l===void 0)throw new F("incorect value");return l}static getCharacterSetECIByName(s){const l=G.NAME_TO_ECI.get(s);if(l===void 0)throw new F("incorect value");return l}equals(s){if(!(s instanceof G))return!1;const l=s;return this.getName()===l.getName()}}G.VALUE_IDENTIFIER_TO_ECI=new Map,G.VALUES_TO_ECI=new Map,G.NAME_TO_ECI=new Map,G.Cp437=new G(B.Cp437,Int32Array.from([0,2]),"Cp437"),G.ISO8859_1=new G(B.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),G.ISO8859_2=new G(B.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),G.ISO8859_3=new G(B.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),G.ISO8859_4=new G(B.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),G.ISO8859_5=new G(B.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),G.ISO8859_6=new G(B.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),G.ISO8859_7=new G(B.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),G.ISO8859_8=new G(B.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),G.ISO8859_9=new G(B.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),G.ISO8859_10=new G(B.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),G.ISO8859_11=new G(B.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),G.ISO8859_13=new G(B.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),G.ISO8859_14=new G(B.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),G.ISO8859_15=new G(B.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),G.ISO8859_16=new G(B.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),G.SJIS=new G(B.SJIS,20,"SJIS","Shift_JIS"),G.Cp1250=new G(B.Cp1250,21,"Cp1250","windows-1250"),G.Cp1251=new G(B.Cp1251,22,"Cp1251","windows-1251"),G.Cp1252=new G(B.Cp1252,23,"Cp1252","windows-1252"),G.Cp1256=new G(B.Cp1256,24,"Cp1256","windows-1256"),G.UnicodeBigUnmarked=new G(B.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),G.UTF8=new G(B.UTF8,26,"UTF8","UTF-8"),G.ASCII=new G(B.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),G.Big5=new G(B.Big5,28,"Big5"),G.GB18030=new G(B.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),G.EUC_KR=new G(B.EUC_KR,30,"EUC_KR","EUC-KR");class J extends g{}J.kind="UnsupportedOperationException";class te{static decode(s,l){const u=this.encodingName(l);return this.customDecoder?this.customDecoder(s,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(s,u):new TextDecoder(u).decode(s)}static shouldDecodeOnFallback(s){return!te.isBrowser()&&s==="ISO-8859-1"}static encode(s,l){const u=this.encodingName(l);return this.customEncoder?this.customEncoder(s,u):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof G?s:G.getCharacterSetECIByName(s)}static decodeFallback(s,l){const u=this.encodingCharacterSet(l);if(te.isDecodeFallbackSupported(u)){let f="";for(let m=0,y=s.length;m<y;m++){let v=s[m].toString(16);v.length<2&&(v="0"+v),f+="%"+v}return decodeURIComponent(f)}if(u.equals(G.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new J(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(G.UTF8)||s.equals(G.ISO8859_1)||s.equals(G.ASCII)}static encodeFallback(s){const u=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let m=0;m<u.length;m++)f.push(u[m].charCodeAt(0));return new Uint8Array(f)}}class X{static castAsNonUtf8Char(s,l=null){const u=l?l.getName():this.ISO88591;return te.decode(new Uint8Array([s]),u)}static guessEncoding(s,l){if(l!=null&&l.get(le.CHARACTER_SET)!==void 0)return l.get(le.CHARACTER_SET).toString();const u=s.length;let f=!0,m=!0,y=!0,v=0,I=0,C=0,O=0,U=0,K=0,ee=0,ae=0,ue=0,fe=0,Ee=0;const Fe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let je=0;je<u&&(f||m||y);je++){const Oe=s[je]&255;y&&(v>0?(Oe&128)===0?y=!1:v--:(Oe&128)!==0&&((Oe&64)===0?y=!1:(v++,(Oe&32)===0?I++:(v++,(Oe&16)===0?C++:(v++,(Oe&8)===0?O++:y=!1))))),f&&(Oe>127&&Oe<160?f=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&Ee++),m&&(U>0?Oe<64||Oe===127||Oe>252?m=!1:U--:Oe===128||Oe===160||Oe>239?m=!1:Oe>160&&Oe<224?(K++,ae=0,ee++,ee>ue&&(ue=ee)):Oe>127?(U++,ee=0,ae++,ae>fe&&(fe=ae)):(ee=0,ae=0))}return y&&v>0&&(y=!1),m&&U>0&&(m=!1),y&&(Fe||I+C+O>0)?X.UTF8:m&&(X.ASSUME_SHIFT_JIS||ue>=3||fe>=3)?X.SHIFT_JIS:f&&m?ue===2&&K===2||Ee*10>=u?X.SHIFT_JIS:X.ISO88591:f?X.ISO88591:m?X.SHIFT_JIS:y?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(s,...l){let u=-1;function f(y,v,I,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let K=O?parseInt(O.substr(1)):void 0,ee;switch(U){case"s":ee=l[u];break;case"c":ee=l[u][0];break;case"f":ee=parseFloat(l[u]).toFixed(y);break;case"p":ee=parseFloat(l[u]).toPrecision(y);break;case"e":ee=parseFloat(l[u]).toExponential(y);break;case"x":ee=parseInt(l[u]).toString(K||16);break;case"d":ee=parseFloat(parseInt(l[u],K||10).toPrecision(y)).toFixed(0);break}ee=typeof ee=="object"?JSON.stringify(ee):(+ee).toString(K);let ae=parseInt(I),ue=I&&I[0]+""=="0"?"0":" ";for(;ee.length<ae;)ee=v!==void 0?ee+ue:ue+ee;return ee}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(m,f)}static getBytes(s,l){return te.encode(s,l)}static getCharCode(s,l=0){return s.charCodeAt(l)}static getCharAt(s){return String.fromCharCode(s)}}X.SHIFT_JIS=G.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=G.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=G.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class q{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=X.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,l,u){for(let f=l;l<l+u;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+1)}substring(s,l){return this.value.substring(s,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+l.length)}}class pe{constructor(s,l,u,f){if(this.width=s,this.height=l,this.rowSize=u,this.bits=f,l==null&&(l=s),this.height=l,s<1||l<1)throw new E("Both dimensions must be greater than 0");u==null&&(u=Math.floor((s+31)/32)),this.rowSize=u,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const l=s.length,u=s[0].length,f=new pe(u,l);for(let m=0;m<l;m++){const y=s[m];for(let v=0;v<u;v++)y[v]&&f.set(v,m)}return f}static parseFromString(s,l,u){if(s===null)throw new E("stringRepresentation cannot be null");const f=new Array(s.length);let m=0,y=0,v=-1,I=0,C=0;for(;C<s.length;)if(s.charAt(C)===`
`||s.charAt(C)==="\r"){if(m>y){if(v===-1)v=m-y;else if(m-y!==v)throw new E("row lengths do not match");y=m,I++}C++}else if(s.substring(C,C+l.length)===l)C+=l.length,f[m]=!0,m++;else if(s.substring(C,C+u.length)===u)C+=u.length,f[m]=!1,m++;else throw new E("illegal character encountered: "+s.substring(C));if(m>y){if(v===-1)v=m-y;else if(m-y!==v)throw new E("row lengths do not match");I++}const O=new pe(v,I);for(let U=0;U<m;U++)f[U]&&O.set(Math.floor(U%v),Math.floor(U/v));return O}get(s,l){const u=l*this.rowSize+Math.floor(s/32);return(this.bits[u]>>>(s&31)&1)!==0}set(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]|=1<<(s&31)&4294967295}unset(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]&=~(1<<(s&31)&4294967295)}flip(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new E("input matrix dimensions do not match");const l=new Q(Math.floor(this.width/32)+1),u=this.rowSize,f=this.bits;for(let m=0,y=this.height;m<y;m++){const v=m*u,I=s.getRow(m,l).getBitArray();for(let C=0;C<u;C++)f[v+C]^=I[C]}}clear(){const s=this.bits,l=s.length;for(let u=0;u<l;u++)s[u]=0}setRegion(s,l,u,f){if(l<0||s<0)throw new E("Left and top must be nonnegative");if(f<1||u<1)throw new E("Height and width must be at least 1");const m=s+u,y=l+f;if(y>this.height||m>this.width)throw new E("The region must fit inside the matrix");const v=this.rowSize,I=this.bits;for(let C=l;C<y;C++){const O=C*v;for(let U=s;U<m;U++)I[O+Math.floor(U/32)]|=1<<(U&31)&4294967295}}getRow(s,l){l==null||l.getSize()<this.width?l=new Q(this.width):l.clear();const u=this.rowSize,f=this.bits,m=s*u;for(let y=0;y<u;y++)l.setBulk(y*32,f[m+y]);return l}setRow(s,l){D.arraycopy(l.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),l=this.getHeight();let u=new Q(s),f=new Q(s);for(let m=0,y=Math.floor((l+1)/2);m<y;m++)u=this.getRow(m,u),f=this.getRow(l-1-m,f),u.reverse(),f.reverse(),this.setRow(m,f),this.setRow(l-1-m,u)}getEnclosingRectangle(){const s=this.width,l=this.height,u=this.rowSize,f=this.bits;let m=s,y=l,v=-1,I=-1;for(let C=0;C<l;C++)for(let O=0;O<u;O++){const U=f[C*u+O];if(U!==0){if(C<y&&(y=C),C>I&&(I=C),O*32<m){let K=0;for(;(U<<31-K&4294967295)===0;)K++;O*32+K<m&&(m=O*32+K)}if(O*32+31>v){let K=31;for(;!(U>>>K);)K--;O*32+K>v&&(v=O*32+K)}}}return v<m||I<y?null:Int32Array.from([m,y,v-m+1,I-y+1])}getTopLeftOnBit(){const s=this.rowSize,l=this.bits;let u=0;for(;u<l.length&&l[u]===0;)u++;if(u===l.length)return null;const f=u/s;let m=u%s*32;const y=l[u];let v=0;for(;(y<<31-v&4294967295)===0;)v++;return m+=v,Int32Array.from([m,f])}getBottomRightOnBit(){const s=this.rowSize,l=this.bits;let u=l.length-1;for(;u>=0&&l[u]===0;)u--;if(u<0)return null;const f=Math.floor(u/s);let m=Math.floor(u%s)*32;const y=l[u];let v=31;for(;!(y>>>v);)v--;return m+=v,Int32Array.from([m,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof pe))return!1;const l=s;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&z.equals(this.bits,l.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+z.hashCode(this.bits),s}toString(s="X ",l="  ",u=`
`){return this.buildToString(s,l,u)}buildToString(s,l,u){let f=new q;for(let m=0,y=this.height;m<y;m++){for(let v=0,I=this.width;v<I;v++)f.append(this.get(v,m)?s:l);f.append(u)}return f.toString()}clone(){return new pe(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends g{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class Ie extends M{constructor(s){super(s),this.luminances=Ie.EMPTY,this.buckets=new Int32Array(Ie.LUMINANCE_BUCKETS)}getBlackRow(s,l){const u=this.getLuminanceSource(),f=u.getWidth();l==null||l.getSize()<f?l=new Q(f):l.clear(),this.initArrays(f);const m=u.getRow(s,this.luminances),y=this.buckets;for(let I=0;I<f;I++)y[(m[I]&255)>>Ie.LUMINANCE_SHIFT]++;const v=Ie.estimateBlackPoint(y);if(f<3)for(let I=0;I<f;I++)(m[I]&255)<v&&l.set(I);else{let I=m[0]&255,C=m[1]&255;for(let O=1;O<f-1;O++){const U=m[O+1]&255;(C*4-I-U)/2<v&&l.set(O),I=C,C=U}}return l}getBlackMatrix(){const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight(),f=new pe(l,u);this.initArrays(l);const m=this.buckets;for(let I=1;I<5;I++){const C=Math.floor(u*I/5),O=s.getRow(C,this.luminances),U=Math.floor(l*4/5);for(let K=Math.floor(l/5);K<U;K++){const ee=O[K]&255;m[ee>>Ie.LUMINANCE_SHIFT]++}}const y=Ie.estimateBlackPoint(m),v=s.getMatrix();for(let I=0;I<u;I++){const C=I*l;for(let O=0;O<l;O++)(v[C+O]&255)<y&&f.set(O,I)}return f}createBinarizer(s){return new Ie(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const l=this.buckets;for(let u=0;u<Ie.LUMINANCE_BUCKETS;u++)l[u]=0}static estimateBlackPoint(s){const l=s.length;let u=0,f=0,m=0;for(let O=0;O<l;O++)s[O]>m&&(f=O,m=s[O]),s[O]>u&&(u=s[O]);let y=0,v=0;for(let O=0;O<l;O++){const U=O-f,K=s[O]*U*U;K>v&&(y=O,v=K)}if(f>y){const O=f;f=y,y=O}if(y-f<=l/16)throw new re;let I=y-1,C=-1;for(let O=y-1;O>f;O--){const U=O-f,K=U*U*(y-O)*(u-s[O]);K>C&&(I=O,C=K)}return I<<Ie.LUMINANCE_SHIFT}}Ie.LUMINANCE_BITS=5,Ie.LUMINANCE_SHIFT=8-Ie.LUMINANCE_BITS,Ie.LUMINANCE_BUCKETS=1<<Ie.LUMINANCE_BITS,Ie.EMPTY=Uint8ClampedArray.from([0]);class we extends Ie{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight();if(l>=we.MINIMUM_DIMENSION&&u>=we.MINIMUM_DIMENSION){const f=s.getMatrix();let m=l>>we.BLOCK_SIZE_POWER;(l&we.BLOCK_SIZE_MASK)!==0&&m++;let y=u>>we.BLOCK_SIZE_POWER;(u&we.BLOCK_SIZE_MASK)!==0&&y++;const v=we.calculateBlackPoints(f,m,y,l,u),I=new pe(l,u);we.calculateThresholdForBlock(f,m,y,l,u,v,I),this.matrix=I}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new we(s)}static calculateThresholdForBlock(s,l,u,f,m,y,v){const I=m-we.BLOCK_SIZE,C=f-we.BLOCK_SIZE;for(let O=0;O<u;O++){let U=O<<we.BLOCK_SIZE_POWER;U>I&&(U=I);const K=we.cap(O,2,u-3);for(let ee=0;ee<l;ee++){let ae=ee<<we.BLOCK_SIZE_POWER;ae>C&&(ae=C);const ue=we.cap(ee,2,l-3);let fe=0;for(let Fe=-2;Fe<=2;Fe++){const je=y[K+Fe];fe+=je[ue-2]+je[ue-1]+je[ue]+je[ue+1]+je[ue+2]}const Ee=fe/25;we.thresholdBlock(s,ae,U,Ee,f,v)}}}static cap(s,l,u){return s<l?l:s>u?u:s}static thresholdBlock(s,l,u,f,m,y){for(let v=0,I=u*m+l;v<we.BLOCK_SIZE;v++,I+=m)for(let C=0;C<we.BLOCK_SIZE;C++)(s[I+C]&255)<=f&&y.set(l+C,u+v)}static calculateBlackPoints(s,l,u,f,m){const y=m-we.BLOCK_SIZE,v=f-we.BLOCK_SIZE,I=new Array(u);for(let C=0;C<u;C++){I[C]=new Int32Array(l);let O=C<<we.BLOCK_SIZE_POWER;O>y&&(O=y);for(let U=0;U<l;U++){let K=U<<we.BLOCK_SIZE_POWER;K>v&&(K=v);let ee=0,ae=255,ue=0;for(let Ee=0,Fe=O*f+K;Ee<we.BLOCK_SIZE;Ee++,Fe+=f){for(let je=0;je<we.BLOCK_SIZE;je++){const Oe=s[Fe+je]&255;ee+=Oe,Oe<ae&&(ae=Oe),Oe>ue&&(ue=Oe)}if(ue-ae>we.MIN_DYNAMIC_RANGE)for(Ee++,Fe+=f;Ee<we.BLOCK_SIZE;Ee++,Fe+=f)for(let je=0;je<we.BLOCK_SIZE;je++)ee+=s[Fe+je]&255}let fe=ee>>we.BLOCK_SIZE_POWER*2;if(ue-ae<=we.MIN_DYNAMIC_RANGE&&(fe=ae/2,C>0&&U>0)){const Ee=(I[C-1][U]+2*I[C][U-1]+I[C-1][U-1])/4;ae<Ee&&(fe=Ee)}I[C][U]=fe}}return I}}we.BLOCK_SIZE_POWER=3,we.BLOCK_SIZE=1<<we.BLOCK_SIZE_POWER,we.BLOCK_SIZE_MASK=we.BLOCK_SIZE-1,we.MINIMUM_DIMENSION=we.BLOCK_SIZE*5,we.MIN_DYNAMIC_RANGE=24;class se{constructor(s,l){this.width=s,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,l,u,f){throw new J("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new J("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new J("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let l=new q;for(let u=0;u<this.height;u++){const f=this.getRow(u,s);for(let m=0;m<this.width;m++){const y=f[m]&255;let v;y<64?v="#":y<128?v="+":y<192?v=".":v=" ",l.append(v)}l.append(`
`)}return l.toString()}}class Te extends se{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,l){const u=this.delegate.getRow(s,l),f=this.getWidth();for(let m=0;m<f;m++)u[m]=255-(u[m]&255);return u}getMatrix(){const s=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(l);for(let f=0;f<l;f++)u[f]=255-(s[f]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(s,l,u,f){return new Te(this.delegate.crop(s,l,u,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class Ne extends se{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ne.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const l=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ne.toGrayscaleBuffer(l.data,s.width,s.height)}static toGrayscaleBuffer(s,l,u){const f=new Uint8ClampedArray(l*u);for(let m=0,y=0,v=s.length;m<v;m+=4,y++){let I;if(s[m+3]===0)I=255;else{const O=s[m],U=s[m+1],K=s[m+2];I=306*O+601*U+117*K+512>>10}f[y]=I}return f}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth(),f=s*u;return l===null?l=this.buffer.slice(f,f+u):(l.length<u&&(l=new Uint8ClampedArray(u)),l.set(this.buffer.slice(f,f+u))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,l,u,f){return super.crop(s,l,u,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const l=this.getTempCanvasElement(),u=l.getContext("2d"),f=s*Ne.DEGREE_TO_RADIANS,m=this.canvas.width,y=this.canvas.height,v=Math.ceil(Math.abs(Math.cos(f))*m+Math.abs(Math.sin(f))*y),I=Math.ceil(Math.abs(Math.sin(f))*m+Math.abs(Math.cos(f))*y);return l.width=v,l.height=I,u.translate(v/2,I/2),u.rotate(f),u.drawImage(this.canvas,m/-2,y/-2),this.buffer=Ne.makeBufferFromCanvasImageData(l),this}invert(){return new Te(this)}}Ne.DEGREE_TO_RADIANS=Math.PI/180;class oe{constructor(s,l,u){this.deviceId=s,this.label=l,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||Y0||self||window||void 0)&&(globalThis||Y0||self||window||void 0).__awaiter||function(j,s,l,u){function f(m){return m instanceof l?m:new l(function(y){y(m)})}return new(l||(l=Promise))(function(m,y){function v(O){try{C(u.next(O))}catch(U){y(U)}}function I(O){try{C(u.throw(O))}catch(U){y(U)}}function C(O){O.done?m(O.value):f(O.value).then(v,I)}C((u=u.apply(j,s||[])).next())})};class Se{constructor(s,l=500,u){this.reader=s,this.timeBetweenScansMillis=l,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const u of s){const f=u.kind==="video"?"videoinput":u.kind;if(f!=="videoinput")continue;const m=u.deviceId||u.id,y=u.label||`Video device ${l.length+1}`,v=u.groupId,I={deviceId:m,label:y,kind:f,groupId:v};l.push(I)}return l})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new oe(l.deviceId,l.label))})}findDeviceById(s){return he(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(u=>u.deviceId===s):null})}decodeFromInputVideoDevice(s,l){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,l)})}decodeOnceFromVideoDevice(s,l){return he(this,void 0,void 0,function*(){this.reset();let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeOnceFromConstraints(f,l)})}decodeOnceFromConstraints(s,l){return he(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(u,l)})}decodeOnceFromStream(s,l){return he(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,l);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(s,l,u){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,l,u)})}decodeFromVideoDevice(s,l,u){return he(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const m={video:f};return yield this.decodeFromConstraints(m,l,u)})}decodeFromConstraints(s,l,u){return he(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,l,u)})}decodeFromStream(s,l,u){return he(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,l);return yield this.decodeContinuously(f,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,l){return he(this,void 0,void 0,function*(){const u=this.prepareVideoElement(l);return this.addVideoSource(u,s),this.videoElement=u,this.stream=s,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(s){return new Promise((l,u)=>this.playVideoOnLoad(s,()=>l()))}playVideoOnLoad(s,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",l),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,l){const u=document.getElementById(s);if(!u)throw new w(`element with id '${s}' not found`);if(u.nodeName.toLowerCase()!==l.toLowerCase())throw new w(`element with id '${s}' must be an ${l} element`);return u}decodeFromImage(s,l){if(!s&&!l)throw new w("either imageElement with a src set or an url must be provided");return l&&!s?this.decodeFromImageUrl(l):this.decodeFromImageElement(s)}decodeFromVideo(s,l){if(!s&&!l)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,l,u){if(s===void 0&&l===void 0)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrlContinuously(l,u):this.decodeFromVideoElementContinuously(s,u)}decodeFromImageElement(s){if(!s)throw new w("An image element must be provided.");this.reset();const l=this.prepareImageElement(s);this.imageElement=l;let u;return this.isImageLoaded(l)?u=this.decodeOnce(l,!1,!0):u=this._decodeOnLoadImage(l),u}decodeFromVideoElement(s){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(s,l){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(u,l)}_decodeFromVideoElementSetup(s){if(!s)throw new w("A video element must be provided.");this.reset();const l=this.prepareVideoElement(s);return this.videoElement=l,l}decodeFromImageUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const u=this._decodeOnLoadImage(l);return l.src=s,u}decodeFromVideoUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElement(l);return l.src=s,u}decodeFromVideoUrlContinuously(s,l){if(!s)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(u,l);return u.src=s,f}_decodeOnLoadImage(s){return new Promise((l,u)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(l,u),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,l){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,l)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let l;return typeof s>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(l=s),l}prepareVideoElement(s){let l;return!s&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(l=s),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(s,l=!0,u=!0){this._stopAsyncDecode=!1;const f=(m,y)=>{if(this._stopAsyncDecode){y(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const v=this.decode(s);m(v)}catch(v){const I=l&&v instanceof re,O=(v instanceof R||v instanceof F)&&u;if(I||O)return setTimeout(f,this._timeBetweenDecodingAttempts,m,y);y(v)}};return new Promise((m,y)=>f(m,y))}decodeContinuously(s,l){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);l(f,null),setTimeout(u,this.timeBetweenScansMillis)}catch(f){l(null,f);const m=f instanceof R||f instanceof F,y=f instanceof re;(m||y)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(s){const l=this.createBinaryBitmap(s);return this.decodeBitmap(l)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,l,u){l||(l={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(s,l,u=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const l=this.getCaptureCanvas(s),u=new Ne(l),f=new we(u);return new T(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const l=this.createCaptureCanvas(s);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let u,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(u=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(u=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),l.style.width=u+"px",l.style.height=f+"px",l.width=u,l.height=f,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,l){try{s.srcObject=l}catch{s.src=URL.createObjectURL(l)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Le{constructor(s,l,u=l==null?0:8*l.length,f,m,y=D.currentTimeMillis()){this.text=s,this.rawBytes=l,this.numBits=u,this.resultPoints=f,this.format=m,this.timestamp=y,this.text=s,this.rawBytes=l,u==null?this.numBits=l==null?0:8*l.length:this.numBits=u,this.resultPoints=f,this.format=m,this.resultMetadata=null,y==null?this.timestamp=D.currentTimeMillis():this.timestamp=y}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,l)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const l=this.resultPoints;if(l===null)this.resultPoints=s;else if(s!==null&&s.length>0){const u=new Array(l.length+s.length);D.arraycopy(l,0,u,0,l.length),D.arraycopy(s,0,u,l.length,s.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var it;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(it||(it={}));var Re=it,Pe;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pe||(Pe={}));var Ge=Pe;class at{constructor(s,l,u,f,m=-1,y=-1){this.rawBytes=s,this.text=l,this.byteSegments=u,this.ecLevel=f,this.structuredAppendSequenceNumber=m,this.structuredAppendParity=y,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class st{exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}static addOrSubtract(s,l){return s^l}}class ct{constructor(s,l){if(l.length===0)throw new E;this.field=s;const u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const l=this.coefficients;let u;if(s===1){u=0;for(let y=0,v=l.length;y!==v;y++){const I=l[y];u=st.addOrSubtract(u,I)}return u}u=l[0];const f=l.length,m=this.field;for(let y=1;y<f;y++)u=st.addOrSubtract(m.multiply(s,u),l[y]);return u}addOrSubtract(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){const y=l;l=u,u=y}let f=new Int32Array(u.length);const m=u.length-l.length;D.arraycopy(u,0,f,0,m);for(let y=m;y<u.length;y++)f[y]=st.addOrSubtract(l[y-m],u[y]);return new ct(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const l=this.coefficients,u=l.length,f=s.coefficients,m=f.length,y=new Int32Array(u+m-1),v=this.field;for(let I=0;I<u;I++){const C=l[I];for(let O=0;O<m;O++)y[I+O]=st.addOrSubtract(y[I+O],v.multiply(C,f[O]))}return new ct(v,y)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const l=this.coefficients.length,u=this.field,f=new Int32Array(l),m=this.coefficients;for(let y=0;y<l;y++)f[y]=u.multiply(m[y],s);return new ct(u,f)}multiplyByMonomial(s,l){if(s<0)throw new E;if(l===0)return this.field.getZero();const u=this.coefficients,f=u.length,m=new Int32Array(f+s),y=this.field;for(let v=0;v<f;v++)m[v]=y.multiply(u[v],l);return new ct(y,m)}divide(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new E("Divide by 0");const l=this.field;let u=l.getZero(),f=this;const m=s.getCoefficient(s.getDegree()),y=l.inverse(m);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const v=f.getDegree()-s.getDegree(),I=l.multiply(f.getCoefficient(f.getDegree()),y),C=s.multiplyByMonomial(v,I),O=l.buildMonomial(v,I);u=u.addOrSubtract(O),f=f.addOrSubtract(C)}return[u,f]}toString(){let s="";for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);if(u!==0){if(u<0?(s+=" - ",u=-u):s.length>0&&(s+=" + "),l===0||u!==1){const f=this.field.log(u);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}l!==0&&(l===1?s+="x":(s+="x^",s+=l))}}return s}}class Et extends g{}Et.kind="ArithmeticException";class ht extends st{constructor(s,l,u){super(),this.primitive=s,this.size=l,this.generatorBase=u;const f=new Int32Array(l);let m=1;for(let v=0;v<l;v++)f[v]=m,m*=2,m>=l&&(m^=s,m&=l-1);this.expTable=f;const y=new Int32Array(l);for(let v=0;v<l-1;v++)y[f[v]]=v;this.logTable=y,this.zero=new ct(this,Int32Array.from([0])),this.one=new ct(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new E;if(l===0)return this.zero;const u=new Int32Array(s+1);return u[0]=l,new ct(this,u)}inverse(s){if(s===0)throw new Et;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class gn extends g{}gn.kind="ReedSolomonException";class Mn extends g{}Mn.kind="IllegalStateException";class Pr{constructor(s){this.field=s}decode(s,l){const u=this.field,f=new ct(u,s),m=new Int32Array(l);let y=!0;for(let ee=0;ee<l;ee++){const ae=f.evaluateAt(u.exp(ee+u.getGeneratorBase()));m[m.length-1-ee]=ae,ae!==0&&(y=!1)}if(y)return;const v=new ct(u,m),I=this.runEuclideanAlgorithm(u.buildMonomial(l,1),v,l),C=I[0],O=I[1],U=this.findErrorLocations(C),K=this.findErrorMagnitudes(O,U);for(let ee=0;ee<U.length;ee++){const ae=s.length-1-u.log(U[ee]);if(ae<0)throw new gn("Bad error location");s[ae]=ht.addOrSubtract(s[ae],K[ee])}}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){const ee=s;s=l,l=ee}const f=this.field;let m=s,y=l,v=f.getZero(),I=f.getOne();for(;y.getDegree()>=(u/2|0);){let ee=m,ae=v;if(m=y,v=I,m.isZero())throw new gn("r_{i-1} was zero");y=ee;let ue=f.getZero();const fe=m.getCoefficient(m.getDegree()),Ee=f.inverse(fe);for(;y.getDegree()>=m.getDegree()&&!y.isZero();){const Fe=y.getDegree()-m.getDegree(),je=f.multiply(y.getCoefficient(y.getDegree()),Ee);ue=ue.addOrSubtract(f.buildMonomial(Fe,je)),y=y.addOrSubtract(m.multiplyByMonomial(Fe,je))}if(I=ue.multiply(v).addOrSubtract(ae),y.getDegree()>=m.getDegree())throw new Mn("Division algorithm failed to reduce polynomial?")}const C=I.getCoefficient(0);if(C===0)throw new gn("sigmaTilde(0) was zero");const O=f.inverse(C),U=I.multiplyScalar(O),K=y.multiplyScalar(O);return[U,K]}findErrorLocations(s){const l=s.getDegree();if(l===1)return Int32Array.from([s.getCoefficient(1)]);const u=new Int32Array(l);let f=0;const m=this.field;for(let y=1;y<m.getSize()&&f<l;y++)s.evaluateAt(y)===0&&(u[f]=m.inverse(y),f++);if(f!==l)throw new gn("Error locator degree does not match number of roots");return u}findErrorMagnitudes(s,l){const u=l.length,f=new Int32Array(u),m=this.field;for(let y=0;y<u;y++){const v=m.inverse(l[y]);let I=1;for(let C=0;C<u;C++)if(y!==C){const O=m.multiply(l[C],v),U=(O&1)===0?O|1:O&-2;I=m.multiply(I,U)}f[y]=m.multiply(s.evaluateAt(v),m.inverse(I)),m.getGeneratorBase()!==0&&(f[y]=m.multiply(f[y],v))}return f}}var Qt;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})(Qt||(Qt={}));class zt{decode(s){this.ddata=s;let l=s.getBits(),u=this.extractBits(l),f=this.correctBits(u),m=zt.convertBoolArrayToByteArray(f),y=zt.getEncodedData(f),v=new at(m,y,null,null);return v.setNumBits(f.length),v}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let l=s.length,u=Qt.UPPER,f=Qt.UPPER,m="",y=0;for(;y<l;)if(f===Qt.BINARY){if(l-y<5)break;let v=zt.readCode(s,y,5);if(y+=5,v===0){if(l-y<11)break;v=zt.readCode(s,y,11)+31,y+=11}for(let I=0;I<v;I++){if(l-y<8){y=l;break}const C=zt.readCode(s,y,8);m+=X.castAsNonUtf8Char(C),y+=8}f=u}else{let v=f===Qt.DIGIT?4:5;if(l-y<v)break;let I=zt.readCode(s,y,v);y+=v;let C=zt.getCharacter(f,I);C.startsWith("CTRL_")?(u=f,f=zt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(u=f)):(m+=C,f=u)}return m}static getTable(s){switch(s){case"L":return Qt.LOWER;case"P":return Qt.PUNCT;case"M":return Qt.MIXED;case"D":return Qt.DIGIT;case"B":return Qt.BINARY;case"U":default:return Qt.UPPER}}static getCharacter(s,l){switch(s){case Qt.UPPER:return zt.UPPER_TABLE[l];case Qt.LOWER:return zt.LOWER_TABLE[l];case Qt.MIXED:return zt.MIXED_TABLE[l];case Qt.PUNCT:return zt.PUNCT_TABLE[l];case Qt.DIGIT:return zt.DIGIT_TABLE[l];default:throw new Mn("Bad table")}}correctBits(s){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=ht.AZTEC_DATA_10):(u=12,l=ht.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),m=s.length/u;if(m<f)throw new F;let y=s.length%u,v=new Int32Array(m);for(let K=0;K<m;K++,y+=u)v[K]=zt.readCode(s,y,u);try{new Pr(l).decode(v,m-f)}catch(K){throw new F(K)}let I=(1<<u)-1,C=0;for(let K=0;K<f;K++){let ee=v[K];if(ee===0||ee===I)throw new F;(ee===1||ee===I-1)&&C++}let O=new Array(f*u-C),U=0;for(let K=0;K<f;K++){let ee=v[K];if(ee===1||ee===I-1)O.fill(ee>1,U,U+u-1),U+=u-1;else for(let ae=u-1;ae>=0;--ae)O[U++]=(ee&1<<ae)!==0}return O}extractBits(s){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),f=(l?11:14)+u*4,m=new Int32Array(f),y=new Array(this.totalBitsInLayer(u,l));if(l)for(let v=0;v<m.length;v++)m[v]=v;else{let v=f+1+2*W.truncDivision(W.truncDivision(f,2)-1,15),I=f/2,C=W.truncDivision(v,2);for(let O=0;O<I;O++){let U=O+W.truncDivision(O,15);m[I-O-1]=C-U-1,m[I+O]=C+U+1}}for(let v=0,I=0;v<u;v++){let C=(u-v)*4+(l?9:12),O=v*2,U=f-1-O;for(let K=0;K<C;K++){let ee=K*2;for(let ae=0;ae<2;ae++)y[I+ee+ae]=s.get(m[O+ae],m[O+K]),y[I+2*C+ee+ae]=s.get(m[O+K],m[U-ae]),y[I+4*C+ee+ae]=s.get(m[U-ae],m[U-K]),y[I+6*C+ee+ae]=s.get(m[U-K],m[O+ae])}I+=C*8}return y}static readCode(s,l,u){let f=0;for(let m=l;m<l+u;m++)f<<=1,s[m]&&(f|=1);return f}static readByte(s,l){let u=s.length-l;return u>=8?zt.readCode(s,l,8):zt.readCode(s,l,u)<<8-u}static convertBoolArrayToByteArray(s){let l=new Uint8Array((s.length+7)/8);for(let u=0;u<l.length;u++)l[u]=zt.readByte(s,8*u);return l}totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,l,u,f){const m=s-u,y=l-f;return Math.sqrt(m*m+y*y)}static sum(s){let l=0;for(let u=0,f=s.length;u!==f;u++){const m=s[u];l+=m}return l}}class xi{static floatToIntBits(s){return s}}xi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Xe{constructor(s,l){this.x=s,this.y=l}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Xe){const l=s;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*xi.floatToIntBits(this.x)+xi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const l=this.distance(s[0],s[1]),u=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let m,y,v;if(u>=l&&u>=f?(y=s[0],m=s[1],v=s[2]):f>=u&&f>=l?(y=s[1],m=s[0],v=s[2]):(y=s[2],m=s[0],v=s[1]),this.crossProductZ(m,y,v)<0){const I=m;m=v,v=I}s[0]=m,s[1]=y,s[2]=v}static distance(s,l){return mt.distance(s.x,s.y,l.x,l.y)}static crossProductZ(s,l,u){const f=l.x,m=l.y;return(u.x-f)*(s.y-m)-(u.y-m)*(s.x-f)}}class Kn{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class wi extends Kn{constructor(s,l,u,f,m){super(s,l),this.compact=u,this.nbDatablocks=f,this.nbLayers=m}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zr{constructor(s,l,u,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),l==null&&(l=Zr.INIT_SIZE),u==null&&(u=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const m=l/2|0;if(this.leftInit=u-m,this.rightInit=u+m,this.upInit=f-m,this.downInit=f+m,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let s=this.leftInit,l=this.rightInit,u=this.upInit,f=this.downInit,m=!1,y=!0,v=!1,I=!1,C=!1,O=!1,U=!1;const K=this.width,ee=this.height;for(;y;){y=!1;let ae=!0;for(;(ae||!I)&&l<K;)ae=this.containsBlackPoint(u,f,l,!1),ae?(l++,y=!0,I=!0):I||l++;if(l>=K){m=!0;break}let ue=!0;for(;(ue||!C)&&f<ee;)ue=this.containsBlackPoint(s,l,f,!0),ue?(f++,y=!0,C=!0):C||f++;if(f>=ee){m=!0;break}let fe=!0;for(;(fe||!O)&&s>=0;)fe=this.containsBlackPoint(u,f,s,!1),fe?(s--,y=!0,O=!0):O||s--;if(s<0){m=!0;break}let Ee=!0;for(;(Ee||!U)&&u>=0;)Ee=this.containsBlackPoint(s,l,u,!0),Ee?(u--,y=!0,U=!0):U||u--;if(u<0){m=!0;break}y&&(v=!0)}if(!m&&v){const ae=l-s;let ue=null;for(let je=1;ue===null&&je<ae;je++)ue=this.getBlackPointOnSegment(s,f-je,s+je,f);if(ue==null)throw new re;let fe=null;for(let je=1;fe===null&&je<ae;je++)fe=this.getBlackPointOnSegment(s,u+je,s+je,u);if(fe==null)throw new re;let Ee=null;for(let je=1;Ee===null&&je<ae;je++)Ee=this.getBlackPointOnSegment(l,u+je,l-je,u);if(Ee==null)throw new re;let Fe=null;for(let je=1;Fe===null&&je<ae;je++)Fe=this.getBlackPointOnSegment(l,f-je,l-je,f);if(Fe==null)throw new re;return this.centerEdges(Fe,ue,Ee,fe)}else throw new re}getBlackPointOnSegment(s,l,u,f){const m=mt.round(mt.distance(s,l,u,f)),y=(u-s)/m,v=(f-l)/m,I=this.image;for(let C=0;C<m;C++){const O=mt.round(s+C*y),U=mt.round(l+C*v);if(I.get(O,U))return new Xe(O,U)}return null}centerEdges(s,l,u,f){const m=s.getX(),y=s.getY(),v=l.getX(),I=l.getY(),C=u.getX(),O=u.getY(),U=f.getX(),K=f.getY(),ee=Zr.CORR;return m<this.width/2?[new Xe(U-ee,K+ee),new Xe(v+ee,I+ee),new Xe(C-ee,O-ee),new Xe(m+ee,y-ee)]:[new Xe(U+ee,K+ee),new Xe(v+ee,I-ee),new Xe(C-ee,O+ee),new Xe(m-ee,y-ee)]}containsBlackPoint(s,l,u,f){const m=this.image;if(f){for(let y=s;y<=l;y++)if(m.get(y,u))return!0}else for(let y=s;y<=l;y++)if(m.get(u,y))return!0;return!1}}Zr.INIT_SIZE=10,Zr.CORR=1;class Qs{static checkAndNudgePoints(s,l){const u=s.getWidth(),f=s.getHeight();let m=!0;for(let y=0;y<l.length&&m;y+=2){const v=Math.floor(l[y]),I=Math.floor(l[y+1]);if(v<-1||v>u||I<-1||I>f)throw new re;m=!1,v===-1?(l[y]=0,m=!0):v===u&&(l[y]=u-1,m=!0),I===-1?(l[y+1]=0,m=!0):I===f&&(l[y+1]=f-1,m=!0)}m=!0;for(let y=l.length-2;y>=0&&m;y-=2){const v=Math.floor(l[y]),I=Math.floor(l[y+1]);if(v<-1||v>u||I<-1||I>f)throw new re;m=!1,v===-1?(l[y]=0,m=!0):v===u&&(l[y]=u-1,m=!0),I===-1?(l[y+1]=0,m=!0):I===f&&(l[y+1]=f-1,m=!0)}}}class Wt{constructor(s,l,u,f,m,y,v,I,C){this.a11=s,this.a21=l,this.a31=u,this.a12=f,this.a22=m,this.a32=y,this.a13=v,this.a23=I,this.a33=C}static quadrilateralToQuadrilateral(s,l,u,f,m,y,v,I,C,O,U,K,ee,ae,ue,fe){const Ee=Wt.quadrilateralToSquare(s,l,u,f,m,y,v,I);return Wt.squareToQuadrilateral(C,O,U,K,ee,ae,ue,fe).times(Ee)}transformPoints(s){const l=s.length,u=this.a11,f=this.a12,m=this.a13,y=this.a21,v=this.a22,I=this.a23,C=this.a31,O=this.a32,U=this.a33;for(let K=0;K<l;K+=2){const ee=s[K],ae=s[K+1],ue=m*ee+I*ae+U;s[K]=(u*ee+y*ae+C)/ue,s[K+1]=(f*ee+v*ae+O)/ue}}transformPointsWithValues(s,l){const u=this.a11,f=this.a12,m=this.a13,y=this.a21,v=this.a22,I=this.a23,C=this.a31,O=this.a32,U=this.a33,K=s.length;for(let ee=0;ee<K;ee++){const ae=s[ee],ue=l[ee],fe=m*ae+I*ue+U;s[ee]=(u*ae+y*ue+C)/fe,l[ee]=(f*ae+v*ue+O)/fe}}static squareToQuadrilateral(s,l,u,f,m,y,v,I){const C=s-u+m-v,O=l-f+y-I;if(C===0&&O===0)return new Wt(u-s,m-u,s,f-l,y-f,l,0,0,1);{const U=u-m,K=v-m,ee=f-y,ae=I-y,ue=U*ae-K*ee,fe=(C*ae-K*O)/ue,Ee=(U*O-C*ee)/ue;return new Wt(u-s+fe*u,v-s+Ee*v,s,f-l+fe*f,I-l+Ee*I,l,fe,Ee,1)}}static quadrilateralToSquare(s,l,u,f,m,y,v,I){return Wt.squareToQuadrilateral(s,l,u,f,m,y,v,I).buildAdjoint()}buildAdjoint(){return new Wt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Wt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Xn extends Qs{sampleGrid(s,l,u,f,m,y,v,I,C,O,U,K,ee,ae,ue,fe,Ee,Fe,je){const Oe=Wt.quadrilateralToQuadrilateral(f,m,y,v,I,C,O,U,K,ee,ae,ue,fe,Ee,Fe,je);return this.sampleGridWithTransform(s,l,u,Oe)}sampleGridWithTransform(s,l,u,f){if(l<=0||u<=0)throw new re;const m=new pe(l,u),y=new Float32Array(2*l);for(let v=0;v<u;v++){const I=y.length,C=v+.5;for(let O=0;O<I;O+=2)y[O]=O/2+.5,y[O+1]=C;f.transformPoints(y),Qs.checkAndNudgePoints(s,y);try{for(let O=0;O<I;O+=2)s.get(Math.floor(y[O]),Math.floor(y[O+1]))&&m.set(O/2,v)}catch{throw new re}}return m}}class _r{static setGridSampler(s){_r.gridSampler=s}static getInstance(){return _r.gridSampler}}_r.gridSampler=new Xn;class Ln{constructor(s,l){this.x=s,this.y=l}toResultPoint(){return new Xe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Jr{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let l=this.getMatrixCenter(),u=this.getBullsEyeCorners(l);if(s){let y=u[0];u[0]=u[2],u[2]=y}this.extractParameters(u);let f=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),m=this.getMatrixCornerPoints(u);return new wi(f,m,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new re;let l=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(s[0],s[1],l),this.sampleLine(s[1],s[2],l),this.sampleLine(s[2],s[3],l),this.sampleLine(s[3],s[0],l)]);this.shift=this.getRotation(u,l);let f=0;for(let y=0;y<4;y++){let v=u[(this.shift+y)%4];this.compact?(f<<=7,f+=v>>1&127):(f<<=10,f+=(v>>2&992)+(v>>1&31))}let m=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(m>>6)+1,this.nbDataBlocks=(m&63)+1):(this.nbLayers=(m>>11)+1,this.nbDataBlocks=(m&2047)+1)}getRotation(s,l){let u=0;s.forEach((f,m,y)=>{let v=(f>>l-2<<1)+(f&1);u=(u<<3)+v}),u=((u&1)<<11)+(u>>1);for(let f=0;f<4;f++)if(W.bitCount(u^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new re}getCorrectedParameterData(s,l){let u,f;l?(u=7,f=2):(u=10,f=4);let m=u-f,y=new Int32Array(u);for(let I=u-1;I>=0;--I)y[I]=s&15,s>>=4;try{new Pr(ht.AZTEC_PARAM).decode(y,m)}catch{throw new re}let v=0;for(let I=0;I<f;I++)v=(v<<4)+y[I];return v}getBullsEyeCorners(s){let l=s,u=s,f=s,m=s,y=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let U=this.getFirstDifferent(l,y,1,-1),K=this.getFirstDifferent(u,y,1,1),ee=this.getFirstDifferent(f,y,-1,1),ae=this.getFirstDifferent(m,y,-1,-1);if(this.nbCenterLayers>2){let ue=this.distancePoint(ae,U)*this.nbCenterLayers/(this.distancePoint(m,l)*(this.nbCenterLayers+2));if(ue<.75||ue>1.25||!this.isWhiteOrBlackRectangle(U,K,ee,ae))break}l=U,u=K,f=ee,m=ae,y=!y}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let v=new Xe(l.getX()+.5,l.getY()-.5),I=new Xe(u.getX()+.5,u.getY()+.5),C=new Xe(f.getX()-.5,f.getY()+.5),O=new Xe(m.getX()-.5,m.getY()-.5);return this.expandSquare([v,I,C,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,l,u,f;try{let v=new Zr(this.image).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{let I=this.image.getWidth()/2,C=this.image.getHeight()/2;s=this.getFirstDifferent(new Ln(I+7,C-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Ln(I+7,C+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Ln(I-7,C+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Ln(I-7,C-7),!1,-1,-1).toResultPoint()}let m=mt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=mt.round((s.getY()+f.getY()+l.getY()+u.getY())/4);try{let v=new Zr(this.image,15,m,y).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{s=this.getFirstDifferent(new Ln(m+7,y-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Ln(m+7,y+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Ln(m-7,y+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Ln(m-7,y-7),!1,-1,-1).toResultPoint()}return m=mt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=mt.round((s.getY()+f.getY()+l.getY()+u.getY())/4),new Ln(m,y)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,l,u,f,m){let y=_r.getInstance(),v=this.getDimension(),I=v/2-this.nbCenterLayers,C=v/2+this.nbCenterLayers;return y.sampleGrid(s,v,v,I,I,C,I,C,C,I,C,l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY(),m.getX(),m.getY())}sampleLine(s,l,u){let f=0,m=this.distanceResultPoint(s,l),y=m/u,v=s.getX(),I=s.getY(),C=y*(l.getX()-s.getX())/m,O=y*(l.getY()-s.getY())/m;for(let U=0;U<u;U++)this.image.get(mt.round(v+U*C),mt.round(I+U*O))&&(f|=1<<u-U-1);return f}isWhiteOrBlackRectangle(s,l,u,f){let m=3;s=new Ln(s.getX()-m,s.getY()+m),l=new Ln(l.getX()-m,l.getY()-m),u=new Ln(u.getX()+m,u.getY()-m),f=new Ln(f.getX()+m,f.getY()+m);let y=this.getColor(f,s);if(y===0)return!1;let v=this.getColor(s,l);return v!==y||(v=this.getColor(l,u),v!==y)?!1:(v=this.getColor(u,f),v===y)}getColor(s,l){let u=this.distancePoint(s,l),f=(l.getX()-s.getX())/u,m=(l.getY()-s.getY())/u,y=0,v=s.getX(),I=s.getY(),C=this.image.get(s.getX(),s.getY()),O=Math.ceil(u);for(let K=0;K<O;K++)v+=f,I+=m,this.image.get(mt.round(v),mt.round(I))!==C&&y++;let U=y/u;return U>.1&&U<.9?0:U<=.1===C?1:-1}getFirstDifferent(s,l,u,f){let m=s.getX()+u,y=s.getY()+f;for(;this.isValid(m,y)&&this.image.get(m,y)===l;)m+=u,y+=f;for(m-=u,y-=f;this.isValid(m,y)&&this.image.get(m,y)===l;)m+=u;for(m-=u;this.isValid(m,y)&&this.image.get(m,y)===l;)y+=f;return y-=f,new Ln(m,y)}expandSquare(s,l,u){let f=u/(2*l),m=s[0].getX()-s[2].getX(),y=s[0].getY()-s[2].getY(),v=(s[0].getX()+s[2].getX())/2,I=(s[0].getY()+s[2].getY())/2,C=new Xe(v+f*m,I+f*y),O=new Xe(v-f*m,I-f*y);m=s[1].getX()-s[3].getX(),y=s[1].getY()-s[3].getY(),v=(s[1].getX()+s[3].getX())/2,I=(s[1].getY()+s[3].getY())/2;let U=new Xe(v+f*m,I+f*y),K=new Xe(v-f*m,I-f*y);return[C,U,O,K]}isValid(s,l){return s>=0&&s<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(s){let l=mt.round(s.getX()),u=mt.round(s.getY());return this.isValid(l,u)}distancePoint(s,l){return mt.distance(s.getX(),s.getY(),l.getX(),l.getY())}distanceResultPoint(s,l){return mt.distance(s.getX(),s.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Bi{decode(s,l=null){let u=null,f=new Jr(s.getBlackMatrix()),m=null,y=null;try{let O=f.detectMirror(!1);m=O.getPoints(),this.reportFoundResultPoints(l,m),y=new zt().decode(O)}catch(O){u=O}if(y==null)try{let O=f.detectMirror(!0);m=O.getPoints(),this.reportFoundResultPoints(l,m),y=new zt().decode(O)}catch(O){throw u??O}let v=new Le(y.getText(),y.getRawBytes(),y.getNumBits(),m,Re.AZTEC,D.currentTimeMillis()),I=y.getByteSegments();I!=null&&v.putMetadata(Ge.BYTE_SEGMENTS,I);let C=y.getECLevel();return C!=null&&v.putMetadata(Ge.ERROR_CORRECTION_LEVEL,C),v}reportFoundResultPoints(s,l){if(s!=null){let u=s.get(le.NEED_RESULT_POINT_CALLBACK);u!=null&&l.forEach((f,m,y)=>{u.foundPossibleResultPoint(f)})}}reset(){}}class vi extends Se{constructor(s=500){super(new Bi,s)}}class An{decode(s,l){try{return this.doDecode(s,l)}catch{if(l&&l.get(le.TRY_HARDER)===!0&&s.isRotateSupported()){const m=s.rotateCounterClockwise(),y=this.doDecode(m,l),v=y.getResultMetadata();let I=270;v!==null&&v.get(Ge.ORIENTATION)===!0&&(I=I+v.get(Ge.ORIENTATION)%360),y.putMetadata(Ge.ORIENTATION,I);const C=y.getResultPoints();if(C!==null){const O=m.getHeight();for(let U=0;U<C.length;U++)C[U]=new Xe(O-C[U].getY()-1,C[U].getX())}return y}else throw new re}}reset(){}doDecode(s,l){const u=s.getWidth(),f=s.getHeight();let m=new Q(u);const y=l&&l.get(le.TRY_HARDER)===!0,v=Math.max(1,f>>(y?8:5));let I;y?I=f:I=15;const C=Math.trunc(f/2);for(let O=0;O<I;O++){const U=Math.trunc((O+1)/2),K=(O&1)===0,ee=C+v*(K?U:-U);if(ee<0||ee>=f)break;try{m=s.getBlackRow(ee,m)}catch{continue}for(let ae=0;ae<2;ae++){if(ae===1&&(m.reverse(),l&&l.get(le.NEED_RESULT_POINT_CALLBACK)===!0)){const ue=new Map;l.forEach((fe,Ee)=>ue.set(Ee,fe)),ue.delete(le.NEED_RESULT_POINT_CALLBACK),l=ue}try{const ue=this.decodeRow(ee,m,l);if(ae===1){ue.putMetadata(Ge.ORIENTATION,180);const fe=ue.getResultPoints();fe!==null&&(fe[0]=new Xe(u-fe[0].getX()-1,fe[0].getY()),fe[1]=new Xe(u-fe[1].getX()-1,fe[1].getY()))}return ue}catch{}}}throw new re}static recordPattern(s,l,u){const f=u.length;for(let C=0;C<f;C++)u[C]=0;const m=s.getSize();if(l>=m)throw new re;let y=!s.get(l),v=0,I=l;for(;I<m;){if(s.get(I)!==y)u[v]++;else{if(++v===f)break;u[v]=1,y=!y}I++}if(!(v===f||v===f-1&&I===m))throw new re}static recordPatternInReverse(s,l,u){let f=u.length,m=s.get(l);for(;l>0&&f>=0;)s.get(--l)!==m&&(f--,m=!m);if(f>=0)throw new re;An.recordPattern(s,l+1,u)}static patternMatchVariance(s,l,u){const f=s.length;let m=0,y=0;for(let C=0;C<f;C++)m+=s[C],y+=l[C];if(m<y)return Number.POSITIVE_INFINITY;const v=m/y;u*=v;let I=0;for(let C=0;C<f;C++){const O=s[C],U=l[C]*v,K=O>U?O-U:U-O;if(K>u)return Number.POSITIVE_INFINITY;I+=K}return I/m}}class We extends An{static findStartPattern(s){const l=s.getSize(),u=s.getNextSet(0);let f=0,m=Int32Array.from([0,0,0,0,0,0]),y=u,v=!1;const I=6;for(let C=u;C<l;C++)if(s.get(C)!==v)m[f]++;else{if(f===I-1){let O=We.MAX_AVG_VARIANCE,U=-1;for(let K=We.CODE_START_A;K<=We.CODE_START_C;K++){const ee=An.patternMatchVariance(m,We.CODE_PATTERNS[K],We.MAX_INDIVIDUAL_VARIANCE);ee<O&&(O=ee,U=K)}if(U>=0&&s.isRange(Math.max(0,y-(C-y)/2),y,!1))return Int32Array.from([y,C,U]);y+=m[0]+m[1],m=m.slice(2,m.length-1),m[f-1]=0,m[f]=0,f--}else f++;m[f]=1,v=!v}throw new re}static decodeCode(s,l,u){An.recordPattern(s,u,l);let f=We.MAX_AVG_VARIANCE,m=-1;for(let y=0;y<We.CODE_PATTERNS.length;y++){const v=We.CODE_PATTERNS[y],I=this.patternMatchVariance(l,v,We.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,m=y)}if(m>=0)return m;throw new re}decodeRow(s,l,u){const f=u&&u.get(le.ASSUME_GS1)===!0,m=We.findStartPattern(l),y=m[2];let v=0;const I=new Uint8Array(20);I[v++]=y;let C;switch(y){case We.CODE_START_A:C=We.CODE_CODE_A;break;case We.CODE_START_B:C=We.CODE_CODE_B;break;case We.CODE_START_C:C=We.CODE_CODE_C;break;default:throw new F}let O=!1,U=!1,K="",ee=m[0],ae=m[1];const ue=Int32Array.from([0,0,0,0,0,0]);let fe=0,Ee=0,Fe=y,je=0,Oe=!0,Vt=!1,St=!1;for(;!O;){const to=U;switch(U=!1,fe=Ee,Ee=We.decodeCode(l,ue,ae),I[v++]=Ee,Ee!==We.CODE_STOP&&(Oe=!0),Ee!==We.CODE_STOP&&(je++,Fe+=je*Ee),ee=ae,ae+=ue.reduce((Ya,Jd)=>Ya+Jd,0),Ee){case We.CODE_START_A:case We.CODE_START_B:case We.CODE_START_C:throw new F}switch(C){case We.CODE_CODE_A:if(Ee<64)St===Vt?K+=String.fromCharCode(32+Ee):K+=String.fromCharCode(32+Ee+128),St=!1;else if(Ee<96)St===Vt?K+=String.fromCharCode(Ee-64):K+=String.fromCharCode(Ee+64),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(K.length===0?K+="]C1":K+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_A:!Vt&&St?(Vt=!0,St=!1):Vt&&St?(Vt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_B;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_B:if(Ee<96)St===Vt?K+=String.fromCharCode(32+Ee):K+=String.fromCharCode(32+Ee+128),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(K.length===0?K+="]C1":K+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_B:!Vt&&St?(Vt=!0,St=!1):Vt&&St?(Vt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_A;break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_C:if(Ee<100)Ee<10&&(K+="0"),K+=Ee;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(K.length===0?K+="]C1":K+="");break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_STOP:O=!0;break}break}to&&(C=C===We.CODE_CODE_A?We.CODE_CODE_B:We.CODE_CODE_A)}const Ci=ae-ee;if(ae=l.getNextUnset(ae),!l.isRange(ae,Math.min(l.getSize(),ae+(ae-ee)/2),!1))throw new re;if(Fe-=je*fe,Fe%103!==fe)throw new R;const ws=K.length;if(ws===0)throw new re;ws>0&&Oe&&(C===We.CODE_CODE_C?K=K.substring(0,ws-2):K=K.substring(0,ws-1));const Cr=(m[1]+m[0])/2,hn=ee+Ci/2,ir=I.length,hi=new Uint8Array(ir);for(let to=0;to<ir;to++)hi[to]=I[to];const ua=[new Xe(Cr,s),new Xe(hn,s)];return new Le(K,hi,0,ua,Re.CODE_128,new Date().getTime())}}We.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],We.MAX_AVG_VARIANCE=.25,We.MAX_INDIVIDUAL_VARIANCE=.7,We.CODE_SHIFT=98,We.CODE_CODE_C=99,We.CODE_CODE_B=100,We.CODE_CODE_A=101,We.CODE_FNC_1=102,We.CODE_FNC_2=97,We.CODE_FNC_3=96,We.CODE_FNC_4_A=101,We.CODE_FNC_4_B=100,We.CODE_START_A=103,We.CODE_START_B=104,We.CODE_START_C=105,We.CODE_STOP=106;class In extends An{constructor(s=!1,l=!1){super(),this.usingCheckDigit=s,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,l,u){let f=this.counters;f.fill(0),this.decodeRowResult="";let m=In.findAsteriskPattern(l,f),y=l.getNextSet(m[1]),v=l.getSize(),I,C;do{In.recordPattern(l,y,f);let ue=In.toNarrowWidePattern(f);if(ue<0)throw new re;I=In.patternToChar(ue),this.decodeRowResult+=I,C=y;for(let fe of f)y+=fe;y=l.getNextSet(y)}while(I!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ue of f)O+=ue;let U=y-C-O;if(y!==v&&U*2<O)throw new re;if(this.usingCheckDigit){let ue=this.decodeRowResult.length-1,fe=0;for(let Ee=0;Ee<ue;Ee++)fe+=In.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(ue)!==In.ALPHABET_STRING.charAt(fe%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,ue)}if(this.decodeRowResult.length===0)throw new re;let K;this.extendedMode?K=In.decodeExtended(this.decodeRowResult):K=this.decodeRowResult;let ee=(m[1]+m[0])/2,ae=C+O/2;return new Le(K,null,0,[new Xe(ee,s),new Xe(ae,s)],Re.CODE_39,new Date().getTime())}static findAsteriskPattern(s,l){let u=s.getSize(),f=s.getNextSet(0),m=0,y=f,v=!1,I=l.length;for(let C=f;C<u;C++)if(s.get(C)!==v)l[m]++;else{if(m===I-1){if(this.toNarrowWidePattern(l)===In.ASTERISK_ENCODING&&s.isRange(Math.max(0,y-Math.floor((C-y)/2)),y,!1))return[y,C];y+=l[0]+l[1],l.copyWithin(0,2,2+m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,v=!v}throw new re}static toNarrowWidePattern(s){let l=s.length,u=0,f;do{let m=2147483647;for(let I of s)I<m&&I>u&&(m=I);u=m,f=0;let y=0,v=0;for(let I=0;I<l;I++){let C=s[I];C>u&&(v|=1<<l-1-I,f++,y+=C)}if(f===3){for(let I=0;I<l&&f>0;I++){let C=s[I];if(C>u&&(f--,C*2>=y))return-1}return v}}while(f>3);return-1}static patternToChar(s){for(let l=0;l<In.CHARACTER_ENCODINGS.length;l++)if(In.CHARACTER_ENCODINGS[l]===s)return In.ALPHABET_STRING.charAt(l);if(s===In.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(s){let l=s.length,u="";for(let f=0;f<l;f++){let m=s.charAt(f);if(m==="+"||m==="$"||m==="%"||m==="/"){let y=s.charAt(f+1),v="\0";switch(m){case"+":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)+32);else throw new F;break;case"$":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)-64);else throw new F;break;case"%":if(y>="A"&&y<="E")v=String.fromCharCode(y.charCodeAt(0)-38);else if(y>="F"&&y<="J")v=String.fromCharCode(y.charCodeAt(0)-11);else if(y>="K"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)+16);else if(y>="P"&&y<="T")v=String.fromCharCode(y.charCodeAt(0)+43);else if(y==="U")v="\0";else if(y==="V")v="@";else if(y==="W")v="`";else if(y==="X"||y==="Y"||y==="Z")v="";else throw new F;break;case"/":if(y>="A"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)-32);else if(y==="Z")v=":";else throw new F;break}u+=v,f++}else u+=m}return u}}In.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",In.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],In.ASTERISK_ENCODING=148;class Ht extends An{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,l,u){let f=this.decodeStart(l),m=this.decodeEnd(l),y=new q;Ht.decodeMiddle(l,f[1],m[0],y);let v=y.toString(),I=null;u!=null&&(I=u.get(le.ALLOWED_LENGTHS)),I==null&&(I=Ht.DEFAULT_ALLOWED_LENGTHS);let C=v.length,O=!1,U=0;for(let ae of I){if(C===ae){O=!0;break}ae>U&&(U=ae)}if(!O&&C>U&&(O=!0),!O)throw new F;const K=[new Xe(f[1],s),new Xe(m[0],s)];return new Le(v,null,0,K,Re.ITF,new Date().getTime())}static decodeMiddle(s,l,u,f){let m=new Int32Array(10),y=new Int32Array(5),v=new Int32Array(5);for(m.fill(0),y.fill(0),v.fill(0);l<u;){An.recordPattern(s,l,m);for(let C=0;C<5;C++){let O=2*C;y[C]=m[O],v[C]=m[O+1]}let I=Ht.decodeDigit(y);f.append(I.toString()),I=this.decodeDigit(v),f.append(I.toString()),m.forEach(function(C){l+=C})}}decodeStart(s){let l=Ht.skipWhiteSpace(s),u=Ht.findGuardPattern(s,l,Ht.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(s,u[0]),u}validateQuietZone(s,l){let u=this.narrowLineWidth*10;u=u<l?u:l;for(let f=l-1;u>0&&f>=0&&!s.get(f);f--)u--;if(u!==0)throw new re}static skipWhiteSpace(s){const l=s.getSize(),u=s.getNextSet(0);if(u===l)throw new re;return u}decodeEnd(s){s.reverse();try{let l=Ht.skipWhiteSpace(s),u;try{u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[0])}catch(m){m instanceof re&&(u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,u[0]);let f=u[0];return u[0]=s.getSize()-u[1],u[1]=s.getSize()-f,u}finally{s.reverse()}}static findGuardPattern(s,l,u){let f=u.length,m=new Int32Array(f),y=s.getSize(),v=!1,I=0,C=l;m.fill(0);for(let O=l;O<y;O++)if(s.get(O)!==v)m[I]++;else{if(I===f-1){if(An.patternMatchVariance(m,u,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return[C,O];C+=m[0]+m[1],D.arraycopy(m,2,m,0,I-1),m[I-1]=0,m[I]=0,I--}else I++;m[I]=1,v=!v}throw new re}static decodeDigit(s){let l=Ht.MAX_AVG_VARIANCE,u=-1,f=Ht.PATTERNS.length;for(let m=0;m<f;m++){let y=Ht.PATTERNS[m],v=An.patternMatchVariance(s,y,Ht.MAX_INDIVIDUAL_VARIANCE);v<l?(l=v,u=m):v===l&&(u=-1)}if(u>=0)return u%10;throw new re}}Ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ht.MAX_AVG_VARIANCE=.38,Ht.MAX_INDIVIDUAL_VARIANCE=.5,Ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ht.START_PATTERN=Int32Array.from([1,1,1,1]),Ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class mn extends An{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let l=!1,u,f=0,m=Int32Array.from([0,0,0]);for(;!l;){m=Int32Array.from([0,0,0]),u=mn.findGuardPattern(s,f,!1,this.START_END_PATTERN,m);let y=u[0];f=u[1];let v=y-(f-y);v>=0&&(l=s.isRange(v,y,!1))}return u}static checkChecksum(s){return mn.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return mn.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let m=s.charAt(f).charCodeAt(0)-48;if(m<0||m>9)throw new F;u+=m}u*=3;for(let f=l-2;f>=0;f-=2){let m=s.charAt(f).charCodeAt(0)-48;if(m<0||m>9)throw new F;u+=m}return(1e3-u)%10}static decodeEnd(s,l){return mn.findGuardPattern(s,l,!1,mn.START_END_PATTERN,new Int32Array(mn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,l,u,f){return this.findGuardPattern(s,l,u,f,new Int32Array(f.length))}static findGuardPattern(s,l,u,f,m){let y=s.getSize();l=u?s.getNextUnset(l):s.getNextSet(l);let v=0,I=l,C=f.length,O=u;for(let U=l;U<y;U++)if(s.get(U)!==O)m[v]++;else{if(v===C-1){if(An.patternMatchVariance(m,f,mn.MAX_INDIVIDUAL_VARIANCE)<mn.MAX_AVG_VARIANCE)return Int32Array.from([I,U]);I+=m[0]+m[1];let K=m.slice(2,m.length-1);for(let ee=0;ee<v-1;ee++)m[ee]=K[ee];m[v-1]=0,m[v]=0,v--}else v++;m[v]=1,O=!O}throw new re}static decodeDigit(s,l,u,f){this.recordPattern(s,u,l);let m=this.MAX_AVG_VARIANCE,y=-1,v=f.length;for(let I=0;I<v;I++){let C=f[I],O=An.patternMatchVariance(l,C,mn.MAX_INDIVIDUAL_VARIANCE);O<m&&(m=O,y=I)}if(y>=0)return y;throw new re}}mn.MAX_AVG_VARIANCE=.48,mn.MAX_INDIVIDUAL_VARIANCE=.7,mn.START_END_PATTERN=Int32Array.from([1,1,1]),mn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),mn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),mn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ai{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,m=this.decodeMiddle(l,u,f),y=f.toString(),v=ai.parseExtensionString(y),I=[new Xe((u[0]+u[1])/2,s),new Xe(m,s)],C=new Le(y,null,0,I,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let m=s.getSize(),y=l[1],v=0;for(let C=0;C<5&&y<m;C++){let O=mn.decodeDigit(s,f,y,mn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<4-C),C!==4&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==5)throw new re;let I=this.determineCheckDigit(v);if(ai.extensionChecksum(u.toString())!==I)throw new re;return y}static extensionChecksum(s){let l=s.length,u=0;for(let f=l-2;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;u*=3;for(let f=l-1;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(s){for(let l=0;l<10;l++)if(s===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new re}static parseExtensionString(s){if(s.length!==5)return null;let l=ai.parseExtension5String(s);return l==null?null:new Map([[Ge.SUGGESTED_PRICE,l]])}static parseExtension5String(s){let l;switch(s.charAt(0)){case"0":l="";break;case"5":l="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let u=parseInt(s.substring(1)),f=(u/100).toString(),m=u%100,y=m<10?"0"+m:m.toString();return l+f+"."+y}}class zr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,m=this.decodeMiddle(l,u,f),y=f.toString(),v=zr.parseExtensionString(y),I=[new Xe((u[0]+u[1])/2,s),new Xe(m,s)],C=new Le(y,null,0,I,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let m=s.getSize(),y=l[1],v=0;for(let I=0;I<2&&y<m;I++){let C=mn.decodeDigit(s,f,y,mn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+C%10);for(let O of f)y+=O;C>=10&&(v|=1<<1-I),I!==1&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==2)throw new re;if(parseInt(u.toString())%4!==v)throw new re;return y}static parseExtensionString(s){return s.length!==2?null:new Map([[Ge.ISSUE_NUMBER,parseInt(s)]])}}class Zs{static decodeRow(s,l,u){let f=mn.findGuardPattern(l,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ai().decodeRow(s,l,f)}catch{return new zr().decodeRow(s,l,f)}}}Zs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ct extends mn{constructor(){super(),this.decodeRowStringBuffer="",Ct.L_AND_G_PATTERNS=Ct.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let l=Ct.L_PATTERNS[s-10],u=new Int32Array(l.length);for(let f=0;f<l.length;f++)u[f]=l[l.length-f-1];Ct.L_AND_G_PATTERNS[s]=u}}decodeRow(s,l,u){let f=Ct.findStartGuardPattern(l),m=u==null?null:u.get(le.NEED_RESULT_POINT_CALLBACK);if(m!=null){const Oe=new Xe((f[0]+f[1])/2,s);m.foundPossibleResultPoint(Oe)}let y=this.decodeMiddle(l,f,this.decodeRowStringBuffer),v=y.rowOffset,I=y.resultString;if(m!=null){const Oe=new Xe(v,s);m.foundPossibleResultPoint(Oe)}let C=this.decodeEnd(l,v);if(m!=null){const Oe=new Xe((C[0]+C[1])/2,s);m.foundPossibleResultPoint(Oe)}let O=C[1],U=O+(O-C[0]);if(U>=l.getSize()||!l.isRange(O,U,!1))throw new re;let K=I.toString();if(K.length<8)throw new F;if(!Ct.checkChecksum(K))throw new R;let ee=(f[1]+f[0])/2,ae=(C[1]+C[0])/2,ue=this.getBarcodeFormat(),fe=[new Xe(ee,s),new Xe(ae,s)],Ee=new Le(K,null,0,fe,ue,new Date().getTime()),Fe=0;try{let Oe=Zs.decodeRow(s,l,C[1]);Ee.putMetadata(Ge.UPC_EAN_EXTENSION,Oe.getText()),Ee.putAllMetadata(Oe.getResultMetadata()),Ee.addResultPoints(Oe.getResultPoints()),Fe=Oe.getText().length}catch{}let je=u==null?null:u.get(le.ALLOWED_EAN_EXTENSIONS);if(je!=null){let Oe=!1;for(let Vt in je)if(Fe.toString()===Vt){Oe=!0;break}if(!Oe)throw new re}return Ee}decodeEnd(s,l){return Ct.findGuardPattern(s,l,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return Ct.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let m=s.charAt(f).charCodeAt(0)-48;if(m<0||m>9)throw new F;u+=m}u*=3;for(let f=l-2;f>=0;f-=2){let m=s.charAt(f).charCodeAt(0)-48;if(m<0||m>9)throw new F;u+=m}return(1e3-u)%10}}class Er extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let m=s.getSize(),y=l[1],v=0;for(let C=0;C<6&&y<m;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}u=Er.determineFirstDigit(u,v),y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&y<m;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+O);for(let U of f)y+=U}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_13}static determineFirstDigit(s,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return s=String.fromCharCode(48+u)+s,s;throw new re}}Er.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ps extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let m=s.getSize(),y=l[1];for(let I=0;I<4&&y<m;I++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<4&&y<m;I++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_8}}class pt extends Ct{constructor(){super(...arguments),this.ean13Reader=new Er}getBarcodeFormat(){return Re.UPC_A}decode(s,l){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,l,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,l,u))}decodeMiddle(s,l,u){return this.ean13Reader.decodeMiddle(s,l,u)}maybeReturnResult(s){let l=s.getText();if(l.charAt(0)==="0"){let u=new Le(l.substring(1),null,null,s.getResultPoints(),Re.UPC_A);return s.getResultMetadata()!=null&&u.putAllMetadata(s.getResultMetadata()),u}else throw new re}reset(){this.ean13Reader.reset()}}class Gt extends Ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters.map(C=>C);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const m=s.getSize();let y=l[1],v=0;for(let C=0;C<6&&y<m;C++){const O=Gt.decodeDigit(s,f,y,Gt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}let I=Gt.determineNumSysAndCheckDigit(u,v);return{rowOffset:y,resultString:I}}decodeEnd(s,l){return Gt.findGuardPatternWithoutCounters(s,l,!0,Gt.MIDDLE_END_PATTERN)}checkChecksum(s){return Ct.checkChecksum(Gt.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,l){for(let u=0;u<=1;u++)for(let f=0;f<10;f++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][f]){let m=String.fromCharCode(48+u),y=String.fromCharCode(48+f);return m+s+y}throw re.getNotFoundInstance()}getBarcodeFormat(){return Re.UPC_E}static convertUPCEtoUPCA(s){const l=s.slice(1,7).split("").map(m=>m.charCodeAt(0)),u=new q;u.append(s.charAt(0));let f=l[5];switch(f){case 0:case 1:case 2:u.appendChars(l,0,2),u.append(f),u.append("0000"),u.appendChars(l,2,3);break;case 3:u.appendChars(l,0,3),u.append("00000"),u.appendChars(l,3,2);break;case 4:u.appendChars(l,0,4),u.append("00000"),u.append(l[4]);break;default:u.appendChars(l,0,5),u.append("0000"),u.append(f);break}return s.length>=8&&u.append(s.charAt(7)),u.toString()}}Gt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Tn extends An{constructor(s){super();let l=s==null?null:s.get(le.POSSIBLE_FORMATS),u=[];r(l)?(u.push(new Er),u.push(new pt),u.push(new Ps),u.push(new Gt)):(l.indexOf(Re.EAN_13)>-1&&u.push(new Er),l.indexOf(Re.UPC_A)>-1&&u.push(new pt),l.indexOf(Re.EAN_8)>-1&&u.push(new Ps),l.indexOf(Re.UPC_E)>-1&&u.push(new Gt)),this.readers=u}decodeRow(s,l,u){for(let f of this.readers)try{const m=f.decodeRow(s,l,u),y=m.getBarcodeFormat()===Re.EAN_13&&m.getText().charAt(0)==="0",v=u==null?null:u.get(le.POSSIBLE_FORMATS),I=v==null||v.includes(Re.UPC_A);if(y&&I){const C=m.getRawBytes(),O=new Le(m.getText().substring(1),C,C?C.length:null,m.getResultPoints(),Re.UPC_A);return O.putAllMetadata(m.getResultMetadata()),O}return m}catch{}throw new re}reset(){for(let s of this.readers)s.reset()}}class $t extends An{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,l){for(let u=0;u<l.length;u++)if(An.patternMatchVariance(s,l[u],$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE)return u;throw new re}static count(s){return mt.sum(new Int32Array(s))}static increment(s,l){let u=0,f=l[0];for(let m=1;m<s.length;m++)l[m]>f&&(f=l[m],u=m);s[u]++}static decrement(s,l){let u=0,f=l[0];for(let m=1;m<s.length;m++)l[m]<f&&(f=l[m],u=m);s[u]--}static isFinderPattern(s){let l=s[0]+s[1],u=l+s[2]+s[3],f=l/u;if(f>=$t.MIN_FINDER_PATTERN_RATIO&&f<=$t.MAX_FINDER_PATTERN_RATIO){let m=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;for(let v of s)v>y&&(y=v),v<m&&(m=v);return y<10*m}return!1}}$t.MAX_AVG_VARIANCE=.2,$t.MAX_INDIVIDUAL_VARIANCE=.45,$t.MIN_FINDER_PATTERN_RATIO=9.5/12,$t.MAX_FINDER_PATTERN_RATIO=12.5/14;class br{constructor(s,l){this.value=s,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof br))return!1;const l=s;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Cn{constructor(s,l,u,f,m){this.value=s,this.startEnd=l,this.value=s,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new Xe(u,m)),this.resultPoints.push(new Xe(f,m))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Cn))return!1;const l=s;return this.value===l.value}hashCode(){return this.value}}class Rt{constructor(){}static getRSSvalue(s,l,u){let f=0;for(let I of s)f+=I;let m=0,y=0,v=s.length;for(let I=0;I<v-1;I++){let C;for(C=1,y|=1<<I;C<s[I];C++,y&=~(1<<I)){let O=Rt.combins(f-C-1,v-I-2);if(u&&y===0&&f-C-(v-I-1)>=v-I-1&&(O-=Rt.combins(f-C-(v-I),v-I-2)),v-I-1>1){let U=0;for(let K=f-C-(v-I-2);K>l;K--)U+=Rt.combins(f-C-K-1,v-I-3);O-=U*(v-1-I)}else f-C>l&&O--;m+=O}f-=C}return m}static combins(s,l){let u,f;s-l>l?(f=l,u=s-l):(f=s-l,u=l);let m=1,y=1;for(let v=s;v>u;v--)m*=v,y<=f&&(m/=y,y++);for(;y<=f;)m/=y,y++;return m}}class fs{static buildBitArray(s){let l=s.length*2-1;s[s.length-1].getRightChar()==null&&(l-=1);let u=12*l,f=new Q(u),m=0,v=s[0].getRightChar().getValue();for(let I=11;I>=0;--I)(v&1<<I)!=0&&f.set(m),m++;for(let I=1;I<s.length;++I){let C=s[I],O=C.getLeftChar().getValue();for(let U=11;U>=0;--U)(O&1<<U)!=0&&f.set(m),m++;if(C.getRightChar()!=null){let U=C.getRightChar().getValue();for(let K=11;K>=0;--K)(U&1<<K)!=0&&f.set(m),m++}}return f}}class cn{constructor(s,l){l?this.decodedInformation=null:(this.finished=s,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rr{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Vn extends rr{constructor(s,l){super(s),this.value=l}getValue(){return this.value}isFNC1(){return this.value===Vn.FNC1}}Vn.FNC1="$";class ur extends rr{constructor(s,l,u){super(s),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Fn extends rr{constructor(s,l,u){if(super(s),l<0||l>10||u<0||u>10)throw new F;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Fn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Fn.FNC1}isAnyFNC1(){return this.firstDigit===Fn.FNC1||this.secondDigit===Fn.FNC1}}Fn.FNC1=10;class Ye{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new re;let l=s.substring(0,2);for(let m of Ye.TWO_DIGIT_DATA_LENGTH)if(m[0]===l)return m[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(2,m[2],s):Ye.processFixedAI(2,m[1],s);if(s.length<3)throw new re;let u=s.substring(0,3);for(let m of Ye.THREE_DIGIT_DATA_LENGTH)if(m[0]===u)return m[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(3,m[2],s):Ye.processFixedAI(3,m[1],s);for(let m of Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(m[0]===u)return m[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,m[2],s):Ye.processFixedAI(4,m[1],s);if(s.length<4)throw new re;let f=s.substring(0,4);for(let m of Ye.FOUR_DIGIT_DATA_LENGTH)if(m[0]===f)return m[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,m[2],s):Ye.processFixedAI(4,m[1],s);throw new re}static processFixedAI(s,l,u){if(u.length<s)throw new re;let f=u.substring(0,s);if(u.length<s+l)throw new re;let m=u.substring(s,s+l),y=u.substring(s+l),v="("+f+")"+m,I=Ye.parseFieldsInGeneralPurpose(y);return I==null?v:v+I}static processVariableAI(s,l,u){let f=u.substring(0,s),m;u.length<s+l?m=u.length:m=s+l;let y=u.substring(s,m),v=u.substring(m),I="("+f+")"+y,C=Ye.parseFieldsInGeneralPurpose(v);return C==null?I:I+C}}Ye.VARIABLE_LENGTH=[],Ye.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ye.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ye.VARIABLE_LENGTH,20],["22",Ye.VARIABLE_LENGTH,29],["30",Ye.VARIABLE_LENGTH,8],["37",Ye.VARIABLE_LENGTH,8],["90",Ye.VARIABLE_LENGTH,30],["91",Ye.VARIABLE_LENGTH,30],["92",Ye.VARIABLE_LENGTH,30],["93",Ye.VARIABLE_LENGTH,30],["94",Ye.VARIABLE_LENGTH,30],["95",Ye.VARIABLE_LENGTH,30],["96",Ye.VARIABLE_LENGTH,30],["97",Ye.VARIABLE_LENGTH,3],["98",Ye.VARIABLE_LENGTH,30],["99",Ye.VARIABLE_LENGTH,30]],Ye.THREE_DIGIT_DATA_LENGTH=[["240",Ye.VARIABLE_LENGTH,30],["241",Ye.VARIABLE_LENGTH,30],["242",Ye.VARIABLE_LENGTH,6],["250",Ye.VARIABLE_LENGTH,30],["251",Ye.VARIABLE_LENGTH,30],["253",Ye.VARIABLE_LENGTH,17],["254",Ye.VARIABLE_LENGTH,20],["400",Ye.VARIABLE_LENGTH,30],["401",Ye.VARIABLE_LENGTH,30],["402",17],["403",Ye.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ye.VARIABLE_LENGTH,20],["421",Ye.VARIABLE_LENGTH,15],["422",3],["423",Ye.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ye.VARIABLE_LENGTH,15],["391",Ye.VARIABLE_LENGTH,18],["392",Ye.VARIABLE_LENGTH,15],["393",Ye.VARIABLE_LENGTH,18],["703",Ye.VARIABLE_LENGTH,30]],Ye.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ye.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ye.VARIABLE_LENGTH,20],["8003",Ye.VARIABLE_LENGTH,30],["8004",Ye.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ye.VARIABLE_LENGTH,30],["8008",Ye.VARIABLE_LENGTH,12],["8018",18],["8020",Ye.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ye.VARIABLE_LENGTH,70],["8200",Ye.VARIABLE_LENGTH,70]];class wo{constructor(s){this.buffer=new q,this.information=s}decodeAllCodes(s,l){let u=l,f=null;do{let m=this.decodeGeneralPurposeField(u,f),y=Ye.parseFieldsInGeneralPurpose(m.getNewString());if(y!=null&&s.append(y),m.isRemaining()?f=""+m.getRemainingValue():f=null,u===m.getNewPosition())break;u=m.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let l=s;l<s+3;++l)if(this.information.get(l))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let m=this.extractNumericValueFromBitArray(s,4);return m===0?new Fn(this.information.getSize(),Fn.FNC1,Fn.FNC1):new Fn(this.information.getSize(),m-1,Fn.FNC1)}let l=this.extractNumericValueFromBitArray(s,7),u=(l-8)/11,f=(l-8)%11;return new Fn(s+7,u,f)}extractNumericValueFromBitArray(s,l){return wo.extractNumericValueFromBitArray(this.information,s,l)}static extractNumericValueFromBitArray(s,l,u){let f=0;for(let m=0;m<u;++m)s.get(l+m)&&(f|=1<<u-m-1);return f}decodeGeneralPurposeField(s,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(s);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new ur(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new ur(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,l;do{let u=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),s=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),s=l.isFinished()):(l=this.parseNumericBlock(),s=l.isFinished()),!(u!==this.current.getPosition())&&!s)break}while(!s);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let l;return s.isSecondDigitFNC1()?l=new ur(this.current.getPosition(),this.buffer.toString()):l=new ur(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new cn(!0,l)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let l=new ur(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new cn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new ur(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new cn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new ur(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new cn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new Vn(s+5,Vn.FNC1);if(l>=5&&l<15)return new Vn(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<90)return new Vn(s+7,""+(u+1));if(u>=90&&u<116)return new Vn(s+7,""+(u+7));let f=this.extractNumericValueFromBitArray(s,8),m;switch(f){case 232:m="!";break;case 233:m='"';break;case 234:m="%";break;case 235:m="&";break;case 236:m="'";break;case 237:m="(";break;case 238:m=")";break;case 239:m="*";break;case 240:m="+";break;case 241:m=",";break;case 242:m="-";break;case 243:m=".";break;case 244:m="/";break;case 245:m=":";break;case 246:m=";";break;case 247:m="<";break;case 248:m="=";break;case 249:m=">";break;case 250:m="?";break;case 251:m="_";break;case 252:m=" ";break;default:throw new F}return new Vn(s+8,m)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,6);return u>=16&&u<63}decodeAlphanumeric(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new Vn(s+5,Vn.FNC1);if(l>=5&&l<15)return new Vn(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,6);if(u>=32&&u<58)return new Vn(s+6,""+(u+33));let f;switch(u){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Mn("Decoding invalid alphanumeric value: "+u)}return new Vn(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<5&&l+s<this.information.getSize();++l)if(l===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+l))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let l=s;l<s+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<4&&l+s<this.information.getSize();++l)if(this.information.get(s+l))return!1;return!0}}class vo{constructor(s){this.information=s,this.generalDecoder=new wo(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Wr extends vo{constructor(s){super(s)}encodeCompressedGtin(s,l){s.append("(01)");let u=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,l,u)}encodeCompressedGtinWithoutAI(s,l,u){for(let f=0;f<4;++f){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*f,10);m/100===0&&s.append("0"),m/10===0&&s.append("0"),s.append(m)}Wr.appendCheckDigit(s,u)}static appendCheckDigit(s,l){let u=0;for(let f=0;f<13;f++){let m=s.charAt(f+l).charCodeAt(0)-48;u+=(f&1)===0?3*m:m}u=10-u%10,u===10&&(u=0),s.append(u)}}Wr.GTIN_SIZE=40;class ei extends Wr{constructor(s){super(s)}parseInformation(){let s=new q;s.append("(01)");let l=s.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(ei.HEADER_SIZE,4);return s.append(u),this.encodeCompressedGtinWithoutAI(s,ei.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(s,ei.HEADER_SIZE+44)}}ei.HEADER_SIZE=4;class Ds extends vo{constructor(s){super(s)}parseInformation(){let s=new q;return this.getGeneralDecoder().decodeAllCodes(s,Ds.HEADER_SIZE)}}Ds.HEADER_SIZE=5;class _i extends Wr{constructor(s){super(s)}encodeCompressedWeight(s,l,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l,u);this.addWeightCode(s,f);let m=this.checkWeight(f),y=1e5;for(let v=0;v<5;++v)m/y===0&&s.append("0"),y/=10;s.append(m)}}class ji extends _i{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=ji.HEADER_SIZE+_i.GTIN_SIZE+ji.WEIGHT_SIZE)throw new re;let s=new q;return this.encodeCompressedGtin(s,ji.HEADER_SIZE),this.encodeCompressedWeight(s,ji.HEADER_SIZE+_i.GTIN_SIZE,ji.WEIGHT_SIZE),s.toString()}}ji.HEADER_SIZE=5,ji.WEIGHT_SIZE=15;class Yl extends ji{constructor(s){super(s)}addWeightCode(s,l){s.append("(3103)")}checkWeight(s){return s}}class Ua extends ji{constructor(s){super(s)}addWeightCode(s,l){l<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class li extends Wr{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<li.HEADER_SIZE+Wr.GTIN_SIZE)throw new re;let s=new q;this.encodeCompressedGtin(s,li.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(li.HEADER_SIZE+Wr.GTIN_SIZE,li.LAST_DIGIT_SIZE);s.append("(392"),s.append(l),s.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(li.HEADER_SIZE+Wr.GTIN_SIZE+li.LAST_DIGIT_SIZE,null);return s.append(u.getNewString()),s.toString()}}li.HEADER_SIZE=8,li.LAST_DIGIT_SIZE=2;class Ar extends Wr{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Ar.HEADER_SIZE+Wr.GTIN_SIZE)throw new re;let s=new q;this.encodeCompressedGtin(s,Ar.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Wr.GTIN_SIZE,Ar.LAST_DIGIT_SIZE);s.append("(393"),s.append(l),s.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Wr.GTIN_SIZE+Ar.LAST_DIGIT_SIZE,Ar.FIRST_THREE_DIGITS_SIZE);u/100==0&&s.append("0"),u/10==0&&s.append("0"),s.append(u);let f=this.getGeneralDecoder().decodeGeneralPurposeField(Ar.HEADER_SIZE+Wr.GTIN_SIZE+Ar.LAST_DIGIT_SIZE+Ar.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}Ar.HEADER_SIZE=8,Ar.LAST_DIGIT_SIZE=2,Ar.FIRST_THREE_DIGITS_SIZE=10;class yn extends _i{constructor(s,l,u){super(s),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE+yn.DATE_SIZE)throw new re;let s=new q;return this.encodeCompressedGtin(s,yn.HEADER_SIZE),this.encodeCompressedWeight(s,yn.HEADER_SIZE+yn.GTIN_SIZE,yn.WEIGHT_SIZE),this.encodeCompressedDate(s,yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,yn.DATE_SIZE);if(u==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=u%32;u/=32;let m=u%12+1;u/=12;let y=u;y/10==0&&s.append("0"),s.append(y),m/10==0&&s.append("0"),s.append(m),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,l){s.append("("),s.append(this.firstAIdigits),s.append(l/1e5),s.append(")")}checkWeight(s){return s%1e5}}yn.HEADER_SIZE=8,yn.WEIGHT_SIZE=20,yn.DATE_SIZE=16;function au(j){try{if(j.get(1))return new ei(j);if(!j.get(2))return new Ds(j);switch(wo.extractNumericValueFromBitArray(j,1,4)){case 4:return new Yl(j);case 5:return new Ua(j)}switch(wo.extractNumericValueFromBitArray(j,1,5)){case 12:return new li(j);case 13:return new Ar(j)}switch(wo.extractNumericValueFromBitArray(j,1,7)){case 56:return new yn(j,"310","11");case 57:return new yn(j,"320","11");case 58:return new yn(j,"310","13");case 59:return new yn(j,"320","13");case 60:return new yn(j,"310","15");case 61:return new yn(j,"320","15");case 62:return new yn(j,"310","17");case 63:return new yn(j,"320","17")}}catch(s){throw console.log(s),new Mn("unknown decoder: "+j)}}class Zt{constructor(s,l,u,f){this.leftchar=s,this.rightchar=l,this.finderpattern=u,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,l){return s instanceof Zt?Zt.equalsOrNull(s.leftchar,l.leftchar)&&Zt.equalsOrNull(s.rightchar,l.rightchar)&&Zt.equalsOrNull(s.finderpattern,l.finderpattern):!1}static equalsOrNull(s,l){return s===null?l===null:Zt.equals(s,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class za{constructor(s,l,u){this.pairs=s,this.rowNumber=l,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,l){return s instanceof za?this.checkEqualitity(s,l)&&s.wasReversed===l.wasReversed:!1}checkEqualitity(s,l){if(!s||!l)return;let u;return s.forEach((f,m)=>{l.forEach(y=>{f.getLeftChar().getValue()===y.getLeftChar().getValue()&&f.getRightChar().getValue()===y.getRightChar().getValue()&&f.getFinderPatter().getValue()===y.getFinderPatter().getValue()&&(u=!0)})}),u}}class ke extends $t{constructor(s){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,l,u){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(s,l))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(s,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,l){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,s))}catch(m){if(m instanceof re){if(!this.pairs.length)throw new re;u=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let m=this.checkRowsBoolean(!1);if(m!=null||(m=this.checkRowsBoolean(!0),m!=null))return m}throw new re}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return s&&(this.rows=this.rows.reverse()),l}checkRows(s,l){for(let u=l;u<this.rows.length;u++){let f=this.rows[u];this.pairs.length=0;for(let y of s)this.pairs.push(y.getPairs());if(this.pairs.push(f.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let m=new Array(s);m.push(f);try{return this.checkRows(m,u+1)}catch(y){this.verbose&&console.log(y)}}throw new re}static isValidSequence(s){for(let l of ke.FINDER_PATTERN_SEQUENCES){if(s.length>l.length)continue;let u=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=l[f]){u=!1;break}if(u)return!0}return!1}storeRow(s,l){let u=0,f=!1,m=!1;for(;u<this.rows.length;){let y=this.rows[u];if(y.getRowNumber()>s){m=y.isEquivalent(this.pairs);break}f=y.isEquivalent(this.pairs),u++}m||f||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new za(this.pairs,s,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,l){for(let u of l)if(u.getPairs().length!==s.length){for(let f of u.getPairs())for(let m of s)if(Zt.equals(f,m))break}}static isPartialRow(s,l){for(let u of l){let f=!0;for(let m of s){let y=!1;for(let v of u.getPairs())if(m.equals(v)){y=!0;break}if(!y){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let l=fs.buildBitArray(s),f=au(l).parseInformation(),m=s[0].getFinderPattern().getResultPoints(),y=s[s.length-1].getFinderPattern().getResultPoints(),v=[m[0],m[1],y[0],y[1]];return new Le(f,null,null,v,Re.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),l=s.getLeftChar(),u=s.getRightChar();if(u==null)return!1;let f=u.getChecksumPortion(),m=2;for(let v=1;v<this.pairs.size();++v){let I=this.pairs.get(v);f+=I.getLeftChar().getChecksumPortion(),m++;let C=I.getRightChar();C!=null&&(f+=C.getChecksumPortion(),m++)}return f%=211,211*(m-4)+f==l.getValue()}static getNextSecondBar(s,l){let u;return s.get(l)?(u=s.getNextUnset(l),u=s.getNextSet(u)):(u=s.getNextSet(l),u=s.getNextUnset(u)),u}retrieveNextPair(s,l,u){let f=l.length%2==0;this.startFromEven&&(f=!f);let m,y=!0,v=-1;do this.findNextPair(s,l,v),m=this.parseFoundFinderPattern(s,u,f),m==null?v=ke.getNextSecondBar(s,this.startEnd[0]):y=!1;while(y);let I=this.decodeDataCharacter(s,m,f,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new re;let C;try{C=this.decodeDataCharacter(s,m,f,!1)}catch(O){C=null,this.verbose&&console.log(O)}return new Zt(I,C,m,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,l,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let m=s.getSize(),y;u>=0?y=u:this.isEmptyPair(l)?y=0:y=l[l.length-1].getFinderPattern().getStartEnd()[1];let v=l.length%2!=0;this.startFromEven&&(v=!v);let I=!1;for(;y<m&&(I=!s.get(y),!!I);)y++;let C=0,O=y;for(let U=y;U<m;U++)if(s.get(U)!=I)f[C]++;else{if(C==3){if(v&&ke.reverseCounters(f),ke.isFinderPattern(f)){this.startEnd[0]=O,this.startEnd[1]=U;return}v&&ke.reverseCounters(f),O+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,C--}else C++;f[C]=1,I=!I}throw new re}static reverseCounters(s){let l=s.length;for(let u=0;u<l/2;++u){let f=s[u];s[u]=s[l-u-1],s[l-u-1]=f}}parseFoundFinderPattern(s,l,u){let f,m,y;if(u){let C=this.startEnd[0]-1;for(;C>=0&&!s.get(C);)C--;C++,f=this.startEnd[0]-C,m=C,y=this.startEnd[1]}else m=this.startEnd[0],y=s.getNextUnset(this.startEnd[1]+1),f=y-this.startEnd[1];let v=this.getDecodeFinderCounters();D.arraycopy(v,0,v,1,v.length-1),v[0]=f;let I;try{I=this.parseFinderValue(v,ke.FINDER_PATTERNS)}catch{return null}return new Cn(I,[m,y],m,y,l)}decodeDataCharacter(s,l,u,f){let m=this.getDataCharacterCounters();for(let hn=0;hn<m.length;hn++)m[hn]=0;if(f)ke.recordPatternInReverse(s,l.getStartEnd()[0],m);else{ke.recordPattern(s,l.getStartEnd()[1],m);for(let hn=0,ir=m.length-1;hn<ir;hn++,ir--){let hi=m[hn];m[hn]=m[ir],m[ir]=hi}}let y=17,v=mt.sum(new Int32Array(m))/y,I=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(v-I)/I>.3)throw new re;let C=this.getOddCounts(),O=this.getEvenCounts(),U=this.getOddRoundingErrors(),K=this.getEvenRoundingErrors();for(let hn=0;hn<m.length;hn++){let ir=1*m[hn]/v,hi=ir+.5;if(hi<1){if(ir<.3)throw new re;hi=1}else if(hi>8){if(ir>8.7)throw new re;hi=8}let ua=hn/2;(hn&1)==0?(C[ua]=hi,U[ua]=ir-hi):(O[ua]=hi,K[ua]=ir-hi)}this.adjustOddEvenCounts(y);let ee=4*l.getValue()+(u?0:2)+(f?0:1)-1,ae=0,ue=0;for(let hn=C.length-1;hn>=0;hn--){if(ke.isNotA1left(l,u,f)){let ir=ke.WEIGHTS[ee][2*hn];ue+=C[hn]*ir}ae+=C[hn]}let fe=0;for(let hn=O.length-1;hn>=0;hn--)if(ke.isNotA1left(l,u,f)){let ir=ke.WEIGHTS[ee][2*hn+1];fe+=O[hn]*ir}let Ee=ue+fe;if((ae&1)!=0||ae>13||ae<4)throw new re;let Fe=(13-ae)/2,je=ke.SYMBOL_WIDEST[Fe],Oe=9-je,Vt=Rt.getRSSvalue(C,je,!0),St=Rt.getRSSvalue(O,Oe,!1),Ci=ke.EVEN_TOTAL_SUBSET[Fe],ws=ke.GSUM[Fe],Cr=Vt*Ci+St+ws;return new br(Cr,Ee)}static isNotA1left(s,l,u){return!(s.getValue()==0&&l&&u)}adjustOddEvenCounts(s){let l=mt.sum(new Int32Array(this.getOddCounts())),u=mt.sum(new Int32Array(this.getEvenCounts())),f=!1,m=!1;l>13?m=!0:l<4&&(f=!0);let y=!1,v=!1;u>13?v=!0:u<4&&(y=!0);let I=l+u-s,C=(l&1)==1,O=(u&1)==0;if(I==1)if(C){if(O)throw new re;m=!0}else{if(!O)throw new re;v=!0}else if(I==-1)if(C){if(O)throw new re;f=!0}else{if(!O)throw new re;y=!0}else if(I==0){if(C){if(!O)throw new re;l<u?(f=!0,v=!0):(m=!0,y=!0)}else if(O)throw new re}else throw new re;if(f){if(m)throw new re;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(v)throw new re;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class _o extends br{constructor(s,l,u){super(s,l),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends $t{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,l,u){const f=this.decodePair(l,!1,s,u);Jt.addOrTally(this.possibleLeftPairs,f),l.reverse();let m=this.decodePair(l,!0,s,u);Jt.addOrTally(this.possibleRightPairs,m),l.reverse();for(let y of this.possibleLeftPairs)if(y.getCount()>1){for(let v of this.possibleRightPairs)if(v.getCount()>1&&Jt.checkChecksum(y,v))return Jt.constructResult(y,v)}throw new re}static addOrTally(s,l){if(l==null)return;let u=!1;for(let f of s)if(f.getValue()===l.getValue()){f.incrementCount(),u=!0;break}u||s.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,l){let u=4537077*s.getValue()+l.getValue(),f=new String(u).toString(),m=new q;for(let C=13-f.length;C>0;C--)m.append("0");m.append(f);let y=0;for(let C=0;C<13;C++){let O=m.charAt(C).charCodeAt(0)-48;y+=(C&1)===0?3*O:O}y=10-y%10,y===10&&(y=0),m.append(y.toString());let v=s.getFinderPattern().getResultPoints(),I=l.getFinderPattern().getResultPoints();return new Le(m.toString(),null,0,[v[0],v[1],I[0],I[1]],Re.RSS_14,new Date().getTime())}static checkChecksum(s,l){let u=(s.getChecksumPortion()+16*l.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+l.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,u===f}decodePair(s,l,u,f){try{let m=this.findFinderPattern(s,l),y=this.parseFoundFinderPattern(s,u,l,m),v=f==null?null:f.get(le.NEED_RESULT_POINT_CALLBACK);if(v!=null){let O=(m[0]+m[1])/2;l&&(O=s.getSize()-1-O),v.foundPossibleResultPoint(new Xe(O,u))}let I=this.decodeDataCharacter(s,y,!0),C=this.decodeDataCharacter(s,y,!1);return new _o(1597*I.getValue()+C.getValue(),I.getChecksumPortion()+4*C.getChecksumPortion(),y)}catch{return null}}decodeDataCharacter(s,l,u){let f=this.getDataCharacterCounters();for(let fe=0;fe<f.length;fe++)f[fe]=0;if(u)An.recordPatternInReverse(s,l.getStartEnd()[0],f);else{An.recordPattern(s,l.getStartEnd()[1]+1,f);for(let fe=0,Ee=f.length-1;fe<Ee;fe++,Ee--){let Fe=f[fe];f[fe]=f[Ee],f[Ee]=Fe}}let m=u?16:15,y=mt.sum(new Int32Array(f))/m,v=this.getOddCounts(),I=this.getEvenCounts(),C=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let fe=0;fe<f.length;fe++){let Ee=f[fe]/y,Fe=Math.floor(Ee+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let je=Math.floor(fe/2);(fe&1)===0?(v[je]=Fe,C[je]=Ee-Fe):(I[je]=Fe,O[je]=Ee-Fe)}this.adjustOddEvenCounts(u,m);let U=0,K=0;for(let fe=v.length-1;fe>=0;fe--)K*=9,K+=v[fe],U+=v[fe];let ee=0,ae=0;for(let fe=I.length-1;fe>=0;fe--)ee*=9,ee+=I[fe],ae+=I[fe];let ue=K+3*ee;if(u){if((U&1)!==0||U>12||U<4)throw new re;let fe=(12-U)/2,Ee=Jt.OUTSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!1),Oe=Rt.getRSSvalue(I,Fe,!0),Vt=Jt.OUTSIDE_EVEN_TOTAL_SUBSET[fe],St=Jt.OUTSIDE_GSUM[fe];return new br(je*Vt+Oe+St,ue)}else{if((ae&1)!==0||ae>10||ae<4)throw new re;let fe=(10-ae)/2,Ee=Jt.INSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!0),Oe=Rt.getRSSvalue(I,Fe,!1),Vt=Jt.INSIDE_ODD_TOTAL_SUBSET[fe],St=Jt.INSIDE_GSUM[fe];return new br(Oe*Vt+je+St,ue)}}findFinderPattern(s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=s.getSize(),m=!1,y=0;for(;y<f&&(m=!s.get(y),l!==m);)y++;let v=0,I=y;for(let C=y;C<f;C++)if(s.get(C)!==m)u[v]++;else{if(v===3){if($t.isFinderPattern(u))return[I,C];I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,m=!m}throw new re}parseFoundFinderPattern(s,l,u,f){let m=s.get(f[0]),y=f[0]-1;for(;y>=0&&m!==s.get(y);)y--;y++;const v=f[0]-y,I=this.getDecodeFinderCounters(),C=new Int32Array(I.length);D.arraycopy(I,0,C,1,I.length-1),C[0]=v;const O=this.parseFinderValue(C,Jt.FINDER_PATTERNS);let U=y,K=f[1];return u&&(U=s.getSize()-1-U,K=s.getSize()-1-K),new Cn(O,[y,f[1]],U,K,l)}adjustOddEvenCounts(s,l){let u=mt.sum(new Int32Array(this.getOddCounts())),f=mt.sum(new Int32Array(this.getEvenCounts())),m=!1,y=!1,v=!1,I=!1;s?(u>12?y=!0:u<4&&(m=!0),f>12?I=!0:f<4&&(v=!0)):(u>11?y=!0:u<5&&(m=!0),f>10?I=!0:f<4&&(v=!0));let C=u+f-l,O=(u&1)===(s?1:0),U=(f&1)===1;if(C===1)if(O){if(U)throw new re;y=!0}else{if(!U)throw new re;I=!0}else if(C===-1)if(O){if(U)throw new re;m=!0}else{if(!U)throw new re;v=!0}else if(C===0){if(O){if(!U)throw new re;u<f?(m=!0,I=!0):(y=!0,v=!0)}else if(U)throw new re}else throw new re;if(m){if(y)throw new re;$t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&$t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(I)throw new re;$t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}I&&$t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Os extends An{constructor(s,l){super(),this.readers=[],this.verbose=l===!0;const u=s?s.get(le.POSSIBLE_FORMATS):null,f=s&&s.get(le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(Re.EAN_13)||u.includes(Re.UPC_A)||u.includes(Re.EAN_8)||u.includes(Re.UPC_E))&&this.readers.push(new Tn(s)),u.includes(Re.CODE_39)&&this.readers.push(new In(f)),u.includes(Re.CODE_128)&&this.readers.push(new We),u.includes(Re.ITF)&&this.readers.push(new Ht),u.includes(Re.RSS_14)&&this.readers.push(new Jt),u.includes(Re.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new Tn(s)),this.readers.push(new In),this.readers.push(new Tn(s)),this.readers.push(new We),this.readers.push(new Ht),this.readers.push(new Jt),this.readers.push(new ke(this.verbose)))}decodeRow(s,l,u){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,l,u)}catch{}throw new re}reset(){this.readers.forEach(s=>s.reset())}}class lu extends Se{constructor(s=500,l){super(new Os(l),s,l)}}class jt{constructor(s,l,u){this.ecCodewords=s,this.ecBlocks=[l],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Mt{constructor(s,l,u,f,m,y){this.versionNumber=s,this.symbolSizeRows=l,this.symbolSizeColumns=u,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=m,this.ecBlocks=y;let v=0;const I=y.getECCodewords(),C=y.getECBlocks();for(let O of C)v+=O.getCount()*(O.getDataCodewords()+I);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,l){if((s&1)!==0||(l&1)!==0)throw new F;for(let u of Mt.VERSIONS)if(u.symbolSizeRows===s&&u.symbolSizeColumns===l)return u;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Mt(1,10,10,8,8,new jt(5,new Nt(1,3))),new Mt(2,12,12,10,10,new jt(7,new Nt(1,5))),new Mt(3,14,14,12,12,new jt(10,new Nt(1,8))),new Mt(4,16,16,14,14,new jt(12,new Nt(1,12))),new Mt(5,18,18,16,16,new jt(14,new Nt(1,18))),new Mt(6,20,20,18,18,new jt(18,new Nt(1,22))),new Mt(7,22,22,20,20,new jt(20,new Nt(1,30))),new Mt(8,24,24,22,22,new jt(24,new Nt(1,36))),new Mt(9,26,26,24,24,new jt(28,new Nt(1,44))),new Mt(10,32,32,14,14,new jt(36,new Nt(1,62))),new Mt(11,36,36,16,16,new jt(42,new Nt(1,86))),new Mt(12,40,40,18,18,new jt(48,new Nt(1,114))),new Mt(13,44,44,20,20,new jt(56,new Nt(1,144))),new Mt(14,48,48,22,22,new jt(68,new Nt(1,174))),new Mt(15,52,52,24,24,new jt(42,new Nt(2,102))),new Mt(16,64,64,14,14,new jt(56,new Nt(2,140))),new Mt(17,72,72,16,16,new jt(36,new Nt(4,92))),new Mt(18,80,80,18,18,new jt(48,new Nt(4,114))),new Mt(19,88,88,20,20,new jt(56,new Nt(4,144))),new Mt(20,96,96,22,22,new jt(68,new Nt(4,174))),new Mt(21,104,104,24,24,new jt(56,new Nt(6,136))),new Mt(22,120,120,18,18,new jt(68,new Nt(6,175))),new Mt(23,132,132,20,20,new jt(62,new Nt(8,163))),new Mt(24,144,144,22,22,new jt(62,new Nt(8,156),new Nt(2,155))),new Mt(25,8,18,6,16,new jt(7,new Nt(1,5))),new Mt(26,8,32,6,14,new jt(11,new Nt(1,10))),new Mt(27,12,26,10,24,new jt(14,new Nt(1,16))),new Mt(28,12,36,10,16,new jt(18,new Nt(1,22))),new Mt(29,16,36,14,16,new jt(24,new Nt(1,32))),new Mt(30,16,48,14,22,new jt(28,new Nt(1,49)))]}}Mt.VERSIONS=Mt.buildVersions();class Hr{constructor(s){const l=s.getHeight();if(l<8||l>144||(l&1)!==0)throw new F;this.version=Hr.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new pe(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const l=s.getHeight(),u=s.getWidth();return Mt.getVersionForDimensions(l,u)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let l=0,u=4,f=0;const m=this.mappingBitMatrix.getHeight(),y=this.mappingBitMatrix.getWidth();let v=!1,I=!1,C=!1,O=!1;do if(u===m&&f===0&&!v)s[l++]=this.readCorner1(m,y)&255,u-=2,f+=2,v=!0;else if(u===m-2&&f===0&&(y&3)!==0&&!I)s[l++]=this.readCorner2(m,y)&255,u-=2,f+=2,I=!0;else if(u===m+4&&f===2&&(y&7)===0&&!C)s[l++]=this.readCorner3(m,y)&255,u-=2,f+=2,C=!0;else if(u===m-2&&f===0&&(y&7)===4&&!O)s[l++]=this.readCorner4(m,y)&255,u-=2,f+=2,O=!0;else{do u<m&&f>=0&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,m,y)&255),u-=2,f+=2;while(u>=0&&f<y);u+=1,f+=3;do u>=0&&f<y&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,m,y)&255),u+=2,f-=2;while(u<m&&f>=0);u+=3,f+=1}while(u<m||f<y);if(l!==this.version.getTotalCodewords())throw new F;return s}readModule(s,l,u,f){return s<0&&(s+=u,l+=4-(u+4&7)),l<0&&(l+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(l,s),this.mappingBitMatrix.get(l,s)}readUtah(s,l,u,f){let m=0;return this.readModule(s-2,l-2,u,f)&&(m|=1),m<<=1,this.readModule(s-2,l-1,u,f)&&(m|=1),m<<=1,this.readModule(s-1,l-2,u,f)&&(m|=1),m<<=1,this.readModule(s-1,l-1,u,f)&&(m|=1),m<<=1,this.readModule(s-1,l,u,f)&&(m|=1),m<<=1,this.readModule(s,l-2,u,f)&&(m|=1),m<<=1,this.readModule(s,l-1,u,f)&&(m|=1),m<<=1,this.readModule(s,l,u,f)&&(m|=1),m}readCorner1(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,1,s,l)&&(u|=1),u<<=1,this.readModule(s-1,2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}readCorner2(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-4,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner3(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-3,s,l)&&(u|=1),u<<=1,this.readModule(1,l-2,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner4(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}extractDataRegion(s){const l=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(s.getHeight()!==l)throw new E("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),m=this.version.getDataRegionSizeColumns(),y=l/f|0,v=u/m|0,I=y*f,C=v*m,O=new pe(C,I);for(let U=0;U<y;++U){const K=U*f;for(let ee=0;ee<v;++ee){const ae=ee*m;for(let ue=0;ue<f;++ue){const fe=U*(f+2)+1+ue,Ee=K+ue;for(let Fe=0;Fe<m;++Fe){const je=ee*(m+2)+1+Fe;if(s.get(je,fe)){const Oe=ae+Fe;O.set(Oe,Ee)}}}}}return O}}class ia{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l){const u=l.getECBlocks();let f=0;const m=u.getECBlocks();for(let ue of m)f+=ue.getCount();const y=new Array(f);let v=0;for(let ue of m)for(let fe=0;fe<ue.getCount();fe++){const Ee=ue.getDataCodewords(),Fe=u.getECCodewords()+Ee;y[v++]=new ia(Ee,new Uint8Array(Fe))}const C=y[0].codewords.length-u.getECCodewords(),O=C-1;let U=0;for(let ue=0;ue<O;ue++)for(let fe=0;fe<v;fe++)y[fe].codewords[ue]=s[U++];const K=l.getVersionNumber()===24,ee=K?8:v;for(let ue=0;ue<ee;ue++)y[ue].codewords[C-1]=s[U++];const ae=y[0].codewords.length;for(let ue=C;ue<ae;ue++)for(let fe=0;fe<v;fe++){const Ee=K?(fe+8)%v:fe,Fe=K&&Ee>7?ue-1:ue;y[Ee].codewords[Fe]=s[U++]}if(U!==s.length)throw new E;return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Wa{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new E(""+s);let l=0,u=this.bitOffset,f=this.byteOffset;const m=this.bytes;if(u>0){const y=8-u,v=s<y?s:y,I=y-v,C=255>>8-v<<I;l=(m[f]&C)>>I,s-=v,u+=v,u===8&&(u=0,f++)}if(s>0){for(;s>=8;)l=l<<8|m[f]&255,f++,s-=8;if(s>0){const y=8-s,v=255>>y<<y;l=l<<s|(m[f]&v)>>y,u+=s}}return this.bitOffset=u,this.byteOffset=f,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Yn;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(Yn||(Yn={}));class Ui{static decode(s){const l=new Wa(s),u=new q,f=new q,m=new Array;let y=Yn.ASCII_ENCODE;do if(y===Yn.ASCII_ENCODE)y=this.decodeAsciiSegment(l,u,f);else{switch(y){case Yn.C40_ENCODE:this.decodeC40Segment(l,u);break;case Yn.TEXT_ENCODE:this.decodeTextSegment(l,u);break;case Yn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,u);break;case Yn.EDIFACT_ENCODE:this.decodeEdifactSegment(l,u);break;case Yn.BASE256_ENCODE:this.decodeBase256Segment(l,u,m);break;default:throw new F}y=Yn.ASCII_ENCODE}while(y!==Yn.PAD_ENCODE&&l.available()>0);return f.length()>0&&u.append(f.toString()),new at(s,u.toString(),m.length===0?null:m,null)}static decodeAsciiSegment(s,l,u){let f=!1;do{let m=s.readBits(8);if(m===0)throw new F;if(m<=128)return f&&(m+=128),l.append(String.fromCharCode(m-1)),Yn.ASCII_ENCODE;if(m===129)return Yn.PAD_ENCODE;if(m<=229){const y=m-130;y<10&&l.append("0"),l.append(""+y)}else switch(m){case 230:return Yn.C40_ENCODE;case 231:return Yn.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:l.append("[)>05"),u.insert(0,"");break;case 237:l.append("[)>06"),u.insert(0,"");break;case 238:return Yn.ANSIX12_ENCODE;case 239:return Yn.TEXT_ENCODE;case 240:return Yn.EDIFACT_ENCODE;case 241:break;default:if(m!==254||s.available()!==0)throw new F;break}}while(s.available()>0);return Yn.ASCII_ENCODE}static decodeC40Segment(s,l){let u=!1;const f=[];let m=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const I=f[v];switch(m){case 0:if(I<3)m=I+1;else if(I<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new F;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),m=0;break;case 2:if(I<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new F}m=0;break;case 3:u?(l.append(String.fromCharCode(I+224)),u=!1):l.append(String.fromCharCode(I+96)),m=0;break;default:throw new F}}}while(s.available()>0)}static decodeTextSegment(s,l){let u=!1,f=[],m=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const I=f[v];switch(m){case 0:if(I<3)m=I+1;else if(I<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new F;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),m=0;break;case 2:if(I<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new F}m=0;break;case 3:if(I<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C),m=0}else throw new F;break;default:throw new F}}}while(s.available()>0)}static decodeAnsiX12Segment(s,l){const u=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let m=0;m<3;m++){const y=u[m];switch(y){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(y<14)l.append(String.fromCharCode(y+44));else if(y<40)l.append(String.fromCharCode(y+51));else throw new F;break}}}while(s.available()>0)}static parseTwoBytes(s,l,u){let f=(s<<8)+l-1,m=Math.floor(f/1600);u[0]=m,f-=m*1600,m=Math.floor(f/40),u[1]=m,u[2]=f-m*40}static decodeEdifactSegment(s,l){do{if(s.available()<=16)return;for(let u=0;u<4;u++){let f=s.readBits(6);if(f===31){const m=8-s.getBitOffset();m!==8&&s.readBits(m);return}(f&32)===0&&(f|=64),l.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,l,u){let f=1+s.getByteOffset();const m=this.unrandomize255State(s.readBits(8),f++);let y;if(m===0?y=s.available()/8|0:m<250?y=m:y=250*(m-249)+this.unrandomize255State(s.readBits(8),f++),y<0)throw new F;const v=new Uint8Array(y);for(let I=0;I<y;I++){if(s.available()<8)throw new F;v[I]=this.unrandomize255State(s.readBits(8),f++)}u.push(v);try{l.append(te.decode(v,X.ISO88591))}catch(I){throw new Mn("Platform does not support required encoding: "+I.message)}}static unrandomize255State(s,l){const u=149*l%255+1,f=s-u;return f>=0?f:f+256}}Ui.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ui.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ui.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ui.TEXT_SHIFT2_SET_CHARS=Ui.C40_SHIFT2_SET_CHARS,Ui.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ha{constructor(){this.rsDecoder=new Pr(ht.DATA_MATRIX_FIELD_256)}decode(s){const l=new Hr(s),u=l.getVersion(),f=l.readCodewords(),m=ia.getDataBlocks(f,u);let y=0;for(let C of m)y+=C.getNumDataCodewords();const v=new Uint8Array(y),I=m.length;for(let C=0;C<I;C++){const O=m[C],U=O.getCodewords(),K=O.getNumDataCodewords();this.correctErrors(U,K);for(let ee=0;ee<K;ee++)v[ee*I+C]=U[ee]}return Ui.decode(v)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class pn{constructor(s){this.image=s,this.rectangleDetector=new Zr(this.image)}detect(){const s=this.rectangleDetector.detect();let l=this.detectSolid1(s);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new re;l=this.shiftToModuleCenter(l);const u=l[0],f=l[1],m=l[2],y=l[3];let v=this.transitionsBetween(u,y)+1,I=this.transitionsBetween(m,y)+1;(v&1)===1&&(v+=1),(I&1)===1&&(I+=1),4*v<7*I&&4*I<7*v&&(v=I=Math.max(v,I));let C=pn.sampleGrid(this.image,u,f,m,y,v,I);return new Kn(C,[u,f,m,y])}static shiftPoint(s,l,u){let f=(l.getX()-s.getX())/(u+1),m=(l.getY()-s.getY())/(u+1);return new Xe(s.getX()+f,s.getY()+m)}static moveAway(s,l,u){let f=s.getX(),m=s.getY();return f<l?f-=1:f+=1,m<u?m-=1:m+=1,new Xe(f,m)}detectSolid1(s){let l=s[0],u=s[1],f=s[3],m=s[2],y=this.transitionsBetween(l,u),v=this.transitionsBetween(u,f),I=this.transitionsBetween(f,m),C=this.transitionsBetween(m,l),O=y,U=[m,l,u,f];return O>v&&(O=v,U[0]=l,U[1]=u,U[2]=f,U[3]=m),O>I&&(O=I,U[0]=u,U[1]=f,U[2]=m,U[3]=l),O>C&&(U[0]=f,U[1]=m,U[2]=l,U[3]=u),U}detectSolid2(s){let l=s[0],u=s[1],f=s[2],m=s[3],y=this.transitionsBetween(l,m),v=pn.shiftPoint(u,f,(y+1)*4),I=pn.shiftPoint(f,u,(y+1)*4),C=this.transitionsBetween(v,l),O=this.transitionsBetween(I,m);return C<O?(s[0]=l,s[1]=u,s[2]=f,s[3]=m):(s[0]=u,s[1]=f,s[2]=m,s[3]=l),s}correctTopRight(s){let l=s[0],u=s[1],f=s[2],m=s[3],y=this.transitionsBetween(l,m),v=this.transitionsBetween(u,m),I=pn.shiftPoint(l,u,(v+1)*4),C=pn.shiftPoint(f,u,(y+1)*4);y=this.transitionsBetween(I,m),v=this.transitionsBetween(C,m);let O=new Xe(m.getX()+(f.getX()-u.getX())/(y+1),m.getY()+(f.getY()-u.getY())/(y+1)),U=new Xe(m.getX()+(l.getX()-u.getX())/(v+1),m.getY()+(l.getY()-u.getY())/(v+1));if(!this.isValid(O))return this.isValid(U)?U:null;if(!this.isValid(U))return O;let K=this.transitionsBetween(I,O)+this.transitionsBetween(C,O),ee=this.transitionsBetween(I,U)+this.transitionsBetween(C,U);return K>ee?O:U}shiftToModuleCenter(s){let l=s[0],u=s[1],f=s[2],m=s[3],y=this.transitionsBetween(l,m)+1,v=this.transitionsBetween(f,m)+1,I=pn.shiftPoint(l,u,v*4),C=pn.shiftPoint(f,u,y*4);y=this.transitionsBetween(I,m)+1,v=this.transitionsBetween(C,m)+1,(y&1)===1&&(y+=1),(v&1)===1&&(v+=1);let O=(l.getX()+u.getX()+f.getX()+m.getX())/4,U=(l.getY()+u.getY()+f.getY()+m.getY())/4;l=pn.moveAway(l,O,U),u=pn.moveAway(u,O,U),f=pn.moveAway(f,O,U),m=pn.moveAway(m,O,U);let K,ee;return I=pn.shiftPoint(l,u,v*4),I=pn.shiftPoint(I,m,y*4),K=pn.shiftPoint(u,l,v*4),K=pn.shiftPoint(K,f,y*4),C=pn.shiftPoint(f,m,v*4),C=pn.shiftPoint(C,u,y*4),ee=pn.shiftPoint(m,f,v*4),ee=pn.shiftPoint(ee,l,y*4),[I,K,C,ee]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,l,u,f,m,y,v){return _r.getInstance().sampleGrid(s,y,v,.5,.5,y-.5,.5,y-.5,v-.5,.5,v-.5,l.getX(),l.getY(),m.getX(),m.getY(),f.getX(),f.getY(),u.getX(),u.getY())}transitionsBetween(s,l){let u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),m=Math.trunc(l.getX()),y=Math.trunc(l.getY()),v=Math.abs(y-f)>Math.abs(m-u);if(v){let ue=u;u=f,f=ue,ue=m,m=y,y=ue}let I=Math.abs(m-u),C=Math.abs(y-f),O=-I/2,U=f<y?1:-1,K=u<m?1:-1,ee=0,ae=this.image.get(v?f:u,v?u:f);for(let ue=u,fe=f;ue!==m;ue+=K){let Ee=this.image.get(v?fe:ue,v?ue:fe);if(Ee!==ae&&(ee++,ae=Ee),O+=C,O>0){if(fe===y)break;fe+=U,O-=I}}return ee}}class Ei{constructor(){this.decoder=new Ha}decode(s,l=null){let u,f;if(l!=null&&l.has(le.PURE_BARCODE)){const C=Ei.extractPureBits(s.getBlackMatrix());u=this.decoder.decode(C),f=Ei.NO_POINTS}else{const C=new pn(s.getBlackMatrix()).detect();u=this.decoder.decode(C.getBits()),f=C.getPoints()}const m=u.getRawBytes(),y=new Le(u.getText(),m,8*m.length,f,Re.DATA_MATRIX,D.currentTimeMillis()),v=u.getByteSegments();v!=null&&y.putMetadata(Ge.BYTE_SEGMENTS,v);const I=u.getECLevel();return I!=null&&y.putMetadata(Ge.ERROR_CORRECTION_LEVEL,I),y}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l==null||u==null)throw new re;const f=this.moduleSize(l,s);let m=l[1];const y=u[1];let v=l[0];const C=(u[0]-v+1)/f,O=(y-m+1)/f;if(C<=0||O<=0)throw new re;const U=f/2;m+=U,v+=U;const K=new pe(C,O);for(let ee=0;ee<O;ee++){const ae=m+ee*f;for(let ue=0;ue<C;ue++)s.get(v+ue*f,ae)&&K.set(ue,ee)}return K}static moduleSize(s,l){const u=l.getWidth();let f=s[0];const m=s[1];for(;f<u&&l.get(f,m);)f++;if(f===u)throw new re;const y=f-s[0];if(y===0)throw new re;return y}}Ei.NO_POINTS=[];class Yd extends Se{constructor(s=500){super(new Ei,s)}}var bi;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(bi||(bi={}));class Lt{constructor(s,l,u){this.value=s,this.stringValue=l,this.bits=u,Lt.FOR_BITS.set(u,this),Lt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Lt.L;case"M":return Lt.M;case"Q":return Lt.Q;case"H":return Lt.H;default:throw new w(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Lt))return!1;const l=s;return this.value===l.value}static forBits(s){if(s<0||s>=Lt.FOR_BITS.size)throw new E;return Lt.FOR_BITS.get(s)}}Lt.FOR_BITS=new Map,Lt.FOR_VALUE=new Map,Lt.L=new Lt(bi.L,"L",1),Lt.M=new Lt(bi.M,"M",0),Lt.Q=new Lt(bi.Q,"Q",3),Lt.H=new Lt(bi.H,"H",2);class Qn{constructor(s){this.errorCorrectionLevel=Lt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,l){return W.bitCount(s^l)}static decodeFormatInformation(s,l){const u=Qn.doDecodeFormatInformation(s,l);return u!==null?u:Qn.doDecodeFormatInformation(s^Qn.FORMAT_INFO_MASK_QR,l^Qn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,l){let u=Number.MAX_SAFE_INTEGER,f=0;for(const m of Qn.FORMAT_INFO_DECODE_LOOKUP){const y=m[0];if(y===s||y===l)return new Qn(m[1]);let v=Qn.numBitsDiffering(s,y);v<u&&(f=m[1],u=v),s!==l&&(v=Qn.numBitsDiffering(l,y),v<u&&(f=m[1],u=v))}return u<=3?new Qn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Qn))return!1;const l=s;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}Qn.FORMAT_INFO_MASK_QR=21522,Qn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class me{constructor(s,...l){this.ecCodewordsPerBlock=s,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const l=this.ecBlocks;for(const u of l)s+=u.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Z{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(s,l,...u){this.versionNumber=s,this.alignmentPatternCenters=l,this.ecBlocks=u;let f=0;const m=u[0].getECCodewordsPerBlock(),y=u[0].getECBlocks();for(const v of y)f+=v.getCount()*(v.getDataCodewords()+m);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new F;try{return this.getVersionForNumber((s-17)/4)}catch{throw new F}}static getVersionForNumber(s){if(s<1||s>40)throw new E;return $e.VERSIONS[s-1]}static decodeVersionInformation(s){let l=Number.MAX_SAFE_INTEGER,u=0;for(let f=0;f<$e.VERSION_DECODE_INFO.length;f++){const m=$e.VERSION_DECODE_INFO[f];if(m===s)return $e.getVersionForNumber(f+7);const y=Qn.numBitsDiffering(s,m);y<l&&(u=f+7,l=y)}return l<=3?$e.getVersionForNumber(u):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),l=new pe(s);l.setRegion(0,0,9,9),l.setRegion(s-8,0,8,9),l.setRegion(0,s-8,9,8);const u=this.alignmentPatternCenters.length;for(let f=0;f<u;f++){const m=this.alignmentPatternCenters[f]-2;for(let y=0;y<u;y++)f===0&&(y===0||y===u-1)||f===u-1&&y===0||l.setRegion(this.alignmentPatternCenters[y]-2,m,5,5)}return l.setRegion(6,9,1,s-17),l.setRegion(9,6,s-17,1),this.versionNumber>6&&(l.setRegion(s-11,0,3,6),l.setRegion(0,s-11,6,3)),l}toString(){return""+this.versionNumber}}$e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$e.VERSIONS=[new $e(1,new Int32Array(0),new me(7,new Z(1,19)),new me(10,new Z(1,16)),new me(13,new Z(1,13)),new me(17,new Z(1,9))),new $e(2,Int32Array.from([6,18]),new me(10,new Z(1,34)),new me(16,new Z(1,28)),new me(22,new Z(1,22)),new me(28,new Z(1,16))),new $e(3,Int32Array.from([6,22]),new me(15,new Z(1,55)),new me(26,new Z(1,44)),new me(18,new Z(2,17)),new me(22,new Z(2,13))),new $e(4,Int32Array.from([6,26]),new me(20,new Z(1,80)),new me(18,new Z(2,32)),new me(26,new Z(2,24)),new me(16,new Z(4,9))),new $e(5,Int32Array.from([6,30]),new me(26,new Z(1,108)),new me(24,new Z(2,43)),new me(18,new Z(2,15),new Z(2,16)),new me(22,new Z(2,11),new Z(2,12))),new $e(6,Int32Array.from([6,34]),new me(18,new Z(2,68)),new me(16,new Z(4,27)),new me(24,new Z(4,19)),new me(28,new Z(4,15))),new $e(7,Int32Array.from([6,22,38]),new me(20,new Z(2,78)),new me(18,new Z(4,31)),new me(18,new Z(2,14),new Z(4,15)),new me(26,new Z(4,13),new Z(1,14))),new $e(8,Int32Array.from([6,24,42]),new me(24,new Z(2,97)),new me(22,new Z(2,38),new Z(2,39)),new me(22,new Z(4,18),new Z(2,19)),new me(26,new Z(4,14),new Z(2,15))),new $e(9,Int32Array.from([6,26,46]),new me(30,new Z(2,116)),new me(22,new Z(3,36),new Z(2,37)),new me(20,new Z(4,16),new Z(4,17)),new me(24,new Z(4,12),new Z(4,13))),new $e(10,Int32Array.from([6,28,50]),new me(18,new Z(2,68),new Z(2,69)),new me(26,new Z(4,43),new Z(1,44)),new me(24,new Z(6,19),new Z(2,20)),new me(28,new Z(6,15),new Z(2,16))),new $e(11,Int32Array.from([6,30,54]),new me(20,new Z(4,81)),new me(30,new Z(1,50),new Z(4,51)),new me(28,new Z(4,22),new Z(4,23)),new me(24,new Z(3,12),new Z(8,13))),new $e(12,Int32Array.from([6,32,58]),new me(24,new Z(2,92),new Z(2,93)),new me(22,new Z(6,36),new Z(2,37)),new me(26,new Z(4,20),new Z(6,21)),new me(28,new Z(7,14),new Z(4,15))),new $e(13,Int32Array.from([6,34,62]),new me(26,new Z(4,107)),new me(22,new Z(8,37),new Z(1,38)),new me(24,new Z(8,20),new Z(4,21)),new me(22,new Z(12,11),new Z(4,12))),new $e(14,Int32Array.from([6,26,46,66]),new me(30,new Z(3,115),new Z(1,116)),new me(24,new Z(4,40),new Z(5,41)),new me(20,new Z(11,16),new Z(5,17)),new me(24,new Z(11,12),new Z(5,13))),new $e(15,Int32Array.from([6,26,48,70]),new me(22,new Z(5,87),new Z(1,88)),new me(24,new Z(5,41),new Z(5,42)),new me(30,new Z(5,24),new Z(7,25)),new me(24,new Z(11,12),new Z(7,13))),new $e(16,Int32Array.from([6,26,50,74]),new me(24,new Z(5,98),new Z(1,99)),new me(28,new Z(7,45),new Z(3,46)),new me(24,new Z(15,19),new Z(2,20)),new me(30,new Z(3,15),new Z(13,16))),new $e(17,Int32Array.from([6,30,54,78]),new me(28,new Z(1,107),new Z(5,108)),new me(28,new Z(10,46),new Z(1,47)),new me(28,new Z(1,22),new Z(15,23)),new me(28,new Z(2,14),new Z(17,15))),new $e(18,Int32Array.from([6,30,56,82]),new me(30,new Z(5,120),new Z(1,121)),new me(26,new Z(9,43),new Z(4,44)),new me(28,new Z(17,22),new Z(1,23)),new me(28,new Z(2,14),new Z(19,15))),new $e(19,Int32Array.from([6,30,58,86]),new me(28,new Z(3,113),new Z(4,114)),new me(26,new Z(3,44),new Z(11,45)),new me(26,new Z(17,21),new Z(4,22)),new me(26,new Z(9,13),new Z(16,14))),new $e(20,Int32Array.from([6,34,62,90]),new me(28,new Z(3,107),new Z(5,108)),new me(26,new Z(3,41),new Z(13,42)),new me(30,new Z(15,24),new Z(5,25)),new me(28,new Z(15,15),new Z(10,16))),new $e(21,Int32Array.from([6,28,50,72,94]),new me(28,new Z(4,116),new Z(4,117)),new me(26,new Z(17,42)),new me(28,new Z(17,22),new Z(6,23)),new me(30,new Z(19,16),new Z(6,17))),new $e(22,Int32Array.from([6,26,50,74,98]),new me(28,new Z(2,111),new Z(7,112)),new me(28,new Z(17,46)),new me(30,new Z(7,24),new Z(16,25)),new me(24,new Z(34,13))),new $e(23,Int32Array.from([6,30,54,78,102]),new me(30,new Z(4,121),new Z(5,122)),new me(28,new Z(4,47),new Z(14,48)),new me(30,new Z(11,24),new Z(14,25)),new me(30,new Z(16,15),new Z(14,16))),new $e(24,Int32Array.from([6,28,54,80,106]),new me(30,new Z(6,117),new Z(4,118)),new me(28,new Z(6,45),new Z(14,46)),new me(30,new Z(11,24),new Z(16,25)),new me(30,new Z(30,16),new Z(2,17))),new $e(25,Int32Array.from([6,32,58,84,110]),new me(26,new Z(8,106),new Z(4,107)),new me(28,new Z(8,47),new Z(13,48)),new me(30,new Z(7,24),new Z(22,25)),new me(30,new Z(22,15),new Z(13,16))),new $e(26,Int32Array.from([6,30,58,86,114]),new me(28,new Z(10,114),new Z(2,115)),new me(28,new Z(19,46),new Z(4,47)),new me(28,new Z(28,22),new Z(6,23)),new me(30,new Z(33,16),new Z(4,17))),new $e(27,Int32Array.from([6,34,62,90,118]),new me(30,new Z(8,122),new Z(4,123)),new me(28,new Z(22,45),new Z(3,46)),new me(30,new Z(8,23),new Z(26,24)),new me(30,new Z(12,15),new Z(28,16))),new $e(28,Int32Array.from([6,26,50,74,98,122]),new me(30,new Z(3,117),new Z(10,118)),new me(28,new Z(3,45),new Z(23,46)),new me(30,new Z(4,24),new Z(31,25)),new me(30,new Z(11,15),new Z(31,16))),new $e(29,Int32Array.from([6,30,54,78,102,126]),new me(30,new Z(7,116),new Z(7,117)),new me(28,new Z(21,45),new Z(7,46)),new me(30,new Z(1,23),new Z(37,24)),new me(30,new Z(19,15),new Z(26,16))),new $e(30,Int32Array.from([6,26,52,78,104,130]),new me(30,new Z(5,115),new Z(10,116)),new me(28,new Z(19,47),new Z(10,48)),new me(30,new Z(15,24),new Z(25,25)),new me(30,new Z(23,15),new Z(25,16))),new $e(31,Int32Array.from([6,30,56,82,108,134]),new me(30,new Z(13,115),new Z(3,116)),new me(28,new Z(2,46),new Z(29,47)),new me(30,new Z(42,24),new Z(1,25)),new me(30,new Z(23,15),new Z(28,16))),new $e(32,Int32Array.from([6,34,60,86,112,138]),new me(30,new Z(17,115)),new me(28,new Z(10,46),new Z(23,47)),new me(30,new Z(10,24),new Z(35,25)),new me(30,new Z(19,15),new Z(35,16))),new $e(33,Int32Array.from([6,30,58,86,114,142]),new me(30,new Z(17,115),new Z(1,116)),new me(28,new Z(14,46),new Z(21,47)),new me(30,new Z(29,24),new Z(19,25)),new me(30,new Z(11,15),new Z(46,16))),new $e(34,Int32Array.from([6,34,62,90,118,146]),new me(30,new Z(13,115),new Z(6,116)),new me(28,new Z(14,46),new Z(23,47)),new me(30,new Z(44,24),new Z(7,25)),new me(30,new Z(59,16),new Z(1,17))),new $e(35,Int32Array.from([6,30,54,78,102,126,150]),new me(30,new Z(12,121),new Z(7,122)),new me(28,new Z(12,47),new Z(26,48)),new me(30,new Z(39,24),new Z(14,25)),new me(30,new Z(22,15),new Z(41,16))),new $e(36,Int32Array.from([6,24,50,76,102,128,154]),new me(30,new Z(6,121),new Z(14,122)),new me(28,new Z(6,47),new Z(34,48)),new me(30,new Z(46,24),new Z(10,25)),new me(30,new Z(2,15),new Z(64,16))),new $e(37,Int32Array.from([6,28,54,80,106,132,158]),new me(30,new Z(17,122),new Z(4,123)),new me(28,new Z(29,46),new Z(14,47)),new me(30,new Z(49,24),new Z(10,25)),new me(30,new Z(24,15),new Z(46,16))),new $e(38,Int32Array.from([6,32,58,84,110,136,162]),new me(30,new Z(4,122),new Z(18,123)),new me(28,new Z(13,46),new Z(32,47)),new me(30,new Z(48,24),new Z(14,25)),new me(30,new Z(42,15),new Z(32,16))),new $e(39,Int32Array.from([6,26,54,82,110,138,166]),new me(30,new Z(20,117),new Z(4,118)),new me(28,new Z(40,47),new Z(7,48)),new me(30,new Z(43,24),new Z(22,25)),new me(30,new Z(10,15),new Z(67,16))),new $e(40,Int32Array.from([6,30,58,86,114,142,170]),new me(30,new Z(19,118),new Z(6,119)),new me(28,new Z(18,47),new Z(31,48)),new me(30,new Z(34,24),new Z(34,25)),new me(30,new Z(20,15),new Z(61,16)))];var Rn;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class bt{constructor(s,l){this.value=s,this.isMasked=l}unmaskBitMatrix(s,l){for(let u=0;u<l;u++)for(let f=0;f<l;f++)this.isMasked(u,f)&&s.flip(f,u)}}bt.values=new Map([[Rn.DATA_MASK_000,new bt(Rn.DATA_MASK_000,(j,s)=>(j+s&1)===0)],[Rn.DATA_MASK_001,new bt(Rn.DATA_MASK_001,(j,s)=>(j&1)===0)],[Rn.DATA_MASK_010,new bt(Rn.DATA_MASK_010,(j,s)=>s%3===0)],[Rn.DATA_MASK_011,new bt(Rn.DATA_MASK_011,(j,s)=>(j+s)%3===0)],[Rn.DATA_MASK_100,new bt(Rn.DATA_MASK_100,(j,s)=>(Math.floor(j/2)+Math.floor(s/3)&1)===0)],[Rn.DATA_MASK_101,new bt(Rn.DATA_MASK_101,(j,s)=>j*s%6===0)],[Rn.DATA_MASK_110,new bt(Rn.DATA_MASK_110,(j,s)=>j*s%6<3)],[Rn.DATA_MASK_111,new bt(Rn.DATA_MASK_111,(j,s)=>(j+s+j*s%3&1)===0)]]);class Eo{constructor(s){const l=s.getHeight();if(l<21||(l&3)!==1)throw new F;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let m=0;m<6;m++)s=this.copyBit(m,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let m=5;m>=0;m--)s=this.copyBit(8,m,s);const l=this.bitMatrix.getHeight();let u=0;const f=l-7;for(let m=l-1;m>=f;m--)u=this.copyBit(8,m,u);for(let m=l-8;m<l;m++)u=this.copyBit(m,8,u);if(this.parsedFormatInfo=Qn.decodeFormatInformation(s,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),l=Math.floor((s-17)/4);if(l<=6)return $e.getVersionForNumber(l);let u=0;const f=s-11;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(v,y,u);let m=$e.decodeVersionInformation(u);if(m!==null&&m.getDimensionForVersion()===s)return this.parsedVersion=m,m;u=0;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(y,v,u);if(m=$e.decodeVersionInformation(u),m!==null&&m.getDimensionForVersion()===s)return this.parsedVersion=m,m;throw new F}copyBit(s,l,u){return(this.isMirror?this.bitMatrix.get(l,s):this.bitMatrix.get(s,l))?u<<1|1:u<<1}readCodewords(){const s=this.readFormatInformation(),l=this.readVersion(),u=bt.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,f);const m=l.buildFunctionPattern();let y=!0;const v=new Uint8Array(l.getTotalCodewords());let I=0,C=0,O=0;for(let U=f-1;U>0;U-=2){U===6&&U--;for(let K=0;K<f;K++){const ee=y?f-1-K:K;for(let ae=0;ae<2;ae++)m.get(U-ae,ee)||(O++,C<<=1,this.bitMatrix.get(U-ae,ee)&&(C|=1),O===8&&(v[I++]=C,O=0,C=0))}y=!y}if(I!==l.getTotalCodewords())throw new F;return v}remask(){if(this.parsedFormatInfo===null)return;const s=bt.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let l=0,u=s.getWidth();l<u;l++)for(let f=l+1,m=s.getHeight();f<m;f++)s.get(l,f)!==s.get(f,l)&&(s.flip(f,l),s.flip(l,f))}}class Ga{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l,u){if(s.length!==l.getTotalCodewords())throw new E;const f=l.getECBlocksForLevel(u);let m=0;const y=f.getECBlocks();for(const ae of y)m+=ae.getCount();const v=new Array(m);let I=0;for(const ae of y)for(let ue=0;ue<ae.getCount();ue++){const fe=ae.getDataCodewords(),Ee=f.getECCodewordsPerBlock()+fe;v[I++]=new Ga(fe,new Uint8Array(Ee))}const C=v[0].codewords.length;let O=v.length-1;for(;O>=0&&v[O].codewords.length!==C;)O--;O++;const U=C-f.getECCodewordsPerBlock();let K=0;for(let ae=0;ae<U;ae++)for(let ue=0;ue<I;ue++)v[ue].codewords[ae]=s[K++];for(let ae=O;ae<I;ae++)v[ae].codewords[U]=s[K++];const ee=v[0].codewords.length;for(let ae=U;ae<ee;ae++)for(let ue=0;ue<I;ue++){const fe=ue<O?ae:ae+1;v[ue].codewords[fe]=s[K++]}return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Gr;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(Gr||(Gr={}));class ut{constructor(s,l,u,f){this.value=s,this.stringValue=l,this.characterCountBitsForVersions=u,this.bits=f,ut.FOR_BITS.set(f,this),ut.FOR_VALUE.set(s,this)}static forBits(s){const l=ut.FOR_BITS.get(s);if(l===void 0)throw new E;return l}getCharacterCountBits(s){const l=s.getVersionNumber();let u;return l<=9?u=0:l<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof ut))return!1;const l=s;return this.value===l.value}toString(){return this.stringValue}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.TERMINATOR=new ut(Gr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ut.NUMERIC=new ut(Gr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ut.ALPHANUMERIC=new ut(Gr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ut.STRUCTURED_APPEND=new ut(Gr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ut.BYTE=new ut(Gr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ut.ECI=new ut(Gr.ECI,"ECI",Int32Array.from([0,0,0]),7),ut.KANJI=new ut(Gr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ut.FNC1_FIRST_POSITION=new ut(Gr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ut.FNC1_SECOND_POSITION=new ut(Gr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ut.HANZI=new ut(Gr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Sn{static decode(s,l,u,f){const m=new Wa(s);let y=new q;const v=new Array;let I=-1,C=-1;try{let O=null,U=!1,K;do{if(m.available()<4)K=ut.TERMINATOR;else{const ee=m.readBits(4);K=ut.forBits(ee)}switch(K){case ut.TERMINATOR:break;case ut.FNC1_FIRST_POSITION:case ut.FNC1_SECOND_POSITION:U=!0;break;case ut.STRUCTURED_APPEND:if(m.available()<16)throw new F;I=m.readBits(8),C=m.readBits(8);break;case ut.ECI:const ee=Sn.parseECIValue(m);if(O=G.getCharacterSetECIByValue(ee),O===null)throw new F;break;case ut.HANZI:const ae=m.readBits(4),ue=m.readBits(K.getCharacterCountBits(l));ae===Sn.GB2312_SUBSET&&Sn.decodeHanziSegment(m,y,ue);break;default:const fe=m.readBits(K.getCharacterCountBits(l));switch(K){case ut.NUMERIC:Sn.decodeNumericSegment(m,y,fe);break;case ut.ALPHANUMERIC:Sn.decodeAlphanumericSegment(m,y,fe,U);break;case ut.BYTE:Sn.decodeByteSegment(m,y,fe,O,v,f);break;case ut.KANJI:Sn.decodeKanjiSegment(m,y,fe);break;default:throw new F}break}}while(K!==ut.TERMINATOR)}catch{throw new F}return new at(s,y.toString(),v.length===0?null:v,u===null?null:u.toString(),I,C)}static decodeHanziSegment(s,l,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let m=0;for(;u>0;){const y=s.readBits(13);let v=y/96<<8&4294967295|y%96;v<959?v+=41377:v+=42657,f[m]=v>>8&255,f[m+1]=v&255,m+=2,u--}try{l.append(te.decode(f,X.GB2312))}catch(y){throw new F(y)}}static decodeKanjiSegment(s,l,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let m=0;for(;u>0;){const y=s.readBits(13);let v=y/192<<8&4294967295|y%192;v<7936?v+=33088:v+=49472,f[m]=v>>8,f[m+1]=v,m+=2,u--}try{l.append(te.decode(f,X.SHIFT_JIS))}catch(y){throw new F(y)}}static decodeByteSegment(s,l,u,f,m,y){if(8*u>s.available())throw new F;const v=new Uint8Array(u);for(let C=0;C<u;C++)v[C]=s.readBits(8);let I;f===null?I=X.guessEncoding(v,y):I=f.getName();try{l.append(te.decode(v,I))}catch(C){throw new F(C)}m.push(v)}static toAlphaNumericChar(s){if(s>=Sn.ALPHANUMERIC_CHARS.length)throw new F;return Sn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,l,u,f){const m=l.length();for(;u>1;){if(s.available()<11)throw new F;const y=s.readBits(11);l.append(Sn.toAlphaNumericChar(Math.floor(y/45))),l.append(Sn.toAlphaNumericChar(y%45)),u-=2}if(u===1){if(s.available()<6)throw new F;l.append(Sn.toAlphaNumericChar(s.readBits(6)))}if(f)for(let y=m;y<l.length();y++)l.charAt(y)==="%"&&(y<l.length()-1&&l.charAt(y+1)==="%"?l.deleteCharAt(y+1):l.setCharAt(y,""))}static decodeNumericSegment(s,l,u){for(;u>=3;){if(s.available()<10)throw new F;const f=s.readBits(10);if(f>=1e3)throw new F;l.append(Sn.toAlphaNumericChar(Math.floor(f/100))),l.append(Sn.toAlphaNumericChar(Math.floor(f/10)%10)),l.append(Sn.toAlphaNumericChar(f%10)),u-=3}if(u===2){if(s.available()<7)throw new F;const f=s.readBits(7);if(f>=100)throw new F;l.append(Sn.toAlphaNumericChar(Math.floor(f/10))),l.append(Sn.toAlphaNumericChar(f%10))}else if(u===1){if(s.available()<4)throw new F;const f=s.readBits(4);if(f>=10)throw new F;l.append(Sn.toAlphaNumericChar(f))}}static parseECIValue(s){const l=s.readBits(8);if((l&128)===0)return l&127;if((l&192)===128){const u=s.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){const u=s.readBits(16);return(l&31)<<16&4294967295|u}throw new F}}Sn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Sn.GB2312_SUBSET=1;class Ql{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const l=s[0];s[0]=s[2],s[2]=l}}class Zl{constructor(){this.rsDecoder=new Pr(ht.QR_CODE_FIELD_256)}decodeBooleanArray(s,l){return this.decodeBitMatrix(pe.parseFromBooleanArray(s),l)}decodeBitMatrix(s,l){const u=new Eo(s);let f=null;try{return this.decodeBitMatrixParser(u,l)}catch(m){f=m}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const m=this.decodeBitMatrixParser(u,l);return m.setOther(new Ql(!0)),m}catch(m){throw f!==null?f:m}}decodeBitMatrixParser(s,l){const u=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),m=s.readCodewords(),y=Ga.getDataBlocks(m,u,f);let v=0;for(const O of y)v+=O.getNumDataCodewords();const I=new Uint8Array(v);let C=0;for(const O of y){const U=O.getCodewords(),K=O.getNumDataCodewords();this.correctErrors(U,K);for(let ee=0;ee<K;ee++)I[C++]=U[ee]}return Sn.decode(I,u,f,l)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class Zi extends Xe{constructor(s,l,u){super(s,l),this.estimatedModuleSize=u}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=(this.getX()+l)/2,m=(this.getY()+s)/2,y=(this.estimatedModuleSize+u)/2;return new Zi(f,m,y)}}class dr{constructor(s,l,u,f,m,y,v){this.image=s,this.startX=l,this.startY=u,this.width=f,this.height=m,this.moduleSize=y,this.resultPointCallback=v,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,l=this.height,u=this.width,f=s+u,m=this.startY+l/2,y=new Int32Array(3),v=this.image;for(let I=0;I<l;I++){const C=m+((I&1)===0?Math.floor((I+1)/2):-Math.floor((I+1)/2));y[0]=0,y[1]=0,y[2]=0;let O=s;for(;O<f&&!v.get(O,C);)O++;let U=0;for(;O<f;){if(v.get(O,C))if(U===1)y[1]++;else if(U===2){if(this.foundPatternCross(y)){const K=this.handlePossibleCenter(y,C,O);if(K!==null)return K}y[0]=y[2],y[1]=1,y[2]=0,U=1}else y[++U]++;else U===1&&U++,y[U]++;O++}if(this.foundPatternCross(y)){const K=this.handlePossibleCenter(y,C,f);if(K!==null)return K}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(s,l){return l-s[2]-s[1]/2}foundPatternCross(s){const l=this.moduleSize,u=l/2;for(let f=0;f<3;f++)if(Math.abs(l-s[f])>=u)return!1;return!0}crossCheckVertical(s,l,u,f){const m=this.image,y=m.getHeight(),v=this.crossCheckStateCount;v[0]=0,v[1]=0,v[2]=0;let I=s;for(;I>=0&&m.get(l,I)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&!m.get(l,I)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&m.get(l,I)&&v[1]<=u;)v[1]++,I++;if(I===y||v[1]>u)return NaN;for(;I<y&&!m.get(l,I)&&v[2]<=u;)v[2]++,I++;if(v[2]>u)return NaN;const C=v[0]+v[1]+v[2];return 5*Math.abs(C-f)>=2*f?NaN:this.foundPatternCross(v)?dr.centerFromEnd(v,I):NaN}handlePossibleCenter(s,l,u){const f=s[0]+s[1]+s[2],m=dr.centerFromEnd(s,u),y=this.crossCheckVertical(l,m,2*s[1],f);if(!isNaN(y)){const v=(s[0]+s[1]+s[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(v,y,m))return C.combineEstimate(y,m,v);const I=new Zi(m,y,v);this.possibleCenters.push(I),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(I)}return null}}class zi extends Xe{constructor(s,l,u,f){super(s,l),this.estimatedModuleSize=u,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=this.count+1,m=(this.count*this.getX()+l)/f,y=(this.count*this.getY()+s)/f,v=(this.count*this.estimatedModuleSize+u)/f;return new zi(m,y,v,f)}}class ms{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nn{constructor(s,l){this.image=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const l=s!=null&&s.get(le.TRY_HARDER)!==void 0,u=s!=null&&s.get(le.PURE_BARCODE)!==void 0,f=this.image,m=f.getHeight(),y=f.getWidth();let v=Math.floor(3*m/(4*Nn.MAX_MODULES));(v<Nn.MIN_SKIP||l)&&(v=Nn.MIN_SKIP);let I=!1;const C=new Int32Array(5);for(let U=v-1;U<m&&!I;U+=v){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let K=0;for(let ee=0;ee<y;ee++)if(f.get(ee,U))(K&1)===1&&K++,C[K]++;else if((K&1)===0)if(K===4)if(Nn.foundPatternCross(C)){if(this.handlePossibleCenter(C,U,ee,u)===!0)if(v=2,this.hasSkipped===!0)I=this.haveMultiplyConfirmedCenters();else{const ue=this.findRowSkip();ue>C[2]&&(U+=ue-C[2]-v,ee=y-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,K=3;continue}K=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,K=3;else C[++K]++;else C[K]++;Nn.foundPatternCross(C)&&this.handlePossibleCenter(C,U,y,u)===!0&&(v=C[0],this.hasSkipped&&(I=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Xe.orderBestPatterns(O),new ms(O)}static centerFromEnd(s,l){return l-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let l=0;for(let m=0;m<5;m++){const y=s[m];if(y===0)return!1;l+=y}if(l<7)return!1;const u=l/7,f=u/2;return Math.abs(u-s[0])<f&&Math.abs(u-s[1])<f&&Math.abs(3*u-s[2])<3*f&&Math.abs(u-s[3])<f&&Math.abs(u-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,l,u,f){const m=this.getCrossCheckStateCount();let y=0;const v=this.image;for(;s>=y&&l>=y&&v.get(l-y,s-y);)m[2]++,y++;if(s<y||l<y)return!1;for(;s>=y&&l>=y&&!v.get(l-y,s-y)&&m[1]<=u;)m[1]++,y++;if(s<y||l<y||m[1]>u)return!1;for(;s>=y&&l>=y&&v.get(l-y,s-y)&&m[0]<=u;)m[0]++,y++;if(m[0]>u)return!1;const I=v.getHeight(),C=v.getWidth();for(y=1;s+y<I&&l+y<C&&v.get(l+y,s+y);)m[2]++,y++;if(s+y>=I||l+y>=C)return!1;for(;s+y<I&&l+y<C&&!v.get(l+y,s+y)&&m[3]<u;)m[3]++,y++;if(s+y>=I||l+y>=C||m[3]>=u)return!1;for(;s+y<I&&l+y<C&&v.get(l+y,s+y)&&m[4]<u;)m[4]++,y++;if(m[4]>=u)return!1;const O=m[0]+m[1]+m[2]+m[3]+m[4];return Math.abs(O-f)<2*f&&Nn.foundPatternCross(m)}crossCheckVertical(s,l,u,f){const m=this.image,y=m.getHeight(),v=this.getCrossCheckStateCount();let I=s;for(;I>=0&&m.get(l,I);)v[2]++,I--;if(I<0)return NaN;for(;I>=0&&!m.get(l,I)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&m.get(l,I)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&m.get(l,I);)v[2]++,I++;if(I===y)return NaN;for(;I<y&&!m.get(l,I)&&v[3]<u;)v[3]++,I++;if(I===y||v[3]>=u)return NaN;for(;I<y&&m.get(l,I)&&v[4]<u;)v[4]++,I++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=2*f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,I):NaN}crossCheckHorizontal(s,l,u,f){const m=this.image,y=m.getWidth(),v=this.getCrossCheckStateCount();let I=s;for(;I>=0&&m.get(I,l);)v[2]++,I--;if(I<0)return NaN;for(;I>=0&&!m.get(I,l)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&m.get(I,l)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&m.get(I,l);)v[2]++,I++;if(I===y)return NaN;for(;I<y&&!m.get(I,l)&&v[3]<u;)v[3]++,I++;if(I===y||v[3]>=u)return NaN;for(;I<y&&m.get(I,l)&&v[4]<u;)v[4]++,I++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,I):NaN}handlePossibleCenter(s,l,u,f){const m=s[0]+s[1]+s[2]+s[3]+s[4];let y=Nn.centerFromEnd(s,u),v=this.crossCheckVertical(l,Math.floor(y),s[2],m);if(!isNaN(v)&&(y=this.crossCheckHorizontal(Math.floor(y),Math.floor(v),s[2],m),!isNaN(y)&&(!f||this.crossCheckDiagonal(Math.floor(v),Math.floor(y),s[2],m)))){const I=m/7;let C=!1;const O=this.possibleCenters;for(let U=0,K=O.length;U<K;U++){const ee=O[U];if(ee.aboutEquals(I,v,y)){O[U]=ee.combineEstimate(v,y,I),C=!0;break}}if(!C){const U=new zi(y,v,I);O.push(U),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(U)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const u of this.possibleCenters)if(u.getCount()>=Nn.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,l=0;const u=this.possibleCenters.length;for(const y of this.possibleCenters)y.getCount()>=Nn.CENTER_QUORUM&&(s++,l+=y.getEstimatedModuleSize());if(s<3)return!1;const f=l/u;let m=0;for(const y of this.possibleCenters)m+=Math.abs(y.getEstimatedModuleSize()-f);return m<=.05*l}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new re;const l=this.possibleCenters;let u;if(s>3){let f=0,m=0;for(const I of this.possibleCenters){const C=I.getEstimatedModuleSize();f+=C,m+=C*C}u=f/s;let y=Math.sqrt(m/s-u*u);l.sort((I,C)=>{const O=Math.abs(C.getEstimatedModuleSize()-u),U=Math.abs(I.getEstimatedModuleSize()-u);return O<U?-1:O>U?1:0});const v=Math.max(.2*u,y);for(let I=0;I<l.length&&l.length>3;I++){const C=l[I];Math.abs(C.getEstimatedModuleSize()-u)>v&&(l.splice(I,1),I--)}}if(l.length>3){let f=0;for(const m of l)f+=m.getEstimatedModuleSize();u=f/l.length,l.sort((m,y)=>{if(y.getCount()===m.getCount()){const v=Math.abs(y.getEstimatedModuleSize()-u),I=Math.abs(m.getEstimatedModuleSize()-u);return v<I?1:v>I?-1:0}else return y.getCount()-m.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Nn.CENTER_QUORUM=2,Nn.MIN_SKIP=3,Nn.MAX_MODULES=57;class ti{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(le.NEED_RESULT_POINT_CALLBACK);const u=new Nn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(u)}processFinderPatternInfo(s){const l=s.getTopLeft(),u=s.getTopRight(),f=s.getBottomLeft(),m=this.calculateModuleSize(l,u,f);if(m<1)throw new re("No pattern found in proccess finder.");const y=ti.computeDimension(l,u,f,m),v=$e.getProvisionalVersionForDimension(y),I=v.getDimensionForVersion()-7;let C=null;if(v.getAlignmentPatternCenters().length>0){const ee=u.getX()-l.getX()+f.getX(),ae=u.getY()-l.getY()+f.getY(),ue=1-3/I,fe=Math.floor(l.getX()+ue*(ee-l.getX())),Ee=Math.floor(l.getY()+ue*(ae-l.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{C=this.findAlignmentInRegion(m,fe,Ee,Fe);break}catch(je){if(!(je instanceof re))throw je}}const O=ti.createTransform(l,u,f,C,y),U=ti.sampleGrid(this.image,O,y);let K;return C===null?K=[f,l,u]:K=[f,l,u,C],new Kn(U,K)}static createTransform(s,l,u,f,m){const y=m-3.5;let v,I,C,O;return f!==null?(v=f.getX(),I=f.getY(),C=y-3,O=C):(v=l.getX()-s.getX()+u.getX(),I=l.getY()-s.getY()+u.getY(),C=y,O=y),Wt.quadrilateralToQuadrilateral(3.5,3.5,y,3.5,C,O,3.5,y,s.getX(),s.getY(),l.getX(),l.getY(),v,I,u.getX(),u.getY())}static sampleGrid(s,l,u){return _r.getInstance().sampleGridWithTransform(s,u,u,l)}static computeDimension(s,l,u,f){const m=mt.round(Xe.distance(s,l)/f),y=mt.round(Xe.distance(s,u)/f);let v=Math.floor((m+y)/2)+7;switch(v&3){case 0:v++;break;case 2:v--;break;case 3:throw new re("Dimensions could be not found.")}return v}calculateModuleSize(s,l,u){return(this.calculateModuleSizeOneWay(s,l)+this.calculateModuleSizeOneWay(s,u))/2}calculateModuleSizeOneWay(s,l){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(l.getX()),Math.floor(l.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(u)?f/7:isNaN(f)?u/7:(u+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,l,u,f){let m=this.sizeOfBlackWhiteBlackRun(s,l,u,f),y=1,v=s-(u-s);v<0?(y=s/(s-v),v=0):v>=this.image.getWidth()&&(y=(this.image.getWidth()-1-s)/(v-s),v=this.image.getWidth()-1);let I=Math.floor(l-(f-l)*y);return y=1,I<0?(y=l/(l-I),I=0):I>=this.image.getHeight()&&(y=(this.image.getHeight()-1-l)/(I-l),I=this.image.getHeight()-1),v=Math.floor(s+(v-s)*y),m+=this.sizeOfBlackWhiteBlackRun(s,l,v,I),m-1}sizeOfBlackWhiteBlackRun(s,l,u,f){const m=Math.abs(f-l)>Math.abs(u-s);if(m){let ee=s;s=l,l=ee,ee=u,u=f,f=ee}const y=Math.abs(u-s),v=Math.abs(f-l);let I=-y/2;const C=s<u?1:-1,O=l<f?1:-1;let U=0;const K=u+C;for(let ee=s,ae=l;ee!==K;ee+=C){const ue=m?ae:ee,fe=m?ee:ae;if(U===1===this.image.get(ue,fe)){if(U===2)return mt.distance(ee,ae,s,l);U++}if(I+=v,I>0){if(ae===f)break;ae+=O,I-=y}}return U===2?mt.distance(u+C,f,s,l):NaN}findAlignmentInRegion(s,l,u,f){const m=Math.floor(f*s),y=Math.max(0,l-m),v=Math.min(this.image.getWidth()-1,l+m);if(v-y<s*3)throw new re("Alignment top exceeds estimated module size.");const I=Math.max(0,u-m),C=Math.min(this.image.getHeight()-1,u+m);if(C-I<s*3)throw new re("Alignment bottom exceeds estimated module size.");return new dr(this.image,y,I,v-y,C-I,s,this.resultPointCallback).find()}}class $r{constructor(){this.decoder=new Zl}getDecoder(){return this.decoder}decode(s,l){let u,f;if(l!=null&&l.get(le.PURE_BARCODE)!==void 0){const I=$r.extractPureBits(s.getBlackMatrix());u=this.decoder.decodeBitMatrix(I,l),f=$r.NO_POINTS}else{const I=new ti(s.getBlackMatrix()).detect(l);u=this.decoder.decodeBitMatrix(I.getBits(),l),f=I.getPoints()}u.getOther()instanceof Ql&&u.getOther().applyMirroredCorrection(f);const m=new Le(u.getText(),u.getRawBytes(),void 0,f,Re.QR_CODE,void 0),y=u.getByteSegments();y!==null&&m.putMetadata(Ge.BYTE_SEGMENTS,y);const v=u.getECLevel();return v!==null&&m.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v),u.hasStructuredAppend()&&(m.putMetadata(Ge.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),m.putMetadata(Ge.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),m}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l===null||u===null)throw new re;const f=this.moduleSize(l,s);let m=l[1],y=u[1],v=l[0],I=u[0];if(v>=I||m>=y)throw new re;if(y-m!==I-v&&(I=v+(y-m),I>=s.getWidth()))throw new re;const C=Math.round((I-v+1)/f),O=Math.round((y-m+1)/f);if(C<=0||O<=0)throw new re;if(O!==C)throw new re;const U=Math.floor(f/2);m+=U,v+=U;const K=v+Math.floor((C-1)*f)-I;if(K>0){if(K>U)throw new re;v-=K}const ee=m+Math.floor((O-1)*f)-y;if(ee>0){if(ee>U)throw new re;m-=ee}const ae=new pe(C,O);for(let ue=0;ue<O;ue++){const fe=m+Math.floor(ue*f);for(let Ee=0;Ee<C;Ee++)s.get(v+Math.floor(Ee*f),fe)&&ae.set(Ee,ue)}return ae}static moduleSize(s,l){const u=l.getHeight(),f=l.getWidth();let m=s[0],y=s[1],v=!0,I=0;for(;m<f&&y<u;){if(v!==l.get(m,y)){if(++I===5)break;v=!v}m++,y++}if(m===f||y===u)throw new re;return(m-s[0])/7}}$r.NO_POINTS=new Array;class xt{PDF417Common(){}static getBitCountSum(s){return mt.sum(s)}static toIntArray(s){if(s==null||!s.length)return xt.EMPTY_INT_ARRAY;const l=new Int32Array(s.length);let u=0;for(const f of s)l[u++]=f;return l}static getCodeword(s){const l=z.binarySearch(xt.SYMBOL_TABLE,s&262143);return l<0?-1:(xt.CODEWORD_TABLE[l]-1)%xt.NUMBER_OF_CODEWORDS}}xt.NUMBER_OF_CODEWORDS=929,xt.MAX_CODEWORDS_IN_BARCODE=xt.NUMBER_OF_CODEWORDS-1,xt.MIN_ROWS_IN_BARCODE=3,xt.MAX_ROWS_IN_BARCODE=90,xt.MODULES_IN_CODEWORD=17,xt.MODULES_IN_STOP_PATTERN=18,xt.BARS_IN_MODULE=8,xt.EMPTY_INT_ARRAY=new Int32Array([]),xt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class cu{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class gt{static detectMultiple(s,l,u){let f=s.getBlackMatrix(),m=gt.detect(u,f);return m.length||(f=f.clone(),f.rotate180(),m=gt.detect(u,f)),new cu(f,m)}static detect(s,l){const u=new Array;let f=0,m=0,y=!1;for(;f<l.getHeight();){const v=gt.findVertices(l,f,m);if(v[0]==null&&v[3]==null){if(!y)break;y=!1,m=0;for(const I of u)I[1]!=null&&(f=Math.trunc(Math.max(f,I[1].getY()))),I[3]!=null&&(f=Math.max(f,Math.trunc(I[3].getY())));f+=gt.ROW_STEP;continue}if(y=!0,u.push(v),!s)break;v[2]!=null?(m=Math.trunc(v[2].getX()),f=Math.trunc(v[2].getY())):(m=Math.trunc(v[4].getX()),f=Math.trunc(v[4].getY()))}return u}static findVertices(s,l,u){const f=s.getHeight(),m=s.getWidth(),y=new Array(8);return gt.copyToResult(y,gt.findRowsWithPattern(s,f,m,l,u,gt.START_PATTERN),gt.INDEXES_START_PATTERN),y[4]!=null&&(u=Math.trunc(y[4].getX()),l=Math.trunc(y[4].getY())),gt.copyToResult(y,gt.findRowsWithPattern(s,f,m,l,u,gt.STOP_PATTERN),gt.INDEXES_STOP_PATTERN),y}static copyToResult(s,l,u){for(let f=0;f<u.length;f++)s[u[f]]=l[f]}static findRowsWithPattern(s,l,u,f,m,y){const v=new Array(4);let I=!1;const C=new Int32Array(y.length);for(;f<l;f+=gt.ROW_STEP){let U=gt.findGuardPattern(s,m,f,u,!1,y,C);if(U!=null){for(;f>0;){const K=gt.findGuardPattern(s,m,--f,u,!1,y,C);if(K!=null)U=K;else{f++;break}}v[0]=new Xe(U[0],f),v[1]=new Xe(U[1],f),I=!0;break}}let O=f+1;if(I){let U=0,K=Int32Array.from([Math.trunc(v[0].getX()),Math.trunc(v[1].getX())]);for(;O<l;O++){const ee=gt.findGuardPattern(s,K[0],O,u,!1,y,C);if(ee!=null&&Math.abs(K[0]-ee[0])<gt.MAX_PATTERN_DRIFT&&Math.abs(K[1]-ee[1])<gt.MAX_PATTERN_DRIFT)K=ee,U=0;else{if(U>gt.SKIPPED_ROW_COUNT_MAX)break;U++}}O-=U+1,v[2]=new Xe(K[0],O),v[3]=new Xe(K[1],O)}return O-f<gt.BARCODE_MIN_HEIGHT&&z.fill(v,null),v}static findGuardPattern(s,l,u,f,m,y,v){z.fillWithin(v,0,v.length,0);let I=l,C=0;for(;s.get(I,u)&&I>0&&C++<gt.MAX_PIXEL_DRIFT;)I--;let O=I,U=0,K=y.length;for(let ee=m;O<f;O++)if(s.get(O,u)!==ee)v[U]++;else{if(U===K-1){if(gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return new Int32Array([I,O]);I+=v[0]+v[1],D.arraycopy(v,2,v,0,U-1),v[U-1]=0,v[U]=0,U--}else U++;v[U]=1,ee=!ee}return U===K-1&&gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE?new Int32Array([I,O-1]):null}static patternMatchVariance(s,l,u){let f=s.length,m=0,y=0;for(let C=0;C<f;C++)m+=s[C],y+=l[C];if(m<y)return 1/0;let v=m/y;u*=v;let I=0;for(let C=0;C<f;C++){let O=s[C],U=l[C]*v,K=O>U?O-U:U-O;if(K>u)return 1/0;I+=K}return I/m}}gt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),gt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),gt.MAX_AVG_VARIANCE=.42,gt.MAX_INDIVIDUAL_VARIANCE=.8,gt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),gt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),gt.MAX_PIXEL_DRIFT=3,gt.MAX_PATTERN_DRIFT=5,gt.SKIPPED_ROW_COUNT_MAX=25,gt.ROW_STEP=5,gt.BARCODE_MIN_HEIGHT=10;class Ir{constructor(s,l){if(l.length===0)throw new E;this.field=s;let u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let m of this.coefficients)f=this.field.add(f,m);return f}let l=this.coefficients[0],u=this.coefficients.length;for(let f=1;f<u;f++)l=this.field.add(this.field.multiply(s,l),this.coefficients[f]);return l}add(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){let y=l;l=u,u=y}let f=new Int32Array(u.length),m=u.length-l.length;D.arraycopy(u,0,f,0,m);for(let y=m;y<u.length;y++)f[y]=this.field.add(l[y-m],u[y]);return new Ir(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Ir?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Ir(this.field,new Int32Array([0]));let l=this.coefficients,u=l.length,f=s.coefficients,m=f.length,y=new Int32Array(u+m-1);for(let v=0;v<u;v++){let I=l[v];for(let C=0;C<m;C++)y[v+C]=this.field.add(y[v+C],this.field.multiply(I,f[C]))}return new Ir(this.field,y)}negative(){let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.subtract(0,this.coefficients[u]);return new Ir(this.field,l)}multiplyScalar(s){if(s===0)return new Ir(this.field,new Int32Array([0]));if(s===1)return this;let l=this.coefficients.length,u=new Int32Array(l);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new Ir(this.field,u)}multiplyByMonomial(s,l){if(s<0)throw new E;if(l===0)return new Ir(this.field,new Int32Array([0]));let u=this.coefficients.length,f=new Int32Array(u+s);for(let m=0;m<u;m++)f[m]=this.field.multiply(this.coefficients[m],l);return new Ir(this.field,f)}toString(){let s=new q;for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);u!==0&&(u<0?(s.append(" - "),u=-u):s.length()>0&&s.append(" + "),(l===0||u!==1)&&s.append(u),l!==0&&(l===1?s.append("x"):(s.append("x^"),s.append(l))))}return s.toString()}}class uu{add(s,l){return(s+l)%this.modulus}subtract(s,l){return(this.modulus+s-l)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}inverse(s){if(s===0)throw new Et;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class ps extends uu{constructor(s,l){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let u=1;for(let f=0;f<s;f++)this.expTable[f]=u,u=u*l%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new Ir(this,new Int32Array([0])),this.one=new Ir(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new E;if(l===0)return this.zero;let u=new Int32Array(s+1);return u[0]=l,new Ir(this,u)}}ps.PDF417_GF=new ps(xt.NUMBER_OF_CODEWORDS,3);class bo{constructor(){this.field=ps.PDF417_GF}decode(s,l,u){let f=new Ir(this.field,s),m=new Int32Array(l),y=!1;for(let ae=l;ae>0;ae--){let ue=f.evaluateAt(this.field.exp(ae));m[l-ae]=ue,ue!==0&&(y=!0)}if(!y)return 0;let v=this.field.getOne();if(u!=null)for(const ae of u){let ue=this.field.exp(s.length-1-ae),fe=new Ir(this.field,new Int32Array([this.field.subtract(0,ue),1]));v=v.multiply(fe)}let I=new Ir(this.field,m),C=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),I,l),O=C[0],U=C[1],K=this.findErrorLocations(O),ee=this.findErrorMagnitudes(U,O,K);for(let ae=0;ae<K.length;ae++){let ue=s.length-1-this.field.log(K[ae]);if(ue<0)throw R.getChecksumInstance();s[ue]=this.field.subtract(s[ue],ee[ae])}return K.length}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){let K=s;s=l,l=K}let f=s,m=l,y=this.field.getZero(),v=this.field.getOne();for(;m.getDegree()>=Math.round(u/2);){let K=f,ee=y;if(f=m,y=v,f.isZero())throw R.getChecksumInstance();m=K;let ae=this.field.getZero(),ue=f.getCoefficient(f.getDegree()),fe=this.field.inverse(ue);for(;m.getDegree()>=f.getDegree()&&!m.isZero();){let Ee=m.getDegree()-f.getDegree(),Fe=this.field.multiply(m.getCoefficient(m.getDegree()),fe);ae=ae.add(this.field.buildMonomial(Ee,Fe)),m=m.subtract(f.multiplyByMonomial(Ee,Fe))}v=ae.multiply(y).subtract(ee).negative()}let I=v.getCoefficient(0);if(I===0)throw R.getChecksumInstance();let C=this.field.inverse(I),O=v.multiply(C),U=m.multiply(C);return[O,U]}findErrorLocations(s){let l=s.getDegree(),u=new Int32Array(l),f=0;for(let m=1;m<this.field.getSize()&&f<l;m++)s.evaluateAt(m)===0&&(u[f]=this.field.inverse(m),f++);if(f!==l)throw R.getChecksumInstance();return u}findErrorMagnitudes(s,l,u){let f=l.getDegree(),m=new Int32Array(f);for(let C=1;C<=f;C++)m[f-C]=this.field.multiply(C,l.getCoefficient(C));let y=new Ir(this.field,m),v=u.length,I=new Int32Array(v);for(let C=0;C<v;C++){let O=this.field.inverse(u[C]),U=this.field.subtract(0,s.evaluateAt(O)),K=this.field.inverse(y.evaluateAt(O));I[C]=this.field.multiply(U,K)}return I}}class Ms{constructor(s,l,u,f,m){s instanceof Ms?this.constructor_2(s):this.constructor_1(s,l,u,f,m)}constructor_1(s,l,u,f,m){const y=l==null||u==null,v=f==null||m==null;if(y&&v)throw new re;y?(l=new Xe(0,f.getY()),u=new Xe(0,m.getY())):v&&(f=new Xe(s.getWidth()-1,l.getY()),m=new Xe(s.getWidth()-1,u.getY())),this.image=s,this.topLeft=l,this.bottomLeft=u,this.topRight=f,this.bottomRight=m,this.minX=Math.trunc(Math.min(l.getX(),u.getX())),this.maxX=Math.trunc(Math.max(f.getX(),m.getX())),this.minY=Math.trunc(Math.min(l.getY(),f.getY())),this.maxY=Math.trunc(Math.max(u.getY(),m.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,l){return s==null?l:l==null?s:new Ms(s.image,s.topLeft,s.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(s,l,u){let f=this.topLeft,m=this.bottomLeft,y=this.topRight,v=this.bottomRight;if(s>0){let I=u?this.topLeft:this.topRight,C=Math.trunc(I.getY()-s);C<0&&(C=0);let O=new Xe(I.getX(),C);u?f=O:y=O}if(l>0){let I=u?this.bottomLeft:this.bottomRight,C=Math.trunc(I.getY()+l);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let O=new Xe(I.getX(),C);u?m=O:v=O}return new Ms(this.image,f,m,y,v)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class gs{constructor(s,l,u,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=l,this.rowCountLowerPart=u,this.rowCount=l+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ci{constructor(){this.buffer=""}static form(s,l){let u=-1;function f(y,v,I,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let K=O?parseInt(O.substr(1)):void 0,ee;switch(U){case"s":ee=l[u];break;case"c":ee=l[u][0];break;case"f":ee=parseFloat(l[u]).toFixed(y);break;case"p":ee=parseFloat(l[u]).toPrecision(y);break;case"e":ee=parseFloat(l[u]).toExponential(y);break;case"x":ee=parseInt(l[u]).toString(K||16);break;case"d":ee=parseFloat(parseInt(l[u],K||10).toPrecision(y)).toFixed(0);break}ee=typeof ee=="object"?JSON.stringify(ee):(+ee).toString(K);let ae=parseInt(I),ue=I&&I[0]+""=="0"?"0":" ";for(;ee.length<ae;)ee=v!==void 0?ee+ue:ue+ee;return ee}let m=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(m,f)}format(s,...l){this.buffer+=ci.form(s,l)}toString(){return this.buffer}}class Wi{constructor(s){this.boundingBox=new Ms(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let l=this.getCodeword(s);if(l!=null)return l;for(let u=1;u<Wi.MAX_NEARBY_DISTANCE;u++){let f=this.imageRowToCodewordIndex(s)-u;if(f>=0&&(l=this.codewords[f],l!=null)||(f=this.imageRowToCodewordIndex(s)+u,f<this.codewords.length&&(l=this.codewords[f],l!=null)))return l}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,l){this.codewords[this.imageRowToCodewordIndex(s)]=l}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new ci;let l=0;for(const u of this.codewords){if(u==null){s.format("%3d:    |   %n",l++);continue}s.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return s.toString()}}Wi.MAX_NEARBY_DISTANCE=5;class Ji{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let l=this.values.get(s);l==null&&(l=0),l++,this.values.set(s,l)}getValue(){let s=-1,l=new Array;for(const[u,f]of this.values.entries()){const m={getKey:()=>u,getValue:()=>f};m.getValue()>s?(s=m.getValue(),l=[],l.push(m.getKey())):m.getValue()===s&&l.push(m.getKey())}return xt.toIntArray(l)}getConfidence(s){return this.values.get(s)}}class kn extends Wi{constructor(s,l){super(s),this._isLeft=l}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,s);let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),m=this._isLeft?u.getBottomLeft():u.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),I=-1,C=1,O=0;for(let U=y;U<v;U++){if(l[U]==null)continue;let K=l[U],ee=K.getRowNumber()-I;if(ee===0)O++;else if(ee===1)C=Math.max(C,O),O=1,I=K.getRowNumber();else if(ee<0||K.getRowNumber()>=s.getRowCount()||ee>U)l[U]=null;else{let ae;C>2?ae=(C-2)*ee:ae=ee;let ue=ae>=U;for(let fe=1;fe<=ae&&!ue;fe++)ue=l[U-fe]!=null;ue?l[U]=null:(I=K.getRowNumber(),O=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let l=new Int32Array(s.getRowCount());for(let u of this.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=l.length)continue;l[f]++}return l}adjustIncompleteIndicatorColumnRowNumbers(s){let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.getCodewords(),I=-1;for(let C=m;C<y;C++){if(v[C]==null)continue;let O=v[C];O.setRowNumberAsRowIndicatorColumn();let U=O.getRowNumber()-I;U===0||(U===1?I=O.getRowNumber():O.getRowNumber()>=s.getRowCount()?v[C]=null:I=O.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),l=new Ji,u=new Ji,f=new Ji,m=new Ji;for(let v of s){if(v==null)continue;v.setRowNumberAsRowIndicatorColumn();let I=v.getValue()%30,C=v.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:u.setValue(I*3+1);break;case 1:m.setValue(I/3),f.setValue(I%3);break;case 2:l.setValue(I+1);break}}if(l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||m.getValue().length===0||l.getValue()[0]<1||u.getValue()[0]+f.getValue()[0]<xt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+f.getValue()[0]>xt.MAX_ROWS_IN_BARCODE)return null;let y=new gs(l.getValue()[0],u.getValue()[0],f.getValue()[0],m.getValue()[0]);return this.removeIncorrectCodewords(s,y),y}removeIncorrectCodewords(s,l){for(let u=0;u<s.length;u++){let f=s[u];if(s[u]==null)continue;let m=f.getValue()%30,y=f.getRowNumber();if(y>l.getRowCount()){s[u]=null;continue}switch(this._isLeft||(y+=2),y%3){case 0:m*3+1!==l.getRowCountUpperPart()&&(s[u]=null);break;case 1:(Math.trunc(m/3)!==l.getErrorCorrectionLevel()||m%3!==l.getRowCountLowerPart())&&(s[u]=null);break;case 2:m+1!==l.getColumnCount()&&(s[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class sa{constructor(s,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=xt.MAX_CODEWORDS_IN_BARCODE,l;do l=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let u=this.detectionResultColumns[l].getCodewords();for(let f=0;f<u.length;f++)u[f]!=null&&(u[f].hasValidRowNumber()||this.adjustRowNumbers(l,f,u))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<s.length;u++)if(s[u]!=null&&l[u]!=null&&s[u].getRowNumber()===l[u].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let m=this.detectionResultColumns[f].getCodewords()[u];m!=null&&(m.setRowNumber(s[u].getRowNumber()),m.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),m=0;for(let y=this.barcodeColumnCount+1;y>0&&m<this.ADJUST_ROW_NUMBER_SKIP;y--){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(m=sa.adjustRowNumberIfValid(f,m,v),v.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,l=this.detectionResultColumns[0].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),m=0;for(let y=1;y<this.barcodeColumnCount+1&&m<this.ADJUST_ROW_NUMBER_SKIP;y++){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(m=sa.adjustRowNumberIfValid(f,m,v),v.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,l,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(s)?(u.setRowNumber(s),l=0):++l),l}adjustRowNumbers(s,l,u){if(!this.detectionResultColumns[s-1])return;let f=u[l],m=this.detectionResultColumns[s-1].getCodewords(),y=m;this.detectionResultColumns[s+1]!=null&&(y=this.detectionResultColumns[s+1].getCodewords());let v=new Array(14);v[2]=m[l],v[3]=y[l],l>0&&(v[0]=u[l-1],v[4]=m[l-1],v[5]=y[l-1]),l>1&&(v[8]=u[l-2],v[10]=m[l-2],v[11]=y[l-2]),l<u.length-1&&(v[1]=u[l+1],v[6]=m[l+1],v[7]=y[l+1]),l<u.length-2&&(v[9]=u[l+2],v[12]=m[l+2],v[13]=y[l+2]);for(let I of v)if(sa.adjustRowNumber(f,I))return}static adjustRowNumber(s,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===s.getBucket()?(s.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,l){this.detectionResultColumns[s]=l}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new ci;for(let u=0;u<s.getCodewords().length;u++){l.format("CW %3d:",u);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){l.format("    |   ");continue}let m=this.detectionResultColumns[f].getCodewords()[u];if(m==null){l.format("    |   ");continue}l.format(" %3d|%3d",m.getRowNumber(),m.getValue())}l.format("%n")}return l.toString()}}class Js{constructor(s,l,u,f){this.rowNumber=Js.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Js.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Js.BARCODE_ROW_UNKNOWN=-1;class hr{static initialize(){for(let s=0;s<xt.SYMBOL_TABLE.length;s++){let l=xt.SYMBOL_TABLE[s],u=l&1;for(let f=0;f<xt.BARS_IN_MODULE;f++){let m=0;for(;(l&1)===u;)m+=1,l>>=1;u=l&1,hr.RATIOS_TABLE[s]||(hr.RATIOS_TABLE[s]=new Array(xt.BARS_IN_MODULE)),hr.RATIOS_TABLE[s][xt.BARS_IN_MODULE-f-1]=Math.fround(m/xt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let l=hr.getDecodedCodewordValue(hr.sampleBitCounts(s));return l!==-1?l:hr.getClosestDecodedValue(s)}static sampleBitCounts(s){let l=mt.sum(s),u=new Int32Array(xt.BARS_IN_MODULE),f=0,m=0;for(let y=0;y<xt.MODULES_IN_CODEWORD;y++){let v=l/(2*xt.MODULES_IN_CODEWORD)+y*l/xt.MODULES_IN_CODEWORD;m+s[f]<=v&&(m+=s[f],f++),u[f]++}return u}static getDecodedCodewordValue(s){let l=hr.getBitValue(s);return xt.getCodeword(l)===-1?-1:l}static getBitValue(s){let l=0;for(let u=0;u<s.length;u++)for(let f=0;f<s[u];f++)l=l<<1|(u%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(s){let l=mt.sum(s),u=new Array(xt.BARS_IN_MODULE);if(l>1)for(let y=0;y<u.length;y++)u[y]=Math.fround(s[y]/l);let f=xi.MAX_VALUE,m=-1;this.bSymbolTableReady||hr.initialize();for(let y=0;y<hr.RATIOS_TABLE.length;y++){let v=0,I=hr.RATIOS_TABLE[y];for(let C=0;C<xt.BARS_IN_MODULE;C++){let O=Math.fround(I[C]-u[C]);if(v+=Math.fround(O*O),v>=f)break}v<f&&(f=v,m=xt.SYMBOL_TABLE[y])}return m}}hr.bSymbolTableReady=!1,hr.RATIOS_TABLE=new Array(xt.SYMBOL_TABLE.length).map(j=>new Array(xt.BARS_IN_MODULE));class oa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class $a{static parseLong(s,l=void 0){return parseInt(s,l)}}class Ai extends g{}Ai.kind="NullPointerException";class qa{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,l,u){if(s==null)throw new Ai;if(l<0||l>s.length||u<0||l+u>s.length||l+u<0)throw new L;if(u===0)return;for(let f=0;f<u;f++)this.write(s[l+f])}flush(){}close(){}}class Ii extends g{}class Jl extends qa{constructor(s=32){if(super(),this.count=0,s<0)throw new E("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let u=this.buf.length<<1;if(u-s<0&&(u=s),u<0){if(s<0)throw new Ii;u=W.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,u)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,l,u){if(l<0||l>s.length||u<0||l+u-s.length>0)throw new L;this.ensureCapacity(this.count+u),D.arraycopy(s,l,this.buf,this.count,u),this.count+=u}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var en;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(en||(en={}));function ys(){if(typeof window<"u")return window.BigInt||null;if(typeof Y0<"u")return Y0.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ao;function Dn(j){if(typeof Ao>"u"&&(Ao=ys()),Ao===null)throw new Error("BigInt is not supported!");return Ao(j)}function xs(){let j=[];j[0]=Dn(1);let s=Dn(900);j[1]=s;for(let l=2;l<16;l++)j[l]=j[l-1]*s;return j}class _e{static decode(s,l){let u=new q(""),f=G.ISO8859_1;u.enableDecoding(f);let m=1,y=s[m++],v=new oa;for(;m<s[0];){switch(y){case _e.TEXT_COMPACTION_MODE_LATCH:m=_e.textCompaction(s,m,u);break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:m=_e.byteCompaction(y,s,f,m,u);break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[m++]);break;case _e.NUMERIC_COMPACTION_MODE_LATCH:m=_e.numericCompaction(s,m,u);break;case _e.ECI_CHARSET:G.getCharacterSetECIByValue(s[m++]);break;case _e.ECI_GENERAL_PURPOSE:m+=2;break;case _e.ECI_USER_DEFINED:m++;break;case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:m=_e.decodeMacroBlock(s,m,v);break;case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:throw new F;default:m--,m=_e.textCompaction(s,m,u);break}if(m<s.length)y=s[m++];else throw F.getFormatInstance()}if(u.length()===0)throw F.getFormatInstance();let I=new at(null,u.toString(),null,l);return I.setOther(v),I}static decodeMacroBlock(s,l,u){if(l+_e.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw F.getFormatInstance();let f=new Int32Array(_e.NUMBER_OF_SEQUENCE_CODEWORDS);for(let v=0;v<_e.NUMBER_OF_SEQUENCE_CODEWORDS;v++,l++)f[v]=s[l];u.setSegmentIndex(W.parseInt(_e.decodeBase900toBase10(f,_e.NUMBER_OF_SEQUENCE_CODEWORDS)));let m=new q;l=_e.textCompaction(s,l,m),u.setFileId(m.toString());let y=-1;for(s[l]===_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(y=l+1);l<s[0];)switch(s[l]){case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,s[l]){case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let v=new q;l=_e.textCompaction(s,l+1,v),u.setFileName(v.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let I=new q;l=_e.textCompaction(s,l+1,I),u.setSender(I.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new q;l=_e.textCompaction(s,l+1,C),u.setAddressee(C.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new q;l=_e.numericCompaction(s,l+1,O),u.setSegmentCount(W.parseInt(O.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let U=new q;l=_e.numericCompaction(s,l+1,U),u.setTimestamp($a.parseLong(U.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let K=new q;l=_e.numericCompaction(s,l+1,K),u.setChecksum(W.parseInt(K.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ee=new q;l=_e.numericCompaction(s,l+1,ee),u.setFileSize($a.parseLong(ee.toString()));break;default:throw F.getFormatInstance()}break;case _e.MACRO_PDF417_TERMINATOR:l++,u.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(y!==-1){let v=l-y;u.isLastSegment()&&v--,u.setOptionalData(z.copyOfRange(s,y,y+v))}return l}static textCompaction(s,l,u){let f=new Int32Array((s[0]-l)*2),m=new Int32Array((s[0]-l)*2),y=0,v=!1;for(;l<s[0]&&!v;){let I=s[l++];if(I<_e.TEXT_COMPACTION_MODE_LATCH)f[y]=I/30,f[y+1]=I%30,y+=2;else switch(I){case _e.TEXT_COMPACTION_MODE_LATCH:f[y++]=_e.TEXT_COMPACTION_MODE_LATCH;break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,v=!0;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[y]=_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,I=s[l++],m[y]=I,y++;break}}return _e.decodeTextCompaction(f,m,y,u),l}static decodeTextCompaction(s,l,u,f){let m=en.ALPHA,y=en.ALPHA,v=0;for(;v<u;){let I=s[v],C="";switch(m){case en.ALPHA:if(I<26)C=String.fromCharCode(65+I);else switch(I){case 26:C=" ";break;case _e.LL:m=en.LOWER;break;case _e.ML:m=en.MIXED;break;case _e.PS:y=m,m=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:m=en.ALPHA;break}break;case en.LOWER:if(I<26)C=String.fromCharCode(97+I);else switch(I){case 26:C=" ";break;case _e.AS:y=m,m=en.ALPHA_SHIFT;break;case _e.ML:m=en.MIXED;break;case _e.PS:y=m,m=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:m=en.ALPHA;break}break;case en.MIXED:if(I<_e.PL)C=_e.MIXED_CHARS[I];else switch(I){case _e.PL:m=en.PUNCT;break;case 26:C=" ";break;case _e.LL:m=en.LOWER;break;case _e.AL:m=en.ALPHA;break;case _e.PS:y=m,m=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:m=en.ALPHA;break}break;case en.PUNCT:if(I<_e.PAL)C=_e.PUNCT_CHARS[I];else switch(I){case _e.PAL:m=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:m=en.ALPHA;break}break;case en.ALPHA_SHIFT:if(m=y,I<26)C=String.fromCharCode(65+I);else switch(I){case 26:C=" ";break;case _e.TEXT_COMPACTION_MODE_LATCH:m=en.ALPHA;break}break;case en.PUNCT_SHIFT:if(m=y,I<_e.PAL)C=_e.PUNCT_CHARS[I];else switch(I){case _e.PAL:m=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:m=en.ALPHA;break}break}C!==""&&f.append(C),v++}}static byteCompaction(s,l,u,f,m){let y=new Jl,v=0,I=0,C=!1;switch(s){case _e.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),U=l[f++];for(;f<l[0]&&!C;)switch(O[v++]=U,I=900*I+U,U=l[f++],U){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break;default:if(v%5===0&&v>0){for(let K=0;K<6;++K)y.write(Number(Dn(I)>>Dn(8*(5-K))));I=0,v=0}break}f===l[0]&&U<_e.TEXT_COMPACTION_MODE_LATCH&&(O[v++]=U);for(let K=0;K<v;K++)y.write(O[K]);break;case _e.BYTE_COMPACTION_MODE_LATCH_6:for(;f<l[0]&&!C;){let K=l[f++];if(K<_e.TEXT_COMPACTION_MODE_LATCH)v++,I=900*I+K;else switch(K){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break}if(v%5===0&&v>0){for(let ee=0;ee<6;++ee)y.write(Number(Dn(I)>>Dn(8*(5-ee))));I=0,v=0}}break}return m.append(te.decode(y.toByteArray(),u)),f}static numericCompaction(s,l,u){let f=0,m=!1,y=new Int32Array(_e.MAX_NUMERIC_CODEWORDS);for(;l<s[0]&&!m;){let v=s[l++];if(l===s[0]&&(m=!0),v<_e.TEXT_COMPACTION_MODE_LATCH)y[f]=v,f++;else switch(v){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,m=!0;break}(f%_e.MAX_NUMERIC_CODEWORDS===0||v===_e.NUMERIC_COMPACTION_MODE_LATCH||m)&&f>0&&(u.append(_e.decodeBase900toBase10(y,f)),f=0)}return l}static decodeBase900toBase10(s,l){let u=Dn(0);for(let m=0;m<l;m++)u+=_e.EXP900[l-m-1]*Dn(s[m]);let f=u.toString();if(f.charAt(0)!=="1")throw new F;return f.substring(1)}}_e.TEXT_COMPACTION_MODE_LATCH=900,_e.BYTE_COMPACTION_MODE_LATCH=901,_e.NUMERIC_COMPACTION_MODE_LATCH=902,_e.BYTE_COMPACTION_MODE_LATCH_6=924,_e.ECI_USER_DEFINED=925,_e.ECI_GENERAL_PURPOSE=926,_e.ECI_CHARSET=927,_e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,_e.MACRO_PDF417_TERMINATOR=922,_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,_e.MAX_NUMERIC_CODEWORDS=15,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,_e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,_e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,_e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,_e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,_e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,_e.PL=25,_e.LL=27,_e.AS=27,_e.ML=28,_e.AL=28,_e.PS=29,_e.PAL=29,_e.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,_e.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",_e.EXP900=ys()?xs():[],_e.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(s,l,u,f,m,y,v){let I=new Ms(s,l,u,f,m),C=null,O=null,U;for(let ae=!0;;ae=!1){if(l!=null&&(C=_t.getRowIndicatorColumn(s,I,l,!0,y,v)),f!=null&&(O=_t.getRowIndicatorColumn(s,I,f,!1,y,v)),U=_t.merge(C,O),U==null)throw re.getNotFoundInstance();let ue=U.getBoundingBox();if(ae&&ue!=null&&(ue.getMinY()<I.getMinY()||ue.getMaxY()>I.getMaxY()))I=ue;else break}U.setBoundingBox(I);let K=U.getBarcodeColumnCount()+1;U.setDetectionResultColumn(0,C),U.setDetectionResultColumn(K,O);let ee=C!=null;for(let ae=1;ae<=K;ae++){let ue=ee?ae:K-ae;if(U.getDetectionResultColumn(ue)!==void 0)continue;let fe;ue===0||ue===K?fe=new kn(I,ue===0):fe=new Wi(I),U.setDetectionResultColumn(ue,fe);let Ee=-1,Fe=Ee;for(let je=I.getMinY();je<=I.getMaxY();je++){if(Ee=_t.getStartColumn(U,ue,je,ee),Ee<0||Ee>I.getMaxX()){if(Fe===-1)continue;Ee=Fe}let Oe=_t.detectCodeword(s,I.getMinX(),I.getMaxX(),ee,Ee,je,y,v);Oe!=null&&(fe.setCodeword(je,Oe),Fe=Ee,y=Math.min(y,Oe.getWidth()),v=Math.max(v,Oe.getWidth()))}}return _t.createDecoderResult(U)}static merge(s,l){if(s==null&&l==null)return null;let u=_t.getBarcodeMetadata(s,l);if(u==null)return null;let f=Ms.merge(_t.adjustBoundingBox(s),_t.adjustBoundingBox(l));return new sa(u,f)}static adjustBoundingBox(s){if(s==null)return null;let l=s.getRowHeights();if(l==null)return null;let u=_t.getMax(l),f=0;for(let v of l)if(f+=u-v,v>0)break;let m=s.getCodewords();for(let v=0;f>0&&m[v]==null;v++)f--;let y=0;for(let v=l.length-1;v>=0&&(y+=u-l[v],!(l[v]>0));v--);for(let v=m.length-1;y>0&&m[v]==null;v--)y--;return s.getBoundingBox().addMissingRows(f,y,s.isLeft())}static getMax(s){let l=-1;for(let u of s)l=Math.max(l,u);return l}static getBarcodeMetadata(s,l){let u;if(s==null||(u=s.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let f;return l==null||(f=l.getBarcodeMetadata())==null?u:u.getColumnCount()!==f.getColumnCount()&&u.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&u.getRowCount()!==f.getRowCount()?null:u}static getRowIndicatorColumn(s,l,u,f,m,y){let v=new kn(l,f);for(let I=0;I<2;I++){let C=I===0?1:-1,O=Math.trunc(Math.trunc(u.getX()));for(let U=Math.trunc(Math.trunc(u.getY()));U<=l.getMaxY()&&U>=l.getMinY();U+=C){let K=_t.detectCodeword(s,0,s.getWidth(),f,O,U,m,y);K!=null&&(v.setCodeword(U,K),f?O=K.getStartX():O=K.getEndX())}}return v}static adjustCodewordCount(s,l){let u=l[0][1],f=u.getValue(),m=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-_t.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(m<1||m>xt.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();u.setValue(m)}else f[0]!==m&&u.setValue(m)}static createDecoderResult(s){let l=_t.createBarcodeMatrix(s);_t.adjustCodewordCount(s,l);let u=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),m=[],y=new Array;for(let I=0;I<s.getBarcodeRowCount();I++)for(let C=0;C<s.getBarcodeColumnCount();C++){let O=l[I][C+1].getValue(),U=I*s.getBarcodeColumnCount()+C;O.length===0?u.push(U):O.length===1?f[U]=O[0]:(y.push(U),m.push(O))}let v=new Array(m.length);for(let I=0;I<v.length;I++)v[I]=m[I];return _t.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,xt.toIntArray(u),xt.toIntArray(y),v)}static createDecoderResultFromAmbiguousValues(s,l,u,f,m){let y=new Int32Array(f.length),v=100;for(;v-- >0;){for(let I=0;I<y.length;I++)l[f[I]]=m[I][y[I]];try{return _t.decodeCodewords(l,s,u)}catch(I){if(!(I instanceof R))throw I}if(y.length===0)throw R.getChecksumInstance();for(let I=0;I<y.length;I++)if(y[I]<m[I].length-1){y[I]++;break}else if(y[I]=0,I===y.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(s){let l=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<l.length;f++)for(let m=0;m<l[f].length;m++)l[f][m]=new Ji;let u=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let m of f.getCodewords())if(m!=null){let y=m.getRowNumber();if(y>=0){if(y>=l.length)continue;l[y][u].setValue(m.getValue())}}}u++}return l}static isValidBarcodeColumn(s,l){return l>=0&&l<=s.getBarcodeColumnCount()+1}static getStartColumn(s,l,u,f){let m=f?1:-1,y=null;if(_t.isValidBarcodeColumn(s,l-m)&&(y=s.getDetectionResultColumn(l-m).getCodeword(u)),y!=null)return f?y.getEndX():y.getStartX();if(y=s.getDetectionResultColumn(l).getCodewordNearby(u),y!=null)return f?y.getStartX():y.getEndX();if(_t.isValidBarcodeColumn(s,l-m)&&(y=s.getDetectionResultColumn(l-m).getCodewordNearby(u)),y!=null)return f?y.getEndX():y.getStartX();let v=0;for(;_t.isValidBarcodeColumn(s,l-m);){l-=m;for(let I of s.getDetectionResultColumn(l).getCodewords())if(I!=null)return(f?I.getEndX():I.getStartX())+m*v*(I.getEndX()-I.getStartX());v++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,l,u,f,m,y,v,I){m=_t.adjustCodewordStartColumn(s,l,u,f,m,y);let C=_t.getModuleBitCount(s,l,u,f,m,y);if(C==null)return null;let O,U=mt.sum(C);if(f)O=m+U;else{for(let ae=0;ae<C.length/2;ae++){let ue=C[ae];C[ae]=C[C.length-1-ae],C[C.length-1-ae]=ue}O=m,m=O-U}if(!_t.checkCodewordSkew(U,v,I))return null;let K=hr.getDecodedValue(C),ee=xt.getCodeword(K);return ee===-1?null:new Js(m,O,_t.getCodewordBucketNumber(K),ee)}static getModuleBitCount(s,l,u,f,m,y){let v=m,I=new Int32Array(8),C=0,O=f?1:-1,U=f;for(;(f?v<u:v>=l)&&C<I.length;)s.get(v,y)===U?(I[C]++,v+=O):(C++,U=!U);return C===I.length||v===(f?u:l)&&C===I.length-1?I:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,l,u,f,m,y){let v=m,I=f?-1:1;for(let C=0;C<2;C++){for(;(f?v>=l:v<u)&&f===s.get(v,y);){if(Math.abs(m-v)>_t.CODEWORD_SKEW_SIZE)return m;v+=I}I=-I,f=!f}return v}static checkCodewordSkew(s,l,u){return l-_t.CODEWORD_SKEW_SIZE<=s&&s<=u+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(s,l,u){if(s.length===0)throw F.getFormatInstance();let f=1<<l+1,m=_t.correctErrors(s,u,f);_t.verifyCodewordCount(s,f);let y=_e.decode(s,""+l);return y.setErrorsCorrected(m),y.setErasures(u.length),y}static correctErrors(s,l,u){if(l!=null&&l.length>u/2+_t.MAX_ERRORS||u<0||u>_t.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return _t.errorCorrection.decode(s,u,l)}static verifyCodewordCount(s,l){if(s.length<4)throw F.getFormatInstance();let u=s[0];if(u>s.length)throw F.getFormatInstance();if(u===0)if(l<s.length)s[0]=s.length-l;else throw F.getFormatInstance()}static getBitCountForCodeword(s){let l=new Int32Array(8),u=0,f=l.length-1;for(;!((s&1)!==u&&(u=s&1,f--,f<0));)l[f]++,s>>=1;return l}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let l=new ci;for(let u=0;u<s.length;u++){l.format("Row %2d: ",u);for(let f=0;f<s[u].length;f++){let m=s[u][f];m.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",m.getValue()[0],m.getConfidence(m.getValue()[0]))}l.format("%n")}return l.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new bo;class Tr{decode(s,l=null){let u=Tr.decode(s,l,!1);if(u==null||u.length===0||u[0]==null)throw re.getNotFoundInstance();return u[0]}decodeMultiple(s,l=null){try{return Tr.decode(s,l,!0)}catch(u){throw u instanceof F||u instanceof R?re.getNotFoundInstance():u}}static decode(s,l,u){const f=new Array,m=gt.detectMultiple(s,l,u);for(const y of m.getPoints()){const v=_t.decode(m.getBits(),y[4],y[5],y[6],y[7],Tr.getMinCodewordWidth(y),Tr.getMaxCodewordWidth(y)),I=new Le(v.getText(),v.getRawBytes(),void 0,y,Re.PDF_417);I.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v.getECLevel());const C=v.getOther();C!=null&&I.putMetadata(Ge.PDF417_EXTRA_METADATA,C),f.push(I)}return f.map(y=>y)}static getMaxWidth(s,l){return s==null||l==null?0:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMinWidth(s,l){return s==null||l==null?W.MAX_VALUE:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Tr.getMaxWidth(s[0],s[4]),Tr.getMaxWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.max(Tr.getMaxWidth(s[1],s[5]),Tr.getMaxWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Tr.getMinWidth(s[0],s[4]),Tr.getMinWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.min(Tr.getMinWidth(s[1],s[5]),Tr.getMinWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}reset(){}}class eo extends g{}eo.kind="ReaderException";class Ls{constructor(s,l){this.verbose=s===!0,l&&this.setHints(l)}decode(s,l){return l&&this.setHints(l),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const l=!r(s)&&s.get(le.TRY_HARDER)===!0,u=r(s)?null:s.get(le.POSSIBLE_FORMATS),f=new Array;if(!r(u)){const m=u.some(y=>y===Re.UPC_A||y===Re.UPC_E||y===Re.EAN_13||y===Re.EAN_8||y===Re.CODABAR||y===Re.CODE_39||y===Re.CODE_93||y===Re.CODE_128||y===Re.ITF||y===Re.RSS_14||y===Re.RSS_EXPANDED);m&&!l&&f.push(new Os(s,this.verbose)),u.includes(Re.QR_CODE)&&f.push(new $r),u.includes(Re.DATA_MATRIX)&&f.push(new Ei),u.includes(Re.AZTEC)&&f.push(new Bi),u.includes(Re.PDF_417)&&f.push(new Tr),m&&l&&f.push(new Os(s,this.verbose))}f.length===0&&(l||f.push(new Os(s,this.verbose)),f.push(new $r),f.push(new Ei),f.push(new Bi),f.push(new Tr),l&&f.push(new Os(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new eo("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(s,this.hints)}catch(u){if(u instanceof eo)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class Io extends Se{constructor(s=null,l=500){const u=new Ls;u.setHints(s),super(u,l)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class aa extends Se{constructor(s=500){super(new Tr,s)}}class Ka extends Se{constructor(s=500){super(new $r,s)}}var la;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(la||(la={}));var Zn=la;class To{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new ct(s,Int32Array.from([1])))}buildGenerator(s){const l=this.cachedGenerators;if(s>=l.length){let u=l[l.length-1];const f=this.field;for(let m=l.length;m<=s;m++){const y=u.multiply(new ct(f,Int32Array.from([1,f.exp(m-1+f.getGeneratorBase())])));l.push(y),u=y}}return l[s]}encode(s,l){if(l===0)throw new E("No error correction bytes");const u=s.length-l;if(u<=0)throw new E("No data bytes provided");const f=this.buildGenerator(l),m=new Int32Array(u);D.arraycopy(s,0,m,0,u);let y=new ct(this.field,m);y=y.multiplyByMonomial(l,1);const I=y.divide(f)[1].getCoefficients(),C=l-I.length;for(let O=0;O<C;O++)s[u+O]=0;D.arraycopy(I,0,s,u+C,I.length)}}class xn{constructor(){}static applyMaskPenaltyRule1(s){return xn.applyMaskPenaltyRule1Internal(s,!0)+xn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let l=0;const u=s.getArray(),f=s.getWidth(),m=s.getHeight();for(let y=0;y<m-1;y++){const v=u[y];for(let I=0;I<f-1;I++){const C=v[I];C===v[I+1]&&C===u[y+1][I]&&C===u[y+1][I+1]&&l++}}return xn.N2*l}static applyMaskPenaltyRule3(s){let l=0;const u=s.getArray(),f=s.getWidth(),m=s.getHeight();for(let y=0;y<m;y++)for(let v=0;v<f;v++){const I=u[y];v+6<f&&I[v]===1&&I[v+1]===0&&I[v+2]===1&&I[v+3]===1&&I[v+4]===1&&I[v+5]===0&&I[v+6]===1&&(xn.isWhiteHorizontal(I,v-4,v)||xn.isWhiteHorizontal(I,v+7,v+11))&&l++,y+6<m&&u[y][v]===1&&u[y+1][v]===0&&u[y+2][v]===1&&u[y+3][v]===1&&u[y+4][v]===1&&u[y+5][v]===0&&u[y+6][v]===1&&(xn.isWhiteVertical(u,v,y-4,y)||xn.isWhiteVertical(u,v,y+7,y+11))&&l++}return l*xn.N3}static isWhiteHorizontal(s,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let f=l;f<u;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,l,u,f){u=Math.max(u,0),f=Math.min(f,s.length);for(let m=u;m<f;m++)if(s[m][l]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let l=0;const u=s.getArray(),f=s.getWidth(),m=s.getHeight();for(let I=0;I<m;I++){const C=u[I];for(let O=0;O<f;O++)C[O]===1&&l++}const y=s.getHeight()*s.getWidth();return Math.floor(Math.abs(l*2-y)*10/y)*xn.N4}static getDataMaskBit(s,l,u){let f,m;switch(s){case 0:f=u+l&1;break;case 1:f=u&1;break;case 2:f=l%3;break;case 3:f=(u+l)%3;break;case 4:f=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:m=u*l,f=(m&1)+m%3;break;case 6:m=u*l,f=(m&1)+m%3&1;break;case 7:m=u*l,f=m%3+(u+l&1)&1;break;default:throw new E("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,l){let u=0;const f=l?s.getHeight():s.getWidth(),m=l?s.getWidth():s.getHeight(),y=s.getArray();for(let v=0;v<f;v++){let I=0,C=-1;for(let O=0;O<m;O++){const U=l?y[v][O]:y[O][v];U===C?I++:(I>=5&&(u+=xn.N1+(I-5)),I=1,C=U)}I>=5&&(u+=xn.N1+(I-5))}return u}}xn.N1=3,xn.N2=3,xn.N3=40,xn.N4=10;class ca{constructor(s,l){this.width=s,this.height=l;const u=new Array(l);for(let f=0;f!==l;f++)u[f]=new Uint8Array(s);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(s,l){return this.bytes[l][s]}getArray(){return this.bytes}setNumber(s,l,u){this.bytes[l][s]=u}setBoolean(s,l,u){this.bytes[l][s]=u?1:0}clear(s){for(const l of this.bytes)z.fill(l,s)}equals(s){if(!(s instanceof ca))return!1;const l=s;if(this.width!==l.width||this.height!==l.height)return!1;for(let u=0,f=this.height;u<f;++u){const m=this.bytes[u],y=l.bytes[u];for(let v=0,I=this.width;v<I;++v)if(m[v]!==y[v])return!1}return!0}toString(){const s=new q;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l];for(let m=0,y=this.width;m<y;++m)switch(f[m]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class ui{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new q;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<ui.NUM_MASK_PATTERNS}}ui.NUM_MASK_PATTERNS=8;class sn extends g{}sn.kind="WriterException";class ft{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,l,u,f,m){ft.clearMatrix(m),ft.embedBasicPatterns(u,m),ft.embedTypeInfo(l,f,m),ft.maybeEmbedVersionInfo(u,m),ft.embedDataBits(s,f,m)}static embedBasicPatterns(s,l){ft.embedPositionDetectionPatternsAndSeparators(l),ft.embedDarkDotAtLeftBottomCorner(l),ft.maybeEmbedPositionAdjustmentPatterns(s,l),ft.embedTimingPatterns(l)}static embedTypeInfo(s,l,u){const f=new Q;ft.makeTypeInfoBits(s,l,f);for(let m=0,y=f.getSize();m<y;++m){const v=f.get(f.getSize()-1-m),I=ft.TYPE_INFO_COORDINATES[m],C=I[0],O=I[1];if(u.setBoolean(C,O,v),m<8){const U=u.getWidth()-m-1;u.setBoolean(U,8,v)}else{const K=u.getHeight()-7+(m-8);u.setBoolean(8,K,v)}}}static maybeEmbedVersionInfo(s,l){if(s.getVersionNumber()<7)return;const u=new Q;ft.makeVersionInfoBits(s,u);let f=17;for(let m=0;m<6;++m)for(let y=0;y<3;++y){const v=u.get(f);f--,l.setBoolean(m,l.getHeight()-11+y,v),l.setBoolean(l.getHeight()-11+y,m,v)}}static embedDataBits(s,l,u){let f=0,m=-1,y=u.getWidth()-1,v=u.getHeight()-1;for(;y>0;){for(y===6&&(y-=1);v>=0&&v<u.getHeight();){for(let I=0;I<2;++I){const C=y-I;if(!ft.isEmpty(u.get(C,v)))continue;let O;f<s.getSize()?(O=s.get(f),++f):O=!1,l!==255&&xn.getDataMaskBit(l,C,v)&&(O=!O),u.setBoolean(C,v,O)}v+=m}m=-m,v+=m,y-=2}if(f!==s.getSize())throw new sn("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-W.numberOfLeadingZeros(s)}static calculateBCHCode(s,l){if(l===0)throw new E("0 polynomial");const u=ft.findMSBSet(l);for(s<<=u-1;ft.findMSBSet(s)>=u;)s^=l<<ft.findMSBSet(s)-u;return s}static makeTypeInfoBits(s,l,u){if(!ui.isValidMaskPattern(l))throw new sn("Invalid mask pattern");const f=s.getBits()<<3|l;u.appendBits(f,5);const m=ft.calculateBCHCode(f,ft.TYPE_INFO_POLY);u.appendBits(m,10);const y=new Q;if(y.appendBits(ft.TYPE_INFO_MASK_PATTERN,15),u.xor(y),u.getSize()!==15)throw new sn("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(s,l){l.appendBits(s.getVersionNumber(),6);const u=ft.calculateBCHCode(s.getVersionNumber(),ft.VERSION_INFO_POLY);if(l.appendBits(u,12),l.getSize()!==18)throw new sn("should not happen but we got: "+l.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let l=8;l<s.getWidth()-8;++l){const u=(l+1)%2;ft.isEmpty(s.get(l,6))&&s.setNumber(l,6,u),ft.isEmpty(s.get(6,l))&&s.setNumber(6,l,u)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new sn;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,l,u){for(let f=0;f<8;++f){if(!ft.isEmpty(u.get(s+f,l)))throw new sn;u.setNumber(s+f,l,0)}}static embedVerticalSeparationPattern(s,l,u){for(let f=0;f<7;++f){if(!ft.isEmpty(u.get(s,l+f)))throw new sn;u.setNumber(s,l+f,0)}}static embedPositionAdjustmentPattern(s,l,u){for(let f=0;f<5;++f){const m=ft.POSITION_ADJUSTMENT_PATTERN[f];for(let y=0;y<5;++y)u.setNumber(s+y,l+f,m[y])}}static embedPositionDetectionPattern(s,l,u){for(let f=0;f<7;++f){const m=ft.POSITION_DETECTION_PATTERN[f];for(let y=0;y<7;++y)u.setNumber(s+y,l+f,m[y])}}static embedPositionDetectionPatternsAndSeparators(s){const l=ft.POSITION_DETECTION_PATTERN[0].length;ft.embedPositionDetectionPattern(0,0,s),ft.embedPositionDetectionPattern(s.getWidth()-l,0,s),ft.embedPositionDetectionPattern(0,s.getWidth()-l,s);const u=8;ft.embedHorizontalSeparationPattern(0,u-1,s),ft.embedHorizontalSeparationPattern(s.getWidth()-u,u-1,s),ft.embedHorizontalSeparationPattern(0,s.getWidth()-u,s);const f=7;ft.embedVerticalSeparationPattern(f,0,s),ft.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),ft.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,l){if(s.getVersionNumber()<2)return;const u=s.getVersionNumber()-1,f=ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let m=0,y=f.length;m!==y;m++){const v=f[m];if(v>=0)for(let I=0;I!==y;I++){const C=f[I];C>=0&&ft.isEmpty(l.get(C,v))&&ft.embedPositionAdjustmentPattern(C-2,v-2,l)}}}}ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ft.VERSION_INFO_POLY=7973,ft.TYPE_INFO_POLY=1335,ft.TYPE_INFO_MASK_PATTERN=21522;class du{constructor(s,l){this.dataBytes=s,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class un{constructor(){}static calculateMaskPenalty(s){return xn.applyMaskPenaltyRule1(s)+xn.applyMaskPenaltyRule2(s)+xn.applyMaskPenaltyRule3(s)+xn.applyMaskPenaltyRule4(s)}static encode(s,l,u=null){let f=un.DEFAULT_BYTE_MODE_ENCODING;const m=u!==null&&u.get(Zn.CHARACTER_SET)!==void 0;m&&(f=u.get(Zn.CHARACTER_SET).toString());const y=this.chooseMode(s,f),v=new Q;if(y===ut.BYTE&&(m||un.DEFAULT_BYTE_MODE_ENCODING!==f)){const je=G.getCharacterSetECIByName(f);je!==void 0&&this.appendECI(je,v)}this.appendModeInfo(y,v);const I=new Q;this.appendBytes(s,y,I,f);let C;if(u!==null&&u.get(Zn.QR_VERSION)!==void 0){const je=Number.parseInt(u.get(Zn.QR_VERSION).toString(),10);C=$e.getVersionForNumber(je);const Oe=this.calculateBitsNeeded(y,v,I,C);if(!this.willFit(Oe,C,l))throw new sn("Data too big for requested version")}else C=this.recommendVersion(l,y,v,I);const O=new Q;O.appendBitArray(v);const U=y===ut.BYTE?I.getSizeInBytes():s.length;this.appendLengthInfo(U,C,y,O),O.appendBitArray(I);const K=C.getECBlocksForLevel(l),ee=C.getTotalCodewords()-K.getTotalECCodewords();this.terminateBits(ee,O);const ae=this.interleaveWithECBytes(O,C.getTotalCodewords(),ee,K.getNumBlocks()),ue=new ui;ue.setECLevel(l),ue.setMode(y),ue.setVersion(C);const fe=C.getDimensionForVersion(),Ee=new ca(fe,fe),Fe=this.chooseMaskPattern(ae,l,C,Ee);return ue.setMaskPattern(Fe),ft.buildMatrix(ae,l,C,Fe,Ee),ue.setMatrix(Ee),ue}static recommendVersion(s,l,u,f){const m=this.calculateBitsNeeded(l,u,f,$e.getVersionForNumber(1)),y=this.chooseVersion(m,s),v=this.calculateBitsNeeded(l,u,f,y);return this.chooseVersion(v,s)}static calculateBitsNeeded(s,l,u,f){return l.getSize()+s.getCharacterCountBits(f)+u.getSize()}static getAlphanumericCode(s){return s<un.ALPHANUMERIC_TABLE.length?un.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,l=null){if(G.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(s))return ut.KANJI;let u=!1,f=!1;for(let m=0,y=s.length;m<y;++m){const v=s.charAt(m);if(un.isDigit(v))u=!0;else if(this.getAlphanumericCode(v.charCodeAt(0))!==-1)f=!0;else return ut.BYTE}return f?ut.ALPHANUMERIC:u?ut.NUMERIC:ut.BYTE}static isOnlyDoubleByteKanji(s){let l;try{l=te.encode(s,G.SJIS)}catch{return!1}const u=l.length;if(u%2!==0)return!1;for(let f=0;f<u;f+=2){const m=l[f]&255;if((m<129||m>159)&&(m<224||m>235))return!1}return!0}static chooseMaskPattern(s,l,u,f){let m=Number.MAX_SAFE_INTEGER,y=-1;for(let v=0;v<ui.NUM_MASK_PATTERNS;v++){ft.buildMatrix(s,l,u,v,f);let I=this.calculateMaskPenalty(f);I<m&&(m=I,y=v)}return y}static chooseVersion(s,l){for(let u=1;u<=40;u++){const f=$e.getVersionForNumber(u);if(un.willFit(s,f,l))return f}throw new sn("Data too big")}static willFit(s,l,u){const f=l.getTotalCodewords(),y=l.getECBlocksForLevel(u).getTotalECCodewords(),v=f-y,I=(s+7)/8;return v>=I}static terminateBits(s,l){const u=s*8;if(l.getSize()>u)throw new sn("data bits cannot fit in the QR Code"+l.getSize()+" > "+u);for(let y=0;y<4&&l.getSize()<u;++y)l.appendBit(!1);const f=l.getSize()&7;if(f>0)for(let y=f;y<8;y++)l.appendBit(!1);const m=s-l.getSizeInBytes();for(let y=0;y<m;++y)l.appendBits((y&1)===0?236:17,8);if(l.getSize()!==u)throw new sn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,l,u,f,m,y){if(f>=u)throw new sn("Block ID too large");const v=s%u,I=u-v,C=Math.floor(s/u),O=C+1,U=Math.floor(l/u),K=U+1,ee=C-U,ae=O-K;if(ee!==ae)throw new sn("EC bytes mismatch");if(u!==I+v)throw new sn("RS blocks mismatch");if(s!==(U+ee)*I+(K+ae)*v)throw new sn("Total bytes mismatch");f<I?(m[0]=U,y[0]=ee):(m[0]=K,y[0]=ae)}static interleaveWithECBytes(s,l,u,f){if(s.getSizeInBytes()!==u)throw new sn("Number of bits and data bytes does not match");let m=0,y=0,v=0;const I=new Array;for(let O=0;O<f;++O){const U=new Int32Array(1),K=new Int32Array(1);un.getNumDataBytesAndNumECBytesForBlockID(l,u,f,O,U,K);const ee=U[0],ae=new Uint8Array(ee);s.toBytes(8*m,ae,0,ee);const ue=un.generateECBytes(ae,K[0]);I.push(new du(ae,ue)),y=Math.max(y,ee),v=Math.max(v,ue.length),m+=U[0]}if(u!==m)throw new sn("Data bytes does not match offset");const C=new Q;for(let O=0;O<y;++O)for(const U of I){const K=U.getDataBytes();O<K.length&&C.appendBits(K[O],8)}for(let O=0;O<v;++O)for(const U of I){const K=U.getErrorCorrectionBytes();O<K.length&&C.appendBits(K[O],8)}if(l!==C.getSizeInBytes())throw new sn("Interleaving error: "+l+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(s,l){const u=s.length,f=new Int32Array(u+l);for(let y=0;y<u;y++)f[y]=s[y]&255;new To(ht.QR_CODE_FIELD_256).encode(f,l);const m=new Uint8Array(l);for(let y=0;y<l;y++)m[y]=f[u+y];return m}static appendModeInfo(s,l){l.appendBits(s.getBits(),4)}static appendLengthInfo(s,l,u,f){const m=u.getCharacterCountBits(l);if(s>=1<<m)throw new sn(s+" is bigger than "+((1<<m)-1));f.appendBits(s,m)}static appendBytes(s,l,u,f){switch(l){case ut.NUMERIC:un.appendNumericBytes(s,u);break;case ut.ALPHANUMERIC:un.appendAlphanumericBytes(s,u);break;case ut.BYTE:un.append8BitBytes(s,u,f);break;case ut.KANJI:un.appendKanjiBytes(s,u);break;default:throw new sn("Invalid mode: "+l)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const l=un.getDigit(s);return l>=0&&l<=9}static appendNumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const m=un.getDigit(s.charAt(f));if(f+2<u){const y=un.getDigit(s.charAt(f+1)),v=un.getDigit(s.charAt(f+2));l.appendBits(m*100+y*10+v,10),f+=3}else if(f+1<u){const y=un.getDigit(s.charAt(f+1));l.appendBits(m*10+y,7),f+=2}else l.appendBits(m,4),f++}}static appendAlphanumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const m=un.getAlphanumericCode(s.charCodeAt(f));if(m===-1)throw new sn;if(f+1<u){const y=un.getAlphanumericCode(s.charCodeAt(f+1));if(y===-1)throw new sn;l.appendBits(m*45+y,11),f+=2}else l.appendBits(m,6),f++}}static append8BitBytes(s,l,u){let f;try{f=te.encode(s,u)}catch(m){throw new sn(m)}for(let m=0,y=f.length;m!==y;m++){const v=f[m];l.appendBits(v,8)}}static appendKanjiBytes(s,l){let u;try{u=te.encode(s,G.SJIS)}catch(m){throw new sn(m)}const f=u.length;for(let m=0;m<f;m+=2){const y=u[m]&255,v=u[m+1]&255,I=y<<8&4294967295|v;let C=-1;if(I>=33088&&I<=40956?C=I-33088:I>=57408&&I<=60351&&(C=I-49472),C===-1)throw new sn("Invalid byte sequence");const O=(C>>8)*192+(C&255);l.appendBits(O,13)}}static appendECI(s,l){l.appendBits(ut.ECI.getBits(),4),l.appendBits(s.getValue(),8)}}un.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),un.DEFAULT_BYTE_MODE_ENCODING=G.UTF8.getName();class es{write(s,l,u,f=null){if(s.length===0)throw new E("Found empty contents");if(l<0||u<0)throw new E("Requested dimensions are too small: "+l+"x"+u);let m=Lt.L,y=es.QUIET_ZONE_SIZE;f!==null&&(f.get(Zn.ERROR_CORRECTION)!==void 0&&(m=Lt.fromString(f.get(Zn.ERROR_CORRECTION).toString())),f.get(Zn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Zn.MARGIN).toString(),10)));const v=un.encode(s,m,f);return this.renderResult(v,l,u,y)}writeToDom(s,l,u,f,m=null){typeof s=="string"&&(s=document.querySelector(s));const y=this.write(l,u,f,m);s&&s.appendChild(y)}renderResult(s,l,u,f){const m=s.getMatrix();if(m===null)throw new Mn;const y=m.getWidth(),v=m.getHeight(),I=y+f*2,C=v+f*2,O=Math.max(l,I),U=Math.max(u,C),K=Math.min(Math.floor(O/I),Math.floor(U/C)),ee=Math.floor((O-y*K)/2),ae=Math.floor((U-v*K)/2),ue=this.createSVGElement(O,U);for(let fe=0,Ee=ae;fe<v;fe++,Ee+=K)for(let Fe=0,je=ee;Fe<y;Fe++,je+=K)if(m.get(Fe,fe)===1){const Oe=this.createSvgRectElement(je,Ee,K,K);ue.appendChild(Oe)}return ue}createSVGElement(s,l){const u=document.createElementNS(es.SVG_NS,"svg");return u.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(s,l,u,f){const m=document.createElementNS(es.SVG_NS,"rect");return m.setAttributeNS(null,"x",s.toString()),m.setAttributeNS(null,"y",l.toString()),m.setAttributeNS(null,"height",u.toString()),m.setAttributeNS(null,"width",f.toString()),m.setAttributeNS(null,"fill","#000000"),m}}es.QUIET_ZONE_SIZE=4,es.SVG_NS="http://www.w3.org/2000/svg";class fr{encode(s,l,u,f,m){if(s.length===0)throw new E("Found empty contents");if(l!==Re.QR_CODE)throw new E("Can only encode QR_CODE, but got "+l);if(u<0||f<0)throw new E(`Requested dimensions are too small: ${u}x${f}`);let y=Lt.L,v=fr.QUIET_ZONE_SIZE;m!==null&&(m.get(Zn.ERROR_CORRECTION)!==void 0&&(y=Lt.fromString(m.get(Zn.ERROR_CORRECTION).toString())),m.get(Zn.MARGIN)!==void 0&&(v=Number.parseInt(m.get(Zn.MARGIN).toString(),10)));const I=un.encode(s,y,m);return fr.renderResult(I,u,f,v)}static renderResult(s,l,u,f){const m=s.getMatrix();if(m===null)throw new Mn;const y=m.getWidth(),v=m.getHeight(),I=y+f*2,C=v+f*2,O=Math.max(l,I),U=Math.max(u,C),K=Math.min(Math.floor(O/I),Math.floor(U/C)),ee=Math.floor((O-y*K)/2),ae=Math.floor((U-v*K)/2),ue=new pe(O,U);for(let fe=0,Ee=ae;fe<v;fe++,Ee+=K)for(let Fe=0,je=ee;Fe<y;Fe++,je+=K)m.get(Fe,fe)===1&&ue.setRegion(je,Ee,K,K);return ue}}fr.QUIET_ZONE_SIZE=4;class hu{encode(s,l,u,f,m){let y;switch(l){case Re.QR_CODE:y=new fr;break;default:throw new E("No encoder available for format "+l)}return y.encode(s,l,u,f,m)}}class Hi extends se{constructor(s,l,u,f,m,y,v,I){if(super(y,v),this.yuvData=s,this.dataWidth=l,this.dataHeight=u,this.left=f,this.top=m,f+y>l||m+v>u)throw new E("Crop rectangle does not fit within image data.");I&&this.reverseHorizontal(y,v)}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.yuvData;const u=s*l,f=new Uint8ClampedArray(u);let m=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.yuvData,m,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.yuvData,m,f,v,s),m+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new Hi(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+l,u,f,!1)}renderThumbnail(){const s=this.getWidth()/Hi.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/Hi.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(s*l),f=this.yuvData;let m=this.top*this.dataWidth+this.left;for(let y=0;y<l;y++){const v=y*s;for(let I=0;I<s;I++){const C=f[m+I*Hi.THUMBNAIL_SCALE_FACTOR]&255;u[v+I]=4278190080|C*65793}m+=this.dataWidth*Hi.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Hi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Hi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,l){const u=this.yuvData;for(let f=0,m=this.top*this.dataWidth+this.left;f<l;f++,m+=this.dataWidth){const y=m+s/2;for(let v=m,I=m+s-1;v<y;v++,I--){const C=u[v];u[v]=u[I],u[I]=C}}}invert(){return new Te(this)}}Hi.THUMBNAIL_SCALE_FACTOR=2;class ts extends se{constructor(s,l,u,f,m,y,v){if(super(l,u),this.dataWidth=f,this.dataHeight=m,this.left=y,this.top=v,s.BYTES_PER_ELEMENT===4){const I=l*u,C=new Uint8ClampedArray(I);for(let O=0;O<I;O++){const U=s[O],K=U>>16&255,ee=U>>7&510,ae=U&255;C[O]=(K+ee+ae)/4&255}this.luminances=C}else this.luminances=s;if(f===void 0&&(this.dataWidth=l),m===void 0&&(this.dataHeight=u),y===void 0&&(this.left=0),v===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+u>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.luminances;const u=s*l,f=new Uint8ClampedArray(u);let m=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.luminances,m,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.luminances,m,f,v,s),m+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new ts(this.luminances,u,f,this.dataWidth,this.dataHeight,this.left+s,this.top+l)}invert(){return new Te(this)}}class _ extends G{static forName(s){return this.getCharacterSetECIByName(s)}}class N{}N.ISO_8859_1=G.ISO8859_1;class V{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Y{static singletonList(s){return[s]}static min(s,l){return s.sort(l)[0]}}class ge{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ae extends ge{constructor(s,l,u){super(s),this.value=l,this.bitCount=u}appendTo(s,l){s.appendBits(this.value,this.bitCount)}add(s,l){return new Ae(this,s,l)}addBinaryShift(s,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ae(this,s,l)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+W.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class He extends Ae{constructor(s,l,u){super(s,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=u}appendTo(s,l){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):u===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(l[this.binaryShiftStart+u],8)}addBinaryShift(s,l){return new He(this,s,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function dn(j,s,l){return new He(j,s,l)}function Bn(j,s,l){return new Ae(j,s,l)}const qt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pn=0,jn=1,Un=2,Ti=3,ni=4,Xa=new Ae(null,0,0),fu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function s0(j){for(let s of j)z.fill(s,-1);return j[Pn][ni]=0,j[jn][ni]=0,j[jn][Pn]=28,j[Ti][ni]=0,j[Un][ni]=0,j[Un][Pn]=15,j}const Qd=s0(z.createInt32Array(6,6));class di{constructor(s,l,u,f){this.token=s,this.mode=l,this.binaryShiftByteCount=u,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,l){let u=this.bitCount,f=this.token;if(s!==this.mode){let y=fu[this.mode][s];f=Bn(f,y&65535,y>>16),u+=y>>16}let m=s===Un?4:5;return f=Bn(f,l,m),new di(f,s,0,u+m)}shiftAndAppend(s,l){let u=this.token,f=this.mode===Un?4:5;return u=Bn(u,Qd[this.mode][s],f),u=Bn(u,l,5),new di(u,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let l=this.token,u=this.mode,f=this.bitCount;if(this.mode===ni||this.mode===Un){let v=fu[u][Pn];l=Bn(l,v&65535,v>>16),f+=v>>16,u=Pn}let m=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,y=new di(l,u,this.binaryShiftByteCount+1,f+m);return y.binaryShiftByteCount===2078&&(y=y.endBinaryShift(s+1)),y}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=dn(l,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new di(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let l=this.bitCount+(fu[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?l+=di.calculateBinaryShiftCost(s)-di.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(l+=10),l<=s.bitCount}toBitArray(s){let l=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())l.unshift(f);let u=new Q;for(const f of l)f.appendTo(u,s);return u}toString(){return X.format("%s bits=%d bytes=%d",qt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}di.INITIAL_STATE=new di(Xa,Pn,0,0);function jg(j){const s=X.getCharCode(" "),l=X.getCharCode("."),u=X.getCharCode(",");j[Pn][s]=1;const f=X.getCharCode("Z"),m=X.getCharCode("A");for(let K=m;K<=f;K++)j[Pn][K]=K-m+2;j[jn][s]=1;const y=X.getCharCode("z"),v=X.getCharCode("a");for(let K=v;K<=y;K++)j[jn][K]=K-v+2;j[Un][s]=1;const I=X.getCharCode("9"),C=X.getCharCode("0");for(let K=C;K<=I;K++)j[Un][K]=K-C+2;j[Un][u]=12,j[Un][l]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let K=0;K<O.length;K++)j[Ti][X.getCharCode(O[K])]=K;const U=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let K=0;K<U.length;K++)X.getCharCode(U[K])>0&&(j[ni][X.getCharCode(U[K])]=K);return j}const Zd=jg(z.createInt32Array(5,256));class ec{constructor(s){this.text=s}encode(){const s=X.getCharCode(" "),l=X.getCharCode(`
`);let u=Y.singletonList(di.INITIAL_STATE);for(let m=0;m<this.text.length;m++){let y,v=m+1<this.text.length?this.text[m+1]:0;switch(this.text[m]){case X.getCharCode("\r"):y=v===l?2:0;break;case X.getCharCode("."):y=v===s?3:0;break;case X.getCharCode(","):y=v===s?4:0;break;case X.getCharCode(":"):y=v===s?5:0;break;default:y=0}y>0?(u=ec.updateStateListForPair(u,m,y),m++):u=this.updateStateListForChar(u,m)}return Y.min(u,(m,y)=>m.getBitCount()-y.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,l){const u=[];for(let f of s)this.updateStateForChar(f,l,u);return ec.simplifyStates(u)}updateStateForChar(s,l,u){let f=this.text[l]&255,m=Zd[s.getMode()][f]>0,y=null;for(let v=0;v<=ni;v++){let I=Zd[v][f];if(I>0){if(y==null&&(y=s.endBinaryShift(l)),!m||v===s.getMode()||v===Un){const C=y.latchAndAppend(v,I);u.push(C)}if(!m&&Qd[s.getMode()][v]>=0){const C=y.shiftAndAppend(v,I);u.push(C)}}}if(s.getBinaryShiftByteCount()>0||Zd[s.getMode()][f]===0){let v=s.addBinaryShiftChar(l);u.push(v)}}static updateStateListForPair(s,l,u){const f=[];for(let m of s)this.updateStateForPair(m,l,u,f);return this.simplifyStates(f)}static updateStateForPair(s,l,u,f){let m=s.endBinaryShift(l);if(f.push(m.latchAndAppend(ni,u)),s.getMode()!==ni&&f.push(m.shiftAndAppend(ni,u)),u===3||u===4){let y=m.latchAndAppend(Un,16-u).latchAndAppend(Un,1);f.push(y)}if(s.getBinaryShiftByteCount()>0){let y=s.addBinaryShiftChar(l).addBinaryShiftChar(l+1);f.push(y)}}static simplifyStates(s){let l=[];for(const u of s){let f=!0;for(const m of l){if(m.isBetterThanOrEqualTo(u)){f=!1;break}u.isBetterThanOrEqualTo(m)&&(l=l.filter(y=>y!==m))}f&&l.push(u)}return l}}class Kt{constructor(){}static encodeBytes(s){return Kt.encode(s,Kt.DEFAULT_EC_PERCENT,Kt.DEFAULT_AZTEC_LAYERS)}static encode(s,l,u){let f=new ec(s).encode(),m=W.truncDivision(f.getSize()*l,100)+11,y=f.getSize()+m,v,I,C,O,U;if(u!==Kt.DEFAULT_AZTEC_LAYERS){if(v=u<0,I=Math.abs(u),I>(v?Kt.MAX_NB_BITS_COMPACT:Kt.MAX_NB_BITS))throw new E(X.format("Illegal value %s for layers",u));C=Kt.totalBitsInLayer(I,v),O=Kt.WORD_SIZE[I];let Oe=C-C%O;if(U=Kt.stuffBits(f,O),U.getSize()+m>Oe)throw new E("Data to large for user specified layer");if(v&&U.getSize()>O*64)throw new E("Data to large for user specified layer")}else{O=0,U=null;for(let Oe=0;;Oe++){if(Oe>Kt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(v=Oe<=3,I=v?Oe+1:Oe,C=Kt.totalBitsInLayer(I,v),y>C)continue;(U==null||O!==Kt.WORD_SIZE[I])&&(O=Kt.WORD_SIZE[I],U=Kt.stuffBits(f,O));let Vt=C-C%O;if(!(v&&U.getSize()>O*64)&&U.getSize()+m<=Vt)break}}let K=Kt.generateCheckWords(U,C,O),ee=U.getSize()/O,ae=Kt.generateModeMessage(v,I,ee),ue=(v?11:14)+I*4,fe=new Int32Array(ue),Ee;if(v){Ee=ue;for(let Oe=0;Oe<fe.length;Oe++)fe[Oe]=Oe}else{Ee=ue+1+2*W.truncDivision(W.truncDivision(ue,2)-1,15);let Oe=W.truncDivision(ue,2),Vt=W.truncDivision(Ee,2);for(let St=0;St<Oe;St++){let Ci=St+W.truncDivision(St,15);fe[Oe-St-1]=Vt-Ci-1,fe[Oe+St]=Vt+Ci+1}}let Fe=new pe(Ee);for(let Oe=0,Vt=0;Oe<I;Oe++){let St=(I-Oe)*4+(v?9:12);for(let Ci=0;Ci<St;Ci++){let ws=Ci*2;for(let Cr=0;Cr<2;Cr++)K.get(Vt+ws+Cr)&&Fe.set(fe[Oe*2+Cr],fe[Oe*2+Ci]),K.get(Vt+St*2+ws+Cr)&&Fe.set(fe[Oe*2+Ci],fe[ue-1-Oe*2-Cr]),K.get(Vt+St*4+ws+Cr)&&Fe.set(fe[ue-1-Oe*2-Cr],fe[ue-1-Oe*2-Ci]),K.get(Vt+St*6+ws+Cr)&&Fe.set(fe[ue-1-Oe*2-Ci],fe[Oe*2+Cr])}Vt+=St*8}if(Kt.drawModeMessage(Fe,v,Ee,ae),v)Kt.drawBullsEye(Fe,W.truncDivision(Ee,2),5);else{Kt.drawBullsEye(Fe,W.truncDivision(Ee,2),7);for(let Oe=0,Vt=0;Oe<W.truncDivision(ue,2)-1;Oe+=15,Vt+=16)for(let St=W.truncDivision(Ee,2)&1;St<Ee;St+=2)Fe.set(W.truncDivision(Ee,2)-Vt,St),Fe.set(W.truncDivision(Ee,2)+Vt,St),Fe.set(St,W.truncDivision(Ee,2)-Vt),Fe.set(St,W.truncDivision(Ee,2)+Vt)}let je=new V;return je.setCompact(v),je.setSize(Ee),je.setLayers(I),je.setCodeWords(ee),je.setMatrix(Fe),je}static drawBullsEye(s,l,u){for(let f=0;f<u;f+=2)for(let m=l-f;m<=l+f;m++)s.set(m,l-f),s.set(m,l+f),s.set(l-f,m),s.set(l+f,m);s.set(l-u,l-u),s.set(l-u+1,l-u),s.set(l-u,l-u+1),s.set(l+u,l-u),s.set(l+u,l-u+1),s.set(l+u,l+u-1)}static generateModeMessage(s,l,u){let f=new Q;return s?(f.appendBits(l-1,2),f.appendBits(u-1,6),f=Kt.generateCheckWords(f,28,4)):(f.appendBits(l-1,5),f.appendBits(u-1,11),f=Kt.generateCheckWords(f,40,4)),f}static drawModeMessage(s,l,u,f){let m=W.truncDivision(u,2);if(l)for(let y=0;y<7;y++){let v=m-3+y;f.get(y)&&s.set(v,m-5),f.get(y+7)&&s.set(m+5,v),f.get(20-y)&&s.set(v,m+5),f.get(27-y)&&s.set(m-5,v)}else for(let y=0;y<10;y++){let v=m-5+y+W.truncDivision(y,5);f.get(y)&&s.set(v,m-7),f.get(y+10)&&s.set(m+7,v),f.get(29-y)&&s.set(v,m+7),f.get(39-y)&&s.set(m-7,v)}}static generateCheckWords(s,l,u){let f=s.getSize()/u,m=new To(Kt.getGF(u)),y=W.truncDivision(l,u),v=Kt.bitsToWords(s,u,y);m.encode(v,y-f);let I=l%u,C=new Q;C.appendBits(0,I);for(const O of Array.from(v))C.appendBits(O,u);return C}static bitsToWords(s,l,u){let f=new Int32Array(u),m,y;for(m=0,y=s.getSize()/l;m<y;m++){let v=0;for(let I=0;I<l;I++)v|=s.get(m*l+I)?1<<l-I-1:0;f[m]=v}return f}static getGF(s){switch(s){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new E("Unsupported word size "+s)}}static stuffBits(s,l){let u=new Q,f=s.getSize(),m=(1<<l)-2;for(let y=0;y<f;y+=l){let v=0;for(let I=0;I<l;I++)(y+I>=f||s.get(y+I))&&(v|=1<<l-1-I);(v&m)===m?(u.appendBits(v&m,l),y--):(v&m)===0?(u.appendBits(v|1,l),y--):u.appendBits(v,l)}return u}static totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}Kt.DEFAULT_EC_PERCENT=33,Kt.DEFAULT_AZTEC_LAYERS=0,Kt.MAX_NB_BITS=32,Kt.MAX_NB_BITS_COMPACT=4,Kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class tc{encode(s,l,u,f){return this.encodeWithHints(s,l,u,f,null)}encodeWithHints(s,l,u,f,m){let y=N.ISO_8859_1,v=Kt.DEFAULT_EC_PERCENT,I=Kt.DEFAULT_AZTEC_LAYERS;return m!=null&&(m.has(Zn.CHARACTER_SET)&&(y=_.forName(m.get(Zn.CHARACTER_SET).toString())),m.has(Zn.ERROR_CORRECTION)&&(v=W.parseInt(m.get(Zn.ERROR_CORRECTION).toString())),m.has(Zn.AZTEC_LAYERS)&&(I=W.parseInt(m.get(Zn.AZTEC_LAYERS).toString()))),tc.encodeLayers(s,l,u,f,y,v,I)}static encodeLayers(s,l,u,f,m,y,v){if(l!==Re.AZTEC)throw new E("Can only encode AZTEC, but got "+l);let I=Kt.encode(X.getBytes(s,m),y,v);return tc.renderResult(I,u,f)}static renderResult(s,l,u){let f=s.getMatrix();if(f==null)throw new Mn;let m=f.getWidth(),y=f.getHeight(),v=Math.max(l,m),I=Math.max(u,y),C=Math.min(v/m,I/y),O=(v-m*C)/2,U=(I-y*C)/2,K=new pe(v,I);for(let ee=0,ae=U;ee<y;ee++,ae+=C)for(let ue=0,fe=O;ue<m;ue++,fe+=C)f.get(ue,ee)&&K.setRegion(fe,ae,C,C);return K}}t.AbstractExpandedDecoder=vo,t.ArgumentException=w,t.ArithmeticException=Et,t.AztecCode=V,t.AztecCodeReader=Bi,t.AztecCodeWriter=tc,t.AztecDecoder=zt,t.AztecDetector=Jr,t.AztecDetectorResult=wi,t.AztecEncoder=Kt,t.AztecHighLevelEncoder=ec,t.AztecPoint=Ln,t.BarcodeFormat=Re,t.Binarizer=M,t.BinaryBitmap=T,t.BitArray=Q,t.BitMatrix=pe,t.BitSource=Wa,t.BrowserAztecCodeReader=vi,t.BrowserBarcodeReader=lu,t.BrowserCodeReader=Se,t.BrowserDatamatrixCodeReader=Yd,t.BrowserMultiFormatReader=Io,t.BrowserPDF417Reader=aa,t.BrowserQRCodeReader=Ka,t.BrowserQRCodeSvgWriter=es,t.CharacterSetECI=G,t.ChecksumException=R,t.Code128Reader=We,t.Code39Reader=In,t.DataMatrixDecodedBitStreamParser=Ui,t.DataMatrixReader=Ei,t.DecodeHintType=le,t.DecoderResult=at,t.DefaultGridSampler=Xn,t.DetectorResult=Kn,t.EAN13Reader=Er,t.EncodeHintType=Zn,t.Exception=g,t.FormatException=F,t.GenericGF=ht,t.GenericGFPoly=ct,t.GlobalHistogramBinarizer=Ie,t.GridSampler=Qs,t.GridSamplerInstance=_r,t.HTMLCanvasElementLuminanceSource=Ne,t.HybridBinarizer=we,t.ITFReader=Ht,t.IllegalArgumentException=E,t.IllegalStateException=Mn,t.InvertedLuminanceSource=Te,t.LuminanceSource=se,t.MathUtils=mt,t.MultiFormatOneDReader=Os,t.MultiFormatReader=Ls,t.MultiFormatWriter=hu,t.NotFoundException=re,t.OneDReader=An,t.PDF417DecodedBitStreamParser=_e,t.PDF417DecoderErrorCorrection=bo,t.PDF417Reader=Tr,t.PDF417ResultMetadata=oa,t.PerspectiveTransform=Wt,t.PlanarYUVLuminanceSource=Hi,t.QRCodeByteMatrix=ca,t.QRCodeDataMask=bt,t.QRCodeDecodedBitStreamParser=Sn,t.QRCodeDecoderErrorCorrectionLevel=Lt,t.QRCodeDecoderFormatInformation=Qn,t.QRCodeEncoder=un,t.QRCodeEncoderQRCode=ui,t.QRCodeMaskUtil=xn,t.QRCodeMatrixUtil=ft,t.QRCodeMode=ut,t.QRCodeReader=$r,t.QRCodeVersion=$e,t.QRCodeWriter=fr,t.RGBLuminanceSource=ts,t.RSS14Reader=Jt,t.RSSExpandedReader=ke,t.ReaderException=eo,t.ReedSolomonDecoder=Pr,t.ReedSolomonEncoder=To,t.ReedSolomonException=gn,t.Result=Le,t.ResultMetadataType=Ge,t.ResultPoint=Xe,t.StringUtils=X,t.UnsupportedOperationException=J,t.VideoInputDevice=oe,t.WhiteRectangleDetector=Zr,t.WriterException=sn,t.ZXingArrays=z,t.ZXingCharset=_,t.ZXingInteger=W,t.ZXingStandardCharsets=N,t.ZXingStringBuilder=q,t.ZXingStringEncoding=te,t.ZXingSystem=D,t.createAbstractExpandedDecoder=au,Object.defineProperty(t,"__esModule",{value:!0})})}(Bh,Bh.exports)),Bh.exports}var Hn=UY();const zY=zp(Hn),WY=CC({__proto__:null,default:zY},[Hn]);var uC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,Hn.BarcodeFormat.QR_CODE],[Ze.AZTEC,Hn.BarcodeFormat.AZTEC],[Ze.CODABAR,Hn.BarcodeFormat.CODABAR],[Ze.CODE_39,Hn.BarcodeFormat.CODE_39],[Ze.CODE_93,Hn.BarcodeFormat.CODE_93],[Ze.CODE_128,Hn.BarcodeFormat.CODE_128],[Ze.DATA_MATRIX,Hn.BarcodeFormat.DATA_MATRIX],[Ze.MAXICODE,Hn.BarcodeFormat.MAXICODE],[Ze.ITF,Hn.BarcodeFormat.ITF],[Ze.EAN_13,Hn.BarcodeFormat.EAN_13],[Ze.EAN_8,Hn.BarcodeFormat.EAN_8],[Ze.PDF_417,Hn.BarcodeFormat.PDF_417],[Ze.RSS_14,Hn.BarcodeFormat.RSS_14],[Ze.RSS_EXPANDED,Hn.BarcodeFormat.RSS_EXPANDED],[Ze.UPC_A,Hn.BarcodeFormat.UPC_A],[Ze.UPC_E,Hn.BarcodeFormat.UPC_E],[Ze.UPC_EAN_EXTENSION,Hn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!WY)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(Hn.DecodeHintType.POSSIBLE_FORMATS,i),o.set(Hn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,i){try{r(t.decode(e))}catch(o){i(o)}})},n.prototype.decode=function(e){var t=new Hn.MultiFormatReader(this.verbose,this.hints),r=new Hn.HTMLCanvasElementLuminanceSource(e),i=new Hn.BinaryBitmap(new Hn.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:i6.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),HY=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function p(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,p)}g((r=r.apply(n,e||[])).next())})},GY=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return p([g,w])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},dC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,"qr_code"],[Ze.AZTEC,"aztec"],[Ze.CODABAR,"codabar"],[Ze.CODE_39,"code_39"],[Ze.CODE_93,"code_93"],[Ze.CODE_128,"code_128"],[Ze.DATA_MATRIX,"data_matrix"],[Ze.ITF,"itf"],[Ze.EAN_13,"ean_13"],[Ze.EAN_8,"ean_8"],[Ze.PDF_417,"pdf417"],[Ze.UPC_A,"upc_a"],[Ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return HY(this,void 0,void 0,function(){var t,r;return GY(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:i6.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,i=0,o=e;i<o.length;i++){var c=o[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,t=c)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),hC=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function p(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,p)}g((r=r.apply(n,e||[])).next())})},fC=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return p([g,w])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},$Y=function(){function n(e,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&dC.isSupported()?(this.primaryDecoder=new dC(e,r,i),this.secondaryDecoder=new uC(e,r,i)):this.primaryDecoder=new uC(e,r,i)}return n.prototype.decodeAsync=function(e){return hC(this,void 0,void 0,function(){var t;return fC(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return hC(this,void 0,void 0,function(){var t,r;return fC(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),t_=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bp=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function p(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,p)}g((r=r.apply(n,e||[])).next())})},jp=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return p([g,w])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},o6=function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n}(),qY=function(n){t_(e,n);function e(t,r){return n.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(o6),KY=function(n){t_(e,n);function e(t){return n.call(this,"zoom",t)||this}return e}(qY),XY=function(n){t_(e,n);function e(t){return n.call(this,"torch",t)||this}return e}(o6),YY=function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new KY(this.track)},n.prototype.torchFeature=function(){return new XY(this.track)},n}(),QY=function(){function n(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,r,i){return Bp(this,void 0,void 0,function(){var o,c;return jp(this,function(h){switch(h.label){case 0:return o=new n(e,t,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return Bp(this,void 0,void 0,function(){return jp(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var i=e.mediaStream.getVideoTracks(),o=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(h){e.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new YY(this.getFirstTrackOrFail())},n}(),ZY=function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,r){return Bp(this,void 0,void 0,function(){return jp(this,function(i){return[2,QY.create(e,this.mediaStream,t,r)]})})},n.create=function(e){return Bp(this,void 0,void 0,function(){var t,r;return jp(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new n(r)]}})})},n}(),mC=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function p(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,p)}g((r=r.apply(n,e||[])).next())})},pC=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return p([g,w])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},JY=function(){function n(){}return n.failIfNotSupported=function(){return mC(this,void 0,void 0,function(){return pC(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return mC(this,void 0,void 0,function(){return pC(this,function(t){return[2,ZY.create(e)]})})},n}(),eQ=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function p(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,p)}g((r=r.apply(n,e||[])).next())})},tQ=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return p([g,w])}}function p(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},nQ=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=Ju.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=Ju.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return eQ(this,void 0,void 0,function(){var e,t,r,i,o,c,h;return tQ(this,function(p){switch(p.label){case 0:return e=function(g){for(var w=g.getVideoTracks(),E=0,T=w;E<T.length;E++){var R=T[E];R.enabled=!1,R.stop(),g.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=p.sent(),i=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return e(t),[2,i]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(o){for(var c=[],h=0,p=o;h<p.length;h++){var g=p[h];g.kind==="video"&&c.push({id:g.id,label:g.label})}e(c)},i=MediaStreamTrack;i.getSources(r)})},n}(),pr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(pr||(pr={}));var rQ=function(){function n(){this.state=pr.NOT_STARTED,this.onGoingTransactionNewState=pr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===pr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=pr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===pr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=pr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==pr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case pr.UNKNOWN:throw"Transition from unknown is not allowed";case pr.NOT_STARTED:this.failIfNewStateIs(e,[pr.PAUSED]);break;case pr.SCANNING:break;case pr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n}(),iQ=function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===pr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==pr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===pr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===pr.PAUSED},n}(),sQ=function(){function n(){}return n.create=function(){return new iQ(new rQ)},n}(),oQ=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bs=function(n){oQ(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(VY),aQ=function(){function n(e,t){this.logger=t,this.fps=bs.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=bs.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?s6.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!va(this.qrbox)},n.create=function(e,t){return new n(e,t)},n}(),gC=function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new BY(this.verbose),this.qrcode=new $Y(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=sQ.create()}return n.prototype.start=function(e,t,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=aQ.create(t,this.logger);this.clearElement();var p=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=p,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:bs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var E=this,T=this.stateManagerProxy.startTransition(pr.SCANNING);return new Promise(function(R,M){var D=g?h.videoConstraints:E.createVideoConstraints(e);if(!D){T.cancel(),M("videoConstraints should be defined");return}var L={};(!g||h.aspectRatio)&&(L.aspectRatio=h.aspectRatio);var H={onRenderSurfaceReady:function(z,W){E.setupUi(z,W,h),E.isScanning=!0,E.foreverScan(h,r,c)}};JY.failIfNotSupported().then(function(z){z.create(D).then(function(W){return W.render(o.element,L,H).then(function(Q){E.renderedCamera=Q,T.execute(),R(null)}).catch(function(Q){T.cancel(),M(Q)})}).catch(function(W){T.cancel(),M(Ju.errorGettingUserMedia(W))})}).catch(function(z){T.cancel(),M(Ju.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(pr.PAUSED),this.showPausedState(),(va(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(pr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(pr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(bs.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},n.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(va(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var h=c.width,p=c.height,g=document.getElementById(r.elementId),w=g.clientWidth?g.clientWidth:bs.DEFAULT_WIDTH,E=Math.max(g.clientHeight?g.clientHeight:p,bs.FILE_SCAN_MIN_HEIGHT),T=r.computeCanvasDrawConfig(h,p,w,E);if(t){var R=r.createCanvasElement(w,E,"qr-canvas-visible");R.style.display="inline-block",g.appendChild(R);var M=R.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=w,M.canvas.height=E,M.drawImage(c,0,0,h,p,T.x,T.y,T.width,T.height)}var D=bs.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(c.width,T.width),H=Math.max(c.height,T.height),z=L+2*D,W=H+2*D,Q=r.createCanvasElement(z,W);g.appendChild(Q);var ie=Q.getContext("2d");if(!ie)throw"Unable to get 2d context from canvas";ie.canvas.width=z,ie.canvas.height=W,ie.drawImage(c,0,0,h,p,D,D,L,H);try{r.qrcode.decodeRobustlyAsync(Q).then(function(le){i(lC.createFromQrcodeResult(le))}).catch(o)}catch(le){o("QR code parse error, error = ".concat(le))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return nQ.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!s6.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Ze.QR_CODE,Ze.AZTEC,Ze.CODABAR,Ze.CODE_39,Ze.CODE_93,Ze.CODE_128,Ze.DATA_MATRIX,Ze.MAXICODE,Ze.ITF,Ze.EAN_13,Ze.EAN_8,Ze.PDF_417,Ze.RSS_14,Ze.RSS_EXPANDED,Ze.UPC_A,Ze.UPC_E,Ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var c=o[i];LY(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(va(e))return!0;if(!va(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(va(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return va(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,t,o),h=function(g){if(g<bs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(bs.MIN_QR_BOX_SIZE,"px.")},p=function(g){return g>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};h(c.width),h(c.height),c.width=p(c.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},n.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var i=va(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:e,height:t},p=c?this.getShadedRegionBounds(e,t,o):h,g=this.createCanvasElement(p.width,p.height),w={willReadFrequently:!0},E=g.getContext("2d",w);E.canvas.width=p.width,E.canvas.height=p.height,this.element.append(g),c&&this.possiblyInsertShadingElement(this.element,e,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=E,this.canvasElement=g},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=Ju.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,lC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=Ju.codeParseError(i);return t(o,FY.createFrom(o)),!1})},n.prototype.foreverScan=function(e,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*c,g=this.qrRegion.height*h,w=this.qrRegion.x*c,E=this.qrRegion.y*h;this.context.drawImage(o,w,E,p,g,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,t,r)},i.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(R){!R&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){T()})):T()}).catch(function(R){i.logger.logError("Error happend while scanning context",R),T()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(M){if(M in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},h=Object.keys(e);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var p=Object.keys(e)[0];if(p!==t&&p!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(p===t){var g=e.facingMode;if(typeof g=="string"){if(c(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(c(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(o in E)return{deviceId:{exact:E["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var T=typeof E;throw"Invalid type of 'deviceId' = ".concat(T)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},n.prototype.computeCanvasDrawConfig=function(e,t,r,i){if(e<=r&&t<=i){var o=(r-e)/2,c=(i-t)/2;return{x:o,y:c,width:e,height:t}}else{var h=e,p=t;return e>r&&(t=r/e*t,e=r),t>i&&(e=i/t*e,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(p)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,i)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?bs.BORDER_SHADER_MATCH_COLOR:bs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,r){var i=e,o=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=va(r)?"qr-canvas":r,c},n.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},n.prototype.possiblyInsertShadingElement=function(e,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(bs.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var p=5,g=40;this.insertShaderBorders(o,g,p,-p,null,0,!0),this.insertShaderBorders(o,g,p,-p,null,0,!1),this.insertShaderBorders(o,g,p,null,-p,0,!0),this.insertShaderBorders(o,g,p,null,-p,0,!1),this.insertShaderBorders(o,p,g+p,-p,null,-p,!0),this.insertShaderBorders(o,p,g+p,null,-p,-p,!0),this.insertShaderBorders(o,p,g+p,-p,null,-p,!1),this.insertShaderBorders(o,p,g+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(o)}},n.prototype.insertShaderBorders=function(e,t,r,i,o,c,h){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=bs.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(t,"px"),p.style.height="".concat(r,"px"),i!==null&&(p.style.top="".concat(i,"px")),o!==null&&(p.style.bottom="".concat(o,"px")),h?p.style.left="".concat(c,"px"):p.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n}(),yC;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(yC||(yC={}));function lQ({onScan:n,onClose:e,onSwitchToManual:t}){const[r,i]=P.useState(!0),[o,c]=P.useState(null),[h,p]=P.useState(!1),g=P.useRef(null);P.useRef(null);const w=P.useCallback(()=>{g.current&&h&&g.current.stop().then(()=>{p(!1)}).catch(M=>{console.error("Error stopping scanner:",M)})},[h]),E=P.useCallback(async()=>{try{i(!0),c(null);const M=await gC.getCameras();if(M&&M.length===0){c("No camera found. Please enter the code manually."),i(!1);return}g.current=new gC("qr-reader"),await g.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},(D,L)=>{w(),Gn.success("Event found  joining now"),n(D)},D=>{}),p(!0),i(!1)}catch(M){console.error("Scanner error:",M),M.name==="NotAllowedError"||M.name==="PermissionDeniedError"?c("Please allow camera access to scan codes."):M.name==="NotFoundError"?c("No camera found. Please enter the code manually."):c("Could not start camera. Try entering the code manually."),i(!1)}},[n,w]);P.useEffect(()=>(E(),()=>{w()}),[E,w]);const T=()=>{w(),e()},R=()=>{w(),t()};return A.jsx(n0,{open:!0,onOpenChange:T,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[A.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent p-4",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("h3",{className:"text-white flex items-center gap-2 font-semibold",children:[A.jsx(Zm,{className:"w-5 h-5"}),"Scan Event QR Code"]}),A.jsx(Dt,{variant:"ghost",size:"icon",onClick:T,className:"text-white hover:bg-white/20 rounded-full",children:A.jsx(Li,{className:"w-5 h-5"})})]})}),A.jsxs("div",{className:"relative aspect-square bg-black",children:[r&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:A.jsxs("div",{className:"text-white text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),A.jsx("p",{className:"text-sm",children:"Starting camera..."})]})}),o&&A.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-20",children:[A.jsx(Zm,{className:"w-12 h-12 mx-auto mb-4 text-white opacity-50"}),A.jsx("p",{className:"text-white text-sm mb-4",children:o}),A.jsx(Dt,{variant:"outline",onClick:R,className:"text-white border-white hover:bg-white hover:text-black",children:"Enter Code Manually"})]}),A.jsx("div",{id:"qr-reader",className:`w-full h-full ${r||o?"opacity-0":"opacity-100"}`}),!o&&!r&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:A.jsxs("div",{className:"relative w-64 h-64",children:[A.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-pink-500 rounded-tl-2xl"}),A.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-pink-500 rounded-tr-2xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-pink-500 rounded-bl-2xl"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-pink-500 rounded-br-2xl"})]})})]}),A.jsx("div",{className:"bg-white dark:bg-gray-900 p-4 text-center",children:A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Position the QR code inside the frame."})})]})})})}function cQ({onSubmit:n,onClose:e}){const[t,r]=P.useState(""),[i,o]=P.useState(!1),c=async h=>{h.preventDefault(),t.trim()&&(o(!0),await n(t.trim().toUpperCase()),o(!1))};return A.jsx(n0,{open:!0,onOpenChange:e,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl",children:[A.jsxs(r0,{className:"text-center pb-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("div",{className:"flex-1"}),A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center",children:A.jsx(QC,{className:"w-8 h-8 text-white"})}),A.jsx("div",{className:"flex-1 flex justify-end",children:A.jsx(Dt,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:A.jsx(Li,{className:"w-5 h-5"})})})]}),A.jsx(i0,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Enter Event Code"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Enter the code provided by the event organizer"})]}),A.jsxs("form",{onSubmit:c,className:"space-y-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx(jl,{type:"text",placeholder:"e.g., WED2025",value:t,onChange:h=>r(h.target.value.toUpperCase()),className:"text-center text-lg font-mono tracking-wider border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 rounded-xl py-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",autoFocus:!0}),A.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Codes are usually 6-8 characters"})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx(Dt,{type:"button",variant:"outline",onClick:e,className:"flex-1 rounded-xl py-3 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Cancel"}),A.jsx(Dt,{type:"submit",disabled:!t.trim()||i,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl py-3",children:i?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):A.jsxs(A.Fragment,{children:["Join Event",A.jsx(Lw,{className:"w-4 h-4 ml-2"})]})})]})]})]})})})}function Iw(){const n=ta(),[e,t]=P.useState(null),[r,i]=P.useState(!1),o=w=>{try{const T=new URL(w).searchParams.get("code");T?(p(),n(qn(`join?code=${T.toUpperCase()}`))):alert("Invalid QR code: No event code found in URL.")}catch{typeof w=="string"&&w.trim().length>3?(p(),n(qn(`join?code=${w.toUpperCase()}`))):alert("Invalid QR code format.")}},c=w=>{p(),n(qn(`join?code=${w.toUpperCase()}`))},h=w=>{t(w)},p=()=>{t(null)},g=()=>{t("manualCodeEntry")};return A.jsxs("div",{className:"min-h-screen flex flex-col justify-between items-center px-6 py-8 relative overflow-hidden bg-white dark:bg-gray-900",children:[A.jsx("div",{className:"absolute inset-0 z-0",style:{background:"linear-gradient(135deg, rgba(251, 167, 213, 0.8) 0%, rgba(193, 135, 253, 0.8) 100%)"}}),A.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 w-full max-w-sm mx-auto",children:[A.jsxs("div",{className:"text-center mb-12",children:[A.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:A.jsx(ld,{className:"w-10 h-10 text-white"})}),A.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("h2",{className:"text-2xl font-medium text-white mb-4",children:"Meet singles at this event."}),A.jsx("button",{onClick:()=>i(!0),className:"text-white underline text-lg hover:opacity-80 transition-opacity",children:"See how it works"})]}),A.jsxs("div",{className:"space-y-4 w-full",children:[A.jsxs(Dt,{onClick:()=>h("qrScanner"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[A.jsx(JO,{className:"w-5 h-5 mr-3"}),"Scan QR Code"]}),A.jsxs(Dt,{onClick:()=>h("manualCodeEntry"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[A.jsx(QC,{className:"w-5 h-5 mr-3"}),"Enter Code Manually"]})]})]}),A.jsx("div",{className:"relative z-10 text-center",children:A.jsxs("p",{className:"text-white text-sm leading-relaxed",children:["By creating a temporary profile, you agree to our"," ",A.jsx("a",{href:"https://hooked-app.com/terms",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Terms"})," ","and"," ",A.jsx("a",{href:"https://hooked-app.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Privacy Policy"}),"."]})}),r&&A.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-sm w-full max-h-[70vh] overflow-y-auto relative",children:[A.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(Li,{className:"w-5 h-5"})}),A.jsxs("div",{className:"pr-8",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"How it works"}),A.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 space-y-3 text-sm leading-relaxed",children:[A.jsx("li",{children:" Scan the event's unique QR code"}),A.jsx("li",{children:" Create a temporary profile (first name only)"}),A.jsx("li",{children:" Discover other singles at this event"}),A.jsx("li",{children:" Match and chat privately"}),A.jsx("li",{children:" Everything expires when the event ends"})]})]})]})}),e==="qrScanner"&&A.jsx(lQ,{onScan:o,onClose:p,onSwitchToManual:g}),e==="manualCodeEntry"&&A.jsx(cQ,{onSubmit:c,onClose:p})]})}const uQ={UploadFile:nU},a6=uQ.UploadFile,Lr=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("rounded-xl border bg-card text-card-foreground shadow",n),...e}));Lr.displayName="Card";const Po=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("flex flex-col space-y-1.5 p-6",n),...e}));Po.displayName="CardHeader";const co=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("font-semibold leading-none tracking-tight",n),...e}));co.displayName="CardTitle";const dQ=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));dQ.displayName="CardDescription";const Vr=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("p-6 pt-0",n),...e}));Vr.displayName="CardContent";const hQ=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("flex items-center p-6 pt-0",n),...e}));hQ.displayName="CardFooter";function fQ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}function l6(){const n=ta(),[e,t]=P.useState(null),[r,i]=P.useState("manual"),[o,c]=P.useState({first_name:"",age:"",gender_identity:"",interested_in:"",profile_photo_url:""}),[h,p]=P.useState(!1),[g,w]=P.useState(!1),E={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}};P.useEffect(()=>{(async()=>{const D=localStorage.getItem("currentEventId");if(!D){n(qn("Home"));return}try{const L=await Eg.filter({id:D});L.length>0?t(L[0]):n(qn("Home"))}catch(L){console.error("Error fetching event details:",L),n(qn("Home"))}})()},[n]);const T=async M=>{const D=M.target.files[0];if(D){if(!D.type.startsWith("image/")){Gn.error("Please select an image file.");return}if(D.size>10*1024*1024){Gn.error("Image must be smaller than 10MB.");return}w(!0);try{const{file_url:L}=await a6({file:D});c(H=>({...H,profile_photo_url:L})),Gn.success("Photo uploaded successfully!")}catch(L){console.error("Error uploading photo:",L),Gn.error("Failed to upload photo. Please try again.")}finally{w(!1)}}},R=async M=>{if(M.preventDefault(),!o.first_name||!o.age||!o.gender_identity||!o.interested_in){Gn.error("Please fill in all fields.");return}if(!o.profile_photo_url){Gn.error("Please upload a profile photo.");return}p(!0),i("processing");try{const D=fQ(),L="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),H=`user_${D}@hooked-app.com`;await Gs.create({event_id:e.id,session_id:D,first_name:o.first_name,email:H,age:parseInt(o.age),gender_identity:o.gender_identity,interested_in:o.interested_in,profile_color:L,profile_photo_url:o.profile_photo_url,is_visible:!0}),localStorage.setItem("currentSessionId",D),localStorage.setItem("currentProfileColor",L),localStorage.setItem("currentProfilePhotoUrl",o.profile_photo_url),Gn.success("Profile created! Welcome to the event."),n(qn("Discovery"))}catch(D){console.error("Error creating profile:",D),Gn.error("Failed to create profile. Please try again."),i("manual")}finally{p(!1)}};return A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center px-4 py-8",children:A.jsx("div",{className:"w-full max-w-md",children:A.jsxs(Jf,{mode:"wait",children:[r==="manual"&&A.jsx(Zo.div,{...E,children:A.jsxs(Lr,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"text-center",children:[A.jsx(co,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Your Event Profile For:"}),A.jsx(co,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(e==null?void 0:e.name)||"This Event"})]}),A.jsx(Vr,{children:A.jsxs("form",{onSubmit:R,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Profile Photo *"}),A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsxs("div",{className:"relative",children:[A.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:g}),A.jsx("label",{htmlFor:"profile-photo-upload",className:"w-32 h-32 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-purple-400 transition-colors bg-gray-50 dark:bg-gray-700",children:g?A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}):o.profile_photo_url?A.jsx("img",{src:o.profile_photo_url,alt:"Profile preview",className:"w-full h-full rounded-full object-cover"}):A.jsxs("div",{className:"text-center",children:[A.jsx(wM,{className:"w-8 h-8 text-gray-400 dark:text-gray-500 mx-auto mb-2"}),A.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload Photo"})]})})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Required  Max 10MB"})]})]}),A.jsx("div",{children:A.jsx(jl,{type:"text",placeholder:"First Name *",value:o.first_name,onChange:M=>c(D=>({...D,first_name:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",required:!0})}),A.jsx("div",{children:A.jsx(jl,{type:"number",placeholder:"Age *",value:o.age,onChange:M=>c(D=>({...D,age:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",min:"18",max:"99",required:!0})}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I am a... *"}),A.jsx("div",{className:"grid grid-cols-2 gap-3",children:["man","woman"].map(M=>A.jsx("button",{type:"button",onClick:()=>c(D=>({...D,gender_identity:M})),className:`py-3 px-4 rounded-xl border-2 transition-all font-medium ${o.gender_identity===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I'm interested in... *"}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:["men","women","everyone"].map(M=>A.jsx("button",{type:"button",onClick:()=>c(D=>({...D,interested_in:M})),className:`py-3 px-2 rounded-xl border-2 transition-all font-medium text-sm ${o.interested_in===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),A.jsx(Dt,{type:"submit",disabled:h||g,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white py-3 rounded-xl",children:h?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating Profile..."]}):"Join Event"})]})})]})},"manual"),r==="processing"&&A.jsx(Zo.div,{...E,children:A.jsx(Lr,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:A.jsxs(Vr,{className:"p-8 text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Creating Your Profile"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Setting up your temporary profile for this event."})]})})},"processing")]})})})}const mQ=bg("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xo({className:n,variant:e,...t}){return A.jsx("div",{className:ln(mQ({variant:e}),n),...t})}var c6=["PageUp","PageDown"],u6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],d6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Xd="Slider",[Tw,pQ,gQ]=y4(Xd),[h6,EJ]=Gd(Xd,[gQ]),[yQ,Vg]=h6(Xd),f6=P.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:o=1,orientation:c="horizontal",disabled:h=!1,minStepsBetweenThumbs:p=0,defaultValue:g=[r],value:w,onValueChange:E=()=>{},onValueCommit:T=()=>{},inverted:R=!1,form:M,...D}=n,L=P.useRef(new Set),H=P.useRef(0),W=c==="horizontal"?xQ:wQ,[Q=[],ie]=Rf({prop:w,defaultProp:g,onChange:te=>{var q;(q=[...L.current][H.current])==null||q.focus(),E(te)}}),le=P.useRef(Q);function F(te){const X=AQ(Q,te);J(te,X)}function B(te){J(te,H.current)}function G(){const te=le.current[H.current];Q[H.current]!==te&&T(Q)}function J(te,X,{commit:q}={commit:!1}){const pe=SQ(o),re=RQ(Math.round((te-r)/o)*o+r,pe),Ie=kp(re,[r,i]);ie((we=[])=>{const se=EQ(we,Ie,X);if(CQ(se,p*o)){H.current=se.indexOf(Ie);const Te=String(se)!==String(we);return Te&&q&&T(se),Te?se:we}else return we})}return A.jsx(yQ,{scope:n.__scopeSlider,name:t,disabled:h,min:r,max:i,valueIndexToChangeRef:H,thumbs:L.current,values:Q,orientation:c,form:M,children:A.jsx(Tw.Provider,{scope:n.__scopeSlider,children:A.jsx(Tw.Slot,{scope:n.__scopeSlider,children:A.jsx(W,{"aria-disabled":h,"data-disabled":h?"":void 0,...D,ref:e,onPointerDown:an(D.onPointerDown,()=>{h||(le.current=Q)}),min:r,max:i,inverted:R,onSlideStart:h?void 0:F,onSlideMove:h?void 0:B,onSlideEnd:h?void 0:G,onHomeKeyDown:()=>!h&&J(r,0,{commit:!0}),onEndKeyDown:()=>!h&&J(i,Q.length-1,{commit:!0}),onStepKeyDown:({event:te,direction:X})=>{if(!h){const re=c6.includes(te.key)||te.shiftKey&&u6.includes(te.key)?10:1,Ie=H.current,we=Q[Ie],se=o*re*X;J(we+se,Ie,{commit:!0})}}})})})})});f6.displayName=Xd;var[m6,p6]=h6(Xd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xQ=P.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:o,onSlideStart:c,onSlideMove:h,onSlideEnd:p,onStepKeyDown:g,...w}=n,[E,T]=P.useState(null),R=bn(e,W=>T(W)),M=P.useRef(void 0),D=x4(i),L=D==="ltr",H=L&&!o||!L&&o;function z(W){const Q=M.current||E.getBoundingClientRect(),ie=[0,Q.width],F=n_(ie,H?[t,r]:[r,t]);return M.current=Q,F(W-Q.left)}return A.jsx(m6,{scope:n.__scopeSlider,startEdge:H?"left":"right",endEdge:H?"right":"left",direction:H?1:-1,size:"width",children:A.jsx(g6,{dir:D,"data-orientation":"horizontal",...w,ref:R,style:{...w.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:W=>{const Q=z(W.clientX);c==null||c(Q)},onSlideMove:W=>{const Q=z(W.clientX);h==null||h(Q)},onSlideEnd:()=>{M.current=void 0,p==null||p()},onStepKeyDown:W=>{const ie=d6[H?"from-left":"from-right"].includes(W.key);g==null||g({event:W,direction:ie?-1:1})}})})}),wQ=P.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:h,onStepKeyDown:p,...g}=n,w=P.useRef(null),E=bn(e,w),T=P.useRef(void 0),R=!i;function M(D){const L=T.current||w.current.getBoundingClientRect(),H=[0,L.height],W=n_(H,R?[r,t]:[t,r]);return T.current=L,W(D-L.top)}return A.jsx(m6,{scope:n.__scopeSlider,startEdge:R?"bottom":"top",endEdge:R?"top":"bottom",size:"height",direction:R?1:-1,children:A.jsx(g6,{"data-orientation":"vertical",...g,ref:E,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:D=>{const L=M(D.clientY);o==null||o(L)},onSlideMove:D=>{const L=M(D.clientY);c==null||c(L)},onSlideEnd:()=>{T.current=void 0,h==null||h()},onStepKeyDown:D=>{const H=d6[R?"from-bottom":"from-top"].includes(D.key);p==null||p({event:D,direction:H?-1:1})}})})}),g6=P.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:h,onStepKeyDown:p,...g}=n,w=Vg(Xd,t);return A.jsx(nn.span,{...g,ref:e,onKeyDown:an(n.onKeyDown,E=>{E.key==="Home"?(c(E),E.preventDefault()):E.key==="End"?(h(E),E.preventDefault()):c6.concat(u6).includes(E.key)&&(p(E),E.preventDefault())}),onPointerDown:an(n.onPointerDown,E=>{const T=E.target;T.setPointerCapture(E.pointerId),E.preventDefault(),w.thumbs.has(T)?T.focus():r(E)}),onPointerMove:an(n.onPointerMove,E=>{E.target.hasPointerCapture(E.pointerId)&&i(E)}),onPointerUp:an(n.onPointerUp,E=>{const T=E.target;T.hasPointerCapture(E.pointerId)&&(T.releasePointerCapture(E.pointerId),o(E))})})}),y6="SliderTrack",x6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=Vg(y6,t);return A.jsx(nn.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});x6.displayName=y6;var Cw="SliderRange",w6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=Vg(Cw,t),o=p6(Cw,t),c=P.useRef(null),h=bn(e,c),p=i.values.length,g=i.values.map(T=>E6(T,i.min,i.max)),w=p>1?Math.min(...g):0,E=100-Math.max(...g);return A.jsx(nn.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:h,style:{...n.style,[o.startEdge]:w+"%",[o.endEdge]:E+"%"}})});w6.displayName=Cw;var Sw="SliderThumb",v6=P.forwardRef((n,e)=>{const t=pQ(n.__scopeSlider),[r,i]=P.useState(null),o=bn(e,h=>i(h)),c=P.useMemo(()=>r?t().findIndex(h=>h.ref.current===r):-1,[t,r]);return A.jsx(vQ,{...n,ref:o,index:c})}),vQ=P.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...o}=n,c=Vg(Sw,t),h=p6(Sw,t),[p,g]=P.useState(null),w=bn(e,z=>g(z)),E=p?c.form||!!p.closest("form"):!0,T=G2(p),R=c.values[r],M=R===void 0?0:E6(R,c.min,c.max),D=bQ(r,c.values.length),L=T==null?void 0:T[h.size],H=L?IQ(L,M,h.direction):0;return P.useEffect(()=>{if(p)return c.thumbs.add(p),()=>{c.thumbs.delete(p)}},[p,c.thumbs]),A.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${M}% + ${H}px)`},children:[A.jsx(Tw.ItemSlot,{scope:n.__scopeSlider,children:A.jsx(nn.span,{role:"slider","aria-label":n["aria-label"]||D,"aria-valuemin":c.min,"aria-valuenow":R,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:w,style:R===void 0?{display:"none"}:n.style,onFocus:an(n.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),E&&A.jsx(_6,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:R},r)]})});v6.displayName=Sw;var _Q="RadioBubbleInput",_6=P.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(i,r),c=X2(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const p=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(p,"value").set;if(c!==e&&w){const E=new Event("input",{bubbles:!0});w.call(h,e),h.dispatchEvent(E)}},[c,e]),A.jsx(nn.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});_6.displayName=_Q;function EQ(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,o)=>i-o)}function E6(n,e,t){const o=100/(t-e)*(n-e);return kp(o,[0,100])}function bQ(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function AQ(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function IQ(n,e,t){const r=n/2,o=n_([0,50],[0,r]);return(r-o(e)*t)*t}function TQ(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function CQ(n,e){if(e>0){const t=TQ(n);return Math.min(...t)>=e}return!0}function n_(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function SQ(n){return(String(n).split(".")[1]||"").length}function RQ(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var b6=f6,NQ=x6,kQ=w6,PQ=v6;const Rw=P.forwardRef(({className:n,...e},t)=>A.jsxs(b6,{ref:t,className:ln("relative flex w-full touch-none select-none items-center",n),...e,children:[A.jsx(NQ,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:A.jsx(kQ,{className:"absolute h-full bg-primary"})}),A.jsx(PQ,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Rw.displayName=b6.displayName;const DQ=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing"],xC=["yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function OQ({filters:n,onFiltersChange:e,onClose:t}){const[r,i]=P.useState(n),[o,c]=P.useState(!1),h=w=>{i(E=>({...E,interests:E.interests.includes(w)?E.interests.filter(T=>T!==w):[...E.interests,w]}))},p=()=>{e(r),t()},g=()=>{const w={age_min:18,age_max:99,gender:"all",interests:[]};i(w),e(w),t()};return A.jsxs(n0,{open:!0,onOpenChange:t,children:[A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[A.jsx(r0,{className:"mb-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs(i0,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[A.jsx(YC,{className:"w-5 h-5"}),"Filter Profiles"]}),A.jsx(Dt,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:A.jsx(Li,{className:"w-4 h-4"})})]})}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-base font-medium mb-4 block text-gray-900 dark:text-white",children:"Age Range"}),A.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[A.jsxs("span",{className:"text-sm font-medium text-pink-600 dark:text-pink-400",children:["Min Age: ",r.age_min]}),A.jsxs("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:["Max Age: ",r.age_max]})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Drag the handles to set your preferred age range"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Minimum Age"}),A.jsx("div",{className:"relative",children:A.jsx(Rw,{value:[r.age_min],onValueChange:([w])=>i(E=>({...E,age_min:w<E.age_max?w:E.age_max-1})),min:18,max:99,step:1,className:"age-slider-min"})})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Maximum Age"}),A.jsx("div",{className:"relative",children:A.jsx(Rw,{value:[r.age_max],onValueChange:([w])=>i(E=>({...E,age_max:w>E.age_min?w:E.age_min+1})),min:18,max:99,step:1,className:"age-slider-max"})})]})]})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-base font-medium mb-3 block text-gray-900 dark:text-white",children:"Must Share These Interests"}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[DQ.map(w=>A.jsx(Xo,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w)),!o&&r.interests.filter(w=>xC.includes(w)).map(w=>A.jsx(Xo,{variant:"default",className:"cursor-pointer px-3 py-2 rounded-full transition-all bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",onClick:()=>h(w),children:w},`selected-${w}`))]}),A.jsx("div",{className:"text-center mt-3",children:A.jsx(Dt,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(!o),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","aria-label":o?"Show less interests":"Show more interests",children:o?A.jsx(XC,{className:"w-5 h-5"}):A.jsx(Vw,{className:"w-5 h-5"})})}),A.jsx(Jf,{children:o&&A.jsx(Zo.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:A.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:xC.map(w=>A.jsx(Xo,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w))})})}),r.interests.length>0&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Showing only people who share at least one selected interest."})]}),A.jsxs("div",{className:"flex gap-3 pt-4",children:[A.jsx(Dt,{onClick:g,variant:"outline",className:"flex-1 rounded-xl border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Reset All"}),A.jsx(Dt,{onClick:p,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl",children:"Apply Filters"})]})]})]})}),A.jsx("style",{jsx:!0,children:`
        .age-slider-min [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #f87171 0%, #f87171 100%);
          border-radius: 3px;
        }
        
        .age-slider-max [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #a855f7 0%, #a855f7 100%);
          border-radius: 3px;
        }
        
        .age-slider-min [role="slider"],
        .age-slider-max [role="slider"] {
          width: 20px;
          height: 20px;
          background: white;
          border: 3px solid;
          border-radius: 50%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          transition: all 0.2s ease;
        }
        
        .age-slider-min [role="slider"] {
          border-color: #f87171;
        }
        
        .age-slider-max [role="slider"] {
          border-color: #a855f7;
        }
        
        .age-slider-min [role="slider"]:hover,
        .age-slider-max [role="slider"]:hover {
          transform: scale(1.1);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .age-slider-min [role="slider"]:focus,
        .age-slider-max [role="slider"]:focus {
          outline: none;
          transform: scale(1.15);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
      `})]})}function A6({profile:n,onClose:e,onLike:t,isLiked:r}){if(P.useEffect(()=>{const T=R=>{R.key==="Escape"&&e()};return document.addEventListener("keydown",T),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",T),document.body.style.overflow="auto"}},[e]),!n)return null;const{profile_photo_url:i,profile_color:o,first_name:c,age:h,height:p,interests:g,bio:w}=n,E=c?c[0].toUpperCase():"?";return A.jsx(Jf,{children:A.jsx(Zo.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",onClick:e,children:A.jsxs(Zo.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"relative w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[i?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:i,alt:`${c}'s profile photo`,className:"w-full h-80 object-cover",loading:"lazy",onError:T=>{T.target.style.display="none";const R=T.target.nextElementSibling;R&&(R.style.display="flex")}}),A.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl absolute inset-0",style:{backgroundColor:o||"#cccccc",display:"none"},children:E})]}):A.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl",style:{backgroundColor:o||"#cccccc"},children:E}),A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors z-10","aria-label":"Close profile",children:A.jsx(Li,{className:"w-6 h-6"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:c}),A.jsxs("div",{className:"flex items-center gap-4 text-gray-600 dark:text-gray-400",children:[h&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(vO,{className:"w-4 h-4"}),A.jsxs("span",{children:[h," years old"]})]}),p&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(rM,{className:"w-4 h-4"}),A.jsxs("span",{children:[p," cm"]})]})]})]}),w&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"About"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:w})]}),g&&g.length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Interests"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(T=>A.jsx(Xo,{variant:"outline",className:"rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:T},T))})]}),A.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:A.jsxs(Dt,{onClick:t,disabled:r,className:`w-full rounded-xl py-3 transition-all ${r?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white"}`,children:[A.jsx(ld,{className:`w-5 h-5 mr-2 ${r?"":"hover:fill-current"}`}),r?"Already Liked":`Like ${c}`]})})]})]})})})}function I6(){const n=ta(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState([]),[h,p]=P.useState(null),[g,w]=P.useState(null),[E,T]=P.useState({age_min:18,age_max:99,gender:"all",interests:[]}),[R,M]=P.useState(!1),[D,L]=P.useState(!0),[H,z]=P.useState(new Set),[W,Q]=P.useState(null),[ie,le]=P.useState(!0),F=P.useRef({profiles:null,likes:null});P.useEffect(()=>(J(),()=>{B()}),[]),P.useEffect(()=>{r&&e.length>=0&&te()},[e,E,r]),P.useEffect(()=>{const pe=()=>{le(!document.hidden)};return le(!document.hidden),document.addEventListener("visibilitychange",pe),()=>document.removeEventListener("visibilitychange",pe)},[]),P.useEffect(()=>{if(!(h!=null&&h.id)||!g){B();return}G()},[h==null?void 0:h.id,g]);const B=()=>{Object.values(F.current).forEach(pe=>{pe&&pe()}),F.current={profiles:null,likes:null},console.log(" All Discovery listeners cleaned up")},G=()=>{B();try{F.current.profiles=Gs.onProfilesChange(h.id,pe=>{const re=pe.filter(se=>se.is_visible),Ie=re.find(se=>se.session_id===g),we=re.filter(se=>se.session_id!==g);i(Ie),t(we),Ie||(console.warn("Current user profile not found for session, redirecting."),n(qn("Home")))},{is_visible:!0}),F.current.likes=us.onLikesChange(h.id,g,pe=>{z(new Set(pe.map(re=>re.liked_session_id)))}),console.log(" Real-time listeners setup complete")}catch(pe){console.error(" Error setting up real-time listeners:",pe)}},J=async()=>{const pe=localStorage.getItem("currentEventId"),re=localStorage.getItem("currentSessionId");if(!pe||!re){n(qn("Home"));return}w(re);try{const Ie=await Eg.filter({id:pe});if(Ie.length>0)p(Ie[0]);else{n(qn("Home"));return}}catch(Ie){console.error("Error initializing session:",Ie)}L(!1)},te=()=>{if(!r){c([]);return}let pe=e.filter(re=>{var se;const Ie=r.interested_in==="everyone"||r.interested_in==="men"&&re.gender_identity==="man"||r.interested_in==="women"&&re.gender_identity==="woman"||r.interested_in==="non-binary"&&re.gender_identity==="non-binary",we=re.interested_in==="everyone"||re.interested_in==="men"&&r.gender_identity==="man"||re.interested_in==="women"&&r.gender_identity==="woman"||re.interested_in==="non-binary"&&r.gender_identity==="non-binary";return!(!Ie||!we||!(re.age>=E.age_min&&re.age<=E.age_max)||E.gender!=="all"&&re.gender_identity!==E.gender||E.interests.length>0&&!((se=re.interests)!=null&&se.some(Te=>E.interests.includes(Te))))});c(pe)},X=async pe=>{if(H.has(pe.session_id)||!r)return;const re=localStorage.getItem("currentEventId"),Ie=r.session_id;try{z(Te=>new Set([...Te,pe.session_id]));const we=await us.create({event_id:re,liker_session_id:Ie,liked_session_id:pe.session_id,is_mutual:!1,liker_notified_of_match:!1,liked_notified_of_match:!1}),se=await us.filter({event_id:re,liker_session_id:pe.session_id,liked_session_id:Ie});if(se.length>0){const Te=se[0];await us.update(we.id,{is_mutual:!0,liker_notified_of_match:!0}),await us.update(Te.id,{is_mutual:!0,liked_notified_of_match:!0}),alert(` It's a Match! You and ${pe.first_name} liked each other.`),n(qn("Matches"))}}catch(we){console.error("Error liking profile:",we),z(se=>{const Te=new Set(se);return Te.delete(pe.session_id),Te})}},q=pe=>{Q(pe)};return P.useEffect(()=>{const pe=setInterval(()=>{},3e4);return()=>clearInterval(pe)},[]),D?A.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading singles at this event..."})]})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:A.jsx(ld,{className:"w-3 h-3 text-white"})}),A.jsx("span",{className:"font-semibold text-lg bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),A.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Singles at ",h==null?void 0:h.name]}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[o.length," people discovered"]})]}),A.jsx(Dt,{onClick:()=>M(!0),variant:"outline",size:"icon",className:"rounded-full border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:A.jsx(YC,{className:"w-5 h-5"})})]}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map(pe=>A.jsx("div",{className:"relative",children:A.jsx(Lr,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer overflow-hidden bg-white dark:bg-gray-800",onClick:()=>q(pe),children:A.jsx(Vr,{className:"p-0",children:A.jsxs("div",{className:"relative aspect-square",children:[pe.profile_photo_url?A.jsx("img",{src:pe.profile_photo_url,alt:`${pe.first_name}'s profile`,className:"w-full h-full object-cover",loading:"lazy",onError:re=>{re.target.style.display="none";const Ie=re.target.nextElementSibling;Ie&&(Ie.style.display="flex")}}):null,A.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-semibold text-lg absolute inset-0",style:{backgroundColor:pe.profile_color||"#cccccc",display:pe.profile_photo_url?"none":"flex"},children:pe.first_name[0]}),A.jsx("button",{onClick:re=>{re.stopPropagation(),X(pe)},disabled:H.has(pe.session_id),className:`absolute top-2 right-2 p-2 rounded-full shadow-lg transition-all ${H.has(pe.session_id)?"bg-white/90 dark:bg-gray-800/90 text-pink-500 cursor-not-allowed":"bg-white/90 dark:bg-gray-800/90 text-gray-400 dark:text-gray-500 hover:bg-pink-50 dark:hover:bg-pink-900/20 hover:text-pink-500 hover:scale-110"}`,children:A.jsx(ld,{className:`w-4 h-4 ${H.has(pe.session_id)?"fill-current text-pink-500":"text-gray-400 dark:text-gray-500 hover:text-pink-500"}`})}),A.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:A.jsx("h3",{className:"font-semibold text-white text-sm truncate",children:pe.first_name})})]})})})},pe.id))}),o.length===0&&!D&&A.jsx(Lr,{className:"border-0 shadow-lg mt-8 bg-white dark:bg-gray-800",children:A.jsxs(Vr,{className:"p-8 text-center",children:[A.jsx(ud,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"No singles found"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"Try adjusting your filters or check back later as more people join the event."}),A.jsx(Dt,{onClick:()=>M(!0),variant:"outline",className:"rounded-xl border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:"Adjust Filters"})]})}),R&&A.jsx(OQ,{filters:E,onFiltersChange:T,onClose:()=>M(!1)}),W&&A.jsx(A6,{profile:W,onClose:()=>Q(null),onLike:()=>{X(W),Q(null)},isLiked:H.has(W.session_id)})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{onClick:()=>n(qn("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(Dd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Profile"})]}),A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(ud,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Discover"})]}),A.jsxs("button",{onClick:()=>n(qn("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(cd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Matches"})]})]})})})]})}function xo(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function ru(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const T6=6048e5,MQ=864e5;let LQ={};function Fg(){return LQ}function Nf(n,e){var h,p,g,w;const t=Fg(),r=(e==null?void 0:e.weekStartsOn)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??t.weekStartsOn??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,i=xo(n),o=i.getDay(),c=(o<r?7:0)+o-r;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function Up(n){return Nf(n,{weekStartsOn:1})}function C6(n){const e=xo(n),t=e.getFullYear(),r=ru(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=Up(r),o=ru(n,0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);const c=Up(o);return e.getTime()>=i.getTime()?t+1:e.getTime()>=c.getTime()?t:t-1}function wC(n){const e=xo(n);return e.setHours(0,0,0,0),e}function vC(n){const e=xo(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function VQ(n,e){const t=wC(n),r=wC(e),i=+t-vC(t),o=+r-vC(r);return Math.round((i-o)/MQ)}function FQ(n){const e=C6(n),t=ru(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Up(t)}function BQ(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function jQ(n){if(!BQ(n)&&typeof n!="number")return!1;const e=xo(n);return!isNaN(Number(e))}function UQ(n){const e=xo(n),t=ru(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const zQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},WQ=(n,e,t)=>{let r;const i=zQ[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function ex(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const HQ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$Q={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qQ={date:ex({formats:HQ,defaultWidth:"full"}),time:ex({formats:GQ,defaultWidth:"full"}),dateTime:ex({formats:$Q,defaultWidth:"full"})},KQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},XQ=(n,e,t,r)=>KQ[n];function Rh(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,h=t!=null&&t.width?String(t.width):c;i=n.formattingValues[h]||n.formattingValues[c]}else{const c=n.defaultWidth,h=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[h]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const YQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nZ=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},rZ={ordinalNumber:nZ,era:Rh({values:YQ,defaultWidth:"wide"}),quarter:Rh({values:QQ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Rh({values:ZQ,defaultWidth:"wide"}),day:Rh({values:JQ,defaultWidth:"wide"}),dayPeriod:Rh({values:eZ,defaultWidth:"wide",formattingValues:tZ,defaultFormattingWidth:"wide"})};function Nh(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const c=o[0],h=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(h)?sZ(h,E=>E.test(c)):iZ(h,E=>E.test(c));let g;g=n.valueCallback?n.valueCallback(p):p,g=t.valueCallback?t.valueCallback(g):g;const w=e.slice(c.length);return{value:g,rest:w}}}function iZ(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function sZ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function oZ(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(i.length);return{value:c,rest:h}}}const aZ=/^(\d+)(th|st|nd|rd)?/i,lZ=/\d+/i,cZ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uZ={any:[/^b/i,/^(a|c)/i]},dZ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hZ={any:[/1/i,/2/i,/3/i,/4/i]},fZ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},mZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pZ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gZ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yZ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xZ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wZ={ordinalNumber:oZ({matchPattern:aZ,parsePattern:lZ,valueCallback:n=>parseInt(n,10)}),era:Nh({matchPatterns:cZ,defaultMatchWidth:"wide",parsePatterns:uZ,defaultParseWidth:"any"}),quarter:Nh({matchPatterns:dZ,defaultMatchWidth:"wide",parsePatterns:hZ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Nh({matchPatterns:fZ,defaultMatchWidth:"wide",parsePatterns:mZ,defaultParseWidth:"any"}),day:Nh({matchPatterns:pZ,defaultMatchWidth:"wide",parsePatterns:gZ,defaultParseWidth:"any"}),dayPeriod:Nh({matchPatterns:yZ,defaultMatchWidth:"any",parsePatterns:xZ,defaultParseWidth:"any"})},vZ={code:"en-US",formatDistance:WQ,formatLong:qQ,formatRelative:XQ,localize:rZ,match:wZ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _Z(n){const e=xo(n);return VQ(e,UQ(e))+1}function EZ(n){const e=xo(n),t=+Up(e)-+FQ(e);return Math.round(t/T6)+1}function S6(n,e){var w,E,T,R;const t=xo(n),r=t.getFullYear(),i=Fg(),o=(e==null?void 0:e.firstWeekContainsDate)??((E=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((R=(T=i.locale)==null?void 0:T.options)==null?void 0:R.firstWeekContainsDate)??1,c=ru(n,0);c.setFullYear(r+1,0,o),c.setHours(0,0,0,0);const h=Nf(c,e),p=ru(n,0);p.setFullYear(r,0,o),p.setHours(0,0,0,0);const g=Nf(p,e);return t.getTime()>=h.getTime()?r+1:t.getTime()>=g.getTime()?r:r-1}function bZ(n,e){var h,p,g,w;const t=Fg(),r=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??t.firstWeekContainsDate??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,i=S6(n,e),o=ru(n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Nf(o,e)}function AZ(n,e){const t=xo(n),r=+Nf(t,e)-+bZ(t,e);return Math.round(r/T6)+1}function wn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const gl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return wn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):wn(t+1,2)},d(n,e){return wn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return wn(n.getHours()%12||12,e.length)},H(n,e){return wn(n.getHours(),e.length)},m(n,e){return wn(n.getMinutes(),e.length)},s(n,e){return wn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return wn(i,e.length)}},Uu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_C={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return gl.y(n,e)},Y:function(n,e,t,r){const i=S6(n,r),o=i>0?i:1-i;if(e==="YY"){const c=o%100;return wn(c,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):wn(o,e.length)},R:function(n,e){const t=C6(n);return wn(t,e.length)},u:function(n,e){const t=n.getFullYear();return wn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return gl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=AZ(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):wn(i,e.length)},I:function(n,e,t){const r=EZ(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):gl.d(n,e)},D:function(n,e,t){const r=_Z(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return wn(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return wn(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return wn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Uu.noon:r===0?i=Uu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Uu.evening:r>=12?i=Uu.afternoon:r>=4?i=Uu.morning:i=Uu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return gl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):gl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):gl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):gl.s(n,e)},S:function(n,e){return gl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return bC(r);case"XXXX":case"XX":return Ec(r);case"XXXXX":case"XXX":default:return Ec(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return bC(r);case"xxxx":case"xx":return Ec(r);case"xxxxx":case"xxx":default:return Ec(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+EC(r,":");case"OOOO":default:return"GMT"+Ec(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+EC(r,":");case"zzzz":default:return"GMT"+Ec(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return wn(r,e.length)},T:function(n,e,t){const r=n.getTime();return wn(r,e.length)}};function EC(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+wn(o,2)}function bC(n,e){return n%60===0?(n>0?"-":"+")+wn(Math.abs(n)/60,2):Ec(n,e)}function Ec(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=wn(Math.trunc(r/60),2),o=wn(r%60,2);return t+i+e+o}const AC=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},R6=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},IZ=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return AC(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",AC(r,e)).replace("{{time}}",R6(i,e))},TZ={p:R6,P:IZ},CZ=/^D+$/,SZ=/^Y+$/,RZ=["D","DD","YY","YYYY"];function NZ(n){return CZ.test(n)}function kZ(n){return SZ.test(n)}function PZ(n,e,t){const r=DZ(n,e,t);if(console.warn(r),RZ.includes(n))throw new RangeError(r)}function DZ(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const OZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LZ=/^'([^]*?)'?$/,VZ=/''/g,FZ=/[a-zA-Z]/;function BZ(n,e,t){var w,E,T,R;const r=Fg(),i=r.locale??vZ,o=r.firstWeekContainsDate??((E=(w=r.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)??1,c=r.weekStartsOn??((R=(T=r.locale)==null?void 0:T.options)==null?void 0:R.weekStartsOn)??0,h=xo(n);if(!jQ(h))throw new RangeError("Invalid time value");let p=e.match(MZ).map(M=>{const D=M[0];if(D==="p"||D==="P"){const L=TZ[D];return L(M,i.formatLong)}return M}).join("").match(OZ).map(M=>{if(M==="''")return{isToken:!1,value:"'"};const D=M[0];if(D==="'")return{isToken:!1,value:jZ(M)};if(_C[D])return{isToken:!0,value:M};if(D.match(FZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:M}});i.localize.preprocessor&&(p=i.localize.preprocessor(h,p));const g={firstWeekContainsDate:o,weekStartsOn:c,locale:i};return p.map(M=>{if(!M.isToken)return M.value;const D=M.value;(kZ(D)||NZ(D))&&PZ(D,e,String(n));const L=_C[D[0]];return L(h,D,i.localize,g)}).join("")}function jZ(n){const e=n.match(LZ);return e?e[1].replace(VZ,"'"):n}function UZ({matchName:n,onConfirm:e,onCancel:t,isSharing:r}){const[i,o]=P.useState({fullName:"",phoneNumber:""}),[c,h]=P.useState("confirm"),[p,g]=P.useState(!1),w=async()=>{var R,M,D,L;if(g(!0),navigator.contacts)try{const H=await navigator.contacts.select(["name","tel"]);if(H&&H.length>0){const z=H[0],W=((M=(R=z.name)==null?void 0:R[0])==null?void 0:M.formatted)||"",Q=((L=(D=z.tel)==null?void 0:D[0])==null?void 0:L.value)||"";if(W&&Q){o({fullName:W,phoneNumber:Q}),T({fullName:W,phoneNumber:Q}),g(!1);return}}}catch{console.log("Contact access not available or denied, falling back to manual entry")}h("enter"),g(!1)},E=()=>{!i.fullName.trim()||!i.phoneNumber.trim()||T(i)},T=async R=>{g(!0);try{await e(R),h("success"),setTimeout(()=>{t()},2e3)}catch(M){console.error("Error sharing contact info:",M),alert("Failed to share contact info. Please try again.")}g(!1)};return A.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:A.jsxs(Zo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl relative",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:A.jsx(Li,{className:"w-5 h-5"})}),c==="confirm"&&A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Jm,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Share Contact Info?"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:["This will share your name and phone number with ",A.jsx("span",{className:"font-medium",children:n}),". This action cannot be undone."]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx(Dt,{onClick:t,variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:p,children:"Not Yet"}),A.jsx(Dt,{onClick:w,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:p,children:p?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Share"})]})]}),c==="enter"&&A.jsxs("div",{children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Dd,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-center text-gray-900 dark:text-white",children:"Enter Your Contact Info"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center text-sm",children:["Please enter your details to share with ",n]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx(cs,{htmlFor:"fullName",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),A.jsx(jl,{id:"fullName",type:"text",placeholder:"Your full name",value:i.fullName,onChange:R=>o(M=>({...M,fullName:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",autoFocus:!0})]}),A.jsxs("div",{children:[A.jsx(cs,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),A.jsx(jl,{id:"phoneNumber",type:"tel",placeholder:"Your phone number",value:i.phoneNumber,onChange:R=>o(M=>({...M,phoneNumber:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),A.jsxs("div",{className:"flex gap-3 mt-6",children:[A.jsx(Dt,{onClick:()=>h("confirm"),variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Back"}),A.jsx(Dt,{onClick:E,disabled:!i.fullName.trim()||!i.phoneNumber.trim()||p,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",children:p?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Confirm Share"})]})]}),c==="success"&&A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(NO,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Contact Info Shared!"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:["Your contact information has been shared with ",n,". They can now see your name and phone number."]})]})]})})}function zZ({match:n,onClose:e}){var X;const[t,r]=P.useState([]),[i,o]=P.useState(""),[c,h]=P.useState(!0),[p,g]=P.useState(!1),[w,E]=P.useState(!1),[T,R]=P.useState(null),[M,D]=P.useState(!0),L=P.useRef(null),H=localStorage.getItem("currentSessionId"),z=localStorage.getItem("currentEventId"),W=`${H}_${n.session_id}`.split("").sort().join(""),[Q,ie]=P.useState(!1);P.useEffect(()=>{ie(!1)},[n.session_id]);const le=P.useCallback(async()=>{try{const q=await Sc.filter({match_id:W,receiver_session_id:H,is_read:!1,event_id:z});q.length>0&&await Promise.all(q.map(pe=>Sc.update(pe.id,{is_read:!0})))}catch(q){console.error("Error marking messages as read:",q)}},[W,H,z]),F=P.useCallback(async()=>{try{const q=await Sc.filter({event_id:z,match_id:W},"created_date");r(q),le()}catch(q){console.error("Error loading messages:",q)}h(!1)},[z,W,le]);P.useEffect(()=>{const q=()=>{D(!document.hidden)};return document.addEventListener("visibilitychange",q),()=>document.removeEventListener("visibilitychange",q)},[]),P.useEffect(()=>{F(),G();const q=setInterval(()=>{M&&(F(),G())},3e4);return()=>clearInterval(q)},[M,F]),P.useEffect(()=>{B()},[t]);const B=()=>{var q;(q=L.current)==null||q.scrollIntoView({behavior:"smooth"})},G=async()=>{try{(await Cy.filter({event_id:z,match_id:W,sharer_session_id:H})).length>0&&E(!0);const pe=await Cy.filter({event_id:z,match_id:W,sharer_session_id:n.session_id,recipient_session_id:H});pe.length>0&&R(pe[0])}catch(q){console.error("Error loading contact shares:",q)}},J=async q=>{if(q.preventDefault(),!i.trim())return;const pe=i.trim();o("");try{const re={id:`temp_${Date.now()}`,content:pe,sender_session_id:H,created_date:new Date().toISOString()};r(Ie=>[...Ie,re]),await Sc.create({event_id:z,sender_session_id:H,receiver_session_id:n.session_id,content:pe,match_id:W,is_read:!1})}catch(re){console.error("Error sending message:",re),r(Ie=>Ie.filter(we=>!we.id.startsWith("temp_"))),o(pe)}},te=async q=>{try{await Cy.create({event_id:z,sharer_session_id:H,recipient_session_id:n.session_id,full_name:q.fullName,phone_number:q.phoneNumber,match_id:W}),E(!0),g(!1),G()}catch(pe){throw console.error("Error sharing contact info:",pe),pe}};return A.jsx(n0,{open:!0,onOpenChange:e,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm h-[600px] bg-white dark:bg-gray-900 rounded-2xl flex flex-col shadow-2xl",children:[A.jsxs(r0,{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-t-2xl",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[n.profile_photo_url&&!Q?A.jsx("img",{src:n.profile_photo_url,alt:`${n.first_name}'s avatar`,className:"w-10 h-10 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700",loading:"lazy",onError:()=>ie(!0)}):A.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:n.profile_color},children:n.first_name[0]}),A.jsxs("div",{children:[A.jsx(i0,{className:"text-lg text-gray-900 dark:text-white",children:n.first_name}),A.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A.jsx(Bw,{className:"w-3 h-3 text-gray-400 dark:text-gray-500"}),A.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Expires at midnight"})]})]}),A.jsxs("div",{className:"flex gap-1",children:[!w&&A.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>g(!0),className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",title:"Share contact info",children:A.jsx(cb,{className:"w-4 h-4"})}),A.jsx(Dt,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(Li,{className:"w-4 h-4"})})]})]}),A.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:(X=n.interests)==null?void 0:X.map(q=>A.jsx(Xo,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-700 text-purple-600 dark:text-purple-300 bg-white dark:bg-gray-800",children:q},q))}),(w||T)&&A.jsxs("div",{className:"mt-3 space-y-2",children:[w&&A.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[A.jsx(cb,{className:"w-3 h-3"}),A.jsx("span",{children:"You shared your contact info"})]}),T&&A.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 mb-2",children:[A.jsx(Jm,{className:"w-3 h-3"}),A.jsxs("span",{children:[n.first_name," shared their contact info"]})]}),A.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(Dd,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),A.jsx("span",{className:"font-medium",children:T.full_name})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Jm,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),A.jsx("span",{className:"font-mono",children:T.phone_number})]})]})]})]})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-800",children:[c?A.jsx("div",{className:"flex justify-center py-8",children:A.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):t.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:A.jsxs("p",{className:"text-sm",children:[" You matched! Say hello to ",n.first_name]})}):t.map(q=>A.jsx("div",{className:`flex ${q.sender_session_id===H?"justify-end":"justify-start"}`,children:A.jsxs("div",{className:`max-w-[80%] px-4 py-2 rounded-2xl ${q.sender_session_id===H?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[A.jsx("p",{className:"text-sm",children:q.content}),A.jsx("p",{className:`text-xs mt-1 ${q.sender_session_id===H?"text-purple-100":"text-gray-500 dark:text-gray-400"}`,children:BZ(new Date(q.created_date),"HH:mm")})]})},q.id)),A.jsx("div",{ref:L})]}),A.jsx("form",{onSubmit:J,className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 rounded-b-2xl",children:A.jsxs("div",{className:"flex gap-2",children:[A.jsx(jl,{value:i,onChange:q=>o(q.target.value),placeholder:`Message ${n.first_name}...`,className:"flex-1 rounded-full border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsx(Dt,{type:"submit",disabled:!i.trim(),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-full",size:"icon",children:A.jsx(oM,{className:"w-4 h-4"})})]})}),p&&A.jsx(UZ,{matchName:n.first_name,onConfirm:te,onCancel:()=>g(!1)})]})})})}function N6(){const n=ta(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState(null),[h,p]=P.useState(!0),[g,w]=P.useState(!0),E=localStorage.getItem("currentSessionId"),T=localStorage.getItem("currentEventId"),R=P.useRef({matches:null,messages:null}),M=P.useCallback(async z=>{if(!E||!T||z.length===0)return;const W=await us.filter({event_id:T,is_mutual:!0});for(const Q of z){const ie=W.find(F=>F.liker_session_id===E&&F.liked_session_id===Q.session_id);if(ie&&!ie.liker_notified_of_match)try{await us.update(ie.id,{liker_notified_of_match:!0})}catch(F){console.error("Error updating my like notification status:",F)}const le=W.find(F=>F.liker_session_id===Q.session_id&&F.liked_session_id===E);if(le&&!le.liked_notified_of_match)try{await us.update(le.id,{liked_notified_of_match:!0})}catch(F){console.error("Error updating their like notification status:",F)}}},[E,T]),D=P.useCallback(async()=>{if(!E||!T){p(!1);return}try{const z=await us.filter({liker_session_id:E,event_id:T,is_mutual:!0}),W=await us.filter({liked_session_id:E,event_id:T,is_mutual:!0}),Q=new Set([...z.map(F=>F.liked_session_id),...W.map(F=>F.liker_session_id)]);if(Q.size===0){t([]),p(!1);return}const ie=await Gs.filter({session_id:Array.from(Q),event_id:T}),le=await Promise.all(ie.map(async F=>{const B=[E,F.session_id].sort(),G=`${B[0]}_${B[1]}`,J=await Sc.filter({match_id:G,receiver_session_id:E,is_read:!1,event_id:T});return{...F,unreadCount:J.length}}));t(le.filter(Boolean)),ie.length>0&&M(ie)}catch(z){console.error("Error loading matches:",z)}p(!1)},[E,T,M]),L=()=>{Object.values(R.current).forEach(z=>{z&&z()}),R.current={matches:null,messages:null},console.log(" All Matches listeners cleaned up")},H=P.useCallback(()=>{if(!E||!T){L();return}L();try{R.current.matches=us.onLikesChange(T,E,async z=>{z.filter(Q=>Q.is_mutual).length>0&&await D()}),R.current.messages=Sc.onMessagesChange(T,E,async z=>{await D()}),console.log(" Matches real-time listeners setup complete")}catch(z){console.error(" Error setting up Matches real-time listeners:",z)}},[E,T,D]);return P.useEffect(()=>(D(),H(),()=>{L()}),[D,H]),P.useEffect(()=>{const z=()=>{w(!document.hidden)};return document.addEventListener("visibilitychange",z),()=>document.removeEventListener("visibilitychange",z)},[]),P.useEffect(()=>{const W=new URLSearchParams(window.location.search).get("openChat");if(W&&e.length>0){const Q=e.find(ie=>ie.session_id===W);Q&&(i(Q),window.history.replaceState({},document.title,window.location.pathname))}},[e]),P.useEffect(()=>{const z=setInterval(()=>{},3e4);return()=>clearInterval(z)},[]),h?A.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your matches..."})]})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:A.jsx(ld,{className:"w-8 h-8 text-white"})}),A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Matches"}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.length," mutual ",e.length===1?"connection":"connections"," at this event"]})]}),A.jsxs("div",{className:"space-y-4",children:[e.map(z=>{var W,Q;return A.jsx(Lr,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-white dark:bg-gray-800",children:A.jsx(Vr,{className:"p-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("div",{className:"relative",children:[z.profile_photo_url?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:z.profile_photo_url,alt:`${z.first_name}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700 cursor-pointer hover:opacity-80 transition-opacity",loading:"lazy",onClick:()=>c(z),onError:ie=>{ie.target.style.display="none";const le=ie.target.nextElementSibling;le&&(le.style.display="flex")}}),A.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity absolute inset-0 border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color,display:"none"},onClick:()=>c(z),children:z.first_name[0]})]}):A.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color},onClick:()=>c(z),children:z.first_name[0]}),A.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center shadow-md",children:A.jsx(dM,{className:"w-3 h-3 text-white"})})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:z.first_name}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[z.age," years old"]}),A.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(W=z.interests)==null?void 0:W.slice(0,2).map(ie=>A.jsx(Xo,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:ie},ie)),((Q=z.interests)==null?void 0:Q.length)>2&&A.jsxs(Xo,{variant:"outline",className:"text-xs rounded-full border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:["+",z.interests.length-2]})]})]})]}),A.jsxs("div",{className:"flex flex-col items-center gap-2",children:[A.jsx(Dt,{onClick:()=>i(z),className:"bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full",size:"icon",children:A.jsx(cd,{className:"w-5 h-5"})}),z.unreadCount>0&&A.jsx(Xo,{className:"bg-red-500 text-white rounded-full px-2 py-0.5 text-xs",children:z.unreadCount})]})]})})},z.id)}),e.length===0&&!h&&A.jsx(Lr,{className:"border-0 shadow-lg bg-white dark:bg-gray-800",children:A.jsxs(Vr,{className:"p-8 text-center",children:[A.jsx(ud,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),A.jsx("h3",{className:"font-semibold text-xl text-gray-900 dark:text-white mb-2",children:"No matches yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start liking profiles to find your matches! When someone likes you back, they'll appear here."}),A.jsx(Dt,{onClick:()=>n(qn("Discovery")),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl px-6",children:"Discover Singles"})]})})]})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{onClick:()=>n(qn("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(Dd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Profile"})]}),A.jsxs("button",{onClick:()=>n(qn("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(ud,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Discover"})]}),A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(cd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Matches"})]})]})})}),r&&A.jsx(zZ,{match:r,onClose:()=>{i(null),D()}}),o&&A.jsx(A6,{profile:o,onClose:()=>c(null),onLike:()=>{c(null)},isLiked:!0})]})}function WZ(){const n=ta(),[e,t]=P.useState(!0),[r,i]=P.useState(null);P.useEffect(()=>{o()},[]);const o=async()=>{try{const p=new URLSearchParams(window.location.search).get("code");if(!p){i("No event code provided in the URL."),t(!1);return}const g=await Eg.filter({event_code:p.toUpperCase()});if(g.length===0){i("Invalid event code."),t(!1);return}const w=g[0],E=new Date().toISOString();if(!w.starts_at||!w.expires_at){i("This event is not configured correctly. Please contact the organizer."),t(!1);return}const T=w.starts_at<=E&&E<w.expires_at;if(E<w.starts_at){i("This event hasn't started yet. Try again soon!"),t(!1);return}if(E>=w.expires_at){i("This event has ended."),t(!1);return}localStorage.setItem("currentEventId",w.id),localStorage.setItem("currentEventCode",w.event_code);const R=localStorage.getItem("currentSessionId");if(R)try{if((await Gs.filter({session_id:R,event_id:w.id})).length>0){n(qn("Discovery"));return}}catch(M){console.warn("Error checking existing profile:",M)}n(qn("Consent"))}catch(h){console.error("Error processing event join:",h),i("Unable to process event access. Please try again."),t(!1)}},c=()=>{n(qn("Home"))};return e?A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(Lr,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(Vr,{className:"p-8 text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Joining Event..."}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we verify your event access."})]})})}):r?A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(Lr,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(Vr,{className:"p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx(Fw,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to Join Event"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),A.jsx("div",{className:"flex gap-3",children:A.jsx(Dt,{onClick:c,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",children:"Return to Home"})})]})})}):A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(Lr,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(Vr,{className:"p-8 text-center",children:[A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Processing..."}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Redirecting you to the event."})]})})})}var Bg="Switch",[HZ,bJ]=Gd(Bg),[GZ,$Z]=HZ(Bg),k6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:o,required:c,disabled:h,value:p="on",onCheckedChange:g,form:w,...E}=n,[T,R]=P.useState(null),M=bn(e,W=>R(W)),D=P.useRef(!1),L=T?w||!!T.closest("form"):!0,[H,z]=Rf({prop:i,defaultProp:o??!1,onChange:g,caller:Bg});return A.jsxs(GZ,{scope:t,checked:H,disabled:h,children:[A.jsx(nn.button,{type:"button",role:"switch","aria-checked":H,"aria-required":c,"data-state":M6(H),"data-disabled":h?"":void 0,disabled:h,value:p,...E,ref:M,onClick:an(n.onClick,W=>{z(Q=>!Q),L&&(D.current=W.isPropagationStopped(),D.current||W.stopPropagation())})}),L&&A.jsx(O6,{control:T,bubbles:!D.current,name:r,value:p,checked:H,required:c,disabled:h,form:w,style:{transform:"translateX(-100%)"}})]})});k6.displayName=Bg;var P6="SwitchThumb",D6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=$Z(P6,t);return A.jsx(nn.span,{"data-state":M6(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});D6.displayName=P6;var qZ="SwitchBubbleInput",O6=P.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},o)=>{const c=P.useRef(null),h=bn(c,o),p=X2(t),g=G2(e);return P.useEffect(()=>{const w=c.current;if(!w)return;const E=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(E,"checked").set;if(p!==t&&R){const M=new Event("click",{bubbles:r});R.call(w,t),w.dispatchEvent(M)}},[p,t,r]),A.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:h,style:{...i.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});O6.displayName=qZ;function M6(n){return n?"checked":"unchecked"}var L6=k6,KZ=D6;const V6=P.forwardRef(({className:n,...e},t)=>A.jsx(L6,{className:ln("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:A.jsx(KZ,{className:ln("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));V6.displayName=L6.displayName;const XZ=[{id:"inappropriate_behavior",label:"Inappropriate Behavior",description:"Offensive, rude, or inappropriate conduct",icon:ZC,color:"bg-red-100 text-red-700 border-red-200"},{id:"harassment",label:"Harassment",description:"Bullying, stalking, or unwanted contact",icon:cM,color:"bg-orange-100 text-orange-700 border-orange-200"},{id:"fake_profile",label:"Fake Profile",description:"Impersonation or false information",icon:Dd,color:"bg-yellow-100 text-yellow-700 border-yellow-200"},{id:"spam",label:"Spam",description:"Unwanted commercial messages or links",icon:cd,color:"bg-blue-100 text-blue-700 border-blue-200"},{id:"inappropriate_content",label:"Inappropriate Content",description:"Explicit, offensive, or adult content",icon:Zm,color:"bg-purple-100 text-purple-700 border-purple-200"},{id:"underage_user",label:"Underage User",description:"User appears to be under 18",icon:ud,color:"bg-pink-100 text-pink-700 border-pink-200"},{id:"commercial_activity",label:"Commercial Activity",description:"Business promotion or sales activity",icon:Jm,color:"bg-green-100 text-green-700 border-green-200"},{id:"other",label:"Other",description:"Other concerns not listed above",icon:BO,color:"bg-gray-100 text-gray-700 border-gray-200"}];function YZ({isOpen:n,onClose:e,reportedUser:t,eventId:r,onReportSubmitted:i}){const[o,c]=P.useState("reason"),[h,p]=P.useState(null),[g,w]=P.useState(""),[E,T]=P.useState(!1),[R,M]=P.useState("");P.useEffect(()=>{n&&(c("reason"),p(null),w(""),M(""))},[n]);const D=W=>{p(W),c("details")},L=()=>{o==="details"?(c("reason"),p(null)):o==="confirmation"&&c("details")},H=async()=>{if(!h||!g.trim()){Gn.error("Please select a reason and provide details.");return}T(!0);try{const W={reporterId:localStorage.getItem("currentSessionId"),reportedUserId:t.session_id,eventId:r,reason:h.id,description:g.trim(),evidence:R.trim()||void 0};await new Promise(Q=>setTimeout(Q,1e3)),console.log("Report submitted:",W),c("confirmation"),Gn.success("Report submitted successfully"),i&&i(W)}catch(W){console.error("Error submitting report:",W),Gn.error("Failed to submit report. Please try again.")}finally{T(!1)}},z=()=>{o==="confirmation"||(c("reason"),p(null),w(""),M("")),e()};return A.jsx(n0,{open:n,onOpenChange:z,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4",children:A.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl",children:[A.jsx(r0,{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[o!=="reason"&&A.jsx(Dt,{variant:"ghost",size:"icon",onClick:L,className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:A.jsx(TO,{className:"w-5 h-5"})}),A.jsxs("div",{children:[A.jsxs(i0,{className:"text-lg text-gray-900 dark:text-white",children:[o==="reason"&&"Report User",o==="details"&&"Provide Details",o==="confirmation"&&"Report Submitted"]}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o==="reason"&&"Select a reason for reporting",o==="details"&&"Help us understand the issue",o==="confirmation"&&"Thank you for your report"]})]})]}),A.jsx(Dt,{variant:"ghost",size:"icon",onClick:z,className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:A.jsx(Li,{className:"w-5 h-5"})})]})}),A.jsxs("div",{className:"p-6",children:[o==="reason"&&A.jsxs("div",{className:"space-y-4",children:[A.jsx(Lr,{className:"border-gray-200 dark:border-gray-700",children:A.jsx(Vr,{className:"p-4",children:A.jsxs("div",{className:"flex items-center gap-3",children:[t.profile_photo_url?A.jsx("img",{src:t.profile_photo_url,alt:t.first_name,className:"w-12 h-12 rounded-full object-cover"}):A.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:t.profile_color},children:t.first_name[0]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:t.first_name}),A.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t.age," years old"]})]})]})})}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Why are you reporting this user?"}),A.jsx("div",{className:"grid gap-2",children:XZ.map(W=>{const Q=W.icon;return A.jsx("button",{onClick:()=>D(W),className:"w-full p-4 text-left border-2 border-gray-200 dark:border-gray-600 rounded-xl hover:border-purple-300 dark:hover:border-purple-400 transition-colors bg-white dark:bg-gray-800",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:`p-2 rounded-lg ${W.color}`,children:A.jsx(Q,{className:"w-4 h-4"})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:W.label}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:W.description})]})]})},W.id)})})]})]}),o==="details"&&A.jsxs("div",{className:"space-y-4",children:[A.jsx(Lr,{className:"border-purple-200 dark:border-purple-700 bg-purple-50 dark:bg-purple-900/20",children:A.jsx(Vr,{className:"p-4",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("div",{className:`p-2 rounded-lg ${h.color}`,children:A.jsx(h.icon,{className:"w-4 h-4"})}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:h.label}),A.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.description})]})]})})}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Please provide details about what happened"}),A.jsx(Rd,{value:g,onChange:W=>w(W.target.value),placeholder:"Describe the incident or behavior that concerns you...",className:"min-h-[120px] resize-none",maxLength:1e3}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[g.length,"/1000 characters"]})]}),A.jsxs("div",{className:"space-y-2",children:[A.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Additional context (optional)"}),A.jsx(Rd,{value:R,onChange:W=>M(W.target.value),placeholder:"Any additional information, screenshots, or context that might help...",className:"min-h-[80px] resize-none",maxLength:500}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[R.length,"/500 characters"]})]}),A.jsx(Dt,{onClick:H,disabled:E||!g.trim(),className:"w-full bg-gradient-to-r from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white",children:E?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Submitting..."]}):"Submit Report"})]}),o==="confirmation"&&A.jsxs("div",{className:"text-center space-y-4",children:[A.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:A.jsx(yc,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Report Submitted"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Thank you for helping keep our community safe. We will review your report and take appropriate action if necessary."})]}),A.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[A.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"What happens next?"}),A.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[A.jsx("li",{children:" Our team will review the report within 24 hours"}),A.jsx("li",{children:" We may contact you for additional information"}),A.jsx("li",{children:" Appropriate action will be taken if violations are found"}),A.jsx("li",{children:" Your report is confidential and anonymous"})]})]}),A.jsx(Dt,{onClick:z,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",children:"Close"})]})]})]})})})}const QZ=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing","yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function F6(){var te;const n=ta(),[e,t]=P.useState(null),[r,i]=P.useState(null),[o,c]=P.useState({bio:!1,interests:!1,height:!1}),[h,p]=P.useState({bio:"",interests:[],height:""}),[g,w]=P.useState(!0),[E,T]=P.useState(!1),[R,M]=P.useState(!1),[D,L]=P.useState([]),H=P.useCallback(async()=>{w(!0);try{const X=localStorage.getItem("currentEventId"),q=localStorage.getItem("currentSessionId");if(X&&q){const pe=await Gs.filter({event_id:X,session_id:q});if(pe.length>0){const re=pe[0];i(re),t(re),p({bio:re.about_me||"",interests:re.interests||[],height:re.height_cm?re.height_cm.toString():""})}}}catch(X){console.error("Error loading profile data:",X),Gn.error("Failed to load profile.")}finally{w(!1)}},[n]);P.useEffect(()=>{H()},[H]);const z=X=>{c(q=>({...q,[X]:!q[X]}))},W=X=>{p(q=>{const pe=q.interests.includes(X)?q.interests.filter(re=>re!==X):[...q.interests,X];return pe.length>3?(Gn.warning("You can select up to 3 interests."),q):{...q,interests:pe}})},Q=async X=>{try{if(!r)return;const pe={bio:"about_me",height:"height_cm"}[X]||X,re=X==="height"?parseInt(h[X]):h[X];await Gs.update(r.id,{[pe]:re}),Gn.success(`${X.charAt(0).toUpperCase()+X.slice(1)} updated!`),z(X),await H()}catch(q){console.error(`Error updating ${X}:`,q),Gn.error(`Failed to update ${X}.`)}},ie=async X=>{const q=X.target.files[0];if(q&&r){T(!0);try{const{file_url:pe}=await a6({file:q});await Gs.update(r.id,{profile_photo_url:pe}),Gn.success("Profile photo updated!"),await H()}catch(pe){console.error("Error uploading photo:",pe),Gn.error("Failed to upload photo.")}finally{T(!1)}}},le=async()=>{if(r)try{const X=!r.is_visible;await Gs.update(r.id,{is_visible:X}),i(q=>({...q,is_visible:X})),Gn.success(`Profile is now ${X?"visible":"hidden"}.`)}catch(X){console.error("Error updating visibility:",X),Gn.error("Failed to update visibility.")}},F=async()=>{try{const X=localStorage.getItem("currentEventId");if(X){const q=await Gs.filter({event_id:X});L(q)}}catch(X){console.error("Error loading users for report:",X)}},B=()=>{M(!0),F()},G=X=>{console.log("Report submitted:",X)},J=async()=>{if(!(!r||!confirm("Are you sure you want to leave this event? This will delete your profile for this event and cannot be undone.")))try{await Gs.delete(r.id),localStorage.removeItem("currentEventId"),localStorage.removeItem("currentSessionId"),localStorage.removeItem("currentEventCode"),localStorage.removeItem("currentProfileColor"),localStorage.removeItem("currentProfilePhotoUrl"),Gn.success("You have left the event."),n(qn("Home"))}catch(X){console.error("Error leaving event:",X),Gn.error("Failed to leave event.")}};return g?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsx("style",{children:`
        .visibility-switch[data-state='checked'] {
          background-color: #34D399;
        }
        .visibility-switch[data-state='unchecked'] {
          background-color: #E5E7EB;
        }
        .dark .visibility-switch[data-state='unchecked'] {
          background-color: #4B5563;
        }
        .visibility-switch span {
          background-color: white !important;
        }
      `}),A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-4",children:[A.jsxs("label",{htmlFor:"profile-photo-upload",className:"cursor-pointer group",children:[e.profile_photo_url?A.jsx("img",{src:e.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg"}):A.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center text-white font-semibold text-4xl",style:{backgroundColor:e.profile_color},children:e.full_name?e.full_name[0]:"?"}),A.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx(Zm,{className:"w-8 h-8 text-white"})})]}),A.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:ie,className:"hidden",disabled:E}),E&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-white"})})]}),A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.full_name}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.age," years old"]})]}),A.jsxs(Lr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsx(co,{className:"text-lg text-gray-900 dark:text-white",children:"About Me"}),A.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>z("bio"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.bio?A.jsx(Li,{className:"w-4 h-4"}):A.jsx(cy,{className:"w-4 h-4"})})]}),A.jsx(Vr,{children:o.bio?A.jsxs("div",{className:"space-y-4",children:[A.jsx(Rd,{value:h.bio,onChange:X=>p(q=>({...q,bio:X.target.value})),placeholder:"Tell us a little about yourself...",className:"h-24 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsxs(Dt,{onClick:()=>Q("bio"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(ly,{className:"w-4 h-4 mr-2"})," Save Bio"]})]}):A.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.bio||"No bio yet. Add one!"})})]}),A.jsxs(Lr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsx(co,{className:"text-lg text-gray-900 dark:text-white",children:"Interests"}),A.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>z("interests"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.interests?A.jsx(Li,{className:"w-4 h-4"}):A.jsx(cy,{className:"w-4 h-4"})})]}),A.jsx(Vr,{children:o.interests?A.jsxs("div",{className:"space-y-4",children:[A.jsx("div",{className:"flex flex-wrap gap-2",children:QZ.map(X=>A.jsx(Xo,{onClick:()=>W(X),className:`cursor-pointer px-3 py-2 rounded-full transition-all ${h.interests.includes(X)?"interest-chip-selected bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"interest-chip-default border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,children:X},X))}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h.interests.length," / 3 selected"]}),A.jsxs(Dt,{onClick:()=>Q("interests"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(ly,{className:"w-4 h-4 mr-2"})," Save Interests"]})]}):A.jsx("div",{className:"flex flex-wrap gap-2",children:((te=e.interests)==null?void 0:te.map(X=>A.jsx(Xo,{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:X},X)))||A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No interests added yet."})})})]}),A.jsxs(Lr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsx(co,{className:"text-lg text-gray-900 dark:text-white",children:"Height"}),A.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>z("height"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.height?A.jsx(Li,{className:"w-4 h-4"}):A.jsx(cy,{className:"w-4 h-4"})})]}),A.jsx(Vr,{children:o.height?A.jsxs("div",{className:"space-y-4",children:[A.jsx(jl,{type:"number",value:h.height,onChange:X=>p(q=>({...q,height:X.target.value})),placeholder:"Height in cm",className:"w-full height-input bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsxs(Dt,{onClick:()=>Q("height"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(ly,{className:"w-4 h-4 mr-2"})," Save Height"]})]}):A.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.height?`${e.height} cm`:"Not specified"})})]}),r&&A.jsxs(A.Fragment,{children:[A.jsxs(Lr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Po,{className:"flex flex-row items-center justify-between",children:[A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[r.is_visible?A.jsx(LO,{className:"w-5 h-5 text-green-500"}):A.jsx(OO,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),"Event Visibility"]}),A.jsx(V6,{checked:r.is_visible,onCheckedChange:le,className:"visibility-switch"})]}),A.jsx(Vr,{children:A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.is_visible?"Your profile is visible to others at the current event.":"You are currently hidden from other attendees."})})]}),A.jsxs(Lr,{className:"border-0 shadow-lg border-red-100 dark:border-red-900/20 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-red-600 dark:text-red-400",children:[A.jsx(GO,{className:"w-5 h-5"}),"Leave Event"]})}),A.jsxs(Vr,{children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Permanently remove your profile from this event. This action cannot be undone."}),A.jsxs(Dt,{onClick:J,variant:"destructive",className:"w-full h-auto whitespace-normal",children:[A.jsx(gM,{className:"w-4 h-4 mr-2"}),"Leave Event & Delete Event Profile"]})]})]})]}),A.jsxs(Lr,{className:"border-0 shadow-lg mb-6 mt-8 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(Fw,{className:"w-5 h-5 text-orange-500"}),"Safety & Reporting"]})}),A.jsxs(Vr,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"If you encounter inappropriate behavior, you can report users to event moderators."}),A.jsx(Dt,{variant:"outline",className:"w-full border-orange-200 dark:border-orange-700 text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 bg-white dark:bg-gray-800",onClick:B,children:"Report a User"})]})]}),A.jsxs(Lr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(Bw,{className:"w-5 h-5 text-blue-500"}),"Automatic Data Expiration"]})}),A.jsxs(Vr,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your profile, matches, and chat messages will be automatically deleted when this event ends. No data is stored permanently."}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(yc,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Profile expires automatically"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(yc,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Messages deleted at midnight"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(yc,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"No permanent account created"})]})]})]})]}),A.jsxs(Lr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsx(Po,{children:A.jsxs(co,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(qO,{className:"w-5 h-5 text-purple-500"}),"Email Data Usage"]})}),A.jsxs(Vr,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your email address is only used for post-event feedback surveys and is never visible to other users at this event."}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(yc,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Only used for feedback requests"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(yc,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Never shared with other users"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(yc,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Not used for marketing purposes"})]})]})]})]})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(Dd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Profile"})]}),A.jsxs("button",{onClick:()=>n(qn("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(ud,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Discover"})]}),A.jsxs("button",{onClick:()=>n(qn("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(cd,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Matches"})]})]})})}),A.jsx(YZ,{isOpen:R,onClose:()=>M(!1),reportedUser:D[0],eventId:localStorage.getItem("currentEventId"),onReportSubmitted:G})]})}const IC={Home:Iw,Consent:l6,Discovery:I6,Matches:N6,join:WZ,Profile:F6};function ZZ(n){n.endsWith("/")&&(n=n.slice(0,-1));let e=n.split("/").pop();return e.includes("?")&&(e=e.split("?")[0]),Object.keys(IC).find(r=>r.toLowerCase()===e.toLowerCase())||Object.keys(IC)[0]}function JZ(){const n=Fa(),e=ZZ(n.pathname);return A.jsx(gY,{currentPageName:e,children:A.jsxs(L8,{children:[A.jsx(yl,{path:"/",element:A.jsx(Iw,{})}),A.jsx(yl,{path:"/Home",element:A.jsx(Iw,{})}),A.jsx(yl,{path:"/Consent",element:A.jsx(l6,{})}),A.jsx(yl,{path:"/Discovery",element:A.jsx(I6,{})}),A.jsx(yl,{path:"/Matches",element:A.jsx(N6,{})}),A.jsx(yl,{path:"/join",element:A.jsx("join",{})}),A.jsx(yl,{path:"/Profile",element:A.jsx(F6,{})})]})})}function eJ(){return A.jsx(sO,{children:A.jsx(JZ,{})})}const tJ=20,nJ=1e6,Aa={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let tx=0;function rJ(){return tx=(tx+1)%Number.MAX_VALUE,tx.toString()}const nx=new Map,TC=n=>{if(nx.has(n))return;const e=setTimeout(()=>{nx.delete(n),nf({type:Aa.REMOVE_TOAST,toastId:n})},nJ);nx.set(n,e)},iJ=(n,e)=>{switch(e.type){case Aa.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,tJ)};case Aa.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case Aa.DISMISS_TOAST:{const{toastId:t}=e;return t?TC(t):n.toasts.forEach(r=>{TC(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case Aa.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Xm=[];let Ym={toasts:[]};function nf(n){Ym=iJ(Ym,n),Xm.forEach(e=>{e(Ym)})}function sJ({...n}){const e=rJ(),t=i=>nf({type:Aa.UPDATE_TOAST,toast:{...i,id:e}}),r=()=>nf({type:Aa.DISMISS_TOAST,toastId:e});return nf({type:Aa.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function oJ(){const[n,e]=P.useState(Ym);return P.useEffect(()=>(Xm.push(e),()=>{const t=Xm.indexOf(e);t>-1&&Xm.splice(t,1)}),[n]),{...n,toast:sJ,dismiss:t=>nf({type:Aa.DISMISS_TOAST,toastId:t})}}const B6=P.forwardRef(({...n},e)=>A.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));B6.displayName="ToastProvider";const j6=P.forwardRef(({...n},e)=>A.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));j6.displayName="ToastViewport";const aJ=bg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),U6=P.forwardRef(({className:n,variant:e,...t},r)=>A.jsx("div",{ref:r,className:ln(aJ({variant:e}),n),...t}));U6.displayName="Toast";const lJ=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));lJ.displayName="ToastAction";const z6=P.forwardRef(({className:n,...e},t)=>A.jsx("button",{ref:t,className:ln("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:A.jsx(Li,{className:"h-4 w-4"})}));z6.displayName="ToastClose";const W6=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm font-semibold",n),...e}));W6.displayName="ToastTitle";const H6=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm opacity-90",n),...e}));H6.displayName="ToastDescription";function cJ(){const{toasts:n}=oJ();return A.jsxs(B6,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return A.jsxs(U6,{...o,children:[A.jsxs("div",{className:"grid gap-1",children:[t&&A.jsx(W6,{children:t}),r&&A.jsx(H6,{children:r})]}),i,A.jsx(z6,{})]},e)}),A.jsx(j6,{})]})}class uJ extends ze.Component{constructor(t){super(t);ey(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});ey(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error(" Error Boundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}reportError(t,r){const i={message:t.message,stack:t.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent};console.log("Would report error:",i)}render(){return this.state.hasError?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(ZC,{className:"w-8 h-8 text-red-600"})}),A.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),A.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[A.jsx(tM,{className:"w-4 h-4"}),"Try Again"]}),A.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[A.jsx(WO,{className:"w-4 h-4"}),"Go to Home"]})]}),!1]})}):this.props.children}}const dJ=()=>{const[n,e]=P.useState(Pl.getOnlineStatus()),[t,r]=P.useState(cm()),[i,o]=P.useState(!1);P.useEffect(()=>{const g=()=>{e(!0),o(!0)},w=()=>{e(!1)},E=()=>{setTimeout(()=>{r(cm()),o(!1)},1e3)};return window.addEventListener("online",g),window.addEventListener("offline",w),window.addEventListener("appOnline",E),e(Pl.getOnlineStatus()),r(cm()),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",w),window.removeEventListener("appOnline",E)}},[]);const c=P.useCallback(async(g,w={})=>{try{return await bN(g,w)}catch(E){const T=mI(E);throw{...E,userMessage:T}}},[]),h=P.useCallback((g,w={})=>{const E=Jj(g,w);return r(cm()),E},[]),p=P.useCallback(async()=>{const g=await Pl.checkConnectivity();return e(g),g},[]);return{isOnline:n,offlineQueueLength:t,isProcessingQueue:i,executeWithRetry:c,queueForOffline:h,checkConnectivity:p,getErrorMessage:mI}},hJ=()=>{const{isOnline:n,offlineQueueLength:e,isProcessingQueue:t}=dJ(),r=P.useCallback(()=>n?t?{type:"processing",message:"Processing offline actions...",icon:""}:e>0?{type:"queued",message:`${e} action${e>1?"s":""} queued for when you're back online.`,icon:""}:{type:"online",message:"You're online",icon:""}:{type:"offline",message:"You're offline. Some features may be limited.",icon:""},[n,e,t]);return{isOnline:n,offlineQueueLength:e,isProcessingQueue:t,statusMessage:r()}},fJ=({className:n=""})=>{const{statusMessage:e,isOnline:t,offlineQueueLength:r}=hJ();if(t&&r===0)return null;const o=(()=>{switch(e.type){case"offline":return{bgColor:"bg-red-500",textColor:"text-white",icon:A.jsx(bM,{className:"w-4 h-4"})};case"processing":return{bgColor:"bg-blue-500",textColor:"text-white",icon:A.jsx(Bw,{className:"w-4 h-4 animate-spin"})};case"queued":return{bgColor:"bg-yellow-500",textColor:"text-white",icon:A.jsx(Fw,{className:"w-4 h-4"})};default:return{bgColor:"bg-green-500",textColor:"text-white",icon:A.jsx(IM,{className:"w-4 h-4"})}}})();return A.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${n}`,children:A.jsxs("div",{className:`${o.bgColor} ${o.textColor} px-4 py-2 text-sm font-medium flex items-center justify-center gap-2`,children:[o.icon,A.jsx("span",{children:e.message})]})})};function mJ(){return A.jsxs(uJ,{children:[A.jsx(fJ,{}),A.jsx(eJ,{}),A.jsx(cJ,{}),!1]})}$D.createRoot(document.getElementById("root")).render(A.jsx(mJ,{}));
