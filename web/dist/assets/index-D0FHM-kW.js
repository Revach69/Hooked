var Q8=Object.defineProperty;var Z8=(n,e,t)=>e in n?Q8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var wy=(n,e,t)=>Z8(n,typeof e!="symbol"?e+"":e,t);function pS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ng(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vy={exports:{}},Sh={},_y={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function J8(){if(Tb)return Ut;Tb=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.iterator;function A(ae){return ae===null||typeof ae!="object"?null:(ae=_&&ae[_]||ae["@@iterator"],typeof ae=="function"?ae:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,D={};function L(ae,he,Se){this.props=ae,this.context=he,this.refs=D,this.updater=Se||R}L.prototype.isReactComponent={},L.prototype.setState=function(ae,he){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,he,"setState")},L.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function G(){}G.prototype=L.prototype;function z(ae,he,Se){this.props=ae,this.context=he,this.refs=D,this.updater=Se||R}var H=z.prototype=new G;H.constructor=z,M(H,L.prototype),H.isPureReactComponent=!0;var Y=Array.isArray,re=Object.prototype.hasOwnProperty,ie={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function B(ae,he,Se){var Le,it={},Re=null,Pe=null;if(he!=null)for(Le in he.ref!==void 0&&(Pe=he.ref),he.key!==void 0&&(Re=""+he.key),he)re.call(he,Le)&&!V.hasOwnProperty(Le)&&(it[Le]=he[Le]);var Ge=arguments.length-2;if(Ge===1)it.children=Se;else if(1<Ge){for(var at=Array(Ge),st=0;st<Ge;st++)at[st]=arguments[st+2];it.children=at}if(ae&&ae.defaultProps)for(Le in Ge=ae.defaultProps,Ge)it[Le]===void 0&&(it[Le]=Ge[Le]);return{$$typeof:n,type:ae,key:Re,ref:Pe,props:it,_owner:ie.current}}function W(ae,he){return{$$typeof:n,type:ae.type,key:he,ref:ae.ref,props:ae.props,_owner:ae._owner}}function Z(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===n}function te(ae){var he={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(Se){return he[Se]})}var ee=/\/+/g;function K(ae,he){return typeof ae=="object"&&ae!==null&&ae.key!=null?te(""+ae.key):he.toString(36)}function we(ae,he,Se,Le,it){var Re=typeof ae;(Re==="undefined"||Re==="boolean")&&(ae=null);var Pe=!1;if(ae===null)Pe=!0;else switch(Re){case"string":case"number":Pe=!0;break;case"object":switch(ae.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=ae,it=it(Pe),ae=Le===""?"."+K(Pe,0):Le,Y(it)?(Se="",ae!=null&&(Se=ae.replace(ee,"$&/")+"/"),we(it,he,Se,"",function(st){return st})):it!=null&&(Z(it)&&(it=W(it,Se+(!it.key||Pe&&Pe.key===it.key?"":(""+it.key).replace(ee,"$&/")+"/")+ae)),he.push(it)),1;if(Pe=0,Le=Le===""?".":Le+":",Y(ae))for(var Ge=0;Ge<ae.length;Ge++){Re=ae[Ge];var at=Le+K(Re,Ge);Pe+=we(Re,he,Se,at,it)}else if(at=A(ae),typeof at=="function")for(ae=at.call(ae),Ge=0;!(Re=ae.next()).done;)Re=Re.value,at=Le+K(Re,Ge++),Pe+=we(Re,he,Se,at,it);else if(Re==="object")throw he=String(ae),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return Pe}function se(ae,he,Se){if(ae==null)return ae;var Le=[],it=0;return we(ae,Le,"","",function(Re){return he.call(Se,Re,it++)}),Le}function Te(ae){if(ae._status===-1){var he=ae._result;he=he(),he.then(function(Se){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=Se)},function(Se){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=Se)}),ae._status===-1&&(ae._status=0,ae._result=he)}if(ae._status===1)return ae._result.default;throw ae._result}var xe={current:null},oe={transition:null},Ae={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ie};function Ne(){throw Error("act(...) is not supported in production builds of React.")}return Ut.Children={map:se,forEach:function(ae,he,Se){se(ae,function(){he.apply(this,arguments)},Se)},count:function(ae){var he=0;return se(ae,function(){he++}),he},toArray:function(ae){return se(ae,function(he){return he})||[]},only:function(ae){if(!Z(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},Ut.Component=L,Ut.Fragment=t,Ut.Profiler=i,Ut.PureComponent=z,Ut.StrictMode=r,Ut.Suspense=m,Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ae,Ut.act=Ne,Ut.cloneElement=function(ae,he,Se){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var Le=M({},ae.props),it=ae.key,Re=ae.ref,Pe=ae._owner;if(he!=null){if(he.ref!==void 0&&(Re=he.ref,Pe=ie.current),he.key!==void 0&&(it=""+he.key),ae.type&&ae.type.defaultProps)var Ge=ae.type.defaultProps;for(at in he)re.call(he,at)&&!V.hasOwnProperty(at)&&(Le[at]=he[at]===void 0&&Ge!==void 0?Ge[at]:he[at])}var at=arguments.length-2;if(at===1)Le.children=Se;else if(1<at){Ge=Array(at);for(var st=0;st<at;st++)Ge[st]=arguments[st+2];Le.children=Ge}return{$$typeof:n,type:ae.type,key:it,ref:Re,props:Le,_owner:Pe}},Ut.createContext=function(ae){return ae={$$typeof:c,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:o,_context:ae},ae.Consumer=ae},Ut.createElement=B,Ut.createFactory=function(ae){var he=B.bind(null,ae);return he.type=ae,he},Ut.createRef=function(){return{current:null}},Ut.forwardRef=function(ae){return{$$typeof:h,render:ae}},Ut.isValidElement=Z,Ut.lazy=function(ae){return{$$typeof:w,_payload:{_status:-1,_result:ae},_init:Te}},Ut.memo=function(ae,he){return{$$typeof:g,type:ae,compare:he===void 0?null:he}},Ut.startTransition=function(ae){var he=oe.transition;oe.transition={};try{ae()}finally{oe.transition=he}},Ut.unstable_act=Ne,Ut.useCallback=function(ae,he){return xe.current.useCallback(ae,he)},Ut.useContext=function(ae){return xe.current.useContext(ae)},Ut.useDebugValue=function(){},Ut.useDeferredValue=function(ae){return xe.current.useDeferredValue(ae)},Ut.useEffect=function(ae,he){return xe.current.useEffect(ae,he)},Ut.useId=function(){return xe.current.useId()},Ut.useImperativeHandle=function(ae,he,Se){return xe.current.useImperativeHandle(ae,he,Se)},Ut.useInsertionEffect=function(ae,he){return xe.current.useInsertionEffect(ae,he)},Ut.useLayoutEffect=function(ae,he){return xe.current.useLayoutEffect(ae,he)},Ut.useMemo=function(ae,he){return xe.current.useMemo(ae,he)},Ut.useReducer=function(ae,he,Se){return xe.current.useReducer(ae,he,Se)},Ut.useRef=function(ae){return xe.current.useRef(ae)},Ut.useState=function(ae){return xe.current.useState(ae)},Ut.useSyncExternalStore=function(ae,he,Se){return xe.current.useSyncExternalStore(ae,he,Se)},Ut.useTransition=function(){return xe.current.useTransition()},Ut.version="18.3.1",Ut}var Ab;function rv(){return Ab||(Ab=1,_y.exports=J8()),_y.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function eO(){if(Cb)return Sh;Cb=1;var n=rv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(h,m,g){var w,_={},A=null,R=null;g!==void 0&&(A=""+g),m.key!==void 0&&(A=""+m.key),m.ref!==void 0&&(R=m.ref);for(w in m)r.call(m,w)&&!o.hasOwnProperty(w)&&(_[w]=m[w]);if(h&&h.defaultProps)for(w in m=h.defaultProps,m)_[w]===void 0&&(_[w]=m[w]);return{$$typeof:e,type:h,key:A,ref:R,props:_,_owner:i.current}}return Sh.Fragment=t,Sh.jsx=c,Sh.jsxs=c,Sh}var Sb;function tO(){return Sb||(Sb=1,vy.exports=eO()),vy.exports}var I=tO(),P=rv();const ze=ng(P),mS=pS({__proto__:null,default:ze},[P]);var dm={},Ey={exports:{}},as={},by={exports:{}},Iy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function nO(){return Rb||(Rb=1,function(n){function e(oe,Ae){var Ne=oe.length;oe.push(Ae);e:for(;0<Ne;){var ae=Ne-1>>>1,he=oe[ae];if(0<i(he,Ae))oe[ae]=Ae,oe[Ne]=he,Ne=ae;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var Ae=oe[0],Ne=oe.pop();if(Ne!==Ae){oe[0]=Ne;e:for(var ae=0,he=oe.length,Se=he>>>1;ae<Se;){var Le=2*(ae+1)-1,it=oe[Le],Re=Le+1,Pe=oe[Re];if(0>i(it,Ne))Re<he&&0>i(Pe,it)?(oe[ae]=Pe,oe[Re]=Ne,ae=Re):(oe[ae]=it,oe[Le]=Ne,ae=Le);else if(Re<he&&0>i(Pe,Ne))oe[ae]=Pe,oe[Re]=Ne,ae=Re;else break e}}return Ae}function i(oe,Ae){var Ne=oe.sortIndex-Ae.sortIndex;return Ne!==0?Ne:oe.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],g=[],w=1,_=null,A=3,R=!1,M=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(oe){for(var Ae=t(g);Ae!==null;){if(Ae.callback===null)r(g);else if(Ae.startTime<=oe)r(g),Ae.sortIndex=Ae.expirationTime,e(m,Ae);else break;Ae=t(g)}}function Y(oe){if(D=!1,H(oe),!M)if(t(m)!==null)M=!0,Te(re);else{var Ae=t(g);Ae!==null&&xe(Y,Ae.startTime-oe)}}function re(oe,Ae){M=!1,D&&(D=!1,G(B),B=-1),R=!0;var Ne=A;try{for(H(Ae),_=t(m);_!==null&&(!(_.expirationTime>Ae)||oe&&!te());){var ae=_.callback;if(typeof ae=="function"){_.callback=null,A=_.priorityLevel;var he=ae(_.expirationTime<=Ae);Ae=n.unstable_now(),typeof he=="function"?_.callback=he:_===t(m)&&r(m),H(Ae)}else r(m);_=t(m)}if(_!==null)var Se=!0;else{var Le=t(g);Le!==null&&xe(Y,Le.startTime-Ae),Se=!1}return Se}finally{_=null,A=Ne,R=!1}}var ie=!1,V=null,B=-1,W=5,Z=-1;function te(){return!(n.unstable_now()-Z<W)}function ee(){if(V!==null){var oe=n.unstable_now();Z=oe;var Ae=!0;try{Ae=V(!0,oe)}finally{Ae?K():(ie=!1,V=null)}}else ie=!1}var K;if(typeof z=="function")K=function(){z(ee)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,se=we.port2;we.port1.onmessage=ee,K=function(){se.postMessage(null)}}else K=function(){L(ee,0)};function Te(oe){V=oe,ie||(ie=!0,K())}function xe(oe,Ae){B=L(function(){oe(n.unstable_now())},Ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){M||R||(M=!0,Te(re))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(oe){switch(A){case 1:case 2:case 3:var Ae=3;break;default:Ae=A}var Ne=A;A=Ae;try{return oe()}finally{A=Ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,Ae){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Ne=A;A=oe;try{return Ae()}finally{A=Ne}},n.unstable_scheduleCallback=function(oe,Ae,Ne){var ae=n.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?ae+Ne:ae):Ne=ae,oe){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Ne+he,oe={id:w++,callback:Ae,priorityLevel:oe,startTime:Ne,expirationTime:he,sortIndex:-1},Ne>ae?(oe.sortIndex=Ne,e(g,oe),t(m)===null&&oe===t(g)&&(D?(G(B),B=-1):D=!0,xe(Y,Ne-ae))):(oe.sortIndex=he,e(m,oe),M||R||(M=!0,Te(re))),oe},n.unstable_shouldYield=te,n.unstable_wrapCallback=function(oe){var Ae=A;return function(){var Ne=A;A=Ae;try{return oe.apply(this,arguments)}finally{A=Ne}}}}(Iy)),Iy}var Nb;function rO(){return Nb||(Nb=1,by.exports=nO()),by.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function iO(){if(kb)return as;kb=1;var n=rv(),e=rO();function t(a){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+a,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,d){c(a,d),c(a+"Capture",d)}function c(a,d){for(i[a]=d,a=0;a<d.length;a++)r.add(d[a])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},_={};function A(a){return m.call(_,a)?!0:m.call(w,a)?!1:g.test(a)?_[a]=!0:(w[a]=!0,!1)}function R(a,d,x,b){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:x!==null?!x.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function M(a,d,x,b){if(d===null||typeof d>"u"||R(a,d,x,b))return!0;if(b)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function D(a,d,x,b,S,k,$){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=S,this.mustUseProperty=x,this.propertyName=a,this.type=d,this.sanitizeURL=k,this.removeEmptyString=$}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new D(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var d=a[0];L[d]=new D(d,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new D(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new D(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new D(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new D(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){L[a]=new D(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new D(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new D(a,5,!1,a.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!1,!1)}),L.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!0,!0)});function H(a,d,x,b){var S=L.hasOwnProperty(d)?L[d]:null;(S!==null?S.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(M(d,x,S,b)&&(x=null),b||S===null?A(d)&&(x===null?a.removeAttribute(d):a.setAttribute(d,""+x)):S.mustUseProperty?a[S.propertyName]=x===null?S.type===3?!1:"":x:(d=S.attributeName,b=S.attributeNamespace,x===null?a.removeAttribute(d):(S=S.type,x=S===3||S===4&&x===!0?"":""+x,b?a.setAttributeNS(b,d,x):a.setAttribute(d,x))))}var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ie=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),te=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Ae(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var Ne=Object.assign,ae;function he(a){if(ae===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);ae=d&&d[1]||""}return`
`+ae+a}var Se=!1;function Le(a,d){if(!a||Se)return"";Se=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(be){var b=be}Reflect.construct(a,[],d)}else{try{d.call()}catch(be){b=be}a.call(d.prototype)}else{try{throw Error()}catch(be){b=be}a()}}catch(be){if(be&&b&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),k=b.stack.split(`
`),$=S.length-1,ne=k.length-1;1<=$&&0<=ne&&S[$]!==k[ne];)ne--;for(;1<=$&&0<=ne;$--,ne--)if(S[$]!==k[ne]){if($!==1||ne!==1)do if($--,ne--,0>ne||S[$]!==k[ne]){var ce=`
`+S[$].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=$&&0<=ne);break}}}finally{Se=!1,Error.prepareStackTrace=x}return(a=a?a.displayName||a.name:"")?he(a):""}function it(a){switch(a.tag){case 5:return he(a.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return a=Le(a.type,!1),a;case 11:return a=Le(a.type.render,!1),a;case 1:return a=Le(a.type,!0),a;default:return""}}function Re(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case V:return"Fragment";case ie:return"Portal";case W:return"Profiler";case B:return"StrictMode";case K:return"Suspense";case we:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case te:return(a.displayName||"Context")+".Consumer";case Z:return(a._context.displayName||"Context")+".Provider";case ee:var d=a.render;return a=a.displayName,a||(a=d.displayName||d.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case se:return d=a.displayName||null,d!==null?d:Re(a.type)||"Memo";case Te:d=a._payload,a=a._init;try{return Re(a(d))}catch{}}return null}function Pe(a){var d=a.type;switch(a.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=d.render,a=a.displayName||a.name||"",d.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(d);case 8:return d===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ge(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function at(a){var d=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function st(a){var d=at(a)?"checked":"value",x=Object.getOwnPropertyDescriptor(a.constructor.prototype,d),b=""+a[d];if(!a.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var S=x.get,k=x.set;return Object.defineProperty(a,d,{configurable:!0,get:function(){return S.call(this)},set:function($){b=""+$,k.call(this,$)}}),Object.defineProperty(a,d,{enumerable:x.enumerable}),{getValue:function(){return b},setValue:function($){b=""+$},stopTracking:function(){a._valueTracker=null,delete a[d]}}}}function ct(a){a._valueTracker||(a._valueTracker=st(a))}function bt(a){if(!a)return!1;var d=a._valueTracker;if(!d)return!0;var x=d.getValue(),b="";return a&&(b=at(a)?a.checked?"true":"false":a.value),a=b,a!==x?(d.setValue(a),!0):!1}function ht(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function gn(a,d){var x=d.checked;return Ne({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??a._wrapperState.initialChecked})}function Fn(a,d){var x=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;x=Ge(d.value!=null?d.value:x),a._wrapperState={initialChecked:b,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Dr(a,d){d=d.checked,d!=null&&H(a,"checked",d,!1)}function Qt(a,d){Dr(a,d);var x=Ge(d.value),b=d.type;if(x!=null)b==="number"?(x===0&&a.value===""||a.value!=x)&&(a.value=""+x):a.value!==""+x&&(a.value=""+x);else if(b==="submit"||b==="reset"){a.removeAttribute("value");return}d.hasOwnProperty("value")?pt(a,d.type,x):d.hasOwnProperty("defaultValue")&&pt(a,d.type,Ge(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(a.defaultChecked=!!d.defaultChecked)}function zt(a,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+a._wrapperState.initialValue,x||d===a.value||(a.value=d),a.defaultValue=d}x=a.name,x!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,x!==""&&(a.name=x)}function pt(a,d,x){(d!=="number"||ht(a.ownerDocument)!==a)&&(x==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+x&&(a.defaultValue=""+x))}var xi=Array.isArray;function Xe(a,d,x,b){if(a=a.options,d){d={};for(var S=0;S<x.length;S++)d["$"+x[S]]=!0;for(x=0;x<a.length;x++)S=d.hasOwnProperty("$"+a[x].value),a[x].selected!==S&&(a[x].selected=S),S&&b&&(a[x].defaultSelected=!0)}else{for(x=""+Ge(x),d=null,S=0;S<a.length;S++){if(a[S].value===x){a[S].selected=!0,b&&(a[S].defaultSelected=!0);return}d!==null||a[S].disabled||(d=a[S])}d!==null&&(d.selected=!0)}}function Xn(a,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ne({},d,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function wi(a,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(t(92));if(xi(x)){if(1<x.length)throw Error(t(93));x=x[0]}d=x}d==null&&(d=""),x=d}a._wrapperState={initialValue:Ge(x)}}function Zr(a,d){var x=Ge(d.value),b=Ge(d.defaultValue);x!=null&&(x=""+x,x!==a.value&&(a.value=x),d.defaultValue==null&&a.defaultValue!==x&&(a.defaultValue=x)),b!=null&&(a.defaultValue=""+b)}function io(a){var d=a.textContent;d===a._wrapperState.initialValue&&d!==""&&d!==null&&(a.value=d)}function Wt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yn(a,d){return a==null||a==="http://www.w3.org/1999/xhtml"?Wt(d):a==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Er,Bn=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,b,S){MSApp.execUnsafeLocalFunction(function(){return a(d,x,b,S)})}:a}(function(a,d){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=d;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Er.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}});function Jr(a,d){if(d){var x=a.firstChild;if(x&&x===a.lastChild&&x.nodeType===3){x.nodeValue=d;return}}a.textContent=d}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(a){vi.forEach(function(d){d=d+a.charAt(0).toUpperCase()+a.substring(1),Bi[d]=Bi[a]})});function In(a,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||Bi.hasOwnProperty(a)&&Bi[a]?(""+d).trim():d+"px"}function We(a,d){a=a.style;for(var x in d)if(d.hasOwnProperty(x)){var b=x.indexOf("--")===0,S=In(x,d[x],b);x==="float"&&(x="cssFloat"),b?a.setProperty(x,S):a[x]=S}}var Tn=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(a,d){if(d){if(Tn[a]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function pn(a,d){if(a.indexOf("-")===-1)return typeof d.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function jr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var so=null,Ct=null,br=null;function Ls(a){if(a=fh(a)){if(typeof so!="function")throw Error(t(280));var d=a.stateNode;d&&(d=Tp(d),so(a.stateNode,a.type,d))}}function mt(a){Ct?br?br.push(a):br=[a]:Ct=a}function Gt(){if(Ct){var a=Ct,d=br;if(br=Ct=null,Ls(a),d)for(a=0;a<d.length;a++)Ls(d[a])}}function An(a,d){return a(d)}function $t(){}var Ir=!1;function Cn(a,d,x){if(Ir)return a(d,x);Ir=!0;try{return An(a,d,x)}finally{Ir=!1,(Ct!==null||br!==null)&&($t(),Gt())}}function Rt(a,d){var x=a.stateNode;if(x===null)return null;var b=Tp(x);if(b===null)return null;x=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(a=a.type,b=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!b;break e;default:a=!1}if(a)return null;if(x&&typeof x!="function")throw Error(t(231,d,typeof x));return x}var gs=!1;if(h)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){gs=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{gs=!1}function ir(a,d,x,b,S,k,$,ne,ce){var be=Array.prototype.slice.call(arguments,3);try{d.apply(x,be)}catch(Me){this.onError(Me)}}var jn=!1,dr=null,Un=!1,Ye=null,Co={onError:function(a){jn=!0,dr=a}};function So(a,d,x,b,S,k,$,ne,ce){jn=!1,dr=null,ir.apply(Co,arguments)}function Ur(a,d,x,b,S,k,$,ne,ce){if(So.apply(this,arguments),jn){if(jn){var be=dr;jn=!1,dr=null}else throw Error(t(198));Un||(Un=!0,Ye=be)}}function ei(a){var d=a,x=a;if(a.alternate)for(;d.return;)d=d.return;else{a=d;do d=a,(d.flags&4098)!==0&&(x=d.return),a=d.return;while(a)}return d.tag===3?x:null}function Vs(a){if(a.tag===13){var d=a.memoizedState;if(d===null&&(a=a.alternate,a!==null&&(d=a.memoizedState)),d!==null)return d.dehydrated}return null}function _i(a){if(ei(a)!==a)throw Error(t(188))}function ji(a){var d=a.alternate;if(!d){if(d=ei(a),d===null)throw Error(t(188));return d!==a?null:a}for(var x=a,b=d;;){var S=x.return;if(S===null)break;var k=S.alternate;if(k===null){if(b=S.return,b!==null){x=b;continue}break}if(S.child===k.child){for(k=S.child;k;){if(k===x)return _i(S),a;if(k===b)return _i(S),d;k=k.sibling}throw Error(t(188))}if(x.return!==b.return)x=S,b=k;else{for(var $=!1,ne=S.child;ne;){if(ne===x){$=!0,x=S,b=k;break}if(ne===b){$=!0,b=S,x=k;break}ne=ne.sibling}if(!$){for(ne=k.child;ne;){if(ne===x){$=!0,x=k,b=S;break}if(ne===b){$=!0,b=k,x=S;break}ne=ne.sibling}if(!$)throw Error(t(189))}}if(x.alternate!==b)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?a:d}function ic(a){return a=ji(a),a!==null?Ka(a):null}function Ka(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var d=Ka(a);if(d!==null)return d;a=a.sibling}return null}var li=e.unstable_scheduleCallback,Tr=e.unstable_cancelCallback,yn=e.unstable_shouldYield,xu=e.unstable_requestPaint,Zt=e.unstable_now,Xa=e.unstable_getCurrentPriorityLevel,ke=e.unstable_ImmediatePriority,Ro=e.unstable_UserBlockingPriority,Jt=e.unstable_NormalPriority,Fs=e.unstable_LowPriority,wu=e.unstable_IdlePriority,jt=null,Nt=null;function Ot(a){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(jt,a,void 0,(a.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:Qn,da=Math.log,Ya=Math.LN2;function Qn(a){return a>>>=0,a===0?32:31-(da(a)/Ya|0)|0}var Ui=64,Qa=4194304;function mn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ei(a,d){var x=a.pendingLanes;if(x===0)return 0;var b=0,S=a.suspendedLanes,k=a.pingedLanes,$=x&268435455;if($!==0){var ne=$&~S;ne!==0?b=mn(ne):(k&=$,k!==0&&(b=mn(k)))}else $=x&~S,$!==0?b=mn($):k!==0&&(b=mn(k));if(b===0)return 0;if(d!==0&&d!==b&&(d&S)===0&&(S=b&-b,k=d&-d,S>=k||S===16&&(k&4194240)!==0))return d;if((b&4)!==0&&(b|=x&16),d=a.entangledLanes,d!==0)for(a=a.entanglements,d&=b;0<d;)x=31-zr(d),S=1<<x,b|=a[x],d&=~S;return b}function sh(a,d){switch(a){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(a,d){for(var x=a.suspendedLanes,b=a.pingedLanes,S=a.expirationTimes,k=a.pendingLanes;0<k;){var $=31-zr(k),ne=1<<$,ce=S[$];ce===-1?((ne&x)===0||(ne&b)!==0)&&(S[$]=sh(ne,d)):ce<=d&&(a.expiredLanes|=ne),k&=~ne}}function Mt(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Zn(){var a=Ui;return Ui<<=1,(Ui&4194240)===0&&(Ui=64),a}function pe(a){for(var d=[],x=0;31>x;x++)d.push(a);return d}function Q(a,d,x){a.pendingLanes|=d,d!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,d=31-zr(d),a[d]=x}function $e(a,d){var x=a.pendingLanes&~d;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=d,a.mutableReadLanes&=d,a.entangledLanes&=d,d=a.entanglements;var b=a.eventTimes;for(a=a.expirationTimes;0<x;){var S=31-zr(x),k=1<<S;d[S]=0,b[S]=-1,a[S]=-1,x&=~k}}function Rn(a,d){var x=a.entangledLanes|=d;for(a=a.entanglements;x;){var b=31-zr(x),S=1<<b;S&d|a[b]&d&&(a[b]|=d),x&=~S}}var It=0;function No(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Za,Wr,ut,Sn,sc,oc=!1,Zi=[],hr=null,zi=null,ys=null,Nn=new Map,ti=new Map,Hr=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(a,d){switch(a){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Nn.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":ti.delete(d.pointerId)}}function gt(a,d,x,b,S,k){return a===null||a.nativeEvent!==k?(a={blockedOn:d,domEventName:x,eventSystemFlags:b,nativeEvent:k,targetContainers:[S]},d!==null&&(d=fh(d),d!==null&&Wr(d)),a):(a.eventSystemFlags|=b,d=a.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),a)}function Ar(a,d,x,b,S){switch(d){case"focusin":return hr=gt(hr,a,d,x,b,S),!0;case"dragenter":return zi=gt(zi,a,d,x,b,S),!0;case"mouseover":return ys=gt(ys,a,d,x,b,S),!0;case"pointerover":var k=S.pointerId;return Nn.set(k,gt(Nn.get(k)||null,a,d,x,b,S)),!0;case"gotpointercapture":return k=S.pointerId,ti.set(k,gt(ti.get(k)||null,a,d,x,b,S)),!0}return!1}function _u(a){var d=uc(a.target);if(d!==null){var x=ei(d);if(x!==null){if(d=x.tag,d===13){if(d=Vs(x),d!==null){a.blockedOn=d,sc(a.priority,function(){ut(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){a.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xs(a){if(a.blockedOn!==null)return!1;for(var d=a.targetContainers;0<d.length;){var x=fa(a.domEventName,a.eventSystemFlags,d[0],a.nativeEvent);if(x===null){x=a.nativeEvent;var b=new x.constructor(x.type,x);ai=b,x.target.dispatchEvent(b),ai=null}else return d=fh(x),d!==null&&Wr(d),a.blockedOn=x,!1;d.shift()}return!0}function ko(a,d,x){xs(a)&&x.delete(d)}function Bs(){oc=!1,hr!==null&&xs(hr)&&(hr=null),zi!==null&&xs(zi)&&(zi=null),ys!==null&&xs(ys)&&(ys=null),Nn.forEach(ko),ti.forEach(ko)}function ws(a,d){a.blockedOn===d&&(a.blockedOn=null,oc||(oc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bs)))}function ci(a){function d(S){return ws(S,a)}if(0<Zi.length){ws(Zi[0],a);for(var x=1;x<Zi.length;x++){var b=Zi[x];b.blockedOn===a&&(b.blockedOn=null)}}for(hr!==null&&ws(hr,a),zi!==null&&ws(zi,a),ys!==null&&ws(ys,a),Nn.forEach(d),ti.forEach(d),x=0;x<Hr.length;x++)b=Hr[x],b.blockedOn===a&&(b.blockedOn=null);for(;0<Hr.length&&(x=Hr[0],x.blockedOn===null);)_u(x),x.blockedOn===null&&Hr.shift()}var Wi=Y.ReactCurrentBatchConfig,Ji=!0;function kn(a,d,x,b){var S=It,k=Wi.transition;Wi.transition=null;try{It=1,oo(a,d,x,b)}finally{It=S,Wi.transition=k}}function ha(a,d,x,b){var S=It,k=Wi.transition;Wi.transition=null;try{It=4,oo(a,d,x,b)}finally{It=S,Wi.transition=k}}function oo(a,d,x,b){if(Ji){var S=fa(a,d,x,b);if(S===null)c1(a,d,b,fr,x),vu(a,b);else if(Ar(S,a,d,x,b))b.stopPropagation();else if(vu(a,b),d&4&&-1<xt.indexOf(a)){for(;S!==null;){var k=fh(S);if(k!==null&&Za(k),k=fa(a,d,x,b),k===null&&c1(a,d,b,fr,x),k===S)break;S=k}S!==null&&b.stopPropagation()}else c1(a,d,b,null,x)}}var fr=null;function fa(a,d,x,b){if(fr=null,a=jr(b),a=uc(a),a!==null)if(d=ei(a),d===null)a=null;else if(x=d.tag,x===13){if(a=Vs(d),a!==null)return a;a=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;a=null}else d!==a&&(a=null);return fr=a,null}function Ja(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xa()){case ke:return 1;case Ro:return 4;case Jt:case Fs:return 16;case wu:return 536870912;default:return 16}default:return 16}}var Ii=null,el=null,Ti=null;function ac(){if(Ti)return Ti;var a,d=el,x=d.length,b,S="value"in Ii?Ii.value:Ii.textContent,k=S.length;for(a=0;a<x&&d[a]===S[a];a++);var $=x-a;for(b=1;b<=$&&d[x-b]===S[k-b];b++);return Ti=S.slice(a,1<b?1-b:void 0)}function en(a){var d=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&d===13&&(a=13)):a=d,a===10&&(a=13),32<=a||a===13?a:0}function vs(){return!0}function Po(){return!1}function Dn(a){function d(x,b,S,k,$){this._reactName=x,this._targetInst=S,this.type=b,this.nativeEvent=k,this.target=$,this.currentTarget=null;for(var ne in a)a.hasOwnProperty(ne)&&(x=a[ne],this[ne]=x?x(k):k[ne]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?vs:Po,this.isPropagationStopped=Po,this}return Ne(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),d}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_e=Dn(_s),_t=Ne({},_s,{view:0,detail:0}),Cr=Dn(_t),ao,js,Do,pa=Ne({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Do&&(Do&&a.type==="mousemove"?(ao=a.screenX-Do.screenX,js=a.screenY-Do.screenY):js=ao=0,Do=a),ao)},movementY:function(a){return"movementY"in a?a.movementY:js}}),tl=Dn(pa),ma=Ne({},pa,{dataTransfer:0}),Jn=Dn(ma),Oo=Ne({},_t,{relatedTarget:0}),xn=Dn(Oo),ga=Ne({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),ui=Dn(ga),sn=Ne({},_s,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ft=Dn(sn),Eu=Ne({},_s,{data:0}),un=Dn(Eu),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hi(a){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(a):(a=bu[a])?!!d[a]:!1}function ts(){return Hi}var E=Ne({},_t,{key:function(a){if(a.key){var d=es[a.key]||a.key;if(d!=="Unidentified")return d}return a.type==="keypress"?(a=en(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?pr[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(a){return a.type==="keypress"?en(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?en(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),N=Dn(E),F=Ne({},pa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X=Dn(F),me=Ne({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Ie=Dn(me),He=Ne({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),dn=Dn(He),zn=Ne({},pa,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qt=Dn(zn),Pn=[9,13,27,32],Wn=h&&"CompositionEvent"in window,Hn=null;h&&"documentMode"in document&&(Hn=document.documentMode);var Ai=h&&"TextEvent"in window&&!Hn,ni=h&&(!Wn||Hn&&8<Hn&&11>=Hn),nl=" ",Iu=!1;function wp(a,d){switch(a){case"keyup":return Pn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oh(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var di=!1;function s1(a,d){switch(a){case"compositionend":return oh(d);case"keypress":return d.which!==32?null:(Iu=!0,nl);case"textInput":return a=d.data,a===nl&&Iu?null:a;default:return null}}function ah(a,d){if(di)return a==="compositionend"||!Wn&&wp(a,d)?(a=ac(),Ti=el=Ii=null,di=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return ni&&d.locale!=="ko"?null:d.data;default:return null}}var lc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d==="input"?!!lc[a.type]:d==="textarea"}function cc(a,d,x,b){mt(b),d=Ep(d,"onChange"),0<d.length&&(x=new _e("onChange","change",null,x,b),a.push({event:x,listeners:d}))}var j=null,s=null;function l(a){U_(a,0)}function u(a){var d=Cu(a);if(bt(d))return a}function f(a,d){if(a==="change")return d}var p=!1;if(h){var y;if(h){var v="oninput"in document;if(!v){var T=document.createElement("div");T.setAttribute("oninput","return;"),v=typeof T.oninput=="function"}y=v}else y=!1;p=y&&(!document.documentMode||9<document.documentMode)}function C(){j&&(j.detachEvent("onpropertychange",O),s=j=null)}function O(a){if(a.propertyName==="value"&&u(s)){var d=[];cc(d,s,a,jr(a)),Cn(l,d)}}function U(a,d,x){a==="focusin"?(C(),j=d,s=x,j.attachEvent("onpropertychange",O)):a==="focusout"&&C()}function q(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return u(s)}function J(a,d){if(a==="click")return u(d)}function le(a,d){if(a==="input"||a==="change")return u(d)}function ue(a,d){return a===d&&(a!==0||1/a===1/d)||a!==a&&d!==d}var fe=typeof Object.is=="function"?Object.is:ue;function Ee(a,d){if(fe(a,d))return!0;if(typeof a!="object"||a===null||typeof d!="object"||d===null)return!1;var x=Object.keys(a),b=Object.keys(d);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var S=x[b];if(!m.call(d,S)||!fe(a[S],d[S]))return!1}return!0}function Fe(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function je(a,d){var x=Fe(a);a=0;for(var b;x;){if(x.nodeType===3){if(b=a+x.textContent.length,a<=d&&b>=d)return{node:x,offset:d-a};a=b}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Fe(x)}}function Oe(a,d){return a&&d?a===d?!0:a&&a.nodeType===3?!1:d&&d.nodeType===3?Oe(a,d.parentNode):"contains"in a?a.contains(d):a.compareDocumentPosition?!!(a.compareDocumentPosition(d)&16):!1:!1}function Lt(){for(var a=window,d=ht();d instanceof a.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)a=d.contentWindow;else break;d=ht(a.document)}return d}function St(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d&&(d==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||d==="textarea"||a.contentEditable==="true")}function Ci(a){var d=Lt(),x=a.focusedElem,b=a.selectionRange;if(d!==x&&x&&x.ownerDocument&&Oe(x.ownerDocument.documentElement,x)){if(b!==null&&St(x)){if(d=b.start,a=b.end,a===void 0&&(a=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(a,x.value.length);else if(a=(d=x.ownerDocument||document)&&d.defaultView||window,a.getSelection){a=a.getSelection();var S=x.textContent.length,k=Math.min(b.start,S);b=b.end===void 0?k:Math.min(b.end,S),!a.extend&&k>b&&(S=b,b=k,k=S),S=je(x,k);var $=je(x,b);S&&$&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==$.node||a.focusOffset!==$.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),a.removeAllRanges(),k>b?(a.addRange(d),a.extend($.node,$.offset)):(d.setEnd($.node,$.offset),a.addRange(d)))}}for(d=[],a=x;a=a.parentNode;)a.nodeType===1&&d.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)a=d[x],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Es=h&&"documentMode"in document&&11>=document.documentMode,Sr=null,hn=null,sr=null,hi=!1;function ya(a,d,x){var b=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;hi||Sr==null||Sr!==ht(b)||(b=Sr,"selectionStart"in b&&St(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),sr&&Ee(sr,b)||(sr=b,b=Ep(hn,"onSelect"),0<b.length&&(d=new _e("onSelect","select",null,d,x),a.push({event:d,listeners:b}),d.target=Sr)))}function lo(a,d){var x={};return x[a.toLowerCase()]=d.toLowerCase(),x["Webkit"+a]="webkit"+d,x["Moz"+a]="moz"+d,x}var rl={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionend:lo("Transition","TransitionEnd")},lh={},D_={};h&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function vp(a){if(lh[a])return lh[a];if(!rl[a])return a;var d=rl[a],x;for(x in d)if(d.hasOwnProperty(x)&&x in D_)return lh[a]=d[x];return a}var O_=vp("animationend"),M_=vp("animationiteration"),L_=vp("animationstart"),V_=vp("transitionend"),F_=new Map,B_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function il(a,d){F_.set(a,d),o(d,[a])}for(var o1=0;o1<B_.length;o1++){var a1=B_[o1],o8=a1.toLowerCase(),a8=a1[0].toUpperCase()+a1.slice(1);il(o8,"on"+a8)}il(O_,"onAnimationEnd"),il(M_,"onAnimationIteration"),il(L_,"onAnimationStart"),il("dblclick","onDoubleClick"),il("focusin","onFocus"),il("focusout","onBlur"),il(V_,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ch));function j_(a,d,x){var b=a.type||"unknown-event";a.currentTarget=x,Ur(b,d,void 0,a),a.currentTarget=null}function U_(a,d){d=(d&4)!==0;for(var x=0;x<a.length;x++){var b=a[x],S=b.event;b=b.listeners;e:{var k=void 0;if(d)for(var $=b.length-1;0<=$;$--){var ne=b[$],ce=ne.instance,be=ne.currentTarget;if(ne=ne.listener,ce!==k&&S.isPropagationStopped())break e;j_(S,ne,be),k=ce}else for($=0;$<b.length;$++){if(ne=b[$],ce=ne.instance,be=ne.currentTarget,ne=ne.listener,ce!==k&&S.isPropagationStopped())break e;j_(S,ne,be),k=ce}}}if(Un)throw a=Ye,Un=!1,Ye=null,a}function Gn(a,d){var x=d[m1];x===void 0&&(x=d[m1]=new Set);var b=a+"__bubble";x.has(b)||(z_(d,a,2,!1),x.add(b))}function l1(a,d,x){var b=0;d&&(b|=4),z_(x,a,b,d)}var _p="_reactListening"+Math.random().toString(36).slice(2);function uh(a){if(!a[_p]){a[_p]=!0,r.forEach(function(x){x!=="selectionchange"&&(l8.has(x)||l1(x,!1,a),l1(x,!0,a))});var d=a.nodeType===9?a:a.ownerDocument;d===null||d[_p]||(d[_p]=!0,l1("selectionchange",!1,d))}}function z_(a,d,x,b){switch(Ja(d)){case 1:var S=kn;break;case 4:S=ha;break;default:S=oo}x=S.bind(null,d,x,a),S=void 0,!gs||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),b?S!==void 0?a.addEventListener(d,x,{capture:!0,passive:S}):a.addEventListener(d,x,!0):S!==void 0?a.addEventListener(d,x,{passive:S}):a.addEventListener(d,x,!1)}function c1(a,d,x,b,S){var k=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var $=b.tag;if($===3||$===4){var ne=b.stateNode.containerInfo;if(ne===S||ne.nodeType===8&&ne.parentNode===S)break;if($===4)for($=b.return;$!==null;){var ce=$.tag;if((ce===3||ce===4)&&(ce=$.stateNode.containerInfo,ce===S||ce.nodeType===8&&ce.parentNode===S))return;$=$.return}for(;ne!==null;){if($=uc(ne),$===null)return;if(ce=$.tag,ce===5||ce===6){b=k=$;continue e}ne=ne.parentNode}}b=b.return}Cn(function(){var be=k,Me=jr(x),Ve=[];e:{var De=F_.get(a);if(De!==void 0){var Qe=_e,et=a;switch(a){case"keypress":if(en(x)===0)break e;case"keydown":case"keyup":Qe=N;break;case"focusin":et="focus",Qe=xn;break;case"focusout":et="blur",Qe=xn;break;case"beforeblur":case"afterblur":Qe=xn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=Jn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=Ie;break;case O_:case M_:case L_:Qe=ui;break;case V_:Qe=dn;break;case"scroll":Qe=Cr;break;case"wheel":Qe=qt;break;case"copy":case"cut":case"paste":Qe=ft;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=X}var ot=(d&4)!==0,Rr=!ot&&a==="scroll",ye=ot?De!==null?De+"Capture":null:De;ot=[];for(var de=be,ve;de!==null;){ve=de;var Ue=ve.stateNode;if(ve.tag===5&&Ue!==null&&(ve=Ue,ye!==null&&(Ue=Rt(de,ye),Ue!=null&&ot.push(dh(de,Ue,ve)))),Rr)break;de=de.return}0<ot.length&&(De=new Qe(De,et,null,x,Me),Ve.push({event:De,listeners:ot}))}}if((d&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",Qe=a==="mouseout"||a==="pointerout",De&&x!==ai&&(et=x.relatedTarget||x.fromElement)&&(uc(et)||et[xa]))break e;if((Qe||De)&&(De=Me.window===Me?Me:(De=Me.ownerDocument)?De.defaultView||De.parentWindow:window,Qe?(et=x.relatedTarget||x.toElement,Qe=be,et=et?uc(et):null,et!==null&&(Rr=ei(et),et!==Rr||et.tag!==5&&et.tag!==6)&&(et=null)):(Qe=null,et=be),Qe!==et)){if(ot=tl,Ue="onMouseLeave",ye="onMouseEnter",de="mouse",(a==="pointerout"||a==="pointerover")&&(ot=X,Ue="onPointerLeave",ye="onPointerEnter",de="pointer"),Rr=Qe==null?De:Cu(Qe),ve=et==null?De:Cu(et),De=new ot(Ue,de+"leave",Qe,x,Me),De.target=Rr,De.relatedTarget=ve,Ue=null,uc(Me)===be&&(ot=new ot(ye,de+"enter",et,x,Me),ot.target=ve,ot.relatedTarget=Rr,Ue=ot),Rr=Ue,Qe&&et)t:{for(ot=Qe,ye=et,de=0,ve=ot;ve;ve=Tu(ve))de++;for(ve=0,Ue=ye;Ue;Ue=Tu(Ue))ve++;for(;0<de-ve;)ot=Tu(ot),de--;for(;0<ve-de;)ye=Tu(ye),ve--;for(;de--;){if(ot===ye||ye!==null&&ot===ye.alternate)break t;ot=Tu(ot),ye=Tu(ye)}ot=null}else ot=null;Qe!==null&&W_(Ve,De,Qe,ot,!1),et!==null&&Rr!==null&&W_(Ve,Rr,et,ot,!0)}}e:{if(De=be?Cu(be):window,Qe=De.nodeName&&De.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&De.type==="file")var lt=f;else if(Kt(De))if(p)lt=le;else{lt=q;var wt=U}else(Qe=De.nodeName)&&Qe.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(lt=J);if(lt&&(lt=lt(a,be))){cc(Ve,lt,x,Me);break e}wt&&wt(a,De,be),a==="focusout"&&(wt=De._wrapperState)&&wt.controlled&&De.type==="number"&&pt(De,"number",De.value)}switch(wt=be?Cu(be):window,a){case"focusin":(Kt(wt)||wt.contentEditable==="true")&&(Sr=wt,hn=be,sr=null);break;case"focusout":sr=hn=Sr=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,ya(Ve,x,Me);break;case"selectionchange":if(Es)break;case"keydown":case"keyup":ya(Ve,x,Me)}var vt;if(Wn)e:{switch(a){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else di?wp(a,x)&&(At="onCompositionEnd"):a==="keydown"&&x.keyCode===229&&(At="onCompositionStart");At&&(ni&&x.locale!=="ko"&&(di||At!=="onCompositionStart"?At==="onCompositionEnd"&&di&&(vt=ac()):(Ii=Me,el="value"in Ii?Ii.value:Ii.textContent,di=!0)),wt=Ep(be,At),0<wt.length&&(At=new un(At,a,null,x,Me),Ve.push({event:At,listeners:wt}),vt?At.data=vt:(vt=oh(x),vt!==null&&(At.data=vt)))),(vt=Ai?s1(a,x):ah(a,x))&&(be=Ep(be,"onBeforeInput"),0<be.length&&(Me=new un("onBeforeInput","beforeinput",null,x,Me),Ve.push({event:Me,listeners:be}),Me.data=vt))}U_(Ve,d)})}function dh(a,d,x){return{instance:a,listener:d,currentTarget:x}}function Ep(a,d){for(var x=d+"Capture",b=[];a!==null;){var S=a,k=S.stateNode;S.tag===5&&k!==null&&(S=k,k=Rt(a,x),k!=null&&b.unshift(dh(a,k,S)),k=Rt(a,d),k!=null&&b.push(dh(a,k,S))),a=a.return}return b}function Tu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function W_(a,d,x,b,S){for(var k=d._reactName,$=[];x!==null&&x!==b;){var ne=x,ce=ne.alternate,be=ne.stateNode;if(ce!==null&&ce===b)break;ne.tag===5&&be!==null&&(ne=be,S?(ce=Rt(x,k),ce!=null&&$.unshift(dh(x,ce,ne))):S||(ce=Rt(x,k),ce!=null&&$.push(dh(x,ce,ne)))),x=x.return}$.length!==0&&a.push({event:d,listeners:$})}var c8=/\r\n?/g,u8=/\u0000|\uFFFD/g;function H_(a){return(typeof a=="string"?a:""+a).replace(c8,`
`).replace(u8,"")}function bp(a,d,x){if(d=H_(d),H_(a)!==d&&x)throw Error(t(425))}function Ip(){}var u1=null,d1=null;function h1(a,d){return a==="textarea"||a==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var f1=typeof setTimeout=="function"?setTimeout:void 0,d8=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,h8=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(a){return G_.resolve(null).then(a).catch(f8)}:f1;function f8(a){setTimeout(function(){throw a})}function p1(a,d){var x=d,b=0;do{var S=x.nextSibling;if(a.removeChild(x),S&&S.nodeType===8)if(x=S.data,x==="/$"){if(b===0){a.removeChild(S),ci(d);return}b--}else x!=="$"&&x!=="$?"&&x!=="$!"||b++;x=S}while(x);ci(d)}function sl(a){for(;a!=null;a=a.nextSibling){var d=a.nodeType;if(d===1||d===3)break;if(d===8){if(d=a.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return a}function $_(a){a=a.previousSibling;for(var d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return a;d--}else x==="/$"&&d++}a=a.previousSibling}return null}var Au=Math.random().toString(36).slice(2),Mo="__reactFiber$"+Au,hh="__reactProps$"+Au,xa="__reactContainer$"+Au,m1="__reactEvents$"+Au,p8="__reactListeners$"+Au,m8="__reactHandles$"+Au;function uc(a){var d=a[Mo];if(d)return d;for(var x=a.parentNode;x;){if(d=x[xa]||x[Mo]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(a=$_(a);a!==null;){if(x=a[Mo])return x;a=$_(a)}return d}a=x,x=a.parentNode}return null}function fh(a){return a=a[Mo]||a[xa],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Cu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Tp(a){return a[hh]||null}var g1=[],Su=-1;function ol(a){return{current:a}}function $n(a){0>Su||(a.current=g1[Su],g1[Su]=null,Su--)}function On(a,d){Su++,g1[Su]=a.current,a.current=d}var al={},Si=ol(al),ns=ol(!1),dc=al;function Ru(a,d){var x=a.type.contextTypes;if(!x)return al;var b=a.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var S={},k;for(k in x)S[k]=d[k];return b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=S),S}function rs(a){return a=a.childContextTypes,a!=null}function Ap(){$n(ns),$n(Si)}function q_(a,d,x){if(Si.current!==al)throw Error(t(168));On(Si,d),On(ns,x)}function K_(a,d,x){var b=a.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return x;b=b.getChildContext();for(var S in b)if(!(S in d))throw Error(t(108,Pe(a)||"Unknown",S));return Ne({},x,b)}function Cp(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||al,dc=Si.current,On(Si,a),On(ns,ns.current),!0}function X_(a,d,x){var b=a.stateNode;if(!b)throw Error(t(169));x?(a=K_(a,d,dc),b.__reactInternalMemoizedMergedChildContext=a,$n(ns),$n(Si),On(Si,a)):$n(ns),On(ns,x)}var wa=null,Sp=!1,y1=!1;function Y_(a){wa===null?wa=[a]:wa.push(a)}function g8(a){Sp=!0,Y_(a)}function ll(){if(!y1&&wa!==null){y1=!0;var a=0,d=It;try{var x=wa;for(It=1;a<x.length;a++){var b=x[a];do b=b(!0);while(b!==null)}wa=null,Sp=!1}catch(S){throw wa!==null&&(wa=wa.slice(a+1)),li(ke,ll),S}finally{It=d,y1=!1}}return null}var Nu=[],ku=0,Rp=null,Np=0,Us=[],zs=0,hc=null,va=1,_a="";function fc(a,d){Nu[ku++]=Np,Nu[ku++]=Rp,Rp=a,Np=d}function Q_(a,d,x){Us[zs++]=va,Us[zs++]=_a,Us[zs++]=hc,hc=a;var b=va;a=_a;var S=32-zr(b)-1;b&=~(1<<S),x+=1;var k=32-zr(d)+S;if(30<k){var $=S-S%5;k=(b&(1<<$)-1).toString(32),b>>=$,S-=$,va=1<<32-zr(d)+S|x<<S|b,_a=k+a}else va=1<<k|x<<S|b,_a=a}function x1(a){a.return!==null&&(fc(a,1),Q_(a,1,0))}function w1(a){for(;a===Rp;)Rp=Nu[--ku],Nu[ku]=null,Np=Nu[--ku],Nu[ku]=null;for(;a===hc;)hc=Us[--zs],Us[zs]=null,_a=Us[--zs],Us[zs]=null,va=Us[--zs],Us[zs]=null}var bs=null,Is=null,er=!1,co=null;function Z_(a,d){var x=$s(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=a,d=a.deletions,d===null?(a.deletions=[x],a.flags|=16):d.push(x)}function J_(a,d){switch(a.tag){case 5:var x=a.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(a.stateNode=d,bs=a,Is=sl(d.firstChild),!0):!1;case 6:return d=a.pendingProps===""||d.nodeType!==3?null:d,d!==null?(a.stateNode=d,bs=a,Is=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=hc!==null?{id:va,overflow:_a}:null,a.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=$s(18,null,null,0),x.stateNode=d,x.return=a,a.child=x,bs=a,Is=null,!0):!1;default:return!1}}function v1(a){return(a.mode&1)!==0&&(a.flags&128)===0}function _1(a){if(er){var d=Is;if(d){var x=d;if(!J_(a,d)){if(v1(a))throw Error(t(418));d=sl(x.nextSibling);var b=bs;d&&J_(a,d)?Z_(b,x):(a.flags=a.flags&-4097|2,er=!1,bs=a)}}else{if(v1(a))throw Error(t(418));a.flags=a.flags&-4097|2,er=!1,bs=a}}}function eE(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;bs=a}function kp(a){if(a!==bs)return!1;if(!er)return eE(a),er=!0,!1;var d;if((d=a.tag!==3)&&!(d=a.tag!==5)&&(d=a.type,d=d!=="head"&&d!=="body"&&!h1(a.type,a.memoizedProps)),d&&(d=Is)){if(v1(a))throw tE(),Error(t(418));for(;d;)Z_(a,d),d=sl(d.nextSibling)}if(eE(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="/$"){if(d===0){Is=sl(a.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}a=a.nextSibling}Is=null}}else Is=bs?sl(a.stateNode.nextSibling):null;return!0}function tE(){for(var a=Is;a;)a=sl(a.nextSibling)}function Pu(){Is=bs=null,er=!1}function E1(a){co===null?co=[a]:co.push(a)}var y8=Y.ReactCurrentBatchConfig;function ph(a,d,x){if(a=x.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(t(309));var b=x.stateNode}if(!b)throw Error(t(147,a));var S=b,k=""+a;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===k?d.ref:(d=function($){var ne=S.refs;$===null?delete ne[k]:ne[k]=$},d._stringRef=k,d)}if(typeof a!="string")throw Error(t(284));if(!x._owner)throw Error(t(290,a))}return a}function Pp(a,d){throw a=Object.prototype.toString.call(d),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":a))}function nE(a){var d=a._init;return d(a._payload)}function rE(a){function d(ye,de){if(a){var ve=ye.deletions;ve===null?(ye.deletions=[de],ye.flags|=16):ve.push(de)}}function x(ye,de){if(!a)return null;for(;de!==null;)d(ye,de),de=de.sibling;return null}function b(ye,de){for(ye=new Map;de!==null;)de.key!==null?ye.set(de.key,de):ye.set(de.index,de),de=de.sibling;return ye}function S(ye,de){return ye=gl(ye,de),ye.index=0,ye.sibling=null,ye}function k(ye,de,ve){return ye.index=ve,a?(ve=ye.alternate,ve!==null?(ve=ve.index,ve<de?(ye.flags|=2,de):ve):(ye.flags|=2,de)):(ye.flags|=1048576,de)}function $(ye){return a&&ye.alternate===null&&(ye.flags|=2),ye}function ne(ye,de,ve,Ue){return de===null||de.tag!==6?(de=fy(ve,ye.mode,Ue),de.return=ye,de):(de=S(de,ve),de.return=ye,de)}function ce(ye,de,ve,Ue){var lt=ve.type;return lt===V?Me(ye,de,ve.props.children,Ue,ve.key):de!==null&&(de.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Te&&nE(lt)===de.type)?(Ue=S(de,ve.props),Ue.ref=ph(ye,de,ve),Ue.return=ye,Ue):(Ue=nm(ve.type,ve.key,ve.props,null,ye.mode,Ue),Ue.ref=ph(ye,de,ve),Ue.return=ye,Ue)}function be(ye,de,ve,Ue){return de===null||de.tag!==4||de.stateNode.containerInfo!==ve.containerInfo||de.stateNode.implementation!==ve.implementation?(de=py(ve,ye.mode,Ue),de.return=ye,de):(de=S(de,ve.children||[]),de.return=ye,de)}function Me(ye,de,ve,Ue,lt){return de===null||de.tag!==7?(de=_c(ve,ye.mode,Ue,lt),de.return=ye,de):(de=S(de,ve),de.return=ye,de)}function Ve(ye,de,ve){if(typeof de=="string"&&de!==""||typeof de=="number")return de=fy(""+de,ye.mode,ve),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case re:return ve=nm(de.type,de.key,de.props,null,ye.mode,ve),ve.ref=ph(ye,null,de),ve.return=ye,ve;case ie:return de=py(de,ye.mode,ve),de.return=ye,de;case Te:var Ue=de._init;return Ve(ye,Ue(de._payload),ve)}if(xi(de)||Ae(de))return de=_c(de,ye.mode,ve,null),de.return=ye,de;Pp(ye,de)}return null}function De(ye,de,ve,Ue){var lt=de!==null?de.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return lt!==null?null:ne(ye,de,""+ve,Ue);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case re:return ve.key===lt?ce(ye,de,ve,Ue):null;case ie:return ve.key===lt?be(ye,de,ve,Ue):null;case Te:return lt=ve._init,De(ye,de,lt(ve._payload),Ue)}if(xi(ve)||Ae(ve))return lt!==null?null:Me(ye,de,ve,Ue,null);Pp(ye,ve)}return null}function Qe(ye,de,ve,Ue,lt){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return ye=ye.get(ve)||null,ne(de,ye,""+Ue,lt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case re:return ye=ye.get(Ue.key===null?ve:Ue.key)||null,ce(de,ye,Ue,lt);case ie:return ye=ye.get(Ue.key===null?ve:Ue.key)||null,be(de,ye,Ue,lt);case Te:var wt=Ue._init;return Qe(ye,de,ve,wt(Ue._payload),lt)}if(xi(Ue)||Ae(Ue))return ye=ye.get(ve)||null,Me(de,ye,Ue,lt,null);Pp(de,Ue)}return null}function et(ye,de,ve,Ue){for(var lt=null,wt=null,vt=de,At=de=0,si=null;vt!==null&&At<ve.length;At++){vt.index>At?(si=vt,vt=null):si=vt.sibling;var on=De(ye,vt,ve[At],Ue);if(on===null){vt===null&&(vt=si);break}a&&vt&&on.alternate===null&&d(ye,vt),de=k(on,de,At),wt===null?lt=on:wt.sibling=on,wt=on,vt=si}if(At===ve.length)return x(ye,vt),er&&fc(ye,At),lt;if(vt===null){for(;At<ve.length;At++)vt=Ve(ye,ve[At],Ue),vt!==null&&(de=k(vt,de,At),wt===null?lt=vt:wt.sibling=vt,wt=vt);return er&&fc(ye,At),lt}for(vt=b(ye,vt);At<ve.length;At++)si=Qe(vt,ye,At,ve[At],Ue),si!==null&&(a&&si.alternate!==null&&vt.delete(si.key===null?At:si.key),de=k(si,de,At),wt===null?lt=si:wt.sibling=si,wt=si);return a&&vt.forEach(function(yl){return d(ye,yl)}),er&&fc(ye,At),lt}function ot(ye,de,ve,Ue){var lt=Ae(ve);if(typeof lt!="function")throw Error(t(150));if(ve=lt.call(ve),ve==null)throw Error(t(151));for(var wt=lt=null,vt=de,At=de=0,si=null,on=ve.next();vt!==null&&!on.done;At++,on=ve.next()){vt.index>At?(si=vt,vt=null):si=vt.sibling;var yl=De(ye,vt,on.value,Ue);if(yl===null){vt===null&&(vt=si);break}a&&vt&&yl.alternate===null&&d(ye,vt),de=k(yl,de,At),wt===null?lt=yl:wt.sibling=yl,wt=yl,vt=si}if(on.done)return x(ye,vt),er&&fc(ye,At),lt;if(vt===null){for(;!on.done;At++,on=ve.next())on=Ve(ye,on.value,Ue),on!==null&&(de=k(on,de,At),wt===null?lt=on:wt.sibling=on,wt=on);return er&&fc(ye,At),lt}for(vt=b(ye,vt);!on.done;At++,on=ve.next())on=Qe(vt,ye,At,on.value,Ue),on!==null&&(a&&on.alternate!==null&&vt.delete(on.key===null?At:on.key),de=k(on,de,At),wt===null?lt=on:wt.sibling=on,wt=on);return a&&vt.forEach(function(Y8){return d(ye,Y8)}),er&&fc(ye,At),lt}function Rr(ye,de,ve,Ue){if(typeof ve=="object"&&ve!==null&&ve.type===V&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case re:e:{for(var lt=ve.key,wt=de;wt!==null;){if(wt.key===lt){if(lt=ve.type,lt===V){if(wt.tag===7){x(ye,wt.sibling),de=S(wt,ve.props.children),de.return=ye,ye=de;break e}}else if(wt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Te&&nE(lt)===wt.type){x(ye,wt.sibling),de=S(wt,ve.props),de.ref=ph(ye,wt,ve),de.return=ye,ye=de;break e}x(ye,wt);break}else d(ye,wt);wt=wt.sibling}ve.type===V?(de=_c(ve.props.children,ye.mode,Ue,ve.key),de.return=ye,ye=de):(Ue=nm(ve.type,ve.key,ve.props,null,ye.mode,Ue),Ue.ref=ph(ye,de,ve),Ue.return=ye,ye=Ue)}return $(ye);case ie:e:{for(wt=ve.key;de!==null;){if(de.key===wt)if(de.tag===4&&de.stateNode.containerInfo===ve.containerInfo&&de.stateNode.implementation===ve.implementation){x(ye,de.sibling),de=S(de,ve.children||[]),de.return=ye,ye=de;break e}else{x(ye,de);break}else d(ye,de);de=de.sibling}de=py(ve,ye.mode,Ue),de.return=ye,ye=de}return $(ye);case Te:return wt=ve._init,Rr(ye,de,wt(ve._payload),Ue)}if(xi(ve))return et(ye,de,ve,Ue);if(Ae(ve))return ot(ye,de,ve,Ue);Pp(ye,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,de!==null&&de.tag===6?(x(ye,de.sibling),de=S(de,ve),de.return=ye,ye=de):(x(ye,de),de=fy(ve,ye.mode,Ue),de.return=ye,ye=de),$(ye)):x(ye,de)}return Rr}var Du=rE(!0),iE=rE(!1),Dp=ol(null),Op=null,Ou=null,b1=null;function I1(){b1=Ou=Op=null}function T1(a){var d=Dp.current;$n(Dp),a._currentValue=d}function A1(a,d,x){for(;a!==null;){var b=a.alternate;if((a.childLanes&d)!==d?(a.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),a===x)break;a=a.return}}function Mu(a,d){Op=a,b1=Ou=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&d)!==0&&(is=!0),a.firstContext=null)}function Ws(a){var d=a._currentValue;if(b1!==a)if(a={context:a,memoizedValue:d,next:null},Ou===null){if(Op===null)throw Error(t(308));Ou=a,Op.dependencies={lanes:0,firstContext:a}}else Ou=Ou.next=a;return d}var pc=null;function C1(a){pc===null?pc=[a]:pc.push(a)}function sE(a,d,x,b){var S=d.interleaved;return S===null?(x.next=x,C1(d)):(x.next=S.next,S.next=x),d.interleaved=x,Ea(a,b)}function Ea(a,d){a.lanes|=d;var x=a.alternate;for(x!==null&&(x.lanes|=d),x=a,a=a.return;a!==null;)a.childLanes|=d,x=a.alternate,x!==null&&(x.childLanes|=d),x=a,a=a.return;return x.tag===3?x.stateNode:null}var cl=!1;function S1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oE(a,d){a=a.updateQueue,d.updateQueue===a&&(d.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ba(a,d){return{eventTime:a,lane:d,tag:0,payload:null,callback:null,next:null}}function ul(a,d,x){var b=a.updateQueue;if(b===null)return null;if(b=b.shared,(rn&2)!==0){var S=b.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),b.pending=d,Ea(a,x)}return S=b.interleaved,S===null?(d.next=d,C1(b)):(d.next=S.next,S.next=d),b.interleaved=d,Ea(a,x)}function Mp(a,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}function aE(a,d){var x=a.updateQueue,b=a.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var S=null,k=null;if(x=x.firstBaseUpdate,x!==null){do{var $={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};k===null?S=k=$:k=k.next=$,x=x.next}while(x!==null);k===null?S=k=d:k=k.next=d}else S=k=d;x={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:k,shared:b.shared,effects:b.effects},a.updateQueue=x;return}a=x.lastBaseUpdate,a===null?x.firstBaseUpdate=d:a.next=d,x.lastBaseUpdate=d}function Lp(a,d,x,b){var S=a.updateQueue;cl=!1;var k=S.firstBaseUpdate,$=S.lastBaseUpdate,ne=S.shared.pending;if(ne!==null){S.shared.pending=null;var ce=ne,be=ce.next;ce.next=null,$===null?k=be:$.next=be,$=ce;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,ne=Me.lastBaseUpdate,ne!==$&&(ne===null?Me.firstBaseUpdate=be:ne.next=be,Me.lastBaseUpdate=ce))}if(k!==null){var Ve=S.baseState;$=0,Me=be=ce=null,ne=k;do{var De=ne.lane,Qe=ne.eventTime;if((b&De)===De){Me!==null&&(Me=Me.next={eventTime:Qe,lane:0,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null});e:{var et=a,ot=ne;switch(De=d,Qe=x,ot.tag){case 1:if(et=ot.payload,typeof et=="function"){Ve=et.call(Qe,Ve,De);break e}Ve=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=ot.payload,De=typeof et=="function"?et.call(Qe,Ve,De):et,De==null)break e;Ve=Ne({},Ve,De);break e;case 2:cl=!0}}ne.callback!==null&&ne.lane!==0&&(a.flags|=64,De=S.effects,De===null?S.effects=[ne]:De.push(ne))}else Qe={eventTime:Qe,lane:De,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},Me===null?(be=Me=Qe,ce=Ve):Me=Me.next=Qe,$|=De;if(ne=ne.next,ne===null){if(ne=S.shared.pending,ne===null)break;De=ne,ne=De.next,De.next=null,S.lastBaseUpdate=De,S.shared.pending=null}}while(!0);if(Me===null&&(ce=Ve),S.baseState=ce,S.firstBaseUpdate=be,S.lastBaseUpdate=Me,d=S.shared.interleaved,d!==null){S=d;do $|=S.lane,S=S.next;while(S!==d)}else k===null&&(S.shared.lanes=0);yc|=$,a.lanes=$,a.memoizedState=Ve}}function lE(a,d,x){if(a=d.effects,d.effects=null,a!==null)for(d=0;d<a.length;d++){var b=a[d],S=b.callback;if(S!==null){if(b.callback=null,b=x,typeof S!="function")throw Error(t(191,S));S.call(b)}}}var mh={},Lo=ol(mh),gh=ol(mh),yh=ol(mh);function mc(a){if(a===mh)throw Error(t(174));return a}function R1(a,d){switch(On(yh,d),On(gh,a),On(Lo,mh),a=d.nodeType,a){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Yn(null,"");break;default:a=a===8?d.parentNode:d,d=a.namespaceURI||null,a=a.tagName,d=Yn(d,a)}$n(Lo),On(Lo,d)}function Lu(){$n(Lo),$n(gh),$n(yh)}function cE(a){mc(yh.current);var d=mc(Lo.current),x=Yn(d,a.type);d!==x&&(On(gh,a),On(Lo,x))}function N1(a){gh.current===a&&($n(Lo),$n(gh))}var or=ol(0);function Vp(a){for(var d=a;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var k1=[];function P1(){for(var a=0;a<k1.length;a++)k1[a]._workInProgressVersionPrimary=null;k1.length=0}var Fp=Y.ReactCurrentDispatcher,D1=Y.ReactCurrentBatchConfig,gc=0,ar=null,Gr=null,ri=null,Bp=!1,xh=!1,wh=0,x8=0;function Ri(){throw Error(t(321))}function O1(a,d){if(d===null)return!1;for(var x=0;x<d.length&&x<a.length;x++)if(!fe(a[x],d[x]))return!1;return!0}function M1(a,d,x,b,S,k){if(gc=k,ar=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Fp.current=a===null||a.memoizedState===null?E8:b8,a=x(b,S),xh){k=0;do{if(xh=!1,wh=0,25<=k)throw Error(t(301));k+=1,ri=Gr=null,d.updateQueue=null,Fp.current=I8,a=x(b,S)}while(xh)}if(Fp.current=zp,d=Gr!==null&&Gr.next!==null,gc=0,ri=Gr=ar=null,Bp=!1,d)throw Error(t(300));return a}function L1(){var a=wh!==0;return wh=0,a}function Vo(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ri===null?ar.memoizedState=ri=a:ri=ri.next=a,ri}function Hs(){if(Gr===null){var a=ar.alternate;a=a!==null?a.memoizedState:null}else a=Gr.next;var d=ri===null?ar.memoizedState:ri.next;if(d!==null)ri=d,Gr=a;else{if(a===null)throw Error(t(310));Gr=a,a={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},ri===null?ar.memoizedState=ri=a:ri=ri.next=a}return ri}function vh(a,d){return typeof d=="function"?d(a):d}function V1(a){var d=Hs(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=Gr,S=b.baseQueue,k=x.pending;if(k!==null){if(S!==null){var $=S.next;S.next=k.next,k.next=$}b.baseQueue=S=k,x.pending=null}if(S!==null){k=S.next,b=b.baseState;var ne=$=null,ce=null,be=k;do{var Me=be.lane;if((gc&Me)===Me)ce!==null&&(ce=ce.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),b=be.hasEagerState?be.eagerState:a(b,be.action);else{var Ve={lane:Me,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ce===null?(ne=ce=Ve,$=b):ce=ce.next=Ve,ar.lanes|=Me,yc|=Me}be=be.next}while(be!==null&&be!==k);ce===null?$=b:ce.next=ne,fe(b,d.memoizedState)||(is=!0),d.memoizedState=b,d.baseState=$,d.baseQueue=ce,x.lastRenderedState=b}if(a=x.interleaved,a!==null){S=a;do k=S.lane,ar.lanes|=k,yc|=k,S=S.next;while(S!==a)}else S===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function F1(a){var d=Hs(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=x.dispatch,S=x.pending,k=d.memoizedState;if(S!==null){x.pending=null;var $=S=S.next;do k=a(k,$.action),$=$.next;while($!==S);fe(k,d.memoizedState)||(is=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),x.lastRenderedState=k}return[k,b]}function uE(){}function dE(a,d){var x=ar,b=Hs(),S=d(),k=!fe(b.memoizedState,S);if(k&&(b.memoizedState=S,is=!0),b=b.queue,B1(pE.bind(null,x,b,a),[a]),b.getSnapshot!==d||k||ri!==null&&ri.memoizedState.tag&1){if(x.flags|=2048,_h(9,fE.bind(null,x,b,S,d),void 0,null),ii===null)throw Error(t(349));(gc&30)!==0||hE(x,d,S)}return S}function hE(a,d,x){a.flags|=16384,a={getSnapshot:d,value:x},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.stores=[a]):(x=d.stores,x===null?d.stores=[a]:x.push(a))}function fE(a,d,x,b){d.value=x,d.getSnapshot=b,mE(d)&&gE(a)}function pE(a,d,x){return x(function(){mE(d)&&gE(a)})}function mE(a){var d=a.getSnapshot;a=a.value;try{var x=d();return!fe(a,x)}catch{return!0}}function gE(a){var d=Ea(a,1);d!==null&&po(d,a,1,-1)}function yE(a){var d=Vo();return typeof a=="function"&&(a=a()),d.memoizedState=d.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:a},d.queue=a,a=a.dispatch=_8.bind(null,ar,a),[d.memoizedState,a]}function _h(a,d,x,b){return a={tag:a,create:d,destroy:x,deps:b,next:null},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.lastEffect=a.next=a):(x=d.lastEffect,x===null?d.lastEffect=a.next=a:(b=x.next,x.next=a,a.next=b,d.lastEffect=a)),a}function xE(){return Hs().memoizedState}function jp(a,d,x,b){var S=Vo();ar.flags|=a,S.memoizedState=_h(1|d,x,void 0,b===void 0?null:b)}function Up(a,d,x,b){var S=Hs();b=b===void 0?null:b;var k=void 0;if(Gr!==null){var $=Gr.memoizedState;if(k=$.destroy,b!==null&&O1(b,$.deps)){S.memoizedState=_h(d,x,k,b);return}}ar.flags|=a,S.memoizedState=_h(1|d,x,k,b)}function wE(a,d){return jp(8390656,8,a,d)}function B1(a,d){return Up(2048,8,a,d)}function vE(a,d){return Up(4,2,a,d)}function _E(a,d){return Up(4,4,a,d)}function EE(a,d){if(typeof d=="function")return a=a(),d(a),function(){d(null)};if(d!=null)return a=a(),d.current=a,function(){d.current=null}}function bE(a,d,x){return x=x!=null?x.concat([a]):null,Up(4,4,EE.bind(null,d,a),x)}function j1(){}function IE(a,d){var x=Hs();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&O1(d,b[1])?b[0]:(x.memoizedState=[a,d],a)}function TE(a,d){var x=Hs();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&O1(d,b[1])?b[0]:(a=a(),x.memoizedState=[a,d],a)}function AE(a,d,x){return(gc&21)===0?(a.baseState&&(a.baseState=!1,is=!0),a.memoizedState=x):(fe(x,d)||(x=Zn(),ar.lanes|=x,yc|=x,a.baseState=!0),d)}function w8(a,d){var x=It;It=x!==0&&4>x?x:4,a(!0);var b=D1.transition;D1.transition={};try{a(!1),d()}finally{It=x,D1.transition=b}}function CE(){return Hs().memoizedState}function v8(a,d,x){var b=pl(a);if(x={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null},SE(a))RE(d,x);else if(x=sE(a,d,x,b),x!==null){var S=$i();po(x,a,b,S),NE(x,d,b)}}function _8(a,d,x){var b=pl(a),S={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null};if(SE(a))RE(d,S);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var $=d.lastRenderedState,ne=k($,x);if(S.hasEagerState=!0,S.eagerState=ne,fe(ne,$)){var ce=d.interleaved;ce===null?(S.next=S,C1(d)):(S.next=ce.next,ce.next=S),d.interleaved=S;return}}catch{}finally{}x=sE(a,d,S,b),x!==null&&(S=$i(),po(x,a,b,S),NE(x,d,b))}}function SE(a){var d=a.alternate;return a===ar||d!==null&&d===ar}function RE(a,d){xh=Bp=!0;var x=a.pending;x===null?d.next=d:(d.next=x.next,x.next=d),a.pending=d}function NE(a,d,x){if((x&4194240)!==0){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}var zp={readContext:Ws,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},E8={readContext:Ws,useCallback:function(a,d){return Vo().memoizedState=[a,d===void 0?null:d],a},useContext:Ws,useEffect:wE,useImperativeHandle:function(a,d,x){return x=x!=null?x.concat([a]):null,jp(4194308,4,EE.bind(null,d,a),x)},useLayoutEffect:function(a,d){return jp(4194308,4,a,d)},useInsertionEffect:function(a,d){return jp(4,2,a,d)},useMemo:function(a,d){var x=Vo();return d=d===void 0?null:d,a=a(),x.memoizedState=[a,d],a},useReducer:function(a,d,x){var b=Vo();return d=x!==void 0?x(d):d,b.memoizedState=b.baseState=d,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:d},b.queue=a,a=a.dispatch=v8.bind(null,ar,a),[b.memoizedState,a]},useRef:function(a){var d=Vo();return a={current:a},d.memoizedState=a},useState:yE,useDebugValue:j1,useDeferredValue:function(a){return Vo().memoizedState=a},useTransition:function(){var a=yE(!1),d=a[0];return a=w8.bind(null,a[1]),Vo().memoizedState=a,[d,a]},useMutableSource:function(){},useSyncExternalStore:function(a,d,x){var b=ar,S=Vo();if(er){if(x===void 0)throw Error(t(407));x=x()}else{if(x=d(),ii===null)throw Error(t(349));(gc&30)!==0||hE(b,d,x)}S.memoizedState=x;var k={value:x,getSnapshot:d};return S.queue=k,wE(pE.bind(null,b,k,a),[a]),b.flags|=2048,_h(9,fE.bind(null,b,k,x,d),void 0,null),x},useId:function(){var a=Vo(),d=ii.identifierPrefix;if(er){var x=_a,b=va;x=(b&~(1<<32-zr(b)-1)).toString(32)+x,d=":"+d+"R"+x,x=wh++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=x8++,d=":"+d+"r"+x.toString(32)+":";return a.memoizedState=d},unstable_isNewReconciler:!1},b8={readContext:Ws,useCallback:IE,useContext:Ws,useEffect:B1,useImperativeHandle:bE,useInsertionEffect:vE,useLayoutEffect:_E,useMemo:TE,useReducer:V1,useRef:xE,useState:function(){return V1(vh)},useDebugValue:j1,useDeferredValue:function(a){var d=Hs();return AE(d,Gr.memoizedState,a)},useTransition:function(){var a=V1(vh)[0],d=Hs().memoizedState;return[a,d]},useMutableSource:uE,useSyncExternalStore:dE,useId:CE,unstable_isNewReconciler:!1},I8={readContext:Ws,useCallback:IE,useContext:Ws,useEffect:B1,useImperativeHandle:bE,useInsertionEffect:vE,useLayoutEffect:_E,useMemo:TE,useReducer:F1,useRef:xE,useState:function(){return F1(vh)},useDebugValue:j1,useDeferredValue:function(a){var d=Hs();return Gr===null?d.memoizedState=a:AE(d,Gr.memoizedState,a)},useTransition:function(){var a=F1(vh)[0],d=Hs().memoizedState;return[a,d]},useMutableSource:uE,useSyncExternalStore:dE,useId:CE,unstable_isNewReconciler:!1};function uo(a,d){if(a&&a.defaultProps){d=Ne({},d),a=a.defaultProps;for(var x in a)d[x]===void 0&&(d[x]=a[x]);return d}return d}function U1(a,d,x,b){d=a.memoizedState,x=x(b,d),x=x==null?d:Ne({},d,x),a.memoizedState=x,a.lanes===0&&(a.updateQueue.baseState=x)}var Wp={isMounted:function(a){return(a=a._reactInternals)?ei(a)===a:!1},enqueueSetState:function(a,d,x){a=a._reactInternals;var b=$i(),S=pl(a),k=ba(b,S);k.payload=d,x!=null&&(k.callback=x),d=ul(a,k,S),d!==null&&(po(d,a,S,b),Mp(d,a,S))},enqueueReplaceState:function(a,d,x){a=a._reactInternals;var b=$i(),S=pl(a),k=ba(b,S);k.tag=1,k.payload=d,x!=null&&(k.callback=x),d=ul(a,k,S),d!==null&&(po(d,a,S,b),Mp(d,a,S))},enqueueForceUpdate:function(a,d){a=a._reactInternals;var x=$i(),b=pl(a),S=ba(x,b);S.tag=2,d!=null&&(S.callback=d),d=ul(a,S,b),d!==null&&(po(d,a,b,x),Mp(d,a,b))}};function kE(a,d,x,b,S,k,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(b,k,$):d.prototype&&d.prototype.isPureReactComponent?!Ee(x,b)||!Ee(S,k):!0}function PE(a,d,x){var b=!1,S=al,k=d.contextType;return typeof k=="object"&&k!==null?k=Ws(k):(S=rs(d)?dc:Si.current,b=d.contextTypes,k=(b=b!=null)?Ru(a,S):al),d=new d(x,k),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Wp,a.stateNode=d,d._reactInternals=a,b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=k),d}function DE(a,d,x,b){a=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,b),d.state!==a&&Wp.enqueueReplaceState(d,d.state,null)}function z1(a,d,x,b){var S=a.stateNode;S.props=x,S.state=a.memoizedState,S.refs={},S1(a);var k=d.contextType;typeof k=="object"&&k!==null?S.context=Ws(k):(k=rs(d)?dc:Si.current,S.context=Ru(a,k)),S.state=a.memoizedState,k=d.getDerivedStateFromProps,typeof k=="function"&&(U1(a,d,k,x),S.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&Wp.enqueueReplaceState(S,S.state,null),Lp(a,x,S,b),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function Vu(a,d){try{var x="",b=d;do x+=it(b),b=b.return;while(b);var S=x}catch(k){S=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:d,stack:S,digest:null}}function W1(a,d,x){return{value:a,source:null,stack:x??null,digest:d??null}}function H1(a,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var T8=typeof WeakMap=="function"?WeakMap:Map;function OE(a,d,x){x=ba(-1,x),x.tag=3,x.payload={element:null};var b=d.value;return x.callback=function(){Yp||(Yp=!0,sy=b),H1(a,d)},x}function ME(a,d,x){x=ba(-1,x),x.tag=3;var b=a.type.getDerivedStateFromError;if(typeof b=="function"){var S=d.value;x.payload=function(){return b(S)},x.callback=function(){H1(a,d)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(x.callback=function(){H1(a,d),typeof b!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})}),x}function LE(a,d,x){var b=a.pingCache;if(b===null){b=a.pingCache=new T8;var S=new Set;b.set(d,S)}else S=b.get(d),S===void 0&&(S=new Set,b.set(d,S));S.has(x)||(S.add(x),a=B8.bind(null,a,d,x),d.then(a,a))}function VE(a){do{var d;if((d=a.tag===13)&&(d=a.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return a;a=a.return}while(a!==null);return null}function FE(a,d,x,b,S){return(a.mode&1)===0?(a===d?a.flags|=65536:(a.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=ba(-1,1),d.tag=2,ul(x,d,1))),x.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var A8=Y.ReactCurrentOwner,is=!1;function Gi(a,d,x,b){d.child=a===null?iE(d,null,x,b):Du(d,a.child,x,b)}function BE(a,d,x,b,S){x=x.render;var k=d.ref;return Mu(d,S),b=M1(a,d,x,b,k,S),x=L1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,Ia(a,d,S)):(er&&x&&x1(d),d.flags|=1,Gi(a,d,b,S),d.child)}function jE(a,d,x,b,S){if(a===null){var k=x.type;return typeof k=="function"&&!hy(k)&&k.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=k,UE(a,d,k,b,S)):(a=nm(x.type,null,b,d,d.mode,S),a.ref=d.ref,a.return=d,d.child=a)}if(k=a.child,(a.lanes&S)===0){var $=k.memoizedProps;if(x=x.compare,x=x!==null?x:Ee,x($,b)&&a.ref===d.ref)return Ia(a,d,S)}return d.flags|=1,a=gl(k,b),a.ref=d.ref,a.return=d,d.child=a}function UE(a,d,x,b,S){if(a!==null){var k=a.memoizedProps;if(Ee(k,b)&&a.ref===d.ref)if(is=!1,d.pendingProps=b=k,(a.lanes&S)!==0)(a.flags&131072)!==0&&(is=!0);else return d.lanes=a.lanes,Ia(a,d,S)}return G1(a,d,x,b,S)}function zE(a,d,x){var b=d.pendingProps,S=b.children,k=a!==null?a.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(Bu,Ts),Ts|=x;else{if((x&1073741824)===0)return a=k!==null?k.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:a,cachePool:null,transitions:null},d.updateQueue=null,On(Bu,Ts),Ts|=a,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=k!==null?k.baseLanes:x,On(Bu,Ts),Ts|=b}else k!==null?(b=k.baseLanes|x,d.memoizedState=null):b=x,On(Bu,Ts),Ts|=b;return Gi(a,d,S,x),d.child}function WE(a,d){var x=d.ref;(a===null&&x!==null||a!==null&&a.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function G1(a,d,x,b,S){var k=rs(x)?dc:Si.current;return k=Ru(d,k),Mu(d,S),x=M1(a,d,x,b,k,S),b=L1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,Ia(a,d,S)):(er&&b&&x1(d),d.flags|=1,Gi(a,d,x,S),d.child)}function HE(a,d,x,b,S){if(rs(x)){var k=!0;Cp(d)}else k=!1;if(Mu(d,S),d.stateNode===null)Gp(a,d),PE(d,x,b),z1(d,x,b,S),b=!0;else if(a===null){var $=d.stateNode,ne=d.memoizedProps;$.props=ne;var ce=$.context,be=x.contextType;typeof be=="object"&&be!==null?be=Ws(be):(be=rs(x)?dc:Si.current,be=Ru(d,be));var Me=x.getDerivedStateFromProps,Ve=typeof Me=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ve||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ne!==b||ce!==be)&&DE(d,$,b,be),cl=!1;var De=d.memoizedState;$.state=De,Lp(d,b,$,S),ce=d.memoizedState,ne!==b||De!==ce||ns.current||cl?(typeof Me=="function"&&(U1(d,x,Me,b),ce=d.memoizedState),(ne=cl||kE(d,x,ne,b,De,ce,be))?(Ve||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ce),$.props=b,$.state=ce,$.context=be,b=ne):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{$=d.stateNode,oE(a,d),ne=d.memoizedProps,be=d.type===d.elementType?ne:uo(d.type,ne),$.props=be,Ve=d.pendingProps,De=$.context,ce=x.contextType,typeof ce=="object"&&ce!==null?ce=Ws(ce):(ce=rs(x)?dc:Si.current,ce=Ru(d,ce));var Qe=x.getDerivedStateFromProps;(Me=typeof Qe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(ne!==Ve||De!==ce)&&DE(d,$,b,ce),cl=!1,De=d.memoizedState,$.state=De,Lp(d,b,$,S);var et=d.memoizedState;ne!==Ve||De!==et||ns.current||cl?(typeof Qe=="function"&&(U1(d,x,Qe,b),et=d.memoizedState),(be=cl||kE(d,x,be,b,De,et,ce)||!1)?(Me||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(b,et,ce),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(b,et,ce)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=et),$.props=b,$.state=et,$.context=ce,b=be):(typeof $.componentDidUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||ne===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),b=!1)}return $1(a,d,x,b,k,S)}function $1(a,d,x,b,S,k){WE(a,d);var $=(d.flags&128)!==0;if(!b&&!$)return S&&X_(d,x,!1),Ia(a,d,k);b=d.stateNode,A8.current=d;var ne=$&&typeof x.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,a!==null&&$?(d.child=Du(d,a.child,null,k),d.child=Du(d,null,ne,k)):Gi(a,d,ne,k),d.memoizedState=b.state,S&&X_(d,x,!0),d.child}function GE(a){var d=a.stateNode;d.pendingContext?q_(a,d.pendingContext,d.pendingContext!==d.context):d.context&&q_(a,d.context,!1),R1(a,d.containerInfo)}function $E(a,d,x,b,S){return Pu(),E1(S),d.flags|=256,Gi(a,d,x,b),d.child}var q1={dehydrated:null,treeContext:null,retryLane:0};function K1(a){return{baseLanes:a,cachePool:null,transitions:null}}function qE(a,d,x){var b=d.pendingProps,S=or.current,k=!1,$=(d.flags&128)!==0,ne;if((ne=$)||(ne=a!==null&&a.memoizedState===null?!1:(S&2)!==0),ne?(k=!0,d.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),On(or,S&1),a===null)return _1(d),a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((d.mode&1)===0?d.lanes=1:a.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($=b.children,a=b.fallback,k?(b=d.mode,k=d.child,$={mode:"hidden",children:$},(b&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=$):k=rm($,b,0,null),a=_c(a,b,x,null),k.return=d,a.return=d,k.sibling=a,d.child=k,d.child.memoizedState=K1(x),d.memoizedState=q1,a):X1(d,$));if(S=a.memoizedState,S!==null&&(ne=S.dehydrated,ne!==null))return C8(a,d,$,b,ne,S,x);if(k){k=b.fallback,$=d.mode,S=a.child,ne=S.sibling;var ce={mode:"hidden",children:b.children};return($&1)===0&&d.child!==S?(b=d.child,b.childLanes=0,b.pendingProps=ce,d.deletions=null):(b=gl(S,ce),b.subtreeFlags=S.subtreeFlags&14680064),ne!==null?k=gl(ne,k):(k=_c(k,$,x,null),k.flags|=2),k.return=d,b.return=d,b.sibling=k,d.child=b,b=k,k=d.child,$=a.child.memoizedState,$=$===null?K1(x):{baseLanes:$.baseLanes|x,cachePool:null,transitions:$.transitions},k.memoizedState=$,k.childLanes=a.childLanes&~x,d.memoizedState=q1,b}return k=a.child,a=k.sibling,b=gl(k,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=x),b.return=d,b.sibling=null,a!==null&&(x=d.deletions,x===null?(d.deletions=[a],d.flags|=16):x.push(a)),d.child=b,d.memoizedState=null,b}function X1(a,d){return d=rm({mode:"visible",children:d},a.mode,0,null),d.return=a,a.child=d}function Hp(a,d,x,b){return b!==null&&E1(b),Du(d,a.child,null,x),a=X1(d,d.pendingProps.children),a.flags|=2,d.memoizedState=null,a}function C8(a,d,x,b,S,k,$){if(x)return d.flags&256?(d.flags&=-257,b=W1(Error(t(422))),Hp(a,d,$,b)):d.memoizedState!==null?(d.child=a.child,d.flags|=128,null):(k=b.fallback,S=d.mode,b=rm({mode:"visible",children:b.children},S,0,null),k=_c(k,S,$,null),k.flags|=2,b.return=d,k.return=d,b.sibling=k,d.child=b,(d.mode&1)!==0&&Du(d,a.child,null,$),d.child.memoizedState=K1($),d.memoizedState=q1,k);if((d.mode&1)===0)return Hp(a,d,$,null);if(S.data==="$!"){if(b=S.nextSibling&&S.nextSibling.dataset,b)var ne=b.dgst;return b=ne,k=Error(t(419)),b=W1(k,b,void 0),Hp(a,d,$,b)}if(ne=($&a.childLanes)!==0,is||ne){if(b=ii,b!==null){switch($&-$){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(b.suspendedLanes|$))!==0?0:S,S!==0&&S!==k.retryLane&&(k.retryLane=S,Ea(a,S),po(b,a,S,-1))}return dy(),b=W1(Error(t(421))),Hp(a,d,$,b)}return S.data==="$?"?(d.flags|=128,d.child=a.child,d=j8.bind(null,a),S._reactRetry=d,null):(a=k.treeContext,Is=sl(S.nextSibling),bs=d,er=!0,co=null,a!==null&&(Us[zs++]=va,Us[zs++]=_a,Us[zs++]=hc,va=a.id,_a=a.overflow,hc=d),d=X1(d,b.children),d.flags|=4096,d)}function KE(a,d,x){a.lanes|=d;var b=a.alternate;b!==null&&(b.lanes|=d),A1(a.return,d,x)}function Y1(a,d,x,b,S){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:S}:(k.isBackwards=d,k.rendering=null,k.renderingStartTime=0,k.last=b,k.tail=x,k.tailMode=S)}function XE(a,d,x){var b=d.pendingProps,S=b.revealOrder,k=b.tail;if(Gi(a,d,b.children,x),b=or.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=d.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&KE(a,x,d);else if(a.tag===19)KE(a,x,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===d)break e;for(;a.sibling===null;){if(a.return===null||a.return===d)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}b&=1}if(On(or,b),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(x=d.child,S=null;x!==null;)a=x.alternate,a!==null&&Vp(a)===null&&(S=x),x=x.sibling;x=S,x===null?(S=d.child,d.child=null):(S=x.sibling,x.sibling=null),Y1(d,!1,S,x,k);break;case"backwards":for(x=null,S=d.child,d.child=null;S!==null;){if(a=S.alternate,a!==null&&Vp(a)===null){d.child=S;break}a=S.sibling,S.sibling=x,x=S,S=a}Y1(d,!0,x,null,k);break;case"together":Y1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Gp(a,d){(d.mode&1)===0&&a!==null&&(a.alternate=null,d.alternate=null,d.flags|=2)}function Ia(a,d,x){if(a!==null&&(d.dependencies=a.dependencies),yc|=d.lanes,(x&d.childLanes)===0)return null;if(a!==null&&d.child!==a.child)throw Error(t(153));if(d.child!==null){for(a=d.child,x=gl(a,a.pendingProps),d.child=x,x.return=d;a.sibling!==null;)a=a.sibling,x=x.sibling=gl(a,a.pendingProps),x.return=d;x.sibling=null}return d.child}function S8(a,d,x){switch(d.tag){case 3:GE(d),Pu();break;case 5:cE(d);break;case 1:rs(d.type)&&Cp(d);break;case 4:R1(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,S=d.memoizedProps.value;On(Dp,b._currentValue),b._currentValue=S;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(On(or,or.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?qE(a,d,x):(On(or,or.current&1),a=Ia(a,d,x),a!==null?a.sibling:null);On(or,or.current&1);break;case 19:if(b=(x&d.childLanes)!==0,(a.flags&128)!==0){if(b)return XE(a,d,x);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),On(or,or.current),b)break;return null;case 22:case 23:return d.lanes=0,zE(a,d,x)}return Ia(a,d,x)}var YE,Q1,QE,ZE;YE=function(a,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Q1=function(){},QE=function(a,d,x,b){var S=a.memoizedProps;if(S!==b){a=d.stateNode,mc(Lo.current);var k=null;switch(x){case"input":S=gn(a,S),b=gn(a,b),k=[];break;case"select":S=Ne({},S,{value:void 0}),b=Ne({},b,{value:void 0}),k=[];break;case"textarea":S=Xn(a,S),b=Xn(a,b),k=[];break;default:typeof S.onClick!="function"&&typeof b.onClick=="function"&&(a.onclick=Ip)}Ht(x,b);var $;x=null;for(be in S)if(!b.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var ne=S[be];for($ in ne)ne.hasOwnProperty($)&&(x||(x={}),x[$]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(i.hasOwnProperty(be)?k||(k=[]):(k=k||[]).push(be,null));for(be in b){var ce=b[be];if(ne=S!=null?S[be]:void 0,b.hasOwnProperty(be)&&ce!==ne&&(ce!=null||ne!=null))if(be==="style")if(ne){for($ in ne)!ne.hasOwnProperty($)||ce&&ce.hasOwnProperty($)||(x||(x={}),x[$]="");for($ in ce)ce.hasOwnProperty($)&&ne[$]!==ce[$]&&(x||(x={}),x[$]=ce[$])}else x||(k||(k=[]),k.push(be,x)),x=ce;else be==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ne=ne?ne.__html:void 0,ce!=null&&ne!==ce&&(k=k||[]).push(be,ce)):be==="children"?typeof ce!="string"&&typeof ce!="number"||(k=k||[]).push(be,""+ce):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(i.hasOwnProperty(be)?(ce!=null&&be==="onScroll"&&Gn("scroll",a),k||ne===ce||(k=[])):(k=k||[]).push(be,ce))}x&&(k=k||[]).push("style",x);var be=k;(d.updateQueue=be)&&(d.flags|=4)}},ZE=function(a,d,x,b){x!==b&&(d.flags|=4)};function Eh(a,d){if(!er)switch(a.tailMode){case"hidden":d=a.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?a.tail=null:x.sibling=null;break;case"collapsed":x=a.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?d||a.tail===null?a.tail=null:a.tail.sibling=null:b.sibling=null}}function Ni(a){var d=a.alternate!==null&&a.alternate.child===a.child,x=0,b=0;if(d)for(var S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags&14680064,b|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=b,a.childLanes=x,d}function R8(a,d,x){var b=d.pendingProps;switch(w1(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(d),null;case 1:return rs(d.type)&&Ap(),Ni(d),null;case 3:return b=d.stateNode,Lu(),$n(ns),$n(Si),P1(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(a===null||a.child===null)&&(kp(d)?d.flags|=4:a===null||a.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,co!==null&&(ly(co),co=null))),Q1(a,d),Ni(d),null;case 5:N1(d);var S=mc(yh.current);if(x=d.type,a!==null&&d.stateNode!=null)QE(a,d,x,b,S),a.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(t(166));return Ni(d),null}if(a=mc(Lo.current),kp(d)){b=d.stateNode,x=d.type;var k=d.memoizedProps;switch(b[Mo]=d,b[hh]=k,a=(d.mode&1)!==0,x){case"dialog":Gn("cancel",b),Gn("close",b);break;case"iframe":case"object":case"embed":Gn("load",b);break;case"video":case"audio":for(S=0;S<ch.length;S++)Gn(ch[S],b);break;case"source":Gn("error",b);break;case"img":case"image":case"link":Gn("error",b),Gn("load",b);break;case"details":Gn("toggle",b);break;case"input":Fn(b,k),Gn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!k.multiple},Gn("invalid",b);break;case"textarea":wi(b,k),Gn("invalid",b)}Ht(x,k),S=null;for(var $ in k)if(k.hasOwnProperty($)){var ne=k[$];$==="children"?typeof ne=="string"?b.textContent!==ne&&(k.suppressHydrationWarning!==!0&&bp(b.textContent,ne,a),S=["children",ne]):typeof ne=="number"&&b.textContent!==""+ne&&(k.suppressHydrationWarning!==!0&&bp(b.textContent,ne,a),S=["children",""+ne]):i.hasOwnProperty($)&&ne!=null&&$==="onScroll"&&Gn("scroll",b)}switch(x){case"input":ct(b),zt(b,k,!0);break;case"textarea":ct(b),io(b);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(b.onclick=Ip)}b=S,d.updateQueue=b,b!==null&&(d.flags|=4)}else{$=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Wt(x)),a==="http://www.w3.org/1999/xhtml"?x==="script"?(a=$.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof b.is=="string"?a=$.createElement(x,{is:b.is}):(a=$.createElement(x),x==="select"&&($=a,b.multiple?$.multiple=!0:b.size&&($.size=b.size))):a=$.createElementNS(a,x),a[Mo]=d,a[hh]=b,YE(a,d,!1,!1),d.stateNode=a;e:{switch($=pn(x,b),x){case"dialog":Gn("cancel",a),Gn("close",a),S=b;break;case"iframe":case"object":case"embed":Gn("load",a),S=b;break;case"video":case"audio":for(S=0;S<ch.length;S++)Gn(ch[S],a);S=b;break;case"source":Gn("error",a),S=b;break;case"img":case"image":case"link":Gn("error",a),Gn("load",a),S=b;break;case"details":Gn("toggle",a),S=b;break;case"input":Fn(a,b),S=gn(a,b),Gn("invalid",a);break;case"option":S=b;break;case"select":a._wrapperState={wasMultiple:!!b.multiple},S=Ne({},b,{value:void 0}),Gn("invalid",a);break;case"textarea":wi(a,b),S=Xn(a,b),Gn("invalid",a);break;default:S=b}Ht(x,S),ne=S;for(k in ne)if(ne.hasOwnProperty(k)){var ce=ne[k];k==="style"?We(a,ce):k==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&Bn(a,ce)):k==="children"?typeof ce=="string"?(x!=="textarea"||ce!=="")&&Jr(a,ce):typeof ce=="number"&&Jr(a,""+ce):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?ce!=null&&k==="onScroll"&&Gn("scroll",a):ce!=null&&H(a,k,ce,$))}switch(x){case"input":ct(a),zt(a,b,!1);break;case"textarea":ct(a),io(a);break;case"option":b.value!=null&&a.setAttribute("value",""+Ge(b.value));break;case"select":a.multiple=!!b.multiple,k=b.value,k!=null?Xe(a,!!b.multiple,k,!1):b.defaultValue!=null&&Xe(a,!!b.multiple,b.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=Ip)}switch(x){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ni(d),null;case 6:if(a&&d.stateNode!=null)ZE(a,d,a.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(t(166));if(x=mc(yh.current),mc(Lo.current),kp(d)){if(b=d.stateNode,x=d.memoizedProps,b[Mo]=d,(k=b.nodeValue!==x)&&(a=bs,a!==null))switch(a.tag){case 3:bp(b.nodeValue,x,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&bp(b.nodeValue,x,(a.mode&1)!==0)}k&&(d.flags|=4)}else b=(x.nodeType===9?x:x.ownerDocument).createTextNode(b),b[Mo]=d,d.stateNode=b}return Ni(d),null;case 13:if($n(or),b=d.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(er&&Is!==null&&(d.mode&1)!==0&&(d.flags&128)===0)tE(),Pu(),d.flags|=98560,k=!1;else if(k=kp(d),b!==null&&b.dehydrated!==null){if(a===null){if(!k)throw Error(t(318));if(k=d.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[Mo]=d}else Pu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ni(d),k=!1}else co!==null&&(ly(co),co=null),k=!0;if(!k)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(b=b!==null,b!==(a!==null&&a.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(a===null||(or.current&1)!==0?$r===0&&($r=3):dy())),d.updateQueue!==null&&(d.flags|=4),Ni(d),null);case 4:return Lu(),Q1(a,d),a===null&&uh(d.stateNode.containerInfo),Ni(d),null;case 10:return T1(d.type._context),Ni(d),null;case 17:return rs(d.type)&&Ap(),Ni(d),null;case 19:if($n(or),k=d.memoizedState,k===null)return Ni(d),null;if(b=(d.flags&128)!==0,$=k.rendering,$===null)if(b)Eh(k,!1);else{if($r!==0||a!==null&&(a.flags&128)!==0)for(a=d.child;a!==null;){if($=Vp(a),$!==null){for(d.flags|=128,Eh(k,!1),b=$.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=x,x=d.child;x!==null;)k=x,a=b,k.flags&=14680066,$=k.alternate,$===null?(k.childLanes=0,k.lanes=a,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=$.childLanes,k.lanes=$.lanes,k.child=$.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=$.memoizedProps,k.memoizedState=$.memoizedState,k.updateQueue=$.updateQueue,k.type=$.type,a=$.dependencies,k.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),x=x.sibling;return On(or,or.current&1|2),d.child}a=a.sibling}k.tail!==null&&Zt()>ju&&(d.flags|=128,b=!0,Eh(k,!1),d.lanes=4194304)}else{if(!b)if(a=Vp($),a!==null){if(d.flags|=128,b=!0,x=a.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),Eh(k,!0),k.tail===null&&k.tailMode==="hidden"&&!$.alternate&&!er)return Ni(d),null}else 2*Zt()-k.renderingStartTime>ju&&x!==1073741824&&(d.flags|=128,b=!0,Eh(k,!1),d.lanes=4194304);k.isBackwards?($.sibling=d.child,d.child=$):(x=k.last,x!==null?x.sibling=$:d.child=$,k.last=$)}return k.tail!==null?(d=k.tail,k.rendering=d,k.tail=d.sibling,k.renderingStartTime=Zt(),d.sibling=null,x=or.current,On(or,b?x&1|2:x&1),d):(Ni(d),null);case 22:case 23:return uy(),b=d.memoizedState!==null,a!==null&&a.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(Ts&1073741824)!==0&&(Ni(d),d.subtreeFlags&6&&(d.flags|=8192)):Ni(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function N8(a,d){switch(w1(d),d.tag){case 1:return rs(d.type)&&Ap(),a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 3:return Lu(),$n(ns),$n(Si),P1(),a=d.flags,(a&65536)!==0&&(a&128)===0?(d.flags=a&-65537|128,d):null;case 5:return N1(d),null;case 13:if($n(or),a=d.memoizedState,a!==null&&a.dehydrated!==null){if(d.alternate===null)throw Error(t(340));Pu()}return a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 19:return $n(or),null;case 4:return Lu(),null;case 10:return T1(d.type._context),null;case 22:case 23:return uy(),null;case 24:return null;default:return null}}var $p=!1,ki=!1,k8=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Fu(a,d){var x=a.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(b){mr(a,d,b)}else x.current=null}function Z1(a,d,x){try{x()}catch(b){mr(a,d,b)}}var JE=!1;function P8(a,d){if(u1=Ji,a=Lt(),St(a)){if("selectionStart"in a)var x={start:a.selectionStart,end:a.selectionEnd};else e:{x=(x=a.ownerDocument)&&x.defaultView||window;var b=x.getSelection&&x.getSelection();if(b&&b.rangeCount!==0){x=b.anchorNode;var S=b.anchorOffset,k=b.focusNode;b=b.focusOffset;try{x.nodeType,k.nodeType}catch{x=null;break e}var $=0,ne=-1,ce=-1,be=0,Me=0,Ve=a,De=null;t:for(;;){for(var Qe;Ve!==x||S!==0&&Ve.nodeType!==3||(ne=$+S),Ve!==k||b!==0&&Ve.nodeType!==3||(ce=$+b),Ve.nodeType===3&&($+=Ve.nodeValue.length),(Qe=Ve.firstChild)!==null;)De=Ve,Ve=Qe;for(;;){if(Ve===a)break t;if(De===x&&++be===S&&(ne=$),De===k&&++Me===b&&(ce=$),(Qe=Ve.nextSibling)!==null)break;Ve=De,De=Ve.parentNode}Ve=Qe}x=ne===-1||ce===-1?null:{start:ne,end:ce}}else x=null}x=x||{start:0,end:0}}else x=null;for(d1={focusedElem:a,selectionRange:x},Ji=!1,Je=d;Je!==null;)if(d=Je,a=d.child,(d.subtreeFlags&1028)!==0&&a!==null)a.return=d,Je=a;else for(;Je!==null;){d=Je;try{var et=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var ot=et.memoizedProps,Rr=et.memoizedState,ye=d.stateNode,de=ye.getSnapshotBeforeUpdate(d.elementType===d.type?ot:uo(d.type,ot),Rr);ye.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var ve=d.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ue){mr(d,d.return,Ue)}if(a=d.sibling,a!==null){a.return=d.return,Je=a;break}Je=d.return}return et=JE,JE=!1,et}function bh(a,d,x){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var S=b=b.next;do{if((S.tag&a)===a){var k=S.destroy;S.destroy=void 0,k!==void 0&&Z1(d,x,k)}S=S.next}while(S!==b)}}function qp(a,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&a)===a){var b=x.create;x.destroy=b()}x=x.next}while(x!==d)}}function J1(a){var d=a.ref;if(d!==null){var x=a.stateNode;switch(a.tag){case 5:a=x;break;default:a=x}typeof d=="function"?d(a):d.current=a}}function eb(a){var d=a.alternate;d!==null&&(a.alternate=null,eb(d)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(d=a.stateNode,d!==null&&(delete d[Mo],delete d[hh],delete d[m1],delete d[p8],delete d[m8])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function tb(a){return a.tag===5||a.tag===3||a.tag===4}function nb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||tb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ey(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(a,d):x.insertBefore(a,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(a,x)):(d=x,d.appendChild(a)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=Ip));else if(b!==4&&(a=a.child,a!==null))for(ey(a,d,x),a=a.sibling;a!==null;)ey(a,d,x),a=a.sibling}function ty(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.insertBefore(a,d):x.appendChild(a);else if(b!==4&&(a=a.child,a!==null))for(ty(a,d,x),a=a.sibling;a!==null;)ty(a,d,x),a=a.sibling}var fi=null,ho=!1;function dl(a,d,x){for(x=x.child;x!==null;)rb(a,d,x),x=x.sibling}function rb(a,d,x){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(jt,x)}catch{}switch(x.tag){case 5:ki||Fu(x,d);case 6:var b=fi,S=ho;fi=null,dl(a,d,x),fi=b,ho=S,fi!==null&&(ho?(a=fi,x=x.stateNode,a.nodeType===8?a.parentNode.removeChild(x):a.removeChild(x)):fi.removeChild(x.stateNode));break;case 18:fi!==null&&(ho?(a=fi,x=x.stateNode,a.nodeType===8?p1(a.parentNode,x):a.nodeType===1&&p1(a,x),ci(a)):p1(fi,x.stateNode));break;case 4:b=fi,S=ho,fi=x.stateNode.containerInfo,ho=!0,dl(a,d,x),fi=b,ho=S;break;case 0:case 11:case 14:case 15:if(!ki&&(b=x.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){S=b=b.next;do{var k=S,$=k.destroy;k=k.tag,$!==void 0&&((k&2)!==0||(k&4)!==0)&&Z1(x,d,$),S=S.next}while(S!==b)}dl(a,d,x);break;case 1:if(!ki&&(Fu(x,d),b=x.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=x.memoizedProps,b.state=x.memoizedState,b.componentWillUnmount()}catch(ne){mr(x,d,ne)}dl(a,d,x);break;case 21:dl(a,d,x);break;case 22:x.mode&1?(ki=(b=ki)||x.memoizedState!==null,dl(a,d,x),ki=b):dl(a,d,x);break;default:dl(a,d,x)}}function ib(a){var d=a.updateQueue;if(d!==null){a.updateQueue=null;var x=a.stateNode;x===null&&(x=a.stateNode=new k8),d.forEach(function(b){var S=U8.bind(null,a,b);x.has(b)||(x.add(b),b.then(S,S))})}}function fo(a,d){var x=d.deletions;if(x!==null)for(var b=0;b<x.length;b++){var S=x[b];try{var k=a,$=d,ne=$;e:for(;ne!==null;){switch(ne.tag){case 5:fi=ne.stateNode,ho=!1;break e;case 3:fi=ne.stateNode.containerInfo,ho=!0;break e;case 4:fi=ne.stateNode.containerInfo,ho=!0;break e}ne=ne.return}if(fi===null)throw Error(t(160));rb(k,$,S),fi=null,ho=!1;var ce=S.alternate;ce!==null&&(ce.return=null),S.return=null}catch(be){mr(S,d,be)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)sb(d,a),d=d.sibling}function sb(a,d){var x=a.alternate,b=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(fo(d,a),Fo(a),b&4){try{bh(3,a,a.return),qp(3,a)}catch(ot){mr(a,a.return,ot)}try{bh(5,a,a.return)}catch(ot){mr(a,a.return,ot)}}break;case 1:fo(d,a),Fo(a),b&512&&x!==null&&Fu(x,x.return);break;case 5:if(fo(d,a),Fo(a),b&512&&x!==null&&Fu(x,x.return),a.flags&32){var S=a.stateNode;try{Jr(S,"")}catch(ot){mr(a,a.return,ot)}}if(b&4&&(S=a.stateNode,S!=null)){var k=a.memoizedProps,$=x!==null?x.memoizedProps:k,ne=a.type,ce=a.updateQueue;if(a.updateQueue=null,ce!==null)try{ne==="input"&&k.type==="radio"&&k.name!=null&&Dr(S,k),pn(ne,$);var be=pn(ne,k);for($=0;$<ce.length;$+=2){var Me=ce[$],Ve=ce[$+1];Me==="style"?We(S,Ve):Me==="dangerouslySetInnerHTML"?Bn(S,Ve):Me==="children"?Jr(S,Ve):H(S,Me,Ve,be)}switch(ne){case"input":Qt(S,k);break;case"textarea":Zr(S,k);break;case"select":var De=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!k.multiple;var Qe=k.value;Qe!=null?Xe(S,!!k.multiple,Qe,!1):De!==!!k.multiple&&(k.defaultValue!=null?Xe(S,!!k.multiple,k.defaultValue,!0):Xe(S,!!k.multiple,k.multiple?[]:"",!1))}S[hh]=k}catch(ot){mr(a,a.return,ot)}}break;case 6:if(fo(d,a),Fo(a),b&4){if(a.stateNode===null)throw Error(t(162));S=a.stateNode,k=a.memoizedProps;try{S.nodeValue=k}catch(ot){mr(a,a.return,ot)}}break;case 3:if(fo(d,a),Fo(a),b&4&&x!==null&&x.memoizedState.isDehydrated)try{ci(d.containerInfo)}catch(ot){mr(a,a.return,ot)}break;case 4:fo(d,a),Fo(a);break;case 13:fo(d,a),Fo(a),S=a.child,S.flags&8192&&(k=S.memoizedState!==null,S.stateNode.isHidden=k,!k||S.alternate!==null&&S.alternate.memoizedState!==null||(iy=Zt())),b&4&&ib(a);break;case 22:if(Me=x!==null&&x.memoizedState!==null,a.mode&1?(ki=(be=ki)||Me,fo(d,a),ki=be):fo(d,a),Fo(a),b&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!Me&&(a.mode&1)!==0)for(Je=a,Me=a.child;Me!==null;){for(Ve=Je=Me;Je!==null;){switch(De=Je,Qe=De.child,De.tag){case 0:case 11:case 14:case 15:bh(4,De,De.return);break;case 1:Fu(De,De.return);var et=De.stateNode;if(typeof et.componentWillUnmount=="function"){b=De,x=De.return;try{d=b,et.props=d.memoizedProps,et.state=d.memoizedState,et.componentWillUnmount()}catch(ot){mr(b,x,ot)}}break;case 5:Fu(De,De.return);break;case 22:if(De.memoizedState!==null){lb(Ve);continue}}Qe!==null?(Qe.return=De,Je=Qe):lb(Ve)}Me=Me.sibling}e:for(Me=null,Ve=a;;){if(Ve.tag===5){if(Me===null){Me=Ve;try{S=Ve.stateNode,be?(k=S.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(ne=Ve.stateNode,ce=Ve.memoizedProps.style,$=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,ne.style.display=In("display",$))}catch(ot){mr(a,a.return,ot)}}}else if(Ve.tag===6){if(Me===null)try{Ve.stateNode.nodeValue=be?"":Ve.memoizedProps}catch(ot){mr(a,a.return,ot)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===a)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===a)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===a)break e;Me===Ve&&(Me=null),Ve=Ve.return}Me===Ve&&(Me=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:fo(d,a),Fo(a),b&4&&ib(a);break;case 21:break;default:fo(d,a),Fo(a)}}function Fo(a){var d=a.flags;if(d&2){try{e:{for(var x=a.return;x!==null;){if(tb(x)){var b=x;break e}x=x.return}throw Error(t(160))}switch(b.tag){case 5:var S=b.stateNode;b.flags&32&&(Jr(S,""),b.flags&=-33);var k=nb(a);ty(a,k,S);break;case 3:case 4:var $=b.stateNode.containerInfo,ne=nb(a);ey(a,ne,$);break;default:throw Error(t(161))}}catch(ce){mr(a,a.return,ce)}a.flags&=-3}d&4096&&(a.flags&=-4097)}function D8(a,d,x){Je=a,ob(a)}function ob(a,d,x){for(var b=(a.mode&1)!==0;Je!==null;){var S=Je,k=S.child;if(S.tag===22&&b){var $=S.memoizedState!==null||$p;if(!$){var ne=S.alternate,ce=ne!==null&&ne.memoizedState!==null||ki;ne=$p;var be=ki;if($p=$,(ki=ce)&&!be)for(Je=S;Je!==null;)$=Je,ce=$.child,$.tag===22&&$.memoizedState!==null?cb(S):ce!==null?(ce.return=$,Je=ce):cb(S);for(;k!==null;)Je=k,ob(k),k=k.sibling;Je=S,$p=ne,ki=be}ab(a)}else(S.subtreeFlags&8772)!==0&&k!==null?(k.return=S,Je=k):ab(a)}}function ab(a){for(;Je!==null;){var d=Je;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:ki||qp(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!ki)if(x===null)b.componentDidMount();else{var S=d.elementType===d.type?x.memoizedProps:uo(d.type,x.memoizedProps);b.componentDidUpdate(S,x.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var k=d.updateQueue;k!==null&&lE(d,k,b);break;case 3:var $=d.updateQueue;if($!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}lE(d,$,x)}break;case 5:var ne=d.stateNode;if(x===null&&d.flags&4){x=ne;var ce=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&x.focus();break;case"img":ce.src&&(x.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var be=d.alternate;if(be!==null){var Me=be.memoizedState;if(Me!==null){var Ve=Me.dehydrated;Ve!==null&&ci(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ki||d.flags&512&&J1(d)}catch(De){mr(d,d.return,De)}}if(d===a){Je=null;break}if(x=d.sibling,x!==null){x.return=d.return,Je=x;break}Je=d.return}}function lb(a){for(;Je!==null;){var d=Je;if(d===a){Je=null;break}var x=d.sibling;if(x!==null){x.return=d.return,Je=x;break}Je=d.return}}function cb(a){for(;Je!==null;){var d=Je;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{qp(4,d)}catch(ce){mr(d,x,ce)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var S=d.return;try{b.componentDidMount()}catch(ce){mr(d,S,ce)}}var k=d.return;try{J1(d)}catch(ce){mr(d,k,ce)}break;case 5:var $=d.return;try{J1(d)}catch(ce){mr(d,$,ce)}}}catch(ce){mr(d,d.return,ce)}if(d===a){Je=null;break}var ne=d.sibling;if(ne!==null){ne.return=d.return,Je=ne;break}Je=d.return}}var O8=Math.ceil,Kp=Y.ReactCurrentDispatcher,ny=Y.ReactCurrentOwner,Gs=Y.ReactCurrentBatchConfig,rn=0,ii=null,Or=null,pi=0,Ts=0,Bu=ol(0),$r=0,Ih=null,yc=0,Xp=0,ry=0,Th=null,ss=null,iy=0,ju=1/0,Ta=null,Yp=!1,sy=null,hl=null,Qp=!1,fl=null,Zp=0,Ah=0,oy=null,Jp=-1,em=0;function $i(){return(rn&6)!==0?Zt():Jp!==-1?Jp:Jp=Zt()}function pl(a){return(a.mode&1)===0?1:(rn&2)!==0&&pi!==0?pi&-pi:y8.transition!==null?(em===0&&(em=Zn()),em):(a=It,a!==0||(a=window.event,a=a===void 0?16:Ja(a.type)),a)}function po(a,d,x,b){if(50<Ah)throw Ah=0,oy=null,Error(t(185));Q(a,x,b),((rn&2)===0||a!==ii)&&(a===ii&&((rn&2)===0&&(Xp|=x),$r===4&&ml(a,pi)),os(a,b),x===1&&rn===0&&(d.mode&1)===0&&(ju=Zt()+500,Sp&&ll()))}function os(a,d){var x=a.callbackNode;bi(a,d);var b=Ei(a,a===ii?pi:0);if(b===0)x!==null&&Tr(x),a.callbackNode=null,a.callbackPriority=0;else if(d=b&-b,a.callbackPriority!==d){if(x!=null&&Tr(x),d===1)a.tag===0?g8(db.bind(null,a)):Y_(db.bind(null,a)),h8(function(){(rn&6)===0&&ll()}),x=null;else{switch(No(b)){case 1:x=ke;break;case 4:x=Ro;break;case 16:x=Jt;break;case 536870912:x=wu;break;default:x=Jt}x=wb(x,ub.bind(null,a))}a.callbackPriority=d,a.callbackNode=x}}function ub(a,d){if(Jp=-1,em=0,(rn&6)!==0)throw Error(t(327));var x=a.callbackNode;if(Uu()&&a.callbackNode!==x)return null;var b=Ei(a,a===ii?pi:0);if(b===0)return null;if((b&30)!==0||(b&a.expiredLanes)!==0||d)d=tm(a,b);else{d=b;var S=rn;rn|=2;var k=fb();(ii!==a||pi!==d)&&(Ta=null,ju=Zt()+500,wc(a,d));do try{V8();break}catch(ne){hb(a,ne)}while(!0);I1(),Kp.current=k,rn=S,Or!==null?d=0:(ii=null,pi=0,d=$r)}if(d!==0){if(d===2&&(S=Mt(a),S!==0&&(b=S,d=ay(a,S))),d===1)throw x=Ih,wc(a,0),ml(a,b),os(a,Zt()),x;if(d===6)ml(a,b);else{if(S=a.current.alternate,(b&30)===0&&!M8(S)&&(d=tm(a,b),d===2&&(k=Mt(a),k!==0&&(b=k,d=ay(a,k))),d===1))throw x=Ih,wc(a,0),ml(a,b),os(a,Zt()),x;switch(a.finishedWork=S,a.finishedLanes=b,d){case 0:case 1:throw Error(t(345));case 2:vc(a,ss,Ta);break;case 3:if(ml(a,b),(b&130023424)===b&&(d=iy+500-Zt(),10<d)){if(Ei(a,0)!==0)break;if(S=a.suspendedLanes,(S&b)!==b){$i(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=f1(vc.bind(null,a,ss,Ta),d);break}vc(a,ss,Ta);break;case 4:if(ml(a,b),(b&4194240)===b)break;for(d=a.eventTimes,S=-1;0<b;){var $=31-zr(b);k=1<<$,$=d[$],$>S&&(S=$),b&=~k}if(b=S,b=Zt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*O8(b/1960))-b,10<b){a.timeoutHandle=f1(vc.bind(null,a,ss,Ta),b);break}vc(a,ss,Ta);break;case 5:vc(a,ss,Ta);break;default:throw Error(t(329))}}}return os(a,Zt()),a.callbackNode===x?ub.bind(null,a):null}function ay(a,d){var x=Th;return a.current.memoizedState.isDehydrated&&(wc(a,d).flags|=256),a=tm(a,d),a!==2&&(d=ss,ss=x,d!==null&&ly(d)),a}function ly(a){ss===null?ss=a:ss.push.apply(ss,a)}function M8(a){for(var d=a;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var b=0;b<x.length;b++){var S=x[b],k=S.getSnapshot;S=S.value;try{if(!fe(k(),S))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ml(a,d){for(d&=~ry,d&=~Xp,a.suspendedLanes|=d,a.pingedLanes&=~d,a=a.expirationTimes;0<d;){var x=31-zr(d),b=1<<x;a[x]=-1,d&=~b}}function db(a){if((rn&6)!==0)throw Error(t(327));Uu();var d=Ei(a,0);if((d&1)===0)return os(a,Zt()),null;var x=tm(a,d);if(a.tag!==0&&x===2){var b=Mt(a);b!==0&&(d=b,x=ay(a,b))}if(x===1)throw x=Ih,wc(a,0),ml(a,d),os(a,Zt()),x;if(x===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=d,vc(a,ss,Ta),os(a,Zt()),null}function cy(a,d){var x=rn;rn|=1;try{return a(d)}finally{rn=x,rn===0&&(ju=Zt()+500,Sp&&ll())}}function xc(a){fl!==null&&fl.tag===0&&(rn&6)===0&&Uu();var d=rn;rn|=1;var x=Gs.transition,b=It;try{if(Gs.transition=null,It=1,a)return a()}finally{It=b,Gs.transition=x,rn=d,(rn&6)===0&&ll()}}function uy(){Ts=Bu.current,$n(Bu)}function wc(a,d){a.finishedWork=null,a.finishedLanes=0;var x=a.timeoutHandle;if(x!==-1&&(a.timeoutHandle=-1,d8(x)),Or!==null)for(x=Or.return;x!==null;){var b=x;switch(w1(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Ap();break;case 3:Lu(),$n(ns),$n(Si),P1();break;case 5:N1(b);break;case 4:Lu();break;case 13:$n(or);break;case 19:$n(or);break;case 10:T1(b.type._context);break;case 22:case 23:uy()}x=x.return}if(ii=a,Or=a=gl(a.current,null),pi=Ts=d,$r=0,Ih=null,ry=Xp=yc=0,ss=Th=null,pc!==null){for(d=0;d<pc.length;d++)if(x=pc[d],b=x.interleaved,b!==null){x.interleaved=null;var S=b.next,k=x.pending;if(k!==null){var $=k.next;k.next=S,b.next=$}x.pending=b}pc=null}return a}function hb(a,d){do{var x=Or;try{if(I1(),Fp.current=zp,Bp){for(var b=ar.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}Bp=!1}if(gc=0,ri=Gr=ar=null,xh=!1,wh=0,ny.current=null,x===null||x.return===null){$r=1,Ih=d,Or=null;break}e:{var k=a,$=x.return,ne=x,ce=d;if(d=pi,ne.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var be=ce,Me=ne,Ve=Me.tag;if((Me.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var De=Me.alternate;De?(Me.updateQueue=De.updateQueue,Me.memoizedState=De.memoizedState,Me.lanes=De.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Qe=VE($);if(Qe!==null){Qe.flags&=-257,FE(Qe,$,ne,k,d),Qe.mode&1&&LE(k,be,d),d=Qe,ce=be;var et=d.updateQueue;if(et===null){var ot=new Set;ot.add(ce),d.updateQueue=ot}else et.add(ce);break e}else{if((d&1)===0){LE(k,be,d),dy();break e}ce=Error(t(426))}}else if(er&&ne.mode&1){var Rr=VE($);if(Rr!==null){(Rr.flags&65536)===0&&(Rr.flags|=256),FE(Rr,$,ne,k,d),E1(Vu(ce,ne));break e}}k=ce=Vu(ce,ne),$r!==4&&($r=2),Th===null?Th=[k]:Th.push(k),k=$;do{switch(k.tag){case 3:k.flags|=65536,d&=-d,k.lanes|=d;var ye=OE(k,ce,d);aE(k,ye);break e;case 1:ne=ce;var de=k.type,ve=k.stateNode;if((k.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(hl===null||!hl.has(ve)))){k.flags|=65536,d&=-d,k.lanes|=d;var Ue=ME(k,ne,d);aE(k,Ue);break e}}k=k.return}while(k!==null)}mb(x)}catch(lt){d=lt,Or===x&&x!==null&&(Or=x=x.return);continue}break}while(!0)}function fb(){var a=Kp.current;return Kp.current=zp,a===null?zp:a}function dy(){($r===0||$r===3||$r===2)&&($r=4),ii===null||(yc&268435455)===0&&(Xp&268435455)===0||ml(ii,pi)}function tm(a,d){var x=rn;rn|=2;var b=fb();(ii!==a||pi!==d)&&(Ta=null,wc(a,d));do try{L8();break}catch(S){hb(a,S)}while(!0);if(I1(),rn=x,Kp.current=b,Or!==null)throw Error(t(261));return ii=null,pi=0,$r}function L8(){for(;Or!==null;)pb(Or)}function V8(){for(;Or!==null&&!yn();)pb(Or)}function pb(a){var d=xb(a.alternate,a,Ts);a.memoizedProps=a.pendingProps,d===null?mb(a):Or=d,ny.current=null}function mb(a){var d=a;do{var x=d.alternate;if(a=d.return,(d.flags&32768)===0){if(x=R8(x,d,Ts),x!==null){Or=x;return}}else{if(x=N8(x,d),x!==null){x.flags&=32767,Or=x;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{$r=6,Or=null;return}}if(d=d.sibling,d!==null){Or=d;return}Or=d=a}while(d!==null);$r===0&&($r=5)}function vc(a,d,x){var b=It,S=Gs.transition;try{Gs.transition=null,It=1,F8(a,d,x,b)}finally{Gs.transition=S,It=b}return null}function F8(a,d,x,b){do Uu();while(fl!==null);if((rn&6)!==0)throw Error(t(327));x=a.finishedWork;var S=a.finishedLanes;if(x===null)return null;if(a.finishedWork=null,a.finishedLanes=0,x===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var k=x.lanes|x.childLanes;if($e(a,k),a===ii&&(Or=ii=null,pi=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Qp||(Qp=!0,wb(Jt,function(){return Uu(),null})),k=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||k){k=Gs.transition,Gs.transition=null;var $=It;It=1;var ne=rn;rn|=4,ny.current=null,P8(a,x),sb(x,a),Ci(d1),Ji=!!u1,d1=u1=null,a.current=x,D8(x),xu(),rn=ne,It=$,Gs.transition=k}else a.current=x;if(Qp&&(Qp=!1,fl=a,Zp=S),k=a.pendingLanes,k===0&&(hl=null),Ot(x.stateNode),os(a,Zt()),d!==null)for(b=a.onRecoverableError,x=0;x<d.length;x++)S=d[x],b(S.value,{componentStack:S.stack,digest:S.digest});if(Yp)throw Yp=!1,a=sy,sy=null,a;return(Zp&1)!==0&&a.tag!==0&&Uu(),k=a.pendingLanes,(k&1)!==0?a===oy?Ah++:(Ah=0,oy=a):Ah=0,ll(),null}function Uu(){if(fl!==null){var a=No(Zp),d=Gs.transition,x=It;try{if(Gs.transition=null,It=16>a?16:a,fl===null)var b=!1;else{if(a=fl,fl=null,Zp=0,(rn&6)!==0)throw Error(t(331));var S=rn;for(rn|=4,Je=a.current;Je!==null;){var k=Je,$=k.child;if((Je.flags&16)!==0){var ne=k.deletions;if(ne!==null){for(var ce=0;ce<ne.length;ce++){var be=ne[ce];for(Je=be;Je!==null;){var Me=Je;switch(Me.tag){case 0:case 11:case 15:bh(8,Me,k)}var Ve=Me.child;if(Ve!==null)Ve.return=Me,Je=Ve;else for(;Je!==null;){Me=Je;var De=Me.sibling,Qe=Me.return;if(eb(Me),Me===be){Je=null;break}if(De!==null){De.return=Qe,Je=De;break}Je=Qe}}}var et=k.alternate;if(et!==null){var ot=et.child;if(ot!==null){et.child=null;do{var Rr=ot.sibling;ot.sibling=null,ot=Rr}while(ot!==null)}}Je=k}}if((k.subtreeFlags&2064)!==0&&$!==null)$.return=k,Je=$;else e:for(;Je!==null;){if(k=Je,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:bh(9,k,k.return)}var ye=k.sibling;if(ye!==null){ye.return=k.return,Je=ye;break e}Je=k.return}}var de=a.current;for(Je=de;Je!==null;){$=Je;var ve=$.child;if(($.subtreeFlags&2064)!==0&&ve!==null)ve.return=$,Je=ve;else e:for($=de;Je!==null;){if(ne=Je,(ne.flags&2048)!==0)try{switch(ne.tag){case 0:case 11:case 15:qp(9,ne)}}catch(lt){mr(ne,ne.return,lt)}if(ne===$){Je=null;break e}var Ue=ne.sibling;if(Ue!==null){Ue.return=ne.return,Je=Ue;break e}Je=ne.return}}if(rn=S,ll(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(jt,a)}catch{}b=!0}return b}finally{It=x,Gs.transition=d}}return!1}function gb(a,d,x){d=Vu(x,d),d=OE(a,d,1),a=ul(a,d,1),d=$i(),a!==null&&(Q(a,1,d),os(a,d))}function mr(a,d,x){if(a.tag===3)gb(a,a,x);else for(;d!==null;){if(d.tag===3){gb(d,a,x);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(hl===null||!hl.has(b))){a=Vu(x,a),a=ME(d,a,1),d=ul(d,a,1),a=$i(),d!==null&&(Q(d,1,a),os(d,a));break}}d=d.return}}function B8(a,d,x){var b=a.pingCache;b!==null&&b.delete(d),d=$i(),a.pingedLanes|=a.suspendedLanes&x,ii===a&&(pi&x)===x&&($r===4||$r===3&&(pi&130023424)===pi&&500>Zt()-iy?wc(a,0):ry|=x),os(a,d)}function yb(a,d){d===0&&((a.mode&1)===0?d=1:(d=Qa,Qa<<=1,(Qa&130023424)===0&&(Qa=4194304)));var x=$i();a=Ea(a,d),a!==null&&(Q(a,d,x),os(a,x))}function j8(a){var d=a.memoizedState,x=0;d!==null&&(x=d.retryLane),yb(a,x)}function U8(a,d){var x=0;switch(a.tag){case 13:var b=a.stateNode,S=a.memoizedState;S!==null&&(x=S.retryLane);break;case 19:b=a.stateNode;break;default:throw Error(t(314))}b!==null&&b.delete(d),yb(a,x)}var xb;xb=function(a,d,x){if(a!==null)if(a.memoizedProps!==d.pendingProps||ns.current)is=!0;else{if((a.lanes&x)===0&&(d.flags&128)===0)return is=!1,S8(a,d,x);is=(a.flags&131072)!==0}else is=!1,er&&(d.flags&1048576)!==0&&Q_(d,Np,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;Gp(a,d),a=d.pendingProps;var S=Ru(d,Si.current);Mu(d,x),S=M1(null,d,b,a,S,x);var k=L1();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,rs(b)?(k=!0,Cp(d)):k=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S1(d),S.updater=Wp,d.stateNode=S,S._reactInternals=d,z1(d,b,a,x),d=$1(null,d,b,!0,k,x)):(d.tag=0,er&&k&&x1(d),Gi(null,d,S,x),d=d.child),d;case 16:b=d.elementType;e:{switch(Gp(a,d),a=d.pendingProps,S=b._init,b=S(b._payload),d.type=b,S=d.tag=W8(b),a=uo(b,a),S){case 0:d=G1(null,d,b,a,x);break e;case 1:d=HE(null,d,b,a,x);break e;case 11:d=BE(null,d,b,a,x);break e;case 14:d=jE(null,d,b,uo(b.type,a),x);break e}throw Error(t(306,b,""))}return d;case 0:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:uo(b,S),G1(a,d,b,S,x);case 1:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:uo(b,S),HE(a,d,b,S,x);case 3:e:{if(GE(d),a===null)throw Error(t(387));b=d.pendingProps,k=d.memoizedState,S=k.element,oE(a,d),Lp(d,b,null,x);var $=d.memoizedState;if(b=$.element,k.isDehydrated)if(k={element:b,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){S=Vu(Error(t(423)),d),d=$E(a,d,b,x,S);break e}else if(b!==S){S=Vu(Error(t(424)),d),d=$E(a,d,b,x,S);break e}else for(Is=sl(d.stateNode.containerInfo.firstChild),bs=d,er=!0,co=null,x=iE(d,null,b,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Pu(),b===S){d=Ia(a,d,x);break e}Gi(a,d,b,x)}d=d.child}return d;case 5:return cE(d),a===null&&_1(d),b=d.type,S=d.pendingProps,k=a!==null?a.memoizedProps:null,$=S.children,h1(b,S)?$=null:k!==null&&h1(b,k)&&(d.flags|=32),WE(a,d),Gi(a,d,$,x),d.child;case 6:return a===null&&_1(d),null;case 13:return qE(a,d,x);case 4:return R1(d,d.stateNode.containerInfo),b=d.pendingProps,a===null?d.child=Du(d,null,b,x):Gi(a,d,b,x),d.child;case 11:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:uo(b,S),BE(a,d,b,S,x);case 7:return Gi(a,d,d.pendingProps,x),d.child;case 8:return Gi(a,d,d.pendingProps.children,x),d.child;case 12:return Gi(a,d,d.pendingProps.children,x),d.child;case 10:e:{if(b=d.type._context,S=d.pendingProps,k=d.memoizedProps,$=S.value,On(Dp,b._currentValue),b._currentValue=$,k!==null)if(fe(k.value,$)){if(k.children===S.children&&!ns.current){d=Ia(a,d,x);break e}}else for(k=d.child,k!==null&&(k.return=d);k!==null;){var ne=k.dependencies;if(ne!==null){$=k.child;for(var ce=ne.firstContext;ce!==null;){if(ce.context===b){if(k.tag===1){ce=ba(-1,x&-x),ce.tag=2;var be=k.updateQueue;if(be!==null){be=be.shared;var Me=be.pending;Me===null?ce.next=ce:(ce.next=Me.next,Me.next=ce),be.pending=ce}}k.lanes|=x,ce=k.alternate,ce!==null&&(ce.lanes|=x),A1(k.return,x,d),ne.lanes|=x;break}ce=ce.next}}else if(k.tag===10)$=k.type===d.type?null:k.child;else if(k.tag===18){if($=k.return,$===null)throw Error(t(341));$.lanes|=x,ne=$.alternate,ne!==null&&(ne.lanes|=x),A1($,x,d),$=k.sibling}else $=k.child;if($!==null)$.return=k;else for($=k;$!==null;){if($===d){$=null;break}if(k=$.sibling,k!==null){k.return=$.return,$=k;break}$=$.return}k=$}Gi(a,d,S.children,x),d=d.child}return d;case 9:return S=d.type,b=d.pendingProps.children,Mu(d,x),S=Ws(S),b=b(S),d.flags|=1,Gi(a,d,b,x),d.child;case 14:return b=d.type,S=uo(b,d.pendingProps),S=uo(b.type,S),jE(a,d,b,S,x);case 15:return UE(a,d,d.type,d.pendingProps,x);case 17:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:uo(b,S),Gp(a,d),d.tag=1,rs(b)?(a=!0,Cp(d)):a=!1,Mu(d,x),PE(d,b,S),z1(d,b,S,x),$1(null,d,b,!0,a,x);case 19:return XE(a,d,x);case 22:return zE(a,d,x)}throw Error(t(156,d.tag))};function wb(a,d){return li(a,d)}function z8(a,d,x,b){this.tag=a,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(a,d,x,b){return new z8(a,d,x,b)}function hy(a){return a=a.prototype,!(!a||!a.isReactComponent)}function W8(a){if(typeof a=="function")return hy(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ee)return 11;if(a===se)return 14}return 2}function gl(a,d){var x=a.alternate;return x===null?(x=$s(a.tag,d,a.key,a.mode),x.elementType=a.elementType,x.type=a.type,x.stateNode=a.stateNode,x.alternate=a,a.alternate=x):(x.pendingProps=d,x.type=a.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=a.flags&14680064,x.childLanes=a.childLanes,x.lanes=a.lanes,x.child=a.child,x.memoizedProps=a.memoizedProps,x.memoizedState=a.memoizedState,x.updateQueue=a.updateQueue,d=a.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=a.sibling,x.index=a.index,x.ref=a.ref,x}function nm(a,d,x,b,S,k){var $=2;if(b=a,typeof a=="function")hy(a)&&($=1);else if(typeof a=="string")$=5;else e:switch(a){case V:return _c(x.children,S,k,d);case B:$=8,S|=8;break;case W:return a=$s(12,x,d,S|2),a.elementType=W,a.lanes=k,a;case K:return a=$s(13,x,d,S),a.elementType=K,a.lanes=k,a;case we:return a=$s(19,x,d,S),a.elementType=we,a.lanes=k,a;case xe:return rm(x,S,k,d);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Z:$=10;break e;case te:$=9;break e;case ee:$=11;break e;case se:$=14;break e;case Te:$=16,b=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return d=$s($,x,d,S),d.elementType=a,d.type=b,d.lanes=k,d}function _c(a,d,x,b){return a=$s(7,a,b,d),a.lanes=x,a}function rm(a,d,x,b){return a=$s(22,a,b,d),a.elementType=xe,a.lanes=x,a.stateNode={isHidden:!1},a}function fy(a,d,x){return a=$s(6,a,null,d),a.lanes=x,a}function py(a,d,x){return d=$s(4,a.children!==null?a.children:[],a.key,d),d.lanes=x,d.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},d}function H8(a,d,x,b,S){this.tag=d,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pe(0),this.expirationTimes=pe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pe(0),this.identifierPrefix=b,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function my(a,d,x,b,S,k,$,ne,ce){return a=new H8(a,d,x,ne,ce),d===1?(d=1,k===!0&&(d|=8)):d=0,k=$s(3,null,null,d),a.current=k,k.stateNode=a,k.memoizedState={element:b,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(k),a}function G8(a,d,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:b==null?null:""+b,children:a,containerInfo:d,implementation:x}}function vb(a){if(!a)return al;a=a._reactInternals;e:{if(ei(a)!==a||a.tag!==1)throw Error(t(170));var d=a;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(rs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(a.tag===1){var x=a.type;if(rs(x))return K_(a,x,d)}return d}function _b(a,d,x,b,S,k,$,ne,ce){return a=my(x,b,!0,a,S,k,$,ne,ce),a.context=vb(null),x=a.current,b=$i(),S=pl(x),k=ba(b,S),k.callback=d??null,ul(x,k,S),a.current.lanes=S,Q(a,S,b),os(a,b),a}function im(a,d,x,b){var S=d.current,k=$i(),$=pl(S);return x=vb(x),d.context===null?d.context=x:d.pendingContext=x,d=ba(k,$),d.payload={element:a},b=b===void 0?null:b,b!==null&&(d.callback=b),a=ul(S,d,$),a!==null&&(po(a,S,$,k),Mp(a,S,$)),$}function sm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Eb(a,d){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var x=a.retryLane;a.retryLane=x!==0&&x<d?x:d}}function gy(a,d){Eb(a,d),(a=a.alternate)&&Eb(a,d)}function $8(){return null}var bb=typeof reportError=="function"?reportError:function(a){console.error(a)};function yy(a){this._internalRoot=a}om.prototype.render=yy.prototype.render=function(a){var d=this._internalRoot;if(d===null)throw Error(t(409));im(a,d,null,null)},om.prototype.unmount=yy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var d=a.containerInfo;xc(function(){im(null,a,null,null)}),d[xa]=null}};function om(a){this._internalRoot=a}om.prototype.unstable_scheduleHydration=function(a){if(a){var d=Sn();a={blockedOn:null,target:a,priority:d};for(var x=0;x<Hr.length&&d!==0&&d<Hr[x].priority;x++);Hr.splice(x,0,a),x===0&&_u(a)}};function xy(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function am(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Ib(){}function q8(a,d,x,b,S){if(S){if(typeof b=="function"){var k=b;b=function(){var be=sm($);k.call(be)}}var $=_b(d,b,a,0,null,!1,!1,"",Ib);return a._reactRootContainer=$,a[xa]=$.current,uh(a.nodeType===8?a.parentNode:a),xc(),$}for(;S=a.lastChild;)a.removeChild(S);if(typeof b=="function"){var ne=b;b=function(){var be=sm(ce);ne.call(be)}}var ce=my(a,0,!1,null,null,!1,!1,"",Ib);return a._reactRootContainer=ce,a[xa]=ce.current,uh(a.nodeType===8?a.parentNode:a),xc(function(){im(d,ce,x,b)}),ce}function lm(a,d,x,b,S){var k=x._reactRootContainer;if(k){var $=k;if(typeof S=="function"){var ne=S;S=function(){var ce=sm($);ne.call(ce)}}im(d,$,a,S)}else $=q8(x,d,a,S,b);return sm($)}Za=function(a){switch(a.tag){case 3:var d=a.stateNode;if(d.current.memoizedState.isDehydrated){var x=mn(d.pendingLanes);x!==0&&(Rn(d,x|1),os(d,Zt()),(rn&6)===0&&(ju=Zt()+500,ll()))}break;case 13:xc(function(){var b=Ea(a,1);if(b!==null){var S=$i();po(b,a,1,S)}}),gy(a,1)}},Wr=function(a){if(a.tag===13){var d=Ea(a,134217728);if(d!==null){var x=$i();po(d,a,134217728,x)}gy(a,134217728)}},ut=function(a){if(a.tag===13){var d=pl(a),x=Ea(a,d);if(x!==null){var b=$i();po(x,a,d,b)}gy(a,d)}},Sn=function(){return It},sc=function(a,d){var x=It;try{return It=a,d()}finally{It=x}},so=function(a,d,x){switch(d){case"input":if(Qt(a,x),d=x.name,x.type==="radio"&&d!=null){for(x=a;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var b=x[d];if(b!==a&&b.form===a.form){var S=Tp(b);if(!S)throw Error(t(90));bt(b),Qt(b,S)}}}break;case"textarea":Zr(a,x);break;case"select":d=x.value,d!=null&&Xe(a,!!x.multiple,d,!1)}},An=cy,$t=xc;var K8={usingClientEntryPoint:!1,Events:[fh,Cu,Tp,mt,Gt,cy]},Ch={findFiberByHostInstance:uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},X8={bundleType:Ch.bundleType,version:Ch.version,rendererPackageName:Ch.rendererPackageName,rendererConfig:Ch.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ic(a),a===null?null:a.stateNode},findFiberByHostInstance:Ch.findFiberByHostInstance||$8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{jt=cm.inject(X8),Nt=cm}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K8,as.createPortal=function(a,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xy(d))throw Error(t(200));return G8(a,d,null,x)},as.createRoot=function(a,d){if(!xy(a))throw Error(t(299));var x=!1,b="",S=bb;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=my(a,1,!1,null,null,x,!1,b,S),a[xa]=d.current,uh(a.nodeType===8?a.parentNode:a),new yy(d)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var d=a._reactInternals;if(d===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=ic(d),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return xc(a)},as.hydrate=function(a,d,x){if(!am(d))throw Error(t(200));return lm(null,a,d,!0,x)},as.hydrateRoot=function(a,d,x){if(!xy(a))throw Error(t(405));var b=x!=null&&x.hydratedSources||null,S=!1,k="",$=bb;if(x!=null&&(x.unstable_strictMode===!0&&(S=!0),x.identifierPrefix!==void 0&&(k=x.identifierPrefix),x.onRecoverableError!==void 0&&($=x.onRecoverableError)),d=_b(d,null,a,1,x??null,S,!1,k,$),a[xa]=d.current,uh(a),b)for(a=0;a<b.length;a++)x=b[a],S=x._getVersion,S=S(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,S]:d.mutableSourceEagerHydrationData.push(x,S);return new om(d)},as.render=function(a,d,x){if(!am(d))throw Error(t(200));return lm(null,a,d,!1,x)},as.unmountComponentAtNode=function(a){if(!am(a))throw Error(t(40));return a._reactRootContainer?(xc(function(){lm(null,null,a,!1,function(){a._reactRootContainer=null,a[xa]=null})}),!0):!1},as.unstable_batchedUpdates=cy,as.unstable_renderSubtreeIntoContainer=function(a,d,x,b){if(!am(x))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return lm(a,d,x,!1,b)},as.version="18.3.1-next-f1338f8080-20240426",as}var Pb;function gS(){if(Pb)return Ey.exports;Pb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ey.exports=iO(),Ey.exports}var Db;function sO(){if(Db)return dm;Db=1;var n=gS();return dm.createRoot=n.createRoot,dm.hydrateRoot=n.hydrateRoot,dm}var oO=sO();const aO=ng(oO);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ob="popstate";function lO(n={}){function e(r,i){let{pathname:o,search:c,hash:h}=r.location;return Ax("",{pathname:o,search:c,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:gf(i)}return uO(e,t,null,n)}function ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ia(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cO(){return Math.random().toString(36).substring(2,10)}function Mb(n,e){return{usr:n.state,key:n.key,idx:e}}function Ax(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ud(e):e,state:t,key:e&&e.key||r||cO()}}function gf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ud(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function uO(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,h="POP",m=null,g=w();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function w(){return(c.state||{idx:null}).idx}function _(){h="POP";let L=w(),G=L==null?null:L-g;g=L,m&&m({action:h,location:D.location,delta:G})}function A(L,G){h="PUSH";let z=Ax(D.location,L,G);g=w()+1;let H=Mb(z,g),Y=D.createHref(z);try{c.pushState(H,"",Y)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;i.location.assign(Y)}o&&m&&m({action:h,location:D.location,delta:1})}function R(L,G){h="REPLACE";let z=Ax(D.location,L,G);g=w();let H=Mb(z,g),Y=D.createHref(z);c.replaceState(H,"",Y),o&&m&&m({action:h,location:D.location,delta:0})}function M(L){return dO(L)}let D={get action(){return h},get location(){return n(i,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(Ob,_),m=L,()=>{i.removeEventListener(Ob,_),m=null}},createHref(L){return e(i,L)},createURL:M,encodeLocation(L){let G=M(L);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:A,replace:R,go(L){return c.go(L)}};return D}function dO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ur(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:gf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function yS(n,e,t="/"){return hO(n,e,t,!1)}function hO(n,e,t,r){let i=typeof e=="string"?Ud(e):e,o=Oa(i.pathname||"/",t);if(o==null)return null;let c=xS(n);fO(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let g=IO(o);h=EO(c[m],g,r)}return h}function xS(n,e=[],t=[],r=""){let i=(o,c,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};m.relativePath.startsWith("/")&&(ur(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let g=Pa([r,m.relativePath]),w=t.concat(m);o.children&&o.children.length>0&&(ur(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),xS(o.children,e,w,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:vO(g,o.index),routesMeta:w})};return n.forEach((o,c)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,c);else for(let m of wS(o.path))i(o,c,m)}),e}function wS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=wS(r.join("/")),h=[];return h.push(...c.map(m=>m===""?o:[o,m].join("/"))),i&&h.push(...c),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function fO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_O(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var pO=/^:[\w-]+$/,mO=3,gO=2,yO=1,xO=10,wO=-2,Lb=n=>n==="*";function vO(n,e){let t=n.split("/"),r=t.length;return t.some(Lb)&&(r+=wO),e&&(r+=gO),t.filter(i=>!Lb(i)).reduce((i,o)=>i+(pO.test(o)?mO:o===""?yO:xO),r)}function _O(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function EO(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",c=[];for(let h=0;h<r.length;++h){let m=r[h],g=h===r.length-1,w=o==="/"?e:e.slice(o.length)||"/",_=d0({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},w),A=m.route;if(!_&&g&&t&&!r[r.length-1].route.index&&(_=d0({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},w)),!_)return null;Object.assign(i,_.params),c.push({params:i,pathname:Pa([o,_.pathname]),pathnameBase:SO(Pa([o,_.pathnameBase])),route:A}),_.pathnameBase!=="/"&&(o=Pa([o,_.pathnameBase]))}return c}function d0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=bO(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((g,{paramName:w,isOptional:_},A)=>{if(w==="*"){let M=h[A]||"";c=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const R=h[A];return _&&!R?g[w]=void 0:g[w]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:n}}function bO(n,e=!1,t=!0){ia(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ia(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function TO(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ud(n):n;return{pathname:t?t.startsWith("/")?t:AO(t,e):e,search:RO(r),hash:NO(i)}}function AO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ty(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vS(n){let e=CO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function _S(n,e,t,r=!1){let i;typeof n=="string"?i=Ud(n):(i={...n},ur(!i.pathname||!i.pathname.includes("?"),Ty("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),Ty("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),Ty("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,h;if(c==null)h=t;else{let _=e.length-1;if(!r&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),_-=1;i.pathname=A.join("/")}h=_>=0?e[_]:"/"}let m=TO(i,h),g=c&&c!=="/"&&c.endsWith("/"),w=(o||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||w)&&(m.pathname+="/"),m}var Pa=n=>n.join("/").replace(/\/\/+/g,"/"),SO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),RO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,NO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function kO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ES=["POST","PUT","PATCH","DELETE"];new Set(ES);var PO=["GET",...ES];new Set(PO);var zd=P.createContext(null);zd.displayName="DataRouter";var rg=P.createContext(null);rg.displayName="DataRouterState";P.createContext(!1);var bS=P.createContext({isTransitioning:!1});bS.displayName="ViewTransition";var DO=P.createContext(new Map);DO.displayName="Fetchers";var OO=P.createContext(null);OO.displayName="Await";var la=P.createContext(null);la.displayName="Navigation";var $f=P.createContext(null);$f.displayName="Location";var Ha=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ha.displayName="Route";var iv=P.createContext(null);iv.displayName="RouteError";function MO(n,{relative:e}={}){ur(qf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(la),{hash:i,pathname:o,search:c}=Kf(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Pa([t,o])),r.createHref({pathname:h,search:c,hash:i})}function qf(){return P.useContext($f)!=null}function ca(){return ur(qf(),"useLocation() may be used only in the context of a <Router> component."),P.useContext($f).location}var IS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TS(n){P.useContext(la).static||P.useLayoutEffect(n)}function no(){let{isDataRoute:n}=P.useContext(Ha);return n?KO():LO()}function LO(){ur(qf(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(zd),{basename:e,navigator:t}=P.useContext(la),{matches:r}=P.useContext(Ha),{pathname:i}=ca(),o=JSON.stringify(vS(r)),c=P.useRef(!1);return TS(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(ia(c.current,IS),!c.current)return;if(typeof m=="number"){t.go(m);return}let w=_S(m,JSON.parse(o),i,g.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Pa([e,w.pathname])),(g.replace?t.replace:t.push)(w,g.state,g)},[e,t,o,i,n])}P.createContext(null);function Kf(n,{relative:e}={}){let{matches:t}=P.useContext(Ha),{pathname:r}=ca(),i=JSON.stringify(vS(t));return P.useMemo(()=>_S(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function VO(n,e){return AS(n,e)}function AS(n,e,t,r){var G;ur(qf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(la),{matches:o}=P.useContext(Ha),c=o[o.length-1],h=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",w=c&&c.route;{let z=w&&w.path||"";CS(m,!w||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let _=ca(),A;if(e){let z=typeof e=="string"?Ud(e):e;ur(g==="/"||((G=z.pathname)==null?void 0:G.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),A=z}else A=_;let R=A.pathname||"/",M=R;if(g!=="/"){let z=g.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=yS(n,{pathname:M});ia(w||D!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ia(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=zO(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Pa([g,i.encodeLocation?i.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:Pa([g,i.encodeLocation?i.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,t,r);return e&&L?P.createElement($f.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},L):L}function FO(){let n=qO(),e=kO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,c)}var BO=P.createElement(FO,null),jO=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(Ha.Provider,{value:this.props.routeContext},P.createElement(iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UO({routeContext:n,match:e,children:t}){let r=P.useContext(zd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Ha.Provider,{value:n},t)}function zO(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let m=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);ur(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,h=-1;if(t)for(let m=0;m<i.length;m++){let g=i[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:w,errors:_}=t,A=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!_||_[g.route.id]===void 0);if(g.route.lazy||A){c=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((m,g,w)=>{let _,A=!1,R=null,M=null;t&&(_=o&&g.route.id?o[g.route.id]:void 0,R=g.route.errorElement||BO,c&&(h<0&&w===0?(CS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,M=null):h===w&&(A=!0,M=g.route.hydrateFallbackElement||null)));let D=e.concat(i.slice(0,w+1)),L=()=>{let G;return _?G=R:A?G=M:g.route.Component?G=P.createElement(g.route.Component,null):g.route.element?G=g.route.element:G=m,P.createElement(UO,{match:g,routeContext:{outlet:m,matches:D,isDataRoute:t!=null},children:G})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?P.createElement(jO,{location:t.location,revalidation:t.revalidation,component:R,error:_,children:L(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):L()},null)}function sv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WO(n){let e=P.useContext(zd);return ur(e,sv(n)),e}function HO(n){let e=P.useContext(rg);return ur(e,sv(n)),e}function GO(n){let e=P.useContext(Ha);return ur(e,sv(n)),e}function ov(n){let e=GO(n),t=e.matches[e.matches.length-1];return ur(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $O(){return ov("useRouteId")}function qO(){var r;let n=P.useContext(iv),e=HO("useRouteError"),t=ov("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function KO(){let{router:n}=WO("useNavigate"),e=ov("useNavigate"),t=P.useRef(!1);return TS(()=>{t.current=!0}),P.useCallback(async(i,o={})=>{ia(t.current,IS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var Vb={};function CS(n,e,t){!e&&!Vb[n]&&(Vb[n]=!0,ia(!1,t))}P.memo(XO);function XO({routes:n,future:e,state:t}){return AS(n,void 0,t,e)}function jo(n){ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YO({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){ur(!qf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:c,navigator:i,static:o,future:{}}),[c,i,o]);typeof t=="string"&&(t=Ud(t));let{pathname:m="/",search:g="",hash:w="",state:_=null,key:A="default"}=t,R=P.useMemo(()=>{let M=Oa(m,c);return M==null?null:{location:{pathname:M,search:g,hash:w,state:_,key:A},navigationType:r}},[c,m,g,w,_,A,r]);return ia(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:P.createElement(la.Provider,{value:h},P.createElement($f.Provider,{children:e,value:R}))}function QO({children:n,location:e}){return VO(Cx(n),e)}function Cx(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let o=[...e,i];if(r.type===P.Fragment){t.push.apply(t,Cx(r.props.children,o));return}ur(r.type===jo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ur(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Cx(r.props.children,o)),t.push(c)}),t}var Vm="get",Fm="application/x-www-form-urlencoded";function ig(n){return n!=null&&typeof n.tagName=="string"}function ZO(n){return ig(n)&&n.tagName.toLowerCase()==="button"}function JO(n){return ig(n)&&n.tagName.toLowerCase()==="form"}function eM(n){return ig(n)&&n.tagName.toLowerCase()==="input"}function tM(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function nM(n,e){return n.button===0&&(!e||e==="_self")&&!tM(n)}var hm=null;function rM(){if(hm===null)try{new FormData(document.createElement("form"),0),hm=!1}catch{hm=!0}return hm}var iM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ay(n){return n!=null&&!iM.has(n)?(ia(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fm}"`),null):n}function sM(n,e){let t,r,i,o,c;if(JO(n)){let h=n.getAttribute("action");r=h?Oa(h,e):null,t=n.getAttribute("method")||Vm,i=Ay(n.getAttribute("enctype"))||Fm,o=new FormData(n)}else if(ZO(n)||eM(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(r=m?Oa(m,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Vm,i=Ay(n.getAttribute("formenctype"))||Ay(h.getAttribute("enctype"))||Fm,o=new FormData(h,n),!rM()){let{name:g,type:w,value:_}=n;if(w==="image"){let A=g?`${g}.`:"";o.append(`${A}x`,"0"),o.append(`${A}y`,"0")}else g&&o.append(g,_)}}else{if(ig(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Vm,r=null,i=Fm,c=n}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function av(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oM(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Oa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function aM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function cM(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await aM(o,t);return c.links?c.links():[]}return[]}));return fM(r.flat(1).filter(lM).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Fb(n,e,t,r,i,o){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,h=(m,g)=>{var w;return t[g].pathname!==m.pathname||((w=t[g].route.path)==null?void 0:w.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,g)=>c(m,g)||h(m,g)):o==="data"?e.filter((m,g)=>{var _;let w=r.routes[m.route.id];if(!w||!w.hasLoader)return!1;if(c(m,g)||h(m,g))return!0;if(m.route.shouldRevalidate){let A=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function uM(n,e,{includeHydrateFallback:t}={}){return dM(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function dM(n){return[...new Set(n)]}function hM(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function fM(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(hM(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function SS(){let n=P.useContext(zd);return av(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function pM(){let n=P.useContext(rg);return av(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var lv=P.createContext(void 0);lv.displayName="FrameworkContext";function RS(){let n=P.useContext(lv);return av(n,"You must render this element inside a <HydratedRouter> element"),n}function mM(n,e){let t=P.useContext(lv),[r,i]=P.useState(!1),[o,c]=P.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:g,onMouseLeave:w,onTouchStart:_}=e,A=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=G=>{G.forEach(z=>{c(z.isIntersecting)})},L=new IntersectionObserver(D,{threshold:.5});return A.current&&L.observe(A.current),()=>{L.disconnect()}}},[n]),P.useEffect(()=>{if(r){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[r]);let R=()=>{i(!0)},M=()=>{i(!1),c(!1)};return t?n!=="intent"?[o,A,{}]:[o,A,{onFocus:Rh(h,R),onBlur:Rh(m,M),onMouseEnter:Rh(g,R),onMouseLeave:Rh(w,M),onTouchStart:Rh(_,R)}]:[!1,A,{}]}function Rh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function gM({page:n,...e}){let{router:t}=SS(),r=P.useMemo(()=>yS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(xM,{page:n,matches:r,...e}):null}function yM(n){let{manifest:e,routeModules:t}=RS(),[r,i]=P.useState([]);return P.useEffect(()=>{let o=!1;return cM(n,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[n,e,t]),r}function xM({page:n,matches:e,...t}){let r=ca(),{manifest:i,routeModules:o}=RS(),{basename:c}=SS(),{loaderData:h,matches:m}=pM(),g=P.useMemo(()=>Fb(n,e,m,i,r,"data"),[n,e,m,i,r]),w=P.useMemo(()=>Fb(n,e,m,i,r,"assets"),[n,e,m,i,r]),_=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,D=!1;if(e.forEach(G=>{var H;let z=i.routes[G.route.id];!z||!z.hasLoader||(!g.some(Y=>Y.route.id===G.route.id)&&G.route.id in h&&((H=o[G.route.id])!=null&&H.shouldRevalidate)||z.hasClientLoader?D=!0:M.add(G.route.id))}),M.size===0)return[];let L=oM(n,c,"data");return D&&M.size>0&&L.searchParams.set("_routes",e.filter(G=>M.has(G.route.id)).map(G=>G.route.id).join(",")),[L.pathname+L.search]},[c,h,r,i,g,e,n,o]),A=P.useMemo(()=>uM(w,i),[w,i]),R=yM(w);return P.createElement(P.Fragment,null,_.map(M=>P.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),A.map(M=>P.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),R.map(({key:M,link:D})=>P.createElement("link",{key:M,...D})))}function wM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var NS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NS&&(window.__reactRouterVersion="7.7.1")}catch{}function vM({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=lO({window:t,v5Compat:!0}));let i=r.current,[o,c]=P.useState({action:i.action,location:i.location}),h=P.useCallback(m=>{P.startTransition(()=>c(m))},[c]);return P.useLayoutEffect(()=>i.listen(h),[i,h]),P.createElement(YO,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var kS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PS=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:h,target:m,to:g,preventScrollReset:w,viewTransition:_,...A},R){let{basename:M}=P.useContext(la),D=typeof g=="string"&&kS.test(g),L,G=!1;if(typeof g=="string"&&D&&(L=g,NS))try{let W=new URL(window.location.href),Z=g.startsWith("//")?new URL(W.protocol+g):new URL(g),te=Oa(Z.pathname,M);Z.origin===W.origin&&te!=null?g=te+Z.search+Z.hash:G=!0}catch{ia(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=MO(g,{relative:i}),[H,Y,re]=mM(r,A),ie=IM(g,{replace:c,state:h,target:m,preventScrollReset:w,relative:i,viewTransition:_});function V(W){e&&e(W),W.defaultPrevented||ie(W)}let B=P.createElement("a",{...A,...re,href:L||z,onClick:G||o?e:V,ref:wM(R,Y),target:m,"data-discover":!D&&t==="render"?"true":void 0});return H&&!D?P.createElement(P.Fragment,null,B,P.createElement(gM,{page:z})):B});PS.displayName="Link";var _M=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:h,children:m,...g},w){let _=Kf(c,{relative:g.relative}),A=ca(),R=P.useContext(rg),{navigator:M,basename:D}=P.useContext(la),L=R!=null&&RM(_)&&h===!0,G=M.encodeLocation?M.encodeLocation(_).pathname:_.pathname,z=A.pathname,H=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(z=z.toLowerCase(),H=H?H.toLowerCase():null,G=G.toLowerCase()),H&&D&&(H=Oa(H,D)||H);const Y=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let re=z===G||!i&&z.startsWith(G)&&z.charAt(Y)==="/",ie=H!=null&&(H===G||!i&&H.startsWith(G)&&H.charAt(G.length)==="/"),V={isActive:re,isPending:ie,isTransitioning:L},B=re?e:void 0,W;typeof r=="function"?W=r(V):W=[r,re?"active":null,ie?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let Z=typeof o=="function"?o(V):o;return P.createElement(PS,{...g,"aria-current":B,className:W,ref:w,style:Z,to:c,viewTransition:h},typeof m=="function"?m(V):m)});_M.displayName="NavLink";var EM=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:c=Vm,action:h,onSubmit:m,relative:g,preventScrollReset:w,viewTransition:_,...A},R)=>{let M=CM(),D=SM(h,{relative:g}),L=c.toLowerCase()==="get"?"get":"post",G=typeof h=="string"&&kS.test(h),z=H=>{if(m&&m(H),H.defaultPrevented)return;H.preventDefault();let Y=H.nativeEvent.submitter,re=(Y==null?void 0:Y.getAttribute("formmethod"))||c;M(Y||H.currentTarget,{fetcherKey:e,method:re,navigate:t,replace:i,state:o,relative:g,preventScrollReset:w,viewTransition:_})};return P.createElement("form",{ref:R,method:L,action:D,onSubmit:r?m:z,...A,"data-discover":!G&&n==="render"?"true":void 0})});EM.displayName="Form";function bM(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DS(n){let e=P.useContext(zd);return ur(e,bM(n)),e}function IM(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:c}={}){let h=no(),m=ca(),g=Kf(n,{relative:o});return P.useCallback(w=>{if(nM(w,e)){w.preventDefault();let _=t!==void 0?t:gf(m)===gf(g);h(n,{replace:_,state:r,preventScrollReset:i,relative:o,viewTransition:c})}},[m,h,g,t,r,e,n,i,o,c])}var TM=0,AM=()=>`__${String(++TM)}__`;function CM(){let{router:n}=DS("useSubmit"),{basename:e}=P.useContext(la),t=$O();return P.useCallback(async(r,i={})=>{let{action:o,method:c,encType:h,formData:m,body:g}=sM(r,e);if(i.navigate===!1){let w=i.fetcherKey||AM();await n.fetch(w,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||c,formEncType:i.encType||h,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||c,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function SM(n,{relative:e}={}){let{basename:t}=P.useContext(la),r=P.useContext(Ha);ur(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Kf(n||".",{relative:e})},c=ca();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),m=h.getAll("index");if(m.some(w=>w==="")){h.delete("index"),m.filter(_=>_).forEach(_=>h.append("index",_));let w=h.toString();o.search=w?`?${w}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Pa([t,o.pathname])),gf(o)}function RM(n,{relative:e}={}){let t=P.useContext(bS);ur(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=DS("useViewTransitionState"),i=Kf(n,{relative:e});if(!t.isTransitioning)return!1;let o=Oa(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Oa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return d0(i.pathname,c)!=null||d0(i.pathname,o)!=null}var Xf=gS();const OS=ng(Xf);function Kn(n){const[e,t]=n.split("?"),r="/"+e.toLowerCase().replace(/ /g,"-");return t?r+"?"+t:r}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...h},m)=>P.createElement("svg",{ref:m,...kM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:MS("lucide",i),...h},[...c.map(([g,w])=>P.createElement(g,w)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=(n,e)=>{const t=P.forwardRef(({className:r,...i},o)=>P.createElement(PM,{ref:o,iconNode:e,className:MS(`lucide-${NM(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cv=Bt("ArrowRight",DM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],MM=Bt("Calendar",OM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Sx=Bt("Camera",LM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],FM=Bt("Check",VM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uv=Bt("ChevronDown",BM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],LS=Bt("ChevronUp",jM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],dv=Bt("CircleAlert",UM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],WM=Bt("CircleCheckBig",zM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zu=Bt("CircleCheck",HM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hv=Bt("Clock",GM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qM=Bt("EyeOff",$M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XM=Bt("Eye",KM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],VS=Bt("Filter",YM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],FS=Bt("Flag",QM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],BS=Bt("Hash",ZM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],vd=Bt("Heart",JM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],t5=Bt("House",e5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],r5=Bt("LogOut",n5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],s5=Bt("Mail",i5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],yf=Bt("MessageCircle",o5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],l5=Bt("PartyPopper",a5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Rx=Bt("Phone",c5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],d5=Bt("QrCode",u5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],f5=Bt("RefreshCw",h5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],m5=Bt("Ruler",p5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cy=Bt("Save",g5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],x5=Bt("Send",y5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],Bb=Bt("Share",w5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],_5=Bt("Sparkles",v5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sy=Bt("SquarePen",E5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],I5=Bt("Star",b5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],A5=Bt("Trash2",T5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],S5=Bt("TriangleAlert",C5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],N5=Bt("Upload",R5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Yf=Bt("User",k5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],xf=Bt("Users",P5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],O5=Bt("WifiOff",D5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],L5=Bt("Wifi",M5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Li=Bt("X",V5),F5=()=>{};var jb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},B5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],h=n[t++],m=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},US={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,h=c?n[i+1]:0,m=i+2<n.length,g=m?n[i+2]:0,w=o>>2,_=(o&3)<<4|h>>4;let A=(h&15)<<2|g>>6,R=g&63;m||(R=64,c||(A=64)),r.push(t[w],t[_],t[A],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):B5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||g==null||_==null)throw new j5;const A=o<<2|h>>4;if(r.push(A),g!==64){const R=h<<4&240|g>>2;if(r.push(R),_!==64){const M=g<<6&192|_;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class j5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U5=function(n){const e=jS(n);return US.encodeByteArray(e,!0)},h0=function(n){return U5(n).replace(/\./g,"")},zS=function(n){try{return US.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z5=()=>WS().__FIREBASE_DEFAULTS__,W5=()=>{if(typeof process>"u"||typeof jb>"u")return;const n=jb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},H5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zS(n[1]);return e&&JSON.parse(e)},sg=()=>{try{return F5()||z5()||W5()||H5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HS=n=>{var e,t;return(t=(e=sg())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},GS=n=>{const e=HS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$S=()=>{var n;return(n=sg())==null?void 0:n.config},qS=n=>{var e;return(e=sg())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[h0(JSON.stringify(t)),h0(JSON.stringify(c)),""].join(".")}const Qh={};function $5(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qh))Qh[e]?n.emulator.push(e):n.prod.push(e);return n}function q5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ub=!1;function pv(n,e){if(typeof window>"u"||typeof document>"u"||!Xl(window.location.host)||Qh[n]===e||Qh[n]||Ub)return;Qh[n]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",o=$5().prod.length>0;function c(){const A=document.getElementById(r);A&&A.remove()}function h(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,R){A.setAttribute("width","24"),A.setAttribute("id",R),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ub=!0,c()},A}function w(A,R){A.setAttribute("id",R),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function _(){const A=q5(r),R=t("text"),M=document.getElementById(R)||document.createElement("span"),D=t("learnmore"),L=document.getElementById(D)||document.createElement("a"),G=t("preprendIcon"),z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const H=A.element;h(H),w(L,D);const Y=g();m(z,G),H.append(z,M,L,Y),document.body.appendChild(H)}o?(M.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yr())}function XS(){var e;const n=(e=sg())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Y5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q5(){const n=Yr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QS(){return!XS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZS(){return!XS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function mv(){try{return typeof indexedDB=="object"}catch{return!1}}function JS(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}function Z5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="FirebaseError";class ro extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=J5,Object.setPrototypeOf(this,ro.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?eL(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new ro(i,h,r)}}function eL(n,e){return n.replace(tL,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const tL=/\{\$([^}]+)}/g;function nL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(zb(o)&&zb(c)){if(!Bl(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function zb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Uh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function rL(n,e){const t=new iL(n,e);return t.subscribe.bind(t)}class iL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ry),i.error===void 0&&(i.error=Ry),i.complete===void 0&&(i.complete=Ry);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ry(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=1e3,aL=2,lL=14400*1e3,cL=.5;function Wb(n,e=oL,t=aL){const r=e*Math.pow(t,n),i=Math.round(cL*r*(Math.random()-.5)*2);return Math.min(lL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(n){return n&&n._delegate?n._delegate:n}class to{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new G5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hL(e))try{this.getOrInitializeService({instanceIdentifier:Ac})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ac){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ac){return this.instances.has(e)}getOptions(e=Ac){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ac){return this.component?this.component.multipleInstances?e:Ac:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dL(n){return n===Ac?void 0:n}function hL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xt||(Xt={}));const pL={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},mL=Xt.INFO,gL={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},yL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=gL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=mL,this._logHandler=yL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const xL=(n,e)=>e.some(t=>n instanceof t);let Hb,Gb;function wL(){return Hb||(Hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vL(){return Gb||(Gb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eR=new WeakMap,Nx=new WeakMap,tR=new WeakMap,Ny=new WeakMap,gv=new WeakMap;function _L(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Dl(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&eR.set(t,n)}).catch(()=>{}),gv.set(e,n),e}function EL(n){if(Nx.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Nx.set(n,e)}let kx={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Nx.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Dl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bL(n){kx=n(kx)}function IL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ky(this),e,...t);return tR.set(r,e.sort?e.sort():[e]),Dl(r)}:vL().includes(n)?function(...e){return n.apply(ky(this),e),Dl(eR.get(this))}:function(...e){return Dl(n.apply(ky(this),e))}}function TL(n){return typeof n=="function"?IL(n):(n instanceof IDBTransaction&&EL(n),xL(n,wL())?new Proxy(n,kx):n)}function Dl(n){if(n instanceof IDBRequest)return _L(n);if(Ny.has(n))return Ny.get(n);const e=TL(n);return e!==n&&(Ny.set(n,e),gv.set(e,n)),e}const ky=n=>gv.get(n);function nR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),h=Dl(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Dl(c.result),m.oldVersion,m.newVersion,Dl(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),i&&m.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const AL=["get","getKey","getAll","getAllKeys","count"],CL=["put","add","delete","clear"],Py=new Map;function $b(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Py.get(e))return Py.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=CL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AL.includes(t)))return;const o=async function(c,...h){const m=this.transaction(c,i?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),i&&m.done]))[0]};return Py.set(e,o),o}bL(n=>({...n,get:(e,t,r)=>$b(e,t)||n.get(e,t,r),has:(e,t)=>!!$b(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function RL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Px="@firebase/app",qb="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new og("@firebase/app"),NL="@firebase/app-compat",kL="@firebase/analytics-compat",PL="@firebase/analytics",DL="@firebase/app-check-compat",OL="@firebase/app-check",ML="@firebase/auth",LL="@firebase/auth-compat",VL="@firebase/database",FL="@firebase/data-connect",BL="@firebase/database-compat",jL="@firebase/functions",UL="@firebase/functions-compat",zL="@firebase/installations",WL="@firebase/installations-compat",HL="@firebase/messaging",GL="@firebase/messaging-compat",$L="@firebase/performance",qL="@firebase/performance-compat",KL="@firebase/remote-config",XL="@firebase/remote-config-compat",YL="@firebase/storage",QL="@firebase/storage-compat",ZL="@firebase/firestore",JL="@firebase/ai",e9="@firebase/firestore-compat",t9="firebase",n9="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="[DEFAULT]",r9={[Px]:"fire-core",[NL]:"fire-core-compat",[PL]:"fire-analytics",[kL]:"fire-analytics-compat",[OL]:"fire-app-check",[DL]:"fire-app-check-compat",[ML]:"fire-auth",[LL]:"fire-auth-compat",[VL]:"fire-rtdb",[FL]:"fire-data-connect",[BL]:"fire-rtdb-compat",[jL]:"fire-fn",[UL]:"fire-fn-compat",[zL]:"fire-iid",[WL]:"fire-iid-compat",[HL]:"fire-fcm",[GL]:"fire-fcm-compat",[$L]:"fire-perf",[qL]:"fire-perf-compat",[KL]:"fire-rc",[XL]:"fire-rc-compat",[YL]:"fire-gcs",[QL]:"fire-gcs-compat",[ZL]:"fire-fst",[e9]:"fire-fst-compat",[JL]:"fire-vertex","fire-js":"fire-js",[t9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map,i9=new Map,Ox=new Map;function Kb(n,e){try{n.container.addComponent(e)}catch(t){Ma.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _o(n){const e=n.name;if(Ox.has(e))return Ma.debug(`There were multiple attempts to register component ${e}.`),!1;Ox.set(e,n);for(const t of f0.values())Kb(t,n);for(const t of i9.values())Kb(t,n);return!0}function Yl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rs(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ol=new fu("app","Firebase",s9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=n9;function Mx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Dx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ol.create("bad-app-name",{appName:String(i)});if(t||(t=$S()),!t)throw Ol.create("no-options");const o=f0.get(i);if(o){if(Bl(t,o.options)&&Bl(r,o.config))return o;throw Ol.create("duplicate-app",{appName:i})}const c=new fL(i);for(const m of Ox.values())c.addComponent(m);const h=new o9(t,r,c);return f0.set(i,h),h}function ag(n=Dx){const e=f0.get(n);if(!e&&n===Dx&&$S())return Mx();if(!e)throw Ol.create("no-app",{appName:n});return e}function fs(n,e,t){let r=r9[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ma.warn(c.join(" "));return}_o(new to(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9="firebase-heartbeat-database",l9=1,wf="firebase-heartbeat-store";let Dy=null;function rR(){return Dy||(Dy=nR(a9,l9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ol.create("idb-open",{originalErrorMessage:n.message})})),Dy}async function c9(n){try{const t=(await rR()).transaction(wf),r=await t.objectStore(wf).get(iR(n));return await t.done,r}catch(e){if(e instanceof ro)Ma.warn(e.message);else{const t=Ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ma.warn(t.message)}}}async function Xb(n,e){try{const r=(await rR()).transaction(wf,"readwrite");await r.objectStore(wf).put(e,iR(n)),await r.done}catch(t){if(t instanceof ro)Ma.warn(t.message);else{const r=Ol.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ma.warn(r.message)}}}function iR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=1024,d9=30;class h9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new p9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Yb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>d9){const c=m9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ma.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yb(),{heartbeatsToSend:r,unsentEntries:i}=f9(this._heartbeatsCache.heartbeats),o=h0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ma.warn(t),""}}}function Yb(){return new Date().toISOString().substring(0,10)}function f9(n,e=u9){const t=[];let r=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Qb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Qb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class p9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mv()?JS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await c9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qb(n){return h0(JSON.stringify({version:2,heartbeats:n})).length}function m9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(n){_o(new to("platform-logger",e=>new SL(e),"PRIVATE")),_o(new to("heartbeat",e=>new h9(e),"PRIVATE")),fs(Px,qb,n),fs(Px,qb,"esm2020"),fs("fire-js","")}g9("");var y9="firebase",x9="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(y9,x9,"app");function sR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const w9=sR,oR=new fu("auth","Firebase",sR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=new og("@firebase/auth");function v9(n,...e){p0.logLevel<=Xt.WARN&&p0.warn(`Auth (${pu}): ${n}`,...e)}function Bm(n,...e){p0.logLevel<=Xt.ERROR&&p0.error(`Auth (${pu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(n,...e){throw yv(n,...e)}function qo(n,...e){return yv(n,...e)}function aR(n,e,t){const r={...w9(),[e]:t};return new fu("auth","Firebase",r).create(e,{appName:n.name})}function Da(n){return aR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return oR.create(n,...e)}function Et(n,e,...t){if(!n)throw yv(e,...t)}function Sa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bm(e),new Error(e)}function La(n,e){n||Sa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function _9(){return Zb()==="http:"||Zb()==="https:"}function Zb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_9()||YS()||"connection"in navigator)?navigator.onLine:!0}function b9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t){this.shortDelay=e,this.longDelay=t,La(t>e,"Short delay should be less than long delay!"),this.isMobile=K5()||Y5()}get(){return E9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n,e){La(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],A9=new Zf(3e4,6e4);function Ql(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ga(n,e,t,r,i={}){return cR(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const h=Qf({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...o};return X5()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Xl(n.emulatorConfig.host)&&(g.credentials="include"),lR.fetch()(await uR(n,n.config.apiHost,t,h),g)})}async function cR(n,e,t){n._canInitEmulator=!1;const r={...I9,...e};try{const i=new S9(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw fm(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[m,g]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw fm(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw fm(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw fm(n,"user-disabled",c);const w=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw aR(n,w,g);Eo(n,w)}}catch(i){if(i instanceof ro)throw i;Eo(n,"network-request-failed",{message:String(i)})}}async function Jf(n,e,t,r,i={}){const o=await Ga(n,e,t,r,i);return"mfaPendingCredential"in o&&Eo(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function uR(n,e,t,r){const i=`${e}${t}?${r}`,o=n,c=o.config.emulator?xv(n.config,i):`${n.config.apiScheme}://${i}`;return T9.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function C9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(qo(this.auth,"network-request-failed")),A9.get())})}}function fm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=qo(n,e,r);return i.customData._tokenResponse=t,i}function Jb(n){return n!==void 0&&n.enterprise!==void 0}class R9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return C9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function N9(n,e){return Ga(n,"GET","/v2/recaptchaConfig",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k9(n,e){return Ga(n,"POST","/v1/accounts:delete",e)}async function m0(n,e){return Ga(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function P9(n,e=!1){const t=Vn(n),r=await t.getIdToken(e),i=wv(r);Et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Zh(Oy(i.auth_time)),issuedAtTime:Zh(Oy(i.iat)),expirationTime:Zh(Oy(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Oy(n){return Number(n)*1e3}function wv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bm("JWT malformed, contained fewer than 3 sections"),null;try{const i=zS(t);return i?JSON.parse(i):(Bm("Failed to decode base64 JWT payload"),null)}catch(i){return Bm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eI(n){const e=wv(n);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _d(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ro&&D9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function D9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g0(n){var _;const e=n.auth,t=await n.getIdToken(),r=await _d(n,m0(e,{idToken:t}));Et(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(_=i.providerUserInfo)!=null&&_.length?dR(i.providerUserInfo):[],c=L9(n.providerData,o),h=n.isAnonymous,m=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),g=h?m:!1,w={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Vx(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(n,w)}async function M9(n){const e=Vn(n);await g0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V9(n,e){const t=await cR(n,{},async()=>{const r=Qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await uR(n,i,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return n.emulatorConfig&&Xl(n.emulatorConfig.host)&&(m.credentials="include"),lR.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function F9(n,e){return Ga(n,"POST","/v2/accounts:revokeToken",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const t=eI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await V9(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new hd;return r&&(Et(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Et(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Et(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hd,this.toJSON())}_performRefresh(){return Sa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(n,e){Et(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class wo{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new O9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await _d(this,this.stsTokenManager.getToken(this.auth,e));return Et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return P9(this,e)}reload(){return M9(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new wo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await g0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rs(this.auth.app))return Promise.reject(Da(this.auth));const e=await this.getIdToken();return await _d(this,k9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:_,emailVerified:A,isAnonymous:R,providerData:M,stsTokenManager:D}=t;Et(_&&D,e,"internal-error");const L=hd.fromJSON(this.name,D);Et(typeof _=="string",e,"internal-error"),xl(r,e.name),xl(i,e.name),Et(typeof A=="boolean",e,"internal-error"),Et(typeof R=="boolean",e,"internal-error"),xl(o,e.name),xl(c,e.name),xl(h,e.name),xl(m,e.name),xl(g,e.name),xl(w,e.name);const G=new wo({uid:_,auth:e,email:i,emailVerified:A,displayName:r,isAnonymous:R,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:L,createdAt:g,lastLoginAt:w});return M&&Array.isArray(M)&&(G.providerData=M.map(z=>({...z}))),m&&(G._redirectEventId=m),G}static async _fromIdTokenResponse(e,t,r=!1){const i=new hd;i.updateFromServerResponse(t);const o=new wo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await g0(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Et(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?dR(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),h=new hd;h.updateFromIdToken(r);const m=new wo({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Map;function Ra(n){La(n instanceof Function,"Expected a class definition");let e=tI.get(n);return e?(La(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hR.type="NONE";const nI=hR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n,e,t){return`firebase:${n}:${e}:${t}`}class fd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=jm(this.userKey,i.apiKey,o),this.fullPersistenceKey=jm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await m0(this.auth,{idToken:e}).catch(()=>{});return t?wo._fromGetAccountInfoResponse(this.auth,t,e):null}return wo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new fd(Ra(nI),e,r);const i=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||Ra(nI);const c=jm(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const w=await g._get(c);if(w){let _;if(typeof w=="string"){const A=await m0(e,{idToken:w}).catch(()=>{});if(!A)break;_=await wo._fromGetAccountInfoResponse(e,A,w)}else _=wo._fromJSON(e,w);g!==o&&(h=_),o=g;break}}catch{}const m=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new fd(o,e,r):(o=m[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new fd(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xR(e))return"Blackberry";if(wR(e))return"Webos";if(pR(e))return"Safari";if((e.includes("chrome/")||mR(e))&&!e.includes("edge/"))return"Chrome";if(yR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fR(n=Yr()){return/firefox\//i.test(n)}function pR(n=Yr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mR(n=Yr()){return/crios\//i.test(n)}function gR(n=Yr()){return/iemobile/i.test(n)}function yR(n=Yr()){return/android/i.test(n)}function xR(n=Yr()){return/blackberry/i.test(n)}function wR(n=Yr()){return/webos/i.test(n)}function vv(n=Yr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function B9(n=Yr()){var e;return vv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function j9(){return Q5()&&document.documentMode===10}function vR(n=Yr()){return vv(n)||yR(n)||wR(n)||xR(n)||/windows phone/i.test(n)||gR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n,e=[]){let t;switch(n){case"Browser":t=rI(Yr());break;case"Worker":t=`${rI(Yr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,h)=>{try{const m=e(o);c(m)}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(n,e={}){return Ga(n,"GET","/v2/passwordPolicy",Ql(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=6;class H9{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??W9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iI(this),this.idTokenSubscription=new iI(this),this.beforeStateQueue=new U9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ra(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await fd.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await m0(this,{idToken:e}),r=await wo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Rs(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await g0(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=b9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rs(this.app))return Promise.reject(Da(this));const t=e?Vn(e):null;return t&&Et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rs(this.app)?Promise.reject(Da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rs(this.app)?Promise.reject(Da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ra(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z9(this),t=new H9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await F9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ra(e)||this._popupRedirectResolver;Et(t,this,"argument-error"),this.redirectPersistenceManager=await fd.create(this,[Ra(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,i);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_R(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&v9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function mu(n){return Vn(n)}class iI{constructor(e){this.auth=e,this.observer=null,this.addObserver=rL(t=>this.observer=t)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $9(n){lg=n}function ER(n){return lg.loadJS(n)}function q9(){return lg.recaptchaEnterpriseScript}function K9(){return lg.gapiScript}function X9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class Y9{constructor(){this.enterprise=new Q9}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Q9{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Z9="recaptcha-enterprise",bR="NO_RECAPTCHA";class J9{constructor(e){this.type=Z9,this.auth=mu(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{N9(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new R9(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(m=>{h(m)})})}function i(o,c,h){const m=window.grecaptcha;Jb(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(g=>{c(g)}).catch(()=>{c(bR)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Y9().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(h=>{if(!t&&Jb(window.grecaptcha))i(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=q9();m.length!==0&&(m+=h),ER(m).then(()=>{i(h,o,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function sI(n,e,t,r=!1,i=!1){const o=new J9(n);let c;if(i)c=bR;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Fx(n,e,t,r,i){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sI(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await sI(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e7(n,e){const t=Yl(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Bl(o,e??{}))return i;Eo(i,"already-initialized")}return t.initialize({options:e})}function t7(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ra);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function n7(n,e,t){const r=mu(n);Et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=IR(e),{host:c,port:h}=r7(e),m=h===null?"":`:${h}`,g={url:`${o}//${c}${m}/`},w=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Et(Bl(g,r.config.emulator)&&Bl(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,Xl(c)?(fv(`${o}//${c}${m}`),pv("Auth",!0)):i7()}function IR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function r7(n){const e=IR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:oI(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:oI(c)}}}function oI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function i7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Sa("not implemented")}_getIdTokenResponse(e){return Sa("not implemented")}_linkToIdToken(e,t){return Sa("not implemented")}_getReauthenticationResolver(e){return Sa("not implemented")}}async function s7(n,e){return Ga(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o7(n,e){return Jf(n,"POST","/v1/accounts:signInWithPassword",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a7(n,e){return Jf(n,"POST","/v1/accounts:signInWithEmailLink",Ql(n,e))}async function l7(n,e){return Jf(n,"POST","/v1/accounts:signInWithEmailLink",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends _v{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new vf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fx(e,t,"signInWithPassword",o7);case"emailLink":return a7(e,{email:this._email,oobCode:this._password});default:Eo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fx(e,r,"signUpPassword",s7);case"emailLink":return l7(e,{idToken:t,email:this._email,oobCode:this._password});default:Eo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(n,e){return Jf(n,"POST","/v1/accounts:signInWithIdp",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7="http://localhost";class Kc extends _v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Kc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Eo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new Kc(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return pd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,pd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pd(e,t)}buildRequest(){const e={requestUri:c7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function d7(n){const e=jh(Uh(n)).link,t=e?jh(Uh(e)).deep_link_id:null,r=jh(Uh(n)).deep_link_id;return(r?jh(Uh(r)).link:null)||r||t||e||n}class Ev{constructor(e){const t=jh(Uh(e)),r=t.apiKey??null,i=t.oobCode??null,o=u7(t.mode??null);Et(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=d7(e);try{return new Ev(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this.providerId=Wd.PROVIDER_ID}static credential(e,t){return vf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ev.parseLink(t);return Et(r,"argument-error"),vf._fromEmailAndCode(e,r.code,r.tenantId)}}Wd.PROVIDER_ID="password";Wd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends TR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al extends ep{constructor(){super("facebook.com")}static credential(e){return Kc._fromParams({providerId:Al.PROVIDER_ID,signInMethod:Al.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Al.credentialFromTaggedObject(e)}static credentialFromError(e){return Al.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Al.credential(e.oauthAccessToken)}catch{return null}}}Al.FACEBOOK_SIGN_IN_METHOD="facebook.com";Al.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends ep{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Kc._fromParams({providerId:Cl.PROVIDER_ID,signInMethod:Cl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cl.credentialFromTaggedObject(e)}static credentialFromError(e){return Cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Cl.credential(t,r)}catch{return null}}}Cl.GOOGLE_SIGN_IN_METHOD="google.com";Cl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends ep{constructor(){super("github.com")}static credential(e){return Kc._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sl.credential(e.oauthAccessToken)}catch{return null}}}Sl.GITHUB_SIGN_IN_METHOD="github.com";Sl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends ep{constructor(){super("twitter.com")}static credential(e,t){return Kc._fromParams({providerId:Rl.PROVIDER_ID,signInMethod:Rl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rl.credentialFromTaggedObject(e)}static credentialFromError(e){return Rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Rl.credential(t,r)}catch{return null}}}Rl.TWITTER_SIGN_IN_METHOD="twitter.com";Rl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(n,e){return Jf(n,"POST","/v1/accounts:signUp",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await wo._fromIdTokenResponse(e,r,i),c=aI(r);return new Xc({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=aI(r);return new Xc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function aI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends ro{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,y0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new y0(e,t,r,i)}}function AR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?y0._fromErrorAndOperation(n,o,e,r):o})}async function f7(n,e,t=!1){const r=await _d(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p7(n,e,t=!1){const{auth:r}=n;if(Rs(r.app))return Promise.reject(Da(r));const i="reauthenticate";try{const o=await _d(n,AR(r,i,e,n),t);Et(o.idToken,r,"internal-error");const c=wv(o.idToken);Et(c,r,"internal-error");const{sub:h}=c;return Et(n.uid===h,r,"user-mismatch"),Xc._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Eo(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n,e,t=!1){if(Rs(n.app))return Promise.reject(Da(n));const r="signIn",i=await AR(n,r,e),o=await Xc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function m7(n,e){return CR(mu(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(n){const e=mu(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function g7(n,e,t){if(Rs(n.app))return Promise.reject(Da(n));const r=mu(n),c=await Fx(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",h7).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&SR(n),m}),h=await Xc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function y7(n,e,t){return Rs(n.app)?Promise.reject(Da(n)):m7(Vn(n),Wd.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&SR(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x7(n,e){return Ga(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w7(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Vn(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await _d(r,x7(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function v7(n,e,t,r){return Vn(n).onIdTokenChanged(e,t,r)}function _7(n,e,t){return Vn(n).beforeAuthStateChanged(e,t)}function E7(n,e,t,r){return Vn(n).onAuthStateChanged(e,t,r)}function b7(n){return Vn(n).signOut()}const x0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(x0,"1"),this.storage.removeItem(x0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=1e3,T7=10;class NR extends RR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);j9()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,T7):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},I7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}NR.type="LOCAL";const A7=NR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR extends RR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kR.type="SESSION";const PR=kR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new cg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(c).map(async g=>g(t.origin,o)),m=await C7(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((h,m)=>{const g=bv("",20);i.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(_){const A=_;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(w),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(A.data.response);break;default:clearTimeout(w),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(){return window}function R7(n){Ko().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){return typeof Ko().WorkerGlobalScope<"u"&&typeof Ko().importScripts=="function"}async function N7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k7(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function P7(){return DR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="firebaseLocalStorageDb",D7=1,w0="firebaseLocalStorage",MR="fbase_key";class tp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ug(n,e){return n.transaction([w0],e?"readwrite":"readonly").objectStore(w0)}function O7(){const n=indexedDB.deleteDatabase(OR);return new tp(n).toPromise()}function Bx(){const n=indexedDB.open(OR,D7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(w0,{keyPath:MR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(w0)?e(r):(r.close(),await O7(),e(await Bx()))})})}async function lI(n,e,t){const r=ug(n,!0).put({[MR]:e,value:t});return new tp(r).toPromise()}async function M7(n,e){const t=ug(n,!1).get(e),r=await new tp(t).toPromise();return r===void 0?null:r.value}function cI(n,e){const t=ug(n,!0).delete(e);return new tp(t).toPromise()}const L7=800,V7=3;class LR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bx(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>V7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cg._getInstance(P7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await N7(),!this.activeServiceWorker)return;this.sender=new S7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bx();return await lI(e,x0,"1"),await cI(e,x0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>M7(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=ug(i,!1).getAll();return new tp(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),L7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LR.type="LOCAL";const F7=LR;new Zf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(n,e){return e?Ra(e):(Et(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv extends _v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function j7(n){return CR(n.auth,new Iv(n),n.bypassAuthState)}function U7(n){const{auth:e,user:t}=n;return Et(t,e,"internal-error"),p7(t,new Iv(n),n.bypassAuthState)}async function z7(n){const{auth:e,user:t}=n;return Et(t,e,"internal-error"),f7(t,new Iv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j7;case"linkViaPopup":case"linkViaRedirect":return z7;case"reauthViaPopup":case"reauthViaRedirect":return U7;default:Eo(this.auth,"internal-error")}}resolve(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){La(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7=new Zf(2e3,1e4);class sd extends VR{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,sd.currentPopupAction&&sd.currentPopupAction.cancel(),sd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){La(this.filter.length===1,"Popup operations only handle one event");const e=bv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W7.get())};e()}}sd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="pendingRedirect",Um=new Map;class G7 extends VR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Um.get(this.auth._key());if(!e){try{const r=await $7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Um.set(this.auth._key(),e)}return this.bypassAuthState||Um.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $7(n,e){const t=X7(e),r=K7(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function q7(n,e){Um.set(n._key(),e)}function K7(n){return Ra(n._redirectPersistence)}function X7(n){return jm(H7,n.config.apiKey,n.name)}async function Y7(n,e,t=!1){if(Rs(n.app))return Promise.reject(Da(n));const r=mu(n),i=B7(r,e),c=await new G7(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7=600*1e3;class Z7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!J7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!FR(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(qo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q7&&this.cachedEventUids.clear(),this.cachedEventUids.has(uI(e))}saveEventToCache(e){this.cachedEventUids.add(uI(e)),this.lastProcessedEventTime=Date.now()}}function uI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function FR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function J7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(n,e={}){return Ga(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nV=/^https?/;async function rV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eV(n);for(const t of e)try{if(iV(t))return}catch{}Eo(n,"unauthorized-domain")}function iV(n){const e=Lx(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!nV.test(t))return!1;if(tV.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=new Zf(3e4,6e4);function dI(){const n=Ko().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oV(n){return new Promise((e,t)=>{var i,o,c;function r(){dI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dI(),t(qo(n,"network-request-failed"))},timeout:sV.get()})}if((o=(i=Ko().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Ko().gapi)!=null&&c.load)r();else{const h=X9("iframefcb");return Ko()[h]=()=>{gapi.load?r():t(qo(n,"network-request-failed"))},ER(`${K9()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw zm=null,e})}let zm=null;function aV(n){return zm=zm||oV(n),zm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=new Zf(5e3,15e3),cV="__/auth/iframe",uV="emulator/auth/iframe",dV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fV(n){const e=n.config;Et(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xv(e,uV):`https://${n.config.authDomain}/${cV}`,r={apiKey:e.apiKey,appName:n.name,v:pu},i=hV.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Qf(r).slice(1)}`}async function pV(n){const e=await aV(n),t=Ko().gapi;return Et(t,n,"internal-error"),e.open({where:document.body,url:fV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=qo(n,"network-request-failed"),h=Ko().setTimeout(()=>{o(c)},lV.get());function m(){Ko().clearTimeout(h),i(r)}r.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gV=500,yV=600,xV="_blank",wV="http://localhost";class hI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vV(n,e,t,r=gV,i=yV){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...mV,width:r.toString(),height:i.toString(),top:o,left:c},g=Yr().toLowerCase();t&&(h=mR(g)?xV:t),fR(g)&&(e=e||wV,m.scrollbars="yes");const w=Object.entries(m).reduce((A,[R,M])=>`${A}${R}=${M},`,"");if(B9(g)&&h!=="_self")return _V(e||"",h),new hI(null);const _=window.open(e||"",h,w);Et(_,n,"popup-blocked");try{_.focus()}catch{}return new hI(_)}function _V(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="__/auth/handler",bV="emulator/auth/handler",IV=encodeURIComponent("fac");async function fI(n,e,t,r,i,o){Et(n.config.authDomain,n,"auth-domain-config-required"),Et(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pu,eventId:i};if(e instanceof TR){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",nL(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,_]of Object.entries({}))c[w]=_}if(e instanceof ep){const w=e.getScopes().filter(_=>_!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const w of Object.keys(h))h[w]===void 0&&delete h[w];const m=await n._getAppCheckToken(),g=m?`#${IV}=${encodeURIComponent(m)}`:"";return`${TV(n)}?${Qf(h).slice(1)}${g}`}function TV({config:n}){return n.emulator?xv(n,bV):`https://${n.authDomain}/${EV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="webStorageSupport";class AV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PR,this._completeRedirectFn=Y7,this._overrideRedirectResult=q7}async _openPopup(e,t,r,i){var c;La((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await fI(e,t,r,Lx(),i);return vV(e,o,bv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await fI(e,t,r,Lx(),i);return R7(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(La(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await pV(e),r=new Z7(e);return t.register("authEvent",i=>(Et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(My,{type:My},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[My];o!==void 0&&t(!!o),Eo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vR()||pR()||vv()}}const CV=AV;var pI="@firebase/auth",mI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NV(n){_o(new to("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_R(n)},g=new G9(r,i,o,m);return t7(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_o(new to("auth-internal",e=>{const t=mu(e.getProvider("auth").getImmediate());return(r=>new SV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(pI,mI,RV(n)),fs(pI,mI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=300,PV=qS("authIdTokenMaxAge")||kV;let gI=null;const DV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>PV)return;const i=t==null?void 0:t.token;gI!==i&&(gI=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function OV(n=ag()){const e=Yl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=e7(n,{popupRedirectResolver:CV,persistence:[F7,A7,PR]}),r=qS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=DV(o.toString());_7(t,c,()=>c(t.currentUser)),v7(t,h=>c(h))}}const i=HS("auth");return i&&n7(t,`http://${i}`),t}function MV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=qo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",MV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NV("Browser");var yI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ml,BR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,B){function W(){}W.prototype=B.prototype,V.D=B.prototype,V.prototype=new W,V.prototype.constructor=V,V.C=function(Z,te,ee){for(var K=Array(arguments.length-2),we=2;we<arguments.length;we++)K[we-2]=arguments[we];return B.prototype[te].apply(Z,K)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(V,B,W){W||(W=0);var Z=Array(16);if(typeof B=="string")for(var te=0;16>te;++te)Z[te]=B.charCodeAt(W++)|B.charCodeAt(W++)<<8|B.charCodeAt(W++)<<16|B.charCodeAt(W++)<<24;else for(te=0;16>te;++te)Z[te]=B[W++]|B[W++]<<8|B[W++]<<16|B[W++]<<24;B=V.g[0],W=V.g[1],te=V.g[2];var ee=V.g[3],K=B+(ee^W&(te^ee))+Z[0]+3614090360&4294967295;B=W+(K<<7&4294967295|K>>>25),K=ee+(te^B&(W^te))+Z[1]+3905402710&4294967295,ee=B+(K<<12&4294967295|K>>>20),K=te+(W^ee&(B^W))+Z[2]+606105819&4294967295,te=ee+(K<<17&4294967295|K>>>15),K=W+(B^te&(ee^B))+Z[3]+3250441966&4294967295,W=te+(K<<22&4294967295|K>>>10),K=B+(ee^W&(te^ee))+Z[4]+4118548399&4294967295,B=W+(K<<7&4294967295|K>>>25),K=ee+(te^B&(W^te))+Z[5]+1200080426&4294967295,ee=B+(K<<12&4294967295|K>>>20),K=te+(W^ee&(B^W))+Z[6]+2821735955&4294967295,te=ee+(K<<17&4294967295|K>>>15),K=W+(B^te&(ee^B))+Z[7]+4249261313&4294967295,W=te+(K<<22&4294967295|K>>>10),K=B+(ee^W&(te^ee))+Z[8]+1770035416&4294967295,B=W+(K<<7&4294967295|K>>>25),K=ee+(te^B&(W^te))+Z[9]+2336552879&4294967295,ee=B+(K<<12&4294967295|K>>>20),K=te+(W^ee&(B^W))+Z[10]+4294925233&4294967295,te=ee+(K<<17&4294967295|K>>>15),K=W+(B^te&(ee^B))+Z[11]+2304563134&4294967295,W=te+(K<<22&4294967295|K>>>10),K=B+(ee^W&(te^ee))+Z[12]+1804603682&4294967295,B=W+(K<<7&4294967295|K>>>25),K=ee+(te^B&(W^te))+Z[13]+4254626195&4294967295,ee=B+(K<<12&4294967295|K>>>20),K=te+(W^ee&(B^W))+Z[14]+2792965006&4294967295,te=ee+(K<<17&4294967295|K>>>15),K=W+(B^te&(ee^B))+Z[15]+1236535329&4294967295,W=te+(K<<22&4294967295|K>>>10),K=B+(te^ee&(W^te))+Z[1]+4129170786&4294967295,B=W+(K<<5&4294967295|K>>>27),K=ee+(W^te&(B^W))+Z[6]+3225465664&4294967295,ee=B+(K<<9&4294967295|K>>>23),K=te+(B^W&(ee^B))+Z[11]+643717713&4294967295,te=ee+(K<<14&4294967295|K>>>18),K=W+(ee^B&(te^ee))+Z[0]+3921069994&4294967295,W=te+(K<<20&4294967295|K>>>12),K=B+(te^ee&(W^te))+Z[5]+3593408605&4294967295,B=W+(K<<5&4294967295|K>>>27),K=ee+(W^te&(B^W))+Z[10]+38016083&4294967295,ee=B+(K<<9&4294967295|K>>>23),K=te+(B^W&(ee^B))+Z[15]+3634488961&4294967295,te=ee+(K<<14&4294967295|K>>>18),K=W+(ee^B&(te^ee))+Z[4]+3889429448&4294967295,W=te+(K<<20&4294967295|K>>>12),K=B+(te^ee&(W^te))+Z[9]+568446438&4294967295,B=W+(K<<5&4294967295|K>>>27),K=ee+(W^te&(B^W))+Z[14]+3275163606&4294967295,ee=B+(K<<9&4294967295|K>>>23),K=te+(B^W&(ee^B))+Z[3]+4107603335&4294967295,te=ee+(K<<14&4294967295|K>>>18),K=W+(ee^B&(te^ee))+Z[8]+1163531501&4294967295,W=te+(K<<20&4294967295|K>>>12),K=B+(te^ee&(W^te))+Z[13]+2850285829&4294967295,B=W+(K<<5&4294967295|K>>>27),K=ee+(W^te&(B^W))+Z[2]+4243563512&4294967295,ee=B+(K<<9&4294967295|K>>>23),K=te+(B^W&(ee^B))+Z[7]+1735328473&4294967295,te=ee+(K<<14&4294967295|K>>>18),K=W+(ee^B&(te^ee))+Z[12]+2368359562&4294967295,W=te+(K<<20&4294967295|K>>>12),K=B+(W^te^ee)+Z[5]+4294588738&4294967295,B=W+(K<<4&4294967295|K>>>28),K=ee+(B^W^te)+Z[8]+2272392833&4294967295,ee=B+(K<<11&4294967295|K>>>21),K=te+(ee^B^W)+Z[11]+1839030562&4294967295,te=ee+(K<<16&4294967295|K>>>16),K=W+(te^ee^B)+Z[14]+4259657740&4294967295,W=te+(K<<23&4294967295|K>>>9),K=B+(W^te^ee)+Z[1]+2763975236&4294967295,B=W+(K<<4&4294967295|K>>>28),K=ee+(B^W^te)+Z[4]+1272893353&4294967295,ee=B+(K<<11&4294967295|K>>>21),K=te+(ee^B^W)+Z[7]+4139469664&4294967295,te=ee+(K<<16&4294967295|K>>>16),K=W+(te^ee^B)+Z[10]+3200236656&4294967295,W=te+(K<<23&4294967295|K>>>9),K=B+(W^te^ee)+Z[13]+681279174&4294967295,B=W+(K<<4&4294967295|K>>>28),K=ee+(B^W^te)+Z[0]+3936430074&4294967295,ee=B+(K<<11&4294967295|K>>>21),K=te+(ee^B^W)+Z[3]+3572445317&4294967295,te=ee+(K<<16&4294967295|K>>>16),K=W+(te^ee^B)+Z[6]+76029189&4294967295,W=te+(K<<23&4294967295|K>>>9),K=B+(W^te^ee)+Z[9]+3654602809&4294967295,B=W+(K<<4&4294967295|K>>>28),K=ee+(B^W^te)+Z[12]+3873151461&4294967295,ee=B+(K<<11&4294967295|K>>>21),K=te+(ee^B^W)+Z[15]+530742520&4294967295,te=ee+(K<<16&4294967295|K>>>16),K=W+(te^ee^B)+Z[2]+3299628645&4294967295,W=te+(K<<23&4294967295|K>>>9),K=B+(te^(W|~ee))+Z[0]+4096336452&4294967295,B=W+(K<<6&4294967295|K>>>26),K=ee+(W^(B|~te))+Z[7]+1126891415&4294967295,ee=B+(K<<10&4294967295|K>>>22),K=te+(B^(ee|~W))+Z[14]+2878612391&4294967295,te=ee+(K<<15&4294967295|K>>>17),K=W+(ee^(te|~B))+Z[5]+4237533241&4294967295,W=te+(K<<21&4294967295|K>>>11),K=B+(te^(W|~ee))+Z[12]+1700485571&4294967295,B=W+(K<<6&4294967295|K>>>26),K=ee+(W^(B|~te))+Z[3]+2399980690&4294967295,ee=B+(K<<10&4294967295|K>>>22),K=te+(B^(ee|~W))+Z[10]+4293915773&4294967295,te=ee+(K<<15&4294967295|K>>>17),K=W+(ee^(te|~B))+Z[1]+2240044497&4294967295,W=te+(K<<21&4294967295|K>>>11),K=B+(te^(W|~ee))+Z[8]+1873313359&4294967295,B=W+(K<<6&4294967295|K>>>26),K=ee+(W^(B|~te))+Z[15]+4264355552&4294967295,ee=B+(K<<10&4294967295|K>>>22),K=te+(B^(ee|~W))+Z[6]+2734768916&4294967295,te=ee+(K<<15&4294967295|K>>>17),K=W+(ee^(te|~B))+Z[13]+1309151649&4294967295,W=te+(K<<21&4294967295|K>>>11),K=B+(te^(W|~ee))+Z[4]+4149444226&4294967295,B=W+(K<<6&4294967295|K>>>26),K=ee+(W^(B|~te))+Z[11]+3174756917&4294967295,ee=B+(K<<10&4294967295|K>>>22),K=te+(B^(ee|~W))+Z[2]+718787259&4294967295,te=ee+(K<<15&4294967295|K>>>17),K=W+(ee^(te|~B))+Z[9]+3951481745&4294967295,V.g[0]=V.g[0]+B&4294967295,V.g[1]=V.g[1]+(te+(K<<21&4294967295|K>>>11))&4294967295,V.g[2]=V.g[2]+te&4294967295,V.g[3]=V.g[3]+ee&4294967295}r.prototype.u=function(V,B){B===void 0&&(B=V.length);for(var W=B-this.blockSize,Z=this.B,te=this.h,ee=0;ee<B;){if(te==0)for(;ee<=W;)i(this,V,ee),ee+=this.blockSize;if(typeof V=="string"){for(;ee<B;)if(Z[te++]=V.charCodeAt(ee++),te==this.blockSize){i(this,Z),te=0;break}}else for(;ee<B;)if(Z[te++]=V[ee++],te==this.blockSize){i(this,Z),te=0;break}}this.h=te,this.o+=B},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var B=1;B<V.length-8;++B)V[B]=0;var W=8*this.o;for(B=V.length-8;B<V.length;++B)V[B]=W&255,W/=256;for(this.u(V),V=Array(16),B=W=0;4>B;++B)for(var Z=0;32>Z;Z+=8)V[W++]=this.g[B]>>>Z&255;return V};function o(V,B){var W=h;return Object.prototype.hasOwnProperty.call(W,V)?W[V]:W[V]=B(V)}function c(V,B){this.h=B;for(var W=[],Z=!0,te=V.length-1;0<=te;te--){var ee=V[te]|0;Z&&ee==B||(W[te]=ee,Z=!1)}this.g=W}var h={};function m(V){return-128<=V&&128>V?o(V,function(B){return new c([B|0],0>B?-1:0)}):new c([V|0],0>V?-1:0)}function g(V){if(isNaN(V)||!isFinite(V))return _;if(0>V)return L(g(-V));for(var B=[],W=1,Z=0;V>=W;Z++)B[Z]=V/W|0,W*=4294967296;return new c(B,0)}function w(V,B){if(V.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(V.charAt(0)=="-")return L(w(V.substring(1),B));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var W=g(Math.pow(B,8)),Z=_,te=0;te<V.length;te+=8){var ee=Math.min(8,V.length-te),K=parseInt(V.substring(te,te+ee),B);8>ee?(ee=g(Math.pow(B,ee)),Z=Z.j(ee).add(g(K))):(Z=Z.j(W),Z=Z.add(g(K)))}return Z}var _=m(0),A=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(D(this))return-L(this).m();for(var V=0,B=1,W=0;W<this.g.length;W++){var Z=this.i(W);V+=(0<=Z?Z:4294967296+Z)*B,B*=4294967296}return V},n.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(M(this))return"0";if(D(this))return"-"+L(this).toString(V);for(var B=g(Math.pow(V,6)),W=this,Z="";;){var te=Y(W,B).g;W=G(W,te.j(B));var ee=((0<W.g.length?W.g[0]:W.h)>>>0).toString(V);if(W=te,M(W))return ee+Z;for(;6>ee.length;)ee="0"+ee;Z=ee+Z}},n.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function M(V){if(V.h!=0)return!1;for(var B=0;B<V.g.length;B++)if(V.g[B]!=0)return!1;return!0}function D(V){return V.h==-1}n.l=function(V){return V=G(this,V),D(V)?-1:M(V)?0:1};function L(V){for(var B=V.g.length,W=[],Z=0;Z<B;Z++)W[Z]=~V.g[Z];return new c(W,~V.h).add(A)}n.abs=function(){return D(this)?L(this):this},n.add=function(V){for(var B=Math.max(this.g.length,V.g.length),W=[],Z=0,te=0;te<=B;te++){var ee=Z+(this.i(te)&65535)+(V.i(te)&65535),K=(ee>>>16)+(this.i(te)>>>16)+(V.i(te)>>>16);Z=K>>>16,ee&=65535,K&=65535,W[te]=K<<16|ee}return new c(W,W[W.length-1]&-2147483648?-1:0)};function G(V,B){return V.add(L(B))}n.j=function(V){if(M(this)||M(V))return _;if(D(this))return D(V)?L(this).j(L(V)):L(L(this).j(V));if(D(V))return L(this.j(L(V)));if(0>this.l(R)&&0>V.l(R))return g(this.m()*V.m());for(var B=this.g.length+V.g.length,W=[],Z=0;Z<2*B;Z++)W[Z]=0;for(Z=0;Z<this.g.length;Z++)for(var te=0;te<V.g.length;te++){var ee=this.i(Z)>>>16,K=this.i(Z)&65535,we=V.i(te)>>>16,se=V.i(te)&65535;W[2*Z+2*te]+=K*se,z(W,2*Z+2*te),W[2*Z+2*te+1]+=ee*se,z(W,2*Z+2*te+1),W[2*Z+2*te+1]+=K*we,z(W,2*Z+2*te+1),W[2*Z+2*te+2]+=ee*we,z(W,2*Z+2*te+2)}for(Z=0;Z<B;Z++)W[Z]=W[2*Z+1]<<16|W[2*Z];for(Z=B;Z<2*B;Z++)W[Z]=0;return new c(W,0)};function z(V,B){for(;(V[B]&65535)!=V[B];)V[B+1]+=V[B]>>>16,V[B]&=65535,B++}function H(V,B){this.g=V,this.h=B}function Y(V,B){if(M(B))throw Error("division by zero");if(M(V))return new H(_,_);if(D(V))return B=Y(L(V),B),new H(L(B.g),L(B.h));if(D(B))return B=Y(V,L(B)),new H(L(B.g),B.h);if(30<V.g.length){if(D(V)||D(B))throw Error("slowDivide_ only works with positive integers.");for(var W=A,Z=B;0>=Z.l(V);)W=re(W),Z=re(Z);var te=ie(W,1),ee=ie(Z,1);for(Z=ie(Z,2),W=ie(W,2);!M(Z);){var K=ee.add(Z);0>=K.l(V)&&(te=te.add(W),ee=K),Z=ie(Z,1),W=ie(W,1)}return B=G(V,te.j(B)),new H(te,B)}for(te=_;0<=V.l(B);){for(W=Math.max(1,Math.floor(V.m()/B.m())),Z=Math.ceil(Math.log(W)/Math.LN2),Z=48>=Z?1:Math.pow(2,Z-48),ee=g(W),K=ee.j(B);D(K)||0<K.l(V);)W-=Z,ee=g(W),K=ee.j(B);M(ee)&&(ee=A),te=te.add(ee),V=G(V,K)}return new H(te,V)}n.A=function(V){return Y(this,V).h},n.and=function(V){for(var B=Math.max(this.g.length,V.g.length),W=[],Z=0;Z<B;Z++)W[Z]=this.i(Z)&V.i(Z);return new c(W,this.h&V.h)},n.or=function(V){for(var B=Math.max(this.g.length,V.g.length),W=[],Z=0;Z<B;Z++)W[Z]=this.i(Z)|V.i(Z);return new c(W,this.h|V.h)},n.xor=function(V){for(var B=Math.max(this.g.length,V.g.length),W=[],Z=0;Z<B;Z++)W[Z]=this.i(Z)^V.i(Z);return new c(W,this.h^V.h)};function re(V){for(var B=V.g.length+1,W=[],Z=0;Z<B;Z++)W[Z]=V.i(Z)<<1|V.i(Z-1)>>>31;return new c(W,V.h)}function ie(V,B){var W=B>>5;B%=32;for(var Z=V.g.length-W,te=[],ee=0;ee<Z;ee++)te[ee]=0<B?V.i(ee+W)>>>B|V.i(ee+W+1)<<32-B:V.i(ee+W);return new c(te,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,BR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=w,Ml=c}).apply(typeof yI<"u"?yI:typeof self<"u"?self:typeof window<"u"?window:{});var pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jR,zh,UR,Wm,jx,zR,WR,HR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,N,F){return E==Array.prototype||E==Object.prototype||(E[N]=F.value),E};function t(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof pm=="object"&&pm];for(var N=0;N<E.length;++N){var F=E[N];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=t(this);function i(E,N){if(N)e:{var F=r;E=E.split(".");for(var X=0;X<E.length-1;X++){var me=E[X];if(!(me in F))break e;F=F[me]}E=E[E.length-1],X=F[E],N=N(X),N!=X&&N!=null&&e(F,E,{configurable:!0,writable:!0,value:N})}}function o(E,N){E instanceof String&&(E+="");var F=0,X=!1,me={next:function(){if(!X&&F<E.length){var Ie=F++;return{value:N(Ie,E[Ie]),done:!1}}return X=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(E){return E||function(){return o(this,function(N,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(E){var N=typeof E;return N=N!="object"?N:E?Array.isArray(E)?"array":N:"null",N=="array"||N=="object"&&typeof E.length=="number"}function g(E){var N=typeof E;return N=="object"&&E!=null||N=="function"}function w(E,N,F){return E.call.apply(E.bind,arguments)}function _(E,N,F){if(!E)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,X),E.apply(N,me)}}return function(){return E.apply(N,arguments)}}function A(E,N,F){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:_,A.apply(null,arguments)}function R(E,N){var F=Array.prototype.slice.call(arguments,1);return function(){var X=F.slice();return X.push.apply(X,arguments),E.apply(this,X)}}function M(E,N){function F(){}F.prototype=N.prototype,E.aa=N.prototype,E.prototype=new F,E.prototype.constructor=E,E.Qb=function(X,me,Ie){for(var He=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)He[dn-2]=arguments[dn];return N.prototype[me].apply(X,He)}}function D(E){const N=E.length;if(0<N){const F=Array(N);for(let X=0;X<N;X++)F[X]=E[X];return F}return[]}function L(E,N){for(let F=1;F<arguments.length;F++){const X=arguments[F];if(m(X)){const me=E.length||0,Ie=X.length||0;E.length=me+Ie;for(let He=0;He<Ie;He++)E[me+He]=X[He]}else E.push(X)}}class G{constructor(N,F){this.i=N,this.j=F,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function z(E){return/^[\s\xa0]*$/.test(E)}function H(){var E=h.navigator;return E&&(E=E.userAgent)?E:""}function Y(E){return Y[" "](E),E}Y[" "]=function(){};var re=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ie(E,N,F){for(const X in E)N.call(F,E[X],X,E)}function V(E,N){for(const F in E)N.call(void 0,E[F],F,E)}function B(E){const N={};for(const F in E)N[F]=E[F];return N}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(E,N){let F,X;for(let me=1;me<arguments.length;me++){X=arguments[me];for(F in X)E[F]=X[F];for(let Ie=0;Ie<W.length;Ie++)F=W[Ie],Object.prototype.hasOwnProperty.call(X,F)&&(E[F]=X[F])}}function te(E){var N=1;E=E.split(":");const F=[];for(;0<N&&E.length;)F.push(E.shift()),N--;return E.length&&F.push(E.join(":")),F}function ee(E){h.setTimeout(()=>{throw E},0)}function K(){var E=Ae;let N=null;return E.g&&(N=E.g,E.g=E.g.next,E.g||(E.h=null),N.next=null),N}class we{constructor(){this.h=this.g=null}add(N,F){const X=se.get();X.set(N,F),this.h?this.h.next=X:this.g=X,this.h=X}}var se=new G(()=>new Te,E=>E.reset());class Te{constructor(){this.next=this.g=this.h=null}set(N,F){this.h=N,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,oe=!1,Ae=new we,Ne=()=>{const E=h.Promise.resolve(void 0);xe=()=>{E.then(ae)}};var ae=()=>{for(var E;E=K();){try{E.h.call(E.g)}catch(F){ee(F)}var N=se;N.j(E),100>N.h&&(N.h++,E.next=N.g,N.g=E)}oe=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(E,N){this.type=E,this.g=this.target=N,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var E=!1,N=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const F=()=>{};h.addEventListener("test",F,N),h.removeEventListener("test",F,N)}catch{}return E}();function it(E,N){if(Se.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E){var F=this.type=E.type,X=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;if(this.target=E.target||E.srcElement,this.g=N,N=E.relatedTarget){if(re){e:{try{Y(N.nodeName);var me=!0;break e}catch{}me=!1}me||(N=null)}}else F=="mouseover"?N=E.fromElement:F=="mouseout"&&(N=E.toElement);this.relatedTarget=N,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=typeof E.pointerType=="string"?E.pointerType:Re[E.pointerType]||"",this.state=E.state,this.i=E,E.defaultPrevented&&it.aa.h.call(this)}}M(it,Se);var Re={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function at(E,N,F,X,me){this.listener=E,this.proxy=null,this.src=N,this.type=F,this.capture=!!X,this.ha=me,this.key=++Ge,this.da=this.fa=!1}function st(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function ct(E){this.src=E,this.g={},this.h=0}ct.prototype.add=function(E,N,F,X,me){var Ie=E.toString();E=this.g[Ie],E||(E=this.g[Ie]=[],this.h++);var He=ht(E,N,X,me);return-1<He?(N=E[He],F||(N.fa=!1)):(N=new at(N,this.src,Ie,!!X,me),N.fa=F,E.push(N)),N};function bt(E,N){var F=N.type;if(F in E.g){var X=E.g[F],me=Array.prototype.indexOf.call(X,N,void 0),Ie;(Ie=0<=me)&&Array.prototype.splice.call(X,me,1),Ie&&(st(N),E.g[F].length==0&&(delete E.g[F],E.h--))}}function ht(E,N,F,X){for(var me=0;me<E.length;++me){var Ie=E[me];if(!Ie.da&&Ie.listener==N&&Ie.capture==!!F&&Ie.ha==X)return me}return-1}var gn="closure_lm_"+(1e6*Math.random()|0),Fn={};function Dr(E,N,F,X,me){if(Array.isArray(N)){for(var Ie=0;Ie<N.length;Ie++)Dr(E,N[Ie],F,X,me);return null}return F=io(F),E&&E[Pe]?E.K(N,F,g(X)?!!X.capture:!1,me):Qt(E,N,F,!1,X,me)}function Qt(E,N,F,X,me,Ie){if(!N)throw Error("Invalid event type");var He=g(me)?!!me.capture:!!me,dn=wi(E);if(dn||(E[gn]=dn=new ct(E)),F=dn.add(N,F,X,He,Ie),F.proxy)return F;if(X=zt(),F.proxy=X,X.src=E,X.listener=F,E.addEventListener)Le||(me=He),me===void 0&&(me=!1),E.addEventListener(N.toString(),X,me);else if(E.attachEvent)E.attachEvent(Xe(N.toString()),X);else if(E.addListener&&E.removeListener)E.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return F}function zt(){function E(F){return N.call(E.src,E.listener,F)}const N=Xn;return E}function pt(E,N,F,X,me){if(Array.isArray(N))for(var Ie=0;Ie<N.length;Ie++)pt(E,N[Ie],F,X,me);else X=g(X)?!!X.capture:!!X,F=io(F),E&&E[Pe]?(E=E.i,N=String(N).toString(),N in E.g&&(Ie=E.g[N],F=ht(Ie,F,X,me),-1<F&&(st(Ie[F]),Array.prototype.splice.call(Ie,F,1),Ie.length==0&&(delete E.g[N],E.h--)))):E&&(E=wi(E))&&(N=E.g[N.toString()],E=-1,N&&(E=ht(N,F,X,me)),(F=-1<E?N[E]:null)&&xi(F))}function xi(E){if(typeof E!="number"&&E&&!E.da){var N=E.src;if(N&&N[Pe])bt(N.i,E);else{var F=E.type,X=E.proxy;N.removeEventListener?N.removeEventListener(F,X,E.capture):N.detachEvent?N.detachEvent(Xe(F),X):N.addListener&&N.removeListener&&N.removeListener(X),(F=wi(N))?(bt(F,E),F.h==0&&(F.src=null,N[gn]=null)):st(E)}}}function Xe(E){return E in Fn?Fn[E]:Fn[E]="on"+E}function Xn(E,N){if(E.da)E=!0;else{N=new it(N,this);var F=E.listener,X=E.ha||E.src;E.fa&&xi(E),E=F.call(X,N)}return E}function wi(E){return E=E[gn],E instanceof ct?E:null}var Zr="__closure_events_fn_"+(1e9*Math.random()>>>0);function io(E){return typeof E=="function"?E:(E[Zr]||(E[Zr]=function(N){return E.handleEvent(N)}),E[Zr])}function Wt(){he.call(this),this.i=new ct(this),this.M=this,this.F=null}M(Wt,he),Wt.prototype[Pe]=!0,Wt.prototype.removeEventListener=function(E,N,F,X){pt(this,E,N,F,X)};function Yn(E,N){var F,X=E.F;if(X)for(F=[];X;X=X.F)F.push(X);if(E=E.M,X=N.type||N,typeof N=="string")N=new Se(N,E);else if(N instanceof Se)N.target=N.target||E;else{var me=N;N=new Se(X,E),Z(N,me)}if(me=!0,F)for(var Ie=F.length-1;0<=Ie;Ie--){var He=N.g=F[Ie];me=Er(He,X,!0,N)&&me}if(He=N.g=E,me=Er(He,X,!0,N)&&me,me=Er(He,X,!1,N)&&me,F)for(Ie=0;Ie<F.length;Ie++)He=N.g=F[Ie],me=Er(He,X,!1,N)&&me}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var E=this.i,N;for(N in E.g){for(var F=E.g[N],X=0;X<F.length;X++)st(F[X]);delete E.g[N],E.h--}}this.F=null},Wt.prototype.K=function(E,N,F,X){return this.i.add(String(E),N,!1,F,X)},Wt.prototype.L=function(E,N,F,X){return this.i.add(String(E),N,!0,F,X)};function Er(E,N,F,X){if(N=E.i.g[String(N)],!N)return!0;N=N.concat();for(var me=!0,Ie=0;Ie<N.length;++Ie){var He=N[Ie];if(He&&!He.da&&He.capture==F){var dn=He.listener,zn=He.ha||He.src;He.fa&&bt(E.i,He),me=dn.call(zn,X)!==!1&&me}}return me&&!X.defaultPrevented}function Bn(E,N,F){if(typeof E=="function")F&&(E=A(E,F));else if(E&&typeof E.handleEvent=="function")E=A(E.handleEvent,E);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:h.setTimeout(E,N||0)}function Jr(E){E.g=Bn(()=>{E.g=null,E.i&&(E.i=!1,Jr(E))},E.l);const N=E.h;E.h=null,E.m.apply(null,N)}class Bi extends he{constructor(N,F){super(),this.m=N,this.l=F,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Jr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(E){he.call(this),this.h=E,this.g={}}M(vi,he);var In=[];function We(E){ie(E.g,function(N,F){this.g.hasOwnProperty(F)&&xi(N)},E),E.g={}}vi.prototype.N=function(){vi.aa.N.call(this),We(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=h.JSON.stringify,Ht=h.JSON.parse,pn=class{stringify(E){return h.JSON.stringify(E,void 0)}parse(E){return h.JSON.parse(E,void 0)}};function ai(){}ai.prototype.h=null;function jr(E){return E.h||(E.h=E.i())}function so(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){Se.call(this,"d")}M(br,Se);function Ls(){Se.call(this,"c")}M(Ls,Se);var mt={},Gt=null;function An(){return Gt=Gt||new Wt}mt.La="serverreachability";function $t(E){Se.call(this,mt.La,E)}M($t,Se);function Ir(E){const N=An();Yn(N,new $t(N))}mt.STAT_EVENT="statevent";function Cn(E,N){Se.call(this,mt.STAT_EVENT,E),this.stat=N}M(Cn,Se);function Rt(E){const N=An();Yn(N,new Cn(N,E))}mt.Ma="timingevent";function gs(E,N){Se.call(this,mt.Ma,E),this.size=N}M(gs,Se);function cn(E,N){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){E()},N)}function ir(){this.g=!0}ir.prototype.xa=function(){this.g=!1};function jn(E,N,F,X,me,Ie){E.info(function(){if(E.g)if(Ie)for(var He="",dn=Ie.split("&"),zn=0;zn<dn.length;zn++){var qt=dn[zn].split("=");if(1<qt.length){var Pn=qt[0];qt=qt[1];var Wn=Pn.split("_");He=2<=Wn.length&&Wn[1]=="type"?He+(Pn+"="+qt+"&"):He+(Pn+"=redacted&")}}else He=null;else He=Ie;return"XMLHTTP REQ ("+X+") [attempt "+me+"]: "+N+`
`+F+`
`+He})}function dr(E,N,F,X,me,Ie,He){E.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+me+"]: "+N+`
`+F+`
`+Ie+" "+He})}function Un(E,N,F,X){E.info(function(){return"XMLHTTP TEXT ("+N+"): "+Co(E,F)+(X?" "+X:"")})}function Ye(E,N){E.info(function(){return"TIMEOUT: "+N})}ir.prototype.info=function(){};function Co(E,N){if(!E.g)return N;if(!N)return null;try{var F=JSON.parse(N);if(F){for(E=0;E<F.length;E++)if(Array.isArray(F[E])){var X=F[E];if(!(2>X.length)){var me=X[1];if(Array.isArray(me)&&!(1>me.length)){var Ie=me[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var He=1;He<me.length;He++)me[He]=""}}}}return Tn(F)}catch{return N}}var So={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ei;function Vs(){}M(Vs,ai),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},ei=new Vs;function _i(E,N,F,X){this.j=E,this.i=N,this.l=F,this.R=X||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ji}function ji(){this.i=null,this.g="",this.h=!1}var ic={},Ka={};function li(E,N,F){E.L=1,E.v=Rn(Mt(N)),E.m=F,E.P=!0,Tr(E,null)}function Tr(E,N){E.F=Date.now(),Zt(E),E.A=Mt(E.v);var F=E.A,X=E.R;Array.isArray(X)||(X=[String(X)]),Nn(F.i,"t",X),E.C=0,F=E.j.J,E.h=new ji,E.g=Eu(E.j,F?N:null,!E.m),0<E.O&&(E.M=new Bi(A(E.Y,E,E.g),E.O)),N=E.U,F=E.g,X=E.ca;var me="readystatechange";Array.isArray(me)||(me&&(In[0]=me.toString()),me=In);for(var Ie=0;Ie<me.length;Ie++){var He=Dr(F,me[Ie],X||N.handleEvent,!1,N.h||N);if(!He)break;N.g[He.key]=He}N=E.H?B(E.H):{},E.m?(E.u||(E.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.A,E.u,E.m,N)):(E.u="GET",E.g.ea(E.A,E.u,null,N)),Ir(),jn(E.i,E.u,E.A,E.l,E.R,E.m)}_i.prototype.ca=function(E){E=E.target;const N=this.M;N&&Ti(E)==3?N.j():this.Y(E)},_i.prototype.Y=function(E){try{if(E==this.g)e:{const Wn=Ti(this.g);var N=this.g.Ba();const Hn=this.g.Z();if(!(3>Wn)&&(Wn!=3||this.g&&(this.h.h||this.g.oa()||ac(this.g)))){this.J||Wn!=4||N==7||(N==8||0>=Hn?Ir(3):Ir(2)),ke(this);var F=this.g.Z();this.X=F;t:if(yn(this)){var X=ac(this.g);E="";var me=X.length,Ie=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Ro(this);var He="";break t}this.h.i=new h.TextDecoder}for(N=0;N<me;N++)this.h.h=!0,E+=this.h.i.decode(X[N],{stream:!(Ie&&N==me-1)});X.length=0,this.h.g+=E,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=F==200,dr(this.i,this.u,this.A,this.l,this.R,Wn,F),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,zn=this.g;if((dn=zn.g?zn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(dn)){var qt=dn;break t}}qt=null}if(F=qt)Un(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fs(this,F);else{this.o=!1,this.s=3,Rt(12),Jt(this),Ro(this);break e}}if(this.P){F=!0;let Ai;for(;!this.J&&this.C<He.length;)if(Ai=xu(this,He),Ai==Ka){Wn==4&&(this.s=4,Rt(14),F=!1),Un(this.i,this.l,null,"[Incomplete Response]");break}else if(Ai==ic){this.s=4,Rt(15),Un(this.i,this.l,He,"[Invalid Chunk]"),F=!1;break}else Un(this.i,this.l,Ai,null),Fs(this,Ai);if(yn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wn!=4||He.length!=0||this.h.h||(this.s=1,Rt(16),F=!1),this.o=this.o&&F,!F)Un(this.i,this.l,He,"[Invalid Chunked Response]"),Jt(this),Ro(this);else if(0<He.length&&!this.W){this.W=!0;var Pn=this.j;Pn.g==this&&Pn.ba&&!Pn.M&&(Pn.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),ma(Pn),Pn.M=!0,Rt(11))}}else Un(this.i,this.l,He,null),Fs(this,He);Wn==4&&Jt(this),this.o&&!this.J&&(Wn==4?xn(this.j,this):(this.o=!1,Zt(this)))}else en(this.g),F==400&&0<He.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Jt(this),Ro(this)}}}catch{}finally{}};function yn(E){return E.g?E.u=="GET"&&E.L!=2&&E.j.Ca:!1}function xu(E,N){var F=E.C,X=N.indexOf(`
`,F);return X==-1?Ka:(F=Number(N.substring(F,X)),isNaN(F)?ic:(X+=1,X+F>N.length?Ka:(N=N.slice(X,X+F),E.C=X+F,N)))}_i.prototype.cancel=function(){this.J=!0,Jt(this)};function Zt(E){E.S=Date.now()+E.I,Xa(E,E.I)}function Xa(E,N){if(E.B!=null)throw Error("WatchDog timer not null");E.B=cn(A(E.ba,E),N)}function ke(E){E.B&&(h.clearTimeout(E.B),E.B=null)}_i.prototype.ba=function(){this.B=null;const E=Date.now();0<=E-this.S?(Ye(this.i,this.A),this.L!=2&&(Ir(),Rt(17)),Jt(this),this.s=2,Ro(this)):Xa(this,this.S-E)};function Ro(E){E.j.G==0||E.J||xn(E.j,E)}function Jt(E){ke(E);var N=E.M;N&&typeof N.ma=="function"&&N.ma(),E.M=null,We(E.U),E.g&&(N=E.g,E.g=null,N.abort(),N.ma())}function Fs(E,N){try{var F=E.j;if(F.G!=0&&(F.g==E||zr(F.h,E))){if(!E.K&&zr(F.h,E)&&F.G==3){try{var X=F.Da.g.parse(N)}catch{X=null}if(Array.isArray(X)&&X.length==3){var me=X;if(me[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<E.F)Oo(F),_s(F);else break e;tl(F),Rt(18)}}else F.za=me[1],0<F.za-F.T&&37500>me[2]&&F.F&&F.v==0&&!F.C&&(F.C=cn(A(F.Za,F),6e3));if(1>=Ot(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else ui(F,11)}else if((E.K||F.g==E)&&Oo(F),!z(N))for(me=F.Da.g.parse(N),N=0;N<me.length;N++){let qt=me[N];if(F.T=qt[0],qt=qt[1],F.G==2)if(qt[0]=="c"){F.K=qt[1],F.ia=qt[2];const Pn=qt[3];Pn!=null&&(F.la=Pn,F.j.info("VER="+F.la));const Wn=qt[4];Wn!=null&&(F.Aa=Wn,F.j.info("SVER="+F.Aa));const Hn=qt[5];Hn!=null&&typeof Hn=="number"&&0<Hn&&(X=1.5*Hn,F.L=X,F.j.info("backChannelRequestTimeoutMs_="+X)),X=F;const Ai=E.g;if(Ai){const ni=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var Ie=X.h;Ie.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(da(Ie,Ie.h),Ie.h=null))}if(X.D){const nl=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;nl&&(X.ya=nl,$e(X.I,X.D,nl))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-E.F,F.j.info("Handshake RTT: "+F.R+"ms")),X=F;var He=E;if(X.qa=ft(X,X.J?X.ia:null,X.W),He.K){Ya(X.h,He);var dn=He,zn=X.L;zn&&(dn.I=zn),dn.B&&(ke(dn),Zt(dn)),X.g=He}else pa(X);0<F.i.length&&_t(F)}else qt[0]!="stop"&&qt[0]!="close"||ui(F,7);else F.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?ui(F,7):Dn(F):qt[0]!="noop"&&F.l&&F.l.ta(qt),F.v=0)}}Ir(4)}catch{}}var wu=class{constructor(E,N){this.g=E,this.map=N}};function jt(E){this.l=E||10,h.PerformanceNavigationTiming?(E=h.performance.getEntriesByType("navigation"),E=0<E.length&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Ot(E){return E.h?1:E.g?E.g.size:0}function zr(E,N){return E.h?E.h==N:E.g?E.g.has(N):!1}function da(E,N){E.g?E.g.add(N):E.h=N}function Ya(E,N){E.h&&E.h==N?E.h=null:E.g&&E.g.has(N)&&E.g.delete(N)}jt.prototype.cancel=function(){if(this.i=Qn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function Qn(E){if(E.h!=null)return E.i.concat(E.h.D);if(E.g!=null&&E.g.size!==0){let N=E.i;for(const F of E.g.values())N=N.concat(F.D);return N}return D(E.i)}function Ui(E){if(E.V&&typeof E.V=="function")return E.V();if(typeof Map<"u"&&E instanceof Map||typeof Set<"u"&&E instanceof Set)return Array.from(E.values());if(typeof E=="string")return E.split("");if(m(E)){for(var N=[],F=E.length,X=0;X<F;X++)N.push(E[X]);return N}N=[],F=0;for(X in E)N[F++]=E[X];return N}function Qa(E){if(E.na&&typeof E.na=="function")return E.na();if(!E.V||typeof E.V!="function"){if(typeof Map<"u"&&E instanceof Map)return Array.from(E.keys());if(!(typeof Set<"u"&&E instanceof Set)){if(m(E)||typeof E=="string"){var N=[];E=E.length;for(var F=0;F<E;F++)N.push(F);return N}N=[],F=0;for(const X in E)N[F++]=X;return N}}}function mn(E,N){if(E.forEach&&typeof E.forEach=="function")E.forEach(N,void 0);else if(m(E)||typeof E=="string")Array.prototype.forEach.call(E,N,void 0);else for(var F=Qa(E),X=Ui(E),me=X.length,Ie=0;Ie<me;Ie++)N.call(void 0,X[Ie],F&&F[Ie],E)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sh(E,N){if(E){E=E.split("&");for(var F=0;F<E.length;F++){var X=E[F].indexOf("="),me=null;if(0<=X){var Ie=E[F].substring(0,X);me=E[F].substring(X+1)}else Ie=E[F];N(Ie,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function bi(E){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,E instanceof bi){this.h=E.h,Zn(this,E.j),this.o=E.o,this.g=E.g,pe(this,E.s),this.l=E.l;var N=E.i,F=new Zi;F.i=N.i,N.g&&(F.g=new Map(N.g),F.h=N.h),Q(this,F),this.m=E.m}else E&&(N=String(E).match(Ei))?(this.h=!1,Zn(this,N[1]||"",!0),this.o=It(N[2]||""),this.g=It(N[3]||"",!0),pe(this,N[4]),this.l=It(N[5]||"",!0),Q(this,N[6]||"",!0),this.m=It(N[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}bi.prototype.toString=function(){var E=[],N=this.j;N&&E.push(No(N,Wr,!0),":");var F=this.g;return(F||N=="file")&&(E.push("//"),(N=this.o)&&E.push(No(N,Wr,!0),"@"),E.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&E.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&E.push("/"),E.push(No(F,F.charAt(0)=="/"?Sn:ut,!0))),(F=this.i.toString())&&E.push("?",F),(F=this.m)&&E.push("#",No(F,oc)),E.join("")};function Mt(E){return new bi(E)}function Zn(E,N,F){E.j=F?It(N,!0):N,E.j&&(E.j=E.j.replace(/:$/,""))}function pe(E,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);E.s=N}else E.s=null}function Q(E,N,F){N instanceof Zi?(E.i=N,Hr(E.i,E.h)):(F||(N=No(N,sc)),E.i=new Zi(N,E.h))}function $e(E,N,F){E.i.set(N,F)}function Rn(E){return $e(E,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),E}function It(E,N){return E?N?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function No(E,N,F){return typeof E=="string"?(E=encodeURI(E).replace(N,Za),F&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function Za(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var Wr=/[#\/\?@]/g,ut=/[#\?:]/g,Sn=/[#\?]/g,sc=/[#\?@]/g,oc=/#/g;function Zi(E,N){this.h=this.g=null,this.i=E||null,this.j=!!N}function hr(E){E.g||(E.g=new Map,E.h=0,E.i&&sh(E.i,function(N,F){E.add(decodeURIComponent(N.replace(/\+/g," ")),F)}))}n=Zi.prototype,n.add=function(E,N){hr(this),this.i=null,E=ti(this,E);var F=this.g.get(E);return F||this.g.set(E,F=[]),F.push(N),this.h+=1,this};function zi(E,N){hr(E),N=ti(E,N),E.g.has(N)&&(E.i=null,E.h-=E.g.get(N).length,E.g.delete(N))}function ys(E,N){return hr(E),N=ti(E,N),E.g.has(N)}n.forEach=function(E,N){hr(this),this.g.forEach(function(F,X){F.forEach(function(me){E.call(N,me,X,this)},this)},this)},n.na=function(){hr(this);const E=Array.from(this.g.values()),N=Array.from(this.g.keys()),F=[];for(let X=0;X<N.length;X++){const me=E[X];for(let Ie=0;Ie<me.length;Ie++)F.push(N[X])}return F},n.V=function(E){hr(this);let N=[];if(typeof E=="string")ys(this,E)&&(N=N.concat(this.g.get(ti(this,E))));else{E=Array.from(this.g.values());for(let F=0;F<E.length;F++)N=N.concat(E[F])}return N},n.set=function(E,N){return hr(this),this.i=null,E=ti(this,E),ys(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[N]),this.h+=1,this},n.get=function(E,N){return E?(E=this.V(E),0<E.length?String(E[0]):N):N};function Nn(E,N,F){zi(E,N),0<F.length&&(E.i=null,E.g.set(ti(E,N),D(F)),E.h+=F.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],N=Array.from(this.g.keys());for(var F=0;F<N.length;F++){var X=N[F];const Ie=encodeURIComponent(String(X)),He=this.V(X);for(X=0;X<He.length;X++){var me=Ie;He[X]!==""&&(me+="="+encodeURIComponent(String(He[X]))),E.push(me)}}return this.i=E.join("&")};function ti(E,N){return N=String(N),E.j&&(N=N.toLowerCase()),N}function Hr(E,N){N&&!E.j&&(hr(E),E.i=null,E.g.forEach(function(F,X){var me=X.toLowerCase();X!=me&&(zi(this,X),Nn(this,me,F))},E)),E.j=N}function xt(E,N){const F=new ir;if(h.Image){const X=new Image;X.onload=R(gt,F,"TestLoadImage: loaded",!0,N,X),X.onerror=R(gt,F,"TestLoadImage: error",!1,N,X),X.onabort=R(gt,F,"TestLoadImage: abort",!1,N,X),X.ontimeout=R(gt,F,"TestLoadImage: timeout",!1,N,X),h.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=E}else N(!1)}function vu(E,N){const F=new ir,X=new AbortController,me=setTimeout(()=>{X.abort(),gt(F,"TestPingServer: timeout",!1,N)},1e4);fetch(E,{signal:X.signal}).then(Ie=>{clearTimeout(me),Ie.ok?gt(F,"TestPingServer: ok",!0,N):gt(F,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(me),gt(F,"TestPingServer: error",!1,N)})}function gt(E,N,F,X,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),X(F)}catch{}}function Ar(){this.g=new pn}function _u(E,N,F){const X=F||"";try{mn(E,function(me,Ie){let He=me;g(me)&&(He=Tn(me)),N.push(X+Ie+"="+encodeURIComponent(He))})}catch(me){throw N.push(X+"type="+encodeURIComponent("_badmap")),me}}function xs(E){this.l=E.Ub||null,this.j=E.eb||!1}M(xs,ai),xs.prototype.g=function(){return new ko(this.l,this.j)},xs.prototype.i=function(E){return function(){return E}}({});function ko(E,N){Wt.call(this),this.D=E,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ko,Wt),n=ko.prototype,n.open=function(E,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=E,this.A=N,this.readyState=1,ci(this)},n.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};E&&(N.body=E),(this.D||h).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},n.Sa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bs(this)}else E.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bs(E){E.j.read().then(E.Pa.bind(E)).catch(E.ga.bind(E))}n.Pa=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var N=E.value?E.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!E.done}))&&(this.response=this.responseText+=N)}E.done?ws(this):ci(this),this.readyState==3&&Bs(this)}},n.Ra=function(E){this.g&&(this.response=this.responseText=E,ws(this))},n.Qa=function(E){this.g&&(this.response=E,ws(this))},n.ga=function(){this.g&&ws(this)};function ws(E){E.readyState=4,E.l=null,E.j=null,E.v=null,ci(E)}n.setRequestHeader=function(E,N){this.u.append(E,N)},n.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],N=this.h.entries();for(var F=N.next();!F.done;)F=F.value,E.push(F[0]+": "+F[1]),F=N.next();return E.join(`\r
`)};function ci(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(ko.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function Wi(E){let N="";return ie(E,function(F,X){N+=X,N+=":",N+=F,N+=`\r
`}),N}function Ji(E,N,F){e:{for(X in F){var X=!1;break e}X=!0}X||(F=Wi(F),typeof E=="string"?F!=null&&encodeURIComponent(String(F)):$e(E,N,F))}function kn(E){Wt.call(this),this.headers=new Map,this.o=E||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(kn,Wt);var ha=/^https?$/i,oo=["POST","PUT"];n=kn.prototype,n.Ha=function(E){this.J=E},n.ea=function(E,N,F,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);N=N?N.toUpperCase():"GET",this.D=E,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ei.g(),this.v=this.o?jr(this.o):jr(ei),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(N,String(E),!0),this.B=!1}catch(Ie){fr(this,Ie);return}if(E=F||"",F=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var me in X)F.set(me,X[me]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ie of X.keys())F.set(Ie,X.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(F.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),me=h.FormData&&E instanceof h.FormData,!(0<=Array.prototype.indexOf.call(oo,N,void 0))||X||me||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,He]of F)this.g.setRequestHeader(Ie,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{el(this),this.u=!0,this.g.send(E),this.u=!1}catch(Ie){fr(this,Ie)}};function fr(E,N){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=N,E.m=5,fa(E),Ii(E)}function fa(E){E.A||(E.A=!0,Yn(E,"complete"),Yn(E,"error"))}n.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=E||7,Yn(this,"complete"),Yn(this,"abort"),Ii(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ja(this):this.bb())},n.bb=function(){Ja(this)};function Ja(E){if(E.h&&typeof c<"u"&&(!E.v[1]||Ti(E)!=4||E.Z()!=2)){if(E.u&&Ti(E)==4)Bn(E.Ea,0,E);else if(Yn(E,"readystatechange"),Ti(E)==4){E.h=!1;try{const He=E.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var F;if(!(F=N)){var X;if(X=He===0){var me=String(E.D).match(Ei)[1]||null;!me&&h.self&&h.self.location&&(me=h.self.location.protocol.slice(0,-1)),X=!ha.test(me?me.toLowerCase():"")}F=X}if(F)Yn(E,"complete"),Yn(E,"success");else{E.m=6;try{var Ie=2<Ti(E)?E.g.statusText:""}catch{Ie=""}E.l=Ie+" ["+E.Z()+"]",fa(E)}}finally{Ii(E)}}}}function Ii(E,N){if(E.g){el(E);const F=E.g,X=E.v[0]?()=>{}:null;E.g=null,E.v=null,N||Yn(E,"ready");try{F.onreadystatechange=X}catch{}}}function el(E){E.I&&(h.clearTimeout(E.I),E.I=null)}n.isActive=function(){return!!this.g};function Ti(E){return E.g?E.g.readyState:0}n.Z=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(E){if(this.g){var N=this.g.responseText;return E&&N.indexOf(E)==0&&(N=N.substring(E.length)),Ht(N)}};function ac(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.H){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function en(E){const N={};E=(E.g&&2<=Ti(E)&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<E.length;X++){if(z(E[X]))continue;var F=te(E[X]);const me=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const Ie=N[me]||[];N[me]=Ie,Ie.push(F)}V(N,function(X){return X.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(E,N,F){return F&&F.internalChannelParams&&F.internalChannelParams[E]||N}function Po(E){this.Aa=0,this.i=[],this.j=new ir,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,E),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,E),this.cb=vs("retryDelaySeedMs",1e4,E),this.Wa=vs("forwardChannelMaxRetries",2,E),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,E),this.pa=E&&E.xmlHttpFactory||void 0,this.Xa=E&&E.Tb||void 0,this.Ca=E&&E.useFetchStreams||!1,this.L=void 0,this.J=E&&E.supportsCrossDomainXhr||!1,this.K="",this.h=new jt(E&&E.concurrentRequestLimit),this.Da=new Ar,this.P=E&&E.fastHandshake||!1,this.O=E&&E.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=E&&E.Rb||!1,E&&E.xa&&this.j.xa(),E&&E.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&E&&E.detectBufferingProxy||!1,this.ja=void 0,E&&E.longPollingTimeout&&0<E.longPollingTimeout&&(this.ja=E.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Po.prototype,n.la=8,n.G=1,n.connect=function(E,N,F,X){Rt(0),this.W=E,this.H=N||{},F&&X!==void 0&&(this.H.OSID=F,this.H.OAID=X),this.F=this.X,this.I=ft(this,null,this.W),_t(this)};function Dn(E){if(_e(E),E.G==3){var N=E.U++,F=Mt(E.I);if($e(F,"SID",E.K),$e(F,"RID",N),$e(F,"TYPE","terminate"),js(E,F),N=new _i(E,E.j,N),N.L=2,N.v=Rn(Mt(F)),F=!1,h.navigator&&h.navigator.sendBeacon)try{F=h.navigator.sendBeacon(N.v.toString(),"")}catch{}!F&&h.Image&&(new Image().src=N.v,F=!0),F||(N.g=Eu(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Zt(N)}sn(E)}function _s(E){E.g&&(ma(E),E.g.cancel(),E.g=null)}function _e(E){_s(E),E.u&&(h.clearTimeout(E.u),E.u=null),Oo(E),E.h.cancel(),E.s&&(typeof E.s=="number"&&h.clearTimeout(E.s),E.s=null)}function _t(E){if(!Nt(E.h)&&!E.s){E.s=!0;var N=E.Ga;xe||Ne(),oe||(xe(),oe=!0),Ae.add(N,E),E.B=0}}function Cr(E,N){return Ot(E.h)>=E.h.j-(E.s?1:0)?!1:E.s?(E.i=N.D.concat(E.i),!0):E.G==1||E.G==2||E.B>=(E.Va?0:E.Wa)?!1:(E.s=cn(A(E.Ga,E,N),ga(E,E.B)),E.B++,!0)}n.Ga=function(E){if(this.s)if(this.s=null,this.G==1){if(!E){this.U=Math.floor(1e5*Math.random()),E=this.U++;const me=new _i(this,this.j,E);let Ie=this.o;if(this.S&&(Ie?(Ie=B(Ie),Z(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(me.H=Ie,Ie=null),this.P)e:{for(var N=0,F=0;F<this.i.length;F++){t:{var X=this.i[F];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(N+=X,4096<N){N=F;break e}if(N===4096||F===this.i.length-1){N=F+1;break e}}N=1e3}else N=1e3;N=Do(this,me,N),F=Mt(this.I),$e(F,"RID",E),$e(F,"CVER",22),this.D&&$e(F,"X-HTTP-Session-Id",this.D),js(this,F),Ie&&(this.O?N="headers="+encodeURIComponent(String(Wi(Ie)))+"&"+N:this.m&&Ji(F,this.m,Ie)),da(this.h,me),this.Ua&&$e(F,"TYPE","init"),this.P?($e(F,"$req",N),$e(F,"SID","null"),me.T=!0,li(me,F,null)):li(me,F,N),this.G=2}}else this.G==3&&(E?ao(this,E):this.i.length==0||Nt(this.h)||ao(this))};function ao(E,N){var F;N?F=N.l:F=E.U++;const X=Mt(E.I);$e(X,"SID",E.K),$e(X,"RID",F),$e(X,"AID",E.T),js(E,X),E.m&&E.o&&Ji(X,E.m,E.o),F=new _i(E,E.j,F,E.B+1),E.m===null&&(F.H=E.o),N&&(E.i=N.D.concat(E.i)),N=Do(E,F,1e3),F.I=Math.round(.5*E.wa)+Math.round(.5*E.wa*Math.random()),da(E.h,F),li(F,X,N)}function js(E,N){E.H&&ie(E.H,function(F,X){$e(N,X,F)}),E.l&&mn({},function(F,X){$e(N,X,F)})}function Do(E,N,F){F=Math.min(E.i.length,F);var X=E.l?A(E.l.Na,E.l,E):null;e:{var me=E.i;let Ie=-1;for(;;){const He=["count="+F];Ie==-1?0<F?(Ie=me[0].g,He.push("ofs="+Ie)):Ie=0:He.push("ofs="+Ie);let dn=!0;for(let zn=0;zn<F;zn++){let qt=me[zn].g;const Pn=me[zn].map;if(qt-=Ie,0>qt)Ie=Math.max(0,me[zn].g-100),dn=!1;else try{_u(Pn,He,"req"+qt+"_")}catch{X&&X(Pn)}}if(dn){X=He.join("&");break e}}}return E=E.i.splice(0,F),N.D=E,X}function pa(E){if(!E.g&&!E.u){E.Y=1;var N=E.Fa;xe||Ne(),oe||(xe(),oe=!0),Ae.add(N,E),E.v=0}}function tl(E){return E.g||E.u||3<=E.v?!1:(E.Y++,E.u=cn(A(E.Fa,E),ga(E,E.v)),E.v++,!0)}n.Fa=function(){if(this.u=null,Jn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var E=2*this.R;this.j.info("BP detection timer enabled: "+E),this.A=cn(A(this.ab,this),E)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),_s(this),Jn(this))};function ma(E){E.A!=null&&(h.clearTimeout(E.A),E.A=null)}function Jn(E){E.g=new _i(E,E.j,"rpc",E.Y),E.m===null&&(E.g.H=E.o),E.g.O=0;var N=Mt(E.qa);$e(N,"RID","rpc"),$e(N,"SID",E.K),$e(N,"AID",E.T),$e(N,"CI",E.F?"0":"1"),!E.F&&E.ja&&$e(N,"TO",E.ja),$e(N,"TYPE","xmlhttp"),js(E,N),E.m&&E.o&&Ji(N,E.m,E.o),E.L&&(E.g.I=E.L);var F=E.g;E=E.ia,F.L=1,F.v=Rn(Mt(N)),F.m=null,F.P=!0,Tr(F,E)}n.Za=function(){this.C!=null&&(this.C=null,_s(this),tl(this),Rt(19))};function Oo(E){E.C!=null&&(h.clearTimeout(E.C),E.C=null)}function xn(E,N){var F=null;if(E.g==N){Oo(E),ma(E),E.g=null;var X=2}else if(zr(E.h,N))F=N.D,Ya(E.h,N),X=1;else return;if(E.G!=0){if(N.o)if(X==1){F=N.m?N.m.length:0,N=Date.now()-N.F;var me=E.B;X=An(),Yn(X,new gs(X,F)),_t(E)}else pa(E);else if(me=N.s,me==3||me==0&&0<N.X||!(X==1&&Cr(E,N)||X==2&&tl(E)))switch(F&&0<F.length&&(N=E.h,N.i=N.i.concat(F)),me){case 1:ui(E,5);break;case 4:ui(E,10);break;case 3:ui(E,6);break;default:ui(E,2)}}}function ga(E,N){let F=E.Ta+Math.floor(Math.random()*E.cb);return E.isActive()||(F*=2),F*N}function ui(E,N){if(E.j.info("Error code "+N),N==2){var F=A(E.fb,E),X=E.Xa;const me=!X;X=new bi(X||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Zn(X,"https"),Rn(X),me?xt(X.toString(),F):vu(X.toString(),F)}else Rt(2);E.G=0,E.l&&E.l.sa(N),sn(E),_e(E)}n.fb=function(E){E?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function sn(E){if(E.G=0,E.ka=[],E.l){const N=Qn(E.h);(N.length!=0||E.i.length!=0)&&(L(E.ka,N),L(E.ka,E.i),E.h.i.length=0,D(E.i),E.i.length=0),E.l.ra()}}function ft(E,N,F){var X=F instanceof bi?Mt(F):new bi(F);if(X.g!="")N&&(X.g=N+"."+X.g),pe(X,X.s);else{var me=h.location;X=me.protocol,N=N?N+"."+me.hostname:me.hostname,me=+me.port;var Ie=new bi(null);X&&Zn(Ie,X),N&&(Ie.g=N),me&&pe(Ie,me),F&&(Ie.l=F),X=Ie}return F=E.D,N=E.ya,F&&N&&$e(X,F,N),$e(X,"VER",E.la),js(E,X),X}function Eu(E,N,F){if(N&&!E.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=E.Ca&&!E.pa?new kn(new xs({eb:F})):new kn(E.pa),N.Ha(E.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function un(){}n=un.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function es(){}es.prototype.g=function(E,N){return new pr(E,N)};function pr(E,N){Wt.call(this),this.g=new Po(N),this.l=E,this.h=N&&N.messageUrlParams||null,E=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(E?E["X-WebChannel-Content-Type"]=N.messageContentType:E={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(E?E["X-WebChannel-Client-Profile"]=N.va:E={"X-WebChannel-Client-Profile":N.va}),this.g.S=E,(E=N&&N.Sb)&&!z(E)&&(this.g.m=E),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!z(N)&&(this.g.D=N,E=this.h,E!==null&&N in E&&(E=this.h,N in E&&delete E[N])),this.j=new ts(this)}M(pr,Wt),pr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pr.prototype.close=function(){Dn(this.g)},pr.prototype.o=function(E){var N=this.g;if(typeof E=="string"){var F={};F.__data__=E,E=F}else this.u&&(F={},F.__data__=Tn(E),E=F);N.i.push(new wu(N.Ya++,E)),N.G==3&&_t(N)},pr.prototype.N=function(){this.g.l=null,delete this.j,Dn(this.g),delete this.g,pr.aa.N.call(this)};function bu(E){br.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var N=E.__sm__;if(N){e:{for(const F in N){E=F;break e}E=void 0}(this.i=E)&&(E=this.i,N=N!==null&&E in N?N[E]:void 0),this.data=N}else this.data=E}M(bu,br);function Hi(){Ls.call(this),this.status=1}M(Hi,Ls);function ts(E){this.g=E}M(ts,un),ts.prototype.ua=function(){Yn(this.g,"a")},ts.prototype.ta=function(E){Yn(this.g,new bu(E))},ts.prototype.sa=function(E){Yn(this.g,new Hi)},ts.prototype.ra=function(){Yn(this.g,"b")},es.prototype.createWebChannel=es.prototype.g,pr.prototype.send=pr.prototype.o,pr.prototype.open=pr.prototype.m,pr.prototype.close=pr.prototype.close,HR=function(){return new es},WR=function(){return An()},zR=mt,jx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},So.NO_ERROR=0,So.TIMEOUT=8,So.HTTP_ERROR=6,Wm=So,Ur.COMPLETE="complete",UR=Ur,so.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,zh=so,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,jR=kn}).apply(typeof pm<"u"?pm:typeof self<"u"?self:typeof window<"u"?window:{});const xI="@firebase/firestore",wI="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new og("@firebase/firestore");function ed(){return Yc.logLevel}function Be(n,...e){if(Yc.logLevel<=Xt.DEBUG){const t=e.map(Tv);Yc.debug(`Firestore (${Hd}): ${n}`,...t)}}function Ki(n,...e){if(Yc.logLevel<=Xt.ERROR){const t=e.map(Tv);Yc.error(`Firestore (${Hd}): ${n}`,...t)}}function Qc(n,...e){if(Yc.logLevel<=Xt.WARN){const t=e.map(Tv);Yc.warn(`Firestore (${Hd}): ${n}`,...t)}}function Tv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,GR(n,r,t)}function GR(n,e,t){let r=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ki(r),new Error(r)}function dt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||GR(e,i,r)}function Pt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends ro{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class VV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FV{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let o=new Xo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xo,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await i(this.currentUser)})},h=m=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new $R(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new gi(e)}}class BV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new BV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function Ux(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Ly(i)===Ly(o)?kt(i,o):Ly(i)?1:-1}return kt(n.length,e.length)}const WV=55296,HV=57343;function Ly(n){const e=n.charCodeAt(0);return e>=WV&&e<=HV}function Ed(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function qR(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="__name__";class Uo{constructor(e,t,r){t===void 0?t=0:t>e.length&&rt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&rt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Uo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uo?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Uo.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return kt(e.length,t.length)}static compareSegments(e,t){const r=Uo.isNumericId(e),i=Uo.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Uo.extractNumericId(e).compare(Uo.extractNumericId(t)):Ux(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ml.fromString(e.substring(4,e.length-2))}}class fn extends Uo{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const GV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Uo{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return GV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_I}static keyField(){return new lr([_I])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new qe(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new qe(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else h==="`"?(c=!c,i++):h!=="."||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new qe(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(fn.fromString(e))}static fromName(e){return new Ke(fn.fromString(e).popFirst(5))}static empty(){return new Ke(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new fn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n,e,t){if(!t)throw new qe(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $V(n,e,t,r){if(e===!0&&r===!0)throw new qe(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EI(n){if(!Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bI(n){if(Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":rt(12329,{type:typeof n})}function Ps(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new qe(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dg(n);throw new qe(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,e){const t={typeString:n};return e&&(t.value=e),t}function np(n,e){if(!XR(n))throw new qe(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new qe(Ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=-62135596800,TI=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*TI);return new vn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<II)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/TI}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(np(e,vn._jsonSchema))return new vn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-II;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vn._jsonSchemaVersion="firestore/timestamp/1.0",vn._jsonSchema={type:Fr("string",vn._jsonSchemaVersion),seconds:Fr("number"),nanoseconds:Fr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new vn(0,0))}static max(){return new yt(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=-1;class v0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function zx(n){return n.fields.find(e=>e.kind===2)}function Cc(n){return n.fields.filter(e=>e.kind!==2)}v0.UNKNOWN_ID=-1;class Hm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ef{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ef(0,Ms.min())}}function qV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(r===1e9?new vn(t+1,0):new vn(t,r));return new Ms(i,Ke.empty(),e)}function YR(n){return new Ms(n.readTime,n.key,_f)}class Ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ms(yt.min(),Ke.empty(),_f)}static max(){return new Ms(yt.max(),Ke.empty(),_f)}}function Cv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ke.comparator(n.documentKey,e.documentKey),t!==0?t:kt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(n){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==QR)throw n;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},m=>r(m))}),c=!0,o===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ge((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let m=0;m<o;m++){const g=m;t(e[g]).next(w=>{c[g]=w,++h,h===o&&r(c)},w=>i(w))}})}static doWhile(e,t){return new ge((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="SimpleDb";class hg{static open(e,t,r,i){try{return new hg(t,e.transaction(i,r))}catch(o){throw new Jh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Xo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Jh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Sv(r.target.error);this.S.reject(new Jh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Be(Cs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XV(t)}}class Ll{static delete(e){return Be(Cs,"Removing database:",e),kc(WS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!mv())return!1;if(Ll.F())return!0;const e=Yr(),t=Ll.M(e),r=0<t&&t<10,i=JR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ll.M(Yr())===12.2&&Ki("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Be(Cs,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const c=o.target.result;t(c)},i.onblocked=()=>{r(new Jh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new qe(Ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new qe(Ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Jh(e,c))},i.onupgradeneeded=o=>{Be(Cs,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,i.transaction,o.oldVersion,this.version).next(()=>{Be(Cs,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const h=hg.open(this.db,e,o?"readonly":"readwrite",r),m=i(h).next(g=>(h.C(),g)).catch(g=>(h.abort(g),ge.reject(g))).toPromise();return m.catch(()=>{}),await h.D,m}catch(h){const m=h,g=m.name!=="FirebaseError"&&c<3;if(Be(Cs,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function JR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class KV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return kc(this.U.delete())}}class Jh extends qe{constructor(e,t){super(Ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zl(n){return n.name==="IndexedDbTransactionError"}class XV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Be(Cs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be(Cs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kc(r)}add(e){return Be(Cs,"ADD",this.store.name,e,e),kc(this.store.add(e))}get(e){return kc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Be(Cs,"GET",this.store.name,e,t),t))}delete(e){return Be(Cs,"DELETE",this.store.name,e),kc(this.store.delete(e))}count(){return Be(Cs,"COUNT",this.store.name),kc(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ge((c,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{c(m.target.result)}})}{const o=this.cursor(r),c=[];return this.H(o,(h,m)=>{c.push(m)}).next(()=>c)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ge((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Z(e,t){Be(Cs,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,c,h)=>h.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=o=>{const c=Sv(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ge((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const m=new KV(h),g=t(h.primaryKey,h.value,m);if(g instanceof ge){const w=g.catch(_=>(m.done(),ge.reject(_)));r.push(w)}m.isDone?i():m.G===null?h.continue():h.continue(m.G)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function kc(n){return new ge((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Sv(r.target.error);t(i)}})}let AI=!1;function Sv(n){const e=Ll.M(Yr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AI||(AI=!0,setTimeout(()=>{throw r},0)),r}}return n}const ef="IndexBackfiller";class YV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Be(ef,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();Be(ef,`Documents written: ${t}`)}catch(t){Zl(t)?Be(ef,"Ignoring IndexedDB error during index backfill: ",t):await gu(t)}await this.re(6e4)})}}class QV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let i=t,o=!0;return ge.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Be(ef,`Processing collection: ${c}`),this.oe(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this._e(i,o)).next(h=>(Be(ef,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=YR(o);Cv(c,r)>0&&(r=c)}),new Ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qs.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=-1;function fg(n){return n==null}function bf(n){return n===0&&1/n==-1/0}function ZV(n){return typeof n=="number"&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="";function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CI(e)),e=JV(n.get(t),e);return CI(e)}function JV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case _0:t+="";break;default:t+=o}}return t}function CI(n){return n+_0+""}function Wo(n){const e=n.length;if(dt(e>=2,64408,{path:n}),e===2)return dt(n.charAt(0)===_0&&n.charAt(1)==="",56145,{path:n}),fn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf(_0,o);switch((c<0||c>t)&&rt(50515,{path:n}),n.charAt(c+1)){case"":const h=n.substring(o,c);let m;i.length===0?m=h:(i+=h,m=i,i=""),r.push(m);break;case"":i+=n.substring(o,c),i+="\0";break;case"":i+=n.substring(o,c+1);break;default:rt(61167,{path:n})}o=c+2}return new fn(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="remoteDocuments",rp="owner",Wu="owner",If="mutationQueues",eF="userId",xo="mutations",SI="batchId",Mc="userMutationsIndex",RI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(n,e){return[n,Vi(e)]}function eN(n,e,t){return[n,Vi(e),t]}const tF={},bd="documentMutations",E0="remoteDocumentsV14",nF=["prefixPath","collectionGroup","readTime","documentId"],$m="documentKeyIndex",rF=["prefixPath","collectionGroup","documentId"],tN="collectionGroupIndex",iF=["collectionGroup","readTime","prefixPath","documentId"],Tf="remoteDocumentGlobal",Wx="remoteDocumentGlobalKey",Id="targets",nN="queryTargetsIndex",sF=["canonicalId","targetId"],Td="targetDocuments",oF=["targetId","path"],Rv="documentTargetsIndex",aF=["path","targetId"],b0="targetGlobalKey",Uc="targetGlobal",Af="collectionParents",lF=["collectionId","parent"],Ad="clientMetadata",cF="clientId",pg="bundles",uF="bundleId",mg="namedQueries",dF="name",Nv="indexConfiguration",hF="indexId",Hx="collectionGroupIndex",fF="collectionGroup",tf="indexState",pF=["indexId","uid"],rN="sequenceNumberIndex",mF=["uid","sequenceNumber"],nf="indexEntries",gF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iN="documentKeyIndex",yF=["indexId","uid","orderedDocumentKey"],gg="documentOverlays",xF=["userId","collectionPath","documentId"],Gx="collectionPathOverlayIndex",wF=["userId","collectionPath","largestBatchId"],sN="collectionGroupOverlayIndex",vF=["userId","collectionGroup","largestBatchId"],kv="globals",_F="name",oN=[If,xo,bd,Sc,Id,rp,Uc,Td,Ad,Tf,Af,pg,mg],EF=[...oN,gg],aN=[If,xo,bd,E0,Id,rp,Uc,Td,Ad,Tf,Af,pg,mg,gg],lN=aN,Pv=[...lN,Nv,tf,nf],bF=Pv,cN=[...Pv,kv],IF=cN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends ZR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Qr(n,e){const t=Pt(n);return Ll.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mm(this.root,e,this.comparator,!0)}}class mm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??yi.RED,this.left=i??yi.EMPTY,this.right=o??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new yi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1;yi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kI(this.data.getIterator())}getIteratorFrom(e){return new kI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class kI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new ds([])}unionWith(e){let t=new En(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ed(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dN("Invalid base64 string: "+o):o}}(e);return new Br(t)}static fromUint8Array(e){const t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const TF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Va(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const t=TF.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fa(n){return typeof n=="string"?Br.fromBase64String(n):Br.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="server_timestamp",fN="__type__",pN="__previous_value__",mN="__local_write_time__";function Dv(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[fN])==null?void 0:r.stringValue)===hN}function yg(n){const e=n.mapValue.fields[pN];return Dv(e)?yg(e):e}function Cf(n){const e=Va(n.mapValue.fields[mN].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,t,r,i,o,c,h,m,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=w}}const I0="(default)";class Zc{constructor(e,t){this.projectId=e,this.database=t||I0}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===I0}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__type__",gN="__max__",Pl={mapValue:{fields:{__type__:{stringValue:gN}}}},Mv="__vector__",Cd="value",qm={nullValue:"NULL_VALUE"};function jl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dv(n)?4:yN(n)?9007199254740991:xg(n)?10:11:rt(28295,{value:n})}function sa(n,e){if(n===e)return!0;const t=jl(n);if(t!==jl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cf(n).isEqual(Cf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Va(i.timestampValue),h=Va(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Fa(i.bytesValue).isEqual(Fa(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return tr(i.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tr(i.integerValue)===tr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=tr(i.doubleValue),h=tr(o.doubleValue);return c===h?bf(c)===bf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Ed(n.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},h=o.mapValue.fields||{};if(NI(c)!==NI(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!sa(c[m],h[m])))return!1;return!0}(n,e);default:return rt(52216,{left:n})}}function Sf(n,e){return(n.values||[]).find(t=>sa(t,e))!==void 0}function Ul(n,e){if(n===e)return 0;const t=jl(n),r=jl(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=tr(o.integerValue||o.doubleValue),m=tr(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return PI(n.timestampValue,e.timestampValue);case 4:return PI(Cf(n),Cf(e));case 5:return Ux(n.stringValue,e.stringValue);case 6:return function(o,c){const h=Fa(o),m=Fa(c);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),m=c.split("/");for(let g=0;g<h.length&&g<m.length;g++){const w=kt(h[g],m[g]);if(w!==0)return w}return kt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=kt(tr(o.latitude),tr(c.latitude));return h!==0?h:kt(tr(o.longitude),tr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return DI(n.arrayValue,e.arrayValue);case 10:return function(o,c){var A,R,M,D;const h=o.fields||{},m=c.fields||{},g=(A=h[Cd])==null?void 0:A.arrayValue,w=(R=m[Cd])==null?void 0:R.arrayValue,_=kt(((M=g==null?void 0:g.values)==null?void 0:M.length)||0,((D=w==null?void 0:w.values)==null?void 0:D.length)||0);return _!==0?_:DI(g,w)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Pl.mapValue&&c===Pl.mapValue)return 0;if(o===Pl.mapValue)return 1;if(c===Pl.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),g=c.fields||{},w=Object.keys(g);m.sort(),w.sort();for(let _=0;_<m.length&&_<w.length;++_){const A=Ux(m[_],w[_]);if(A!==0)return A;const R=Ul(h[m[_]],g[w[_]]);if(R!==0)return R}return kt(m.length,w.length)}(n.mapValue,e.mapValue);default:throw rt(23264,{he:t})}}function PI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kt(n,e);const t=Va(n),r=Va(e),i=kt(t.seconds,r.seconds);return i!==0?i:kt(t.nanos,r.nanos)}function DI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ul(t[i],r[i]);if(o)return o}return kt(t.length,r.length)}function Sd(n){return qx(n)}function qx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Va(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fa(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ke.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=qx(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${qx(t.fields[c])}`;return i+"}"}(n.mapValue):rt(61005,{value:n})}function Km(n){switch(jl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yg(n);return e?16+Km(e):16;case 5:return 2*n.stringValue.length;case 6:return Fa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Km(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Jl(r.fields,(o,c)=>{i+=o.length+Km(c)}),i}(n.mapValue);default:throw rt(13486,{value:n})}}function Rf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kx(n){return!!n&&"integerValue"in n}function Nf(n){return!!n&&"arrayValue"in n}function OI(n){return!!n&&"nullValue"in n}function MI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xm(n){return!!n&&"mapValue"in n}function xg(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Ov])==null?void 0:r.stringValue)===Mv}function rf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rf(n.arrayValue.values[t]);return e}return{...n}}function yN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gN}const xN={mapValue:{fields:{[Ov]:{stringValue:Mv},[Cd]:{arrayValue:{}}}}};function CF(n){return"nullValue"in n?qm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Rf(Zc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?xg(n)?xN:{mapValue:{}}:rt(35942,{value:n})}function SF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Rf(Zc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?xN:"mapValue"in n?xg(n)?{mapValue:{}}:Pl:rt(61959,{value:n})}function LI(n,e){const t=Ul(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VI(n,e){const t=Ul(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rf(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=rf(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Xm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Oi(rf(this.value))}}function wN(n){const e=[];return Jl(n.fields,(t,r)=>{const i=new lr([t]);if(Xm(r)){const o=wN(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,r,i,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new wr(e,0,yt.min(),yt.min(),yt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,yt.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,yt.min(),yt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,yt.min(),yt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t){this.position=e,this.inclusive=t}}function FI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?r=Ke.comparator(Ke.fromName(c.referenceValue),t.key):r=Ul(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function BI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sa(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t="asc"){this.field=e,this.dir=t}}function RF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{}class Yt extends vN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new NF(e,t,r):t==="array-contains"?new DF(e,r):t==="in"?new AN(e,r):t==="not-in"?new OF(e,r):t==="array-contains-any"?new MF(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new kF(e,r):new PF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ul(t,this.value)):t!==null&&jl(this.value)===jl(t)&&this.matchesComparison(Ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends vN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _n(e,t)}matches(e){return Nd(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nd(n){return n.op==="and"}function Xx(n){return n.op==="or"}function Lv(n){return _N(n)&&Nd(n)}function _N(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function Yx(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Sd(n.value);if(Lv(n))return n.filters.map(e=>Yx(e)).join(",");{const e=n.filters.map(t=>Yx(t)).join(",");return`${n.op}(${e})`}}function EN(n,e){return n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&sa(r.value,i.value)}(n,e):n instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,h)=>o&&EN(c,i.filters[h]),!0):!1}(n,e):void rt(19439)}function bN(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function IN(n){return n instanceof Yt?function(t){return`${t.field.canonicalString()} ${t.op} ${Sd(t.value)}`}(n):n instanceof _n?function(t){return t.op.toString()+" {"+t.getFilters().map(IN).join(" ,")+"}"}(n):"Filter"}class NF extends Yt{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class kF extends Yt{constructor(e,t){super(e,"in",t),this.keys=TN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PF extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=TN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TN(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class DF extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nf(t)&&Sf(t.arrayValue,this.value)}}class AN extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sf(this.value.arrayValue,t)}}class OF extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sf(this.value.arrayValue,t)}}class MF extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function Qx(n,e=null,t=[],r=[],i=null,o=null,c=null){return new LF(n,e,t,r,i,o,c)}function Jc(n){const e=Pt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),fg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sd(r)).join(",")),e.Te=t}return e.Te}function ip(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BI(n.startAt,e.startAt)&&BI(n.endAt,e.endAt)}function T0(n){return Ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function A0(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function jI(n,e,t){let r=qm,i=!0;for(const o of A0(n,e)){let c=qm,h=!0;switch(o.op){case"<":case"<=":c=CF(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=qm}LI({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];LI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}function UI(n,e,t){let r=Pl,i=!0;for(const o of A0(n,e)){let c=Pl,h=!0;switch(o.op){case">=":case">":c=SF(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=Pl}VI({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];VI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VF(n,e,t,r,i,o,c,h){return new Gd(n,e,t,r,i,o,c,h)}function sp(n){return new Gd(n)}function zI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CN(n){return n.collectionGroup!==null}function sf(n){const e=Pt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new En(lr.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new kf(o,r))}),t.has(lr.keyField().canonicalString())||e.Ie.push(new kf(lr.keyField(),r))}return e.Ie}function Js(n){const e=Pt(n);return e.Ee||(e.Ee=FF(e,sf(n))),e.Ee}function FF(n,e){if(n.limitType==="F")return Qx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new kf(i.field,o)});const t=n.endAt?new Rd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rd(n.startAt.position,n.startAt.inclusive):null;return Qx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Zx(n,e){const t=n.filters.concat([e]);return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jx(n,e,t){return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wg(n,e){return ip(Js(n),Js(e))&&n.limitType===e.limitType}function SN(n){return`${Jc(Js(n))}|lt:${n.limitType}`}function td(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>IN(i)).join(", ")}]`),fg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Sd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Sd(i)).join(",")),`Target(${r})`}(Js(n))}; limitType=${n.limitType})`}function op(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of sf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,h,m){const g=FI(c,h,m);return c.inclusive?g<=0:g<0}(r.startAt,sf(r),i)||r.endAt&&!function(c,h,m){const g=FI(c,h,m);return c.inclusive?g>=0:g>0}(r.endAt,sf(r),i))}(n,e)}function BF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RN(n){return(e,t)=>{let r=!1;for(const i of sf(n)){const o=jF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function jF(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(o,c,h){const m=c.data.field(o),g=h.data.field(o);return m!==null&&g!==null?Ul(m,g):rt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return uN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new rr(Ke.comparator);function Ns(){return UF}const NN=new rr(Ke.comparator);function Wh(...n){let e=NN;for(const t of n)e=e.insert(t.key,t);return e}function kN(n){let e=NN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ho(){return of()}function PN(){return of()}function of(){return new $a(n=>n.toString(),(n,e)=>n.isEqual(e))}const zF=new rr(Ke.comparator),WF=new En(Ke.comparator);function Ft(...n){let e=WF;for(const t of n)e=e.add(t);return e}const HF=new En(kt);function GF(){return HF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function DN(n){return{integerValue:""+n}}function $F(n,e){return ZV(e)?DN(e):Vv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this._=void 0}}function qF(n,e,t){return n instanceof kd?function(i,o){const c={fields:{[fN]:{stringValue:hN},[mN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Dv(o)&&(o=yg(o)),o&&(c.fields[pN]=o),{mapValue:c}}(t,e):n instanceof Pd?MN(n,e):n instanceof Dd?LN(n,e):function(i,o){const c=ON(i,o),h=WI(c)+WI(i.Ae);return Kx(c)&&Kx(i.Ae)?DN(h):Vv(i.serializer,h)}(n,e)}function KF(n,e,t){return n instanceof Pd?MN(n,e):n instanceof Dd?LN(n,e):t}function ON(n,e){return n instanceof Pf?function(r){return Kx(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class kd extends vg{}class Pd extends vg{constructor(e){super(),this.elements=e}}function MN(n,e){const t=VN(e);for(const r of n.elements)t.some(i=>sa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Dd extends vg{constructor(e){super(),this.elements=e}}function LN(n,e){let t=VN(e);for(const r of n.elements)t=t.filter(i=>!sa(i,r));return{arrayValue:{values:t}}}class Pf extends vg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function WI(n){return tr(n.integerValue||n.doubleValue)}function VN(n){return Nf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t){this.field=e,this.transform=t}}function XF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Pd&&i instanceof Pd||r instanceof Dd&&i instanceof Dd?Ed(r.elements,i.elements,sa):r instanceof Pf&&i instanceof Pf?sa(r.Ae,i.Ae):r instanceof kd&&i instanceof kd}(n.transform,e.transform)}class YF{constructor(e,t){this.version=e,this.transformResults=t}}class Xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xi}static exists(e){return new Xi(void 0,e)}static updateTime(e){return new Xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ym(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _g{}function BN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Eg(n.key,Xi.none()):new $d(n.key,n.data,Xi.none());{const t=n.data,r=Oi.empty();let i=new En(lr.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new qa(n.key,r,new ds(i.toArray()),Xi.none())}}function QF(n,e,t){n instanceof $d?function(i,o,c){const h=i.value.clone(),m=GI(i.fieldTransforms,o,c.transformResults);h.setAll(m),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof qa?function(i,o,c){if(!Ym(i.precondition,o))return void o.convertToUnknownDocument(c.version);const h=GI(i.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(jN(i)),m.setAll(h),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function af(n,e,t,r){return n instanceof $d?function(o,c,h,m){if(!Ym(o.precondition,c))return h;const g=o.value.clone(),w=$I(o.fieldTransforms,m,c);return g.setAll(w),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof qa?function(o,c,h,m){if(!Ym(o.precondition,c))return h;const g=$I(o.fieldTransforms,m,c),w=c.data;return w.setAll(jN(o)),w.setAll(g),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(o,c,h){return Ym(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function ZF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=ON(r.transform,i||null);o!=null&&(t===null&&(t=Oi.empty()),t.set(r.field,o))}return t||null}function HI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ed(r,i,(o,c)=>XF(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $d extends _g{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qa extends _g{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function GI(n,e,t){const r=new Map;dt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,KF(c,h,t[i]))}return r}function $I(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,qF(o,c,e))}return r}class Eg extends _g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UN extends _g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&QF(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=af(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=af(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=PN();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const m=BN(c,h);m!==null&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Ed(this.mutations,e.mutations,(t,r)=>HI(t,r))&&Ed(this.baseMutations,e.baseMutations,(t,r)=>HI(t,r))}}class Bv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){dt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return zF}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new Bv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr,tn;function eB(n){switch(n){case Ce.OK:return rt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return rt(15467,{code:n})}}function zN(n){if(n===void 0)return Ki("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case Mr.OK:return Ce.OK;case Mr.CANCELLED:return Ce.CANCELLED;case Mr.UNKNOWN:return Ce.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return Ce.INTERNAL;case Mr.UNAVAILABLE:return Ce.UNAVAILABLE;case Mr.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Mr.NOT_FOUND:return Ce.NOT_FOUND;case Mr.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Mr.ABORTED:return Ce.ABORTED;case Mr.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Mr.DATA_LOSS:return Ce.DATA_LOSS;default:return rt(39323,{code:n})}}(tn=Mr||(Mr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=new Ml([4294967295,4294967295],0);function qI(n){const e=tB().encode(n),t=new BR;return t.update(e),new Uint8Array(t.digest())}function KI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ml([t,r],0),new Ml([i,o],0)]}class Uv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hh(`Invalid padding: ${t}`);if(r<0)throw new Hh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ml.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ml.fromNumber(r)));return i.compare(nB)===1&&(i=new Ml([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=qI(e),[r,i]=KI(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Uv(o,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.ge===0)return;const t=qI(e),[r,i]=KI(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Hh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bg(yt.min(),i,new rr(kt),Ns(),Ft())}}class ap{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ap(r,t,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class WN{constructor(e,t){this.targetId=e,this.Ce=t}}class HN{constructor(e,t,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class XI{constructor(){this.ve=0,this.Fe=YI(),this.Me=Br.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ft(),t=Ft(),r=Ft();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt(38017,{changeType:o})}}),new ap(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=YI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rB{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=gm(),this.He=gm(),this.Ye=new rr(kt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(T0(o))if(r===0){const c=new Ke(o.path);this.et(t,c,wr.newNoDocument(c,yt.min()))}else dt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,h;try{c=Fa(r).toUint8Array()}catch(m){if(m instanceof dN)return Qc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Uv(c,i,o)}catch(m){return Qc(m instanceof Hh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,c)=>{const h=this.ot(c);if(h){if(o.current&&T0(h.target)){const m=new Ke(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,wr.newNoDocument(m,e))}o.Be&&(t.set(c,o.ke()),o.qe())}});let r=Ft();this.He.forEach((o,c)=>{let h=!0;c.forEachWhile(m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,c)=>c.setReadTime(e));const i=new bg(e,t,this.Ye,this.je,r);return this.je=Ns(),this.Je=gm(),this.He=gm(),this.Ye=new rr(kt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(kt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(kt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XI),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gm(){return new rr(Ke.comparator)}function YI(){return new rr(Ke.comparator)}const iB={asc:"ASCENDING",desc:"DESCENDING"},sB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oB={and:"AND",or:"OR"};class aB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ew(n,e){return n.useProto3Json||fg(e)?e:{value:e}}function Od(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lB(n,e){return Od(n,e.toTimestamp())}function Qi(n){return dt(!!n,49232),yt.fromTimestamp(function(t){const r=Va(t);return new vn(r.seconds,r.nanos)}(n))}function zv(n,e){return tw(n,e).canonicalString()}function tw(n,e){const t=function(i){return new fn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function $N(n){const e=fn.fromString(n);return dt(tk(e),10190,{key:e.toString()}),e}function C0(n,e){return zv(n.databaseId,e.path)}function zc(n,e){const t=$N(e);if(t.get(1)!==n.databaseId.projectId)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(XN(t))}function qN(n,e){return zv(n.databaseId,e)}function KN(n){const e=$N(n);return e.length===4?fn.emptyPath():XN(e)}function nw(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XN(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QI(n,e,t){return{name:C0(n,e),fields:t.value.mapValue.fields}}function cB(n,e,t){const r=zc(n,e.name),i=Qi(e.updateTime),o=e.createTime?Qi(e.createTime):yt.min(),c=new Oi({mapValue:{fields:e.fields}}),h=wr.newFoundDocument(r,i,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function uB(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:rt(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,w){return g.useProto3Json?(dt(w===void 0||typeof w=="string",58123),Br.fromBase64String(w||"")):(dt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Br.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const w=g.code===void 0?Ce.UNKNOWN:zN(g.code);return new qe(w,g.message||"")}(c);t=new HN(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zc(n,r.document.name),o=Qi(r.document.updateTime),c=r.document.createTime?Qi(r.document.createTime):yt.min(),h=new Oi({mapValue:{fields:r.document.fields}}),m=wr.newFoundDocument(i,o,c,h),g=r.targetIds||[],w=r.removedTargetIds||[];t=new Qm(g,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zc(n,r.document),o=r.readTime?Qi(r.readTime):yt.min(),c=wr.newNoDocument(i,o),h=r.removedTargetIds||[];t=new Qm([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zc(n,r.document),o=r.removedTargetIds||[];t=new Qm([],o,i,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new JF(i,o),h=r.targetId;t=new WN(h,c)}}return t}function S0(n,e){let t;if(e instanceof $d)t={update:QI(n,e.key,e.value)};else if(e instanceof Eg)t={delete:C0(n,e.key)};else if(e instanceof qa)t={update:QI(n,e.key,e.data),updateMask:gB(e.fieldMask)};else{if(!(e instanceof UN))return rt(16599,{Vt:e.type});t={verify:C0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const h=c.transform;if(h instanceof kd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Pd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Dd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Pf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw rt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:lB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:rt(27497)}(n,e.precondition)),t}function rw(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?Xi.updateTime(Qi(o.updateTime)):o.exists!==void 0?Xi.exists(o.exists):Xi.none()}(e.currentDocument):Xi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(c,h){let m=null;if("setToServerValue"in h)dt(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),m=new kd;else if("appendMissingElements"in h){const w=h.appendMissingElements.values||[];m=new Pd(w)}else if("removeAllFromArray"in h){const w=h.removeAllFromArray.values||[];m=new Dd(w)}else"increment"in h?m=new Pf(c,h.increment):rt(16584,{proto:h});const g=lr.fromServerFormat(h.fieldPath);return new FN(g,m)}(n,i)):[];if(e.update){e.update.name;const i=zc(n,e.update.name),o=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const g=m.fieldPaths||[];return new ds(g.map(w=>lr.fromServerFormat(w)))}(e.updateMask);return new qa(i,o,c,t,r)}return new $d(i,o,t,r)}if(e.delete){const i=zc(n,e.delete);return new Eg(i,t)}if(e.verify){const i=zc(n,e.verify);return new UN(i,t)}return rt(1463,{proto:e})}function dB(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map(t=>function(i,o){let c=i.updateTime?Qi(i.updateTime):Qi(o);return c.isEqual(yt.min())&&(c=Qi(o)),new YF(c,i.transformResults||[])}(t,e))):[]}function YN(n,e){return{documents:[qN(n,e.path)]}}function QN(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qN(n,i);const o=function(g){if(g.length!==0)return ek(_n.create(g,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(w=>function(A){return{field:nd(A.field),direction:fB(A.dir)}}(w))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=ew(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:i}}function ZN(n){let e=KN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){dt(r===1,65062);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let o=[];t.where&&(o=function(_){const A=JN(_);return A instanceof _n&&Lv(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=function(_){return _.map(A=>function(M){return new kf(rd(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(A))}(t.orderBy));let h=null;t.limit&&(h=function(_){let A;return A=typeof _=="object"?_.value:_,fg(A)?null:A}(t.limit));let m=null;t.startAt&&(m=function(_){const A=!!_.before,R=_.values||[];return new Rd(R,A)}(t.startAt));let g=null;return t.endAt&&(g=function(_){const A=!_.before,R=_.values||[];return new Rd(R,A)}(t.endAt)),VF(e,i,c,o,h,"F",m,g)}function hB(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=rd(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rd(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rd(t.unaryFilter.field);return Yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rd(t.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Yt.create(rd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _n.create(t.compositeFilter.filters.map(r=>JN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(t.compositeFilter.op))}(n):rt(30097,{filter:n})}function fB(n){return iB[n]}function pB(n){return sB[n]}function mB(n){return oB[n]}function nd(n){return{fieldPath:n.canonicalString()}}function rd(n){return lr.fromServerFormat(n.fieldPath)}function ek(n){return n instanceof Yt?function(t){if(t.op==="=="){if(MI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NAN"}};if(OI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NAN"}};if(OI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nd(t.field),op:pB(t.op),value:t.value}}}(n):n instanceof _n?function(t){const r=t.getFilters().map(i=>ek(i));return r.length===1?r[0]:{compositeFilter:{op:mB(t.op),filters:r}}}(n):rt(54877,{filter:n})}function gB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,r,i,o=yt.min(),c=yt.min(),h=Br.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.yt=e}}function yB(n,e){let t;if(e.document)t=cB(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=tu(e.noDocument.readTime);t=wr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt(56709);{const r=Ke.fromSegments(e.unknownDocument.path),i=tu(e.unknownDocument.version);t=wr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new vn(i[0],i[1]);return yt.fromTimestamp(o)}(e.readTime)),t}function ZI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:R0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,c){return{name:C0(o,c.key),fields:c.data.value.mapValue.fields,updateTime:Od(o,c.version.toTimestamp()),createTime:Od(o,c.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:eu(e.version)};else{if(!e.isUnknownDocument())return rt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:eu(e.version)}}return r}function R0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function eu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tu(n){const e=new vn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Pc(n,e){const t=(e.baseMutations||[]).map(o=>rw(n.yt,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];c.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>rw(n.yt,o)),i=vn.fromMillis(e.localWriteTimeMs);return new Fv(e.batchId,i,t,r)}function Gh(n){const e=tu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?tu(n.lastLimboFreeSnapshotVersion):yt.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){const c=o.documents.length;return dt(c===1,1966,{count:c}),Js(sp(KN(o.documents[0])))}(n.query):function(o){return Js(ZN(o))}(n.query),new Na(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function rk(n,e){const t=eu(e.snapshotVersion),r=eu(e.lastLimboFreeSnapshotVersion);let i;i=T0(e.target)?YN(n.yt,e.target):QN(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ik(n){const e=ZN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jx(e,e.limit,"L"):e}function Vy(n,e){return new jv(e.largestBatchId,rw(n.yt,e.overlayMutation))}function JI(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function eT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:eu(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{getBundleMetadata(e,t){return tT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:tu(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return tT(e).put(function(i){return{bundleId:i.id,createTime:eu(Qi(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return nT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:ik(o.bundledQuery),readTime:tu(o.readTime)}}(r)})}saveNamedQuery(e,t){return nT(e).put(function(i){return{name:i.name,readTime:eu(Qi(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function tT(n){return Qr(n,pg)}function nT(n){return Qr(n,mg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Ig(e,r)}getOverlay(e,t){return Nh(e).get(JI(this.userId,t)).next(r=>r?Vy(this.serializer,r):null)}getOverlays(e,t){const r=Ho();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new jv(t,c);i.push(this.St(e,h))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Vi(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Nh(e).Z(Gx,h))}),ge.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Ho(),o=Vi(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Nh(e).J(Gx,c).next(h=>{for(const m of h){const g=Vy(this.serializer,m);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Ho();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nh(e).ee({index:sN,range:h},(m,g,w)=>{const _=Vy(this.serializer,g);o.size()<i||_.largestBatchId===c?(o.set(_.getKey(),_),c=_.largestBatchId):w.done()}).next(()=>o)}St(e,t){return Nh(e).put(function(i,o,c){const[h,m,g]=JI(o,c.mutation.key);return{userId:o,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:S0(i.yt,c.mutation)}}(this.serializer,this.userId,t))}}function Nh(n){return Qr(n,gg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{bt(e){return Qr(e,kv)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Br.fromUint8Array(r):Br.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(tr(e.integerValue));else if("doubleValue"in e){const r=tr(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),bf(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Va(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Fa(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?yN(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):xg(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):rt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var c,h;const r=e.fields||{};this.Ft(t,53);const i=Cd,o=((h=(c=r[i].arrayValue)==null?void 0:c.values)==null?void 0:h.length)||0;this.Ft(t,15),t.Mt(tr(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ke.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Dc.Kt=new Dc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=255;function vB(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function rT(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const c=vB(255&r[o]);if(i+=c,c!==8)break}return i}(n);return Math.ceil(e/8)}class _B{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=rT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=rT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Gu),this.sn(255)}_n(){this.an(Gu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Gu?(this.sn(Gu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Gu?(this.an(Gu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class EB{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class bB{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class kh{constructor(){this.cn=new _B,this.ln=new EB(this.cn),this.hn=new bB(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Oc(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Zm(this.En),directionalValue:Zm(this.dn),orderedDocumentKey:Zm(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function wl(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=iT(n.En,e.En),t!==0?t:(t=iT(n.dn,e.dn),t!==0?t:Ke.comparator(n.In,e.In)))}function iT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Zm(n){return ZS()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function sT(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}class oT{constructor(e){this.mn=new En((t,r)=>lr.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(dt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=zx(e);if(t!==void 0&&!this.wn(t))return!1;const r=Cc(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!i.has(h.field.canonicalString())){const m=r[o];if(!this.Sn(h,m)||!this.bn(this.fn[c++],m))return!1}++o}for(;o<r.length;++o){const h=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new En(lr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Hm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Hm(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Hm(r.field,r.dir==="asc"?0:1)));return new v0(v0.UNKNOWN_ID,this.collectionId,t,Ef.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n){var t,r;if(dt(n instanceof Yt||n instanceof _n,20012),n instanceof Yt){if(n instanceof AN){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(o=>Yt.create(n.field,"==",o)))||[];return _n.create(i,"or")}return n}const e=n.filters.map(i=>sk(i));return _n.create(e,n.op)}function IB(n){if(n.getFilters().length===0)return[];const e=ow(sk(n));return dt(ok(e),7391),iw(e)||sw(e)?[e]:e.getFilters()}function iw(n){return n instanceof Yt}function sw(n){return n instanceof _n&&Lv(n)}function ok(n){return iw(n)||sw(n)||function(t){if(t instanceof _n&&Xx(t)){for(const r of t.getFilters())if(!iw(r)&&!sw(r))return!1;return!0}return!1}(n)}function ow(n){if(dt(n instanceof Yt||n instanceof _n,34018),n instanceof Yt)return n;if(n.filters.length===1)return ow(n.filters[0]);const e=n.filters.map(r=>ow(r));let t=_n.create(e,n.op);return t=N0(t),ok(t)?t:(dt(t instanceof _n,64498),dt(Nd(t),40251),dt(t.filters.length>1,57927),t.filters.reduce((r,i)=>Wv(r,i)))}function Wv(n,e){let t;return dt(n instanceof Yt||n instanceof _n,38388),dt(e instanceof Yt||e instanceof _n,25473),t=n instanceof Yt?e instanceof Yt?function(i,o){return _n.create([i,o],"and")}(n,e):aT(n,e):e instanceof Yt?aT(e,n):function(i,o){if(dt(i.filters.length>0&&o.filters.length>0,48005),Nd(i)&&Nd(o))return bN(i,o.getFilters());const c=Xx(i)?i:o,h=Xx(i)?o:i,m=c.filters.map(g=>Wv(g,h));return _n.create(m,"or")}(n,e),N0(t)}function aT(n,e){if(Nd(e))return bN(e,n.getFilters());{const t=e.filters.map(r=>Wv(n,r));return _n.create(t,"or")}}function N0(n){if(dt(n instanceof Yt||n instanceof _n,11850),n instanceof Yt)return n;const e=n.getFilters();if(e.length===1)return N0(e[0]);if(_N(n))return n;const t=e.map(i=>N0(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof _n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_n.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(){this.Cn=new Hv}addToCollectionParentIndex(e,t){return this.Cn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(Ms.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Hv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(fn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(fn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="IndexedDbIndexManager",ym=new Uint8Array(0);class AB{constructor(e,t){this.databaseId=t,this.vn=new Hv,this.Fn=new $a(r=>Jc(r),(r,i)=>ip(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const o={collectionId:r,parent:Vi(i)};return cT(e).put(o)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[qR(t),""],!1,!0);return cT(e).J(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Wo(c.parent))}return r})}addFieldIndex(e,t){const r=Ph(e),i=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete i.indexId;const o=r.add(i);if(t.indexState){const c=qu(e);return o.next(h=>{c.put(eT(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Ph(e),i=qu(e),o=$u(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ph(e),r=$u(e),i=qu(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return ge.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new oT(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=$u(e);let i=!0;const o=new Map;return ge.forEach(this.Mn(t),c=>this.xn(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Ft();const h=[];return ge.forEach(o,(m,g)=>{Be(lT,`Using index ${function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(m)} to execute ${Jc(t)}`);const w=function(H,Y){const re=zx(Y);if(re===void 0)return null;for(const ie of A0(H,re.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(g,m),_=function(H,Y){const re=new Map;for(const ie of Cc(Y))for(const V of A0(H,ie.fieldPath))switch(V.op){case"==":case"in":re.set(ie.fieldPath.canonicalString(),V.value);break;case"not-in":case"!=":return re.set(ie.fieldPath.canonicalString(),V.value),Array.from(re.values())}return null}(g,m),A=function(H,Y){const re=[];let ie=!0;for(const V of Cc(Y)){const B=V.kind===0?jI(H,V.fieldPath,H.startAt):UI(H,V.fieldPath,H.startAt);re.push(B.value),ie&&(ie=B.inclusive)}return new Rd(re,ie)}(g,m),R=function(H,Y){const re=[];let ie=!0;for(const V of Cc(Y)){const B=V.kind===0?UI(H,V.fieldPath,H.endAt):jI(H,V.fieldPath,H.endAt);re.push(B.value),ie&&(ie=B.inclusive)}return new Rd(re,ie)}(g,m),M=this.On(m,g,A),D=this.On(m,g,R),L=this.Nn(m,g,_),G=this.Bn(m.indexId,w,M,A.inclusive,D,R.inclusive,L);return ge.forEach(G,z=>r.Y(z,t.limit).next(H=>{H.forEach(Y=>{const re=Ke.fromSegments(Y.documentKey);c.has(re)||(c=c.add(re),h.push(re))})}))}).next(()=>h)}return ge.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=IB(_n.create(e.filters,"and")).map(r=>Qx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,c,h){const m=(t!=null?t.length:1)*Math.max(r.length,o.length),g=m/(t!=null?t.length:1),w=[];for(let _=0;_<m;++_){const A=t?this.Ln(t[_/g]):ym,R=this.kn(e,A,r[_%g],i),M=this.qn(e,A,o[_%g],c),D=h.map(L=>this.kn(e,A,L,!0));w.push(...this.createRange(R,M,D))}return w}kn(e,t,r,i){const o=new Oc(e,Ke.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new Oc(e,Ke.empty(),t,r);return i?o.An():o}xn(e,t){const r=new oT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.yn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.Mn(t);return ge.forEach(i,o=>this.xn(e,o).next(c=>{c?r!==0&&c.fields.length<function(m){let g=new En(lr.comparator),w=!1;for(const _ of m.filters)for(const A of _.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?w=!0:g=g.add(A.field));for(const _ of m.orderBy)_.field.isKeyField()||(g=g.add(_.field));return g.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){const r=new kh;for(const i of Cc(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const c=r.Pn(i.kind);Dc.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new kh;return Dc.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new kh;return Dc.Kt.Dt(Rf(this.databaseId,t),r.Pn(function(o){const c=Cc(o);return c.length===0?0:c[c.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new kh);let o=0;for(const c of Cc(e)){const h=r[o++];for(const m of i)if(this.Un(t,c.fieldPath)&&Nf(h))i=this.Kn(i,c,h);else{const g=m.Pn(c.kind);Dc.Kt.Dt(h,g)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const m=new kh;m.seed(h.un()),Dc.Kt.Dt(c,m.Pn(t.kind)),o.push(m)}return o}Un(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ph(e),i=qu(e);return(t?r.J(Hx,IDBKeyRange.bound(t,t)):r.J()).next(o=>{const c=[];return ge.forEach(o,h=>i.get([h.indexId,this.uid]).next(m=>{c.push(function(w,_){const A=_?new Ef(_.sequenceNumber,new Ms(tu(_.readTime),new Ke(Wo(_.documentKey)),_.largestBatchId)):Ef.empty(),R=w.fields.map(([M,D])=>new Hm(lr.fromServerFormat(M),D));return new v0(w.indexId,w.collectionGroup,R,A)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ph(e),o=qu(e);return this.Gn(e).next(c=>i.J(Hx,IDBKeyRange.bound(t,t)).next(h=>ge.forEach(h,m=>o.put(eT(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ge.forEach(h,m=>this.zn(e,i,m).next(g=>{const w=this.jn(o,m);return g.isEqual(w)?ge.resolve():this.Jn(e,o,m,g,w)}))))})}Hn(e,t,r,i){return $u(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return $u(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=$u(e);let o=new En(wl);return i.ee({index:iN,range:IDBKeyRange.only([r.indexId,this.uid,Zm(this.$n(r,t))])},(c,h)=>{o=o.add(new Oc(r.indexId,t,sT(h.arrayValue),sT(h.directionalValue)))}).next(()=>o)}jn(e,t){let r=new En(wl);const i=this.Qn(t,e);if(i==null)return r;const o=zx(t);if(o!=null){const c=e.data.field(o.fieldPath);if(Nf(c))for(const h of c.arrayValue.values||[])r=r.add(new Oc(t.indexId,e.key,this.Ln(h),i))}else r=r.add(new Oc(t.indexId,e.key,ym,i));return r}Jn(e,t,r,i,o){Be(lT,"Updating index entries for document '%s'",t.key);const c=[];return function(m,g,w,_,A){const R=m.getIterator(),M=g.getIterator();let D=Hu(R),L=Hu(M);for(;D||L;){let G=!1,z=!1;if(D&&L){const H=w(D,L);H<0?z=!0:H>0&&(G=!0)}else D!=null?z=!0:G=!0;G?(_(L),L=Hu(M)):z?(A(D),D=Hu(R)):(D=Hu(R),L=Hu(M))}}(i,o,wl,h=>{c.push(this.Hn(e,t,r,h))},h=>{c.push(this.Yn(e,t,r,h))}),ge.waitFor(c)}Gn(e){let t=1;return qu(e).ee({index:rN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>wl(c,h)).filter((c,h,m)=>!h||wl(c,m[h-1])!==0);const i=[];i.push(e);for(const c of r){const h=wl(c,e),m=wl(c,t);if(h===0)i[0]=e.An();else if(h>0&&m<0)i.push(c),i.push(c.An());else if(m>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.Zn(i[c],i[c+1]))return[];const h=i[c].Vn(this.uid,ym,Ke.empty()),m=i[c+1].Vn(this.uid,ym,Ke.empty());o.push(IDBKeyRange.bound(h,m))}return o}Zn(e,t){return wl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uT)}getMinOffset(e,t){return ge.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||rt(44426))).next(uT)}}function cT(n){return Qr(n,Af)}function $u(n){return Qr(n,nf)}function Ph(n){return Qr(n,Nv)}function qu(n){return Qr(n,tf)}function uT(n){dt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Cv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ms(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ak=41943040;class Di{static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(n,e,t){const r=n.store(xo),i=n.store(bd),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.ee({range:c},(w,_,A)=>(h++,A.delete()));o.push(m.next(()=>{dt(h===1,47070,{batchId:t.batchId})}));const g=[];for(const w of t.mutations){const _=eN(e,w.key.path,t.batchId);o.push(i.delete(_)),g.push(w.key)}return ge.waitFor(o).next(()=>g)}function k0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(ak,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class Tg{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){dt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Tg(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).ee({index:Mc,range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=id(e),c=vl(e);return c.add({}).next(h=>{dt(typeof h=="number",49019);const m=new Fv(h,t,r,i),g=function(R,M,D){const L=D.baseMutations.map(z=>S0(R.yt,z)),G=D.mutations.map(z=>S0(R.yt,z));return{userId:M,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:L,mutations:G}}(this.serializer,this.userId,m),w=[];let _=new En((A,R)=>kt(A.canonicalString(),R.canonicalString()));for(const A of i){const R=eN(this.userId,A.key.path,h);_=_.add(A.key.path.popLast()),w.push(c.put(g)),w.push(o.put(R,tF))}return _.forEach(A=>{w.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Xn[h]=m.keys()}),ge.waitFor(w).next(()=>m)})}lookupMutationBatch(e,t){return vl(e).get(t).next(r=>r?(dt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Pc(this.serializer,r)):null)}er(e,t){return this.Xn[t]?ge.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return vl(e).ee({index:Mc,range:i},(c,h,m)=>{h.userId===this.userId&&(dt(h.batchId>=r,47524,{tr:r}),o=Pc(this.serializer,h)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=jc;return vl(e).ee({index:Mc,range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,jc],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).J(Mc,t).next(r=>r.map(i=>Pc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Gm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return id(e).ee({range:i},(c,h,m)=>{const[g,w,_]=c,A=Wo(w);if(g===this.userId&&t.path.isEqual(A))return vl(e).get(_).next(R=>{if(!R)throw rt(61480,{nr:c,batchId:_});dt(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:_}),o.push(Pc(this.serializer,R))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);const i=[];return t.forEach(o=>{const c=Gm(this.userId,o.path),h=IDBKeyRange.lowerBound(c),m=id(e).ee({range:h},(g,w,_)=>{const[A,R,M]=g,D=Wo(R);A===this.userId&&o.path.isEqual(D)?r=r.add(M):_.done()});i.push(m)}),ge.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Gm(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new En(kt);return id(e).ee({range:c},(m,g,w)=>{const[_,A,R]=m,M=Wo(A);_===this.userId&&r.isPrefixOf(M)?M.length===i&&(h=h.add(R)):w.done()}).next(()=>this.rr(e,h))}rr(e,t){const r=[],i=[];return t.forEach(o=>{i.push(vl(e).get(o).next(c=>{if(c===null)throw rt(35274,{batchId:o});dt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(Pc(this.serializer,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lk(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),i=[];return id(e).ee({range:r},(o,c,h)=>{if(o[0]===this.userId){const m=Wo(o[1]);i.push(m)}else h.done()}).next(()=>{dt(i.length===0,56720,{sr:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return ck(e,this.userId,t)}_r(e){return uk(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:jc,lastStreamToken:""})}}function ck(n,e,t){const r=Gm(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return id(n).ee({range:o,X:!0},(h,m,g)=>{const[w,_,A]=h;w===e&&_===i&&(c=!0),g.done()}).next(()=>c)}function vl(n){return Qr(n,xo)}function id(n){return Qr(n,bd)}function uk(n){return Qr(n,If)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nu(0)}static cr(){return new nu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new nu(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>yt.fromTimestamp(new vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ku(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(dt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ku(e).ee((c,h)=>{const m=Gh(h);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>ge.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ku(e).ee((r,i)=>{const o=Gh(i);t(o)})}lr(e){return hT(e).get(b0).next(t=>(dt(t!==null,2888),t))}hr(e,t){return hT(e).put(b0,t)}Pr(e,t){return Ku(e).put(rk(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Jc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ku(e).ee({range:i,index:nN},(c,h,m)=>{const g=Gh(h);ip(t,g.target)&&(o=g,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Nl(e);return t.forEach(c=>{const h=Vi(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=Nl(e);return ge.forEach(t,o=>{const c=Vi(o.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Nl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nl(e);let o=Ft();return i.ee({range:r,X:!0},(c,h,m)=>{const g=Wo(c[1]),w=new Ke(g);o=o.add(w)}).next(()=>o)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[qR(r)],!1,!0);let o=0;return Nl(e).ee({index:Rv,X:!0,range:i},([c,h],m,g)=>{c!==0&&(o++,g.done())}).next(()=>o>0)}At(e,t){return Ku(e).get(t).next(r=>r?Gh(r):null)}}function Ku(n){return Qr(n,Id)}function hT(n){return Qr(n,Uc)}function Nl(n){return Qr(n,Td)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="LruGarbageCollector",SB=1048576;function pT([n,e],[t,r]){const i=kt(n,t);return i===0?kt(e,r):i}class RB{constructor(e){this.Ir=e,this.buffer=new En(pT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Be(fT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zl(t)?Be(fT,"Ignoring IndexedDB error during garbage collection: ",t):await gu(t)}await this.Vr(3e5)})}}class NB{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(Qs.ce);const r=new RB(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(dT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dT):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,c,h,m,g;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,c=Date.now(),this.nthSequenceNumber(e,i))).next(_=>(r=_,h=Date.now(),this.removeTargets(e,r,t))).next(_=>(o=_,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(_=>(g=Date.now(),ed()<=Xt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${i} in `+(h-c)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${_} documents in `+(g-m)+`ms
Total Duration: ${g-w}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:_})))}}function hk(n,e){return new NB(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,t){this.db=e,this.garbageCollector=hk(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return xm(e,r)}removeReference(e,t,r){return xm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xm(e,t)}br(e,t){return function(i,o){let c=!1;return uk(i).te(h=>ck(i,h,o).next(m=>(m&&(c=!0),ge.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,(c,h)=>{if(h<=t){const m=this.br(e,c).next(g=>{if(!g)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,yt.min()),Nl(e).delete(function(_){return[0,Vi(_.path)]}(c))))});i.push(m)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xm(e,t)}Sr(e,t){const r=Nl(e);let i,o=Qs.ce;return r.ee({index:Rv},([c,h],{path:m,sequenceNumber:g})=>{c===0?(o!==Qs.ce&&t(new Ke(Wo(i)),o),o=g,i=m):o=Qs.ce}).next(()=>{o!==Qs.ce&&t(new Ke(Wo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xm(n,e){return Nl(n).put(function(r,i){return{targetId:0,path:Vi(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.changes=new $a(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ec(e).put(r)}removeEntry(e,t,r){return Ec(e).delete(function(o,c){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],R0(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=wr.newInvalidDocument(t);return Ec(e).ee({index:$m,range:IDBKeyRange.only(Dh(t))},(i,o)=>{r=this.Cr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:wr.newInvalidDocument(t)};return Ec(e).ee({index:$m,range:IDBKeyRange.only(Dh(t))},(i,o)=>{r={document:this.Cr(t,o),size:k0(o)}}).next(()=>r)}getEntries(e,t){let r=Ns();return this.Fr(e,t,(i,o)=>{const c=this.Cr(i,o);r=r.insert(i,c)}).next(()=>r)}Mr(e,t){let r=Ns(),i=new rr(Ke.comparator);return this.Fr(e,t,(o,c)=>{const h=this.Cr(o,c);r=r.insert(o,h),i=i.insert(o,k0(c))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return ge.resolve();let i=new En(yT);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(Dh(i.first()),Dh(i.last())),c=i.getIterator();let h=c.getNext();return Ec(e).ee({index:$m,range:o},(m,g,w)=>{const _=Ke.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&yT(h,_)<0;)r(h,null),h=c.getNext();h&&h.isEqual(_)&&(r(h,g),h=c.hasNext()?c.getNext():null),h?w.j(Dh(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const c=t.path,h=[c.popLast().toArray(),c.lastSegment(),R0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ec(e).J(IDBKeyRange.bound(h,m,!0)).next(g=>{o==null||o.incrementDocumentReadCount(g.length);let w=Ns();for(const _ of g){const A=this.Cr(Ke.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);A.isFoundDocument()&&(op(t,A)||i.has(A.key))&&(w=w.insert(A.key,A))}return w})}getAllFromCollectionGroup(e,t,r,i){let o=Ns();const c=gT(t,r),h=gT(t,Ms.max());return Ec(e).ee({index:tN,range:IDBKeyRange.bound(c,h,!0)},(m,g,w)=>{const _=this.Cr(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(_.key,_),o.size===i&&w.done()}).next(()=>o)}newChangeBuffer(e){return new DB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mT(e).get(Wx).next(t=>(dt(!!t,20021),t))}Dr(e,t){return mT(e).put(Wx,t)}Cr(e,t){if(t){const r=yB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(yt.min())))return r}return wr.newInvalidDocument(e)}}function pk(n){return new PB(n)}class DB extends fk{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new $a(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new En((o,c)=>kt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),c.isValidDocument()){const m=ZI(this.Nr.serializer,c);i=i.add(o.path.popLast());const g=k0(m);r+=g-h.size,t.push(this.Nr.addEntry(e,o,m))}else if(r-=h.size,this.trackRemovals){const m=ZI(this.Nr.serializer,c.convertToNoDocument(yt.min()));t.push(this.Nr.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Nr.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function mT(n){return Qr(n,Tf)}function Ec(n){return Qr(n,E0)}function Dh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gT(n,e){const t=e.documentKey.path.toArray();return[n,R0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=kt(t[o],r[o]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&af(r.mutation,i,ds.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ft()){const i=Ho();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=Wh();return o.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ft()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=Ns();const c=of(),h=function(){return of()}();return t.forEach((m,g)=>{const w=r.get(g.key);i.has(g.key)&&(w===void 0||w.mutation instanceof qa)?o=o.insert(g.key,g):w!==void 0?(c.set(g.key,w.mutation.getFieldMask()),af(w.mutation,g,w.mutation.getFieldMask(),vn.now())):c.set(g.key,ds.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((g,w)=>c.set(g,w)),t.forEach((g,w)=>h.set(g,new OB(w,c.get(g)??null))),h))}recalculateAndSaveOverlays(e,t){const r=of();let i=new rr((c,h)=>c-h),o=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let w=r.get(m)||ds.empty();w=h.applyToLocalView(g,w),r.set(m,w);const _=(i.get(h.batchId)||Ft()).add(m);i=i.insert(h.batchId,_)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,w=m.value,_=PN();w.forEach(A=>{if(!o.has(A)){const R=BN(t.get(A),r.get(A));R!==null&&_.set(A,R),o=o.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,_))}return ge.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return Ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):CN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ge.resolve(Ho());let h=_f,m=o;return c.next(g=>ge.forEach(g,(w,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),o.get(w)?ge.resolve():this.remoteDocumentCache.getEntry(e,w).next(A=>{m=m.insert(w,A)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,m,g,Ft())).next(w=>({batchId:h,changes:kN(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Wh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=Wh();return this.indexManager.getCollectionParents(e,o).next(h=>ge.forEach(h,m=>{const g=function(_,A){return new Gd(A,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(w=>{w.forEach((_,A)=>{c=c.insert(_,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((m,g)=>{const w=g.getKey();c.get(w)===null&&(c=c.insert(w,wr.newInvalidDocument(w)))});let h=Wh();return c.forEach((m,g)=>{const w=o.get(m);w!==void 0&&af(w.mutation,g,ds.empty(),vn.now()),op(t,g)&&(h=h.insert(m,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qi(i.createTime)}}(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:ik(i.bundledQuery),readTime:Qi(i.readTime)}}(t)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.overlays=new rr(Ke.comparator),this.qr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ho();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=Ho(),o=t.length+1,c=new Ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new rr((g,w)=>g-w);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let w=o.get(g.largestBatchId);w===null&&(w=Ho(),o=o.insert(g.largestBatchId,w)),w.set(g.getKey(),g)}}const h=Ho(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,w)=>h.set(g,w)),!(h.size()>=i)););return ge.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new jv(t,r));let o=this.qr.get(t);o===void 0&&(o=Ft(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(){this.sessionToken=Br.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.Qr=new En(oi.$r),this.Ur=new En(oi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new oi(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new oi(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Ke(new fn([])),r=new oi(t,e),i=new oi(t,e+1),o=[];return this.Ur.forEachInRange([r,i],c=>{this.Gr(c),o.push(c.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ke(new fn([])),r=new oi(t,e),i=new oi(t,e+1);let o=Ft();return this.Ur.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new oi(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class oi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ke.comparator(e.key,t.key)||kt(e.Yr,t.Yr)}static Kr(e,t){return kt(e.Yr,t.Yr)||Ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(oi.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Fv(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Zr=this.Zr.add(new oi(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?jc:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new oi(t,0),i=new oi(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],c=>{const h=this.Xr(c.Yr);o.push(h)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);return t.forEach(i=>{const o=new oi(i,0),c=new oi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],h=>{r=r.add(h.Yr)})}),ge.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const c=new oi(new Ke(o),0);let h=new En(kt);return this.Zr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(h=h.add(m.Yr)),!0)},c),ge.resolve(this.ti(h))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ge.forEach(t.mutations,i=>{const o=new oi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new oi(t,0),i=this.Zr.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.ri=e,this.docs=function(){return new rr(Ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=Ns();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():wr.newInvalidDocument(i))}),ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ns();const c=t.path,h=new Ke(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:w}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Cv(YR(w),r)<=0||(i.has(w.key)||op(t,w))&&(o=o.insert(w.key,w.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,t,r,i){rt(9500)}ii(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jB(this)}getSize(e){return ge.resolve(this.size)}}class jB extends fk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UB{constructor(e){this.persistence=e,this.si=new $a(t=>Jc(t),ip),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Gv,this.targetCount=0,this.ai=nu.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Pr(t),ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ge.waitFor(o).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t){this.ui={},this.overlays={},this.ci=new Qs(0),this.li=!1,this.li=!0,this.hi=new VB,this.referenceDelegate=e(this),this.Pi=new UB(this),this.indexManager=new TB,this.remoteDocumentCache=function(i){return new BB(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new nk(t),this.Ii=new MB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new FB(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new zB(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return ge.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class zB extends ZR{constructor(e){super(),this.currentSequenceNumber=e}}class Ag{constructor(e){this.persistence=e,this.Ri=new Gv,this.Vi=null}static mi(e){return new Ag(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,r=>{const i=Ke.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,yt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class P0{constructor(e,t){this.persistence=e,this.pi=new $a(r=>Vi(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=hk(this,t)}static mi(e,t){return new P0(e,t)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ge.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ge.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,c=>this.br(e,c,t).next(h=>{h||(r++,o.removeEntry(c,yt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Km(e.data.value)),t}br(e,t,r){return ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ge.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e){this.serializer=e}k(e,t,r,i){const o=new hg("createOrUpgrade",t);r<1&&i>=1&&(function(m){m.createObjectStore(rp)}(e),function(m){m.createObjectStore(If,{keyPath:eF}),m.createObjectStore(xo,{keyPath:SI,autoIncrement:!0}).createIndex(Mc,RI,{unique:!0}),m.createObjectStore(bd)}(e),xT(e),function(m){m.createObjectStore(Sc)}(e));let c=ge.resolve();return r<3&&i>=3&&(r!==0&&(function(m){m.deleteObjectStore(Td),m.deleteObjectStore(Id),m.deleteObjectStore(Uc)}(e),xT(e)),c=c.next(()=>function(m){const g=m.store(Uc),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return g.put(b0,w)}(o))),r<4&&i>=4&&(r!==0&&(c=c.next(()=>function(m,g){return g.store(xo).J().next(_=>{m.deleteObjectStore(xo),m.createObjectStore(xo,{keyPath:SI,autoIncrement:!0}).createIndex(Mc,RI,{unique:!0});const A=g.store(xo),R=_.map(M=>A.put(M));return ge.waitFor(R)})}(e,o))),c=c.next(()=>{(function(m){m.createObjectStore(Ad,{keyPath:cF})})(e)})),r<5&&i>=5&&(c=c.next(()=>this.yi(o))),r<6&&i>=6&&(c=c.next(()=>(function(m){m.createObjectStore(Tf)}(e),this.wi(o)))),r<7&&i>=7&&(c=c.next(()=>this.Si(o))),r<8&&i>=8&&(c=c.next(()=>this.bi(e,o))),r<9&&i>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(c=c.next(()=>this.Di(o))),r<11&&i>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(pg,{keyPath:uF})})(e),function(m){m.createObjectStore(mg,{keyPath:dF})}(e)})),r<12&&i>=12&&(c=c.next(()=>{(function(m){const g=m.createObjectStore(gg,{keyPath:xF});g.createIndex(Gx,wF,{unique:!1}),g.createIndex(sN,vF,{unique:!1})})(e)})),r<13&&i>=13&&(c=c.next(()=>function(m){const g=m.createObjectStore(E0,{keyPath:nF});g.createIndex($m,rF),g.createIndex(tN,iF)}(e)).next(()=>this.Ci(e,o)).next(()=>e.deleteObjectStore(Sc))),r<14&&i>=14&&(c=c.next(()=>this.Fi(e,o))),r<15&&i>=15&&(c=c.next(()=>function(m){m.createObjectStore(Nv,{keyPath:hF,autoIncrement:!0}).createIndex(Hx,fF,{unique:!1}),m.createObjectStore(tf,{keyPath:pF}).createIndex(rN,mF,{unique:!1}),m.createObjectStore(nf,{keyPath:gF}).createIndex(iN,yF,{unique:!1})}(e))),r<16&&i>=16&&(c=c.next(()=>{t.objectStore(tf).clear()}).next(()=>{t.objectStore(nf).clear()})),r<17&&i>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(kv,{keyPath:_F})})(e)})),r<18&&i>=18&&ZS()&&(c=c.next(()=>{t.objectStore(tf).clear()}).next(()=>{t.objectStore(nf).clear()})),c}wi(e){let t=0;return e.store(Sc).ee((r,i)=>{t+=k0(i)}).next(()=>{const r={byteSize:t};return e.store(Tf).put(Wx,r)})}yi(e){const t=e.store(If),r=e.store(xo);return t.J().next(i=>ge.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,jc],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Mc,c).next(h=>ge.forEach(h,m=>{dt(m.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Pc(this.serializer,m);return lk(e,o.userId,g).next(()=>{})}))}))}Si(e){const t=e.store(Td),r=e.store(Sc);return e.store(Uc).get(b0).next(i=>{const o=[];return r.ee((c,h)=>{const m=new fn(c),g=function(_){return[0,Vi(_)]}(m);o.push(t.get(g).next(w=>w?ge.resolve():(_=>t.put({targetId:0,path:Vi(_),sequenceNumber:i.highestListenSequenceNumber}))(m)))}).next(()=>ge.waitFor(o))})}bi(e,t){e.createObjectStore(Af,{keyPath:lF});const r=t.store(Af),i=new Hv,o=c=>{if(i.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:Vi(m)})}};return t.store(Sc).ee({X:!0},(c,h)=>{const m=new fn(c);return o(m.popLast())}).next(()=>t.store(bd).ee({X:!0},([c,h,m],g)=>{const w=Wo(h);return o(w.popLast())}))}Di(e){const t=e.store(Id);return t.ee((r,i)=>{const o=Gh(i),c=rk(this.serializer,o);return t.put(c)})}Ci(e,t){const r=t.store(Sc),i=[];return r.ee((o,c)=>{const h=t.store(E0),m=function(_){return _.document?new Ke(fn.fromString(_.document.name).popFirst(5)):_.noDocument?Ke.fromSegments(_.noDocument.path):_.unknownDocument?Ke.fromSegments(_.unknownDocument.path):rt(36783)}(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(g))}).next(()=>ge.waitFor(i))}Fi(e,t){const r=t.store(xo),i=pk(this.serializer),o=new $v(Ag.mi,this.serializer.yt);return r.J().next(c=>{const h=new Map;return c.forEach(m=>{let g=h.get(m.userId)??Ft();Pc(this.serializer,m).keys().forEach(w=>g=g.add(w)),h.set(m.userId,g)}),ge.forEach(h,(m,g)=>{const w=new gi(g),_=Ig.wt(this.serializer,w),A=o.getIndexManager(w),R=Tg.wt(w,this.serializer,A,o.referenceDelegate);return new mk(i,R,_,A).recalculateAndSaveOverlaysForDocumentKeys(new $x(t,Qs.ce),m).next()})})}}function xT(n){n.createObjectStore(Td,{keyPath:oF}).createIndex(Rv,aF,{unique:!0}),n.createObjectStore(Id,{keyPath:"targetId"}).createIndex(nN,sF,{unique:!0}),n.createObjectStore(Uc)}const _l="IndexedDbPersistence",Fy=18e5,By=5e3,jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HB="main";class qv{constructor(e,t,r,i,o,c,h,m,g,w,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=h,this.xi=g,this.Oi=w,this.Ni=_,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!qv.v())throw new qe(Ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kB(this,i),this.$i=t+HB,this.serializer=new nk(m),this.Ui=new Ll(this.$i,this.Ni,new WB(this.serializer)),this.hi=new wB,this.Pi=new CB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pk(this.serializer),this.Ii=new xB,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&Ki(_l,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,jy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Qs(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Zl(e))return Be(_l,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be(_l,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Oh(e).get(Wu).next(t=>ge.resolve(this.es(t)))}ts(e){return wm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Fy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Qr(t,Ad);return r.J().next(i=>{const o=this.ss(i,Fy),c=i.filter(h=>o.indexOf(h)===-1);return ge.forEach(c,h=>r.delete(h.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ge.resolve(!0):Oh(e).get(Wu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,By)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||wm(e).J().next(r=>this.ss(r,By).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(o||c&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Be(_l,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[rp,Ad],e=>{const t=new $x(e,Qs.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>wm(e).J().next(t=>this.ss(t,Fy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Tg.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AB(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ig.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be(_l,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=function(m){return m===18?IF:m===17?cN:m===16?bF:m===15?Pv:m===14?lN:m===13?aN:m===12?EF:m===11?oN:void rt(60245)}(this.Ni);let c;return this.Ui.runTransaction(e,i,o,h=>(c=new $x(h,this.ci?this.ci.next():Qs.ce),t==="readwrite-primary"?this.Hi(c).next(m=>!!m||this.Yi(c)).next(m=>{if(!m)throw Ki(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new qe(Ce.FAILED_PRECONDITION,QR);return r(c)}).next(m=>this.Xi(c).next(()=>m)):this.Is(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Is(e){return Oh(e).get(Wu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,By)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(Ce.FAILED_PRECONDITION,jy)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oh(e).put(Wu,t)}static v(){return Ll.v()}Zi(e){const t=Oh(e);return t.get(Wu).next(r=>this.es(r)?(Be(_l,"Releasing primary lease."),t.delete(Wu)):ge.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Ki(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;QS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Be(_l,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ki(_l,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ki("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oh(n){return Qr(n,rp)}function wm(n){return Qr(n,Ad)}function GB(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ft(),i=Ft();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Kv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return QS()?8:JR(Yr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new $B;return this.Ss(e,t,c).next(h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ed()<=Xt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(ed()<=Xt.DEBUG&&Be("QueryEngine","Query:",td(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ed()<=Xt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Js(t))):ge.resolve())}ys(e,t){if(zI(t))return ge.resolve(null);let r=Js(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Jx(t,null,"F"),r=Js(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Ft(...o);return this.ps.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const g=this.Ds(t,h);return this.Cs(t,g,c,m.readTime)?this.ys(e,Jx(t,null,"F")):this.vs(e,g,t,m)}))})))}ws(e,t,r,i){return zI(t)||i.isEqual(yt.min())?ge.resolve(null):this.ps.getDocuments(e,r).next(o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,i)?ge.resolve(null):(ed()<=Xt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),td(t)),this.vs(e,c,t,qV(i,_f)).next(h=>h))})}Ds(e,t){let r=new En(RN(e));return t.forEach((i,o)=>{op(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ed()<=Xt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",td(t)),this.ps.getDocumentsMatchingQuery(e,t,Ms.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="LocalStore",qB=3e8;class KB{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new rr(kt),this.xs=new $a(o=>Jc(o),ip),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function yk(n,e,t,r){return new KB(n,e,t,r)}async function xk(n,e){const t=Pt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let m=Ft();for(const g of i){c.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}for(const g of o){h.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(r,m).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:h}))})})}function XB(n,e){const t=Pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(h,m,g,w){const _=g.batch,A=_.keys();let R=ge.resolve();return A.forEach(M=>{R=R.next(()=>w.getEntry(m,M)).next(D=>{const L=g.docVersions.get(M);dt(L!==null,48541),D.version.compareTo(L)<0&&(_.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),w.addEntry(D)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(m,_))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let m=Ft();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function wk(n){const e=Pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function YB(n,e){const t=Pt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((w,_)=>{const A=i.get(_);if(!A)return;h.push(t.Pi.removeMatchingKeys(o,w.removedDocuments,_).next(()=>t.Pi.addMatchingKeys(o,w.addedDocuments,_)));let R=A.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?R=R.withResumeToken(Br.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):w.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(w.resumeToken,r)),i=i.insert(_,R),function(D,L,G){return D.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=qB?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(A,R,w)&&h.push(t.Pi.updateTargetData(o,R))});let m=Ns(),g=Ft();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,w))}),h.push(QB(o,c,e.documentUpdates).next(w=>{m=w.ks,g=w.qs})),!r.isEqual(yt.min())){const w=t.Pi.getLastRemoteSnapshotVersion(o).next(_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(w)}return ge.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,g)).next(()=>m)}).then(o=>(t.Ms=i,o))}function QB(n,e,t){let r=Ft(),i=Ft();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Ns();return t.forEach((h,m)=>{const g=o.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Be(Xv,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)}),{ks:c,qs:i}})}function ZB(n,e){const t=Pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JB(n,e){const t=Pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,ge.resolve(i)):t.Pi.allocateTargetId(r).next(c=>(i=new Na(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function aw(n,e,t){const r=Pt(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Zl(c))throw c;Be(Xv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function wT(n,e,t){const r=Pt(n);let i=yt.min(),o=Ft();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,w){const _=Pt(m),A=_.xs.get(w);return A!==void 0?ge.resolve(_.Ms.get(A)):_.Pi.getTargetData(g,w)}(r,c,Js(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next(m=>{o=m})}).next(()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:yt.min(),t?o:Ft())).next(h=>(ej(r,BF(e),h),{documents:h,Qs:o})))}function ej(n,e,t){let r=n.Os.get(e)||yt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class vT{constructor(){this.activeTargetIds=GF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vk{constructor(){this.Mo=new vT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="ConnectivityMonitor";class ET{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Be(_T,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Be(_T,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm=null;function lw(){return vm===null?vm=function(){return 268435456+Math.round(2147483648*Math.random())}():vm++,"0x"+vm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="RestConnection",nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===I0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const c=lw(),h=this.zo(e,t.toUriEncodedString());Be(Uy,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,o);const{host:g}=new URL(h),w=Xl(g);return this.Jo(e,h,m,r,w).then(_=>(Be(Uy,`Received RPC '${e}' ${c}: `,_),_),_=>{throw Qc(Uy,`RPC '${e}' ${c} failed with error: `,_,"url: ",h,"request:",r),_})}Ho(e,t,r,i,o,c){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=nj[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="WebChannelConnection";class sj extends rj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const c=lw();return new Promise((h,m)=>{const g=new jR;g.setWithCredentials(!0),g.listenOnce(UR.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Wm.NO_ERROR:const _=g.getResponseJson();Be(Pi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),h(_);break;case Wm.TIMEOUT:Be(Pi,`RPC '${e}' ${c} timed out`),m(new qe(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case Wm.HTTP_ERROR:const A=g.getStatus();if(Be(Pi,`RPC '${e}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const D=function(G){const z=G.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(z)>=0?z:Ce.UNKNOWN}(M.status);m(new qe(D,M.message))}else m(new qe(Ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new qe(Ce.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Be(Pi,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(i);Be(Pi,`RPC '${e}' ${c} sending request:`,i),g.send(t,"POST",w,r,15)})}T_(e,t,r){const i=lw(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=HR(),h=WR(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Be(Pi,`Creating RPC '${e}' stream ${i}: ${w}`,m);const _=c.createWebChannel(w,m);this.I_(_);let A=!1,R=!1;const M=new ij({Yo:L=>{R?Be(Pi,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(A||(Be(Pi,`Opening RPC '${e}' stream ${i} transport.`),_.open(),A=!0),Be(Pi,`RPC '${e}' stream ${i} sending:`,L),_.send(L))},Zo:()=>_.close()}),D=(L,G,z)=>{L.listen(G,H=>{try{z(H)}catch(Y){setTimeout(()=>{throw Y},0)}})};return D(_,zh.EventType.OPEN,()=>{R||(Be(Pi,`RPC '${e}' stream ${i} transport opened.`),M.o_())}),D(_,zh.EventType.CLOSE,()=>{R||(R=!0,Be(Pi,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(_))}),D(_,zh.EventType.ERROR,L=>{R||(R=!0,Qc(Pi,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),M.a_(new qe(Ce.UNAVAILABLE,"The operation could not be completed")))}),D(_,zh.EventType.MESSAGE,L=>{var G;if(!R){const z=L.data[0];dt(!!z,16349);const H=z,Y=(H==null?void 0:H.error)||((G=H[0])==null?void 0:G.error);if(Y){Be(Pi,`RPC '${e}' stream ${i} received error:`,Y);const re=Y.status;let ie=function(W){const Z=Mr[W];if(Z!==void 0)return zN(Z)}(re),V=Y.message;ie===void 0&&(ie=Ce.INTERNAL,V="Unknown error status: "+re+" with message "+Y.message),R=!0,M.a_(new qe(ie,V)),_.close()}else Be(Pi,`RPC '${e}' stream ${i} received:`,z),M.u_(z)}}),D(h,zR.STAT_EVENT,L=>{L.stat===jx.PROXY?Be(Pi,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===jx.NOPROXY&&Be(Pi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(){return typeof window<"u"?window:null}function Jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n){return new aB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="PersistentStream";class Ek{constructor(e,t,r,i,o,c,h,m){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _k(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new qe(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Be(bT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Be(bT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aj extends Ek{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=uB(this.serializer,e),r=function(o){if(!("targetChange"in o))return yt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?yt.min():c.readTime?Qi(c.readTime):yt.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=nw(this.serializer),t.addTarget=function(o,c){let h;const m=c.target;if(h=T0(m)?{documents:YN(o,m)}:{query:QN(o,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=GN(o,c.resumeToken);const g=ew(o,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(yt.min())>0){h.readTime=Od(o,c.snapshotVersion.toTimestamp());const g=ew(o,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const r=hB(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=nw(this.serializer),t.removeTarget=e,this.q_(t)}}class lj extends Ek{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dB(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=nw(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>S0(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{}class uj extends cj{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Go(e,tw(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(Ce.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Ho(e,tw(t,r),i,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(Ce.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ki(t),this.aa=!1):Be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="RemoteStore";class hj{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(c=>{r.enqueueAndForget(async()=>{yu(this)&&(Be(ru,"Restarting streams for network reachability change."),await async function(m){const g=Pt(m);g.Ea.add(4),await lp(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Sg(g)}(this))})}),this.Ra=new dj(r,i)}}async function Sg(n){if(yu(n))for(const e of n.da)await e(!0)}async function lp(n){for(const e of n.da)await e(!1)}function bk(n,e){const t=Pt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jv(t)?Zv(t):qd(t).O_()&&Qv(t,e))}function Yv(n,e){const t=Pt(n),r=qd(t);t.Ia.delete(e),r.O_()&&Ik(t,e),t.Ia.size===0&&(r.O_()?r.L_():yu(t)&&t.Ra.set("Unknown"))}function Qv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qd(n).Y_(e)}function Ik(n,e){n.Va.Ue(e),qd(n).Z_(e)}function Zv(n){n.Va=new rB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qd(n).start(),n.Ra.ua()}function Jv(n){return yu(n)&&!qd(n).x_()&&n.Ia.size>0}function yu(n){return Pt(n).Ea.size===0}function Tk(n){n.Va=void 0}async function fj(n){n.Ra.set("Online")}async function pj(n){n.Ia.forEach((e,t)=>{Qv(n,e)})}async function mj(n,e){Tk(n),Jv(n)?(n.Ra.ha(e),Zv(n)):n.Ra.set("Unknown")}async function gj(n,e,t){if(n.Ra.set("Online"),e instanceof HN&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,c),i.Ia.delete(h),i.Va.removeTarget(h))}(n,e)}catch(r){Be(ru,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await D0(n,r)}else if(e instanceof Qm?n.Va.Ze(e):e instanceof WN?n.Va.st(e):n.Va.tt(e),!t.isEqual(yt.min()))try{const r=await wk(n.localStore);t.compareTo(r)>=0&&await function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const w=o.Ia.get(g);w&&o.Ia.set(g,w.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,g)=>{const w=o.Ia.get(m);if(!w)return;o.Ia.set(m,w.withResumeToken(Br.EMPTY_BYTE_STRING,w.snapshotVersion)),Ik(o,m);const _=new Na(w.target,m,g,w.sequenceNumber);Qv(o,_)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){Be(ru,"Failed to raise snapshot:",r),await D0(n,r)}}async function D0(n,e,t){if(!Zl(e))throw e;n.Ea.add(1),await lp(n),n.Ra.set("Offline"),t||(t=()=>wk(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Be(ru,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sg(n)})}function Ak(n,e){return e().catch(t=>D0(n,t,e))}async function cp(n){const e=Pt(n),t=zl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jc;for(;yj(e);)try{const i=await ZB(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,xj(e,i)}catch(i){await D0(e,i)}Ck(e)&&Sk(e)}function yj(n){return yu(n)&&n.Ta.length<10}function xj(n,e){n.Ta.push(e);const t=zl(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ck(n){return yu(n)&&!zl(n).x_()&&n.Ta.length>0}function Sk(n){zl(n).start()}async function wj(n){zl(n).ra()}async function vj(n){const e=zl(n);for(const t of n.Ta)e.ea(t.mutations)}async function _j(n,e,t){const r=n.Ta.shift(),i=Bv.from(r,e,t);await Ak(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await cp(n)}async function Ej(n,e){e&&zl(n).X_&&await async function(r,i){if(function(c){return eB(c)&&c!==Ce.ABORTED}(i.code)){const o=r.Ta.shift();zl(r).B_(),await Ak(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await cp(r)}}(n,e),Ck(n)&&Sk(n)}async function IT(n,e){const t=Pt(n);t.asyncQueue.verifyOperationInProgress(),Be(ru,"RemoteStore received new credentials");const r=yu(t);t.Ea.add(3),await lp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sg(t)}async function bj(n,e){const t=Pt(n);e?(t.Ea.delete(2),await Sg(t)):e||(t.Ea.add(2),await lp(t),t.Ra.set("Unknown"))}function qd(n){return n.ma||(n.ma=function(t,r,i){const o=Pt(t);return o.sa(),new aj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:fj.bind(null,n),t_:pj.bind(null,n),r_:mj.bind(null,n),H_:gj.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Jv(n)?Zv(n):n.Ra.set("Unknown")):(await n.ma.stop(),Tk(n))})),n.ma}function zl(n){return n.fa||(n.fa=function(t,r,i){const o=Pt(t);return o.sa(),new lj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:wj.bind(null,n),r_:Ej.bind(null,n),ta:vj.bind(null,n),na:_j.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await cp(n)):(await n.fa.stop(),n.Ta.length>0&&(Be(ru,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new e2(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t2(n,e){if(Ki("AsyncQueue",`${e}: ${n}`),Zl(n))return new qe(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{static emptySet(e){return new md(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Wh(),this.sortedSet=new rr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new md;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.ga=new rr(Ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Md{constructor(e,t,r,i,o,c,h,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Md(e,t,md.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Tj{constructor(){this.queries=AT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Pt(t),o=i.queries;i.queries=AT(),o.forEach((c,h)=>{for(const m of h.Sa)m.onError(r)})})(this,new qe(Ce.ABORTED,"Firestore shutting down"))}}function AT(){return new $a(n=>SN(n),wg)}async function n2(n,e){const t=Pt(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Ij,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const h=t2(c,`Initialization of query '${td(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&i2(t)}async function r2(n,e){const t=Pt(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Aj(n,e){const t=Pt(n);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(i)&&(r=!0);c.wa=i}}r&&i2(t)}function Cj(n,e,t){const r=Pt(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function i2(n){n.Ca.forEach(e=>{e.next()})}var cw,CT;(CT=cw||(cw={})).Ma="default",CT.Cache="cache";class s2{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Md(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.key=e}}class Nk{constructor(e){this.key=e}}class Sj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ft(),this.mutatedKeys=Ft(),this.eu=RN(e),this.tu=new md(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new TT,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,_)=>{const A=i.get(w),R=op(this.query,_)?_:null,M=!!A&&this.mutatedKeys.has(A.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;A&&R?A.data.isEqual(R.data)?M!==D&&(r.track({type:3,doc:R}),L=!0):this.su(A,R)||(r.track({type:2,doc:R}),L=!0,(m&&this.eu(R,m)>0||g&&this.eu(R,g)<0)&&(h=!0)):!A&&R?(r.track({type:0,doc:R}),L=!0):A&&!R&&(r.track({type:1,doc:A}),L=!0,(m||g)&&(h=!0)),L&&(R?(c=c.add(R),o=D?o.add(w):o.delete(w)):(c=c.delete(w),o=o.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{tu:c,iu:r,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((w,_)=>function(R,M){const D=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:L})}};return D(R)-D(M)}(w.type,_.type)||this.eu(w.doc,_.doc)),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Md(this.query,e.tu,o,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ft(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Nk(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Rk(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ft();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Md.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const o2="SyncEngine";class Rj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Nj{constructor(e){this.key=e,this.hu=!1}}class kj{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new $a(h=>SN(h),wg),this.Iu=new Map,this.Eu=new Set,this.du=new rr(Ke.comparator),this.Au=new Map,this.Ru=new Gv,this.Vu={},this.mu=new Map,this.fu=nu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Pj(n,e,t=!0){const r=Lk(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await kk(r,e,t,!0),i}async function Dj(n,e){const t=Lk(n);await kk(t,e,!0,!1)}async function kk(n,e,t,r){const i=await JB(n.localStore,Js(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await Oj(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&bk(n.remoteStore,i),h}async function Oj(n,e,t,r,i){n.pu=(_,A,R)=>async function(D,L,G,z){let H=L.view.ru(G);H.Cs&&(H=await wT(D.localStore,L.query,!1).then(({documents:V})=>L.view.ru(V,H)));const Y=z&&z.targetChanges.get(L.targetId),re=z&&z.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(H,D.isPrimaryClient,Y,re);return RT(D,L.targetId,ie.au),ie.snapshot}(n,_,A,R);const o=await wT(n.localStore,e,!0),c=new Sj(e,o.Qs),h=c.ru(o.documents),m=ap.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),g=c.applyChanges(h,n.isPrimaryClient,m);RT(n,t,g.au);const w=new Rj(e,t,c);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function Mj(n,e,t){const r=Pt(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(c=>!wg(c,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await aw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Yv(r.remoteStore,i.targetId),uw(r,i.targetId)}).catch(gu)):(uw(r,i.targetId),await aw(r.localStore,i.targetId,!0))}async function Lj(n,e){const t=Pt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yv(t.remoteStore,r.targetId))}async function Vj(n,e,t){const r=Vk(n);try{const i=await function(c,h){const m=Pt(c),g=vn.now(),w=h.reduce((R,M)=>R.add(M.key),Ft());let _,A;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Ns(),D=Ft();return m.Ns.getEntries(R,w).next(L=>{M=L,M.forEach((G,z)=>{z.isValidDocument()||(D=D.add(G))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,M)).next(L=>{_=L;const G=[];for(const z of h){const H=ZF(z,_.get(z.key).overlayedDocument);H!=null&&G.push(new qa(z.key,H,wN(H.value.mapValue),Xi.exists(!0)))}return m.mutationQueue.addMutationBatch(R,g,G,h)}).next(L=>{A=L;const G=L.applyToLocalDocumentSet(_,D);return m.documentOverlayCache.saveOverlays(R,L.batchId,G)})}).then(()=>({batchId:A.batchId,changes:kN(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,h,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new rr(kt)),g=g.insert(h,m),c.Vu[c.currentUser.toKey()]=g}(r,i.batchId,t),await up(r,i.changes),await cp(r.remoteStore)}catch(i){const o=t2(i,"Failed to persist write");t.reject(o)}}async function Pk(n,e){const t=Pt(n);try{const r=await YB(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.Au.get(o);c&&(dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?dt(c.hu,14607):i.removedDocuments.size>0&&(dt(c.hu,42227),c.hu=!1))}),await up(t,r,e)}catch(r){await gu(r)}}function ST(n,e,t){const r=Pt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,c)=>{const h=c.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(c,h){const m=Pt(c);m.onlineState=h;let g=!1;m.queries.forEach((w,_)=>{for(const A of _.Sa)A.va(h)&&(g=!0)}),g&&i2(m)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Fj(n,e,t){const r=Pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new rr(Ke.comparator);c=c.insert(o,wr.newNoDocument(o,yt.min()));const h=Ft().add(o),m=new bg(yt.min(),new Map,new rr(kt),c,h);await Pk(r,m),r.du=r.du.remove(o),r.Au.delete(e),a2(r)}else await aw(r.localStore,e,!1).then(()=>uw(r,e,t)).catch(gu)}async function Bj(n,e){const t=Pt(n),r=e.batch.batchId;try{const i=await XB(t.localStore,e);Ok(t,r,null),Dk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await up(t,i)}catch(i){await gu(i)}}async function jj(n,e,t){const r=Pt(n);try{const i=await function(c,h){const m=Pt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return m.mutationQueue.lookupMutationBatch(g,h).next(_=>(dt(_!==null,37113),w=_.keys(),m.mutationQueue.removeMutationBatch(g,_))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,w,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w)).next(()=>m.localDocuments.getDocuments(g,w))})}(r.localStore,e);Ok(r,e,t),Dk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await up(r,i)}catch(i){await gu(i)}}function Dk(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function Ok(n,e,t){const r=Pt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function uw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||Mk(n,r)})}function Mk(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),a2(n))}function RT(n,e,t){for(const r of t)r instanceof Rk?(n.Ru.addReference(r.key,e),Uj(n,r)):r instanceof Nk?(Be(o2,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Mk(n,r.key)):rt(19791,{wu:r})}function Uj(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Be(o2,"New document in limbo: "+t),n.Eu.add(r),a2(n))}function a2(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ke(fn.fromString(e)),r=n.fu.next();n.Au.set(r,new Nj(t)),n.du=n.du.insert(t,r),bk(n.remoteStore,new Na(Js(sp(t.path)),r,"TargetPurposeLimboResolution",Qs.ce))}}async function up(n,e,t){const r=Pt(n),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach((h,m)=>{c.push(r.pu(m,e,t).then(g=>{var w;if((g||t)&&r.isPrimaryClient){const _=g?!g.fromCache:(w=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:w.current;r.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){i.push(g);const _=Kv.As(m.targetId,g);o.push(_)}}))}),await Promise.all(c),r.Pu.H_(i),await async function(m,g){const w=Pt(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>ge.forEach(g,A=>ge.forEach(A.Es,R=>w.persistence.referenceDelegate.addReference(_,A.targetId,R)).next(()=>ge.forEach(A.ds,R=>w.persistence.referenceDelegate.removeReference(_,A.targetId,R)))))}catch(_){if(!Zl(_))throw _;Be(Xv,"Failed to update sequence numbers: "+_)}for(const _ of g){const A=_.targetId;if(!_.fromCache){const R=w.Ms.get(A),M=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(M);w.Ms=w.Ms.insert(A,D)}}}(r.localStore,o))}async function zj(n,e){const t=Pt(n);if(!t.currentUser.isEqual(e)){Be(o2,"User change. New user:",e.toKey());const r=await xk(t.localStore,e);t.currentUser=e,function(o,c){o.mu.forEach(h=>{h.forEach(m=>{m.reject(new qe(Ce.CANCELLED,c))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await up(t,r.Ls)}}function Wj(n,e){const t=Pt(n),r=t.Au.get(e);if(r&&r.hu)return Ft().add(r.key);{let i=Ft();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const h=t.Tu.get(c);i=i.unionWith(h.view.nu)}return i}}function Lk(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fj.bind(null,e),e.Pu.H_=Aj.bind(null,e.eventManager),e.Pu.yu=Cj.bind(null,e.eventManager),e}function Vk(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jj.bind(null,e),e}class Df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yk(this.persistence,new gk,e.initialUser,this.serializer)}Cu(e){return new $v(Ag.mi,this.serializer)}Du(e){return new vk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Df.provider={build:()=>new Df};class Hj extends Df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof P0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dk(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new $v(r=>P0.mi(r,t),this.serializer)}}class Gj extends Df{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Vk(this.xu.syncEngine),await cp(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return yk(this.persistence,new gk,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new dk(r,e.asyncQueue,t)}Mu(e,t){const r=new QV(t,this.persistence);return new YV(e.asyncQueue,r)}Cu(e){const t=GB(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new qv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oj(),Jm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new vk}}class O0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ST(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zj.bind(null,this.syncEngine),await bj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Tj}()}createDatastore(e){const t=Cg(e.databaseInfo.databaseId),r=function(o){return new sj(o)}(e.databaseInfo);return function(o,c,h,m){return new uj(o,c,h,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,c,h){return new hj(r,i,o,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>ST(this.syncEngine,t,0),function(){return ET.v()?new ET:new tj}())}createSyncEngine(e,t){return function(i,o,c,h,m,g,w){const _=new kj(i,o,c,h,m,g);return w&&(_.gu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Pt(i);Be(ru,"RemoteStore shutting down."),o.Ea.add(5),await lp(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}O0.provider={build:()=>new O0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="FirestoreClient";class $j{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=Av.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Be(Wl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Be(Wl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=t2(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zy(n,e){n.asyncQueue.verifyOperationInProgress(),Be(Wl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function NT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await qj(n);Be(Wl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>IT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>IT(e.remoteStore,i)),n._onlineComponents=e}async function qj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be(Wl,"Using user provided OfflineComponentProvider");try{await zy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qc("Error using user provided cache. Falling back to memory cache: "+t),await zy(n,new Df)}}else Be(Wl,"Using default OfflineComponentProvider"),await zy(n,new Hj(void 0));return n._offlineComponents}async function Fk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be(Wl,"Using user provided OnlineComponentProvider"),await NT(n,n._uninitializedComponentsProvider._online)):(Be(Wl,"Using default OnlineComponentProvider"),await NT(n,new O0))),n._onlineComponents}function Kj(n){return Fk(n).then(e=>e.syncEngine)}async function M0(n){const e=await Fk(n),t=e.eventManager;return t.onListen=Pj.bind(null,e.syncEngine),t.onUnlisten=Mj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Dj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Lj.bind(null,e.syncEngine),t}function Xj(n,e,t={}){const r=new Xo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,m,g){const w=new l2({next:A=>{w.Nu(),c.enqueueAndForget(()=>r2(o,_));const R=A.docs.has(h);!R&&A.fromCache?g.reject(new qe(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&A.fromCache&&m&&m.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),_=new s2(sp(h.path),w,{includeMetadataChanges:!0,qa:!0});return n2(o,_)}(await M0(n),n.asyncQueue,e,t,r)),r.promise}function Yj(n,e,t={}){const r=new Xo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,m,g){const w=new l2({next:A=>{w.Nu(),c.enqueueAndForget(()=>r2(o,_)),A.fromCache&&m.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),_=new s2(h,w,{includeMetadataChanges:!0,qa:!0});return n2(o,_)}(await M0(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="firestore.googleapis.com",PT=!0;class DT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jk,this.ssl=PT}else this.host=e.host,this.ssl=e.ssl??PT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ak;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SB)throw new qe(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LV;switch(r.type){case"firstParty":return new jV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=kT.get(t);r&&(Be("ComponentProvider","Removing Datastore"),kT.delete(t),r.terminate())}(this),Promise.resolve()}}function Qj(n,e,t,r={}){var g;n=Ps(n,Rg);const i=Xl(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(fv(`https://${h}`),pv("Firestore",!0)),o.host!==jk&&o.host!==h&&Qc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:i,emulatorOptions:r};if(!Bl(m,c)&&(n._setSettings(m),r.mockUserToken)){let w,_;if(typeof r.mockUserToken=="string")w=r.mockUserToken,_=gi.MOCK_USER;else{w=KS(r.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new qe(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new gi(A)}n._authCredentials=new VV(new $R(w,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ec(this.firestore,e,this._query)}}class Pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}toJSON(){return{type:Pr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(np(t,Pr._jsonSchema))return new Pr(e,r||null,new Ke(fn.fromString(t.referencePath)))}}Pr._jsonSchemaVersion="firestore/documentReference/1.0",Pr._jsonSchema={type:Fr("string",Pr._jsonSchemaVersion),referencePath:Fr("string")};class Vl extends ec{constructor(e,t,r){super(e,t,sp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new Ke(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function ps(n,e,...t){if(n=Vn(n),KR("collection","path",e),n instanceof Rg){const r=fn.fromString(e,...t);return bI(r),new Vl(n,null,r)}{if(!(n instanceof Pr||n instanceof Vl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return bI(r),new Vl(n.firestore,null,r)}}function Zs(n,e,...t){if(n=Vn(n),arguments.length===1&&(e=Av.newId()),KR("doc","path",e),n instanceof Rg){const r=fn.fromString(e,...t);return EI(r),new Pr(n,null,new Ke(r))}{if(!(n instanceof Pr||n instanceof Vl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return EI(r),new Pr(n.firestore,n instanceof Vl?n.converter:null,new Ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="AsyncQueue";class MT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _k(this,"async_queue_retry"),this._c=()=>{const r=Jm();r&&Be(OT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Jm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Jm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Xo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zl(e))throw e;Be(OT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ki("INTERNAL UNHANDLED ERROR: ",LT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=e2.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&rt(47125,{Pc:LT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function LT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Ba extends Rg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new MT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MT(e),this._firestoreClient=void 0,await e}}}function Zj(n,e){const t=typeof n=="object"?n:ag(),r=typeof n=="string"?n:I0,i=Yl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=GS("firestore");o&&Qj(i,...o)}return i}function Ng(n){if(n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Uk(n),n._firestoreClient}function Uk(n){var r,i,o;const e=n._freezeSettings(),t=function(h,m,g,w){return new AF(h,m,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,Bk(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new $j(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(n._componentsProvider))}function Jj(n,e){Qc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return eU(n,O0.provider,{build:r=>new Gj(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function eU(n,e,t){if((n=Ps(n,Ba))._firestoreClient||n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new qe(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Uk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ys(Br.fromBase64String(e))}catch(t){throw new qe(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ys(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ys._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(np(e,Ys._jsonSchema))return Ys.fromBase64String(e.bytes)}}Ys._jsonSchemaVersion="firestore/bytes/1.0",Ys._jsonSchema={type:Fr("string",Ys._jsonSchemaVersion),bytes:Fr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yo._jsonSchemaVersion}}static fromJSON(e){if(np(e,Yo._jsonSchema))return new Yo(e.latitude,e.longitude)}}Yo._jsonSchemaVersion="firestore/geoPoint/1.0",Yo._jsonSchema={type:Fr("string",Yo._jsonSchemaVersion),latitude:Fr("number"),longitude:Fr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Qo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(np(e,Qo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Qo(e.vectorValues);throw new qe(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qo._jsonSchemaVersion="firestore/vectorValue/1.0",Qo._jsonSchema={type:Fr("string",Qo._jsonSchemaVersion),vectorValues:Fr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=/^__.*__$/;class nU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new qa(e,this.data,this.fieldMask,t,this.fieldTransforms):new $d(e,this.data,t,this.fieldTransforms)}}class zk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:n})}}class c2{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new c2({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return L0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Wk(this.Ac)&&tU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cg(e)}Cc(e,t,r,i=!1){return new c2({Ac:e,methodName:t,Dc:r,path:lr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u2(n){const e=n._freezeSettings(),t=Cg(n._databaseId);return new rU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iU(n,e,t,r,i,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);h2("Data must be an object, but it was:",c,r);const h=Hk(r,c);let m,g;if(o.merge)m=new ds(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const w=[];for(const _ of o.mergeFields){const A=dw(e,_,t);if(!c.contains(A))throw new qe(Ce.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);$k(w,A)||w.push(A)}m=new ds(w),g=c.fieldTransforms.filter(_=>m.covers(_.field))}else m=null,g=c.fieldTransforms;return new nU(new Oi(h),m,g)}class Dg extends Pg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dg}}class d2 extends Pg{_toFieldTransform(e){return new FN(e.path,new kd)}isEqual(e){return e instanceof d2}}function sU(n,e,t,r){const i=n.Cc(1,e,t);h2("Data must be an object, but it was:",i,r);const o=[],c=Oi.empty();Jl(r,(m,g)=>{const w=f2(e,m,t);g=Vn(g);const _=i.yc(w);if(g instanceof Dg)o.push(w);else{const A=dp(g,_);A!=null&&(o.push(w),c.set(w,A))}});const h=new ds(o);return new zk(c,h,i.fieldTransforms)}function oU(n,e,t,r,i,o){const c=n.Cc(1,e,t),h=[dw(e,r,t)],m=[i];if(o.length%2!=0)throw new qe(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<o.length;A+=2)h.push(dw(e,o[A])),m.push(o[A+1]);const g=[],w=Oi.empty();for(let A=h.length-1;A>=0;--A)if(!$k(g,h[A])){const R=h[A];let M=m[A];M=Vn(M);const D=c.yc(R);if(M instanceof Dg)g.push(R);else{const L=dp(M,D);L!=null&&(g.push(R),w.set(R,L))}}const _=new ds(g);return new zk(w,_,c.fieldTransforms)}function aU(n,e,t,r=!1){return dp(t,n.Cc(r?4:3,e))}function dp(n,e){if(Gk(n=Vn(n)))return h2("Unsupported field value:",e,n),Hk(n,e);if(n instanceof Pg)return function(r,i){if(!Wk(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const h of r){let m=dp(h,i.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $F(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vn.fromDate(r);return{timestampValue:Od(i.serializer,o)}}if(r instanceof vn){const o=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Od(i.serializer,o)}}if(r instanceof Yo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ys)return{bytesValue:GN(i.serializer,r._byteString)};if(r instanceof Pr){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qo)return function(c,h){return{mapValue:{fields:{[Ov]:{stringValue:Mv},[Cd]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Vv(h.serializer,g)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${dg(r)}`)}(n,e)}function Hk(n,e){const t={};return uN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jl(n,(r,i)=>{const o=dp(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Gk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof Yo||n instanceof Ys||n instanceof Pr||n instanceof Pg||n instanceof Qo)}function h2(n,e,t){if(!Gk(t)||!XR(t)){const r=dg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function dw(n,e,t){if((e=Vn(e))instanceof kg)return e._internalPath;if(typeof e=="string")return f2(n,e);throw L0("Field path arguments must be of type string or ",n,!1,void 0,t)}const lU=new RegExp("[~\\*/\\[\\]]");function f2(n,e,t){if(e.search(lU)>=0)throw L0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kg(...e.split("."))._internalPath}catch{throw L0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function L0(n,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new qe(Ce.INVALID_ARGUMENT,h+n+m)}function $k(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Og("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class cU extends qk{data(){return super.data()}}function Og(n,e){return typeof e=="string"?f2(n,e):e instanceof kg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new qe(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p2{}class Xk extends p2{}function Vr(n,e,...t){let r=[];e instanceof p2&&r.push(e),r=r.concat(t),function(o){const c=o.filter(m=>m instanceof m2).length,h=o.filter(m=>m instanceof Mg).length;if(c>1||c>0&&h>0)throw new qe(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Mg extends Xk{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mg(e,t,r)}_apply(e){const t=this._parse(e);return Yk(e._query,t),new ec(e.firestore,e.converter,Zx(e._query,t))}_parse(e){const t=u2(e.firestore);return function(o,c,h,m,g,w,_){let A;if(g.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){jT(_,w);const M=[];for(const D of _)M.push(BT(m,o,D));A={arrayValue:{values:M}}}else A=BT(m,o,_)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||jT(_,w),A=aU(h,c,_,w==="in"||w==="not-in");return Yt.create(g,w,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kr(n,e,t){const r=e,i=Og("where",n);return Mg._create(i,r,t)}class m2 extends p2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new m2(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let c=i;const h=o.getFlattenedFilters();for(const m of h)Yk(c,m),c=Zx(c,m)}(e._query,t),new ec(e.firestore,e.converter,Zx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class g2 extends Xk{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new g2(e,t)}_apply(e){const t=function(i,o,c){if(i.startAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kf(o,c)}(e._query,this._field,this._direction);return new ec(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new Gd(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function FT(n,e="asc"){const t=e,r=Og("orderBy",n);return g2._create(r,t)}function BT(n,e,t){if(typeof(t=Vn(t))=="string"){if(t==="")throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CN(e)&&t.indexOf("/")!==-1)throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ke.isDocumentKey(r))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rf(n,new Ke(r))}if(t instanceof Pr)return Rf(n,t._key);throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dg(t)}.`)}function jT(n,e){if(!Array.isArray(n)||n.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Yk(n,e){const t=function(i,o){for(const c of i)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class uU{convertValue(e,t="none"){switch(jl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var r,i,o;const t=(o=(i=(r=e.fields)==null?void 0:r[Cd].arrayValue)==null?void 0:i.values)==null?void 0:o.map(c=>tr(c.doubleValue));return new Qo(t)}convertGeoPoint(e){return new Yo(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cf(e));default:return null}}convertTimestamp(e){const t=Va(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);dt(tk(r),9688,{name:e});const i=new Zc(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(t)||Ki(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class $h{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends qk{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Og("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wc._jsonSchema={type:Fr("string",Wc._jsonSchemaVersion),bundleSource:Fr("string","DocumentSnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class e0 extends Wc{data(e={}){return super.data(e)}}class Hc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $h(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new e0(this._firestore,this._userDataWriter,r.key,r,new $h(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(h=>{const m=new e0(i._firestore,i._userDataWriter,h.doc.key,h.doc,new $h(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const m=new e0(i._firestore,i._userDataWriter,h.doc.key,h.doc,new $h(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,w=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),w=c.indexOf(h.doc.key)),{type:hU(h.type),doc:m,oldIndex:g,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Av.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(n){n=Ps(n,Pr);const e=Ps(n.firestore,Ba);return Xj(Ng(e),n._key).then(t=>Qk(e,n,t))}Hc._jsonSchemaVersion="firestore/querySnapshot/1.0",Hc._jsonSchema={type:Fr("string",Hc._jsonSchemaVersion),bundleSource:Fr("string","QuerySnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class x2 extends uU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,t)}}function hp(n){n=Ps(n,ec);const e=Ps(n.firestore,Ba),t=Ng(e),r=new x2(e);return Kk(n._query),Yj(t,n._query).then(i=>new Hc(e,r,n,i))}function V0(n,e,t,...r){n=Ps(n,Pr);const i=Ps(n.firestore,Ba),o=u2(i);let c;return c=typeof(e=Vn(e))=="string"||e instanceof kg?oU(o,"updateDoc",n._key,e,t,r):sU(o,"updateDoc",n._key,e),w2(i,[c.toMutation(n._key,Xi.exists(!0))])}function Lg(n){return w2(Ps(n.firestore,Ba),[new Eg(n._key,Xi.none())])}function Kd(n,e){const t=Ps(n.firestore,Ba),r=Zs(n),i=dU(n.converter,e);return w2(t,[iU(u2(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Xi.exists(!1))]).then(()=>r)}function fU(n,...e){var m,g,w;n=Vn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||VT(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(VT(e[r])){const _=e[r];e[r]=(m=_.next)==null?void 0:m.bind(_),e[r+1]=(g=_.error)==null?void 0:g.bind(_),e[r+2]=(w=_.complete)==null?void 0:w.bind(_)}let o,c,h;if(n instanceof Pr)c=Ps(n.firestore,Ba),h=sp(n._key.path),o={next:_=>{e[r]&&e[r](Qk(c,n,_))},error:e[r+1],complete:e[r+2]};else{const _=Ps(n,ec);c=Ps(_.firestore,Ba),h=_._query;const A=new x2(c);o={next:R=>{e[r]&&e[r](new Hc(c,A,_,R))},error:e[r+1],complete:e[r+2]},Kk(n._query)}return function(A,R,M,D){const L=new l2(D),G=new s2(R,L,M);return A.asyncQueue.enqueueAndForget(async()=>n2(await M0(A),G)),()=>{L.Nu(),A.asyncQueue.enqueueAndForget(async()=>r2(await M0(A),G))}}(Ng(c),h,i,o)}function w2(n,e){return function(r,i){const o=new Xo;return r.asyncQueue.enqueueAndForget(async()=>Vj(await Kj(r),i,o)),o.promise}(Ng(n),e)}function Qk(n,e,t){const r=t.docs.get(e._key),i=new x2(n);return new Wc(n,i,e._key,r,new $h(t.hasPendingWrites,t.fromCache),e.converter)}function vo(){return new d2("serverTimestamp")}(function(e,t=!0){(function(i){Hd=i})(pu),_o(new to("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),h=new Ba(new FV(r.getProvider("auth-internal")),new UV(c,r.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new qe(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(g.options.projectId,w)}(c,i),c);return o={useFetchStreams:t,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),fs(xI,wI,e),fs(xI,wI,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="firebasestorage.googleapis.com",Jk="storageBucket",pU=120*1e3,mU=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends ro{constructor(e,t,r=0){super(Wy(e),`Firebase Storage: ${t} (${Wy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vr||(vr={}));function Wy(n){return"storage/"+n}function v2(){const n="An unknown error occurred, please check the error payload for server response.";return new _r(vr.UNKNOWN,n)}function gU(n){return new _r(vr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function yU(n){return new _r(vr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xU(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _r(vr.UNAUTHENTICATED,n)}function wU(){return new _r(vr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function vU(n){return new _r(vr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function _U(){return new _r(vr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EU(){return new _r(vr.CANCELED,"User canceled the upload/download.")}function bU(n){return new _r(vr.INVALID_URL,"Invalid URL '"+n+"'.")}function IU(n){return new _r(vr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function TU(){return new _r(vr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jk+"' property when initializing the app?")}function AU(){return new _r(vr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CU(){return new _r(vr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SU(n){return new _r(vr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hw(n){return new _r(vr.INVALID_ARGUMENT,n)}function e3(){return new _r(vr.APP_DELETED,"The Firebase app was deleted.")}function RU(n){return new _r(vr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lf(n,e){return new _r(vr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Mh(n){throw new _r(vr.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ks.makeFromUrl(e,t)}catch{return new ks(e,"")}if(r.path==="")return r;throw IU(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+i+c,"i"),m={bucket:1,path:3};function g(Y){Y.path_=decodeURIComponent(Y.path)}const w="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",R=new RegExp(`^https?://${_}/${w}/b/${i}/o${A}`,"i"),M={bucket:1,path:3},D=t===Zk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",G=new RegExp(`^https?://${D}/${i}/${L}`,"i"),H=[{regex:h,indices:m,postModify:o},{regex:R,indices:M,postModify:g},{regex:G,indices:{bucket:1,path:2},postModify:g}];for(let Y=0;Y<H.length;Y++){const re=H[Y],ie=re.regex.exec(e);if(ie){const V=ie[re.indices.bucket];let B=ie[re.indices.path];B||(B=""),r=new ks(V,B),re.postModify(r);break}}if(r==null)throw bU(e);return r}}class NU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(n,e,t){let r=1,i=null,o=null,c=!1,h=0;function m(){return h===2}let g=!1;function w(...L){g||(g=!0,e.apply(null,L))}function _(L){i=setTimeout(()=>{i=null,n(R,m())},L)}function A(){o&&clearTimeout(o)}function R(L,...G){if(g){A();return}if(L){A(),w.call(null,L,...G);return}if(m()||c){A(),w.call(null,L,...G);return}r<64&&(r*=2);let H;h===1?(h=2,H=0):H=(r+Math.random())*1e3,_(H)}let M=!1;function D(L){M||(M=!0,A(),!g&&(i!==null?(L||(h=2),clearTimeout(i),_(0)):L||(h=1)))}return _(0),o=setTimeout(()=>{c=!0,D(!0)},t),D}function PU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(n){return n!==void 0}function OU(n){return typeof n=="object"&&!Array.isArray(n)}function _2(n){return typeof n=="string"||n instanceof String}function UT(n){return E2()&&n instanceof Blob}function E2(){return typeof Blob<"u"}function zT(n,e,t,r){if(r<e)throw hw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hw(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function t3(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Gc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gc||(Gc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,t,r,i,o,c,h,m,g,w,_,A=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=w,this.connectionFactory_=_,this.retry=A,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,D)=>{this.resolve_=M,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new _m(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const m=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===Gc.NO_ERROR,m=o.getStatus();if(!h||MU(m,this.additionalRetryCodes_)&&this.retry){const w=o.getErrorCode()===Gc.ABORT;r(!1,new _m(!1,null,w));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new _m(g,o))})},t=(r,i)=>{const o=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());DU(m)?o(m):o()}catch(m){c(m)}else if(h!==null){const m=v2();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(i.canceled){const m=this.appDelete_?e3():EU();c(m)}else{const m=_U();c(m)}};this.canceled_?t(!1,new _m(!1,null,!0)):this.backoffId_=kU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _m{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function VU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function FU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function jU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function UU(n,e,t,r,i,o,c=!0,h=!1){const m=t3(n.urlParams),g=n.url+m,w=Object.assign({},n.headers);return BU(w,e),VU(w,t),FU(w,o),jU(w,r),new LU(g,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function WU(...n){const e=zU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(E2())return new Blob(n);throw new _r(vr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(n){if(typeof atob>"u")throw SU("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hy{constructor(e,t){this.data=e,this.contentType=t||null}}function $U(n,e){switch(n){case Go.RAW:return new Hy(n3(e));case Go.BASE64:case Go.BASE64URL:return new Hy(r3(n,e));case Go.DATA_URL:return new Hy(KU(e),XU(e))}throw v2()}function n3(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=n.charCodeAt(++t);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qU(n){let e;try{e=decodeURIComponent(n)}catch{throw lf(Go.DATA_URL,"Malformed data URL.")}return n3(e)}function r3(n,e){switch(n){case Go.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw lf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Go.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw lf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=GU(e)}catch(i){throw i.message.includes("polyfill")?i:lf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class i3{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw lf(Go.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=YU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function KU(n){const e=new i3(n);return e.base64?r3(Go.BASE64,e.rest):qU(e.rest)}function XU(n){return new i3(n).contentType}function YU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){let r=0,i="";UT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(UT(this.data_)){const r=this.data_,i=HU(r,e,t);return i===null?null:new kl(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new kl(r,!0)}}static getBlob(...e){if(E2()){const t=e.map(r=>r instanceof kl?r.data_:r);return new kl(WU.apply(null,t))}else{const t=e.map(c=>_2(c)?$U(Go.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[o++]=c[h]}),new kl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(n){let e;try{e=JSON.parse(n)}catch{return null}return OU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ZU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function o3(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(n,e){return e}class qi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||JU}}let Em=null;function ez(n){return!_2(n)||n.length<2?n:o3(n)}function a3(){if(Em)return Em;const n=[];n.push(new qi("bucket")),n.push(new qi("generation")),n.push(new qi("metageneration")),n.push(new qi("name","fullPath",!0));function e(o,c){return ez(c)}const t=new qi("name");t.xform=e,n.push(t);function r(o,c){return c!==void 0?Number(c):c}const i=new qi("size");return i.xform=r,n.push(i),n.push(new qi("timeCreated")),n.push(new qi("updated")),n.push(new qi("md5Hash",null,!0)),n.push(new qi("cacheControl",null,!0)),n.push(new qi("contentDisposition",null,!0)),n.push(new qi("contentEncoding",null,!0)),n.push(new qi("contentLanguage",null,!0)),n.push(new qi("contentType",null,!0)),n.push(new qi("metadata","customMetadata",!0)),Em=n,Em}function tz(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new ks(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function nz(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return tz(r,n),r}function l3(n,e,t){const r=s3(e);return r===null?null:nz(n,r,t)}function rz(n,e,t,r){const i=s3(e);if(i===null||!_2(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const w=n.bucket,_=n.fullPath,A="/b/"+c(w)+"/o/"+c(_),R=b2(A,t,r),M=t3({alt:"media",token:g});return R+M})[0]}function iz(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class c3{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(n){if(!n)throw v2()}function sz(n,e){function t(r,i){const o=l3(n,i,e);return u3(o!==null),o}return t}function oz(n,e){function t(r,i){const o=l3(n,i,e);return u3(o!==null),rz(o,i,n.host,n._protocol)}return t}function d3(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=wU():i=xU():t.getStatus()===402?i=yU(n.bucket):t.getStatus()===403?i=vU(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function az(n){const e=d3(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=gU(n.path)),o.serverResponse=i.serverResponse,o}return t}function lz(n,e,t){const r=e.fullServerUrl(),i=b2(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,h=new c3(i,o,oz(n,t),c);return h.errorHandler=az(e),h}function cz(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function uz(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=cz(null,e)),r}function dz(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let H="";for(let Y=0;Y<2;Y++)H=H+Math.random().toString().slice(2);return H}const m=h();c["Content-Type"]="multipart/related; boundary="+m;const g=uz(e,r,i),w=iz(g,t),_="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,A=`\r
--`+m+"--",R=kl.getBlob(_,r,A);if(R===null)throw AU();const M={name:g.fullPath},D=b2(o,n.host,n._protocol),L="POST",G=n.maxUploadRetryTime,z=new c3(D,L,sz(n,t),G);return z.urlParams=M,z.headers=c,z.body=R.uploadData(),z.errorHandler=d3(e),z}class hz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Mh("cannot .send() more than once");if(Xl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fz extends hz{initXhr(){this.xhr_.responseType="text"}}function h3(){return new fz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this._service=e,t instanceof ks?this._location=t:this._location=ks.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new iu(e,t)}get root(){const e=new ks(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o3(this._location.path)}get storage(){return this._service}get parent(){const e=QU(this._location.path);if(e===null)return null;const t=new ks(this._location.bucket,e);return new iu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw RU(e)}}function pz(n,e,t){n._throwIfRoot("uploadBytes");const r=dz(n.storage,n._location,a3(),new kl(e,!0),t);return n.storage.makeRequestWithTokens(r,h3).then(i=>({metadata:i,ref:n}))}function mz(n){n._throwIfRoot("getDownloadURL");const e=lz(n.storage,n._location,a3());return n.storage.makeRequestWithTokens(e,h3).then(t=>{if(t===null)throw CU();return t})}function gz(n,e){const t=ZU(n._location.path,e),r=new ks(n._location.bucket,t);return new iu(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(n){return/^[A-Za-z]+:\/\//.test(n)}function xz(n,e){return new iu(n,e)}function f3(n,e){if(n instanceof I2){const t=n;if(t._bucket==null)throw TU();const r=new iu(t,t._bucket);return e!=null?f3(r,e):r}else return e!==void 0?gz(n,e):n}function wz(n,e){if(e&&yz(e)){if(n instanceof I2)return xz(n,e);throw hw("To use ref(service, url), the first argument must be a Storage instance.")}else return f3(n,e)}function WT(n,e){const t=e==null?void 0:e[Jk];return t==null?null:ks.makeFromBucketSpec(t,n)}function vz(n,e,t,r={}){n.host=`${e}:${t}`;const i=Xl(e);i&&(fv(`https://${n.host}/b`),pv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:KS(o,n.app.options.projectId))}class I2{constructor(e,t,r,i,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=Zk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pU,this._maxUploadRetryTime=mU,this._requests=new Set,i!=null?this._bucket=ks.makeFromBucketSpec(i,this._host):this._bucket=WT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ks.makeFromBucketSpec(this._url,e):this._bucket=WT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new iu(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new NU(e3());{const c=UU(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const HT="@firebase/storage",GT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="storage";function _z(n,e,t){return n=Vn(n),pz(n,e,t)}function Ez(n){return n=Vn(n),mz(n)}function bz(n,e){return n=Vn(n),wz(n,e)}function Iz(n=ag(),e){n=Vn(n);const r=Yl(n,p3).getImmediate({identifier:e}),i=GS("storage");return i&&Tz(r,...i),r}function Tz(n,e,t,r={}){vz(n,e,t,r)}function Az(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new I2(t,r,i,e,pu)}function Cz(){_o(new to(p3,Az,"PUBLIC").setMultipleInstances(!0)),fs(HT,GT,""),fs(HT,GT,"esm2020")}Cz();const m3="@firebase/installations",T2="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=1e4,y3=`w:${T2}`,x3="FIS_v2",Sz="https://firebaseinstallations.googleapis.com/v1",Rz=3600*1e3,Nz="installations",kz="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},su=new fu(Nz,kz,Pz);function w3(n){return n instanceof ro&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3({projectId:n}){return`${Sz}/projects/${n}/installations`}function _3(n){return{token:n.token,requestStatus:2,expiresIn:Oz(n.expiresIn),creationTime:Date.now()}}async function E3(n,e){const r=(await e.json()).error;return su.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function b3({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Dz(n,{refreshToken:e}){const t=b3(n);return t.append("Authorization",Mz(e)),t}async function I3(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Oz(n){return Number(n.replace("s","000"))}function Mz(n){return`${x3} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lz({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=v3(n),i=b3(n),o=e.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={fid:t,authVersion:x3,appId:n.appId,sdkVersion:y3},h={method:"POST",headers:i,body:JSON.stringify(c)},m=await I3(()=>fetch(r,h));if(m.ok){const g=await m.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:_3(g.authToken)}}else throw await E3("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=/^[cdef][\w-]{21}$/,fw="";function Bz(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=jz(n);return Fz.test(t)?t:fw}catch{return fw}}function jz(n){return Vz(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=new Map;function C3(n,e){const t=Vg(n);S3(t,e),Uz(t,e)}function S3(n,e){const t=A3.get(n);if(t)for(const r of t)r(e)}function Uz(n,e){const t=zz();t&&t.postMessage({key:n,fid:e}),Wz()}let Lc=null;function zz(){return!Lc&&"BroadcastChannel"in self&&(Lc=new BroadcastChannel("[Firebase] FID Change"),Lc.onmessage=n=>{S3(n.data.key,n.data.fid)}),Lc}function Wz(){A3.size===0&&Lc&&(Lc.close(),Lc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz="firebase-installations-database",Gz=1,ou="firebase-installations-store";let Gy=null;function A2(){return Gy||(Gy=nR(Hz,Gz,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ou)}}})),Gy}async function F0(n,e){const t=Vg(n),i=(await A2()).transaction(ou,"readwrite"),o=i.objectStore(ou),c=await o.get(t);return await o.put(e,t),await i.done,(!c||c.fid!==e.fid)&&C3(n,e.fid),e}async function R3(n){const e=Vg(n),r=(await A2()).transaction(ou,"readwrite");await r.objectStore(ou).delete(e),await r.done}async function Fg(n,e){const t=Vg(n),i=(await A2()).transaction(ou,"readwrite"),o=i.objectStore(ou),c=await o.get(t),h=e(c);return h===void 0?await o.delete(t):await o.put(h,t),await i.done,h&&(!c||c.fid!==h.fid)&&C3(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(n){let e;const t=await Fg(n.appConfig,r=>{const i=$z(r),o=qz(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===fw?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function $z(n){const e=n||{fid:Bz(),registrationStatus:0};return N3(e)}function qz(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(su.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Kz(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Xz(n)}:{installationEntry:e}}async function Kz(n,e){try{const t=await Lz(n,e);return F0(n.appConfig,t)}catch(t){throw w3(t)&&t.customData.serverCode===409?await R3(n.appConfig):await F0(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Xz(n){let e=await $T(n.appConfig);for(;e.registrationStatus===1;)await T3(100),e=await $T(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await C2(n);return r||t}return e}function $T(n){return Fg(n,e=>{if(!e)throw su.create("installation-not-found");return N3(e)})}function N3(n){return Yz(n)?{fid:n.fid,registrationStatus:0}:n}function Yz(n){return n.registrationStatus===1&&n.registrationTime+g3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz({appConfig:n,heartbeatServiceProvider:e},t){const r=Zz(n,t),i=Dz(n,t),o=e.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={installation:{sdkVersion:y3,appId:n.appId}},h={method:"POST",headers:i,body:JSON.stringify(c)},m=await I3(()=>fetch(r,h));if(m.ok){const g=await m.json();return _3(g)}else throw await E3("Generate Auth Token",m)}function Zz(n,{fid:e}){return`${v3(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(n,e=!1){let t;const r=await Fg(n.appConfig,o=>{if(!k3(o))throw su.create("not-registered");const c=o.authToken;if(!e&&tW(c))return o;if(c.requestStatus===1)return t=Jz(n,e),o;{if(!navigator.onLine)throw su.create("app-offline");const h=rW(o);return t=eW(n,h),h}});return t?await t:r.authToken}async function Jz(n,e){let t=await qT(n.appConfig);for(;t.authToken.requestStatus===1;)await T3(100),t=await qT(n.appConfig);const r=t.authToken;return r.requestStatus===0?S2(n,e):r}function qT(n){return Fg(n,e=>{if(!k3(e))throw su.create("not-registered");const t=e.authToken;return iW(t)?{...e,authToken:{requestStatus:0}}:e})}async function eW(n,e){try{const t=await Qz(n,e),r={...e,authToken:t};return await F0(n.appConfig,r),t}catch(t){if(w3(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await R3(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await F0(n.appConfig,r)}throw t}}function k3(n){return n!==void 0&&n.registrationStatus===2}function tW(n){return n.requestStatus===2&&!nW(n)}function nW(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Rz}function rW(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function iW(n){return n.requestStatus===1&&n.requestTime+g3<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sW(n){const e=n,{installationEntry:t,registrationPromise:r}=await C2(e);return r?r.catch(console.error):S2(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oW(n,e=!1){const t=n;return await aW(t),(await S2(t,e)).token}async function aW(n){const{registrationPromise:e}=await C2(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lW(n){if(!n||!n.options)throw $y("App Configuration");if(!n.name)throw $y("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw $y(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function $y(n){return su.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3="installations",cW="installations-internal",uW=n=>{const e=n.getProvider("app").getImmediate(),t=lW(e),r=Yl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},dW=n=>{const e=n.getProvider("app").getImmediate(),t=Yl(e,P3).getImmediate();return{getId:()=>sW(t),getToken:i=>oW(t,i)}};function hW(){_o(new to(P3,uW,"PUBLIC")),_o(new to(cW,dW,"PRIVATE"))}hW();fs(m3,T2);fs(m3,T2,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="analytics",fW="firebase_id",pW="origin",mW=60*1e3,gW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",R2="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new og("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ds=new fu("analytics","Analytics",yW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(n){if(!n.startsWith(R2)){const e=Ds.create("invalid-gtag-resource",{gtagURL:n});return ms.warn(e.message),""}return n}function D3(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function wW(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function vW(n,e){const t=wW("firebase-js-sdk-policy",{createScriptURL:xW}),r=document.createElement("script"),i=`${R2}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function _W(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function EW(n,e,t,r,i,o){const c=r[i];try{if(c)await e[c];else{const m=(await D3(t)).find(g=>g.measurementId===i);m&&await e[m.appId]}}catch(h){ms.error(h)}n("config",i,o)}async function bW(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const h=await D3(t);for(const m of c){const g=h.find(_=>_.measurementId===m),w=g&&e[g.appId];if(w)o.push(w);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){ms.error(o)}}function IW(n,e,t,r){async function i(o,...c){try{if(o==="event"){const[h,m]=c;await bW(n,e,t,h,m)}else if(o==="config"){const[h,m]=c;await EW(n,e,t,r,h,m)}else if(o==="consent"){const[h,m]=c;n("consent",h,m)}else if(o==="get"){const[h,m,g]=c;n("get",h,m,g)}else if(o==="set"){const[h]=c;n("set",h)}else n(o,...c)}catch(h){ms.error(h)}}return i}function TW(n,e,t,r,i){let o=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=IW(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function AW(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(R2)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CW=30,SW=1e3;class RW{constructor(e={},t=SW){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const O3=new RW;function NW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function kW(n){var c;const{appId:e,apiKey:t}=n,r={method:"GET",headers:NW(t)},i=gW.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let h="";try{const m=await o.json();(c=m.error)!=null&&c.message&&(h=m.error.message)}catch{}throw Ds.create("config-fetch-failed",{httpStatus:o.status,responseMessage:h})}return o.json()}async function PW(n,e=O3,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Ds.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Ds.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new MW;return setTimeout(async()=>{h.abort()},mW),M3({appId:r,apiKey:i,measurementId:o},c,h,e)}async function M3(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=O3){var h;const{appId:o,measurementId:c}=n;try{await DW(r,e)}catch(m){if(c)return ms.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:o,measurementId:c};throw m}try{const m=await kW(n);return i.deleteThrottleMetadata(o),m}catch(m){const g=m;if(!OW(g)){if(i.deleteThrottleMetadata(o),c)return ms.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:o,measurementId:c};throw m}const w=Number((h=g==null?void 0:g.customData)==null?void 0:h.httpStatus)===503?Wb(t,i.intervalMillis,CW):Wb(t,i.intervalMillis),_={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return i.setThrottleMetadata(o,_),ms.debug(`Calling attemptFetch again in ${w} millis`),M3(n,_,r,i)}}function DW(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ds.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function OW(n){if(!(n instanceof ro)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class MW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function LW(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const o=await e,c={...r,send_to:o};n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VW(){if(mv())try{await JS()}catch(n){return ms.warn(Ds.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ms.warn(Ds.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function FW(n,e,t,r,i,o,c){const h=PW(n);h.then(A=>{t[A.measurementId]=A.appId,n.options.measurementId&&A.measurementId!==n.options.measurementId&&ms.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>ms.error(A)),e.push(h);const m=VW().then(A=>{if(A)return r.getId()}),[g,w]=await Promise.all([h,m]);AW(o)||vW(o,g.measurementId),i("js",new Date);const _=(c==null?void 0:c.config)??{};return _[pW]="firebase",_.update=!0,w!=null&&(_[fW]=w),i("config",g.measurementId,_),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e){this.app=e}_delete(){return delete cf[this.app.options.appId],Promise.resolve()}}let cf={},KT=[];const XT={};let qy="dataLayer",jW="gtag",YT,L3,QT=!1;function UW(){const n=[];if(YS()&&n.push("This is a browser extension environment."),Z5()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ds.create("invalid-analytics-context",{errorInfo:e});ms.warn(t.message)}}function zW(n,e,t){UW();const r=n.options.appId;if(!r)throw Ds.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ms.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ds.create("no-api-key");if(cf[r]!=null)throw Ds.create("already-exists",{id:r});if(!QT){_W(qy);const{wrappedGtag:o,gtagCore:c}=TW(cf,KT,XT,qy,jW);L3=o,YT=c,QT=!0}return cf[r]=FW(n,KT,XT,e,YT,qy,t),new BW(n)}function WW(n=ag()){n=Vn(n);const e=Yl(n,B0);return e.isInitialized()?e.getImmediate():HW(n)}function HW(n,e={}){const t=Yl(n,B0);if(t.isInitialized()){const i=t.getImmediate();if(Bl(e,t.getOptions()))return i;throw Ds.create("already-initialized")}return t.initialize({options:e})}function GW(n,e,t,r){n=Vn(n),LW(L3,cf[n.app.options.appId],e,t,r).catch(i=>ms.error(i))}const ZT="@firebase/analytics",JT="0.10.18";function $W(){_o(new to(B0,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return zW(r,i,t)},"PUBLIC")),_o(new to("analytics-internal",n,"PRIVATE")),fs(ZT,JT),fs(ZT,JT,"esm2020");function n(e){try{const t=e.getProvider(B0).getImmediate();return{logEvent:(r,i,o)=>GW(t,r,i,o)}}catch(t){throw Ds.create("interop-component-reg-failed",{reason:t})}}}$W();const eA={apiKey:"AIzaSyDkVAo_xXbBHy8FYwFtMQA66aju08qK_yE",authDomain:"hooked-69.firebaseapp.com",projectId:"hooked-69",storageBucket:"hooked-69.firebasestorage.app",messagingSenderId:"741889428835",appId:"1:741889428835:web:d5f88b43a503c9e6351756",measurementId:"G-6YHKXLN806"};let Ld;try{Ld=Mx(eA),console.log("✅ Firebase app initialized successfully")}catch(n){console.error("❌ Failed to initialize Firebase app:",n);try{Ld=Mx(eA,"fallback-app"),console.log("✅ Firebase app initialized with fallback name")}catch(e){throw console.error("❌ Failed to initialize Firebase app with fallback:",e),new Error("Firebase initialization failed completely")}}const bc=OV(Ld),Mn=Zj(Ld),qW=Iz(Ld);let KW=null;if(typeof window<"u")try{KW=WW(Ld),console.log("✅ Firebase Analytics initialized")}catch(n){console.warn("⚠️ Analytics initialization failed:",n)}const XW=async()=>{try{await Jj(Mn,{synchronizeTabs:!0}),console.log("✅ Firestore offline persistence enabled")}catch(n){n.code==="failed-precondition"?console.warn("⚠️ Multiple tabs open, persistence can only be enabled in one tab at a time"):n.code==="unimplemented"?console.warn("⚠️ Browser doesn't support persistence"):console.error("❌ Error enabling Firestore persistence:",n)}};XW();const t0={activeListeners:new Map,registerListener(n,e){this.activeListeners.set(n,e),console.log(`📡 Registered listener: ${n} (total: ${this.activeListeners.size})`)},unregisterListener(n){const e=this.activeListeners.get(n);e&&(e(),this.activeListeners.delete(n),console.log(`🧹 Cleaned up listener: ${n} (remaining: ${this.activeListeners.size})`))},cleanupAllListeners(){console.log(`🧹 Cleaning up ${this.activeListeners.size} active listeners...`),this.activeListeners.forEach((n,e)=>{n(),console.log(`🧹 Cleaned up listener: ${e}`)}),this.activeListeners.clear(),console.log("✅ All listeners cleaned up")},getListenerCount(){return this.activeListeners.size}};typeof window<"u"&&(window.addEventListener("beforeunload",()=>{t0.cleanupAllListeners()}),document.addEventListener("visibilitychange",()=>{document.hidden&&console.log("📱 Tab hidden, listeners remain active for background updates")}));const YW=async()=>{try{console.log("🔍 Testing Firebase connection...");const n=await hp(ps(Mn,"events"));return console.log("✅ Firestore connection successful"),console.log(`📊 Found ${n.docs.length} events in database`),{success:!0,eventCount:n.docs.length,events:n.docs.map(e=>({id:e.id,...e.data()}))}}catch(n){return console.error("❌ Firebase connection test failed:",n),{success:!1,error:n.message}}};class QW{constructor(){this.isOnline=navigator.onLine,this.retryQueue=[],this.maxRetries=3,this.baseDelay=1e3,this.offlineActions=new Map,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.checkConnectivity()}async checkConnectivity(){try{const e=await fetch("/favicon.png",{method:"HEAD",cache:"no-cache",timeout:5e3});this.isOnline=e.ok}catch{this.isOnline=!1}return this.isOnline=this.isOnline&&navigator.onLine,this.isOnline}async handleOnline(){console.log("🌐 Device is back online"),this.isOnline=!0,await this.processOfflineQueue(),window.dispatchEvent(new CustomEvent("appOnline"))}handleOffline(){console.log("📴 Device is offline"),this.isOnline=!1,window.dispatchEvent(new CustomEvent("appOffline"))}async retryOperation(e,t={}){const{maxRetries:r=this.maxRetries,baseDelay:i=this.baseDelay,operationName:o="Unknown operation",shouldRetry:c=this.shouldRetryError,onRetry:h=null}=t;let m;for(let g=1;g<=r;g++)try{if(!await this.checkConnectivity())throw new Error("No internet connection");return await e()}catch(w){if(m=w,this.logError(w,{operation:o,attempt:g,maxRetries:r,isOnline:this.isOnline}),!c(w,g))throw w;if(g<r){const _=this.calculateDelay(g,i);console.log(`⏳ Retrying ${o} in ${Math.round(_)}ms (attempt ${g}/${r})`),h&&h(w,g,_),await this.sleep(_)}}throw m}shouldRetryError(e,t){return e.code==="permission-denied"||e.code==="not-found"||e.code==="invalid-argument"||e.code==="auth/user-not-found"||e.code==="auth/wrong-password"||e.code==="auth/invalid-email"?!1:e.code==="unavailable"||e.code==="deadline-exceeded"||e.message.includes("network")||e.message.includes("timeout")||e.message.includes("No internet connection")||e.code>=500}calculateDelay(e,t){const r=t*Math.pow(2,e-1),i=Math.random()*1e3;return Math.min(r+i,1e4)}queueOfflineAction(e,t={}){const r={id:Date.now()+Math.random(),action:e,metadata:t,timestamp:new Date().toISOString()};return this.retryQueue.push(r),this.saveOfflineQueue(),console.log(`📝 Queued offline action: ${t.operation||"Unknown"}`),r.id}async processOfflineQueue(){if(this.retryQueue.length===0)return;console.log(`🔄 Processing ${this.retryQueue.length} queued actions`);const e=[...this.retryQueue];this.retryQueue=[];for(const t of e)try{await this.retryOperation(()=>t.action(),{operationName:`Offline action: ${t.metadata.operation||"Unknown"}`,maxRetries:2,baseDelay:2e3}),console.log(`✅ Successfully processed offline action: ${t.metadata.operation||"Unknown"}`)}catch(r){console.error("❌ Failed to process offline action:",r),this.shouldRetryError(r,1)&&this.retryQueue.push(t)}this.saveOfflineQueue()}saveOfflineQueue(){try{localStorage.setItem("hooked_offline_queue",JSON.stringify(this.retryQueue))}catch(e){console.error("Failed to save offline queue:",e)}}loadOfflineQueue(){try{const e=localStorage.getItem("hooked_offline_queue");e&&(this.retryQueue=JSON.parse(e),console.log(`📋 Loaded ${this.retryQueue.length} offline actions`))}catch(e){console.error("Failed to load offline queue:",e),this.retryQueue=[]}}getErrorMessage(e){if(!e)return"An unknown error occurred";if(e.message.includes("No internet connection")||e.code==="unavailable"||!navigator.onLine)return"No internet connection. Please check your network and try again.";switch(e.code){case"permission-denied":return"You don't have permission to perform this action.";case"not-found":return"The requested resource was not found.";case"already-exists":return"This resource already exists.";case"deadline-exceeded":return"The operation timed out. Please try again.";case"auth/user-not-found":return"User account not found.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-email":return"Invalid email address.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";default:return e.message||"An unexpected error occurred. Please try again."}}logError(e,t={}){const r={message:e.message,code:e.code,stack:e.stack,timestamp:new Date().toISOString(),isOnline:this.isOnline,userAgent:navigator.userAgent,url:window.location.href,...t};console.error("🚨 Error occurred:",r)}reportError(e){}sleep(e){return new Promise(t=>setTimeout(t,e))}getOnlineStatus(){return this.isOnline}getOfflineQueueLength(){return this.retryQueue.length}clearOfflineQueue(){this.retryQueue=[],this.saveOfflineQueue()}}const Fl=new QW;Fl.loadOfflineQueue();const V3=(n,e={})=>Fl.retryOperation(n,e),ZW=(n,e)=>Fl.queueOfflineAction(n,e),tA=n=>Fl.getErrorMessage(n),bm=()=>Fl.getOfflineQueueLength();async function Ln(n,e=3,t=1e3,r="Firebase operation"){return V3(n,{maxRetries:e,baseDelay:t,operationName:r})}const Ky={async compressImage(n,e=800,t=.8){return new Promise(r=>{const i=document.createElement("canvas"),o=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:h,height:m}=c;h>e&&(m=m*e/h,h=e),i.width=h,i.height=m,o.drawImage(c,0,0,h,m),i.toBlob(r,"image/jpeg",t)},c.src=URL.createObjectURL(n)})},generateOptimizedFilename(n){const e=Date.now(),t=n.split(".").pop()||"jpg";return`optimized_${e}.${t}`},validateFile(n,e=5){const t=["image/jpeg","image/jpg","image/png","image/webp"],r=e*1024*1024;if(!t.includes(n.type))throw new Error("Invalid file type. Please upload a JPEG, PNG, or WebP image.");if(n.size>r)throw new Error(`File too large. Maximum size is ${e}MB.`);return!0}};class JW{constructor(){this.listeners=new Map,this.listenerCounts=new Map}createListener(e,t,r,i={}){this.cleanupListener(e);const o=fU(t,h=>{const m=h.docs.map(g=>({id:g.id,...g.data()}));r(m)},h=>{console.error(`❌ Listener error for ${e}:`,h),i.onError&&i.onError(h)});t0.registerListener(e,o),this.listeners.set(e,o);const c=this.listenerCounts.get(e)||0;return this.listenerCounts.set(e,c+1),console.log(`📡 Created listener: ${e} (count: ${c+1})`),o}cleanupListener(e){const t=this.listeners.get(e);t&&(t(),this.listeners.delete(e),t0.unregisterListener(e),console.log(`🧹 Cleaned up listener: ${e}`))}cleanupAll(){this.listeners.forEach((e,t)=>{e(),t0.unregisterListener(t)}),this.listeners.clear(),this.listenerCounts.clear(),console.log("🧹 All listeners cleaned up")}getStats(){return{activeListeners:this.listeners.size,listenerCounts:Object.fromEntries(this.listenerCounts)}}}const N2=new JW,Of={async create(n){return await Ln(async()=>({id:(await Kd(ps(Mn,"events"),{...n,created_at:vo(),updated_at:vo()})).id,...n}),3,1e3,"Event.create")},async filter(n={}){return await Ln(async()=>{let e=ps(Mn,"events");return n.id&&(e=Vr(e,kr("id","==",n.id))),n.event_code&&(e=Vr(e,kr("event_code","==",n.event_code))),n.starts_at&&(e=Vr(e,kr("starts_at",">=",n.starts_at))),n.expires_at&&(e=Vr(e,kr("expires_at","<=",n.expires_at))),(await hp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Event.filter")},async get(n){return await Ln(async()=>{const e=Zs(Mn,"events",n),t=await y2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Event.get")},async update(n,e){return await Ln(async()=>{const t=Zs(Mn,"events",n);await V0(t,{...e,updated_at:vo()})},3,1e3,"Event.update")},async delete(n){return await Ln(async()=>{const e=Zs(Mn,"events",n);await Lg(e)},3,1e3,"Event.delete")},async list(){return await this.filter()}},Zo={async create(n){return await Ln(async()=>({id:(await Kd(ps(Mn,"event_profiles"),{...n,created_at:vo(),updated_at:vo()})).id,...n}),3,1e3,"EventProfile.create")},async filter(n={}){return await Ln(async()=>{let e=ps(Mn,"event_profiles");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.session_id&&(e=Vr(e,kr("session_id","==",n.session_id))),n.email&&(e=Vr(e,kr("email","==",n.email))),n.is_visible!==void 0&&(e=Vr(e,kr("is_visible","==",n.is_visible))),(await hp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"EventProfile.filter")},async get(n){return await Ln(async()=>{const e=Zs(Mn,"event_profiles",n),t=await y2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"EventProfile.get")},async update(n,e){return await Ln(async()=>{const t=Zs(Mn,"event_profiles",n);await V0(t,{...e,updated_at:vo()})},3,1e3,"EventProfile.update")},async delete(n){return await Ln(async()=>{const e=Zs(Mn,"event_profiles",n);await Lg(e)},3,1e3,"EventProfile.delete")},async toggleVisibility(n,e){return await Ln(async()=>{const t=Zs(Mn,"event_profiles",n);await V0(t,{is_visible:e,updated_at:vo()})},3,1e3,"EventProfile.toggleVisibility")},async list(){return await this.filter()},onProfilesChange(n,e,t={}){let r=Vr(ps(Mn,"event_profiles"),kr("event_id","==",n));t.is_visible!==void 0&&(r=Vr(r,kr("is_visible","==",t.is_visible)));const i=`profiles_${n}_${JSON.stringify(t)}`;return N2.createListener(i,r,e)}},us={async create(n){return await Ln(async()=>({id:(await Kd(ps(Mn,"likes"),{...n,created_at:vo()})).id,...n}),3,1e3,"Like.create")},async filter(n={}){return await Ln(async()=>{let e=ps(Mn,"likes");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.from_profile_id&&(e=Vr(e,kr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Vr(e,kr("to_profile_id","==",n.to_profile_id))),n.is_mutual!==void 0&&(e=Vr(e,kr("is_mutual","==",n.is_mutual))),(await hp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Like.filter")},async get(n){return await Ln(async()=>{const e=Zs(Mn,"likes",n),t=await y2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Like.get")},async update(n,e){return await Ln(async()=>{const t=Zs(Mn,"likes",n);await V0(t,e)},3,1e3,"Like.update")},async delete(n){return await Ln(async()=>{const e=Zs(Mn,"likes",n);await Lg(e)},3,1e3,"Like.delete")},async list(){return await this.filter()},onLikesChange(n,e,t){const r=Vr(ps(Mn,"likes"),kr("event_id","==",n),kr("liker_session_id","==",e)),i=`likes_${n}_${e}`;return N2.createListener(i,r,t)}},Vc={async create(n){return await Ln(async()=>({id:(await Kd(ps(Mn,"messages"),{...n,created_at:vo()})).id,...n}),3,1e3,"Message.create")},async filter(n={}){return await Ln(async()=>{let e=ps(Mn,"messages");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.from_profile_id&&(e=Vr(e,kr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Vr(e,kr("to_profile_id","==",n.to_profile_id))),e=Vr(e,FT("created_at","desc")),(await hp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Message.filter")},async delete(n){return await Ln(async()=>{const e=Zs(Mn,"messages",n);await Lg(e)},3,1e3,"Message.delete")},async list(){return await this.filter()},onMessagesChange(n,e,t){const r=Vr(ps(Mn,"messages"),kr("event_id","==",n),kr("from_profile_id","==",e),FT("created_at","asc")),i=`messages_${n}_${e}`;return N2.createListener(i,r,t)}},Xy={async create(n){return await Ln(async()=>({id:(await Kd(ps(Mn,"contact_shares"),{...n,created_at:vo()})).id,...n}),3,1e3,"ContactShare.create")},async list(){return await this.filter()}},eH={async create(n){return await Ln(async()=>({id:(await Kd(ps(Mn,"event_feedback"),{...n,created_at:vo()})).id,...n}),3,1e3,"EventFeedback.create")},async list(){return await this.filter()}},Yy={async signUp(n,e){return await Ln(async()=>(await g7(bc,n,e)).user,3,1e3,"User.signUp")},async signIn(n,e){return await Ln(async()=>(await y7(bc,n,e)).user,3,1e3,"User.signIn")},async signOut(){return await Ln(async()=>{await b7(bc)},3,1e3,"User.signOut")},async updateProfile(n){return await Ln(async()=>{const e=bc.currentUser;if(!e)throw new Error("No user signed in");await w7(e,n)},3,1e3,"User.updateProfile")},getCurrentUser(){return bc.currentUser},async me(){return bc.currentUser},onAuthStateChanged(n){return E7(bc,n)}},tH=async(n,e={})=>await Ln(async()=>{Ky.validateFile(n,e.maxSizeMB||5);let t=n;if(n.type.startsWith("image/"))try{const h=await Ky.compressImage(n,e.maxWidth||800,e.quality||.8);t=new File([h],n.name,{type:"image/jpeg"}),console.log("✅ Image compressed successfully")}catch(h){console.warn("⚠️ Image compression failed, uploading original:",h)}const r=Ky.generateOptimizedFilename(n.name),i=bz(qW,`uploads/${Date.now()}_${r}`),o=await _z(i,t),c=await Ez(o.ref);return console.log("✅ File uploaded successfully:",{originalSize:n.size,uploadedSize:t.size,compressionRatio:((n.size-t.size)/n.size*100).toFixed(1)+"%"}),{file_url:c}},3,1e3,"uploadFile");function nA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function F3(...n){return e=>{let t=!1;const r=n.map(i=>{const o=nA(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():nA(n[i],null)}}}}function bn(...n){return P.useCallback(F3(...n),n)}function Vd(n){const e=rH(n),t=P.forwardRef((r,i)=>{const{children:o,...c}=r,h=P.Children.toArray(o),m=h.find(sH);if(m){const g=m.props.children,w=h.map(_=>_===m?P.Children.count(g)>1?P.Children.only(null):P.isValidElement(g)?g.props.children:null:_);return I.jsx(e,{...c,ref:i,children:P.isValidElement(g)?P.cloneElement(g,void 0,w):null})}return I.jsx(e,{...c,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var nH=Vd("Slot");function rH(n){const e=P.forwardRef((t,r)=>{const{children:i,...o}=t;if(P.isValidElement(i)){const c=aH(i),h=oH(o,i.props);return i.type!==P.Fragment&&(h.ref=r?F3(r,c):c),P.cloneElement(i,h)}return P.Children.count(i)>1?P.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var iH=Symbol("radix.slottable");function sH(n){return P.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===iH}function oH(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...h)=>{const m=o(...h);return i(...h),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function aH(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function B3(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=B3(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function j3(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=B3(n))&&(r&&(r+=" "),r+=e);return r}const rA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,iA=j3,Bg=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return iA(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:o}=e,c=Object.keys(i).map(g=>{const w=t==null?void 0:t[g],_=o==null?void 0:o[g];if(w===null)return null;const A=rA(w)||rA(_);return i[g][A]}),h=t&&Object.entries(t).reduce((g,w)=>{let[_,A]=w;return A===void 0||(g[_]=A),g},{}),m=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((g,w)=>{let{class:_,className:A,...R}=w;return Object.entries(R).every(M=>{let[D,L]=M;return Array.isArray(L)?L.includes({...o,...h}[D]):{...o,...h}[D]===L})?[...g,_,A]:g},[]);return iA(n,c,m,t==null?void 0:t.class,t==null?void 0:t.className)},k2="-",lH=n=>{const e=uH(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const h=c.split(k2);return h[0]===""&&h.length!==1&&h.shift(),U3(h,e)||cH(c)},getConflictingClassGroupIds:(c,h)=>{const m=t[c]||[];return h&&r[c]?[...m,...r[c]]:m}}},U3=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?U3(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(k2);return(c=e.validators.find(({validator:h})=>h(o)))==null?void 0:c.classGroupId},sA=/^\[(.+)\]$/,cH=n=>{if(sA.test(n)){const e=sA.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},uH=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)pw(t[i],r,i,e);return r},pw=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:oA(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(dH(i)){pw(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,c])=>{pw(c,oA(e,o),t,r)})})},oA=(n,e)=>{let t=n;return e.split(k2).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},dH=n=>n.isThemeGetter,hH=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){t.has(o)?t.set(o,c):i(o,c)}}},mw="!",gw=":",fH=gw.length,pH=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let c=0,h=0,m=0,g;for(let M=0;M<i.length;M++){let D=i[M];if(c===0&&h===0){if(D===gw){o.push(i.slice(m,M)),m=M+fH;continue}if(D==="/"){g=M;continue}}D==="["?c++:D==="]"?c--:D==="("?h++:D===")"&&h--}const w=o.length===0?i:i.substring(m),_=mH(w),A=_!==w,R=g&&g>m?g-m:void 0;return{modifiers:o,hasImportantModifier:A,baseClassName:_,maybePostfixModifierPosition:R}};if(e){const i=e+gw,o=r;r=c=>c.startsWith(i)?o(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},mH=n=>n.endsWith(mw)?n.substring(0,n.length-1):n.startsWith(mw)?n.substring(1):n,gH=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(c=>{c[0]==="["||e[c]?(i.push(...o.sort(),c),o=[]):o.push(c)}),i.push(...o.sort()),i}},yH=n=>({cache:hH(n.cacheSize),parseClassName:pH(n),sortModifiers:gH(n),...lH(n)}),xH=/\s+/,wH=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,c=[],h=n.trim().split(xH);let m="";for(let g=h.length-1;g>=0;g-=1){const w=h[g],{isExternal:_,modifiers:A,hasImportantModifier:R,baseClassName:M,maybePostfixModifierPosition:D}=t(w);if(_){m=w+(m.length>0?" "+m:m);continue}let L=!!D,G=r(L?M.substring(0,D):M);if(!G){if(!L){m=w+(m.length>0?" "+m:m);continue}if(G=r(M),!G){m=w+(m.length>0?" "+m:m);continue}L=!1}const z=o(A).join(":"),H=R?z+mw:z,Y=H+G;if(c.includes(Y))continue;c.push(Y);const re=i(G,L);for(let ie=0;ie<re.length;++ie){const V=re[ie];c.push(H+V)}m=w+(m.length>0?" "+m:m)}return m};function vH(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=z3(e))&&(r&&(r+=" "),r+=t);return r}const z3=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=z3(n[r]))&&(t&&(t+=" "),t+=e);return t};function _H(n,...e){let t,r,i,o=c;function c(m){const g=e.reduce((w,_)=>_(w),n());return t=yH(g),r=t.cache.get,i=t.cache.set,o=h,h(m)}function h(m){const g=r(m);if(g)return g;const w=wH(m,t);return i(m,w),w}return function(){return o(vH.apply(null,arguments))}}const qr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},W3=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,H3=/^\((?:(\w[\w-]*):)?(.+)\)$/i,EH=/^\d+\/\d+$/,bH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,IH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,AH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xu=n=>EH.test(n),Vt=n=>!!n&&!Number.isNaN(Number(n)),El=n=>!!n&&Number.isInteger(Number(n)),Qy=n=>n.endsWith("%")&&Vt(n.slice(0,-1)),Aa=n=>bH.test(n),SH=()=>!0,RH=n=>IH.test(n)&&!TH.test(n),G3=()=>!1,NH=n=>AH.test(n),kH=n=>CH.test(n),PH=n=>!tt(n)&&!nt(n),DH=n=>Xd(n,K3,G3),tt=n=>W3.test(n),Ic=n=>Xd(n,X3,RH),Zy=n=>Xd(n,FH,Vt),aA=n=>Xd(n,$3,G3),OH=n=>Xd(n,q3,kH),Im=n=>Xd(n,Y3,NH),nt=n=>H3.test(n),Lh=n=>Yd(n,X3),MH=n=>Yd(n,BH),lA=n=>Yd(n,$3),LH=n=>Yd(n,K3),VH=n=>Yd(n,q3),Tm=n=>Yd(n,Y3,!0),Xd=(n,e,t)=>{const r=W3.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Yd=(n,e,t=!1)=>{const r=H3.exec(n);return r?r[1]?e(r[1]):t:!1},$3=n=>n==="position"||n==="percentage",q3=n=>n==="image"||n==="url",K3=n=>n==="length"||n==="size"||n==="bg-size",X3=n=>n==="length",FH=n=>n==="number",BH=n=>n==="family-name",Y3=n=>n==="shadow",jH=()=>{const n=qr("color"),e=qr("font"),t=qr("text"),r=qr("font-weight"),i=qr("tracking"),o=qr("leading"),c=qr("breakpoint"),h=qr("container"),m=qr("spacing"),g=qr("radius"),w=qr("shadow"),_=qr("inset-shadow"),A=qr("text-shadow"),R=qr("drop-shadow"),M=qr("blur"),D=qr("perspective"),L=qr("aspect"),G=qr("ease"),z=qr("animate"),H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],re=()=>[...Y(),nt,tt],ie=()=>["auto","hidden","clip","visible","scroll"],V=()=>["auto","contain","none"],B=()=>[nt,tt,m],W=()=>[Xu,"full","auto",...B()],Z=()=>[El,"none","subgrid",nt,tt],te=()=>["auto",{span:["full",El,nt,tt]},El,nt,tt],ee=()=>[El,"auto",nt,tt],K=()=>["auto","min","max","fr",nt,tt],we=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],Te=()=>["auto",...B()],xe=()=>[Xu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],oe=()=>[n,nt,tt],Ae=()=>[...Y(),lA,aA,{position:[nt,tt]}],Ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ae=()=>["auto","cover","contain",LH,DH,{size:[nt,tt]}],he=()=>[Qy,Lh,Ic],Se=()=>["","none","full",g,nt,tt],Le=()=>["",Vt,Lh,Ic],it=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Vt,Qy,lA,aA],Ge=()=>["","none",M,nt,tt],at=()=>["none",Vt,nt,tt],st=()=>["none",Vt,nt,tt],ct=()=>[Vt,nt,tt],bt=()=>[Xu,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Aa],breakpoint:[Aa],color:[SH],container:[Aa],"drop-shadow":[Aa],ease:["in","out","in-out"],font:[PH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Aa],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Aa],shadow:[Aa],spacing:["px",Vt],text:[Aa],"text-shadow":[Aa],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xu,tt,nt,L]}],container:["container"],columns:[{columns:[Vt,tt,nt,h]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:re()}],overflow:[{overflow:ie()}],"overflow-x":[{"overflow-x":ie()}],"overflow-y":[{"overflow-y":ie()}],overscroll:[{overscroll:V()}],"overscroll-x":[{"overscroll-x":V()}],"overscroll-y":[{"overscroll-y":V()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[El,"auto",nt,tt]}],basis:[{basis:[Xu,"full","auto",h,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Vt,Xu,"auto","initial","none",tt]}],grow:[{grow:["",Vt,nt,tt]}],shrink:[{shrink:["",Vt,nt,tt]}],order:[{order:[El,"first","last","none",nt,tt]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:te()}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:te()}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...we(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...we()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":we()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:Te()}],mx:[{mx:Te()}],my:[{my:Te()}],ms:[{ms:Te()}],me:[{me:Te()}],mt:[{mt:Te()}],mr:[{mr:Te()}],mb:[{mb:Te()}],ml:[{ml:Te()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:xe()}],w:[{w:[h,"screen",...xe()]}],"min-w":[{"min-w":[h,"screen","none",...xe()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...xe()]}],h:[{h:["screen","lh",...xe()]}],"min-h":[{"min-h":["screen","lh","none",...xe()]}],"max-h":[{"max-h":["screen","lh",...xe()]}],"font-size":[{text:["base",t,Lh,Ic]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,nt,Zy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Qy,tt]}],"font-family":[{font:[MH,tt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,nt,tt]}],"line-clamp":[{"line-clamp":[Vt,"none",nt,Zy]}],leading:[{leading:[o,...B()]}],"list-image":[{"list-image":["none",nt,tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nt,tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:oe()}],"text-color":[{text:oe()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...it(),"wavy"]}],"text-decoration-thickness":[{decoration:[Vt,"from-font","auto",nt,Ic]}],"text-decoration-color":[{decoration:oe()}],"underline-offset":[{"underline-offset":[Vt,"auto",nt,tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt,tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt,tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:Ne()}],"bg-size":[{bg:ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},El,nt,tt],radial:["",nt,tt],conic:[El,nt,tt]},VH,OH]}],"bg-color":[{bg:oe()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:oe()}],"gradient-via":[{via:oe()}],"gradient-to":[{to:oe()}],rounded:[{rounded:Se()}],"rounded-s":[{"rounded-s":Se()}],"rounded-e":[{"rounded-e":Se()}],"rounded-t":[{"rounded-t":Se()}],"rounded-r":[{"rounded-r":Se()}],"rounded-b":[{"rounded-b":Se()}],"rounded-l":[{"rounded-l":Se()}],"rounded-ss":[{"rounded-ss":Se()}],"rounded-se":[{"rounded-se":Se()}],"rounded-ee":[{"rounded-ee":Se()}],"rounded-es":[{"rounded-es":Se()}],"rounded-tl":[{"rounded-tl":Se()}],"rounded-tr":[{"rounded-tr":Se()}],"rounded-br":[{"rounded-br":Se()}],"rounded-bl":[{"rounded-bl":Se()}],"border-w":[{border:Le()}],"border-w-x":[{"border-x":Le()}],"border-w-y":[{"border-y":Le()}],"border-w-s":[{"border-s":Le()}],"border-w-e":[{"border-e":Le()}],"border-w-t":[{"border-t":Le()}],"border-w-r":[{"border-r":Le()}],"border-w-b":[{"border-b":Le()}],"border-w-l":[{"border-l":Le()}],"divide-x":[{"divide-x":Le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...it(),"hidden","none"]}],"divide-style":[{divide:[...it(),"hidden","none"]}],"border-color":[{border:oe()}],"border-color-x":[{"border-x":oe()}],"border-color-y":[{"border-y":oe()}],"border-color-s":[{"border-s":oe()}],"border-color-e":[{"border-e":oe()}],"border-color-t":[{"border-t":oe()}],"border-color-r":[{"border-r":oe()}],"border-color-b":[{"border-b":oe()}],"border-color-l":[{"border-l":oe()}],"divide-color":[{divide:oe()}],"outline-style":[{outline:[...it(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Vt,nt,tt]}],"outline-w":[{outline:["",Vt,Lh,Ic]}],"outline-color":[{outline:oe()}],shadow:[{shadow:["","none",w,Tm,Im]}],"shadow-color":[{shadow:oe()}],"inset-shadow":[{"inset-shadow":["none",_,Tm,Im]}],"inset-shadow-color":[{"inset-shadow":oe()}],"ring-w":[{ring:Le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:oe()}],"ring-offset-w":[{"ring-offset":[Vt,Ic]}],"ring-offset-color":[{"ring-offset":oe()}],"inset-ring-w":[{"inset-ring":Le()}],"inset-ring-color":[{"inset-ring":oe()}],"text-shadow":[{"text-shadow":["none",A,Tm,Im]}],"text-shadow-color":[{"text-shadow":oe()}],opacity:[{opacity:[Vt,nt,tt]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Vt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":oe()}],"mask-image-linear-to-color":[{"mask-linear-to":oe()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":oe()}],"mask-image-t-to-color":[{"mask-t-to":oe()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":oe()}],"mask-image-r-to-color":[{"mask-r-to":oe()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":oe()}],"mask-image-b-to-color":[{"mask-b-to":oe()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":oe()}],"mask-image-l-to-color":[{"mask-l-to":oe()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":oe()}],"mask-image-x-to-color":[{"mask-x-to":oe()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":oe()}],"mask-image-y-to-color":[{"mask-y-to":oe()}],"mask-image-radial":[{"mask-radial":[nt,tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":oe()}],"mask-image-radial-to-color":[{"mask-radial-to":oe()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Y()}],"mask-image-conic-pos":[{"mask-conic":[Vt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":oe()}],"mask-image-conic-to-color":[{"mask-conic-to":oe()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:Ne()}],"mask-size":[{mask:ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nt,tt]}],filter:[{filter:["","none",nt,tt]}],blur:[{blur:Ge()}],brightness:[{brightness:[Vt,nt,tt]}],contrast:[{contrast:[Vt,nt,tt]}],"drop-shadow":[{"drop-shadow":["","none",R,Tm,Im]}],"drop-shadow-color":[{"drop-shadow":oe()}],grayscale:[{grayscale:["",Vt,nt,tt]}],"hue-rotate":[{"hue-rotate":[Vt,nt,tt]}],invert:[{invert:["",Vt,nt,tt]}],saturate:[{saturate:[Vt,nt,tt]}],sepia:[{sepia:["",Vt,nt,tt]}],"backdrop-filter":[{"backdrop-filter":["","none",nt,tt]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[Vt,nt,tt]}],"backdrop-contrast":[{"backdrop-contrast":[Vt,nt,tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Vt,nt,tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Vt,nt,tt]}],"backdrop-invert":[{"backdrop-invert":["",Vt,nt,tt]}],"backdrop-opacity":[{"backdrop-opacity":[Vt,nt,tt]}],"backdrop-saturate":[{"backdrop-saturate":[Vt,nt,tt]}],"backdrop-sepia":[{"backdrop-sepia":["",Vt,nt,tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nt,tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Vt,"initial",nt,tt]}],ease:[{ease:["linear","initial",G,nt,tt]}],delay:[{delay:[Vt,nt,tt]}],animate:[{animate:["none",z,nt,tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,nt,tt]}],"perspective-origin":[{"perspective-origin":re()}],rotate:[{rotate:at()}],"rotate-x":[{"rotate-x":at()}],"rotate-y":[{"rotate-y":at()}],"rotate-z":[{"rotate-z":at()}],scale:[{scale:st()}],"scale-x":[{"scale-x":st()}],"scale-y":[{"scale-y":st()}],"scale-z":[{"scale-z":st()}],"scale-3d":["scale-3d"],skew:[{skew:ct()}],"skew-x":[{"skew-x":ct()}],"skew-y":[{"skew-y":ct()}],transform:[{transform:[nt,tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:re()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:bt()}],"translate-x":[{"translate-x":bt()}],"translate-y":[{"translate-y":bt()}],"translate-z":[{"translate-z":bt()}],"translate-none":["translate-none"],accent:[{accent:oe()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:oe()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt,tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt,tt]}],fill:[{fill:["none",...oe()]}],"stroke-w":[{stroke:[Vt,Lh,Ic,Zy]}],stroke:[{stroke:["none",...oe()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},UH=_H(jH);function ln(...n){return UH(j3(n))}const zH=Bg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Dt=P.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const c=r?nH:"button";return I.jsx(c,{className:ln(zH({variant:e,size:t,className:n})),ref:o,...i})});Dt.displayName="Button";const P2=P.createContext({});function D2(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const O2=typeof window<"u",Q3=O2?P.useLayoutEffect:P.useEffect,jg=P.createContext(null);function M2(n,e){n.indexOf(e)===-1&&n.push(e)}function L2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ja=(n,e,t)=>t>e?e:t<n?n:t;let V2=()=>{};const Ua={},Z3=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function J3(n){return typeof n=="object"&&n!==null}const e4=n=>/^0[^.\s]+$/u.test(n);function F2(n){let e;return()=>(e===void 0&&(e=n()),e)}const eo=n=>n,WH=(n,e)=>t=>e(n(t)),fp=(...n)=>n.reduce(WH),Mf=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class B2{constructor(){this.subscriptions=[]}add(e){return M2(this.subscriptions,e),()=>L2(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Jo=n=>n*1e3,ea=n=>n/1e3;function t4(n,e){return e?n*(1e3/e):0}const n4=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,HH=1e-7,GH=12;function $H(n,e,t,r,i){let o,c,h=0;do c=e+(t-e)/2,o=n4(c,r,i)-n,o>0?t=c:e=c;while(Math.abs(o)>HH&&++h<GH);return c}function pp(n,e,t,r){if(n===e&&t===r)return eo;const i=o=>$H(o,0,1,n,t);return o=>o===0||o===1?o:n4(i(o),e,r)}const r4=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,i4=n=>e=>1-n(1-e),s4=pp(.33,1.53,.69,.99),j2=i4(s4),o4=r4(j2),a4=n=>(n*=2)<1?.5*j2(n):.5*(2-Math.pow(2,-10*(n-1))),U2=n=>1-Math.sin(Math.acos(n)),l4=i4(U2),c4=r4(U2),qH=pp(.42,0,1,1),KH=pp(0,0,.58,1),u4=pp(.42,0,.58,1),XH=n=>Array.isArray(n)&&typeof n[0]!="number",d4=n=>Array.isArray(n)&&typeof n[0]=="number",YH={linear:eo,easeIn:qH,easeInOut:u4,easeOut:KH,circIn:U2,circInOut:c4,circOut:l4,backIn:j2,backInOut:o4,backOut:s4,anticipate:a4},QH=n=>typeof n=="string",cA=n=>{if(d4(n)){V2(n.length===4);const[e,t,r,i]=n;return pp(e,t,r,i)}else if(QH(n))return YH[n];return n},Am=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function ZH(n,e){let t=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(w){c.has(w)&&(g.schedule(w),n()),w(h)}const g={schedule:(w,_=!1,A=!1)=>{const M=A&&i?t:r;return _&&c.add(w),M.has(w)||M.add(w),w},cancel:w=>{r.delete(w),c.delete(w)},process:w=>{if(h=w,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(m),t.clear(),i=!1,o&&(o=!1,g.process(w))}};return g}const JH=40;function h4(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,c=Am.reduce((H,Y)=>(H[Y]=ZH(o),H),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:w,update:_,preRender:A,render:R,postRender:M}=c,D=()=>{const H=Ua.useManualTiming?i.timestamp:performance.now();t=!1,Ua.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(H-i.timestamp,JH),1)),i.timestamp=H,i.isProcessing=!0,h.process(i),m.process(i),g.process(i),w.process(i),_.process(i),A.process(i),R.process(i),M.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(D))},L=()=>{t=!0,r=!0,i.isProcessing||n(D)};return{schedule:Am.reduce((H,Y)=>{const re=c[Y];return H[Y]=(ie,V=!1,B=!1)=>(t||L(),re.schedule(ie,V,B)),H},{}),cancel:H=>{for(let Y=0;Y<Am.length;Y++)c[Am[Y]].cancel(H)},state:i,steps:c}}const{schedule:nr,cancel:Hl,state:mi,steps:Jy}=h4(typeof requestAnimationFrame<"u"?requestAnimationFrame:eo,!0);let n0;function eG(){n0=void 0}const hs={now:()=>(n0===void 0&&hs.set(mi.isProcessing||Ua.useManualTiming?mi.timestamp:performance.now()),n0),set:n=>{n0=n,queueMicrotask(eG)}},f4=n=>e=>typeof e=="string"&&e.startsWith(n),z2=f4("--"),tG=f4("var(--"),W2=n=>tG(n)?nG.test(n.split("/*")[0].trim()):!1,nG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lf={...Qd,transform:n=>ja(0,1,n)},Cm={...Qd,default:1},uf=n=>Math.round(n*1e5)/1e5,H2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rG(n){return n==null}const iG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,G2=(n,e)=>t=>!!(typeof t=="string"&&iG.test(t)&&t.startsWith(n)||e&&!rG(t)&&Object.prototype.hasOwnProperty.call(t,e)),p4=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,c,h]=r.match(H2);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},sG=n=>ja(0,255,n),ex={...Qd,transform:n=>Math.round(sG(n))},Fc={test:G2("rgb","red"),parse:p4("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+ex.transform(n)+", "+ex.transform(e)+", "+ex.transform(t)+", "+uf(Lf.transform(r))+")"};function oG(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const yw={test:G2("#"),parse:oG,transform:Fc.transform},mp=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Il=mp("deg"),ta=mp("%"),Tt=mp("px"),aG=mp("vh"),lG=mp("vw"),uA={...ta,parse:n=>ta.parse(n)/100,transform:n=>ta.transform(n*100)},od={test:G2("hsl","hue"),parse:p4("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+ta.transform(uf(e))+", "+ta.transform(uf(t))+", "+uf(Lf.transform(r))+")"},Lr={test:n=>Fc.test(n)||yw.test(n)||od.test(n),parse:n=>Fc.test(n)?Fc.parse(n):od.test(n)?od.parse(n):yw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Fc.transform(n):od.transform(n),getAnimatableNone:n=>{const e=Lr.parse(n);return e.alpha=0,Lr.transform(e)}},cG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uG(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(H2))==null?void 0:e.length)||0)+(((t=n.match(cG))==null?void 0:t.length)||0)>0}const m4="number",g4="color",dG="var",hG="var(",dA="${}",fG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vf(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const h=e.replace(fG,m=>(Lr.test(m)?(r.color.push(o),i.push(g4),t.push(Lr.parse(m))):m.startsWith(hG)?(r.var.push(o),i.push(dG),t.push(m)):(r.number.push(o),i.push(m4),t.push(parseFloat(m))),++o,dA)).split(dA);return{values:t,split:h,indexes:r,types:i}}function y4(n){return Vf(n).values}function x4(n){const{split:e,types:t}=Vf(n),r=e.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],i[c]!==void 0){const h=t[c];h===m4?o+=uf(i[c]):h===g4?o+=Lr.transform(i[c]):o+=i[c]}return o}}const pG=n=>typeof n=="number"?0:Lr.test(n)?Lr.getAnimatableNone(n):n;function mG(n){const e=y4(n);return x4(n)(e.map(pG))}const Gl={test:uG,parse:y4,createTransformer:x4,getAnimatableNone:mG};function tx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function gG({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,c=0;if(!e)i=o=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,m=2*t-h;i=tx(m,h,n+1/3),o=tx(m,h,n),c=tx(m,h,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function j0(n,e){return t=>t>0?e:n}const cr=(n,e,t)=>n+(e-n)*t,nx=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},yG=[yw,Fc,od],xG=n=>yG.find(e=>e.test(n));function hA(n){const e=xG(n);if(!e)return!1;let t=e.parse(n);return e===od&&(t=gG(t)),t}const fA=(n,e)=>{const t=hA(n),r=hA(e);if(!t||!r)return j0(n,e);const i={...t};return o=>(i.red=nx(t.red,r.red,o),i.green=nx(t.green,r.green,o),i.blue=nx(t.blue,r.blue,o),i.alpha=cr(t.alpha,r.alpha,o),Fc.transform(i))},xw=new Set(["none","hidden"]);function wG(n,e){return xw.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function vG(n,e){return t=>cr(n,e,t)}function $2(n){return typeof n=="number"?vG:typeof n=="string"?W2(n)?j0:Lr.test(n)?fA:bG:Array.isArray(n)?w4:typeof n=="object"?Lr.test(n)?fA:_G:j0}function w4(n,e){const t=[...n],r=t.length,i=n.map((o,c)=>$2(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)t[c]=i[c](o);return t}}function _G(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=$2(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function EG(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],c=n.indexes[o][r[o]],h=n.values[c]??0;t[i]=h,r[o]++}return t}const bG=(n,e)=>{const t=Gl.createTransformer(e),r=Vf(n),i=Vf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?xw.has(n)&&!i.values.length||xw.has(e)&&!r.values.length?wG(n,e):fp(w4(EG(r,i),i.values),t):j0(n,e)};function v4(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?cr(n,e,t):$2(n)(n,e)}const IG=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>nr.update(e,t),stop:()=>Hl(e),now:()=>mi.isProcessing?mi.timestamp:hs.now()}},_4=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},U0=2e4;function q2(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<U0;)e+=t,r=n.next(e);return e>=U0?1/0:e}function TG(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(q2(r),U0);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:ea(i)}}const AG=5;function E4(n,e,t){const r=Math.max(e-AG,0);return t4(t-n(r),e-r)}const yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rx=.001;function CG({duration:n=yr.duration,bounce:e=yr.bounce,velocity:t=yr.velocity,mass:r=yr.mass}){let i,o,c=1-e;c=ja(yr.minDamping,yr.maxDamping,c),n=ja(yr.minDuration,yr.maxDuration,ea(n)),c<1?(i=g=>{const w=g*c,_=w*n,A=w-t,R=ww(g,c),M=Math.exp(-_);return rx-A/R*M},o=g=>{const _=g*c*n,A=_*t+t,R=Math.pow(c,2)*Math.pow(g,2)*n,M=Math.exp(-_),D=ww(Math.pow(g,2),c);return(-i(g)+rx>0?-1:1)*((A-R)*M)/D}):(i=g=>{const w=Math.exp(-g*n),_=(g-t)*n+1;return-rx+w*_},o=g=>{const w=Math.exp(-g*n),_=(t-g)*(n*n);return w*_});const h=5/n,m=RG(i,o,h);if(n=Jo(n),isNaN(m))return{stiffness:yr.stiffness,damping:yr.damping,duration:n};{const g=Math.pow(m,2)*r;return{stiffness:g,damping:c*2*Math.sqrt(r*g),duration:n}}}const SG=12;function RG(n,e,t){let r=t;for(let i=1;i<SG;i++)r=r-n(r)/e(r);return r}function ww(n,e){return n*Math.sqrt(1-e*e)}const NG=["duration","bounce"],kG=["stiffness","damping","mass"];function pA(n,e){return e.some(t=>n[t]!==void 0)}function PG(n){let e={velocity:yr.velocity,stiffness:yr.stiffness,damping:yr.damping,mass:yr.mass,isResolvedFromDuration:!1,...n};if(!pA(n,kG)&&pA(n,NG))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*ja(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:yr.mass,stiffness:i,damping:o}}else{const t=CG(n);e={...e,...t,mass:yr.mass},e.isResolvedFromDuration=!0}return e}function z0(n=yr.visualDuration,e=yr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:m,damping:g,mass:w,duration:_,velocity:A,isResolvedFromDuration:R}=PG({...t,velocity:-ea(t.velocity||0)}),M=A||0,D=g/(2*Math.sqrt(m*w)),L=c-o,G=ea(Math.sqrt(m/w)),z=Math.abs(L)<5;r||(r=z?yr.restSpeed.granular:yr.restSpeed.default),i||(i=z?yr.restDelta.granular:yr.restDelta.default);let H;if(D<1){const re=ww(G,D);H=ie=>{const V=Math.exp(-D*G*ie);return c-V*((M+D*G*L)/re*Math.sin(re*ie)+L*Math.cos(re*ie))}}else if(D===1)H=re=>c-Math.exp(-G*re)*(L+(M+G*L)*re);else{const re=G*Math.sqrt(D*D-1);H=ie=>{const V=Math.exp(-D*G*ie),B=Math.min(re*ie,300);return c-V*((M+D*G*L)*Math.sinh(B)+re*L*Math.cosh(B))/re}}const Y={calculatedDuration:R&&_||null,next:re=>{const ie=H(re);if(R)h.done=re>=_;else{let V=re===0?M:0;D<1&&(V=re===0?Jo(M):E4(H,re,ie));const B=Math.abs(V)<=r,W=Math.abs(c-ie)<=i;h.done=B&&W}return h.value=h.done?c:ie,h},toString:()=>{const re=Math.min(q2(Y),U0),ie=_4(V=>Y.next(re*V).value,re,30);return re+"ms "+ie},toTransition:()=>{}};return Y}z0.applyToOptions=n=>{const e=TG(n,100,z0);return n.ease=e.ease,n.duration=Jo(e.duration),n.type="keyframes",n};function vw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:m,restDelta:g=.5,restSpeed:w}){const _=n[0],A={done:!1,value:_},R=B=>h!==void 0&&B<h||m!==void 0&&B>m,M=B=>h===void 0?m:m===void 0||Math.abs(h-B)<Math.abs(m-B)?h:m;let D=t*e;const L=_+D,G=c===void 0?L:c(L);G!==L&&(D=G-_);const z=B=>-D*Math.exp(-B/r),H=B=>G+z(B),Y=B=>{const W=z(B),Z=H(B);A.done=Math.abs(W)<=g,A.value=A.done?G:Z};let re,ie;const V=B=>{R(A.value)&&(re=B,ie=z0({keyframes:[A.value,M(A.value)],velocity:E4(H,B,A.value),damping:i,stiffness:o,restDelta:g,restSpeed:w}))};return V(0),{calculatedDuration:null,next:B=>{let W=!1;return!ie&&re===void 0&&(W=!0,Y(B),V(B)),re!==void 0&&B>=re?ie.next(B-re):(!W&&Y(B),A)}}}function DG(n,e,t){const r=[],i=t||Ua.mix||v4,o=n.length-1;for(let c=0;c<o;c++){let h=i(n[c],n[c+1]);if(e){const m=Array.isArray(e)?e[c]||eo:e;h=fp(m,h)}r.push(h)}return r}function OG(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(V2(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=DG(e,r,i),m=h.length,g=w=>{if(c&&w<n[0])return e[0];let _=0;if(m>1)for(;_<n.length-2&&!(w<n[_+1]);_++);const A=Mf(n[_],n[_+1],w);return h[_](A)};return t?w=>g(ja(n[0],n[o-1],w)):g}function MG(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Mf(0,e,r);n.push(cr(t,1,i))}}function LG(n){const e=[0];return MG(e,n.length-1),e}function VG(n,e){return n.map(t=>t*e)}function FG(n,e){return n.map(()=>e||u4).splice(0,n.length-1)}function df({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=XH(r)?r.map(cA):cA(r),o={done:!1,value:e[0]},c=VG(t&&t.length===e.length?t:LG(e),n),h=OG(c,e,{ease:Array.isArray(i)?i:FG(e,i)});return{calculatedDuration:n,next:m=>(o.value=h(m),o.done=m>=n,o)}}const BG=n=>n!==null;function K2(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(BG),h=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||r===void 0?o[h]:r}const jG={decay:vw,inertia:vw,tween:df,keyframes:df,spring:z0};function b4(n){typeof n.type=="string"&&(n.type=jG[n.type])}class X2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const UG=n=>n/100;class Y2 extends X2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==hs.now()&&this.tick(hs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;b4(e);const{type:t=df,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=e;let{keyframes:h}=e;const m=t||df;m!==df&&typeof h[0]!="number"&&(this.mixKeyframes=fp(UG,v4(h[0],h[1])),h=[0,100]);const g=m({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...h].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=q2(g));const{calculatedDuration:w}=g;this.calculatedDuration=w,this.resolvedDuration=w+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=g}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:w,repeat:_,repeatType:A,repeatDelay:R,type:M,onUpdate:D,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const G=this.currentTime-g*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?G<0:G>i;this.currentTime=Math.max(G,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let H=this.currentTime,Y=r;if(_){const B=Math.min(this.currentTime,i)/h;let W=Math.floor(B),Z=B%1;!Z&&B>=1&&(Z=1),Z===1&&W--,W=Math.min(W,_+1),!!(W%2)&&(A==="reverse"?(Z=1-Z,R&&(Z-=R/h)):A==="mirror"&&(Y=c)),H=ja(0,1,Z)*h}const re=z?{done:!1,value:w[0]}:Y.next(H);o&&(re.value=o(re.value));let{done:ie}=re;!z&&m!==null&&(ie=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return V&&M!==vw&&(re.value=K2(w,this.options,L,this.speed)),D&&D(re.value),V&&this.finish(),re}then(e,t){return this.finished.then(e,t)}get duration(){return ea(this.calculatedDuration)}get time(){return ea(this.currentTime)}set time(e){var t;e=Jo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ea(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=IG,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function zG(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Bc=n=>n*180/Math.PI,_w=n=>{const e=Bc(Math.atan2(n[1],n[0]));return Ew(e)},WG={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:_w,rotateZ:_w,skewX:n=>Bc(Math.atan(n[1])),skewY:n=>Bc(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Ew=n=>(n=n%360,n<0&&(n+=360),n),mA=_w,gA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),yA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),HG={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gA,scaleY:yA,scale:n=>(gA(n)+yA(n))/2,rotateX:n=>Ew(Bc(Math.atan2(n[6],n[5]))),rotateY:n=>Ew(Bc(Math.atan2(-n[2],n[0]))),rotateZ:mA,rotate:mA,skewX:n=>Bc(Math.atan(n[4])),skewY:n=>Bc(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function bw(n){return n.includes("scale")?1:0}function Iw(n,e){if(!n||n==="none")return bw(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=HG,i=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=WG,i=h}if(!i)return bw(e);const o=r[e],c=i[1].split(",").map($G);return typeof o=="function"?o(c):c[o]}const GG=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Iw(t,e)};function $G(n){return parseFloat(n.trim())}const Zd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jd=new Set(Zd),xA=n=>n===Qd||n===Tt,qG=new Set(["x","y","z"]),KG=Zd.filter(n=>!qG.has(n));function XG(n){const e=[];return KG.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const $c={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Iw(e,"x"),y:(n,{transform:e})=>Iw(e,"y")};$c.translateX=$c.x;$c.translateY=$c.y;const qc=new Set;let Tw=!1,Aw=!1,Cw=!1;function I4(){if(Aw){const n=Array.from(qc).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=XG(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,c])=>{var h;(h=r.getValue(o))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Aw=!1,Tw=!1,qc.forEach(n=>n.complete(Cw)),qc.clear()}function T4(){qc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Aw=!0)})}function YG(){Cw=!0,T4(),I4(),Cw=!1}class Q2{constructor(e,t,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(qc.add(this),Tw||(Tw=!0,nr.read(T4),nr.resolveKeyframes(I4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}zG(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qc.delete(this)}cancel(){this.state==="scheduled"&&(qc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const QG=n=>n.startsWith("--");function ZG(n,e,t){QG(e)?n.style.setProperty(e,t):n.style[e]=t}const JG=F2(()=>window.ScrollTimeline!==void 0),e$={};function t$(n,e){const t=F2(n);return()=>e$[e]??t()}const A4=t$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qh=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,wA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qh([0,.65,.55,1]),circOut:qh([.55,0,1,.45]),backIn:qh([.31,.01,.66,-.59]),backOut:qh([.33,1.53,.69,.99])};function C4(n,e){if(n)return typeof n=="function"?A4()?_4(n,e):"ease-out":d4(n)?qh(n):Array.isArray(n)?n.map(t=>C4(t,e)||wA.easeOut):wA[n]}function n$(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:h="easeOut",times:m}={},g=void 0){const w={[e]:t};m&&(w.offset=m);const _=C4(h,i);Array.isArray(_)&&(w.easing=_);const A={delay:r,duration:i,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return g&&(A.pseudoElement=g),n.animate(w,A)}function S4(n){return typeof n=="function"&&"applyToOptions"in n}function r$({type:n,...e}){return S4(n)&&A4()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class i$ extends X2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:h,onComplete:m}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,V2(typeof e.type!="string");const g=r$(e);this.animation=n$(t,r,i,g,o),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const w=K2(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(w):ZG(t,r,w),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return ea(Number(e))}get time(){return ea(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Jo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&JG()?(this.animation.timeline=e,eo):t(this)}}const R4={anticipate:a4,backInOut:o4,circInOut:c4};function s$(n){return n in R4}function o$(n){typeof n.ease=="string"&&s$(n.ease)&&(n.ease=R4[n.ease])}const vA=10;class a$ extends i${constructor(e){o$(e),b4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Y2({...c,autoplay:!1}),m=Jo(this.finishedTime??this.time);t.setWithVelocity(h.sample(m-vA).value,h.sample(m).value,vA),h.stop()}}const _A=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Gl.test(n)||n==="0")&&!n.startsWith("url("));function l$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function c$(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],c=_A(i,e),h=_A(o,e);return!c||!h?!1:l$(n)||(t==="spring"||S4(t))&&r}function Sw(n){n.duration=0,n.type}const u$=new Set(["opacity","clipPath","filter","transform"]),d$=F2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h$(n){var w;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:c}=n;if(!(((w=e==null?void 0:e.owner)==null?void 0:w.current)instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=e.owner.getProps();return d$()&&t&&u$.has(t)&&(t!=="transform"||!g)&&!m&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const f$=40;class p$ extends X2{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:h,name:m,motionValue:g,element:w,..._}){var M;super(),this.stop=()=>{var D,L;this._animation&&(this._animation.stop(),(D=this.stopTimeline)==null||D.call(this)),(L=this.keyframeResolver)==null||L.cancel()},this.createdAt=hs.now();const A={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:c,name:m,motionValue:g,element:w,..._},R=(w==null?void 0:w.KeyframeResolver)||Q2;this.keyframeResolver=new R(h,(D,L,G)=>this.onKeyframesResolved(D,L,A,!G),m,g,w),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:h,delay:m,isHandoff:g,onUpdate:w}=r;this.resolvedAt=hs.now(),c$(e,o,c,h)||((Ua.instantAnimations||!m)&&(w==null||w(K2(e,r,t))),e[0]=e[e.length-1],Sw(r),r.repeat=0);const A={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>f$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},R=!g&&h$(A)?new a$({...A,element:A.motionValue.owner.current}):new Y2(A);R.finished.then(()=>this.notifyFinished()).catch(eo),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),YG()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const m$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function g$(n){const e=m$.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function N4(n,e,t=1){const[r,i]=g$(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return Z3(c)?parseFloat(c):c}return W2(i)?N4(i,e,t+1):i}function Z2(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const k4=new Set(["width","height","top","left","right","bottom",...Zd]),y$={test:n=>n==="auto",parse:n=>n},P4=n=>e=>e.test(n),D4=[Qd,Tt,ta,Il,lG,aG,y$],EA=n=>D4.find(P4(n));function x$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||e4(n):!0}const w$=new Set(["brightness","contrast","saturate","opacity"]);function v$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(H2)||[];if(!r)return n;const i=t.replace(r,"");let o=w$.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const _$=/\b([a-z-]*)\(.*?\)/gu,Rw={...Gl,getAnimatableNone:n=>{const e=n.match(_$);return e?e.map(v$).join(" "):n}},bA={...Qd,transform:Math.round},E$={rotate:Il,rotateX:Il,rotateY:Il,rotateZ:Il,scale:Cm,scaleX:Cm,scaleY:Cm,scaleZ:Cm,skew:Il,skewX:Il,skewY:Il,distance:Tt,translateX:Tt,translateY:Tt,translateZ:Tt,x:Tt,y:Tt,z:Tt,perspective:Tt,transformPerspective:Tt,opacity:Lf,originX:uA,originY:uA,originZ:Tt},J2={borderWidth:Tt,borderTopWidth:Tt,borderRightWidth:Tt,borderBottomWidth:Tt,borderLeftWidth:Tt,borderRadius:Tt,radius:Tt,borderTopLeftRadius:Tt,borderTopRightRadius:Tt,borderBottomRightRadius:Tt,borderBottomLeftRadius:Tt,width:Tt,maxWidth:Tt,height:Tt,maxHeight:Tt,top:Tt,right:Tt,bottom:Tt,left:Tt,padding:Tt,paddingTop:Tt,paddingRight:Tt,paddingBottom:Tt,paddingLeft:Tt,margin:Tt,marginTop:Tt,marginRight:Tt,marginBottom:Tt,marginLeft:Tt,backgroundPositionX:Tt,backgroundPositionY:Tt,...E$,zIndex:bA,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:bA},b$={...J2,color:Lr,backgroundColor:Lr,outlineColor:Lr,fill:Lr,stroke:Lr,borderColor:Lr,borderTopColor:Lr,borderRightColor:Lr,borderBottomColor:Lr,borderLeftColor:Lr,filter:Rw,WebkitFilter:Rw},O4=n=>b$[n];function M4(n,e){let t=O4(n);return t!==Rw&&(t=Gl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const I$=new Set(["auto","none","0"]);function T$(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!I$.has(o)&&Vf(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=M4(t,i)}class A$ extends Q2{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let g=e[m];if(typeof g=="string"&&(g=g.trim(),W2(g))){const w=N4(g,t.current);w!==void 0&&(e[m]=w),m===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!k4.has(r)||e.length!==2)return;const[i,o]=e,c=EA(i),h=EA(o);if(c!==h)if(xA(c)&&xA(h))for(let m=0;m<e.length;m++){const g=e[m];typeof g=="string"&&(e[m]=parseFloat(g))}else $c[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||x$(e[i]))&&r.push(i);r.length&&T$(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$c[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=$c[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([m,g])=>{e.getValue(m).set(g)}),this.resolveNoneKeyframes()}}function C$(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const L4=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function V4(n){return J3(n)&&"offsetHeight"in n}const IA=30,S$=n=>!isNaN(parseFloat(n));class R${constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=hs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=S$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new B2);const r=this.events[e].add(t);return e==="change"?()=>{r(),nr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>IA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,IA);return t4(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fd(n,e){return new R$(n,e)}const{schedule:e_}=h4(queueMicrotask,!1),mo={x:!1,y:!1};function F4(){return mo.x||mo.y}function N$(n){return n==="x"||n==="y"?mo[n]?null:(mo[n]=!0,()=>{mo[n]=!1}):mo.x||mo.y?null:(mo.x=mo.y=!0,()=>{mo.x=mo.y=!1})}function B4(n,e){const t=C$(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function TA(n){return!(n.pointerType==="touch"||F4())}function k$(n,e,t={}){const[r,i,o]=B4(n,t),c=h=>{if(!TA(h))return;const{target:m}=h,g=e(m,h);if(typeof g!="function"||!m)return;const w=_=>{TA(_)&&(g(_),m.removeEventListener("pointerleave",w))};m.addEventListener("pointerleave",w,i)};return r.forEach(h=>{h.addEventListener("pointerenter",c,i)}),o}const j4=(n,e)=>e?n===e?!0:j4(n,e.parentElement):!1,t_=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,P$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D$(n){return P$.has(n.tagName)||n.tabIndex!==-1}const r0=new WeakSet;function AA(n){return e=>{e.key==="Enter"&&n(e)}}function ix(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const O$=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=AA(()=>{if(r0.has(t))return;ix(t,"down");const i=AA(()=>{ix(t,"up")}),o=()=>ix(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function CA(n){return t_(n)&&!F4()}function M$(n,e,t={}){const[r,i,o]=B4(n,t),c=h=>{const m=h.currentTarget;if(!CA(h))return;r0.add(m);const g=e(m,h),w=(R,M)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",A),r0.has(m)&&r0.delete(m),CA(R)&&typeof g=="function"&&g(R,{success:M})},_=R=>{w(R,m===window||m===document||t.useGlobalTarget||j4(m,R.target))},A=R=>{w(R,!1)};window.addEventListener("pointerup",_,i),window.addEventListener("pointercancel",A,i)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,i),V4(h)&&(h.addEventListener("focus",g=>O$(g,i)),!D$(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function U4(n){return J3(n)&&"ownerSVGElement"in n}function L$(n){return U4(n)&&n.tagName==="svg"}const Mi=n=>!!(n&&n.getVelocity),V$=[...D4,Lr,Gl],F$=n=>V$.find(P4(n)),n_=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class B$ extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=V4(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function j$({children:n,isPresent:e,anchorX:t,root:r}){const i=P.useId(),o=P.useRef(null),c=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=P.useContext(n_);return P.useInsertionEffect(()=>{const{width:m,height:g,top:w,left:_,right:A}=c.current;if(e||!o.current||!m||!g)return;const R=t==="left"?`left: ${_}`:`right: ${A}`;o.current.dataset.motionPopId=i;const M=document.createElement("style");h&&(M.nonce=h);const D=r??document.head;return D.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${w}px !important;
          }
        `),()=>{D.contains(M)&&D.removeChild(M)}},[e]),I.jsx(B$,{isPresent:e,childRef:o,sizeRef:c,children:P.cloneElement(n,{ref:o})})}const U$=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:h,root:m})=>{const g=D2(z$),w=P.useId();let _=!0,A=P.useMemo(()=>(_=!1,{id:w,initial:e,isPresent:t,custom:i,onExitComplete:R=>{g.set(R,!0);for(const M of g.values())if(!M)return;r&&r()},register:R=>(g.set(R,!1),()=>g.delete(R))}),[t,g,r]);return o&&_&&(A={...A}),P.useMemo(()=>{g.forEach((R,M)=>g.set(M,!1))},[t]),P.useEffect(()=>{!t&&!g.size&&r&&r()},[t]),c==="popLayout"&&(n=I.jsx(j$,{isPresent:t,anchorX:h,root:m,children:n})),I.jsx(jg.Provider,{value:A,children:n})};function z$(){return new Map}function z4(n=!0){const e=P.useContext(jg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=P.useId();P.useEffect(()=>{if(n)return i(o)},[n]);const c=P.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,c]:[!0]}const Sm=n=>n.key||"";function SA(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const gp=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:h="left",root:m})=>{const[g,w]=z4(c),_=P.useMemo(()=>SA(n),[n]),A=c&&!g?[]:_.map(Sm),R=P.useRef(!0),M=P.useRef(_),D=D2(()=>new Map),[L,G]=P.useState(_),[z,H]=P.useState(_);Q3(()=>{R.current=!1,M.current=_;for(let ie=0;ie<z.length;ie++){const V=Sm(z[ie]);A.includes(V)?D.delete(V):D.get(V)!==!0&&D.set(V,!1)}},[z,A.length,A.join("-")]);const Y=[];if(_!==L){let ie=[..._];for(let V=0;V<z.length;V++){const B=z[V],W=Sm(B);A.includes(W)||(ie.splice(V,0,B),Y.push(B))}return o==="wait"&&Y.length&&(ie=Y),H(SA(ie)),G(_),null}const{forceRender:re}=P.useContext(P2);return I.jsx(I.Fragment,{children:z.map(ie=>{const V=Sm(ie),B=c&&!g?!1:_===z||A.includes(V),W=()=>{if(D.has(V))D.set(V,!0);else return;let Z=!0;D.forEach(te=>{te||(Z=!1)}),Z&&(re==null||re(),H(M.current),c&&(w==null||w()),r&&r())};return I.jsx(U$,{isPresent:B,initial:!R.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:m,onExitComplete:B?void 0:W,anchorX:h,children:ie},V)})})},W4=P.createContext({strict:!1}),RA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bd={};for(const n in RA)Bd[n]={isEnabled:e=>RA[n].some(t=>!!e[t])};function W$(n){for(const e in n)Bd[e]={...Bd[e],...n[e]}}const H$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function W0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||H$.has(n)}let H4=n=>!W0(n);function G$(n){typeof n=="function"&&(H4=e=>e.startsWith("on")?!W0(e):n(e))}try{G$(require("@emotion/is-prop-valid").default)}catch{}function $$(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(H4(i)||t===!0&&W0(i)||!e&&!W0(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Ug=P.createContext({});function zg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Ff(n){return typeof n=="string"||Array.isArray(n)}const r_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i_=["initial",...r_];function Wg(n){return zg(n.animate)||i_.some(e=>Ff(n[e]))}function G4(n){return!!(Wg(n)||n.variants)}function q$(n,e){if(Wg(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Ff(t)?t:void 0,animate:Ff(r)?r:void 0}}return n.inherit!==!1?e:{}}function K$(n){const{initial:e,animate:t}=q$(n,P.useContext(Ug));return P.useMemo(()=>({initial:e,animate:t}),[NA(e),NA(t)])}function NA(n){return Array.isArray(n)?n.join(" "):n}const Bf={};function X$(n){for(const e in n)Bf[e]=n[e],z2(e)&&(Bf[e].isCSSVariable=!0)}function $4(n,{layout:e,layoutId:t}){return Jd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Bf[n]||n==="opacity")}const Y$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Q$=Zd.length;function Z$(n,e,t){let r="",i=!0;for(let o=0;o<Q$;o++){const c=Zd[o],h=n[c];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(c.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||t){const g=L4(h,J2[c]);if(!m){i=!1;const w=Y$[c]||c;r+=`${w}(${g}) `}t&&(e[c]=g)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function s_(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let c=!1,h=!1;for(const m in e){const g=e[m];if(Jd.has(m)){c=!0;continue}else if(z2(m)){i[m]=g;continue}else{const w=L4(g,J2[m]);m.startsWith("origin")?(h=!0,o[m]=w):r[m]=w}}if(e.transform||(c||t?r.transform=Z$(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:w=0}=o;r.transformOrigin=`${m} ${g} ${w}`}}const o_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function q4(n,e,t){for(const r in e)!Mi(e[r])&&!$4(r,t)&&(n[r]=e[r])}function J$({transformTemplate:n},e){return P.useMemo(()=>{const t=o_();return s_(t,e,n),Object.assign({},t.vars,t.style)},[e])}function eq(n,e){const t=n.style||{},r={};return q4(r,t,n),Object.assign(r,J$(n,e)),r}function tq(n,e){const t={},r=eq(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const nq={offset:"stroke-dashoffset",array:"stroke-dasharray"},rq={offset:"strokeDashoffset",array:"strokeDasharray"};function iq(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?nq:rq;n[o.offset]=Tt.transform(-r);const c=Tt.transform(e),h=Tt.transform(t);n[o.array]=`${c} ${h}`}function K4(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...h},m,g,w){if(s_(n,h,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:A}=n;_.transform&&(A.transform=_.transform,delete _.transform),(A.transform||_.transformOrigin)&&(A.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),A.transform&&(A.transformBox=(w==null?void 0:w.transformBox)??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),r!==void 0&&(_.scale=r),i!==void 0&&iq(_,i,o,c,!1)}const X4=()=>({...o_(),attrs:{}}),Y4=n=>typeof n=="string"&&n.toLowerCase()==="svg";function sq(n,e,t,r){const i=P.useMemo(()=>{const o=X4();return K4(o,e,Y4(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};q4(o,n.style,n),i.style={...o,...i.style}}return i}const oq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function a_(n){return typeof n!="string"||n.includes("-")?!1:!!(oq.indexOf(n)>-1||/[A-Z]/u.test(n))}function aq(n,e,t,{latestValues:r},i,o=!1){const h=(a_(n)?sq:tq)(e,r,i,n),m=$$(e,typeof n=="string",o),g=n!==P.Fragment?{...m,...h,ref:t}:{},{children:w}=e,_=P.useMemo(()=>Mi(w)?w.get():w,[w]);return P.createElement(n,{...g,children:_})}function kA(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function l_(n,e,t,r){if(typeof e=="function"){const[i,o]=kA(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=kA(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function i0(n){return Mi(n)?n.get():n}function lq({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:cq(t,r,i,n),renderState:e()}}function cq(n,e,t,r){const i={},o=r(n,{});for(const A in o)i[A]=i0(o[A]);let{initial:c,animate:h}=n;const m=Wg(n),g=G4(n);e&&g&&!m&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let w=t?t.initial===!1:!1;w=w||c===!1;const _=w?h:c;if(_&&typeof _!="boolean"&&!zg(_)){const A=Array.isArray(_)?_:[_];for(let R=0;R<A.length;R++){const M=l_(n,A[R]);if(M){const{transitionEnd:D,transition:L,...G}=M;for(const z in G){let H=G[z];if(Array.isArray(H)){const Y=w?H.length-1:0;H=H[Y]}H!==null&&(i[z]=H)}for(const z in D)i[z]=D[z]}}}return i}const Q4=n=>(e,t)=>{const r=P.useContext(Ug),i=P.useContext(jg),o=()=>lq(n,e,r,i);return t?o():D2(o)};function c_(n,e,t){var o;const{style:r}=n,i={};for(const c in r)(Mi(r[c])||e.style&&Mi(e.style[c])||$4(c,n)||((o=t==null?void 0:t.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const uq=Q4({scrapeMotionValuesFromProps:c_,createRenderState:o_});function Z4(n,e,t){const r=c_(n,e,t);for(const i in n)if(Mi(n[i])||Mi(e[i])){const o=Zd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const dq=Q4({scrapeMotionValuesFromProps:Z4,createRenderState:X4}),hq=Symbol.for("motionComponentSymbol");function ad(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function fq(n,e,t){return P.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ad(t)&&(t.current=r))},[e])}const u_=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pq="framerAppearId",J4="data-"+u_(pq),eP=P.createContext({});function mq(n,e,t,r,i){var D,L;const{visualElement:o}=P.useContext(Ug),c=P.useContext(W4),h=P.useContext(jg),m=P.useContext(n_).reducedMotion,g=P.useRef(null);r=r||c.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const w=g.current,_=P.useContext(eP);w&&!w.projection&&i&&(w.type==="html"||w.type==="svg")&&gq(g.current,t,i,_);const A=P.useRef(!1);P.useInsertionEffect(()=>{w&&A.current&&w.update(t,h)});const R=t[J4],M=P.useRef(!!R&&!((D=window.MotionHandoffIsComplete)!=null&&D.call(window,R))&&((L=window.MotionHasOptimisedAnimation)==null?void 0:L.call(window,R)));return Q3(()=>{w&&(A.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),M.current&&w.animationState&&w.animationState.animateChanges())}),P.useEffect(()=>{w&&(!M.current&&w.animationState&&w.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var G;(G=window.MotionHandoffMarkAsComplete)==null||G.call(window,R)}),M.current=!1),w.enteringChildren=void 0)}),w}function gq(n,e,t,r){const{layoutId:i,layout:o,drag:c,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:w}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:tP(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||h&&ad(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:w,layoutScroll:m,layoutRoot:g})}function tP(n){if(n)return n.options.allowProjection!==!1?n.projection:tP(n.parent)}function sx(n,{forwardMotionProps:e=!1}={},t,r){t&&W$(t);const i=a_(n)?dq:uq;function o(h,m){let g;const w={...P.useContext(n_),...h,layoutId:yq(h)},{isStatic:_}=w,A=K$(h),R=i(h,_);if(!_&&O2){xq();const M=wq(w);g=M.MeasureLayout,A.visualElement=mq(n,R,w,r,M.ProjectionNode)}return I.jsxs(Ug.Provider,{value:A,children:[g&&A.visualElement?I.jsx(g,{visualElement:A.visualElement,...w}):null,aq(n,h,fq(R,A.visualElement,m),R,_,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=P.forwardRef(o);return c[hq]=n,c}function yq({layoutId:n}){const e=P.useContext(P2).id;return e&&n!==void 0?e+"-"+n:n}function xq(n,e){P.useContext(W4).strict}function wq(n){const{drag:e,layout:t}=Bd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function vq(n,e){if(typeof Proxy>"u")return sx;const t=new Map,r=(o,c)=>sx(o,c,n,e),i=(o,c)=>r(o,c);return new Proxy(i,{get:(o,c)=>c==="create"?r:(t.has(c)||t.set(c,sx(c,void 0,n,e)),t.get(c))})}function nP({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function _q({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Eq(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function ox(n){return n===void 0||n===1}function Nw({scale:n,scaleX:e,scaleY:t}){return!ox(n)||!ox(e)||!ox(t)}function Rc(n){return Nw(n)||rP(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function rP(n){return PA(n.x)||PA(n.y)}function PA(n){return n&&n!=="0%"}function H0(n,e,t){const r=n-t,i=e*r;return t+i}function DA(n,e,t,r,i){return i!==void 0&&(n=H0(n,i,r)),H0(n,t,r)+e}function kw(n,e=0,t=1,r,i){n.min=DA(n.min,e,t,r,i),n.max=DA(n.max,e,t,r,i)}function iP(n,{x:e,y:t}){kw(n.x,e.translate,e.scale,e.originPoint),kw(n.y,t.translate,t.scale,t.originPoint)}const OA=.999999999999,MA=1.0000000000001;function bq(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,c;for(let h=0;h<i;h++){o=t[h],c=o.projectionDelta;const{visualElement:m}=o.options;m&&m.props.style&&m.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&cd(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,iP(n,c)),r&&Rc(o.latestValues)&&cd(n,o.latestValues))}e.x<MA&&e.x>OA&&(e.x=1),e.y<MA&&e.y>OA&&(e.y=1)}function ld(n,e){n.min=n.min+e,n.max=n.max+e}function LA(n,e,t,r,i=.5){const o=cr(n.min,n.max,i);kw(n,e,t,o,r)}function cd(n,e){LA(n.x,e.x,e.scaleX,e.scale,e.originX),LA(n.y,e.y,e.scaleY,e.scale,e.originY)}function sP(n,e){return nP(Eq(n.getBoundingClientRect(),e))}function Iq(n,e,t){const r=sP(n,t),{scroll:i}=e;return i&&(ld(r.x,i.offset.x),ld(r.y,i.offset.y)),r}const VA=()=>({translate:0,scale:1,origin:0,originPoint:0}),ud=()=>({x:VA(),y:VA()}),FA=()=>({min:0,max:0}),Nr=()=>({x:FA(),y:FA()}),Pw={current:null},oP={current:!1};function Tq(){if(oP.current=!0,!!O2)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pw.current=n.matches;n.addEventListener("change",e),e()}else Pw.current=!1}const Aq=new WeakMap;function Cq(n,e,t){for(const r in e){const i=e[r],o=t[r];if(Mi(i))n.addValue(r,i);else if(Mi(o))n.addValue(r,Fd(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=n.getStaticValue(r);n.addValue(r,Fd(c!==void 0?c:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const BA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Sq{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=hs.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,nr.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=c;this.latestValues=m,this.baseTarget={...m},this.initialValues=t.initial?{...m}:{},this.renderState=g,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Wg(t),this.isVariantNode=G4(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const A in _){const R=_[A];m[A]!==void 0&&Mi(R)&&R.set(m[A])}}mount(e){var t;this.current=e,Aq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),oP.current||Tq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Pw.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Hl(this.notifyUpdate),Hl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Jd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&nr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bd){const t=Bd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<BA.length;r++){const i=BA[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=e[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=Cq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Fd(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Z3(r)||e4(r))?r=parseFloat(r):!F$(r)&&Gl.test(t)&&(r=M4(e,t)),this.setBaseTarget(e,Mi(r)?r.get():r)),Mi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=l_(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Mi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new B2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){e_.render(this.render)}}class aP extends Sq{constructor(){super(...arguments),this.KeyframeResolver=A$}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function lP(n,{style:e,vars:t},r,i){const o=n.style;let c;for(c in e)o[c]=e[c];i==null||i.applyProjectionStyles(o,r);for(c in t)o.setProperty(c,t[c])}function Rq(n){return window.getComputedStyle(n)}class Nq extends aP{constructor(){super(...arguments),this.type="html",this.renderInstance=lP}readValueFromInstance(e,t){var r;if(Jd.has(t))return(r=this.projection)!=null&&r.isProjecting?bw(t):GG(e,t);{const i=Rq(e),o=(z2(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return sP(e,t)}build(e,t,r){s_(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return c_(e,t,r)}}const cP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kq(n,e,t,r){lP(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(cP.has(i)?i:u_(i),e.attrs[i])}class Pq extends aP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Jd.has(t)){const r=O4(t);return r&&r.default||0}return t=cP.has(t)?t:u_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return Z4(e,t,r)}build(e,t,r){K4(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){kq(e,t,r,i)}mount(e){this.isSVGTag=Y4(e.tagName),super.mount(e)}}const Dq=(n,e)=>a_(n)?new Pq(e):new Nq(e,{allowProjection:n!==P.Fragment});function gd(n,e,t){const r=n.getProps();return l_(r,e,t!==void 0?t:r.custom,n)}const Dw=n=>Array.isArray(n);function Oq(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Fd(t))}function Mq(n){return Dw(n)?n[n.length-1]||0:n}function Lq(n,e){const t=gd(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const c in o){const h=Mq(o[c]);Oq(n,c,h)}}function Vq(n){return!!(Mi(n)&&n.add)}function Ow(n,e){const t=n.getValue("willChange");if(Vq(t))return t.add(e);if(!t&&Ua.WillChange){const r=new Ua.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function uP(n){return n.props[J4]}const Fq=n=>n!==null;function Bq(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Fq),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const jq={type:"spring",stiffness:500,damping:25,restSpeed:10},Uq=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),zq={type:"keyframes",duration:.8},Wq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Hq=(n,{keyframes:e})=>e.length>2?zq:Jd.has(n)?n.startsWith("scale")?Uq(e[1]):jq:Wq;function Gq({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:h,from:m,elapsed:g,...w}){return!!Object.keys(w).length}const d_=(n,e,t,r={},i,o)=>c=>{const h=Z2(r,n)||{},m=h.delay||r.delay||0;let{elapsed:g=0}=r;g=g-Jo(m);const w={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:A=>{e.set(A),h.onUpdate&&h.onUpdate(A)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:i};Gq(h)||Object.assign(w,Hq(n,w)),w.duration&&(w.duration=Jo(w.duration)),w.repeatDelay&&(w.repeatDelay=Jo(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let _=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(Sw(w),w.delay===0&&(_=!0)),(Ua.instantAnimations||Ua.skipAnimations)&&(_=!0,Sw(w),w.delay=0),w.allowFlatten=!h.type&&!h.ease,_&&!o&&e.get()!==void 0){const A=Bq(w.keyframes,h);if(A!==void 0){nr.update(()=>{w.onUpdate(A),w.onComplete()});return}}return h.isSync?new Y2(w):new p$(w)};function $q({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function dP(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(o=r);const m=[],g=i&&n.animationState&&n.animationState.getState()[i];for(const w in h){const _=n.getValue(w,n.latestValues[w]??null),A=h[w];if(A===void 0||g&&$q(g,w))continue;const R={delay:t,...Z2(o||{},w)},M=_.get();if(M!==void 0&&!_.isAnimating&&!Array.isArray(A)&&A===M&&!R.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const G=uP(n);if(G){const z=window.MotionHandoffAnimation(G,w,nr);z!==null&&(R.startTime=z,D=!0)}}Ow(n,w),_.start(d_(w,_,A,n.shouldReduceMotion&&k4.has(w)?{type:!1}:R,n,D));const L=_.animation;L&&m.push(L)}return c&&Promise.all(m).then(()=>{nr.update(()=>{c&&Lq(n,c)})}),m}function hP(n,e,t,r=0,i=1){const o=Array.from(n).sort((g,w)=>g.sortNodePosition(w)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(o,c):i===1?o*r:h-o*r}function Mw(n,e,t={}){var m;const r=gd(n,e,t.type==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(dP(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(g=0)=>{const{delayChildren:w=0,staggerChildren:_,staggerDirection:A}=i;return qq(n,e,g,w,_,A,t)}:()=>Promise.resolve(),{when:h}=i;if(h){const[g,w]=h==="beforeChildren"?[o,c]:[c,o];return g().then(()=>w())}else return Promise.all([o(),c(t.delay)])}function qq(n,e,t=0,r=0,i=0,o=1,c){const h=[];for(const m of n.variantChildren)m.notify("AnimationStart",e),h.push(Mw(m,e,{...c,delay:t+(typeof r=="function"?0:r)+hP(n.variantChildren,m,r,i,o)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(h)}function Kq(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Mw(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=Mw(n,e,t);else{const i=typeof e=="function"?gd(n,e,t.custom):e;r=Promise.all(dP(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function fP(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const Xq=i_.length;function pP(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?pP(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Xq;t++){const r=i_[t],i=n.props[r];(Ff(i)||i===!1)&&(e[r]=i)}return e}const Yq=[...r_].reverse(),Qq=r_.length;function Zq(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Kq(n,t,r)))}function Jq(n){let e=Zq(n),t=jA(),r=!0;const i=m=>(g,w)=>{var A;const _=gd(n,w,m==="exit"?(A=n.presenceContext)==null?void 0:A.custom:void 0);if(_){const{transition:R,transitionEnd:M,...D}=_;g={...g,...D,...M}}return g};function o(m){e=m(n)}function c(m){const{props:g}=n,w=pP(n.parent)||{},_=[],A=new Set;let R={},M=1/0;for(let L=0;L<Qq;L++){const G=Yq[L],z=t[G],H=g[G]!==void 0?g[G]:w[G],Y=Ff(H),re=G===m?z.isActive:null;re===!1&&(M=L);let ie=H===w[G]&&H!==g[G]&&Y;if(ie&&r&&n.manuallyAnimateOnMount&&(ie=!1),z.protectedKeys={...R},!z.isActive&&re===null||!H&&!z.prevProp||zg(H)||typeof H=="boolean")continue;const V=eK(z.prevProp,H);let B=V||G===m&&z.isActive&&!ie&&Y||L>M&&Y,W=!1;const Z=Array.isArray(H)?H:[H];let te=Z.reduce(i(G),{});re===!1&&(te={});const{prevResolvedValues:ee={}}=z,K={...ee,...te},we=xe=>{B=!0,A.has(xe)&&(W=!0,A.delete(xe)),z.needsAnimating[xe]=!0;const oe=n.getValue(xe);oe&&(oe.liveStyle=!1)};for(const xe in K){const oe=te[xe],Ae=ee[xe];if(R.hasOwnProperty(xe))continue;let Ne=!1;Dw(oe)&&Dw(Ae)?Ne=!fP(oe,Ae):Ne=oe!==Ae,Ne?oe!=null?we(xe):A.add(xe):oe!==void 0&&A.has(xe)?we(xe):z.protectedKeys[xe]=!0}z.prevProp=H,z.prevResolvedValues=te,z.isActive&&(R={...R,...te}),r&&n.blockInitialAnimation&&(B=!1);const se=ie&&V;B&&(!se||W)&&_.push(...Z.map(xe=>{const oe={type:G};if(typeof xe=="string"&&r&&!se&&n.manuallyAnimateOnMount&&n.parent){const{parent:Ae}=n,Ne=gd(Ae,xe);if(Ae.enteringChildren&&Ne){const{delayChildren:ae}=Ne.transition||{};oe.delay=hP(Ae.enteringChildren,n,ae)}}return{animation:xe,options:oe}}))}if(A.size){const L={};if(typeof g.initial!="boolean"){const G=gd(n,Array.isArray(g.initial)?g.initial[0]:g.initial);G&&G.transition&&(L.transition=G.transition)}A.forEach(G=>{const z=n.getBaseTarget(G),H=n.getValue(G);H&&(H.liveStyle=!0),L[G]=z??null}),_.push({animation:L})}let D=!!_.length;return r&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(_):Promise.resolve()}function h(m,g){var _;if(t[m].isActive===g)return Promise.resolve();(_=n.variantChildren)==null||_.forEach(A=>{var R;return(R=A.animationState)==null?void 0:R.setActive(m,g)}),t[m].isActive=g;const w=c(m);for(const A in t)t[A].protectedKeys={};return w}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=jA(),r=!0}}}function eK(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!fP(e,n):!1}function Tc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jA(){return{animate:Tc(!0),whileInView:Tc(),whileHover:Tc(),whileTap:Tc(),whileDrag:Tc(),whileFocus:Tc(),exit:Tc()}}class tc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class tK extends tc{constructor(e){super(e),e.animationState||(e.animationState=Jq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let nK=0;class rK extends tc{constructor(){super(...arguments),this.id=nK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const iK={animation:{Feature:tK},exit:{Feature:rK}};function jf(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function yp(n){return{point:{x:n.pageX,y:n.pageY}}}const sK=n=>e=>t_(e)&&n(e,yp(e));function hf(n,e,t,r){return jf(n,e,sK(t),r)}const mP=1e-4,oK=1-mP,aK=1+mP,gP=.01,lK=0-gP,cK=0+gP;function Yi(n){return n.max-n.min}function uK(n,e,t){return Math.abs(n-e)<=t}function UA(n,e,t,r=.5){n.origin=r,n.originPoint=cr(e.min,e.max,n.origin),n.scale=Yi(t)/Yi(e),n.translate=cr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=oK&&n.scale<=aK||isNaN(n.scale))&&(n.scale=1),(n.translate>=lK&&n.translate<=cK||isNaN(n.translate))&&(n.translate=0)}function ff(n,e,t,r){UA(n.x,e.x,t.x,r?r.originX:void 0),UA(n.y,e.y,t.y,r?r.originY:void 0)}function zA(n,e,t){n.min=t.min+e.min,n.max=n.min+Yi(e)}function dK(n,e,t){zA(n.x,e.x,t.x),zA(n.y,e.y,t.y)}function WA(n,e,t){n.min=e.min-t.min,n.max=n.min+Yi(e)}function pf(n,e,t){WA(n.x,e.x,t.x),WA(n.y,e.y,t.y)}function Ks(n){return[n("x"),n("y")]}const yP=({current:n})=>n?n.ownerDocument.defaultView:null,HA=(n,e)=>Math.abs(n-e);function hK(n,e){const t=HA(n.x,e.x),r=HA(n.y,e.y);return Math.sqrt(t**2+r**2)}class xP{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=lx(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,M=hK(A.offset,{x:0,y:0})>=this.distanceThreshold;if(!R&&!M)return;const{point:D}=A,{timestamp:L}=mi;this.history.push({...D,timestamp:L});const{onStart:G,onMove:z}=this.handlers;R||(G&&G(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,A)},this.handlePointerMove=(A,R)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=ax(R,this.transformPagePoint),nr.update(this.updatePoint,!0)},this.handlePointerUp=(A,R)=>{this.end();const{onEnd:M,onSessionEnd:D,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const G=lx(A.type==="pointercancel"?this.lastMoveEventInfo:ax(R,this.transformPagePoint),this.history);this.startEvent&&M&&M(A,G),D&&D(A,G)},!t_(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const h=yp(e),m=ax(h,this.transformPagePoint),{point:g}=m,{timestamp:w}=mi;this.history=[{...g,timestamp:w}];const{onSessionStart:_}=t;_&&_(e,lx(m,this.history)),this.removeListeners=fp(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Hl(this.updatePoint)}}function ax(n,e){return e?{point:e(n.point)}:n}function GA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lx({point:n},e){return{point:n,delta:GA(n,wP(e)),offset:GA(n,fK(e)),velocity:pK(e,.1)}}function fK(n){return n[0]}function wP(n){return n[n.length-1]}function pK(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=wP(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Jo(e)));)t--;if(!r)return{x:0,y:0};const o=ea(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function mK(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?cr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?cr(t,n,r.max):Math.min(n,t)),n}function $A(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function gK(n,{top:e,left:t,bottom:r,right:i}){return{x:$A(n.x,t,i),y:$A(n.y,e,r)}}function qA(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function yK(n,e){return{x:qA(n.x,e.x),y:qA(n.y,e.y)}}function xK(n,e){let t=.5;const r=Yi(n),i=Yi(e);return i>r?t=Mf(e.min,e.max-r,n.min):r>i&&(t=Mf(n.min,n.max-i,e.min)),ja(0,1,t)}function wK(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Lw=.35;function vK(n=Lw){return n===!1?n=0:n===!0&&(n=Lw),{x:KA(n,"left","right"),y:KA(n,"top","bottom")}}function KA(n,e,t){return{min:XA(n,e),max:XA(n,t)}}function XA(n,e){return typeof n=="number"?n:n[e]||0}const _K=new WeakMap;class EK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(yp(_).point)},c=(_,A)=>{const{drag:R,dragPropagation:M,onDragStart:D}=this.getProps();if(R&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=N$(R),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=A,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ks(G=>{let z=this.getAxisMotionValue(G).get()||0;if(ta.test(z)){const{projection:H}=this.visualElement;if(H&&H.layout){const Y=H.layout.layoutBox[G];Y&&(z=Yi(Y)*(parseFloat(z)/100))}}this.originPoint[G]=z}),D&&nr.postRender(()=>D(_,A)),Ow(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},h=(_,A)=>{this.latestPointerEvent=_,this.latestPanInfo=A;const{dragPropagation:R,dragDirectionLock:M,onDirectionLock:D,onDrag:L}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:G}=A;if(M&&this.currentDirection===null){this.currentDirection=bK(G),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",A.point,G),this.updateAxis("y",A.point,G),this.visualElement.render(),L&&L(_,A)},m=(_,A)=>{this.latestPointerEvent=_,this.latestPanInfo=A,this.stop(_,A),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Ks(_=>{var A;return this.getAnimationState(_)==="paused"&&((A=this.getAxisMotionValue(_).animation)==null?void 0:A.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new xP(e,{onSessionStart:o,onStart:c,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:r,contextWindow:yP(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&nr.postRender(()=>h(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Rm(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=mK(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&ad(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=gK(r.layoutBox,e):this.constraints=!1,this.elastic=vK(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ks(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=wK(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ad(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Iq(r,i.root,this.visualElement.getTransformPagePoint());let c=yK(i.layout.layoutBox,o);if(t){const h=t(_q(c));this.hasMutatedConstraints=!!h,h&&(c=nP(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=Ks(w=>{if(!Rm(w,t,this.currentDirection))return;let _=m&&m[w]||{};c&&(_={min:0,max:0});const A=i?200:1e6,R=i?40:1e7,M={type:"inertia",velocity:r?e[w]:0,bounceStiffness:A,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(w,M)});return Promise.all(g).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Ow(this.visualElement,e),r.start(d_(e,r,0,t,this.visualElement,!1))}stopAnimation(){Ks(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ks(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ks(t=>{const{drag:r}=this.getProps();if(!Rm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:c,max:h}=i.layout.layoutBox[t];o.set(e[t]-cr(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ad(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ks(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const m=h.get();i[c]=xK({min:m,max:m},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ks(c=>{if(!Rm(c,e,null))return;const h=this.getAxisMotionValue(c),{min:m,max:g}=this.constraints[c];h.set(cr(m,g,i[c]))})}addListeners(){if(!this.visualElement.current)return;_K.set(this.visualElement,this);const e=this.visualElement.current,t=hf(e,"pointerdown",m=>{const{drag:g,dragListener:w=!0}=this.getProps();g&&w&&this.start(m)}),r=()=>{const{dragConstraints:m}=this.getProps();ad(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nr.read(r);const c=jf(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(Ks(w=>{const _=this.getAxisMotionValue(w);_&&(this.originPoint[w]+=m[w].translate,_.set(_.get()+m[w].translate))}),this.visualElement.render())});return()=>{c(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=Lw,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function Rm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function bK(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class IK extends tc{constructor(e){super(e),this.removeGroupControls=eo,this.removeListeners=eo,this.controls=new EK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eo}unmount(){this.removeGroupControls(),this.removeListeners()}}const YA=n=>(e,t)=>{n&&nr.postRender(()=>n(e,t))};class TK extends tc{constructor(){super(...arguments),this.removePointerDownListener=eo}onPointerDown(e){this.session=new xP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:YA(e),onStart:YA(t),onMove:r,onEnd:(o,c)=>{delete this.session,i&&nr.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const s0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Vh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Tt.test(n))n=parseFloat(n);else return n;const t=QA(n,e.target.x),r=QA(n,e.target.y);return`${t}% ${r}%`}},AK={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Gl.parse(n);if(i.length>5)return r;const o=Gl.createTransformer(n),c=typeof i[0]!="number"?1:0,h=t.x.scale*e.x,m=t.y.scale*e.y;i[0+c]/=h,i[1+c]/=m;const g=cr(h,m,.5);return typeof i[2+c]=="number"&&(i[2+c]/=g),typeof i[3+c]=="number"&&(i[3+c]/=g),o(i)}};let cx=!1;class CK extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;X$(SK),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),cx&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),s0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,cx=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||nr.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),e_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;cx=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function vP(n){const[e,t]=z4(),r=P.useContext(P2);return I.jsx(CK,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(eP),isPresent:e,safeToRemove:t})}const SK={borderRadius:{...Vh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vh,borderTopRightRadius:Vh,borderBottomLeftRadius:Vh,borderBottomRightRadius:Vh,boxShadow:AK};function RK(n,e,t){const r=Mi(n)?n:Fd(n);return r.start(d_("",r,e,t)),r.animation}const NK=(n,e)=>n.depth-e.depth;class kK{constructor(){this.children=[],this.isDirty=!1}add(e){M2(this.children,e),this.isDirty=!0}remove(e){L2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(NK),this.isDirty=!1,this.children.forEach(e)}}function PK(n,e){const t=hs.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(Hl(r),n(o-e))};return nr.setup(r,!0),()=>Hl(r)}const _P=["TopLeft","TopRight","BottomLeft","BottomRight"],DK=_P.length,ZA=n=>typeof n=="string"?parseFloat(n):n,JA=n=>typeof n=="number"||Tt.test(n);function OK(n,e,t,r,i,o){i?(n.opacity=cr(0,t.opacity??1,MK(r)),n.opacityExit=cr(e.opacity??1,0,LK(r))):o&&(n.opacity=cr(e.opacity??1,t.opacity??1,r));for(let c=0;c<DK;c++){const h=`border${_P[c]}Radius`;let m=eC(e,h),g=eC(t,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||JA(m)===JA(g)?(n[h]=Math.max(cr(ZA(m),ZA(g),r),0),(ta.test(g)||ta.test(m))&&(n[h]+="%")):n[h]=g}(e.rotate||t.rotate)&&(n.rotate=cr(e.rotate||0,t.rotate||0,r))}function eC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const MK=EP(0,.5,l4),LK=EP(.5,.95,eo);function EP(n,e,t){return r=>r<n?0:r>e?1:t(Mf(n,e,r))}function tC(n,e){n.min=e.min,n.max=e.max}function qs(n,e){tC(n.x,e.x),tC(n.y,e.y)}function nC(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function rC(n,e,t,r,i){return n-=e,n=H0(n,1/t,r),i!==void 0&&(n=H0(n,1/i,r)),n}function VK(n,e=0,t=1,r=.5,i,o=n,c=n){if(ta.test(e)&&(e=parseFloat(e),e=cr(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=cr(o.min,o.max,r);n===o&&(h-=e),n.min=rC(n.min,e,t,h,i),n.max=rC(n.max,e,t,h,i)}function iC(n,e,[t,r,i],o,c){VK(n,e[t],e[r],e[i],e.scale,o,c)}const FK=["x","scaleX","originX"],BK=["y","scaleY","originY"];function sC(n,e,t,r){iC(n.x,e,FK,t?t.x:void 0,r?r.x:void 0),iC(n.y,e,BK,t?t.y:void 0,r?r.y:void 0)}function oC(n){return n.translate===0&&n.scale===1}function bP(n){return oC(n.x)&&oC(n.y)}function aC(n,e){return n.min===e.min&&n.max===e.max}function jK(n,e){return aC(n.x,e.x)&&aC(n.y,e.y)}function lC(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function IP(n,e){return lC(n.x,e.x)&&lC(n.y,e.y)}function cC(n){return Yi(n.x)/Yi(n.y)}function uC(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class UK{constructor(){this.members=[]}add(e){M2(this.members,e),e.scheduleRender()}remove(e){if(L2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function zK(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:g,rotate:w,rotateX:_,rotateY:A,skewX:R,skewY:M}=t;g&&(r=`perspective(${g}px) ${r}`),w&&(r+=`rotate(${w}deg) `),_&&(r+=`rotateX(${_}deg) `),A&&(r+=`rotateY(${A}deg) `),R&&(r+=`skewX(${R}deg) `),M&&(r+=`skewY(${M}deg) `)}const h=n.x.scale*e.x,m=n.y.scale*e.y;return(h!==1||m!==1)&&(r+=`scale(${h}, ${m})`),r||"none"}const ux=["","X","Y","Z"],WK=1e3;let HK=0;function dx(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function TP(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=uP(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",nr,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&TP(r)}function AP({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},h=e==null?void 0:e()){this.id=HK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qK),this.nodes.forEach(QK),this.nodes.forEach(ZK),this.nodes.forEach(KK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new kK)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new B2),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const m=this.eventHandlers.get(c);m&&m.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=U4(c)&&!L$(c),this.instance=c;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),n){let w,_=0;const A=()=>this.root.updateBlockedByResize=!1;nr.read(()=>{_=window.innerWidth}),n(c,()=>{const R=window.innerWidth;R!==_&&(_=R,this.root.updateBlockedByResize=!0,w&&w(),w=PK(A,250),s0.hasAnimatedSinceResize&&(s0.hasAnimatedSinceResize=!1,this.nodes.forEach(fC)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:_,hasRelativeLayoutChanged:A,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||g.getDefaultTransition()||rX,{onLayoutAnimationStart:D,onLayoutAnimationComplete:L}=g.getProps(),G=!this.targetLayout||!IP(this.targetLayout,R),z=!_&&A;if(this.options.layoutRoot||this.resumeFrom||z||_&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const H={...Z2(M,"layout"),onPlay:D,onComplete:L};(g.shouldReduceMotion||this.options.layoutRoot)&&(H.delay=0,H.type=!1),this.startAnimation(H),this.setAnimationOrigin(w,z)}else _||fC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JK),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&TP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const _=this.path[w];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(hC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(YK),this.nodes.forEach(GK),this.nodes.forEach($K)):this.nodes.forEach(hC),this.clearAllSnapshots();const h=hs.now();mi.delta=ja(0,1e3/60,h-mi.timestamp),mi.timestamp=h,mi.isProcessing=!0,Jy.update.process(mi),Jy.preRender.process(mi),Jy.render.process(mi),mi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,e_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XK),this.sharedNodes.forEach(eX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Yi(this.snapshot.measuredBox.x)&&!Yi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const m=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:m,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!bP(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,w=g!==this.prevTransformTemplateValue;c&&this.instance&&(h||Rc(this.latestValues)||w)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return c&&(m=this.removeTransform(m)),iX(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:c}=this.options;if(!c)return Nr();const h=c.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(sX))){const{scroll:w}=this.root;w&&(ld(h.x,w.offset.x),ld(h.y,w.offset.y))}return h}removeElementScroll(c){var m;const h=Nr();if(qs(h,c),(m=this.scroll)!=null&&m.wasRoot)return h;for(let g=0;g<this.path.length;g++){const w=this.path[g],{scroll:_,options:A}=w;w!==this.root&&_&&A.layoutScroll&&(_.wasRoot&&qs(h,c),ld(h.x,_.offset.x),ld(h.y,_.offset.y))}return h}applyTransform(c,h=!1){const m=Nr();qs(m,c);for(let g=0;g<this.path.length;g++){const w=this.path[g];!h&&w.options.layoutScroll&&w.scroll&&w!==w.root&&cd(m,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Rc(w.latestValues)&&cd(m,w.latestValues)}return Rc(this.latestValues)&&cd(m,this.latestValues),m}removeTransform(c){const h=Nr();qs(h,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!Rc(g.latestValues))continue;Nw(g.latestValues)&&g.updateSnapshot();const w=Nr(),_=g.measurePageBox();qs(w,_),sC(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,w)}return Rc(this.latestValues)&&sC(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var A;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(A=this.parent)!=null&&A.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:_}=this.options;if(!(!this.layout||!(w||_))){if(this.resolvedRelativeTargetAt=mi.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),pf(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nr(),this.targetWithTransforms=Nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qs(this.target,this.layout.layoutBox),iP(this.target,this.targetDelta)):qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),pf(this.relativeTargetOrigin,this.target,R.target),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Nw(this.parent.latestValues)||rP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let m=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===mi.timestamp&&(m=!1),m)return;const{layout:g,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||w))return;qs(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,A=this.treeScale.y;bq(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Nr());const{target:R}=c;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nC(this.prevProjectionDelta.x,this.projectionDelta.x),nC(this.prevProjectionDelta.y,this.projectionDelta.y)),ff(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==A||!uC(this.projectionDelta.x,this.prevProjectionDelta.x)||!uC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ud(),this.projectionDelta=ud(),this.projectionDeltaWithTransform=ud()}setAnimationOrigin(c,h=!1){const m=this.snapshot,g=m?m.latestValues:{},w={...this.latestValues},_=ud();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const A=Nr(),R=m?m.source:void 0,M=this.layout?this.layout.source:void 0,D=R!==M,L=this.getStack(),G=!L||L.members.length<=1,z=!!(D&&!G&&this.options.crossfade===!0&&!this.path.some(nX));this.animationProgress=0;let H;this.mixTargetDelta=Y=>{const re=Y/1e3;pC(_.x,c.x,re),pC(_.y,c.y,re),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pf(A,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tX(this.relativeTarget,this.relativeTargetOrigin,A,re),H&&jK(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=Nr()),qs(H,this.relativeTarget)),D&&(this.animationValues=w,OK(w,g,this.latestValues,re,z,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=re},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,m,g;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(g=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||g.stop(),this.pendingAnimation&&(Hl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nr.update(()=>{s0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Fd(0)),this.currentAnimation=RK(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),c.onUpdate&&c.onUpdate(w)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:w}=c;if(!(!h||!m||!g)){if(this!==c&&this.layout&&g&&CP(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||Nr();const _=Yi(this.layout.layoutBox.x);m.x.min=c.target.x.min,m.x.max=m.x.min+_;const A=Yi(this.layout.layoutBox.y);m.y.min=c.target.y.min,m.y.max=m.y.min+A}qs(h,m),cd(h,w),ff(this.projectionDeltaWithTransform,this.layoutCorrected,h,w)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new UK),this.sharedNodes.get(c).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:m}=c;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&dx("z",c,g,this.animationValues);for(let w=0;w<ux.length;w++)dx(`rotate${ux[w]}`,c,g,this.animationValues),dx(`skew${ux[w]}`,c,g,this.animationValues);c.render();for(const w in g)c.setStaticValue(w,g[w]),this.animationValues&&(this.animationValues[w]=g[w]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=i0(h==null?void 0:h.pointerEvents)||"",c.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=i0(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Rc(this.latestValues)&&(c.transform=m?m({},""):"none",this.hasProjected=!1);return}c.visibility="";const w=g.animationValues||g.latestValues;this.applyTransformsToTarget();let _=zK(this.projectionDeltaWithTransform,this.treeScale,w);m&&(_=m(w,_)),c.transform=_;const{x:A,y:R}=this.projectionDelta;c.transformOrigin=`${A.origin*100}% ${R.origin*100}% 0`,g.animationValues?c.opacity=g===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:c.opacity=g===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const M in Bf){if(w[M]===void 0)continue;const{correct:D,applyTo:L,isCSSVariable:G}=Bf[M],z=_==="none"?w[M]:D(w[M],g);if(L){const H=L.length;for(let Y=0;Y<H;Y++)c[L[Y]]=z}else G?this.options.visualElement.renderState.vars[M]=z:c[M]=z}this.options.layoutId&&(c.pointerEvents=g===this?i0(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(dC),this.root.sharedNodes.clear()}}}function GK(n){n.updateLayout()}function $K(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,c=e.source!==n.layout.source;o==="size"?Ks(_=>{const A=c?e.measuredBox[_]:e.layoutBox[_],R=Yi(A);A.min=r[_].min,A.max=A.min+R}):CP(o,e.layoutBox,r)&&Ks(_=>{const A=c?e.measuredBox[_]:e.layoutBox[_],R=Yi(r[_]);A.max=A.min+R,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+R)});const h=ud();ff(h,r,e.layoutBox);const m=ud();c?ff(m,n.applyTransform(i,!0),e.measuredBox):ff(m,r,e.layoutBox);const g=!bP(h);let w=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:A,layout:R}=_;if(A&&R){const M=Nr();pf(M,e.layoutBox,A.layoutBox);const D=Nr();pf(D,r,R.layoutBox),IP(M,D)||(w=!0),_.options.layoutRoot&&(n.relativeTarget=D,n.relativeTargetOrigin=M,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:m,layoutDelta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:w})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function qK(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function KK(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function XK(n){n.clearSnapshot()}function dC(n){n.clearMeasurements()}function hC(n){n.isLayoutDirty=!1}function YK(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function fC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function QK(n){n.resolveTargetDelta()}function ZK(n){n.calcProjection()}function JK(n){n.resetSkewAndRotation()}function eX(n){n.removeLeadSnapshot()}function pC(n,e,t){n.translate=cr(e.translate,0,t),n.scale=cr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mC(n,e,t,r){n.min=cr(e.min,t.min,r),n.max=cr(e.max,t.max,r)}function tX(n,e,t,r){mC(n.x,e.x,t.x,r),mC(n.y,e.y,t.y,r)}function nX(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const rX={duration:.45,ease:[.4,0,.1,1]},gC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),yC=gC("applewebkit/")&&!gC("chrome/")?Math.round:eo;function xC(n){n.min=yC(n.min),n.max=yC(n.max)}function iX(n){xC(n.x),xC(n.y)}function CP(n,e,t){return n==="position"||n==="preserve-aspect"&&!uK(cC(e),cC(t),.2)}function sX(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const oX=AP({attachResizeListener:(n,e)=>jf(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hx={current:void 0},SP=AP({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!hx.current){const n=new oX({});n.mount(window),n.setOptions({layoutScroll:!0}),hx.current=n}return hx.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),aX={pan:{Feature:TK},drag:{Feature:IK,ProjectionNode:SP,MeasureLayout:vP}};function wC(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&nr.postRender(()=>o(e,yp(e)))}class lX extends tc{mount(){const{current:e}=this.node;e&&(this.unmount=k$(e,(t,r)=>(wC(this.node,r,"Start"),i=>wC(this.node,i,"End"))))}unmount(){}}class cX extends tc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fp(jf(this.node.current,"focus",()=>this.onFocus()),jf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vC(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&nr.postRender(()=>o(e,yp(e)))}class uX extends tc{mount(){const{current:e}=this.node;e&&(this.unmount=M$(e,(t,r)=>(vC(this.node,r,"Start"),(i,{success:o})=>vC(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vw=new WeakMap,fx=new WeakMap,dX=n=>{const e=Vw.get(n.target);e&&e(n)},hX=n=>{n.forEach(dX)};function fX({root:n,...e}){const t=n||document;fx.has(t)||fx.set(t,{});const r=fx.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(hX,{root:n,...e})),r[i]}function pX(n,e,t){const r=fX(e);return Vw.set(n,t),r.observe(n),()=>{Vw.delete(n),r.unobserve(n)}}const mX={some:0,all:1};class gX extends tc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:mX[i]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:w,onViewportLeave:_}=this.node.getProps(),A=g?w:_;A&&A(m)};return pX(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(yX(e,t))&&this.startObserver()}unmount(){}}function yX({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const xX={inView:{Feature:gX},tap:{Feature:uX},focus:{Feature:cX},hover:{Feature:lX}},wX={layout:{ProjectionNode:SP,MeasureLayout:vP}},vX={...iK,...xX,...aX,...wX},oa=vq(vX,Dq);function _X({matchName:n,onDismiss:e,onSeeMatches:t}){const r=no(),i=()=>{t&&t(),r(Kn("Matches")),e()};return I.jsxs(oa.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-pink-500 via-purple-500 to-indigo-600 text-white rounded-xl shadow-2xl",children:[I.jsx("button",{onClick:e,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:I.jsx(Li,{className:"w-5 h-5"})}),I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(l5,{className:"w-10 h-10 text-yellow-300 flex-shrink-0"}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-lg font-bold",children:"It's a Match!"}),I.jsxs("p",{className:"text-sm opacity-90",children:["You and ",n," liked each other."]})]})]}),I.jsxs(Dt,{onClick:i,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["See Matches ",I.jsx(cv,{className:"w-4 h-4 ml-2"})]})]})}function EX({senderName:n,senderSessionId:e,onDismiss:t,onView:r}){const i=no(),o=()=>{r&&r(),i(Kn(`Matches?openChat=${e}`)),t()};return I.jsxs(oa.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-blue-500 via-sky-500 to-cyan-600 text-white rounded-xl shadow-2xl",children:[I.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:I.jsx(Li,{className:"w-5 h-5"})}),I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsx(yf,{className:"w-10 h-10 text-white/80 flex-shrink-0"}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-lg font-bold",children:"New Message"}),I.jsxs("p",{className:"text-sm opacity-90",children:["You have a new message from ",n,"."]})]})]}),I.jsxs(Dt,{onClick:o,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["View Message ",I.jsx(cv,{className:"w-4 h-4 ml-2"})]})]})}const $l=P.forwardRef(({className:n,type:e,...t},r)=>I.jsx("input",{type:e,className:ln("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));$l.displayName="Input";const Uf=P.forwardRef(({className:n,...e},t)=>I.jsx("textarea",{className:ln("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));Uf.displayName="Textarea";var bX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nn=bX.reduce((n,e)=>{const t=Vd(`Primitive.${e}`),r=P.forwardRef((i,o)=>{const{asChild:c,...h}=i,m=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),I.jsx(m,{...h,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function IX(n,e){n&&Xf.flushSync(()=>n.dispatchEvent(e))}var TX="Label",RP=P.forwardRef((n,e)=>I.jsx(nn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));RP.displayName=TX;var NP=RP;const AX=Bg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),cs=P.forwardRef(({className:n,...e},t)=>I.jsx(NP,{ref:t,className:ln(AX(),n),...e}));cs.displayName=NP.displayName;function G0(n,[e,t]){return Math.min(t,Math.max(e,n))}function an(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function CX(n,e){const t=P.createContext(e),r=o=>{const{children:c,...h}=o,m=P.useMemo(()=>h,Object.values(h));return I.jsx(t.Provider,{value:m,children:c})};r.displayName=n+"Provider";function i(o){const c=P.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,i]}function eh(n,e=[]){let t=[];function r(o,c){const h=P.createContext(c),m=t.length;t=[...t,c];const g=_=>{var G;const{scope:A,children:R,...M}=_,D=((G=A==null?void 0:A[n])==null?void 0:G[m])||h,L=P.useMemo(()=>M,Object.values(M));return I.jsx(D.Provider,{value:L,children:R})};g.displayName=o+"Provider";function w(_,A){var D;const R=((D=A==null?void 0:A[n])==null?void 0:D[m])||h,M=P.useContext(R);if(M)return M;if(c!==void 0)return c;throw new Error(`\`${_}\` must be used within \`${o}\``)}return[g,w]}const i=()=>{const o=t.map(c=>P.createContext(c));return function(h){const m=(h==null?void 0:h[n])||o;return P.useMemo(()=>({[`__scope${n}`]:{...h,[n]:m}}),[h,m])}};return i.scopeName=n,[r,SX(i,...e)]}function SX(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((h,{useScope:m,scopeName:g})=>{const _=m(o)[`__scope${g}`];return{...h,..._}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function kP(n){const e=n+"CollectionProvider",[t,r]=eh(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=D=>{const{scope:L,children:G}=D,z=ze.useRef(null),H=ze.useRef(new Map).current;return I.jsx(i,{scope:L,itemMap:H,collectionRef:z,children:G})};c.displayName=e;const h=n+"CollectionSlot",m=Vd(h),g=ze.forwardRef((D,L)=>{const{scope:G,children:z}=D,H=o(h,G),Y=bn(L,H.collectionRef);return I.jsx(m,{ref:Y,children:z})});g.displayName=h;const w=n+"CollectionItemSlot",_="data-radix-collection-item",A=Vd(w),R=ze.forwardRef((D,L)=>{const{scope:G,children:z,...H}=D,Y=ze.useRef(null),re=bn(L,Y),ie=o(w,G);return ze.useEffect(()=>(ie.itemMap.set(Y,{ref:Y,...H}),()=>void ie.itemMap.delete(Y))),I.jsx(A,{[_]:"",ref:re,children:z})});R.displayName=w;function M(D){const L=o(n+"CollectionConsumer",D);return ze.useCallback(()=>{const z=L.collectionRef.current;if(!z)return[];const H=Array.from(z.querySelectorAll(`[${_}]`));return Array.from(L.itemMap.values()).sort((ie,V)=>H.indexOf(ie.ref.current)-H.indexOf(V.ref.current))},[L.collectionRef,L.itemMap])}return[{Provider:c,Slot:g,ItemSlot:R},M,r]}var RX=P.createContext(void 0);function PP(n){const e=P.useContext(RX);return n||e||"ltr"}function au(n){const e=P.useRef(n);return P.useEffect(()=>{e.current=n}),P.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function NX(n,e=globalThis==null?void 0:globalThis.document){const t=au(n);P.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var kX="DismissableLayer",Fw="dismissableLayer.update",PX="dismissableLayer.pointerDownOutside",DX="dismissableLayer.focusOutside",_C,DP=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),h_=P.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:c,onDismiss:h,...m}=n,g=P.useContext(DP),[w,_]=P.useState(null),A=(w==null?void 0:w.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,R]=P.useState({}),M=bn(e,V=>_(V)),D=Array.from(g.layers),[L]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),G=D.indexOf(L),z=w?D.indexOf(w):-1,H=g.layersWithOutsidePointerEventsDisabled.size>0,Y=z>=G,re=LX(V=>{const B=V.target,W=[...g.branches].some(Z=>Z.contains(B));!Y||W||(i==null||i(V),c==null||c(V),V.defaultPrevented||h==null||h())},A),ie=VX(V=>{const B=V.target;[...g.branches].some(Z=>Z.contains(B))||(o==null||o(V),c==null||c(V),V.defaultPrevented||h==null||h())},A);return NX(V=>{z===g.layers.size-1&&(r==null||r(V),!V.defaultPrevented&&h&&(V.preventDefault(),h()))},A),P.useEffect(()=>{if(w)return t&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(_C=A.body.style.pointerEvents,A.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(w)),g.layers.add(w),EC(),()=>{t&&g.layersWithOutsidePointerEventsDisabled.size===1&&(A.body.style.pointerEvents=_C)}},[w,A,t,g]),P.useEffect(()=>()=>{w&&(g.layers.delete(w),g.layersWithOutsidePointerEventsDisabled.delete(w),EC())},[w,g]),P.useEffect(()=>{const V=()=>R({});return document.addEventListener(Fw,V),()=>document.removeEventListener(Fw,V)},[]),I.jsx(nn.div,{...m,ref:M,style:{pointerEvents:H?Y?"auto":"none":void 0,...n.style},onFocusCapture:an(n.onFocusCapture,ie.onFocusCapture),onBlurCapture:an(n.onBlurCapture,ie.onBlurCapture),onPointerDownCapture:an(n.onPointerDownCapture,re.onPointerDownCapture)})});h_.displayName=kX;var OX="DismissableLayerBranch",MX=P.forwardRef((n,e)=>{const t=P.useContext(DP),r=P.useRef(null),i=bn(e,r);return P.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),I.jsx(nn.div,{...n,ref:i})});MX.displayName=OX;function LX(n,e=globalThis==null?void 0:globalThis.document){const t=au(n),r=P.useRef(!1),i=P.useRef(()=>{});return P.useEffect(()=>{const o=h=>{if(h.target&&!r.current){let m=function(){OP(PX,t,g,{discrete:!0})};const g={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=m,e.addEventListener("click",i.current,{once:!0})):m()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function VX(n,e=globalThis==null?void 0:globalThis.document){const t=au(n),r=P.useRef(!1);return P.useEffect(()=>{const i=o=>{o.target&&!r.current&&OP(DX,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function EC(){const n=new CustomEvent(Fw);document.dispatchEvent(n)}function OP(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?IX(i,o):i.dispatchEvent(o)}var px=0;function MP(){P.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??bC()),document.body.insertAdjacentElement("beforeend",n[1]??bC()),px++,()=>{px===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),px--}},[])}function bC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var mx="focusScope.autoFocusOnMount",gx="focusScope.autoFocusOnUnmount",IC={bubbles:!1,cancelable:!0},FX="FocusScope",f_=P.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...c}=n,[h,m]=P.useState(null),g=au(i),w=au(o),_=P.useRef(null),A=bn(e,D=>m(D)),R=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(r){let D=function(H){if(R.paused||!h)return;const Y=H.target;h.contains(Y)?_.current=Y:Tl(_.current,{select:!0})},L=function(H){if(R.paused||!h)return;const Y=H.relatedTarget;Y!==null&&(h.contains(Y)||Tl(_.current,{select:!0}))},G=function(H){if(document.activeElement===document.body)for(const re of H)re.removedNodes.length>0&&Tl(h)};document.addEventListener("focusin",D),document.addEventListener("focusout",L);const z=new MutationObserver(G);return h&&z.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",L),z.disconnect()}}},[r,h,R.paused]),P.useEffect(()=>{if(h){AC.add(R);const D=document.activeElement;if(!h.contains(D)){const G=new CustomEvent(mx,IC);h.addEventListener(mx,g),h.dispatchEvent(G),G.defaultPrevented||(BX(HX(LP(h)),{select:!0}),document.activeElement===D&&Tl(h))}return()=>{h.removeEventListener(mx,g),setTimeout(()=>{const G=new CustomEvent(gx,IC);h.addEventListener(gx,w),h.dispatchEvent(G),G.defaultPrevented||Tl(D??document.body,{select:!0}),h.removeEventListener(gx,w),AC.remove(R)},0)}}},[h,g,w,R]);const M=P.useCallback(D=>{if(!t&&!r||R.paused)return;const L=D.key==="Tab"&&!D.altKey&&!D.ctrlKey&&!D.metaKey,G=document.activeElement;if(L&&G){const z=D.currentTarget,[H,Y]=jX(z);H&&Y?!D.shiftKey&&G===Y?(D.preventDefault(),t&&Tl(H,{select:!0})):D.shiftKey&&G===H&&(D.preventDefault(),t&&Tl(Y,{select:!0})):G===z&&D.preventDefault()}},[t,r,R.paused]);return I.jsx(nn.div,{tabIndex:-1,...c,ref:A,onKeyDown:M})});f_.displayName=FX;function BX(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Tl(r,{select:e}),document.activeElement!==t)return}function jX(n){const e=LP(n),t=TC(e,n),r=TC(e.reverse(),n);return[t,r]}function LP(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function TC(n,e){for(const t of n)if(!UX(t,{upTo:e}))return t}function UX(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function zX(n){return n instanceof HTMLInputElement&&"select"in n}function Tl(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&zX(n)&&e&&n.select()}}var AC=WX();function WX(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=CC(n,e),n.unshift(e)},remove(e){var t;n=CC(n,e),(t=n[0])==null||t.resume()}}}function CC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function HX(n){return n.filter(e=>e.tagName!=="A")}var Fi=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},GX=mS[" useId ".trim().toString()]||(()=>{}),$X=0;function yd(n){const[e,t]=P.useState(GX());return Fi(()=>{t(r=>r??String($X++))},[n]),e?`radix-${e}`:""}const qX=["top","right","bottom","left"],ql=Math.min,Ss=Math.max,$0=Math.round,Nm=Math.floor,na=n=>({x:n,y:n}),KX={left:"right",right:"left",bottom:"top",top:"bottom"},XX={start:"end",end:"start"};function Bw(n,e,t){return Ss(n,ql(e,t))}function za(n,e){return typeof n=="function"?n(e):n}function Wa(n){return n.split("-")[0]}function th(n){return n.split("-")[1]}function p_(n){return n==="x"?"y":"x"}function m_(n){return n==="y"?"height":"width"}const YX=new Set(["top","bottom"]);function $o(n){return YX.has(Wa(n))?"y":"x"}function g_(n){return p_($o(n))}function QX(n,e,t){t===void 0&&(t=!1);const r=th(n),i=g_(n),o=m_(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=q0(c)),[c,q0(c)]}function ZX(n){const e=q0(n);return[jw(n),e,jw(e)]}function jw(n){return n.replace(/start|end/g,e=>XX[e])}const SC=["left","right"],RC=["right","left"],JX=["top","bottom"],eY=["bottom","top"];function tY(n,e,t){switch(n){case"top":case"bottom":return t?e?RC:SC:e?SC:RC;case"left":case"right":return e?JX:eY;default:return[]}}function nY(n,e,t,r){const i=th(n);let o=tY(Wa(n),t==="start",r);return i&&(o=o.map(c=>c+"-"+i),e&&(o=o.concat(o.map(jw)))),o}function q0(n){return n.replace(/left|right|bottom|top/g,e=>KX[e])}function rY(n){return{top:0,right:0,bottom:0,left:0,...n}}function VP(n){return typeof n!="number"?rY(n):{top:n,right:n,bottom:n,left:n}}function K0(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function NC(n,e,t){let{reference:r,floating:i}=n;const o=$o(e),c=g_(e),h=m_(c),m=Wa(e),g=o==="y",w=r.x+r.width/2-i.width/2,_=r.y+r.height/2-i.height/2,A=r[h]/2-i[h]/2;let R;switch(m){case"top":R={x:w,y:r.y-i.height};break;case"bottom":R={x:w,y:r.y+r.height};break;case"right":R={x:r.x+r.width,y:_};break;case"left":R={x:r.x-i.width,y:_};break;default:R={x:r.x,y:r.y}}switch(th(e)){case"start":R[c]-=A*(t&&g?-1:1);break;case"end":R[c]+=A*(t&&g?-1:1);break}return R}const iY=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:c}=t,h=o.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(e));let g=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:w,y:_}=NC(g,r,m),A=r,R={},M=0;for(let D=0;D<h.length;D++){const{name:L,fn:G}=h[D],{x:z,y:H,data:Y,reset:re}=await G({x:w,y:_,initialPlacement:r,placement:A,strategy:i,middlewareData:R,rects:g,platform:c,elements:{reference:n,floating:e}});w=z??w,_=H??_,R={...R,[L]:{...R[L],...Y}},re&&M<=50&&(M++,typeof re=="object"&&(re.placement&&(A=re.placement),re.rects&&(g=re.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):re.rects),{x:w,y:_}=NC(g,A,m)),D=-1)}return{x:w,y:_,placement:A,strategy:i,middlewareData:R}};async function zf(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:c,elements:h,strategy:m}=n,{boundary:g="clippingAncestors",rootBoundary:w="viewport",elementContext:_="floating",altBoundary:A=!1,padding:R=0}=za(e,n),M=VP(R),L=h[A?_==="floating"?"reference":"floating":_],G=K0(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(L)))==null||t?L:L.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(h.floating)),boundary:g,rootBoundary:w,strategy:m})),z=_==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,H=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h.floating)),Y=await(o.isElement==null?void 0:o.isElement(H))?await(o.getScale==null?void 0:o.getScale(H))||{x:1,y:1}:{x:1,y:1},re=K0(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:z,offsetParent:H,strategy:m}):z);return{top:(G.top-re.top+M.top)/Y.y,bottom:(re.bottom-G.bottom+M.bottom)/Y.y,left:(G.left-re.left+M.left)/Y.x,right:(re.right-G.right+M.right)/Y.x}}const sY=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:o,platform:c,elements:h,middlewareData:m}=e,{element:g,padding:w=0}=za(n,e)||{};if(g==null)return{};const _=VP(w),A={x:t,y:r},R=g_(i),M=m_(R),D=await c.getDimensions(g),L=R==="y",G=L?"top":"left",z=L?"bottom":"right",H=L?"clientHeight":"clientWidth",Y=o.reference[M]+o.reference[R]-A[R]-o.floating[M],re=A[R]-o.reference[R],ie=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g));let V=ie?ie[H]:0;(!V||!await(c.isElement==null?void 0:c.isElement(ie)))&&(V=h.floating[H]||o.floating[M]);const B=Y/2-re/2,W=V/2-D[M]/2-1,Z=ql(_[G],W),te=ql(_[z],W),ee=Z,K=V-D[M]-te,we=V/2-D[M]/2+B,se=Bw(ee,we,K),Te=!m.arrow&&th(i)!=null&&we!==se&&o.reference[M]/2-(we<ee?Z:te)-D[M]/2<0,xe=Te?we<ee?we-ee:we-K:0;return{[R]:A[R]+xe,data:{[R]:se,centerOffset:we-se-xe,...Te&&{alignmentOffset:xe}},reset:Te}}}),oY=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:c,initialPlacement:h,platform:m,elements:g}=e,{mainAxis:w=!0,crossAxis:_=!0,fallbackPlacements:A,fallbackStrategy:R="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:D=!0,...L}=za(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const G=Wa(i),z=$o(h),H=Wa(h)===h,Y=await(m.isRTL==null?void 0:m.isRTL(g.floating)),re=A||(H||!D?[q0(h)]:ZX(h)),ie=M!=="none";!A&&ie&&re.push(...nY(h,D,M,Y));const V=[h,...re],B=await zf(e,L),W=[];let Z=((r=o.flip)==null?void 0:r.overflows)||[];if(w&&W.push(B[G]),_){const we=QX(i,c,Y);W.push(B[we[0]],B[we[1]])}if(Z=[...Z,{placement:i,overflows:W}],!W.every(we=>we<=0)){var te,ee;const we=(((te=o.flip)==null?void 0:te.index)||0)+1,se=V[we];if(se&&(!(_==="alignment"?z!==$o(se):!1)||Z.every(oe=>$o(oe.placement)===z?oe.overflows[0]>0:!0)))return{data:{index:we,overflows:Z},reset:{placement:se}};let Te=(ee=Z.filter(xe=>xe.overflows[0]<=0).sort((xe,oe)=>xe.overflows[1]-oe.overflows[1])[0])==null?void 0:ee.placement;if(!Te)switch(R){case"bestFit":{var K;const xe=(K=Z.filter(oe=>{if(ie){const Ae=$o(oe.placement);return Ae===z||Ae==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(Ae=>Ae>0).reduce((Ae,Ne)=>Ae+Ne,0)]).sort((oe,Ae)=>oe[1]-Ae[1])[0])==null?void 0:K[0];xe&&(Te=xe);break}case"initialPlacement":Te=h;break}if(i!==Te)return{reset:{placement:Te}}}return{}}}};function kC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function PC(n){return qX.some(e=>n[e]>=0)}const aY=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=za(n,e);switch(r){case"referenceHidden":{const o=await zf(e,{...i,elementContext:"reference"}),c=kC(o,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:PC(c)}}}case"escaped":{const o=await zf(e,{...i,altBoundary:!0}),c=kC(o,t.floating);return{data:{escapedOffsets:c,escaped:PC(c)}}}default:return{}}}}},FP=new Set(["left","top"]);async function lY(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=Wa(t),h=th(t),m=$o(t)==="y",g=FP.has(c)?-1:1,w=o&&m?-1:1,_=za(e,n);let{mainAxis:A,crossAxis:R,alignmentAxis:M}=typeof _=="number"?{mainAxis:_,crossAxis:0,alignmentAxis:null}:{mainAxis:_.mainAxis||0,crossAxis:_.crossAxis||0,alignmentAxis:_.alignmentAxis};return h&&typeof M=="number"&&(R=h==="end"?M*-1:M),m?{x:R*w,y:A*g}:{x:A*g,y:R*w}}const cY=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:c,middlewareData:h}=e,m=await lY(e,n);return c===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:i+m.x,y:o+m.y,data:{...m,placement:c}}}}},uY=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:h={fn:L=>{let{x:G,y:z}=L;return{x:G,y:z}}},...m}=za(n,e),g={x:t,y:r},w=await zf(e,m),_=$o(Wa(i)),A=p_(_);let R=g[A],M=g[_];if(o){const L=A==="y"?"top":"left",G=A==="y"?"bottom":"right",z=R+w[L],H=R-w[G];R=Bw(z,R,H)}if(c){const L=_==="y"?"top":"left",G=_==="y"?"bottom":"right",z=M+w[L],H=M-w[G];M=Bw(z,M,H)}const D=h.fn({...e,[A]:R,[_]:M});return{...D,data:{x:D.x-t,y:D.y-r,enabled:{[A]:o,[_]:c}}}}}},dY=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:o,middlewareData:c}=e,{offset:h=0,mainAxis:m=!0,crossAxis:g=!0}=za(n,e),w={x:t,y:r},_=$o(i),A=p_(_);let R=w[A],M=w[_];const D=za(h,e),L=typeof D=="number"?{mainAxis:D,crossAxis:0}:{mainAxis:0,crossAxis:0,...D};if(m){const H=A==="y"?"height":"width",Y=o.reference[A]-o.floating[H]+L.mainAxis,re=o.reference[A]+o.reference[H]-L.mainAxis;R<Y?R=Y:R>re&&(R=re)}if(g){var G,z;const H=A==="y"?"width":"height",Y=FP.has(Wa(i)),re=o.reference[_]-o.floating[H]+(Y&&((G=c.offset)==null?void 0:G[_])||0)+(Y?0:L.crossAxis),ie=o.reference[_]+o.reference[H]+(Y?0:((z=c.offset)==null?void 0:z[_])||0)-(Y?L.crossAxis:0);M<re?M=re:M>ie&&(M=ie)}return{[A]:R,[_]:M}}}},hY=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:o,platform:c,elements:h}=e,{apply:m=()=>{},...g}=za(n,e),w=await zf(e,g),_=Wa(i),A=th(i),R=$o(i)==="y",{width:M,height:D}=o.floating;let L,G;_==="top"||_==="bottom"?(L=_,G=A===(await(c.isRTL==null?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(G=_,L=A==="end"?"top":"bottom");const z=D-w.top-w.bottom,H=M-w.left-w.right,Y=ql(D-w[L],z),re=ql(M-w[G],H),ie=!e.middlewareData.shift;let V=Y,B=re;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(B=H),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(V=z),ie&&!A){const Z=Ss(w.left,0),te=Ss(w.right,0),ee=Ss(w.top,0),K=Ss(w.bottom,0);R?B=M-2*(Z!==0||te!==0?Z+te:Ss(w.left,w.right)):V=D-2*(ee!==0||K!==0?ee+K:Ss(w.top,w.bottom))}await m({...e,availableWidth:B,availableHeight:V});const W=await c.getDimensions(h.floating);return M!==W.width||D!==W.height?{reset:{rects:!0}}:{}}}};function Hg(){return typeof window<"u"}function nh(n){return BP(n)?(n.nodeName||"").toLowerCase():"#document"}function Os(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ua(n){var e;return(e=(BP(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function BP(n){return Hg()?n instanceof Node||n instanceof Os(n).Node:!1}function bo(n){return Hg()?n instanceof Element||n instanceof Os(n).Element:!1}function aa(n){return Hg()?n instanceof HTMLElement||n instanceof Os(n).HTMLElement:!1}function DC(n){return!Hg()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Os(n).ShadowRoot}const fY=new Set(["inline","contents"]);function xp(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Io(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!fY.has(i)}const pY=new Set(["table","td","th"]);function mY(n){return pY.has(nh(n))}const gY=[":popover-open",":modal"];function Gg(n){return gY.some(e=>{try{return n.matches(e)}catch{return!1}})}const yY=["transform","translate","scale","rotate","perspective"],xY=["transform","translate","scale","rotate","perspective","filter"],wY=["paint","layout","strict","content"];function y_(n){const e=x_(),t=bo(n)?Io(n):n;return yY.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||xY.some(r=>(t.willChange||"").includes(r))||wY.some(r=>(t.contain||"").includes(r))}function vY(n){let e=Kl(n);for(;aa(e)&&!jd(e);){if(y_(e))return e;if(Gg(e))return null;e=Kl(e)}return null}function x_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _Y=new Set(["html","body","#document"]);function jd(n){return _Y.has(nh(n))}function Io(n){return Os(n).getComputedStyle(n)}function $g(n){return bo(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Kl(n){if(nh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||DC(n)&&n.host||ua(n);return DC(e)?e.host:e}function jP(n){const e=Kl(n);return jd(e)?n.ownerDocument?n.ownerDocument.body:n.body:aa(e)&&xp(e)?e:jP(e)}function Wf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=jP(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),c=Os(i);if(o){const h=Uw(c);return e.concat(c,c.visualViewport||[],xp(i)?i:[],h&&t?Wf(h):[])}return e.concat(i,Wf(i,[],t))}function Uw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function UP(n){const e=Io(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=aa(n),o=i?n.offsetWidth:t,c=i?n.offsetHeight:r,h=$0(t)!==o||$0(r)!==c;return h&&(t=o,r=c),{width:t,height:r,$:h}}function w_(n){return bo(n)?n:n.contextElement}function xd(n){const e=w_(n);if(!aa(e))return na(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=UP(e);let c=(o?$0(t.width):t.width)/r,h=(o?$0(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const EY=na(0);function zP(n){const e=Os(n);return!x_()||!e.visualViewport?EY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bY(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Os(n)?!1:e}function lu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=w_(n);let c=na(1);e&&(r?bo(r)&&(c=xd(r)):c=xd(n));const h=bY(o,t,r)?zP(o):na(0);let m=(i.left+h.x)/c.x,g=(i.top+h.y)/c.y,w=i.width/c.x,_=i.height/c.y;if(o){const A=Os(o),R=r&&bo(r)?Os(r):r;let M=A,D=Uw(M);for(;D&&r&&R!==M;){const L=xd(D),G=D.getBoundingClientRect(),z=Io(D),H=G.left+(D.clientLeft+parseFloat(z.paddingLeft))*L.x,Y=G.top+(D.clientTop+parseFloat(z.paddingTop))*L.y;m*=L.x,g*=L.y,w*=L.x,_*=L.y,m+=H,g+=Y,M=Os(D),D=Uw(M)}}return K0({width:w,height:_,x:m,y:g})}function v_(n,e){const t=$g(n).scrollLeft;return e?e.left+t:lu(ua(n)).left+t}function WP(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:v_(n,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function IY(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",c=ua(r),h=e?Gg(e.floating):!1;if(r===c||h&&o)return t;let m={scrollLeft:0,scrollTop:0},g=na(1);const w=na(0),_=aa(r);if((_||!_&&!o)&&((nh(r)!=="body"||xp(c))&&(m=$g(r)),aa(r))){const R=lu(r);g=xd(r),w.x=R.x+r.clientLeft,w.y=R.y+r.clientTop}const A=c&&!_&&!o?WP(c,m,!0):na(0);return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-m.scrollLeft*g.x+w.x+A.x,y:t.y*g.y-m.scrollTop*g.y+w.y+A.y}}function TY(n){return Array.from(n.getClientRects())}function AY(n){const e=ua(n),t=$g(n),r=n.ownerDocument.body,i=Ss(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ss(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+v_(n);const h=-t.scrollTop;return Io(r).direction==="rtl"&&(c+=Ss(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:c,y:h}}function CY(n,e){const t=Os(n),r=ua(n),i=t.visualViewport;let o=r.clientWidth,c=r.clientHeight,h=0,m=0;if(i){o=i.width,c=i.height;const g=x_();(!g||g&&e==="fixed")&&(h=i.offsetLeft,m=i.offsetTop)}return{width:o,height:c,x:h,y:m}}const SY=new Set(["absolute","fixed"]);function RY(n,e){const t=lu(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=aa(n)?xd(n):na(1),c=n.clientWidth*o.x,h=n.clientHeight*o.y,m=i*o.x,g=r*o.y;return{width:c,height:h,x:m,y:g}}function OC(n,e,t){let r;if(e==="viewport")r=CY(n,t);else if(e==="document")r=AY(ua(n));else if(bo(e))r=RY(e,t);else{const i=zP(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return K0(r)}function HP(n,e){const t=Kl(n);return t===e||!bo(t)||jd(t)?!1:Io(t).position==="fixed"||HP(t,e)}function NY(n,e){const t=e.get(n);if(t)return t;let r=Wf(n,[],!1).filter(h=>bo(h)&&nh(h)!=="body"),i=null;const o=Io(n).position==="fixed";let c=o?Kl(n):n;for(;bo(c)&&!jd(c);){const h=Io(c),m=y_(c);!m&&h.position==="fixed"&&(i=null),(o?!m&&!i:!m&&h.position==="static"&&!!i&&SY.has(i.position)||xp(c)&&!m&&HP(n,c))?r=r.filter(w=>w!==c):i=h,c=Kl(c)}return e.set(n,r),r}function kY(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?Gg(e)?[]:NY(e,this._c):[].concat(t),r],h=c[0],m=c.reduce((g,w)=>{const _=OC(e,w,i);return g.top=Ss(_.top,g.top),g.right=ql(_.right,g.right),g.bottom=ql(_.bottom,g.bottom),g.left=Ss(_.left,g.left),g},OC(e,h,i));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function PY(n){const{width:e,height:t}=UP(n);return{width:e,height:t}}function DY(n,e,t){const r=aa(e),i=ua(e),o=t==="fixed",c=lu(n,!0,o,e);let h={scrollLeft:0,scrollTop:0};const m=na(0);function g(){m.x=v_(i)}if(r||!r&&!o)if((nh(e)!=="body"||xp(i))&&(h=$g(e)),r){const R=lu(e,!0,o,e);m.x=R.x+e.clientLeft,m.y=R.y+e.clientTop}else i&&g();o&&!r&&i&&g();const w=i&&!r&&!o?WP(i,h):na(0),_=c.left+h.scrollLeft-m.x-w.x,A=c.top+h.scrollTop-m.y-w.y;return{x:_,y:A,width:c.width,height:c.height}}function yx(n){return Io(n).position==="static"}function MC(n,e){if(!aa(n)||Io(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ua(n)===t&&(t=t.ownerDocument.body),t}function GP(n,e){const t=Os(n);if(Gg(n))return t;if(!aa(n)){let i=Kl(n);for(;i&&!jd(i);){if(bo(i)&&!yx(i))return i;i=Kl(i)}return t}let r=MC(n,e);for(;r&&mY(r)&&yx(r);)r=MC(r,e);return r&&jd(r)&&yx(r)&&!y_(r)?t:r||vY(n)||t}const OY=async function(n){const e=this.getOffsetParent||GP,t=this.getDimensions,r=await t(n.floating);return{reference:DY(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function MY(n){return Io(n).direction==="rtl"}const LY={convertOffsetParentRelativeRectToViewportRelativeRect:IY,getDocumentElement:ua,getClippingRect:kY,getOffsetParent:GP,getElementRects:OY,getClientRects:TY,getDimensions:PY,getScale:xd,isElement:bo,isRTL:MY};function $P(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function VY(n,e){let t=null,r;const i=ua(n);function o(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function c(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),o();const g=n.getBoundingClientRect(),{left:w,top:_,width:A,height:R}=g;if(h||e(),!A||!R)return;const M=Nm(_),D=Nm(i.clientWidth-(w+A)),L=Nm(i.clientHeight-(_+R)),G=Nm(w),H={rootMargin:-M+"px "+-D+"px "+-L+"px "+-G+"px",threshold:Ss(0,ql(1,m))||1};let Y=!0;function re(ie){const V=ie[0].intersectionRatio;if(V!==m){if(!Y)return c();V?c(!1,V):r=setTimeout(()=>{c(!1,1e-7)},1e3)}V===1&&!$P(g,n.getBoundingClientRect())&&c(),Y=!1}try{t=new IntersectionObserver(re,{...H,root:i.ownerDocument})}catch{t=new IntersectionObserver(re,H)}t.observe(n)}return c(!0),o}function FY(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=r,g=w_(n),w=i||o?[...g?Wf(g):[],...Wf(e)]:[];w.forEach(G=>{i&&G.addEventListener("scroll",t,{passive:!0}),o&&G.addEventListener("resize",t)});const _=g&&h?VY(g,t):null;let A=-1,R=null;c&&(R=new ResizeObserver(G=>{let[z]=G;z&&z.target===g&&R&&(R.unobserve(e),cancelAnimationFrame(A),A=requestAnimationFrame(()=>{var H;(H=R)==null||H.observe(e)})),t()}),g&&!m&&R.observe(g),R.observe(e));let M,D=m?lu(n):null;m&&L();function L(){const G=lu(n);D&&!$P(D,G)&&t(),D=G,M=requestAnimationFrame(L)}return t(),()=>{var G;w.forEach(z=>{i&&z.removeEventListener("scroll",t),o&&z.removeEventListener("resize",t)}),_==null||_(),(G=R)==null||G.disconnect(),R=null,m&&cancelAnimationFrame(M)}}const BY=cY,jY=uY,UY=oY,zY=hY,WY=aY,LC=sY,HY=dY,GY=(n,e,t)=>{const r=new Map,i={platform:LY,...t},o={...i.platform,_c:r};return iY(n,e,{...i,platform:o})};var $Y=typeof document<"u",qY=function(){},o0=$Y?P.useLayoutEffect:qY;function X0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!X0(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const o=i[r];if(!(o==="_owner"&&n.$$typeof)&&!X0(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function qP(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function VC(n,e){const t=qP(n);return Math.round(e*t)/t}function xx(n){const e=P.useRef(n);return o0(()=>{e.current=n}),e}function KY(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:c}={},transform:h=!0,whileElementsMounted:m,open:g}=n,[w,_]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[A,R]=P.useState(r);X0(A,r)||R(r);const[M,D]=P.useState(null),[L,G]=P.useState(null),z=P.useCallback(oe=>{oe!==ie.current&&(ie.current=oe,D(oe))},[]),H=P.useCallback(oe=>{oe!==V.current&&(V.current=oe,G(oe))},[]),Y=o||M,re=c||L,ie=P.useRef(null),V=P.useRef(null),B=P.useRef(w),W=m!=null,Z=xx(m),te=xx(i),ee=xx(g),K=P.useCallback(()=>{if(!ie.current||!V.current)return;const oe={placement:e,strategy:t,middleware:A};te.current&&(oe.platform=te.current),GY(ie.current,V.current,oe).then(Ae=>{const Ne={...Ae,isPositioned:ee.current!==!1};we.current&&!X0(B.current,Ne)&&(B.current=Ne,Xf.flushSync(()=>{_(Ne)}))})},[A,e,t,te,ee]);o0(()=>{g===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,_(oe=>({...oe,isPositioned:!1})))},[g]);const we=P.useRef(!1);o0(()=>(we.current=!0,()=>{we.current=!1}),[]),o0(()=>{if(Y&&(ie.current=Y),re&&(V.current=re),Y&&re){if(Z.current)return Z.current(Y,re,K);K()}},[Y,re,K,Z,W]);const se=P.useMemo(()=>({reference:ie,floating:V,setReference:z,setFloating:H}),[z,H]),Te=P.useMemo(()=>({reference:Y,floating:re}),[Y,re]),xe=P.useMemo(()=>{const oe={position:t,left:0,top:0};if(!Te.floating)return oe;const Ae=VC(Te.floating,w.x),Ne=VC(Te.floating,w.y);return h?{...oe,transform:"translate("+Ae+"px, "+Ne+"px)",...qP(Te.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Ae,top:Ne}},[t,h,Te.floating,w.x,w.y]);return P.useMemo(()=>({...w,update:K,refs:se,elements:Te,floatingStyles:xe}),[w,K,se,Te,xe])}const XY=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?LC({element:r.current,padding:i}).fn(t):{}:r?LC({element:r,padding:i}).fn(t):{}}}},YY=(n,e)=>({...BY(n),options:[n,e]}),QY=(n,e)=>({...jY(n),options:[n,e]}),ZY=(n,e)=>({...HY(n),options:[n,e]}),JY=(n,e)=>({...UY(n),options:[n,e]}),eQ=(n,e)=>({...zY(n),options:[n,e]}),tQ=(n,e)=>({...WY(n),options:[n,e]}),nQ=(n,e)=>({...XY(n),options:[n,e]});var rQ="Arrow",KP=P.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...o}=n;return I.jsx(nn.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:I.jsx("polygon",{points:"0,0 30,0 15,10"})})});KP.displayName=rQ;var iQ=KP;function __(n){const[e,t]=P.useState(void 0);return Fi(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let c,h;if("borderBoxSize"in o){const m=o.borderBoxSize,g=Array.isArray(m)?m[0]:m;c=g.inlineSize,h=g.blockSize}else c=n.offsetWidth,h=n.offsetHeight;t({width:c,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var E_="Popper",[XP,YP]=eh(E_),[sQ,QP]=XP(E_),ZP=n=>{const{__scopePopper:e,children:t}=n,[r,i]=P.useState(null);return I.jsx(sQ,{scope:e,anchor:r,onAnchorChange:i,children:t})};ZP.displayName=E_;var JP="PopperAnchor",eD=P.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,o=QP(JP,t),c=P.useRef(null),h=bn(e,c);return P.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:I.jsx(nn.div,{...i,ref:h})});eD.displayName=JP;var b_="PopperContent",[oQ,aQ]=XP(b_),tD=P.forwardRef((n,e)=>{var Pe,Ge,at,st,ct,bt;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:c=0,arrowPadding:h=0,avoidCollisions:m=!0,collisionBoundary:g=[],collisionPadding:w=0,sticky:_="partial",hideWhenDetached:A=!1,updatePositionStrategy:R="optimized",onPlaced:M,...D}=n,L=QP(b_,t),[G,z]=P.useState(null),H=bn(e,ht=>z(ht)),[Y,re]=P.useState(null),ie=__(Y),V=(ie==null?void 0:ie.width)??0,B=(ie==null?void 0:ie.height)??0,W=r+(o!=="center"?"-"+o:""),Z=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},te=Array.isArray(g)?g:[g],ee=te.length>0,K={padding:Z,boundary:te.filter(cQ),altBoundary:ee},{refs:we,floatingStyles:se,placement:Te,isPositioned:xe,middlewareData:oe}=KY({strategy:"fixed",placement:W,whileElementsMounted:(...ht)=>FY(...ht,{animationFrame:R==="always"}),elements:{reference:L.anchor},middleware:[YY({mainAxis:i+B,alignmentAxis:c}),m&&QY({mainAxis:!0,crossAxis:!1,limiter:_==="partial"?ZY():void 0,...K}),m&&JY({...K}),eQ({...K,apply:({elements:ht,rects:gn,availableWidth:Fn,availableHeight:Dr})=>{const{width:Qt,height:zt}=gn.reference,pt=ht.floating.style;pt.setProperty("--radix-popper-available-width",`${Fn}px`),pt.setProperty("--radix-popper-available-height",`${Dr}px`),pt.setProperty("--radix-popper-anchor-width",`${Qt}px`),pt.setProperty("--radix-popper-anchor-height",`${zt}px`)}}),Y&&nQ({element:Y,padding:h}),uQ({arrowWidth:V,arrowHeight:B}),A&&tQ({strategy:"referenceHidden",...K})]}),[Ae,Ne]=iD(Te),ae=au(M);Fi(()=>{xe&&(ae==null||ae())},[xe,ae]);const he=(Pe=oe.arrow)==null?void 0:Pe.x,Se=(Ge=oe.arrow)==null?void 0:Ge.y,Le=((at=oe.arrow)==null?void 0:at.centerOffset)!==0,[it,Re]=P.useState();return Fi(()=>{G&&Re(window.getComputedStyle(G).zIndex)},[G]),I.jsx("div",{ref:we.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:xe?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:it,"--radix-popper-transform-origin":[(st=oe.transformOrigin)==null?void 0:st.x,(ct=oe.transformOrigin)==null?void 0:ct.y].join(" "),...((bt=oe.hide)==null?void 0:bt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:I.jsx(oQ,{scope:t,placedSide:Ae,onArrowChange:re,arrowX:he,arrowY:Se,shouldHideArrow:Le,children:I.jsx(nn.div,{"data-side":Ae,"data-align":Ne,...D,ref:H,style:{...D.style,animation:xe?void 0:"none"}})})})});tD.displayName=b_;var nD="PopperArrow",lQ={top:"bottom",right:"left",bottom:"top",left:"right"},rD=P.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,o=aQ(nD,r),c=lQ[o.placedSide];return I.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:I.jsx(iQ,{...i,ref:t,style:{...i.style,display:"block"}})})});rD.displayName=nD;function cQ(n){return n!==null}var uQ=n=>({name:"transformOrigin",options:n,fn(e){var L,G,z;const{placement:t,rects:r,middlewareData:i}=e,c=((L=i.arrow)==null?void 0:L.centerOffset)!==0,h=c?0:n.arrowWidth,m=c?0:n.arrowHeight,[g,w]=iD(t),_={start:"0%",center:"50%",end:"100%"}[w],A=(((G=i.arrow)==null?void 0:G.x)??0)+h/2,R=(((z=i.arrow)==null?void 0:z.y)??0)+m/2;let M="",D="";return g==="bottom"?(M=c?_:`${A}px`,D=`${-m}px`):g==="top"?(M=c?_:`${A}px`,D=`${r.floating.height+m}px`):g==="right"?(M=`${-m}px`,D=c?_:`${R}px`):g==="left"&&(M=`${r.floating.width+m}px`,D=c?_:`${R}px`),{data:{x:M,y:D}}}});function iD(n){const[e,t="center"]=n.split("-");return[e,t]}var dQ=ZP,hQ=eD,fQ=tD,pQ=rD,mQ="Portal",I_=P.forwardRef((n,e)=>{var h;const{container:t,...r}=n,[i,o]=P.useState(!1);Fi(()=>o(!0),[]);const c=t||i&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return c?OS.createPortal(I.jsx(nn.div,{...r,ref:e}),c):null});I_.displayName=mQ;var gQ=mS[" useInsertionEffect ".trim().toString()]||Fi;function Hf({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,c]=yQ({defaultProp:e,onChange:t}),h=n!==void 0,m=h?n:i;{const w=P.useRef(n!==void 0);P.useEffect(()=>{const _=w.current;_!==h&&console.warn(`${r} is changing from ${_?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),w.current=h},[h,r])}const g=P.useCallback(w=>{var _;if(h){const A=xQ(w)?w(n):w;A!==n&&((_=c.current)==null||_.call(c,A))}else o(w)},[h,n,o,c]);return[m,g]}function yQ({defaultProp:n,onChange:e}){const[t,r]=P.useState(n),i=P.useRef(t),o=P.useRef(e);return gQ(()=>{o.current=e},[e]),P.useEffect(()=>{var c;i.current!==t&&((c=o.current)==null||c.call(o,t),i.current=t)},[t,i]),[t,r,o]}function xQ(n){return typeof n=="function"}function T_(n){const e=P.useRef({value:n,previous:n});return P.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var sD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),wQ="VisuallyHidden",vQ=P.forwardRef((n,e)=>I.jsx(nn.span,{...n,ref:e,style:{...sD,...n.style}}));vQ.displayName=wQ;var _Q=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Yu=new WeakMap,km=new WeakMap,Pm={},wx=0,oD=function(n){return n&&(n.host||oD(n.parentNode))},EQ=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=oD(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},bQ=function(n,e,t,r){var i=EQ(e,Array.isArray(n)?n:[n]);Pm[t]||(Pm[t]=new WeakMap);var o=Pm[t],c=[],h=new Set,m=new Set(i),g=function(_){!_||h.has(_)||(h.add(_),g(_.parentNode))};i.forEach(g);var w=function(_){!_||m.has(_)||Array.prototype.forEach.call(_.children,function(A){if(h.has(A))w(A);else try{var R=A.getAttribute(r),M=R!==null&&R!=="false",D=(Yu.get(A)||0)+1,L=(o.get(A)||0)+1;Yu.set(A,D),o.set(A,L),c.push(A),D===1&&M&&km.set(A,!0),L===1&&A.setAttribute(t,"true"),M||A.setAttribute(r,"true")}catch(G){console.error("aria-hidden: cannot operate on ",A,G)}})};return w(e),h.clear(),wx++,function(){c.forEach(function(_){var A=Yu.get(_)-1,R=o.get(_)-1;Yu.set(_,A),o.set(_,R),A||(km.has(_)||_.removeAttribute(r),km.delete(_)),R||_.removeAttribute(t)}),wx--,wx||(Yu=new WeakMap,Yu=new WeakMap,km=new WeakMap,Pm={})}},aD=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=_Q(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),bQ(r,i,t,"aria-hidden")):function(){return null}},zo=function(){return zo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},zo.apply(this,arguments)};function lD(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function IQ(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var a0="right-scroll-bar-position",l0="width-before-scroll-bar",TQ="with-scroll-bars-hidden",AQ="--removed-body-scroll-bar-size";function vx(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function CQ(n,e){var t=P.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var SQ=typeof window<"u"?P.useLayoutEffect:P.useEffect,FC=new WeakMap;function RQ(n,e){var t=CQ(null,function(r){return n.forEach(function(i){return vx(i,r)})});return SQ(function(){var r=FC.get(t);if(r){var i=new Set(r),o=new Set(n),c=t.current;i.forEach(function(h){o.has(h)||vx(h,null)}),o.forEach(function(h){i.has(h)||vx(h,c)})}FC.set(t,n)},[n]),t}function NQ(n){return n}function kQ(n,e){e===void 0&&(e=NQ);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var c=e(o,r);return t.push(c),function(){t=t.filter(function(h){return h!==c})}},assignSyncMedium:function(o){for(r=!0;t.length;){var c=t;t=[],c.forEach(o)}t={push:function(h){return o(h)},filter:function(){return t}}},assignMedium:function(o){r=!0;var c=[];if(t.length){var h=t;t=[],h.forEach(o),c=t}var m=function(){var w=c;c=[],w.forEach(o)},g=function(){return Promise.resolve().then(m)};g(),t={push:function(w){c.push(w),g()},filter:function(w){return c=c.filter(w),t}}}};return i}function PQ(n){n===void 0&&(n={});var e=kQ(null);return e.options=zo({async:!0,ssr:!1},n),e}var cD=function(n){var e=n.sideCar,t=lD(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,zo({},t))};cD.isSideCarExport=!0;function DQ(n,e){return n.useMedium(e),cD}var uD=PQ(),_x=function(){},qg=P.forwardRef(function(n,e){var t=P.useRef(null),r=P.useState({onScrollCapture:_x,onWheelCapture:_x,onTouchMoveCapture:_x}),i=r[0],o=r[1],c=n.forwardProps,h=n.children,m=n.className,g=n.removeScrollBar,w=n.enabled,_=n.shards,A=n.sideCar,R=n.noRelative,M=n.noIsolation,D=n.inert,L=n.allowPinchZoom,G=n.as,z=G===void 0?"div":G,H=n.gapMode,Y=lD(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),re=A,ie=RQ([t,e]),V=zo(zo({},Y),i);return P.createElement(P.Fragment,null,w&&P.createElement(re,{sideCar:uD,removeScrollBar:g,shards:_,noRelative:R,noIsolation:M,inert:D,setCallbacks:o,allowPinchZoom:!!L,lockRef:t,gapMode:H}),c?P.cloneElement(P.Children.only(h),zo(zo({},V),{ref:ie})):P.createElement(z,zo({},V,{className:m,ref:ie}),h))});qg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qg.classNames={fullWidth:l0,zeroRight:a0};var OQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MQ(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=OQ();return e&&n.setAttribute("nonce",e),n}function LQ(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function VQ(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var FQ=function(){var n=0,e=null;return{add:function(t){n==0&&(e=MQ())&&(LQ(e,t),VQ(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},BQ=function(){var n=FQ();return function(e,t){P.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},dD=function(){var n=BQ(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},jQ={left:0,top:0,right:0,gap:0},Ex=function(n){return parseInt(n||"",10)||0},UQ=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[Ex(t),Ex(r),Ex(i)]},zQ=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return jQ;var e=UQ(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},WQ=dD(),wd="data-scroll-locked",HQ=function(n,e,t,r){var i=n.left,o=n.top,c=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(TQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(wd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(a0,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(l0,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(a0," .").concat(a0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(l0," .").concat(l0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wd,`] {
    `).concat(AQ,": ").concat(h,`px;
  }
`)},BC=function(){var n=parseInt(document.body.getAttribute(wd)||"0",10);return isFinite(n)?n:0},GQ=function(){P.useEffect(function(){return document.body.setAttribute(wd,(BC()+1).toString()),function(){var n=BC()-1;n<=0?document.body.removeAttribute(wd):document.body.setAttribute(wd,n.toString())}},[])},$Q=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;GQ();var o=P.useMemo(function(){return zQ(i)},[i]);return P.createElement(WQ,{styles:HQ(o,!e,i,t?"":"!important")})},zw=!1;if(typeof window<"u")try{var Dm=Object.defineProperty({},"passive",{get:function(){return zw=!0,!0}});window.addEventListener("test",Dm,Dm),window.removeEventListener("test",Dm,Dm)}catch{zw=!1}var Qu=zw?{passive:!1}:!1,qQ=function(n){return n.tagName==="TEXTAREA"},hD=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!qQ(n)&&t[e]==="visible")},KQ=function(n){return hD(n,"overflowY")},XQ=function(n){return hD(n,"overflowX")},jC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=fD(n,r);if(i){var o=pD(n,r),c=o[1],h=o[2];if(c>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},YQ=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},QQ=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},fD=function(n,e){return n==="v"?KQ(e):XQ(e)},pD=function(n,e){return n==="v"?YQ(e):QQ(e)},ZQ=function(n,e){return n==="h"&&e==="rtl"?-1:1},JQ=function(n,e,t,r,i){var o=ZQ(n,window.getComputedStyle(e).direction),c=o*r,h=t.target,m=e.contains(h),g=!1,w=c>0,_=0,A=0;do{if(!h)break;var R=pD(n,h),M=R[0],D=R[1],L=R[2],G=D-L-o*M;(M||G)&&fD(n,h)&&(_+=G,A+=M);var z=h.parentNode;h=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!m&&h!==document.body||m&&(e.contains(h)||e===h));return(w&&Math.abs(_)<1||!w&&Math.abs(A)<1)&&(g=!0),g},Om=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},UC=function(n){return[n.deltaX,n.deltaY]},zC=function(n){return n&&"current"in n?n.current:n},eZ=function(n,e){return n[0]===e[0]&&n[1]===e[1]},tZ=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},nZ=0,Zu=[];function rZ(n){var e=P.useRef([]),t=P.useRef([0,0]),r=P.useRef(),i=P.useState(nZ++)[0],o=P.useState(dD)[0],c=P.useRef(n);P.useEffect(function(){c.current=n},[n]),P.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var D=IQ([n.lockRef.current],(n.shards||[]).map(zC),!0).filter(Boolean);return D.forEach(function(L){return L.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),D.forEach(function(L){return L.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var h=P.useCallback(function(D,L){if("touches"in D&&D.touches.length===2||D.type==="wheel"&&D.ctrlKey)return!c.current.allowPinchZoom;var G=Om(D),z=t.current,H="deltaX"in D?D.deltaX:z[0]-G[0],Y="deltaY"in D?D.deltaY:z[1]-G[1],re,ie=D.target,V=Math.abs(H)>Math.abs(Y)?"h":"v";if("touches"in D&&V==="h"&&ie.type==="range")return!1;var B=jC(V,ie);if(!B)return!0;if(B?re=V:(re=V==="v"?"h":"v",B=jC(V,ie)),!B)return!1;if(!r.current&&"changedTouches"in D&&(H||Y)&&(r.current=re),!re)return!0;var W=r.current||re;return JQ(W,L,D,W==="h"?H:Y)},[]),m=P.useCallback(function(D){var L=D;if(!(!Zu.length||Zu[Zu.length-1]!==o)){var G="deltaY"in L?UC(L):Om(L),z=e.current.filter(function(re){return re.name===L.type&&(re.target===L.target||L.target===re.shadowParent)&&eZ(re.delta,G)})[0];if(z&&z.should){L.cancelable&&L.preventDefault();return}if(!z){var H=(c.current.shards||[]).map(zC).filter(Boolean).filter(function(re){return re.contains(L.target)}),Y=H.length>0?h(L,H[0]):!c.current.noIsolation;Y&&L.cancelable&&L.preventDefault()}}},[]),g=P.useCallback(function(D,L,G,z){var H={name:D,delta:L,target:G,should:z,shadowParent:iZ(G)};e.current.push(H),setTimeout(function(){e.current=e.current.filter(function(Y){return Y!==H})},1)},[]),w=P.useCallback(function(D){t.current=Om(D),r.current=void 0},[]),_=P.useCallback(function(D){g(D.type,UC(D),D.target,h(D,n.lockRef.current))},[]),A=P.useCallback(function(D){g(D.type,Om(D),D.target,h(D,n.lockRef.current))},[]);P.useEffect(function(){return Zu.push(o),n.setCallbacks({onScrollCapture:_,onWheelCapture:_,onTouchMoveCapture:A}),document.addEventListener("wheel",m,Qu),document.addEventListener("touchmove",m,Qu),document.addEventListener("touchstart",w,Qu),function(){Zu=Zu.filter(function(D){return D!==o}),document.removeEventListener("wheel",m,Qu),document.removeEventListener("touchmove",m,Qu),document.removeEventListener("touchstart",w,Qu)}},[]);var R=n.removeScrollBar,M=n.inert;return P.createElement(P.Fragment,null,M?P.createElement(o,{styles:tZ(i)}):null,R?P.createElement($Q,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function iZ(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const sZ=DQ(uD,rZ);var A_=P.forwardRef(function(n,e){return P.createElement(qg,zo({},n,{ref:e,sideCar:sZ}))});A_.classNames=qg.classNames;var oZ=[" ","Enter","ArrowUp","ArrowDown"],aZ=[" ","Enter"],cu="Select",[Kg,Xg,lZ]=kP(cu),[rh,xne]=eh(cu,[lZ,YP]),Yg=YP(),[cZ,nc]=rh(cu),[uZ,dZ]=rh(cu),mD=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:o,value:c,defaultValue:h,onValueChange:m,dir:g,name:w,autoComplete:_,disabled:A,required:R,form:M}=n,D=Yg(e),[L,G]=P.useState(null),[z,H]=P.useState(null),[Y,re]=P.useState(!1),ie=PP(g),[V,B]=Hf({prop:r,defaultProp:i??!1,onChange:o,caller:cu}),[W,Z]=Hf({prop:c,defaultProp:h,onChange:m,caller:cu}),te=P.useRef(null),ee=L?M||!!L.closest("form"):!0,[K,we]=P.useState(new Set),se=Array.from(K).map(Te=>Te.props.value).join(";");return I.jsx(dQ,{...D,children:I.jsxs(cZ,{required:R,scope:e,trigger:L,onTriggerChange:G,valueNode:z,onValueNodeChange:H,valueNodeHasChildren:Y,onValueNodeHasChildrenChange:re,contentId:yd(),value:W,onValueChange:Z,open:V,onOpenChange:B,dir:ie,triggerPointerDownPosRef:te,disabled:A,children:[I.jsx(Kg.Provider,{scope:e,children:I.jsx(uZ,{scope:n.__scopeSelect,onNativeOptionAdd:P.useCallback(Te=>{we(xe=>new Set(xe).add(Te))},[]),onNativeOptionRemove:P.useCallback(Te=>{we(xe=>{const oe=new Set(xe);return oe.delete(Te),oe})},[]),children:t})}),ee?I.jsxs(BD,{"aria-hidden":!0,required:R,tabIndex:-1,name:w,autoComplete:_,value:W,onChange:Te=>Z(Te.target.value),disabled:A,form:M,children:[W===void 0?I.jsx("option",{value:""}):null,Array.from(K)]},se):null]})})};mD.displayName=cu;var gD="SelectTrigger",yD=P.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,o=Yg(t),c=nc(gD,t),h=c.disabled||r,m=bn(e,c.onTriggerChange),g=Xg(t),w=P.useRef("touch"),[_,A,R]=UD(D=>{const L=g().filter(H=>!H.disabled),G=L.find(H=>H.value===c.value),z=zD(L,D,G);z!==void 0&&c.onValueChange(z.value)}),M=D=>{h||(c.onOpenChange(!0),R()),D&&(c.triggerPointerDownPosRef.current={x:Math.round(D.pageX),y:Math.round(D.pageY)})};return I.jsx(hQ,{asChild:!0,...o,children:I.jsx(nn.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":jD(c.value)?"":void 0,...i,ref:m,onClick:an(i.onClick,D=>{D.currentTarget.focus(),w.current!=="mouse"&&M(D)}),onPointerDown:an(i.onPointerDown,D=>{w.current=D.pointerType;const L=D.target;L.hasPointerCapture(D.pointerId)&&L.releasePointerCapture(D.pointerId),D.button===0&&D.ctrlKey===!1&&D.pointerType==="mouse"&&(M(D),D.preventDefault())}),onKeyDown:an(i.onKeyDown,D=>{const L=_.current!=="";!(D.ctrlKey||D.altKey||D.metaKey)&&D.key.length===1&&A(D.key),!(L&&D.key===" ")&&oZ.includes(D.key)&&(M(),D.preventDefault())})})})});yD.displayName=gD;var xD="SelectValue",wD=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:o,placeholder:c="",...h}=n,m=nc(xD,t),{onValueNodeHasChildrenChange:g}=m,w=o!==void 0,_=bn(e,m.onValueNodeChange);return Fi(()=>{g(w)},[g,w]),I.jsx(nn.span,{...h,ref:_,style:{pointerEvents:"none"},children:jD(m.value)?I.jsx(I.Fragment,{children:c}):o})});wD.displayName=xD;var hZ="SelectIcon",vD=P.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return I.jsx(nn.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});vD.displayName=hZ;var fZ="SelectPortal",_D=n=>I.jsx(I_,{asChild:!0,...n});_D.displayName=fZ;var uu="SelectContent",ED=P.forwardRef((n,e)=>{const t=nc(uu,n.__scopeSelect),[r,i]=P.useState();if(Fi(()=>{i(new DocumentFragment)},[]),!t.open){const o=r;return o?Xf.createPortal(I.jsx(bD,{scope:n.__scopeSelect,children:I.jsx(Kg.Slot,{scope:n.__scopeSelect,children:I.jsx("div",{children:n.children})})}),o):null}return I.jsx(ID,{...n,ref:e})});ED.displayName=uu;var go=10,[bD,rc]=rh(uu),pZ="SelectContentImpl",mZ=Vd("SelectContent.RemoveScroll"),ID=P.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:h,sideOffset:m,align:g,alignOffset:w,arrowPadding:_,collisionBoundary:A,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L,...G}=n,z=nc(uu,t),[H,Y]=P.useState(null),[re,ie]=P.useState(null),V=bn(e,Pe=>Y(Pe)),[B,W]=P.useState(null),[Z,te]=P.useState(null),ee=Xg(t),[K,we]=P.useState(!1),se=P.useRef(!1);P.useEffect(()=>{if(H)return aD(H)},[H]),MP();const Te=P.useCallback(Pe=>{const[Ge,...at]=ee().map(bt=>bt.ref.current),[st]=at.slice(-1),ct=document.activeElement;for(const bt of Pe)if(bt===ct||(bt==null||bt.scrollIntoView({block:"nearest"}),bt===Ge&&re&&(re.scrollTop=0),bt===st&&re&&(re.scrollTop=re.scrollHeight),bt==null||bt.focus(),document.activeElement!==ct))return},[ee,re]),xe=P.useCallback(()=>Te([B,H]),[Te,B,H]);P.useEffect(()=>{K&&xe()},[K,xe]);const{onOpenChange:oe,triggerPointerDownPosRef:Ae}=z;P.useEffect(()=>{if(H){let Pe={x:0,y:0};const Ge=st=>{var ct,bt;Pe={x:Math.abs(Math.round(st.pageX)-(((ct=Ae.current)==null?void 0:ct.x)??0)),y:Math.abs(Math.round(st.pageY)-(((bt=Ae.current)==null?void 0:bt.y)??0))}},at=st=>{Pe.x<=10&&Pe.y<=10?st.preventDefault():H.contains(st.target)||oe(!1),document.removeEventListener("pointermove",Ge),Ae.current=null};return Ae.current!==null&&(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",at,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ge),document.removeEventListener("pointerup",at,{capture:!0})}}},[H,oe,Ae]),P.useEffect(()=>{const Pe=()=>oe(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[oe]);const[Ne,ae]=UD(Pe=>{const Ge=ee().filter(ct=>!ct.disabled),at=Ge.find(ct=>ct.ref.current===document.activeElement),st=zD(Ge,Pe,at);st&&setTimeout(()=>st.ref.current.focus())}),he=P.useCallback((Pe,Ge,at)=>{const st=!se.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&(W(Pe),st&&(se.current=!0))},[z.value]),Se=P.useCallback(()=>H==null?void 0:H.focus(),[H]),Le=P.useCallback((Pe,Ge,at)=>{const st=!se.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&te(Pe)},[z.value]),it=r==="popper"?Ww:TD,Re=it===Ww?{side:h,sideOffset:m,align:g,alignOffset:w,arrowPadding:_,collisionBoundary:A,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L}:{};return I.jsx(bD,{scope:t,content:H,viewport:re,onViewportChange:ie,itemRefCallback:he,selectedItem:B,onItemLeave:Se,itemTextRefCallback:Le,focusSelectedItem:xe,selectedItemText:Z,position:r,isPositioned:K,searchRef:Ne,children:I.jsx(A_,{as:mZ,allowPinchZoom:!0,children:I.jsx(f_,{asChild:!0,trapped:z.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:an(i,Pe=>{var Ge;(Ge=z.trigger)==null||Ge.focus({preventScroll:!0}),Pe.preventDefault()}),children:I.jsx(h_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:I.jsx(it,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:Pe=>Pe.preventDefault(),...G,...Re,onPlaced:()=>we(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...G.style},onKeyDown:an(G.onKeyDown,Pe=>{const Ge=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Ge&&Pe.key.length===1&&ae(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let st=ee().filter(ct=>!ct.disabled).map(ct=>ct.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(st=st.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const ct=Pe.target,bt=st.indexOf(ct);st=st.slice(bt+1)}setTimeout(()=>Te(st)),Pe.preventDefault()}})})})})})})});ID.displayName=pZ;var gZ="SelectItemAlignedPosition",TD=P.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,o=nc(uu,t),c=rc(uu,t),[h,m]=P.useState(null),[g,w]=P.useState(null),_=bn(e,V=>w(V)),A=Xg(t),R=P.useRef(!1),M=P.useRef(!0),{viewport:D,selectedItem:L,selectedItemText:G,focusSelectedItem:z}=c,H=P.useCallback(()=>{if(o.trigger&&o.valueNode&&h&&g&&D&&L&&G){const V=o.trigger.getBoundingClientRect(),B=g.getBoundingClientRect(),W=o.valueNode.getBoundingClientRect(),Z=G.getBoundingClientRect();if(o.dir!=="rtl"){const ct=Z.left-B.left,bt=W.left-ct,ht=V.left-bt,gn=V.width+ht,Fn=Math.max(gn,B.width),Dr=window.innerWidth-go,Qt=G0(bt,[go,Math.max(go,Dr-Fn)]);h.style.minWidth=gn+"px",h.style.left=Qt+"px"}else{const ct=B.right-Z.right,bt=window.innerWidth-W.right-ct,ht=window.innerWidth-V.right-bt,gn=V.width+ht,Fn=Math.max(gn,B.width),Dr=window.innerWidth-go,Qt=G0(bt,[go,Math.max(go,Dr-Fn)]);h.style.minWidth=gn+"px",h.style.right=Qt+"px"}const te=A(),ee=window.innerHeight-go*2,K=D.scrollHeight,we=window.getComputedStyle(g),se=parseInt(we.borderTopWidth,10),Te=parseInt(we.paddingTop,10),xe=parseInt(we.borderBottomWidth,10),oe=parseInt(we.paddingBottom,10),Ae=se+Te+K+oe+xe,Ne=Math.min(L.offsetHeight*5,Ae),ae=window.getComputedStyle(D),he=parseInt(ae.paddingTop,10),Se=parseInt(ae.paddingBottom,10),Le=V.top+V.height/2-go,it=ee-Le,Re=L.offsetHeight/2,Pe=L.offsetTop+Re,Ge=se+Te+Pe,at=Ae-Ge;if(Ge<=Le){const ct=te.length>0&&L===te[te.length-1].ref.current;h.style.bottom="0px";const bt=g.clientHeight-D.offsetTop-D.offsetHeight,ht=Math.max(it,Re+(ct?Se:0)+bt+xe),gn=Ge+ht;h.style.height=gn+"px"}else{const ct=te.length>0&&L===te[0].ref.current;h.style.top="0px";const ht=Math.max(Le,se+D.offsetTop+(ct?he:0)+Re)+at;h.style.height=ht+"px",D.scrollTop=Ge-Le+D.offsetTop}h.style.margin=`${go}px 0`,h.style.minHeight=Ne+"px",h.style.maxHeight=ee+"px",r==null||r(),requestAnimationFrame(()=>R.current=!0)}},[A,o.trigger,o.valueNode,h,g,D,L,G,o.dir,r]);Fi(()=>H(),[H]);const[Y,re]=P.useState();Fi(()=>{g&&re(window.getComputedStyle(g).zIndex)},[g]);const ie=P.useCallback(V=>{V&&M.current===!0&&(H(),z==null||z(),M.current=!1)},[H,z]);return I.jsx(xZ,{scope:t,contentWrapper:h,shouldExpandOnScrollRef:R,onScrollButtonChange:ie,children:I.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Y},children:I.jsx(nn.div,{...i,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});TD.displayName=gZ;var yZ="SelectPopperPosition",Ww=P.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=go,...o}=n,c=Yg(t);return I.jsx(fQ,{...c,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ww.displayName=yZ;var[xZ,C_]=rh(uu,{}),Hw="SelectViewport",AD=P.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,o=rc(Hw,t),c=C_(Hw,t),h=bn(e,o.onViewportChange),m=P.useRef(0);return I.jsxs(I.Fragment,{children:[I.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),I.jsx(Kg.Slot,{scope:t,children:I.jsx(nn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:an(i.onScroll,g=>{const w=g.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:A}=c;if(A!=null&&A.current&&_){const R=Math.abs(m.current-w.scrollTop);if(R>0){const M=window.innerHeight-go*2,D=parseFloat(_.style.minHeight),L=parseFloat(_.style.height),G=Math.max(D,L);if(G<M){const z=G+R,H=Math.min(M,z),Y=z-H;_.style.height=H+"px",_.style.bottom==="0px"&&(w.scrollTop=Y>0?Y:0,_.style.justifyContent="flex-end")}}}m.current=w.scrollTop})})})]})});AD.displayName=Hw;var CD="SelectGroup",[wZ,vZ]=rh(CD),_Z=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=yd();return I.jsx(wZ,{scope:t,id:i,children:I.jsx(nn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});_Z.displayName=CD;var SD="SelectLabel",RD=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=vZ(SD,t);return I.jsx(nn.div,{id:i.id,...r,ref:e})});RD.displayName=SD;var Y0="SelectItem",[EZ,ND]=rh(Y0),kD=P.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:o,...c}=n,h=nc(Y0,t),m=rc(Y0,t),g=h.value===r,[w,_]=P.useState(o??""),[A,R]=P.useState(!1),M=bn(e,z=>{var H;return(H=m.itemRefCallback)==null?void 0:H.call(m,z,r,i)}),D=yd(),L=P.useRef("touch"),G=()=>{i||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return I.jsx(EZ,{scope:t,value:r,disabled:i,textId:D,isSelected:g,onItemTextChange:P.useCallback(z=>{_(H=>H||((z==null?void 0:z.textContent)??"").trim())},[]),children:I.jsx(Kg.ItemSlot,{scope:t,value:r,disabled:i,textValue:w,children:I.jsx(nn.div,{role:"option","aria-labelledby":D,"data-highlighted":A?"":void 0,"aria-selected":g&&A,"data-state":g?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:M,onFocus:an(c.onFocus,()=>R(!0)),onBlur:an(c.onBlur,()=>R(!1)),onClick:an(c.onClick,()=>{L.current!=="mouse"&&G()}),onPointerUp:an(c.onPointerUp,()=>{L.current==="mouse"&&G()}),onPointerDown:an(c.onPointerDown,z=>{L.current=z.pointerType}),onPointerMove:an(c.onPointerMove,z=>{var H;L.current=z.pointerType,i?(H=m.onItemLeave)==null||H.call(m):L.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:an(c.onPointerLeave,z=>{var H;z.currentTarget===document.activeElement&&((H=m.onItemLeave)==null||H.call(m))}),onKeyDown:an(c.onKeyDown,z=>{var Y;((Y=m.searchRef)==null?void 0:Y.current)!==""&&z.key===" "||(aZ.includes(z.key)&&G(),z.key===" "&&z.preventDefault())})})})})});kD.displayName=Y0;var Kh="SelectItemText",PD=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...o}=n,c=nc(Kh,t),h=rc(Kh,t),m=ND(Kh,t),g=dZ(Kh,t),[w,_]=P.useState(null),A=bn(e,G=>_(G),m.onItemTextChange,G=>{var z;return(z=h.itemTextRefCallback)==null?void 0:z.call(h,G,m.value,m.disabled)}),R=w==null?void 0:w.textContent,M=P.useMemo(()=>I.jsx("option",{value:m.value,disabled:m.disabled,children:R},m.value),[m.disabled,m.value,R]),{onNativeOptionAdd:D,onNativeOptionRemove:L}=g;return Fi(()=>(D(M),()=>L(M)),[D,L,M]),I.jsxs(I.Fragment,{children:[I.jsx(nn.span,{id:m.textId,...o,ref:A}),m.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Xf.createPortal(o.children,c.valueNode):null]})});PD.displayName=Kh;var DD="SelectItemIndicator",OD=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return ND(DD,t).isSelected?I.jsx(nn.span,{"aria-hidden":!0,...r,ref:e}):null});OD.displayName=DD;var Gw="SelectScrollUpButton",MD=P.forwardRef((n,e)=>{const t=rc(Gw,n.__scopeSelect),r=C_(Gw,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Fi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=m.scrollTop>0;o(g)};const m=t.viewport;return h(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?I.jsx(VD,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:m}=t;h&&m&&(h.scrollTop=h.scrollTop-m.offsetHeight)}}):null});MD.displayName=Gw;var $w="SelectScrollDownButton",LD=P.forwardRef((n,e)=>{const t=rc($w,n.__scopeSelect),r=C_($w,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Fi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=m.scrollHeight-m.clientHeight,w=Math.ceil(m.scrollTop)<g;o(w)};const m=t.viewport;return h(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?I.jsx(VD,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:m}=t;h&&m&&(h.scrollTop=h.scrollTop+m.offsetHeight)}}):null});LD.displayName=$w;var VD=P.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,o=rc("SelectScrollButton",t),c=P.useRef(null),h=Xg(t),m=P.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return P.useEffect(()=>()=>m(),[m]),Fi(()=>{var w;const g=h().find(_=>_.ref.current===document.activeElement);(w=g==null?void 0:g.ref.current)==null||w.scrollIntoView({block:"nearest"})},[h]),I.jsx(nn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:an(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:an(i.onPointerMove,()=>{var g;(g=o.onItemLeave)==null||g.call(o),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:an(i.onPointerLeave,()=>{m()})})}),bZ="SelectSeparator",FD=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return I.jsx(nn.div,{"aria-hidden":!0,...r,ref:e})});FD.displayName=bZ;var qw="SelectArrow",IZ=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Yg(t),o=nc(qw,t),c=rc(qw,t);return o.open&&c.position==="popper"?I.jsx(pQ,{...i,...r,ref:e}):null});IZ.displayName=qw;var TZ="SelectBubbleInput",BD=P.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(r,i),c=T_(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const m=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(c!==e&&w){const _=new Event("change",{bubbles:!0});w.call(h,e),h.dispatchEvent(_)}},[c,e]),I.jsx(nn.select,{...t,style:{...sD,...t.style},ref:o,defaultValue:e})});BD.displayName=TZ;function jD(n){return n===""||n===void 0}function UD(n){const e=au(n),t=P.useRef(""),r=P.useRef(0),i=P.useCallback(c=>{const h=t.current+c;e(h),function m(g){t.current=g,window.clearTimeout(r.current),g!==""&&(r.current=window.setTimeout(()=>m(""),1e3))}(h)},[e]),o=P.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,o]}function zD(n,e,t){const i=e.length>1&&Array.from(e).every(g=>g===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let c=AZ(n,Math.max(o,0));i.length===1&&(c=c.filter(g=>g!==t));const m=c.find(g=>g.textValue.toLowerCase().startsWith(i.toLowerCase()));return m!==t?m:void 0}function AZ(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var CZ=mD,WD=yD,SZ=wD,RZ=vD,NZ=_D,HD=ED,kZ=AD,GD=RD,$D=kD,PZ=PD,DZ=OD,qD=MD,KD=LD,XD=FD;const WC=CZ,HC=SZ,Kw=P.forwardRef(({className:n,children:e,...t},r)=>I.jsxs(WD,{ref:r,className:ln("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,I.jsx(RZ,{asChild:!0,children:I.jsx(uv,{className:"h-4 w-4 opacity-50"})})]}));Kw.displayName=WD.displayName;const YD=P.forwardRef(({className:n,...e},t)=>I.jsx(qD,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:I.jsx(LS,{className:"h-4 w-4"})}));YD.displayName=qD.displayName;const QD=P.forwardRef(({className:n,...e},t)=>I.jsx(KD,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:I.jsx(uv,{className:"h-4 w-4"})}));QD.displayName=KD.displayName;const Xw=P.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>I.jsx(NZ,{children:I.jsxs(HD,{ref:i,className:ln("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[I.jsx(YD,{}),I.jsx(kZ,{className:ln("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),I.jsx(QD,{})]})}));Xw.displayName=HD.displayName;const OZ=P.forwardRef(({className:n,...e},t)=>I.jsx(GD,{ref:t,className:ln("px-2 py-1.5 text-sm font-semibold",n),...e}));OZ.displayName=GD.displayName;const Xh=P.forwardRef(({className:n,children:e,...t},r)=>I.jsxs($D,{ref:r,className:ln("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[I.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:I.jsx(DZ,{children:I.jsx(FM,{className:"h-4 w-4"})})}),I.jsx(PZ,{children:e})]}));Xh.displayName=$D.displayName;const MZ=P.forwardRef(({className:n,...e},t)=>I.jsx(XD,{ref:t,className:ln("-mx-1 my-1 h-px bg-muted",n),...e}));MZ.displayName=XD.displayName;function LZ(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const VZ=n=>{switch(n){case"success":return jZ;case"info":return zZ;case"warning":return UZ;case"error":return WZ;default:return null}},FZ=Array(12).fill(0),BZ=({visible:n,className:e})=>ze.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ze.createElement("div",{className:"sonner-spinner"},FZ.map((t,r)=>ze.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),jZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),UZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),zZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),WZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),HZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ze.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ze.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),GZ=()=>{const[n,e]=ze.useState(document.hidden);return ze.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Yw=1;class $Z{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Yw++,c=this.toasts.find(m=>m.id===o),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),c?this.toasts=this.toasts.map(m=>m.id===o?(this.publish({...m,...e,id:o,title:r}),{...m,...e,id:o,dismissible:h,title:r}):m):this.addToast({title:r,...i,dismissible:h,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,c;const h=i.then(async g=>{if(c=["resolve",g],ze.isValidElement(g))o=!1,this.create({id:r,type:"default",message:g});else if(KZ(g)&&!g.ok){o=!1;const _=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,A=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,M=typeof _=="object"&&!ze.isValidElement(_)?_:{message:_};this.create({id:r,type:"error",description:A,...M})}else if(g instanceof Error){o=!1;const _=typeof t.error=="function"?await t.error(g):t.error,A=typeof t.description=="function"?await t.description(g):t.description,M=typeof _=="object"&&!ze.isValidElement(_)?_:{message:_};this.create({id:r,type:"error",description:A,...M})}else if(t.success!==void 0){o=!1;const _=typeof t.success=="function"?await t.success(g):t.success,A=typeof t.description=="function"?await t.description(g):t.description,M=typeof _=="object"&&!ze.isValidElement(_)?_:{message:_};this.create({id:r,type:"success",description:A,...M})}}).catch(async g=>{if(c=["reject",g],t.error!==void 0){o=!1;const w=typeof t.error=="function"?await t.error(g):t.error,_=typeof t.description=="function"?await t.description(g):t.description,R=typeof w=="object"&&!ze.isValidElement(w)?w:{message:w};this.create({id:r,type:"error",description:_,...R})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),m=()=>new Promise((g,w)=>h.then(()=>c[0]==="reject"?w(c[1]):g(c[1])).catch(w));return typeof r!="string"&&typeof r!="number"?{unwrap:m}:Object.assign(r,{unwrap:m})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Yw++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ls=new $Z,qZ=(n,e)=>{const t=(e==null?void 0:e.id)||Yw++;return ls.addToast({title:n,...e,id:t}),t},KZ=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",XZ=qZ,YZ=()=>ls.toasts,QZ=()=>ls.getActiveToasts(),xr=Object.assign(XZ,{success:ls.success,info:ls.info,warning:ls.warning,error:ls.error,custom:ls.custom,message:ls.message,promise:ls.promise,dismiss:ls.dismiss,loading:ls.loading},{getHistory:YZ,getToasts:QZ});LZ("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Mm(n){return n.label!==void 0}const ZZ=3,JZ="24px",eJ="16px",GC=4e3,tJ=356,nJ=14,rJ=45,iJ=200;function Bo(...n){return n.filter(Boolean).join(" ")}function sJ(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const oJ=n=>{var e,t,r,i,o,c,h,m,g;const{invert:w,toast:_,unstyled:A,interacting:R,setHeights:M,visibleToasts:D,heights:L,index:G,toasts:z,expanded:H,removeToast:Y,defaultRichColors:re,closeButton:ie,style:V,cancelButtonStyle:B,actionButtonStyle:W,className:Z="",descriptionClassName:te="",duration:ee,position:K,gap:we,expandByDefault:se,classNames:Te,icons:xe,closeButtonAriaLabel:oe="Close toast"}=n,[Ae,Ne]=ze.useState(null),[ae,he]=ze.useState(null),[Se,Le]=ze.useState(!1),[it,Re]=ze.useState(!1),[Pe,Ge]=ze.useState(!1),[at,st]=ze.useState(!1),[ct,bt]=ze.useState(!1),[ht,gn]=ze.useState(0),[Fn,Dr]=ze.useState(0),Qt=ze.useRef(_.duration||ee||GC),zt=ze.useRef(null),pt=ze.useRef(null),xi=G===0,Xe=G+1<=D,Xn=_.type,wi=_.dismissible!==!1,Zr=_.className||"",io=_.descriptionClassName||"",Wt=ze.useMemo(()=>L.findIndex(mt=>mt.toastId===_.id)||0,[L,_.id]),Yn=ze.useMemo(()=>{var mt;return(mt=_.closeButton)!=null?mt:ie},[_.closeButton,ie]),Er=ze.useMemo(()=>_.duration||ee||GC,[_.duration,ee]),Bn=ze.useRef(0),Jr=ze.useRef(0),Bi=ze.useRef(0),vi=ze.useRef(null),[In,We]=K.split("-"),Tn=ze.useMemo(()=>L.reduce((mt,Gt,An)=>An>=Wt?mt:mt+Gt.height,0),[L,Wt]),Ht=GZ(),pn=_.invert||w,ai=Xn==="loading";Jr.current=ze.useMemo(()=>Wt*we+Tn,[Wt,Tn]),ze.useEffect(()=>{Qt.current=Er},[Er]),ze.useEffect(()=>{Le(!0)},[]),ze.useEffect(()=>{const mt=pt.current;if(mt){const Gt=mt.getBoundingClientRect().height;return Dr(Gt),M(An=>[{toastId:_.id,height:Gt,position:_.position},...An]),()=>M(An=>An.filter($t=>$t.toastId!==_.id))}},[M,_.id]),ze.useLayoutEffect(()=>{if(!Se)return;const mt=pt.current,Gt=mt.style.height;mt.style.height="auto";const An=mt.getBoundingClientRect().height;mt.style.height=Gt,Dr(An),M($t=>$t.find(Cn=>Cn.toastId===_.id)?$t.map(Cn=>Cn.toastId===_.id?{...Cn,height:An}:Cn):[{toastId:_.id,height:An,position:_.position},...$t])},[Se,_.title,_.description,M,_.id,_.jsx,_.action,_.cancel]);const jr=ze.useCallback(()=>{Re(!0),gn(Jr.current),M(mt=>mt.filter(Gt=>Gt.toastId!==_.id)),setTimeout(()=>{Y(_)},iJ)},[_,Y,M,Jr]);ze.useEffect(()=>{if(_.promise&&Xn==="loading"||_.duration===1/0||_.type==="loading")return;let mt;return H||R||Ht?(()=>{if(Bi.current<Bn.current){const $t=new Date().getTime()-Bn.current;Qt.current=Qt.current-$t}Bi.current=new Date().getTime()})():(()=>{Qt.current!==1/0&&(Bn.current=new Date().getTime(),mt=setTimeout(()=>{_.onAutoClose==null||_.onAutoClose.call(_,_),jr()},Qt.current))})(),()=>clearTimeout(mt)},[H,R,_,Xn,Ht,jr]),ze.useEffect(()=>{_.delete&&(jr(),_.onDismiss==null||_.onDismiss.call(_,_))},[jr,_.delete]);function so(){var mt;if(xe!=null&&xe.loading){var Gt;return ze.createElement("div",{className:Bo(Te==null?void 0:Te.loader,_==null||(Gt=_.classNames)==null?void 0:Gt.loader,"sonner-loader"),"data-visible":Xn==="loading"},xe.loading)}return ze.createElement(BZ,{className:Bo(Te==null?void 0:Te.loader,_==null||(mt=_.classNames)==null?void 0:mt.loader),visible:Xn==="loading"})}const Ct=_.icon||(xe==null?void 0:xe[Xn])||VZ(Xn);var br,Ls;return ze.createElement("li",{tabIndex:0,ref:pt,className:Bo(Z,Zr,Te==null?void 0:Te.toast,_==null||(e=_.classNames)==null?void 0:e.toast,Te==null?void 0:Te.default,Te==null?void 0:Te[Xn],_==null||(t=_.classNames)==null?void 0:t[Xn]),"data-sonner-toast":"","data-rich-colors":(br=_.richColors)!=null?br:re,"data-styled":!(_.jsx||_.unstyled||A),"data-mounted":Se,"data-promise":!!_.promise,"data-swiped":ct,"data-removed":it,"data-visible":Xe,"data-y-position":In,"data-x-position":We,"data-index":G,"data-front":xi,"data-swiping":Pe,"data-dismissible":wi,"data-type":Xn,"data-invert":pn,"data-swipe-out":at,"data-swipe-direction":ae,"data-expanded":!!(H||se&&Se),style:{"--index":G,"--toasts-before":G,"--z-index":z.length-G,"--offset":`${it?ht:Jr.current}px`,"--initial-height":se?"auto":`${Fn}px`,...V,..._.style},onDragEnd:()=>{Ge(!1),Ne(null),vi.current=null},onPointerDown:mt=>{mt.button!==2&&(ai||!wi||(zt.current=new Date,gn(Jr.current),mt.target.setPointerCapture(mt.pointerId),mt.target.tagName!=="BUTTON"&&(Ge(!0),vi.current={x:mt.clientX,y:mt.clientY})))},onPointerUp:()=>{var mt,Gt,An;if(at||!wi)return;vi.current=null;const $t=Number(((mt=pt.current)==null?void 0:mt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ir=Number(((Gt=pt.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Cn=new Date().getTime()-((An=zt.current)==null?void 0:An.getTime()),Rt=Ae==="x"?$t:Ir,gs=Math.abs(Rt)/Cn;if(Math.abs(Rt)>=rJ||gs>.11){gn(Jr.current),_.onDismiss==null||_.onDismiss.call(_,_),he(Ae==="x"?$t>0?"right":"left":Ir>0?"down":"up"),jr(),st(!0);return}else{var cn,ir;(cn=pt.current)==null||cn.style.setProperty("--swipe-amount-x","0px"),(ir=pt.current)==null||ir.style.setProperty("--swipe-amount-y","0px")}bt(!1),Ge(!1),Ne(null)},onPointerMove:mt=>{var Gt,An,$t;if(!vi.current||!wi||((Gt=window.getSelection())==null?void 0:Gt.toString().length)>0)return;const Cn=mt.clientY-vi.current.y,Rt=mt.clientX-vi.current.x;var gs;const cn=(gs=n.swipeDirections)!=null?gs:sJ(K);!Ae&&(Math.abs(Rt)>1||Math.abs(Cn)>1)&&Ne(Math.abs(Rt)>Math.abs(Cn)?"x":"y");let ir={x:0,y:0};const jn=dr=>1/(1.5+Math.abs(dr)/20);if(Ae==="y"){if(cn.includes("top")||cn.includes("bottom"))if(cn.includes("top")&&Cn<0||cn.includes("bottom")&&Cn>0)ir.y=Cn;else{const dr=Cn*jn(Cn);ir.y=Math.abs(dr)<Math.abs(Cn)?dr:Cn}}else if(Ae==="x"&&(cn.includes("left")||cn.includes("right")))if(cn.includes("left")&&Rt<0||cn.includes("right")&&Rt>0)ir.x=Rt;else{const dr=Rt*jn(Rt);ir.x=Math.abs(dr)<Math.abs(Rt)?dr:Rt}(Math.abs(ir.x)>0||Math.abs(ir.y)>0)&&bt(!0),(An=pt.current)==null||An.style.setProperty("--swipe-amount-x",`${ir.x}px`),($t=pt.current)==null||$t.style.setProperty("--swipe-amount-y",`${ir.y}px`)}},Yn&&!_.jsx&&Xn!=="loading"?ze.createElement("button",{"aria-label":oe,"data-disabled":ai,"data-close-button":!0,onClick:ai||!wi?()=>{}:()=>{jr(),_.onDismiss==null||_.onDismiss.call(_,_)},className:Bo(Te==null?void 0:Te.closeButton,_==null||(r=_.classNames)==null?void 0:r.closeButton)},(Ls=xe==null?void 0:xe.close)!=null?Ls:HZ):null,(Xn||_.icon||_.promise)&&_.icon!==null&&((xe==null?void 0:xe[Xn])!==null||_.icon)?ze.createElement("div",{"data-icon":"",className:Bo(Te==null?void 0:Te.icon,_==null||(i=_.classNames)==null?void 0:i.icon)},_.promise||_.type==="loading"&&!_.icon?_.icon||so():null,_.type!=="loading"?Ct:null):null,ze.createElement("div",{"data-content":"",className:Bo(Te==null?void 0:Te.content,_==null||(o=_.classNames)==null?void 0:o.content)},ze.createElement("div",{"data-title":"",className:Bo(Te==null?void 0:Te.title,_==null||(c=_.classNames)==null?void 0:c.title)},_.jsx?_.jsx:typeof _.title=="function"?_.title():_.title),_.description?ze.createElement("div",{"data-description":"",className:Bo(te,io,Te==null?void 0:Te.description,_==null||(h=_.classNames)==null?void 0:h.description)},typeof _.description=="function"?_.description():_.description):null),ze.isValidElement(_.cancel)?_.cancel:_.cancel&&Mm(_.cancel)?ze.createElement("button",{"data-button":!0,"data-cancel":!0,style:_.cancelButtonStyle||B,onClick:mt=>{Mm(_.cancel)&&wi&&(_.cancel.onClick==null||_.cancel.onClick.call(_.cancel,mt),jr())},className:Bo(Te==null?void 0:Te.cancelButton,_==null||(m=_.classNames)==null?void 0:m.cancelButton)},_.cancel.label):null,ze.isValidElement(_.action)?_.action:_.action&&Mm(_.action)?ze.createElement("button",{"data-button":!0,"data-action":!0,style:_.actionButtonStyle||W,onClick:mt=>{Mm(_.action)&&(_.action.onClick==null||_.action.onClick.call(_.action,mt),!mt.defaultPrevented&&jr())},className:Bo(Te==null?void 0:Te.actionButton,_==null||(g=_.classNames)==null?void 0:g.actionButton)},_.action.label):null)};function $C(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function aJ(n,e){const t={};return[n,e].forEach((r,i)=>{const o=i===1,c=o?"--mobile-offset":"--offset",h=o?eJ:JZ;function m(g){["top","right","bottom","left"].forEach(w=>{t[`${c}-${w}`]=typeof g=="number"?`${g}px`:g})}typeof r=="number"||typeof r=="string"?m(r):typeof r=="object"?["top","right","bottom","left"].forEach(g=>{r[g]===void 0?t[`${c}-${g}`]=h:t[`${c}-${g}`]=typeof r[g]=="number"?`${r[g]}px`:r[g]}):m(h)}),t}const lJ=ze.forwardRef(function(e,t){const{invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:h,className:m,offset:g,mobileOffset:w,theme:_="light",richColors:A,duration:R,style:M,visibleToasts:D=ZZ,toastOptions:L,dir:G=$C(),gap:z=nJ,icons:H,containerAriaLabel:Y="Notifications"}=e,[re,ie]=ze.useState([]),V=ze.useMemo(()=>Array.from(new Set([i].concat(re.filter(ae=>ae.position).map(ae=>ae.position)))),[re,i]),[B,W]=ze.useState([]),[Z,te]=ze.useState(!1),[ee,K]=ze.useState(!1),[we,se]=ze.useState(_!=="system"?_:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Te=ze.useRef(null),xe=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),oe=ze.useRef(null),Ae=ze.useRef(!1),Ne=ze.useCallback(ae=>{ie(he=>{var Se;return(Se=he.find(Le=>Le.id===ae.id))!=null&&Se.delete||ls.dismiss(ae.id),he.filter(({id:Le})=>Le!==ae.id)})},[]);return ze.useEffect(()=>ls.subscribe(ae=>{if(ae.dismiss){requestAnimationFrame(()=>{ie(he=>he.map(Se=>Se.id===ae.id?{...Se,delete:!0}:Se))});return}setTimeout(()=>{OS.flushSync(()=>{ie(he=>{const Se=he.findIndex(Le=>Le.id===ae.id);return Se!==-1?[...he.slice(0,Se),{...he[Se],...ae},...he.slice(Se+1)]:[ae,...he]})})})}),[re]),ze.useEffect(()=>{if(_!=="system"){se(_);return}if(_==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;const ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:he})=>{se(he?"dark":"light")})}catch{ae.addListener(({matches:Se})=>{try{se(Se?"dark":"light")}catch(Le){console.error(Le)}})}},[_]),ze.useEffect(()=>{re.length<=1&&te(!1)},[re]),ze.useEffect(()=>{const ae=he=>{var Se;if(o.every(Re=>he[Re]||he.code===Re)){var it;te(!0),(it=Te.current)==null||it.focus()}he.code==="Escape"&&(document.activeElement===Te.current||(Se=Te.current)!=null&&Se.contains(document.activeElement))&&te(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[o]),ze.useEffect(()=>{if(Te.current)return()=>{oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null,Ae.current=!1)}},[Te.current]),ze.createElement("section",{ref:t,"aria-label":`${Y} ${xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},V.map((ae,he)=>{var Se;const[Le,it]=ae.split("-");return re.length?ze.createElement("ol",{key:ae,dir:G==="auto"?$C():G,tabIndex:-1,ref:Te,className:m,"data-sonner-toaster":!0,"data-sonner-theme":we,"data-y-position":Le,"data-x-position":it,style:{"--front-toast-height":`${((Se=B[0])==null?void 0:Se.height)||0}px`,"--width":`${tJ}px`,"--gap":`${z}px`,...M,...aJ(g,w)},onBlur:Re=>{Ae.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(Ae.current=!1,oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||Ae.current||(Ae.current=!0,oe.current=Re.relatedTarget)},onMouseEnter:()=>te(!0),onMouseMove:()=>te(!0),onMouseLeave:()=>{ee||te(!1)},onDragEnd:()=>te(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},re.filter(Re=>!Re.position&&he===0||Re.position===ae).map((Re,Pe)=>{var Ge,at;return ze.createElement(oJ,{key:Re.id,icons:H,index:Pe,toast:Re,defaultRichColors:A,duration:(Ge=L==null?void 0:L.duration)!=null?Ge:R,className:L==null?void 0:L.className,descriptionClassName:L==null?void 0:L.descriptionClassName,invert:r,visibleToasts:D,closeButton:(at=L==null?void 0:L.closeButton)!=null?at:h,interacting:ee,position:ae,style:L==null?void 0:L.style,unstyled:L==null?void 0:L.unstyled,classNames:L==null?void 0:L.classNames,cancelButtonStyle:L==null?void 0:L.cancelButtonStyle,actionButtonStyle:L==null?void 0:L.actionButtonStyle,closeButtonAriaLabel:L==null?void 0:L.closeButtonAriaLabel,removeToast:Ne,toasts:re.filter(st=>st.position==Re.position),heights:B.filter(st=>st.position==Re.position),setHeights:W,expandByDefault:c,gap:z,expanded:Z,swipeDirections:e.swipeDirections})})):null}))});function cJ({event:n,sessionId:e,onClose:t}){const[r,i]=P.useState({rating_profile_setup:"",rating_interests_helpful:"",rating_social_usefulness:"",met_match_in_person:"",open_to_other_event_types:"",match_experience_feedback:"",general_feedback:""}),[o,c]=P.useState(!1),[h,m]=P.useState({}),g=(R,M)=>{i(D=>({...D,[R]:M})),h[R]&&m(D=>({...D,[R]:null}))},w=()=>{const R={};return r.rating_profile_setup||(R.rating_profile_setup="Please rate the profile setup experience."),r.rating_interests_helpful||(R.rating_interests_helpful="Please rate how helpful interests were."),r.rating_social_usefulness||(R.rating_social_usefulness="Please rate the social interaction experience."),r.met_match_in_person||(R.met_match_in_person="Please let us know if you met someone in person."),r.open_to_other_event_types||(R.open_to_other_event_types="Please let us know about future event interest."),r.match_experience_feedback.trim()||(R.match_experience_feedback="Please share what we could improve."),m(R),Object.keys(R).length===0},_=async R=>{if(R.preventDefault(),!w()){xr.error("Please complete all required fields.");return}c(!0);try{await eH.create({event_id:n.id,session_id:e,rating_profile_setup:parseInt(r.rating_profile_setup),rating_interests_helpful:parseInt(r.rating_interests_helpful),rating_social_usefulness:parseInt(r.rating_social_usefulness),met_match_in_person:r.met_match_in_person==="true",open_to_other_event_types:r.open_to_other_event_types==="true",match_experience_feedback:r.match_experience_feedback.trim(),general_feedback:r.general_feedback.trim()||null}),localStorage.setItem(`feedback_given_for_${n.id}`,"true"),xr.success("Thanks for your feedback 💘"),t()}catch(M){console.error("Error submitting feedback:",M),xr.error("Failed to submit feedback. Please try again.")}finally{c(!1)}},A=({value:R,onChange:M,error:D})=>I.jsxs("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(L=>I.jsx("button",{type:"button",onClick:()=>M(L.toString()),className:`p-1 transition-colors ${parseInt(R)>=L?"text-yellow-500 hover:text-yellow-600":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:I.jsx(I5,{className:`w-6 h-6 ${parseInt(R)>=L?"fill-current":""}`})},L)),D&&I.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs ml-2 mt-1",children:D})]});return I.jsx(gp,{children:I.jsx(oa.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",children:I.jsxs(oa.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[I.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:I.jsx(vd,{className:"w-6 h-6 text-white"})}),I.jsx("button",{onClick:t,className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:I.jsx(Li,{className:"w-5 h-5"})})]}),I.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:["Enjoyed Hooked at ",n.name,"? 💘"]}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Help us make the next one even better — takes 1 minute!"})]}),I.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[I.jsxs("div",{children:[I.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to set up your profile? *"}),I.jsx(A,{value:r.rating_profile_setup,onChange:R=>g("rating_profile_setup",R),error:h.rating_profile_setup})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How helpful were profile interests in choosing who to like? *"}),I.jsx(A,{value:r.rating_interests_helpful,onChange:R=>g("rating_interests_helpful",R),error:h.rating_interests_helpful})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to interact with others? *"}),I.jsx(A,{value:r.rating_social_usefulness,onChange:R=>g("rating_social_usefulness",R),error:h.rating_social_usefulness})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Did you meet up with a match? *"}),I.jsxs(WC,{value:r.met_match_in_person,onValueChange:R=>g("met_match_in_person",R),children:[I.jsx(Kw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:I.jsx(HC,{placeholder:"Select an option"})}),I.jsxs(Xw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[I.jsx(Xh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),I.jsx(Xh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.met_match_in_person&&I.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.met_match_in_person})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Would you use Hooked at other event types? *"}),I.jsxs(WC,{value:r.open_to_other_event_types,onValueChange:R=>g("open_to_other_event_types",R),children:[I.jsx(Kw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:I.jsx(HC,{placeholder:"Select an option"})}),I.jsxs(Xw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[I.jsx(Xh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),I.jsx(Xh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.open_to_other_event_types&&I.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.open_to_other_event_types})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"What would you improve? *"}),I.jsx(Uf,{value:r.match_experience_feedback,onChange:R=>g("match_experience_feedback",R.target.value),placeholder:"Tell us what could make the experience better...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"}),h.match_experience_feedback&&I.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.match_experience_feedback})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Other feedback?"}),I.jsx(Uf,{value:r.general_feedback,onChange:R=>g("general_feedback",R.target.value),placeholder:"Anything else you'd like to share...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"})]}),I.jsx(Dt,{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-3",children:o?I.jsxs("div",{className:"flex items-center justify-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Feedback"})]})]})})})}var uJ=(n,e,t,r,i,o,c,h)=>{let m=document.documentElement,g=["light","dark"];function w(R){(Array.isArray(n)?n:[n]).forEach(M=>{let D=M==="class",L=D&&o?i.map(G=>o[G]||G):i;D?(m.classList.remove(...L),m.classList.add(o&&o[R]?o[R]:R)):m.setAttribute(M,R)}),_(R)}function _(R){h&&g.includes(R)&&(m.style.colorScheme=R)}function A(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)w(r);else try{let R=localStorage.getItem(e)||t,M=c&&R==="system"?A():R;w(M)}catch{}},dJ=P.createContext(void 0),hJ={setTheme:n=>{},themes:[]},fJ=()=>{var n;return(n=P.useContext(dJ))!=null?n:hJ};P.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,themes:h,nonce:m,scriptProps:g})=>{let w=JSON.stringify([t,e,o,n,h,c,r,i]).slice(1,-1);return P.createElement("script",{...g,suppressHydrationWarning:!0,nonce:typeof window>"u"?m:"",dangerouslySetInnerHTML:{__html:`(${uJ.toString()})(${w})`}})});const pJ=({...n})=>{const{theme:e="system"}=fJ();return I.jsx(lJ,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function mJ({children:n,currentPageName:e}){const t=ca(),r=no(),[i,o]=P.useState(!!(localStorage.getItem("currentEventId")&&localStorage.getItem("currentSessionId"))),[c,h]=P.useState(!1),[m,g]=P.useState(!1),[w,_]=P.useState(!1),[A,R]=P.useState({name:"",profileId:""}),[M,D]=P.useState(new Set),[L,G]=P.useState(!1),[z,H]=P.useState({name:"",senderSessionId:""}),[Y,re]=P.useState(new Set),[ie,V]=P.useState(!1),[B,W]=P.useState(null),[Z,te]=P.useState(null),ee=P.useCallback(async()=>{try{const we=localStorage.getItem("currentEventId")||localStorage.getItem("last_event_id"),se=localStorage.getItem("currentSessionId")||localStorage.getItem("last_session_id");if(!we||!se||localStorage.getItem(`feedback_given_for_${we}`))return;const xe=await Of.filter({id:we});if(xe.length===0)return;const oe=xe[0],Ae=new Date().toISOString();oe.expires_at&&Ae>oe.expires_at&&(W(oe),te(se),V(!0),localStorage.setItem("last_event_id",we),localStorage.setItem("last_session_id",se))}catch(we){console.error("Error checking feedback eligibility:",we)}},[]);P.useEffect(()=>{ee()},[ee]);const K=P.useCallback(async()=>{const we=localStorage.getItem("currentEventId"),se=localStorage.getItem("currentSessionId"),Te=!!(we&&se);if(o(Te),!Te){h(!1),g(!1),_(!1),G(!1),D(new Set),re(new Set);return}try{const xe=await us.filter({liker_session_id:se,event_id:we,is_mutual:!0}),oe=await us.filter({liked_session_id:se,event_id:we,is_mutual:!0});let Ae=!1,Ne=null;if([...xe,...oe].forEach(he=>{const Se=he.liker_session_id===se;(Se&&!he.liker_notified_of_match||!Se&&!he.liked_notified_of_match)&&(Ae=!0,!Ne&&!M.has(he.id)&&(Ne={...he,otherUserSessionId:Se?he.liked_session_id:he.liker_session_id,type:Se?"liker":"liked"}))}),h(Ae),Ne&&!w){const he=await Zo.filter({session_id:Ne.otherUserSessionId,event_id:we});if(he.length>0){R({name:he[0].first_name,profileId:he[0].id}),_(!0),D(Le=>new Set([...Le,Ne.id]));const Se={};Ne.type==="liker"?Se.liker_notified_of_match=!0:Se.liked_notified_of_match=!0,await us.update(Ne.id,Se)}}const ae=await Vc.filter({receiver_session_id:se,event_id:we,is_read:!1});if(g(ae.length>0),ae.length>0&&!L){const he=ae.sort((Se,Le)=>new Date(Le.created_date)-new Date(Se.created_date))[0];if(!Y.has(he.id)){const Se=await Zo.filter({session_id:he.sender_session_id,event_id:we});Se.length>0&&(H({name:Se[0].first_name,senderSessionId:he.sender_session_id}),G(!0),re(Le=>new Set([...Le,he.id])))}}}catch(xe){console.error("Error checking notifications:",xe)}},[M,w,Y,L]);return P.useEffect(()=>{K();const we=setInterval(K,45e3);return()=>clearInterval(we)},[K]),P.useEffect(()=>{K()},[t.pathname,K]),I.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[I.jsx(pJ,{position:"bottom-center",expand:!1,visibleToasts:1,closeButton:!1,duration:3e3,toastOptions:{style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)",borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",fontWeight:"500",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}}}),I.jsx("style",{children:`
        :root {
          --primary: #1a1d29;
          --accent: #ff6b6b;
          --secondary: #4f46e5;
          --muted: #64748b;
          --background: #ffffff;
          --card: #ffffff;
          --toast-bg: #ffffff;
          --toast-color: #000000;
          --toast-border: rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
          :root {
            --background: #111827;
            --card: #1f2937;
            --primary: #ffffff;
            --muted: #94a3b8;
            --toast-bg: #1f2937;
            --toast-color: #ffffff;
            --toast-border: rgba(255, 255, 255, 0.15);
          }
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          background: var(--background);
          color: var(--primary);
        }

        .glass-effect {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @media (prefers-color-scheme: dark) {
          .glass-effect {
            background: rgba(31, 41, 55, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
          }
        }

        .gradient-text {
          background: linear-gradient(135deg, var(--accent) 0%, var(--secondary) 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Modal overlay improvements */
        [data-radix-popper-content-wrapper],
        [data-state="open"][data-side] {
          z-index: 50;
        }

        /* Dark mode modal backgrounds */
        @media (prefers-color-scheme: dark) {
          .modal-content {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
            color: #ffffff !important;
          }

          .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7) !important;
          }
        }

        .modal-content {
          background-color: #ffffff;
          border: 1px solid #e5e7eb;
          border-radius: 16px;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .modal-overlay {
          background-color: rgba(0, 0, 0, 0.4);
        }

        /* Enhanced Toaster Styles */
        [data-sonner-toast] {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
          border: 1px solid var(--toast-border) !important;
          border-radius: 0.5rem !important;
          padding: 1rem !important;
          font-size: 0.875rem !important;
          font-weight: 500 !important;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1) !important;
          backdrop-filter: none !important;
        }

        [data-sonner-toast]:not([data-styled]) {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
        }

        /* Toaster container */
        [data-sonner-toaster] {
          max-width: 90vw;
        }

        [data-sonner-toast] [data-content] {
          color: var(--toast-color) !important;
        }

        [data-sonner-toast] [data-title] {
          color: var(--toast-color) !important;
          font-weight: 600 !important;
        }

        [data-sonner-toast] [data-description] {
          color: var(--toast-color) !important;
          opacity: 0.8;
        }
      `}),I.jsx("main",{className:"relative",children:n}),I.jsxs(gp,{children:[w&&I.jsx(_X,{matchName:A.name,onDismiss:()=>{_(!1)},onSeeMatches:()=>{_(!1),r(Kn("Matches"))}}),L&&I.jsx(EX,{senderName:z.name,senderSessionId:z.senderSessionId,onDismiss:()=>G(!1),onView:()=>{G(!1)}}),ie&&B&&Z&&I.jsx(cJ,{event:B,sessionId:Z,onClose:()=>V(!1)})]})]})}function gJ(n,e){return P.useReducer((t,r)=>e[t][r]??t,n)}var Qg=n=>{const{present:e,children:t}=n,r=yJ(e),i=typeof t=="function"?t({present:r.isPresent}):P.Children.only(t),o=bn(r.ref,xJ(i));return typeof t=="function"||r.isPresent?P.cloneElement(i,{ref:o}):null};Qg.displayName="Presence";function yJ(n){const[e,t]=P.useState(),r=P.useRef(null),i=P.useRef(n),o=P.useRef("none"),c=n?"mounted":"unmounted",[h,m]=gJ(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const g=Lm(r.current);o.current=h==="mounted"?g:"none"},[h]),Fi(()=>{const g=r.current,w=i.current;if(w!==n){const A=o.current,R=Lm(g);n?m("MOUNT"):R==="none"||(g==null?void 0:g.display)==="none"?m("UNMOUNT"):m(w&&A!==R?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,m]),Fi(()=>{if(e){let g;const w=e.ownerDocument.defaultView??window,_=R=>{const D=Lm(r.current).includes(R.animationName);if(R.target===e&&D&&(m("ANIMATION_END"),!i.current)){const L=e.style.animationFillMode;e.style.animationFillMode="forwards",g=w.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=L)})}},A=R=>{R.target===e&&(o.current=Lm(r.current))};return e.addEventListener("animationstart",A),e.addEventListener("animationcancel",_),e.addEventListener("animationend",_),()=>{w.clearTimeout(g),e.removeEventListener("animationstart",A),e.removeEventListener("animationcancel",_),e.removeEventListener("animationend",_)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:P.useCallback(g=>{r.current=g?getComputedStyle(g):null,t(g)},[])}}function Lm(n){return(n==null?void 0:n.animationName)||"none"}function xJ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Zg="Dialog",[ZD,wne]=eh(Zg),[wJ,To]=ZD(Zg),JD=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:o,modal:c=!0}=n,h=P.useRef(null),m=P.useRef(null),[g,w]=Hf({prop:r,defaultProp:i??!1,onChange:o,caller:Zg});return I.jsx(wJ,{scope:e,triggerRef:h,contentRef:m,contentId:yd(),titleId:yd(),descriptionId:yd(),open:g,onOpenChange:w,onOpenToggle:P.useCallback(()=>w(_=>!_),[w]),modal:c,children:t})};JD.displayName=Zg;var e6="DialogTrigger",vJ=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=To(e6,t),o=bn(e,i.triggerRef);return I.jsx(nn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":N_(i.open),...r,ref:o,onClick:an(n.onClick,i.onOpenToggle)})});vJ.displayName=e6;var S_="DialogPortal",[_J,t6]=ZD(S_,{forceMount:void 0}),n6=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,o=To(S_,e);return I.jsx(_J,{scope:e,forceMount:t,children:P.Children.map(r,c=>I.jsx(Qg,{present:t||o.open,children:I.jsx(I_,{asChild:!0,container:i,children:c})}))})};n6.displayName=S_;var Q0="DialogOverlay",r6=P.forwardRef((n,e)=>{const t=t6(Q0,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=To(Q0,n.__scopeDialog);return o.modal?I.jsx(Qg,{present:r||o.open,children:I.jsx(bJ,{...i,ref:e})}):null});r6.displayName=Q0;var EJ=Vd("DialogOverlay.RemoveScroll"),bJ=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=To(Q0,t);return I.jsx(A_,{as:EJ,allowPinchZoom:!0,shards:[i.contentRef],children:I.jsx(nn.div,{"data-state":N_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),du="DialogContent",i6=P.forwardRef((n,e)=>{const t=t6(du,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=To(du,n.__scopeDialog);return I.jsx(Qg,{present:r||o.open,children:o.modal?I.jsx(IJ,{...i,ref:e}):I.jsx(TJ,{...i,ref:e})})});i6.displayName=du;var IJ=P.forwardRef((n,e)=>{const t=To(du,n.__scopeDialog),r=P.useRef(null),i=bn(e,t.contentRef,r);return P.useEffect(()=>{const o=r.current;if(o)return aD(o)},[]),I.jsx(s6,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:an(n.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:an(n.onPointerDownOutside,o=>{const c=o.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0;(c.button===2||h)&&o.preventDefault()}),onFocusOutside:an(n.onFocusOutside,o=>o.preventDefault())})}),TJ=P.forwardRef((n,e)=>{const t=To(du,n.__scopeDialog),r=P.useRef(!1),i=P.useRef(!1);return I.jsx(s6,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,h;(c=n.onCloseAutoFocus)==null||c.call(n,o),o.defaultPrevented||(r.current||(h=t.triggerRef.current)==null||h.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var m,g;(m=n.onInteractOutside)==null||m.call(n,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=o.target;((g=t.triggerRef.current)==null?void 0:g.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),s6=P.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...c}=n,h=To(du,t),m=P.useRef(null),g=bn(e,m);return MP(),I.jsxs(I.Fragment,{children:[I.jsx(f_,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:I.jsx(h_,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":N_(h.open),...c,ref:g,onDismiss:()=>h.onOpenChange(!1)})}),I.jsxs(I.Fragment,{children:[I.jsx(AJ,{titleId:h.titleId}),I.jsx(SJ,{contentRef:m,descriptionId:h.descriptionId})]})]})}),R_="DialogTitle",o6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=To(R_,t);return I.jsx(nn.h2,{id:i.titleId,...r,ref:e})});o6.displayName=R_;var a6="DialogDescription",l6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=To(a6,t);return I.jsx(nn.p,{id:i.descriptionId,...r,ref:e})});l6.displayName=a6;var c6="DialogClose",u6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=To(c6,t);return I.jsx(nn.button,{type:"button",...r,ref:e,onClick:an(n.onClick,()=>i.onOpenChange(!1))})});u6.displayName=c6;function N_(n){return n?"open":"closed"}var d6="DialogTitleWarning",[vne,h6]=CX(d6,{contentName:du,titleName:R_,docsSlug:"dialog"}),AJ=({titleId:n})=>{const e=h6(d6),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return P.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},CJ="DialogDescriptionWarning",SJ=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${h6(CJ).contentName}}.`;return P.useEffect(()=>{var o;const i=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},RJ=JD,NJ=n6,f6=r6,p6=i6,m6=o6,g6=l6,kJ=u6;const Jg=RJ,PJ=NJ,y6=P.forwardRef(({className:n,...e},t)=>I.jsx(f6,{ref:t,className:ln("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));y6.displayName=f6.displayName;const DJ=P.forwardRef(({className:n,children:e,...t},r)=>I.jsxs(PJ,{children:[I.jsx(y6,{}),I.jsxs(p6,{ref:r,className:ln("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,I.jsxs(kJ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[I.jsx(Li,{className:"h-4 w-4"}),I.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DJ.displayName=p6.displayName;const e1=({className:n,...e})=>I.jsx("div",{className:ln("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});e1.displayName="DialogHeader";const t1=P.forwardRef(({className:n,...e},t)=>I.jsx(m6,{ref:t,className:ln("text-lg font-semibold leading-none tracking-tight",n),...e}));t1.displayName=m6.displayName;const OJ=P.forwardRef(({className:n,...e},t)=>I.jsx(g6,{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));OJ.displayName=g6.displayName;var Ze;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ze||(Ze={}));var qC=new Map([[Ze.QR_CODE,"QR_CODE"],[Ze.AZTEC,"AZTEC"],[Ze.CODABAR,"CODABAR"],[Ze.CODE_39,"CODE_39"],[Ze.CODE_93,"CODE_93"],[Ze.CODE_128,"CODE_128"],[Ze.DATA_MATRIX,"DATA_MATRIX"],[Ze.MAXICODE,"MAXICODE"],[Ze.ITF,"ITF"],[Ze.EAN_13,"EAN_13"],[Ze.EAN_8,"EAN_8"],[Ze.PDF_417,"PDF_417"],[Ze.RSS_14,"RSS_14"],[Ze.RSS_EXPANDED,"RSS_EXPANDED"],[Ze.UPC_A,"UPC_A"],[Ze.UPC_E,"UPC_E"],[Ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),KC;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(KC||(KC={}));function MJ(n){return Object.values(Ze).includes(n)}var Z0;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Z0||(Z0={}));var LJ=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Z0.SCAN_TYPE_CAMERA,Z0.SCAN_TYPE_FILE],n}(),x6=function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!qC.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,qC.get(e))},n}(),XC=function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n}(),Qw;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Qw||(Qw={}));var VJ=function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:Qw.UNKWOWN_ERROR}},n}(),FJ=function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n}();function Ca(n){return typeof n>"u"||n===null}var dd=function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),w6=function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(e),h=0,m=c;h<m.length;h++){var g=m[h];if(o.has(g))return t.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},n}(),Yh={exports:{}},BJ=Yh.exports,YC;function jJ(){return YC||(YC=1,function(n,e){(function(t,r){r(e)})(BJ,function(t){function r(j){return j==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,s){j.__proto__=s}||function(j,s){for(var l in s)s.hasOwnProperty(l)&&(j[l]=s[l])};function o(j,s){i(j,s);function l(){this.constructor=j}j.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}function c(j,s){var l=Object.setPrototypeOf;l?l(j,s):j.__proto__=s}function h(j,s){s===void 0&&(s=j.constructor);var l=Error.captureStackTrace;l&&l(j,s)}var m=function(j){o(s,j);function s(l){var u=this.constructor,f=j.call(this,l)||this;return Object.defineProperty(f,"name",{value:u.name,enumerable:!1}),c(f,u.prototype),h(f),f}return s}(Error);class g extends m{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class _ extends g{}_.kind="IllegalArgumentException";class A{constructor(s){if(this.binarizer=s,s===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,l){return this.binarizer.getBlackRow(s,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,l,u,f){const p=this.binarizer.getLuminanceSource().crop(s,l,u,f);return new A(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new A(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new A(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends g{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class M{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(s,l,u,f,p){for(;p--;)u[f++]=s[l++]}static currentTimeMillis(){return Date.now()}}class L extends g{}L.kind="IndexOutOfBoundsException";class G extends L{constructor(s=void 0,l=void 0){super(l),this.index=s,this.message=l}}G.kind="ArrayIndexOutOfBoundsException";class z{static fill(s,l){for(let u=0,f=s.length;u<f;u++)s[u]=l}static fillWithin(s,l,u,f){z.rangeCheck(s.length,l,u);for(let p=l;p<u;p++)s[p]=f}static rangeCheck(s,l,u){if(l>u)throw new _("fromIndex("+l+") > toIndex("+u+")");if(l<0)throw new G(l);if(u>s)throw new G(u)}static asList(...s){return s}static create(s,l,u){return Array.from({length:s}).map(p=>Array.from({length:l}).fill(u))}static createInt32Array(s,l,u){return Array.from({length:s}).map(p=>Int32Array.from({length:l}).fill(u))}static equals(s,l){if(!s||!l||!s.length||!l.length||s.length!==l.length)return!1;for(let u=0,f=s.length;u<f;u++)if(s[u]!==l[u])return!1;return!0}static hashCode(s){if(s===null)return 0;let l=1;for(const u of s)l=31*l+u;return l}static fillUint8Array(s,l){for(let u=0;u!==s.length;u++)s[u]=l}static copyOf(s,l){return s.slice(0,l)}static copyOfUint8Array(s,l){if(s.length<=l){const u=new Uint8Array(l);return u.set(s),u}return s.slice(0,l)}static copyOfRange(s,l,u){const f=u-l,p=new Int32Array(f);return D.arraycopy(s,l,p,0,f),p}static binarySearch(s,l,u){u===void 0&&(u=z.numberComparator);let f=0,p=s.length-1;for(;f<=p;){const y=p+f>>1,v=u(l,s[y]);if(v>0)f=y+1;else if(v<0)p=y-1;else return y}return-f-1}static numberComparator(s,l){return s-l}}class H{static numberOfTrailingZeros(s){let l;if(s===0)return 32;let u=31;return l=s<<16,l!==0&&(u-=16,s=l),l=s<<8,l!==0&&(u-=8,s=l),l=s<<4,l!==0&&(u-=4,s=l),l=s<<2,l!==0&&(u-=2,s=l),u-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let l=1;return s>>>16||(l+=16,s<<=16),s>>>24||(l+=8,s<<=8),s>>>28||(l+=4,s<<=4),s>>>30||(l+=2,s<<=2),l-=s>>>31,l}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,l){return Math.trunc(s/l)}static parseInt(s,l=void 0){return parseInt(s,l)}}H.MIN_VALUE_32_BITS=-2147483648,H.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(s,l){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,l==null?this.bits=Y.makeArray(s):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const l=Y.makeArray(s);D.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),p=u[f];p&=~((1<<(s&31))-1);const y=u.length;for(;p===0;){if(++f===y)return l;p=u[f]}const v=f*32+H.numberOfTrailingZeros(p);return v>l?l:v}getNextUnset(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),p=~u[f];p&=~((1<<(s&31))-1);const y=u.length;for(;p===0;){if(++f===y)return l;p=~u[f]}const v=f*32+H.numberOfTrailingZeros(p);return v>l?l:v}setBulk(s,l){this.bits[Math.floor(s/32)]=l}setRange(s,l){if(l<s||s<0||l>this.size)throw new _;if(l===s)return;l--;const u=Math.floor(s/32),f=Math.floor(l/32),p=this.bits;for(let y=u;y<=f;y++){const v=y>u?0:s&31,C=(2<<(y<f?31:l&31))-(1<<v);p[y]|=C}}clear(){const s=this.bits.length,l=this.bits;for(let u=0;u<s;u++)l[u]=0}isRange(s,l,u){if(l<s||s<0||l>this.size)throw new _;if(l===s)return!0;l--;const f=Math.floor(s/32),p=Math.floor(l/32),y=this.bits;for(let v=f;v<=p;v++){const T=v>f?0:s&31,O=(2<<(v<p?31:l&31))-(1<<T)&4294967295;if((y[v]&O)!==(u?O:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,l){if(l<0||l>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let u=l;u>0;u--)this.appendBit((s>>u-1&1)===1)}appendBitArray(s){const l=s.size;this.ensureCapacity(this.size+l);for(let u=0;u<l;u++)this.appendBit(s.get(u))}xor(s){if(this.size!==s.size)throw new _("Sizes don't match");const l=this.bits;for(let u=0,f=l.length;u<f;u++)l[u]^=s.bits[u]}toBytes(s,l,u,f){for(let p=0;p<f;p++){let y=0;for(let v=0;v<8;v++)this.get(s)&&(y|=1<<7-v),s++;l[u+p]=y}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),u=l+1,f=this.bits;for(let p=0;p<u;p++){let y=f[p];y=y>>1&1431655765|(y&1431655765)<<1,y=y>>2&858993459|(y&858993459)<<2,y=y>>4&252645135|(y&252645135)<<4,y=y>>8&16711935|(y&16711935)<<8,y=y>>16&65535|(y&65535)<<16,s[l-p]=y}if(this.size!==u*32){const p=u*32-this.size;let y=s[0]>>>p;for(let v=1;v<u;v++){const T=s[v];y|=T<<32-p,s[v-1]=y,y=T>>>p}s[u-1]=y}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof Y))return!1;const l=s;return this.size===l.size&&z.equals(this.bits,l.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let s="";for(let l=0,u=this.size;l<u;l++)(l&7)===0&&(s+=" "),s+=this.get(l)?"X":".";return s}clone(){return new Y(this.size,this.bits.slice())}}var re;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(re||(re={}));var ie=re;class V extends g{static getFormatInstance(){return new V}}V.kind="FormatException";var B;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(B||(B={}));class W{constructor(s,l,u,...f){this.valueIdentifier=s,this.name=u,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=f,W.VALUE_IDENTIFIER_TO_ECI.set(s,this),W.NAME_TO_ECI.set(u,this);const p=this.values;for(let y=0,v=p.length;y!==v;y++){const T=p[y];W.VALUES_TO_ECI.set(T,this)}for(const y of f)W.NAME_TO_ECI.set(y,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new V("incorect value");const l=W.VALUES_TO_ECI.get(s);if(l===void 0)throw new V("incorect value");return l}static getCharacterSetECIByName(s){const l=W.NAME_TO_ECI.get(s);if(l===void 0)throw new V("incorect value");return l}equals(s){if(!(s instanceof W))return!1;const l=s;return this.getName()===l.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(B.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(B.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(B.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(B.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(B.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(B.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(B.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(B.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(B.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(B.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(B.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(B.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(B.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(B.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(B.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(B.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(B.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(B.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(B.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(B.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(B.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(B.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(B.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(B.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(B.Big5,28,"Big5"),W.GB18030=new W(B.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(B.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends g{}Z.kind="UnsupportedOperationException";class te{static decode(s,l){const u=this.encodingName(l);return this.customDecoder?this.customDecoder(s,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(s,u):new TextDecoder(u).decode(s)}static shouldDecodeOnFallback(s){return!te.isBrowser()&&s==="ISO-8859-1"}static encode(s,l){const u=this.encodingName(l);return this.customEncoder?this.customEncoder(s,u):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof W?s:W.getCharacterSetECIByName(s)}static decodeFallback(s,l){const u=this.encodingCharacterSet(l);if(te.isDecodeFallbackSupported(u)){let f="";for(let p=0,y=s.length;p<y;p++){let v=s[p].toString(16);v.length<2&&(v="0"+v),f+="%"+v}return decodeURIComponent(f)}if(u.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new Z(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(W.UTF8)||s.equals(W.ISO8859_1)||s.equals(W.ASCII)}static encodeFallback(s){const u=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let p=0;p<u.length;p++)f.push(u[p].charCodeAt(0));return new Uint8Array(f)}}class ee{static castAsNonUtf8Char(s,l=null){const u=l?l.getName():this.ISO88591;return te.decode(new Uint8Array([s]),u)}static guessEncoding(s,l){if(l!=null&&l.get(ie.CHARACTER_SET)!==void 0)return l.get(ie.CHARACTER_SET).toString();const u=s.length;let f=!0,p=!0,y=!0,v=0,T=0,C=0,O=0,U=0,q=0,J=0,le=0,ue=0,fe=0,Ee=0;const Fe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let je=0;je<u&&(f||p||y);je++){const Oe=s[je]&255;y&&(v>0?(Oe&128)===0?y=!1:v--:(Oe&128)!==0&&((Oe&64)===0?y=!1:(v++,(Oe&32)===0?T++:(v++,(Oe&16)===0?C++:(v++,(Oe&8)===0?O++:y=!1))))),f&&(Oe>127&&Oe<160?f=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&Ee++),p&&(U>0?Oe<64||Oe===127||Oe>252?p=!1:U--:Oe===128||Oe===160||Oe>239?p=!1:Oe>160&&Oe<224?(q++,le=0,J++,J>ue&&(ue=J)):Oe>127?(U++,J=0,le++,le>fe&&(fe=le)):(J=0,le=0))}return y&&v>0&&(y=!1),p&&U>0&&(p=!1),y&&(Fe||T+C+O>0)?ee.UTF8:p&&(ee.ASSUME_SHIFT_JIS||ue>=3||fe>=3)?ee.SHIFT_JIS:f&&p?ue===2&&q===2||Ee*10>=u?ee.SHIFT_JIS:ee.ISO88591:f?ee.ISO88591:p?ee.SHIFT_JIS:y?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(s,...l){let u=-1;function f(y,v,T,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let q=O?parseInt(O.substr(1)):void 0,J;switch(U){case"s":J=l[u];break;case"c":J=l[u][0];break;case"f":J=parseFloat(l[u]).toFixed(y);break;case"p":J=parseFloat(l[u]).toPrecision(y);break;case"e":J=parseFloat(l[u]).toExponential(y);break;case"x":J=parseInt(l[u]).toString(q||16);break;case"d":J=parseFloat(parseInt(l[u],q||10).toPrecision(y)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(q);let le=parseInt(T),ue=T&&T[0]+""=="0"?"0":" ";for(;J.length<le;)J=v!==void 0?J+ue:ue+J;return J}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(p,f)}static getBytes(s,l){return te.encode(s,l)}static getCharCode(s,l=0){return s.charCodeAt(l)}static getCharAt(s){return String.fromCharCode(s)}}ee.SHIFT_JIS=W.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=W.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=W.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class K{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,l,u){for(let f=l;l<l+u;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+1)}substring(s,l){return this.value.substring(s,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+l.length)}}class we{constructor(s,l,u,f){if(this.width=s,this.height=l,this.rowSize=u,this.bits=f,l==null&&(l=s),this.height=l,s<1||l<1)throw new _("Both dimensions must be greater than 0");u==null&&(u=Math.floor((s+31)/32)),this.rowSize=u,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const l=s.length,u=s[0].length,f=new we(u,l);for(let p=0;p<l;p++){const y=s[p];for(let v=0;v<u;v++)y[v]&&f.set(v,p)}return f}static parseFromString(s,l,u){if(s===null)throw new _("stringRepresentation cannot be null");const f=new Array(s.length);let p=0,y=0,v=-1,T=0,C=0;for(;C<s.length;)if(s.charAt(C)===`
`||s.charAt(C)==="\r"){if(p>y){if(v===-1)v=p-y;else if(p-y!==v)throw new _("row lengths do not match");y=p,T++}C++}else if(s.substring(C,C+l.length)===l)C+=l.length,f[p]=!0,p++;else if(s.substring(C,C+u.length)===u)C+=u.length,f[p]=!1,p++;else throw new _("illegal character encountered: "+s.substring(C));if(p>y){if(v===-1)v=p-y;else if(p-y!==v)throw new _("row lengths do not match");T++}const O=new we(v,T);for(let U=0;U<p;U++)f[U]&&O.set(Math.floor(U%v),Math.floor(U/v));return O}get(s,l){const u=l*this.rowSize+Math.floor(s/32);return(this.bits[u]>>>(s&31)&1)!==0}set(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]|=1<<(s&31)&4294967295}unset(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]&=~(1<<(s&31)&4294967295)}flip(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new _("input matrix dimensions do not match");const l=new Y(Math.floor(this.width/32)+1),u=this.rowSize,f=this.bits;for(let p=0,y=this.height;p<y;p++){const v=p*u,T=s.getRow(p,l).getBitArray();for(let C=0;C<u;C++)f[v+C]^=T[C]}}clear(){const s=this.bits,l=s.length;for(let u=0;u<l;u++)s[u]=0}setRegion(s,l,u,f){if(l<0||s<0)throw new _("Left and top must be nonnegative");if(f<1||u<1)throw new _("Height and width must be at least 1");const p=s+u,y=l+f;if(y>this.height||p>this.width)throw new _("The region must fit inside the matrix");const v=this.rowSize,T=this.bits;for(let C=l;C<y;C++){const O=C*v;for(let U=s;U<p;U++)T[O+Math.floor(U/32)]|=1<<(U&31)&4294967295}}getRow(s,l){l==null||l.getSize()<this.width?l=new Y(this.width):l.clear();const u=this.rowSize,f=this.bits,p=s*u;for(let y=0;y<u;y++)l.setBulk(y*32,f[p+y]);return l}setRow(s,l){D.arraycopy(l.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),l=this.getHeight();let u=new Y(s),f=new Y(s);for(let p=0,y=Math.floor((l+1)/2);p<y;p++)u=this.getRow(p,u),f=this.getRow(l-1-p,f),u.reverse(),f.reverse(),this.setRow(p,f),this.setRow(l-1-p,u)}getEnclosingRectangle(){const s=this.width,l=this.height,u=this.rowSize,f=this.bits;let p=s,y=l,v=-1,T=-1;for(let C=0;C<l;C++)for(let O=0;O<u;O++){const U=f[C*u+O];if(U!==0){if(C<y&&(y=C),C>T&&(T=C),O*32<p){let q=0;for(;(U<<31-q&4294967295)===0;)q++;O*32+q<p&&(p=O*32+q)}if(O*32+31>v){let q=31;for(;!(U>>>q);)q--;O*32+q>v&&(v=O*32+q)}}}return v<p||T<y?null:Int32Array.from([p,y,v-p+1,T-y+1])}getTopLeftOnBit(){const s=this.rowSize,l=this.bits;let u=0;for(;u<l.length&&l[u]===0;)u++;if(u===l.length)return null;const f=u/s;let p=u%s*32;const y=l[u];let v=0;for(;(y<<31-v&4294967295)===0;)v++;return p+=v,Int32Array.from([p,f])}getBottomRightOnBit(){const s=this.rowSize,l=this.bits;let u=l.length-1;for(;u>=0&&l[u]===0;)u--;if(u<0)return null;const f=Math.floor(u/s);let p=Math.floor(u%s)*32;const y=l[u];let v=31;for(;!(y>>>v);)v--;return p+=v,Int32Array.from([p,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof we))return!1;const l=s;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&z.equals(this.bits,l.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+z.hashCode(this.bits),s}toString(s="X ",l="  ",u=`
`){return this.buildToString(s,l,u)}buildToString(s,l,u){let f=new K;for(let p=0,y=this.height;p<y;p++){for(let v=0,T=this.width;v<T;v++)f.append(this.get(v,p)?s:l);f.append(u)}return f.toString()}clone(){return new we(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends g{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class Te extends M{constructor(s){super(s),this.luminances=Te.EMPTY,this.buckets=new Int32Array(Te.LUMINANCE_BUCKETS)}getBlackRow(s,l){const u=this.getLuminanceSource(),f=u.getWidth();l==null||l.getSize()<f?l=new Y(f):l.clear(),this.initArrays(f);const p=u.getRow(s,this.luminances),y=this.buckets;for(let T=0;T<f;T++)y[(p[T]&255)>>Te.LUMINANCE_SHIFT]++;const v=Te.estimateBlackPoint(y);if(f<3)for(let T=0;T<f;T++)(p[T]&255)<v&&l.set(T);else{let T=p[0]&255,C=p[1]&255;for(let O=1;O<f-1;O++){const U=p[O+1]&255;(C*4-T-U)/2<v&&l.set(O),T=C,C=U}}return l}getBlackMatrix(){const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight(),f=new we(l,u);this.initArrays(l);const p=this.buckets;for(let T=1;T<5;T++){const C=Math.floor(u*T/5),O=s.getRow(C,this.luminances),U=Math.floor(l*4/5);for(let q=Math.floor(l/5);q<U;q++){const J=O[q]&255;p[J>>Te.LUMINANCE_SHIFT]++}}const y=Te.estimateBlackPoint(p),v=s.getMatrix();for(let T=0;T<u;T++){const C=T*l;for(let O=0;O<l;O++)(v[C+O]&255)<y&&f.set(O,T)}return f}createBinarizer(s){return new Te(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const l=this.buckets;for(let u=0;u<Te.LUMINANCE_BUCKETS;u++)l[u]=0}static estimateBlackPoint(s){const l=s.length;let u=0,f=0,p=0;for(let O=0;O<l;O++)s[O]>p&&(f=O,p=s[O]),s[O]>u&&(u=s[O]);let y=0,v=0;for(let O=0;O<l;O++){const U=O-f,q=s[O]*U*U;q>v&&(y=O,v=q)}if(f>y){const O=f;f=y,y=O}if(y-f<=l/16)throw new se;let T=y-1,C=-1;for(let O=y-1;O>f;O--){const U=O-f,q=U*U*(y-O)*(u-s[O]);q>C&&(T=O,C=q)}return T<<Te.LUMINANCE_SHIFT}}Te.LUMINANCE_BITS=5,Te.LUMINANCE_SHIFT=8-Te.LUMINANCE_BITS,Te.LUMINANCE_BUCKETS=1<<Te.LUMINANCE_BITS,Te.EMPTY=Uint8ClampedArray.from([0]);class xe extends Te{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight();if(l>=xe.MINIMUM_DIMENSION&&u>=xe.MINIMUM_DIMENSION){const f=s.getMatrix();let p=l>>xe.BLOCK_SIZE_POWER;(l&xe.BLOCK_SIZE_MASK)!==0&&p++;let y=u>>xe.BLOCK_SIZE_POWER;(u&xe.BLOCK_SIZE_MASK)!==0&&y++;const v=xe.calculateBlackPoints(f,p,y,l,u),T=new we(l,u);xe.calculateThresholdForBlock(f,p,y,l,u,v,T),this.matrix=T}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new xe(s)}static calculateThresholdForBlock(s,l,u,f,p,y,v){const T=p-xe.BLOCK_SIZE,C=f-xe.BLOCK_SIZE;for(let O=0;O<u;O++){let U=O<<xe.BLOCK_SIZE_POWER;U>T&&(U=T);const q=xe.cap(O,2,u-3);for(let J=0;J<l;J++){let le=J<<xe.BLOCK_SIZE_POWER;le>C&&(le=C);const ue=xe.cap(J,2,l-3);let fe=0;for(let Fe=-2;Fe<=2;Fe++){const je=y[q+Fe];fe+=je[ue-2]+je[ue-1]+je[ue]+je[ue+1]+je[ue+2]}const Ee=fe/25;xe.thresholdBlock(s,le,U,Ee,f,v)}}}static cap(s,l,u){return s<l?l:s>u?u:s}static thresholdBlock(s,l,u,f,p,y){for(let v=0,T=u*p+l;v<xe.BLOCK_SIZE;v++,T+=p)for(let C=0;C<xe.BLOCK_SIZE;C++)(s[T+C]&255)<=f&&y.set(l+C,u+v)}static calculateBlackPoints(s,l,u,f,p){const y=p-xe.BLOCK_SIZE,v=f-xe.BLOCK_SIZE,T=new Array(u);for(let C=0;C<u;C++){T[C]=new Int32Array(l);let O=C<<xe.BLOCK_SIZE_POWER;O>y&&(O=y);for(let U=0;U<l;U++){let q=U<<xe.BLOCK_SIZE_POWER;q>v&&(q=v);let J=0,le=255,ue=0;for(let Ee=0,Fe=O*f+q;Ee<xe.BLOCK_SIZE;Ee++,Fe+=f){for(let je=0;je<xe.BLOCK_SIZE;je++){const Oe=s[Fe+je]&255;J+=Oe,Oe<le&&(le=Oe),Oe>ue&&(ue=Oe)}if(ue-le>xe.MIN_DYNAMIC_RANGE)for(Ee++,Fe+=f;Ee<xe.BLOCK_SIZE;Ee++,Fe+=f)for(let je=0;je<xe.BLOCK_SIZE;je++)J+=s[Fe+je]&255}let fe=J>>xe.BLOCK_SIZE_POWER*2;if(ue-le<=xe.MIN_DYNAMIC_RANGE&&(fe=le/2,C>0&&U>0)){const Ee=(T[C-1][U]+2*T[C][U-1]+T[C-1][U-1])/4;le<Ee&&(fe=Ee)}T[C][U]=fe}}return T}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class oe{constructor(s,l){this.width=s,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,l,u,f){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let l=new K;for(let u=0;u<this.height;u++){const f=this.getRow(u,s);for(let p=0;p<this.width;p++){const y=f[p]&255;let v;y<64?v="#":y<128?v="+":y<192?v=".":v=" ",l.append(v)}l.append(`
`)}return l.toString()}}class Ae extends oe{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,l){const u=this.delegate.getRow(s,l),f=this.getWidth();for(let p=0;p<f;p++)u[p]=255-(u[p]&255);return u}getMatrix(){const s=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(l);for(let f=0;f<l;f++)u[f]=255-(s[f]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(s,l,u,f){return new Ae(this.delegate.crop(s,l,u,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ae(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ae(this.delegate.rotateCounterClockwise45())}}class Ne extends oe{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ne.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const l=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ne.toGrayscaleBuffer(l.data,s.width,s.height)}static toGrayscaleBuffer(s,l,u){const f=new Uint8ClampedArray(l*u);for(let p=0,y=0,v=s.length;p<v;p+=4,y++){let T;if(s[p+3]===0)T=255;else{const O=s[p],U=s[p+1],q=s[p+2];T=306*O+601*U+117*q+512>>10}f[y]=T}return f}getRow(s,l){if(s<0||s>=this.getHeight())throw new _("Requested row is outside the image: "+s);const u=this.getWidth(),f=s*u;return l===null?l=this.buffer.slice(f,f+u):(l.length<u&&(l=new Uint8ClampedArray(u)),l.set(this.buffer.slice(f,f+u))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,l,u,f){return super.crop(s,l,u,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const l=this.getTempCanvasElement(),u=l.getContext("2d"),f=s*Ne.DEGREE_TO_RADIANS,p=this.canvas.width,y=this.canvas.height,v=Math.ceil(Math.abs(Math.cos(f))*p+Math.abs(Math.sin(f))*y),T=Math.ceil(Math.abs(Math.sin(f))*p+Math.abs(Math.cos(f))*y);return l.width=v,l.height=T,u.translate(v/2,T/2),u.rotate(f),u.drawImage(this.canvas,p/-2,y/-2),this.buffer=Ne.makeBufferFromCanvasImageData(l),this}invert(){return new Ae(this)}}Ne.DEGREE_TO_RADIANS=Math.PI/180;class ae{constructor(s,l,u){this.deviceId=s,this.label=l,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||um||self||window||void 0)&&(globalThis||um||self||window||void 0).__awaiter||function(j,s,l,u){function f(p){return p instanceof l?p:new l(function(y){y(p)})}return new(l||(l=Promise))(function(p,y){function v(O){try{C(u.next(O))}catch(U){y(U)}}function T(O){try{C(u.throw(O))}catch(U){y(U)}}function C(O){O.done?p(O.value):f(O.value).then(v,T)}C((u=u.apply(j,s||[])).next())})};class Se{constructor(s,l=500,u){this.reader=s,this.timeBetweenScansMillis=l,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const u of s){const f=u.kind==="video"?"videoinput":u.kind;if(f!=="videoinput")continue;const p=u.deviceId||u.id,y=u.label||`Video device ${l.length+1}`,v=u.groupId,T={deviceId:p,label:y,kind:f,groupId:v};l.push(T)}return l})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new ae(l.deviceId,l.label))})}findDeviceById(s){return he(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(u=>u.deviceId===s):null})}decodeFromInputVideoDevice(s,l){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,l)})}decodeOnceFromVideoDevice(s,l){return he(this,void 0,void 0,function*(){this.reset();let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeOnceFromConstraints(f,l)})}decodeOnceFromConstraints(s,l){return he(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(u,l)})}decodeOnceFromStream(s,l){return he(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,l);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(s,l,u){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,l,u)})}decodeFromVideoDevice(s,l,u){return he(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const p={video:f};return yield this.decodeFromConstraints(p,l,u)})}decodeFromConstraints(s,l,u){return he(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,l,u)})}decodeFromStream(s,l,u){return he(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,l);return yield this.decodeContinuously(f,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,l){return he(this,void 0,void 0,function*(){const u=this.prepareVideoElement(l);return this.addVideoSource(u,s),this.videoElement=u,this.stream=s,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(s){return new Promise((l,u)=>this.playVideoOnLoad(s,()=>l()))}playVideoOnLoad(s,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",l),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,l){const u=document.getElementById(s);if(!u)throw new w(`element with id '${s}' not found`);if(u.nodeName.toLowerCase()!==l.toLowerCase())throw new w(`element with id '${s}' must be an ${l} element`);return u}decodeFromImage(s,l){if(!s&&!l)throw new w("either imageElement with a src set or an url must be provided");return l&&!s?this.decodeFromImageUrl(l):this.decodeFromImageElement(s)}decodeFromVideo(s,l){if(!s&&!l)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,l,u){if(s===void 0&&l===void 0)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrlContinuously(l,u):this.decodeFromVideoElementContinuously(s,u)}decodeFromImageElement(s){if(!s)throw new w("An image element must be provided.");this.reset();const l=this.prepareImageElement(s);this.imageElement=l;let u;return this.isImageLoaded(l)?u=this.decodeOnce(l,!1,!0):u=this._decodeOnLoadImage(l),u}decodeFromVideoElement(s){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(s,l){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(u,l)}_decodeFromVideoElementSetup(s){if(!s)throw new w("A video element must be provided.");this.reset();const l=this.prepareVideoElement(s);return this.videoElement=l,l}decodeFromImageUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const u=this._decodeOnLoadImage(l);return l.src=s,u}decodeFromVideoUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElement(l);return l.src=s,u}decodeFromVideoUrlContinuously(s,l){if(!s)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(u,l);return u.src=s,f}_decodeOnLoadImage(s){return new Promise((l,u)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(l,u),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,l){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,l)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let l;return typeof s>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(l=s),l}prepareVideoElement(s){let l;return!s&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(l=s),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(s,l=!0,u=!0){this._stopAsyncDecode=!1;const f=(p,y)=>{if(this._stopAsyncDecode){y(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const v=this.decode(s);p(v)}catch(v){const T=l&&v instanceof se,O=(v instanceof R||v instanceof V)&&u;if(T||O)return setTimeout(f,this._timeBetweenDecodingAttempts,p,y);y(v)}};return new Promise((p,y)=>f(p,y))}decodeContinuously(s,l){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);l(f,null),setTimeout(u,this.timeBetweenScansMillis)}catch(f){l(null,f);const p=f instanceof R||f instanceof V,y=f instanceof se;(p||y)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(s){const l=this.createBinaryBitmap(s);return this.decodeBitmap(l)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,l,u){l||(l={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(s,l,u=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const l=this.getCaptureCanvas(s),u=new Ne(l),f=new xe(u);return new A(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const l=this.createCaptureCanvas(s);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let u,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(u=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(u=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),l.style.width=u+"px",l.style.height=f+"px",l.width=u,l.height=f,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,l){try{s.srcObject=l}catch{s.src=URL.createObjectURL(l)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Le{constructor(s,l,u=l==null?0:8*l.length,f,p,y=D.currentTimeMillis()){this.text=s,this.rawBytes=l,this.numBits=u,this.resultPoints=f,this.format=p,this.timestamp=y,this.text=s,this.rawBytes=l,u==null?this.numBits=l==null?0:8*l.length:this.numBits=u,this.resultPoints=f,this.format=p,this.resultMetadata=null,y==null?this.timestamp=D.currentTimeMillis():this.timestamp=y}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,l)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const l=this.resultPoints;if(l===null)this.resultPoints=s;else if(s!==null&&s.length>0){const u=new Array(l.length+s.length);D.arraycopy(l,0,u,0,l.length),D.arraycopy(s,0,u,l.length,s.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var it;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(it||(it={}));var Re=it,Pe;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pe||(Pe={}));var Ge=Pe;class at{constructor(s,l,u,f,p=-1,y=-1){this.rawBytes=s,this.text=l,this.byteSegments=u,this.ecLevel=f,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=y,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class st{exp(s){return this.expTable[s]}log(s){if(s===0)throw new _;return this.logTable[s]}static addOrSubtract(s,l){return s^l}}class ct{constructor(s,l){if(l.length===0)throw new _;this.field=s;const u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const l=this.coefficients;let u;if(s===1){u=0;for(let y=0,v=l.length;y!==v;y++){const T=l[y];u=st.addOrSubtract(u,T)}return u}u=l[0];const f=l.length,p=this.field;for(let y=1;y<f;y++)u=st.addOrSubtract(p.multiply(s,u),l[y]);return u}addOrSubtract(s){if(!this.field.equals(s.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){const y=l;l=u,u=y}let f=new Int32Array(u.length);const p=u.length-l.length;D.arraycopy(u,0,f,0,p);for(let y=p;y<u.length;y++)f[y]=st.addOrSubtract(l[y-p],u[y]);return new ct(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const l=this.coefficients,u=l.length,f=s.coefficients,p=f.length,y=new Int32Array(u+p-1),v=this.field;for(let T=0;T<u;T++){const C=l[T];for(let O=0;O<p;O++)y[T+O]=st.addOrSubtract(y[T+O],v.multiply(C,f[O]))}return new ct(v,y)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const l=this.coefficients.length,u=this.field,f=new Int32Array(l),p=this.coefficients;for(let y=0;y<l;y++)f[y]=u.multiply(p[y],s);return new ct(u,f)}multiplyByMonomial(s,l){if(s<0)throw new _;if(l===0)return this.field.getZero();const u=this.coefficients,f=u.length,p=new Int32Array(f+s),y=this.field;for(let v=0;v<f;v++)p[v]=y.multiply(u[v],l);return new ct(y,p)}divide(s){if(!this.field.equals(s.field))throw new _("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new _("Divide by 0");const l=this.field;let u=l.getZero(),f=this;const p=s.getCoefficient(s.getDegree()),y=l.inverse(p);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const v=f.getDegree()-s.getDegree(),T=l.multiply(f.getCoefficient(f.getDegree()),y),C=s.multiplyByMonomial(v,T),O=l.buildMonomial(v,T);u=u.addOrSubtract(O),f=f.addOrSubtract(C)}return[u,f]}toString(){let s="";for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);if(u!==0){if(u<0?(s+=" - ",u=-u):s.length>0&&(s+=" + "),l===0||u!==1){const f=this.field.log(u);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}l!==0&&(l===1?s+="x":(s+="x^",s+=l))}}return s}}class bt extends g{}bt.kind="ArithmeticException";class ht extends st{constructor(s,l,u){super(),this.primitive=s,this.size=l,this.generatorBase=u;const f=new Int32Array(l);let p=1;for(let v=0;v<l;v++)f[v]=p,p*=2,p>=l&&(p^=s,p&=l-1);this.expTable=f;const y=new Int32Array(l);for(let v=0;v<l-1;v++)y[f[v]]=v;this.logTable=y,this.zero=new ct(this,Int32Array.from([0])),this.one=new ct(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new _;if(l===0)return this.zero;const u=new Int32Array(s+1);return u[0]=l,new ct(this,u)}inverse(s){if(s===0)throw new bt;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+H.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class gn extends g{}gn.kind="ReedSolomonException";class Fn extends g{}Fn.kind="IllegalStateException";class Dr{constructor(s){this.field=s}decode(s,l){const u=this.field,f=new ct(u,s),p=new Int32Array(l);let y=!0;for(let J=0;J<l;J++){const le=f.evaluateAt(u.exp(J+u.getGeneratorBase()));p[p.length-1-J]=le,le!==0&&(y=!1)}if(y)return;const v=new ct(u,p),T=this.runEuclideanAlgorithm(u.buildMonomial(l,1),v,l),C=T[0],O=T[1],U=this.findErrorLocations(C),q=this.findErrorMagnitudes(O,U);for(let J=0;J<U.length;J++){const le=s.length-1-u.log(U[J]);if(le<0)throw new gn("Bad error location");s[le]=ht.addOrSubtract(s[le],q[J])}}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){const J=s;s=l,l=J}const f=this.field;let p=s,y=l,v=f.getZero(),T=f.getOne();for(;y.getDegree()>=(u/2|0);){let J=p,le=v;if(p=y,v=T,p.isZero())throw new gn("r_{i-1} was zero");y=J;let ue=f.getZero();const fe=p.getCoefficient(p.getDegree()),Ee=f.inverse(fe);for(;y.getDegree()>=p.getDegree()&&!y.isZero();){const Fe=y.getDegree()-p.getDegree(),je=f.multiply(y.getCoefficient(y.getDegree()),Ee);ue=ue.addOrSubtract(f.buildMonomial(Fe,je)),y=y.addOrSubtract(p.multiplyByMonomial(Fe,je))}if(T=ue.multiply(v).addOrSubtract(le),y.getDegree()>=p.getDegree())throw new Fn("Division algorithm failed to reduce polynomial?")}const C=T.getCoefficient(0);if(C===0)throw new gn("sigmaTilde(0) was zero");const O=f.inverse(C),U=T.multiplyScalar(O),q=y.multiplyScalar(O);return[U,q]}findErrorLocations(s){const l=s.getDegree();if(l===1)return Int32Array.from([s.getCoefficient(1)]);const u=new Int32Array(l);let f=0;const p=this.field;for(let y=1;y<p.getSize()&&f<l;y++)s.evaluateAt(y)===0&&(u[f]=p.inverse(y),f++);if(f!==l)throw new gn("Error locator degree does not match number of roots");return u}findErrorMagnitudes(s,l){const u=l.length,f=new Int32Array(u),p=this.field;for(let y=0;y<u;y++){const v=p.inverse(l[y]);let T=1;for(let C=0;C<u;C++)if(y!==C){const O=p.multiply(l[C],v),U=(O&1)===0?O|1:O&-2;T=p.multiply(T,U)}f[y]=p.multiply(s.evaluateAt(v),p.inverse(T)),p.getGeneratorBase()!==0&&(f[y]=p.multiply(f[y],v))}return f}}var Qt;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})(Qt||(Qt={}));class zt{decode(s){this.ddata=s;let l=s.getBits(),u=this.extractBits(l),f=this.correctBits(u),p=zt.convertBoolArrayToByteArray(f),y=zt.getEncodedData(f),v=new at(p,y,null,null);return v.setNumBits(f.length),v}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let l=s.length,u=Qt.UPPER,f=Qt.UPPER,p="",y=0;for(;y<l;)if(f===Qt.BINARY){if(l-y<5)break;let v=zt.readCode(s,y,5);if(y+=5,v===0){if(l-y<11)break;v=zt.readCode(s,y,11)+31,y+=11}for(let T=0;T<v;T++){if(l-y<8){y=l;break}const C=zt.readCode(s,y,8);p+=ee.castAsNonUtf8Char(C),y+=8}f=u}else{let v=f===Qt.DIGIT?4:5;if(l-y<v)break;let T=zt.readCode(s,y,v);y+=v;let C=zt.getCharacter(f,T);C.startsWith("CTRL_")?(u=f,f=zt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(u=f)):(p+=C,f=u)}return p}static getTable(s){switch(s){case"L":return Qt.LOWER;case"P":return Qt.PUNCT;case"M":return Qt.MIXED;case"D":return Qt.DIGIT;case"B":return Qt.BINARY;case"U":default:return Qt.UPPER}}static getCharacter(s,l){switch(s){case Qt.UPPER:return zt.UPPER_TABLE[l];case Qt.LOWER:return zt.LOWER_TABLE[l];case Qt.MIXED:return zt.MIXED_TABLE[l];case Qt.PUNCT:return zt.PUNCT_TABLE[l];case Qt.DIGIT:return zt.DIGIT_TABLE[l];default:throw new Fn("Bad table")}}correctBits(s){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=ht.AZTEC_DATA_10):(u=12,l=ht.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),p=s.length/u;if(p<f)throw new V;let y=s.length%u,v=new Int32Array(p);for(let q=0;q<p;q++,y+=u)v[q]=zt.readCode(s,y,u);try{new Dr(l).decode(v,p-f)}catch(q){throw new V(q)}let T=(1<<u)-1,C=0;for(let q=0;q<f;q++){let J=v[q];if(J===0||J===T)throw new V;(J===1||J===T-1)&&C++}let O=new Array(f*u-C),U=0;for(let q=0;q<f;q++){let J=v[q];if(J===1||J===T-1)O.fill(J>1,U,U+u-1),U+=u-1;else for(let le=u-1;le>=0;--le)O[U++]=(J&1<<le)!==0}return O}extractBits(s){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),f=(l?11:14)+u*4,p=new Int32Array(f),y=new Array(this.totalBitsInLayer(u,l));if(l)for(let v=0;v<p.length;v++)p[v]=v;else{let v=f+1+2*H.truncDivision(H.truncDivision(f,2)-1,15),T=f/2,C=H.truncDivision(v,2);for(let O=0;O<T;O++){let U=O+H.truncDivision(O,15);p[T-O-1]=C-U-1,p[T+O]=C+U+1}}for(let v=0,T=0;v<u;v++){let C=(u-v)*4+(l?9:12),O=v*2,U=f-1-O;for(let q=0;q<C;q++){let J=q*2;for(let le=0;le<2;le++)y[T+J+le]=s.get(p[O+le],p[O+q]),y[T+2*C+J+le]=s.get(p[O+q],p[U-le]),y[T+4*C+J+le]=s.get(p[U-le],p[U-q]),y[T+6*C+J+le]=s.get(p[U-q],p[O+le])}T+=C*8}return y}static readCode(s,l,u){let f=0;for(let p=l;p<l+u;p++)f<<=1,s[p]&&(f|=1);return f}static readByte(s,l){let u=s.length-l;return u>=8?zt.readCode(s,l,8):zt.readCode(s,l,u)<<8-u}static convertBoolArrayToByteArray(s){let l=new Uint8Array((s.length+7)/8);for(let u=0;u<l.length;u++)l[u]=zt.readByte(s,8*u);return l}totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,l,u,f){const p=s-u,y=l-f;return Math.sqrt(p*p+y*y)}static sum(s){let l=0;for(let u=0,f=s.length;u!==f;u++){const p=s[u];l+=p}return l}}class xi{static floatToIntBits(s){return s}}xi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Xe{constructor(s,l){this.x=s,this.y=l}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Xe){const l=s;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*xi.floatToIntBits(this.x)+xi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const l=this.distance(s[0],s[1]),u=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let p,y,v;if(u>=l&&u>=f?(y=s[0],p=s[1],v=s[2]):f>=u&&f>=l?(y=s[1],p=s[0],v=s[2]):(y=s[2],p=s[0],v=s[1]),this.crossProductZ(p,y,v)<0){const T=p;p=v,v=T}s[0]=p,s[1]=y,s[2]=v}static distance(s,l){return pt.distance(s.x,s.y,l.x,l.y)}static crossProductZ(s,l,u){const f=l.x,p=l.y;return(u.x-f)*(s.y-p)-(u.y-p)*(s.x-f)}}class Xn{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class wi extends Xn{constructor(s,l,u,f,p){super(s,l),this.compact=u,this.nbDatablocks=f,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zr{constructor(s,l,u,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),l==null&&(l=Zr.INIT_SIZE),u==null&&(u=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const p=l/2|0;if(this.leftInit=u-p,this.rightInit=u+p,this.upInit=f-p,this.downInit=f+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let s=this.leftInit,l=this.rightInit,u=this.upInit,f=this.downInit,p=!1,y=!0,v=!1,T=!1,C=!1,O=!1,U=!1;const q=this.width,J=this.height;for(;y;){y=!1;let le=!0;for(;(le||!T)&&l<q;)le=this.containsBlackPoint(u,f,l,!1),le?(l++,y=!0,T=!0):T||l++;if(l>=q){p=!0;break}let ue=!0;for(;(ue||!C)&&f<J;)ue=this.containsBlackPoint(s,l,f,!0),ue?(f++,y=!0,C=!0):C||f++;if(f>=J){p=!0;break}let fe=!0;for(;(fe||!O)&&s>=0;)fe=this.containsBlackPoint(u,f,s,!1),fe?(s--,y=!0,O=!0):O||s--;if(s<0){p=!0;break}let Ee=!0;for(;(Ee||!U)&&u>=0;)Ee=this.containsBlackPoint(s,l,u,!0),Ee?(u--,y=!0,U=!0):U||u--;if(u<0){p=!0;break}y&&(v=!0)}if(!p&&v){const le=l-s;let ue=null;for(let je=1;ue===null&&je<le;je++)ue=this.getBlackPointOnSegment(s,f-je,s+je,f);if(ue==null)throw new se;let fe=null;for(let je=1;fe===null&&je<le;je++)fe=this.getBlackPointOnSegment(s,u+je,s+je,u);if(fe==null)throw new se;let Ee=null;for(let je=1;Ee===null&&je<le;je++)Ee=this.getBlackPointOnSegment(l,u+je,l-je,u);if(Ee==null)throw new se;let Fe=null;for(let je=1;Fe===null&&je<le;je++)Fe=this.getBlackPointOnSegment(l,f-je,l-je,f);if(Fe==null)throw new se;return this.centerEdges(Fe,ue,Ee,fe)}else throw new se}getBlackPointOnSegment(s,l,u,f){const p=pt.round(pt.distance(s,l,u,f)),y=(u-s)/p,v=(f-l)/p,T=this.image;for(let C=0;C<p;C++){const O=pt.round(s+C*y),U=pt.round(l+C*v);if(T.get(O,U))return new Xe(O,U)}return null}centerEdges(s,l,u,f){const p=s.getX(),y=s.getY(),v=l.getX(),T=l.getY(),C=u.getX(),O=u.getY(),U=f.getX(),q=f.getY(),J=Zr.CORR;return p<this.width/2?[new Xe(U-J,q+J),new Xe(v+J,T+J),new Xe(C-J,O-J),new Xe(p+J,y-J)]:[new Xe(U+J,q+J),new Xe(v+J,T-J),new Xe(C-J,O+J),new Xe(p-J,y-J)]}containsBlackPoint(s,l,u,f){const p=this.image;if(f){for(let y=s;y<=l;y++)if(p.get(y,u))return!0}else for(let y=s;y<=l;y++)if(p.get(u,y))return!0;return!1}}Zr.INIT_SIZE=10,Zr.CORR=1;class io{static checkAndNudgePoints(s,l){const u=s.getWidth(),f=s.getHeight();let p=!0;for(let y=0;y<l.length&&p;y+=2){const v=Math.floor(l[y]),T=Math.floor(l[y+1]);if(v<-1||v>u||T<-1||T>f)throw new se;p=!1,v===-1?(l[y]=0,p=!0):v===u&&(l[y]=u-1,p=!0),T===-1?(l[y+1]=0,p=!0):T===f&&(l[y+1]=f-1,p=!0)}p=!0;for(let y=l.length-2;y>=0&&p;y-=2){const v=Math.floor(l[y]),T=Math.floor(l[y+1]);if(v<-1||v>u||T<-1||T>f)throw new se;p=!1,v===-1?(l[y]=0,p=!0):v===u&&(l[y]=u-1,p=!0),T===-1?(l[y+1]=0,p=!0):T===f&&(l[y+1]=f-1,p=!0)}}}class Wt{constructor(s,l,u,f,p,y,v,T,C){this.a11=s,this.a21=l,this.a31=u,this.a12=f,this.a22=p,this.a32=y,this.a13=v,this.a23=T,this.a33=C}static quadrilateralToQuadrilateral(s,l,u,f,p,y,v,T,C,O,U,q,J,le,ue,fe){const Ee=Wt.quadrilateralToSquare(s,l,u,f,p,y,v,T);return Wt.squareToQuadrilateral(C,O,U,q,J,le,ue,fe).times(Ee)}transformPoints(s){const l=s.length,u=this.a11,f=this.a12,p=this.a13,y=this.a21,v=this.a22,T=this.a23,C=this.a31,O=this.a32,U=this.a33;for(let q=0;q<l;q+=2){const J=s[q],le=s[q+1],ue=p*J+T*le+U;s[q]=(u*J+y*le+C)/ue,s[q+1]=(f*J+v*le+O)/ue}}transformPointsWithValues(s,l){const u=this.a11,f=this.a12,p=this.a13,y=this.a21,v=this.a22,T=this.a23,C=this.a31,O=this.a32,U=this.a33,q=s.length;for(let J=0;J<q;J++){const le=s[J],ue=l[J],fe=p*le+T*ue+U;s[J]=(u*le+y*ue+C)/fe,l[J]=(f*le+v*ue+O)/fe}}static squareToQuadrilateral(s,l,u,f,p,y,v,T){const C=s-u+p-v,O=l-f+y-T;if(C===0&&O===0)return new Wt(u-s,p-u,s,f-l,y-f,l,0,0,1);{const U=u-p,q=v-p,J=f-y,le=T-y,ue=U*le-q*J,fe=(C*le-q*O)/ue,Ee=(U*O-C*J)/ue;return new Wt(u-s+fe*u,v-s+Ee*v,s,f-l+fe*f,T-l+Ee*T,l,fe,Ee,1)}}static quadrilateralToSquare(s,l,u,f,p,y,v,T){return Wt.squareToQuadrilateral(s,l,u,f,p,y,v,T).buildAdjoint()}buildAdjoint(){return new Wt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Wt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Yn extends io{sampleGrid(s,l,u,f,p,y,v,T,C,O,U,q,J,le,ue,fe,Ee,Fe,je){const Oe=Wt.quadrilateralToQuadrilateral(f,p,y,v,T,C,O,U,q,J,le,ue,fe,Ee,Fe,je);return this.sampleGridWithTransform(s,l,u,Oe)}sampleGridWithTransform(s,l,u,f){if(l<=0||u<=0)throw new se;const p=new we(l,u),y=new Float32Array(2*l);for(let v=0;v<u;v++){const T=y.length,C=v+.5;for(let O=0;O<T;O+=2)y[O]=O/2+.5,y[O+1]=C;f.transformPoints(y),io.checkAndNudgePoints(s,y);try{for(let O=0;O<T;O+=2)s.get(Math.floor(y[O]),Math.floor(y[O+1]))&&p.set(O/2,v)}catch{throw new se}}return p}}class Er{static setGridSampler(s){Er.gridSampler=s}static getInstance(){return Er.gridSampler}}Er.gridSampler=new Yn;class Bn{constructor(s,l){this.x=s,this.y=l}toResultPoint(){return new Xe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Jr{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let l=this.getMatrixCenter(),u=this.getBullsEyeCorners(l);if(s){let y=u[0];u[0]=u[2],u[2]=y}this.extractParameters(u);let f=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),p=this.getMatrixCornerPoints(u);return new wi(f,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new se;let l=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(s[0],s[1],l),this.sampleLine(s[1],s[2],l),this.sampleLine(s[2],s[3],l),this.sampleLine(s[3],s[0],l)]);this.shift=this.getRotation(u,l);let f=0;for(let y=0;y<4;y++){let v=u[(this.shift+y)%4];this.compact?(f<<=7,f+=v>>1&127):(f<<=10,f+=(v>>2&992)+(v>>1&31))}let p=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(s,l){let u=0;s.forEach((f,p,y)=>{let v=(f>>l-2<<1)+(f&1);u=(u<<3)+v}),u=((u&1)<<11)+(u>>1);for(let f=0;f<4;f++)if(H.bitCount(u^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new se}getCorrectedParameterData(s,l){let u,f;l?(u=7,f=2):(u=10,f=4);let p=u-f,y=new Int32Array(u);for(let T=u-1;T>=0;--T)y[T]=s&15,s>>=4;try{new Dr(ht.AZTEC_PARAM).decode(y,p)}catch{throw new se}let v=0;for(let T=0;T<f;T++)v=(v<<4)+y[T];return v}getBullsEyeCorners(s){let l=s,u=s,f=s,p=s,y=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let U=this.getFirstDifferent(l,y,1,-1),q=this.getFirstDifferent(u,y,1,1),J=this.getFirstDifferent(f,y,-1,1),le=this.getFirstDifferent(p,y,-1,-1);if(this.nbCenterLayers>2){let ue=this.distancePoint(le,U)*this.nbCenterLayers/(this.distancePoint(p,l)*(this.nbCenterLayers+2));if(ue<.75||ue>1.25||!this.isWhiteOrBlackRectangle(U,q,J,le))break}l=U,u=q,f=J,p=le,y=!y}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let v=new Xe(l.getX()+.5,l.getY()-.5),T=new Xe(u.getX()+.5,u.getY()+.5),C=new Xe(f.getX()-.5,f.getY()+.5),O=new Xe(p.getX()-.5,p.getY()-.5);return this.expandSquare([v,T,C,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,l,u,f;try{let v=new Zr(this.image).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{let T=this.image.getWidth()/2,C=this.image.getHeight()/2;s=this.getFirstDifferent(new Bn(T+7,C-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Bn(T+7,C+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(T-7,C+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Bn(T-7,C-7),!1,-1,-1).toResultPoint()}let p=pt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=pt.round((s.getY()+f.getY()+l.getY()+u.getY())/4);try{let v=new Zr(this.image,15,p,y).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{s=this.getFirstDifferent(new Bn(p+7,y-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new Bn(p+7,y+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Bn(p-7,y+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new Bn(p-7,y-7),!1,-1,-1).toResultPoint()}return p=pt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=pt.round((s.getY()+f.getY()+l.getY()+u.getY())/4),new Bn(p,y)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,l,u,f,p){let y=Er.getInstance(),v=this.getDimension(),T=v/2-this.nbCenterLayers,C=v/2+this.nbCenterLayers;return y.sampleGrid(s,v,v,T,T,C,T,C,C,T,C,l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY(),p.getX(),p.getY())}sampleLine(s,l,u){let f=0,p=this.distanceResultPoint(s,l),y=p/u,v=s.getX(),T=s.getY(),C=y*(l.getX()-s.getX())/p,O=y*(l.getY()-s.getY())/p;for(let U=0;U<u;U++)this.image.get(pt.round(v+U*C),pt.round(T+U*O))&&(f|=1<<u-U-1);return f}isWhiteOrBlackRectangle(s,l,u,f){let p=3;s=new Bn(s.getX()-p,s.getY()+p),l=new Bn(l.getX()-p,l.getY()-p),u=new Bn(u.getX()+p,u.getY()-p),f=new Bn(f.getX()+p,f.getY()+p);let y=this.getColor(f,s);if(y===0)return!1;let v=this.getColor(s,l);return v!==y||(v=this.getColor(l,u),v!==y)?!1:(v=this.getColor(u,f),v===y)}getColor(s,l){let u=this.distancePoint(s,l),f=(l.getX()-s.getX())/u,p=(l.getY()-s.getY())/u,y=0,v=s.getX(),T=s.getY(),C=this.image.get(s.getX(),s.getY()),O=Math.ceil(u);for(let q=0;q<O;q++)v+=f,T+=p,this.image.get(pt.round(v),pt.round(T))!==C&&y++;let U=y/u;return U>.1&&U<.9?0:U<=.1===C?1:-1}getFirstDifferent(s,l,u,f){let p=s.getX()+u,y=s.getY()+f;for(;this.isValid(p,y)&&this.image.get(p,y)===l;)p+=u,y+=f;for(p-=u,y-=f;this.isValid(p,y)&&this.image.get(p,y)===l;)p+=u;for(p-=u;this.isValid(p,y)&&this.image.get(p,y)===l;)y+=f;return y-=f,new Bn(p,y)}expandSquare(s,l,u){let f=u/(2*l),p=s[0].getX()-s[2].getX(),y=s[0].getY()-s[2].getY(),v=(s[0].getX()+s[2].getX())/2,T=(s[0].getY()+s[2].getY())/2,C=new Xe(v+f*p,T+f*y),O=new Xe(v-f*p,T-f*y);p=s[1].getX()-s[3].getX(),y=s[1].getY()-s[3].getY(),v=(s[1].getX()+s[3].getX())/2,T=(s[1].getY()+s[3].getY())/2;let U=new Xe(v+f*p,T+f*y),q=new Xe(v-f*p,T-f*y);return[C,U,O,q]}isValid(s,l){return s>=0&&s<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(s){let l=pt.round(s.getX()),u=pt.round(s.getY());return this.isValid(l,u)}distancePoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}distanceResultPoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(H.truncDivision(this.nbLayers-4,8)+1)+15}}class Bi{decode(s,l=null){let u=null,f=new Jr(s.getBlackMatrix()),p=null,y=null;try{let O=f.detectMirror(!1);p=O.getPoints(),this.reportFoundResultPoints(l,p),y=new zt().decode(O)}catch(O){u=O}if(y==null)try{let O=f.detectMirror(!0);p=O.getPoints(),this.reportFoundResultPoints(l,p),y=new zt().decode(O)}catch(O){throw u??O}let v=new Le(y.getText(),y.getRawBytes(),y.getNumBits(),p,Re.AZTEC,D.currentTimeMillis()),T=y.getByteSegments();T!=null&&v.putMetadata(Ge.BYTE_SEGMENTS,T);let C=y.getECLevel();return C!=null&&v.putMetadata(Ge.ERROR_CORRECTION_LEVEL,C),v}reportFoundResultPoints(s,l){if(s!=null){let u=s.get(ie.NEED_RESULT_POINT_CALLBACK);u!=null&&l.forEach((f,p,y)=>{u.foundPossibleResultPoint(f)})}}reset(){}}class vi extends Se{constructor(s=500){super(new Bi,s)}}class In{decode(s,l){try{return this.doDecode(s,l)}catch{if(l&&l.get(ie.TRY_HARDER)===!0&&s.isRotateSupported()){const p=s.rotateCounterClockwise(),y=this.doDecode(p,l),v=y.getResultMetadata();let T=270;v!==null&&v.get(Ge.ORIENTATION)===!0&&(T=T+v.get(Ge.ORIENTATION)%360),y.putMetadata(Ge.ORIENTATION,T);const C=y.getResultPoints();if(C!==null){const O=p.getHeight();for(let U=0;U<C.length;U++)C[U]=new Xe(O-C[U].getY()-1,C[U].getX())}return y}else throw new se}}reset(){}doDecode(s,l){const u=s.getWidth(),f=s.getHeight();let p=new Y(u);const y=l&&l.get(ie.TRY_HARDER)===!0,v=Math.max(1,f>>(y?8:5));let T;y?T=f:T=15;const C=Math.trunc(f/2);for(let O=0;O<T;O++){const U=Math.trunc((O+1)/2),q=(O&1)===0,J=C+v*(q?U:-U);if(J<0||J>=f)break;try{p=s.getBlackRow(J,p)}catch{continue}for(let le=0;le<2;le++){if(le===1&&(p.reverse(),l&&l.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const ue=new Map;l.forEach((fe,Ee)=>ue.set(Ee,fe)),ue.delete(ie.NEED_RESULT_POINT_CALLBACK),l=ue}try{const ue=this.decodeRow(J,p,l);if(le===1){ue.putMetadata(Ge.ORIENTATION,180);const fe=ue.getResultPoints();fe!==null&&(fe[0]=new Xe(u-fe[0].getX()-1,fe[0].getY()),fe[1]=new Xe(u-fe[1].getX()-1,fe[1].getY()))}return ue}catch{}}}throw new se}static recordPattern(s,l,u){const f=u.length;for(let C=0;C<f;C++)u[C]=0;const p=s.getSize();if(l>=p)throw new se;let y=!s.get(l),v=0,T=l;for(;T<p;){if(s.get(T)!==y)u[v]++;else{if(++v===f)break;u[v]=1,y=!y}T++}if(!(v===f||v===f-1&&T===p))throw new se}static recordPatternInReverse(s,l,u){let f=u.length,p=s.get(l);for(;l>0&&f>=0;)s.get(--l)!==p&&(f--,p=!p);if(f>=0)throw new se;In.recordPattern(s,l+1,u)}static patternMatchVariance(s,l,u){const f=s.length;let p=0,y=0;for(let C=0;C<f;C++)p+=s[C],y+=l[C];if(p<y)return Number.POSITIVE_INFINITY;const v=p/y;u*=v;let T=0;for(let C=0;C<f;C++){const O=s[C],U=l[C]*v,q=O>U?O-U:U-O;if(q>u)return Number.POSITIVE_INFINITY;T+=q}return T/p}}class We extends In{static findStartPattern(s){const l=s.getSize(),u=s.getNextSet(0);let f=0,p=Int32Array.from([0,0,0,0,0,0]),y=u,v=!1;const T=6;for(let C=u;C<l;C++)if(s.get(C)!==v)p[f]++;else{if(f===T-1){let O=We.MAX_AVG_VARIANCE,U=-1;for(let q=We.CODE_START_A;q<=We.CODE_START_C;q++){const J=In.patternMatchVariance(p,We.CODE_PATTERNS[q],We.MAX_INDIVIDUAL_VARIANCE);J<O&&(O=J,U=q)}if(U>=0&&s.isRange(Math.max(0,y-(C-y)/2),y,!1))return Int32Array.from([y,C,U]);y+=p[0]+p[1],p=p.slice(2,p.length-1),p[f-1]=0,p[f]=0,f--}else f++;p[f]=1,v=!v}throw new se}static decodeCode(s,l,u){In.recordPattern(s,u,l);let f=We.MAX_AVG_VARIANCE,p=-1;for(let y=0;y<We.CODE_PATTERNS.length;y++){const v=We.CODE_PATTERNS[y],T=this.patternMatchVariance(l,v,We.MAX_INDIVIDUAL_VARIANCE);T<f&&(f=T,p=y)}if(p>=0)return p;throw new se}decodeRow(s,l,u){const f=u&&u.get(ie.ASSUME_GS1)===!0,p=We.findStartPattern(l),y=p[2];let v=0;const T=new Uint8Array(20);T[v++]=y;let C;switch(y){case We.CODE_START_A:C=We.CODE_CODE_A;break;case We.CODE_START_B:C=We.CODE_CODE_B;break;case We.CODE_START_C:C=We.CODE_CODE_C;break;default:throw new V}let O=!1,U=!1,q="",J=p[0],le=p[1];const ue=Int32Array.from([0,0,0,0,0,0]);let fe=0,Ee=0,Fe=y,je=0,Oe=!0,Lt=!1,St=!1;for(;!O;){const lo=U;switch(U=!1,fe=Ee,Ee=We.decodeCode(l,ue,le),T[v++]=Ee,Ee!==We.CODE_STOP&&(Oe=!0),Ee!==We.CODE_STOP&&(je++,Fe+=je*Ee),J=le,le+=ue.reduce((rl,lh)=>rl+lh,0),Ee){case We.CODE_START_A:case We.CODE_START_B:case We.CODE_START_C:throw new V}switch(C){case We.CODE_CODE_A:if(Ee<64)St===Lt?q+=String.fromCharCode(32+Ee):q+=String.fromCharCode(32+Ee+128),St=!1;else if(Ee<96)St===Lt?q+=String.fromCharCode(Ee-64):q+=String.fromCharCode(Ee+64),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_A:!Lt&&St?(Lt=!0,St=!1):Lt&&St?(Lt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_B;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_B:if(Ee<96)St===Lt?q+=String.fromCharCode(32+Ee):q+=String.fromCharCode(32+Ee+128),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_B:!Lt&&St?(Lt=!0,St=!1):Lt&&St?(Lt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_A;break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_C:if(Ee<100)Ee<10&&(q+="0"),q+=Ee;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_STOP:O=!0;break}break}lo&&(C=C===We.CODE_CODE_A?We.CODE_CODE_B:We.CODE_CODE_A)}const Ci=le-J;if(le=l.getNextUnset(le),!l.isRange(le,Math.min(l.getSize(),le+(le-J)/2),!1))throw new se;if(Fe-=je*fe,Fe%103!==fe)throw new R;const Es=q.length;if(Es===0)throw new se;Es>0&&Oe&&(C===We.CODE_CODE_C?q=q.substring(0,Es-2):q=q.substring(0,Es-1));const Sr=(p[1]+p[0])/2,hn=J+Ci/2,sr=T.length,hi=new Uint8Array(sr);for(let lo=0;lo<sr;lo++)hi[lo]=T[lo];const ya=[new Xe(Sr,s),new Xe(hn,s)];return new Le(q,hi,0,ya,Re.CODE_128,new Date().getTime())}}We.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],We.MAX_AVG_VARIANCE=.25,We.MAX_INDIVIDUAL_VARIANCE=.7,We.CODE_SHIFT=98,We.CODE_CODE_C=99,We.CODE_CODE_B=100,We.CODE_CODE_A=101,We.CODE_FNC_1=102,We.CODE_FNC_2=97,We.CODE_FNC_3=96,We.CODE_FNC_4_A=101,We.CODE_FNC_4_B=100,We.CODE_START_A=103,We.CODE_START_B=104,We.CODE_START_C=105,We.CODE_STOP=106;class Tn extends In{constructor(s=!1,l=!1){super(),this.usingCheckDigit=s,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,l,u){let f=this.counters;f.fill(0),this.decodeRowResult="";let p=Tn.findAsteriskPattern(l,f),y=l.getNextSet(p[1]),v=l.getSize(),T,C;do{Tn.recordPattern(l,y,f);let ue=Tn.toNarrowWidePattern(f);if(ue<0)throw new se;T=Tn.patternToChar(ue),this.decodeRowResult+=T,C=y;for(let fe of f)y+=fe;y=l.getNextSet(y)}while(T!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ue of f)O+=ue;let U=y-C-O;if(y!==v&&U*2<O)throw new se;if(this.usingCheckDigit){let ue=this.decodeRowResult.length-1,fe=0;for(let Ee=0;Ee<ue;Ee++)fe+=Tn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(ue)!==Tn.ALPHABET_STRING.charAt(fe%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,ue)}if(this.decodeRowResult.length===0)throw new se;let q;this.extendedMode?q=Tn.decodeExtended(this.decodeRowResult):q=this.decodeRowResult;let J=(p[1]+p[0])/2,le=C+O/2;return new Le(q,null,0,[new Xe(J,s),new Xe(le,s)],Re.CODE_39,new Date().getTime())}static findAsteriskPattern(s,l){let u=s.getSize(),f=s.getNextSet(0),p=0,y=f,v=!1,T=l.length;for(let C=f;C<u;C++)if(s.get(C)!==v)l[p]++;else{if(p===T-1){if(this.toNarrowWidePattern(l)===Tn.ASTERISK_ENCODING&&s.isRange(Math.max(0,y-Math.floor((C-y)/2)),y,!1))return[y,C];y+=l[0]+l[1],l.copyWithin(0,2,2+p-1),l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,v=!v}throw new se}static toNarrowWidePattern(s){let l=s.length,u=0,f;do{let p=2147483647;for(let T of s)T<p&&T>u&&(p=T);u=p,f=0;let y=0,v=0;for(let T=0;T<l;T++){let C=s[T];C>u&&(v|=1<<l-1-T,f++,y+=C)}if(f===3){for(let T=0;T<l&&f>0;T++){let C=s[T];if(C>u&&(f--,C*2>=y))return-1}return v}}while(f>3);return-1}static patternToChar(s){for(let l=0;l<Tn.CHARACTER_ENCODINGS.length;l++)if(Tn.CHARACTER_ENCODINGS[l]===s)return Tn.ALPHABET_STRING.charAt(l);if(s===Tn.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(s){let l=s.length,u="";for(let f=0;f<l;f++){let p=s.charAt(f);if(p==="+"||p==="$"||p==="%"||p==="/"){let y=s.charAt(f+1),v="\0";switch(p){case"+":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)+32);else throw new V;break;case"$":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)-64);else throw new V;break;case"%":if(y>="A"&&y<="E")v=String.fromCharCode(y.charCodeAt(0)-38);else if(y>="F"&&y<="J")v=String.fromCharCode(y.charCodeAt(0)-11);else if(y>="K"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)+16);else if(y>="P"&&y<="T")v=String.fromCharCode(y.charCodeAt(0)+43);else if(y==="U")v="\0";else if(y==="V")v="@";else if(y==="W")v="`";else if(y==="X"||y==="Y"||y==="Z")v="";else throw new V;break;case"/":if(y>="A"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)-32);else if(y==="Z")v=":";else throw new V;break}u+=v,f++}else u+=p}return u}}Tn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Tn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Tn.ASTERISK_ENCODING=148;class Ht extends In{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,l,u){let f=this.decodeStart(l),p=this.decodeEnd(l),y=new K;Ht.decodeMiddle(l,f[1],p[0],y);let v=y.toString(),T=null;u!=null&&(T=u.get(ie.ALLOWED_LENGTHS)),T==null&&(T=Ht.DEFAULT_ALLOWED_LENGTHS);let C=v.length,O=!1,U=0;for(let le of T){if(C===le){O=!0;break}le>U&&(U=le)}if(!O&&C>U&&(O=!0),!O)throw new V;const q=[new Xe(f[1],s),new Xe(p[0],s)];return new Le(v,null,0,q,Re.ITF,new Date().getTime())}static decodeMiddle(s,l,u,f){let p=new Int32Array(10),y=new Int32Array(5),v=new Int32Array(5);for(p.fill(0),y.fill(0),v.fill(0);l<u;){In.recordPattern(s,l,p);for(let C=0;C<5;C++){let O=2*C;y[C]=p[O],v[C]=p[O+1]}let T=Ht.decodeDigit(y);f.append(T.toString()),T=this.decodeDigit(v),f.append(T.toString()),p.forEach(function(C){l+=C})}}decodeStart(s){let l=Ht.skipWhiteSpace(s),u=Ht.findGuardPattern(s,l,Ht.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(s,u[0]),u}validateQuietZone(s,l){let u=this.narrowLineWidth*10;u=u<l?u:l;for(let f=l-1;u>0&&f>=0&&!s.get(f);f--)u--;if(u!==0)throw new se}static skipWhiteSpace(s){const l=s.getSize(),u=s.getNextSet(0);if(u===l)throw new se;return u}decodeEnd(s){s.reverse();try{let l=Ht.skipWhiteSpace(s),u;try{u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[0])}catch(p){p instanceof se&&(u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,u[0]);let f=u[0];return u[0]=s.getSize()-u[1],u[1]=s.getSize()-f,u}finally{s.reverse()}}static findGuardPattern(s,l,u){let f=u.length,p=new Int32Array(f),y=s.getSize(),v=!1,T=0,C=l;p.fill(0);for(let O=l;O<y;O++)if(s.get(O)!==v)p[T]++;else{if(T===f-1){if(In.patternMatchVariance(p,u,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return[C,O];C+=p[0]+p[1],D.arraycopy(p,2,p,0,T-1),p[T-1]=0,p[T]=0,T--}else T++;p[T]=1,v=!v}throw new se}static decodeDigit(s){let l=Ht.MAX_AVG_VARIANCE,u=-1,f=Ht.PATTERNS.length;for(let p=0;p<f;p++){let y=Ht.PATTERNS[p],v=In.patternMatchVariance(s,y,Ht.MAX_INDIVIDUAL_VARIANCE);v<l?(l=v,u=p):v===l&&(u=-1)}if(u>=0)return u%10;throw new se}}Ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ht.MAX_AVG_VARIANCE=.38,Ht.MAX_INDIVIDUAL_VARIANCE=.5,Ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ht.START_PATTERN=Int32Array.from([1,1,1,1]),Ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class pn extends In{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let l=!1,u,f=0,p=Int32Array.from([0,0,0]);for(;!l;){p=Int32Array.from([0,0,0]),u=pn.findGuardPattern(s,f,!1,this.START_END_PATTERN,p);let y=u[0];f=u[1];let v=y-(f-y);v>=0&&(l=s.isRange(v,y,!1))}return u}static checkChecksum(s){return pn.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return pn.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new V;u+=p}u*=3;for(let f=l-2;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new V;u+=p}return(1e3-u)%10}static decodeEnd(s,l){return pn.findGuardPattern(s,l,!1,pn.START_END_PATTERN,new Int32Array(pn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,l,u,f){return this.findGuardPattern(s,l,u,f,new Int32Array(f.length))}static findGuardPattern(s,l,u,f,p){let y=s.getSize();l=u?s.getNextUnset(l):s.getNextSet(l);let v=0,T=l,C=f.length,O=u;for(let U=l;U<y;U++)if(s.get(U)!==O)p[v]++;else{if(v===C-1){if(In.patternMatchVariance(p,f,pn.MAX_INDIVIDUAL_VARIANCE)<pn.MAX_AVG_VARIANCE)return Int32Array.from([T,U]);T+=p[0]+p[1];let q=p.slice(2,p.length-1);for(let J=0;J<v-1;J++)p[J]=q[J];p[v-1]=0,p[v]=0,v--}else v++;p[v]=1,O=!O}throw new se}static decodeDigit(s,l,u,f){this.recordPattern(s,u,l);let p=this.MAX_AVG_VARIANCE,y=-1,v=f.length;for(let T=0;T<v;T++){let C=f[T],O=In.patternMatchVariance(l,C,pn.MAX_INDIVIDUAL_VARIANCE);O<p&&(p=O,y=T)}if(y>=0)return y;throw new se}}pn.MAX_AVG_VARIANCE=.48,pn.MAX_INDIVIDUAL_VARIANCE=.7,pn.START_END_PATTERN=Int32Array.from([1,1,1]),pn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),pn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ai{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(l,u,f),y=f.toString(),v=ai.parseExtensionString(y),T=[new Xe((u[0]+u[1])/2,s),new Xe(p,s)],C=new Le(y,null,0,T,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let C=0;C<5&&y<p;C++){let O=pn.decodeDigit(s,f,y,pn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<4-C),C!==4&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==5)throw new se;let T=this.determineCheckDigit(v);if(ai.extensionChecksum(u.toString())!==T)throw new se;return y}static extensionChecksum(s){let l=s.length,u=0;for(let f=l-2;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;u*=3;for(let f=l-1;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(s){for(let l=0;l<10;l++)if(s===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new se}static parseExtensionString(s){if(s.length!==5)return null;let l=ai.parseExtension5String(s);return l==null?null:new Map([[Ge.SUGGESTED_PRICE,l]])}static parseExtension5String(s){let l;switch(s.charAt(0)){case"0":l="£";break;case"5":l="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let u=parseInt(s.substring(1)),f=(u/100).toString(),p=u%100,y=p<10?"0"+p:p.toString();return l+f+"."+y}}class jr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(l,u,f),y=f.toString(),v=jr.parseExtensionString(y),T=[new Xe((u[0]+u[1])/2,s),new Xe(p,s)],C=new Le(y,null,0,T,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let T=0;T<2&&y<p;T++){let C=pn.decodeDigit(s,f,y,pn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+C%10);for(let O of f)y+=O;C>=10&&(v|=1<<1-T),T!==1&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==2)throw new se;if(parseInt(u.toString())%4!==v)throw new se;return y}static parseExtensionString(s){return s.length!==2?null:new Map([[Ge.ISSUE_NUMBER,parseInt(s)]])}}class so{static decodeRow(s,l,u){let f=pn.findGuardPattern(l,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ai().decodeRow(s,l,f)}catch{return new jr().decodeRow(s,l,f)}}}so.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ct extends pn{constructor(){super(),this.decodeRowStringBuffer="",Ct.L_AND_G_PATTERNS=Ct.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let l=Ct.L_PATTERNS[s-10],u=new Int32Array(l.length);for(let f=0;f<l.length;f++)u[f]=l[l.length-f-1];Ct.L_AND_G_PATTERNS[s]=u}}decodeRow(s,l,u){let f=Ct.findStartGuardPattern(l),p=u==null?null:u.get(ie.NEED_RESULT_POINT_CALLBACK);if(p!=null){const Oe=new Xe((f[0]+f[1])/2,s);p.foundPossibleResultPoint(Oe)}let y=this.decodeMiddle(l,f,this.decodeRowStringBuffer),v=y.rowOffset,T=y.resultString;if(p!=null){const Oe=new Xe(v,s);p.foundPossibleResultPoint(Oe)}let C=this.decodeEnd(l,v);if(p!=null){const Oe=new Xe((C[0]+C[1])/2,s);p.foundPossibleResultPoint(Oe)}let O=C[1],U=O+(O-C[0]);if(U>=l.getSize()||!l.isRange(O,U,!1))throw new se;let q=T.toString();if(q.length<8)throw new V;if(!Ct.checkChecksum(q))throw new R;let J=(f[1]+f[0])/2,le=(C[1]+C[0])/2,ue=this.getBarcodeFormat(),fe=[new Xe(J,s),new Xe(le,s)],Ee=new Le(q,null,0,fe,ue,new Date().getTime()),Fe=0;try{let Oe=so.decodeRow(s,l,C[1]);Ee.putMetadata(Ge.UPC_EAN_EXTENSION,Oe.getText()),Ee.putAllMetadata(Oe.getResultMetadata()),Ee.addResultPoints(Oe.getResultPoints()),Fe=Oe.getText().length}catch{}let je=u==null?null:u.get(ie.ALLOWED_EAN_EXTENSIONS);if(je!=null){let Oe=!1;for(let Lt in je)if(Fe.toString()===Lt){Oe=!0;break}if(!Oe)throw new se}return Ee}decodeEnd(s,l){return Ct.findGuardPattern(s,l,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return Ct.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new V;u+=p}u*=3;for(let f=l-2;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new V;u+=p}return(1e3-u)%10}}class br extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let C=0;C<6&&y<p;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}u=br.determineFirstDigit(u,v),y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&y<p;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+O);for(let U of f)y+=U}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_13}static determineFirstDigit(s,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return s=String.fromCharCode(48+u)+s,s;throw new se}}br.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ls extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1];for(let T=0;T<4&&y<p;T++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<4&&y<p;T++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_8}}class mt extends Ct{constructor(){super(...arguments),this.ean13Reader=new br}getBarcodeFormat(){return Re.UPC_A}decode(s,l){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,l,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,l,u))}decodeMiddle(s,l,u){return this.ean13Reader.decodeMiddle(s,l,u)}maybeReturnResult(s){let l=s.getText();if(l.charAt(0)==="0"){let u=new Le(l.substring(1),null,null,s.getResultPoints(),Re.UPC_A);return s.getResultMetadata()!=null&&u.putAllMetadata(s.getResultMetadata()),u}else throw new se}reset(){this.ean13Reader.reset()}}class Gt extends Ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters.map(C=>C);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const p=s.getSize();let y=l[1],v=0;for(let C=0;C<6&&y<p;C++){const O=Gt.decodeDigit(s,f,y,Gt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}let T=Gt.determineNumSysAndCheckDigit(u,v);return{rowOffset:y,resultString:T}}decodeEnd(s,l){return Gt.findGuardPatternWithoutCounters(s,l,!0,Gt.MIDDLE_END_PATTERN)}checkChecksum(s){return Ct.checkChecksum(Gt.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,l){for(let u=0;u<=1;u++)for(let f=0;f<10;f++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][f]){let p=String.fromCharCode(48+u),y=String.fromCharCode(48+f);return p+s+y}throw se.getNotFoundInstance()}getBarcodeFormat(){return Re.UPC_E}static convertUPCEtoUPCA(s){const l=s.slice(1,7).split("").map(p=>p.charCodeAt(0)),u=new K;u.append(s.charAt(0));let f=l[5];switch(f){case 0:case 1:case 2:u.appendChars(l,0,2),u.append(f),u.append("0000"),u.appendChars(l,2,3);break;case 3:u.appendChars(l,0,3),u.append("00000"),u.appendChars(l,3,2);break;case 4:u.appendChars(l,0,4),u.append("00000"),u.append(l[4]);break;default:u.appendChars(l,0,5),u.append("0000"),u.append(f);break}return s.length>=8&&u.append(s.charAt(7)),u.toString()}}Gt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class An extends In{constructor(s){super();let l=s==null?null:s.get(ie.POSSIBLE_FORMATS),u=[];r(l)?(u.push(new br),u.push(new mt),u.push(new Ls),u.push(new Gt)):(l.indexOf(Re.EAN_13)>-1&&u.push(new br),l.indexOf(Re.UPC_A)>-1&&u.push(new mt),l.indexOf(Re.EAN_8)>-1&&u.push(new Ls),l.indexOf(Re.UPC_E)>-1&&u.push(new Gt)),this.readers=u}decodeRow(s,l,u){for(let f of this.readers)try{const p=f.decodeRow(s,l,u),y=p.getBarcodeFormat()===Re.EAN_13&&p.getText().charAt(0)==="0",v=u==null?null:u.get(ie.POSSIBLE_FORMATS),T=v==null||v.includes(Re.UPC_A);if(y&&T){const C=p.getRawBytes(),O=new Le(p.getText().substring(1),C,C?C.length:null,p.getResultPoints(),Re.UPC_A);return O.putAllMetadata(p.getResultMetadata()),O}return p}catch{}throw new se}reset(){for(let s of this.readers)s.reset()}}class $t extends In{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,l){for(let u=0;u<l.length;u++)if(In.patternMatchVariance(s,l[u],$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE)return u;throw new se}static count(s){return pt.sum(new Int32Array(s))}static increment(s,l){let u=0,f=l[0];for(let p=1;p<s.length;p++)l[p]>f&&(f=l[p],u=p);s[u]++}static decrement(s,l){let u=0,f=l[0];for(let p=1;p<s.length;p++)l[p]<f&&(f=l[p],u=p);s[u]--}static isFinderPattern(s){let l=s[0]+s[1],u=l+s[2]+s[3],f=l/u;if(f>=$t.MIN_FINDER_PATTERN_RATIO&&f<=$t.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;for(let v of s)v>y&&(y=v),v<p&&(p=v);return y<10*p}return!1}}$t.MAX_AVG_VARIANCE=.2,$t.MAX_INDIVIDUAL_VARIANCE=.45,$t.MIN_FINDER_PATTERN_RATIO=9.5/12,$t.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(s,l){this.value=s,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Ir))return!1;const l=s;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Cn{constructor(s,l,u,f,p){this.value=s,this.startEnd=l,this.value=s,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new Xe(u,p)),this.resultPoints.push(new Xe(f,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Cn))return!1;const l=s;return this.value===l.value}hashCode(){return this.value}}class Rt{constructor(){}static getRSSvalue(s,l,u){let f=0;for(let T of s)f+=T;let p=0,y=0,v=s.length;for(let T=0;T<v-1;T++){let C;for(C=1,y|=1<<T;C<s[T];C++,y&=~(1<<T)){let O=Rt.combins(f-C-1,v-T-2);if(u&&y===0&&f-C-(v-T-1)>=v-T-1&&(O-=Rt.combins(f-C-(v-T),v-T-2)),v-T-1>1){let U=0;for(let q=f-C-(v-T-2);q>l;q--)U+=Rt.combins(f-C-q-1,v-T-3);O-=U*(v-1-T)}else f-C>l&&O--;p+=O}f-=C}return p}static combins(s,l){let u,f;s-l>l?(f=l,u=s-l):(f=s-l,u=l);let p=1,y=1;for(let v=s;v>u;v--)p*=v,y<=f&&(p/=y,y++);for(;y<=f;)p/=y,y++;return p}}class gs{static buildBitArray(s){let l=s.length*2-1;s[s.length-1].getRightChar()==null&&(l-=1);let u=12*l,f=new Y(u),p=0,v=s[0].getRightChar().getValue();for(let T=11;T>=0;--T)(v&1<<T)!=0&&f.set(p),p++;for(let T=1;T<s.length;++T){let C=s[T],O=C.getLeftChar().getValue();for(let U=11;U>=0;--U)(O&1<<U)!=0&&f.set(p),p++;if(C.getRightChar()!=null){let U=C.getRightChar().getValue();for(let q=11;q>=0;--q)(U&1<<q)!=0&&f.set(p),p++}}return f}}class cn{constructor(s,l){l?this.decodedInformation=null:(this.finished=s,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ir{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class jn extends ir{constructor(s,l){super(s),this.value=l}getValue(){return this.value}isFNC1(){return this.value===jn.FNC1}}jn.FNC1="$";class dr extends ir{constructor(s,l,u){super(s),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Un extends ir{constructor(s,l,u){if(super(s),l<0||l>10||u<0||u>10)throw new V;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Un.FNC1}isSecondDigitFNC1(){return this.secondDigit===Un.FNC1}isAnyFNC1(){return this.firstDigit===Un.FNC1||this.secondDigit===Un.FNC1}}Un.FNC1=10;class Ye{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new se;let l=s.substring(0,2);for(let p of Ye.TWO_DIGIT_DATA_LENGTH)if(p[0]===l)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(2,p[2],s):Ye.processFixedAI(2,p[1],s);if(s.length<3)throw new se;let u=s.substring(0,3);for(let p of Ye.THREE_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(3,p[2],s):Ye.processFixedAI(3,p[1],s);for(let p of Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,p[2],s):Ye.processFixedAI(4,p[1],s);if(s.length<4)throw new se;let f=s.substring(0,4);for(let p of Ye.FOUR_DIGIT_DATA_LENGTH)if(p[0]===f)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,p[2],s):Ye.processFixedAI(4,p[1],s);throw new se}static processFixedAI(s,l,u){if(u.length<s)throw new se;let f=u.substring(0,s);if(u.length<s+l)throw new se;let p=u.substring(s,s+l),y=u.substring(s+l),v="("+f+")"+p,T=Ye.parseFieldsInGeneralPurpose(y);return T==null?v:v+T}static processVariableAI(s,l,u){let f=u.substring(0,s),p;u.length<s+l?p=u.length:p=s+l;let y=u.substring(s,p),v=u.substring(p),T="("+f+")"+y,C=Ye.parseFieldsInGeneralPurpose(v);return C==null?T:T+C}}Ye.VARIABLE_LENGTH=[],Ye.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ye.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ye.VARIABLE_LENGTH,20],["22",Ye.VARIABLE_LENGTH,29],["30",Ye.VARIABLE_LENGTH,8],["37",Ye.VARIABLE_LENGTH,8],["90",Ye.VARIABLE_LENGTH,30],["91",Ye.VARIABLE_LENGTH,30],["92",Ye.VARIABLE_LENGTH,30],["93",Ye.VARIABLE_LENGTH,30],["94",Ye.VARIABLE_LENGTH,30],["95",Ye.VARIABLE_LENGTH,30],["96",Ye.VARIABLE_LENGTH,30],["97",Ye.VARIABLE_LENGTH,3],["98",Ye.VARIABLE_LENGTH,30],["99",Ye.VARIABLE_LENGTH,30]],Ye.THREE_DIGIT_DATA_LENGTH=[["240",Ye.VARIABLE_LENGTH,30],["241",Ye.VARIABLE_LENGTH,30],["242",Ye.VARIABLE_LENGTH,6],["250",Ye.VARIABLE_LENGTH,30],["251",Ye.VARIABLE_LENGTH,30],["253",Ye.VARIABLE_LENGTH,17],["254",Ye.VARIABLE_LENGTH,20],["400",Ye.VARIABLE_LENGTH,30],["401",Ye.VARIABLE_LENGTH,30],["402",17],["403",Ye.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ye.VARIABLE_LENGTH,20],["421",Ye.VARIABLE_LENGTH,15],["422",3],["423",Ye.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ye.VARIABLE_LENGTH,15],["391",Ye.VARIABLE_LENGTH,18],["392",Ye.VARIABLE_LENGTH,15],["393",Ye.VARIABLE_LENGTH,18],["703",Ye.VARIABLE_LENGTH,30]],Ye.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ye.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ye.VARIABLE_LENGTH,20],["8003",Ye.VARIABLE_LENGTH,30],["8004",Ye.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ye.VARIABLE_LENGTH,30],["8008",Ye.VARIABLE_LENGTH,12],["8018",18],["8020",Ye.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ye.VARIABLE_LENGTH,70],["8200",Ye.VARIABLE_LENGTH,70]];class Co{constructor(s){this.buffer=new K,this.information=s}decodeAllCodes(s,l){let u=l,f=null;do{let p=this.decodeGeneralPurposeField(u,f),y=Ye.parseFieldsInGeneralPurpose(p.getNewString());if(y!=null&&s.append(y),p.isRemaining()?f=""+p.getRemainingValue():f=null,u===p.getNewPosition())break;u=p.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let l=s;l<s+3;++l)if(this.information.get(l))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(s,4);return p===0?new Un(this.information.getSize(),Un.FNC1,Un.FNC1):new Un(this.information.getSize(),p-1,Un.FNC1)}let l=this.extractNumericValueFromBitArray(s,7),u=(l-8)/11,f=(l-8)%11;return new Un(s+7,u,f)}extractNumericValueFromBitArray(s,l){return Co.extractNumericValueFromBitArray(this.information,s,l)}static extractNumericValueFromBitArray(s,l,u){let f=0;for(let p=0;p<u;++p)s.get(l+p)&&(f|=1<<u-p-1);return f}decodeGeneralPurposeField(s,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(s);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new dr(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new dr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,l;do{let u=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),s=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),s=l.isFinished()):(l=this.parseNumericBlock(),s=l.isFinished()),!(u!==this.current.getPosition())&&!s)break}while(!s);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let l;return s.isSecondDigitFNC1()?l=new dr(this.current.getPosition(),this.buffer.toString()):l=new dr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new cn(!0,l)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new cn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new cn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new cn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new jn(s+5,jn.FNC1);if(l>=5&&l<15)return new jn(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<90)return new jn(s+7,""+(u+1));if(u>=90&&u<116)return new jn(s+7,""+(u+7));let f=this.extractNumericValueFromBitArray(s,8),p;switch(f){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new V}return new jn(s+8,p)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,6);return u>=16&&u<63}decodeAlphanumeric(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new jn(s+5,jn.FNC1);if(l>=5&&l<15)return new jn(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,6);if(u>=32&&u<58)return new jn(s+6,""+(u+33));let f;switch(u){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Fn("Decoding invalid alphanumeric value: "+u)}return new jn(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<5&&l+s<this.information.getSize();++l)if(l===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+l))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let l=s;l<s+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<4&&l+s<this.information.getSize();++l)if(this.information.get(s+l))return!1;return!0}}class So{constructor(s){this.information=s,this.generalDecoder=new Co(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ur extends So{constructor(s){super(s)}encodeCompressedGtin(s,l){s.append("(01)");let u=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,l,u)}encodeCompressedGtinWithoutAI(s,l,u){for(let f=0;f<4;++f){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*f,10);p/100===0&&s.append("0"),p/10===0&&s.append("0"),s.append(p)}Ur.appendCheckDigit(s,u)}static appendCheckDigit(s,l){let u=0;for(let f=0;f<13;f++){let p=s.charAt(f+l).charCodeAt(0)-48;u+=(f&1)===0?3*p:p}u=10-u%10,u===10&&(u=0),s.append(u)}}Ur.GTIN_SIZE=40;class ei extends Ur{constructor(s){super(s)}parseInformation(){let s=new K;s.append("(01)");let l=s.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(ei.HEADER_SIZE,4);return s.append(u),this.encodeCompressedGtinWithoutAI(s,ei.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(s,ei.HEADER_SIZE+44)}}ei.HEADER_SIZE=4;class Vs extends So{constructor(s){super(s)}parseInformation(){let s=new K;return this.getGeneralDecoder().decodeAllCodes(s,Vs.HEADER_SIZE)}}Vs.HEADER_SIZE=5;class _i extends Ur{constructor(s){super(s)}encodeCompressedWeight(s,l,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l,u);this.addWeightCode(s,f);let p=this.checkWeight(f),y=1e5;for(let v=0;v<5;++v)p/y===0&&s.append("0"),y/=10;s.append(p)}}class ji extends _i{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=ji.HEADER_SIZE+_i.GTIN_SIZE+ji.WEIGHT_SIZE)throw new se;let s=new K;return this.encodeCompressedGtin(s,ji.HEADER_SIZE),this.encodeCompressedWeight(s,ji.HEADER_SIZE+_i.GTIN_SIZE,ji.WEIGHT_SIZE),s.toString()}}ji.HEADER_SIZE=5,ji.WEIGHT_SIZE=15;class ic extends ji{constructor(s){super(s)}addWeightCode(s,l){s.append("(3103)")}checkWeight(s){return s}}class Ka extends ji{constructor(s){super(s)}addWeightCode(s,l){l<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class li extends Ur{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<li.HEADER_SIZE+Ur.GTIN_SIZE)throw new se;let s=new K;this.encodeCompressedGtin(s,li.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(li.HEADER_SIZE+Ur.GTIN_SIZE,li.LAST_DIGIT_SIZE);s.append("(392"),s.append(l),s.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(li.HEADER_SIZE+Ur.GTIN_SIZE+li.LAST_DIGIT_SIZE,null);return s.append(u.getNewString()),s.toString()}}li.HEADER_SIZE=8,li.LAST_DIGIT_SIZE=2;class Tr extends Ur{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Tr.HEADER_SIZE+Ur.GTIN_SIZE)throw new se;let s=new K;this.encodeCompressedGtin(s,Tr.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Tr.HEADER_SIZE+Ur.GTIN_SIZE,Tr.LAST_DIGIT_SIZE);s.append("(393"),s.append(l),s.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Tr.HEADER_SIZE+Ur.GTIN_SIZE+Tr.LAST_DIGIT_SIZE,Tr.FIRST_THREE_DIGITS_SIZE);u/100==0&&s.append("0"),u/10==0&&s.append("0"),s.append(u);let f=this.getGeneralDecoder().decodeGeneralPurposeField(Tr.HEADER_SIZE+Ur.GTIN_SIZE+Tr.LAST_DIGIT_SIZE+Tr.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}Tr.HEADER_SIZE=8,Tr.LAST_DIGIT_SIZE=2,Tr.FIRST_THREE_DIGITS_SIZE=10;class yn extends _i{constructor(s,l,u){super(s),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE+yn.DATE_SIZE)throw new se;let s=new K;return this.encodeCompressedGtin(s,yn.HEADER_SIZE),this.encodeCompressedWeight(s,yn.HEADER_SIZE+yn.GTIN_SIZE,yn.WEIGHT_SIZE),this.encodeCompressedDate(s,yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,yn.DATE_SIZE);if(u==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=u%32;u/=32;let p=u%12+1;u/=12;let y=u;y/10==0&&s.append("0"),s.append(y),p/10==0&&s.append("0"),s.append(p),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,l){s.append("("),s.append(this.firstAIdigits),s.append(l/1e5),s.append(")")}checkWeight(s){return s%1e5}}yn.HEADER_SIZE=8,yn.WEIGHT_SIZE=20,yn.DATE_SIZE=16;function xu(j){try{if(j.get(1))return new ei(j);if(!j.get(2))return new Vs(j);switch(Co.extractNumericValueFromBitArray(j,1,4)){case 4:return new ic(j);case 5:return new Ka(j)}switch(Co.extractNumericValueFromBitArray(j,1,5)){case 12:return new li(j);case 13:return new Tr(j)}switch(Co.extractNumericValueFromBitArray(j,1,7)){case 56:return new yn(j,"310","11");case 57:return new yn(j,"320","11");case 58:return new yn(j,"310","13");case 59:return new yn(j,"320","13");case 60:return new yn(j,"310","15");case 61:return new yn(j,"320","15");case 62:return new yn(j,"310","17");case 63:return new yn(j,"320","17")}}catch(s){throw console.log(s),new Fn("unknown decoder: "+j)}}class Zt{constructor(s,l,u,f){this.leftchar=s,this.rightchar=l,this.finderpattern=u,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,l){return s instanceof Zt?Zt.equalsOrNull(s.leftchar,l.leftchar)&&Zt.equalsOrNull(s.rightchar,l.rightchar)&&Zt.equalsOrNull(s.finderpattern,l.finderpattern):!1}static equalsOrNull(s,l){return s===null?l===null:Zt.equals(s,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Xa{constructor(s,l,u){this.pairs=s,this.rowNumber=l,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,l){return s instanceof Xa?this.checkEqualitity(s,l)&&s.wasReversed===l.wasReversed:!1}checkEqualitity(s,l){if(!s||!l)return;let u;return s.forEach((f,p)=>{l.forEach(y=>{f.getLeftChar().getValue()===y.getLeftChar().getValue()&&f.getRightChar().getValue()===y.getRightChar().getValue()&&f.getFinderPatter().getValue()===y.getFinderPatter().getValue()&&(u=!0)})}),u}}class ke extends $t{constructor(s){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,l,u){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(s,l))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(s,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,l){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,s))}catch(p){if(p instanceof se){if(!this.pairs.length)throw new se;u=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new se}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return s&&(this.rows=this.rows.reverse()),l}checkRows(s,l){for(let u=l;u<this.rows.length;u++){let f=this.rows[u];this.pairs.length=0;for(let y of s)this.pairs.push(y.getPairs());if(this.pairs.push(f.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(s);p.push(f);try{return this.checkRows(p,u+1)}catch(y){this.verbose&&console.log(y)}}throw new se}static isValidSequence(s){for(let l of ke.FINDER_PATTERN_SEQUENCES){if(s.length>l.length)continue;let u=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=l[f]){u=!1;break}if(u)return!0}return!1}storeRow(s,l){let u=0,f=!1,p=!1;for(;u<this.rows.length;){let y=this.rows[u];if(y.getRowNumber()>s){p=y.isEquivalent(this.pairs);break}f=y.isEquivalent(this.pairs),u++}p||f||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Xa(this.pairs,s,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,l){for(let u of l)if(u.getPairs().length!==s.length){for(let f of u.getPairs())for(let p of s)if(Zt.equals(f,p))break}}static isPartialRow(s,l){for(let u of l){let f=!0;for(let p of s){let y=!1;for(let v of u.getPairs())if(p.equals(v)){y=!0;break}if(!y){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let l=gs.buildBitArray(s),f=xu(l).parseInformation(),p=s[0].getFinderPattern().getResultPoints(),y=s[s.length-1].getFinderPattern().getResultPoints(),v=[p[0],p[1],y[0],y[1]];return new Le(f,null,null,v,Re.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),l=s.getLeftChar(),u=s.getRightChar();if(u==null)return!1;let f=u.getChecksumPortion(),p=2;for(let v=1;v<this.pairs.size();++v){let T=this.pairs.get(v);f+=T.getLeftChar().getChecksumPortion(),p++;let C=T.getRightChar();C!=null&&(f+=C.getChecksumPortion(),p++)}return f%=211,211*(p-4)+f==l.getValue()}static getNextSecondBar(s,l){let u;return s.get(l)?(u=s.getNextUnset(l),u=s.getNextSet(u)):(u=s.getNextSet(l),u=s.getNextUnset(u)),u}retrieveNextPair(s,l,u){let f=l.length%2==0;this.startFromEven&&(f=!f);let p,y=!0,v=-1;do this.findNextPair(s,l,v),p=this.parseFoundFinderPattern(s,u,f),p==null?v=ke.getNextSecondBar(s,this.startEnd[0]):y=!1;while(y);let T=this.decodeDataCharacter(s,p,f,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new se;let C;try{C=this.decodeDataCharacter(s,p,f,!1)}catch(O){C=null,this.verbose&&console.log(O)}return new Zt(T,C,p,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,l,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y;u>=0?y=u:this.isEmptyPair(l)?y=0:y=l[l.length-1].getFinderPattern().getStartEnd()[1];let v=l.length%2!=0;this.startFromEven&&(v=!v);let T=!1;for(;y<p&&(T=!s.get(y),!!T);)y++;let C=0,O=y;for(let U=y;U<p;U++)if(s.get(U)!=T)f[C]++;else{if(C==3){if(v&&ke.reverseCounters(f),ke.isFinderPattern(f)){this.startEnd[0]=O,this.startEnd[1]=U;return}v&&ke.reverseCounters(f),O+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,C--}else C++;f[C]=1,T=!T}throw new se}static reverseCounters(s){let l=s.length;for(let u=0;u<l/2;++u){let f=s[u];s[u]=s[l-u-1],s[l-u-1]=f}}parseFoundFinderPattern(s,l,u){let f,p,y;if(u){let C=this.startEnd[0]-1;for(;C>=0&&!s.get(C);)C--;C++,f=this.startEnd[0]-C,p=C,y=this.startEnd[1]}else p=this.startEnd[0],y=s.getNextUnset(this.startEnd[1]+1),f=y-this.startEnd[1];let v=this.getDecodeFinderCounters();D.arraycopy(v,0,v,1,v.length-1),v[0]=f;let T;try{T=this.parseFinderValue(v,ke.FINDER_PATTERNS)}catch{return null}return new Cn(T,[p,y],p,y,l)}decodeDataCharacter(s,l,u,f){let p=this.getDataCharacterCounters();for(let hn=0;hn<p.length;hn++)p[hn]=0;if(f)ke.recordPatternInReverse(s,l.getStartEnd()[0],p);else{ke.recordPattern(s,l.getStartEnd()[1],p);for(let hn=0,sr=p.length-1;hn<sr;hn++,sr--){let hi=p[hn];p[hn]=p[sr],p[sr]=hi}}let y=17,v=pt.sum(new Int32Array(p))/y,T=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(v-T)/T>.3)throw new se;let C=this.getOddCounts(),O=this.getEvenCounts(),U=this.getOddRoundingErrors(),q=this.getEvenRoundingErrors();for(let hn=0;hn<p.length;hn++){let sr=1*p[hn]/v,hi=sr+.5;if(hi<1){if(sr<.3)throw new se;hi=1}else if(hi>8){if(sr>8.7)throw new se;hi=8}let ya=hn/2;(hn&1)==0?(C[ya]=hi,U[ya]=sr-hi):(O[ya]=hi,q[ya]=sr-hi)}this.adjustOddEvenCounts(y);let J=4*l.getValue()+(u?0:2)+(f?0:1)-1,le=0,ue=0;for(let hn=C.length-1;hn>=0;hn--){if(ke.isNotA1left(l,u,f)){let sr=ke.WEIGHTS[J][2*hn];ue+=C[hn]*sr}le+=C[hn]}let fe=0;for(let hn=O.length-1;hn>=0;hn--)if(ke.isNotA1left(l,u,f)){let sr=ke.WEIGHTS[J][2*hn+1];fe+=O[hn]*sr}let Ee=ue+fe;if((le&1)!=0||le>13||le<4)throw new se;let Fe=(13-le)/2,je=ke.SYMBOL_WIDEST[Fe],Oe=9-je,Lt=Rt.getRSSvalue(C,je,!0),St=Rt.getRSSvalue(O,Oe,!1),Ci=ke.EVEN_TOTAL_SUBSET[Fe],Es=ke.GSUM[Fe],Sr=Lt*Ci+St+Es;return new Ir(Sr,Ee)}static isNotA1left(s,l,u){return!(s.getValue()==0&&l&&u)}adjustOddEvenCounts(s){let l=pt.sum(new Int32Array(this.getOddCounts())),u=pt.sum(new Int32Array(this.getEvenCounts())),f=!1,p=!1;l>13?p=!0:l<4&&(f=!0);let y=!1,v=!1;u>13?v=!0:u<4&&(y=!0);let T=l+u-s,C=(l&1)==1,O=(u&1)==0;if(T==1)if(C){if(O)throw new se;p=!0}else{if(!O)throw new se;v=!0}else if(T==-1)if(C){if(O)throw new se;f=!0}else{if(!O)throw new se;y=!0}else if(T==0){if(C){if(!O)throw new se;l<u?(f=!0,v=!0):(p=!0,y=!0)}else if(O)throw new se}else throw new se;if(f){if(p)throw new se;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(v)throw new se;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class Ro extends Ir{constructor(s,l,u){super(s,l),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends $t{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,l,u){const f=this.decodePair(l,!1,s,u);Jt.addOrTally(this.possibleLeftPairs,f),l.reverse();let p=this.decodePair(l,!0,s,u);Jt.addOrTally(this.possibleRightPairs,p),l.reverse();for(let y of this.possibleLeftPairs)if(y.getCount()>1){for(let v of this.possibleRightPairs)if(v.getCount()>1&&Jt.checkChecksum(y,v))return Jt.constructResult(y,v)}throw new se}static addOrTally(s,l){if(l==null)return;let u=!1;for(let f of s)if(f.getValue()===l.getValue()){f.incrementCount(),u=!0;break}u||s.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,l){let u=4537077*s.getValue()+l.getValue(),f=new String(u).toString(),p=new K;for(let C=13-f.length;C>0;C--)p.append("0");p.append(f);let y=0;for(let C=0;C<13;C++){let O=p.charAt(C).charCodeAt(0)-48;y+=(C&1)===0?3*O:O}y=10-y%10,y===10&&(y=0),p.append(y.toString());let v=s.getFinderPattern().getResultPoints(),T=l.getFinderPattern().getResultPoints();return new Le(p.toString(),null,0,[v[0],v[1],T[0],T[1]],Re.RSS_14,new Date().getTime())}static checkChecksum(s,l){let u=(s.getChecksumPortion()+16*l.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+l.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,u===f}decodePair(s,l,u,f){try{let p=this.findFinderPattern(s,l),y=this.parseFoundFinderPattern(s,u,l,p),v=f==null?null:f.get(ie.NEED_RESULT_POINT_CALLBACK);if(v!=null){let O=(p[0]+p[1])/2;l&&(O=s.getSize()-1-O),v.foundPossibleResultPoint(new Xe(O,u))}let T=this.decodeDataCharacter(s,y,!0),C=this.decodeDataCharacter(s,y,!1);return new Ro(1597*T.getValue()+C.getValue(),T.getChecksumPortion()+4*C.getChecksumPortion(),y)}catch{return null}}decodeDataCharacter(s,l,u){let f=this.getDataCharacterCounters();for(let fe=0;fe<f.length;fe++)f[fe]=0;if(u)In.recordPatternInReverse(s,l.getStartEnd()[0],f);else{In.recordPattern(s,l.getStartEnd()[1]+1,f);for(let fe=0,Ee=f.length-1;fe<Ee;fe++,Ee--){let Fe=f[fe];f[fe]=f[Ee],f[Ee]=Fe}}let p=u?16:15,y=pt.sum(new Int32Array(f))/p,v=this.getOddCounts(),T=this.getEvenCounts(),C=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let fe=0;fe<f.length;fe++){let Ee=f[fe]/y,Fe=Math.floor(Ee+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let je=Math.floor(fe/2);(fe&1)===0?(v[je]=Fe,C[je]=Ee-Fe):(T[je]=Fe,O[je]=Ee-Fe)}this.adjustOddEvenCounts(u,p);let U=0,q=0;for(let fe=v.length-1;fe>=0;fe--)q*=9,q+=v[fe],U+=v[fe];let J=0,le=0;for(let fe=T.length-1;fe>=0;fe--)J*=9,J+=T[fe],le+=T[fe];let ue=q+3*J;if(u){if((U&1)!==0||U>12||U<4)throw new se;let fe=(12-U)/2,Ee=Jt.OUTSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!1),Oe=Rt.getRSSvalue(T,Fe,!0),Lt=Jt.OUTSIDE_EVEN_TOTAL_SUBSET[fe],St=Jt.OUTSIDE_GSUM[fe];return new Ir(je*Lt+Oe+St,ue)}else{if((le&1)!==0||le>10||le<4)throw new se;let fe=(10-le)/2,Ee=Jt.INSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!0),Oe=Rt.getRSSvalue(T,Fe,!1),Lt=Jt.INSIDE_ODD_TOTAL_SUBSET[fe],St=Jt.INSIDE_GSUM[fe];return new Ir(Oe*Lt+je+St,ue)}}findFinderPattern(s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=s.getSize(),p=!1,y=0;for(;y<f&&(p=!s.get(y),l!==p);)y++;let v=0,T=y;for(let C=y;C<f;C++)if(s.get(C)!==p)u[v]++;else{if(v===3){if($t.isFinderPattern(u))return[T,C];T+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,p=!p}throw new se}parseFoundFinderPattern(s,l,u,f){let p=s.get(f[0]),y=f[0]-1;for(;y>=0&&p!==s.get(y);)y--;y++;const v=f[0]-y,T=this.getDecodeFinderCounters(),C=new Int32Array(T.length);D.arraycopy(T,0,C,1,T.length-1),C[0]=v;const O=this.parseFinderValue(C,Jt.FINDER_PATTERNS);let U=y,q=f[1];return u&&(U=s.getSize()-1-U,q=s.getSize()-1-q),new Cn(O,[y,f[1]],U,q,l)}adjustOddEvenCounts(s,l){let u=pt.sum(new Int32Array(this.getOddCounts())),f=pt.sum(new Int32Array(this.getEvenCounts())),p=!1,y=!1,v=!1,T=!1;s?(u>12?y=!0:u<4&&(p=!0),f>12?T=!0:f<4&&(v=!0)):(u>11?y=!0:u<5&&(p=!0),f>10?T=!0:f<4&&(v=!0));let C=u+f-l,O=(u&1)===(s?1:0),U=(f&1)===1;if(C===1)if(O){if(U)throw new se;y=!0}else{if(!U)throw new se;T=!0}else if(C===-1)if(O){if(U)throw new se;p=!0}else{if(!U)throw new se;v=!0}else if(C===0){if(O){if(!U)throw new se;u<f?(p=!0,T=!0):(y=!0,v=!0)}else if(U)throw new se}else throw new se;if(p){if(y)throw new se;$t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&$t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(T)throw new se;$t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}T&&$t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Fs extends In{constructor(s,l){super(),this.readers=[],this.verbose=l===!0;const u=s?s.get(ie.POSSIBLE_FORMATS):null,f=s&&s.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(Re.EAN_13)||u.includes(Re.UPC_A)||u.includes(Re.EAN_8)||u.includes(Re.UPC_E))&&this.readers.push(new An(s)),u.includes(Re.CODE_39)&&this.readers.push(new Tn(f)),u.includes(Re.CODE_128)&&this.readers.push(new We),u.includes(Re.ITF)&&this.readers.push(new Ht),u.includes(Re.RSS_14)&&this.readers.push(new Jt),u.includes(Re.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new An(s)),this.readers.push(new Tn),this.readers.push(new An(s)),this.readers.push(new We),this.readers.push(new Ht),this.readers.push(new Jt),this.readers.push(new ke(this.verbose)))}decodeRow(s,l,u){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,l,u)}catch{}throw new se}reset(){this.readers.forEach(s=>s.reset())}}class wu extends Se{constructor(s=500,l){super(new Fs(l),s,l)}}class jt{constructor(s,l,u){this.ecCodewords=s,this.ecBlocks=[l],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ot{constructor(s,l,u,f,p,y){this.versionNumber=s,this.symbolSizeRows=l,this.symbolSizeColumns=u,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=p,this.ecBlocks=y;let v=0;const T=y.getECCodewords(),C=y.getECBlocks();for(let O of C)v+=O.getCount()*(O.getDataCodewords()+T);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,l){if((s&1)!==0||(l&1)!==0)throw new V;for(let u of Ot.VERSIONS)if(u.symbolSizeRows===s&&u.symbolSizeColumns===l)return u;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new Ot(1,10,10,8,8,new jt(5,new Nt(1,3))),new Ot(2,12,12,10,10,new jt(7,new Nt(1,5))),new Ot(3,14,14,12,12,new jt(10,new Nt(1,8))),new Ot(4,16,16,14,14,new jt(12,new Nt(1,12))),new Ot(5,18,18,16,16,new jt(14,new Nt(1,18))),new Ot(6,20,20,18,18,new jt(18,new Nt(1,22))),new Ot(7,22,22,20,20,new jt(20,new Nt(1,30))),new Ot(8,24,24,22,22,new jt(24,new Nt(1,36))),new Ot(9,26,26,24,24,new jt(28,new Nt(1,44))),new Ot(10,32,32,14,14,new jt(36,new Nt(1,62))),new Ot(11,36,36,16,16,new jt(42,new Nt(1,86))),new Ot(12,40,40,18,18,new jt(48,new Nt(1,114))),new Ot(13,44,44,20,20,new jt(56,new Nt(1,144))),new Ot(14,48,48,22,22,new jt(68,new Nt(1,174))),new Ot(15,52,52,24,24,new jt(42,new Nt(2,102))),new Ot(16,64,64,14,14,new jt(56,new Nt(2,140))),new Ot(17,72,72,16,16,new jt(36,new Nt(4,92))),new Ot(18,80,80,18,18,new jt(48,new Nt(4,114))),new Ot(19,88,88,20,20,new jt(56,new Nt(4,144))),new Ot(20,96,96,22,22,new jt(68,new Nt(4,174))),new Ot(21,104,104,24,24,new jt(56,new Nt(6,136))),new Ot(22,120,120,18,18,new jt(68,new Nt(6,175))),new Ot(23,132,132,20,20,new jt(62,new Nt(8,163))),new Ot(24,144,144,22,22,new jt(62,new Nt(8,156),new Nt(2,155))),new Ot(25,8,18,6,16,new jt(7,new Nt(1,5))),new Ot(26,8,32,6,14,new jt(11,new Nt(1,10))),new Ot(27,12,26,10,24,new jt(14,new Nt(1,16))),new Ot(28,12,36,10,16,new jt(18,new Nt(1,22))),new Ot(29,16,36,14,16,new jt(24,new Nt(1,32))),new Ot(30,16,48,14,22,new jt(28,new Nt(1,49)))]}}Ot.VERSIONS=Ot.buildVersions();class zr{constructor(s){const l=s.getHeight();if(l<8||l>144||(l&1)!==0)throw new V;this.version=zr.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new we(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const l=s.getHeight(),u=s.getWidth();return Ot.getVersionForDimensions(l,u)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let l=0,u=4,f=0;const p=this.mappingBitMatrix.getHeight(),y=this.mappingBitMatrix.getWidth();let v=!1,T=!1,C=!1,O=!1;do if(u===p&&f===0&&!v)s[l++]=this.readCorner1(p,y)&255,u-=2,f+=2,v=!0;else if(u===p-2&&f===0&&(y&3)!==0&&!T)s[l++]=this.readCorner2(p,y)&255,u-=2,f+=2,T=!0;else if(u===p+4&&f===2&&(y&7)===0&&!C)s[l++]=this.readCorner3(p,y)&255,u-=2,f+=2,C=!0;else if(u===p-2&&f===0&&(y&7)===4&&!O)s[l++]=this.readCorner4(p,y)&255,u-=2,f+=2,O=!0;else{do u<p&&f>=0&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,p,y)&255),u-=2,f+=2;while(u>=0&&f<y);u+=1,f+=3;do u>=0&&f<y&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,p,y)&255),u+=2,f-=2;while(u<p&&f>=0);u+=3,f+=1}while(u<p||f<y);if(l!==this.version.getTotalCodewords())throw new V;return s}readModule(s,l,u,f){return s<0&&(s+=u,l+=4-(u+4&7)),l<0&&(l+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(l,s),this.mappingBitMatrix.get(l,s)}readUtah(s,l,u,f){let p=0;return this.readModule(s-2,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s-2,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l,u,f)&&(p|=1),p<<=1,this.readModule(s,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s,l,u,f)&&(p|=1),p}readCorner1(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,1,s,l)&&(u|=1),u<<=1,this.readModule(s-1,2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}readCorner2(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-4,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner3(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-3,s,l)&&(u|=1),u<<=1,this.readModule(1,l-2,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner4(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}extractDataRegion(s){const l=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(s.getHeight()!==l)throw new _("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),y=l/f|0,v=u/p|0,T=y*f,C=v*p,O=new we(C,T);for(let U=0;U<y;++U){const q=U*f;for(let J=0;J<v;++J){const le=J*p;for(let ue=0;ue<f;++ue){const fe=U*(f+2)+1+ue,Ee=q+ue;for(let Fe=0;Fe<p;++Fe){const je=J*(p+2)+1+Fe;if(s.get(je,fe)){const Oe=le+Fe;O.set(Oe,Ee)}}}}}return O}}class da{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l){const u=l.getECBlocks();let f=0;const p=u.getECBlocks();for(let ue of p)f+=ue.getCount();const y=new Array(f);let v=0;for(let ue of p)for(let fe=0;fe<ue.getCount();fe++){const Ee=ue.getDataCodewords(),Fe=u.getECCodewords()+Ee;y[v++]=new da(Ee,new Uint8Array(Fe))}const C=y[0].codewords.length-u.getECCodewords(),O=C-1;let U=0;for(let ue=0;ue<O;ue++)for(let fe=0;fe<v;fe++)y[fe].codewords[ue]=s[U++];const q=l.getVersionNumber()===24,J=q?8:v;for(let ue=0;ue<J;ue++)y[ue].codewords[C-1]=s[U++];const le=y[0].codewords.length;for(let ue=C;ue<le;ue++)for(let fe=0;fe<v;fe++){const Ee=q?(fe+8)%v:fe,Fe=q&&Ee>7?ue-1:ue;y[Ee].codewords[Fe]=s[U++]}if(U!==s.length)throw new _;return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ya{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new _(""+s);let l=0,u=this.bitOffset,f=this.byteOffset;const p=this.bytes;if(u>0){const y=8-u,v=s<y?s:y,T=y-v,C=255>>8-v<<T;l=(p[f]&C)>>T,s-=v,u+=v,u===8&&(u=0,f++)}if(s>0){for(;s>=8;)l=l<<8|p[f]&255,f++,s-=8;if(s>0){const y=8-s,v=255>>y<<y;l=l<<s|(p[f]&v)>>y,u+=s}}return this.bitOffset=u,this.byteOffset=f,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Qn;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(Qn||(Qn={}));class Ui{static decode(s){const l=new Ya(s),u=new K,f=new K,p=new Array;let y=Qn.ASCII_ENCODE;do if(y===Qn.ASCII_ENCODE)y=this.decodeAsciiSegment(l,u,f);else{switch(y){case Qn.C40_ENCODE:this.decodeC40Segment(l,u);break;case Qn.TEXT_ENCODE:this.decodeTextSegment(l,u);break;case Qn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,u);break;case Qn.EDIFACT_ENCODE:this.decodeEdifactSegment(l,u);break;case Qn.BASE256_ENCODE:this.decodeBase256Segment(l,u,p);break;default:throw new V}y=Qn.ASCII_ENCODE}while(y!==Qn.PAD_ENCODE&&l.available()>0);return f.length()>0&&u.append(f.toString()),new at(s,u.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(s,l,u){let f=!1;do{let p=s.readBits(8);if(p===0)throw new V;if(p<=128)return f&&(p+=128),l.append(String.fromCharCode(p-1)),Qn.ASCII_ENCODE;if(p===129)return Qn.PAD_ENCODE;if(p<=229){const y=p-130;y<10&&l.append("0"),l.append(""+y)}else switch(p){case 230:return Qn.C40_ENCODE;case 231:return Qn.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:l.append("[)>05"),u.insert(0,"");break;case 237:l.append("[)>06"),u.insert(0,"");break;case 238:return Qn.ANSIX12_ENCODE;case 239:return Qn.TEXT_ENCODE;case 240:return Qn.EDIFACT_ENCODE;case 241:break;default:if(p!==254||s.available()!==0)throw new V;break}}while(s.available()>0);return Qn.ASCII_ENCODE}static decodeC40Segment(s,l){let u=!1;const f=[];let p=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const T=f[v];switch(p){case 0:if(T<3)p=T+1;else if(T<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[T];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new V;break;case 1:u?(l.append(String.fromCharCode(T+128)),u=!1):l.append(String.fromCharCode(T)),p=0;break;case 2:if(T<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[T];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(T){case 27:l.append("");break;case 30:u=!0;break;default:throw new V}p=0;break;case 3:u?(l.append(String.fromCharCode(T+224)),u=!1):l.append(String.fromCharCode(T+96)),p=0;break;default:throw new V}}}while(s.available()>0)}static decodeTextSegment(s,l){let u=!1,f=[],p=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const T=f[v];switch(p){case 0:if(T<3)p=T+1;else if(T<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[T];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new V;break;case 1:u?(l.append(String.fromCharCode(T+128)),u=!1):l.append(String.fromCharCode(T)),p=0;break;case 2:if(T<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[T];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(T){case 27:l.append("");break;case 30:u=!0;break;default:throw new V}p=0;break;case 3:if(T<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[T];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C),p=0}else throw new V;break;default:throw new V}}}while(s.available()>0)}static decodeAnsiX12Segment(s,l){const u=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){const y=u[p];switch(y){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(y<14)l.append(String.fromCharCode(y+44));else if(y<40)l.append(String.fromCharCode(y+51));else throw new V;break}}}while(s.available()>0)}static parseTwoBytes(s,l,u){let f=(s<<8)+l-1,p=Math.floor(f/1600);u[0]=p,f-=p*1600,p=Math.floor(f/40),u[1]=p,u[2]=f-p*40}static decodeEdifactSegment(s,l){do{if(s.available()<=16)return;for(let u=0;u<4;u++){let f=s.readBits(6);if(f===31){const p=8-s.getBitOffset();p!==8&&s.readBits(p);return}(f&32)===0&&(f|=64),l.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,l,u){let f=1+s.getByteOffset();const p=this.unrandomize255State(s.readBits(8),f++);let y;if(p===0?y=s.available()/8|0:p<250?y=p:y=250*(p-249)+this.unrandomize255State(s.readBits(8),f++),y<0)throw new V;const v=new Uint8Array(y);for(let T=0;T<y;T++){if(s.available()<8)throw new V;v[T]=this.unrandomize255State(s.readBits(8),f++)}u.push(v);try{l.append(te.decode(v,ee.ISO88591))}catch(T){throw new Fn("Platform does not support required encoding: "+T.message)}}static unrandomize255State(s,l){const u=149*l%255+1,f=s-u;return f>=0?f:f+256}}Ui.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ui.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ui.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ui.TEXT_SHIFT2_SET_CHARS=Ui.C40_SHIFT2_SET_CHARS,Ui.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Qa{constructor(){this.rsDecoder=new Dr(ht.DATA_MATRIX_FIELD_256)}decode(s){const l=new zr(s),u=l.getVersion(),f=l.readCodewords(),p=da.getDataBlocks(f,u);let y=0;for(let C of p)y+=C.getNumDataCodewords();const v=new Uint8Array(y),T=p.length;for(let C=0;C<T;C++){const O=p[C],U=O.getCodewords(),q=O.getNumDataCodewords();this.correctErrors(U,q);for(let J=0;J<q;J++)v[J*T+C]=U[J]}return Ui.decode(v)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class mn{constructor(s){this.image=s,this.rectangleDetector=new Zr(this.image)}detect(){const s=this.rectangleDetector.detect();let l=this.detectSolid1(s);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new se;l=this.shiftToModuleCenter(l);const u=l[0],f=l[1],p=l[2],y=l[3];let v=this.transitionsBetween(u,y)+1,T=this.transitionsBetween(p,y)+1;(v&1)===1&&(v+=1),(T&1)===1&&(T+=1),4*v<7*T&&4*T<7*v&&(v=T=Math.max(v,T));let C=mn.sampleGrid(this.image,u,f,p,y,v,T);return new Xn(C,[u,f,p,y])}static shiftPoint(s,l,u){let f=(l.getX()-s.getX())/(u+1),p=(l.getY()-s.getY())/(u+1);return new Xe(s.getX()+f,s.getY()+p)}static moveAway(s,l,u){let f=s.getX(),p=s.getY();return f<l?f-=1:f+=1,p<u?p-=1:p+=1,new Xe(f,p)}detectSolid1(s){let l=s[0],u=s[1],f=s[3],p=s[2],y=this.transitionsBetween(l,u),v=this.transitionsBetween(u,f),T=this.transitionsBetween(f,p),C=this.transitionsBetween(p,l),O=y,U=[p,l,u,f];return O>v&&(O=v,U[0]=l,U[1]=u,U[2]=f,U[3]=p),O>T&&(O=T,U[0]=u,U[1]=f,U[2]=p,U[3]=l),O>C&&(U[0]=f,U[1]=p,U[2]=l,U[3]=u),U}detectSolid2(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p),v=mn.shiftPoint(u,f,(y+1)*4),T=mn.shiftPoint(f,u,(y+1)*4),C=this.transitionsBetween(v,l),O=this.transitionsBetween(T,p);return C<O?(s[0]=l,s[1]=u,s[2]=f,s[3]=p):(s[0]=u,s[1]=f,s[2]=p,s[3]=l),s}correctTopRight(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p),v=this.transitionsBetween(u,p),T=mn.shiftPoint(l,u,(v+1)*4),C=mn.shiftPoint(f,u,(y+1)*4);y=this.transitionsBetween(T,p),v=this.transitionsBetween(C,p);let O=new Xe(p.getX()+(f.getX()-u.getX())/(y+1),p.getY()+(f.getY()-u.getY())/(y+1)),U=new Xe(p.getX()+(l.getX()-u.getX())/(v+1),p.getY()+(l.getY()-u.getY())/(v+1));if(!this.isValid(O))return this.isValid(U)?U:null;if(!this.isValid(U))return O;let q=this.transitionsBetween(T,O)+this.transitionsBetween(C,O),J=this.transitionsBetween(T,U)+this.transitionsBetween(C,U);return q>J?O:U}shiftToModuleCenter(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p)+1,v=this.transitionsBetween(f,p)+1,T=mn.shiftPoint(l,u,v*4),C=mn.shiftPoint(f,u,y*4);y=this.transitionsBetween(T,p)+1,v=this.transitionsBetween(C,p)+1,(y&1)===1&&(y+=1),(v&1)===1&&(v+=1);let O=(l.getX()+u.getX()+f.getX()+p.getX())/4,U=(l.getY()+u.getY()+f.getY()+p.getY())/4;l=mn.moveAway(l,O,U),u=mn.moveAway(u,O,U),f=mn.moveAway(f,O,U),p=mn.moveAway(p,O,U);let q,J;return T=mn.shiftPoint(l,u,v*4),T=mn.shiftPoint(T,p,y*4),q=mn.shiftPoint(u,l,v*4),q=mn.shiftPoint(q,f,y*4),C=mn.shiftPoint(f,p,v*4),C=mn.shiftPoint(C,u,y*4),J=mn.shiftPoint(p,f,v*4),J=mn.shiftPoint(J,l,y*4),[T,q,C,J]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,l,u,f,p,y,v){return Er.getInstance().sampleGrid(s,y,v,.5,.5,y-.5,.5,y-.5,v-.5,.5,v-.5,l.getX(),l.getY(),p.getX(),p.getY(),f.getX(),f.getY(),u.getX(),u.getY())}transitionsBetween(s,l){let u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),p=Math.trunc(l.getX()),y=Math.trunc(l.getY()),v=Math.abs(y-f)>Math.abs(p-u);if(v){let ue=u;u=f,f=ue,ue=p,p=y,y=ue}let T=Math.abs(p-u),C=Math.abs(y-f),O=-T/2,U=f<y?1:-1,q=u<p?1:-1,J=0,le=this.image.get(v?f:u,v?u:f);for(let ue=u,fe=f;ue!==p;ue+=q){let Ee=this.image.get(v?fe:ue,v?ue:fe);if(Ee!==le&&(J++,le=Ee),O+=C,O>0){if(fe===y)break;fe+=U,O-=T}}return J}}class Ei{constructor(){this.decoder=new Qa}decode(s,l=null){let u,f;if(l!=null&&l.has(ie.PURE_BARCODE)){const C=Ei.extractPureBits(s.getBlackMatrix());u=this.decoder.decode(C),f=Ei.NO_POINTS}else{const C=new mn(s.getBlackMatrix()).detect();u=this.decoder.decode(C.getBits()),f=C.getPoints()}const p=u.getRawBytes(),y=new Le(u.getText(),p,8*p.length,f,Re.DATA_MATRIX,D.currentTimeMillis()),v=u.getByteSegments();v!=null&&y.putMetadata(Ge.BYTE_SEGMENTS,v);const T=u.getECLevel();return T!=null&&y.putMetadata(Ge.ERROR_CORRECTION_LEVEL,T),y}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l==null||u==null)throw new se;const f=this.moduleSize(l,s);let p=l[1];const y=u[1];let v=l[0];const C=(u[0]-v+1)/f,O=(y-p+1)/f;if(C<=0||O<=0)throw new se;const U=f/2;p+=U,v+=U;const q=new we(C,O);for(let J=0;J<O;J++){const le=p+J*f;for(let ue=0;ue<C;ue++)s.get(v+ue*f,le)&&q.set(ue,J)}return q}static moduleSize(s,l){const u=l.getWidth();let f=s[0];const p=s[1];for(;f<u&&l.get(f,p);)f++;if(f===u)throw new se;const y=f-s[0];if(y===0)throw new se;return y}}Ei.NO_POINTS=[];class sh extends Se{constructor(s=500){super(new Ei,s)}}var bi;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(bi||(bi={}));class Mt{constructor(s,l,u){this.value=s,this.stringValue=l,this.bits=u,Mt.FOR_BITS.set(u,this),Mt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Mt.L;case"M":return Mt.M;case"Q":return Mt.Q;case"H":return Mt.H;default:throw new w(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Mt))return!1;const l=s;return this.value===l.value}static forBits(s){if(s<0||s>=Mt.FOR_BITS.size)throw new _;return Mt.FOR_BITS.get(s)}}Mt.FOR_BITS=new Map,Mt.FOR_VALUE=new Map,Mt.L=new Mt(bi.L,"L",1),Mt.M=new Mt(bi.M,"M",0),Mt.Q=new Mt(bi.Q,"Q",3),Mt.H=new Mt(bi.H,"H",2);class Zn{constructor(s){this.errorCorrectionLevel=Mt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,l){return H.bitCount(s^l)}static decodeFormatInformation(s,l){const u=Zn.doDecodeFormatInformation(s,l);return u!==null?u:Zn.doDecodeFormatInformation(s^Zn.FORMAT_INFO_MASK_QR,l^Zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,l){let u=Number.MAX_SAFE_INTEGER,f=0;for(const p of Zn.FORMAT_INFO_DECODE_LOOKUP){const y=p[0];if(y===s||y===l)return new Zn(p[1]);let v=Zn.numBitsDiffering(s,y);v<u&&(f=p[1],u=v),s!==l&&(v=Zn.numBitsDiffering(l,y),v<u&&(f=p[1],u=v))}return u<=3?new Zn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Zn))return!1;const l=s;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}Zn.FORMAT_INFO_MASK_QR=21522,Zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class pe{constructor(s,...l){this.ecCodewordsPerBlock=s,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const l=this.ecBlocks;for(const u of l)s+=u.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(s,l,...u){this.versionNumber=s,this.alignmentPatternCenters=l,this.ecBlocks=u;let f=0;const p=u[0].getECCodewordsPerBlock(),y=u[0].getECBlocks();for(const v of y)f+=v.getCount()*(v.getDataCodewords()+p);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new V;try{return this.getVersionForNumber((s-17)/4)}catch{throw new V}}static getVersionForNumber(s){if(s<1||s>40)throw new _;return $e.VERSIONS[s-1]}static decodeVersionInformation(s){let l=Number.MAX_SAFE_INTEGER,u=0;for(let f=0;f<$e.VERSION_DECODE_INFO.length;f++){const p=$e.VERSION_DECODE_INFO[f];if(p===s)return $e.getVersionForNumber(f+7);const y=Zn.numBitsDiffering(s,p);y<l&&(u=f+7,l=y)}return l<=3?$e.getVersionForNumber(u):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),l=new we(s);l.setRegion(0,0,9,9),l.setRegion(s-8,0,8,9),l.setRegion(0,s-8,9,8);const u=this.alignmentPatternCenters.length;for(let f=0;f<u;f++){const p=this.alignmentPatternCenters[f]-2;for(let y=0;y<u;y++)f===0&&(y===0||y===u-1)||f===u-1&&y===0||l.setRegion(this.alignmentPatternCenters[y]-2,p,5,5)}return l.setRegion(6,9,1,s-17),l.setRegion(9,6,s-17,1),this.versionNumber>6&&(l.setRegion(s-11,0,3,6),l.setRegion(0,s-11,6,3)),l}toString(){return""+this.versionNumber}}$e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$e.VERSIONS=[new $e(1,new Int32Array(0),new pe(7,new Q(1,19)),new pe(10,new Q(1,16)),new pe(13,new Q(1,13)),new pe(17,new Q(1,9))),new $e(2,Int32Array.from([6,18]),new pe(10,new Q(1,34)),new pe(16,new Q(1,28)),new pe(22,new Q(1,22)),new pe(28,new Q(1,16))),new $e(3,Int32Array.from([6,22]),new pe(15,new Q(1,55)),new pe(26,new Q(1,44)),new pe(18,new Q(2,17)),new pe(22,new Q(2,13))),new $e(4,Int32Array.from([6,26]),new pe(20,new Q(1,80)),new pe(18,new Q(2,32)),new pe(26,new Q(2,24)),new pe(16,new Q(4,9))),new $e(5,Int32Array.from([6,30]),new pe(26,new Q(1,108)),new pe(24,new Q(2,43)),new pe(18,new Q(2,15),new Q(2,16)),new pe(22,new Q(2,11),new Q(2,12))),new $e(6,Int32Array.from([6,34]),new pe(18,new Q(2,68)),new pe(16,new Q(4,27)),new pe(24,new Q(4,19)),new pe(28,new Q(4,15))),new $e(7,Int32Array.from([6,22,38]),new pe(20,new Q(2,78)),new pe(18,new Q(4,31)),new pe(18,new Q(2,14),new Q(4,15)),new pe(26,new Q(4,13),new Q(1,14))),new $e(8,Int32Array.from([6,24,42]),new pe(24,new Q(2,97)),new pe(22,new Q(2,38),new Q(2,39)),new pe(22,new Q(4,18),new Q(2,19)),new pe(26,new Q(4,14),new Q(2,15))),new $e(9,Int32Array.from([6,26,46]),new pe(30,new Q(2,116)),new pe(22,new Q(3,36),new Q(2,37)),new pe(20,new Q(4,16),new Q(4,17)),new pe(24,new Q(4,12),new Q(4,13))),new $e(10,Int32Array.from([6,28,50]),new pe(18,new Q(2,68),new Q(2,69)),new pe(26,new Q(4,43),new Q(1,44)),new pe(24,new Q(6,19),new Q(2,20)),new pe(28,new Q(6,15),new Q(2,16))),new $e(11,Int32Array.from([6,30,54]),new pe(20,new Q(4,81)),new pe(30,new Q(1,50),new Q(4,51)),new pe(28,new Q(4,22),new Q(4,23)),new pe(24,new Q(3,12),new Q(8,13))),new $e(12,Int32Array.from([6,32,58]),new pe(24,new Q(2,92),new Q(2,93)),new pe(22,new Q(6,36),new Q(2,37)),new pe(26,new Q(4,20),new Q(6,21)),new pe(28,new Q(7,14),new Q(4,15))),new $e(13,Int32Array.from([6,34,62]),new pe(26,new Q(4,107)),new pe(22,new Q(8,37),new Q(1,38)),new pe(24,new Q(8,20),new Q(4,21)),new pe(22,new Q(12,11),new Q(4,12))),new $e(14,Int32Array.from([6,26,46,66]),new pe(30,new Q(3,115),new Q(1,116)),new pe(24,new Q(4,40),new Q(5,41)),new pe(20,new Q(11,16),new Q(5,17)),new pe(24,new Q(11,12),new Q(5,13))),new $e(15,Int32Array.from([6,26,48,70]),new pe(22,new Q(5,87),new Q(1,88)),new pe(24,new Q(5,41),new Q(5,42)),new pe(30,new Q(5,24),new Q(7,25)),new pe(24,new Q(11,12),new Q(7,13))),new $e(16,Int32Array.from([6,26,50,74]),new pe(24,new Q(5,98),new Q(1,99)),new pe(28,new Q(7,45),new Q(3,46)),new pe(24,new Q(15,19),new Q(2,20)),new pe(30,new Q(3,15),new Q(13,16))),new $e(17,Int32Array.from([6,30,54,78]),new pe(28,new Q(1,107),new Q(5,108)),new pe(28,new Q(10,46),new Q(1,47)),new pe(28,new Q(1,22),new Q(15,23)),new pe(28,new Q(2,14),new Q(17,15))),new $e(18,Int32Array.from([6,30,56,82]),new pe(30,new Q(5,120),new Q(1,121)),new pe(26,new Q(9,43),new Q(4,44)),new pe(28,new Q(17,22),new Q(1,23)),new pe(28,new Q(2,14),new Q(19,15))),new $e(19,Int32Array.from([6,30,58,86]),new pe(28,new Q(3,113),new Q(4,114)),new pe(26,new Q(3,44),new Q(11,45)),new pe(26,new Q(17,21),new Q(4,22)),new pe(26,new Q(9,13),new Q(16,14))),new $e(20,Int32Array.from([6,34,62,90]),new pe(28,new Q(3,107),new Q(5,108)),new pe(26,new Q(3,41),new Q(13,42)),new pe(30,new Q(15,24),new Q(5,25)),new pe(28,new Q(15,15),new Q(10,16))),new $e(21,Int32Array.from([6,28,50,72,94]),new pe(28,new Q(4,116),new Q(4,117)),new pe(26,new Q(17,42)),new pe(28,new Q(17,22),new Q(6,23)),new pe(30,new Q(19,16),new Q(6,17))),new $e(22,Int32Array.from([6,26,50,74,98]),new pe(28,new Q(2,111),new Q(7,112)),new pe(28,new Q(17,46)),new pe(30,new Q(7,24),new Q(16,25)),new pe(24,new Q(34,13))),new $e(23,Int32Array.from([6,30,54,78,102]),new pe(30,new Q(4,121),new Q(5,122)),new pe(28,new Q(4,47),new Q(14,48)),new pe(30,new Q(11,24),new Q(14,25)),new pe(30,new Q(16,15),new Q(14,16))),new $e(24,Int32Array.from([6,28,54,80,106]),new pe(30,new Q(6,117),new Q(4,118)),new pe(28,new Q(6,45),new Q(14,46)),new pe(30,new Q(11,24),new Q(16,25)),new pe(30,new Q(30,16),new Q(2,17))),new $e(25,Int32Array.from([6,32,58,84,110]),new pe(26,new Q(8,106),new Q(4,107)),new pe(28,new Q(8,47),new Q(13,48)),new pe(30,new Q(7,24),new Q(22,25)),new pe(30,new Q(22,15),new Q(13,16))),new $e(26,Int32Array.from([6,30,58,86,114]),new pe(28,new Q(10,114),new Q(2,115)),new pe(28,new Q(19,46),new Q(4,47)),new pe(28,new Q(28,22),new Q(6,23)),new pe(30,new Q(33,16),new Q(4,17))),new $e(27,Int32Array.from([6,34,62,90,118]),new pe(30,new Q(8,122),new Q(4,123)),new pe(28,new Q(22,45),new Q(3,46)),new pe(30,new Q(8,23),new Q(26,24)),new pe(30,new Q(12,15),new Q(28,16))),new $e(28,Int32Array.from([6,26,50,74,98,122]),new pe(30,new Q(3,117),new Q(10,118)),new pe(28,new Q(3,45),new Q(23,46)),new pe(30,new Q(4,24),new Q(31,25)),new pe(30,new Q(11,15),new Q(31,16))),new $e(29,Int32Array.from([6,30,54,78,102,126]),new pe(30,new Q(7,116),new Q(7,117)),new pe(28,new Q(21,45),new Q(7,46)),new pe(30,new Q(1,23),new Q(37,24)),new pe(30,new Q(19,15),new Q(26,16))),new $e(30,Int32Array.from([6,26,52,78,104,130]),new pe(30,new Q(5,115),new Q(10,116)),new pe(28,new Q(19,47),new Q(10,48)),new pe(30,new Q(15,24),new Q(25,25)),new pe(30,new Q(23,15),new Q(25,16))),new $e(31,Int32Array.from([6,30,56,82,108,134]),new pe(30,new Q(13,115),new Q(3,116)),new pe(28,new Q(2,46),new Q(29,47)),new pe(30,new Q(42,24),new Q(1,25)),new pe(30,new Q(23,15),new Q(28,16))),new $e(32,Int32Array.from([6,34,60,86,112,138]),new pe(30,new Q(17,115)),new pe(28,new Q(10,46),new Q(23,47)),new pe(30,new Q(10,24),new Q(35,25)),new pe(30,new Q(19,15),new Q(35,16))),new $e(33,Int32Array.from([6,30,58,86,114,142]),new pe(30,new Q(17,115),new Q(1,116)),new pe(28,new Q(14,46),new Q(21,47)),new pe(30,new Q(29,24),new Q(19,25)),new pe(30,new Q(11,15),new Q(46,16))),new $e(34,Int32Array.from([6,34,62,90,118,146]),new pe(30,new Q(13,115),new Q(6,116)),new pe(28,new Q(14,46),new Q(23,47)),new pe(30,new Q(44,24),new Q(7,25)),new pe(30,new Q(59,16),new Q(1,17))),new $e(35,Int32Array.from([6,30,54,78,102,126,150]),new pe(30,new Q(12,121),new Q(7,122)),new pe(28,new Q(12,47),new Q(26,48)),new pe(30,new Q(39,24),new Q(14,25)),new pe(30,new Q(22,15),new Q(41,16))),new $e(36,Int32Array.from([6,24,50,76,102,128,154]),new pe(30,new Q(6,121),new Q(14,122)),new pe(28,new Q(6,47),new Q(34,48)),new pe(30,new Q(46,24),new Q(10,25)),new pe(30,new Q(2,15),new Q(64,16))),new $e(37,Int32Array.from([6,28,54,80,106,132,158]),new pe(30,new Q(17,122),new Q(4,123)),new pe(28,new Q(29,46),new Q(14,47)),new pe(30,new Q(49,24),new Q(10,25)),new pe(30,new Q(24,15),new Q(46,16))),new $e(38,Int32Array.from([6,32,58,84,110,136,162]),new pe(30,new Q(4,122),new Q(18,123)),new pe(28,new Q(13,46),new Q(32,47)),new pe(30,new Q(48,24),new Q(14,25)),new pe(30,new Q(42,15),new Q(32,16))),new $e(39,Int32Array.from([6,26,54,82,110,138,166]),new pe(30,new Q(20,117),new Q(4,118)),new pe(28,new Q(40,47),new Q(7,48)),new pe(30,new Q(43,24),new Q(22,25)),new pe(30,new Q(10,15),new Q(67,16))),new $e(40,Int32Array.from([6,30,58,86,114,142,170]),new pe(30,new Q(19,118),new Q(6,119)),new pe(28,new Q(18,47),new Q(31,48)),new pe(30,new Q(34,24),new Q(34,25)),new pe(30,new Q(20,15),new Q(61,16)))];var Rn;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class It{constructor(s,l){this.value=s,this.isMasked=l}unmaskBitMatrix(s,l){for(let u=0;u<l;u++)for(let f=0;f<l;f++)this.isMasked(u,f)&&s.flip(f,u)}}It.values=new Map([[Rn.DATA_MASK_000,new It(Rn.DATA_MASK_000,(j,s)=>(j+s&1)===0)],[Rn.DATA_MASK_001,new It(Rn.DATA_MASK_001,(j,s)=>(j&1)===0)],[Rn.DATA_MASK_010,new It(Rn.DATA_MASK_010,(j,s)=>s%3===0)],[Rn.DATA_MASK_011,new It(Rn.DATA_MASK_011,(j,s)=>(j+s)%3===0)],[Rn.DATA_MASK_100,new It(Rn.DATA_MASK_100,(j,s)=>(Math.floor(j/2)+Math.floor(s/3)&1)===0)],[Rn.DATA_MASK_101,new It(Rn.DATA_MASK_101,(j,s)=>j*s%6===0)],[Rn.DATA_MASK_110,new It(Rn.DATA_MASK_110,(j,s)=>j*s%6<3)],[Rn.DATA_MASK_111,new It(Rn.DATA_MASK_111,(j,s)=>(j+s+j*s%3&1)===0)]]);class No{constructor(s){const l=s.getHeight();if(l<21||(l&3)!==1)throw new V;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let p=0;p<6;p++)s=this.copyBit(p,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let p=5;p>=0;p--)s=this.copyBit(8,p,s);const l=this.bitMatrix.getHeight();let u=0;const f=l-7;for(let p=l-1;p>=f;p--)u=this.copyBit(8,p,u);for(let p=l-8;p<l;p++)u=this.copyBit(p,8,u);if(this.parsedFormatInfo=Zn.decodeFormatInformation(s,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),l=Math.floor((s-17)/4);if(l<=6)return $e.getVersionForNumber(l);let u=0;const f=s-11;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(v,y,u);let p=$e.decodeVersionInformation(u);if(p!==null&&p.getDimensionForVersion()===s)return this.parsedVersion=p,p;u=0;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(y,v,u);if(p=$e.decodeVersionInformation(u),p!==null&&p.getDimensionForVersion()===s)return this.parsedVersion=p,p;throw new V}copyBit(s,l,u){return(this.isMirror?this.bitMatrix.get(l,s):this.bitMatrix.get(s,l))?u<<1|1:u<<1}readCodewords(){const s=this.readFormatInformation(),l=this.readVersion(),u=It.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,f);const p=l.buildFunctionPattern();let y=!0;const v=new Uint8Array(l.getTotalCodewords());let T=0,C=0,O=0;for(let U=f-1;U>0;U-=2){U===6&&U--;for(let q=0;q<f;q++){const J=y?f-1-q:q;for(let le=0;le<2;le++)p.get(U-le,J)||(O++,C<<=1,this.bitMatrix.get(U-le,J)&&(C|=1),O===8&&(v[T++]=C,O=0,C=0))}y=!y}if(T!==l.getTotalCodewords())throw new V;return v}remask(){if(this.parsedFormatInfo===null)return;const s=It.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let l=0,u=s.getWidth();l<u;l++)for(let f=l+1,p=s.getHeight();f<p;f++)s.get(l,f)!==s.get(f,l)&&(s.flip(f,l),s.flip(l,f))}}class Za{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l,u){if(s.length!==l.getTotalCodewords())throw new _;const f=l.getECBlocksForLevel(u);let p=0;const y=f.getECBlocks();for(const le of y)p+=le.getCount();const v=new Array(p);let T=0;for(const le of y)for(let ue=0;ue<le.getCount();ue++){const fe=le.getDataCodewords(),Ee=f.getECCodewordsPerBlock()+fe;v[T++]=new Za(fe,new Uint8Array(Ee))}const C=v[0].codewords.length;let O=v.length-1;for(;O>=0&&v[O].codewords.length!==C;)O--;O++;const U=C-f.getECCodewordsPerBlock();let q=0;for(let le=0;le<U;le++)for(let ue=0;ue<T;ue++)v[ue].codewords[le]=s[q++];for(let le=O;le<T;le++)v[le].codewords[U]=s[q++];const J=v[0].codewords.length;for(let le=U;le<J;le++)for(let ue=0;ue<T;ue++){const fe=ue<O?le:le+1;v[ue].codewords[fe]=s[q++]}return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Wr;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(Wr||(Wr={}));class ut{constructor(s,l,u,f){this.value=s,this.stringValue=l,this.characterCountBitsForVersions=u,this.bits=f,ut.FOR_BITS.set(f,this),ut.FOR_VALUE.set(s,this)}static forBits(s){const l=ut.FOR_BITS.get(s);if(l===void 0)throw new _;return l}getCharacterCountBits(s){const l=s.getVersionNumber();let u;return l<=9?u=0:l<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof ut))return!1;const l=s;return this.value===l.value}toString(){return this.stringValue}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.TERMINATOR=new ut(Wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ut.NUMERIC=new ut(Wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ut.ALPHANUMERIC=new ut(Wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ut.STRUCTURED_APPEND=new ut(Wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ut.BYTE=new ut(Wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ut.ECI=new ut(Wr.ECI,"ECI",Int32Array.from([0,0,0]),7),ut.KANJI=new ut(Wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ut.FNC1_FIRST_POSITION=new ut(Wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ut.FNC1_SECOND_POSITION=new ut(Wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ut.HANZI=new ut(Wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Sn{static decode(s,l,u,f){const p=new Ya(s);let y=new K;const v=new Array;let T=-1,C=-1;try{let O=null,U=!1,q;do{if(p.available()<4)q=ut.TERMINATOR;else{const J=p.readBits(4);q=ut.forBits(J)}switch(q){case ut.TERMINATOR:break;case ut.FNC1_FIRST_POSITION:case ut.FNC1_SECOND_POSITION:U=!0;break;case ut.STRUCTURED_APPEND:if(p.available()<16)throw new V;T=p.readBits(8),C=p.readBits(8);break;case ut.ECI:const J=Sn.parseECIValue(p);if(O=W.getCharacterSetECIByValue(J),O===null)throw new V;break;case ut.HANZI:const le=p.readBits(4),ue=p.readBits(q.getCharacterCountBits(l));le===Sn.GB2312_SUBSET&&Sn.decodeHanziSegment(p,y,ue);break;default:const fe=p.readBits(q.getCharacterCountBits(l));switch(q){case ut.NUMERIC:Sn.decodeNumericSegment(p,y,fe);break;case ut.ALPHANUMERIC:Sn.decodeAlphanumericSegment(p,y,fe,U);break;case ut.BYTE:Sn.decodeByteSegment(p,y,fe,O,v,f);break;case ut.KANJI:Sn.decodeKanjiSegment(p,y,fe);break;default:throw new V}break}}while(q!==ut.TERMINATOR)}catch{throw new V}return new at(s,y.toString(),v.length===0?null:v,u===null?null:u.toString(),T,C)}static decodeHanziSegment(s,l,u){if(u*13>s.available())throw new V;const f=new Uint8Array(2*u);let p=0;for(;u>0;){const y=s.readBits(13);let v=y/96<<8&4294967295|y%96;v<959?v+=41377:v+=42657,f[p]=v>>8&255,f[p+1]=v&255,p+=2,u--}try{l.append(te.decode(f,ee.GB2312))}catch(y){throw new V(y)}}static decodeKanjiSegment(s,l,u){if(u*13>s.available())throw new V;const f=new Uint8Array(2*u);let p=0;for(;u>0;){const y=s.readBits(13);let v=y/192<<8&4294967295|y%192;v<7936?v+=33088:v+=49472,f[p]=v>>8,f[p+1]=v,p+=2,u--}try{l.append(te.decode(f,ee.SHIFT_JIS))}catch(y){throw new V(y)}}static decodeByteSegment(s,l,u,f,p,y){if(8*u>s.available())throw new V;const v=new Uint8Array(u);for(let C=0;C<u;C++)v[C]=s.readBits(8);let T;f===null?T=ee.guessEncoding(v,y):T=f.getName();try{l.append(te.decode(v,T))}catch(C){throw new V(C)}p.push(v)}static toAlphaNumericChar(s){if(s>=Sn.ALPHANUMERIC_CHARS.length)throw new V;return Sn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,l,u,f){const p=l.length();for(;u>1;){if(s.available()<11)throw new V;const y=s.readBits(11);l.append(Sn.toAlphaNumericChar(Math.floor(y/45))),l.append(Sn.toAlphaNumericChar(y%45)),u-=2}if(u===1){if(s.available()<6)throw new V;l.append(Sn.toAlphaNumericChar(s.readBits(6)))}if(f)for(let y=p;y<l.length();y++)l.charAt(y)==="%"&&(y<l.length()-1&&l.charAt(y+1)==="%"?l.deleteCharAt(y+1):l.setCharAt(y,""))}static decodeNumericSegment(s,l,u){for(;u>=3;){if(s.available()<10)throw new V;const f=s.readBits(10);if(f>=1e3)throw new V;l.append(Sn.toAlphaNumericChar(Math.floor(f/100))),l.append(Sn.toAlphaNumericChar(Math.floor(f/10)%10)),l.append(Sn.toAlphaNumericChar(f%10)),u-=3}if(u===2){if(s.available()<7)throw new V;const f=s.readBits(7);if(f>=100)throw new V;l.append(Sn.toAlphaNumericChar(Math.floor(f/10))),l.append(Sn.toAlphaNumericChar(f%10))}else if(u===1){if(s.available()<4)throw new V;const f=s.readBits(4);if(f>=10)throw new V;l.append(Sn.toAlphaNumericChar(f))}}static parseECIValue(s){const l=s.readBits(8);if((l&128)===0)return l&127;if((l&192)===128){const u=s.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){const u=s.readBits(16);return(l&31)<<16&4294967295|u}throw new V}}Sn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Sn.GB2312_SUBSET=1;class sc{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const l=s[0];s[0]=s[2],s[2]=l}}class oc{constructor(){this.rsDecoder=new Dr(ht.QR_CODE_FIELD_256)}decodeBooleanArray(s,l){return this.decodeBitMatrix(we.parseFromBooleanArray(s),l)}decodeBitMatrix(s,l){const u=new No(s);let f=null;try{return this.decodeBitMatrixParser(u,l)}catch(p){f=p}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const p=this.decodeBitMatrixParser(u,l);return p.setOther(new sc(!0)),p}catch(p){throw f!==null?f:p}}decodeBitMatrixParser(s,l){const u=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),p=s.readCodewords(),y=Za.getDataBlocks(p,u,f);let v=0;for(const O of y)v+=O.getNumDataCodewords();const T=new Uint8Array(v);let C=0;for(const O of y){const U=O.getCodewords(),q=O.getNumDataCodewords();this.correctErrors(U,q);for(let J=0;J<q;J++)T[C++]=U[J]}return Sn.decode(T,u,f,l)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class Zi extends Xe{constructor(s,l,u){super(s,l),this.estimatedModuleSize=u}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=(this.getX()+l)/2,p=(this.getY()+s)/2,y=(this.estimatedModuleSize+u)/2;return new Zi(f,p,y)}}class hr{constructor(s,l,u,f,p,y,v){this.image=s,this.startX=l,this.startY=u,this.width=f,this.height=p,this.moduleSize=y,this.resultPointCallback=v,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,l=this.height,u=this.width,f=s+u,p=this.startY+l/2,y=new Int32Array(3),v=this.image;for(let T=0;T<l;T++){const C=p+((T&1)===0?Math.floor((T+1)/2):-Math.floor((T+1)/2));y[0]=0,y[1]=0,y[2]=0;let O=s;for(;O<f&&!v.get(O,C);)O++;let U=0;for(;O<f;){if(v.get(O,C))if(U===1)y[1]++;else if(U===2){if(this.foundPatternCross(y)){const q=this.handlePossibleCenter(y,C,O);if(q!==null)return q}y[0]=y[2],y[1]=1,y[2]=0,U=1}else y[++U]++;else U===1&&U++,y[U]++;O++}if(this.foundPatternCross(y)){const q=this.handlePossibleCenter(y,C,f);if(q!==null)return q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(s,l){return l-s[2]-s[1]/2}foundPatternCross(s){const l=this.moduleSize,u=l/2;for(let f=0;f<3;f++)if(Math.abs(l-s[f])>=u)return!1;return!0}crossCheckVertical(s,l,u,f){const p=this.image,y=p.getHeight(),v=this.crossCheckStateCount;v[0]=0,v[1]=0,v[2]=0;let T=s;for(;T>=0&&p.get(l,T)&&v[1]<=u;)v[1]++,T--;if(T<0||v[1]>u)return NaN;for(;T>=0&&!p.get(l,T)&&v[0]<=u;)v[0]++,T--;if(v[0]>u)return NaN;for(T=s+1;T<y&&p.get(l,T)&&v[1]<=u;)v[1]++,T++;if(T===y||v[1]>u)return NaN;for(;T<y&&!p.get(l,T)&&v[2]<=u;)v[2]++,T++;if(v[2]>u)return NaN;const C=v[0]+v[1]+v[2];return 5*Math.abs(C-f)>=2*f?NaN:this.foundPatternCross(v)?hr.centerFromEnd(v,T):NaN}handlePossibleCenter(s,l,u){const f=s[0]+s[1]+s[2],p=hr.centerFromEnd(s,u),y=this.crossCheckVertical(l,p,2*s[1],f);if(!isNaN(y)){const v=(s[0]+s[1]+s[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(v,y,p))return C.combineEstimate(y,p,v);const T=new Zi(p,y,v);this.possibleCenters.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return null}}class zi extends Xe{constructor(s,l,u,f){super(s,l),this.estimatedModuleSize=u,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=this.count+1,p=(this.count*this.getX()+l)/f,y=(this.count*this.getY()+s)/f,v=(this.count*this.estimatedModuleSize+u)/f;return new zi(p,y,v,f)}}class ys{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nn{constructor(s,l){this.image=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const l=s!=null&&s.get(ie.TRY_HARDER)!==void 0,u=s!=null&&s.get(ie.PURE_BARCODE)!==void 0,f=this.image,p=f.getHeight(),y=f.getWidth();let v=Math.floor(3*p/(4*Nn.MAX_MODULES));(v<Nn.MIN_SKIP||l)&&(v=Nn.MIN_SKIP);let T=!1;const C=new Int32Array(5);for(let U=v-1;U<p&&!T;U+=v){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let q=0;for(let J=0;J<y;J++)if(f.get(J,U))(q&1)===1&&q++,C[q]++;else if((q&1)===0)if(q===4)if(Nn.foundPatternCross(C)){if(this.handlePossibleCenter(C,U,J,u)===!0)if(v=2,this.hasSkipped===!0)T=this.haveMultiplyConfirmedCenters();else{const ue=this.findRowSkip();ue>C[2]&&(U+=ue-C[2]-v,J=y-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,q=3;continue}q=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,q=3;else C[++q]++;else C[q]++;Nn.foundPatternCross(C)&&this.handlePossibleCenter(C,U,y,u)===!0&&(v=C[0],this.hasSkipped&&(T=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Xe.orderBestPatterns(O),new ys(O)}static centerFromEnd(s,l){return l-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let l=0;for(let p=0;p<5;p++){const y=s[p];if(y===0)return!1;l+=y}if(l<7)return!1;const u=l/7,f=u/2;return Math.abs(u-s[0])<f&&Math.abs(u-s[1])<f&&Math.abs(3*u-s[2])<3*f&&Math.abs(u-s[3])<f&&Math.abs(u-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,l,u,f){const p=this.getCrossCheckStateCount();let y=0;const v=this.image;for(;s>=y&&l>=y&&v.get(l-y,s-y);)p[2]++,y++;if(s<y||l<y)return!1;for(;s>=y&&l>=y&&!v.get(l-y,s-y)&&p[1]<=u;)p[1]++,y++;if(s<y||l<y||p[1]>u)return!1;for(;s>=y&&l>=y&&v.get(l-y,s-y)&&p[0]<=u;)p[0]++,y++;if(p[0]>u)return!1;const T=v.getHeight(),C=v.getWidth();for(y=1;s+y<T&&l+y<C&&v.get(l+y,s+y);)p[2]++,y++;if(s+y>=T||l+y>=C)return!1;for(;s+y<T&&l+y<C&&!v.get(l+y,s+y)&&p[3]<u;)p[3]++,y++;if(s+y>=T||l+y>=C||p[3]>=u)return!1;for(;s+y<T&&l+y<C&&v.get(l+y,s+y)&&p[4]<u;)p[4]++,y++;if(p[4]>=u)return!1;const O=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(O-f)<2*f&&Nn.foundPatternCross(p)}crossCheckVertical(s,l,u,f){const p=this.image,y=p.getHeight(),v=this.getCrossCheckStateCount();let T=s;for(;T>=0&&p.get(l,T);)v[2]++,T--;if(T<0)return NaN;for(;T>=0&&!p.get(l,T)&&v[1]<=u;)v[1]++,T--;if(T<0||v[1]>u)return NaN;for(;T>=0&&p.get(l,T)&&v[0]<=u;)v[0]++,T--;if(v[0]>u)return NaN;for(T=s+1;T<y&&p.get(l,T);)v[2]++,T++;if(T===y)return NaN;for(;T<y&&!p.get(l,T)&&v[3]<u;)v[3]++,T++;if(T===y||v[3]>=u)return NaN;for(;T<y&&p.get(l,T)&&v[4]<u;)v[4]++,T++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=2*f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,T):NaN}crossCheckHorizontal(s,l,u,f){const p=this.image,y=p.getWidth(),v=this.getCrossCheckStateCount();let T=s;for(;T>=0&&p.get(T,l);)v[2]++,T--;if(T<0)return NaN;for(;T>=0&&!p.get(T,l)&&v[1]<=u;)v[1]++,T--;if(T<0||v[1]>u)return NaN;for(;T>=0&&p.get(T,l)&&v[0]<=u;)v[0]++,T--;if(v[0]>u)return NaN;for(T=s+1;T<y&&p.get(T,l);)v[2]++,T++;if(T===y)return NaN;for(;T<y&&!p.get(T,l)&&v[3]<u;)v[3]++,T++;if(T===y||v[3]>=u)return NaN;for(;T<y&&p.get(T,l)&&v[4]<u;)v[4]++,T++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,T):NaN}handlePossibleCenter(s,l,u,f){const p=s[0]+s[1]+s[2]+s[3]+s[4];let y=Nn.centerFromEnd(s,u),v=this.crossCheckVertical(l,Math.floor(y),s[2],p);if(!isNaN(v)&&(y=this.crossCheckHorizontal(Math.floor(y),Math.floor(v),s[2],p),!isNaN(y)&&(!f||this.crossCheckDiagonal(Math.floor(v),Math.floor(y),s[2],p)))){const T=p/7;let C=!1;const O=this.possibleCenters;for(let U=0,q=O.length;U<q;U++){const J=O[U];if(J.aboutEquals(T,v,y)){O[U]=J.combineEstimate(v,y,T),C=!0;break}}if(!C){const U=new zi(y,v,T);O.push(U),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(U)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const u of this.possibleCenters)if(u.getCount()>=Nn.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,l=0;const u=this.possibleCenters.length;for(const y of this.possibleCenters)y.getCount()>=Nn.CENTER_QUORUM&&(s++,l+=y.getEstimatedModuleSize());if(s<3)return!1;const f=l/u;let p=0;for(const y of this.possibleCenters)p+=Math.abs(y.getEstimatedModuleSize()-f);return p<=.05*l}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new se;const l=this.possibleCenters;let u;if(s>3){let f=0,p=0;for(const T of this.possibleCenters){const C=T.getEstimatedModuleSize();f+=C,p+=C*C}u=f/s;let y=Math.sqrt(p/s-u*u);l.sort((T,C)=>{const O=Math.abs(C.getEstimatedModuleSize()-u),U=Math.abs(T.getEstimatedModuleSize()-u);return O<U?-1:O>U?1:0});const v=Math.max(.2*u,y);for(let T=0;T<l.length&&l.length>3;T++){const C=l[T];Math.abs(C.getEstimatedModuleSize()-u)>v&&(l.splice(T,1),T--)}}if(l.length>3){let f=0;for(const p of l)f+=p.getEstimatedModuleSize();u=f/l.length,l.sort((p,y)=>{if(y.getCount()===p.getCount()){const v=Math.abs(y.getEstimatedModuleSize()-u),T=Math.abs(p.getEstimatedModuleSize()-u);return v<T?1:v>T?-1:0}else return y.getCount()-p.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Nn.CENTER_QUORUM=2,Nn.MIN_SKIP=3,Nn.MAX_MODULES=57;class ti{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ie.NEED_RESULT_POINT_CALLBACK);const u=new Nn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(u)}processFinderPatternInfo(s){const l=s.getTopLeft(),u=s.getTopRight(),f=s.getBottomLeft(),p=this.calculateModuleSize(l,u,f);if(p<1)throw new se("No pattern found in proccess finder.");const y=ti.computeDimension(l,u,f,p),v=$e.getProvisionalVersionForDimension(y),T=v.getDimensionForVersion()-7;let C=null;if(v.getAlignmentPatternCenters().length>0){const J=u.getX()-l.getX()+f.getX(),le=u.getY()-l.getY()+f.getY(),ue=1-3/T,fe=Math.floor(l.getX()+ue*(J-l.getX())),Ee=Math.floor(l.getY()+ue*(le-l.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{C=this.findAlignmentInRegion(p,fe,Ee,Fe);break}catch(je){if(!(je instanceof se))throw je}}const O=ti.createTransform(l,u,f,C,y),U=ti.sampleGrid(this.image,O,y);let q;return C===null?q=[f,l,u]:q=[f,l,u,C],new Xn(U,q)}static createTransform(s,l,u,f,p){const y=p-3.5;let v,T,C,O;return f!==null?(v=f.getX(),T=f.getY(),C=y-3,O=C):(v=l.getX()-s.getX()+u.getX(),T=l.getY()-s.getY()+u.getY(),C=y,O=y),Wt.quadrilateralToQuadrilateral(3.5,3.5,y,3.5,C,O,3.5,y,s.getX(),s.getY(),l.getX(),l.getY(),v,T,u.getX(),u.getY())}static sampleGrid(s,l,u){return Er.getInstance().sampleGridWithTransform(s,u,u,l)}static computeDimension(s,l,u,f){const p=pt.round(Xe.distance(s,l)/f),y=pt.round(Xe.distance(s,u)/f);let v=Math.floor((p+y)/2)+7;switch(v&3){case 0:v++;break;case 2:v--;break;case 3:throw new se("Dimensions could be not found.")}return v}calculateModuleSize(s,l,u){return(this.calculateModuleSizeOneWay(s,l)+this.calculateModuleSizeOneWay(s,u))/2}calculateModuleSizeOneWay(s,l){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(l.getX()),Math.floor(l.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(u)?f/7:isNaN(f)?u/7:(u+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,l,u,f){let p=this.sizeOfBlackWhiteBlackRun(s,l,u,f),y=1,v=s-(u-s);v<0?(y=s/(s-v),v=0):v>=this.image.getWidth()&&(y=(this.image.getWidth()-1-s)/(v-s),v=this.image.getWidth()-1);let T=Math.floor(l-(f-l)*y);return y=1,T<0?(y=l/(l-T),T=0):T>=this.image.getHeight()&&(y=(this.image.getHeight()-1-l)/(T-l),T=this.image.getHeight()-1),v=Math.floor(s+(v-s)*y),p+=this.sizeOfBlackWhiteBlackRun(s,l,v,T),p-1}sizeOfBlackWhiteBlackRun(s,l,u,f){const p=Math.abs(f-l)>Math.abs(u-s);if(p){let J=s;s=l,l=J,J=u,u=f,f=J}const y=Math.abs(u-s),v=Math.abs(f-l);let T=-y/2;const C=s<u?1:-1,O=l<f?1:-1;let U=0;const q=u+C;for(let J=s,le=l;J!==q;J+=C){const ue=p?le:J,fe=p?J:le;if(U===1===this.image.get(ue,fe)){if(U===2)return pt.distance(J,le,s,l);U++}if(T+=v,T>0){if(le===f)break;le+=O,T-=y}}return U===2?pt.distance(u+C,f,s,l):NaN}findAlignmentInRegion(s,l,u,f){const p=Math.floor(f*s),y=Math.max(0,l-p),v=Math.min(this.image.getWidth()-1,l+p);if(v-y<s*3)throw new se("Alignment top exceeds estimated module size.");const T=Math.max(0,u-p),C=Math.min(this.image.getHeight()-1,u+p);if(C-T<s*3)throw new se("Alignment bottom exceeds estimated module size.");return new hr(this.image,y,T,v-y,C-T,s,this.resultPointCallback).find()}}class Hr{constructor(){this.decoder=new oc}getDecoder(){return this.decoder}decode(s,l){let u,f;if(l!=null&&l.get(ie.PURE_BARCODE)!==void 0){const T=Hr.extractPureBits(s.getBlackMatrix());u=this.decoder.decodeBitMatrix(T,l),f=Hr.NO_POINTS}else{const T=new ti(s.getBlackMatrix()).detect(l);u=this.decoder.decodeBitMatrix(T.getBits(),l),f=T.getPoints()}u.getOther()instanceof sc&&u.getOther().applyMirroredCorrection(f);const p=new Le(u.getText(),u.getRawBytes(),void 0,f,Re.QR_CODE,void 0),y=u.getByteSegments();y!==null&&p.putMetadata(Ge.BYTE_SEGMENTS,y);const v=u.getECLevel();return v!==null&&p.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v),u.hasStructuredAppend()&&(p.putMetadata(Ge.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),p.putMetadata(Ge.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),p}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l===null||u===null)throw new se;const f=this.moduleSize(l,s);let p=l[1],y=u[1],v=l[0],T=u[0];if(v>=T||p>=y)throw new se;if(y-p!==T-v&&(T=v+(y-p),T>=s.getWidth()))throw new se;const C=Math.round((T-v+1)/f),O=Math.round((y-p+1)/f);if(C<=0||O<=0)throw new se;if(O!==C)throw new se;const U=Math.floor(f/2);p+=U,v+=U;const q=v+Math.floor((C-1)*f)-T;if(q>0){if(q>U)throw new se;v-=q}const J=p+Math.floor((O-1)*f)-y;if(J>0){if(J>U)throw new se;p-=J}const le=new we(C,O);for(let ue=0;ue<O;ue++){const fe=p+Math.floor(ue*f);for(let Ee=0;Ee<C;Ee++)s.get(v+Math.floor(Ee*f),fe)&&le.set(Ee,ue)}return le}static moduleSize(s,l){const u=l.getHeight(),f=l.getWidth();let p=s[0],y=s[1],v=!0,T=0;for(;p<f&&y<u;){if(v!==l.get(p,y)){if(++T===5)break;v=!v}p++,y++}if(p===f||y===u)throw new se;return(p-s[0])/7}}Hr.NO_POINTS=new Array;class xt{PDF417Common(){}static getBitCountSum(s){return pt.sum(s)}static toIntArray(s){if(s==null||!s.length)return xt.EMPTY_INT_ARRAY;const l=new Int32Array(s.length);let u=0;for(const f of s)l[u++]=f;return l}static getCodeword(s){const l=z.binarySearch(xt.SYMBOL_TABLE,s&262143);return l<0?-1:(xt.CODEWORD_TABLE[l]-1)%xt.NUMBER_OF_CODEWORDS}}xt.NUMBER_OF_CODEWORDS=929,xt.MAX_CODEWORDS_IN_BARCODE=xt.NUMBER_OF_CODEWORDS-1,xt.MIN_ROWS_IN_BARCODE=3,xt.MAX_ROWS_IN_BARCODE=90,xt.MODULES_IN_CODEWORD=17,xt.MODULES_IN_STOP_PATTERN=18,xt.BARS_IN_MODULE=8,xt.EMPTY_INT_ARRAY=new Int32Array([]),xt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class vu{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class gt{static detectMultiple(s,l,u){let f=s.getBlackMatrix(),p=gt.detect(u,f);return p.length||(f=f.clone(),f.rotate180(),p=gt.detect(u,f)),new vu(f,p)}static detect(s,l){const u=new Array;let f=0,p=0,y=!1;for(;f<l.getHeight();){const v=gt.findVertices(l,f,p);if(v[0]==null&&v[3]==null){if(!y)break;y=!1,p=0;for(const T of u)T[1]!=null&&(f=Math.trunc(Math.max(f,T[1].getY()))),T[3]!=null&&(f=Math.max(f,Math.trunc(T[3].getY())));f+=gt.ROW_STEP;continue}if(y=!0,u.push(v),!s)break;v[2]!=null?(p=Math.trunc(v[2].getX()),f=Math.trunc(v[2].getY())):(p=Math.trunc(v[4].getX()),f=Math.trunc(v[4].getY()))}return u}static findVertices(s,l,u){const f=s.getHeight(),p=s.getWidth(),y=new Array(8);return gt.copyToResult(y,gt.findRowsWithPattern(s,f,p,l,u,gt.START_PATTERN),gt.INDEXES_START_PATTERN),y[4]!=null&&(u=Math.trunc(y[4].getX()),l=Math.trunc(y[4].getY())),gt.copyToResult(y,gt.findRowsWithPattern(s,f,p,l,u,gt.STOP_PATTERN),gt.INDEXES_STOP_PATTERN),y}static copyToResult(s,l,u){for(let f=0;f<u.length;f++)s[u[f]]=l[f]}static findRowsWithPattern(s,l,u,f,p,y){const v=new Array(4);let T=!1;const C=new Int32Array(y.length);for(;f<l;f+=gt.ROW_STEP){let U=gt.findGuardPattern(s,p,f,u,!1,y,C);if(U!=null){for(;f>0;){const q=gt.findGuardPattern(s,p,--f,u,!1,y,C);if(q!=null)U=q;else{f++;break}}v[0]=new Xe(U[0],f),v[1]=new Xe(U[1],f),T=!0;break}}let O=f+1;if(T){let U=0,q=Int32Array.from([Math.trunc(v[0].getX()),Math.trunc(v[1].getX())]);for(;O<l;O++){const J=gt.findGuardPattern(s,q[0],O,u,!1,y,C);if(J!=null&&Math.abs(q[0]-J[0])<gt.MAX_PATTERN_DRIFT&&Math.abs(q[1]-J[1])<gt.MAX_PATTERN_DRIFT)q=J,U=0;else{if(U>gt.SKIPPED_ROW_COUNT_MAX)break;U++}}O-=U+1,v[2]=new Xe(q[0],O),v[3]=new Xe(q[1],O)}return O-f<gt.BARCODE_MIN_HEIGHT&&z.fill(v,null),v}static findGuardPattern(s,l,u,f,p,y,v){z.fillWithin(v,0,v.length,0);let T=l,C=0;for(;s.get(T,u)&&T>0&&C++<gt.MAX_PIXEL_DRIFT;)T--;let O=T,U=0,q=y.length;for(let J=p;O<f;O++)if(s.get(O,u)!==J)v[U]++;else{if(U===q-1){if(gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return new Int32Array([T,O]);T+=v[0]+v[1],D.arraycopy(v,2,v,0,U-1),v[U-1]=0,v[U]=0,U--}else U++;v[U]=1,J=!J}return U===q-1&&gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE?new Int32Array([T,O-1]):null}static patternMatchVariance(s,l,u){let f=s.length,p=0,y=0;for(let C=0;C<f;C++)p+=s[C],y+=l[C];if(p<y)return 1/0;let v=p/y;u*=v;let T=0;for(let C=0;C<f;C++){let O=s[C],U=l[C]*v,q=O>U?O-U:U-O;if(q>u)return 1/0;T+=q}return T/p}}gt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),gt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),gt.MAX_AVG_VARIANCE=.42,gt.MAX_INDIVIDUAL_VARIANCE=.8,gt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),gt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),gt.MAX_PIXEL_DRIFT=3,gt.MAX_PATTERN_DRIFT=5,gt.SKIPPED_ROW_COUNT_MAX=25,gt.ROW_STEP=5,gt.BARCODE_MIN_HEIGHT=10;class Ar{constructor(s,l){if(l.length===0)throw new _;this.field=s;let u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let p of this.coefficients)f=this.field.add(f,p);return f}let l=this.coefficients[0],u=this.coefficients.length;for(let f=1;f<u;f++)l=this.field.add(this.field.multiply(s,l),this.coefficients[f]);return l}add(s){if(!this.field.equals(s.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){let y=l;l=u,u=y}let f=new Int32Array(u.length),p=u.length-l.length;D.arraycopy(u,0,f,0,p);for(let y=p;y<u.length;y++)f[y]=this.field.add(l[y-p],u[y]);return new Ar(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new _("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Ar?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Ar(this.field,new Int32Array([0]));let l=this.coefficients,u=l.length,f=s.coefficients,p=f.length,y=new Int32Array(u+p-1);for(let v=0;v<u;v++){let T=l[v];for(let C=0;C<p;C++)y[v+C]=this.field.add(y[v+C],this.field.multiply(T,f[C]))}return new Ar(this.field,y)}negative(){let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.subtract(0,this.coefficients[u]);return new Ar(this.field,l)}multiplyScalar(s){if(s===0)return new Ar(this.field,new Int32Array([0]));if(s===1)return this;let l=this.coefficients.length,u=new Int32Array(l);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new Ar(this.field,u)}multiplyByMonomial(s,l){if(s<0)throw new _;if(l===0)return new Ar(this.field,new Int32Array([0]));let u=this.coefficients.length,f=new Int32Array(u+s);for(let p=0;p<u;p++)f[p]=this.field.multiply(this.coefficients[p],l);return new Ar(this.field,f)}toString(){let s=new K;for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);u!==0&&(u<0?(s.append(" - "),u=-u):s.length()>0&&s.append(" + "),(l===0||u!==1)&&s.append(u),l!==0&&(l===1?s.append("x"):(s.append("x^"),s.append(l))))}return s.toString()}}class _u{add(s,l){return(s+l)%this.modulus}subtract(s,l){return(this.modulus+s-l)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new _;return this.logTable[s]}inverse(s){if(s===0)throw new bt;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class xs extends _u{constructor(s,l){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let u=1;for(let f=0;f<s;f++)this.expTable[f]=u,u=u*l%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new Ar(this,new Int32Array([0])),this.one=new Ar(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new _;if(l===0)return this.zero;let u=new Int32Array(s+1);return u[0]=l,new Ar(this,u)}}xs.PDF417_GF=new xs(xt.NUMBER_OF_CODEWORDS,3);class ko{constructor(){this.field=xs.PDF417_GF}decode(s,l,u){let f=new Ar(this.field,s),p=new Int32Array(l),y=!1;for(let le=l;le>0;le--){let ue=f.evaluateAt(this.field.exp(le));p[l-le]=ue,ue!==0&&(y=!0)}if(!y)return 0;let v=this.field.getOne();if(u!=null)for(const le of u){let ue=this.field.exp(s.length-1-le),fe=new Ar(this.field,new Int32Array([this.field.subtract(0,ue),1]));v=v.multiply(fe)}let T=new Ar(this.field,p),C=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),T,l),O=C[0],U=C[1],q=this.findErrorLocations(O),J=this.findErrorMagnitudes(U,O,q);for(let le=0;le<q.length;le++){let ue=s.length-1-this.field.log(q[le]);if(ue<0)throw R.getChecksumInstance();s[ue]=this.field.subtract(s[ue],J[le])}return q.length}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){let q=s;s=l,l=q}let f=s,p=l,y=this.field.getZero(),v=this.field.getOne();for(;p.getDegree()>=Math.round(u/2);){let q=f,J=y;if(f=p,y=v,f.isZero())throw R.getChecksumInstance();p=q;let le=this.field.getZero(),ue=f.getCoefficient(f.getDegree()),fe=this.field.inverse(ue);for(;p.getDegree()>=f.getDegree()&&!p.isZero();){let Ee=p.getDegree()-f.getDegree(),Fe=this.field.multiply(p.getCoefficient(p.getDegree()),fe);le=le.add(this.field.buildMonomial(Ee,Fe)),p=p.subtract(f.multiplyByMonomial(Ee,Fe))}v=le.multiply(y).subtract(J).negative()}let T=v.getCoefficient(0);if(T===0)throw R.getChecksumInstance();let C=this.field.inverse(T),O=v.multiply(C),U=p.multiply(C);return[O,U]}findErrorLocations(s){let l=s.getDegree(),u=new Int32Array(l),f=0;for(let p=1;p<this.field.getSize()&&f<l;p++)s.evaluateAt(p)===0&&(u[f]=this.field.inverse(p),f++);if(f!==l)throw R.getChecksumInstance();return u}findErrorMagnitudes(s,l,u){let f=l.getDegree(),p=new Int32Array(f);for(let C=1;C<=f;C++)p[f-C]=this.field.multiply(C,l.getCoefficient(C));let y=new Ar(this.field,p),v=u.length,T=new Int32Array(v);for(let C=0;C<v;C++){let O=this.field.inverse(u[C]),U=this.field.subtract(0,s.evaluateAt(O)),q=this.field.inverse(y.evaluateAt(O));T[C]=this.field.multiply(U,q)}return T}}class Bs{constructor(s,l,u,f,p){s instanceof Bs?this.constructor_2(s):this.constructor_1(s,l,u,f,p)}constructor_1(s,l,u,f,p){const y=l==null||u==null,v=f==null||p==null;if(y&&v)throw new se;y?(l=new Xe(0,f.getY()),u=new Xe(0,p.getY())):v&&(f=new Xe(s.getWidth()-1,l.getY()),p=new Xe(s.getWidth()-1,u.getY())),this.image=s,this.topLeft=l,this.bottomLeft=u,this.topRight=f,this.bottomRight=p,this.minX=Math.trunc(Math.min(l.getX(),u.getX())),this.maxX=Math.trunc(Math.max(f.getX(),p.getX())),this.minY=Math.trunc(Math.min(l.getY(),f.getY())),this.maxY=Math.trunc(Math.max(u.getY(),p.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,l){return s==null?l:l==null?s:new Bs(s.image,s.topLeft,s.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(s,l,u){let f=this.topLeft,p=this.bottomLeft,y=this.topRight,v=this.bottomRight;if(s>0){let T=u?this.topLeft:this.topRight,C=Math.trunc(T.getY()-s);C<0&&(C=0);let O=new Xe(T.getX(),C);u?f=O:y=O}if(l>0){let T=u?this.bottomLeft:this.bottomRight,C=Math.trunc(T.getY()+l);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let O=new Xe(T.getX(),C);u?p=O:v=O}return new Bs(this.image,f,p,y,v)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ws{constructor(s,l,u,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=l,this.rowCountLowerPart=u,this.rowCount=l+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ci{constructor(){this.buffer=""}static form(s,l){let u=-1;function f(y,v,T,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let q=O?parseInt(O.substr(1)):void 0,J;switch(U){case"s":J=l[u];break;case"c":J=l[u][0];break;case"f":J=parseFloat(l[u]).toFixed(y);break;case"p":J=parseFloat(l[u]).toPrecision(y);break;case"e":J=parseFloat(l[u]).toExponential(y);break;case"x":J=parseInt(l[u]).toString(q||16);break;case"d":J=parseFloat(parseInt(l[u],q||10).toPrecision(y)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(q);let le=parseInt(T),ue=T&&T[0]+""=="0"?"0":" ";for(;J.length<le;)J=v!==void 0?J+ue:ue+J;return J}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(p,f)}format(s,...l){this.buffer+=ci.form(s,l)}toString(){return this.buffer}}class Wi{constructor(s){this.boundingBox=new Bs(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let l=this.getCodeword(s);if(l!=null)return l;for(let u=1;u<Wi.MAX_NEARBY_DISTANCE;u++){let f=this.imageRowToCodewordIndex(s)-u;if(f>=0&&(l=this.codewords[f],l!=null)||(f=this.imageRowToCodewordIndex(s)+u,f<this.codewords.length&&(l=this.codewords[f],l!=null)))return l}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,l){this.codewords[this.imageRowToCodewordIndex(s)]=l}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new ci;let l=0;for(const u of this.codewords){if(u==null){s.format("%3d:    |   %n",l++);continue}s.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return s.toString()}}Wi.MAX_NEARBY_DISTANCE=5;class Ji{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let l=this.values.get(s);l==null&&(l=0),l++,this.values.set(s,l)}getValue(){let s=-1,l=new Array;for(const[u,f]of this.values.entries()){const p={getKey:()=>u,getValue:()=>f};p.getValue()>s?(s=p.getValue(),l=[],l.push(p.getKey())):p.getValue()===s&&l.push(p.getKey())}return xt.toIntArray(l)}getConfidence(s){return this.values.get(s)}}class kn extends Wi{constructor(s,l){super(s),this._isLeft=l}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,s);let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),p=this._isLeft?u.getBottomLeft():u.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.imageRowToCodewordIndex(Math.trunc(p.getY())),T=-1,C=1,O=0;for(let U=y;U<v;U++){if(l[U]==null)continue;let q=l[U],J=q.getRowNumber()-T;if(J===0)O++;else if(J===1)C=Math.max(C,O),O=1,T=q.getRowNumber();else if(J<0||q.getRowNumber()>=s.getRowCount()||J>U)l[U]=null;else{let le;C>2?le=(C-2)*J:le=J;let ue=le>=U;for(let fe=1;fe<=le&&!ue;fe++)ue=l[U-fe]!=null;ue?l[U]=null:(T=q.getRowNumber(),O=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let l=new Int32Array(s.getRowCount());for(let u of this.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=l.length)continue;l[f]++}return l}adjustIncompleteIndicatorColumnRowNumbers(s){let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.getCodewords(),T=-1;for(let C=p;C<y;C++){if(v[C]==null)continue;let O=v[C];O.setRowNumberAsRowIndicatorColumn();let U=O.getRowNumber()-T;U===0||(U===1?T=O.getRowNumber():O.getRowNumber()>=s.getRowCount()?v[C]=null:T=O.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),l=new Ji,u=new Ji,f=new Ji,p=new Ji;for(let v of s){if(v==null)continue;v.setRowNumberAsRowIndicatorColumn();let T=v.getValue()%30,C=v.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:u.setValue(T*3+1);break;case 1:p.setValue(T/3),f.setValue(T%3);break;case 2:l.setValue(T+1);break}}if(l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||p.getValue().length===0||l.getValue()[0]<1||u.getValue()[0]+f.getValue()[0]<xt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+f.getValue()[0]>xt.MAX_ROWS_IN_BARCODE)return null;let y=new ws(l.getValue()[0],u.getValue()[0],f.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(s,y),y}removeIncorrectCodewords(s,l){for(let u=0;u<s.length;u++){let f=s[u];if(s[u]==null)continue;let p=f.getValue()%30,y=f.getRowNumber();if(y>l.getRowCount()){s[u]=null;continue}switch(this._isLeft||(y+=2),y%3){case 0:p*3+1!==l.getRowCountUpperPart()&&(s[u]=null);break;case 1:(Math.trunc(p/3)!==l.getErrorCorrectionLevel()||p%3!==l.getRowCountLowerPart())&&(s[u]=null);break;case 2:p+1!==l.getColumnCount()&&(s[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ha{constructor(s,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=xt.MAX_CODEWORDS_IN_BARCODE,l;do l=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let u=this.detectionResultColumns[l].getCodewords();for(let f=0;f<u.length;f++)u[f]!=null&&(u[f].hasValidRowNumber()||this.adjustRowNumbers(l,f,u))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<s.length;u++)if(s[u]!=null&&l[u]!=null&&s[u].getRowNumber()===l[u].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let p=this.detectionResultColumns[f].getCodewords()[u];p!=null&&(p.setRowNumber(s[u].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),p=0;for(let y=this.barcodeColumnCount+1;y>0&&p<this.ADJUST_ROW_NUMBER_SKIP;y--){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(p=ha.adjustRowNumberIfValid(f,p,v),v.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,l=this.detectionResultColumns[0].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),p=0;for(let y=1;y<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;y++){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(p=ha.adjustRowNumberIfValid(f,p,v),v.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,l,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(s)?(u.setRowNumber(s),l=0):++l),l}adjustRowNumbers(s,l,u){if(!this.detectionResultColumns[s-1])return;let f=u[l],p=this.detectionResultColumns[s-1].getCodewords(),y=p;this.detectionResultColumns[s+1]!=null&&(y=this.detectionResultColumns[s+1].getCodewords());let v=new Array(14);v[2]=p[l],v[3]=y[l],l>0&&(v[0]=u[l-1],v[4]=p[l-1],v[5]=y[l-1]),l>1&&(v[8]=u[l-2],v[10]=p[l-2],v[11]=y[l-2]),l<u.length-1&&(v[1]=u[l+1],v[6]=p[l+1],v[7]=y[l+1]),l<u.length-2&&(v[9]=u[l+2],v[12]=p[l+2],v[13]=y[l+2]);for(let T of v)if(ha.adjustRowNumber(f,T))return}static adjustRowNumber(s,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===s.getBucket()?(s.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,l){this.detectionResultColumns[s]=l}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new ci;for(let u=0;u<s.getCodewords().length;u++){l.format("CW %3d:",u);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){l.format("    |   ");continue}let p=this.detectionResultColumns[f].getCodewords()[u];if(p==null){l.format("    |   ");continue}l.format(" %3d|%3d",p.getRowNumber(),p.getValue())}l.format("%n")}return l.toString()}}class oo{constructor(s,l,u,f){this.rowNumber=oo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==oo.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}oo.BARCODE_ROW_UNKNOWN=-1;class fr{static initialize(){for(let s=0;s<xt.SYMBOL_TABLE.length;s++){let l=xt.SYMBOL_TABLE[s],u=l&1;for(let f=0;f<xt.BARS_IN_MODULE;f++){let p=0;for(;(l&1)===u;)p+=1,l>>=1;u=l&1,fr.RATIOS_TABLE[s]||(fr.RATIOS_TABLE[s]=new Array(xt.BARS_IN_MODULE)),fr.RATIOS_TABLE[s][xt.BARS_IN_MODULE-f-1]=Math.fround(p/xt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let l=fr.getDecodedCodewordValue(fr.sampleBitCounts(s));return l!==-1?l:fr.getClosestDecodedValue(s)}static sampleBitCounts(s){let l=pt.sum(s),u=new Int32Array(xt.BARS_IN_MODULE),f=0,p=0;for(let y=0;y<xt.MODULES_IN_CODEWORD;y++){let v=l/(2*xt.MODULES_IN_CODEWORD)+y*l/xt.MODULES_IN_CODEWORD;p+s[f]<=v&&(p+=s[f],f++),u[f]++}return u}static getDecodedCodewordValue(s){let l=fr.getBitValue(s);return xt.getCodeword(l)===-1?-1:l}static getBitValue(s){let l=0;for(let u=0;u<s.length;u++)for(let f=0;f<s[u];f++)l=l<<1|(u%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(s){let l=pt.sum(s),u=new Array(xt.BARS_IN_MODULE);if(l>1)for(let y=0;y<u.length;y++)u[y]=Math.fround(s[y]/l);let f=xi.MAX_VALUE,p=-1;this.bSymbolTableReady||fr.initialize();for(let y=0;y<fr.RATIOS_TABLE.length;y++){let v=0,T=fr.RATIOS_TABLE[y];for(let C=0;C<xt.BARS_IN_MODULE;C++){let O=Math.fround(T[C]-u[C]);if(v+=Math.fround(O*O),v>=f)break}v<f&&(f=v,p=xt.SYMBOL_TABLE[y])}return p}}fr.bSymbolTableReady=!1,fr.RATIOS_TABLE=new Array(xt.SYMBOL_TABLE.length).map(j=>new Array(xt.BARS_IN_MODULE));class fa{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Ja{static parseLong(s,l=void 0){return parseInt(s,l)}}class Ii extends g{}Ii.kind="NullPointerException";class el{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,l,u){if(s==null)throw new Ii;if(l<0||l>s.length||u<0||l+u>s.length||l+u<0)throw new L;if(u===0)return;for(let f=0;f<u;f++)this.write(s[l+f])}flush(){}close(){}}class Ti extends g{}class ac extends el{constructor(s=32){if(super(),this.count=0,s<0)throw new _("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let u=this.buf.length<<1;if(u-s<0&&(u=s),u<0){if(s<0)throw new Ti;u=H.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,u)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,l,u){if(l<0||l>s.length||u<0||l+u-s.length>0)throw new L;this.ensureCapacity(this.count+u),D.arraycopy(s,l,this.buf,this.count,u),this.count+=u}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var en;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(en||(en={}));function vs(){if(typeof window<"u")return window.BigInt||null;if(typeof um<"u")return um.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Po;function Dn(j){if(typeof Po>"u"&&(Po=vs()),Po===null)throw new Error("BigInt is not supported!");return Po(j)}function _s(){let j=[];j[0]=Dn(1);let s=Dn(900);j[1]=s;for(let l=2;l<16;l++)j[l]=j[l-1]*s;return j}class _e{static decode(s,l){let u=new K(""),f=W.ISO8859_1;u.enableDecoding(f);let p=1,y=s[p++],v=new fa;for(;p<s[0];){switch(y){case _e.TEXT_COMPACTION_MODE_LATCH:p=_e.textCompaction(s,p,u);break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:p=_e.byteCompaction(y,s,f,p,u);break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[p++]);break;case _e.NUMERIC_COMPACTION_MODE_LATCH:p=_e.numericCompaction(s,p,u);break;case _e.ECI_CHARSET:W.getCharacterSetECIByValue(s[p++]);break;case _e.ECI_GENERAL_PURPOSE:p+=2;break;case _e.ECI_USER_DEFINED:p++;break;case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=_e.decodeMacroBlock(s,p,v);break;case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:throw new V;default:p--,p=_e.textCompaction(s,p,u);break}if(p<s.length)y=s[p++];else throw V.getFormatInstance()}if(u.length()===0)throw V.getFormatInstance();let T=new at(null,u.toString(),null,l);return T.setOther(v),T}static decodeMacroBlock(s,l,u){if(l+_e.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw V.getFormatInstance();let f=new Int32Array(_e.NUMBER_OF_SEQUENCE_CODEWORDS);for(let v=0;v<_e.NUMBER_OF_SEQUENCE_CODEWORDS;v++,l++)f[v]=s[l];u.setSegmentIndex(H.parseInt(_e.decodeBase900toBase10(f,_e.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new K;l=_e.textCompaction(s,l,p),u.setFileId(p.toString());let y=-1;for(s[l]===_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(y=l+1);l<s[0];)switch(s[l]){case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,s[l]){case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let v=new K;l=_e.textCompaction(s,l+1,v),u.setFileName(v.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let T=new K;l=_e.textCompaction(s,l+1,T),u.setSender(T.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new K;l=_e.textCompaction(s,l+1,C),u.setAddressee(C.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new K;l=_e.numericCompaction(s,l+1,O),u.setSegmentCount(H.parseInt(O.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let U=new K;l=_e.numericCompaction(s,l+1,U),u.setTimestamp(Ja.parseLong(U.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let q=new K;l=_e.numericCompaction(s,l+1,q),u.setChecksum(H.parseInt(q.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let J=new K;l=_e.numericCompaction(s,l+1,J),u.setFileSize(Ja.parseLong(J.toString()));break;default:throw V.getFormatInstance()}break;case _e.MACRO_PDF417_TERMINATOR:l++,u.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(y!==-1){let v=l-y;u.isLastSegment()&&v--,u.setOptionalData(z.copyOfRange(s,y,y+v))}return l}static textCompaction(s,l,u){let f=new Int32Array((s[0]-l)*2),p=new Int32Array((s[0]-l)*2),y=0,v=!1;for(;l<s[0]&&!v;){let T=s[l++];if(T<_e.TEXT_COMPACTION_MODE_LATCH)f[y]=T/30,f[y+1]=T%30,y+=2;else switch(T){case _e.TEXT_COMPACTION_MODE_LATCH:f[y++]=_e.TEXT_COMPACTION_MODE_LATCH;break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,v=!0;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[y]=_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,T=s[l++],p[y]=T,y++;break}}return _e.decodeTextCompaction(f,p,y,u),l}static decodeTextCompaction(s,l,u,f){let p=en.ALPHA,y=en.ALPHA,v=0;for(;v<u;){let T=s[v],C="";switch(p){case en.ALPHA:if(T<26)C=String.fromCharCode(65+T);else switch(T){case 26:C=" ";break;case _e.LL:p=en.LOWER;break;case _e.ML:p=en.MIXED;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.LOWER:if(T<26)C=String.fromCharCode(97+T);else switch(T){case 26:C=" ";break;case _e.AS:y=p,p=en.ALPHA_SHIFT;break;case _e.ML:p=en.MIXED;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.MIXED:if(T<_e.PL)C=_e.MIXED_CHARS[T];else switch(T){case _e.PL:p=en.PUNCT;break;case 26:C=" ";break;case _e.LL:p=en.LOWER;break;case _e.AL:p=en.ALPHA;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.PUNCT:if(T<_e.PAL)C=_e.PUNCT_CHARS[T];else switch(T){case _e.PAL:p=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.ALPHA_SHIFT:if(p=y,T<26)C=String.fromCharCode(65+T);else switch(T){case 26:C=" ";break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.PUNCT_SHIFT:if(p=y,T<_e.PAL)C=_e.PUNCT_CHARS[T];else switch(T){case _e.PAL:p=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break}C!==""&&f.append(C),v++}}static byteCompaction(s,l,u,f,p){let y=new ac,v=0,T=0,C=!1;switch(s){case _e.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),U=l[f++];for(;f<l[0]&&!C;)switch(O[v++]=U,T=900*T+U,U=l[f++],U){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break;default:if(v%5===0&&v>0){for(let q=0;q<6;++q)y.write(Number(Dn(T)>>Dn(8*(5-q))));T=0,v=0}break}f===l[0]&&U<_e.TEXT_COMPACTION_MODE_LATCH&&(O[v++]=U);for(let q=0;q<v;q++)y.write(O[q]);break;case _e.BYTE_COMPACTION_MODE_LATCH_6:for(;f<l[0]&&!C;){let q=l[f++];if(q<_e.TEXT_COMPACTION_MODE_LATCH)v++,T=900*T+q;else switch(q){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break}if(v%5===0&&v>0){for(let J=0;J<6;++J)y.write(Number(Dn(T)>>Dn(8*(5-J))));T=0,v=0}}break}return p.append(te.decode(y.toByteArray(),u)),f}static numericCompaction(s,l,u){let f=0,p=!1,y=new Int32Array(_e.MAX_NUMERIC_CODEWORDS);for(;l<s[0]&&!p;){let v=s[l++];if(l===s[0]&&(p=!0),v<_e.TEXT_COMPACTION_MODE_LATCH)y[f]=v,f++;else switch(v){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,p=!0;break}(f%_e.MAX_NUMERIC_CODEWORDS===0||v===_e.NUMERIC_COMPACTION_MODE_LATCH||p)&&f>0&&(u.append(_e.decodeBase900toBase10(y,f)),f=0)}return l}static decodeBase900toBase10(s,l){let u=Dn(0);for(let p=0;p<l;p++)u+=_e.EXP900[l-p-1]*Dn(s[p]);let f=u.toString();if(f.charAt(0)!=="1")throw new V;return f.substring(1)}}_e.TEXT_COMPACTION_MODE_LATCH=900,_e.BYTE_COMPACTION_MODE_LATCH=901,_e.NUMERIC_COMPACTION_MODE_LATCH=902,_e.BYTE_COMPACTION_MODE_LATCH_6=924,_e.ECI_USER_DEFINED=925,_e.ECI_GENERAL_PURPOSE=926,_e.ECI_CHARSET=927,_e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,_e.MACRO_PDF417_TERMINATOR=922,_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,_e.MAX_NUMERIC_CODEWORDS=15,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,_e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,_e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,_e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,_e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,_e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,_e.PL=25,_e.LL=27,_e.AS=27,_e.ML=28,_e.AL=28,_e.PS=29,_e.PAL=29,_e.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,_e.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",_e.EXP900=vs()?_s():[],_e.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(s,l,u,f,p,y,v){let T=new Bs(s,l,u,f,p),C=null,O=null,U;for(let le=!0;;le=!1){if(l!=null&&(C=_t.getRowIndicatorColumn(s,T,l,!0,y,v)),f!=null&&(O=_t.getRowIndicatorColumn(s,T,f,!1,y,v)),U=_t.merge(C,O),U==null)throw se.getNotFoundInstance();let ue=U.getBoundingBox();if(le&&ue!=null&&(ue.getMinY()<T.getMinY()||ue.getMaxY()>T.getMaxY()))T=ue;else break}U.setBoundingBox(T);let q=U.getBarcodeColumnCount()+1;U.setDetectionResultColumn(0,C),U.setDetectionResultColumn(q,O);let J=C!=null;for(let le=1;le<=q;le++){let ue=J?le:q-le;if(U.getDetectionResultColumn(ue)!==void 0)continue;let fe;ue===0||ue===q?fe=new kn(T,ue===0):fe=new Wi(T),U.setDetectionResultColumn(ue,fe);let Ee=-1,Fe=Ee;for(let je=T.getMinY();je<=T.getMaxY();je++){if(Ee=_t.getStartColumn(U,ue,je,J),Ee<0||Ee>T.getMaxX()){if(Fe===-1)continue;Ee=Fe}let Oe=_t.detectCodeword(s,T.getMinX(),T.getMaxX(),J,Ee,je,y,v);Oe!=null&&(fe.setCodeword(je,Oe),Fe=Ee,y=Math.min(y,Oe.getWidth()),v=Math.max(v,Oe.getWidth()))}}return _t.createDecoderResult(U)}static merge(s,l){if(s==null&&l==null)return null;let u=_t.getBarcodeMetadata(s,l);if(u==null)return null;let f=Bs.merge(_t.adjustBoundingBox(s),_t.adjustBoundingBox(l));return new ha(u,f)}static adjustBoundingBox(s){if(s==null)return null;let l=s.getRowHeights();if(l==null)return null;let u=_t.getMax(l),f=0;for(let v of l)if(f+=u-v,v>0)break;let p=s.getCodewords();for(let v=0;f>0&&p[v]==null;v++)f--;let y=0;for(let v=l.length-1;v>=0&&(y+=u-l[v],!(l[v]>0));v--);for(let v=p.length-1;y>0&&p[v]==null;v--)y--;return s.getBoundingBox().addMissingRows(f,y,s.isLeft())}static getMax(s){let l=-1;for(let u of s)l=Math.max(l,u);return l}static getBarcodeMetadata(s,l){let u;if(s==null||(u=s.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let f;return l==null||(f=l.getBarcodeMetadata())==null?u:u.getColumnCount()!==f.getColumnCount()&&u.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&u.getRowCount()!==f.getRowCount()?null:u}static getRowIndicatorColumn(s,l,u,f,p,y){let v=new kn(l,f);for(let T=0;T<2;T++){let C=T===0?1:-1,O=Math.trunc(Math.trunc(u.getX()));for(let U=Math.trunc(Math.trunc(u.getY()));U<=l.getMaxY()&&U>=l.getMinY();U+=C){let q=_t.detectCodeword(s,0,s.getWidth(),f,O,U,p,y);q!=null&&(v.setCodeword(U,q),f?O=q.getStartX():O=q.getEndX())}}return v}static adjustCodewordCount(s,l){let u=l[0][1],f=u.getValue(),p=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-_t.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(p<1||p>xt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();u.setValue(p)}else f[0]!==p&&u.setValue(p)}static createDecoderResult(s){let l=_t.createBarcodeMatrix(s);_t.adjustCodewordCount(s,l);let u=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),p=[],y=new Array;for(let T=0;T<s.getBarcodeRowCount();T++)for(let C=0;C<s.getBarcodeColumnCount();C++){let O=l[T][C+1].getValue(),U=T*s.getBarcodeColumnCount()+C;O.length===0?u.push(U):O.length===1?f[U]=O[0]:(y.push(U),p.push(O))}let v=new Array(p.length);for(let T=0;T<v.length;T++)v[T]=p[T];return _t.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,xt.toIntArray(u),xt.toIntArray(y),v)}static createDecoderResultFromAmbiguousValues(s,l,u,f,p){let y=new Int32Array(f.length),v=100;for(;v-- >0;){for(let T=0;T<y.length;T++)l[f[T]]=p[T][y[T]];try{return _t.decodeCodewords(l,s,u)}catch(T){if(!(T instanceof R))throw T}if(y.length===0)throw R.getChecksumInstance();for(let T=0;T<y.length;T++)if(y[T]<p[T].length-1){y[T]++;break}else if(y[T]=0,T===y.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(s){let l=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<l.length;f++)for(let p=0;p<l[f].length;p++)l[f][p]=new Ji;let u=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let p of f.getCodewords())if(p!=null){let y=p.getRowNumber();if(y>=0){if(y>=l.length)continue;l[y][u].setValue(p.getValue())}}}u++}return l}static isValidBarcodeColumn(s,l){return l>=0&&l<=s.getBarcodeColumnCount()+1}static getStartColumn(s,l,u,f){let p=f?1:-1,y=null;if(_t.isValidBarcodeColumn(s,l-p)&&(y=s.getDetectionResultColumn(l-p).getCodeword(u)),y!=null)return f?y.getEndX():y.getStartX();if(y=s.getDetectionResultColumn(l).getCodewordNearby(u),y!=null)return f?y.getStartX():y.getEndX();if(_t.isValidBarcodeColumn(s,l-p)&&(y=s.getDetectionResultColumn(l-p).getCodewordNearby(u)),y!=null)return f?y.getEndX():y.getStartX();let v=0;for(;_t.isValidBarcodeColumn(s,l-p);){l-=p;for(let T of s.getDetectionResultColumn(l).getCodewords())if(T!=null)return(f?T.getEndX():T.getStartX())+p*v*(T.getEndX()-T.getStartX());v++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,l,u,f,p,y,v,T){p=_t.adjustCodewordStartColumn(s,l,u,f,p,y);let C=_t.getModuleBitCount(s,l,u,f,p,y);if(C==null)return null;let O,U=pt.sum(C);if(f)O=p+U;else{for(let le=0;le<C.length/2;le++){let ue=C[le];C[le]=C[C.length-1-le],C[C.length-1-le]=ue}O=p,p=O-U}if(!_t.checkCodewordSkew(U,v,T))return null;let q=fr.getDecodedValue(C),J=xt.getCodeword(q);return J===-1?null:new oo(p,O,_t.getCodewordBucketNumber(q),J)}static getModuleBitCount(s,l,u,f,p,y){let v=p,T=new Int32Array(8),C=0,O=f?1:-1,U=f;for(;(f?v<u:v>=l)&&C<T.length;)s.get(v,y)===U?(T[C]++,v+=O):(C++,U=!U);return C===T.length||v===(f?u:l)&&C===T.length-1?T:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,l,u,f,p,y){let v=p,T=f?-1:1;for(let C=0;C<2;C++){for(;(f?v>=l:v<u)&&f===s.get(v,y);){if(Math.abs(p-v)>_t.CODEWORD_SKEW_SIZE)return p;v+=T}T=-T,f=!f}return v}static checkCodewordSkew(s,l,u){return l-_t.CODEWORD_SKEW_SIZE<=s&&s<=u+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(s,l,u){if(s.length===0)throw V.getFormatInstance();let f=1<<l+1,p=_t.correctErrors(s,u,f);_t.verifyCodewordCount(s,f);let y=_e.decode(s,""+l);return y.setErrorsCorrected(p),y.setErasures(u.length),y}static correctErrors(s,l,u){if(l!=null&&l.length>u/2+_t.MAX_ERRORS||u<0||u>_t.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return _t.errorCorrection.decode(s,u,l)}static verifyCodewordCount(s,l){if(s.length<4)throw V.getFormatInstance();let u=s[0];if(u>s.length)throw V.getFormatInstance();if(u===0)if(l<s.length)s[0]=s.length-l;else throw V.getFormatInstance()}static getBitCountForCodeword(s){let l=new Int32Array(8),u=0,f=l.length-1;for(;!((s&1)!==u&&(u=s&1,f--,f<0));)l[f]++,s>>=1;return l}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let l=new ci;for(let u=0;u<s.length;u++){l.format("Row %2d: ",u);for(let f=0;f<s[u].length;f++){let p=s[u][f];p.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}l.format("%n")}return l.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new ko;class Cr{decode(s,l=null){let u=Cr.decode(s,l,!1);if(u==null||u.length===0||u[0]==null)throw se.getNotFoundInstance();return u[0]}decodeMultiple(s,l=null){try{return Cr.decode(s,l,!0)}catch(u){throw u instanceof V||u instanceof R?se.getNotFoundInstance():u}}static decode(s,l,u){const f=new Array,p=gt.detectMultiple(s,l,u);for(const y of p.getPoints()){const v=_t.decode(p.getBits(),y[4],y[5],y[6],y[7],Cr.getMinCodewordWidth(y),Cr.getMaxCodewordWidth(y)),T=new Le(v.getText(),v.getRawBytes(),void 0,y,Re.PDF_417);T.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v.getECLevel());const C=v.getOther();C!=null&&T.putMetadata(Ge.PDF417_EXTRA_METADATA,C),f.push(T)}return f.map(y=>y)}static getMaxWidth(s,l){return s==null||l==null?0:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMinWidth(s,l){return s==null||l==null?H.MAX_VALUE:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Cr.getMaxWidth(s[0],s[4]),Cr.getMaxWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.max(Cr.getMaxWidth(s[1],s[5]),Cr.getMaxWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Cr.getMinWidth(s[0],s[4]),Cr.getMinWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.min(Cr.getMinWidth(s[1],s[5]),Cr.getMinWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}reset(){}}class ao extends g{}ao.kind="ReaderException";class js{constructor(s,l){this.verbose=s===!0,l&&this.setHints(l)}decode(s,l){return l&&this.setHints(l),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const l=!r(s)&&s.get(ie.TRY_HARDER)===!0,u=r(s)?null:s.get(ie.POSSIBLE_FORMATS),f=new Array;if(!r(u)){const p=u.some(y=>y===Re.UPC_A||y===Re.UPC_E||y===Re.EAN_13||y===Re.EAN_8||y===Re.CODABAR||y===Re.CODE_39||y===Re.CODE_93||y===Re.CODE_128||y===Re.ITF||y===Re.RSS_14||y===Re.RSS_EXPANDED);p&&!l&&f.push(new Fs(s,this.verbose)),u.includes(Re.QR_CODE)&&f.push(new Hr),u.includes(Re.DATA_MATRIX)&&f.push(new Ei),u.includes(Re.AZTEC)&&f.push(new Bi),u.includes(Re.PDF_417)&&f.push(new Cr),p&&l&&f.push(new Fs(s,this.verbose))}f.length===0&&(l||f.push(new Fs(s,this.verbose)),f.push(new Hr),f.push(new Ei),f.push(new Bi),f.push(new Cr),l&&f.push(new Fs(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new ao("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(s,this.hints)}catch(u){if(u instanceof ao)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class Do extends Se{constructor(s=null,l=500){const u=new js;u.setHints(s),super(u,l)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class pa extends Se{constructor(s=500){super(new Cr,s)}}class tl extends Se{constructor(s=500){super(new Hr,s)}}var ma;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(ma||(ma={}));var Jn=ma;class Oo{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new ct(s,Int32Array.from([1])))}buildGenerator(s){const l=this.cachedGenerators;if(s>=l.length){let u=l[l.length-1];const f=this.field;for(let p=l.length;p<=s;p++){const y=u.multiply(new ct(f,Int32Array.from([1,f.exp(p-1+f.getGeneratorBase())])));l.push(y),u=y}}return l[s]}encode(s,l){if(l===0)throw new _("No error correction bytes");const u=s.length-l;if(u<=0)throw new _("No data bytes provided");const f=this.buildGenerator(l),p=new Int32Array(u);D.arraycopy(s,0,p,0,u);let y=new ct(this.field,p);y=y.multiplyByMonomial(l,1);const T=y.divide(f)[1].getCoefficients(),C=l-T.length;for(let O=0;O<C;O++)s[u+O]=0;D.arraycopy(T,0,s,u+C,T.length)}}class xn{constructor(){}static applyMaskPenaltyRule1(s){return xn.applyMaskPenaltyRule1Internal(s,!0)+xn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let y=0;y<p-1;y++){const v=u[y];for(let T=0;T<f-1;T++){const C=v[T];C===v[T+1]&&C===u[y+1][T]&&C===u[y+1][T+1]&&l++}}return xn.N2*l}static applyMaskPenaltyRule3(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let y=0;y<p;y++)for(let v=0;v<f;v++){const T=u[y];v+6<f&&T[v]===1&&T[v+1]===0&&T[v+2]===1&&T[v+3]===1&&T[v+4]===1&&T[v+5]===0&&T[v+6]===1&&(xn.isWhiteHorizontal(T,v-4,v)||xn.isWhiteHorizontal(T,v+7,v+11))&&l++,y+6<p&&u[y][v]===1&&u[y+1][v]===0&&u[y+2][v]===1&&u[y+3][v]===1&&u[y+4][v]===1&&u[y+5][v]===0&&u[y+6][v]===1&&(xn.isWhiteVertical(u,v,y-4,y)||xn.isWhiteVertical(u,v,y+7,y+11))&&l++}return l*xn.N3}static isWhiteHorizontal(s,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let f=l;f<u;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,l,u,f){u=Math.max(u,0),f=Math.min(f,s.length);for(let p=u;p<f;p++)if(s[p][l]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let T=0;T<p;T++){const C=u[T];for(let O=0;O<f;O++)C[O]===1&&l++}const y=s.getHeight()*s.getWidth();return Math.floor(Math.abs(l*2-y)*10/y)*xn.N4}static getDataMaskBit(s,l,u){let f,p;switch(s){case 0:f=u+l&1;break;case 1:f=u&1;break;case 2:f=l%3;break;case 3:f=(u+l)%3;break;case 4:f=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:p=u*l,f=(p&1)+p%3;break;case 6:p=u*l,f=(p&1)+p%3&1;break;case 7:p=u*l,f=p%3+(u+l&1)&1;break;default:throw new _("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,l){let u=0;const f=l?s.getHeight():s.getWidth(),p=l?s.getWidth():s.getHeight(),y=s.getArray();for(let v=0;v<f;v++){let T=0,C=-1;for(let O=0;O<p;O++){const U=l?y[v][O]:y[O][v];U===C?T++:(T>=5&&(u+=xn.N1+(T-5)),T=1,C=U)}T>=5&&(u+=xn.N1+(T-5))}return u}}xn.N1=3,xn.N2=3,xn.N3=40,xn.N4=10;class ga{constructor(s,l){this.width=s,this.height=l;const u=new Array(l);for(let f=0;f!==l;f++)u[f]=new Uint8Array(s);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(s,l){return this.bytes[l][s]}getArray(){return this.bytes}setNumber(s,l,u){this.bytes[l][s]=u}setBoolean(s,l,u){this.bytes[l][s]=u?1:0}clear(s){for(const l of this.bytes)z.fill(l,s)}equals(s){if(!(s instanceof ga))return!1;const l=s;if(this.width!==l.width||this.height!==l.height)return!1;for(let u=0,f=this.height;u<f;++u){const p=this.bytes[u],y=l.bytes[u];for(let v=0,T=this.width;v<T;++v)if(p[v]!==y[v])return!1}return!0}toString(){const s=new K;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l];for(let p=0,y=this.width;p<y;++p)switch(f[p]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class ui{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new K;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<ui.NUM_MASK_PATTERNS}}ui.NUM_MASK_PATTERNS=8;class sn extends g{}sn.kind="WriterException";class ft{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,l,u,f,p){ft.clearMatrix(p),ft.embedBasicPatterns(u,p),ft.embedTypeInfo(l,f,p),ft.maybeEmbedVersionInfo(u,p),ft.embedDataBits(s,f,p)}static embedBasicPatterns(s,l){ft.embedPositionDetectionPatternsAndSeparators(l),ft.embedDarkDotAtLeftBottomCorner(l),ft.maybeEmbedPositionAdjustmentPatterns(s,l),ft.embedTimingPatterns(l)}static embedTypeInfo(s,l,u){const f=new Y;ft.makeTypeInfoBits(s,l,f);for(let p=0,y=f.getSize();p<y;++p){const v=f.get(f.getSize()-1-p),T=ft.TYPE_INFO_COORDINATES[p],C=T[0],O=T[1];if(u.setBoolean(C,O,v),p<8){const U=u.getWidth()-p-1;u.setBoolean(U,8,v)}else{const q=u.getHeight()-7+(p-8);u.setBoolean(8,q,v)}}}static maybeEmbedVersionInfo(s,l){if(s.getVersionNumber()<7)return;const u=new Y;ft.makeVersionInfoBits(s,u);let f=17;for(let p=0;p<6;++p)for(let y=0;y<3;++y){const v=u.get(f);f--,l.setBoolean(p,l.getHeight()-11+y,v),l.setBoolean(l.getHeight()-11+y,p,v)}}static embedDataBits(s,l,u){let f=0,p=-1,y=u.getWidth()-1,v=u.getHeight()-1;for(;y>0;){for(y===6&&(y-=1);v>=0&&v<u.getHeight();){for(let T=0;T<2;++T){const C=y-T;if(!ft.isEmpty(u.get(C,v)))continue;let O;f<s.getSize()?(O=s.get(f),++f):O=!1,l!==255&&xn.getDataMaskBit(l,C,v)&&(O=!O),u.setBoolean(C,v,O)}v+=p}p=-p,v+=p,y-=2}if(f!==s.getSize())throw new sn("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-H.numberOfLeadingZeros(s)}static calculateBCHCode(s,l){if(l===0)throw new _("0 polynomial");const u=ft.findMSBSet(l);for(s<<=u-1;ft.findMSBSet(s)>=u;)s^=l<<ft.findMSBSet(s)-u;return s}static makeTypeInfoBits(s,l,u){if(!ui.isValidMaskPattern(l))throw new sn("Invalid mask pattern");const f=s.getBits()<<3|l;u.appendBits(f,5);const p=ft.calculateBCHCode(f,ft.TYPE_INFO_POLY);u.appendBits(p,10);const y=new Y;if(y.appendBits(ft.TYPE_INFO_MASK_PATTERN,15),u.xor(y),u.getSize()!==15)throw new sn("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(s,l){l.appendBits(s.getVersionNumber(),6);const u=ft.calculateBCHCode(s.getVersionNumber(),ft.VERSION_INFO_POLY);if(l.appendBits(u,12),l.getSize()!==18)throw new sn("should not happen but we got: "+l.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let l=8;l<s.getWidth()-8;++l){const u=(l+1)%2;ft.isEmpty(s.get(l,6))&&s.setNumber(l,6,u),ft.isEmpty(s.get(6,l))&&s.setNumber(6,l,u)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new sn;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,l,u){for(let f=0;f<8;++f){if(!ft.isEmpty(u.get(s+f,l)))throw new sn;u.setNumber(s+f,l,0)}}static embedVerticalSeparationPattern(s,l,u){for(let f=0;f<7;++f){if(!ft.isEmpty(u.get(s,l+f)))throw new sn;u.setNumber(s,l+f,0)}}static embedPositionAdjustmentPattern(s,l,u){for(let f=0;f<5;++f){const p=ft.POSITION_ADJUSTMENT_PATTERN[f];for(let y=0;y<5;++y)u.setNumber(s+y,l+f,p[y])}}static embedPositionDetectionPattern(s,l,u){for(let f=0;f<7;++f){const p=ft.POSITION_DETECTION_PATTERN[f];for(let y=0;y<7;++y)u.setNumber(s+y,l+f,p[y])}}static embedPositionDetectionPatternsAndSeparators(s){const l=ft.POSITION_DETECTION_PATTERN[0].length;ft.embedPositionDetectionPattern(0,0,s),ft.embedPositionDetectionPattern(s.getWidth()-l,0,s),ft.embedPositionDetectionPattern(0,s.getWidth()-l,s);const u=8;ft.embedHorizontalSeparationPattern(0,u-1,s),ft.embedHorizontalSeparationPattern(s.getWidth()-u,u-1,s),ft.embedHorizontalSeparationPattern(0,s.getWidth()-u,s);const f=7;ft.embedVerticalSeparationPattern(f,0,s),ft.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),ft.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,l){if(s.getVersionNumber()<2)return;const u=s.getVersionNumber()-1,f=ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let p=0,y=f.length;p!==y;p++){const v=f[p];if(v>=0)for(let T=0;T!==y;T++){const C=f[T];C>=0&&ft.isEmpty(l.get(C,v))&&ft.embedPositionAdjustmentPattern(C-2,v-2,l)}}}}ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ft.VERSION_INFO_POLY=7973,ft.TYPE_INFO_POLY=1335,ft.TYPE_INFO_MASK_PATTERN=21522;class Eu{constructor(s,l){this.dataBytes=s,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class un{constructor(){}static calculateMaskPenalty(s){return xn.applyMaskPenaltyRule1(s)+xn.applyMaskPenaltyRule2(s)+xn.applyMaskPenaltyRule3(s)+xn.applyMaskPenaltyRule4(s)}static encode(s,l,u=null){let f=un.DEFAULT_BYTE_MODE_ENCODING;const p=u!==null&&u.get(Jn.CHARACTER_SET)!==void 0;p&&(f=u.get(Jn.CHARACTER_SET).toString());const y=this.chooseMode(s,f),v=new Y;if(y===ut.BYTE&&(p||un.DEFAULT_BYTE_MODE_ENCODING!==f)){const je=W.getCharacterSetECIByName(f);je!==void 0&&this.appendECI(je,v)}this.appendModeInfo(y,v);const T=new Y;this.appendBytes(s,y,T,f);let C;if(u!==null&&u.get(Jn.QR_VERSION)!==void 0){const je=Number.parseInt(u.get(Jn.QR_VERSION).toString(),10);C=$e.getVersionForNumber(je);const Oe=this.calculateBitsNeeded(y,v,T,C);if(!this.willFit(Oe,C,l))throw new sn("Data too big for requested version")}else C=this.recommendVersion(l,y,v,T);const O=new Y;O.appendBitArray(v);const U=y===ut.BYTE?T.getSizeInBytes():s.length;this.appendLengthInfo(U,C,y,O),O.appendBitArray(T);const q=C.getECBlocksForLevel(l),J=C.getTotalCodewords()-q.getTotalECCodewords();this.terminateBits(J,O);const le=this.interleaveWithECBytes(O,C.getTotalCodewords(),J,q.getNumBlocks()),ue=new ui;ue.setECLevel(l),ue.setMode(y),ue.setVersion(C);const fe=C.getDimensionForVersion(),Ee=new ga(fe,fe),Fe=this.chooseMaskPattern(le,l,C,Ee);return ue.setMaskPattern(Fe),ft.buildMatrix(le,l,C,Fe,Ee),ue.setMatrix(Ee),ue}static recommendVersion(s,l,u,f){const p=this.calculateBitsNeeded(l,u,f,$e.getVersionForNumber(1)),y=this.chooseVersion(p,s),v=this.calculateBitsNeeded(l,u,f,y);return this.chooseVersion(v,s)}static calculateBitsNeeded(s,l,u,f){return l.getSize()+s.getCharacterCountBits(f)+u.getSize()}static getAlphanumericCode(s){return s<un.ALPHANUMERIC_TABLE.length?un.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,l=null){if(W.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(s))return ut.KANJI;let u=!1,f=!1;for(let p=0,y=s.length;p<y;++p){const v=s.charAt(p);if(un.isDigit(v))u=!0;else if(this.getAlphanumericCode(v.charCodeAt(0))!==-1)f=!0;else return ut.BYTE}return f?ut.ALPHANUMERIC:u?ut.NUMERIC:ut.BYTE}static isOnlyDoubleByteKanji(s){let l;try{l=te.encode(s,W.SJIS)}catch{return!1}const u=l.length;if(u%2!==0)return!1;for(let f=0;f<u;f+=2){const p=l[f]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(s,l,u,f){let p=Number.MAX_SAFE_INTEGER,y=-1;for(let v=0;v<ui.NUM_MASK_PATTERNS;v++){ft.buildMatrix(s,l,u,v,f);let T=this.calculateMaskPenalty(f);T<p&&(p=T,y=v)}return y}static chooseVersion(s,l){for(let u=1;u<=40;u++){const f=$e.getVersionForNumber(u);if(un.willFit(s,f,l))return f}throw new sn("Data too big")}static willFit(s,l,u){const f=l.getTotalCodewords(),y=l.getECBlocksForLevel(u).getTotalECCodewords(),v=f-y,T=(s+7)/8;return v>=T}static terminateBits(s,l){const u=s*8;if(l.getSize()>u)throw new sn("data bits cannot fit in the QR Code"+l.getSize()+" > "+u);for(let y=0;y<4&&l.getSize()<u;++y)l.appendBit(!1);const f=l.getSize()&7;if(f>0)for(let y=f;y<8;y++)l.appendBit(!1);const p=s-l.getSizeInBytes();for(let y=0;y<p;++y)l.appendBits((y&1)===0?236:17,8);if(l.getSize()!==u)throw new sn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,l,u,f,p,y){if(f>=u)throw new sn("Block ID too large");const v=s%u,T=u-v,C=Math.floor(s/u),O=C+1,U=Math.floor(l/u),q=U+1,J=C-U,le=O-q;if(J!==le)throw new sn("EC bytes mismatch");if(u!==T+v)throw new sn("RS blocks mismatch");if(s!==(U+J)*T+(q+le)*v)throw new sn("Total bytes mismatch");f<T?(p[0]=U,y[0]=J):(p[0]=q,y[0]=le)}static interleaveWithECBytes(s,l,u,f){if(s.getSizeInBytes()!==u)throw new sn("Number of bits and data bytes does not match");let p=0,y=0,v=0;const T=new Array;for(let O=0;O<f;++O){const U=new Int32Array(1),q=new Int32Array(1);un.getNumDataBytesAndNumECBytesForBlockID(l,u,f,O,U,q);const J=U[0],le=new Uint8Array(J);s.toBytes(8*p,le,0,J);const ue=un.generateECBytes(le,q[0]);T.push(new Eu(le,ue)),y=Math.max(y,J),v=Math.max(v,ue.length),p+=U[0]}if(u!==p)throw new sn("Data bytes does not match offset");const C=new Y;for(let O=0;O<y;++O)for(const U of T){const q=U.getDataBytes();O<q.length&&C.appendBits(q[O],8)}for(let O=0;O<v;++O)for(const U of T){const q=U.getErrorCorrectionBytes();O<q.length&&C.appendBits(q[O],8)}if(l!==C.getSizeInBytes())throw new sn("Interleaving error: "+l+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(s,l){const u=s.length,f=new Int32Array(u+l);for(let y=0;y<u;y++)f[y]=s[y]&255;new Oo(ht.QR_CODE_FIELD_256).encode(f,l);const p=new Uint8Array(l);for(let y=0;y<l;y++)p[y]=f[u+y];return p}static appendModeInfo(s,l){l.appendBits(s.getBits(),4)}static appendLengthInfo(s,l,u,f){const p=u.getCharacterCountBits(l);if(s>=1<<p)throw new sn(s+" is bigger than "+((1<<p)-1));f.appendBits(s,p)}static appendBytes(s,l,u,f){switch(l){case ut.NUMERIC:un.appendNumericBytes(s,u);break;case ut.ALPHANUMERIC:un.appendAlphanumericBytes(s,u);break;case ut.BYTE:un.append8BitBytes(s,u,f);break;case ut.KANJI:un.appendKanjiBytes(s,u);break;default:throw new sn("Invalid mode: "+l)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const l=un.getDigit(s);return l>=0&&l<=9}static appendNumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const p=un.getDigit(s.charAt(f));if(f+2<u){const y=un.getDigit(s.charAt(f+1)),v=un.getDigit(s.charAt(f+2));l.appendBits(p*100+y*10+v,10),f+=3}else if(f+1<u){const y=un.getDigit(s.charAt(f+1));l.appendBits(p*10+y,7),f+=2}else l.appendBits(p,4),f++}}static appendAlphanumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const p=un.getAlphanumericCode(s.charCodeAt(f));if(p===-1)throw new sn;if(f+1<u){const y=un.getAlphanumericCode(s.charCodeAt(f+1));if(y===-1)throw new sn;l.appendBits(p*45+y,11),f+=2}else l.appendBits(p,6),f++}}static append8BitBytes(s,l,u){let f;try{f=te.encode(s,u)}catch(p){throw new sn(p)}for(let p=0,y=f.length;p!==y;p++){const v=f[p];l.appendBits(v,8)}}static appendKanjiBytes(s,l){let u;try{u=te.encode(s,W.SJIS)}catch(p){throw new sn(p)}const f=u.length;for(let p=0;p<f;p+=2){const y=u[p]&255,v=u[p+1]&255,T=y<<8&4294967295|v;let C=-1;if(T>=33088&&T<=40956?C=T-33088:T>=57408&&T<=60351&&(C=T-49472),C===-1)throw new sn("Invalid byte sequence");const O=(C>>8)*192+(C&255);l.appendBits(O,13)}}static appendECI(s,l){l.appendBits(ut.ECI.getBits(),4),l.appendBits(s.getValue(),8)}}un.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),un.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();class es{write(s,l,u,f=null){if(s.length===0)throw new _("Found empty contents");if(l<0||u<0)throw new _("Requested dimensions are too small: "+l+"x"+u);let p=Mt.L,y=es.QUIET_ZONE_SIZE;f!==null&&(f.get(Jn.ERROR_CORRECTION)!==void 0&&(p=Mt.fromString(f.get(Jn.ERROR_CORRECTION).toString())),f.get(Jn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Jn.MARGIN).toString(),10)));const v=un.encode(s,p,f);return this.renderResult(v,l,u,y)}writeToDom(s,l,u,f,p=null){typeof s=="string"&&(s=document.querySelector(s));const y=this.write(l,u,f,p);s&&s.appendChild(y)}renderResult(s,l,u,f){const p=s.getMatrix();if(p===null)throw new Fn;const y=p.getWidth(),v=p.getHeight(),T=y+f*2,C=v+f*2,O=Math.max(l,T),U=Math.max(u,C),q=Math.min(Math.floor(O/T),Math.floor(U/C)),J=Math.floor((O-y*q)/2),le=Math.floor((U-v*q)/2),ue=this.createSVGElement(O,U);for(let fe=0,Ee=le;fe<v;fe++,Ee+=q)for(let Fe=0,je=J;Fe<y;Fe++,je+=q)if(p.get(Fe,fe)===1){const Oe=this.createSvgRectElement(je,Ee,q,q);ue.appendChild(Oe)}return ue}createSVGElement(s,l){const u=document.createElementNS(es.SVG_NS,"svg");return u.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(s,l,u,f){const p=document.createElementNS(es.SVG_NS,"rect");return p.setAttributeNS(null,"x",s.toString()),p.setAttributeNS(null,"y",l.toString()),p.setAttributeNS(null,"height",u.toString()),p.setAttributeNS(null,"width",f.toString()),p.setAttributeNS(null,"fill","#000000"),p}}es.QUIET_ZONE_SIZE=4,es.SVG_NS="http://www.w3.org/2000/svg";class pr{encode(s,l,u,f,p){if(s.length===0)throw new _("Found empty contents");if(l!==Re.QR_CODE)throw new _("Can only encode QR_CODE, but got "+l);if(u<0||f<0)throw new _(`Requested dimensions are too small: ${u}x${f}`);let y=Mt.L,v=pr.QUIET_ZONE_SIZE;p!==null&&(p.get(Jn.ERROR_CORRECTION)!==void 0&&(y=Mt.fromString(p.get(Jn.ERROR_CORRECTION).toString())),p.get(Jn.MARGIN)!==void 0&&(v=Number.parseInt(p.get(Jn.MARGIN).toString(),10)));const T=un.encode(s,y,p);return pr.renderResult(T,u,f,v)}static renderResult(s,l,u,f){const p=s.getMatrix();if(p===null)throw new Fn;const y=p.getWidth(),v=p.getHeight(),T=y+f*2,C=v+f*2,O=Math.max(l,T),U=Math.max(u,C),q=Math.min(Math.floor(O/T),Math.floor(U/C)),J=Math.floor((O-y*q)/2),le=Math.floor((U-v*q)/2),ue=new we(O,U);for(let fe=0,Ee=le;fe<v;fe++,Ee+=q)for(let Fe=0,je=J;Fe<y;Fe++,je+=q)p.get(Fe,fe)===1&&ue.setRegion(je,Ee,q,q);return ue}}pr.QUIET_ZONE_SIZE=4;class bu{encode(s,l,u,f,p){let y;switch(l){case Re.QR_CODE:y=new pr;break;default:throw new _("No encoder available for format "+l)}return y.encode(s,l,u,f,p)}}class Hi extends oe{constructor(s,l,u,f,p,y,v,T){if(super(y,v),this.yuvData=s,this.dataWidth=l,this.dataHeight=u,this.left=f,this.top=p,f+y>l||p+v>u)throw new _("Crop rectangle does not fit within image data.");T&&this.reverseHorizontal(y,v)}getRow(s,l){if(s<0||s>=this.getHeight())throw new _("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.yuvData;const u=s*l,f=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.yuvData,p,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.yuvData,p,f,v,s),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new Hi(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+l,u,f,!1)}renderThumbnail(){const s=this.getWidth()/Hi.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/Hi.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(s*l),f=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let y=0;y<l;y++){const v=y*s;for(let T=0;T<s;T++){const C=f[p+T*Hi.THUMBNAIL_SCALE_FACTOR]&255;u[v+T]=4278190080|C*65793}p+=this.dataWidth*Hi.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Hi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Hi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,l){const u=this.yuvData;for(let f=0,p=this.top*this.dataWidth+this.left;f<l;f++,p+=this.dataWidth){const y=p+s/2;for(let v=p,T=p+s-1;v<y;v++,T--){const C=u[v];u[v]=u[T],u[T]=C}}}invert(){return new Ae(this)}}Hi.THUMBNAIL_SCALE_FACTOR=2;class ts extends oe{constructor(s,l,u,f,p,y,v){if(super(l,u),this.dataWidth=f,this.dataHeight=p,this.left=y,this.top=v,s.BYTES_PER_ELEMENT===4){const T=l*u,C=new Uint8ClampedArray(T);for(let O=0;O<T;O++){const U=s[O],q=U>>16&255,J=U>>7&510,le=U&255;C[O]=(q+J+le)/4&255}this.luminances=C}else this.luminances=s;if(f===void 0&&(this.dataWidth=l),p===void 0&&(this.dataHeight=u),y===void 0&&(this.left=0),v===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+u>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(s,l){if(s<0||s>=this.getHeight())throw new _("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.luminances;const u=s*l,f=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.luminances,p,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.luminances,p,f,v,s),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new ts(this.luminances,u,f,this.dataWidth,this.dataHeight,this.left+s,this.top+l)}invert(){return new Ae(this)}}class E extends W{static forName(s){return this.getCharacterSetECIByName(s)}}class N{}N.ISO_8859_1=W.ISO8859_1;class F{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class X{static singletonList(s){return[s]}static min(s,l){return s.sort(l)[0]}}class me{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ie extends me{constructor(s,l,u){super(s),this.value=l,this.bitCount=u}appendTo(s,l){s.appendBits(this.value,this.bitCount)}add(s,l){return new Ie(this,s,l)}addBinaryShift(s,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ie(this,s,l)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+H.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class He extends Ie{constructor(s,l,u){super(s,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=u}appendTo(s,l){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):u===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(l[this.binaryShiftStart+u],8)}addBinaryShift(s,l){return new He(this,s,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function dn(j,s,l){return new He(j,s,l)}function zn(j,s,l){return new Ie(j,s,l)}const qt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pn=0,Wn=1,Hn=2,Ai=3,ni=4,nl=new Ie(null,0,0),Iu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function wp(j){for(let s of j)z.fill(s,-1);return j[Pn][ni]=0,j[Wn][ni]=0,j[Wn][Pn]=28,j[Ai][ni]=0,j[Hn][ni]=0,j[Hn][Pn]=15,j}const oh=wp(z.createInt32Array(6,6));class di{constructor(s,l,u,f){this.token=s,this.mode=l,this.binaryShiftByteCount=u,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,l){let u=this.bitCount,f=this.token;if(s!==this.mode){let y=Iu[this.mode][s];f=zn(f,y&65535,y>>16),u+=y>>16}let p=s===Hn?4:5;return f=zn(f,l,p),new di(f,s,0,u+p)}shiftAndAppend(s,l){let u=this.token,f=this.mode===Hn?4:5;return u=zn(u,oh[this.mode][s],f),u=zn(u,l,5),new di(u,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let l=this.token,u=this.mode,f=this.bitCount;if(this.mode===ni||this.mode===Hn){let v=Iu[u][Pn];l=zn(l,v&65535,v>>16),f+=v>>16,u=Pn}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,y=new di(l,u,this.binaryShiftByteCount+1,f+p);return y.binaryShiftByteCount===2078&&(y=y.endBinaryShift(s+1)),y}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=dn(l,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new di(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let l=this.bitCount+(Iu[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?l+=di.calculateBinaryShiftCost(s)-di.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(l+=10),l<=s.bitCount}toBitArray(s){let l=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())l.unshift(f);let u=new Y;for(const f of l)f.appendTo(u,s);return u}toString(){return ee.format("%s bits=%d bytes=%d",qt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}di.INITIAL_STATE=new di(nl,Pn,0,0);function s1(j){const s=ee.getCharCode(" "),l=ee.getCharCode("."),u=ee.getCharCode(",");j[Pn][s]=1;const f=ee.getCharCode("Z"),p=ee.getCharCode("A");for(let q=p;q<=f;q++)j[Pn][q]=q-p+2;j[Wn][s]=1;const y=ee.getCharCode("z"),v=ee.getCharCode("a");for(let q=v;q<=y;q++)j[Wn][q]=q-v+2;j[Hn][s]=1;const T=ee.getCharCode("9"),C=ee.getCharCode("0");for(let q=C;q<=T;q++)j[Hn][q]=q-C+2;j[Hn][u]=12,j[Hn][l]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let q=0;q<O.length;q++)j[Ai][ee.getCharCode(O[q])]=q;const U=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let q=0;q<U.length;q++)ee.getCharCode(U[q])>0&&(j[ni][ee.getCharCode(U[q])]=q);return j}const ah=s1(z.createInt32Array(5,256));class lc{constructor(s){this.text=s}encode(){const s=ee.getCharCode(" "),l=ee.getCharCode(`
`);let u=X.singletonList(di.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let y,v=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case ee.getCharCode("\r"):y=v===l?2:0;break;case ee.getCharCode("."):y=v===s?3:0;break;case ee.getCharCode(","):y=v===s?4:0;break;case ee.getCharCode(":"):y=v===s?5:0;break;default:y=0}y>0?(u=lc.updateStateListForPair(u,p,y),p++):u=this.updateStateListForChar(u,p)}return X.min(u,(p,y)=>p.getBitCount()-y.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,l){const u=[];for(let f of s)this.updateStateForChar(f,l,u);return lc.simplifyStates(u)}updateStateForChar(s,l,u){let f=this.text[l]&255,p=ah[s.getMode()][f]>0,y=null;for(let v=0;v<=ni;v++){let T=ah[v][f];if(T>0){if(y==null&&(y=s.endBinaryShift(l)),!p||v===s.getMode()||v===Hn){const C=y.latchAndAppend(v,T);u.push(C)}if(!p&&oh[s.getMode()][v]>=0){const C=y.shiftAndAppend(v,T);u.push(C)}}}if(s.getBinaryShiftByteCount()>0||ah[s.getMode()][f]===0){let v=s.addBinaryShiftChar(l);u.push(v)}}static updateStateListForPair(s,l,u){const f=[];for(let p of s)this.updateStateForPair(p,l,u,f);return this.simplifyStates(f)}static updateStateForPair(s,l,u,f){let p=s.endBinaryShift(l);if(f.push(p.latchAndAppend(ni,u)),s.getMode()!==ni&&f.push(p.shiftAndAppend(ni,u)),u===3||u===4){let y=p.latchAndAppend(Hn,16-u).latchAndAppend(Hn,1);f.push(y)}if(s.getBinaryShiftByteCount()>0){let y=s.addBinaryShiftChar(l).addBinaryShiftChar(l+1);f.push(y)}}static simplifyStates(s){let l=[];for(const u of s){let f=!0;for(const p of l){if(p.isBetterThanOrEqualTo(u)){f=!1;break}u.isBetterThanOrEqualTo(p)&&(l=l.filter(y=>y!==p))}f&&l.push(u)}return l}}class Kt{constructor(){}static encodeBytes(s){return Kt.encode(s,Kt.DEFAULT_EC_PERCENT,Kt.DEFAULT_AZTEC_LAYERS)}static encode(s,l,u){let f=new lc(s).encode(),p=H.truncDivision(f.getSize()*l,100)+11,y=f.getSize()+p,v,T,C,O,U;if(u!==Kt.DEFAULT_AZTEC_LAYERS){if(v=u<0,T=Math.abs(u),T>(v?Kt.MAX_NB_BITS_COMPACT:Kt.MAX_NB_BITS))throw new _(ee.format("Illegal value %s for layers",u));C=Kt.totalBitsInLayer(T,v),O=Kt.WORD_SIZE[T];let Oe=C-C%O;if(U=Kt.stuffBits(f,O),U.getSize()+p>Oe)throw new _("Data to large for user specified layer");if(v&&U.getSize()>O*64)throw new _("Data to large for user specified layer")}else{O=0,U=null;for(let Oe=0;;Oe++){if(Oe>Kt.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(v=Oe<=3,T=v?Oe+1:Oe,C=Kt.totalBitsInLayer(T,v),y>C)continue;(U==null||O!==Kt.WORD_SIZE[T])&&(O=Kt.WORD_SIZE[T],U=Kt.stuffBits(f,O));let Lt=C-C%O;if(!(v&&U.getSize()>O*64)&&U.getSize()+p<=Lt)break}}let q=Kt.generateCheckWords(U,C,O),J=U.getSize()/O,le=Kt.generateModeMessage(v,T,J),ue=(v?11:14)+T*4,fe=new Int32Array(ue),Ee;if(v){Ee=ue;for(let Oe=0;Oe<fe.length;Oe++)fe[Oe]=Oe}else{Ee=ue+1+2*H.truncDivision(H.truncDivision(ue,2)-1,15);let Oe=H.truncDivision(ue,2),Lt=H.truncDivision(Ee,2);for(let St=0;St<Oe;St++){let Ci=St+H.truncDivision(St,15);fe[Oe-St-1]=Lt-Ci-1,fe[Oe+St]=Lt+Ci+1}}let Fe=new we(Ee);for(let Oe=0,Lt=0;Oe<T;Oe++){let St=(T-Oe)*4+(v?9:12);for(let Ci=0;Ci<St;Ci++){let Es=Ci*2;for(let Sr=0;Sr<2;Sr++)q.get(Lt+Es+Sr)&&Fe.set(fe[Oe*2+Sr],fe[Oe*2+Ci]),q.get(Lt+St*2+Es+Sr)&&Fe.set(fe[Oe*2+Ci],fe[ue-1-Oe*2-Sr]),q.get(Lt+St*4+Es+Sr)&&Fe.set(fe[ue-1-Oe*2-Sr],fe[ue-1-Oe*2-Ci]),q.get(Lt+St*6+Es+Sr)&&Fe.set(fe[ue-1-Oe*2-Ci],fe[Oe*2+Sr])}Lt+=St*8}if(Kt.drawModeMessage(Fe,v,Ee,le),v)Kt.drawBullsEye(Fe,H.truncDivision(Ee,2),5);else{Kt.drawBullsEye(Fe,H.truncDivision(Ee,2),7);for(let Oe=0,Lt=0;Oe<H.truncDivision(ue,2)-1;Oe+=15,Lt+=16)for(let St=H.truncDivision(Ee,2)&1;St<Ee;St+=2)Fe.set(H.truncDivision(Ee,2)-Lt,St),Fe.set(H.truncDivision(Ee,2)+Lt,St),Fe.set(St,H.truncDivision(Ee,2)-Lt),Fe.set(St,H.truncDivision(Ee,2)+Lt)}let je=new F;return je.setCompact(v),je.setSize(Ee),je.setLayers(T),je.setCodeWords(J),je.setMatrix(Fe),je}static drawBullsEye(s,l,u){for(let f=0;f<u;f+=2)for(let p=l-f;p<=l+f;p++)s.set(p,l-f),s.set(p,l+f),s.set(l-f,p),s.set(l+f,p);s.set(l-u,l-u),s.set(l-u+1,l-u),s.set(l-u,l-u+1),s.set(l+u,l-u),s.set(l+u,l-u+1),s.set(l+u,l+u-1)}static generateModeMessage(s,l,u){let f=new Y;return s?(f.appendBits(l-1,2),f.appendBits(u-1,6),f=Kt.generateCheckWords(f,28,4)):(f.appendBits(l-1,5),f.appendBits(u-1,11),f=Kt.generateCheckWords(f,40,4)),f}static drawModeMessage(s,l,u,f){let p=H.truncDivision(u,2);if(l)for(let y=0;y<7;y++){let v=p-3+y;f.get(y)&&s.set(v,p-5),f.get(y+7)&&s.set(p+5,v),f.get(20-y)&&s.set(v,p+5),f.get(27-y)&&s.set(p-5,v)}else for(let y=0;y<10;y++){let v=p-5+y+H.truncDivision(y,5);f.get(y)&&s.set(v,p-7),f.get(y+10)&&s.set(p+7,v),f.get(29-y)&&s.set(v,p+7),f.get(39-y)&&s.set(p-7,v)}}static generateCheckWords(s,l,u){let f=s.getSize()/u,p=new Oo(Kt.getGF(u)),y=H.truncDivision(l,u),v=Kt.bitsToWords(s,u,y);p.encode(v,y-f);let T=l%u,C=new Y;C.appendBits(0,T);for(const O of Array.from(v))C.appendBits(O,u);return C}static bitsToWords(s,l,u){let f=new Int32Array(u),p,y;for(p=0,y=s.getSize()/l;p<y;p++){let v=0;for(let T=0;T<l;T++)v|=s.get(p*l+T)?1<<l-T-1:0;f[p]=v}return f}static getGF(s){switch(s){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new _("Unsupported word size "+s)}}static stuffBits(s,l){let u=new Y,f=s.getSize(),p=(1<<l)-2;for(let y=0;y<f;y+=l){let v=0;for(let T=0;T<l;T++)(y+T>=f||s.get(y+T))&&(v|=1<<l-1-T);(v&p)===p?(u.appendBits(v&p,l),y--):(v&p)===0?(u.appendBits(v|1,l),y--):u.appendBits(v,l)}return u}static totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}Kt.DEFAULT_EC_PERCENT=33,Kt.DEFAULT_AZTEC_LAYERS=0,Kt.MAX_NB_BITS=32,Kt.MAX_NB_BITS_COMPACT=4,Kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class cc{encode(s,l,u,f){return this.encodeWithHints(s,l,u,f,null)}encodeWithHints(s,l,u,f,p){let y=N.ISO_8859_1,v=Kt.DEFAULT_EC_PERCENT,T=Kt.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(Jn.CHARACTER_SET)&&(y=E.forName(p.get(Jn.CHARACTER_SET).toString())),p.has(Jn.ERROR_CORRECTION)&&(v=H.parseInt(p.get(Jn.ERROR_CORRECTION).toString())),p.has(Jn.AZTEC_LAYERS)&&(T=H.parseInt(p.get(Jn.AZTEC_LAYERS).toString()))),cc.encodeLayers(s,l,u,f,y,v,T)}static encodeLayers(s,l,u,f,p,y,v){if(l!==Re.AZTEC)throw new _("Can only encode AZTEC, but got "+l);let T=Kt.encode(ee.getBytes(s,p),y,v);return cc.renderResult(T,u,f)}static renderResult(s,l,u){let f=s.getMatrix();if(f==null)throw new Fn;let p=f.getWidth(),y=f.getHeight(),v=Math.max(l,p),T=Math.max(u,y),C=Math.min(v/p,T/y),O=(v-p*C)/2,U=(T-y*C)/2,q=new we(v,T);for(let J=0,le=U;J<y;J++,le+=C)for(let ue=0,fe=O;ue<p;ue++,fe+=C)f.get(ue,J)&&q.setRegion(fe,le,C,C);return q}}t.AbstractExpandedDecoder=So,t.ArgumentException=w,t.ArithmeticException=bt,t.AztecCode=F,t.AztecCodeReader=Bi,t.AztecCodeWriter=cc,t.AztecDecoder=zt,t.AztecDetector=Jr,t.AztecDetectorResult=wi,t.AztecEncoder=Kt,t.AztecHighLevelEncoder=lc,t.AztecPoint=Bn,t.BarcodeFormat=Re,t.Binarizer=M,t.BinaryBitmap=A,t.BitArray=Y,t.BitMatrix=we,t.BitSource=Ya,t.BrowserAztecCodeReader=vi,t.BrowserBarcodeReader=wu,t.BrowserCodeReader=Se,t.BrowserDatamatrixCodeReader=sh,t.BrowserMultiFormatReader=Do,t.BrowserPDF417Reader=pa,t.BrowserQRCodeReader=tl,t.BrowserQRCodeSvgWriter=es,t.CharacterSetECI=W,t.ChecksumException=R,t.Code128Reader=We,t.Code39Reader=Tn,t.DataMatrixDecodedBitStreamParser=Ui,t.DataMatrixReader=Ei,t.DecodeHintType=ie,t.DecoderResult=at,t.DefaultGridSampler=Yn,t.DetectorResult=Xn,t.EAN13Reader=br,t.EncodeHintType=Jn,t.Exception=g,t.FormatException=V,t.GenericGF=ht,t.GenericGFPoly=ct,t.GlobalHistogramBinarizer=Te,t.GridSampler=io,t.GridSamplerInstance=Er,t.HTMLCanvasElementLuminanceSource=Ne,t.HybridBinarizer=xe,t.ITFReader=Ht,t.IllegalArgumentException=_,t.IllegalStateException=Fn,t.InvertedLuminanceSource=Ae,t.LuminanceSource=oe,t.MathUtils=pt,t.MultiFormatOneDReader=Fs,t.MultiFormatReader=js,t.MultiFormatWriter=bu,t.NotFoundException=se,t.OneDReader=In,t.PDF417DecodedBitStreamParser=_e,t.PDF417DecoderErrorCorrection=ko,t.PDF417Reader=Cr,t.PDF417ResultMetadata=fa,t.PerspectiveTransform=Wt,t.PlanarYUVLuminanceSource=Hi,t.QRCodeByteMatrix=ga,t.QRCodeDataMask=It,t.QRCodeDecodedBitStreamParser=Sn,t.QRCodeDecoderErrorCorrectionLevel=Mt,t.QRCodeDecoderFormatInformation=Zn,t.QRCodeEncoder=un,t.QRCodeEncoderQRCode=ui,t.QRCodeMaskUtil=xn,t.QRCodeMatrixUtil=ft,t.QRCodeMode=ut,t.QRCodeReader=Hr,t.QRCodeVersion=$e,t.QRCodeWriter=pr,t.RGBLuminanceSource=ts,t.RSS14Reader=Jt,t.RSSExpandedReader=ke,t.ReaderException=ao,t.ReedSolomonDecoder=Dr,t.ReedSolomonEncoder=Oo,t.ReedSolomonException=gn,t.Result=Le,t.ResultMetadataType=Ge,t.ResultPoint=Xe,t.StringUtils=ee,t.UnsupportedOperationException=Z,t.VideoInputDevice=ae,t.WhiteRectangleDetector=Zr,t.WriterException=sn,t.ZXingArrays=z,t.ZXingCharset=E,t.ZXingInteger=H,t.ZXingStandardCharsets=N,t.ZXingStringBuilder=K,t.ZXingStringEncoding=te,t.ZXingSystem=D,t.createAbstractExpandedDecoder=xu,Object.defineProperty(t,"__esModule",{value:!0})})}(Yh,Yh.exports)),Yh.exports}var qn=jJ();const UJ=ng(qn),zJ=pS({__proto__:null,default:UJ},[qn]);var QC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,qn.BarcodeFormat.QR_CODE],[Ze.AZTEC,qn.BarcodeFormat.AZTEC],[Ze.CODABAR,qn.BarcodeFormat.CODABAR],[Ze.CODE_39,qn.BarcodeFormat.CODE_39],[Ze.CODE_93,qn.BarcodeFormat.CODE_93],[Ze.CODE_128,qn.BarcodeFormat.CODE_128],[Ze.DATA_MATRIX,qn.BarcodeFormat.DATA_MATRIX],[Ze.MAXICODE,qn.BarcodeFormat.MAXICODE],[Ze.ITF,qn.BarcodeFormat.ITF],[Ze.EAN_13,qn.BarcodeFormat.EAN_13],[Ze.EAN_8,qn.BarcodeFormat.EAN_8],[Ze.PDF_417,qn.BarcodeFormat.PDF_417],[Ze.RSS_14,qn.BarcodeFormat.RSS_14],[Ze.RSS_EXPANDED,qn.BarcodeFormat.RSS_EXPANDED],[Ze.UPC_A,qn.BarcodeFormat.UPC_A],[Ze.UPC_E,qn.BarcodeFormat.UPC_E],[Ze.UPC_EAN_EXTENSION,qn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!zJ)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(qn.DecodeHintType.POSSIBLE_FORMATS,i),o.set(qn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,i){try{r(t.decode(e))}catch(o){i(o)}})},n.prototype.decode=function(e){var t=new qn.MultiFormatReader(this.verbose,this.hints),r=new qn.HTMLCanvasElementLuminanceSource(e),i=new qn.BinaryBitmap(new qn.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:x6.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),WJ=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(_){c(_)}}function m(w){try{g(r.throw(w))}catch(_){c(_)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},HJ=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},ZC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,"qr_code"],[Ze.AZTEC,"aztec"],[Ze.CODABAR,"codabar"],[Ze.CODE_39,"code_39"],[Ze.CODE_93,"code_93"],[Ze.CODE_128,"code_128"],[Ze.DATA_MATRIX,"data_matrix"],[Ze.ITF,"itf"],[Ze.EAN_13,"ean_13"],[Ze.EAN_8,"ean_8"],[Ze.PDF_417,"pdf417"],[Ze.UPC_A,"upc_a"],[Ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return WJ(this,void 0,void 0,function(){var t,r;return HJ(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:x6.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,i=0,o=e;i<o.length;i++){var c=o[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,t=c)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),JC=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(_){c(_)}}function m(w){try{g(r.throw(w))}catch(_){c(_)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},eS=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},GJ=function(){function n(e,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&ZC.isSupported()?(this.primaryDecoder=new ZC(e,r,i),this.secondaryDecoder=new QC(e,r,i)):this.primaryDecoder=new QC(e,r,i)}return n.prototype.decodeAsync=function(e){return JC(this,void 0,void 0,function(){var t;return eS(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return JC(this,void 0,void 0,function(){var t,r;return eS(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),k_=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),J0=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(_){c(_)}}function m(w){try{g(r.throw(w))}catch(_){c(_)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},eg=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},v6=function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n}(),$J=function(n){k_(e,n);function e(t,r){return n.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(v6),qJ=function(n){k_(e,n);function e(t){return n.call(this,"zoom",t)||this}return e}($J),KJ=function(n){k_(e,n);function e(t){return n.call(this,"torch",t)||this}return e}(v6),XJ=function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new qJ(this.track)},n.prototype.torchFeature=function(){return new KJ(this.track)},n}(),YJ=function(){function n(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,r,i){return J0(this,void 0,void 0,function(){var o,c;return eg(this,function(h){switch(h.label){case 0:return o=new n(e,t,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return J0(this,void 0,void 0,function(){return eg(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var i=e.mediaStream.getVideoTracks(),o=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(h){e.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new XJ(this.getFirstTrackOrFail())},n}(),QJ=function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,r){return J0(this,void 0,void 0,function(){return eg(this,function(i){return[2,YJ.create(e,this.mediaStream,t,r)]})})},n.create=function(e){return J0(this,void 0,void 0,function(){var t,r;return eg(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new n(r)]}})})},n}(),tS=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(_){c(_)}}function m(w){try{g(r.throw(w))}catch(_){c(_)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},nS=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},ZJ=function(){function n(){}return n.failIfNotSupported=function(){return tS(this,void 0,void 0,function(){return nS(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return tS(this,void 0,void 0,function(){return nS(this,function(t){return[2,QJ.create(e)]})})},n}(),JJ=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(_){c(_)}}function m(w){try{g(r.throw(w))}catch(_){c(_)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},eee=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},tee=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=dd.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=dd.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return JJ(this,void 0,void 0,function(){var e,t,r,i,o,c,h;return eee(this,function(m){switch(m.label){case 0:return e=function(g){for(var w=g.getVideoTracks(),_=0,A=w;_<A.length;_++){var R=A[_];R.enabled=!1,R.stop(),g.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),i=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return e(t),[2,i]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(o){for(var c=[],h=0,m=o;h<m.length;h++){var g=m[h];g.kind==="video"&&c.push({id:g.id,label:g.label})}e(c)},i=MediaStreamTrack;i.getSources(r)})},n}(),gr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(gr||(gr={}));var nee=function(){function n(){this.state=gr.NOT_STARTED,this.onGoingTransactionNewState=gr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case gr.UNKNOWN:throw"Transition from unknown is not allowed";case gr.NOT_STARTED:this.failIfNewStateIs(e,[gr.PAUSED]);break;case gr.SCANNING:break;case gr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n}(),ree=function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===gr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==gr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===gr.PAUSED},n}(),iee=function(){function n(){}return n.create=function(){return new ree(new nee)},n}(),see=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),As=function(n){see(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(LJ),oee=function(){function n(e,t){this.logger=t,this.fps=As.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=As.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?w6.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Ca(this.qrbox)},n.create=function(e,t){return new n(e,t)},n}(),rS=function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new FJ(this.verbose),this.qrcode=new GJ(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=iee.create()}return n.prototype.start=function(e,t,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=oee.create(t,this.logger);this.clearElement();var m=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=m,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:As.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var _=this,A=this.stateManagerProxy.startTransition(gr.SCANNING);return new Promise(function(R,M){var D=g?h.videoConstraints:_.createVideoConstraints(e);if(!D){A.cancel(),M("videoConstraints should be defined");return}var L={};(!g||h.aspectRatio)&&(L.aspectRatio=h.aspectRatio);var G={onRenderSurfaceReady:function(z,H){_.setupUi(z,H,h),_.isScanning=!0,_.foreverScan(h,r,c)}};ZJ.failIfNotSupported().then(function(z){z.create(D).then(function(H){return H.render(o.element,L,G).then(function(Y){_.renderedCamera=Y,A.execute(),R(null)}).catch(function(Y){A.cancel(),M(Y)})}).catch(function(H){A.cancel(),M(dd.errorGettingUserMedia(H))})}).catch(function(z){A.cancel(),M(dd.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gr.PAUSED),this.showPausedState(),(Ca(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(gr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(gr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(As.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},n.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ca(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var h=c.width,m=c.height,g=document.getElementById(r.elementId),w=g.clientWidth?g.clientWidth:As.DEFAULT_WIDTH,_=Math.max(g.clientHeight?g.clientHeight:m,As.FILE_SCAN_MIN_HEIGHT),A=r.computeCanvasDrawConfig(h,m,w,_);if(t){var R=r.createCanvasElement(w,_,"qr-canvas-visible");R.style.display="inline-block",g.appendChild(R);var M=R.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=w,M.canvas.height=_,M.drawImage(c,0,0,h,m,A.x,A.y,A.width,A.height)}var D=As.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(c.width,A.width),G=Math.max(c.height,A.height),z=L+2*D,H=G+2*D,Y=r.createCanvasElement(z,H);g.appendChild(Y);var re=Y.getContext("2d");if(!re)throw"Unable to get 2d context from canvas";re.canvas.width=z,re.canvas.height=H,re.drawImage(c,0,0,h,m,D,D,L,G);try{r.qrcode.decodeRobustlyAsync(Y).then(function(ie){i(XC.createFromQrcodeResult(ie))}).catch(o)}catch(ie){o("QR code parse error, error = ".concat(ie))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return tee.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!w6.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Ze.QR_CODE,Ze.AZTEC,Ze.CODABAR,Ze.CODE_39,Ze.CODE_93,Ze.CODE_128,Ze.DATA_MATRIX,Ze.MAXICODE,Ze.ITF,Ze.EAN_13,Ze.EAN_8,Ze.PDF_417,Ze.RSS_14,Ze.RSS_EXPANDED,Ze.UPC_A,Ze.UPC_E,Ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var c=o[i];MJ(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ca(e))return!0;if(!Ca(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ca(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Ca(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,t,o),h=function(g){if(g<As.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(As.MIN_QR_BOX_SIZE,"px.")},m=function(g){return g>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};h(c.width),h(c.height),c.width=m(c.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},n.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var i=Ca(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:e,height:t},m=c?this.getShadedRegionBounds(e,t,o):h,g=this.createCanvasElement(m.width,m.height),w={willReadFrequently:!0},_=g.getContext("2d",w);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(g),c&&this.possiblyInsertShadingElement(this.element,e,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=g},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=dd.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,XC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=dd.codeParseError(i);return t(o,VJ.createFrom(o)),!1})},n.prototype.foreverScan=function(e,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*c,g=this.qrRegion.height*h,w=this.qrRegion.x*c,_=this.qrRegion.y*h;this.context.drawImage(o,w,_,m,g,0,0,this.qrRegion.width,this.qrRegion.height);var A=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,t,r)},i.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(R){!R&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){A()})):A()}).catch(function(R){i.logger.logError("Error happend while scanning context",R),A()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(M){if(M in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},h=Object.keys(e);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var m=Object.keys(e)[0];if(m!==t&&m!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===t){var g=e.facingMode;if(typeof g=="string"){if(c(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(c(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(o in _)return{deviceId:{exact:_["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var A=typeof _;throw"Invalid type of 'deviceId' = ".concat(A)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},n.prototype.computeCanvasDrawConfig=function(e,t,r,i){if(e<=r&&t<=i){var o=(r-e)/2,c=(i-t)/2;return{x:o,y:c,width:e,height:t}}else{var h=e,m=t;return e>r&&(t=r/e*t,e=r),t>i&&(e=i/t*e,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(m)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,i)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?As.BORDER_SHADER_MATCH_COLOR:As.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,r){var i=e,o=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Ca(r)?"qr-canvas":r,c},n.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},n.prototype.possiblyInsertShadingElement=function(e,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(As.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var m=5,g=40;this.insertShaderBorders(o,g,m,-m,null,0,!0),this.insertShaderBorders(o,g,m,-m,null,0,!1),this.insertShaderBorders(o,g,m,null,-m,0,!0),this.insertShaderBorders(o,g,m,null,-m,0,!1),this.insertShaderBorders(o,m,g+m,-m,null,-m,!0),this.insertShaderBorders(o,m,g+m,null,-m,-m,!0),this.insertShaderBorders(o,m,g+m,-m,null,-m,!1),this.insertShaderBorders(o,m,g+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(o)}},n.prototype.insertShaderBorders=function(e,t,r,i,o,c,h){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=As.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(t,"px"),m.style.height="".concat(r,"px"),i!==null&&(m.style.top="".concat(i,"px")),o!==null&&(m.style.bottom="".concat(o,"px")),h?m.style.left="".concat(c,"px"):m.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n}(),iS;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(iS||(iS={}));function aee({onScan:n,onClose:e,onSwitchToManual:t}){const[r,i]=P.useState(!0),[o,c]=P.useState(null),[h,m]=P.useState(!1),g=P.useRef(null);P.useRef(null);const w=P.useCallback(()=>{g.current&&h?g.current.stop().then(()=>{m(!1)}).catch(M=>{console.error("Error stopping scanner:",M),m(!1)}):m(!1)},[h]),_=P.useCallback(async()=>{try{i(!0),c(null);const M=await rS.getCameras();if(M&&M.length===0){c("No camera found. Please enter the code manually."),i(!1);return}g.current=new rS("qr-reader"),await g.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},(D,L)=>{w(),xr.success("Event found — joining now…"),n(D)},D=>{}),m(!0),i(!1)}catch(M){console.error("Scanner error:",M),M.name==="NotAllowedError"||M.name==="PermissionDeniedError"?c("Please allow camera access to scan codes."):M.name==="NotFoundError"?c("No camera found. Please enter the code manually."):c("Could not start camera. Try entering the code manually."),i(!1)}},[n,w]);P.useEffect(()=>(_(),()=>{try{w()}catch(M){console.error("Error during component cleanup:",M),m(!1)}}),[_,w]);const A=()=>{try{w()}catch(M){console.error("Error during scanner cleanup:",M)}e()},R=()=>{try{w()}catch(M){console.error("Error during scanner cleanup:",M)}t()};return I.jsx(Jg,{open:!0,onOpenChange:A,children:I.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:I.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[I.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent p-4",children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs("h3",{className:"text-white flex items-center gap-2 font-semibold",children:[I.jsx(Sx,{className:"w-5 h-5"}),"Scan Event QR Code"]}),I.jsx(Dt,{variant:"ghost",size:"icon",onClick:A,className:"text-white hover:bg-white/20 rounded-full",children:I.jsx(Li,{className:"w-5 h-5"})})]})}),I.jsxs("div",{className:"relative aspect-square bg-black",children:[r&&I.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:I.jsxs("div",{className:"text-white text-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),I.jsx("p",{className:"text-sm",children:"Starting camera..."})]})}),o&&I.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-20",children:[I.jsx(Sx,{className:"w-12 h-12 mx-auto mb-4 text-white opacity-50"}),I.jsx("p",{className:"text-white text-sm mb-4",children:o}),I.jsx(Dt,{variant:"outline",onClick:R,className:"text-white border-white hover:bg-white hover:text-black",children:"Enter Code Manually"})]}),I.jsx("div",{id:"qr-reader",className:`w-full h-full ${r||o?"opacity-0":"opacity-100"}`}),!o&&!r&&I.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:I.jsxs("div",{className:"relative w-64 h-64",children:[I.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-pink-500 rounded-tl-2xl"}),I.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-pink-500 rounded-tr-2xl"}),I.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-pink-500 rounded-bl-2xl"}),I.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-pink-500 rounded-br-2xl"})]})})]}),I.jsx("div",{className:"bg-white dark:bg-gray-900 p-4 text-center",children:I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Position the QR code inside the frame."})})]})})})}function lee({onSubmit:n,onClose:e}){const[t,r]=P.useState(""),[i,o]=P.useState(!1),c=async h=>{if(h.preventDefault(),console.log("🔍 EventCodeEntry - Form submitted with code:",t),!t.trim()){console.log("🔍 EventCodeEntry - Code is empty, returning");return}console.log("🔍 EventCodeEntry - Calling onSubmit with:",t.trim().toUpperCase()),o(!0);try{await n(t.trim().toUpperCase()),console.log("🔍 EventCodeEntry - onSubmit completed successfully")}catch(m){console.error("🔍 EventCodeEntry - onSubmit failed:",m)}finally{o(!1)}};return I.jsx(Jg,{open:!0,onOpenChange:e,children:I.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:I.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl",children:[I.jsxs(e1,{className:"text-center pb-6",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("div",{className:"flex-1"}),I.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center",children:I.jsx(BS,{className:"w-8 h-8 text-white"})}),I.jsx("div",{className:"flex-1 flex justify-end",children:I.jsx(Dt,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:I.jsx(Li,{className:"w-5 h-5"})})})]}),I.jsx(t1,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Enter Event Code"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Enter the code provided by the event organizer"})]}),I.jsxs("form",{onSubmit:c,className:"space-y-6",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx($l,{type:"text",placeholder:"e.g., WED2025",value:t,onChange:h=>r(h.target.value.toUpperCase()),className:"text-center text-lg font-mono tracking-wider border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 rounded-xl py-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",autoFocus:!0}),I.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Codes are usually 6-8 characters"})]}),I.jsxs("div",{className:"flex gap-3",children:[I.jsx(Dt,{type:"button",variant:"outline",onClick:e,className:"flex-1 rounded-xl py-3 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Cancel"}),I.jsx(Dt,{type:"submit",disabled:!t.trim()||i,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl py-3",children:i?I.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):I.jsxs(I.Fragment,{children:["Join Event",I.jsx(cv,{className:"w-4 h-4 ml-2"})]})})]})]})]})})})}function Zw(){const n=no(),[e,t]=P.useState(null),[r,i]=P.useState(!1),o=w=>{try{const A=new URL(w).searchParams.get("code");A?(m(),n(Kn(`join?code=${A.toUpperCase()}`))):alert("Invalid QR code: No event code found in URL.")}catch{typeof w=="string"&&w.trim().length>3?(m(),n(Kn(`join?code=${w.toUpperCase()}`))):alert("Invalid QR code format.")}},c=w=>{console.log("🔍 handleEventAccess called with code:",w);const _=`/join?code=${w.toUpperCase()}`;console.log("🔍 Direct URL:",_);try{console.log("🔍 Attempting navigation to:",_),n(_),console.log("🔍 Navigation successful to:",_),m()}catch(A){console.error("🔍 Navigation failed:",A),m()}},h=w=>{t(w)},m=()=>{t(null)},g=()=>{t("manualCodeEntry")};return I.jsxs("div",{className:"min-h-screen flex flex-col justify-between items-center px-6 py-8 relative overflow-hidden bg-white dark:bg-gray-900",children:[I.jsx("div",{className:"absolute inset-0 z-0",style:{background:"linear-gradient(135deg, rgba(251, 167, 213, 0.8) 0%, rgba(193, 135, 253, 0.8) 100%)"}}),I.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 w-full max-w-sm mx-auto",children:[I.jsxs("div",{className:"text-center mb-12",children:[I.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:I.jsx(vd,{className:"w-10 h-10 text-white"})}),I.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("h2",{className:"text-2xl font-medium text-white mb-4",children:"Meet singles at this event."}),I.jsx("button",{onClick:()=>i(!0),className:"text-white underline text-lg hover:opacity-80 transition-opacity",children:"See how it works"})]}),I.jsxs("div",{className:"space-y-4 w-full",children:[I.jsxs(Dt,{onClick:()=>h("qrScanner"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[I.jsx(d5,{className:"w-5 h-5 mr-3"}),"Scan QR Code"]}),I.jsxs(Dt,{onClick:()=>h("manualCodeEntry"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[I.jsx(BS,{className:"w-5 h-5 mr-3"}),"Enter Code Manually"]}),I.jsx(Dt,{onClick:()=>{console.log("🔍 Test navigation button clicked"),console.log("🔍 navigate function:",typeof n),console.log("🔍 Current location:",window.location.href);try{n("/join?code=TEST"),console.log("🔍 Navigation call completed")}catch(w){console.error("🔍 Navigation error:",w)}},className:"w-full bg-red-500 hover:bg-red-600 text-white font-medium py-2 rounded-full shadow-lg transition-all",children:"Test Navigation"}),I.jsx(Dt,{onClick:()=>{console.log("🔍 Simple test button clicked"),n("/test")},className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 rounded-full shadow-lg transition-all",children:"Simple Test Route"})]})]}),I.jsx("div",{className:"relative z-10 text-center",children:I.jsxs("p",{className:"text-white text-sm leading-relaxed",children:["By creating a temporary profile, you agree to our"," ",I.jsx("a",{href:"https://hooked-app.com/terms",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Terms"})," ","and"," ",I.jsx("a",{href:"https://hooked-app.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Privacy Policy"}),"."]})}),r&&I.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:I.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-sm w-full max-h-[70vh] overflow-y-auto relative",children:[I.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:I.jsx(Li,{className:"w-5 h-5"})}),I.jsxs("div",{className:"pr-8",children:[I.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"How it works"}),I.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 space-y-3 text-sm leading-relaxed",children:[I.jsx("li",{children:"• Scan the event's unique QR code"}),I.jsx("li",{children:"• Create a temporary profile (first name only)"}),I.jsx("li",{children:"• Discover other singles at this event"}),I.jsx("li",{children:"• Match and chat privately"}),I.jsx("li",{children:"• Everything expires when the event ends"})]})]})]})}),e==="qrScanner"&&I.jsx(aee,{onScan:o,onClose:m,onSwitchToManual:g}),e==="manualCodeEntry"&&I.jsx(lee,{onSubmit:c,onClose:m})]})}const cee={UploadFile:tH},_6=cee.UploadFile,Kr=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("rounded-xl border bg-card text-card-foreground shadow",n),...e}));Kr.displayName="Card";const yo=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("flex flex-col space-y-1.5 p-6",n),...e}));yo.displayName="CardHeader";const Xs=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("font-semibold leading-none tracking-tight",n),...e}));Xs.displayName="CardTitle";const uee=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));uee.displayName="CardDescription";const Xr=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("p-6 pt-0",n),...e}));Xr.displayName="CardContent";const dee=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("flex items-center p-6 pt-0",n),...e}));dee.displayName="CardFooter";function hee(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}function E6(){const n=no(),[e,t]=P.useState(null),[r,i]=P.useState("manual"),[o,c]=P.useState({first_name:"",age:"",gender_identity:"",interested_in:"",profile_photo_url:""}),[h,m]=P.useState(!1),[g,w]=P.useState(!1),_={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}};P.useEffect(()=>{(async()=>{console.log("🔍 Consent page - fetchEvent called");const D=localStorage.getItem("currentEventId");if(console.log("🔍 Consent page - eventId from localStorage:",D),!D){console.log("🔍 Consent page - No eventId found, redirecting to Home"),n(Kn("Home"));return}try{console.log("🔍 Consent page - Fetching event with ID:",D);const L=await Of.filter({id:D});console.log("🔍 Consent page - Found events:",L),L.length>0?(console.log("🔍 Consent page - Setting event:",L[0]),t(L[0])):(console.log("🔍 Consent page - No events found, redirecting to Home"),n(Kn("Home")))}catch(L){console.error("🔍 Consent page - Error fetching event details:",L),n(Kn("Home"))}})()},[n]);const A=async M=>{const D=M.target.files[0];if(D){if(!D.type.startsWith("image/")){xr.error("Please select an image file.");return}if(D.size>10*1024*1024){xr.error("Image must be smaller than 10MB.");return}w(!0);try{const{file_url:L}=await _6({file:D});c(G=>({...G,profile_photo_url:L})),xr.success("Photo uploaded successfully!")}catch(L){console.error("Error uploading photo:",L),xr.error("Failed to upload photo. Please try again.")}finally{w(!1)}}},R=async M=>{if(M.preventDefault(),!o.first_name||!o.age||!o.gender_identity||!o.interested_in){xr.error("Please fill in all fields.");return}if(!o.profile_photo_url){xr.error("Please upload a profile photo.");return}m(!0),i("processing");try{const D=hee(),L="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),G=`user_${D}@hooked-app.com`;await Zo.create({event_id:e.id,session_id:D,first_name:o.first_name,email:G,age:parseInt(o.age),gender_identity:o.gender_identity,interested_in:o.interested_in,profile_color:L,profile_photo_url:o.profile_photo_url,is_visible:!0}),localStorage.setItem("currentSessionId",D),localStorage.setItem("currentProfileColor",L),localStorage.setItem("currentProfilePhotoUrl",o.profile_photo_url),xr.success("Profile created! Welcome to the event."),n(Kn("Discovery"))}catch(D){console.error("Error creating profile:",D),xr.error("Failed to create profile. Please try again."),i("manual")}finally{m(!1)}};return I.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center px-4 py-8",children:I.jsx("div",{className:"w-full max-w-md",children:I.jsxs(gp,{mode:"wait",children:[r==="manual"&&I.jsx(oa.div,{..._,children:I.jsxs(Kr,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:[I.jsxs(yo,{className:"text-center",children:[I.jsx(Xs,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Your Event Profile For:"}),I.jsx(Xs,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(e==null?void 0:e.name)||"This Event"})]}),I.jsx(Xr,{children:I.jsxs("form",{onSubmit:R,className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Profile Photo *"}),I.jsxs("div",{className:"flex flex-col items-center",children:[I.jsxs("div",{className:"relative",children:[I.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:A,className:"hidden",disabled:g}),I.jsx("label",{htmlFor:"profile-photo-upload",className:"w-32 h-32 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-purple-400 transition-colors bg-gray-50 dark:bg-gray-700",children:g?I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}):o.profile_photo_url?I.jsx("img",{src:o.profile_photo_url,alt:"Profile preview",className:"w-full h-full rounded-full object-cover"}):I.jsxs("div",{className:"text-center",children:[I.jsx(N5,{className:"w-8 h-8 text-gray-400 dark:text-gray-500 mx-auto mb-2"}),I.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload Photo"})]})})]}),I.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Required • Max 10MB"})]})]}),I.jsx("div",{children:I.jsx($l,{type:"text",placeholder:"First Name *",value:o.first_name,onChange:M=>c(D=>({...D,first_name:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",required:!0})}),I.jsx("div",{children:I.jsx($l,{type:"number",placeholder:"Age *",value:o.age,onChange:M=>c(D=>({...D,age:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",min:"18",max:"99",required:!0})}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I am a... *"}),I.jsx("div",{className:"grid grid-cols-2 gap-3",children:["man","woman"].map(M=>I.jsx("button",{type:"button",onClick:()=>c(D=>({...D,gender_identity:M})),className:`py-3 px-4 rounded-xl border-2 transition-all font-medium ${o.gender_identity===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I'm interested in... *"}),I.jsx("div",{className:"grid grid-cols-3 gap-3",children:["men","women","everyone"].map(M=>I.jsx("button",{type:"button",onClick:()=>c(D=>({...D,interested_in:M})),className:`py-3 px-2 rounded-xl border-2 transition-all font-medium text-sm ${o.interested_in===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),I.jsx(Dt,{type:"submit",disabled:h||g,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white py-3 rounded-xl",children:h?I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating Profile..."]}):"Join Event"}),I.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-4",children:["By creating a profile, you agree to our"," ",I.jsx("a",{href:"https://hooked-app.com/terms",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 underline hover:opacity-80 transition-opacity",children:"Terms"})," ","and"," ",I.jsx("a",{href:"https://hooked-app.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 underline hover:opacity-80 transition-opacity",children:"Privacy Policy"}),"."]})]})})]})},"manual"),r==="processing"&&I.jsx(oa.div,{..._,children:I.jsx(Kr,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:I.jsxs(Xr,{className:"p-8 text-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),I.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Creating Your Profile"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Setting up your temporary profile for this event."})]})})},"processing")]})})})}const fee=Bg("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ra({className:n,variant:e,...t}){return I.jsx("div",{className:ln(fee({variant:e}),n),...t})}var b6=["PageUp","PageDown"],I6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],T6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ih="Slider",[Jw,pee,mee]=kP(ih),[A6,_ne]=eh(ih,[mee]),[gee,n1]=A6(ih),C6=P.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:o=1,orientation:c="horizontal",disabled:h=!1,minStepsBetweenThumbs:m=0,defaultValue:g=[r],value:w,onValueChange:_=()=>{},onValueCommit:A=()=>{},inverted:R=!1,form:M,...D}=n,L=P.useRef(new Set),G=P.useRef(0),H=c==="horizontal"?yee:xee,[Y=[],re]=Hf({prop:w,defaultProp:g,onChange:te=>{var K;(K=[...L.current][G.current])==null||K.focus(),_(te)}}),ie=P.useRef(Y);function V(te){const ee=bee(Y,te);Z(te,ee)}function B(te){Z(te,G.current)}function W(){const te=ie.current[G.current];Y[G.current]!==te&&A(Y)}function Z(te,ee,{commit:K}={commit:!1}){const we=Cee(o),se=See(Math.round((te-r)/o)*o+r,we),Te=G0(se,[r,i]);re((xe=[])=>{const oe=_ee(xe,Te,ee);if(Aee(oe,m*o)){G.current=oe.indexOf(Te);const Ae=String(oe)!==String(xe);return Ae&&K&&A(oe),Ae?oe:xe}else return xe})}return I.jsx(gee,{scope:n.__scopeSlider,name:t,disabled:h,min:r,max:i,valueIndexToChangeRef:G,thumbs:L.current,values:Y,orientation:c,form:M,children:I.jsx(Jw.Provider,{scope:n.__scopeSlider,children:I.jsx(Jw.Slot,{scope:n.__scopeSlider,children:I.jsx(H,{"aria-disabled":h,"data-disabled":h?"":void 0,...D,ref:e,onPointerDown:an(D.onPointerDown,()=>{h||(ie.current=Y)}),min:r,max:i,inverted:R,onSlideStart:h?void 0:V,onSlideMove:h?void 0:B,onSlideEnd:h?void 0:W,onHomeKeyDown:()=>!h&&Z(r,0,{commit:!0}),onEndKeyDown:()=>!h&&Z(i,Y.length-1,{commit:!0}),onStepKeyDown:({event:te,direction:ee})=>{if(!h){const se=b6.includes(te.key)||te.shiftKey&&I6.includes(te.key)?10:1,Te=G.current,xe=Y[Te],oe=o*se*ee;Z(xe+oe,Te,{commit:!0})}}})})})})});C6.displayName=ih;var[S6,R6]=A6(ih,{startEdge:"left",endEdge:"right",size:"width",direction:1}),yee=P.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:o,onSlideStart:c,onSlideMove:h,onSlideEnd:m,onStepKeyDown:g,...w}=n,[_,A]=P.useState(null),R=bn(e,H=>A(H)),M=P.useRef(void 0),D=PP(i),L=D==="ltr",G=L&&!o||!L&&o;function z(H){const Y=M.current||_.getBoundingClientRect(),re=[0,Y.width],V=P_(re,G?[t,r]:[r,t]);return M.current=Y,V(H-Y.left)}return I.jsx(S6,{scope:n.__scopeSlider,startEdge:G?"left":"right",endEdge:G?"right":"left",direction:G?1:-1,size:"width",children:I.jsx(N6,{dir:D,"data-orientation":"horizontal",...w,ref:R,style:{...w.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:H=>{const Y=z(H.clientX);c==null||c(Y)},onSlideMove:H=>{const Y=z(H.clientX);h==null||h(Y)},onSlideEnd:()=>{M.current=void 0,m==null||m()},onStepKeyDown:H=>{const re=T6[G?"from-left":"from-right"].includes(H.key);g==null||g({event:H,direction:re?-1:1})}})})}),xee=P.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:h,onStepKeyDown:m,...g}=n,w=P.useRef(null),_=bn(e,w),A=P.useRef(void 0),R=!i;function M(D){const L=A.current||w.current.getBoundingClientRect(),G=[0,L.height],H=P_(G,R?[r,t]:[t,r]);return A.current=L,H(D-L.top)}return I.jsx(S6,{scope:n.__scopeSlider,startEdge:R?"bottom":"top",endEdge:R?"top":"bottom",size:"height",direction:R?1:-1,children:I.jsx(N6,{"data-orientation":"vertical",...g,ref:_,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:D=>{const L=M(D.clientY);o==null||o(L)},onSlideMove:D=>{const L=M(D.clientY);c==null||c(L)},onSlideEnd:()=>{A.current=void 0,h==null||h()},onStepKeyDown:D=>{const G=T6[R?"from-bottom":"from-top"].includes(D.key);m==null||m({event:D,direction:G?-1:1})}})})}),N6=P.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:h,onStepKeyDown:m,...g}=n,w=n1(ih,t);return I.jsx(nn.span,{...g,ref:e,onKeyDown:an(n.onKeyDown,_=>{_.key==="Home"?(c(_),_.preventDefault()):_.key==="End"?(h(_),_.preventDefault()):b6.concat(I6).includes(_.key)&&(m(_),_.preventDefault())}),onPointerDown:an(n.onPointerDown,_=>{const A=_.target;A.setPointerCapture(_.pointerId),_.preventDefault(),w.thumbs.has(A)?A.focus():r(_)}),onPointerMove:an(n.onPointerMove,_=>{_.target.hasPointerCapture(_.pointerId)&&i(_)}),onPointerUp:an(n.onPointerUp,_=>{const A=_.target;A.hasPointerCapture(_.pointerId)&&(A.releasePointerCapture(_.pointerId),o(_))})})}),k6="SliderTrack",P6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=n1(k6,t);return I.jsx(nn.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});P6.displayName=k6;var ev="SliderRange",D6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=n1(ev,t),o=R6(ev,t),c=P.useRef(null),h=bn(e,c),m=i.values.length,g=i.values.map(A=>L6(A,i.min,i.max)),w=m>1?Math.min(...g):0,_=100-Math.max(...g);return I.jsx(nn.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:h,style:{...n.style,[o.startEdge]:w+"%",[o.endEdge]:_+"%"}})});D6.displayName=ev;var tv="SliderThumb",O6=P.forwardRef((n,e)=>{const t=pee(n.__scopeSlider),[r,i]=P.useState(null),o=bn(e,h=>i(h)),c=P.useMemo(()=>r?t().findIndex(h=>h.ref.current===r):-1,[t,r]);return I.jsx(wee,{...n,ref:o,index:c})}),wee=P.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...o}=n,c=n1(tv,t),h=R6(tv,t),[m,g]=P.useState(null),w=bn(e,z=>g(z)),_=m?c.form||!!m.closest("form"):!0,A=__(m),R=c.values[r],M=R===void 0?0:L6(R,c.min,c.max),D=Eee(r,c.values.length),L=A==null?void 0:A[h.size],G=L?Iee(L,M,h.direction):0;return P.useEffect(()=>{if(m)return c.thumbs.add(m),()=>{c.thumbs.delete(m)}},[m,c.thumbs]),I.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${M}% + ${G}px)`},children:[I.jsx(Jw.ItemSlot,{scope:n.__scopeSlider,children:I.jsx(nn.span,{role:"slider","aria-label":n["aria-label"]||D,"aria-valuemin":c.min,"aria-valuenow":R,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:w,style:R===void 0?{display:"none"}:n.style,onFocus:an(n.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),_&&I.jsx(M6,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:R},r)]})});O6.displayName=tv;var vee="RadioBubbleInput",M6=P.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(i,r),c=T_(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const m=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(c!==e&&w){const _=new Event("input",{bubbles:!0});w.call(h,e),h.dispatchEvent(_)}},[c,e]),I.jsx(nn.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});M6.displayName=vee;function _ee(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,o)=>i-o)}function L6(n,e,t){const o=100/(t-e)*(n-e);return G0(o,[0,100])}function Eee(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function bee(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function Iee(n,e,t){const r=n/2,o=P_([0,50],[0,r]);return(r-o(e)*t)*t}function Tee(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function Aee(n,e){if(e>0){const t=Tee(n);return Math.min(...t)>=e}return!0}function P_(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function Cee(n){return(String(n).split(".")[1]||"").length}function See(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var V6=C6,Ree=P6,Nee=D6,kee=O6;const nv=P.forwardRef(({className:n,...e},t)=>I.jsxs(V6,{ref:t,className:ln("relative flex w-full touch-none select-none items-center",n),...e,children:[I.jsx(Ree,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:I.jsx(Nee,{className:"absolute h-full bg-primary"})}),I.jsx(kee,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));nv.displayName=V6.displayName;const Pee=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing"],sS=["yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function Dee({filters:n,onFiltersChange:e,onClose:t}){const[r,i]=P.useState(n),[o,c]=P.useState(!1),h=w=>{i(_=>({..._,interests:_.interests.includes(w)?_.interests.filter(A=>A!==w):[..._.interests,w]}))},m=()=>{e(r),t()},g=()=>{const w={age_min:18,age_max:99,gender:"all",interests:[]};i(w),e(w),t()};return I.jsxs(Jg,{open:!0,onOpenChange:t,children:[I.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:I.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[I.jsx(e1,{className:"mb-6",children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs(t1,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[I.jsx(VS,{className:"w-5 h-5"}),"Filter Profiles"]}),I.jsx(Dt,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:I.jsx(Li,{className:"w-4 h-4"})})]})}),I.jsxs("div",{className:"space-y-6",children:[I.jsxs("div",{children:[I.jsx(cs,{className:"text-base font-medium mb-4 block text-gray-900 dark:text-white",children:"Age Range"}),I.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[I.jsxs("span",{className:"text-sm font-medium text-pink-600 dark:text-pink-400",children:["Min Age: ",r.age_min]}),I.jsxs("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:["Max Age: ",r.age_max]})]}),I.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Drag the handles to set your preferred age range"}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Minimum Age"}),I.jsx("div",{className:"relative",children:I.jsx(nv,{value:[r.age_min],onValueChange:([w])=>i(_=>({..._,age_min:w<_.age_max?w:_.age_max-1})),min:18,max:99,step:1,className:"age-slider-min"})})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Maximum Age"}),I.jsx("div",{className:"relative",children:I.jsx(nv,{value:[r.age_max],onValueChange:([w])=>i(_=>({..._,age_max:w>_.age_min?w:_.age_min+1})),min:18,max:99,step:1,className:"age-slider-max"})})]})]})]}),I.jsxs("div",{children:[I.jsx(cs,{className:"text-base font-medium mb-3 block text-gray-900 dark:text-white",children:"Must Share These Interests"}),I.jsxs("div",{className:"flex flex-wrap gap-2",children:[Pee.map(w=>I.jsx(ra,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w)),!o&&r.interests.filter(w=>sS.includes(w)).map(w=>I.jsx(ra,{variant:"default",className:"cursor-pointer px-3 py-2 rounded-full transition-all bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",onClick:()=>h(w),children:w},`selected-${w}`))]}),I.jsx("div",{className:"text-center mt-3",children:I.jsx(Dt,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(!o),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","aria-label":o?"Show less interests":"Show more interests",children:o?I.jsx(LS,{className:"w-5 h-5"}):I.jsx(uv,{className:"w-5 h-5"})})}),I.jsx(gp,{children:o&&I.jsx(oa.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:I.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:sS.map(w=>I.jsx(ra,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w))})})}),r.interests.length>0&&I.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Showing only people who share at least one selected interest."})]}),I.jsxs("div",{className:"flex gap-3 pt-4",children:[I.jsx(Dt,{onClick:g,variant:"outline",className:"flex-1 rounded-xl border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Reset All"}),I.jsx(Dt,{onClick:m,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl",children:"Apply Filters"})]})]})]})}),I.jsx("style",{jsx:!0,children:`
        .age-slider-min [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #f87171 0%, #f87171 100%);
          border-radius: 3px;
        }
        
        .age-slider-max [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #a855f7 0%, #a855f7 100%);
          border-radius: 3px;
        }
        
        .age-slider-min [role="slider"],
        .age-slider-max [role="slider"] {
          width: 20px;
          height: 20px;
          background: white;
          border: 3px solid;
          border-radius: 50%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          transition: all 0.2s ease;
        }
        
        .age-slider-min [role="slider"] {
          border-color: #f87171;
        }
        
        .age-slider-max [role="slider"] {
          border-color: #a855f7;
        }
        
        .age-slider-min [role="slider"]:hover,
        .age-slider-max [role="slider"]:hover {
          transform: scale(1.1);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .age-slider-min [role="slider"]:focus,
        .age-slider-max [role="slider"]:focus {
          outline: none;
          transform: scale(1.15);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
      `})]})}function F6({profile:n,onClose:e,onLike:t,isLiked:r}){if(P.useEffect(()=>{const A=R=>{R.key==="Escape"&&e()};return document.addEventListener("keydown",A),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",A),document.body.style.overflow="auto"}},[e]),!n)return null;const{profile_photo_url:i,profile_color:o,first_name:c,age:h,height:m,interests:g,bio:w}=n,_=c?c[0].toUpperCase():"?";return I.jsx(gp,{children:I.jsx(oa.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",onClick:e,children:I.jsxs(oa.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"relative w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[I.jsxs("div",{className:"relative",children:[i?I.jsxs(I.Fragment,{children:[I.jsx("img",{src:i,alt:`${c}'s profile photo`,className:"w-full h-80 object-cover",loading:"lazy",onError:A=>{A.target.style.display="none";const R=A.target.nextElementSibling;R&&(R.style.display="flex")}}),I.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl absolute inset-0",style:{backgroundColor:o||"#cccccc",display:"none"},children:_})]}):I.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl",style:{backgroundColor:o||"#cccccc"},children:_}),I.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors z-10","aria-label":"Close profile",children:I.jsx(Li,{className:"w-6 h-6"})})]}),I.jsxs("div",{className:"p-6 space-y-6",children:[I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:c}),I.jsxs("div",{className:"flex items-center gap-4 text-gray-600 dark:text-gray-400",children:[h&&I.jsxs("div",{className:"flex items-center gap-1",children:[I.jsx(MM,{className:"w-4 h-4"}),I.jsxs("span",{children:[h," years old"]})]}),m&&I.jsxs("div",{className:"flex items-center gap-1",children:[I.jsx(m5,{className:"w-4 h-4"}),I.jsxs("span",{children:[m," cm"]})]})]})]}),w&&I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"About"}),I.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:w})]}),g&&g.length>0&&I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Interests"}),I.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(A=>I.jsx(ra,{variant:"outline",className:"rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:A},A))})]}),I.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:I.jsxs(Dt,{onClick:t,disabled:r,className:`w-full rounded-xl py-3 transition-all ${r?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white"}`,children:[I.jsx(vd,{className:`w-5 h-5 mr-2 ${r?"":"hover:fill-current"}`}),r?"Already Liked":`Like ${c}`]})})]})]})})})}function B6(){const n=no(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState([]),[h,m]=P.useState(null),[g,w]=P.useState(null),[_,A]=P.useState({age_min:18,age_max:99,gender:"all",interests:[]}),[R,M]=P.useState(!1),[D,L]=P.useState(!0),[G,z]=P.useState(new Set),[H,Y]=P.useState(null),[re,ie]=P.useState(!0),V=P.useRef({profiles:null,likes:null});P.useEffect(()=>(Z(),()=>{B()}),[]),P.useEffect(()=>{r&&e.length>=0&&te()},[e,_,r]),P.useEffect(()=>{const we=()=>{ie(!document.hidden)};return ie(!document.hidden),document.addEventListener("visibilitychange",we),()=>document.removeEventListener("visibilitychange",we)},[]),P.useEffect(()=>{if(!(h!=null&&h.id)||!g){B();return}W()},[h==null?void 0:h.id,g]);const B=()=>{Object.values(V.current).forEach(we=>{we&&we()}),V.current={profiles:null,likes:null},console.log("🧹 All Discovery listeners cleaned up")},W=()=>{B();try{V.current.profiles=Zo.onProfilesChange(h.id,we=>{const se=we.filter(oe=>oe.is_visible),Te=se.find(oe=>oe.session_id===g),xe=se.filter(oe=>oe.session_id!==g);i(Te),t(xe),Te||(console.warn("Current user profile not found for session, redirecting."),n(Kn("Home")))},{is_visible:!0}),V.current.likes=us.onLikesChange(h.id,g,we=>{z(new Set(we.map(se=>se.liked_session_id)))}),console.log("📡 Real-time listeners setup complete")}catch(we){console.error("❌ Error setting up real-time listeners:",we)}},Z=async()=>{const we=localStorage.getItem("currentEventId"),se=localStorage.getItem("currentSessionId");if(!we||!se){n(Kn("Home"));return}w(se);try{const Te=await Of.filter({id:we});if(Te.length>0)m(Te[0]);else{n(Kn("Home"));return}}catch(Te){console.error("Error initializing session:",Te)}L(!1)},te=()=>{if(!r){c([]);return}let we=e.filter(se=>{var oe;const Te=r.interested_in==="everyone"||r.interested_in==="men"&&se.gender_identity==="man"||r.interested_in==="women"&&se.gender_identity==="woman"||r.interested_in==="non-binary"&&se.gender_identity==="non-binary",xe=se.interested_in==="everyone"||se.interested_in==="men"&&r.gender_identity==="man"||se.interested_in==="women"&&r.gender_identity==="woman"||se.interested_in==="non-binary"&&r.gender_identity==="non-binary";return!(!Te||!xe||!(se.age>=_.age_min&&se.age<=_.age_max)||_.gender!=="all"&&se.gender_identity!==_.gender||_.interests.length>0&&!((oe=se.interests)!=null&&oe.some(Ae=>_.interests.includes(Ae))))});c(we)},ee=async we=>{if(G.has(we.session_id)||!r)return;const se=localStorage.getItem("currentEventId"),Te=r.session_id;try{z(Ae=>new Set([...Ae,we.session_id]));const xe=await us.create({event_id:se,liker_session_id:Te,liked_session_id:we.session_id,is_mutual:!1,liker_notified_of_match:!1,liked_notified_of_match:!1}),oe=await us.filter({event_id:se,liker_session_id:we.session_id,liked_session_id:Te});if(oe.length>0){const Ae=oe[0];await us.update(xe.id,{is_mutual:!0,liker_notified_of_match:!0}),await us.update(Ae.id,{is_mutual:!0,liked_notified_of_match:!0}),alert(`🎉 It's a Match! You and ${we.first_name} liked each other.`),n(Kn("Matches"))}}catch(xe){console.error("Error liking profile:",xe),z(oe=>{const Ae=new Set(oe);return Ae.delete(we.session_id),Ae})}},K=we=>{Y(we)};return P.useEffect(()=>{const we=setInterval(()=>{},3e4);return()=>clearInterval(we)},[]),D?I.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading singles at this event..."})]})}):I.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[I.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[I.jsxs("div",{className:"flex items-center justify-between mb-6",children:[I.jsxs("div",{className:"flex-1",children:[I.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[I.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:I.jsx(vd,{className:"w-3 h-3 text-white"})}),I.jsx("span",{className:"font-semibold text-lg bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),I.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Singles at ",h==null?void 0:h.name]}),I.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[o.length," people discovered"]})]}),I.jsx(Dt,{onClick:()=>M(!0),variant:"outline",size:"icon",className:"rounded-full border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:I.jsx(VS,{className:"w-5 h-5"})})]}),I.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map(we=>I.jsx("div",{className:"relative",children:I.jsx(Kr,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer overflow-hidden bg-white dark:bg-gray-800",onClick:()=>K(we),children:I.jsx(Xr,{className:"p-0",children:I.jsxs("div",{className:"relative aspect-square",children:[we.profile_photo_url?I.jsx("img",{src:we.profile_photo_url,alt:`${we.first_name}'s profile`,className:"w-full h-full object-cover",loading:"lazy",onError:se=>{se.target.style.display="none";const Te=se.target.nextElementSibling;Te&&(Te.style.display="flex")}}):null,I.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-semibold text-lg absolute inset-0",style:{backgroundColor:we.profile_color||"#cccccc",display:we.profile_photo_url?"none":"flex"},children:we.first_name[0]}),I.jsx("button",{onClick:se=>{se.stopPropagation(),ee(we)},disabled:G.has(we.session_id),className:`absolute top-2 right-2 p-2 rounded-full shadow-lg transition-all ${G.has(we.session_id)?"bg-white/90 dark:bg-gray-800/90 text-pink-500 cursor-not-allowed":"bg-white/90 dark:bg-gray-800/90 text-gray-400 dark:text-gray-500 hover:bg-pink-50 dark:hover:bg-pink-900/20 hover:text-pink-500 hover:scale-110"}`,children:I.jsx(vd,{className:`w-4 h-4 ${G.has(we.session_id)?"fill-current text-pink-500":"text-gray-400 dark:text-gray-500 hover:text-pink-500"}`})}),I.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:I.jsx("h3",{className:"font-semibold text-white text-sm truncate",children:we.first_name})})]})})})},we.id))}),o.length===0&&!D&&I.jsx(Kr,{className:"border-0 shadow-lg mt-8 bg-white dark:bg-gray-800",children:I.jsxs(Xr,{className:"p-8 text-center",children:[I.jsx(xf,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),I.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"No singles found"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"Try adjusting your filters or check back later as more people join the event."}),I.jsx(Dt,{onClick:()=>M(!0),variant:"outline",className:"rounded-xl border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:"Adjust Filters"})]})}),R&&I.jsx(Dee,{filters:_,onFiltersChange:A,onClose:()=>M(!1)}),H&&I.jsx(F6,{profile:H,onClose:()=>Y(null),onLike:()=>{ee(H),Y(null)},isLiked:G.has(H.session_id)})]}),I.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:I.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:I.jsxs("div",{className:"flex justify-around",children:[I.jsxs("button",{onClick:()=>n(Kn("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[I.jsx(Yf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs",children:"Profile"})]}),I.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[I.jsx(xf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs font-medium",children:"Discover"})]}),I.jsxs("button",{onClick:()=>n(Kn("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[I.jsx(yf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs",children:"Matches"})]})]})})})]})}function Ao(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function hu(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const j6=6048e5,Oee=864e5;let Mee={};function r1(){return Mee}function Gf(n,e){var h,m,g,w;const t=r1(),r=(e==null?void 0:e.weekStartsOn)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,i=Ao(n),o=i.getDay(),c=(o<r?7:0)+o-r;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function tg(n){return Gf(n,{weekStartsOn:1})}function U6(n){const e=Ao(n),t=e.getFullYear(),r=hu(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=tg(r),o=hu(n,0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);const c=tg(o);return e.getTime()>=i.getTime()?t+1:e.getTime()>=c.getTime()?t:t-1}function oS(n){const e=Ao(n);return e.setHours(0,0,0,0),e}function aS(n){const e=Ao(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Lee(n,e){const t=oS(n),r=oS(e),i=+t-aS(t),o=+r-aS(r);return Math.round((i-o)/Oee)}function Vee(n){const e=U6(n),t=hu(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),tg(t)}function Fee(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Bee(n){if(!Fee(n)&&typeof n!="number")return!1;const e=Ao(n);return!isNaN(Number(e))}function jee(n){const e=Ao(n),t=hu(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Uee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zee=(n,e,t)=>{let r;const i=Uee[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function bx(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Wee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Hee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Gee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$ee={date:bx({formats:Wee,defaultWidth:"full"}),time:bx({formats:Hee,defaultWidth:"full"}),dateTime:bx({formats:Gee,defaultWidth:"full"})},qee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kee=(n,e,t,r)=>qee[n];function Fh(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,h=t!=null&&t.width?String(t.width):c;i=n.formattingValues[h]||n.formattingValues[c]}else{const c=n.defaultWidth,h=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[h]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const Xee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Jee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ete={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},tte=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},nte={ordinalNumber:tte,era:Fh({values:Xee,defaultWidth:"wide"}),quarter:Fh({values:Yee,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Fh({values:Qee,defaultWidth:"wide"}),day:Fh({values:Zee,defaultWidth:"wide"}),dayPeriod:Fh({values:Jee,defaultWidth:"wide",formattingValues:ete,defaultFormattingWidth:"wide"})};function Bh(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const c=o[0],h=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(h)?ite(h,_=>_.test(c)):rte(h,_=>_.test(c));let g;g=n.valueCallback?n.valueCallback(m):m,g=t.valueCallback?t.valueCallback(g):g;const w=e.slice(c.length);return{value:g,rest:w}}}function rte(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function ite(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function ste(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(i.length);return{value:c,rest:h}}}const ote=/^(\d+)(th|st|nd|rd)?/i,ate=/\d+/i,lte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cte={any:[/^b/i,/^(a|c)/i]},ute={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},dte={any:[/1/i,/2/i,/3/i,/4/i]},hte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},xte={ordinalNumber:ste({matchPattern:ote,parsePattern:ate,valueCallback:n=>parseInt(n,10)}),era:Bh({matchPatterns:lte,defaultMatchWidth:"wide",parsePatterns:cte,defaultParseWidth:"any"}),quarter:Bh({matchPatterns:ute,defaultMatchWidth:"wide",parsePatterns:dte,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Bh({matchPatterns:hte,defaultMatchWidth:"wide",parsePatterns:fte,defaultParseWidth:"any"}),day:Bh({matchPatterns:pte,defaultMatchWidth:"wide",parsePatterns:mte,defaultParseWidth:"any"}),dayPeriod:Bh({matchPatterns:gte,defaultMatchWidth:"any",parsePatterns:yte,defaultParseWidth:"any"})},wte={code:"en-US",formatDistance:zee,formatLong:$ee,formatRelative:Kee,localize:nte,match:xte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vte(n){const e=Ao(n);return Lee(e,jee(e))+1}function _te(n){const e=Ao(n),t=+tg(e)-+Vee(e);return Math.round(t/j6)+1}function z6(n,e){var w,_,A,R;const t=Ao(n),r=t.getFullYear(),i=r1(),o=(e==null?void 0:e.firstWeekContainsDate)??((_=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:_.firstWeekContainsDate)??i.firstWeekContainsDate??((R=(A=i.locale)==null?void 0:A.options)==null?void 0:R.firstWeekContainsDate)??1,c=hu(n,0);c.setFullYear(r+1,0,o),c.setHours(0,0,0,0);const h=Gf(c,e),m=hu(n,0);m.setFullYear(r,0,o),m.setHours(0,0,0,0);const g=Gf(m,e);return t.getTime()>=h.getTime()?r+1:t.getTime()>=g.getTime()?r:r-1}function Ete(n,e){var h,m,g,w;const t=r1(),r=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,i=z6(n,e),o=hu(n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Gf(o,e)}function bte(n,e){const t=Ao(n),r=+Gf(t,e)-+Ete(t,e);return Math.round(r/j6)+1}function wn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const bl={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return wn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):wn(t+1,2)},d(n,e){return wn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return wn(n.getHours()%12||12,e.length)},H(n,e){return wn(n.getHours(),e.length)},m(n,e){return wn(n.getMinutes(),e.length)},s(n,e){return wn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return wn(i,e.length)}},Ju={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return bl.y(n,e)},Y:function(n,e,t,r){const i=z6(n,r),o=i>0?i:1-i;if(e==="YY"){const c=o%100;return wn(c,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):wn(o,e.length)},R:function(n,e){const t=U6(n);return wn(t,e.length)},u:function(n,e){const t=n.getFullYear();return wn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return bl.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=bte(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):wn(i,e.length)},I:function(n,e,t){const r=_te(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):bl.d(n,e)},D:function(n,e,t){const r=vte(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return wn(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return wn(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return wn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ju.noon:r===0?i=Ju.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ju.evening:r>=12?i=Ju.afternoon:r>=4?i=Ju.morning:i=Ju.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return bl.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):bl.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):bl.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):bl.s(n,e)},S:function(n,e){return bl.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return uS(r);case"XXXX":case"XX":return Nc(r);case"XXXXX":case"XXX":default:return Nc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return uS(r);case"xxxx":case"xx":return Nc(r);case"xxxxx":case"xxx":default:return Nc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+cS(r,":");case"OOOO":default:return"GMT"+Nc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+cS(r,":");case"zzzz":default:return"GMT"+Nc(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return wn(r,e.length)},T:function(n,e,t){const r=n.getTime();return wn(r,e.length)}};function cS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+wn(o,2)}function uS(n,e){return n%60===0?(n>0?"-":"+")+wn(Math.abs(n)/60,2):Nc(n,e)}function Nc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=wn(Math.trunc(r/60),2),o=wn(r%60,2);return t+i+e+o}const dS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},W6=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ite=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return dS(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",dS(r,e)).replace("{{time}}",W6(i,e))},Tte={p:W6,P:Ite},Ate=/^D+$/,Cte=/^Y+$/,Ste=["D","DD","YY","YYYY"];function Rte(n){return Ate.test(n)}function Nte(n){return Cte.test(n)}function kte(n,e,t){const r=Pte(n,e,t);if(console.warn(r),Ste.includes(n))throw new RangeError(r)}function Pte(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Dte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ote=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Mte=/^'([^]*?)'?$/,Lte=/''/g,Vte=/[a-zA-Z]/;function Fte(n,e,t){var w,_,A,R;const r=r1(),i=r.locale??wte,o=r.firstWeekContainsDate??((_=(w=r.locale)==null?void 0:w.options)==null?void 0:_.firstWeekContainsDate)??1,c=r.weekStartsOn??((R=(A=r.locale)==null?void 0:A.options)==null?void 0:R.weekStartsOn)??0,h=Ao(n);if(!Bee(h))throw new RangeError("Invalid time value");let m=e.match(Ote).map(M=>{const D=M[0];if(D==="p"||D==="P"){const L=Tte[D];return L(M,i.formatLong)}return M}).join("").match(Dte).map(M=>{if(M==="''")return{isToken:!1,value:"'"};const D=M[0];if(D==="'")return{isToken:!1,value:Bte(M)};if(lS[D])return{isToken:!0,value:M};if(D.match(Vte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:M}});i.localize.preprocessor&&(m=i.localize.preprocessor(h,m));const g={firstWeekContainsDate:o,weekStartsOn:c,locale:i};return m.map(M=>{if(!M.isToken)return M.value;const D=M.value;(Nte(D)||Rte(D))&&kte(D,e,String(n));const L=lS[D[0]];return L(h,D,i.localize,g)}).join("")}function Bte(n){const e=n.match(Mte);return e?e[1].replace(Lte,"'"):n}function jte({matchName:n,onConfirm:e,onCancel:t,isSharing:r}){const[i,o]=P.useState({fullName:"",phoneNumber:""}),[c,h]=P.useState("confirm"),[m,g]=P.useState(!1),w=async()=>{var R,M,D,L;if(g(!0),navigator.contacts)try{const G=await navigator.contacts.select(["name","tel"]);if(G&&G.length>0){const z=G[0],H=((M=(R=z.name)==null?void 0:R[0])==null?void 0:M.formatted)||"",Y=((L=(D=z.tel)==null?void 0:D[0])==null?void 0:L.value)||"";if(H&&Y){o({fullName:H,phoneNumber:Y}),A({fullName:H,phoneNumber:Y}),g(!1);return}}}catch{console.log("Contact access not available or denied, falling back to manual entry")}h("enter"),g(!1)},_=()=>{!i.fullName.trim()||!i.phoneNumber.trim()||A(i)},A=async R=>{g(!0);try{await e(R),h("success"),setTimeout(()=>{t()},2e3)}catch(M){console.error("Error sharing contact info:",M),alert("Failed to share contact info. Please try again.")}g(!1)};return I.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:I.jsxs(oa.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl relative",children:[I.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:I.jsx(Li,{className:"w-5 h-5"})}),c==="confirm"&&I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:I.jsx(Rx,{className:"w-8 h-8 text-white"})}),I.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Share Contact Info?"}),I.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:["This will share your name and phone number with ",I.jsx("span",{className:"font-medium",children:n}),". This action cannot be undone."]}),I.jsxs("div",{className:"flex gap-3",children:[I.jsx(Dt,{onClick:t,variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:m,children:"Not Yet"}),I.jsx(Dt,{onClick:w,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:m,children:m?I.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Share"})]})]}),c==="enter"&&I.jsxs("div",{children:[I.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:I.jsx(Yf,{className:"w-8 h-8 text-white"})}),I.jsx("h3",{className:"font-semibold text-xl mb-2 text-center text-gray-900 dark:text-white",children:"Enter Your Contact Info"}),I.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center text-sm",children:["Please enter your details to share with ",n]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx(cs,{htmlFor:"fullName",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),I.jsx($l,{id:"fullName",type:"text",placeholder:"Your full name",value:i.fullName,onChange:R=>o(M=>({...M,fullName:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",autoFocus:!0})]}),I.jsxs("div",{children:[I.jsx(cs,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),I.jsx($l,{id:"phoneNumber",type:"tel",placeholder:"Your phone number",value:i.phoneNumber,onChange:R=>o(M=>({...M,phoneNumber:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),I.jsxs("div",{className:"flex gap-3 mt-6",children:[I.jsx(Dt,{onClick:()=>h("confirm"),variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Back"}),I.jsx(Dt,{onClick:_,disabled:!i.fullName.trim()||!i.phoneNumber.trim()||m,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",children:m?I.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Confirm Share"})]})]}),c==="success"&&I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:I.jsx(WM,{className:"w-8 h-8 text-white"})}),I.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Contact Info Shared!"}),I.jsxs("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:["Your contact information has been shared with ",n,". They can now see your name and phone number."]})]})]})})}function Ute({match:n,onClose:e}){var ee;const[t,r]=P.useState([]),[i,o]=P.useState(""),[c,h]=P.useState(!0),[m,g]=P.useState(!1),[w,_]=P.useState(!1),[A,R]=P.useState(null),[M,D]=P.useState(!0),L=P.useRef(null),G=localStorage.getItem("currentSessionId"),z=localStorage.getItem("currentEventId"),H=`${G}_${n.session_id}`.split("").sort().join(""),[Y,re]=P.useState(!1);P.useEffect(()=>{re(!1)},[n.session_id]);const ie=P.useCallback(async()=>{try{const K=await Vc.filter({match_id:H,receiver_session_id:G,is_read:!1,event_id:z});K.length>0&&await Promise.all(K.map(we=>Vc.update(we.id,{is_read:!0})))}catch(K){console.error("Error marking messages as read:",K)}},[H,G,z]),V=P.useCallback(async()=>{try{const K=await Vc.filter({event_id:z,match_id:H},"created_date");r(K),ie()}catch(K){console.error("Error loading messages:",K)}h(!1)},[z,H,ie]);P.useEffect(()=>{const K=()=>{D(!document.hidden)};return document.addEventListener("visibilitychange",K),()=>document.removeEventListener("visibilitychange",K)},[]),P.useEffect(()=>{V(),W();const K=setInterval(()=>{M&&(V(),W())},3e4);return()=>clearInterval(K)},[M,V]),P.useEffect(()=>{B()},[t]);const B=()=>{var K;(K=L.current)==null||K.scrollIntoView({behavior:"smooth"})},W=async()=>{try{(await Xy.filter({event_id:z,match_id:H,sharer_session_id:G})).length>0&&_(!0);const we=await Xy.filter({event_id:z,match_id:H,sharer_session_id:n.session_id,recipient_session_id:G});we.length>0&&R(we[0])}catch(K){console.error("Error loading contact shares:",K)}},Z=async K=>{if(K.preventDefault(),!i.trim())return;const we=i.trim();o("");try{const se={id:`temp_${Date.now()}`,content:we,sender_session_id:G,created_date:new Date().toISOString()};r(Te=>[...Te,se]),await Vc.create({event_id:z,sender_session_id:G,receiver_session_id:n.session_id,content:we,match_id:H,is_read:!1})}catch(se){console.error("Error sending message:",se),r(Te=>Te.filter(xe=>!xe.id.startsWith("temp_"))),o(we)}},te=async K=>{try{await Xy.create({event_id:z,sharer_session_id:G,recipient_session_id:n.session_id,full_name:K.fullName,phone_number:K.phoneNumber,match_id:H}),_(!0),g(!1),W()}catch(we){throw console.error("Error sharing contact info:",we),we}};return I.jsx(Jg,{open:!0,onOpenChange:e,children:I.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:I.jsxs("div",{className:"modal-content w-full max-w-sm h-[600px] bg-white dark:bg-gray-900 rounded-2xl flex flex-col shadow-2xl",children:[I.jsxs(e1,{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-t-2xl",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[n.profile_photo_url&&!Y?I.jsx("img",{src:n.profile_photo_url,alt:`${n.first_name}'s avatar`,className:"w-10 h-10 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700",loading:"lazy",onError:()=>re(!0)}):I.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:n.profile_color},children:n.first_name[0]}),I.jsxs("div",{children:[I.jsx(t1,{className:"text-lg text-gray-900 dark:text-white",children:n.first_name}),I.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[I.jsx(hv,{className:"w-3 h-3 text-gray-400 dark:text-gray-500"}),I.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Expires at midnight"})]})]}),I.jsxs("div",{className:"flex gap-1",children:[I.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>{const K=document.createElement("div");K.innerHTML=`
                      <div class="fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4">
                        <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full">
                          <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Report ${n.first_name}</h3>
                            <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                              </svg>
                            </button>
                          </div>
                          <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                            Report ${n.first_name} for inappropriate behavior.
                          </p>
                          <div class="space-y-3">
                            <div>
                              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Reason</label>
                              <select class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                                <option value="">Select a reason...</option>
                                <option value="inappropriate_behavior">Inappropriate Behavior</option>
                                <option value="harassment">Harassment</option>
                                <option value="spam">Spam or Unwanted Messages</option>
                                <option value="fake_profile">Fake Profile</option>
                                <option value="inappropriate_content">Inappropriate Content</option>
                                <option value="other">Other</option>
                              </select>
                            </div>
                            <div>
                              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Details</label>
                              <textarea class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white min-h-[100px]" placeholder="Please provide details..."></textarea>
                            </div>
                            <div class="flex gap-3 pt-4">
                              <button onclick="this.closest('.fixed').remove()" class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">
                                Cancel
                              </button>
                              <button onclick="alert('Report submitted for ${n.first_name}. Thank you for helping keep our community safe.'); this.closest('.fixed').remove()" class="flex-1 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-md">
                                Submit Report
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    `,document.body.appendChild(K)},className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",title:"Report user",children:I.jsx(FS,{className:"w-4 h-4"})}),!w&&I.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>g(!0),className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",title:"Share contact info",children:I.jsx(Bb,{className:"w-4 h-4"})}),I.jsx(Dt,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:I.jsx(Li,{className:"w-4 h-4"})})]})]}),I.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:(ee=n.interests)==null?void 0:ee.map(K=>I.jsx(ra,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-700 text-purple-600 dark:text-purple-300 bg-white dark:bg-gray-800",children:K},K))}),(w||A)&&I.jsxs("div",{className:"mt-3 space-y-2",children:[w&&I.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[I.jsx(Bb,{className:"w-3 h-3"}),I.jsx("span",{children:"You shared your contact info"})]}),A&&I.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[I.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 mb-2",children:[I.jsx(Rx,{className:"w-3 h-3"}),I.jsxs("span",{children:[n.first_name," shared their contact info"]})]}),I.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[I.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[I.jsx(Yf,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),I.jsx("span",{className:"font-medium",children:A.full_name})]}),I.jsxs("div",{className:"flex items-center gap-2",children:[I.jsx(Rx,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),I.jsx("span",{className:"font-mono",children:A.phone_number})]})]})]})]})]}),I.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-800",children:[c?I.jsx("div",{className:"flex justify-center py-8",children:I.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):t.length===0?I.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:I.jsxs("p",{className:"text-sm",children:["🎉 You matched! Say hello to ",n.first_name]})}):t.map(K=>I.jsx("div",{className:`flex ${K.sender_session_id===G?"justify-end":"justify-start"}`,children:I.jsxs("div",{className:`max-w-[80%] px-4 py-2 rounded-2xl ${K.sender_session_id===G?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[I.jsx("p",{className:"text-sm",children:K.content}),I.jsx("p",{className:`text-xs mt-1 ${K.sender_session_id===G?"text-purple-100":"text-gray-500 dark:text-gray-400"}`,children:Fte(new Date(K.created_date),"HH:mm")})]})},K.id)),I.jsx("div",{ref:L})]}),I.jsx("form",{onSubmit:Z,className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 rounded-b-2xl",children:I.jsxs("div",{className:"flex gap-2",children:[I.jsx($l,{value:i,onChange:K=>o(K.target.value),placeholder:`Message ${n.first_name}...`,className:"flex-1 rounded-full border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),I.jsx(Dt,{type:"submit",disabled:!i.trim(),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-full",size:"icon",children:I.jsx(x5,{className:"w-4 h-4"})})]})}),m&&I.jsx(jte,{matchName:n.first_name,onConfirm:te,onCancel:()=>g(!1)})]})})})}function H6(){const n=no(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState(null),[h,m]=P.useState(!0),[g,w]=P.useState(!0),_=localStorage.getItem("currentSessionId"),A=localStorage.getItem("currentEventId"),R=P.useRef({matches:null,messages:null}),M=P.useCallback(async z=>{if(!_||!A||z.length===0)return;const H=await us.filter({event_id:A,is_mutual:!0});for(const Y of z){const re=H.find(V=>V.liker_session_id===_&&V.liked_session_id===Y.session_id);if(re&&!re.liker_notified_of_match)try{await us.update(re.id,{liker_notified_of_match:!0})}catch(V){console.error("Error updating my like notification status:",V)}const ie=H.find(V=>V.liker_session_id===Y.session_id&&V.liked_session_id===_);if(ie&&!ie.liked_notified_of_match)try{await us.update(ie.id,{liked_notified_of_match:!0})}catch(V){console.error("Error updating their like notification status:",V)}}},[_,A]),D=P.useCallback(async()=>{if(!_||!A){m(!1);return}try{const z=await us.filter({liker_session_id:_,event_id:A,is_mutual:!0}),H=await us.filter({liked_session_id:_,event_id:A,is_mutual:!0}),Y=new Set([...z.map(V=>V.liked_session_id),...H.map(V=>V.liker_session_id)]);if(Y.size===0){t([]),m(!1);return}const re=await Zo.filter({session_id:Array.from(Y),event_id:A}),ie=await Promise.all(re.map(async V=>{const B=[_,V.session_id].sort(),W=`${B[0]}_${B[1]}`,Z=await Vc.filter({match_id:W,receiver_session_id:_,is_read:!1,event_id:A});return{...V,unreadCount:Z.length}}));t(ie.filter(Boolean)),re.length>0&&M(re)}catch(z){console.error("Error loading matches:",z)}m(!1)},[_,A,M]),L=()=>{Object.values(R.current).forEach(z=>{z&&z()}),R.current={matches:null,messages:null},console.log("🧹 All Matches listeners cleaned up")},G=P.useCallback(()=>{if(!_||!A){L();return}L();try{R.current.matches=us.onLikesChange(A,_,async z=>{z.filter(Y=>Y.is_mutual).length>0&&await D()}),R.current.messages=Vc.onMessagesChange(A,_,async z=>{await D()}),console.log("📡 Matches real-time listeners setup complete")}catch(z){console.error("❌ Error setting up Matches real-time listeners:",z)}},[_,A,D]);return P.useEffect(()=>(D(),G(),()=>{L()}),[D,G]),P.useEffect(()=>{const z=()=>{w(!document.hidden)};return document.addEventListener("visibilitychange",z),()=>document.removeEventListener("visibilitychange",z)},[]),P.useEffect(()=>{const H=new URLSearchParams(window.location.search).get("openChat");if(H&&e.length>0){const Y=e.find(re=>re.session_id===H);Y&&(i(Y),window.history.replaceState({},document.title,window.location.pathname))}},[e]),P.useEffect(()=>{const z=setInterval(()=>{},3e4);return()=>clearInterval(z)},[]),h?I.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:I.jsxs("div",{className:"text-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your matches..."})]})}):I.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[I.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:I.jsx(vd,{className:"w-8 h-8 text-white"})}),I.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Matches"}),I.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.length," mutual ",e.length===1?"connection":"connections"," at this event"]})]}),I.jsxs("div",{className:"space-y-4",children:[e.map(z=>{var H,Y;return I.jsx(Kr,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-white dark:bg-gray-800",children:I.jsx(Xr,{className:"p-6",children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs("div",{className:"flex items-center gap-4",children:[I.jsxs("div",{className:"relative",children:[z.profile_photo_url?I.jsxs(I.Fragment,{children:[I.jsx("img",{src:z.profile_photo_url,alt:`${z.first_name}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700 cursor-pointer hover:opacity-80 transition-opacity",loading:"lazy",onClick:()=>c(z),onError:re=>{re.target.style.display="none";const ie=re.target.nextElementSibling;ie&&(ie.style.display="flex")}}),I.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity absolute inset-0 border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color,display:"none"},onClick:()=>c(z),children:z.first_name[0]})]}):I.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color},onClick:()=>c(z),children:z.first_name[0]}),I.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center shadow-md",children:I.jsx(_5,{className:"w-3 h-3 text-white"})})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:z.first_name}),I.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[z.age," years old"]}),I.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(H=z.interests)==null?void 0:H.slice(0,2).map(re=>I.jsx(ra,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:re},re)),((Y=z.interests)==null?void 0:Y.length)>2&&I.jsxs(ra,{variant:"outline",className:"text-xs rounded-full border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:["+",z.interests.length-2]})]})]})]}),I.jsxs("div",{className:"flex flex-col items-center gap-2",children:[I.jsx(Dt,{onClick:()=>i(z),className:"bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full",size:"icon",children:I.jsx(yf,{className:"w-5 h-5"})}),z.unreadCount>0&&I.jsx(ra,{className:"bg-red-500 text-white rounded-full px-2 py-0.5 text-xs",children:z.unreadCount})]})]})})},z.id)}),e.length===0&&!h&&I.jsx(Kr,{className:"border-0 shadow-lg bg-white dark:bg-gray-800",children:I.jsxs(Xr,{className:"p-8 text-center",children:[I.jsx(xf,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),I.jsx("h3",{className:"font-semibold text-xl text-gray-900 dark:text-white mb-2",children:"No matches yet"}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start liking profiles to find your matches! When someone likes you back, they'll appear here."}),I.jsx(Dt,{onClick:()=>n(Kn("Discovery")),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl px-6",children:"Discover Singles"})]})})]})]}),I.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:I.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:I.jsxs("div",{className:"flex justify-around",children:[I.jsxs("button",{onClick:()=>n(Kn("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[I.jsx(Yf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs",children:"Profile"})]}),I.jsxs("button",{onClick:()=>n(Kn("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[I.jsx(xf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs",children:"Discover"})]}),I.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[I.jsx(yf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs font-medium",children:"Matches"})]})]})})}),r&&I.jsx(Ute,{match:r,onClose:()=>{i(null),D()}}),o&&I.jsx(F6,{profile:o,onClose:()=>c(null),onLike:()=>{c(null)},isLiked:!0})]})}function G6(){console.log("🚀 JoinPage component - STARTING TO RENDER");const n=no(),[e,t]=P.useState(!0),[r,i]=P.useState(null);console.log("🚀 JoinPage component rendered"),console.log("🚀 Current URL:",window.location.href),console.log("🚀 URL search params:",window.location.search),P.useEffect(()=>{console.log("🚀 JoinPage useEffect triggered"),o()},[]);const o=async()=>{try{console.log("🚀 Starting event join process...");const h=await YW();if(console.log("🚀 Firebase connection test result:",h),!h.success){i(`Firebase connection failed: ${h.error}`),t(!1);return}const m=new URLSearchParams(window.location.search),g=m.get("code");if(console.log("🚀 Event code from URL:",g),console.log("🚀 Full URL search params:",window.location.search),console.log("🚀 All URL params:",Object.fromEntries(m.entries())),!g){i("No event code provided in the URL."),t(!1);return}console.log("Fetching events with code:",g.toUpperCase());const w=await Of.list();console.log("All events in database:",w);const _=await Of.filter({event_code:g.toUpperCase()});if(console.log("Found events:",_),_.length===0){i(`Event code "${g.toUpperCase()}" not found. Please check the code and try again.`),t(!1);return}const A=_[0],R=new Date().toISOString();if(!A.starts_at||!A.expires_at){i("This event is not configured correctly. Please contact the organizer."),t(!1);return}const M=A.starts_at<=R&&R<A.expires_at;if(R<A.starts_at){i("This event hasn't started yet. Try again soon!"),t(!1);return}if(R>=A.expires_at){i("This event has ended."),t(!1);return}localStorage.setItem("currentEventId",A.id),localStorage.setItem("currentEventCode",A.event_code),console.log("🚀 Stored event data in localStorage:"),console.log("🚀 - currentEventId:",A.id),console.log("🚀 - currentEventCode:",A.event_code);const D=localStorage.getItem("currentSessionId");if(console.log("🚀 Existing session ID:",D),D)try{console.log("🚀 Checking for existing profile...");const L=await Zo.filter({session_id:D,event_id:A.id});if(console.log("🚀 Found existing profiles:",L),L.length>0){console.log("🚀 Redirecting to Discovery (existing profile found)"),n(Kn("Discovery"));return}}catch(L){console.warn("🚀 Error checking existing profile:",L)}console.log("🚀 Redirecting to Consent (new user or no existing profile)"),n(Kn("Consent"))}catch(h){console.error("Error processing event join:",h),console.error("Error details:",{message:h.message,stack:h.stack,name:h.name}),i(`Unable to process event access: ${h.message}. Please try again.`),t(!1)}},c=()=>{n(Kn("Home"))};return e?I.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:I.jsx(Kr,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:I.jsxs(Xr,{className:"p-8 text-center",children:[I.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),I.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Joining Event..."}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we verify your event access."})]})})}):r?I.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:I.jsx(Kr,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:I.jsxs(Xr,{className:"p-8 text-center",children:[I.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:I.jsx(dv,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),I.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to Join Event"}),I.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),I.jsx("div",{className:"flex gap-3",children:I.jsx(Dt,{onClick:c,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",children:"Return to Home"})})]})})}):I.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:I.jsx(Kr,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:I.jsxs(Xr,{className:"p-8 text-center",children:[I.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Processing..."}),I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Redirecting you to the event."})]})})})}var i1="Switch",[zte,Ene]=eh(i1),[Wte,Hte]=zte(i1),$6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:o,required:c,disabled:h,value:m="on",onCheckedChange:g,form:w,..._}=n,[A,R]=P.useState(null),M=bn(e,H=>R(H)),D=P.useRef(!1),L=A?w||!!A.closest("form"):!0,[G,z]=Hf({prop:i,defaultProp:o??!1,onChange:g,caller:i1});return I.jsxs(Wte,{scope:t,checked:G,disabled:h,children:[I.jsx(nn.button,{type:"button",role:"switch","aria-checked":G,"aria-required":c,"data-state":Y6(G),"data-disabled":h?"":void 0,disabled:h,value:m,..._,ref:M,onClick:an(n.onClick,H=>{z(Y=>!Y),L&&(D.current=H.isPropagationStopped(),D.current||H.stopPropagation())})}),L&&I.jsx(X6,{control:A,bubbles:!D.current,name:r,value:m,checked:G,required:c,disabled:h,form:w,style:{transform:"translateX(-100%)"}})]})});$6.displayName=i1;var q6="SwitchThumb",K6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=Hte(q6,t);return I.jsx(nn.span,{"data-state":Y6(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});K6.displayName=q6;var Gte="SwitchBubbleInput",X6=P.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},o)=>{const c=P.useRef(null),h=bn(c,o),m=T_(t),g=__(e);return P.useEffect(()=>{const w=c.current;if(!w)return;const _=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(_,"checked").set;if(m!==t&&R){const M=new Event("click",{bubbles:r});R.call(w,t),w.dispatchEvent(M)}},[m,t,r]),I.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:h,style:{...i.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});X6.displayName=Gte;function Y6(n){return n?"checked":"unchecked"}var Q6=$6,$te=K6;const Z6=P.forwardRef(({className:n,...e},t)=>I.jsx(Q6,{className:ln("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:I.jsx($te,{className:ln("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Z6.displayName=Q6.displayName;function qte({isOpen:n,onClose:e,currentEventId:t,currentSessionId:r}){const[i,o]=P.useState("select"),[c,h]=P.useState([]),[m,g]=P.useState(null),[w,_]=P.useState(""),[A,R]=P.useState(""),[M,D]=P.useState(!1),[L,G]=P.useState(!1);P.useEffect(()=>{n&&i==="select"&&z()},[n,i]);const z=async()=>{D(!0);try{const V=(await Zo.filter({event_id:t})).filter(B=>B.session_id!==r);h(V)}catch(ie){console.error("Error loading users:",ie)}finally{D(!1)}},H=ie=>{g(ie),o("form")},Y=async()=>{if(!m||!w.trim()){alert("Please select a user and provide a reason for the report.");return}G(!0);try{alert(`Report submitted for ${m.first_name}. Thank you for helping keep our community safe.`),o("select"),g(null),_(""),R(""),e()}catch(ie){console.error("Error submitting report:",ie),alert("Failed to submit report. Please try again.")}finally{G(!1)}},re=()=>{o("select"),g(null),_(""),R(""),e()};return n?I.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:I.jsxs(Kr,{className:"w-full max-w-md bg-white dark:bg-gray-800",children:[I.jsxs(yo,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[I.jsxs(Xs,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[I.jsx(FS,{className:"w-5 h-5 text-orange-500"}),i==="select"?"Select User to Report":`Report ${m==null?void 0:m.first_name}`]}),I.jsx(Dt,{variant:"ghost",size:"sm",onClick:re,className:"h-8 w-8 p-0",children:I.jsx(Li,{className:"w-4 h-4"})})]}),I.jsx(Xr,{className:"space-y-4",children:i==="select"?I.jsxs(I.Fragment,{children:[I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Select a user to report for inappropriate behavior."}),M?I.jsx("div",{className:"flex items-center justify-center py-8",children:I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):I.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:c.map(ie=>I.jsxs("button",{onClick:()=>H(ie),className:"flex flex-col items-center p-3 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:[I.jsx("div",{className:"w-12 h-12 rounded-full mb-2 overflow-hidden bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:ie.profile_photo_url?I.jsx("img",{src:ie.profile_photo_url,alt:ie.first_name,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:ie.profile_color||"#8b5cf6"},children:ie.first_name[0]})}),I.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ie.first_name}),I.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ie.age," years old"]})]},ie.id))})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[I.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:m.profile_photo_url?I.jsx("img",{src:m.profile_photo_url,alt:m.first_name,className:"w-full h-full object-cover"}):I.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:m.profile_color||"#8b5cf6"},children:m.first_name[0]})}),I.jsxs("div",{children:[I.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:m.first_name}),I.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m.age," years old"]})]})]}),I.jsxs("div",{className:"space-y-3",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Reason for Report *"}),I.jsxs("select",{value:w,onChange:ie=>_(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[I.jsx("option",{value:"",children:"Select a reason..."}),I.jsx("option",{value:"inappropriate_behavior",children:"Inappropriate Behavior"}),I.jsx("option",{value:"harassment",children:"Harassment"}),I.jsx("option",{value:"spam",children:"Spam or Unwanted Messages"}),I.jsx("option",{value:"fake_profile",children:"Fake Profile"}),I.jsx("option",{value:"inappropriate_content",children:"Inappropriate Content"}),I.jsx("option",{value:"other",children:"Other"})]})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Details"}),I.jsx(Uf,{value:A,onChange:ie=>R(ie.target.value),placeholder:"Please provide any additional details about the incident...",className:"min-h-[100px]"})]})]}),I.jsxs("div",{className:"flex gap-3 pt-4",children:[I.jsx(Dt,{onClick:()=>o("select"),variant:"outline",className:"flex-1",children:"Back"}),I.jsx(Dt,{onClick:Y,disabled:L||!w.trim(),className:"flex-1 bg-orange-600 hover:bg-orange-700",children:L?"Submitting...":"Submit Report"})]})]})})]})}):null}const Kte=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing","yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function J6(){var ie;const n=no(),[e,t]=P.useState(null),[r,i]=P.useState(null),[o,c]=P.useState({bio:!1,interests:!1,height:!1}),[h,m]=P.useState({bio:"",interests:[],height:""}),[g,w]=P.useState(!0),[_,A]=P.useState(!1),[R,M]=P.useState(!1),D=P.useCallback(async()=>{w(!0);try{const V=await Yy.me();if(!V){n(Kn("Home"));return}t(V),m({bio:V.bio||"",interests:V.interests||[],height:V.height||""});const B=localStorage.getItem("currentEventId"),W=localStorage.getItem("currentSessionId");if(B&&W){const Z=await Zo.filter({event_id:B,session_id:W});Z.length>0&&i(Z[0])}}catch(V){console.error("Error loading profile data:",V),xr.error("Failed to load profile.")}finally{w(!1)}},[n]);P.useEffect(()=>{D()},[D]);const L=V=>{c(B=>({...B,[V]:!B[V]}))},G=V=>{m(B=>{const W=B.interests.includes(V)?B.interests.filter(Z=>Z!==V):[...B.interests,V];return W.length>3?(xr.warning("You can select up to 3 interests."),B):{...B,interests:W}})},z=async V=>{try{await Yy.updateMyUserData({[V]:h[V]}),xr.success(`${V.charAt(0).toUpperCase()+V.slice(1)} updated!`),L(V),await D()}catch(B){console.error(`Error updating ${V}:`,B),xr.error(`Failed to update ${V}.`)}},H=async V=>{const B=V.target.files[0];if(B){A(!0);try{const{file_url:W}=await _6({file:B});await Yy.updateMyUserData({profile_photo_url:W}),xr.success("Profile photo updated!"),await D()}catch(W){console.error("Error uploading photo:",W),xr.error("Failed to upload photo.")}finally{A(!1)}}},Y=async()=>{if(r)try{const V=!r.is_visible;await Zo.update(r.id,{is_visible:V}),i(B=>({...B,is_visible:V})),xr.success(`Profile is now ${V?"visible":"hidden"}.`)}catch(V){console.error("Error updating visibility:",V),xr.error("Failed to update visibility.")}},re=async()=>{if(!(!r||!confirm("Are you sure you want to leave this event? This will delete your profile for this event and cannot be undone.")))try{await Zo.delete(r.id),localStorage.removeItem("currentEventId"),localStorage.removeItem("currentSessionId"),localStorage.removeItem("currentEventCode"),localStorage.removeItem("currentProfileColor"),localStorage.removeItem("currentProfilePhotoUrl"),xr.success("You have left the event."),n(Kn("Home"))}catch(V){console.error("Error leaving event:",V),xr.error("Failed to leave event.")}};return g?I.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):I.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[I.jsx("style",{children:`
        .visibility-switch[data-state='checked'] {
          background-color: #34D399;
        }
        .visibility-switch[data-state='unchecked'] {
          background-color: #E5E7EB;
        }
        .dark .visibility-switch[data-state='unchecked'] {
          background-color: #4B5563;
        }
        .visibility-switch span {
          background-color: white !important;
        }
      `}),I.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-4",children:[I.jsxs("label",{htmlFor:"profile-photo-upload",className:"cursor-pointer group",children:[e.profile_photo_url?I.jsx("img",{src:e.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg"}):I.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center text-white font-semibold text-4xl",style:{backgroundColor:e.profile_color},children:e.full_name?e.full_name[0]:"?"}),I.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:I.jsx(Sx,{className:"w-8 h-8 text-white"})})]}),I.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:H,className:"hidden",disabled:_}),_&&I.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:I.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-white"})})]}),I.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.full_name}),I.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.age," years old"]})]}),I.jsxs(Kr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[I.jsxs(yo,{className:"flex flex-row items-center justify-between",children:[I.jsx(Xs,{className:"text-lg text-gray-900 dark:text-white",children:"About Me"}),I.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>L("bio"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.bio?I.jsx(Li,{className:"w-4 h-4"}):I.jsx(Sy,{className:"w-4 h-4"})})]}),I.jsx(Xr,{children:o.bio?I.jsxs("div",{className:"space-y-4",children:[I.jsx(Uf,{value:h.bio,onChange:V=>m(B=>({...B,bio:V.target.value})),placeholder:"Tell us a little about yourself...",className:"h-24 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),I.jsxs(Dt,{onClick:()=>z("bio"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[I.jsx(Cy,{className:"w-4 h-4 mr-2"})," Save Bio"]})]}):I.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.bio||"No bio yet. Add one!"})})]}),I.jsxs(Kr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[I.jsxs(yo,{className:"flex flex-row items-center justify-between",children:[I.jsx(Xs,{className:"text-lg text-gray-900 dark:text-white",children:"Interests"}),I.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>L("interests"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.interests?I.jsx(Li,{className:"w-4 h-4"}):I.jsx(Sy,{className:"w-4 h-4"})})]}),I.jsx(Xr,{children:o.interests?I.jsxs("div",{className:"space-y-4",children:[I.jsx("div",{className:"flex flex-wrap gap-2",children:Kte.map(V=>I.jsx(ra,{onClick:()=>G(V),className:`cursor-pointer px-3 py-2 rounded-full transition-all ${h.interests.includes(V)?"interest-chip-selected bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"interest-chip-default border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,children:V},V))}),I.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h.interests.length," / 3 selected"]}),I.jsxs(Dt,{onClick:()=>z("interests"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[I.jsx(Cy,{className:"w-4 h-4 mr-2"})," Save Interests"]})]}):I.jsx("div",{className:"flex flex-wrap gap-2",children:((ie=e.interests)==null?void 0:ie.map(V=>I.jsx(ra,{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:V},V)))||I.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No interests added yet."})})})]}),I.jsxs(Kr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[I.jsxs(yo,{className:"flex flex-row items-center justify-between",children:[I.jsx(Xs,{className:"text-lg text-gray-900 dark:text-white",children:"Height"}),I.jsx(Dt,{variant:"ghost",size:"icon",onClick:()=>L("height"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.height?I.jsx(Li,{className:"w-4 h-4"}):I.jsx(Sy,{className:"w-4 h-4"})})]}),I.jsx(Xr,{children:o.height?I.jsxs("div",{className:"space-y-4",children:[I.jsx($l,{type:"number",value:h.height,onChange:V=>m(B=>({...B,height:V.target.value})),placeholder:"Height in cm",className:"w-full height-input bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),I.jsxs(Dt,{onClick:()=>z("height"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[I.jsx(Cy,{className:"w-4 h-4 mr-2"})," Save Height"]})]}):I.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.height?`${e.height} cm`:"Not specified"})})]}),r&&I.jsxs(I.Fragment,{children:[I.jsxs(Kr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[I.jsxs(yo,{className:"flex flex-row items-center justify-between",children:[I.jsxs(Xs,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[r.is_visible?I.jsx(XM,{className:"w-5 h-5 text-green-500"}):I.jsx(qM,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),"Event Visibility"]}),I.jsx(Z6,{checked:r.is_visible,onCheckedChange:Y,className:"visibility-switch"})]}),I.jsx(Xr,{children:I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.is_visible?"Your profile is visible to others at the current event.":"You are currently hidden from other attendees."})})]}),I.jsxs(Kr,{className:"border-0 shadow-lg border-red-100 dark:border-red-900/20 bg-white dark:bg-gray-800",children:[I.jsx(yo,{children:I.jsxs(Xs,{className:"flex items-center gap-2 text-lg text-red-600 dark:text-red-400",children:[I.jsx(r5,{className:"w-5 h-5"}),"Leave Event"]})}),I.jsxs(Xr,{children:[I.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Permanently remove your profile from this event. This action cannot be undone."}),I.jsxs(Dt,{onClick:re,variant:"destructive",className:"w-full h-auto whitespace-normal",children:[I.jsx(A5,{className:"w-4 h-4 mr-2"}),"Leave Event & Delete Event Profile"]})]})]})]}),I.jsxs(Kr,{className:"border-0 shadow-lg mb-6 mt-8 bg-white dark:bg-gray-800",children:[I.jsx(yo,{children:I.jsxs(Xs,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[I.jsx(dv,{className:"w-5 h-5 text-orange-500"}),"Safety & Reporting"]})}),I.jsxs(Xr,{children:[I.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"If you encounter inappropriate behavior, you can report users to event moderators."}),I.jsx(Dt,{variant:"outline",className:"w-full border-orange-200 dark:border-orange-700 text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 bg-white dark:bg-gray-800",onClick:()=>M(!0),children:"Report a User"})]})]}),I.jsxs(Kr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[I.jsx(yo,{children:I.jsxs(Xs,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[I.jsx(hv,{className:"w-5 h-5 text-blue-500"}),"Automatic Data Expiration"]})}),I.jsxs(Xr,{children:[I.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your profile, matches, and chat messages will be automatically deleted when this event ends. No data is stored permanently."}),I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[I.jsx(zu,{className:"w-4 h-4"}),I.jsx("span",{className:"text-sm",children:"Profile expires automatically"})]}),I.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[I.jsx(zu,{className:"w-4 h-4"}),I.jsx("span",{className:"text-sm",children:"Messages deleted at midnight"})]}),I.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[I.jsx(zu,{className:"w-4 h-4"}),I.jsx("span",{className:"text-sm",children:"No permanent account created"})]})]})]})]}),I.jsxs(Kr,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[I.jsx(yo,{children:I.jsxs(Xs,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[I.jsx(s5,{className:"w-5 h-5 text-purple-500"}),"Email Data Usage"]})}),I.jsxs(Xr,{children:[I.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your email address is only used for post-event feedback surveys and is never visible to other users at this event."}),I.jsxs("div",{className:"space-y-2",children:[I.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[I.jsx(zu,{className:"w-4 h-4"}),I.jsx("span",{className:"text-sm",children:"Only used for feedback requests"})]}),I.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[I.jsx(zu,{className:"w-4 h-4"}),I.jsx("span",{className:"text-sm",children:"Never shared with other users"})]}),I.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[I.jsx(zu,{className:"w-4 h-4"}),I.jsx("span",{className:"text-sm",children:"Not used for marketing purposes"})]})]})]})]})]}),I.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:I.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:I.jsxs("div",{className:"flex justify-around",children:[I.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[I.jsx(Yf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs font-medium",children:"Profile"})]}),I.jsxs("button",{onClick:()=>n(Kn("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[I.jsx(xf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs",children:"Discover"})]}),I.jsxs("button",{onClick:()=>n(Kn("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[I.jsx(yf,{className:"w-6 h-6"}),I.jsx("span",{className:"text-xs",children:"Matches"})]})]})})}),I.jsx(qte,{isOpen:R,onClose:()=>M(!1),currentEventId:localStorage.getItem("currentEventId"),currentSessionId:localStorage.getItem("currentSessionId")})]})}const Xte=()=>{const n=no(),e=ca();return console.log("🔍 TestComponent rendered"),console.log("🔍 TestComponent location:",e.pathname),console.log("🔍 TestComponent navigate function:",typeof n),I.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[I.jsx("h2",{children:"Test Component"}),I.jsx("p",{children:"Router is working!"}),I.jsxs("p",{children:["Current path: ",e.pathname]}),I.jsxs("p",{children:["Navigate function: ",typeof n]}),I.jsx("button",{onClick:()=>n("/"),children:"Go Home"})]})},hS={Home:Zw,Consent:E6,Discovery:B6,Matches:H6,join:G6,Profile:J6};function Yte(n){n.endsWith("/")&&(n=n.slice(0,-1));let e=n.split("/").pop();return e.includes("?")&&(e=e.split("?")[0]),Object.keys(hS).find(r=>r.toLowerCase()===e.toLowerCase())||Object.keys(hS)[0]}function Qte(){const n=ca(),e=no(),t=Yte(n.pathname);return console.log("🔍 PagesContent - Current location:",n.pathname),console.log("🔍 PagesContent - Current search:",n.search),console.log("🔍 PagesContent - Current page:",t),console.log("🔍 PagesContent - navigate function type:",typeof e),I.jsx(mJ,{currentPageName:t,children:I.jsxs(QO,{children:[I.jsx(jo,{path:"/",element:I.jsx(Zw,{})}),I.jsx(jo,{path:"/Home",element:I.jsx(Zw,{})}),I.jsx(jo,{path:"/Consent",element:I.jsx(E6,{})}),I.jsx(jo,{path:"/Discovery",element:I.jsx(B6,{})}),I.jsx(jo,{path:"/Matches",element:I.jsx(H6,{})}),I.jsx(jo,{path:"/join",element:(console.log("🔍 Join route matched - rendering Join component"),I.jsx(G6,{}))}),I.jsx(jo,{path:"/Profile",element:I.jsx(J6,{})}),I.jsx(jo,{path:"/test",element:I.jsx(Xte,{})}),I.jsx(jo,{path:"*",element:(console.log("🔍 Catch-all route matched - path:",n.pathname),I.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[I.jsx("h2",{children:"404 - Page Not Found"}),I.jsxs("p",{children:["Current path: ",n.pathname]}),I.jsxs("p",{children:["Current search: ",n.search]}),I.jsxs("p",{children:["Current hash: ",n.hash]}),I.jsxs("p",{children:["Navigate function: ",typeof e]}),I.jsx("button",{onClick:()=>e("/"),children:"Go Home"})]}))})]})})}function Zte(){return I.jsx(vM,{children:I.jsx(Qte,{})})}const Jte=20,ene=1e6,ka={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let Ix=0;function tne(){return Ix=(Ix+1)%Number.MAX_VALUE,Ix.toString()}const Tx=new Map,fS=n=>{if(Tx.has(n))return;const e=setTimeout(()=>{Tx.delete(n),mf({type:ka.REMOVE_TOAST,toastId:n})},ene);Tx.set(n,e)},nne=(n,e)=>{switch(e.type){case ka.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,Jte)};case ka.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case ka.DISMISS_TOAST:{const{toastId:t}=e;return t?fS(t):n.toasts.forEach(r=>{fS(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case ka.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},c0=[];let u0={toasts:[]};function mf(n){u0=nne(u0,n),c0.forEach(e=>{e(u0)})}function rne({...n}){const e=tne(),t=i=>mf({type:ka.UPDATE_TOAST,toast:{...i,id:e}}),r=()=>mf({type:ka.DISMISS_TOAST,toastId:e});return mf({type:ka.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function ine(){const[n,e]=P.useState(u0);return P.useEffect(()=>(c0.push(e),()=>{const t=c0.indexOf(e);t>-1&&c0.splice(t,1)}),[n]),{...n,toast:rne,dismiss:t=>mf({type:ka.DISMISS_TOAST,toastId:t})}}const e8=P.forwardRef(({...n},e)=>I.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));e8.displayName="ToastProvider";const t8=P.forwardRef(({...n},e)=>I.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));t8.displayName="ToastViewport";const sne=Bg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),n8=P.forwardRef(({className:n,variant:e,...t},r)=>I.jsx("div",{ref:r,className:ln(sne({variant:e}),n),...t}));n8.displayName="Toast";const one=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));one.displayName="ToastAction";const r8=P.forwardRef(({className:n,...e},t)=>I.jsx("button",{ref:t,className:ln("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:I.jsx(Li,{className:"h-4 w-4"})}));r8.displayName="ToastClose";const i8=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("text-sm font-semibold",n),...e}));i8.displayName="ToastTitle";const s8=P.forwardRef(({className:n,...e},t)=>I.jsx("div",{ref:t,className:ln("text-sm opacity-90",n),...e}));s8.displayName="ToastDescription";function ane(){const{toasts:n}=ine();return I.jsxs(e8,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return I.jsxs(n8,{...o,children:[I.jsxs("div",{className:"grid gap-1",children:[t&&I.jsx(i8,{children:t}),r&&I.jsx(s8,{children:r})]}),i,I.jsx(r8,{})]},e)}),I.jsx(t8,{})]})}class lne extends ze.Component{constructor(t){super(t);wy(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});wy(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("🚨 Error Boundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}reportError(t,r){const i={message:t.message,stack:t.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent};console.log("Would report error:",i)}render(){return this.state.hasError?I.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:I.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[I.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:I.jsx(S5,{className:"w-8 h-8 text-red-600"})}),I.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),I.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),I.jsxs("div",{className:"space-y-3",children:[I.jsxs("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[I.jsx(f5,{className:"w-4 h-4"}),"Try Again"]}),I.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[I.jsx(t5,{className:"w-4 h-4"}),"Go to Home"]})]}),!1]})}):this.props.children}}const cne=()=>{const[n,e]=P.useState(Fl.getOnlineStatus()),[t,r]=P.useState(bm()),[i,o]=P.useState(!1);P.useEffect(()=>{const g=()=>{e(!0),o(!0)},w=()=>{e(!1)},_=()=>{setTimeout(()=>{r(bm()),o(!1)},1e3)};return window.addEventListener("online",g),window.addEventListener("offline",w),window.addEventListener("appOnline",_),e(Fl.getOnlineStatus()),r(bm()),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",w),window.removeEventListener("appOnline",_)}},[]);const c=P.useCallback(async(g,w={})=>{try{return await V3(g,w)}catch(_){const A=tA(_);throw{..._,userMessage:A}}},[]),h=P.useCallback((g,w={})=>{const _=ZW(g,w);return r(bm()),_},[]),m=P.useCallback(async()=>{const g=await Fl.checkConnectivity();return e(g),g},[]);return{isOnline:n,offlineQueueLength:t,isProcessingQueue:i,executeWithRetry:c,queueForOffline:h,checkConnectivity:m,getErrorMessage:tA}},une=()=>{const{isOnline:n,offlineQueueLength:e,isProcessingQueue:t}=cne(),r=P.useCallback(()=>n?t?{type:"processing",message:"Processing offline actions...",icon:"🔄"}:e>0?{type:"queued",message:`${e} action${e>1?"s":""} queued for when you're back online.`,icon:"📝"}:{type:"online",message:"You're online",icon:"🌐"}:{type:"offline",message:"You're offline. Some features may be limited.",icon:"📴"},[n,e,t]);return{isOnline:n,offlineQueueLength:e,isProcessingQueue:t,statusMessage:r()}},dne=({className:n=""})=>{const{statusMessage:e,isOnline:t,offlineQueueLength:r}=une();if(t&&r===0)return null;const o=(()=>{switch(e.type){case"offline":return{bgColor:"bg-red-500",textColor:"text-white",icon:I.jsx(O5,{className:"w-4 h-4"})};case"processing":return{bgColor:"bg-blue-500",textColor:"text-white",icon:I.jsx(hv,{className:"w-4 h-4 animate-spin"})};case"queued":return{bgColor:"bg-yellow-500",textColor:"text-white",icon:I.jsx(dv,{className:"w-4 h-4"})};default:return{bgColor:"bg-green-500",textColor:"text-white",icon:I.jsx(L5,{className:"w-4 h-4"})}}})();return I.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${n}`,children:I.jsxs("div",{className:`${o.bgColor} ${o.textColor} px-4 py-2 text-sm font-medium flex items-center justify-center gap-2`,children:[o.icon,I.jsx("span",{children:e.message})]})})};function hne(){return I.jsxs(lne,{children:[I.jsx(dne,{}),I.jsx(Zte,{}),I.jsx(ane,{}),!1]})}aO.createRoot(document.getElementById("root")).render(I.jsx(hne,{}));
