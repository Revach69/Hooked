function _V(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function n_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Iv={exports:{}},hd={},kv={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT;function xV(){if(DT)return Ye;DT=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function I(W,X,ae){this.props=W,this.context=X,this.refs=T,this.updater=ae||E}I.prototype.isReactComponent={},I.prototype.setState=function(W,X){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,X,"setState")},I.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=I.prototype;function N(W,X,ae){this.props=W,this.context=X,this.refs=T,this.updater=ae||E}var R=N.prototype=new C;R.constructor=N,S(R,I.prototype),R.isPureReactComponent=!0;var L=Array.isArray,z=Object.prototype.hasOwnProperty,K={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function P(W,X,ae){var ve,Ae={},xe=null,ue=null;if(X!=null)for(ve in X.ref!==void 0&&(ue=X.ref),X.key!==void 0&&(xe=""+X.key),X)z.call(X,ve)&&!D.hasOwnProperty(ve)&&(Ae[ve]=X[ve]);var be=arguments.length-2;if(be===1)Ae.children=ae;else if(1<be){for(var De=Array(be),Ne=0;Ne<be;Ne++)De[Ne]=arguments[Ne+2];Ae.children=De}if(W&&W.defaultProps)for(ve in be=W.defaultProps,be)Ae[ve]===void 0&&(Ae[ve]=be[ve]);return{$$typeof:t,type:W,key:xe,ref:ue,props:Ae,_owner:K.current}}function V(W,X){return{$$typeof:t,type:W.type,key:X,ref:W.ref,props:W.props,_owner:W._owner}}function F(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function U(W){var X={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ae){return X[ae]})}var j=/\/+/g;function M(W,X){return typeof W=="object"&&W!==null&&W.key!=null?U(""+W.key):X.toString(36)}function Z(W,X,ae,ve,Ae){var xe=typeof W;(xe==="undefined"||xe==="boolean")&&(W=null);var ue=!1;if(W===null)ue=!0;else switch(xe){case"string":case"number":ue=!0;break;case"object":switch(W.$$typeof){case t:case e:ue=!0}}if(ue)return ue=W,Ae=Ae(ue),W=ve===""?"."+M(ue,0):ve,L(Ae)?(ae="",W!=null&&(ae=W.replace(j,"$&/")+"/"),Z(Ae,X,ae,"",function(Ne){return Ne})):Ae!=null&&(F(Ae)&&(Ae=V(Ae,ae+(!Ae.key||ue&&ue.key===Ae.key?"":(""+Ae.key).replace(j,"$&/")+"/")+W)),X.push(Ae)),1;if(ue=0,ve=ve===""?".":ve+":",L(W))for(var be=0;be<W.length;be++){xe=W[be];var De=ve+M(xe,be);ue+=Z(xe,X,ae,De,Ae)}else if(De=v(W),typeof De=="function")for(W=De.call(W),be=0;!(xe=W.next()).done;)xe=xe.value,De=ve+M(xe,be++),ue+=Z(xe,X,ae,De,Ae);else if(xe==="object")throw X=String(W),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ue}function oe(W,X,ae){if(W==null)return W;var ve=[],Ae=0;return Z(W,ve,"","",function(xe){return X.call(ae,xe,Ae++)}),ve}function re(W){if(W._status===-1){var X=W._result;X=X(),X.then(function(ae){(W._status===0||W._status===-1)&&(W._status=1,W._result=ae)},function(ae){(W._status===0||W._status===-1)&&(W._status=2,W._result=ae)}),W._status===-1&&(W._status=0,W._result=X)}if(W._status===1)return W._result.default;throw W._result}var se={current:null},$={transition:null},ie={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:$,ReactCurrentOwner:K};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ye.Children={map:oe,forEach:function(W,X,ae){oe(W,function(){X.apply(this,arguments)},ae)},count:function(W){var X=0;return oe(W,function(){X++}),X},toArray:function(W){return oe(W,function(X){return X})||[]},only:function(W){if(!F(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Ye.Component=I,Ye.Fragment=n,Ye.Profiler=s,Ye.PureComponent=N,Ye.StrictMode=r,Ye.Suspense=u,Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Ye.act=le,Ye.cloneElement=function(W,X,ae){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var ve=S({},W.props),Ae=W.key,xe=W.ref,ue=W._owner;if(X!=null){if(X.ref!==void 0&&(xe=X.ref,ue=K.current),X.key!==void 0&&(Ae=""+X.key),W.type&&W.type.defaultProps)var be=W.type.defaultProps;for(De in X)z.call(X,De)&&!D.hasOwnProperty(De)&&(ve[De]=X[De]===void 0&&be!==void 0?be[De]:X[De])}var De=arguments.length-2;if(De===1)ve.children=ae;else if(1<De){be=Array(De);for(var Ne=0;Ne<De;Ne++)be[Ne]=arguments[Ne+2];ve.children=be}return{$$typeof:t,type:W.type,key:Ae,ref:xe,props:ve,_owner:ue}},Ye.createContext=function(W){return W={$$typeof:a,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},Ye.createElement=P,Ye.createFactory=function(W){var X=P.bind(null,W);return X.type=W,X},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(W){return{$$typeof:c,render:W}},Ye.isValidElement=F,Ye.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:re}},Ye.memo=function(W,X){return{$$typeof:h,type:W,compare:X===void 0?null:X}},Ye.startTransition=function(W){var X=$.transition;$.transition={};try{W()}finally{$.transition=X}},Ye.unstable_act=le,Ye.useCallback=function(W,X){return se.current.useCallback(W,X)},Ye.useContext=function(W){return se.current.useContext(W)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(W){return se.current.useDeferredValue(W)},Ye.useEffect=function(W,X){return se.current.useEffect(W,X)},Ye.useId=function(){return se.current.useId()},Ye.useImperativeHandle=function(W,X,ae){return se.current.useImperativeHandle(W,X,ae)},Ye.useInsertionEffect=function(W,X){return se.current.useInsertionEffect(W,X)},Ye.useLayoutEffect=function(W,X){return se.current.useLayoutEffect(W,X)},Ye.useMemo=function(W,X){return se.current.useMemo(W,X)},Ye.useReducer=function(W,X,ae){return se.current.useReducer(W,X,ae)},Ye.useRef=function(W){return se.current.useRef(W)},Ye.useState=function(W){return se.current.useState(W)},Ye.useSyncExternalStore=function(W,X,ae){return se.current.useSyncExternalStore(W,X,ae)},Ye.useTransition=function(){return se.current.useTransition()},Ye.version="18.3.1",Ye}var MT;function r_(){return MT||(MT=1,kv.exports=xV()),kv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OT;function bV(){if(OT)return hd;OT=1;var t=r_(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function a(c,u,h){var p,m={},v=null,E=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(E=u.ref);for(p in u)r.call(u,p)&&!i.hasOwnProperty(p)&&(m[p]=u[p]);if(c&&c.defaultProps)for(p in u=c.defaultProps,u)m[p]===void 0&&(m[p]=u[p]);return{$$typeof:e,type:c,key:v,ref:E,props:m,_owner:s.current}}return hd.Fragment=n,hd.jsx=a,hd.jsxs=a,hd}var VT;function EV(){return VT||(VT=1,Iv.exports=bV()),Iv.exports}var y=EV(),x=r_();const me=n_(x),eC=_V({__proto__:null,default:me},[x]);var pp={},Cv={exports:{}},dr={},Pv={exports:{}},Av={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function TV(){return LT||(LT=1,function(t){function e($,ie){var le=$.length;$.push(ie);e:for(;0<le;){var W=le-1>>>1,X=$[W];if(0<s(X,ie))$[W]=ie,$[le]=X,le=W;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ie=$[0],le=$.pop();if(le!==ie){$[0]=le;e:for(var W=0,X=$.length,ae=X>>>1;W<ae;){var ve=2*(W+1)-1,Ae=$[ve],xe=ve+1,ue=$[xe];if(0>s(Ae,le))xe<X&&0>s(ue,Ae)?($[W]=ue,$[xe]=le,W=xe):($[W]=Ae,$[ve]=le,W=ve);else if(xe<X&&0>s(ue,le))$[W]=ue,$[xe]=le,W=xe;else break e}}return ie}function s($,ie){var le=$.sortIndex-ie.sortIndex;return le!==0?le:$.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],h=[],p=1,m=null,v=3,E=!1,S=!1,T=!1,I=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R($){for(var ie=n(h);ie!==null;){if(ie.callback===null)r(h);else if(ie.startTime<=$)r(h),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(h)}}function L($){if(T=!1,R($),!S)if(n(u)!==null)S=!0,re(z);else{var ie=n(h);ie!==null&&se(L,ie.startTime-$)}}function z($,ie){S=!1,T&&(T=!1,C(P),P=-1),E=!0;var le=v;try{for(R(ie),m=n(u);m!==null&&(!(m.expirationTime>ie)||$&&!U());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var X=W(m.expirationTime<=ie);ie=t.unstable_now(),typeof X=="function"?m.callback=X:m===n(u)&&r(u),R(ie)}else r(u);m=n(u)}if(m!==null)var ae=!0;else{var ve=n(h);ve!==null&&se(L,ve.startTime-ie),ae=!1}return ae}finally{m=null,v=le,E=!1}}var K=!1,D=null,P=-1,V=5,F=-1;function U(){return!(t.unstable_now()-F<V)}function j(){if(D!==null){var $=t.unstable_now();F=$;var ie=!0;try{ie=D(!0,$)}finally{ie?M():(K=!1,D=null)}}else K=!1}var M;if(typeof N=="function")M=function(){N(j)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,oe=Z.port2;Z.port1.onmessage=j,M=function(){oe.postMessage(null)}}else M=function(){I(j,0)};function re($){D=$,K||(K=!0,M())}function se($,ie){P=I(function(){$(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||E||(S=!0,re(z))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var le=v;v=ie;try{return $()}finally{v=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ie){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var le=v;v=$;try{return ie()}finally{v=le}},t.unstable_scheduleCallback=function($,ie,le){var W=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?W+le:W):le=W,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=le+X,$={id:p++,callback:ie,priorityLevel:$,startTime:le,expirationTime:X,sortIndex:-1},le>W?($.sortIndex=le,e(h,$),n(u)===null&&$===n(h)&&(T?(C(P),P=-1):T=!0,se(L,le-W))):($.sortIndex=X,e(u,$),S||E||(S=!0,re(z))),$},t.unstable_shouldYield=U,t.unstable_wrapCallback=function($){var ie=v;return function(){var le=v;v=ie;try{return $.apply(this,arguments)}finally{v=le}}}}(Av)),Av}var jT;function SV(){return jT||(jT=1,Pv.exports=TV()),Pv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function IV(){if(FT)return dr;FT=1;var t=r_(),e=SV();function n(o){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+o,d=1;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,l){a(o,l),a(o+"Capture",l)}function a(o,l){for(s[o]=l,o=0;o<l.length;o++)r.add(l[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(o){return u.call(m,o)?!0:u.call(p,o)?!1:h.test(o)?m[o]=!0:(p[o]=!0,!1)}function E(o,l,d,g){if(d!==null&&d.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:d!==null?!d.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,l,d,g){if(l===null||typeof l>"u"||E(o,l,d,g))return!0;if(g)return!1;if(d!==null)switch(d.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function T(o,l,d,g,w,b,A){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=o,this.type=l,this.sanitizeURL=b,this.removeEmptyString=A}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){I[o]=new T(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var l=o[0];I[l]=new T(l,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){I[o]=new T(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){I[o]=new T(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){I[o]=new T(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){I[o]=new T(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){I[o]=new T(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){I[o]=new T(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){I[o]=new T(o,5,!1,o.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function N(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var l=o.replace(C,N);I[l]=new T(l,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var l=o.replace(C,N);I[l]=new T(l,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var l=o.replace(C,N);I[l]=new T(l,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){I[o]=new T(o,1,!1,o.toLowerCase(),null,!1,!1)}),I.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){I[o]=new T(o,1,!1,o.toLowerCase(),null,!0,!0)});function R(o,l,d,g){var w=I.hasOwnProperty(l)?I[l]:null;(w!==null?w.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(S(l,d,w,g)&&(d=null),g||w===null?v(l)&&(d===null?o.removeAttribute(l):o.setAttribute(l,""+d)):w.mustUseProperty?o[w.propertyName]=d===null?w.type===3?!1:"":d:(l=w.attributeName,g=w.attributeNamespace,d===null?o.removeAttribute(l):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,g?o.setAttributeNS(g,l,d):o.setAttribute(l,d))))}var L=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),K=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),U=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),$=Symbol.iterator;function ie(o){return o===null||typeof o!="object"?null:(o=$&&o[$]||o["@@iterator"],typeof o=="function"?o:null)}var le=Object.assign,W;function X(o){if(W===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);W=l&&l[1]||""}return`
`+W+o}var ae=!1;function ve(o,l){if(!o||ae)return"";ae=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(ee){var g=ee}Reflect.construct(o,[],l)}else{try{l.call()}catch(ee){g=ee}o.call(l.prototype)}else{try{throw Error()}catch(ee){g=ee}o()}}catch(ee){if(ee&&g&&typeof ee.stack=="string"){for(var w=ee.stack.split(`
`),b=g.stack.split(`
`),A=w.length-1,B=b.length-1;1<=A&&0<=B&&w[A]!==b[B];)B--;for(;1<=A&&0<=B;A--,B--)if(w[A]!==b[B]){if(A!==1||B!==1)do if(A--,B--,0>B||w[A]!==b[B]){var H=`
`+w[A].replace(" at new "," at ");return o.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",o.displayName)),H}while(1<=A&&0<=B);break}}}finally{ae=!1,Error.prepareStackTrace=d}return(o=o?o.displayName||o.name:"")?X(o):""}function Ae(o){switch(o.tag){case 5:return X(o.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return o=ve(o.type,!1),o;case 11:return o=ve(o.type.render,!1),o;case 1:return o=ve(o.type,!0),o;default:return""}}function xe(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case D:return"Fragment";case K:return"Portal";case V:return"Profiler";case P:return"StrictMode";case M:return"Suspense";case Z:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case U:return(o.displayName||"Context")+".Consumer";case F:return(o._context.displayName||"Context")+".Provider";case j:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case oe:return l=o.displayName||null,l!==null?l:xe(o.type)||"Memo";case re:l=o._payload,o=o._init;try{return xe(o(l))}catch{}}return null}function ue(o){var l=o.type;switch(o.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=l.render,o=o.displayName||o.name||"",l.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(l);case 8:return l===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function be(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function De(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ne(o){var l=De(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),g=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,b=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return w.call(this)},set:function(A){g=""+A,b.call(this,A)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function $e(o){o._valueTracker||(o._valueTracker=Ne(o))}function We(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return o&&(g=De(o)?o.checked?"true":"false":o.value),o=g,o!==d?(l.setValue(o),!0):!1}function Et(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ut(o,l){var d=l.checked;return le({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??o._wrapperState.initialChecked})}function Jn(o,l){var d=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;d=be(l.value!=null?l.value:d),o._wrapperState={initialChecked:g,initialValue:d,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Zn(o,l){l=l.checked,l!=null&&R(o,"checked",l,!1)}function bn(o,l){Zn(o,l);var d=be(l.value),g=l.type;if(d!=null)g==="number"?(d===0&&o.value===""||o.value!=d)&&(o.value=""+d):o.value!==""+d&&(o.value=""+d);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}l.hasOwnProperty("value")?qt(o,l.type,d):l.hasOwnProperty("defaultValue")&&qt(o,l.type,be(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(o.defaultChecked=!!l.defaultChecked)}function hi(o,l,d){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+o._wrapperState.initialValue,d||l===o.value||(o.value=l),o.defaultValue=l}d=o.name,d!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,d!==""&&(o.name=d)}function qt(o,l,d){(l!=="number"||Et(o.ownerDocument)!==o)&&(d==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+d&&(o.defaultValue=""+d))}var es=Array.isArray;function ts(o,l,d,g){if(o=o.options,l){l={};for(var w=0;w<d.length;w++)l["$"+d[w]]=!0;for(d=0;d<o.length;d++)w=l.hasOwnProperty("$"+o[d].value),o[d].selected!==w&&(o[d].selected=w),w&&g&&(o[d].defaultSelected=!0)}else{for(d=""+be(d),l=null,w=0;w<o.length;w++){if(o[w].value===d){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}l!==null||o[w].disabled||(l=o[w])}l!==null&&(l.selected=!0)}}function ln(o,l){if(l.dangerouslySetInnerHTML!=null)throw Error(n(91));return le({},l,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function gr(o,l){var d=l.value;if(d==null){if(d=l.children,l=l.defaultValue,d!=null){if(l!=null)throw Error(n(92));if(es(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),d=l}o._wrapperState={initialValue:be(d)}}function Qi(o,l){var d=be(l.value),g=be(l.defaultValue);d!=null&&(d=""+d,d!==o.value&&(o.value=d),l.defaultValue==null&&o.defaultValue!==d&&(o.defaultValue=d)),g!=null&&(o.defaultValue=""+g)}function ua(o){var l=o.textContent;l===o._wrapperState.initialValue&&l!==""&&l!==null&&(o.value=l)}function Tt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kt(o,l){return o==null||o==="http://www.w3.org/1999/xhtml"?Tt(l):o==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Vr,fi=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,d,g,w){MSApp.execUnsafeLocalFunction(function(){return o(l,d,g,w)})}:o}(function(o,l){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=l;else{for(Vr=Vr||document.createElement("div"),Vr.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=Vr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;l.firstChild;)o.appendChild(l.firstChild)}});function Bn(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var Cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},er=["Webkit","ms","Moz","O"];Object.keys(Cs).forEach(function(o){er.forEach(function(l){l=l+o.charAt(0).toUpperCase()+o.substring(1),Cs[l]=Cs[o]})});function da(o,l,d){return l==null||typeof l=="boolean"||l===""?"":d||typeof l!="number"||l===0||Cs.hasOwnProperty(o)&&Cs[o]?(""+l).trim():l+"px"}function ha(o,l){o=o.style;for(var d in l)if(l.hasOwnProperty(d)){var g=d.indexOf("--")===0,w=da(d,l[d],g);d==="float"&&(d="cssFloat"),g?o.setProperty(d,w):o[d]=w}}var Xi=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ji(o,l){if(l){if(Xi[o]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(n(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(n(61))}if(l.style!=null&&typeof l.style!="object")throw Error(n(62))}}function fa(o,l){if(o.indexOf("-")===-1)return typeof l.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ns=null;function zn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Zi=null,tr=null,yr=null;function pi(o){if(o=Xu(o)){if(typeof Zi!="function")throw Error(n(280));var l=o.stateNode;l&&(l=Pf(l),Zi(o.stateNode,o.type,l))}}function Oe(o){tr?yr?yr.push(o):yr=[o]:tr=o}function St(){if(tr){var o=tr,l=yr;if(yr=tr=null,pi(o),l)for(o=0;o<l.length;o++)pi(l[o])}}function It(o,l){return o(l)}function cn(){}var nr=!1;function Dt(o,l,d){if(nr)return o(l,d);nr=!0;try{return It(o,l,d)}finally{nr=!1,(tr!==null||yr!==null)&&(cn(),St())}}function Ze(o,l){var d=o.stateNode;if(d===null)return null;var g=Pf(d);if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var rs=!1;if(c)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){rs=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{rs=!1}function un(o,l,d,g,w,b,A,B,H){var ee=Array.prototype.slice.call(arguments,3);try{l.apply(d,ee)}catch(de){this.onError(de)}}var Ps=!1,rr=null,Lr=!1,Ru=null,ey={onError:function(o){Ps=!0,rr=o}};function Al(o,l,d,g,w,b,A,B,H){Ps=!1,rr=null,un.apply(ey,arguments)}function Zh(o,l,d,g,w,b,A,B,H){if(Al.apply(this,arguments),Ps){if(Ps){var ee=rr;Ps=!1,rr=null}else throw Error(n(198));Lr||(Lr=!0,Ru=ee)}}function ss(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function pa(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function is(o){if(ss(o)!==o)throw Error(n(188))}function ef(o){var l=o.alternate;if(!l){if(l=ss(o),l===null)throw Error(n(188));return l!==o?null:o}for(var d=o,g=l;;){var w=d.return;if(w===null)break;var b=w.alternate;if(b===null){if(g=w.return,g!==null){d=g;continue}break}if(w.child===b.child){for(b=w.child;b;){if(b===d)return is(w),o;if(b===g)return is(w),l;b=b.sibling}throw Error(n(188))}if(d.return!==g.return)d=w,g=b;else{for(var A=!1,B=w.child;B;){if(B===d){A=!0,d=w,g=b;break}if(B===g){A=!0,g=w,d=b;break}B=B.sibling}if(!A){for(B=b.child;B;){if(B===d){A=!0,d=b,g=w;break}if(B===g){A=!0,g=b,d=w;break}B=B.sibling}if(!A)throw Error(n(189))}}if(d.alternate!==g)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?o:l}function Nu(o){return o=ef(o),o!==null?Rl(o):null}function Rl(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var l=Rl(o);if(l!==null)return l;o=o.sibling}return null}var Nl=e.unstable_scheduleCallback,Du=e.unstable_cancelCallback,tf=e.unstable_shouldYield,ty=e.unstable_requestPaint,gt=e.unstable_now,nf=e.unstable_getCurrentPriorityLevel,ma=e.unstable_ImmediatePriority,eo=e.unstable_UserBlockingPriority,jr=e.unstable_NormalPriority,Mu=e.unstable_LowPriority,rf=e.unstable_IdlePriority,ga=null,vr=null;function sf(o){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(ga,o,void 0,(o.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:af,Ou=Math.log,of=Math.LN2;function af(o){return o>>>=0,o===0?32:31-(Ou(o)/of|0)|0}var Dl=64,Ml=4194304;function to(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function ya(o,l){var d=o.pendingLanes;if(d===0)return 0;var g=0,w=o.suspendedLanes,b=o.pingedLanes,A=d&268435455;if(A!==0){var B=A&~w;B!==0?g=to(B):(b&=A,b!==0&&(g=to(b)))}else A=d&~w,A!==0?g=to(A):b!==0&&(g=to(b));if(g===0)return 0;if(l!==0&&l!==g&&(l&w)===0&&(w=g&-g,b=l&-l,w>=b||w===16&&(b&4194240)!==0))return l;if((g&4)!==0&&(g|=d&16),l=o.entangledLanes,l!==0)for(o=o.entanglements,l&=g;0<l;)d=31-$n(l),w=1<<d,g|=o[d],l&=~w;return g}function ny(o,l){switch(o){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mi(o,l){for(var d=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,b=o.pendingLanes;0<b;){var A=31-$n(b),B=1<<A,H=w[A];H===-1?((B&d)===0||(B&g)!==0)&&(w[A]=ny(B,l)):H<=l&&(o.expiredLanes|=B),b&=~B}}function wr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function va(){var o=Dl;return Dl<<=1,(Dl&4194240)===0&&(Dl=64),o}function no(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function ro(o,l,d){o.pendingLanes|=l,l!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,l=31-$n(l),o[l]=d}function pt(o,l){var d=o.pendingLanes&~l;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=l,o.mutableReadLanes&=l,o.entangledLanes&=l,l=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<d;){var w=31-$n(d),b=1<<w;l[w]=0,g[w]=-1,o[w]=-1,d&=~b}}function so(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var g=31-$n(d),w=1<<g;w&l|o[g]&l&&(o[g]|=l),d&=~w}}var Je=0;function io(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var lf,Ol,cf,uf,df,Vu=!1,As=[],En=null,os=null,as=null,oo=new Map,Fr=new Map,Rs=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hf(o,l){switch(o){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":oo.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(l.pointerId)}}function sr(o,l,d,g,w,b){return o===null||o.nativeEvent!==b?(o={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:b,targetContainers:[w]},l!==null&&(l=Xu(l),l!==null&&Ol(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,w!==null&&l.indexOf(w)===-1&&l.push(w),o)}function sy(o,l,d,g,w){switch(l){case"focusin":return En=sr(En,o,l,d,g,w),!0;case"dragenter":return os=sr(os,o,l,d,g,w),!0;case"mouseover":return as=sr(as,o,l,d,g,w),!0;case"pointerover":var b=w.pointerId;return oo.set(b,sr(oo.get(b)||null,o,l,d,g,w)),!0;case"gotpointercapture":return b=w.pointerId,Fr.set(b,sr(Fr.get(b)||null,o,l,d,g,w)),!0}return!1}function ff(o){var l=Ea(o.target);if(l!==null){var d=ss(l);if(d!==null){if(l=d.tag,l===13){if(l=pa(d),l!==null){o.blockedOn=l,df(o.priority,function(){cf(d)});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function gi(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=Vl(o.domEventName,o.eventSystemFlags,l[0],o.nativeEvent);if(d===null){d=o.nativeEvent;var g=new d.constructor(d.type,d);ns=g,d.target.dispatchEvent(g),ns=null}else return l=Xu(d),l!==null&&Ol(l),o.blockedOn=d,!1;l.shift()}return!0}function wa(o,l,d){gi(o)&&d.delete(l)}function pf(){Vu=!1,En!==null&&gi(En)&&(En=null),os!==null&&gi(os)&&(os=null),as!==null&&gi(as)&&(as=null),oo.forEach(wa),Fr.forEach(wa)}function ls(o,l){o.blockedOn===l&&(o.blockedOn=null,Vu||(Vu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,pf)))}function cs(o){function l(w){return ls(w,o)}if(0<As.length){ls(As[0],o);for(var d=1;d<As.length;d++){var g=As[d];g.blockedOn===o&&(g.blockedOn=null)}}for(En!==null&&ls(En,o),os!==null&&ls(os,o),as!==null&&ls(as,o),oo.forEach(l),Fr.forEach(l),d=0;d<Rs.length;d++)g=Rs[d],g.blockedOn===o&&(g.blockedOn=null);for(;0<Rs.length&&(d=Rs[0],d.blockedOn===null);)ff(d),d.blockedOn===null&&Rs.shift()}var yi=L.ReactCurrentBatchConfig,ao=!0;function kt(o,l,d,g){var w=Je,b=yi.transition;yi.transition=null;try{Je=1,Lu(o,l,d,g)}finally{Je=w,yi.transition=b}}function iy(o,l,d,g){var w=Je,b=yi.transition;yi.transition=null;try{Je=4,Lu(o,l,d,g)}finally{Je=w,yi.transition=b}}function Lu(o,l,d,g){if(ao){var w=Vl(o,l,d,g);if(w===null)gy(o,l,g,_a,d),hf(o,g);else if(sy(w,o,l,d,g))g.stopPropagation();else if(hf(o,g),l&4&&-1<ry.indexOf(o)){for(;w!==null;){var b=Xu(w);if(b!==null&&lf(b),b=Vl(o,l,d,g),b===null&&gy(o,l,g,_a,d),b===w)break;w=b}w!==null&&g.stopPropagation()}else gy(o,l,g,null,d)}}var _a=null;function Vl(o,l,d,g){if(_a=null,o=zn(g),o=Ea(o),o!==null)if(l=ss(o),l===null)o=null;else if(d=l.tag,d===13){if(o=pa(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null);return _a=o,null}function ju(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nf()){case ma:return 1;case eo:return 4;case jr:case Mu:return 16;case rf:return 536870912;default:return 16}default:return 16}}var _r=null,Ll=null,ir=null;function Fu(){if(ir)return ir;var o,l=Ll,d=l.length,g,w="value"in _r?_r.value:_r.textContent,b=w.length;for(o=0;o<d&&l[o]===w[o];o++);var A=d-o;for(g=1;g<=A&&l[d-g]===w[b-g];g++);return ir=w.slice(o,1<g?1-g:void 0)}function jl(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Ns(){return!0}function Uu(){return!1}function Tn(o){function l(d,g,w,b,A){this._reactName=d,this._targetInst=w,this.type=g,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var B in o)o.hasOwnProperty(B)&&(d=o[B],this[B]=d?d(b):b[B]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ns:Uu,this.isPropagationStopped=Uu,this}return le(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),l}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=Tn(us),Ds=le({},us,{view:0,detail:0}),oy=Tn(Ds),Ul,vi,lo,xa=le({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ms,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==lo&&(lo&&o.type==="mousemove"?(Ul=o.screenX-lo.screenX,vi=o.screenY-lo.screenY):vi=Ul=0,lo=o),Ul)},movementY:function(o){return"movementY"in o?o.movementY:vi}}),Bl=Tn(xa),Bu=le({},xa,{dataTransfer:0}),mf=Tn(Bu),zl=le({},Ds,{relatedTarget:0}),$l=Tn(zl),gf=le({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),wi=Tn(gf),yf=le({},us,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),vf=Tn(yf),wf=le({},us,{data:0}),zu=Tn(wf),Wl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_f={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xf(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=_f[o])?!!l[o]:!1}function Ms(){return xf}var f=le({},Ds,{key:function(o){if(o.key){var l=Wl[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=jl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Wn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ms,charCode:function(o){return o.type==="keypress"?jl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?jl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),_=Tn(f),k=le({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O=Tn(k),G=le({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ms}),te=Tn(G),ye=le({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),lt=Tn(ye),dn=le({},xa,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),et=Tn(dn),yn=[9,13,27,32],Jt=c&&"CompositionEvent"in window,Ur=null;c&&"documentMode"in document&&(Ur=document.documentMode);var xr=c&&"TextEvent"in window&&!Ur,ba=c&&(!Jt||Ur&&8<Ur&&11>=Ur),Hl=" ",kb=!1;function Cb(o,l){switch(o){case"keyup":return yn.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ql=!1;function yO(o,l){switch(o){case"compositionend":return Pb(l);case"keypress":return l.which!==32?null:(kb=!0,Hl);case"textInput":return o=l.data,o===Hl&&kb?null:o;default:return null}}function vO(o,l){if(ql)return o==="compositionend"||!Jt&&Cb(o,l)?(o=Fu(),ir=Ll=_r=null,ql=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ba&&l.locale!=="ko"?null:l.data;default:return null}}var wO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ab(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!wO[o.type]:l==="textarea"}function Rb(o,l,d,g){Oe(g),l=If(l,"onChange"),0<l.length&&(d=new Fl("onChange","change",null,d,g),o.push({event:d,listeners:l}))}var $u=null,Wu=null;function _O(o){Yb(o,0)}function bf(o){var l=Xl(o);if(We(l))return o}function xO(o,l){if(o==="change")return l}var Nb=!1;if(c){var ay;if(c){var ly="oninput"in document;if(!ly){var Db=document.createElement("div");Db.setAttribute("oninput","return;"),ly=typeof Db.oninput=="function"}ay=ly}else ay=!1;Nb=ay&&(!document.documentMode||9<document.documentMode)}function Mb(){$u&&($u.detachEvent("onpropertychange",Ob),Wu=$u=null)}function Ob(o){if(o.propertyName==="value"&&bf(Wu)){var l=[];Rb(l,Wu,o,zn(o)),Dt(_O,l)}}function bO(o,l,d){o==="focusin"?(Mb(),$u=l,Wu=d,$u.attachEvent("onpropertychange",Ob)):o==="focusout"&&Mb()}function EO(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return bf(Wu)}function TO(o,l){if(o==="click")return bf(l)}function SO(o,l){if(o==="input"||o==="change")return bf(l)}function IO(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var ds=typeof Object.is=="function"?Object.is:IO;function Hu(o,l){if(ds(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var w=d[g];if(!u.call(l,w)||!ds(o[w],l[w]))return!1}return!0}function Vb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Lb(o,l){var d=Vb(o);o=0;for(var g;d;){if(d.nodeType===3){if(g=o+d.textContent.length,o<=l&&g>=l)return{node:d,offset:l-o};o=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Vb(d)}}function jb(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?jb(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function Fb(){for(var o=window,l=Et();l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=Et(o.document)}return l}function cy(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}function kO(o){var l=Fb(),d=o.focusedElem,g=o.selectionRange;if(l!==d&&d&&d.ownerDocument&&jb(d.ownerDocument.documentElement,d)){if(g!==null&&cy(d)){if(l=g.start,o=g.end,o===void 0&&(o=l),"selectionStart"in d)d.selectionStart=l,d.selectionEnd=Math.min(o,d.value.length);else if(o=(l=d.ownerDocument||document)&&l.defaultView||window,o.getSelection){o=o.getSelection();var w=d.textContent.length,b=Math.min(g.start,w);g=g.end===void 0?b:Math.min(g.end,w),!o.extend&&b>g&&(w=g,g=b,b=w),w=Lb(d,b);var A=Lb(d,g);w&&A&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==A.node||o.focusOffset!==A.offset)&&(l=l.createRange(),l.setStart(w.node,w.offset),o.removeAllRanges(),b>g?(o.addRange(l),o.extend(A.node,A.offset)):(l.setEnd(A.node,A.offset),o.addRange(l)))}}for(l=[],o=d;o=o.parentNode;)o.nodeType===1&&l.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<l.length;d++)o=l[d],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var CO=c&&"documentMode"in document&&11>=document.documentMode,Kl=null,uy=null,qu=null,dy=!1;function Ub(o,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;dy||Kl==null||Kl!==Et(g)||(g=Kl,"selectionStart"in g&&cy(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),qu&&Hu(qu,g)||(qu=g,g=If(uy,"onSelect"),0<g.length&&(l=new Fl("onSelect","select",null,l,d),o.push({event:l,listeners:g}),l.target=Kl)))}function Ef(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var Gl={animationend:Ef("Animation","AnimationEnd"),animationiteration:Ef("Animation","AnimationIteration"),animationstart:Ef("Animation","AnimationStart"),transitionend:Ef("Transition","TransitionEnd")},hy={},Bb={};c&&(Bb=document.createElement("div").style,"AnimationEvent"in window||(delete Gl.animationend.animation,delete Gl.animationiteration.animation,delete Gl.animationstart.animation),"TransitionEvent"in window||delete Gl.transitionend.transition);function Tf(o){if(hy[o])return hy[o];if(!Gl[o])return o;var l=Gl[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in Bb)return hy[o]=l[d];return o}var zb=Tf("animationend"),$b=Tf("animationiteration"),Wb=Tf("animationstart"),Hb=Tf("transitionend"),qb=new Map,Kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function co(o,l){qb.set(o,l),i(l,[o])}for(var fy=0;fy<Kb.length;fy++){var py=Kb[fy],PO=py.toLowerCase(),AO=py[0].toUpperCase()+py.slice(1);co(PO,"on"+AO)}co(zb,"onAnimationEnd"),co($b,"onAnimationIteration"),co(Wb,"onAnimationStart"),co("dblclick","onDoubleClick"),co("focusin","onFocus"),co("focusout","onBlur"),co(Hb,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ku));function Gb(o,l,d){var g=o.type||"unknown-event";o.currentTarget=d,Zh(g,l,void 0,o),o.currentTarget=null}function Yb(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var g=o[d],w=g.event;g=g.listeners;e:{var b=void 0;if(l)for(var A=g.length-1;0<=A;A--){var B=g[A],H=B.instance,ee=B.currentTarget;if(B=B.listener,H!==b&&w.isPropagationStopped())break e;Gb(w,B,ee),b=H}else for(A=0;A<g.length;A++){if(B=g[A],H=B.instance,ee=B.currentTarget,B=B.listener,H!==b&&w.isPropagationStopped())break e;Gb(w,B,ee),b=H}}}if(Lr)throw o=Ru,Lr=!1,Ru=null,o}function wt(o,l){var d=l[by];d===void 0&&(d=l[by]=new Set);var g=o+"__bubble";d.has(g)||(Qb(l,o,2,!1),d.add(g))}function my(o,l,d){var g=0;l&&(g|=4),Qb(d,o,g,l)}var Sf="_reactListening"+Math.random().toString(36).slice(2);function Gu(o){if(!o[Sf]){o[Sf]=!0,r.forEach(function(d){d!=="selectionchange"&&(RO.has(d)||my(d,!1,o),my(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Sf]||(l[Sf]=!0,my("selectionchange",!1,l))}}function Qb(o,l,d,g){switch(ju(l)){case 1:var w=kt;break;case 4:w=iy;break;default:w=Lu}d=w.bind(null,l,d,o),w=void 0,!rs||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(l,d,{capture:!0,passive:w}):o.addEventListener(l,d,!0):w!==void 0?o.addEventListener(l,d,{passive:w}):o.addEventListener(l,d,!1)}function gy(o,l,d,g,w){var b=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var B=g.stateNode.containerInfo;if(B===w||B.nodeType===8&&B.parentNode===w)break;if(A===4)for(A=g.return;A!==null;){var H=A.tag;if((H===3||H===4)&&(H=A.stateNode.containerInfo,H===w||H.nodeType===8&&H.parentNode===w))return;A=A.return}for(;B!==null;){if(A=Ea(B),A===null)return;if(H=A.tag,H===5||H===6){g=b=A;continue e}B=B.parentNode}}g=g.return}Dt(function(){var ee=b,de=zn(d),he=[];e:{var ce=qb.get(o);if(ce!==void 0){var _e=Fl,Te=o;switch(o){case"keypress":if(jl(d)===0)break e;case"keydown":case"keyup":_e=_;break;case"focusin":Te="focus",_e=$l;break;case"focusout":Te="blur",_e=$l;break;case"beforeblur":case"afterblur":_e=$l;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Bl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=mf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=te;break;case zb:case $b:case Wb:_e=wi;break;case Hb:_e=lt;break;case"scroll":_e=oy;break;case"wheel":_e=et;break;case"copy":case"cut":case"paste":_e=vf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=O}var Ce=(l&4)!==0,Gt=!Ce&&o==="scroll",Q=Ce?ce!==null?ce+"Capture":null:ce;Ce=[];for(var q=ee,J;q!==null;){J=q;var pe=J.stateNode;if(J.tag===5&&pe!==null&&(J=pe,Q!==null&&(pe=Ze(q,Q),pe!=null&&Ce.push(Yu(q,pe,J)))),Gt)break;q=q.return}0<Ce.length&&(ce=new _e(ce,Te,null,d,de),he.push({event:ce,listeners:Ce}))}}if((l&7)===0){e:{if(ce=o==="mouseover"||o==="pointerover",_e=o==="mouseout"||o==="pointerout",ce&&d!==ns&&(Te=d.relatedTarget||d.fromElement)&&(Ea(Te)||Te[_i]))break e;if((_e||ce)&&(ce=de.window===de?de:(ce=de.ownerDocument)?ce.defaultView||ce.parentWindow:window,_e?(Te=d.relatedTarget||d.toElement,_e=ee,Te=Te?Ea(Te):null,Te!==null&&(Gt=ss(Te),Te!==Gt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(_e=null,Te=ee),_e!==Te)){if(Ce=Bl,pe="onMouseLeave",Q="onMouseEnter",q="mouse",(o==="pointerout"||o==="pointerover")&&(Ce=O,pe="onPointerLeave",Q="onPointerEnter",q="pointer"),Gt=_e==null?ce:Xl(_e),J=Te==null?ce:Xl(Te),ce=new Ce(pe,q+"leave",_e,d,de),ce.target=Gt,ce.relatedTarget=J,pe=null,Ea(de)===ee&&(Ce=new Ce(Q,q+"enter",Te,d,de),Ce.target=J,Ce.relatedTarget=Gt,pe=Ce),Gt=pe,_e&&Te)t:{for(Ce=_e,Q=Te,q=0,J=Ce;J;J=Yl(J))q++;for(J=0,pe=Q;pe;pe=Yl(pe))J++;for(;0<q-J;)Ce=Yl(Ce),q--;for(;0<J-q;)Q=Yl(Q),J--;for(;q--;){if(Ce===Q||Q!==null&&Ce===Q.alternate)break t;Ce=Yl(Ce),Q=Yl(Q)}Ce=null}else Ce=null;_e!==null&&Xb(he,ce,_e,Ce,!1),Te!==null&&Gt!==null&&Xb(he,Gt,Te,Ce,!0)}}e:{if(ce=ee?Xl(ee):window,_e=ce.nodeName&&ce.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ce.type==="file")var Pe=xO;else if(Ab(ce))if(Nb)Pe=SO;else{Pe=EO;var Ve=bO}else(_e=ce.nodeName)&&_e.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(Pe=TO);if(Pe&&(Pe=Pe(o,ee))){Rb(he,Pe,d,de);break e}Ve&&Ve(o,ce,ee),o==="focusout"&&(Ve=ce._wrapperState)&&Ve.controlled&&ce.type==="number"&&qt(ce,"number",ce.value)}switch(Ve=ee?Xl(ee):window,o){case"focusin":(Ab(Ve)||Ve.contentEditable==="true")&&(Kl=Ve,uy=ee,qu=null);break;case"focusout":qu=uy=Kl=null;break;case"mousedown":dy=!0;break;case"contextmenu":case"mouseup":case"dragend":dy=!1,Ub(he,d,de);break;case"selectionchange":if(CO)break;case"keydown":case"keyup":Ub(he,d,de)}var Le;if(Jt)e:{switch(o){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ql?Cb(o,d)&&(Ue="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Ue="onCompositionStart");Ue&&(ba&&d.locale!=="ko"&&(ql||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ql&&(Le=Fu()):(_r=de,Ll="value"in _r?_r.value:_r.textContent,ql=!0)),Ve=If(ee,Ue),0<Ve.length&&(Ue=new zu(Ue,o,null,d,de),he.push({event:Ue,listeners:Ve}),Le?Ue.data=Le:(Le=Pb(d),Le!==null&&(Ue.data=Le)))),(Le=xr?yO(o,d):vO(o,d))&&(ee=If(ee,"onBeforeInput"),0<ee.length&&(de=new zu("onBeforeInput","beforeinput",null,d,de),he.push({event:de,listeners:ee}),de.data=Le))}Yb(he,l)})}function Yu(o,l,d){return{instance:o,listener:l,currentTarget:d}}function If(o,l){for(var d=l+"Capture",g=[];o!==null;){var w=o,b=w.stateNode;w.tag===5&&b!==null&&(w=b,b=Ze(o,d),b!=null&&g.unshift(Yu(o,b,w)),b=Ze(o,l),b!=null&&g.push(Yu(o,b,w))),o=o.return}return g}function Yl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Xb(o,l,d,g,w){for(var b=l._reactName,A=[];d!==null&&d!==g;){var B=d,H=B.alternate,ee=B.stateNode;if(H!==null&&H===g)break;B.tag===5&&ee!==null&&(B=ee,w?(H=Ze(d,b),H!=null&&A.unshift(Yu(d,H,B))):w||(H=Ze(d,b),H!=null&&A.push(Yu(d,H,B)))),d=d.return}A.length!==0&&o.push({event:l,listeners:A})}var NO=/\r\n?/g,DO=/\u0000|\uFFFD/g;function Jb(o){return(typeof o=="string"?o:""+o).replace(NO,`
`).replace(DO,"")}function kf(o,l,d){if(l=Jb(l),Jb(o)!==l&&d)throw Error(n(425))}function Cf(){}var yy=null,vy=null;function wy(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var _y=typeof setTimeout=="function"?setTimeout:void 0,MO=typeof clearTimeout=="function"?clearTimeout:void 0,Zb=typeof Promise=="function"?Promise:void 0,OO=typeof queueMicrotask=="function"?queueMicrotask:typeof Zb<"u"?function(o){return Zb.resolve(null).then(o).catch(VO)}:_y;function VO(o){setTimeout(function(){throw o})}function xy(o,l){var d=l,g=0;do{var w=d.nextSibling;if(o.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(g===0){o.removeChild(w),cs(l);return}g--}else d!=="$"&&d!=="$?"&&d!=="$!"||g++;d=w}while(d);cs(l)}function uo(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return o}function eE(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),Os="__reactFiber$"+Ql,Qu="__reactProps$"+Ql,_i="__reactContainer$"+Ql,by="__reactEvents$"+Ql,LO="__reactListeners$"+Ql,jO="__reactHandles$"+Ql;function Ea(o){var l=o[Os];if(l)return l;for(var d=o.parentNode;d;){if(l=d[_i]||d[Os]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=eE(o);o!==null;){if(d=o[Os])return d;o=eE(o)}return l}o=d,d=o.parentNode}return null}function Xu(o){return o=o[Os]||o[_i],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Xl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Pf(o){return o[Qu]||null}var Ey=[],Jl=-1;function ho(o){return{current:o}}function _t(o){0>Jl||(o.current=Ey[Jl],Ey[Jl]=null,Jl--)}function yt(o,l){Jl++,Ey[Jl]=o.current,o.current=l}var fo={},Rn=ho(fo),or=ho(!1),Ta=fo;function Zl(o,l){var d=o.type.contextTypes;if(!d)return fo;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var w={},b;for(b in d)w[b]=l[b];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=l,o.__reactInternalMemoizedMaskedChildContext=w),w}function ar(o){return o=o.childContextTypes,o!=null}function Af(){_t(or),_t(Rn)}function tE(o,l,d){if(Rn.current!==fo)throw Error(n(168));yt(Rn,l),yt(or,d)}function nE(o,l,d){var g=o.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return d;g=g.getChildContext();for(var w in g)if(!(w in l))throw Error(n(108,ue(o)||"Unknown",w));return le({},d,g)}function Rf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||fo,Ta=Rn.current,yt(Rn,o),yt(or,or.current),!0}function rE(o,l,d){var g=o.stateNode;if(!g)throw Error(n(169));d?(o=nE(o,l,Ta),g.__reactInternalMemoizedMergedChildContext=o,_t(or),_t(Rn),yt(Rn,o)):_t(or),yt(or,d)}var xi=null,Nf=!1,Ty=!1;function sE(o){xi===null?xi=[o]:xi.push(o)}function FO(o){Nf=!0,sE(o)}function po(){if(!Ty&&xi!==null){Ty=!0;var o=0,l=Je;try{var d=xi;for(Je=1;o<d.length;o++){var g=d[o];do g=g(!0);while(g!==null)}xi=null,Nf=!1}catch(w){throw xi!==null&&(xi=xi.slice(o+1)),Nl(ma,po),w}finally{Je=l,Ty=!1}}return null}var ec=[],tc=0,Df=null,Mf=0,Br=[],zr=0,Sa=null,bi=1,Ei="";function Ia(o,l){ec[tc++]=Mf,ec[tc++]=Df,Df=o,Mf=l}function iE(o,l,d){Br[zr++]=bi,Br[zr++]=Ei,Br[zr++]=Sa,Sa=o;var g=bi;o=Ei;var w=32-$n(g)-1;g&=~(1<<w),d+=1;var b=32-$n(l)+w;if(30<b){var A=w-w%5;b=(g&(1<<A)-1).toString(32),g>>=A,w-=A,bi=1<<32-$n(l)+w|d<<w|g,Ei=b+o}else bi=1<<b|d<<w|g,Ei=o}function Sy(o){o.return!==null&&(Ia(o,1),iE(o,1,0))}function Iy(o){for(;o===Df;)Df=ec[--tc],ec[tc]=null,Mf=ec[--tc],ec[tc]=null;for(;o===Sa;)Sa=Br[--zr],Br[zr]=null,Ei=Br[--zr],Br[zr]=null,bi=Br[--zr],Br[zr]=null}var br=null,Er=null,Ct=!1,hs=null;function oE(o,l){var d=qr(5,null,null,0);d.elementType="DELETED",d.stateNode=l,d.return=o,l=o.deletions,l===null?(o.deletions=[d],o.flags|=16):l.push(d)}function aE(o,l){switch(o.tag){case 5:var d=o.type;return l=l.nodeType!==1||d.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(o.stateNode=l,br=o,Er=uo(l.firstChild),!0):!1;case 6:return l=o.pendingProps===""||l.nodeType!==3?null:l,l!==null?(o.stateNode=l,br=o,Er=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(d=Sa!==null?{id:bi,overflow:Ei}:null,o.memoizedState={dehydrated:l,treeContext:d,retryLane:1073741824},d=qr(18,null,null,0),d.stateNode=l,d.return=o,o.child=d,br=o,Er=null,!0):!1;default:return!1}}function ky(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Cy(o){if(Ct){var l=Er;if(l){var d=l;if(!aE(o,l)){if(ky(o))throw Error(n(418));l=uo(d.nextSibling);var g=br;l&&aE(o,l)?oE(g,d):(o.flags=o.flags&-4097|2,Ct=!1,br=o)}}else{if(ky(o))throw Error(n(418));o.flags=o.flags&-4097|2,Ct=!1,br=o}}}function lE(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;br=o}function Of(o){if(o!==br)return!1;if(!Ct)return lE(o),Ct=!0,!1;var l;if((l=o.tag!==3)&&!(l=o.tag!==5)&&(l=o.type,l=l!=="head"&&l!=="body"&&!wy(o.type,o.memoizedProps)),l&&(l=Er)){if(ky(o))throw cE(),Error(n(418));for(;l;)oE(o,l),l=uo(l.nextSibling)}if(lE(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="/$"){if(l===0){Er=uo(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++}o=o.nextSibling}Er=null}}else Er=br?uo(o.stateNode.nextSibling):null;return!0}function cE(){for(var o=Er;o;)o=uo(o.nextSibling)}function nc(){Er=br=null,Ct=!1}function Py(o){hs===null?hs=[o]:hs.push(o)}var UO=L.ReactCurrentBatchConfig;function Ju(o,l,d){if(o=d.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var g=d.stateNode}if(!g)throw Error(n(147,o));var w=g,b=""+o;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(A){var B=w.refs;A===null?delete B[b]:B[b]=A},l._stringRef=b,l)}if(typeof o!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,o))}return o}function Vf(o,l){throw o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o))}function uE(o){var l=o._init;return l(o._payload)}function dE(o){function l(Q,q){if(o){var J=Q.deletions;J===null?(Q.deletions=[q],Q.flags|=16):J.push(q)}}function d(Q,q){if(!o)return null;for(;q!==null;)l(Q,q),q=q.sibling;return null}function g(Q,q){for(Q=new Map;q!==null;)q.key!==null?Q.set(q.key,q):Q.set(q.index,q),q=q.sibling;return Q}function w(Q,q){return Q=bo(Q,q),Q.index=0,Q.sibling=null,Q}function b(Q,q,J){return Q.index=J,o?(J=Q.alternate,J!==null?(J=J.index,J<q?(Q.flags|=2,q):J):(Q.flags|=2,q)):(Q.flags|=1048576,q)}function A(Q){return o&&Q.alternate===null&&(Q.flags|=2),Q}function B(Q,q,J,pe){return q===null||q.tag!==6?(q=_v(J,Q.mode,pe),q.return=Q,q):(q=w(q,J),q.return=Q,q)}function H(Q,q,J,pe){var Pe=J.type;return Pe===D?de(Q,q,J.props.children,pe,J.key):q!==null&&(q.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===re&&uE(Pe)===q.type)?(pe=w(q,J.props),pe.ref=Ju(Q,q,J),pe.return=Q,pe):(pe=op(J.type,J.key,J.props,null,Q.mode,pe),pe.ref=Ju(Q,q,J),pe.return=Q,pe)}function ee(Q,q,J,pe){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=xv(J,Q.mode,pe),q.return=Q,q):(q=w(q,J.children||[]),q.return=Q,q)}function de(Q,q,J,pe,Pe){return q===null||q.tag!==7?(q=Ma(J,Q.mode,pe,Pe),q.return=Q,q):(q=w(q,J),q.return=Q,q)}function he(Q,q,J){if(typeof q=="string"&&q!==""||typeof q=="number")return q=_v(""+q,Q.mode,J),q.return=Q,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case z:return J=op(q.type,q.key,q.props,null,Q.mode,J),J.ref=Ju(Q,null,q),J.return=Q,J;case K:return q=xv(q,Q.mode,J),q.return=Q,q;case re:var pe=q._init;return he(Q,pe(q._payload),J)}if(es(q)||ie(q))return q=Ma(q,Q.mode,J,null),q.return=Q,q;Vf(Q,q)}return null}function ce(Q,q,J,pe){var Pe=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Pe!==null?null:B(Q,q,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case z:return J.key===Pe?H(Q,q,J,pe):null;case K:return J.key===Pe?ee(Q,q,J,pe):null;case re:return Pe=J._init,ce(Q,q,Pe(J._payload),pe)}if(es(J)||ie(J))return Pe!==null?null:de(Q,q,J,pe,null);Vf(Q,J)}return null}function _e(Q,q,J,pe,Pe){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Q=Q.get(J)||null,B(q,Q,""+pe,Pe);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case z:return Q=Q.get(pe.key===null?J:pe.key)||null,H(q,Q,pe,Pe);case K:return Q=Q.get(pe.key===null?J:pe.key)||null,ee(q,Q,pe,Pe);case re:var Ve=pe._init;return _e(Q,q,J,Ve(pe._payload),Pe)}if(es(pe)||ie(pe))return Q=Q.get(J)||null,de(q,Q,pe,Pe,null);Vf(q,pe)}return null}function Te(Q,q,J,pe){for(var Pe=null,Ve=null,Le=q,Ue=q=0,_n=null;Le!==null&&Ue<J.length;Ue++){Le.index>Ue?(_n=Le,Le=null):_n=Le.sibling;var st=ce(Q,Le,J[Ue],pe);if(st===null){Le===null&&(Le=_n);break}o&&Le&&st.alternate===null&&l(Q,Le),q=b(st,q,Ue),Ve===null?Pe=st:Ve.sibling=st,Ve=st,Le=_n}if(Ue===J.length)return d(Q,Le),Ct&&Ia(Q,Ue),Pe;if(Le===null){for(;Ue<J.length;Ue++)Le=he(Q,J[Ue],pe),Le!==null&&(q=b(Le,q,Ue),Ve===null?Pe=Le:Ve.sibling=Le,Ve=Le);return Ct&&Ia(Q,Ue),Pe}for(Le=g(Q,Le);Ue<J.length;Ue++)_n=_e(Le,Q,Ue,J[Ue],pe),_n!==null&&(o&&_n.alternate!==null&&Le.delete(_n.key===null?Ue:_n.key),q=b(_n,q,Ue),Ve===null?Pe=_n:Ve.sibling=_n,Ve=_n);return o&&Le.forEach(function(Eo){return l(Q,Eo)}),Ct&&Ia(Q,Ue),Pe}function Ce(Q,q,J,pe){var Pe=ie(J);if(typeof Pe!="function")throw Error(n(150));if(J=Pe.call(J),J==null)throw Error(n(151));for(var Ve=Pe=null,Le=q,Ue=q=0,_n=null,st=J.next();Le!==null&&!st.done;Ue++,st=J.next()){Le.index>Ue?(_n=Le,Le=null):_n=Le.sibling;var Eo=ce(Q,Le,st.value,pe);if(Eo===null){Le===null&&(Le=_n);break}o&&Le&&Eo.alternate===null&&l(Q,Le),q=b(Eo,q,Ue),Ve===null?Pe=Eo:Ve.sibling=Eo,Ve=Eo,Le=_n}if(st.done)return d(Q,Le),Ct&&Ia(Q,Ue),Pe;if(Le===null){for(;!st.done;Ue++,st=J.next())st=he(Q,st.value,pe),st!==null&&(q=b(st,q,Ue),Ve===null?Pe=st:Ve.sibling=st,Ve=st);return Ct&&Ia(Q,Ue),Pe}for(Le=g(Q,Le);!st.done;Ue++,st=J.next())st=_e(Le,Q,Ue,st.value,pe),st!==null&&(o&&st.alternate!==null&&Le.delete(st.key===null?Ue:st.key),q=b(st,q,Ue),Ve===null?Pe=st:Ve.sibling=st,Ve=st);return o&&Le.forEach(function(wV){return l(Q,wV)}),Ct&&Ia(Q,Ue),Pe}function Gt(Q,q,J,pe){if(typeof J=="object"&&J!==null&&J.type===D&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case z:e:{for(var Pe=J.key,Ve=q;Ve!==null;){if(Ve.key===Pe){if(Pe=J.type,Pe===D){if(Ve.tag===7){d(Q,Ve.sibling),q=w(Ve,J.props.children),q.return=Q,Q=q;break e}}else if(Ve.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===re&&uE(Pe)===Ve.type){d(Q,Ve.sibling),q=w(Ve,J.props),q.ref=Ju(Q,Ve,J),q.return=Q,Q=q;break e}d(Q,Ve);break}else l(Q,Ve);Ve=Ve.sibling}J.type===D?(q=Ma(J.props.children,Q.mode,pe,J.key),q.return=Q,Q=q):(pe=op(J.type,J.key,J.props,null,Q.mode,pe),pe.ref=Ju(Q,q,J),pe.return=Q,Q=pe)}return A(Q);case K:e:{for(Ve=J.key;q!==null;){if(q.key===Ve)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){d(Q,q.sibling),q=w(q,J.children||[]),q.return=Q,Q=q;break e}else{d(Q,q);break}else l(Q,q);q=q.sibling}q=xv(J,Q.mode,pe),q.return=Q,Q=q}return A(Q);case re:return Ve=J._init,Gt(Q,q,Ve(J._payload),pe)}if(es(J))return Te(Q,q,J,pe);if(ie(J))return Ce(Q,q,J,pe);Vf(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,q!==null&&q.tag===6?(d(Q,q.sibling),q=w(q,J),q.return=Q,Q=q):(d(Q,q),q=_v(J,Q.mode,pe),q.return=Q,Q=q),A(Q)):d(Q,q)}return Gt}var rc=dE(!0),hE=dE(!1),Lf=ho(null),jf=null,sc=null,Ay=null;function Ry(){Ay=sc=jf=null}function Ny(o){var l=Lf.current;_t(Lf),o._currentValue=l}function Dy(o,l,d){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===d)break;o=o.return}}function ic(o,l){jf=o,Ay=sc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&l)!==0&&(lr=!0),o.firstContext=null)}function $r(o){var l=o._currentValue;if(Ay!==o)if(o={context:o,memoizedValue:l,next:null},sc===null){if(jf===null)throw Error(n(308));sc=o,jf.dependencies={lanes:0,firstContext:o}}else sc=sc.next=o;return l}var ka=null;function My(o){ka===null?ka=[o]:ka.push(o)}function fE(o,l,d,g){var w=l.interleaved;return w===null?(d.next=d,My(l)):(d.next=w.next,w.next=d),l.interleaved=d,Ti(o,g)}function Ti(o,l){o.lanes|=l;var d=o.alternate;for(d!==null&&(d.lanes|=l),d=o,o=o.return;o!==null;)o.childLanes|=l,d=o.alternate,d!==null&&(d.childLanes|=l),d=o,o=o.return;return d.tag===3?d.stateNode:null}var mo=!1;function Oy(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pE(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Si(o,l){return{eventTime:o,lane:l,tag:0,payload:null,callback:null,next:null}}function go(o,l,d){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(rt&2)!==0){var w=g.pending;return w===null?l.next=l:(l.next=w.next,w.next=l),g.pending=l,Ti(o,d)}return w=g.interleaved,w===null?(l.next=l,My(g)):(l.next=w.next,w.next=l),g.interleaved=l,Ti(o,d)}function Ff(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194240)!==0)){var g=l.lanes;g&=o.pendingLanes,d|=g,l.lanes=d,so(o,d)}}function mE(o,l){var d=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var w=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var A={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};b===null?w=b=A:b=b.next=A,d=d.next}while(d!==null);b===null?w=b=l:b=b.next=l}else w=b=l;d={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:b,shared:g.shared,effects:g.effects},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}function Uf(o,l,d,g){var w=o.updateQueue;mo=!1;var b=w.firstBaseUpdate,A=w.lastBaseUpdate,B=w.shared.pending;if(B!==null){w.shared.pending=null;var H=B,ee=H.next;H.next=null,A===null?b=ee:A.next=ee,A=H;var de=o.alternate;de!==null&&(de=de.updateQueue,B=de.lastBaseUpdate,B!==A&&(B===null?de.firstBaseUpdate=ee:B.next=ee,de.lastBaseUpdate=H))}if(b!==null){var he=w.baseState;A=0,de=ee=H=null,B=b;do{var ce=B.lane,_e=B.eventTime;if((g&ce)===ce){de!==null&&(de=de.next={eventTime:_e,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Te=o,Ce=B;switch(ce=l,_e=d,Ce.tag){case 1:if(Te=Ce.payload,typeof Te=="function"){he=Te.call(_e,he,ce);break e}he=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Ce.payload,ce=typeof Te=="function"?Te.call(_e,he,ce):Te,ce==null)break e;he=le({},he,ce);break e;case 2:mo=!0}}B.callback!==null&&B.lane!==0&&(o.flags|=64,ce=w.effects,ce===null?w.effects=[B]:ce.push(B))}else _e={eventTime:_e,lane:ce,tag:B.tag,payload:B.payload,callback:B.callback,next:null},de===null?(ee=de=_e,H=he):de=de.next=_e,A|=ce;if(B=B.next,B===null){if(B=w.shared.pending,B===null)break;ce=B,B=ce.next,ce.next=null,w.lastBaseUpdate=ce,w.shared.pending=null}}while(!0);if(de===null&&(H=he),w.baseState=H,w.firstBaseUpdate=ee,w.lastBaseUpdate=de,l=w.shared.interleaved,l!==null){w=l;do A|=w.lane,w=w.next;while(w!==l)}else b===null&&(w.shared.lanes=0);Aa|=A,o.lanes=A,o.memoizedState=he}}function gE(o,l,d){if(o=l.effects,l.effects=null,o!==null)for(l=0;l<o.length;l++){var g=o[l],w=g.callback;if(w!==null){if(g.callback=null,g=d,typeof w!="function")throw Error(n(191,w));w.call(g)}}}var Zu={},Vs=ho(Zu),ed=ho(Zu),td=ho(Zu);function Ca(o){if(o===Zu)throw Error(n(174));return o}function Vy(o,l){switch(yt(td,l),yt(ed,o),yt(Vs,Zu),o=l.nodeType,o){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Kt(null,"");break;default:o=o===8?l.parentNode:l,l=o.namespaceURI||null,o=o.tagName,l=Kt(l,o)}_t(Vs),yt(Vs,l)}function oc(){_t(Vs),_t(ed),_t(td)}function yE(o){Ca(td.current);var l=Ca(Vs.current),d=Kt(l,o.type);l!==d&&(yt(ed,o),yt(Vs,d))}function Ly(o){ed.current===o&&(_t(Vs),_t(ed))}var Ot=ho(0);function Bf(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var jy=[];function Fy(){for(var o=0;o<jy.length;o++)jy[o]._workInProgressVersionPrimary=null;jy.length=0}var zf=L.ReactCurrentDispatcher,Uy=L.ReactCurrentBatchConfig,Pa=0,Vt=null,hn=null,vn=null,$f=!1,nd=!1,rd=0,BO=0;function Nn(){throw Error(n(321))}function By(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!ds(o[d],l[d]))return!1;return!0}function zy(o,l,d,g,w,b){if(Pa=b,Vt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,zf.current=o===null||o.memoizedState===null?HO:qO,o=d(g,w),nd){b=0;do{if(nd=!1,rd=0,25<=b)throw Error(n(301));b+=1,vn=hn=null,l.updateQueue=null,zf.current=KO,o=d(g,w)}while(nd)}if(zf.current=qf,l=hn!==null&&hn.next!==null,Pa=0,vn=hn=Vt=null,$f=!1,l)throw Error(n(300));return o}function $y(){var o=rd!==0;return rd=0,o}function Ls(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Vt.memoizedState=vn=o:vn=vn.next=o,vn}function Wr(){if(hn===null){var o=Vt.alternate;o=o!==null?o.memoizedState:null}else o=hn.next;var l=vn===null?Vt.memoizedState:vn.next;if(l!==null)vn=l,hn=o;else{if(o===null)throw Error(n(310));hn=o,o={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},vn===null?Vt.memoizedState=vn=o:vn=vn.next=o}return vn}function sd(o,l){return typeof l=="function"?l(o):l}function Wy(o){var l=Wr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=o;var g=hn,w=g.baseQueue,b=d.pending;if(b!==null){if(w!==null){var A=w.next;w.next=b.next,b.next=A}g.baseQueue=w=b,d.pending=null}if(w!==null){b=w.next,g=g.baseState;var B=A=null,H=null,ee=b;do{var de=ee.lane;if((Pa&de)===de)H!==null&&(H=H.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),g=ee.hasEagerState?ee.eagerState:o(g,ee.action);else{var he={lane:de,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};H===null?(B=H=he,A=g):H=H.next=he,Vt.lanes|=de,Aa|=de}ee=ee.next}while(ee!==null&&ee!==b);H===null?A=g:H.next=B,ds(g,l.memoizedState)||(lr=!0),l.memoizedState=g,l.baseState=A,l.baseQueue=H,d.lastRenderedState=g}if(o=d.interleaved,o!==null){w=o;do b=w.lane,Vt.lanes|=b,Aa|=b,w=w.next;while(w!==o)}else w===null&&(d.lanes=0);return[l.memoizedState,d.dispatch]}function Hy(o){var l=Wr(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=o;var g=d.dispatch,w=d.pending,b=l.memoizedState;if(w!==null){d.pending=null;var A=w=w.next;do b=o(b,A.action),A=A.next;while(A!==w);ds(b,l.memoizedState)||(lr=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),d.lastRenderedState=b}return[b,g]}function vE(){}function wE(o,l){var d=Vt,g=Wr(),w=l(),b=!ds(g.memoizedState,w);if(b&&(g.memoizedState=w,lr=!0),g=g.queue,qy(bE.bind(null,d,g,o),[o]),g.getSnapshot!==l||b||vn!==null&&vn.memoizedState.tag&1){if(d.flags|=2048,id(9,xE.bind(null,d,g,w,l),void 0,null),wn===null)throw Error(n(349));(Pa&30)!==0||_E(d,l,w)}return w}function _E(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=Vt.updateQueue,l===null?(l={lastEffect:null,stores:null},Vt.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function xE(o,l,d,g){l.value=d,l.getSnapshot=g,EE(l)&&TE(o)}function bE(o,l,d){return d(function(){EE(l)&&TE(o)})}function EE(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!ds(o,d)}catch{return!0}}function TE(o){var l=Ti(o,1);l!==null&&gs(l,o,1,-1)}function SE(o){var l=Ls();return typeof o=="function"&&(o=o()),l.memoizedState=l.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:o},l.queue=o,o=o.dispatch=WO.bind(null,Vt,o),[l.memoizedState,o]}function id(o,l,d,g){return o={tag:o,create:l,destroy:d,deps:g,next:null},l=Vt.updateQueue,l===null?(l={lastEffect:null,stores:null},Vt.updateQueue=l,l.lastEffect=o.next=o):(d=l.lastEffect,d===null?l.lastEffect=o.next=o:(g=d.next,d.next=o,o.next=g,l.lastEffect=o)),o}function IE(){return Wr().memoizedState}function Wf(o,l,d,g){var w=Ls();Vt.flags|=o,w.memoizedState=id(1|l,d,void 0,g===void 0?null:g)}function Hf(o,l,d,g){var w=Wr();g=g===void 0?null:g;var b=void 0;if(hn!==null){var A=hn.memoizedState;if(b=A.destroy,g!==null&&By(g,A.deps)){w.memoizedState=id(l,d,b,g);return}}Vt.flags|=o,w.memoizedState=id(1|l,d,b,g)}function kE(o,l){return Wf(8390656,8,o,l)}function qy(o,l){return Hf(2048,8,o,l)}function CE(o,l){return Hf(4,2,o,l)}function PE(o,l){return Hf(4,4,o,l)}function AE(o,l){if(typeof l=="function")return o=o(),l(o),function(){l(null)};if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function RE(o,l,d){return d=d!=null?d.concat([o]):null,Hf(4,4,AE.bind(null,l,o),d)}function Ky(){}function NE(o,l){var d=Wr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&By(l,g[1])?g[0]:(d.memoizedState=[o,l],o)}function DE(o,l){var d=Wr();l=l===void 0?null:l;var g=d.memoizedState;return g!==null&&l!==null&&By(l,g[1])?g[0]:(o=o(),d.memoizedState=[o,l],o)}function ME(o,l,d){return(Pa&21)===0?(o.baseState&&(o.baseState=!1,lr=!0),o.memoizedState=d):(ds(d,l)||(d=va(),Vt.lanes|=d,Aa|=d,o.baseState=!0),l)}function zO(o,l){var d=Je;Je=d!==0&&4>d?d:4,o(!0);var g=Uy.transition;Uy.transition={};try{o(!1),l()}finally{Je=d,Uy.transition=g}}function OE(){return Wr().memoizedState}function $O(o,l,d){var g=_o(o);if(d={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null},VE(o))LE(l,d);else if(d=fE(o,l,d,g),d!==null){var w=qn();gs(d,o,g,w),jE(d,l,g)}}function WO(o,l,d){var g=_o(o),w={lane:g,action:d,hasEagerState:!1,eagerState:null,next:null};if(VE(o))LE(l,w);else{var b=o.alternate;if(o.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var A=l.lastRenderedState,B=b(A,d);if(w.hasEagerState=!0,w.eagerState=B,ds(B,A)){var H=l.interleaved;H===null?(w.next=w,My(l)):(w.next=H.next,H.next=w),l.interleaved=w;return}}catch{}finally{}d=fE(o,l,w,g),d!==null&&(w=qn(),gs(d,o,g,w),jE(d,l,g))}}function VE(o){var l=o.alternate;return o===Vt||l!==null&&l===Vt}function LE(o,l){nd=$f=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function jE(o,l,d){if((d&4194240)!==0){var g=l.lanes;g&=o.pendingLanes,d|=g,l.lanes=d,so(o,d)}}var qf={readContext:$r,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},HO={readContext:$r,useCallback:function(o,l){return Ls().memoizedState=[o,l===void 0?null:l],o},useContext:$r,useEffect:kE,useImperativeHandle:function(o,l,d){return d=d!=null?d.concat([o]):null,Wf(4194308,4,AE.bind(null,l,o),d)},useLayoutEffect:function(o,l){return Wf(4194308,4,o,l)},useInsertionEffect:function(o,l){return Wf(4,2,o,l)},useMemo:function(o,l){var d=Ls();return l=l===void 0?null:l,o=o(),d.memoizedState=[o,l],o},useReducer:function(o,l,d){var g=Ls();return l=d!==void 0?d(l):l,g.memoizedState=g.baseState=l,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:l},g.queue=o,o=o.dispatch=$O.bind(null,Vt,o),[g.memoizedState,o]},useRef:function(o){var l=Ls();return o={current:o},l.memoizedState=o},useState:SE,useDebugValue:Ky,useDeferredValue:function(o){return Ls().memoizedState=o},useTransition:function(){var o=SE(!1),l=o[0];return o=zO.bind(null,o[1]),Ls().memoizedState=o,[l,o]},useMutableSource:function(){},useSyncExternalStore:function(o,l,d){var g=Vt,w=Ls();if(Ct){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),wn===null)throw Error(n(349));(Pa&30)!==0||_E(g,l,d)}w.memoizedState=d;var b={value:d,getSnapshot:l};return w.queue=b,kE(bE.bind(null,g,b,o),[o]),g.flags|=2048,id(9,xE.bind(null,g,b,d,l),void 0,null),d},useId:function(){var o=Ls(),l=wn.identifierPrefix;if(Ct){var d=Ei,g=bi;d=(g&~(1<<32-$n(g)-1)).toString(32)+d,l=":"+l+"R"+d,d=rd++,0<d&&(l+="H"+d.toString(32)),l+=":"}else d=BO++,l=":"+l+"r"+d.toString(32)+":";return o.memoizedState=l},unstable_isNewReconciler:!1},qO={readContext:$r,useCallback:NE,useContext:$r,useEffect:qy,useImperativeHandle:RE,useInsertionEffect:CE,useLayoutEffect:PE,useMemo:DE,useReducer:Wy,useRef:IE,useState:function(){return Wy(sd)},useDebugValue:Ky,useDeferredValue:function(o){var l=Wr();return ME(l,hn.memoizedState,o)},useTransition:function(){var o=Wy(sd)[0],l=Wr().memoizedState;return[o,l]},useMutableSource:vE,useSyncExternalStore:wE,useId:OE,unstable_isNewReconciler:!1},KO={readContext:$r,useCallback:NE,useContext:$r,useEffect:qy,useImperativeHandle:RE,useInsertionEffect:CE,useLayoutEffect:PE,useMemo:DE,useReducer:Hy,useRef:IE,useState:function(){return Hy(sd)},useDebugValue:Ky,useDeferredValue:function(o){var l=Wr();return hn===null?l.memoizedState=o:ME(l,hn.memoizedState,o)},useTransition:function(){var o=Hy(sd)[0],l=Wr().memoizedState;return[o,l]},useMutableSource:vE,useSyncExternalStore:wE,useId:OE,unstable_isNewReconciler:!1};function fs(o,l){if(o&&o.defaultProps){l=le({},l),o=o.defaultProps;for(var d in o)l[d]===void 0&&(l[d]=o[d]);return l}return l}function Gy(o,l,d,g){l=o.memoizedState,d=d(g,l),d=d==null?l:le({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Kf={isMounted:function(o){return(o=o._reactInternals)?ss(o)===o:!1},enqueueSetState:function(o,l,d){o=o._reactInternals;var g=qn(),w=_o(o),b=Si(g,w);b.payload=l,d!=null&&(b.callback=d),l=go(o,b,w),l!==null&&(gs(l,o,w,g),Ff(l,o,w))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var g=qn(),w=_o(o),b=Si(g,w);b.tag=1,b.payload=l,d!=null&&(b.callback=d),l=go(o,b,w),l!==null&&(gs(l,o,w,g),Ff(l,o,w))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=qn(),g=_o(o),w=Si(d,g);w.tag=2,l!=null&&(w.callback=l),l=go(o,w,g),l!==null&&(gs(l,o,g,d),Ff(l,o,g))}};function FE(o,l,d,g,w,b,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,b,A):l.prototype&&l.prototype.isPureReactComponent?!Hu(d,g)||!Hu(w,b):!0}function UE(o,l,d){var g=!1,w=fo,b=l.contextType;return typeof b=="object"&&b!==null?b=$r(b):(w=ar(l)?Ta:Rn.current,g=l.contextTypes,b=(g=g!=null)?Zl(o,w):fo),l=new l(d,b),o.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=Kf,o.stateNode=l,l._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=b),l}function BE(o,l,d,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==o&&Kf.enqueueReplaceState(l,l.state,null)}function Yy(o,l,d,g){var w=o.stateNode;w.props=d,w.state=o.memoizedState,w.refs={},Oy(o);var b=l.contextType;typeof b=="object"&&b!==null?w.context=$r(b):(b=ar(l)?Ta:Rn.current,w.context=Zl(o,b)),w.state=o.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Gy(o,l,b,d),w.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(l=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),l!==w.state&&Kf.enqueueReplaceState(w,w.state,null),Uf(o,d,w,g),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function ac(o,l){try{var d="",g=l;do d+=Ae(g),g=g.return;while(g);var w=d}catch(b){w=`
Error generating stack: `+b.message+`
`+b.stack}return{value:o,source:l,stack:w,digest:null}}function Qy(o,l,d){return{value:o,source:null,stack:d??null,digest:l??null}}function Xy(o,l){try{console.error(l.value)}catch(d){setTimeout(function(){throw d})}}var GO=typeof WeakMap=="function"?WeakMap:Map;function zE(o,l,d){d=Si(-1,d),d.tag=3,d.payload={element:null};var g=l.value;return d.callback=function(){ep||(ep=!0,hv=g),Xy(o,l)},d}function $E(o,l,d){d=Si(-1,d),d.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var w=l.value;d.payload=function(){return g(w)},d.callback=function(){Xy(o,l)}}var b=o.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(d.callback=function(){Xy(o,l),typeof g!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})}),d}function WE(o,l,d){var g=o.pingCache;if(g===null){g=o.pingCache=new GO;var w=new Set;g.set(l,w)}else w=g.get(l),w===void 0&&(w=new Set,g.set(l,w));w.has(d)||(w.add(d),o=lV.bind(null,o,l,d),l.then(o,o))}function HE(o){do{var l;if((l=o.tag===13)&&(l=o.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return o;o=o.return}while(o!==null);return null}function qE(o,l,d,g,w){return(o.mode&1)===0?(o===l?o.flags|=65536:(o.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(l=Si(-1,1),l.tag=2,go(d,l,1))),d.lanes|=1),o):(o.flags|=65536,o.lanes=w,o)}var YO=L.ReactCurrentOwner,lr=!1;function Hn(o,l,d,g){l.child=o===null?hE(l,null,d,g):rc(l,o.child,d,g)}function KE(o,l,d,g,w){d=d.render;var b=l.ref;return ic(l,w),g=zy(o,l,d,g,b,w),d=$y(),o!==null&&!lr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~w,Ii(o,l,w)):(Ct&&d&&Sy(l),l.flags|=1,Hn(o,l,g,w),l.child)}function GE(o,l,d,g,w){if(o===null){var b=d.type;return typeof b=="function"&&!wv(b)&&b.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(l.tag=15,l.type=b,YE(o,l,b,g,w)):(o=op(d.type,null,g,l,l.mode,w),o.ref=l.ref,o.return=l,l.child=o)}if(b=o.child,(o.lanes&w)===0){var A=b.memoizedProps;if(d=d.compare,d=d!==null?d:Hu,d(A,g)&&o.ref===l.ref)return Ii(o,l,w)}return l.flags|=1,o=bo(b,g),o.ref=l.ref,o.return=l,l.child=o}function YE(o,l,d,g,w){if(o!==null){var b=o.memoizedProps;if(Hu(b,g)&&o.ref===l.ref)if(lr=!1,l.pendingProps=g=b,(o.lanes&w)!==0)(o.flags&131072)!==0&&(lr=!0);else return l.lanes=o.lanes,Ii(o,l,w)}return Jy(o,l,d,g,w)}function QE(o,l,d){var g=l.pendingProps,w=g.children,b=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(cc,Tr),Tr|=d;else{if((d&1073741824)===0)return o=b!==null?b.baseLanes|d:d,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:o,cachePool:null,transitions:null},l.updateQueue=null,yt(cc,Tr),Tr|=o,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:d,yt(cc,Tr),Tr|=g}else b!==null?(g=b.baseLanes|d,l.memoizedState=null):g=d,yt(cc,Tr),Tr|=g;return Hn(o,l,w,d),l.child}function XE(o,l){var d=l.ref;(o===null&&d!==null||o!==null&&o.ref!==d)&&(l.flags|=512,l.flags|=2097152)}function Jy(o,l,d,g,w){var b=ar(d)?Ta:Rn.current;return b=Zl(l,b),ic(l,w),d=zy(o,l,d,g,b,w),g=$y(),o!==null&&!lr?(l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~w,Ii(o,l,w)):(Ct&&g&&Sy(l),l.flags|=1,Hn(o,l,d,w),l.child)}function JE(o,l,d,g,w){if(ar(d)){var b=!0;Rf(l)}else b=!1;if(ic(l,w),l.stateNode===null)Yf(o,l),UE(l,d,g),Yy(l,d,g,w),g=!0;else if(o===null){var A=l.stateNode,B=l.memoizedProps;A.props=B;var H=A.context,ee=d.contextType;typeof ee=="object"&&ee!==null?ee=$r(ee):(ee=ar(d)?Ta:Rn.current,ee=Zl(l,ee));var de=d.getDerivedStateFromProps,he=typeof de=="function"||typeof A.getSnapshotBeforeUpdate=="function";he||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(B!==g||H!==ee)&&BE(l,A,g,ee),mo=!1;var ce=l.memoizedState;A.state=ce,Uf(l,g,A,w),H=l.memoizedState,B!==g||ce!==H||or.current||mo?(typeof de=="function"&&(Gy(l,d,de,g),H=l.memoizedState),(B=mo||FE(l,d,B,g,ce,H,ee))?(he||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=H),A.props=g,A.state=H,A.context=ee,g=B):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{A=l.stateNode,pE(o,l),B=l.memoizedProps,ee=l.type===l.elementType?B:fs(l.type,B),A.props=ee,he=l.pendingProps,ce=A.context,H=d.contextType,typeof H=="object"&&H!==null?H=$r(H):(H=ar(d)?Ta:Rn.current,H=Zl(l,H));var _e=d.getDerivedStateFromProps;(de=typeof _e=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(B!==he||ce!==H)&&BE(l,A,g,H),mo=!1,ce=l.memoizedState,A.state=ce,Uf(l,g,A,w);var Te=l.memoizedState;B!==he||ce!==Te||or.current||mo?(typeof _e=="function"&&(Gy(l,d,_e,g),Te=l.memoizedState),(ee=mo||FE(l,d,ee,g,ce,Te,H)||!1)?(de||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,Te,H),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,Te,H)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Te),A.props=g,A.state=Te,A.context=H,g=ee):(typeof A.componentDidUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&ce===o.memoizedState||(l.flags|=1024),g=!1)}return Zy(o,l,d,g,b,w)}function Zy(o,l,d,g,w,b){XE(o,l);var A=(l.flags&128)!==0;if(!g&&!A)return w&&rE(l,d,!1),Ii(o,l,b);g=l.stateNode,YO.current=l;var B=A&&typeof d.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,o!==null&&A?(l.child=rc(l,o.child,null,b),l.child=rc(l,null,B,b)):Hn(o,l,B,b),l.memoizedState=g.state,w&&rE(l,d,!0),l.child}function ZE(o){var l=o.stateNode;l.pendingContext?tE(o,l.pendingContext,l.pendingContext!==l.context):l.context&&tE(o,l.context,!1),Vy(o,l.containerInfo)}function eT(o,l,d,g,w){return nc(),Py(w),l.flags|=256,Hn(o,l,d,g),l.child}var ev={dehydrated:null,treeContext:null,retryLane:0};function tv(o){return{baseLanes:o,cachePool:null,transitions:null}}function tT(o,l,d){var g=l.pendingProps,w=Ot.current,b=!1,A=(l.flags&128)!==0,B;if((B=A)||(B=o!==null&&o.memoizedState===null?!1:(w&2)!==0),B?(b=!0,l.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),yt(Ot,w&1),o===null)return Cy(l),o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((l.mode&1)===0?l.lanes=1:o.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(A=g.children,o=g.fallback,b?(g=l.mode,b=l.child,A={mode:"hidden",children:A},(g&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=A):b=ap(A,g,0,null),o=Ma(o,g,d,null),b.return=l,o.return=l,b.sibling=o,l.child=b,l.child.memoizedState=tv(d),l.memoizedState=ev,o):nv(l,A));if(w=o.memoizedState,w!==null&&(B=w.dehydrated,B!==null))return QO(o,l,A,g,B,w,d);if(b){b=g.fallback,A=l.mode,w=o.child,B=w.sibling;var H={mode:"hidden",children:g.children};return(A&1)===0&&l.child!==w?(g=l.child,g.childLanes=0,g.pendingProps=H,l.deletions=null):(g=bo(w,H),g.subtreeFlags=w.subtreeFlags&14680064),B!==null?b=bo(B,b):(b=Ma(b,A,d,null),b.flags|=2),b.return=l,g.return=l,g.sibling=b,l.child=g,g=b,b=l.child,A=o.child.memoizedState,A=A===null?tv(d):{baseLanes:A.baseLanes|d,cachePool:null,transitions:A.transitions},b.memoizedState=A,b.childLanes=o.childLanes&~d,l.memoizedState=ev,g}return b=o.child,o=b.sibling,g=bo(b,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=d),g.return=l,g.sibling=null,o!==null&&(d=l.deletions,d===null?(l.deletions=[o],l.flags|=16):d.push(o)),l.child=g,l.memoizedState=null,g}function nv(o,l){return l=ap({mode:"visible",children:l},o.mode,0,null),l.return=o,o.child=l}function Gf(o,l,d,g){return g!==null&&Py(g),rc(l,o.child,null,d),o=nv(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function QO(o,l,d,g,w,b,A){if(d)return l.flags&256?(l.flags&=-257,g=Qy(Error(n(422))),Gf(o,l,A,g)):l.memoizedState!==null?(l.child=o.child,l.flags|=128,null):(b=g.fallback,w=l.mode,g=ap({mode:"visible",children:g.children},w,0,null),b=Ma(b,w,A,null),b.flags|=2,g.return=l,b.return=l,g.sibling=b,l.child=g,(l.mode&1)!==0&&rc(l,o.child,null,A),l.child.memoizedState=tv(A),l.memoizedState=ev,b);if((l.mode&1)===0)return Gf(o,l,A,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var B=g.dgst;return g=B,b=Error(n(419)),g=Qy(b,g,void 0),Gf(o,l,A,g)}if(B=(A&o.childLanes)!==0,lr||B){if(g=wn,g!==null){switch(A&-A){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|A))!==0?0:w,w!==0&&w!==b.retryLane&&(b.retryLane=w,Ti(o,w),gs(g,o,w,-1))}return vv(),g=Qy(Error(n(421))),Gf(o,l,A,g)}return w.data==="$?"?(l.flags|=128,l.child=o.child,l=cV.bind(null,o),w._reactRetry=l,null):(o=b.treeContext,Er=uo(w.nextSibling),br=l,Ct=!0,hs=null,o!==null&&(Br[zr++]=bi,Br[zr++]=Ei,Br[zr++]=Sa,bi=o.id,Ei=o.overflow,Sa=l),l=nv(l,g.children),l.flags|=4096,l)}function nT(o,l,d){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),Dy(o.return,l,d)}function rv(o,l,d,g,w){var b=o.memoizedState;b===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:w}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=d,b.tailMode=w)}function rT(o,l,d){var g=l.pendingProps,w=g.revealOrder,b=g.tail;if(Hn(o,l,g.children,d),g=Ot.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&nT(o,d,l);else if(o.tag===19)nT(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(yt(Ot,g),(l.mode&1)===0)l.memoizedState=null;else switch(w){case"forwards":for(d=l.child,w=null;d!==null;)o=d.alternate,o!==null&&Bf(o)===null&&(w=d),d=d.sibling;d=w,d===null?(w=l.child,l.child=null):(w=d.sibling,d.sibling=null),rv(l,!1,w,d,b);break;case"backwards":for(d=null,w=l.child,l.child=null;w!==null;){if(o=w.alternate,o!==null&&Bf(o)===null){l.child=w;break}o=w.sibling,w.sibling=d,d=w,w=o}rv(l,!0,d,null,b);break;case"together":rv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Yf(o,l){(l.mode&1)===0&&o!==null&&(o.alternate=null,l.alternate=null,l.flags|=2)}function Ii(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),Aa|=l.lanes,(d&l.childLanes)===0)return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,d=bo(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=bo(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function XO(o,l,d){switch(l.tag){case 3:ZE(l),nc();break;case 5:yE(l);break;case 1:ar(l.type)&&Rf(l);break;case 4:Vy(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,w=l.memoizedProps.value;yt(Lf,g._currentValue),g._currentValue=w;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(yt(Ot,Ot.current&1),l.flags|=128,null):(d&l.child.childLanes)!==0?tT(o,l,d):(yt(Ot,Ot.current&1),o=Ii(o,l,d),o!==null?o.sibling:null);yt(Ot,Ot.current&1);break;case 19:if(g=(d&l.childLanes)!==0,(o.flags&128)!==0){if(g)return rT(o,l,d);l.flags|=128}if(w=l.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),yt(Ot,Ot.current),g)break;return null;case 22:case 23:return l.lanes=0,QE(o,l,d)}return Ii(o,l,d)}var sT,sv,iT,oT;sT=function(o,l){for(var d=l.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},sv=function(){},iT=function(o,l,d,g){var w=o.memoizedProps;if(w!==g){o=l.stateNode,Ca(Vs.current);var b=null;switch(d){case"input":w=Ut(o,w),g=Ut(o,g),b=[];break;case"select":w=le({},w,{value:void 0}),g=le({},g,{value:void 0}),b=[];break;case"textarea":w=ln(o,w),g=ln(o,g),b=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Cf)}Ji(d,g);var A;d=null;for(ee in w)if(!g.hasOwnProperty(ee)&&w.hasOwnProperty(ee)&&w[ee]!=null)if(ee==="style"){var B=w[ee];for(A in B)B.hasOwnProperty(A)&&(d||(d={}),d[A]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(s.hasOwnProperty(ee)?b||(b=[]):(b=b||[]).push(ee,null));for(ee in g){var H=g[ee];if(B=w!=null?w[ee]:void 0,g.hasOwnProperty(ee)&&H!==B&&(H!=null||B!=null))if(ee==="style")if(B){for(A in B)!B.hasOwnProperty(A)||H&&H.hasOwnProperty(A)||(d||(d={}),d[A]="");for(A in H)H.hasOwnProperty(A)&&B[A]!==H[A]&&(d||(d={}),d[A]=H[A])}else d||(b||(b=[]),b.push(ee,d)),d=H;else ee==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,B=B?B.__html:void 0,H!=null&&B!==H&&(b=b||[]).push(ee,H)):ee==="children"?typeof H!="string"&&typeof H!="number"||(b=b||[]).push(ee,""+H):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(s.hasOwnProperty(ee)?(H!=null&&ee==="onScroll"&&wt("scroll",o),b||B===H||(b=[])):(b=b||[]).push(ee,H))}d&&(b=b||[]).push("style",d);var ee=b;(l.updateQueue=ee)&&(l.flags|=4)}},oT=function(o,l,d,g){d!==g&&(l.flags|=4)};function od(o,l){if(!Ct)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Dn(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,g=0;if(l)for(var w=o.child;w!==null;)d|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)d|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=d,l}function JO(o,l,d){var g=l.pendingProps;switch(Iy(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dn(l),null;case 1:return ar(l.type)&&Af(),Dn(l),null;case 3:return g=l.stateNode,oc(),_t(or),_t(Rn),Fy(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(Of(l)?l.flags|=4:o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,hs!==null&&(mv(hs),hs=null))),sv(o,l),Dn(l),null;case 5:Ly(l);var w=Ca(td.current);if(d=l.type,o!==null&&l.stateNode!=null)iT(o,l,d,g,w),o.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Dn(l),null}if(o=Ca(Vs.current),Of(l)){g=l.stateNode,d=l.type;var b=l.memoizedProps;switch(g[Os]=l,g[Qu]=b,o=(l.mode&1)!==0,d){case"dialog":wt("cancel",g),wt("close",g);break;case"iframe":case"object":case"embed":wt("load",g);break;case"video":case"audio":for(w=0;w<Ku.length;w++)wt(Ku[w],g);break;case"source":wt("error",g);break;case"img":case"image":case"link":wt("error",g),wt("load",g);break;case"details":wt("toggle",g);break;case"input":Jn(g,b),wt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},wt("invalid",g);break;case"textarea":gr(g,b),wt("invalid",g)}Ji(d,b),w=null;for(var A in b)if(b.hasOwnProperty(A)){var B=b[A];A==="children"?typeof B=="string"?g.textContent!==B&&(b.suppressHydrationWarning!==!0&&kf(g.textContent,B,o),w=["children",B]):typeof B=="number"&&g.textContent!==""+B&&(b.suppressHydrationWarning!==!0&&kf(g.textContent,B,o),w=["children",""+B]):s.hasOwnProperty(A)&&B!=null&&A==="onScroll"&&wt("scroll",g)}switch(d){case"input":$e(g),hi(g,b,!0);break;case"textarea":$e(g),ua(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=Cf)}g=w,l.updateQueue=g,g!==null&&(l.flags|=4)}else{A=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Tt(d)),o==="http://www.w3.org/1999/xhtml"?d==="script"?(o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=A.createElement(d,{is:g.is}):(o=A.createElement(d),d==="select"&&(A=o,g.multiple?A.multiple=!0:g.size&&(A.size=g.size))):o=A.createElementNS(o,d),o[Os]=l,o[Qu]=g,sT(o,l,!1,!1),l.stateNode=o;e:{switch(A=fa(d,g),d){case"dialog":wt("cancel",o),wt("close",o),w=g;break;case"iframe":case"object":case"embed":wt("load",o),w=g;break;case"video":case"audio":for(w=0;w<Ku.length;w++)wt(Ku[w],o);w=g;break;case"source":wt("error",o),w=g;break;case"img":case"image":case"link":wt("error",o),wt("load",o),w=g;break;case"details":wt("toggle",o),w=g;break;case"input":Jn(o,g),w=Ut(o,g),wt("invalid",o);break;case"option":w=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},w=le({},g,{value:void 0}),wt("invalid",o);break;case"textarea":gr(o,g),w=ln(o,g),wt("invalid",o);break;default:w=g}Ji(d,w),B=w;for(b in B)if(B.hasOwnProperty(b)){var H=B[b];b==="style"?ha(o,H):b==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&fi(o,H)):b==="children"?typeof H=="string"?(d!=="textarea"||H!=="")&&Bn(o,H):typeof H=="number"&&Bn(o,""+H):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?H!=null&&b==="onScroll"&&wt("scroll",o):H!=null&&R(o,b,H,A))}switch(d){case"input":$e(o),hi(o,g,!1);break;case"textarea":$e(o),ua(o);break;case"option":g.value!=null&&o.setAttribute("value",""+be(g.value));break;case"select":o.multiple=!!g.multiple,b=g.value,b!=null?ts(o,!!g.multiple,b,!1):g.defaultValue!=null&&ts(o,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=Cf)}switch(d){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return Dn(l),null;case 6:if(o&&l.stateNode!=null)oT(o,l,o.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(d=Ca(td.current),Ca(Vs.current),Of(l)){if(g=l.stateNode,d=l.memoizedProps,g[Os]=l,(b=g.nodeValue!==d)&&(o=br,o!==null))switch(o.tag){case 3:kf(g.nodeValue,d,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&kf(g.nodeValue,d,(o.mode&1)!==0)}b&&(l.flags|=4)}else g=(d.nodeType===9?d:d.ownerDocument).createTextNode(g),g[Os]=l,l.stateNode=g}return Dn(l),null;case 13:if(_t(Ot),g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ct&&Er!==null&&(l.mode&1)!==0&&(l.flags&128)===0)cE(),nc(),l.flags|=98560,b=!1;else if(b=Of(l),g!==null&&g.dehydrated!==null){if(o===null){if(!b)throw Error(n(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Os]=l}else nc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Dn(l),b=!1}else hs!==null&&(mv(hs),hs=null),b=!0;if(!b)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=d,l):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(o===null||(Ot.current&1)!==0?fn===0&&(fn=3):vv())),l.updateQueue!==null&&(l.flags|=4),Dn(l),null);case 4:return oc(),sv(o,l),o===null&&Gu(l.stateNode.containerInfo),Dn(l),null;case 10:return Ny(l.type._context),Dn(l),null;case 17:return ar(l.type)&&Af(),Dn(l),null;case 19:if(_t(Ot),b=l.memoizedState,b===null)return Dn(l),null;if(g=(l.flags&128)!==0,A=b.rendering,A===null)if(g)od(b,!1);else{if(fn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(A=Bf(o),A!==null){for(l.flags|=128,od(b,!1),g=A.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=d,d=l.child;d!==null;)b=d,o=g,b.flags&=14680066,A=b.alternate,A===null?(b.childLanes=0,b.lanes=o,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=A.childLanes,b.lanes=A.lanes,b.child=A.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=A.memoizedProps,b.memoizedState=A.memoizedState,b.updateQueue=A.updateQueue,b.type=A.type,o=A.dependencies,b.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),d=d.sibling;return yt(Ot,Ot.current&1|2),l.child}o=o.sibling}b.tail!==null&&gt()>uc&&(l.flags|=128,g=!0,od(b,!1),l.lanes=4194304)}else{if(!g)if(o=Bf(A),o!==null){if(l.flags|=128,g=!0,d=o.updateQueue,d!==null&&(l.updateQueue=d,l.flags|=4),od(b,!0),b.tail===null&&b.tailMode==="hidden"&&!A.alternate&&!Ct)return Dn(l),null}else 2*gt()-b.renderingStartTime>uc&&d!==1073741824&&(l.flags|=128,g=!0,od(b,!1),l.lanes=4194304);b.isBackwards?(A.sibling=l.child,l.child=A):(d=b.last,d!==null?d.sibling=A:l.child=A,b.last=A)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=gt(),l.sibling=null,d=Ot.current,yt(Ot,g?d&1|2:d&1),l):(Dn(l),null);case 22:case 23:return yv(),g=l.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(Tr&1073741824)!==0&&(Dn(l),l.subtreeFlags&6&&(l.flags|=8192)):Dn(l),null;case 24:return null;case 25:return null}throw Error(n(156,l.tag))}function ZO(o,l){switch(Iy(l),l.tag){case 1:return ar(l.type)&&Af(),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return oc(),_t(or),_t(Rn),Fy(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 5:return Ly(l),null;case 13:if(_t(Ot),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));nc()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return _t(Ot),null;case 4:return oc(),null;case 10:return Ny(l.type._context),null;case 22:case 23:return yv(),null;case 24:return null;default:return null}}var Qf=!1,Mn=!1,eV=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function lc(o,l){var d=o.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(g){Bt(o,l,g)}else d.current=null}function iv(o,l,d){try{d()}catch(g){Bt(o,l,g)}}var aT=!1;function tV(o,l){if(yy=ao,o=Fb(),cy(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var w=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var A=0,B=-1,H=-1,ee=0,de=0,he=o,ce=null;t:for(;;){for(var _e;he!==d||w!==0&&he.nodeType!==3||(B=A+w),he!==b||g!==0&&he.nodeType!==3||(H=A+g),he.nodeType===3&&(A+=he.nodeValue.length),(_e=he.firstChild)!==null;)ce=he,he=_e;for(;;){if(he===o)break t;if(ce===d&&++ee===w&&(B=A),ce===b&&++de===g&&(H=A),(_e=he.nextSibling)!==null)break;he=ce,ce=he.parentNode}he=_e}d=B===-1||H===-1?null:{start:B,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(vy={focusedElem:o,selectionRange:d},ao=!1,Ee=l;Ee!==null;)if(l=Ee,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Ee=o;else for(;Ee!==null;){l=Ee;try{var Te=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Ce=Te.memoizedProps,Gt=Te.memoizedState,Q=l.stateNode,q=Q.getSnapshotBeforeUpdate(l.elementType===l.type?Ce:fs(l.type,Ce),Gt);Q.__reactInternalSnapshotBeforeUpdate=q}break;case 3:var J=l.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(pe){Bt(l,l.return,pe)}if(o=l.sibling,o!==null){o.return=l.return,Ee=o;break}Ee=l.return}return Te=aT,aT=!1,Te}function ad(o,l,d){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&o)===o){var b=w.destroy;w.destroy=void 0,b!==void 0&&iv(l,d,b)}w=w.next}while(w!==g)}}function Xf(o,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&o)===o){var g=d.create;d.destroy=g()}d=d.next}while(d!==l)}}function ov(o){var l=o.ref;if(l!==null){var d=o.stateNode;switch(o.tag){case 5:o=d;break;default:o=d}typeof l=="function"?l(o):l.current=o}}function lT(o){var l=o.alternate;l!==null&&(o.alternate=null,lT(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&(delete l[Os],delete l[Qu],delete l[by],delete l[LO],delete l[jO])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function cT(o){return o.tag===5||o.tag===3||o.tag===4}function uT(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||cT(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function av(o,l,d){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?d.nodeType===8?d.parentNode.insertBefore(o,l):d.insertBefore(o,l):(d.nodeType===8?(l=d.parentNode,l.insertBefore(o,d)):(l=d,l.appendChild(o)),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Cf));else if(g!==4&&(o=o.child,o!==null))for(av(o,l,d),o=o.sibling;o!==null;)av(o,l,d),o=o.sibling}function lv(o,l,d){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(lv(o,l,d),o=o.sibling;o!==null;)lv(o,l,d),o=o.sibling}var Sn=null,ps=!1;function yo(o,l,d){for(d=d.child;d!==null;)dT(o,l,d),d=d.sibling}function dT(o,l,d){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(ga,d)}catch{}switch(d.tag){case 5:Mn||lc(d,l);case 6:var g=Sn,w=ps;Sn=null,yo(o,l,d),Sn=g,ps=w,Sn!==null&&(ps?(o=Sn,d=d.stateNode,o.nodeType===8?o.parentNode.removeChild(d):o.removeChild(d)):Sn.removeChild(d.stateNode));break;case 18:Sn!==null&&(ps?(o=Sn,d=d.stateNode,o.nodeType===8?xy(o.parentNode,d):o.nodeType===1&&xy(o,d),cs(o)):xy(Sn,d.stateNode));break;case 4:g=Sn,w=ps,Sn=d.stateNode.containerInfo,ps=!0,yo(o,l,d),Sn=g,ps=w;break;case 0:case 11:case 14:case 15:if(!Mn&&(g=d.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var b=w,A=b.destroy;b=b.tag,A!==void 0&&((b&2)!==0||(b&4)!==0)&&iv(d,l,A),w=w.next}while(w!==g)}yo(o,l,d);break;case 1:if(!Mn&&(lc(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=d.memoizedProps,g.state=d.memoizedState,g.componentWillUnmount()}catch(B){Bt(d,l,B)}yo(o,l,d);break;case 21:yo(o,l,d);break;case 22:d.mode&1?(Mn=(g=Mn)||d.memoizedState!==null,yo(o,l,d),Mn=g):yo(o,l,d);break;default:yo(o,l,d)}}function hT(o){var l=o.updateQueue;if(l!==null){o.updateQueue=null;var d=o.stateNode;d===null&&(d=o.stateNode=new eV),l.forEach(function(g){var w=uV.bind(null,o,g);d.has(g)||(d.add(g),g.then(w,w))})}}function ms(o,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var w=d[g];try{var b=o,A=l,B=A;e:for(;B!==null;){switch(B.tag){case 5:Sn=B.stateNode,ps=!1;break e;case 3:Sn=B.stateNode.containerInfo,ps=!0;break e;case 4:Sn=B.stateNode.containerInfo,ps=!0;break e}B=B.return}if(Sn===null)throw Error(n(160));dT(b,A,w),Sn=null,ps=!1;var H=w.alternate;H!==null&&(H.return=null),w.return=null}catch(ee){Bt(w,l,ee)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)fT(l,o),l=l.sibling}function fT(o,l){var d=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ms(l,o),js(o),g&4){try{ad(3,o,o.return),Xf(3,o)}catch(Ce){Bt(o,o.return,Ce)}try{ad(5,o,o.return)}catch(Ce){Bt(o,o.return,Ce)}}break;case 1:ms(l,o),js(o),g&512&&d!==null&&lc(d,d.return);break;case 5:if(ms(l,o),js(o),g&512&&d!==null&&lc(d,d.return),o.flags&32){var w=o.stateNode;try{Bn(w,"")}catch(Ce){Bt(o,o.return,Ce)}}if(g&4&&(w=o.stateNode,w!=null)){var b=o.memoizedProps,A=d!==null?d.memoizedProps:b,B=o.type,H=o.updateQueue;if(o.updateQueue=null,H!==null)try{B==="input"&&b.type==="radio"&&b.name!=null&&Zn(w,b),fa(B,A);var ee=fa(B,b);for(A=0;A<H.length;A+=2){var de=H[A],he=H[A+1];de==="style"?ha(w,he):de==="dangerouslySetInnerHTML"?fi(w,he):de==="children"?Bn(w,he):R(w,de,he,ee)}switch(B){case"input":bn(w,b);break;case"textarea":Qi(w,b);break;case"select":var ce=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!b.multiple;var _e=b.value;_e!=null?ts(w,!!b.multiple,_e,!1):ce!==!!b.multiple&&(b.defaultValue!=null?ts(w,!!b.multiple,b.defaultValue,!0):ts(w,!!b.multiple,b.multiple?[]:"",!1))}w[Qu]=b}catch(Ce){Bt(o,o.return,Ce)}}break;case 6:if(ms(l,o),js(o),g&4){if(o.stateNode===null)throw Error(n(162));w=o.stateNode,b=o.memoizedProps;try{w.nodeValue=b}catch(Ce){Bt(o,o.return,Ce)}}break;case 3:if(ms(l,o),js(o),g&4&&d!==null&&d.memoizedState.isDehydrated)try{cs(l.containerInfo)}catch(Ce){Bt(o,o.return,Ce)}break;case 4:ms(l,o),js(o);break;case 13:ms(l,o),js(o),w=o.child,w.flags&8192&&(b=w.memoizedState!==null,w.stateNode.isHidden=b,!b||w.alternate!==null&&w.alternate.memoizedState!==null||(dv=gt())),g&4&&hT(o);break;case 22:if(de=d!==null&&d.memoizedState!==null,o.mode&1?(Mn=(ee=Mn)||de,ms(l,o),Mn=ee):ms(l,o),js(o),g&8192){if(ee=o.memoizedState!==null,(o.stateNode.isHidden=ee)&&!de&&(o.mode&1)!==0)for(Ee=o,de=o.child;de!==null;){for(he=Ee=de;Ee!==null;){switch(ce=Ee,_e=ce.child,ce.tag){case 0:case 11:case 14:case 15:ad(4,ce,ce.return);break;case 1:lc(ce,ce.return);var Te=ce.stateNode;if(typeof Te.componentWillUnmount=="function"){g=ce,d=ce.return;try{l=g,Te.props=l.memoizedProps,Te.state=l.memoizedState,Te.componentWillUnmount()}catch(Ce){Bt(g,d,Ce)}}break;case 5:lc(ce,ce.return);break;case 22:if(ce.memoizedState!==null){gT(he);continue}}_e!==null?(_e.return=ce,Ee=_e):gT(he)}de=de.sibling}e:for(de=null,he=o;;){if(he.tag===5){if(de===null){de=he;try{w=he.stateNode,ee?(b=w.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(B=he.stateNode,H=he.memoizedProps.style,A=H!=null&&H.hasOwnProperty("display")?H.display:null,B.style.display=da("display",A))}catch(Ce){Bt(o,o.return,Ce)}}}else if(he.tag===6){if(de===null)try{he.stateNode.nodeValue=ee?"":he.memoizedProps}catch(Ce){Bt(o,o.return,Ce)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===o)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===o)break e;for(;he.sibling===null;){if(he.return===null||he.return===o)break e;de===he&&(de=null),he=he.return}de===he&&(de=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:ms(l,o),js(o),g&4&&hT(o);break;case 21:break;default:ms(l,o),js(o)}}function js(o){var l=o.flags;if(l&2){try{e:{for(var d=o.return;d!==null;){if(cT(d)){var g=d;break e}d=d.return}throw Error(n(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(Bn(w,""),g.flags&=-33);var b=uT(o);lv(o,b,w);break;case 3:case 4:var A=g.stateNode.containerInfo,B=uT(o);av(o,B,A);break;default:throw Error(n(161))}}catch(H){Bt(o,o.return,H)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function nV(o,l,d){Ee=o,pT(o)}function pT(o,l,d){for(var g=(o.mode&1)!==0;Ee!==null;){var w=Ee,b=w.child;if(w.tag===22&&g){var A=w.memoizedState!==null||Qf;if(!A){var B=w.alternate,H=B!==null&&B.memoizedState!==null||Mn;B=Qf;var ee=Mn;if(Qf=A,(Mn=H)&&!ee)for(Ee=w;Ee!==null;)A=Ee,H=A.child,A.tag===22&&A.memoizedState!==null?yT(w):H!==null?(H.return=A,Ee=H):yT(w);for(;b!==null;)Ee=b,pT(b),b=b.sibling;Ee=w,Qf=B,Mn=ee}mT(o)}else(w.subtreeFlags&8772)!==0&&b!==null?(b.return=w,Ee=b):mT(o)}}function mT(o){for(;Ee!==null;){var l=Ee;if((l.flags&8772)!==0){var d=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:Mn||Xf(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!Mn)if(d===null)g.componentDidMount();else{var w=l.elementType===l.type?d.memoizedProps:fs(l.type,d.memoizedProps);g.componentDidUpdate(w,d.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&gE(l,b,g);break;case 3:var A=l.updateQueue;if(A!==null){if(d=null,l.child!==null)switch(l.child.tag){case 5:d=l.child.stateNode;break;case 1:d=l.child.stateNode}gE(l,A,d)}break;case 5:var B=l.stateNode;if(d===null&&l.flags&4){d=B;var H=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&d.focus();break;case"img":H.src&&(d.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var ee=l.alternate;if(ee!==null){var de=ee.memoizedState;if(de!==null){var he=de.dehydrated;he!==null&&cs(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Mn||l.flags&512&&ov(l)}catch(ce){Bt(l,l.return,ce)}}if(l===o){Ee=null;break}if(d=l.sibling,d!==null){d.return=l.return,Ee=d;break}Ee=l.return}}function gT(o){for(;Ee!==null;){var l=Ee;if(l===o){Ee=null;break}var d=l.sibling;if(d!==null){d.return=l.return,Ee=d;break}Ee=l.return}}function yT(o){for(;Ee!==null;){var l=Ee;try{switch(l.tag){case 0:case 11:case 15:var d=l.return;try{Xf(4,l)}catch(H){Bt(l,d,H)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var w=l.return;try{g.componentDidMount()}catch(H){Bt(l,w,H)}}var b=l.return;try{ov(l)}catch(H){Bt(l,b,H)}break;case 5:var A=l.return;try{ov(l)}catch(H){Bt(l,A,H)}}}catch(H){Bt(l,l.return,H)}if(l===o){Ee=null;break}var B=l.sibling;if(B!==null){B.return=l.return,Ee=B;break}Ee=l.return}}var rV=Math.ceil,Jf=L.ReactCurrentDispatcher,cv=L.ReactCurrentOwner,Hr=L.ReactCurrentBatchConfig,rt=0,wn=null,Zt=null,In=0,Tr=0,cc=ho(0),fn=0,ld=null,Aa=0,Zf=0,uv=0,cd=null,cr=null,dv=0,uc=1/0,ki=null,ep=!1,hv=null,vo=null,tp=!1,wo=null,np=0,ud=0,fv=null,rp=-1,sp=0;function qn(){return(rt&6)!==0?gt():rp!==-1?rp:rp=gt()}function _o(o){return(o.mode&1)===0?1:(rt&2)!==0&&In!==0?In&-In:UO.transition!==null?(sp===0&&(sp=va()),sp):(o=Je,o!==0||(o=window.event,o=o===void 0?16:ju(o.type)),o)}function gs(o,l,d,g){if(50<ud)throw ud=0,fv=null,Error(n(185));ro(o,d,g),((rt&2)===0||o!==wn)&&(o===wn&&((rt&2)===0&&(Zf|=d),fn===4&&xo(o,In)),ur(o,g),d===1&&rt===0&&(l.mode&1)===0&&(uc=gt()+500,Nf&&po()))}function ur(o,l){var d=o.callbackNode;mi(o,l);var g=ya(o,o===wn?In:0);if(g===0)d!==null&&Du(d),o.callbackNode=null,o.callbackPriority=0;else if(l=g&-g,o.callbackPriority!==l){if(d!=null&&Du(d),l===1)o.tag===0?FO(wT.bind(null,o)):sE(wT.bind(null,o)),OO(function(){(rt&6)===0&&po()}),d=null;else{switch(io(g)){case 1:d=ma;break;case 4:d=eo;break;case 16:d=jr;break;case 536870912:d=rf;break;default:d=jr}d=kT(d,vT.bind(null,o))}o.callbackPriority=l,o.callbackNode=d}}function vT(o,l){if(rp=-1,sp=0,(rt&6)!==0)throw Error(n(327));var d=o.callbackNode;if(dc()&&o.callbackNode!==d)return null;var g=ya(o,o===wn?In:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||l)l=ip(o,g);else{l=g;var w=rt;rt|=2;var b=xT();(wn!==o||In!==l)&&(ki=null,uc=gt()+500,Na(o,l));do try{oV();break}catch(B){_T(o,B)}while(!0);Ry(),Jf.current=b,rt=w,Zt!==null?l=0:(wn=null,In=0,l=fn)}if(l!==0){if(l===2&&(w=wr(o),w!==0&&(g=w,l=pv(o,w))),l===1)throw d=ld,Na(o,0),xo(o,g),ur(o,gt()),d;if(l===6)xo(o,g);else{if(w=o.current.alternate,(g&30)===0&&!sV(w)&&(l=ip(o,g),l===2&&(b=wr(o),b!==0&&(g=b,l=pv(o,b))),l===1))throw d=ld,Na(o,0),xo(o,g),ur(o,gt()),d;switch(o.finishedWork=w,o.finishedLanes=g,l){case 0:case 1:throw Error(n(345));case 2:Da(o,cr,ki);break;case 3:if(xo(o,g),(g&130023424)===g&&(l=dv+500-gt(),10<l)){if(ya(o,0)!==0)break;if(w=o.suspendedLanes,(w&g)!==g){qn(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=_y(Da.bind(null,o,cr,ki),l);break}Da(o,cr,ki);break;case 4:if(xo(o,g),(g&4194240)===g)break;for(l=o.eventTimes,w=-1;0<g;){var A=31-$n(g);b=1<<A,A=l[A],A>w&&(w=A),g&=~b}if(g=w,g=gt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*rV(g/1960))-g,10<g){o.timeoutHandle=_y(Da.bind(null,o,cr,ki),g);break}Da(o,cr,ki);break;case 5:Da(o,cr,ki);break;default:throw Error(n(329))}}}return ur(o,gt()),o.callbackNode===d?vT.bind(null,o):null}function pv(o,l){var d=cd;return o.current.memoizedState.isDehydrated&&(Na(o,l).flags|=256),o=ip(o,l),o!==2&&(l=cr,cr=d,l!==null&&mv(l)),o}function mv(o){cr===null?cr=o:cr.push.apply(cr,o)}function sV(o){for(var l=o;;){if(l.flags&16384){var d=l.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var g=0;g<d.length;g++){var w=d[g],b=w.getSnapshot;w=w.value;try{if(!ds(b(),w))return!1}catch{return!1}}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function xo(o,l){for(l&=~uv,l&=~Zf,o.suspendedLanes|=l,o.pingedLanes&=~l,o=o.expirationTimes;0<l;){var d=31-$n(l),g=1<<d;o[d]=-1,l&=~g}}function wT(o){if((rt&6)!==0)throw Error(n(327));dc();var l=ya(o,0);if((l&1)===0)return ur(o,gt()),null;var d=ip(o,l);if(o.tag!==0&&d===2){var g=wr(o);g!==0&&(l=g,d=pv(o,g))}if(d===1)throw d=ld,Na(o,0),xo(o,l),ur(o,gt()),d;if(d===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=l,Da(o,cr,ki),ur(o,gt()),null}function gv(o,l){var d=rt;rt|=1;try{return o(l)}finally{rt=d,rt===0&&(uc=gt()+500,Nf&&po())}}function Ra(o){wo!==null&&wo.tag===0&&(rt&6)===0&&dc();var l=rt;rt|=1;var d=Hr.transition,g=Je;try{if(Hr.transition=null,Je=1,o)return o()}finally{Je=g,Hr.transition=d,rt=l,(rt&6)===0&&po()}}function yv(){Tr=cc.current,_t(cc)}function Na(o,l){o.finishedWork=null,o.finishedLanes=0;var d=o.timeoutHandle;if(d!==-1&&(o.timeoutHandle=-1,MO(d)),Zt!==null)for(d=Zt.return;d!==null;){var g=d;switch(Iy(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Af();break;case 3:oc(),_t(or),_t(Rn),Fy();break;case 5:Ly(g);break;case 4:oc();break;case 13:_t(Ot);break;case 19:_t(Ot);break;case 10:Ny(g.type._context);break;case 22:case 23:yv()}d=d.return}if(wn=o,Zt=o=bo(o.current,null),In=Tr=l,fn=0,ld=null,uv=Zf=Aa=0,cr=cd=null,ka!==null){for(l=0;l<ka.length;l++)if(d=ka[l],g=d.interleaved,g!==null){d.interleaved=null;var w=g.next,b=d.pending;if(b!==null){var A=b.next;b.next=w,g.next=A}d.pending=g}ka=null}return o}function _T(o,l){do{var d=Zt;try{if(Ry(),zf.current=qf,$f){for(var g=Vt.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}$f=!1}if(Pa=0,vn=hn=Vt=null,nd=!1,rd=0,cv.current=null,d===null||d.return===null){fn=1,ld=l,Zt=null;break}e:{var b=o,A=d.return,B=d,H=l;if(l=In,B.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ee=H,de=B,he=de.tag;if((de.mode&1)===0&&(he===0||he===11||he===15)){var ce=de.alternate;ce?(de.updateQueue=ce.updateQueue,de.memoizedState=ce.memoizedState,de.lanes=ce.lanes):(de.updateQueue=null,de.memoizedState=null)}var _e=HE(A);if(_e!==null){_e.flags&=-257,qE(_e,A,B,b,l),_e.mode&1&&WE(b,ee,l),l=_e,H=ee;var Te=l.updateQueue;if(Te===null){var Ce=new Set;Ce.add(H),l.updateQueue=Ce}else Te.add(H);break e}else{if((l&1)===0){WE(b,ee,l),vv();break e}H=Error(n(426))}}else if(Ct&&B.mode&1){var Gt=HE(A);if(Gt!==null){(Gt.flags&65536)===0&&(Gt.flags|=256),qE(Gt,A,B,b,l),Py(ac(H,B));break e}}b=H=ac(H,B),fn!==4&&(fn=2),cd===null?cd=[b]:cd.push(b),b=A;do{switch(b.tag){case 3:b.flags|=65536,l&=-l,b.lanes|=l;var Q=zE(b,H,l);mE(b,Q);break e;case 1:B=H;var q=b.type,J=b.stateNode;if((b.flags&128)===0&&(typeof q.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(vo===null||!vo.has(J)))){b.flags|=65536,l&=-l,b.lanes|=l;var pe=$E(b,B,l);mE(b,pe);break e}}b=b.return}while(b!==null)}ET(d)}catch(Pe){l=Pe,Zt===d&&d!==null&&(Zt=d=d.return);continue}break}while(!0)}function xT(){var o=Jf.current;return Jf.current=qf,o===null?qf:o}function vv(){(fn===0||fn===3||fn===2)&&(fn=4),wn===null||(Aa&268435455)===0&&(Zf&268435455)===0||xo(wn,In)}function ip(o,l){var d=rt;rt|=2;var g=xT();(wn!==o||In!==l)&&(ki=null,Na(o,l));do try{iV();break}catch(w){_T(o,w)}while(!0);if(Ry(),rt=d,Jf.current=g,Zt!==null)throw Error(n(261));return wn=null,In=0,fn}function iV(){for(;Zt!==null;)bT(Zt)}function oV(){for(;Zt!==null&&!tf();)bT(Zt)}function bT(o){var l=IT(o.alternate,o,Tr);o.memoizedProps=o.pendingProps,l===null?ET(o):Zt=l,cv.current=null}function ET(o){var l=o;do{var d=l.alternate;if(o=l.return,(l.flags&32768)===0){if(d=JO(d,l,Tr),d!==null){Zt=d;return}}else{if(d=ZO(d,l),d!==null){d.flags&=32767,Zt=d;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{fn=6,Zt=null;return}}if(l=l.sibling,l!==null){Zt=l;return}Zt=l=o}while(l!==null);fn===0&&(fn=5)}function Da(o,l,d){var g=Je,w=Hr.transition;try{Hr.transition=null,Je=1,aV(o,l,d,g)}finally{Hr.transition=w,Je=g}return null}function aV(o,l,d,g){do dc();while(wo!==null);if((rt&6)!==0)throw Error(n(327));d=o.finishedWork;var w=o.finishedLanes;if(d===null)return null;if(o.finishedWork=null,o.finishedLanes=0,d===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var b=d.lanes|d.childLanes;if(pt(o,b),o===wn&&(Zt=wn=null,In=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||tp||(tp=!0,kT(jr,function(){return dc(),null})),b=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||b){b=Hr.transition,Hr.transition=null;var A=Je;Je=1;var B=rt;rt|=4,cv.current=null,tV(o,d),fT(d,o),kO(vy),ao=!!yy,vy=yy=null,o.current=d,nV(d),ty(),rt=B,Je=A,Hr.transition=b}else o.current=d;if(tp&&(tp=!1,wo=o,np=w),b=o.pendingLanes,b===0&&(vo=null),sf(d.stateNode),ur(o,gt()),l!==null)for(g=o.onRecoverableError,d=0;d<l.length;d++)w=l[d],g(w.value,{componentStack:w.stack,digest:w.digest});if(ep)throw ep=!1,o=hv,hv=null,o;return(np&1)!==0&&o.tag!==0&&dc(),b=o.pendingLanes,(b&1)!==0?o===fv?ud++:(ud=0,fv=o):ud=0,po(),null}function dc(){if(wo!==null){var o=io(np),l=Hr.transition,d=Je;try{if(Hr.transition=null,Je=16>o?16:o,wo===null)var g=!1;else{if(o=wo,wo=null,np=0,(rt&6)!==0)throw Error(n(331));var w=rt;for(rt|=4,Ee=o.current;Ee!==null;){var b=Ee,A=b.child;if((Ee.flags&16)!==0){var B=b.deletions;if(B!==null){for(var H=0;H<B.length;H++){var ee=B[H];for(Ee=ee;Ee!==null;){var de=Ee;switch(de.tag){case 0:case 11:case 15:ad(8,de,b)}var he=de.child;if(he!==null)he.return=de,Ee=he;else for(;Ee!==null;){de=Ee;var ce=de.sibling,_e=de.return;if(lT(de),de===ee){Ee=null;break}if(ce!==null){ce.return=_e,Ee=ce;break}Ee=_e}}}var Te=b.alternate;if(Te!==null){var Ce=Te.child;if(Ce!==null){Te.child=null;do{var Gt=Ce.sibling;Ce.sibling=null,Ce=Gt}while(Ce!==null)}}Ee=b}}if((b.subtreeFlags&2064)!==0&&A!==null)A.return=b,Ee=A;else e:for(;Ee!==null;){if(b=Ee,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:ad(9,b,b.return)}var Q=b.sibling;if(Q!==null){Q.return=b.return,Ee=Q;break e}Ee=b.return}}var q=o.current;for(Ee=q;Ee!==null;){A=Ee;var J=A.child;if((A.subtreeFlags&2064)!==0&&J!==null)J.return=A,Ee=J;else e:for(A=q;Ee!==null;){if(B=Ee,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Xf(9,B)}}catch(Pe){Bt(B,B.return,Pe)}if(B===A){Ee=null;break e}var pe=B.sibling;if(pe!==null){pe.return=B.return,Ee=pe;break e}Ee=B.return}}if(rt=w,po(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(ga,o)}catch{}g=!0}return g}finally{Je=d,Hr.transition=l}}return!1}function TT(o,l,d){l=ac(d,l),l=zE(o,l,1),o=go(o,l,1),l=qn(),o!==null&&(ro(o,1,l),ur(o,l))}function Bt(o,l,d){if(o.tag===3)TT(o,o,d);else for(;l!==null;){if(l.tag===3){TT(l,o,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(vo===null||!vo.has(g))){o=ac(d,o),o=$E(l,o,1),l=go(l,o,1),o=qn(),l!==null&&(ro(l,1,o),ur(l,o));break}}l=l.return}}function lV(o,l,d){var g=o.pingCache;g!==null&&g.delete(l),l=qn(),o.pingedLanes|=o.suspendedLanes&d,wn===o&&(In&d)===d&&(fn===4||fn===3&&(In&130023424)===In&&500>gt()-dv?Na(o,0):uv|=d),ur(o,l)}function ST(o,l){l===0&&((o.mode&1)===0?l=1:(l=Ml,Ml<<=1,(Ml&130023424)===0&&(Ml=4194304)));var d=qn();o=Ti(o,l),o!==null&&(ro(o,l,d),ur(o,d))}function cV(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),ST(o,d)}function uV(o,l){var d=0;switch(o.tag){case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(d=w.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(n(314))}g!==null&&g.delete(l),ST(o,d)}var IT;IT=function(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps||or.current)lr=!0;else{if((o.lanes&d)===0&&(l.flags&128)===0)return lr=!1,XO(o,l,d);lr=(o.flags&131072)!==0}else lr=!1,Ct&&(l.flags&1048576)!==0&&iE(l,Mf,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;Yf(o,l),o=l.pendingProps;var w=Zl(l,Rn.current);ic(l,d),w=zy(null,l,g,o,w,d);var b=$y();return l.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,ar(g)?(b=!0,Rf(l)):b=!1,l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Oy(l),w.updater=Kf,l.stateNode=w,w._reactInternals=l,Yy(l,g,o,d),l=Zy(null,l,g,!0,b,d)):(l.tag=0,Ct&&b&&Sy(l),Hn(null,l,w,d),l=l.child),l;case 16:g=l.elementType;e:{switch(Yf(o,l),o=l.pendingProps,w=g._init,g=w(g._payload),l.type=g,w=l.tag=hV(g),o=fs(g,o),w){case 0:l=Jy(null,l,g,o,d);break e;case 1:l=JE(null,l,g,o,d);break e;case 11:l=KE(null,l,g,o,d);break e;case 14:l=GE(null,l,g,fs(g.type,o),d);break e}throw Error(n(306,g,""))}return l;case 0:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:fs(g,w),Jy(o,l,g,w,d);case 1:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:fs(g,w),JE(o,l,g,w,d);case 3:e:{if(ZE(l),o===null)throw Error(n(387));g=l.pendingProps,b=l.memoizedState,w=b.element,pE(o,l),Uf(l,g,null,d);var A=l.memoizedState;if(g=A.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){w=ac(Error(n(423)),l),l=eT(o,l,g,d,w);break e}else if(g!==w){w=ac(Error(n(424)),l),l=eT(o,l,g,d,w);break e}else for(Er=uo(l.stateNode.containerInfo.firstChild),br=l,Ct=!0,hs=null,d=hE(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(nc(),g===w){l=Ii(o,l,d);break e}Hn(o,l,g,d)}l=l.child}return l;case 5:return yE(l),o===null&&Cy(l),g=l.type,w=l.pendingProps,b=o!==null?o.memoizedProps:null,A=w.children,wy(g,w)?A=null:b!==null&&wy(g,b)&&(l.flags|=32),XE(o,l),Hn(o,l,A,d),l.child;case 6:return o===null&&Cy(l),null;case 13:return tT(o,l,d);case 4:return Vy(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=rc(l,null,g,d):Hn(o,l,g,d),l.child;case 11:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:fs(g,w),KE(o,l,g,w,d);case 7:return Hn(o,l,l.pendingProps,d),l.child;case 8:return Hn(o,l,l.pendingProps.children,d),l.child;case 12:return Hn(o,l,l.pendingProps.children,d),l.child;case 10:e:{if(g=l.type._context,w=l.pendingProps,b=l.memoizedProps,A=w.value,yt(Lf,g._currentValue),g._currentValue=A,b!==null)if(ds(b.value,A)){if(b.children===w.children&&!or.current){l=Ii(o,l,d);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var B=b.dependencies;if(B!==null){A=b.child;for(var H=B.firstContext;H!==null;){if(H.context===g){if(b.tag===1){H=Si(-1,d&-d),H.tag=2;var ee=b.updateQueue;if(ee!==null){ee=ee.shared;var de=ee.pending;de===null?H.next=H:(H.next=de.next,de.next=H),ee.pending=H}}b.lanes|=d,H=b.alternate,H!==null&&(H.lanes|=d),Dy(b.return,d,l),B.lanes|=d;break}H=H.next}}else if(b.tag===10)A=b.type===l.type?null:b.child;else if(b.tag===18){if(A=b.return,A===null)throw Error(n(341));A.lanes|=d,B=A.alternate,B!==null&&(B.lanes|=d),Dy(A,d,l),A=b.sibling}else A=b.child;if(A!==null)A.return=b;else for(A=b;A!==null;){if(A===l){A=null;break}if(b=A.sibling,b!==null){b.return=A.return,A=b;break}A=A.return}b=A}Hn(o,l,w.children,d),l=l.child}return l;case 9:return w=l.type,g=l.pendingProps.children,ic(l,d),w=$r(w),g=g(w),l.flags|=1,Hn(o,l,g,d),l.child;case 14:return g=l.type,w=fs(g,l.pendingProps),w=fs(g.type,w),GE(o,l,g,w,d);case 15:return YE(o,l,l.type,l.pendingProps,d);case 17:return g=l.type,w=l.pendingProps,w=l.elementType===g?w:fs(g,w),Yf(o,l),l.tag=1,ar(g)?(o=!0,Rf(l)):o=!1,ic(l,d),UE(l,g,w),Yy(l,g,w,d),Zy(null,l,g,!0,o,d);case 19:return rT(o,l,d);case 22:return QE(o,l,d)}throw Error(n(156,l.tag))};function kT(o,l){return Nl(o,l)}function dV(o,l,d,g){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(o,l,d,g){return new dV(o,l,d,g)}function wv(o){return o=o.prototype,!(!o||!o.isReactComponent)}function hV(o){if(typeof o=="function")return wv(o)?1:0;if(o!=null){if(o=o.$$typeof,o===j)return 11;if(o===oe)return 14}return 2}function bo(o,l){var d=o.alternate;return d===null?(d=qr(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&14680064,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d}function op(o,l,d,g,w,b){var A=2;if(g=o,typeof o=="function")wv(o)&&(A=1);else if(typeof o=="string")A=5;else e:switch(o){case D:return Ma(d.children,w,b,l);case P:A=8,w|=8;break;case V:return o=qr(12,d,l,w|2),o.elementType=V,o.lanes=b,o;case M:return o=qr(13,d,l,w),o.elementType=M,o.lanes=b,o;case Z:return o=qr(19,d,l,w),o.elementType=Z,o.lanes=b,o;case se:return ap(d,w,b,l);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case F:A=10;break e;case U:A=9;break e;case j:A=11;break e;case oe:A=14;break e;case re:A=16,g=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return l=qr(A,d,l,w),l.elementType=o,l.type=g,l.lanes=b,l}function Ma(o,l,d,g){return o=qr(7,o,g,l),o.lanes=d,o}function ap(o,l,d,g){return o=qr(22,o,g,l),o.elementType=se,o.lanes=d,o.stateNode={isHidden:!1},o}function _v(o,l,d){return o=qr(6,o,null,l),o.lanes=d,o}function xv(o,l,d){return l=qr(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}function fV(o,l,d,g,w){this.tag=l,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=no(0),this.expirationTimes=no(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=no(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function bv(o,l,d,g,w,b,A,B,H){return o=new fV(o,l,d,B,H),l===1?(l=1,b===!0&&(l|=8)):l=0,b=qr(3,null,null,l),o.current=b,b.stateNode=o,b.memoizedState={element:g,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oy(b),o}function pV(o,l,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:g==null?null:""+g,children:o,containerInfo:l,implementation:d}}function CT(o){if(!o)return fo;o=o._reactInternals;e:{if(ss(o)!==o||o.tag!==1)throw Error(n(170));var l=o;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(ar(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(n(171))}if(o.tag===1){var d=o.type;if(ar(d))return nE(o,d,l)}return l}function PT(o,l,d,g,w,b,A,B,H){return o=bv(d,g,!0,o,w,b,A,B,H),o.context=CT(null),d=o.current,g=qn(),w=_o(d),b=Si(g,w),b.callback=l??null,go(d,b,w),o.current.lanes=w,ro(o,w,g),ur(o,g),o}function lp(o,l,d,g){var w=l.current,b=qn(),A=_o(w);return d=CT(d),l.context===null?l.context=d:l.pendingContext=d,l=Si(b,A),l.payload={element:o},g=g===void 0?null:g,g!==null&&(l.callback=g),o=go(w,l,A),o!==null&&(gs(o,w,A,b),Ff(o,w,A)),A}function cp(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function AT(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function Ev(o,l){AT(o,l),(o=o.alternate)&&AT(o,l)}function mV(){return null}var RT=typeof reportError=="function"?reportError:function(o){console.error(o)};function Tv(o){this._internalRoot=o}up.prototype.render=Tv.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));lp(o,l,null,null)},up.prototype.unmount=Tv.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Ra(function(){lp(null,o,null,null)}),l[_i]=null}};function up(o){this._internalRoot=o}up.prototype.unstable_scheduleHydration=function(o){if(o){var l=uf();o={blockedOn:null,target:o,priority:l};for(var d=0;d<Rs.length&&l!==0&&l<Rs[d].priority;d++);Rs.splice(d,0,o),d===0&&ff(o)}};function Sv(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function dp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function NT(){}function gV(o,l,d,g,w){if(w){if(typeof g=="function"){var b=g;g=function(){var ee=cp(A);b.call(ee)}}var A=PT(l,g,o,0,null,!1,!1,"",NT);return o._reactRootContainer=A,o[_i]=A.current,Gu(o.nodeType===8?o.parentNode:o),Ra(),A}for(;w=o.lastChild;)o.removeChild(w);if(typeof g=="function"){var B=g;g=function(){var ee=cp(H);B.call(ee)}}var H=bv(o,0,!1,null,null,!1,!1,"",NT);return o._reactRootContainer=H,o[_i]=H.current,Gu(o.nodeType===8?o.parentNode:o),Ra(function(){lp(l,H,d,g)}),H}function hp(o,l,d,g,w){var b=d._reactRootContainer;if(b){var A=b;if(typeof w=="function"){var B=w;w=function(){var H=cp(A);B.call(H)}}lp(l,A,o,w)}else A=gV(d,l,o,w,g);return cp(A)}lf=function(o){switch(o.tag){case 3:var l=o.stateNode;if(l.current.memoizedState.isDehydrated){var d=to(l.pendingLanes);d!==0&&(so(l,d|1),ur(l,gt()),(rt&6)===0&&(uc=gt()+500,po()))}break;case 13:Ra(function(){var g=Ti(o,1);if(g!==null){var w=qn();gs(g,o,1,w)}}),Ev(o,1)}},Ol=function(o){if(o.tag===13){var l=Ti(o,134217728);if(l!==null){var d=qn();gs(l,o,134217728,d)}Ev(o,134217728)}},cf=function(o){if(o.tag===13){var l=_o(o),d=Ti(o,l);if(d!==null){var g=qn();gs(d,o,l,g)}Ev(o,l)}},uf=function(){return Je},df=function(o,l){var d=Je;try{return Je=o,l()}finally{Je=d}},Zi=function(o,l,d){switch(l){case"input":if(bn(o,d),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==o&&g.form===o.form){var w=Pf(g);if(!w)throw Error(n(90));We(g),bn(g,w)}}}break;case"textarea":Qi(o,d);break;case"select":l=d.value,l!=null&&ts(o,!!d.multiple,l,!1)}},It=gv,cn=Ra;var yV={usingClientEntryPoint:!1,Events:[Xu,Xl,Pf,Oe,St,gv]},dd={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vV={bundleType:dd.bundleType,version:dd.version,rendererPackageName:dd.rendererPackageName,rendererConfig:dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:L.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Nu(o),o===null?null:o.stateNode},findFiberByHostInstance:dd.findFiberByHostInstance||mV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fp.isDisabled&&fp.supportsFiber)try{ga=fp.inject(vV),vr=fp}catch{}}return dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yV,dr.createPortal=function(o,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sv(l))throw Error(n(200));return pV(o,l,null,d)},dr.createRoot=function(o,l){if(!Sv(o))throw Error(n(299));var d=!1,g="",w=RT;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),l=bv(o,1,!1,null,null,d,!1,g,w),o[_i]=l.current,Gu(o.nodeType===8?o.parentNode:o),new Tv(l)},dr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=Nu(l),o=o===null?null:o.stateNode,o},dr.flushSync=function(o){return Ra(o)},dr.hydrate=function(o,l,d){if(!dp(l))throw Error(n(200));return hp(null,o,l,!0,d)},dr.hydrateRoot=function(o,l,d){if(!Sv(o))throw Error(n(405));var g=d!=null&&d.hydratedSources||null,w=!1,b="",A=RT;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(A=d.onRecoverableError)),l=PT(l,null,o,1,d??null,w,!1,b,A),o[_i]=l.current,Gu(o),g)for(o=0;o<g.length;o++)d=g[o],w=d._getVersion,w=w(d._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[d,w]:l.mutableSourceEagerHydrationData.push(d,w);return new up(l)},dr.render=function(o,l,d){if(!dp(l))throw Error(n(200));return hp(null,o,l,!1,d)},dr.unmountComponentAtNode=function(o){if(!dp(o))throw Error(n(40));return o._reactRootContainer?(Ra(function(){hp(null,null,o,!1,function(){o._reactRootContainer=null,o[_i]=null})}),!0):!1},dr.unstable_batchedUpdates=gv,dr.unstable_renderSubtreeIntoContainer=function(o,l,d,g){if(!dp(d))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return hp(o,l,d,!1,g)},dr.version="18.3.1-next-f1338f8080-20240426",dr}var UT;function tC(){if(UT)return Cv.exports;UT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cv.exports=IV(),Cv.exports}var BT;function kV(){if(BT)return pp;BT=1;var t=tC();return pp.createRoot=t.createRoot,pp.hydrateRoot=t.hydrateRoot,pp}var CV=kV();const PV=n_(CV);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zT="popstate";function AV(t={}){function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return C0("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Xd(s)}return NV(e,n,null,t)}function Ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function si(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RV(){return Math.random().toString(36).substring(2,10)}function $T(t,e){return{usr:t.state,key:t.key,idx:e}}function C0(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?hu(e):e,state:n,key:e&&e.key||r||RV()}}function Xd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function hu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function NV(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c="POP",u=null,h=p();h==null&&(h=0,a.replaceState({...a.state,idx:h},""));function p(){return(a.state||{idx:null}).idx}function m(){c="POP";let I=p(),C=I==null?null:I-h;h=I,u&&u({action:c,location:T.location,delta:C})}function v(I,C){c="PUSH";let N=C0(T.location,I,C);h=p()+1;let R=$T(N,h),L=T.createHref(N);try{a.pushState(R,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;s.location.assign(L)}i&&u&&u({action:c,location:T.location,delta:1})}function E(I,C){c="REPLACE";let N=C0(T.location,I,C);h=p();let R=$T(N,h),L=T.createHref(N);a.replaceState(R,"",L),i&&u&&u({action:c,location:T.location,delta:0})}function S(I){return DV(I)}let T={get action(){return c},get location(){return t(s,a)},listen(I){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(zT,m),u=I,()=>{s.removeEventListener(zT,m),u=null}},createHref(I){return e(s,I)},createURL:S,encodeLocation(I){let C=S(I);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:E,go(I){return a.go(I)}};return T}function DV(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ft(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Xd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function nC(t,e,n="/"){return MV(t,e,n,!1)}function MV(t,e,n,r){let s=typeof e=="string"?hu(e):e,i=Oi(s.pathname||"/",n);if(i==null)return null;let a=rC(t);OV(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let h=qV(i);c=WV(a[u],h,r)}return c}function rC(t,e=[],n=[],r=""){let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(Ft(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let h=Di([r,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(Ft(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),rC(i.children,e,p,h)),!(i.path==null&&!i.index)&&e.push({path:h,score:zV(h,i.index),routesMeta:p})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of sC(i.path))s(i,a,u)}),e}function sC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=sC(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function OV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$V(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var VV=/^:[\w-]+$/,LV=3,jV=2,FV=1,UV=10,BV=-2,WT=t=>t==="*";function zV(t,e){let n=t.split("/"),r=n.length;return n.some(WT)&&(r+=BV),e&&(r+=jV),n.filter(s=>!WT(s)).reduce((s,i)=>s+(VV.test(i)?LV:i===""?FV:UV),r)}function $V(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function WV(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=pm({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),v=u.route;if(!m&&h&&n&&!r[r.length-1].route.index&&(m=pm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Di([i,m.pathname]),pathnameBase:QV(Di([i,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(i=Di([i,m.pathnameBase]))}return a}function pm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=HV(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((h,{paramName:p,isOptional:m},v)=>{if(p==="*"){let S=c[v]||"";a=i.slice(0,i.length-S.length).replace(/(.)\/+$/,"$1")}const E=c[v];return m&&!E?h[p]=void 0:h[p]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:a,pattern:t}}function HV(t,e=!1,n=!0){si(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function qV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return si(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Oi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function KV(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?hu(t):t;return{pathname:n?n.startsWith("/")?n:GV(n,e):e,search:XV(r),hash:JV(s)}}function GV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Rv(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function iC(t){let e=YV(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function oC(t,e,n,r=!1){let s;typeof t=="string"?s=hu(t):(s={...t},Ft(!s.pathname||!s.pathname.includes("?"),Rv("?","pathname","search",s)),Ft(!s.pathname||!s.pathname.includes("#"),Rv("#","pathname","hash",s)),Ft(!s.search||!s.search.includes("#"),Rv("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),m-=1;s.pathname=v.join("/")}c=m>=0?e[m]:"/"}let u=KV(s,c),h=a&&a!=="/"&&a.endsWith("/"),p=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Di=t=>t.join("/").replace(/\/\/+/g,"/"),QV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),XV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var aC=["POST","PUT","PATCH","DELETE"];new Set(aC);var eL=["GET",...aC];new Set(eL);var fu=x.createContext(null);fu.displayName="DataRouter";var ng=x.createContext(null);ng.displayName="DataRouterState";x.createContext(!1);var lC=x.createContext({isTransitioning:!1});lC.displayName="ViewTransition";var tL=x.createContext(new Map);tL.displayName="Fetchers";var nL=x.createContext(null);nL.displayName="Await";var li=x.createContext(null);li.displayName="Navigation";var Th=x.createContext(null);Th.displayName="Location";var Hi=x.createContext({outlet:null,matches:[],isDataRoute:!1});Hi.displayName="Route";var s_=x.createContext(null);s_.displayName="RouteError";function rL(t,{relative:e}={}){Ft(Sh(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=x.useContext(li),{hash:s,pathname:i,search:a}=Ih(t,{relative:e}),c=i;return n!=="/"&&(c=i==="/"?n:Di([n,i])),r.createHref({pathname:c,search:a,hash:s})}function Sh(){return x.useContext(Th)!=null}function qi(){return Ft(Sh(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Th).location}var cC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uC(t){x.useContext(li).static||x.useLayoutEffect(t)}function ci(){let{isDataRoute:t}=x.useContext(Hi);return t?gL():sL()}function sL(){Ft(Sh(),"useNavigate() may be used only in the context of a <Router> component.");let t=x.useContext(fu),{basename:e,navigator:n}=x.useContext(li),{matches:r}=x.useContext(Hi),{pathname:s}=qi(),i=JSON.stringify(iC(r)),a=x.useRef(!1);return uC(()=>{a.current=!0}),x.useCallback((u,h={})=>{if(si(a.current,cC),!a.current)return;if(typeof u=="number"){n.go(u);return}let p=oC(u,JSON.parse(i),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Di([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,i,s,t])}x.createContext(null);function Ih(t,{relative:e}={}){let{matches:n}=x.useContext(Hi),{pathname:r}=qi(),s=JSON.stringify(iC(n));return x.useMemo(()=>oC(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function iL(t,e){return dC(t,e)}function dC(t,e,n,r){var C;Ft(Sh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=x.useContext(li),{matches:i}=x.useContext(Hi),a=i[i.length-1],c=a?a.params:{},u=a?a.pathname:"/",h=a?a.pathnameBase:"/",p=a&&a.route;{let N=p&&p.path||"";hC(u,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let m=qi(),v;if(e){let N=typeof e=="string"?hu(e):e;Ft(h==="/"||((C=N.pathname)==null?void 0:C.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${N.pathname}" was given in the \`location\` prop.`),v=N}else v=m;let E=v.pathname||"/",S=E;if(h!=="/"){let N=h.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=nC(t,{pathname:S});si(p||T!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),si(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=uL(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Di([h,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?h:Di([h,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&I?x.createElement(Th.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},I):I}function oL(){let t=mL(),e=ZV(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=x.createElement(x.Fragment,null,x.createElement("p",null,"💿 Hey developer 👋"),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:i},"ErrorBoundary")," or"," ",x.createElement("code",{style:i},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,a)}var aL=x.createElement(oL,null),lL=class extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?x.createElement(Hi.Provider,{value:this.props.routeContext},x.createElement(s_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function cL({routeContext:t,match:e,children:n}){let r=x.useContext(fu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(Hi.Provider,{value:t},n)}function uL(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,i=n==null?void 0:n.errors;if(i!=null){let u=s.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);Ft(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<s.length;u++){let h=s[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:m}=n,v=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){a=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,h,p)=>{let m,v=!1,E=null,S=null;n&&(m=i&&h.route.id?i[h.route.id]:void 0,E=h.route.errorElement||aL,a&&(c<0&&p===0?(hC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):c===p&&(v=!0,S=h.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,p+1)),I=()=>{let C;return m?C=E:v?C=S:h.route.Component?C=x.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=u,x.createElement(cL,{match:h,routeContext:{outlet:u,matches:T,isDataRoute:n!=null},children:C})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?x.createElement(lL,{location:n.location,revalidation:n.revalidation,component:E,error:m,children:I(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):I()},null)}function i_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dL(t){let e=x.useContext(fu);return Ft(e,i_(t)),e}function hL(t){let e=x.useContext(ng);return Ft(e,i_(t)),e}function fL(t){let e=x.useContext(Hi);return Ft(e,i_(t)),e}function o_(t){let e=fL(t),n=e.matches[e.matches.length-1];return Ft(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function pL(){return o_("useRouteId")}function mL(){var r;let t=x.useContext(s_),e=hL("useRouteError"),n=o_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function gL(){let{router:t}=dL("useNavigate"),e=o_("useNavigate"),n=x.useRef(!1);return uC(()=>{n.current=!0}),x.useCallback(async(s,i={})=>{si(n.current,cC),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var HT={};function hC(t,e,n){!e&&!HT[t]&&(HT[t]=!0,si(!1,n))}x.memo(yL);function yL({routes:t,future:e,state:n}){return dC(t,void 0,n,e)}function Ao(t){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vL({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1}){Ft(!Sh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof n=="string"&&(n=hu(n));let{pathname:u="/",search:h="",hash:p="",state:m=null,key:v="default"}=n,E=x.useMemo(()=>{let S=Oi(u,a);return S==null?null:{location:{pathname:S,search:h,hash:p,state:m,key:v},navigationType:r}},[a,u,h,p,m,v,r]);return si(E!=null,`<Router basename="${a}"> is not able to match the URL "${u}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:x.createElement(li.Provider,{value:c},x.createElement(Th.Provider,{children:e,value:E}))}function wL({children:t,location:e}){return iL(P0(t),e)}function P0(t,e=[]){let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let i=[...e,s];if(r.type===x.Fragment){n.push.apply(n,P0(r.props.children,i));return}Ft(r.type===Ao,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=P0(r.props.children,i)),n.push(a)}),n}var Up="get",Bp="application/x-www-form-urlencoded";function rg(t){return t!=null&&typeof t.tagName=="string"}function _L(t){return rg(t)&&t.tagName.toLowerCase()==="button"}function xL(t){return rg(t)&&t.tagName.toLowerCase()==="form"}function bL(t){return rg(t)&&t.tagName.toLowerCase()==="input"}function EL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TL(t,e){return t.button===0&&(!e||e==="_self")&&!EL(t)}var mp=null;function SL(){if(mp===null)try{new FormData(document.createElement("form"),0),mp=!1}catch{mp=!0}return mp}var IL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nv(t){return t!=null&&!IL.has(t)?(si(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Bp}"`),null):t}function kL(t,e){let n,r,s,i,a;if(xL(t)){let c=t.getAttribute("action");r=c?Oi(c,e):null,n=t.getAttribute("method")||Up,s=Nv(t.getAttribute("enctype"))||Bp,i=new FormData(t)}else if(_L(t)||bL(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?Oi(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Up,s=Nv(t.getAttribute("formenctype"))||Nv(c.getAttribute("enctype"))||Bp,i=new FormData(c,t),!SL()){let{name:h,type:p,value:m}=t;if(p==="image"){let v=h?`${h}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else h&&i.append(h,m)}}else{if(rg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Up,r=null,s=Bp,a=t}return i&&s==="text/plain"&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function a_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function CL(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Oi(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function PL(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AL(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function RL(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let a=await PL(i,n);return a.links?a.links():[]}return[]}));return OL(r.flat(1).filter(AL).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qT(t,e,n,r,s,i){let a=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>{var p;return n[h].pathname!==u.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,h)=>a(u,h)||c(u,h)):i==="data"?e.filter((u,h)=>{var m;let p=r.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(a(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function NL(t,e,{includeHydrateFallback:n}={}){return DL(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function DL(t){return[...new Set(t)]}function ML(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function OL(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(ML(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function fC(){let t=x.useContext(fu);return a_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function VL(){let t=x.useContext(ng);return a_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var l_=x.createContext(void 0);l_.displayName="FrameworkContext";function pC(){let t=x.useContext(l_);return a_(t,"You must render this element inside a <HydratedRouter> element"),t}function LL(t,e){let n=x.useContext(l_),[r,s]=x.useState(!1),[i,a]=x.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,v=x.useRef(null);x.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let T=C=>{C.forEach(N=>{a(N.isIntersecting)})},I=new IntersectionObserver(T,{threshold:.5});return v.current&&I.observe(v.current),()=>{I.disconnect()}}},[t]),x.useEffect(()=>{if(r){let T=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(T)}}},[r]);let E=()=>{s(!0)},S=()=>{s(!1),a(!1)};return n?t!=="intent"?[i,v,{}]:[i,v,{onFocus:fd(c,E),onBlur:fd(u,S),onMouseEnter:fd(h,E),onMouseLeave:fd(p,S),onTouchStart:fd(m,E)}]:[!1,v,{}]}function fd(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jL({page:t,...e}){let{router:n}=fC(),r=x.useMemo(()=>nC(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?x.createElement(UL,{page:t,matches:r,...e}):null}function FL(t){let{manifest:e,routeModules:n}=pC(),[r,s]=x.useState([]);return x.useEffect(()=>{let i=!1;return RL(t,e,n).then(a=>{i||s(a)}),()=>{i=!0}},[t,e,n]),r}function UL({page:t,matches:e,...n}){let r=qi(),{manifest:s,routeModules:i}=pC(),{basename:a}=fC(),{loaderData:c,matches:u}=VL(),h=x.useMemo(()=>qT(t,e,u,s,r,"data"),[t,e,u,s,r]),p=x.useMemo(()=>qT(t,e,u,s,r,"assets"),[t,e,u,s,r]),m=x.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,T=!1;if(e.forEach(C=>{var R;let N=s.routes[C.route.id];!N||!N.hasLoader||(!h.some(L=>L.route.id===C.route.id)&&C.route.id in c&&((R=i[C.route.id])!=null&&R.shouldRevalidate)||N.hasClientLoader?T=!0:S.add(C.route.id))}),S.size===0)return[];let I=CL(t,a,"data");return T&&S.size>0&&I.searchParams.set("_routes",e.filter(C=>S.has(C.route.id)).map(C=>C.route.id).join(",")),[I.pathname+I.search]},[a,c,r,s,h,e,t,i]),v=x.useMemo(()=>NL(p,s),[p,s]),E=FL(p);return x.createElement(x.Fragment,null,m.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),E.map(({key:S,link:T})=>x.createElement("link",{key:S,...T})))}function BL(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mC&&(window.__reactRouterVersion="7.7.1")}catch{}function zL({basename:t,children:e,window:n}){let r=x.useRef();r.current==null&&(r.current=AV({window:n,v5Compat:!0}));let s=r.current,[i,a]=x.useState({action:s.action,location:s.location}),c=x.useCallback(u=>{x.startTransition(()=>a(u))},[a]);return x.useLayoutEffect(()=>s.listen(c),[s,c]),x.createElement(vL,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:s})}var gC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yC=x.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:a,state:c,target:u,to:h,preventScrollReset:p,viewTransition:m,...v},E){let{basename:S}=x.useContext(li),T=typeof h=="string"&&gC.test(h),I,C=!1;if(typeof h=="string"&&T&&(I=h,mC))try{let V=new URL(window.location.href),F=h.startsWith("//")?new URL(V.protocol+h):new URL(h),U=Oi(F.pathname,S);F.origin===V.origin&&U!=null?h=U+F.search+F.hash:C=!0}catch{si(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=rL(h,{relative:s}),[R,L,z]=LL(r,v),K=qL(h,{replace:a,state:c,target:u,preventScrollReset:p,relative:s,viewTransition:m});function D(V){e&&e(V),V.defaultPrevented||K(V)}let P=x.createElement("a",{...v,...z,href:I||N,onClick:C||i?e:D,ref:BL(E,L),target:u,"data-discover":!T&&n==="render"?"true":void 0});return R&&!T?x.createElement(x.Fragment,null,P,x.createElement(jL,{page:N})):P});yC.displayName="Link";var $L=x.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:a,viewTransition:c,children:u,...h},p){let m=Ih(a,{relative:h.relative}),v=qi(),E=x.useContext(ng),{navigator:S,basename:T}=x.useContext(li),I=E!=null&&XL(m)&&c===!0,C=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,N=v.pathname,R=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(N=N.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&T&&(R=Oi(R,T)||R);const L=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let z=N===C||!s&&N.startsWith(C)&&N.charAt(L)==="/",K=R!=null&&(R===C||!s&&R.startsWith(C)&&R.charAt(C.length)==="/"),D={isActive:z,isPending:K,isTransitioning:I},P=z?e:void 0,V;typeof r=="function"?V=r(D):V=[r,z?"active":null,K?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(D):i;return x.createElement(yC,{...h,"aria-current":P,className:V,ref:p,style:F,to:a,viewTransition:c},typeof u=="function"?u(D):u)});$L.displayName="NavLink";var WL=x.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:a=Up,action:c,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:m,...v},E)=>{let S=YL(),T=QL(c,{relative:h}),I=a.toLowerCase()==="get"?"get":"post",C=typeof c=="string"&&gC.test(c),N=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let L=R.nativeEvent.submitter,z=(L==null?void 0:L.getAttribute("formmethod"))||a;S(L||R.currentTarget,{fetcherKey:e,method:z,navigate:n,replace:s,state:i,relative:h,preventScrollReset:p,viewTransition:m})};return x.createElement("form",{ref:E,method:I,action:T,onSubmit:r?u:N,...v,"data-discover":!C&&t==="render"?"true":void 0})});WL.displayName="Form";function HL(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(t){let e=x.useContext(fu);return Ft(e,HL(t)),e}function qL(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:a}={}){let c=ci(),u=qi(),h=Ih(t,{relative:i});return x.useCallback(p=>{if(TL(p,e)){p.preventDefault();let m=n!==void 0?n:Xd(u)===Xd(h);c(t,{replace:m,state:r,preventScrollReset:s,relative:i,viewTransition:a})}},[u,c,h,n,r,e,t,s,i,a])}var KL=0,GL=()=>`__${String(++KL)}__`;function YL(){let{router:t}=vC("useSubmit"),{basename:e}=x.useContext(li),n=pL();return x.useCallback(async(r,s={})=>{let{action:i,method:a,encType:c,formData:u,body:h}=kL(r,e);if(s.navigate===!1){let p=s.fetcherKey||GL();await t.fetch(p,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||a,formEncType:s.encType||c,flushSync:s.flushSync})}else await t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:u,body:h,formMethod:s.method||a,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function QL(t,{relative:e}={}){let{basename:n}=x.useContext(li),r=x.useContext(Hi);Ft(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ih(t||".",{relative:e})},a=qi();if(t==null){i.search=a.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();i.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Di([n,i.pathname])),Xd(i)}function XL(t,{relative:e}={}){let n=x.useContext(lC);Ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=vC("useViewTransitionState"),s=Ih(t,{relative:e});if(!n.isTransitioning)return!1;let i=Oi(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Oi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return pm(s.pathname,a)!=null||pm(s.pathname,i)!=null}var kh=tC();const wC=n_(kh);function mt(t){return"/"+t.toLowerCase().replace(/ /g,"-")}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_C=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...c},u)=>x.createElement("svg",{ref:u,...ZL,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_C("lucide",s),...c},[...a.map(([h,p])=>x.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(t,e)=>{const n=x.forwardRef(({className:r,...s},i)=>x.createElement(ej,{ref:i,iconNode:e,className:_C(`lucide-${JL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],c_=qe("ArrowRight",tj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rj=qe("Calendar",nj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],mm=qe("Camera",sj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oj=qe("Check",ij);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],u_=qe("ChevronDown",aj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],cj=qe("ChevronLeft",lj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],xC=qe("ChevronUp",uj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],sg=qe("CircleAlert",dj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fj=qe("CircleCheckBig",hj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fa=qe("CircleCheck",pj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],d_=qe("Clock",mj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],yj=qe("EyeOff",gj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wj=qe("Eye",vj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],bC=qe("Filter",_j);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],bj=qe("Flag",xj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],EC=qe("Hash",Ej);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],ol=qe("Heart",Tj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],Ij=qe("LogOut",Sj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Cj=qe("Mail",kj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],$c=qe("MessageCircle",Pj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],Rj=qe("PartyPopper",Aj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],gm=qe("Phone",Nj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Mj=qe("QrCode",Dj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Vj=qe("RefreshCw",Oj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],jj=qe("Ruler",Lj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dv=qe("Save",Fj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Bj=qe("Send",Uj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],KT=qe("Share",zj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wj=qe("Shield",$j);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],qj=qe("Sparkles",Hj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mv=qe("SquarePen",Kj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yj=qe("Star",Gj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Xj=qe("Trash2",Qj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Zj=qe("TriangleAlert",Jj);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],t4=qe("Upload",e4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],pu=qe("User",n4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Wc=qe("Users",r4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],i4=qe("WifiOff",s4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],a4=qe("Wifi",o4);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],An=qe("X",l4),c4=()=>{};var GT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},u4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},SC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let v=(c&15)<<2|h>>6,E=h&63;u||(E=64,a||(v=64)),r.push(n[p],n[m],n[v],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):u4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||m==null)throw new d4;const v=i<<2|c>>4;if(r.push(v),h!==64){const E=c<<4&240|h>>2;if(r.push(E),m!==64){const S=h<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class d4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h4=function(t){const e=TC(t);return SC.encodeByteArray(e,!0)},ym=function(t){return h4(t).replace(/\./g,"")},IC=function(t){try{return SC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=()=>kC().__FIREBASE_DEFAULTS__,p4=()=>{if(typeof process>"u"||typeof GT>"u")return;const t=GT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IC(t[1]);return e&&JSON.parse(e)},ig=()=>{try{return c4()||f4()||p4()||m4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CC=t=>{var e,n;return(n=(e=ig())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},PC=t=>{const e=CC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},AC=()=>{var t;return(t=ig())==null?void 0:t.config},RC=t=>{var e;return(e=ig())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function h_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ym(JSON.stringify(n)),ym(JSON.stringify(a)),""].join(".")}const Md={};function y4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Md))Md[e]?t.emulator.push(e):t.prod.push(e);return t}function v4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let YT=!1;function f_(t,e){if(typeof window>"u"||typeof document>"u"||!na(window.location.host)||Md[t]===e||Md[t]||YT)return;Md[t]=e;function n(v){return`__firebase__banner__${v}`}const r="__firebase__banner",i=y4().prod.length>0;function a(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function u(v,E){v.setAttribute("width","24"),v.setAttribute("id",E),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function h(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{YT=!0,a()},v}function p(v,E){v.setAttribute("id",E),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=v4(r),E=n("text"),S=document.getElementById(E)||document.createElement("span"),T=n("learnmore"),I=document.getElementById(T)||document.createElement("a"),C=n("preprendIcon"),N=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const R=v.element;c(R),p(I,T);const L=h();u(N,C),R.append(N,S,I,L),document.body.appendChild(R)}i?(S.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function DC(){var e;const t=(e=ig())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function x4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function b4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function E4(){const t=mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function MC(){return!DC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OC(){return!DC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function VC(){try{return typeof indexedDB=="object"}catch{return!1}}function T4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="FirebaseError";class ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=S4,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ch.prototype.create)}}class Ch{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?I4(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new ui(s,c,r)}}function I4(t,e){return t.replace(k4,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k4=/\{\$([^}]+)}/g;function C4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function al(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(QT(i)&&QT(a)){if(!al(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function QT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Td(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Sd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function P4(t,e){const n=new A4(t,e);return n.subscribe.bind(n)}class A4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");R4(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ov),s.error===void 0&&(s.error=Ov),s.complete===void 0&&(s.complete=Ov);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R4(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ov(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class qo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new g4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(M4(e))try{this.getOrInitializeService({instanceIdentifier:Ua})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ua){return this.instances.has(e)}getOptions(e=Ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D4(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ua){return this.component?this.component.multipleInstances?e:Ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D4(t){return t===Ua?void 0:t}function M4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new N4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const V4={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},L4=Qe.INFO,j4={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},F4=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=j4[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class p_{constructor(e){this.name=e,this._logLevel=L4,this._logHandler=F4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const U4=(t,e)=>e.some(n=>t instanceof n);let XT,JT;function B4(){return XT||(XT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z4(){return JT||(JT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LC=new WeakMap,A0=new WeakMap,jC=new WeakMap,Vv=new WeakMap,m_=new WeakMap;function $4(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Uo(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&LC.set(n,t)}).catch(()=>{}),m_.set(e,t),e}function W4(t){if(A0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});A0.set(t,e)}let R0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return A0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Uo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function H4(t){R0=t(R0)}function q4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lv(this),e,...n);return jC.set(r,e.sort?e.sort():[e]),Uo(r)}:z4().includes(t)?function(...e){return t.apply(Lv(this),e),Uo(LC.get(this))}:function(...e){return Uo(t.apply(Lv(this),e))}}function K4(t){return typeof t=="function"?q4(t):(t instanceof IDBTransaction&&W4(t),U4(t,B4())?new Proxy(t,R0):t)}function Uo(t){if(t instanceof IDBRequest)return $4(t);if(Vv.has(t))return Vv.get(t);const e=K4(t);return e!==t&&(Vv.set(t,e),m_.set(e,t)),e}const Lv=t=>m_.get(t);function G4(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Uo(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Uo(a.result),u.oldVersion,u.newVersion,Uo(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Y4=["get","getKey","getAll","getAllKeys","count"],Q4=["put","add","delete","clear"],jv=new Map;function ZT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jv.get(e))return jv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Q4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Y4.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return jv.set(e,i),i}H4(t=>({...t,get:(e,n,r)=>ZT(e,n)||t.get(e,n,r),has:(e,n)=>!!ZT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(J4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function J4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const N0="@firebase/app",eS="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new p_("@firebase/app"),Z4="@firebase/app-compat",eF="@firebase/analytics-compat",tF="@firebase/analytics",nF="@firebase/app-check-compat",rF="@firebase/app-check",sF="@firebase/auth",iF="@firebase/auth-compat",oF="@firebase/database",aF="@firebase/data-connect",lF="@firebase/database-compat",cF="@firebase/functions",uF="@firebase/functions-compat",dF="@firebase/installations",hF="@firebase/installations-compat",fF="@firebase/messaging",pF="@firebase/messaging-compat",mF="@firebase/performance",gF="@firebase/performance-compat",yF="@firebase/remote-config",vF="@firebase/remote-config-compat",wF="@firebase/storage",_F="@firebase/storage-compat",xF="@firebase/firestore",bF="@firebase/ai",EF="@firebase/firestore-compat",TF="firebase",SF="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="[DEFAULT]",IF={[N0]:"fire-core",[Z4]:"fire-core-compat",[tF]:"fire-analytics",[eF]:"fire-analytics-compat",[rF]:"fire-app-check",[nF]:"fire-app-check-compat",[sF]:"fire-auth",[iF]:"fire-auth-compat",[oF]:"fire-rtdb",[aF]:"fire-data-connect",[lF]:"fire-rtdb-compat",[cF]:"fire-fn",[uF]:"fire-fn-compat",[dF]:"fire-iid",[hF]:"fire-iid-compat",[fF]:"fire-fcm",[pF]:"fire-fcm-compat",[mF]:"fire-perf",[gF]:"fire-perf-compat",[yF]:"fire-rc",[vF]:"fire-rc-compat",[wF]:"fire-gcs",[_F]:"fire-gcs-compat",[xF]:"fire-fst",[EF]:"fire-fst-compat",[bF]:"fire-vertex","fire-js":"fire-js",[TF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm=new Map,kF=new Map,M0=new Map;function tS(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ll(t){const e=t.name;if(M0.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;M0.set(e,t);for(const n of vm.values())tS(n,t);for(const n of kF.values())tS(n,t);return!0}function og(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bo=new Ch("app","Firebase",CF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=SF;function O0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:D0,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Bo.create("bad-app-name",{appName:String(s)});if(n||(n=AC()),!n)throw Bo.create("no-options");const i=vm.get(s);if(i){if(al(n,i.options)&&al(r,i.config))return i;throw Bo.create("duplicate-app",{appName:s})}const a=new O4(s);for(const u of M0.values())a.addComponent(u);const c=new PF(n,r,a);return vm.set(s,c),c}function g_(t=D0){const e=vm.get(t);if(!e&&t===D0&&AC())return O0();if(!e)throw Bo.create("no-app",{appName:t});return e}function Ks(t,e,n){let r=IF[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(a.join(" "));return}ll(new qo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="firebase-heartbeat-database",RF=1,Jd="firebase-heartbeat-store";let Fv=null;function FC(){return Fv||(Fv=G4(AF,RF,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jd)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bo.create("idb-open",{originalErrorMessage:t.message})})),Fv}async function NF(t){try{const n=(await FC()).transaction(Jd),r=await n.objectStore(Jd).get(UC(t));return await n.done,r}catch(e){if(e instanceof ui)Vi.warn(e.message);else{const n=Bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(n.message)}}}async function nS(t,e){try{const r=(await FC()).transaction(Jd,"readwrite");await r.objectStore(Jd).put(e,UC(t)),await r.done}catch(n){if(n instanceof ui)Vi.warn(n.message);else{const r=Bo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vi.warn(r.message)}}}function UC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=1024,MF=30;class OF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=rS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>MF){const a=jF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Vi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rS(),{heartbeatsToSend:r,unsentEntries:s}=VF(this._heartbeatsCache.heartbeats),i=ym(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Vi.warn(n),""}}}function rS(){return new Date().toISOString().substring(0,10)}function VF(t,e=DF){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),sS(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),sS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VC()?T4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function sS(t){return ym(JSON.stringify({version:2,heartbeats:t})).length}function jF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t){ll(new qo("platform-logger",e=>new X4(e),"PRIVATE")),ll(new qo("heartbeat",e=>new OF(e),"PRIVATE")),Ks(N0,eS,t),Ks(N0,eS,"esm2020"),Ks("fire-js","")}FF("");var UF="firebase",BF="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ks(UF,BF,"app");function BC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zF=BC,zC=new Ch("auth","Firebase",BC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=new p_("@firebase/auth");function $F(t,...e){wm.logLevel<=Qe.WARN&&wm.warn(`Auth (${Il}): ${t}`,...e)}function zp(t,...e){wm.logLevel<=Qe.ERROR&&wm.error(`Auth (${Il}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,...e){throw y_(t,...e)}function Gs(t,...e){return y_(t,...e)}function $C(t,e,n){const r={...zF(),[e]:n};return new Ch("auth","Firebase",r).create(e,{appName:t.name})}function Mi(t){return $C(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return zC.create(t,...e)}function je(t,e,...n){if(!t)throw y_(e,...n)}function Pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zp(e),new Error(e)}function Li(t,e){t||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function WF(){return iS()==="http:"||iS()==="https:"}function iS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WF()||x4()||"connection"in navigator)?navigator.onLine:!0}function qF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=w4()||b4()}get(){return HF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YF=new Ah(3e4,6e4);function ra(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ki(t,e,n,r,s={}){return HC(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Ph({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...i};return _4()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&na(t.emulatorConfig.host)&&(h.credentials="include"),WC.fetch()(await qC(t,t.config.apiHost,n,c),h)})}async function HC(t,e,n){t._canInitEmulator=!1;const r={...KF,...e};try{const s=new XF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw gp(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw gp(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw gp(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw gp(t,"user-disabled",a);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw $C(t,p,h);Es(t,p)}}catch(s){if(s instanceof ui)throw s;Es(t,"network-request-failed",{message:String(s)})}}async function Rh(t,e,n,r,s={}){const i=await Ki(t,e,n,r,s);return"mfaPendingCredential"in i&&Es(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function qC(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?v_(t.config,s):`${t.config.apiScheme}://${s}`;return GF.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function QF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gs(this.auth,"network-request-failed")),YF.get())})}}function gp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Gs(t,e,r);return s.customData._tokenResponse=n,s}function oS(t){return t!==void 0&&t.enterprise!==void 0}class JF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZF(t,e){return Ki(t,"GET","/v2/recaptchaConfig",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e){return Ki(t,"POST","/v1/accounts:delete",e)}async function _m(t,e){return Ki(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function t5(t,e=!1){const n=Rt(t),r=await n.getIdToken(e),s=w_(r);je(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Od(Uv(s.auth_time)),issuedAtTime:Od(Uv(s.iat)),expirationTime:Od(Uv(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Uv(t){return Number(t)*1e3}function w_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zp("JWT malformed, contained fewer than 3 sections"),null;try{const s=IC(n);return s?JSON.parse(s):(zp("Failed to decode base64 JWT payload"),null)}catch(s){return zp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function aS(t){const e=w_(t);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ui&&n5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function n5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Od(this.lastLoginAt),this.creationTime=Od(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xm(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Hc(t,_m(e,{idToken:n}));je(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?KC(s.providerUserInfo):[],a=i5(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function s5(t){const e=Rt(t);await xm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function i5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function KC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o5(t,e){const n=await HC(t,{},async()=>{const r=Ph({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await qC(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&na(t.emulatorConfig.host)&&(u.credentials="include"),WC.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function a5(t,e){return Ki(t,"POST","/v2/accounts:revokeToken",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=aS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await o5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Oc;return r&&(je(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(je(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(je(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oc,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(t,e){je(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class xs{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new r5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new L0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hc(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return t5(this,e)}reload(){return s5(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await Hc(this,e5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:E,providerData:S,stsTokenManager:T}=n;je(m&&T,e,"internal-error");const I=Oc.fromJSON(this.name,T);je(typeof m=="string",e,"internal-error"),To(r,e.name),To(s,e.name),je(typeof v=="boolean",e,"internal-error"),je(typeof E=="boolean",e,"internal-error"),To(i,e.name),To(a,e.name),To(c,e.name),To(u,e.name),To(h,e.name),To(p,e.name);const C=new xs({uid:m,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:E,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:I,createdAt:h,lastLoginAt:p});return S&&Array.isArray(S)&&(C.providerData=S.map(N=>({...N}))),u&&(C._redirectEventId=u),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oc;s.updateFromServerResponse(n);const i=new xs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xm(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];je(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?KC(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Oc;c.updateFromIdToken(r);const u=new xs({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new L0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new Map;function Ai(t){Li(t instanceof Function,"Expected a class definition");let e=lS.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GC.type="NONE";const cS=GC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t,e,n){return`firebase:${t}:${e}:${n}`}class Vc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=$p(this.userKey,s.apiKey,i),this.fullPersistenceKey=$p("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _m(this.auth,{idToken:e}).catch(()=>{});return n?xs._fromGetAccountInfoResponse(this.auth,n,e):null}return xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Vc(Ai(cS),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Ai(cS);const a=$p(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const p=await h._get(a);if(p){let m;if(typeof p=="string"){const v=await _m(e,{idToken:p}).catch(()=>{});if(!v)break;m=await xs._fromGetAccountInfoResponse(e,v,p)}else m=xs._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Vc(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(a)}catch{}})),new Vc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eP(e))return"Blackberry";if(tP(e))return"Webos";if(QC(e))return"Safari";if((e.includes("chrome/")||XC(e))&&!e.includes("edge/"))return"Chrome";if(ZC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YC(t=mn()){return/firefox\//i.test(t)}function QC(t=mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XC(t=mn()){return/crios\//i.test(t)}function JC(t=mn()){return/iemobile/i.test(t)}function ZC(t=mn()){return/android/i.test(t)}function eP(t=mn()){return/blackberry/i.test(t)}function tP(t=mn()){return/webos/i.test(t)}function __(t=mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function l5(t=mn()){var e;return __(t)&&!!((e=window.navigator)!=null&&e.standalone)}function c5(){return E4()&&document.documentMode===10}function nP(t=mn()){return __(t)||ZC(t)||tP(t)||eP(t)||/windows phone/i.test(t)||JC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e=[]){let n;switch(t){case"Browser":n=uS(mn());break;case"Worker":n=`${uS(mn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Il}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e={}){return Ki(t,"GET","/v2/passwordPolicy",ra(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5=6;class f5{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??h5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dS(this),this.idTokenSubscription=new dS(this),this.beforeStateQueue=new u5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ai(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Vc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _m(this,{idToken:e}),r=await xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Cr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=qF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(Mi(this));const n=e?Rt(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await d5(this),n=new f5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ch("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await a5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ai(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Vc.create(this,[Ai(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$F(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function kl(t){return Rt(t)}class dS{constructor(e){this.auth=e,this.observer=null,this.addObserver=P4(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function m5(t){ag=t}function sP(t){return ag.loadJS(t)}function g5(){return ag.recaptchaEnterpriseScript}function y5(){return ag.gapiScript}function v5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class w5{constructor(){this.enterprise=new _5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class _5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const x5="recaptcha-enterprise",iP="NO_RECAPTCHA";class b5{constructor(e){this.type=x5,this.auth=kl(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{ZF(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new JF(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,a(h.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;oS(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{a(h)}).catch(()=>{a(iP)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w5().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&oS(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=g5();u.length!==0&&(u+=c),sP(u).then(()=>{s(c,i,a)}).catch(h=>{a(h)})}}).catch(c=>{a(c)})})}}async function hS(t,e,n,r=!1,s=!1){const i=new b5(t);let a;if(s)a=iP;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function j0(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await hS(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await hS(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t,e){const n=og(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(al(i,e??{}))return s;Es(s,"already-initialized")}return n.initialize({options:e})}function T5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ai);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function S5(t,e,n){const r=kl(t);je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=oP(e),{host:a,port:c}=I5(e),u=c===null?"":`:${c}`,h={url:`${i}//${a}${u}/`},p=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){je(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),je(al(h,r.config.emulator)&&al(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,na(a)?(h_(`${i}//${a}${u}`),f_("Auth",!0)):k5()}function oP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I5(t){const e=oP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:fS(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:fS(a)}}}function fS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function k5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,n){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function C5(t,e){return Ki(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e){return Rh(t,"POST","/v1/accounts:signInWithPassword",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(t,e){return Rh(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}async function R5(t,e){return Rh(t,"POST","/v1/accounts:signInWithEmailLink",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends x_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Zd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Zd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return j0(e,n,"signInWithPassword",P5);case"emailLink":return A5(e,{email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return j0(e,r,"signUpPassword",C5);case"emailLink":return R5(e,{idToken:n,email:this._email,oobCode:this._password});default:Es(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(t,e){return Rh(t,"POST","/v1/accounts:signInWithIdp",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5="http://localhost";class cl extends x_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new cl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Es("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new cl(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Lc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Lc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Lc(e,n)}buildRequest(){const e={requestUri:N5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ph(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function M5(t){const e=Td(Sd(t)).link,n=e?Td(Sd(e)).deep_link_id:null,r=Td(Sd(t)).deep_link_id;return(r?Td(Sd(r)).link:null)||r||n||e||t}class b_{constructor(e){const n=Td(Sd(e)),r=n.apiKey??null,s=n.oobCode??null,i=D5(n.mode??null);je(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=M5(e);try{return new b_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(){this.providerId=mu.PROVIDER_ID}static credential(e,n){return Zd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=b_.parseLink(n);return je(r,"argument-error"),Zd._fromEmailAndCode(e,r.code,r.tenantId)}}mu.PROVIDER_ID="password";mu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends aP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Nh{constructor(){super("facebook.com")}static credential(e){return cl._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.FACEBOOK_SIGN_IN_METHOD="facebook.com";Do.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return cl._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mo.credential(n,r)}catch{return null}}}Mo.GOOGLE_SIGN_IN_METHOD="google.com";Mo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Nh{constructor(){super("github.com")}static credential(e){return cl._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.GITHUB_SIGN_IN_METHOD="github.com";Oo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Nh{constructor(){super("twitter.com")}static credential(e,n){return cl._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vo.credential(n,r)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(t,e){return Rh(t,"POST","/v1/accounts:signUp",ra(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await xs._fromIdTokenResponse(e,r,s),a=pS(r);return new ul({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=pS(r);return new ul({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function pS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends ui{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bm(e,n,r,s)}}function lP(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bm._fromErrorAndOperation(t,i,e,r):i})}async function V5(t,e,n=!1){const r=await Hc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ul._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(t,e,n=!1){const{auth:r}=t;if(Cr(r.app))return Promise.reject(Mi(r));const s="reauthenticate";try{const i=await Hc(t,lP(r,s,e,t),n);je(i.idToken,r,"internal-error");const a=w_(i.idToken);je(a,r,"internal-error");const{sub:c}=a;return je(t.uid===c,r,"user-mismatch"),ul._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Es(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,e,n=!1){if(Cr(t.app))return Promise.reject(Mi(t));const r="signIn",s=await lP(t,r,e),i=await ul._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function j5(t,e){return cP(kl(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t){const e=kl(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function F5(t,e,n){if(Cr(t.app))return Promise.reject(Mi(t));const r=kl(t),a=await j0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",O5).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&uP(t),u}),c=await ul._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function U5(t,e,n){return Cr(t.app)?Promise.reject(Mi(t)):j5(Rt(t),mu.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uP(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(t,e){return Ki(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Rt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await Hc(r,B5(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function $5(t,e,n,r){return Rt(t).onIdTokenChanged(e,n,r)}function W5(t,e,n){return Rt(t).beforeAuthStateChanged(e,n)}function H5(t,e,n,r){return Rt(t).onAuthStateChanged(e,n,r)}function q5(t){return Rt(t).signOut()}const Em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Em,"1"),this.storage.removeItem(Em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=1e3,G5=10;class hP extends dP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);c5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,G5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},K5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hP.type="LOCAL";const Y5=hP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP extends dP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fP.type="SESSION";const pP=fP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async h=>h(n.origin,i)),u=await Q5(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const h=E_("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const v=m;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(v.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(){return window}function J5(t){Ys().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(){return typeof Ys().WorkerGlobalScope<"u"&&typeof Ys().importScripts=="function"}async function Z5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function e6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function t6(){return mP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="firebaseLocalStorageDb",n6=1,Tm="firebaseLocalStorage",yP="fbase_key";class Dh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cg(t,e){return t.transaction([Tm],e?"readwrite":"readonly").objectStore(Tm)}function r6(){const t=indexedDB.deleteDatabase(gP);return new Dh(t).toPromise()}function F0(){const t=indexedDB.open(gP,n6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tm,{keyPath:yP})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tm)?e(r):(r.close(),await r6(),e(await F0()))})})}async function mS(t,e,n){const r=cg(t,!0).put({[yP]:e,value:n});return new Dh(r).toPromise()}async function s6(t,e){const n=cg(t,!1).get(e),r=await new Dh(n).toPromise();return r===void 0?null:r.value}function gS(t,e){const n=cg(t,!0).delete(e);return new Dh(n).toPromise()}const i6=800,o6=3;class vP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await F0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>o6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lg._getInstance(t6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Z5(),!this.activeServiceWorker)return;this.sender=new X5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||e6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await F0();return await mS(e,Em,"1"),await gS(e,Em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>s6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=cg(s,!1).getAll();return new Dh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vP.type="LOCAL";const a6=vP;new Ah(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t,e){return e?Ai(e):(je(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_ extends x_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Lc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Lc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function c6(t){return cP(t.auth,new T_(t),t.bypassAuthState)}function u6(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),L5(n,new T_(t),t.bypassAuthState)}async function d6(t){const{auth:e,user:n}=t;return je(n,e,"internal-error"),V5(n,new T_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c6;case"linkViaPopup":case"linkViaRedirect":return d6;case"reauthViaPopup":case"reauthViaRedirect":return u6;default:Es(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new Ah(2e3,1e4);class Cc extends wP{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Cc.currentPopupAction&&Cc.currentPopupAction.cancel(),Cc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=E_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h6.get())};e()}}Cc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="pendingRedirect",Wp=new Map;class p6 extends wP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Wp.get(this.auth._key());if(!e){try{const r=await m6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Wp.set(this.auth._key(),e)}return this.bypassAuthState||Wp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m6(t,e){const n=v6(e),r=y6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function g6(t,e){Wp.set(t._key(),e)}function y6(t){return Ai(t._redirectPersistence)}function v6(t){return $p(f6,t.config.apiKey,t.name)}async function w6(t,e,n=!1){if(Cr(t.app))return Promise.reject(Mi(t));const r=kl(t),s=l6(r,e),a=await new p6(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=600*1e3;class x6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_P(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gs(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_6&&this.cachedEventUids.clear(),this.cachedEventUids.has(yS(e))}saveEventToCache(e){this.cachedEventUids.add(yS(e)),this.lastProcessedEventTime=Date.now()}}function yS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _P({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _P(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E6(t,e={}){return Ki(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S6=/^https?/;async function I6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await E6(t);for(const n of e)try{if(k6(n))return}catch{}Es(t,"unauthorized-domain")}function k6(t){const e=V0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!S6.test(n))return!1;if(T6.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6=new Ah(3e4,6e4);function vS(){const t=Ys().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function P6(t){return new Promise((e,n)=>{var s,i,a;function r(){vS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vS(),n(Gs(t,"network-request-failed"))},timeout:C6.get()})}if((i=(s=Ys().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Ys().gapi)!=null&&a.load)r();else{const c=v5("iframefcb");return Ys()[c]=()=>{gapi.load?r():n(Gs(t,"network-request-failed"))},sP(`${y5()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Hp=null,e})}let Hp=null;function A6(t){return Hp=Hp||P6(t),Hp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=new Ah(5e3,15e3),N6="__/auth/iframe",D6="emulator/auth/iframe",M6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V6(t){const e=t.config;je(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?v_(e,D6):`https://${t.config.authDomain}/${N6}`,r={apiKey:e.apiKey,appName:t.name,v:Il},s=O6.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ph(r).slice(1)}`}async function L6(t){const e=await A6(t),n=Ys().gapi;return je(n,t,"internal-error"),e.open({where:document.body,url:V6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M6,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Gs(t,"network-request-failed"),c=Ys().setTimeout(()=>{i(a)},R6.get());function u(){Ys().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F6=500,U6=600,B6="_blank",z6="http://localhost";class wS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $6(t,e,n,r=F6,s=U6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...j6,width:r.toString(),height:s.toString(),top:i,left:a},h=mn().toLowerCase();n&&(c=XC(h)?B6:n),YC(h)&&(e=e||z6,u.scrollbars="yes");const p=Object.entries(u).reduce((v,[E,S])=>`${v}${E}=${S},`,"");if(l5(h)&&c!=="_self")return W6(e||"",c),new wS(null);const m=window.open(e||"",c,p);je(m,t,"popup-blocked");try{m.focus()}catch{}return new wS(m)}function W6(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="__/auth/handler",q6="emulator/auth/handler",K6=encodeURIComponent("fac");async function _S(t,e,n,r,s,i){je(t.config.authDomain,t,"auth-domain-config-required"),je(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Il,eventId:s};if(e instanceof aP){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",C4(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof Nh){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const u=await t._getAppCheckToken(),h=u?`#${K6}=${encodeURIComponent(u)}`:"";return`${G6(t)}?${Ph(c).slice(1)}${h}`}function G6({config:t}){return t.emulator?v_(t,q6):`https://${t.authDomain}/${H6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="webStorageSupport";class Y6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pP,this._completeRedirectFn=w6,this._overrideRedirectResult=g6}async _openPopup(e,n,r,s){var a;Li((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await _S(e,n,r,V0(),s);return $6(e,i,E_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await _S(e,n,r,V0(),s);return J5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Li(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await L6(e),r=new x6(e);return n.register("authEvent",s=>(je(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bv,{type:Bv},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[Bv];i!==void 0&&n(!!i),Es(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nP()||QC()||__()}}const Q6=Y6;var xS="@firebase/auth",bS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z6(t){ll(new qo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;je(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rP(t)},h=new p5(r,s,i,u);return T5(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ll(new qo("auth-internal",e=>{const n=kl(e.getProvider("auth").getImmediate());return(r=>new X6(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ks(xS,bS,J6(t)),Ks(xS,bS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=300,t3=RC("authIdTokenMaxAge")||e3;let ES=null;const n3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>t3)return;const s=n==null?void 0:n.token;ES!==s&&(ES=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function r3(t=g_()){const e=og(t,"auth");if(e.isInitialized())return e.getImmediate();const n=E5(t,{popupRedirectResolver:Q6,persistence:[a6,Y5,pP]}),r=RC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=n3(i.toString());W5(n,a,()=>a(n.currentUser)),$5(n,c=>a(c))}}const s=CC("auth");return s&&S5(n,`http://${s}`),n}function s3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}m5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Gs("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",s3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z6("Browser");var TS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zo,xP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,P){function V(){}V.prototype=P.prototype,D.D=P.prototype,D.prototype=new V,D.prototype.constructor=D,D.C=function(F,U,j){for(var M=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)M[Z-2]=arguments[Z];return P.prototype[U].apply(F,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,P,V){V||(V=0);var F=Array(16);if(typeof P=="string")for(var U=0;16>U;++U)F[U]=P.charCodeAt(V++)|P.charCodeAt(V++)<<8|P.charCodeAt(V++)<<16|P.charCodeAt(V++)<<24;else for(U=0;16>U;++U)F[U]=P[V++]|P[V++]<<8|P[V++]<<16|P[V++]<<24;P=D.g[0],V=D.g[1],U=D.g[2];var j=D.g[3],M=P+(j^V&(U^j))+F[0]+3614090360&4294967295;P=V+(M<<7&4294967295|M>>>25),M=j+(U^P&(V^U))+F[1]+3905402710&4294967295,j=P+(M<<12&4294967295|M>>>20),M=U+(V^j&(P^V))+F[2]+606105819&4294967295,U=j+(M<<17&4294967295|M>>>15),M=V+(P^U&(j^P))+F[3]+3250441966&4294967295,V=U+(M<<22&4294967295|M>>>10),M=P+(j^V&(U^j))+F[4]+4118548399&4294967295,P=V+(M<<7&4294967295|M>>>25),M=j+(U^P&(V^U))+F[5]+1200080426&4294967295,j=P+(M<<12&4294967295|M>>>20),M=U+(V^j&(P^V))+F[6]+2821735955&4294967295,U=j+(M<<17&4294967295|M>>>15),M=V+(P^U&(j^P))+F[7]+4249261313&4294967295,V=U+(M<<22&4294967295|M>>>10),M=P+(j^V&(U^j))+F[8]+1770035416&4294967295,P=V+(M<<7&4294967295|M>>>25),M=j+(U^P&(V^U))+F[9]+2336552879&4294967295,j=P+(M<<12&4294967295|M>>>20),M=U+(V^j&(P^V))+F[10]+4294925233&4294967295,U=j+(M<<17&4294967295|M>>>15),M=V+(P^U&(j^P))+F[11]+2304563134&4294967295,V=U+(M<<22&4294967295|M>>>10),M=P+(j^V&(U^j))+F[12]+1804603682&4294967295,P=V+(M<<7&4294967295|M>>>25),M=j+(U^P&(V^U))+F[13]+4254626195&4294967295,j=P+(M<<12&4294967295|M>>>20),M=U+(V^j&(P^V))+F[14]+2792965006&4294967295,U=j+(M<<17&4294967295|M>>>15),M=V+(P^U&(j^P))+F[15]+1236535329&4294967295,V=U+(M<<22&4294967295|M>>>10),M=P+(U^j&(V^U))+F[1]+4129170786&4294967295,P=V+(M<<5&4294967295|M>>>27),M=j+(V^U&(P^V))+F[6]+3225465664&4294967295,j=P+(M<<9&4294967295|M>>>23),M=U+(P^V&(j^P))+F[11]+643717713&4294967295,U=j+(M<<14&4294967295|M>>>18),M=V+(j^P&(U^j))+F[0]+3921069994&4294967295,V=U+(M<<20&4294967295|M>>>12),M=P+(U^j&(V^U))+F[5]+3593408605&4294967295,P=V+(M<<5&4294967295|M>>>27),M=j+(V^U&(P^V))+F[10]+38016083&4294967295,j=P+(M<<9&4294967295|M>>>23),M=U+(P^V&(j^P))+F[15]+3634488961&4294967295,U=j+(M<<14&4294967295|M>>>18),M=V+(j^P&(U^j))+F[4]+3889429448&4294967295,V=U+(M<<20&4294967295|M>>>12),M=P+(U^j&(V^U))+F[9]+568446438&4294967295,P=V+(M<<5&4294967295|M>>>27),M=j+(V^U&(P^V))+F[14]+3275163606&4294967295,j=P+(M<<9&4294967295|M>>>23),M=U+(P^V&(j^P))+F[3]+4107603335&4294967295,U=j+(M<<14&4294967295|M>>>18),M=V+(j^P&(U^j))+F[8]+1163531501&4294967295,V=U+(M<<20&4294967295|M>>>12),M=P+(U^j&(V^U))+F[13]+2850285829&4294967295,P=V+(M<<5&4294967295|M>>>27),M=j+(V^U&(P^V))+F[2]+4243563512&4294967295,j=P+(M<<9&4294967295|M>>>23),M=U+(P^V&(j^P))+F[7]+1735328473&4294967295,U=j+(M<<14&4294967295|M>>>18),M=V+(j^P&(U^j))+F[12]+2368359562&4294967295,V=U+(M<<20&4294967295|M>>>12),M=P+(V^U^j)+F[5]+4294588738&4294967295,P=V+(M<<4&4294967295|M>>>28),M=j+(P^V^U)+F[8]+2272392833&4294967295,j=P+(M<<11&4294967295|M>>>21),M=U+(j^P^V)+F[11]+1839030562&4294967295,U=j+(M<<16&4294967295|M>>>16),M=V+(U^j^P)+F[14]+4259657740&4294967295,V=U+(M<<23&4294967295|M>>>9),M=P+(V^U^j)+F[1]+2763975236&4294967295,P=V+(M<<4&4294967295|M>>>28),M=j+(P^V^U)+F[4]+1272893353&4294967295,j=P+(M<<11&4294967295|M>>>21),M=U+(j^P^V)+F[7]+4139469664&4294967295,U=j+(M<<16&4294967295|M>>>16),M=V+(U^j^P)+F[10]+3200236656&4294967295,V=U+(M<<23&4294967295|M>>>9),M=P+(V^U^j)+F[13]+681279174&4294967295,P=V+(M<<4&4294967295|M>>>28),M=j+(P^V^U)+F[0]+3936430074&4294967295,j=P+(M<<11&4294967295|M>>>21),M=U+(j^P^V)+F[3]+3572445317&4294967295,U=j+(M<<16&4294967295|M>>>16),M=V+(U^j^P)+F[6]+76029189&4294967295,V=U+(M<<23&4294967295|M>>>9),M=P+(V^U^j)+F[9]+3654602809&4294967295,P=V+(M<<4&4294967295|M>>>28),M=j+(P^V^U)+F[12]+3873151461&4294967295,j=P+(M<<11&4294967295|M>>>21),M=U+(j^P^V)+F[15]+530742520&4294967295,U=j+(M<<16&4294967295|M>>>16),M=V+(U^j^P)+F[2]+3299628645&4294967295,V=U+(M<<23&4294967295|M>>>9),M=P+(U^(V|~j))+F[0]+4096336452&4294967295,P=V+(M<<6&4294967295|M>>>26),M=j+(V^(P|~U))+F[7]+1126891415&4294967295,j=P+(M<<10&4294967295|M>>>22),M=U+(P^(j|~V))+F[14]+2878612391&4294967295,U=j+(M<<15&4294967295|M>>>17),M=V+(j^(U|~P))+F[5]+4237533241&4294967295,V=U+(M<<21&4294967295|M>>>11),M=P+(U^(V|~j))+F[12]+1700485571&4294967295,P=V+(M<<6&4294967295|M>>>26),M=j+(V^(P|~U))+F[3]+2399980690&4294967295,j=P+(M<<10&4294967295|M>>>22),M=U+(P^(j|~V))+F[10]+4293915773&4294967295,U=j+(M<<15&4294967295|M>>>17),M=V+(j^(U|~P))+F[1]+2240044497&4294967295,V=U+(M<<21&4294967295|M>>>11),M=P+(U^(V|~j))+F[8]+1873313359&4294967295,P=V+(M<<6&4294967295|M>>>26),M=j+(V^(P|~U))+F[15]+4264355552&4294967295,j=P+(M<<10&4294967295|M>>>22),M=U+(P^(j|~V))+F[6]+2734768916&4294967295,U=j+(M<<15&4294967295|M>>>17),M=V+(j^(U|~P))+F[13]+1309151649&4294967295,V=U+(M<<21&4294967295|M>>>11),M=P+(U^(V|~j))+F[4]+4149444226&4294967295,P=V+(M<<6&4294967295|M>>>26),M=j+(V^(P|~U))+F[11]+3174756917&4294967295,j=P+(M<<10&4294967295|M>>>22),M=U+(P^(j|~V))+F[2]+718787259&4294967295,U=j+(M<<15&4294967295|M>>>17),M=V+(j^(U|~P))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(U+(M<<21&4294967295|M>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+j&4294967295}r.prototype.u=function(D,P){P===void 0&&(P=D.length);for(var V=P-this.blockSize,F=this.B,U=this.h,j=0;j<P;){if(U==0)for(;j<=V;)s(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<P;)if(F[U++]=D.charCodeAt(j++),U==this.blockSize){s(this,F),U=0;break}}else for(;j<P;)if(F[U++]=D[j++],U==this.blockSize){s(this,F),U=0;break}}this.h=U,this.o+=P},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;var V=8*this.o;for(P=D.length-8;P<D.length;++P)D[P]=V&255,V/=256;for(this.u(D),D=Array(16),P=V=0;4>P;++P)for(var F=0;32>F;F+=8)D[V++]=this.g[P]>>>F&255;return D};function i(D,P){var V=c;return Object.prototype.hasOwnProperty.call(V,D)?V[D]:V[D]=P(D)}function a(D,P){this.h=P;for(var V=[],F=!0,U=D.length-1;0<=U;U--){var j=D[U]|0;F&&j==P||(V[U]=j,F=!1)}this.g=V}var c={};function u(D){return-128<=D&&128>D?i(D,function(P){return new a([P|0],0>P?-1:0)}):new a([D|0],0>D?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return m;if(0>D)return I(h(-D));for(var P=[],V=1,F=0;D>=V;F++)P[F]=D/V|0,V*=4294967296;return new a(P,0)}function p(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return I(p(D.substring(1),P));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=h(Math.pow(P,8)),F=m,U=0;U<D.length;U+=8){var j=Math.min(8,D.length-U),M=parseInt(D.substring(U,U+j),P);8>j?(j=h(Math.pow(P,j)),F=F.j(j).add(h(M))):(F=F.j(V),F=F.add(h(M)))}return F}var m=u(0),v=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(T(this))return-I(this).m();for(var D=0,P=1,V=0;V<this.g.length;V++){var F=this.i(V);D+=(0<=F?F:4294967296+F)*P,P*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(T(this))return"-"+I(this).toString(D);for(var P=h(Math.pow(D,6)),V=this,F="";;){var U=L(V,P).g;V=C(V,U.j(P));var j=((0<V.g.length?V.g[0]:V.h)>>>0).toString(D);if(V=U,S(V))return j+F;for(;6>j.length;)j="0"+j;F=j+F}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function T(D){return D.h==-1}t.l=function(D){return D=C(this,D),T(D)?-1:S(D)?0:1};function I(D){for(var P=D.g.length,V=[],F=0;F<P;F++)V[F]=~D.g[F];return new a(V,~D.h).add(v)}t.abs=function(){return T(this)?I(this):this},t.add=function(D){for(var P=Math.max(this.g.length,D.g.length),V=[],F=0,U=0;U<=P;U++){var j=F+(this.i(U)&65535)+(D.i(U)&65535),M=(j>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);F=M>>>16,j&=65535,M&=65535,V[U]=M<<16|j}return new a(V,V[V.length-1]&-2147483648?-1:0)};function C(D,P){return D.add(I(P))}t.j=function(D){if(S(this)||S(D))return m;if(T(this))return T(D)?I(this).j(I(D)):I(I(this).j(D));if(T(D))return I(this.j(I(D)));if(0>this.l(E)&&0>D.l(E))return h(this.m()*D.m());for(var P=this.g.length+D.g.length,V=[],F=0;F<2*P;F++)V[F]=0;for(F=0;F<this.g.length;F++)for(var U=0;U<D.g.length;U++){var j=this.i(F)>>>16,M=this.i(F)&65535,Z=D.i(U)>>>16,oe=D.i(U)&65535;V[2*F+2*U]+=M*oe,N(V,2*F+2*U),V[2*F+2*U+1]+=j*oe,N(V,2*F+2*U+1),V[2*F+2*U+1]+=M*Z,N(V,2*F+2*U+1),V[2*F+2*U+2]+=j*Z,N(V,2*F+2*U+2)}for(F=0;F<P;F++)V[F]=V[2*F+1]<<16|V[2*F];for(F=P;F<2*P;F++)V[F]=0;return new a(V,0)};function N(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function R(D,P){this.g=D,this.h=P}function L(D,P){if(S(P))throw Error("division by zero");if(S(D))return new R(m,m);if(T(D))return P=L(I(D),P),new R(I(P.g),I(P.h));if(T(P))return P=L(D,I(P)),new R(I(P.g),P.h);if(30<D.g.length){if(T(D)||T(P))throw Error("slowDivide_ only works with positive integers.");for(var V=v,F=P;0>=F.l(D);)V=z(V),F=z(F);var U=K(V,1),j=K(F,1);for(F=K(F,2),V=K(V,2);!S(F);){var M=j.add(F);0>=M.l(D)&&(U=U.add(V),j=M),F=K(F,1),V=K(V,1)}return P=C(D,U.j(P)),new R(U,P)}for(U=m;0<=D.l(P);){for(V=Math.max(1,Math.floor(D.m()/P.m())),F=Math.ceil(Math.log(V)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),j=h(V),M=j.j(P);T(M)||0<M.l(D);)V-=F,j=h(V),M=j.j(P);S(j)&&(j=v),U=U.add(j),D=C(D,M)}return new R(U,D)}t.A=function(D){return L(this,D).h},t.and=function(D){for(var P=Math.max(this.g.length,D.g.length),V=[],F=0;F<P;F++)V[F]=this.i(F)&D.i(F);return new a(V,this.h&D.h)},t.or=function(D){for(var P=Math.max(this.g.length,D.g.length),V=[],F=0;F<P;F++)V[F]=this.i(F)|D.i(F);return new a(V,this.h|D.h)},t.xor=function(D){for(var P=Math.max(this.g.length,D.g.length),V=[],F=0;F<P;F++)V[F]=this.i(F)^D.i(F);return new a(V,this.h^D.h)};function z(D){for(var P=D.g.length+1,V=[],F=0;F<P;F++)V[F]=D.i(F)<<1|D.i(F-1)>>>31;return new a(V,D.h)}function K(D,P){var V=P>>5;P%=32;for(var F=D.g.length-V,U=[],j=0;j<F;j++)U[j]=0<P?D.i(j+V)>>>P|D.i(j+V+1)<<32-P:D.i(j+V);return new a(U,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xP=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=p,zo=a}).apply(typeof TS<"u"?TS:typeof self<"u"?self:typeof window<"u"?window:{});var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bP,Id,EP,qp,U0,TP,SP,IP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,k){return f==Array.prototype||f==Object.prototype||(f[_]=k.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof yp=="object"&&yp];for(var _=0;_<f.length;++_){var k=f[_];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=n(this);function s(f,_){if(_)e:{var k=r;f=f.split(".");for(var O=0;O<f.length-1;O++){var G=f[O];if(!(G in k))break e;k=k[G]}f=f[f.length-1],O=k[f],_=_(O),_!=O&&_!=null&&e(k,f,{configurable:!0,writable:!0,value:_})}}function i(f,_){f instanceof String&&(f+="");var k=0,O=!1,G={next:function(){if(!O&&k<f.length){var te=k++;return{value:_(te,f[te]),done:!1}}return O=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(f){return f||function(){return i(this,function(_,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function h(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function p(f,_,k){return f.call.apply(f.bind,arguments)}function m(f,_,k){if(!f)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,O),f.apply(_,G)}}return function(){return f.apply(_,arguments)}}function v(f,_,k){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,v.apply(null,arguments)}function E(f,_){var k=Array.prototype.slice.call(arguments,1);return function(){var O=k.slice();return O.push.apply(O,arguments),f.apply(this,O)}}function S(f,_){function k(){}k.prototype=_.prototype,f.aa=_.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(O,G,te){for(var ye=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)ye[lt-2]=arguments[lt];return _.prototype[G].apply(O,ye)}}function T(f){const _=f.length;if(0<_){const k=Array(_);for(let O=0;O<_;O++)k[O]=f[O];return k}return[]}function I(f,_){for(let k=1;k<arguments.length;k++){const O=arguments[k];if(u(O)){const G=f.length||0,te=O.length||0;f.length=G+te;for(let ye=0;ye<te;ye++)f[G+ye]=O[ye]}else f.push(O)}}class C{constructor(_,k){this.i=_,this.j=k,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function N(f){return/^[\s\xa0]*$/.test(f)}function R(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function L(f){return L[" "](f),f}L[" "]=function(){};var z=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function K(f,_,k){for(const O in f)_.call(k,f[O],O,f)}function D(f,_){for(const k in f)_.call(void 0,f[k],k,f)}function P(f){const _={};for(const k in f)_[k]=f[k];return _}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,_){let k,O;for(let G=1;G<arguments.length;G++){O=arguments[G];for(k in O)f[k]=O[k];for(let te=0;te<V.length;te++)k=V[te],Object.prototype.hasOwnProperty.call(O,k)&&(f[k]=O[k])}}function U(f){var _=1;f=f.split(":");const k=[];for(;0<_&&f.length;)k.push(f.shift()),_--;return f.length&&k.push(f.join(":")),k}function j(f){c.setTimeout(()=>{throw f},0)}function M(){var f=ie;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class Z{constructor(){this.h=this.g=null}add(_,k){const O=oe.get();O.set(_,k),this.h?this.h.next=O:this.g=O,this.h=O}}var oe=new C(()=>new re,f=>f.reset());class re{constructor(){this.next=this.g=this.h=null}set(_,k){this.h=_,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let se,$=!1,ie=new Z,le=()=>{const f=c.Promise.resolve(void 0);se=()=>{f.then(W)}};var W=()=>{for(var f;f=M();){try{f.h.call(f.g)}catch(k){j(k)}var _=oe;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}$=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};c.addEventListener("test",k,_),c.removeEventListener("test",k,_)}catch{}return f}();function Ae(f,_){if(ae.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,O=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(z){e:{try{L(_.nodeName);var G=!0;break e}catch{}G=!1}G||(_=null)}}else k=="mouseover"?_=f.fromElement:k=="mouseout"&&(_=f.toElement);this.relatedTarget=_,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:xe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ae.aa.h.call(this)}}S(Ae,ae);var xe={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),be=0;function De(f,_,k,O,G){this.listener=f,this.proxy=null,this.src=_,this.type=k,this.capture=!!O,this.ha=G,this.key=++be,this.da=this.fa=!1}function Ne(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function $e(f){this.src=f,this.g={},this.h=0}$e.prototype.add=function(f,_,k,O,G){var te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);var ye=Et(f,_,O,G);return-1<ye?(_=f[ye],k||(_.fa=!1)):(_=new De(_,this.src,te,!!O,G),_.fa=k,f.push(_)),_};function We(f,_){var k=_.type;if(k in f.g){var O=f.g[k],G=Array.prototype.indexOf.call(O,_,void 0),te;(te=0<=G)&&Array.prototype.splice.call(O,G,1),te&&(Ne(_),f.g[k].length==0&&(delete f.g[k],f.h--))}}function Et(f,_,k,O){for(var G=0;G<f.length;++G){var te=f[G];if(!te.da&&te.listener==_&&te.capture==!!k&&te.ha==O)return G}return-1}var Ut="closure_lm_"+(1e6*Math.random()|0),Jn={};function Zn(f,_,k,O,G){if(Array.isArray(_)){for(var te=0;te<_.length;te++)Zn(f,_[te],k,O,G);return null}return k=ua(k),f&&f[ue]?f.K(_,k,h(O)?!!O.capture:!1,G):bn(f,_,k,!1,O,G)}function bn(f,_,k,O,G,te){if(!_)throw Error("Invalid event type");var ye=h(G)?!!G.capture:!!G,lt=gr(f);if(lt||(f[Ut]=lt=new $e(f)),k=lt.add(_,k,O,ye,te),k.proxy)return k;if(O=hi(),k.proxy=O,O.src=f,O.listener=k,f.addEventListener)ve||(G=ye),G===void 0&&(G=!1),f.addEventListener(_.toString(),O,G);else if(f.attachEvent)f.attachEvent(ts(_.toString()),O);else if(f.addListener&&f.removeListener)f.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return k}function hi(){function f(k){return _.call(f.src,f.listener,k)}const _=ln;return f}function qt(f,_,k,O,G){if(Array.isArray(_))for(var te=0;te<_.length;te++)qt(f,_[te],k,O,G);else O=h(O)?!!O.capture:!!O,k=ua(k),f&&f[ue]?(f=f.i,_=String(_).toString(),_ in f.g&&(te=f.g[_],k=Et(te,k,O,G),-1<k&&(Ne(te[k]),Array.prototype.splice.call(te,k,1),te.length==0&&(delete f.g[_],f.h--)))):f&&(f=gr(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Et(_,k,O,G)),(k=-1<f?_[f]:null)&&es(k))}function es(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[ue])We(_.i,f);else{var k=f.type,O=f.proxy;_.removeEventListener?_.removeEventListener(k,O,f.capture):_.detachEvent?_.detachEvent(ts(k),O):_.addListener&&_.removeListener&&_.removeListener(O),(k=gr(_))?(We(k,f),k.h==0&&(k.src=null,_[Ut]=null)):Ne(f)}}}function ts(f){return f in Jn?Jn[f]:Jn[f]="on"+f}function ln(f,_){if(f.da)f=!0;else{_=new Ae(_,this);var k=f.listener,O=f.ha||f.src;f.fa&&es(f),f=k.call(O,_)}return f}function gr(f){return f=f[Ut],f instanceof $e?f:null}var Qi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ua(f){return typeof f=="function"?f:(f[Qi]||(f[Qi]=function(_){return f.handleEvent(_)}),f[Qi])}function Tt(){X.call(this),this.i=new $e(this),this.M=this,this.F=null}S(Tt,X),Tt.prototype[ue]=!0,Tt.prototype.removeEventListener=function(f,_,k,O){qt(this,f,_,k,O)};function Kt(f,_){var k,O=f.F;if(O)for(k=[];O;O=O.F)k.push(O);if(f=f.M,O=_.type||_,typeof _=="string")_=new ae(_,f);else if(_ instanceof ae)_.target=_.target||f;else{var G=_;_=new ae(O,f),F(_,G)}if(G=!0,k)for(var te=k.length-1;0<=te;te--){var ye=_.g=k[te];G=Vr(ye,O,!0,_)&&G}if(ye=_.g=f,G=Vr(ye,O,!0,_)&&G,G=Vr(ye,O,!1,_)&&G,k)for(te=0;te<k.length;te++)ye=_.g=k[te],G=Vr(ye,O,!1,_)&&G}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var k=f.g[_],O=0;O<k.length;O++)Ne(k[O]);delete f.g[_],f.h--}}this.F=null},Tt.prototype.K=function(f,_,k,O){return this.i.add(String(f),_,!1,k,O)},Tt.prototype.L=function(f,_,k,O){return this.i.add(String(f),_,!0,k,O)};function Vr(f,_,k,O){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var G=!0,te=0;te<_.length;++te){var ye=_[te];if(ye&&!ye.da&&ye.capture==k){var lt=ye.listener,dn=ye.ha||ye.src;ye.fa&&We(f.i,ye),G=lt.call(dn,O)!==!1&&G}}return G&&!O.defaultPrevented}function fi(f,_,k){if(typeof f=="function")k&&(f=v(f,k));else if(f&&typeof f.handleEvent=="function")f=v(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(f,_||0)}function Bn(f){f.g=fi(()=>{f.g=null,f.i&&(f.i=!1,Bn(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Cs extends X{constructor(_,k){super(),this.m=_,this.l=k,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Bn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(f){X.call(this),this.h=f,this.g={}}S(er,X);var da=[];function ha(f){K(f.g,function(_,k){this.g.hasOwnProperty(k)&&es(_)},f),f.g={}}er.prototype.N=function(){er.aa.N.call(this),ha(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xi=c.JSON.stringify,Ji=c.JSON.parse,fa=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ns(){}ns.prototype.h=null;function zn(f){return f.h||(f.h=f.i())}function Zi(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yr(){ae.call(this,"d")}S(yr,ae);function pi(){ae.call(this,"c")}S(pi,ae);var Oe={},St=null;function It(){return St=St||new Tt}Oe.La="serverreachability";function cn(f){ae.call(this,Oe.La,f)}S(cn,ae);function nr(f){const _=It();Kt(_,new cn(_))}Oe.STAT_EVENT="statevent";function Dt(f,_){ae.call(this,Oe.STAT_EVENT,f),this.stat=_}S(Dt,ae);function Ze(f){const _=It();Kt(_,new Dt(_,f))}Oe.Ma="timingevent";function rs(f,_){ae.call(this,Oe.Ma,f),this.size=_}S(rs,ae);function Mt(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},_)}function un(){this.g=!0}un.prototype.xa=function(){this.g=!1};function Ps(f,_,k,O,G,te){f.info(function(){if(f.g)if(te)for(var ye="",lt=te.split("&"),dn=0;dn<lt.length;dn++){var et=lt[dn].split("=");if(1<et.length){var yn=et[0];et=et[1];var Jt=yn.split("_");ye=2<=Jt.length&&Jt[1]=="type"?ye+(yn+"="+et+"&"):ye+(yn+"=redacted&")}}else ye=null;else ye=te;return"XMLHTTP REQ ("+O+") [attempt "+G+"]: "+_+`
`+k+`
`+ye})}function rr(f,_,k,O,G,te,ye){f.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+G+"]: "+_+`
`+k+`
`+te+" "+ye})}function Lr(f,_,k,O){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+ey(f,k)+(O?" "+O:"")})}function Ru(f,_){f.info(function(){return"TIMEOUT: "+_})}un.prototype.info=function(){};function ey(f,_){if(!f.g)return _;if(!_)return null;try{var k=JSON.parse(_);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var O=k[f];if(!(2>O.length)){var G=O[1];if(Array.isArray(G)&&!(1>G.length)){var te=G[0];if(te!="noop"&&te!="stop"&&te!="close")for(var ye=1;ye<G.length;ye++)G[ye]=""}}}}return Xi(k)}catch{return _}}var Al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ss;function pa(){}S(pa,ns),pa.prototype.g=function(){return new XMLHttpRequest},pa.prototype.i=function(){return{}},ss=new pa;function is(f,_,k,O){this.j=f,this.i=_,this.l=k,this.R=O||1,this.U=new er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ef}function ef(){this.i=null,this.g="",this.h=!1}var Nu={},Rl={};function Nl(f,_,k){f.L=1,f.v=so(wr(_)),f.m=k,f.P=!0,Du(f,null)}function Du(f,_){f.F=Date.now(),gt(f),f.A=wr(f.v);var k=f.A,O=f.R;Array.isArray(O)||(O=[String(O)]),oo(k.i,"t",O),f.C=0,k=f.j.J,f.h=new ef,f.g=wf(f.j,k?_:null,!f.m),0<f.O&&(f.M=new Cs(v(f.Y,f,f.g),f.O)),_=f.U,k=f.g,O=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(da[0]=G.toString()),G=da);for(var te=0;te<G.length;te++){var ye=Zn(k,G[te],O||_.handleEvent,!1,_.h||_);if(!ye)break;_.g[ye.key]=ye}_=f.H?P(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),nr(),Ps(f.i,f.u,f.A,f.l,f.R,f.m)}is.prototype.ca=function(f){f=f.target;const _=this.M;_&&ir(f)==3?_.j():this.Y(f)},is.prototype.Y=function(f){try{if(f==this.g)e:{const Jt=ir(this.g);var _=this.g.Ba();const Ur=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||Fu(this.g)))){this.J||Jt!=4||_==7||(_==8||0>=Ur?nr(3):nr(2)),ma(this);var k=this.g.Z();this.X=k;t:if(tf(this)){var O=Fu(this.g);f="";var G=O.length,te=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),eo(this);var ye="";break t}this.h.i=new c.TextDecoder}for(_=0;_<G;_++)this.h.h=!0,f+=this.h.i.decode(O[_],{stream:!(te&&_==G-1)});O.length=0,this.h.g+=f,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=k==200,rr(this.i,this.u,this.A,this.l,this.R,Jt,k),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,dn=this.g;if((lt=dn.g?dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(lt)){var et=lt;break t}}et=null}if(k=et)Lr(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mu(this,k);else{this.o=!1,this.s=3,Ze(12),jr(this),eo(this);break e}}if(this.P){k=!0;let xr;for(;!this.J&&this.C<ye.length;)if(xr=ty(this,ye),xr==Rl){Jt==4&&(this.s=4,Ze(14),k=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(xr==Nu){this.s=4,Ze(15),Lr(this.i,this.l,ye,"[Invalid Chunk]"),k=!1;break}else Lr(this.i,this.l,xr,null),Mu(this,xr);if(tf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||ye.length!=0||this.h.h||(this.s=1,Ze(16),k=!1),this.o=this.o&&k,!k)Lr(this.i,this.l,ye,"[Invalid Chunked Response]"),jr(this),eo(this);else if(0<ye.length&&!this.W){this.W=!0;var yn=this.j;yn.g==this&&yn.ba&&!yn.M&&(yn.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),Bu(yn),yn.M=!0,Ze(11))}}else Lr(this.i,this.l,ye,null),Mu(this,ye);Jt==4&&jr(this),this.o&&!this.J&&(Jt==4?$l(this.j,this):(this.o=!1,gt(this)))}else jl(this.g),k==400&&0<ye.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),jr(this),eo(this)}}}catch{}finally{}};function tf(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ty(f,_){var k=f.C,O=_.indexOf(`
`,k);return O==-1?Rl:(k=Number(_.substring(k,O)),isNaN(k)?Nu:(O+=1,O+k>_.length?Rl:(_=_.slice(O,O+k),f.C=O+k,_)))}is.prototype.cancel=function(){this.J=!0,jr(this)};function gt(f){f.S=Date.now()+f.I,nf(f,f.I)}function nf(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Mt(v(f.ba,f),_)}function ma(f){f.B&&(c.clearTimeout(f.B),f.B=null)}is.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ru(this.i,this.A),this.L!=2&&(nr(),Ze(17)),jr(this),this.s=2,eo(this)):nf(this,this.S-f)};function eo(f){f.j.G==0||f.J||$l(f.j,f)}function jr(f){ma(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,ha(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Mu(f,_){try{var k=f.j;if(k.G!=0&&(k.g==f||$n(k.h,f))){if(!f.K&&$n(k.h,f)&&k.G==3){try{var O=k.Da.g.parse(_)}catch{O=null}if(Array.isArray(O)&&O.length==3){var G=O;if(G[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)zl(k),us(k);else break e;Bl(k),Ze(18)}}else k.za=G[1],0<k.za-k.T&&37500>G[2]&&k.F&&k.v==0&&!k.C&&(k.C=Mt(v(k.Za,k),6e3));if(1>=sf(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else wi(k,11)}else if((f.K||k.g==f)&&zl(k),!N(_))for(G=k.Da.g.parse(_),_=0;_<G.length;_++){let et=G[_];if(k.T=et[0],et=et[1],k.G==2)if(et[0]=="c"){k.K=et[1],k.ia=et[2];const yn=et[3];yn!=null&&(k.la=yn,k.j.info("VER="+k.la));const Jt=et[4];Jt!=null&&(k.Aa=Jt,k.j.info("SVER="+k.Aa));const Ur=et[5];Ur!=null&&typeof Ur=="number"&&0<Ur&&(O=1.5*Ur,k.L=O,k.j.info("backChannelRequestTimeoutMs_="+O)),O=k;const xr=f.g;if(xr){const ba=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ba){var te=O.h;te.g||ba.indexOf("spdy")==-1&&ba.indexOf("quic")==-1&&ba.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Ou(te,te.h),te.h=null))}if(O.D){const Hl=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(O.ya=Hl,pt(O.I,O.D,Hl))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),O=k;var ye=f;if(O.qa=vf(O,O.J?O.ia:null,O.W),ye.K){of(O.h,ye);var lt=ye,dn=O.L;dn&&(lt.I=dn),lt.B&&(ma(lt),gt(lt)),O.g=ye}else xa(O);0<k.i.length&&Ds(k)}else et[0]!="stop"&&et[0]!="close"||wi(k,7);else k.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?wi(k,7):Tn(k):et[0]!="noop"&&k.l&&k.l.ta(et),k.v=0)}}nr(4)}catch{}}var rf=class{constructor(f,_){this.g=f,this.map=_}};function ga(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vr(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function sf(f){return f.h?1:f.g?f.g.size:0}function $n(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Ou(f,_){f.g?f.g.add(_):f.h=_}function of(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}ga.prototype.cancel=function(){if(this.i=af(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function af(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const k of f.g.values())_=_.concat(k.D);return _}return T(f.i)}function Dl(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var _=[],k=f.length,O=0;O<k;O++)_.push(f[O]);return _}_=[],k=0;for(O in f)_[k++]=f[O];return _}function Ml(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var _=[];f=f.length;for(var k=0;k<f;k++)_.push(k);return _}_=[],k=0;for(const O in f)_[k++]=O;return _}}}function to(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var k=Ml(f),O=Dl(f),G=O.length,te=0;te<G;te++)_.call(void 0,O[te],k&&k[te],f)}var ya=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ny(f,_){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var O=f[k].indexOf("="),G=null;if(0<=O){var te=f[k].substring(0,O);G=f[k].substring(O+1)}else te=f[k];_(te,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function mi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof mi){this.h=f.h,va(this,f.j),this.o=f.o,this.g=f.g,no(this,f.s),this.l=f.l;var _=f.i,k=new As;k.i=_.i,_.g&&(k.g=new Map(_.g),k.h=_.h),ro(this,k),this.m=f.m}else f&&(_=String(f).match(ya))?(this.h=!1,va(this,_[1]||"",!0),this.o=Je(_[2]||""),this.g=Je(_[3]||"",!0),no(this,_[4]),this.l=Je(_[5]||"",!0),ro(this,_[6]||"",!0),this.m=Je(_[7]||"")):(this.h=!1,this.i=new As(null,this.h))}mi.prototype.toString=function(){var f=[],_=this.j;_&&f.push(io(_,Ol,!0),":");var k=this.g;return(k||_=="file")&&(f.push("//"),(_=this.o)&&f.push(io(_,Ol,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(io(k,k.charAt(0)=="/"?uf:cf,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",io(k,Vu)),f.join("")};function wr(f){return new mi(f)}function va(f,_,k){f.j=k?Je(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function no(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function ro(f,_,k){_ instanceof As?(f.i=_,Rs(f.i,f.h)):(k||(_=io(_,df)),f.i=new As(_,f.h))}function pt(f,_,k){f.i.set(_,k)}function so(f){return pt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Je(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function io(f,_,k){return typeof f=="string"?(f=encodeURI(f).replace(_,lf),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function lf(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Ol=/[#\/\?@]/g,cf=/[#\?:]/g,uf=/[#\?]/g,df=/[#\?@]/g,Vu=/#/g;function As(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function En(f){f.g||(f.g=new Map,f.h=0,f.i&&ny(f.i,function(_,k){f.add(decodeURIComponent(_.replace(/\+/g," ")),k)}))}t=As.prototype,t.add=function(f,_){En(this),this.i=null,f=Fr(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(_),this.h+=1,this};function os(f,_){En(f),_=Fr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function as(f,_){return En(f),_=Fr(f,_),f.g.has(_)}t.forEach=function(f,_){En(this),this.g.forEach(function(k,O){k.forEach(function(G){f.call(_,G,O,this)},this)},this)},t.na=function(){En(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),k=[];for(let O=0;O<_.length;O++){const G=f[O];for(let te=0;te<G.length;te++)k.push(_[O])}return k},t.V=function(f){En(this);let _=[];if(typeof f=="string")as(this,f)&&(_=_.concat(this.g.get(Fr(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)_=_.concat(f[k])}return _},t.set=function(f,_){return En(this),this.i=null,f=Fr(this,f),as(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function oo(f,_,k){os(f,_),0<k.length&&(f.i=null,f.g.set(Fr(f,_),T(k)),f.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var k=0;k<_.length;k++){var O=_[k];const te=encodeURIComponent(String(O)),ye=this.V(O);for(O=0;O<ye.length;O++){var G=te;ye[O]!==""&&(G+="="+encodeURIComponent(String(ye[O]))),f.push(G)}}return this.i=f.join("&")};function Fr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Rs(f,_){_&&!f.j&&(En(f),f.i=null,f.g.forEach(function(k,O){var G=O.toLowerCase();O!=G&&(os(this,O),oo(this,G,k))},f)),f.j=_}function ry(f,_){const k=new un;if(c.Image){const O=new Image;O.onload=E(sr,k,"TestLoadImage: loaded",!0,_,O),O.onerror=E(sr,k,"TestLoadImage: error",!1,_,O),O.onabort=E(sr,k,"TestLoadImage: abort",!1,_,O),O.ontimeout=E(sr,k,"TestLoadImage: timeout",!1,_,O),c.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=f}else _(!1)}function hf(f,_){const k=new un,O=new AbortController,G=setTimeout(()=>{O.abort(),sr(k,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:O.signal}).then(te=>{clearTimeout(G),te.ok?sr(k,"TestPingServer: ok",!0,_):sr(k,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(G),sr(k,"TestPingServer: error",!1,_)})}function sr(f,_,k,O,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),O(k)}catch{}}function sy(){this.g=new fa}function ff(f,_,k){const O=k||"";try{to(f,function(G,te){let ye=G;h(G)&&(ye=Xi(G)),_.push(O+te+"="+encodeURIComponent(ye))})}catch(G){throw _.push(O+"type="+encodeURIComponent("_badmap")),G}}function gi(f){this.l=f.Ub||null,this.j=f.eb||!1}S(gi,ns),gi.prototype.g=function(){return new wa(this.l,this.j)},gi.prototype.i=function(f){return function(){return f}}({});function wa(f,_){Tt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(wa,Tt),t=wa.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,cs(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,cs(this)),this.g&&(this.readyState=3,cs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pf(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function pf(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?ls(this):cs(this),this.readyState==3&&pf(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,ls(this))},t.Qa=function(f){this.g&&(this.response=f,ls(this))},t.ga=function(){this.g&&ls(this)};function ls(f){f.readyState=4,f.l=null,f.j=null,f.v=null,cs(f)}t.setRequestHeader=function(f,_){this.u.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var k=_.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=_.next();return f.join(`\r
`)};function cs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function yi(f){let _="";return K(f,function(k,O){_+=O,_+=":",_+=k,_+=`\r
`}),_}function ao(f,_,k){e:{for(O in k){var O=!1;break e}O=!0}O||(k=yi(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):pt(f,_,k))}function kt(f){Tt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(kt,Tt);var iy=/^https?$/i,Lu=["POST","PUT"];t=kt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,_,k,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ss.g(),this.v=this.o?zn(this.o):zn(ss),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(te){_a(this,te);return}if(f=k||"",k=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var G in O)k.set(G,O[G]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const te of O.keys())k.set(te,O.get(te));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(k.keys()).find(te=>te.toLowerCase()=="content-type"),G=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Lu,_,void 0))||O||G||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ye]of k)this.g.setRequestHeader(te,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ll(this),this.u=!0,this.g.send(f),this.u=!1}catch(te){_a(this,te)}};function _a(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,Vl(f),_r(f)}function Vl(f){f.A||(f.A=!0,Kt(f,"complete"),Kt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Kt(this,"complete"),Kt(this,"abort"),_r(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),kt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ju(this):this.bb())},t.bb=function(){ju(this)};function ju(f){if(f.h&&typeof a<"u"&&(!f.v[1]||ir(f)!=4||f.Z()!=2)){if(f.u&&ir(f)==4)fi(f.Ea,0,f);else if(Kt(f,"readystatechange"),ir(f)==4){f.h=!1;try{const ye=f.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var k;if(!(k=_)){var O;if(O=ye===0){var G=String(f.D).match(ya)[1]||null;!G&&c.self&&c.self.location&&(G=c.self.location.protocol.slice(0,-1)),O=!iy.test(G?G.toLowerCase():"")}k=O}if(k)Kt(f,"complete"),Kt(f,"success");else{f.m=6;try{var te=2<ir(f)?f.g.statusText:""}catch{te=""}f.l=te+" ["+f.Z()+"]",Vl(f)}}finally{_r(f)}}}}function _r(f,_){if(f.g){Ll(f);const k=f.g,O=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Kt(f,"ready");try{k.onreadystatechange=O}catch{}}}function Ll(f){f.I&&(c.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function ir(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Ji(_)}};function Fu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function jl(f){const _={};f=(f.g&&2<=ir(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<f.length;O++){if(N(f[O]))continue;var k=U(f[O]);const G=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const te=_[G]||[];_[G]=te,te.push(k)}D(_,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ns(f,_,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||_}function Uu(f){this.Aa=0,this.i=[],this.j=new un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ns("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ns("baseRetryDelayMs",5e3,f),this.cb=Ns("retryDelaySeedMs",1e4,f),this.Wa=Ns("forwardChannelMaxRetries",2,f),this.wa=Ns("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ga(f&&f.concurrentRequestLimit),this.Da=new sy,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Uu.prototype,t.la=8,t.G=1,t.connect=function(f,_,k,O){Ze(0),this.W=f,this.H=_||{},k&&O!==void 0&&(this.H.OSID=k,this.H.OAID=O),this.F=this.X,this.I=vf(this,null,this.W),Ds(this)};function Tn(f){if(Fl(f),f.G==3){var _=f.U++,k=wr(f.I);if(pt(k,"SID",f.K),pt(k,"RID",_),pt(k,"TYPE","terminate"),vi(f,k),_=new is(f,f.j,_),_.L=2,_.v=so(wr(k)),k=!1,c.navigator&&c.navigator.sendBeacon)try{k=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!k&&c.Image&&(new Image().src=_.v,k=!0),k||(_.g=wf(_.j,null),_.g.ea(_.v)),_.F=Date.now(),gt(_)}yf(f)}function us(f){f.g&&(Bu(f),f.g.cancel(),f.g=null)}function Fl(f){us(f),f.u&&(c.clearTimeout(f.u),f.u=null),zl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function Ds(f){if(!vr(f.h)&&!f.s){f.s=!0;var _=f.Ga;se||le(),$||(se(),$=!0),ie.add(_,f),f.B=0}}function oy(f,_){return sf(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Mt(v(f.Ga,f,_),gf(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new is(this,this.j,f);let te=this.o;if(this.S&&(te?(te=P(te),F(te,this.S)):te=this.S),this.m!==null||this.O||(G.H=te,te=null),this.P)e:{for(var _=0,k=0;k<this.i.length;k++){t:{var O=this.i[k];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(_+=O,4096<_){_=k;break e}if(_===4096||k===this.i.length-1){_=k+1;break e}}_=1e3}else _=1e3;_=lo(this,G,_),k=wr(this.I),pt(k,"RID",f),pt(k,"CVER",22),this.D&&pt(k,"X-HTTP-Session-Id",this.D),vi(this,k),te&&(this.O?_="headers="+encodeURIComponent(String(yi(te)))+"&"+_:this.m&&ao(k,this.m,te)),Ou(this.h,G),this.Ua&&pt(k,"TYPE","init"),this.P?(pt(k,"$req",_),pt(k,"SID","null"),G.T=!0,Nl(G,k,null)):Nl(G,k,_),this.G=2}}else this.G==3&&(f?Ul(this,f):this.i.length==0||vr(this.h)||Ul(this))};function Ul(f,_){var k;_?k=_.l:k=f.U++;const O=wr(f.I);pt(O,"SID",f.K),pt(O,"RID",k),pt(O,"AID",f.T),vi(f,O),f.m&&f.o&&ao(O,f.m,f.o),k=new is(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),_&&(f.i=_.D.concat(f.i)),_=lo(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Ou(f.h,k),Nl(k,O,_)}function vi(f,_){f.H&&K(f.H,function(k,O){pt(_,O,k)}),f.l&&to({},function(k,O){pt(_,O,k)})}function lo(f,_,k){k=Math.min(f.i.length,k);var O=f.l?v(f.l.Na,f.l,f):null;e:{var G=f.i;let te=-1;for(;;){const ye=["count="+k];te==-1?0<k?(te=G[0].g,ye.push("ofs="+te)):te=0:ye.push("ofs="+te);let lt=!0;for(let dn=0;dn<k;dn++){let et=G[dn].g;const yn=G[dn].map;if(et-=te,0>et)te=Math.max(0,G[dn].g-100),lt=!1;else try{ff(yn,ye,"req"+et+"_")}catch{O&&O(yn)}}if(lt){O=ye.join("&");break e}}}return f=f.i.splice(0,k),_.D=f,O}function xa(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;se||le(),$||(se(),$=!0),ie.add(_,f),f.v=0}}function Bl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Mt(v(f.Fa,f),gf(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,mf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Mt(v(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),us(this),mf(this))};function Bu(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function mf(f){f.g=new is(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=wr(f.qa);pt(_,"RID","rpc"),pt(_,"SID",f.K),pt(_,"AID",f.T),pt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&pt(_,"TO",f.ja),pt(_,"TYPE","xmlhttp"),vi(f,_),f.m&&f.o&&ao(_,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=so(wr(_)),k.m=null,k.P=!0,Du(k,f)}t.Za=function(){this.C!=null&&(this.C=null,us(this),Bl(this),Ze(19))};function zl(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function $l(f,_){var k=null;if(f.g==_){zl(f),Bu(f),f.g=null;var O=2}else if($n(f.h,_))k=_.D,of(f.h,_),O=1;else return;if(f.G!=0){if(_.o)if(O==1){k=_.m?_.m.length:0,_=Date.now()-_.F;var G=f.B;O=It(),Kt(O,new rs(O,k)),Ds(f)}else xa(f);else if(G=_.s,G==3||G==0&&0<_.X||!(O==1&&oy(f,_)||O==2&&Bl(f)))switch(k&&0<k.length&&(_=f.h,_.i=_.i.concat(k)),G){case 1:wi(f,5);break;case 4:wi(f,10);break;case 3:wi(f,6);break;default:wi(f,2)}}}function gf(f,_){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*_}function wi(f,_){if(f.j.info("Error code "+_),_==2){var k=v(f.fb,f),O=f.Xa;const G=!O;O=new mi(O||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||va(O,"https"),so(O),G?ry(O.toString(),k):hf(O.toString(),k)}else Ze(2);f.G=0,f.l&&f.l.sa(_),yf(f),Fl(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function yf(f){if(f.G=0,f.ka=[],f.l){const _=af(f.h);(_.length!=0||f.i.length!=0)&&(I(f.ka,_),I(f.ka,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.ra()}}function vf(f,_,k){var O=k instanceof mi?wr(k):new mi(k);if(O.g!="")_&&(O.g=_+"."+O.g),no(O,O.s);else{var G=c.location;O=G.protocol,_=_?_+"."+G.hostname:G.hostname,G=+G.port;var te=new mi(null);O&&va(te,O),_&&(te.g=_),G&&no(te,G),k&&(te.l=k),O=te}return k=f.D,_=f.ya,k&&_&&pt(O,k,_),pt(O,"VER",f.la),vi(f,O),O}function wf(f,_,k){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new kt(new gi({eb:k})):new kt(f.pa),_.Ha(f.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}t=zu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wl(){}Wl.prototype.g=function(f,_){return new Wn(f,_)};function Wn(f,_){Tt.call(this),this.g=new Uu(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!N(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!N(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Ms(this)}S(Wn,Tt),Wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Tn(this.g)},Wn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=Xi(f),f=k);_.i.push(new rf(_.Ya++,f)),_.G==3&&Ds(_)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Tn(this.g),delete this.g,Wn.aa.N.call(this)};function _f(f){yr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const k in _){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}S(_f,yr);function xf(){pi.call(this),this.status=1}S(xf,pi);function Ms(f){this.g=f}S(Ms,zu),Ms.prototype.ua=function(){Kt(this.g,"a")},Ms.prototype.ta=function(f){Kt(this.g,new _f(f))},Ms.prototype.sa=function(f){Kt(this.g,new xf)},Ms.prototype.ra=function(){Kt(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,IP=function(){return new Wl},SP=function(){return It()},TP=Oe,U0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,qp=Al,Zh.COMPLETE="complete",EP=Zh,Zi.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Id=Zi,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,bP=kt}).apply(typeof yp<"u"?yp:typeof self<"u"?self:typeof window<"u"?window:{});const SS="@firebase/firestore",IS="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=new p_("@firebase/firestore");function Ec(){return dl.logLevel}function fe(t,...e){if(dl.logLevel<=Qe.DEBUG){const n=e.map(S_);dl.debug(`Firestore (${gu}): ${t}`,...n)}}function Gn(t,...e){if(dl.logLevel<=Qe.ERROR){const n=e.map(S_);dl.error(`Firestore (${gu}): ${t}`,...n)}}function hl(t,...e){if(dl.logLevel<=Qe.WARN){const n=e.map(S_);dl.warn(`Firestore (${gu}): ${t}`,...n)}}function S_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,kP(t,r,n)}function kP(t,e,n){let r=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function Re(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||kP(e,s,r)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cn.UNAUTHENTICATED))}shutdown(){}}class o3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a3{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new CP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class l3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class c3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new l3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class u3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Re(this.o===void 0,3512);const r=i=>{i.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,fe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new kS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=d3(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Be(t,e){return t<e?-1:t>e?1:0}function B0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return zv(s)===zv(i)?Be(s,i):zv(s)?1:-1}return Be(t.length,e.length)}const h3=55296,f3=57343;function zv(t){const e=t.charCodeAt(0);return e>=h3&&e<=f3}function qc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function PP(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="__name__";class Bs{constructor(e,n,r){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ke(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Bs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Be(e.length,n.length)}static compareSegments(e,n){const r=Bs.isNumericId(e),s=Bs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Bs.extractNumericId(e).compare(Bs.extractNumericId(n)):B0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zo.fromString(e.substring(4,e.length-2))}}class at extends Bs{construct(e,n,r){return new at(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new at(n)}static emptyPath(){return new at([])}}const p3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Bs{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return p3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CS}static keyField(){return new Lt([CS])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(at.fromString(e))}static fromName(e){return new we(at.fromString(e).popFirst(5))}static empty(){return new we(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t,e,n){if(!n)throw new ge(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m3(t,e,n,r){if(e===!0&&r===!0)throw new ge(ne.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PS(t){if(!we.isDocumentKey(t))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function AS(t){if(we.isDocumentKey(t))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function RP(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ug(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke(12329,{type:typeof t})}function Nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ug(t);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,e){const n={typeString:t};return e&&(n.value=e),n}function Mh(t,e){if(!RP(t))throw new ge(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ge(ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=-62135596800,NS=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*NS);return new ut(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<RS)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NS}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mh(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:on("string",ut._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new ut(0,0))}static max(){return new Me(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=-1;class Sm{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function z0(t){return t.fields.find(e=>e.kind===2)}function Ba(t){return t.fields.filter(e=>e.kind!==2)}Sm.UNKNOWN_ID=-1;class Kp{constructor(e,n){this.fieldPath=e,this.kind=n}}class th{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new th(0,Or.min())}}function g3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new Or(s,we.empty(),e)}function NP(t){return new Or(t.readTime,t.key,eh)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(Me.min(),we.empty(),eh)}static max(){return new Or(Me.max(),we.empty(),eh)}}function k_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==DP)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Y((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Y?n:Y.resolve(n)}catch(n){return Y.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Y.reject(n)}static resolve(e){return new Y((n,r)=>{n(e)})}static reject(e){return new Y((n,r)=>{r(e)})}static waitFor(e){return new Y((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=Y.resolve(!1);for(const r of e)n=n.next(s=>s?Y.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Y((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{a[h]=p,++c,c===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new Y((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="SimpleDb";class dg{static open(e,n,r,s){try{return new dg(n,e.transaction(s,r))}catch(i){throw new Vd(n,i)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Qs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Vd(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=C_(r.target.error);this.S.reject(new Vd(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(Sr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new v3(n)}}class $o{static delete(e){return fe(Sr,"Removing database:",e),Ha(kC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!VC())return!1;if($o.F())return!0;const e=mn(),n=$o.M(e),r=0<n&&n<10,s=OP(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,$o.M(mn())===12.2&&Gn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(Sr,"Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const a=i.target.result;n(a)},s.onblocked=()=>{r(new Vd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const a=i.target.error;a.name==="VersionError"?r(new ge(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new ge(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new Vd(e,a))},s.onupgradeneeded=i=>{fe(Sr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const a=i.target.result;this.N.k(a,s.transaction,i.oldVersion,this.version).next(()=>{fe(Sr,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const c=dg.open(this.db,e,i?"readonly":"readwrite",r),u=s(c).next(h=>(c.C(),h)).catch(h=>(c.abort(h),Y.reject(h))).toPromise();return u.catch(()=>{}),await c.D,u}catch(c){const u=c,h=u.name!=="FirebaseError"&&a<3;if(fe(Sr,"Transaction failed with error:",u.message,"Retrying:",h),this.close(),!h)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class y3{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ha(this.U.delete())}}class Vd extends ge{constructor(e,n){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function sa(t){return t.name==="IndexedDbTransactionError"}class v3{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(fe(Sr,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(fe(Sr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ha(r)}add(e){return fe(Sr,"ADD",this.store.name,e,e),Ha(this.store.add(e))}get(e){return Ha(this.store.get(e)).next(n=>(n===void 0&&(n=null),fe(Sr,"GET",this.store.name,e,n),n))}delete(e){return fe(Sr,"DELETE",this.store.name,e),Ha(this.store.delete(e))}count(){return fe(Sr,"COUNT",this.store.name),Ha(this.store.count())}J(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new Y((a,c)=>{i.onerror=u=>{c(u.target.error)},i.onsuccess=u=>{a(u.target.result)}})}{const i=this.cursor(r),a=[];return this.H(i,(c,u)=>{a.push(u)}).next(()=>a)}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new Y((s,i)=>{r.onerror=a=>{i(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}Z(e,n){fe(Sr,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,a,c)=>c.delete())}ee(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}te(e){const n=this.cursor({});return new Y((r,s)=>{n.onerror=i=>{const a=C_(i.target.error);s(a)},n.onsuccess=i=>{const a=i.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}H(e,n){const r=[];return new Y((s,i)=>{e.onerror=a=>{i(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void s();const u=new y3(c),h=n(c.primaryKey,c.value,u);if(h instanceof Y){const p=h.catch(m=>(u.done(),Y.reject(m)));r.push(p)}u.isDone?s():u.G===null?c.continue():c.continue(u.G)}}).next(()=>Y.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ha(t){return new Y((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=C_(r.target.error);n(s)}})}let DS=!1;function C_(t){const e=$o.M(mn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DS||(DS=!0,setTimeout(()=>{throw r},0)),r}}return t}const Ld="IndexBackfiller";class w3{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe(Ld,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const n=await this.ne.ie();fe(Ld,`Documents written: ${n}`)}catch(n){sa(n)?fe(Ld,"Ignoring IndexedDB error during index backfill: ",n):await Cl(n)}await this.re(6e4)})}}class _3{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.se(n,e))}se(e,n){const r=new Set;let s=n,i=!0;return Y.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return fe(Ld,`Processing collection: ${a}`),this.oe(e,a,s).next(c=>{s-=c,r.add(a)});i=!1})).next(()=>n-s)}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const a=i.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this._e(s,i)).next(c=>(fe(Ld,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>a.size)}))}_e(e,n){let r=e;return n.changes.forEach((s,i)=>{const a=NP(i);k_(a,r)>0&&(r=a)}),new Or(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=-1;function hg(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function x3(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="";function Fn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MS(e)),e=b3(t.get(n),e);return MS(e)}function b3(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Im:n+="";break;default:n+=i}}return n}function MS(t){return t+Im+""}function $s(t){const e=t.length;if(Re(e>=2,64408,{path:t}),e===2)return Re(t.charAt(0)===Im&&t.charAt(1)==="",56145,{path:t}),at.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const a=t.indexOf(Im,i);switch((a<0||a>n)&&ke(50515,{path:t}),t.charAt(a+1)){case"":const c=t.substring(i,a);let u;s.length===0?u=c:(s+=c,u=s,s=""),r.push(u);break;case"":s+=t.substring(i,a),s+="\0";break;case"":s+=t.substring(i,a+1);break;default:ke(61167,{path:t})}i=a+2}return new at(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="remoteDocuments",Oh="owner",hc="owner",rh="mutationQueues",E3="userId",_s="mutations",OS="batchId",Ya="userMutationsIndex",VS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){return[t,Fn(e)]}function VP(t,e,n){return[t,Fn(e),n]}const T3={},Kc="documentMutations",km="remoteDocumentsV14",S3=["prefixPath","collectionGroup","readTime","documentId"],Yp="documentKeyIndex",I3=["prefixPath","collectionGroup","documentId"],LP="collectionGroupIndex",k3=["collectionGroup","readTime","prefixPath","documentId"],sh="remoteDocumentGlobal",$0="remoteDocumentGlobalKey",Gc="targets",jP="queryTargetsIndex",C3=["canonicalId","targetId"],Yc="targetDocuments",P3=["targetId","path"],P_="documentTargetsIndex",A3=["path","targetId"],Cm="targetGlobalKey",Za="targetGlobal",ih="collectionParents",R3=["collectionId","parent"],Qc="clientMetadata",N3="clientId",fg="bundles",D3="bundleId",pg="namedQueries",M3="name",A_="indexConfiguration",O3="indexId",W0="collectionGroupIndex",V3="collectionGroup",jd="indexState",L3=["indexId","uid"],FP="sequenceNumberIndex",j3=["uid","sequenceNumber"],Fd="indexEntries",F3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UP="documentKeyIndex",U3=["indexId","uid","orderedDocumentKey"],mg="documentOverlays",B3=["userId","collectionPath","documentId"],H0="collectionPathOverlayIndex",z3=["userId","collectionPath","largestBatchId"],BP="collectionGroupOverlayIndex",$3=["userId","collectionGroup","largestBatchId"],R_="globals",W3="name",zP=[rh,_s,Kc,za,Gc,Oh,Za,Yc,Qc,sh,ih,fg,pg],H3=[...zP,mg],$P=[rh,_s,Kc,km,Gc,Oh,Za,Yc,Qc,sh,ih,fg,pg,mg],WP=$P,N_=[...WP,A_,jd,Fd],q3=N_,HP=[...N_,R_],K3=HP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends MP{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function gn(t,e){const n=ze(t);return $o.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.comparator=e,this.root=n||Pn.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vp(this.root,e,this.comparator,!1)}getReverseIterator(){return new vp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vp(this.root,e,this.comparator,!0)}}class vp{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Pn.RED,this.left=s??Pn.EMPTY,this.right=i??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Pn(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Pn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jS(this.data.getIterator())}getIteratorFrom(e){return new jS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class jS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fc(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new pr([])}unionWith(e){let n=new ht(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new KP("Invalid base64 string: "+i):i}}(e);return new an(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const G3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(Re(!!t,39018),typeof t=="string"){let e=0;const n=G3.exec(t);if(Re(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fi(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="server_timestamp",YP="__type__",QP="__previous_value__",XP="__local_write_time__";function D_(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YP])==null?void 0:r.stringValue)===GP}function gg(t){const e=t.mapValue.fields[QP];return D_(e)?gg(e):e}function oh(t){const e=ji(t.mapValue.fields[XP].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n,r,s,i,a,c,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p}}const Pm="(default)";class fl{constructor(e,n){this.projectId=e,this.database=n||Pm}static empty(){return new fl("","")}get isDefaultDatabase(){return this.database===Pm}isEqual(e){return e instanceof fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="__type__",JP="__max__",Fo={mapValue:{fields:{__type__:{stringValue:JP}}}},O_="__vector__",Xc="value",Qp={nullValue:"NULL_VALUE"};function Ko(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?D_(t)?4:ZP(t)?9007199254740991:yg(t)?10:11:ke(28295,{value:t})}function ii(t,e){if(t===e)return!0;const n=Ko(t);if(n!==Ko(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oh(t).isEqual(oh(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ji(s.timestampValue),c=ji(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Fi(s.bytesValue).isEqual(Fi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pt(s.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(s.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pt(s.integerValue)===Pt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Pt(s.doubleValue),c=Pt(i.doubleValue);return a===c?nh(a)===nh(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return qc(t.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(LS(a)!==LS(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!ii(a[u],c[u])))return!1;return!0}(t,e);default:return ke(52216,{left:t})}}function ah(t,e){return(t.values||[]).find(n=>ii(n,e))!==void 0}function Go(t,e){if(t===e)return 0;const n=Ko(t),r=Ko(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Pt(i.integerValue||i.doubleValue),u=Pt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return FS(t.timestampValue,e.timestampValue);case 4:return FS(oh(t),oh(e));case 5:return B0(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Fi(i),u=Fi(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let h=0;h<c.length&&h<u.length;h++){const p=Be(c[h],u[h]);if(p!==0)return p}return Be(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Be(Pt(i.latitude),Pt(a.latitude));return c!==0?c:Be(Pt(i.longitude),Pt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return US(t.arrayValue,e.arrayValue);case 10:return function(i,a){var v,E,S,T;const c=i.fields||{},u=a.fields||{},h=(v=c[Xc])==null?void 0:v.arrayValue,p=(E=u[Xc])==null?void 0:E.arrayValue,m=Be(((S=h==null?void 0:h.values)==null?void 0:S.length)||0,((T=p==null?void 0:p.values)==null?void 0:T.length)||0);return m!==0?m:US(h,p)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Fo.mapValue&&a===Fo.mapValue)return 0;if(i===Fo.mapValue)return 1;if(a===Fo.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=a.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const v=B0(u[m],p[m]);if(v!==0)return v;const E=Go(c[u[m]],h[p[m]]);if(E!==0)return E}return Be(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ke(23264,{he:n})}}function FS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=ji(t),r=ji(e),s=Be(n.seconds,r.seconds);return s!==0?s:Be(n.nanos,r.nanos)}function US(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Go(n[s],r[s]);if(i)return i}return Be(n.length,r.length)}function Jc(t){return K0(t)}function K0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=K0(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${K0(n.fields[a])}`;return s+"}"}(t.mapValue):ke(61005,{value:t})}function Xp(t){switch(Ko(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gg(t);return e?16+Xp(e):16;case 5:return 2*t.stringValue.length;case 6:return Fi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Xp(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ia(r.fields,(i,a)=>{s+=i.length+Xp(a)}),s}(t.mapValue);default:throw ke(13486,{value:t})}}function lh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function G0(t){return!!t&&"integerValue"in t}function ch(t){return!!t&&"arrayValue"in t}function BS(t){return!!t&&"nullValue"in t}function zS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jp(t){return!!t&&"mapValue"in t}function yg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[M_])==null?void 0:r.stringValue)===O_}function Ud(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ud(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ud(t.arrayValue.values[n]);return e}return{...t}}function ZP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JP}const eA={mapValue:{fields:{[M_]:{stringValue:O_},[Xc]:{arrayValue:{}}}}};function Q3(t){return"nullValue"in t?Qp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?lh(fl.empty(),we.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?yg(t)?eA:{mapValue:{}}:ke(35942,{value:t})}function X3(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?lh(fl.empty(),we.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?eA:"mapValue"in t?yg(t)?{mapValue:{}}:Fo:ke(61959,{value:t})}function $S(t,e){const n=Go(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function WS(t,e){const n=Go(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ud(n)}setAll(e){let n=Lt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ud(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Jp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Jp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ia(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ln(Ud(this.value))}}function tA(t){const e=[];return ia(t.fields,(n,r)=>{const s=new Lt([n]);if(Jp(r)){const i=tA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new $t(e,0,Me.min(),Me.min(),Me.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,s){return new $t(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new $t(e,2,n,Me.min(),Me.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,Me.min(),Me.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function HS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=we.comparator(we.fromName(a.referenceValue),n.key):r=Go(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function qS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n="asc"){this.field=e,this.dir=n}}function J3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{}class Xe extends nA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Z3(e,n,r):n==="array-contains"?new nU(e,r):n==="in"?new lA(e,r):n==="not-in"?new rU(e,r):n==="array-contains-any"?new sU(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new eU(e,r):new tU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Go(n,this.value)):n!==null&&Ko(this.value)===Ko(n)&&this.matchesComparison(Go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dt extends nA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dt(e,n)}matches(e){return eu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eu(t){return t.op==="and"}function Y0(t){return t.op==="or"}function V_(t){return rA(t)&&eu(t)}function rA(t){for(const e of t.filters)if(e instanceof dt)return!1;return!0}function Q0(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+Jc(t.value);if(V_(t))return t.filters.map(e=>Q0(e)).join(",");{const e=t.filters.map(n=>Q0(n)).join(",");return`${t.op}(${e})`}}function sA(t,e){return t instanceof Xe?function(r,s){return s instanceof Xe&&r.op===s.op&&r.field.isEqual(s.field)&&ii(r.value,s.value)}(t,e):t instanceof dt?function(r,s){return s instanceof dt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&sA(a,s.filters[c]),!0):!1}(t,e):void ke(19439)}function iA(t,e){const n=t.filters.concat(e);return dt.create(n,t.op)}function oA(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${Jc(n.value)}`}(t):t instanceof dt?function(n){return n.op.toString()+" {"+n.getFilters().map(oA).join(" ,")+"}"}(t):"Filter"}class Z3 extends Xe{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class eU extends Xe{constructor(e,n){super(e,"in",n),this.keys=aA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tU extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=aA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function aA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class nU extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ch(n)&&ah(n.arrayValue,this.value)}}class lA extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ah(this.value.arrayValue,n)}}class rU extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ah(this.value.arrayValue,n)}}class sU extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ch(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function X0(t,e=null,n=[],r=[],s=null,i=null,a=null){return new iU(t,e,n,r,s,i,a)}function pl(t){const e=ze(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Q0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),hg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jc(r)).join(",")),e.Te=n}return e.Te}function Vh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!J3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qS(t.startAt,e.startAt)&&qS(t.endAt,e.endAt)}function Am(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Rm(t,e){return t.filters.filter(n=>n instanceof Xe&&n.field.isEqual(e))}function KS(t,e,n){let r=Qp,s=!0;for(const i of Rm(t,e)){let a=Qp,c=!0;switch(i.op){case"<":case"<=":a=Q3(i.value);break;case"==":case"in":case">=":a=i.value;break;case">":a=i.value,c=!1;break;case"!=":case"not-in":a=Qp}$S({value:r,inclusive:s},{value:a,inclusive:c})<0&&(r=a,s=c)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];$S({value:r,inclusive:s},{value:a,inclusive:n.inclusive})<0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}function GS(t,e,n){let r=Fo,s=!0;for(const i of Rm(t,e)){let a=Fo,c=!0;switch(i.op){case">=":case">":a=X3(i.value),c=!1;break;case"==":case"in":case"<=":a=i.value;break;case"<":a=i.value,c=!1;break;case"!=":case"not-in":a=Fo}WS({value:r,inclusive:s},{value:a,inclusive:c})>0&&(r=a,s=c)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const a=n.position[i];WS({value:r,inclusive:s},{value:a,inclusive:n.inclusive})>0&&(r=a,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oU(t,e,n,r,s,i,a,c){return new yu(t,e,n,r,s,i,a,c)}function Lh(t){return new yu(t)}function YS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cA(t){return t.collectionGroup!==null}function Bd(t){const e=ze(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new ht(Lt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new uh(i,r))}),n.has(Lt.keyField().canonicalString())||e.Ie.push(new uh(Lt.keyField(),r))}return e.Ie}function Jr(t){const e=ze(t);return e.Ee||(e.Ee=aU(e,Bd(t))),e.Ee}function aU(t,e){if(t.limitType==="F")return X0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new uh(s.field,i)});const n=t.endAt?new Zc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zc(t.startAt.position,t.startAt.inclusive):null;return X0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function J0(t,e){const n=t.filters.concat([e]);return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Z0(t,e,n){return new yu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vg(t,e){return Vh(Jr(t),Jr(e))&&t.limitType===e.limitType}function uA(t){return`${pl(Jr(t))}|lt:${t.limitType}`}function Tc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>oA(s)).join(", ")}]`),hg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Jc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Jc(s)).join(",")),`Target(${r})`}(Jr(t))}; limitType=${t.limitType})`}function jh(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):we.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Bd(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const h=HS(a,c,u);return a.inclusive?h<=0:h<0}(r.startAt,Bd(r),s)||r.endAt&&!function(a,c,u){const h=HS(a,c,u);return a.inclusive?h>=0:h>0}(r.endAt,Bd(r),s))}(t,e)}function lU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dA(t){return(e,n)=>{let r=!1;for(const s of Bd(t)){const i=cU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function cU(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),h=c.data.field(i);return u!==null&&h!==null?Go(u,h):ke(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ke(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU=new Nt(we.comparator);function Ar(){return uU}const hA=new Nt(we.comparator);function kd(...t){let e=hA;for(const n of t)e=e.insert(n.key,n);return e}function fA(t){let e=hA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ws(){return zd()}function pA(){return zd()}function zd(){return new Gi(t=>t.toString(),(t,e)=>t.isEqual(e))}const dU=new Nt(we.comparator),hU=new ht(we.comparator);function Ge(...t){let e=hU;for(const n of t)e=e.add(n);return e}const fU=new ht(Be);function pU(){return fU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function mA(t){return{integerValue:""+t}}function mU(t,e){return x3(e)?mA(e):L_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(){this._=void 0}}function gU(t,e,n){return t instanceof tu?function(s,i){const a={fields:{[YP]:{stringValue:GP},[XP]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&D_(i)&&(i=gg(i)),i&&(a.fields[QP]=i),{mapValue:a}}(n,e):t instanceof nu?yA(t,e):t instanceof ru?vA(t,e):function(s,i){const a=gA(s,i),c=QS(a)+QS(s.Ae);return G0(a)&&G0(s.Ae)?mA(c):L_(s.serializer,c)}(t,e)}function yU(t,e,n){return t instanceof nu?yA(t,e):t instanceof ru?vA(t,e):n}function gA(t,e){return t instanceof dh?function(r){return G0(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class tu extends wg{}class nu extends wg{constructor(e){super(),this.elements=e}}function yA(t,e){const n=wA(e);for(const r of t.elements)n.some(s=>ii(s,r))||n.push(r);return{arrayValue:{values:n}}}class ru extends wg{constructor(e){super(),this.elements=e}}function vA(t,e){let n=wA(e);for(const r of t.elements)n=n.filter(s=>!ii(s,r));return{arrayValue:{values:n}}}class dh extends wg{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function QS(t){return Pt(t.integerValue||t.doubleValue)}function wA(t){return ch(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.field=e,this.transform=n}}function vU(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof nu&&s instanceof nu||r instanceof ru&&s instanceof ru?qc(r.elements,s.elements,ii):r instanceof dh&&s instanceof dh?ii(r.Ae,s.Ae):r instanceof tu&&s instanceof tu}(t.transform,e.transform)}class wU{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _g{}function xA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xg(t.key,Yn.none()):new vu(t.key,t.data,Yn.none());{const n=t.data,r=Ln.empty();let s=new ht(Lt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Yi(t.key,r,new pr(s.toArray()),Yn.none())}}function _U(t,e,n){t instanceof vu?function(s,i,a){const c=s.value.clone(),u=JS(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Yi?function(s,i,a){if(!Zp(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=JS(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(bA(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function $d(t,e,n,r){return t instanceof vu?function(i,a,c,u){if(!Zp(i.precondition,a))return c;const h=i.value.clone(),p=ZS(i.fieldTransforms,u,a);return h.setAll(p),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yi?function(i,a,c,u){if(!Zp(i.precondition,a))return c;const h=ZS(i.fieldTransforms,u,a),p=a.data;return p.setAll(bA(i)),p.setAll(h),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return Zp(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function xU(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=gA(r.transform,s||null);i!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,i))}return n||null}function XS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&qc(r,s,(i,a)=>vU(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vu extends _g{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yi extends _g{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function JS(t,e,n){const r=new Map;Re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,yU(a,c,n[s]))}return r}function ZS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,gU(i,a,e))}return r}class xg extends _g{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EA extends _g{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&_U(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$d(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$d(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pA();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=xA(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&qc(this.mutations,e.mutations,(n,r)=>XS(n,r))&&qc(this.baseMutations,e.baseMutations,(n,r)=>XS(n,r))}}class F_{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return dU}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new F_(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,tt;function EU(t){switch(t){case ne.OK:return ke(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ke(15467,{code:t})}}function TA(t){if(t===void 0)return Gn("GRPC error has no .code"),ne.UNKNOWN;switch(t){case en.OK:return ne.OK;case en.CANCELLED:return ne.CANCELLED;case en.UNKNOWN:return ne.UNKNOWN;case en.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case en.INTERNAL:return ne.INTERNAL;case en.UNAVAILABLE:return ne.UNAVAILABLE;case en.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case en.NOT_FOUND:return ne.NOT_FOUND;case en.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case en.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case en.ABORTED:return ne.ABORTED;case en.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case en.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case en.DATA_LOSS:return ne.DATA_LOSS;default:return ke(39323,{code:t})}}(tt=en||(en={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=new zo([4294967295,4294967295],0);function e1(t){const e=TU().encode(t),n=new xP;return n.update(e),new Uint8Array(n.digest())}function t1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new zo([n,r],0),new zo([s,i],0)]}class B_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Cd(`Invalid padding: ${n}`);if(r<0)throw new Cd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Cd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Cd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zo.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(zo.fromNumber(r)));return s.compare(SU)===1&&(s=new zo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=e1(e),[r,s]=t1(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new B_(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=e1(e),[r,s]=t1(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Cd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bg(Me.min(),s,new Nt(Be),Ar(),Ge())}}class Fh{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fh(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class SA{constructor(e,n){this.targetId=e,this.Ce=n}}class IA{constructor(e,n,r=an.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class n1{constructor(){this.ve=0,this.Fe=r1(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ge(),n=Ge(),r=Ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ke(38017,{changeType:i})}}),new Fh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=r1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IU{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ar(),this.Je=wp(),this.He=wp(),this.Ye=new Nt(Be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Am(i))if(r===0){const a=new we(i.path);this.et(n,a,$t.newNoDocument(a,Me.min()))}else Re(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Fi(r).toUint8Array()}catch(u){if(u instanceof KP)return hl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new B_(a,s,i)}catch(u){return hl(u instanceof Cd?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&Am(c.target)){const u=new we(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,$t.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Ge();this.He.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new bg(e,n,this.Ye,this.je,r);return this.je=Ar(),this.Je=wp(),this.He=wp(),this.Ye=new Nt(Be),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new n1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ht(Be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ht(Be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new n1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function wp(){return new Nt(we.comparator)}function r1(){return new Nt(we.comparator)}const kU={asc:"ASCENDING",desc:"DESCENDING"},CU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PU={and:"AND",or:"OR"};class AU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ew(t,e){return t.useProto3Json||hg(e)?e:{value:e}}function su(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RU(t,e){return su(t,e.toTimestamp())}function Xn(t){return Re(!!t,49232),Me.fromTimestamp(function(n){const r=ji(n);return new ut(r.seconds,r.nanos)}(t))}function z_(t,e){return tw(t,e).canonicalString()}function tw(t,e){const n=function(s){return new at(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function CA(t){const e=at.fromString(t);return Re(LA(e),10190,{key:e.toString()}),e}function Nm(t,e){return z_(t.databaseId,e.path)}function el(t,e){const n=CA(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(RA(n))}function PA(t,e){return z_(t.databaseId,e)}function AA(t){const e=CA(t);return e.length===4?at.emptyPath():RA(e)}function nw(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function RA(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function s1(t,e,n){return{name:Nm(t,e),fields:n.value.mapValue.fields}}function NU(t,e,n){const r=el(t,e.name),s=Xn(e.updateTime),i=e.createTime?Xn(e.createTime):Me.min(),a=new Ln({mapValue:{fields:e.fields}}),c=$t.newFoundDocument(r,s,i,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function DU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ke(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Re(p===void 0||typeof p=="string",58123),an.fromBase64String(p||"")):(Re(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),an.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){const p=h.code===void 0?ne.UNKNOWN:TA(h.code);return new ge(p,h.message||"")}(a);n=new IA(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=el(t,r.document.name),i=Xn(r.document.updateTime),a=r.document.createTime?Xn(r.document.createTime):Me.min(),c=new Ln({mapValue:{fields:r.document.fields}}),u=$t.newFoundDocument(s,i,a,c),h=r.targetIds||[],p=r.removedTargetIds||[];n=new em(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=el(t,r.document),i=r.readTime?Xn(r.readTime):Me.min(),a=$t.newNoDocument(s,i),c=r.removedTargetIds||[];n=new em([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=el(t,r.document),i=r.removedTargetIds||[];n=new em([],i,s,null)}else{if(!("filter"in e))return ke(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new bU(s,i),c=r.targetId;n=new SA(c,a)}}return n}function Dm(t,e){let n;if(e instanceof vu)n={update:s1(t,e.key,e.value)};else if(e instanceof xg)n={delete:Nm(t,e.key)};else if(e instanceof Yi)n={update:s1(t,e.key,e.data),updateMask:FU(e.fieldMask)};else{if(!(e instanceof EA))return ke(16599,{Vt:e.type});n={verify:Nm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof tu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof nu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ru)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof dh)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw ke(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:RU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ke(27497)}(t,e.precondition)),n}function rw(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Yn.updateTime(Xn(i.updateTime)):i.exists!==void 0?Yn.exists(i.exists):Yn.none()}(e.currentDocument):Yn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(a,c){let u=null;if("setToServerValue"in c)Re(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),u=new tu;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];u=new nu(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];u=new ru(p)}else"increment"in c?u=new dh(a,c.increment):ke(16584,{proto:c});const h=Lt.fromServerFormat(c.fieldPath);return new _A(h,u)}(t,s)):[];if(e.update){e.update.name;const s=el(t,e.update.name),i=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(u){const h=u.fieldPaths||[];return new pr(h.map(p=>Lt.fromServerFormat(p)))}(e.updateMask);return new Yi(s,i,a,n,r)}return new vu(s,i,n,r)}if(e.delete){const s=el(t,e.delete);return new xg(s,n)}if(e.verify){const s=el(t,e.verify);return new EA(s,n)}return ke(1463,{proto:e})}function MU(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Xn(s.updateTime):Xn(i);return a.isEqual(Me.min())&&(a=Xn(i)),new wU(a,s.transformResults||[])}(n,e))):[]}function NA(t,e){return{documents:[PA(t,e.path)]}}function DA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PA(t,s);const i=function(h){if(h.length!==0)return VA(dt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(p=>function(v){return{field:Sc(v.field),direction:VU(v.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=ew(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:s}}function MA(t){let e=AA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const v=OA(m);return v instanceof dt&&V_(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(v=>function(S){return new uh(Ic(S.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let c=null;n.limit&&(c=function(m){let v;return v=typeof m=="object"?m.value:m,hg(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(m){const v=!!m.before,E=m.values||[];return new Zc(E,v)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const v=!m.before,E=m.values||[];return new Zc(E,v)}(n.endAt)),oU(e,s,a,i,c,"F",u,h)}function OU(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ic(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ic(n.unaryFilter.field);return Xe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ic(n.unaryFilter.field);return Xe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ic(n.unaryFilter.field);return Xe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(Ic(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dt.create(n.compositeFilter.filters.map(r=>OA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ke(1026)}}(n.compositeFilter.op))}(t):ke(30097,{filter:t})}function VU(t){return kU[t]}function LU(t){return CU[t]}function jU(t){return PU[t]}function Sc(t){return{fieldPath:t.canonicalString()}}function Ic(t){return Lt.fromServerFormat(t.fieldPath)}function VA(t){return t instanceof Xe?function(n){if(n.op==="=="){if(zS(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NAN"}};if(BS(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zS(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NOT_NAN"}};if(BS(n.value))return{unaryFilter:{field:Sc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sc(n.field),op:LU(n.op),value:n.value}}}(t):t instanceof dt?function(n){const r=n.getFilters().map(s=>VA(s));return r.length===1?r[0]:{compositeFilter:{op:jU(n.op),filters:r}}}(t):ke(54877,{filter:t})}function FU(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,r,s,i=Me.min(),a=Me.min(),c=an.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.yt=e}}function UU(t,e){let n;if(e.document)n=NU(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=we.fromSegments(e.noDocument.path),s=gl(e.noDocument.readTime);n=$t.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ke(56709);{const r=we.fromSegments(e.unknownDocument.path),s=gl(e.unknownDocument.version);n=$t.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new ut(s[0],s[1]);return Me.fromTimestamp(i)}(e.readTime)),n}function i1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Mm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,a){return{name:Nm(i,a.key),fields:a.data.value.mapValue.fields,updateTime:su(i,a.version.toTimestamp()),createTime:su(i,a.createTime.toTimestamp())}}(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ml(e.version)};else{if(!e.isUnknownDocument())return ke(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:ml(e.version)}}return r}function Mm(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ml(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gl(t){const e=new ut(t.seconds,t.nanoseconds);return Me.fromTimestamp(e)}function qa(t,e){const n=(e.baseMutations||[]).map(i=>rw(t.yt,i));for(let i=0;i<e.mutations.length-1;++i){const a=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>rw(t.yt,i)),s=ut.fromMillis(e.localWriteTimeMs);return new j_(e.batchId,s,n,r)}function Pd(t){const e=gl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?gl(t.lastLimboFreeSnapshotVersion):Me.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){const a=i.documents.length;return Re(a===1,1966,{count:a}),Jr(Lh(AA(i.documents[0])))}(t.query):function(i){return Jr(MA(i))}(t.query),new Ri(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,an.fromBase64String(t.resumeToken))}function FA(t,e){const n=ml(e.snapshotVersion),r=ml(e.lastLimboFreeSnapshotVersion);let s;s=Am(e.target)?NA(t.yt,e.target):DA(t.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pl(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function UA(t){const e=MA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Z0(e,e.limit,"L"):e}function $v(t,e){return new U_(e.largestBatchId,rw(t.yt,e.overlayMutation))}function o1(t,e){const n=e.path.lastSegment();return[t,Fn(e.path.popLast()),n]}function a1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ml(r.readTime),documentKey:Fn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{getBundleMetadata(e,n){return l1(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:gl(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return l1(e).put(function(s){return{bundleId:s.id,createTime:ml(Xn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return c1(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:UA(i.bundledQuery),readTime:gl(i.readTime)}}(r)})}saveNamedQuery(e,n){return c1(e).put(function(s){return{name:s.name,readTime:ml(Xn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function l1(t){return gn(t,fg)}function c1(t){return gn(t,pg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new Eg(e,r)}getOverlay(e,n){return pd(e).get(o1(this.userId,n)).next(r=>r?$v(this.serializer,r):null)}getOverlays(e,n){const r=Ws();return Y.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,a)=>{const c=new U_(n,a);s.push(this.St(e,c))}),Y.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(a=>s.add(Fn(a.getCollectionPath())));const i=[];return s.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);i.push(pd(e).Z(H0,c))}),Y.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Ws(),i=Fn(n),a=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return pd(e).J(H0,a).next(c=>{for(const u of c){const h=$v(this.serializer,u);s.set(h.getKey(),h)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Ws();let a;const c=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return pd(e).ee({index:BP,range:c},(u,h,p)=>{const m=$v(this.serializer,h);i.size()<s||m.largestBatchId===a?(i.set(m.getKey(),m),a=m.largestBatchId):p.done()}).next(()=>i)}St(e,n){return pd(e).put(function(s,i,a){const[c,u,h]=o1(i,a.mutation.key);return{userId:i,collectionPath:u,documentId:h,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Dm(s.yt,a.mutation)}}(this.serializer,this.userId,n))}}function pd(t){return gn(t,mg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{bt(e){return gn(e,R_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?an.fromUint8Array(r):an.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Pt(e.integerValue));else if("doubleValue"in e){const r=Pt(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),nh(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=ji(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Fi(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?ZP(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):yg(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ke(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const s of Object.keys(r))this.Ot(s,n),this.Ct(r[s],n)}kt(e,n){var a,c;const r=e.fields||{};this.Ft(n,53);const s=Xc,i=((c=(a=r[s].arrayValue)==null?void 0:a.values)==null?void 0:c.length)||0;this.Ft(n,15),n.Mt(Pt(i)),this.Ot(s,n),this.Ct(r[s],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const s of r)this.Ct(s,n)}Lt(e,n){this.Ft(n,37),we.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ka.Kt=new Ka;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=255;function $U(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function u1(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const a=$U(255&r[i]);if(s+=a,a!==8)break}return s}(t);return Math.ceil(e/8)}class WU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=n.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=n.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const n=this.en(e),r=u1(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}nn(e){const n=this.en(e),r=u1(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}rn(){this.sn(pc),this.sn(255)}_n(){this.an(pc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===pc?(this.sn(pc),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===pc?(this.an(pc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class HU{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class qU{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class md{constructor(){this.cn=new WU,this.ln=new HU(this.cn),this.hn=new qU(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n,r,s){this.Tn=e,this.In=n,this.En=r,this.dn=s}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ga(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:tm(this.En),directionalValue:tm(this.dn),orderedDocumentKey:tm(n),documentKey:r.path.toArray()}}Vn(e,n,r){const s=this.Rn(e,n,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function So(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=d1(t.En,e.En),n!==0?n:(n=d1(t.dn,e.dn),n!==0?n:we.comparator(t.In,e.In)))}function d1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function tm(t){return OC()?function(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return r}(t):t}function h1(t){return typeof t!="string"?t:function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(t)}class f1{constructor(e){this.mn=new ht((n,r)=>Lt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Re(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=z0(e);if(n!==void 0&&!this.wn(n))return!1;const r=Ba(e);let s=new Set,i=0,a=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const u=r[i];if(!this.Sn(c,u)||!this.bn(this.fn[a++],u))return!1}++i}for(;i<r.length;++i){const c=r[i];if(a>=this.fn.length||!this.bn(this.fn[a++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new ht(Lt.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Kp(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Kp(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Kp(r.field,r.dir==="asc"?0:1)));return new Sm(Sm.UNKNOWN_ID,this.collectionId,n,th.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){var n,r;if(Re(t instanceof Xe||t instanceof dt,20012),t instanceof Xe){if(t instanceof lA){const s=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map(i=>Xe.create(t.field,"==",i)))||[];return dt.create(s,"or")}return t}const e=t.filters.map(s=>BA(s));return dt.create(e,t.op)}function KU(t){if(t.getFilters().length===0)return[];const e=ow(BA(t));return Re(zA(e),7391),sw(e)||iw(e)?[e]:e.getFilters()}function sw(t){return t instanceof Xe}function iw(t){return t instanceof dt&&V_(t)}function zA(t){return sw(t)||iw(t)||function(n){if(n instanceof dt&&Y0(n)){for(const r of n.getFilters())if(!sw(r)&&!iw(r))return!1;return!0}return!1}(t)}function ow(t){if(Re(t instanceof Xe||t instanceof dt,34018),t instanceof Xe)return t;if(t.filters.length===1)return ow(t.filters[0]);const e=t.filters.map(r=>ow(r));let n=dt.create(e,t.op);return n=Om(n),zA(n)?n:(Re(n instanceof dt,64498),Re(eu(n),40251),Re(n.filters.length>1,57927),n.filters.reduce((r,s)=>$_(r,s)))}function $_(t,e){let n;return Re(t instanceof Xe||t instanceof dt,38388),Re(e instanceof Xe||e instanceof dt,25473),n=t instanceof Xe?e instanceof Xe?function(s,i){return dt.create([s,i],"and")}(t,e):p1(t,e):e instanceof Xe?p1(e,t):function(s,i){if(Re(s.filters.length>0&&i.filters.length>0,48005),eu(s)&&eu(i))return iA(s,i.getFilters());const a=Y0(s)?s:i,c=Y0(s)?i:s,u=a.filters.map(h=>$_(h,c));return dt.create(u,"or")}(t,e),Om(n)}function p1(t,e){if(eu(e))return iA(e,t.getFilters());{const n=e.filters.map(r=>$_(t,r));return dt.create(n,"or")}}function Om(t){if(Re(t instanceof Xe||t instanceof dt,11850),t instanceof Xe)return t;const e=t.getFilters();if(e.length===1)return Om(e[0]);if(rA(t))return t;const n=e.map(s=>Om(s)),r=[];return n.forEach(s=>{s instanceof Xe?r.push(s):s instanceof dt&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:dt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(){this.Cn=new W_}addToCollectionParentIndex(e,n){return this.Cn.add(n),Y.resolve()}getCollectionParents(e,n){return Y.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Y.resolve()}deleteFieldIndex(e,n){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,n){return Y.resolve()}getDocumentsMatchingTarget(e,n){return Y.resolve(null)}getIndexType(e,n){return Y.resolve(0)}getFieldIndexes(e,n){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,n){return Y.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return Y.resolve(Or.min())}updateCollectionGroup(e,n,r){return Y.resolve()}updateIndexEntries(e,n){return Y.resolve()}}class W_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ht(at.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ht(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="IndexedDbIndexManager",_p=new Uint8Array(0);class YU{constructor(e,n){this.databaseId=n,this.vn=new W_,this.Fn=new Gi(r=>pl(r),(r,s)=>Vh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.vn.add(n)});const i={collectionId:r,parent:Fn(s)};return g1(e).put(i)}return Y.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[PP(n),""],!1,!0);return g1(e).J(s).next(i=>{for(const a of i){if(a.collectionId!==n)break;r.push($s(a.parent))}return r})}addFieldIndex(e,n){const r=gd(e),s=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const a=gc(e);return i.next(c=>{a.put(a1(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=gd(e),s=gc(e),i=mc(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=gd(e),r=mc(e),s=gc(e);return n.Z().next(()=>r.Z()).next(()=>s.Z())}createTargetIndexes(e,n){return Y.forEach(this.Mn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new f1(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=mc(e);let s=!0;const i=new Map;return Y.forEach(this.Mn(n),a=>this.xn(e,a).next(c=>{s&&(s=!!c),i.set(a,c)})).next(()=>{if(s){let a=Ge();const c=[];return Y.forEach(i,(u,h)=>{fe(m1,`Using index ${function(R){return`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`}(u)} to execute ${pl(n)}`);const p=function(R,L){const z=z0(L);if(z===void 0)return null;for(const K of Rm(R,z.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(h,u),m=function(R,L){const z=new Map;for(const K of Ba(L))for(const D of Rm(R,K.fieldPath))switch(D.op){case"==":case"in":z.set(K.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return z.set(K.fieldPath.canonicalString(),D.value),Array.from(z.values())}return null}(h,u),v=function(R,L){const z=[];let K=!0;for(const D of Ba(L)){const P=D.kind===0?KS(R,D.fieldPath,R.startAt):GS(R,D.fieldPath,R.startAt);z.push(P.value),K&&(K=P.inclusive)}return new Zc(z,K)}(h,u),E=function(R,L){const z=[];let K=!0;for(const D of Ba(L)){const P=D.kind===0?GS(R,D.fieldPath,R.endAt):KS(R,D.fieldPath,R.endAt);z.push(P.value),K&&(K=P.inclusive)}return new Zc(z,K)}(h,u),S=this.On(u,h,v),T=this.On(u,h,E),I=this.Nn(u,h,m),C=this.Bn(u.indexId,p,S,v.inclusive,T,E.inclusive,I);return Y.forEach(C,N=>r.Y(N,n.limit).next(R=>{R.forEach(L=>{const z=we.fromSegments(L.documentKey);a.has(z)||(a=a.add(z),c.push(z))})}))}).next(()=>c)}return Y.resolve(null)})}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=KU(dt.create(e.filters,"and")).map(r=>X0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,n),n)}Bn(e,n,r,s,i,a,c){const u=(n!=null?n.length:1)*Math.max(r.length,i.length),h=u/(n!=null?n.length:1),p=[];for(let m=0;m<u;++m){const v=n?this.Ln(n[m/h]):_p,E=this.kn(e,v,r[m%h],s),S=this.qn(e,v,i[m%h],a),T=c.map(I=>this.kn(e,v,I,!0));p.push(...this.createRange(E,S,T))}return p}kn(e,n,r,s){const i=new Ga(e,we.empty(),n,r);return s?i:i.An()}qn(e,n,r,s){const i=new Ga(e,we.empty(),n,r);return s?i.An():i}xn(e,n){const r=new f1(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let a=null;for(const c of i)r.yn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,n){let r=2;const s=this.Mn(n);return Y.forEach(s,i=>this.xn(e,i).next(a=>{a?r!==0&&a.fields.length<function(u){let h=new ht(Lt.comparator),p=!1;for(const m of u.filters)for(const v of m.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:h=h.add(v.field));for(const m of u.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(n)&&s.length>1&&r===2?1:r)}Qn(e,n){const r=new md;for(const s of Ba(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const a=r.Pn(s.kind);Ka.Kt.Dt(i,a)}return r.un()}Ln(e){const n=new md;return Ka.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new md;return Ka.Kt.Dt(lh(this.databaseId,n),r.Pn(function(i){const a=Ba(i);return a.length===0?0:a[a.length-1].kind}(e))),r.un()}Nn(e,n,r){if(r===null)return[];let s=[];s.push(new md);let i=0;for(const a of Ba(e)){const c=r[i++];for(const u of s)if(this.Un(n,a.fieldPath)&&ch(c))s=this.Kn(s,a,c);else{const h=u.Pn(a.kind);Ka.Kt.Dt(c,h)}}return this.Wn(s)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const s=[...e],i=[];for(const a of r.arrayValue.values||[])for(const c of s){const u=new md;u.seed(c.un()),Ka.Kt.Dt(a,u.Pn(n.kind)),i.push(u)}return i}Un(e,n){return!!e.filters.find(r=>r instanceof Xe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=gd(e),s=gc(e);return(n?r.J(W0,IDBKeyRange.bound(n,n)):r.J()).next(i=>{const a=[];return Y.forEach(i,c=>s.get([c.indexId,this.uid]).next(u=>{a.push(function(p,m){const v=m?new th(m.sequenceNumber,new Or(gl(m.readTime),new we($s(m.documentKey)),m.largestBatchId)):th.empty(),E=p.fields.map(([S,T])=>new Kp(Lt.fromServerFormat(S),T));return new Sm(p.indexId,p.collectionGroup,E,v)}(c,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Be(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=gd(e),i=gc(e);return this.Gn(e).next(a=>s.J(W0,IDBKeyRange.bound(n,n)).next(c=>Y.forEach(c,u=>i.put(a1(u.indexId,this.uid,a,r)))))}updateIndexEntries(e,n){const r=new Map;return Y.forEach(n,(s,i)=>{const a=r.get(s.collectionGroup);return(a?Y.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(c=>(r.set(s.collectionGroup,c),Y.forEach(c,u=>this.zn(e,s,u).next(h=>{const p=this.jn(i,u);return h.isEqual(p)?Y.resolve():this.Jn(e,i,u,h,p)}))))})}Hn(e,n,r,s){return mc(e).put(s.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,s){return mc(e).delete(s.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const s=mc(e);let i=new ht(So);return s.ee({index:UP,range:IDBKeyRange.only([r.indexId,this.uid,tm(this.$n(r,n))])},(a,c)=>{i=i.add(new Ga(r.indexId,n,h1(c.arrayValue),h1(c.directionalValue)))}).next(()=>i)}jn(e,n){let r=new ht(So);const s=this.Qn(n,e);if(s==null)return r;const i=z0(n);if(i!=null){const a=e.data.field(i.fieldPath);if(ch(a))for(const c of a.arrayValue.values||[])r=r.add(new Ga(n.indexId,e.key,this.Ln(c),s))}else r=r.add(new Ga(n.indexId,e.key,_p,s));return r}Jn(e,n,r,s,i){fe(m1,"Updating index entries for document '%s'",n.key);const a=[];return function(u,h,p,m,v){const E=u.getIterator(),S=h.getIterator();let T=fc(E),I=fc(S);for(;T||I;){let C=!1,N=!1;if(T&&I){const R=p(T,I);R<0?N=!0:R>0&&(C=!0)}else T!=null?N=!0:C=!0;C?(m(I),I=fc(S)):N?(v(T),T=fc(E)):(T=fc(E),I=fc(S))}}(s,i,So,c=>{a.push(this.Hn(e,n,r,c))},c=>{a.push(this.Yn(e,n,r,c))}),Y.waitFor(a)}Gn(e){let n=1;return gc(e).ee({index:FP,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((a,c)=>So(a,c)).filter((a,c,u)=>!c||So(a,u[c-1])!==0);const s=[];s.push(e);for(const a of r){const c=So(a,e),u=So(a,n);if(c===0)s[0]=e.An();else if(c>0&&u<0)s.push(a),s.push(a.An());else if(u>0)break}s.push(n);const i=[];for(let a=0;a<s.length;a+=2){if(this.Zn(s[a],s[a+1]))return[];const c=s[a].Vn(this.uid,_p,we.empty()),u=s[a+1].Vn(this.uid,_p,we.empty());i.push(IDBKeyRange.bound(c,u))}return i}Zn(e,n){return So(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(y1)}getMinOffset(e,n){return Y.mapArray(this.Mn(n),r=>this.xn(e,r).next(s=>s||ke(44426))).next(y1)}}function g1(t){return gn(t,ih)}function mc(t){return gn(t,Fd)}function gd(t){return gn(t,A_)}function gc(t){return gn(t,jd)}function y1(t){Re(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;k_(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Or(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$A=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t,e,n){const r=t.store(_s),s=t.store(Kc),i=[],a=IDBKeyRange.only(n.batchId);let c=0;const u=r.ee({range:a},(p,m,v)=>(c++,v.delete()));i.push(u.next(()=>{Re(c===1,47070,{batchId:n.batchId})}));const h=[];for(const p of n.mutations){const m=VP(e,p.key.path,n.batchId);i.push(s.delete(m)),h.push(p.key)}return Y.waitFor(i).next(()=>h)}function Vm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ke(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn($A,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class Tg{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,n,r,s){Re(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Tg(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Io(e).ee({index:Ya,range:r},(s,i,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=kc(e),a=Io(e);return a.add({}).next(c=>{Re(typeof c=="number",49019);const u=new j_(c,n,r,s),h=function(E,S,T){const I=T.baseMutations.map(N=>Dm(E.yt,N)),C=T.mutations.map(N=>Dm(E.yt,N));return{userId:S,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:I,mutations:C}}(this.serializer,this.userId,u),p=[];let m=new ht((v,E)=>Be(v.canonicalString(),E.canonicalString()));for(const v of s){const E=VP(this.userId,v.key.path,c);m=m.add(v.key.path.popLast()),p.push(a.put(h)),p.push(i.put(E,T3))}return m.forEach(v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))}),e.addOnCommittedListener(()=>{this.Xn[c]=u.keys()}),Y.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Io(e).get(n).next(r=>r?(Re(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),qa(this.serializer,r)):null)}er(e,n){return this.Xn[n]?Y.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Xn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Io(e).ee({index:Ya,range:s},(a,c,u)=>{c.userId===this.userId&&(Re(c.batchId>=r,47524,{tr:r}),i=qa(this.serializer,c)),u.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ja;return Io(e).ee({index:Ya,range:n,reverse:!0},(s,i,a)=>{r=i.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,Ja],[this.userId,Number.POSITIVE_INFINITY]);return Io(e).J(Ya,n).next(r=>r.map(s=>qa(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gp(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return kc(e).ee({range:s},(a,c,u)=>{const[h,p,m]=a,v=$s(p);if(h===this.userId&&n.path.isEqual(v))return Io(e).get(m).next(E=>{if(!E)throw ke(61480,{nr:a,batchId:m});Re(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:m}),i.push(qa(this.serializer,E))});u.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(Be);const s=[];return n.forEach(i=>{const a=Gp(this.userId,i.path),c=IDBKeyRange.lowerBound(a),u=kc(e).ee({range:c},(h,p,m)=>{const[v,E,S]=h,T=$s(E);v===this.userId&&i.path.isEqual(T)?r=r.add(S):m.done()});s.push(u)}),Y.waitFor(s).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=Gp(this.userId,r),a=IDBKeyRange.lowerBound(i);let c=new ht(Be);return kc(e).ee({range:a},(u,h,p)=>{const[m,v,E]=u,S=$s(v);m===this.userId&&r.isPrefixOf(S)?S.length===s&&(c=c.add(E)):p.done()}).next(()=>this.rr(e,c))}rr(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Io(e).get(i).next(a=>{if(a===null)throw ke(35274,{batchId:i});Re(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:i}),r.push(qa(this.serializer,a))}))}),Y.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return WA(e.le,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.ir(n.batchId)}),Y.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Y.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),s=[];return kc(e).ee({range:r},(i,a,c)=>{if(i[0]===this.userId){const u=$s(i[1]);s.push(u)}else c.done()}).next(()=>{Re(s.length===0,56720,{sr:s.map(i=>i.canonicalString())})})})}containsKey(e,n){return HA(e,this.userId,n)}_r(e){return qA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:Ja,lastStreamToken:""})}}function HA(t,e,n){const r=Gp(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let a=!1;return kc(t).ee({range:i,X:!0},(c,u,h)=>{const[p,m,v]=c;p===e&&m===s&&(a=!0),h.done()}).next(()=>a)}function Io(t){return gn(t,_s)}function kc(t){return gn(t,Kc)}function qA(t){return gn(t,rh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yl(0)}static cr(){return new yl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next(n=>{const r=new yl(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(n=>Me.fromTimestamp(new ut(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.lr(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.hr(e,s)))}addTargetData(e,n){return this.Pr(e,n).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>yc(e).delete(n.targetId)).next(()=>this.lr(e)).next(r=>(Re(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return yc(e).ee((a,c)=>{const u=Pd(c);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(s++,i.push(this.removeTargetData(e,u)))}).next(()=>Y.waitFor(i)).next(()=>s)}forEachTarget(e,n){return yc(e).ee((r,s)=>{const i=Pd(s);n(i)})}lr(e){return w1(e).get(Cm).next(n=>(Re(n!==null,2888),n))}hr(e,n){return w1(e).put(Cm,n)}Pr(e,n){return yc(e).put(FA(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(n=>n.targetCount)}getTargetData(e,n){const r=pl(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return yc(e).ee({range:s,index:jP},(a,c,u)=>{const h=Pd(c);Vh(n,h.target)&&(i=h,u.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=Lo(e);return n.forEach(a=>{const c=Fn(a.path);s.push(i.put({targetId:r,path:c})),s.push(this.referenceDelegate.addReference(e,r,a))}),Y.waitFor(s)}removeMatchingKeys(e,n,r){const s=Lo(e);return Y.forEach(n,i=>{const a=Fn(i.path);return Y.waitFor([s.delete([r,a]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=Lo(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=Lo(e);let i=Ge();return s.ee({range:r,X:!0},(a,c,u)=>{const h=$s(a[1]),p=new we(h);i=i.add(p)}).next(()=>i)}containsKey(e,n){const r=Fn(n.path),s=IDBKeyRange.bound([r],[PP(r)],!1,!0);let i=0;return Lo(e).ee({index:P_,X:!0,range:s},([a,c],u,h)=>{a!==0&&(i++,h.done())}).next(()=>i>0)}At(e,n){return yc(e).get(n).next(r=>r?Pd(r):null)}}function yc(t){return gn(t,Gc)}function w1(t){return gn(t,Za)}function Lo(t){return gn(t,Yc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="LruGarbageCollector",XU=1048576;function x1([t,e],[n,r]){const s=Be(t,n);return s===0?Be(e,r):s}class JU{constructor(e){this.Ir=e,this.buffer=new ht(x1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();x1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(_1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sa(n)?fe(_1,"Ignoring IndexedDB error during garbage collection: ",n):await Cl(n)}await this.Vr(3e5)})}}class ZU{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Y.resolve(Qr.ce);const r=new JU(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(v1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,c,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Ec()<=Qe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function GA(t,e){return new ZU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e,n){this.db=e,this.garbageCollector=GA(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,(r,s)=>n(s))}addReference(e,n,r){return xp(e,r)}removeReference(e,n,r){return xp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return xp(e,n)}br(e,n){return function(s,i){let a=!1;return qA(s).te(c=>HA(s,c,i).next(u=>(u&&(a=!0),Y.resolve(!u)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,(a,c)=>{if(c<=n){const u=this.br(e,a).next(h=>{if(!h)return i++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Me.min()),Lo(e).delete(function(m){return[0,Fn(m.path)]}(a))))});s.push(u)}}).next(()=>Y.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return xp(e,n)}Sr(e,n){const r=Lo(e);let s,i=Qr.ce;return r.ee({index:P_},([a,c],{path:u,sequenceNumber:h})=>{a===0?(i!==Qr.ce&&n(new we($s(s)),i),i=h,s=u):i=Qr.ce}).next(()=>{i!==Qr.ce&&n(new we($s(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xp(t,e){return Lo(t).put(function(r,s){return{targetId:0,path:Fn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(){this.changes=new Gi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Oa(e).put(r)}removeEntry(e,n,r){return Oa(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Mm(a),c[c.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Dr(e,r)))}getEntry(e,n){let r=$t.newInvalidDocument(n);return Oa(e).ee({index:Yp,range:IDBKeyRange.only(yd(n))},(s,i)=>{r=this.Cr(n,i)}).next(()=>r)}vr(e,n){let r={size:0,document:$t.newInvalidDocument(n)};return Oa(e).ee({index:Yp,range:IDBKeyRange.only(yd(n))},(s,i)=>{r={document:this.Cr(n,i),size:Vm(i)}}).next(()=>r)}getEntries(e,n){let r=Ar();return this.Fr(e,n,(s,i)=>{const a=this.Cr(s,i);r=r.insert(s,a)}).next(()=>r)}Mr(e,n){let r=Ar(),s=new Nt(we.comparator);return this.Fr(e,n,(i,a)=>{const c=this.Cr(i,a);r=r.insert(i,c),s=s.insert(i,Vm(a))}).next(()=>({documents:r,Or:s}))}Fr(e,n,r){if(n.isEmpty())return Y.resolve();let s=new ht(T1);n.forEach(u=>s=s.add(u));const i=IDBKeyRange.bound(yd(s.first()),yd(s.last())),a=s.getIterator();let c=a.getNext();return Oa(e).ee({index:Yp,range:i},(u,h,p)=>{const m=we.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&T1(c,m)<0;)r(c,null),c=a.getNext();c&&c.isEqual(m)&&(r(c,h),c=a.hasNext()?a.getNext():null),c?p.j(yd(c)):p.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const a=n.path,c=[a.popLast().toArray(),a.lastSegment(),Mm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oa(e).J(IDBKeyRange.bound(c,u,!0)).next(h=>{i==null||i.incrementDocumentReadCount(h.length);let p=Ar();for(const m of h){const v=this.Cr(we.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);v.isFoundDocument()&&(jh(n,v)||s.has(v.key))&&(p=p.insert(v.key,v))}return p})}getAllFromCollectionGroup(e,n,r,s){let i=Ar();const a=E1(n,r),c=E1(n,Or.max());return Oa(e).ee({index:LP,range:IDBKeyRange.bound(a,c,!0)},(u,h,p)=>{const m=this.Cr(we.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===s&&p.done()}).next(()=>i)}newChangeBuffer(e){return new nB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return b1(e).get($0).next(n=>(Re(!!n,20021),n))}Dr(e,n){return b1(e).put($0,n)}Cr(e,n){if(n){const r=UU(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(Me.min())))return r}return $t.newInvalidDocument(e)}}function QA(t){return new tB(t)}class nB extends YA{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Gi(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new ht((i,a)=>Be(i.canonicalString(),a.canonicalString()));return this.changes.forEach((i,a)=>{const c=this.Br.get(i);if(n.push(this.Nr.removeEntry(e,i,c.readTime)),a.isValidDocument()){const u=i1(this.Nr.serializer,a);s=s.add(i.path.popLast());const h=Vm(u);r+=h-c.size,n.push(this.Nr.addEntry(e,i,u))}else if(r-=c.size,this.trackRemovals){const u=i1(this.Nr.serializer,a.convertToNoDocument(Me.min()));n.push(this.Nr.addEntry(e,i,u))}}),s.forEach(i=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Nr.updateMetadata(e,r)),Y.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next(r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next(({documents:r,Or:s})=>(s.forEach((i,a)=>{this.Br.set(i,{size:a,readTime:r.get(i).readTime})}),r))}}function b1(t){return gn(t,sh)}function Oa(t){return gn(t,km)}function yd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function E1(t,e){const n=e.documentKey.path.toArray();return[t,Mm(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function T1(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Be(n[i],r[i]),s)return s;return s=Be(n.length,r.length),s||(s=Be(n[n.length-2],r[r.length-2]),s||Be(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&$d(r.mutation,s,pr.empty(),ut.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ge()){const s=Ws();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=kd();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ws();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Ar();const a=zd(),c=function(){return zd()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Yi)?i=i.insert(h.key,h):p!==void 0?(a.set(h.key,p.mutation.getFieldMask()),$d(p.mutation,h,p.mutation.getFieldMask(),ut.now())):a.set(h.key,pr.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>a.set(h,p)),n.forEach((h,p)=>c.set(h,new rB(p,a.get(h)??null))),c))}recalculateAndSaveOverlays(e,n){const r=zd();let s=new Nt((a,c)=>a-c),i=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||pr.empty();p=c.applyToLocalView(h,p),r.set(u,p);const m=(s.get(c.batchId)||Ge()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,p=u.value,m=pA();p.forEach(v=>{if(!i.has(v)){const E=xA(n.get(v),r.get(v));E!==null&&m.set(v,E),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Y.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return we.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Y.resolve(Ws());let c=eh,u=i;return a.next(h=>Y.forEach(h,(p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Y.resolve():this.remoteDocumentCache.getEntry(e,p).next(v=>{u=u.insert(p,v)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,Ge())).next(p=>({batchId:c,changes:fA(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let s=kd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=kd();return this.indexManager.getCollectionParents(e,i).next(c=>Y.forEach(c,u=>{const h=function(m,v){return new yu(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const p=h.getKey();a.get(p)===null&&(a=a.insert(p,$t.newInvalidDocument(p)))});let c=kd();return a.forEach((u,h)=>{const p=i.get(u);p!==void 0&&$d(p.mutation,h,pr.empty(),ut.now()),jh(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Y.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xn(s.createTime)}}(n)),Y.resolve()}getNamedQuery(e,n){return Y.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:UA(s.bundledQuery),readTime:Xn(s.readTime)}}(n)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(){this.overlays=new Nt(we.comparator),this.qr=new Map}getOverlay(e,n){return Y.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ws();return Y.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),Y.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),Y.resolve()}getOverlaysForCollection(e,n,r){const s=Ws(),i=n.length+1,a=new we(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return Y.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Nt((h,p)=>h-p);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Ws(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=Ws(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>c.set(h,p)),!(c.size()>=s)););return Y.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new U_(n,r));let i=this.qr.get(n);i===void 0&&(i=Ge(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.Qr=new ht(xn.$r),this.Ur=new ht(xn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new xn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new xn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new we(new at([])),r=new xn(n,e),s=new xn(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new we(new at([])),r=new xn(n,e),s=new xn(n,e+1);let i=Ge();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new xn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return we.comparator(e.key,n.key)||Be(e.Yr,n.Yr)}static Kr(e,n){return Be(e.Yr,n.Yr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ht(xn.$r)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new j_(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new xn(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Y.resolve(a)}lookupMutationBatch(e,n){return Y.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return Y.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Ja:this.tr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xn(n,0),s=new xn(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const c=this.Xr(a.Yr);i.push(c)}),Y.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(Be);return n.forEach(s=>{const i=new xn(s,0),a=new xn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],c=>{r=r.add(c.Yr)})}),Y.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;we.isDocumentKey(i)||(i=i.child(""));const a=new xn(new we(i),0);let c=new ht(Be);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Yr)),!0)},a),Y.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Y.forEach(n.mutations,s=>{const i=new xn(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new xn(n,0),s=this.Zr.firstAfterOrEqual(r);return Y.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.ri=e,this.docs=function(){return new Nt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Y.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():$t.newInvalidDocument(s))}),Y.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ar();const a=n.path,c=new we(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||k_(NP(p),r)<=0||(s.has(p.key)||jh(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Y.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ke(9500)}ii(e,n){return Y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cB(this)}getSize(e){return Y.resolve(this.size)}}class cB extends YA{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),Y.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(e){this.persistence=e,this.si=new Gi(n=>pl(n),Vh),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new H_,this.targetCount=0,this.ai=yl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Y.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Y.resolve()}updateTargetData(e,n){return this.Pr(n),Y.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),Y.waitFor(i).next(()=>s)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Y.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Y.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),Y.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Y.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Y.resolve(r)}containsKey(e,n){return Y.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Qr(0),this.li=!1,this.li=!0,this.hi=new oB,this.referenceDelegate=e(this),this.Pi=new uB(this),this.indexManager=new GU,this.remoteDocumentCache=function(s){return new lB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new jA(n),this.Ii=new sB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new iB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new aB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const s=new dB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return Y.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class dB extends MP{constructor(e){super(),this.currentSequenceNumber=e}}class Sg{constructor(e){this.persistence=e,this.Ri=new H_,this.Vi=null}static mi(e){return new Sg(e)}get fi(){if(this.Vi)return this.Vi;throw ke(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Y.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Y.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Y.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,r=>{const s=we.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Y.or([()=>Y.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Lm{constructor(e,n){this.persistence=e,this.pi=new Gi(r=>Fn(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=GA(this,n)}static mi(e,n){return new Lm(e,n)}Ei(){}di(e){return Y.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Y.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?Y.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(c=>{c||(r++,i.removeEntry(a,Me.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Y.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xp(e.data.value)),n}br(e,n,r){return Y.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return Y.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.serializer=e}k(e,n,r,s){const i=new dg("createOrUpgrade",n);r<1&&s>=1&&(function(u){u.createObjectStore(Oh)}(e),function(u){u.createObjectStore(rh,{keyPath:E3}),u.createObjectStore(_s,{keyPath:OS,autoIncrement:!0}).createIndex(Ya,VS,{unique:!0}),u.createObjectStore(Kc)}(e),S1(e),function(u){u.createObjectStore(za)}(e));let a=Y.resolve();return r<3&&s>=3&&(r!==0&&(function(u){u.deleteObjectStore(Yc),u.deleteObjectStore(Gc),u.deleteObjectStore(Za)}(e),S1(e)),a=a.next(()=>function(u){const h=u.store(Za),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Me.min().toTimestamp(),targetCount:0};return h.put(Cm,p)}(i))),r<4&&s>=4&&(r!==0&&(a=a.next(()=>function(u,h){return h.store(_s).J().next(m=>{u.deleteObjectStore(_s),u.createObjectStore(_s,{keyPath:OS,autoIncrement:!0}).createIndex(Ya,VS,{unique:!0});const v=h.store(_s),E=m.map(S=>v.put(S));return Y.waitFor(E)})}(e,i))),a=a.next(()=>{(function(u){u.createObjectStore(Qc,{keyPath:N3})})(e)})),r<5&&s>=5&&(a=a.next(()=>this.yi(i))),r<6&&s>=6&&(a=a.next(()=>(function(u){u.createObjectStore(sh)}(e),this.wi(i)))),r<7&&s>=7&&(a=a.next(()=>this.Si(i))),r<8&&s>=8&&(a=a.next(()=>this.bi(e,i))),r<9&&s>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(a=a.next(()=>this.Di(i))),r<11&&s>=11&&(a=a.next(()=>{(function(u){u.createObjectStore(fg,{keyPath:D3})})(e),function(u){u.createObjectStore(pg,{keyPath:M3})}(e)})),r<12&&s>=12&&(a=a.next(()=>{(function(u){const h=u.createObjectStore(mg,{keyPath:B3});h.createIndex(H0,z3,{unique:!1}),h.createIndex(BP,$3,{unique:!1})})(e)})),r<13&&s>=13&&(a=a.next(()=>function(u){const h=u.createObjectStore(km,{keyPath:S3});h.createIndex(Yp,I3),h.createIndex(LP,k3)}(e)).next(()=>this.Ci(e,i)).next(()=>e.deleteObjectStore(za))),r<14&&s>=14&&(a=a.next(()=>this.Fi(e,i))),r<15&&s>=15&&(a=a.next(()=>function(u){u.createObjectStore(A_,{keyPath:O3,autoIncrement:!0}).createIndex(W0,V3,{unique:!1}),u.createObjectStore(jd,{keyPath:L3}).createIndex(FP,j3,{unique:!1}),u.createObjectStore(Fd,{keyPath:F3}).createIndex(UP,U3,{unique:!1})}(e))),r<16&&s>=16&&(a=a.next(()=>{n.objectStore(jd).clear()}).next(()=>{n.objectStore(Fd).clear()})),r<17&&s>=17&&(a=a.next(()=>{(function(u){u.createObjectStore(R_,{keyPath:W3})})(e)})),r<18&&s>=18&&OC()&&(a=a.next(()=>{n.objectStore(jd).clear()}).next(()=>{n.objectStore(Fd).clear()})),a}wi(e){let n=0;return e.store(za).ee((r,s)=>{n+=Vm(s)}).next(()=>{const r={byteSize:n};return e.store(sh).put($0,r)})}yi(e){const n=e.store(rh),r=e.store(_s);return n.J().next(s=>Y.forEach(s,i=>{const a=IDBKeyRange.bound([i.userId,Ja],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Ya,a).next(c=>Y.forEach(c,u=>{Re(u.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:u.batchId});const h=qa(this.serializer,u);return WA(e,i.userId,h).next(()=>{})}))}))}Si(e){const n=e.store(Yc),r=e.store(za);return e.store(Za).get(Cm).next(s=>{const i=[];return r.ee((a,c)=>{const u=new at(a),h=function(m){return[0,Fn(m)]}(u);i.push(n.get(h).next(p=>p?Y.resolve():(m=>n.put({targetId:0,path:Fn(m),sequenceNumber:s.highestListenSequenceNumber}))(u)))}).next(()=>Y.waitFor(i))})}bi(e,n){e.createObjectStore(ih,{keyPath:R3});const r=n.store(ih),s=new W_,i=a=>{if(s.add(a)){const c=a.lastSegment(),u=a.popLast();return r.put({collectionId:c,parent:Fn(u)})}};return n.store(za).ee({X:!0},(a,c)=>{const u=new at(a);return i(u.popLast())}).next(()=>n.store(Kc).ee({X:!0},([a,c,u],h)=>{const p=$s(c);return i(p.popLast())}))}Di(e){const n=e.store(Gc);return n.ee((r,s)=>{const i=Pd(s),a=FA(this.serializer,i);return n.put(a)})}Ci(e,n){const r=n.store(za),s=[];return r.ee((i,a)=>{const c=n.store(km),u=function(m){return m.document?new we(at.fromString(m.document.name).popFirst(5)):m.noDocument?we.fromSegments(m.noDocument.path):m.unknownDocument?we.fromSegments(m.unknownDocument.path):ke(36783)}(a).path.toArray(),h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(c.put(h))}).next(()=>Y.waitFor(s))}Fi(e,n){const r=n.store(_s),s=QA(this.serializer),i=new q_(Sg.mi,this.serializer.yt);return r.J().next(a=>{const c=new Map;return a.forEach(u=>{let h=c.get(u.userId)??Ge();qa(this.serializer,u).keys().forEach(p=>h=h.add(p)),c.set(u.userId,h)}),Y.forEach(c,(u,h)=>{const p=new Cn(h),m=Eg.wt(this.serializer,p),v=i.getIndexManager(p),E=Tg.wt(p,this.serializer,v,i.referenceDelegate);return new XA(s,E,m,v).recalculateAndSaveOverlaysForDocumentKeys(new q0(n,Qr.ce),u).next()})})}}function S1(t){t.createObjectStore(Yc,{keyPath:P3}).createIndex(P_,A3,{unique:!0}),t.createObjectStore(Gc,{keyPath:"targetId"}).createIndex(jP,C3,{unique:!0}),t.createObjectStore(Za)}const ko="IndexedDbPersistence",Wv=18e5,Hv=5e3,qv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fB="main";class K_{constructor(e,n,r,s,i,a,c,u,h,p,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=i,this.window=a,this.document=c,this.xi=h,this.Oi=p,this.Ni=m,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!K_.v())throw new ge(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eB(this,s),this.$i=n+fB,this.serializer=new jA(u),this.Ui=new $o(this.$i,this.Ni,new hB(this.serializer)),this.hi=new zU,this.Pi=new QU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QA(this.serializer),this.Ii=new BU,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&Gn(ko,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ne.FAILED_PRECONDITION,qv);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Qr(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(n=>this.isPrimary&&!n?this.Zi(e).next(()=>!1):!!n&&this.Xi(e).next(()=>!0))).catch(e=>{if(sa(e))return fe(ko,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(ko,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return vd(e).get(hc).next(n=>Y.resolve(this.es(n)))}ts(e){return bp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Wv)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=gn(n,Qc);return r.J().next(s=>{const i=this.ss(s,Wv),a=s.filter(c=>i.indexOf(c)===-1);return Y.forEach(a,c=>r.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Y.resolve(!0):vd(e).get(hc).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Hv)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new ge(ne.FAILED_PRECONDITION,qv);return!1}}return!(!this.networkEnabled||!this.inForeground)||bp(e).J().next(r=>this.ss(r,Hv).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,a=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(i||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&fe(ko,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Oh,Qc],e=>{const n=new q0(e,Qr.ce);return this.Zi(n).next(()=>this.ts(n))}),this.Ui.close(),this.Ps()}ss(e,n){return e.filter(r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>bp(e).J().next(n=>this.ss(n,Wv).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Tg.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YU(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Eg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe(ko,"Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(u){return u===18?K3:u===17?HP:u===16?q3:u===15?N_:u===14?WP:u===13?$P:u===12?H3:u===11?zP:void ke(60245)}(this.Ni);let a;return this.Ui.runTransaction(e,s,i,c=>(a=new q0(c,this.ci?this.ci.next():Qr.ce),n==="readwrite-primary"?this.Hi(a).next(u=>!!u||this.Yi(a)).next(u=>{if(!u)throw Gn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new ge(ne.FAILED_PRECONDITION,DP);return r(a)}).next(u=>this.Xi(a).next(()=>u)):this.Is(a).next(()=>r(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}Is(e){return vd(e).get(hc).next(n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Hv)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ge(ne.FAILED_PRECONDITION,qv)})}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vd(e).put(hc,n)}static v(){return $o.v()}Zi(e){const n=vd(e);return n.get(hc).next(r=>this.es(r)?(fe(ko,"Releasing primary lease."),n.delete(hc)):Y.resolve())}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Gn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;MC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return fe(ko,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Gn(ko,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vd(t){return gn(t,Oh)}function bp(t){return gn(t,Qc)}function pB(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ge(),s=Ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new G_(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return MC()?8:OP(mn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new mB;return this.Ss(e,n,a).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,a,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ec()<=Qe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Tc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Ec()<=Qe.DEBUG&&fe("QueryEngine","Query:",Tc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ec()<=Qe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Tc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(n))):Y.resolve())}ys(e,n){if(YS(n))return Y.resolve(null);let r=Jr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Z0(n,null,"F"),r=Jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ge(...i);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,c);return this.Cs(n,h,a,u.readTime)?this.ys(e,Z0(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,s){return YS(n)||s.isEqual(Me.min())?Y.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?Y.resolve(null):(Ec()<=Qe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tc(n)),this.vs(e,a,n,g3(s,eh)).next(c=>c))})}Ds(e,n){let r=new ht(dA(e));return n.forEach((s,i)=>{jh(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ec()<=Qe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Tc(n)),this.ps.getDocumentsMatchingQuery(e,n,Or.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="LocalStore",gB=3e8;class yB{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Nt(Be),this.xs=new Gi(i=>pl(i),Vh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ZA(t,e,n,r){return new yB(t,e,n,r)}async function eR(t,e){const n=ze(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=Ge();for(const h of s){a.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:a,addedBatchIds:c}))})})}function vB(t,e){const n=ze(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,h,p){const m=h.batch,v=m.keys();let E=Y.resolve();return v.forEach(S=>{E=E.next(()=>p.getEntry(u,S)).next(T=>{const I=h.docVersions.get(S);Re(I!==null,48541),T.version.compareTo(I)<0&&(m.applyToRemoteDocument(T,h),T.isValidDocument()&&(T.setReadTime(h.commitVersion),p.addEntry(T)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=Ge();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function tR(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function wB(t,e){const n=ze(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((p,m)=>{const v=s.get(m);if(!v)return;c.push(n.Pi.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,p.addedDocuments,m)));let E=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(an.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):p.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(p.resumeToken,r)),s=s.insert(m,E),function(T,I,C){return T.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=gB?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(v,E,p)&&c.push(n.Pi.updateTargetData(i,E))});let u=Ar(),h=Ge();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),c.push(_B(i,a,e.documentUpdates).next(p=>{u=p.ks,h=p.qs})),!r.isEqual(Me.min())){const p=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(p)}return Y.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ms=s,i))}function _B(t,e,n){let r=Ge(),s=Ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Ar();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(Me.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):fe(Y_,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{ks:a,qs:s}})}function xB(t,e){const n=ze(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ja),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bB(t,e){const n=ze(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,Y.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Ri(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function aw(t,e,n){const r=ze(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!sa(a))throw a;fe(Y_,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function I1(t,e,n){const r=ze(t);let s=Me.min(),i=Ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,p){const m=ze(u),v=m.xs.get(p);return v!==void 0?Y.resolve(m.Ms.get(v)):m.Pi.getTargetData(h,p)}(r,a,Jr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:Me.min(),n?i:Ge())).next(c=>(EB(r,lU(e),c),{documents:c,Qs:i})))}function EB(t,e,n){let r=t.Os.get(e)||Me.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class k1{constructor(){this.activeTargetIds=pU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nR{constructor(){this.Mo=new k1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new k1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="ConnectivityMonitor";class P1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(C1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(C1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep=null;function lw(){return Ep===null?Ep=function(){return 268435456+Math.round(2147483648*Math.random())}():Ep++,"0x"+Ep.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="RestConnection",SB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Pm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=lw(),c=this.zo(e,n.toUriEncodedString());fe(Kv,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:h}=new URL(c),p=na(h);return this.Jo(e,c,u,r,p).then(m=>(fe(Kv,`Received RPC '${e}' ${a}: `,m),m),m=>{throw hl(Kv,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=SB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class CB extends IB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=lw();return new Promise((c,u)=>{const h=new bP;h.setWithCredentials(!0),h.listenOnce(EP.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case qp.NO_ERROR:const m=h.getResponseJson();fe(On,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case qp.TIMEOUT:fe(On,`RPC '${e}' ${a} timed out`),u(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case qp.HTTP_ERROR:const v=h.getStatus();if(fe(On,`RPC '${e}' ${a} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const T=function(C){const N=C.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(N)>=0?N:ne.UNKNOWN}(S.status);u(new ge(T,S.message))}else u(new ge(ne.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{fe(On,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);fe(On,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",p,r,15)})}T_(e,n,r){const s=lw(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=IP(),c=SP(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");fe(On,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=a.createWebChannel(p,u);this.I_(m);let v=!1,E=!1;const S=new kB({Yo:I=>{E?fe(On,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(v||(fe(On,`Opening RPC '${e}' stream ${s} transport.`),m.open(),v=!0),fe(On,`RPC '${e}' stream ${s} sending:`,I),m.send(I))},Zo:()=>m.close()}),T=(I,C,N)=>{I.listen(C,R=>{try{N(R)}catch(L){setTimeout(()=>{throw L},0)}})};return T(m,Id.EventType.OPEN,()=>{E||(fe(On,`RPC '${e}' stream ${s} transport opened.`),S.o_())}),T(m,Id.EventType.CLOSE,()=>{E||(E=!0,fe(On,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(m))}),T(m,Id.EventType.ERROR,I=>{E||(E=!0,hl(On,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),S.a_(new ge(ne.UNAVAILABLE,"The operation could not be completed")))}),T(m,Id.EventType.MESSAGE,I=>{var C;if(!E){const N=I.data[0];Re(!!N,16349);const R=N,L=(R==null?void 0:R.error)||((C=R[0])==null?void 0:C.error);if(L){fe(On,`RPC '${e}' stream ${s} received error:`,L);const z=L.status;let K=function(V){const F=en[V];if(F!==void 0)return TA(F)}(z),D=L.message;K===void 0&&(K=ne.INTERNAL,D="Unknown error status: "+z+" with message "+L.message),E=!0,S.a_(new ge(K,D)),m.close()}else fe(On,`RPC '${e}' stream ${s} received:`,N),S.u_(N)}}),T(c,TP.STAT_EVENT,I=>{I.stat===U0.PROXY?fe(On,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===U0.NOPROXY&&fe(On,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PB(){return typeof window<"u"?window:null}function nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t){return new AU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="PersistentStream";class sR{constructor(e,n,r,s,i,a,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rR(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ge(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return fe(A1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(fe(A1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AB extends sR{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=DU(this.serializer,e),r=function(i){if(!("targetChange"in i))return Me.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Me.min():a.readTime?Xn(a.readTime):Me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=nw(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=Am(u)?{documents:NA(i,u)}:{query:DA(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=kA(i,a.resumeToken);const h=ew(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(Me.min())>0){c.readTime=su(i,a.snapshotVersion.toTimestamp());const h=ew(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=OU(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=nw(this.serializer),n.removeTarget=e,this.q_(n)}}class RB extends sR{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=MU(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=nw(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Dm(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{}class DB extends NB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,tw(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ge(ne.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,tw(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ne.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class MB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl="RemoteStore";class OB{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Pl(this)&&(fe(vl,"Restarting streams for network reachability change."),await async function(u){const h=ze(u);h.Ea.add(4),await Uh(h),h.Ra.set("Unknown"),h.Ea.delete(4),await kg(h)}(this))})}),this.Ra=new MB(r,s)}}async function kg(t){if(Pl(t))for(const e of t.da)await e(!0)}async function Uh(t){for(const e of t.da)await e(!1)}function iR(t,e){const n=ze(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Z_(n)?J_(n):wu(n).O_()&&X_(n,e))}function Q_(t,e){const n=ze(t),r=wu(n);n.Ia.delete(e),r.O_()&&oR(n,e),n.Ia.size===0&&(r.O_()?r.L_():Pl(n)&&n.Ra.set("Unknown"))}function X_(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wu(t).Y_(e)}function oR(t,e){t.Va.Ue(e),wu(t).Z_(e)}function J_(t){t.Va=new IU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),wu(t).start(),t.Ra.ua()}function Z_(t){return Pl(t)&&!wu(t).x_()&&t.Ia.size>0}function Pl(t){return ze(t).Ea.size===0}function aR(t){t.Va=void 0}async function VB(t){t.Ra.set("Online")}async function LB(t){t.Ia.forEach((e,n)=>{X_(t,e)})}async function jB(t,e){aR(t),Z_(t)?(t.Ra.ha(e),J_(t)):t.Ra.set("Unknown")}async function FB(t,e,n){if(t.Ra.set("Online"),e instanceof IA&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){fe(vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jm(t,r)}else if(e instanceof em?t.Va.Ze(e):e instanceof SA?t.Va.st(e):t.Va.tt(e),!n.isEqual(Me.min()))try{const r=await tR(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.Ia.get(h);p&&i.Ia.set(h,p.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,h)=>{const p=i.Ia.get(u);if(!p)return;i.Ia.set(u,p.withResumeToken(an.EMPTY_BYTE_STRING,p.snapshotVersion)),oR(i,u);const m=new Ri(p.target,u,h,p.sequenceNumber);X_(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){fe(vl,"Failed to raise snapshot:",r),await jm(t,r)}}async function jm(t,e,n){if(!sa(e))throw e;t.Ea.add(1),await Uh(t),t.Ra.set("Offline"),n||(n=()=>tR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{fe(vl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await kg(t)})}function lR(t,e){return e().catch(n=>jm(t,n,e))}async function Bh(t){const e=ze(t),n=Yo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ja;for(;UB(e);)try{const s=await xB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,BB(e,s)}catch(s){await jm(e,s)}cR(e)&&uR(e)}function UB(t){return Pl(t)&&t.Ta.length<10}function BB(t,e){t.Ta.push(e);const n=Yo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cR(t){return Pl(t)&&!Yo(t).x_()&&t.Ta.length>0}function uR(t){Yo(t).start()}async function zB(t){Yo(t).ra()}async function $B(t){const e=Yo(t);for(const n of t.Ta)e.ea(n.mutations)}async function WB(t,e,n){const r=t.Ta.shift(),s=F_.from(r,e,n);await lR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bh(t)}async function HB(t,e){e&&Yo(t).X_&&await async function(r,s){if(function(a){return EU(a)&&a!==ne.ABORTED}(s.code)){const i=r.Ta.shift();Yo(r).B_(),await lR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bh(r)}}(t,e),cR(t)&&uR(t)}async function R1(t,e){const n=ze(t);n.asyncQueue.verifyOperationInProgress(),fe(vl,"RemoteStore received new credentials");const r=Pl(n);n.Ea.add(3),await Uh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await kg(n)}async function qB(t,e){const n=ze(t);e?(n.Ea.delete(2),await kg(n)):e||(n.Ea.add(2),await Uh(n),n.Ra.set("Unknown"))}function wu(t){return t.ma||(t.ma=function(n,r,s){const i=ze(n);return i.sa(),new AB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:VB.bind(null,t),t_:LB.bind(null,t),r_:jB.bind(null,t),H_:FB.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Z_(t)?J_(t):t.Ra.set("Unknown")):(await t.ma.stop(),aR(t))})),t.ma}function Yo(t){return t.fa||(t.fa=function(n,r,s){const i=ze(n);return i.sa(),new RB(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:zB.bind(null,t),r_:HB.bind(null,t),ta:$B.bind(null,t),na:WB.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Bh(t)):(await t.fa.stop(),t.Ta.length>0&&(fe(vl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new ex(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tx(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),sa(t))return new ge(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{static emptySet(e){return new jc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=kd(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.ga=new Nt(we.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ke(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class iu{constructor(e,n,r,s,i,a,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new iu(e,n,jc.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class GB{constructor(){this.queries=D1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ze(n),i=s.queries;s.queries=D1(),i.forEach((a,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function D1(){return new Gi(t=>uA(t),vg)}async function nx(t,e){const n=ze(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new KB,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=tx(a,`Initialization of query '${Tc(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&sx(n)}async function rx(t,e){const n=ze(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YB(t,e){const n=ze(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&sx(n)}function QB(t,e,n){const r=ze(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function sx(t){t.Ca.forEach(e=>{e.next()})}var cw,M1;(M1=cw||(cw={})).Ma="default",M1.Cache="cache";class ix{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new iu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.key=e}}class hR{constructor(e){this.key=e}}class XB{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ge(),this.mutatedKeys=Ge(),this.eu=dA(e),this.tu=new jc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new N1,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const v=s.get(p),E=jh(this.query,m)?m:null,S=!!v&&this.mutatedKeys.has(v.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let I=!1;v&&E?v.data.isEqual(E.data)?S!==T&&(r.track({type:3,doc:E}),I=!0):this.su(v,E)||(r.track({type:2,doc:E}),I=!0,(u&&this.eu(E,u)>0||h&&this.eu(E,h)<0)&&(c=!0)):!v&&E?(r.track({type:0,doc:E}),I=!0):v&&!E&&(r.track({type:1,doc:v}),I=!0,(u||h)&&(c=!0)),I&&(E?(a=a.add(E),i=T?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,m)=>function(E,S){const T=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Rt:I})}};return T(E)-T(S)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,h=u!==this.Za;return this.Za=u,a.length!==0||h?{snapshot:new iu(this.query,e.tu,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new hR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new dR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return iu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ox="SyncEngine";class JB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZB{constructor(e){this.key=e,this.hu=!1}}class e9{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Gi(c=>uA(c),vg),this.Iu=new Map,this.Eu=new Set,this.du=new Nt(we.comparator),this.Au=new Map,this.Ru=new H_,this.Vu={},this.mu=new Map,this.fu=yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function t9(t,e,n=!0){const r=vR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await fR(r,e,n,!0),s}async function n9(t,e){const n=vR(t);await fR(n,e,!0,!1)}async function fR(t,e,n,r){const s=await bB(t.localStore,Jr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await r9(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&iR(t.remoteStore,s),c}async function r9(t,e,n,r,s){t.pu=(m,v,E)=>async function(T,I,C,N){let R=I.view.ru(C);R.Cs&&(R=await I1(T.localStore,I.query,!1).then(({documents:D})=>I.view.ru(D,R)));const L=N&&N.targetChanges.get(I.targetId),z=N&&N.targetMismatches.get(I.targetId)!=null,K=I.view.applyChanges(R,T.isPrimaryClient,L,z);return V1(T,I.targetId,K.au),K.snapshot}(t,m,v,E);const i=await I1(t.localStore,e,!0),a=new XB(e,i.Qs),c=a.ru(i.documents),u=Fh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(c,t.isPrimaryClient,u);V1(t,n,h.au);const p=new JB(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function s9(t,e,n){const r=ze(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!vg(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await aw(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Q_(r.remoteStore,s.targetId),uw(r,s.targetId)}).catch(Cl)):(uw(r,s.targetId),await aw(r.localStore,s.targetId,!0))}async function i9(t,e){const n=ze(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Q_(n.remoteStore,r.targetId))}async function o9(t,e,n){const r=wR(t);try{const s=await function(a,c){const u=ze(a),h=ut.now(),p=c.reduce((E,S)=>E.add(S.key),Ge());let m,v;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Ar(),T=Ge();return u.Ns.getEntries(E,p).next(I=>{S=I,S.forEach((C,N)=>{N.isValidDocument()||(T=T.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,S)).next(I=>{m=I;const C=[];for(const N of c){const R=xU(N,m.get(N.key).overlayedDocument);R!=null&&C.push(new Yi(N.key,R,tA(R.value.mapValue),Yn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,h,C,c)}).next(I=>{v=I;const C=I.applyToLocalDocumentSet(m,T);return u.documentOverlayCache.saveOverlays(E,I.batchId,C)})}).then(()=>({batchId:v.batchId,changes:fA(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let h=a.Vu[a.currentUser.toKey()];h||(h=new Nt(Be)),h=h.insert(c,u),a.Vu[a.currentUser.toKey()]=h}(r,s.batchId,n),await zh(r,s.changes),await Bh(r.remoteStore)}catch(s){const i=tx(s,"Failed to persist write");n.reject(i)}}async function pR(t,e){const n=ze(t);try{const r=await wB(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Re(a.hu,14607):s.removedDocuments.size>0&&(Re(a.hu,42227),a.hu=!1))}),await zh(n,r,e)}catch(r){await Cl(r)}}function O1(t,e,n){const r=ze(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ze(a);u.onlineState=c;let h=!1;u.queries.forEach((p,m)=>{for(const v of m.Sa)v.va(c)&&(h=!0)}),h&&sx(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a9(t,e,n){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Nt(we.comparator);a=a.insert(i,$t.newNoDocument(i,Me.min()));const c=Ge().add(i),u=new bg(Me.min(),new Map,new Nt(Be),a,c);await pR(r,u),r.du=r.du.remove(i),r.Au.delete(e),ax(r)}else await aw(r.localStore,e,!1).then(()=>uw(r,e,n)).catch(Cl)}async function l9(t,e){const n=ze(t),r=e.batch.batchId;try{const s=await vB(n.localStore,e);gR(n,r,null),mR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zh(n,s)}catch(s){await Cl(s)}}async function c9(t,e,n){const r=ze(t);try{const s=await function(a,c){const u=ze(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,c).next(m=>(Re(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);gR(r,e,n),mR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zh(r,s)}catch(s){await Cl(s)}}function mR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function gR(t,e,n){const r=ze(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function uw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||yR(t,r)})}function yR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Q_(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),ax(t))}function V1(t,e,n){for(const r of n)r instanceof dR?(t.Ru.addReference(r.key,e),u9(t,r)):r instanceof hR?(fe(ox,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||yR(t,r.key)):ke(19791,{wu:r})}function u9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(fe(ox,"New document in limbo: "+n),t.Eu.add(r),ax(t))}function ax(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new we(at.fromString(e)),r=t.fu.next();t.Au.set(r,new ZB(n)),t.du=t.du.insert(n,r),iR(t.remoteStore,new Ri(Jr(Lh(n.path)),r,"TargetPurposeLimboResolution",Qr.ce))}}async function zh(t,e,n){const r=ze(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=G_.As(u.targetId,h);i.push(m)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,h){const p=ze(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Y.forEach(h,v=>Y.forEach(v.Es,E=>p.persistence.referenceDelegate.addReference(m,v.targetId,E)).next(()=>Y.forEach(v.ds,E=>p.persistence.referenceDelegate.removeReference(m,v.targetId,E)))))}catch(m){if(!sa(m))throw m;fe(Y_,"Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const E=p.Ms.get(v),S=E.snapshotVersion,T=E.withLastLimboFreeSnapshotVersion(S);p.Ms=p.Ms.insert(v,T)}}}(r.localStore,i))}async function d9(t,e){const n=ze(t);if(!n.currentUser.isEqual(e)){fe(ox,"User change. New user:",e.toKey());const r=await eR(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new ge(ne.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zh(n,r.Ls)}}function h9(t,e){const n=ze(t),r=n.Au.get(e);if(r&&r.hu)return Ge().add(r.key);{let s=Ge();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function vR(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a9.bind(null,e),e.Pu.H_=YB.bind(null,e.eventManager),e.Pu.yu=QB.bind(null,e.eventManager),e}function wR(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c9.bind(null,e),e}class hh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ig(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZA(this.persistence,new JA,e.initialUser,this.serializer)}Cu(e){return new q_(Sg.mi,this.serializer)}Du(e){return new nR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hh.provider={build:()=>new hh};class f9 extends hh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Re(this.persistence.referenceDelegate instanceof Lm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KA(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new q_(r=>Lm.mi(r,n),this.serializer)}}class p9 extends hh{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await wR(this.xu.syncEngine),await Bh(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return ZA(this.persistence,new JA,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new KA(r,e.asyncQueue,n)}Mu(e,n){const r=new _3(n,this.persistence);return new w3(e.asyncQueue,r)}Cu(e){const n=pB(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new K_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,PB(),nm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new nR}}class Fm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d9.bind(null,this.syncEngine),await qB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GB}()}createDatastore(e){const n=Ig(e.databaseInfo.databaseId),r=function(i){return new CB(i)}(e.databaseInfo);return function(i,a,c,u){return new DB(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new OB(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>O1(this.syncEngine,n,0),function(){return P1.v()?new P1:new TB}())}createSyncEngine(e,n){return function(s,i,a,c,u,h,p){const m=new e9(s,i,a,c,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ze(s);fe(vl,"RemoteStore shutting down."),i.Ea.add(5),await Uh(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Fm.provider={build:()=>new Fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="FirestoreClient";class m9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Cn.UNAUTHENTICATED,this.clientId=I_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{fe(Qo,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(fe(Qo,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gv(t,e){t.asyncQueue.verifyOperationInProgress(),fe(Qo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await eR(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function L1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await g9(t);fe(Qo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>R1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>R1(e.remoteStore,s)),t._onlineComponents=e}async function g9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(Qo,"Using user provided OfflineComponentProvider");try{await Gv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;hl("Error using user provided cache. Falling back to memory cache: "+n),await Gv(t,new hh)}}else fe(Qo,"Using default OfflineComponentProvider"),await Gv(t,new f9(void 0));return t._offlineComponents}async function _R(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(Qo,"Using user provided OnlineComponentProvider"),await L1(t,t._uninitializedComponentsProvider._online)):(fe(Qo,"Using default OnlineComponentProvider"),await L1(t,new Fm))),t._onlineComponents}function y9(t){return _R(t).then(e=>e.syncEngine)}async function Um(t){const e=await _R(t),n=e.eventManager;return n.onListen=t9.bind(null,e.syncEngine),n.onUnlisten=s9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=i9.bind(null,e.syncEngine),n}function v9(t,e,n={}){const r=new Qs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,h){const p=new lx({next:v=>{p.Nu(),a.enqueueAndForget(()=>rx(i,m));const E=v.docs.has(c);!E&&v.fromCache?h.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&u&&u.source==="server"?h.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new ix(Lh(c.path),p,{includeMetadataChanges:!0,qa:!0});return nx(i,m)}(await Um(t),t.asyncQueue,e,n,r)),r.promise}function w9(t,e,n={}){const r=new Qs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,h){const p=new lx({next:v=>{p.Nu(),a.enqueueAndForget(()=>rx(i,m)),v.fromCache&&u.source==="server"?h.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new ix(c,p,{includeMetadataChanges:!0,qa:!0});return nx(i,m)}(await Um(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR="firestore.googleapis.com",F1=!0;class U1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bR,this.ssl=F1}else this.host=e.host,this.ssl=e.ssl??F1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XU)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cg{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i3;switch(r.type){case"firstParty":return new c3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j1.get(n);r&&(fe("ComponentProvider","Removing Datastore"),j1.delete(n),r.terminate())}(this),Promise.resolve()}}function _9(t,e,n,r={}){var h;t=Nr(t,Cg);const s=na(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(h_(`https://${c}`),f_("Firestore",!0)),i.host!==bR&&i.host!==c&&hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!al(u,a)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Cn.MOCK_USER;else{p=NC(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Cn(v)}t._authCredentials=new o3(new CP(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oa(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}toJSON(){return{type:Xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Mh(n,Xt._jsonSchema))return new Xt(e,r||null,new we(at.fromString(n.referencePath)))}}Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:on("string",Xt._jsonSchemaVersion),referencePath:on("string")};class Wo extends oa{constructor(e,n,r){super(e,n,Lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new we(e))}withConverter(e){return new Wo(this.firestore,e,this._path)}}function Dr(t,e,...n){if(t=Rt(t),AP("collection","path",e),t instanceof Cg){const r=at.fromString(e,...n);return AS(r),new Wo(t,null,r)}{if(!(t instanceof Xt||t instanceof Wo))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return AS(r),new Wo(t.firestore,null,r)}}function Xr(t,e,...n){if(t=Rt(t),arguments.length===1&&(e=I_.newId()),AP("doc","path",e),t instanceof Cg){const r=at.fromString(e,...n);return PS(r),new Xt(t,null,new we(r))}{if(!(t instanceof Xt||t instanceof Wo))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return PS(r),new Xt(t.firestore,t instanceof Wo?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="AsyncQueue";class z1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rR(this,"async_queue_retry"),this._c=()=>{const r=nm();r&&fe(B1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sa(e))throw e;fe(B1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",$1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ex.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ke(47125,{Pc:$1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ui extends Cg{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new z1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z1(e),this._firestoreClient=void 0,await e}}}function x9(t,e){const n=typeof t=="object"?t:g_(),r=typeof t=="string"?t:Pm,s=og(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=PC("firestore");i&&_9(s,...i)}return s}function Pg(t){if(t._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ER(t),t._firestoreClient}function ER(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,h,p){return new Y3(c,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,xR(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new m9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}function b9(t,e){hl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return E9(t,Fm.provider,{build:r=>new p9(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function E9(t,e,n){if((t=Nr(t,Ui))._firestoreClient||t._terminated)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ge(ne.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},ER(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(an.fromBase64String(e))}catch(n){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yr(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mh(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:on("string",Yr._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xs._jsonSchemaVersion}}static fromJSON(e){if(Mh(e,Xs._jsonSchema))return new Xs(e.latitude,e.longitude)}}Xs._jsonSchemaVersion="firestore/geoPoint/1.0",Xs._jsonSchema={type:on("string",Xs._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Js._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mh(e,Js._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Js(e.vectorValues);throw new ge(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Js._jsonSchemaVersion="firestore/vectorValue/1.0",Js._jsonSchema={type:on("string",Js._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=/^__.*__$/;class S9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new vu(e,this.data,n,this.fieldTransforms)}}class TR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function SR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{Ac:t})}}class cx{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SR(this.Ac)&&T9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class I9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ig(e)}Cc(e,n,r,s=!1){return new cx({Ac:e,methodName:n,Dc:r,path:Lt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ux(t){const e=t._freezeSettings(),n=Ig(t._databaseId);return new I9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function k9(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);hx("Data must be an object, but it was:",a,r);const c=IR(r,a);let u,h;if(i.merge)u=new pr(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const v=dw(e,m,n);if(!a.contains(v))throw new ge(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);CR(p,v)||p.push(v)}u=new pr(p),h=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=a.fieldTransforms;return new S9(new Ln(c),u,h)}class Ng extends Rg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ng}}class dx extends Rg{_toFieldTransform(e){return new _A(e.path,new tu)}isEqual(e){return e instanceof dx}}function C9(t,e,n,r){const s=t.Cc(1,e,n);hx("Data must be an object, but it was:",s,r);const i=[],a=Ln.empty();ia(r,(u,h)=>{const p=fx(e,u,n);h=Rt(h);const m=s.yc(p);if(h instanceof Ng)i.push(p);else{const v=$h(h,m);v!=null&&(i.push(p),a.set(p,v))}});const c=new pr(i);return new TR(a,c,s.fieldTransforms)}function P9(t,e,n,r,s,i){const a=t.Cc(1,e,n),c=[dw(e,r,n)],u=[s];if(i.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)c.push(dw(e,i[v])),u.push(i[v+1]);const h=[],p=Ln.empty();for(let v=c.length-1;v>=0;--v)if(!CR(h,c[v])){const E=c[v];let S=u[v];S=Rt(S);const T=a.yc(E);if(S instanceof Ng)h.push(E);else{const I=$h(S,T);I!=null&&(h.push(E),p.set(E,I))}}const m=new pr(h);return new TR(p,m,a.fieldTransforms)}function A9(t,e,n,r=!1){return $h(n,t.Cc(r?4:3,e))}function $h(t,e){if(kR(t=Rt(t)))return hx("Unsupported field value:",e,t),IR(t,e);if(t instanceof Rg)return function(r,s){if(!SR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=$h(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ut.fromDate(r);return{timestampValue:su(s.serializer,i)}}if(r instanceof ut){const i=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:su(s.serializer,i)}}if(r instanceof Xs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:kA(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:z_(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Js)return function(a,c){return{mapValue:{fields:{[M_]:{stringValue:O_},[Xc]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return L_(c.serializer,h)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${ug(r)}`)}(t,e)}function IR(t,e){const n={};return qP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(r,s)=>{const i=$h(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof Xs||t instanceof Yr||t instanceof Xt||t instanceof Rg||t instanceof Js)}function hx(t,e,n){if(!kR(n)||!RP(n)){const r=ug(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function dw(t,e,n){if((e=Rt(e))instanceof Ag)return e._internalPath;if(typeof e=="string")return fx(t,e);throw Bm("Field path arguments must be of type string or ",t,!1,void 0,n)}const R9=new RegExp("[~\\*/\\[\\]]");function fx(t,e,n){if(e.search(R9)>=0)throw Bm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ag(...e.split("."))._internalPath}catch{throw Bm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bm(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new ge(ne.INVALID_ARGUMENT,c+t+u)}function CR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new N9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class N9 extends PR{data(){return super.data()}}function Dg(t,e){return typeof e=="string"?fx(t,e):e instanceof Ag?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class px{}class RR extends px{}function sn(t,e,...n){let r=[];e instanceof px&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof mx).length,c=i.filter(u=>u instanceof Mg).length;if(a>1||a>0&&c>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Mg extends RR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mg(e,n,r)}_apply(e){const n=this._parse(e);return NR(e._query,n),new oa(e.firestore,e.converter,J0(e._query,n))}_parse(e){const n=ux(e.firestore);return function(i,a,c,u,h,p,m){let v;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){K1(m,p);const S=[];for(const T of m)S.push(q1(u,i,T));v={arrayValue:{values:S}}}else v=q1(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||K1(m,p),v=A9(c,a,m,p==="in"||p==="not-in");return Xe.create(h,p,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qt(t,e,n){const r=e,s=Dg("where",t);return Mg._create(s,r,n)}class mx extends px{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:dt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)NR(a,u),a=J0(a,u)}(e._query,n),new oa(e.firestore,e.converter,J0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gx extends RR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new gx(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new uh(i,a)}(e._query,this._field,this._direction);return new oa(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new yu(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function H1(t,e="asc"){const n=e,r=Dg("orderBy",t);return gx._create(r,n)}function q1(t,e,n){if(typeof(n=Rt(n))=="string"){if(n==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cA(e)&&n.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(at.fromString(n));if(!we.isDocumentKey(r))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lh(t,new we(r))}if(n instanceof Xt)return lh(t,n._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ug(n)}.`)}function K1(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NR(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class D9{convertValue(e,n="none"){switch(Ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ia(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Xc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Pt(a.doubleValue));return new Js(n)}convertGeoPoint(e){return new Xs(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const n=ji(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=at.fromString(e);Re(LA(r),9688,{name:e});const s=new fl(r.get(1),r.get(3)),i=new we(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ad{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tl extends PR{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=tl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}tl._jsonSchemaVersion="firestore/documentSnapshot/1.0",tl._jsonSchema={type:on("string",tl._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class rm extends tl{data(e={}){return super.data(e)}}class nl{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ad(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new rm(this._firestore,this._userDataWriter,r.key,r,new Ad(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new rm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ad(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new rm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ad(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:O9(c.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=I_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function O9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){t=Nr(t,Xt);const e=Nr(t.firestore,Ui);return v9(Pg(e),t._key).then(n=>DR(e,t,n))}nl._jsonSchemaVersion="firestore/querySnapshot/1.0",nl._jsonSchema={type:on("string",nl._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class vx extends D9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function Og(t){t=Nr(t,oa);const e=Nr(t.firestore,Ui),n=Pg(e),r=new vx(e);return AR(t._query),w9(n,t._query).then(s=>new nl(e,r,t,s))}function zm(t,e,n,...r){t=Nr(t,Xt);const s=Nr(t.firestore,Ui),i=ux(s);let a;return a=typeof(e=Rt(e))=="string"||e instanceof Ag?P9(i,"updateDoc",t._key,e,n,r):C9(i,"updateDoc",t._key,e),wx(s,[a.toMutation(t._key,Yn.exists(!0))])}function Vg(t){return wx(Nr(t.firestore,Ui),[new xg(t._key,Yn.none())])}function _u(t,e){const n=Nr(t.firestore,Ui),r=Xr(t),s=M9(t.converter,e);return wx(n,[k9(ux(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}function V9(t,...e){var u,h,p;t=Rt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||W1(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(W1(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(h=m.error)==null?void 0:h.bind(m),e[r+2]=(p=m.complete)==null?void 0:p.bind(m)}let i,a,c;if(t instanceof Xt)a=Nr(t.firestore,Ui),c=Lh(t._key.path),i={next:m=>{e[r]&&e[r](DR(a,t,m))},error:e[r+1],complete:e[r+2]};else{const m=Nr(t,oa);a=Nr(m.firestore,Ui),c=m._query;const v=new vx(a);i={next:E=>{e[r]&&e[r](new nl(a,v,m,E))},error:e[r+1],complete:e[r+2]},AR(t._query)}return function(v,E,S,T){const I=new lx(T),C=new ix(E,I,S);return v.asyncQueue.enqueueAndForget(async()=>nx(await Um(v),C)),()=>{I.Nu(),v.asyncQueue.enqueueAndForget(async()=>rx(await Um(v),C))}}(Pg(a),c,s,i)}function wx(t,e){return function(r,s){const i=new Qs;return r.asyncQueue.enqueueAndForget(async()=>o9(await y9(r),s,i)),i.promise}(Pg(t),e)}function DR(t,e,n){const r=n.docs.get(e._key),s=new vx(t);return new tl(t,s,e._key,r,new Ad(n.hasPendingWrites,n.fromCache),e.converter)}function bs(){return new dx("serverTimestamp")}(function(e,n=!0){(function(s){gu=s})(Il),ll(new qo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Ui(new a3(r.getProvider("auth-internal")),new u3(a,r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fl(h.options.projectId,p)}(a,s),a);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Ks(SS,IS,e),Ks(SS,IS,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR="firebasestorage.googleapis.com",OR="storageBucket",L9=120*1e3,j9=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht extends ui{constructor(e,n,r=0){super(Yv(e),`Firebase Storage: ${n} (${Yv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ht.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function Yv(t){return"storage/"+t}function _x(){const t="An unknown error occurred, please check the error payload for server response.";return new Ht(Wt.UNKNOWN,t)}function F9(t){return new Ht(Wt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function U9(t){return new Ht(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function B9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ht(Wt.UNAUTHENTICATED,t)}function z9(){return new Ht(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $9(t){return new Ht(Wt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function W9(){return new Ht(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function H9(){return new Ht(Wt.CANCELED,"User canceled the upload/download.")}function q9(t){return new Ht(Wt.INVALID_URL,"Invalid URL '"+t+"'.")}function K9(t){return new Ht(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function G9(){return new Ht(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OR+"' property when initializing the app?")}function Y9(){return new Ht(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Q9(){return new Ht(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function X9(t){return new Ht(Wt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hw(t){return new Ht(Wt.INVALID_ARGUMENT,t)}function VR(){return new Ht(Wt.APP_DELETED,"The Firebase app was deleted.")}function J9(t){return new Ht(Wt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wd(t,e){return new Ht(Wt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wd(t){throw new Ht(Wt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rr.makeFromUrl(e,n)}catch{return new Rr(e,"")}if(r.path==="")return r;throw K9(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",E=new RegExp(`^https?://${m}/${p}/b/${s}/o${v}`,"i"),S={bucket:1,path:3},T=n===MR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",C=new RegExp(`^https?://${T}/${s}/${I}`,"i"),R=[{regex:c,indices:u,postModify:i},{regex:E,indices:S,postModify:h},{regex:C,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<R.length;L++){const z=R[L],K=z.regex.exec(e);if(K){const D=K[z.indices.bucket];let P=K[z.indices.path];P||(P=""),r=new Rr(D,P),z.postModify(r);break}}if(r==null)throw q9(e);return r}}class Z9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(t,e,n){let r=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let h=!1;function p(...I){h||(h=!0,e.apply(null,I))}function m(I){s=setTimeout(()=>{s=null,t(E,u())},I)}function v(){i&&clearTimeout(i)}function E(I,...C){if(h){v();return}if(I){v(),p.call(null,I,...C);return}if(u()||a){v(),p.call(null,I,...C);return}r<64&&(r*=2);let R;c===1?(c=2,R=0):R=(r+Math.random())*1e3,m(R)}let S=!1;function T(I){S||(S=!0,v(),!h&&(s!==null?(I||(c=2),clearTimeout(s),m(0)):I||(c=1)))}return m(0),i=setTimeout(()=>{a=!0,T(!0)},n),T}function t8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t){return t!==void 0}function r8(t){return typeof t=="object"&&!Array.isArray(t)}function xx(t){return typeof t=="string"||t instanceof String}function G1(t){return bx()&&t instanceof Blob}function bx(){return typeof Blob<"u"}function Y1(t,e,n,r){if(r<e)throw hw(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hw(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function LR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var rl;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(rl||(rl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,n,r,s,i,a,c,u,h,p,m,v=!0,E=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=v,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,T)=>{this.resolve_=S,this.reject_=T,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Tp(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===rl.NO_ERROR,u=i.getStatus();if(!c||s8(u,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===rl.ABORT;r(!1,new Tp(!1,null,p));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new Tp(h,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());n8(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=_x();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?VR():H9();a(u)}else{const u=W9();a(u)}};this.canceled_?n(!1,new Tp(!1,null,!0)):this.backoffId_=e8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function o8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function a8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function c8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function u8(t,e,n,r,s,i,a=!0,c=!1){const u=LR(t.urlParams),h=t.url+u,p=Object.assign({},t.headers);return l8(p,e),o8(p,n),a8(p,i),c8(p,r),new i8(h,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h8(...t){const e=d8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(bx())return new Blob(t);throw new Ht(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t){if(typeof atob>"u")throw X9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qv{constructor(e,n){this.data=e,this.contentType=n||null}}function m8(t,e){switch(t){case Hs.RAW:return new Qv(jR(e));case Hs.BASE64:case Hs.BASE64URL:return new Qv(FR(t,e));case Hs.DATA_URL:return new Qv(y8(e),v8(e))}throw _x()}function jR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function g8(t){let e;try{e=decodeURIComponent(t)}catch{throw Wd(Hs.DATA_URL,"Malformed data URL.")}return jR(e)}function FR(t,e){switch(t){case Hs.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Wd(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Hs.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Wd(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=p8(e)}catch(s){throw s.message.includes("polyfill")?s:Wd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class UR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Wd(Hs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=w8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function y8(t){const e=new UR(t);return e.base64?FR(Hs.BASE64,e.rest):g8(e.rest)}function v8(t){return new UR(t).contentType}function w8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){let r=0,s="";G1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(G1(this.data_)){const r=this.data_,s=f8(r,e,n);return s===null?null:new jo(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new jo(r,!0)}}static getBlob(...e){if(bx()){const n=e.map(r=>r instanceof jo?r.data_:r);return new jo(h8.apply(null,n))}else{const n=e.map(a=>xx(a)?m8(Hs.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new jo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t){let e;try{e=JSON.parse(t)}catch{return null}return r8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function x8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function zR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t,e){return e}class Kn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||b8}}let Sp=null;function E8(t){return!xx(t)||t.length<2?t:zR(t)}function $R(){if(Sp)return Sp;const t=[];t.push(new Kn("bucket")),t.push(new Kn("generation")),t.push(new Kn("metageneration")),t.push(new Kn("name","fullPath",!0));function e(i,a){return E8(a)}const n=new Kn("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Kn("size");return s.xform=r,t.push(s),t.push(new Kn("timeCreated")),t.push(new Kn("updated")),t.push(new Kn("md5Hash",null,!0)),t.push(new Kn("cacheControl",null,!0)),t.push(new Kn("contentDisposition",null,!0)),t.push(new Kn("contentEncoding",null,!0)),t.push(new Kn("contentLanguage",null,!0)),t.push(new Kn("contentType",null,!0)),t.push(new Kn("metadata","customMetadata",!0)),Sp=t,Sp}function T8(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Rr(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function S8(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return T8(r,t),r}function WR(t,e,n){const r=BR(e);return r===null?null:S8(t,r,n)}function I8(t,e,n,r){const s=BR(e);if(s===null||!xx(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,v="/b/"+a(p)+"/o/"+a(m),E=Ex(v,n,r),S=LR({alt:"media",token:h});return E+S})[0]}function k8(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class HR{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){if(!t)throw _x()}function C8(t,e){function n(r,s){const i=WR(t,s,e);return qR(i!==null),i}return n}function P8(t,e){function n(r,s){const i=WR(t,s,e);return qR(i!==null),I8(i,s,t.host,t._protocol)}return n}function KR(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=z9():s=B9():n.getStatus()===402?s=U9(t.bucket):n.getStatus()===403?s=$9(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function A8(t){const e=KR(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=F9(t.path)),i.serverResponse=s.serverResponse,i}return n}function R8(t,e,n){const r=e.fullServerUrl(),s=Ex(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new HR(s,i,P8(t,n),a);return c.errorHandler=A8(e),c}function N8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function D8(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=N8(null,e)),r}function M8(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let R="";for(let L=0;L<2;L++)R=R+Math.random().toString().slice(2);return R}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const h=D8(e,r,s),p=k8(h,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,v=`\r
--`+u+"--",E=jo.getBlob(m,r,v);if(E===null)throw Y9();const S={name:h.fullPath},T=Ex(i,t.host,t._protocol),I="POST",C=t.maxUploadRetryTime,N=new HR(T,I,C8(t,n),C);return N.urlParams=S,N.headers=a,N.body=E.uploadData(),N.errorHandler=KR(e),N}class O8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw wd("cannot .send() more than once");if(na(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class V8 extends O8{initXhr(){this.xhr_.responseType="text"}}function GR(){return new V8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this._service=e,n instanceof Rr?this._location=n:this._location=Rr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new wl(e,n)}get root(){const e=new Rr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zR(this._location.path)}get storage(){return this._service}get parent(){const e=_8(this._location.path);if(e===null)return null;const n=new Rr(this._location.bucket,e);return new wl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw J9(e)}}function L8(t,e,n){t._throwIfRoot("uploadBytes");const r=M8(t.storage,t._location,$R(),new jo(e,!0),n);return t.storage.makeRequestWithTokens(r,GR).then(s=>({metadata:s,ref:t}))}function j8(t){t._throwIfRoot("getDownloadURL");const e=R8(t.storage,t._location,$R());return t.storage.makeRequestWithTokens(e,GR).then(n=>{if(n===null)throw Q9();return n})}function F8(t,e){const n=x8(t._location.path,e),r=new Rr(t._location.bucket,n);return new wl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){return/^[A-Za-z]+:\/\//.test(t)}function B8(t,e){return new wl(t,e)}function YR(t,e){if(t instanceof Tx){const n=t;if(n._bucket==null)throw G9();const r=new wl(n,n._bucket);return e!=null?YR(r,e):r}else return e!==void 0?F8(t,e):t}function z8(t,e){if(e&&U8(e)){if(t instanceof Tx)return B8(t,e);throw hw("To use ref(service, url), the first argument must be a Storage instance.")}else return YR(t,e)}function Q1(t,e){const n=e==null?void 0:e[OR];return n==null?null:Rr.makeFromBucketSpec(n,t)}function $8(t,e,n,r={}){t.host=`${e}:${n}`;const s=na(e);s&&(h_(`https://${t.host}/b`),f_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:NC(i,t.app.options.projectId))}class Tx{constructor(e,n,r,s,i,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=MR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=L9,this._maxUploadRetryTime=j9,this._requests=new Set,s!=null?this._bucket=Rr.makeFromBucketSpec(s,this._host):this._bucket=Q1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rr.makeFromBucketSpec(this._url,e):this._bucket=Q1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Y1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Y1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wl(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Z9(VR());{const a=u8(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const X1="@firebase/storage",J1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR="storage";function W8(t,e,n){return t=Rt(t),L8(t,e,n)}function H8(t){return t=Rt(t),j8(t)}function q8(t,e){return t=Rt(t),z8(t,e)}function K8(t=g_(),e){t=Rt(t);const r=og(t,QR).getImmediate({identifier:e}),s=PC("storage");return s&&G8(r,...s),r}function G8(t,e,n,r={}){$8(t,e,n,r)}function Y8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Tx(n,r,s,e,Il)}function Q8(){ll(new qo(QR,Y8,"PUBLIC").setMultipleInstances(!0)),Ks(X1,J1,""),Ks(X1,J1,"esm2020")}Q8();const Z1={apiKey:"AIzaSyDkVAo_xXbBHy8FYwFtMQA66aju08qK_yE",authDomain:"hooked-69.firebaseapp.com",projectId:"hooked-69",storageBucket:"hooked-69.firebasestorage.app",messagingSenderId:"741889428835",appId:"1:741889428835:web:d5f88b43a503c9e6351756",measurementId:"G-6YHKXLN806"};let fh;try{fh=O0(Z1),console.log("✅ Firebase app initialized successfully")}catch(t){console.error("❌ Failed to initialize Firebase app:",t);try{fh=O0(Z1,"fallback-app"),console.log("✅ Firebase app initialized with fallback name")}catch(e){throw console.error("❌ Failed to initialize Firebase app with fallback:",e),new Error("Firebase initialization failed completely")}}const Va=r3(fh),bt=x9(fh),X8=K8(fh),J8=async()=>{try{await b9(bt,{synchronizeTabs:!0}),console.log("✅ Firestore offline persistence enabled")}catch(t){t.code==="failed-precondition"?console.warn("⚠️ Multiple tabs open, persistence can only be enabled in one tab at a time"):t.code==="unimplemented"?console.warn("⚠️ Browser doesn't support persistence"):console.error("❌ Error enabling Firestore persistence:",t)}};J8();const sm={activeListeners:new Map,registerListener(t,e){this.activeListeners.set(t,e),console.log(`📡 Registered listener: ${t} (total: ${this.activeListeners.size})`)},unregisterListener(t){const e=this.activeListeners.get(t);e&&(e(),this.activeListeners.delete(t),console.log(`🧹 Cleaned up listener: ${t} (remaining: ${this.activeListeners.size})`))},cleanupAllListeners(){console.log(`🧹 Cleaning up ${this.activeListeners.size} active listeners...`),this.activeListeners.forEach((t,e)=>{t(),console.log(`🧹 Cleaned up listener: ${e}`)}),this.activeListeners.clear(),console.log("✅ All listeners cleaned up")},getListenerCount(){return this.activeListeners.size}};typeof window<"u"&&(window.addEventListener("beforeunload",()=>{sm.cleanupAllListeners()}),document.addEventListener("visibilitychange",()=>{document.hidden&&console.log("📱 Tab hidden, listeners remain active for background updates")}));class Z8{constructor(){this.isOnline=navigator.onLine,this.retryQueue=[],this.maxRetries=3,this.baseDelay=1e3,this.offlineActions=new Map,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.checkConnectivity()}async checkConnectivity(){try{const e=await fetch("/favicon.png",{method:"HEAD",cache:"no-cache",timeout:5e3});this.isOnline=e.ok}catch{this.isOnline=!1}return this.isOnline=this.isOnline&&navigator.onLine,this.isOnline}async handleOnline(){console.log("🌐 Device is back online"),this.isOnline=!0,await this.processOfflineQueue(),window.dispatchEvent(new CustomEvent("appOnline"))}handleOffline(){console.log("📴 Device is offline"),this.isOnline=!1,window.dispatchEvent(new CustomEvent("appOffline"))}async retryOperation(e,n={}){const{maxRetries:r=this.maxRetries,baseDelay:s=this.baseDelay,operationName:i="Unknown operation",shouldRetry:a=this.shouldRetryError,onRetry:c=null}=n;let u;for(let h=1;h<=r;h++)try{if(!await this.checkConnectivity())throw new Error("No internet connection");return await e()}catch(p){if(u=p,this.logError(p,{operation:i,attempt:h,maxRetries:r,isOnline:this.isOnline}),!a(p,h))throw p;if(h<r){const m=this.calculateDelay(h,s);console.log(`⏳ Retrying ${i} in ${Math.round(m)}ms (attempt ${h}/${r})`),c&&c(p,h,m),await this.sleep(m)}}throw u}shouldRetryError(e,n){return e.code==="permission-denied"||e.code==="not-found"||e.code==="invalid-argument"||e.code==="auth/user-not-found"||e.code==="auth/wrong-password"||e.code==="auth/invalid-email"?!1:e.code==="unavailable"||e.code==="deadline-exceeded"||e.message.includes("network")||e.message.includes("timeout")||e.message.includes("No internet connection")||e.code>=500}calculateDelay(e,n){const r=n*Math.pow(2,e-1),s=Math.random()*1e3;return Math.min(r+s,1e4)}queueOfflineAction(e,n={}){const r={id:Date.now()+Math.random(),action:e,metadata:n,timestamp:new Date().toISOString()};return this.retryQueue.push(r),this.saveOfflineQueue(),console.log(`📝 Queued offline action: ${n.operation||"Unknown"}`),r.id}async processOfflineQueue(){if(this.retryQueue.length===0)return;console.log(`🔄 Processing ${this.retryQueue.length} queued actions`);const e=[...this.retryQueue];this.retryQueue=[];for(const n of e)try{await this.retryOperation(()=>n.action(),{operationName:`Offline action: ${n.metadata.operation||"Unknown"}`,maxRetries:2,baseDelay:2e3}),console.log(`✅ Successfully processed offline action: ${n.metadata.operation||"Unknown"}`)}catch(r){console.error("❌ Failed to process offline action:",r),this.shouldRetryError(r,1)&&this.retryQueue.push(n)}this.saveOfflineQueue()}saveOfflineQueue(){try{localStorage.setItem("hooked_offline_queue",JSON.stringify(this.retryQueue))}catch(e){console.error("Failed to save offline queue:",e)}}loadOfflineQueue(){try{const e=localStorage.getItem("hooked_offline_queue");e&&(this.retryQueue=JSON.parse(e),console.log(`📋 Loaded ${this.retryQueue.length} offline actions`))}catch(e){console.error("Failed to load offline queue:",e),this.retryQueue=[]}}getErrorMessage(e){if(!e)return"An unknown error occurred";if(e.message.includes("No internet connection")||e.code==="unavailable"||!navigator.onLine)return"No internet connection. Please check your network and try again.";switch(e.code){case"permission-denied":return"You don't have permission to perform this action.";case"not-found":return"The requested resource was not found.";case"already-exists":return"This resource already exists.";case"deadline-exceeded":return"The operation timed out. Please try again.";case"auth/user-not-found":return"User account not found.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-email":return"Invalid email address.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";default:return e.message||"An unexpected error occurred. Please try again."}}logError(e,n={}){const r={message:e.message,code:e.code,stack:e.stack,timestamp:new Date().toISOString(),isOnline:this.isOnline,userAgent:navigator.userAgent,url:window.location.href,...n};console.error("🚨 Error occurred:",r)}reportError(e){}sleep(e){return new Promise(n=>setTimeout(n,e))}getOnlineStatus(){return this.isOnline}getOfflineQueueLength(){return this.retryQueue.length}clearOfflineQueue(){this.retryQueue=[],this.saveOfflineQueue()}}const Ho=new Z8;Ho.loadOfflineQueue();const XR=(t,e={})=>Ho.retryOperation(t,e),ez=(t,e)=>Ho.queueOfflineAction(t,e),fw=t=>Ho.getErrorMessage(t),Ip=()=>Ho.getOfflineQueueLength();async function vt(t,e=3,n=1e3,r="Firebase operation"){return XR(t,{maxRetries:e,baseDelay:n,operationName:r})}const Xv={async compressImage(t,e=800,n=.8){return new Promise(r=>{const s=document.createElement("canvas"),i=s.getContext("2d"),a=new Image;a.onload=()=>{let{width:c,height:u}=a;c>e&&(u=u*e/c,c=e),s.width=c,s.height=u,i.drawImage(a,0,0,c,u),s.toBlob(r,"image/jpeg",n)},a.src=URL.createObjectURL(t)})},generateOptimizedFilename(t){const e=Date.now(),n=t.split(".").pop()||"jpg";return`optimized_${e}.${n}`},validateFile(t,e=5){const n=["image/jpeg","image/jpg","image/png","image/webp"],r=e*1024*1024;if(!n.includes(t.type))throw new Error("Invalid file type. Please upload a JPEG, PNG, or WebP image.");if(t.size>r)throw new Error(`File too large. Maximum size is ${e}MB.`);return!0}};class tz{constructor(){this.listeners=new Map,this.listenerCounts=new Map}createListener(e,n,r,s={}){this.cleanupListener(e);const i=V9(n,c=>{const u=c.docs.map(h=>({id:h.id,...h.data()}));r(u)},c=>{console.error(`❌ Listener error for ${e}:`,c),s.onError&&s.onError(c)});sm.registerListener(e,i),this.listeners.set(e,i);const a=this.listenerCounts.get(e)||0;return this.listenerCounts.set(e,a+1),console.log(`📡 Created listener: ${e} (count: ${a+1})`),i}cleanupListener(e){const n=this.listeners.get(e);n&&(n(),this.listeners.delete(e),sm.unregisterListener(e),console.log(`🧹 Cleaned up listener: ${e}`))}cleanupAll(){this.listeners.forEach((e,n)=>{e(),sm.unregisterListener(n)}),this.listeners.clear(),this.listenerCounts.clear(),console.log("🧹 All listeners cleaned up")}getStats(){return{activeListeners:this.listeners.size,listenerCounts:Object.fromEntries(this.listenerCounts)}}}const Sx=new tz,ou={async create(t){return await vt(async()=>({id:(await _u(Dr(bt,"events"),{...t,created_at:bs(),updated_at:bs()})).id,...t}),3,1e3,"Event.create")},async filter(t={}){return await vt(async()=>{let e=Dr(bt,"events");return t.id&&(e=sn(e,Qt("id","==",t.id))),t.event_code&&(e=sn(e,Qt("event_code","==",t.event_code))),t.starts_at&&(e=sn(e,Qt("starts_at",">=",t.starts_at))),t.expires_at&&(e=sn(e,Qt("expires_at","<=",t.expires_at))),(await Og(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Event.filter")},async get(t){return await vt(async()=>{const e=Xr(bt,"events",t),n=await yx(e);return n.exists()?{id:n.id,...n.data()}:null},3,1e3,"Event.get")},async update(t,e){return await vt(async()=>{const n=Xr(bt,"events",t);await zm(n,{...e,updated_at:bs()})},3,1e3,"Event.update")},async delete(t){return await vt(async()=>{const e=Xr(bt,"events",t);await Vg(e)},3,1e3,"Event.delete")},async list(){return await this.filter()}},Ir={async create(t){return await vt(async()=>({id:(await _u(Dr(bt,"event_profiles"),{...t,created_at:bs(),updated_at:bs()})).id,...t}),3,1e3,"EventProfile.create")},async filter(t={}){return await vt(async()=>{let e=Dr(bt,"event_profiles");return t.event_id&&(e=sn(e,Qt("event_id","==",t.event_id))),t.session_id&&(e=sn(e,Qt("session_id","==",t.session_id))),t.email&&(e=sn(e,Qt("email","==",t.email))),t.is_visible!==void 0&&(e=sn(e,Qt("is_visible","==",t.is_visible))),(await Og(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"EventProfile.filter")},async get(t){return await vt(async()=>{const e=Xr(bt,"event_profiles",t),n=await yx(e);return n.exists()?{id:n.id,...n.data()}:null},3,1e3,"EventProfile.get")},async update(t,e){return await vt(async()=>{const n=Xr(bt,"event_profiles",t);await zm(n,{...e,updated_at:bs()})},3,1e3,"EventProfile.update")},async delete(t){return await vt(async()=>{const e=Xr(bt,"event_profiles",t);await Vg(e)},3,1e3,"EventProfile.delete")},async toggleVisibility(t,e){return await vt(async()=>{const n=Xr(bt,"event_profiles",t);await zm(n,{is_visible:e,updated_at:bs()})},3,1e3,"EventProfile.toggleVisibility")},async list(){return await this.filter()},onProfilesChange(t,e,n={}){let r=sn(Dr(bt,"event_profiles"),Qt("event_id","==",t));n.is_visible!==void 0&&(r=sn(r,Qt("is_visible","==",n.is_visible)));const s=`profiles_${t}_${JSON.stringify(n)}`;return Sx.createListener(s,r,e)}},Pr={async create(t){return await vt(async()=>({id:(await _u(Dr(bt,"likes"),{...t,created_at:bs()})).id,...t}),3,1e3,"Like.create")},async filter(t={}){return await vt(async()=>{let e=Dr(bt,"likes");return t.event_id&&(e=sn(e,Qt("event_id","==",t.event_id))),t.from_profile_id&&(e=sn(e,Qt("from_profile_id","==",t.from_profile_id))),t.to_profile_id&&(e=sn(e,Qt("to_profile_id","==",t.to_profile_id))),t.is_mutual!==void 0&&(e=sn(e,Qt("is_mutual","==",t.is_mutual))),(await Og(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Like.filter")},async get(t){return await vt(async()=>{const e=Xr(bt,"likes",t),n=await yx(e);return n.exists()?{id:n.id,...n.data()}:null},3,1e3,"Like.get")},async update(t,e){return await vt(async()=>{const n=Xr(bt,"likes",t);await zm(n,e)},3,1e3,"Like.update")},async delete(t){return await vt(async()=>{const e=Xr(bt,"likes",t);await Vg(e)},3,1e3,"Like.delete")},async list(){return await this.filter()},onLikesChange(t,e,n){const r=sn(Dr(bt,"likes"),Qt("event_id","==",t),Qt("liker_session_id","==",e)),s=`likes_${t}_${e}`;return Sx.createListener(s,r,n)}},Pc={async create(t){return await vt(async()=>({id:(await _u(Dr(bt,"messages"),{...t,created_at:bs()})).id,...t}),3,1e3,"Message.create")},async filter(t={}){return await vt(async()=>{let e=Dr(bt,"messages");return t.event_id&&(e=sn(e,Qt("event_id","==",t.event_id))),t.from_profile_id&&(e=sn(e,Qt("from_profile_id","==",t.from_profile_id))),t.to_profile_id&&(e=sn(e,Qt("to_profile_id","==",t.to_profile_id))),e=sn(e,H1("created_at","desc")),(await Og(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Message.filter")},async delete(t){return await vt(async()=>{const e=Xr(bt,"messages",t);await Vg(e)},3,1e3,"Message.delete")},async list(){return await this.filter()},onMessagesChange(t,e,n){const r=sn(Dr(bt,"messages"),Qt("event_id","==",t),Qt("from_profile_id","==",e),H1("created_at","asc")),s=`messages_${t}_${e}`;return Sx.createListener(s,r,n)}},Jv={async create(t){return await vt(async()=>({id:(await _u(Dr(bt,"contact_shares"),{...t,created_at:bs()})).id,...t}),3,1e3,"ContactShare.create")},async list(){return await this.filter()}},nz={async create(t){return await vt(async()=>({id:(await _u(Dr(bt,"event_feedback"),{...t,created_at:bs()})).id,...t}),3,1e3,"EventFeedback.create")},async list(){return await this.filter()}},rz={async signUp(t,e){return await vt(async()=>(await F5(Va,t,e)).user,3,1e3,"User.signUp")},async signIn(t,e){return await vt(async()=>(await U5(Va,t,e)).user,3,1e3,"User.signIn")},async signOut(){return await vt(async()=>{await q5(Va)},3,1e3,"User.signOut")},async updateProfile(t){return await vt(async()=>{const e=Va.currentUser;if(!e)throw new Error("No user signed in");await z5(e,t)},3,1e3,"User.updateProfile")},getCurrentUser(){return Va.currentUser},async me(){return Va.currentUser},onAuthStateChanged(t){return H5(Va,t)}},sz=async(t,e={})=>await vt(async()=>{Xv.validateFile(t,e.maxSizeMB||5);let n=t;if(t.type.startsWith("image/"))try{const c=await Xv.compressImage(t,e.maxWidth||800,e.quality||.8);n=new File([c],t.name,{type:"image/jpeg"}),console.log("✅ Image compressed successfully")}catch(c){console.warn("⚠️ Image compression failed, uploading original:",c)}const r=Xv.generateOptimizedFilename(t.name),s=q8(X8,`uploads/${Date.now()}_${r}`),i=await W8(s,n),a=await H8(i.ref);return console.log("✅ File uploaded successfully:",{originalSize:t.size,uploadedSize:n.size,compressionRatio:((t.size-n.size)/t.size*100).toFixed(1)+"%"}),{file_url:a}},3,1e3,"uploadFile");function eI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function JR(...t){return e=>{let n=!1;const r=t.map(s=>{const i=eI(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():eI(t[s],null)}}}}function ft(...t){return x.useCallback(JR(...t),t)}function au(t){const e=oz(t),n=x.forwardRef((r,s)=>{const{children:i,...a}=r,c=x.Children.toArray(i),u=c.find(lz);if(u){const h=u.props.children,p=c.map(m=>m===u?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:m);return y.jsx(e,{...a,ref:s,children:x.isValidElement(h)?x.cloneElement(h,void 0,p):null})}return y.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var iz=au("Slot");function oz(t){const e=x.forwardRef((n,r)=>{const{children:s,...i}=n;if(x.isValidElement(s)){const a=uz(s),c=cz(i,s.props);return s.type!==x.Fragment&&(c.ref=r?JR(r,a):a),x.cloneElement(s,c)}return x.Children.count(s)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var az=Symbol("radix.slottable");function lz(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===az}function cz(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...c)=>{const u=i(...c);return s(...c),u}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function uz(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ZR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ZR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function eN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ZR(t))&&(r&&(r+=" "),r+=e);return r}const tI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,nI=eN,Lg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return nI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(h=>{const p=n==null?void 0:n[h],m=i==null?void 0:i[h];if(p===null)return null;const v=tI(p)||tI(m);return s[h][v]}),c=n&&Object.entries(n).reduce((h,p)=>{let[m,v]=p;return v===void 0||(h[m]=v),h},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((h,p)=>{let{class:m,className:v,...E}=p;return Object.entries(E).every(S=>{let[T,I]=S;return Array.isArray(I)?I.includes({...i,...c}[T]):{...i,...c}[T]===I})?[...h,m,v]:h},[]);return nI(t,a,u,n==null?void 0:n.class,n==null?void 0:n.className)},Ix="-",dz=t=>{const e=fz(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const c=a.split(Ix);return c[0]===""&&c.length!==1&&c.shift(),tN(c,e)||hz(a)},getConflictingClassGroupIds:(a,c)=>{const u=n[a]||[];return c&&r[a]?[...u,...r[a]]:u}}},tN=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?tN(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Ix);return(a=e.validators.find(({validator:c})=>c(i)))==null?void 0:a.classGroupId},rI=/^\[(.+)\]$/,hz=t=>{if(rI.test(t)){const e=rI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},fz=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const s in n)pw(n[s],r,s,e);return r},pw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:sI(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(pz(s)){pw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{pw(a,sI(e,i),n,r)})})},sI=(t,e)=>{let n=t;return e.split(Ix).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},pz=t=>t.isThemeGetter,mz=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},mw="!",gw=":",gz=gw.length,yz=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const i=[];let a=0,c=0,u=0,h;for(let S=0;S<s.length;S++){let T=s[S];if(a===0&&c===0){if(T===gw){i.push(s.slice(u,S)),u=S+gz;continue}if(T==="/"){h=S;continue}}T==="["?a++:T==="]"?a--:T==="("?c++:T===")"&&c--}const p=i.length===0?s:s.substring(u),m=vz(p),v=m!==p,E=h&&h>u?h-u:void 0;return{modifiers:i,hasImportantModifier:v,baseClassName:m,maybePostfixModifierPosition:E}};if(e){const s=e+gw,i=r;r=a=>a.startsWith(s)?i(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(n){const s=r;r=i=>n({className:i,parseClassName:s})}return r},vz=t=>t.endsWith(mw)?t.substring(0,t.length-1):t.startsWith(mw)?t.substring(1):t,wz=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(a=>{a[0]==="["||e[a]?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s}},_z=t=>({cache:mz(t.cacheSize),parseClassName:yz(t),sortModifiers:wz(t),...dz(t)}),xz=/\s+/,bz=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,a=[],c=t.trim().split(xz);let u="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{isExternal:m,modifiers:v,hasImportantModifier:E,baseClassName:S,maybePostfixModifierPosition:T}=n(p);if(m){u=p+(u.length>0?" "+u:u);continue}let I=!!T,C=r(I?S.substring(0,T):S);if(!C){if(!I){u=p+(u.length>0?" "+u:u);continue}if(C=r(S),!C){u=p+(u.length>0?" "+u:u);continue}I=!1}const N=i(v).join(":"),R=E?N+mw:N,L=R+C;if(a.includes(L))continue;a.push(L);const z=s(C,I);for(let K=0;K<z.length;++K){const D=z[K];a.push(R+D)}u=p+(u.length>0?" "+u:u)}return u};function Ez(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=nN(e))&&(r&&(r+=" "),r+=n);return r}const nN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=nN(t[r]))&&(n&&(n+=" "),n+=e);return n};function Tz(t,...e){let n,r,s,i=a;function a(u){const h=e.reduce((p,m)=>m(p),t());return n=_z(h),r=n.cache.get,s=n.cache.set,i=c,c(u)}function c(u){const h=r(u);if(h)return h;const p=bz(u,n);return s(u,p),p}return function(){return i(Ez.apply(null,arguments))}}const pn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},rN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,sN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Sz=/^\d+\/\d+$/,Iz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Pz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Az=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vc=t=>Sz.test(t),Ke=t=>!!t&&!Number.isNaN(Number(t)),Co=t=>!!t&&Number.isInteger(Number(t)),Zv=t=>t.endsWith("%")&&Ke(t.slice(0,-1)),Ci=t=>Iz.test(t),Rz=()=>!0,Nz=t=>kz.test(t)&&!Cz.test(t),iN=()=>!1,Dz=t=>Pz.test(t),Mz=t=>Az.test(t),Oz=t=>!Se(t)&&!Ie(t),Vz=t=>xu(t,lN,iN),Se=t=>rN.test(t),La=t=>xu(t,cN,Nz),e0=t=>xu(t,Bz,Ke),iI=t=>xu(t,oN,iN),Lz=t=>xu(t,aN,Mz),kp=t=>xu(t,uN,Dz),Ie=t=>sN.test(t),_d=t=>bu(t,cN),jz=t=>bu(t,zz),oI=t=>bu(t,oN),Fz=t=>bu(t,lN),Uz=t=>bu(t,aN),Cp=t=>bu(t,uN,!0),xu=(t,e,n)=>{const r=rN.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},bu=(t,e,n=!1)=>{const r=sN.exec(t);return r?r[1]?e(r[1]):n:!1},oN=t=>t==="position"||t==="percentage",aN=t=>t==="image"||t==="url",lN=t=>t==="length"||t==="size"||t==="bg-size",cN=t=>t==="length",Bz=t=>t==="number",zz=t=>t==="family-name",uN=t=>t==="shadow",$z=()=>{const t=pn("color"),e=pn("font"),n=pn("text"),r=pn("font-weight"),s=pn("tracking"),i=pn("leading"),a=pn("breakpoint"),c=pn("container"),u=pn("spacing"),h=pn("radius"),p=pn("shadow"),m=pn("inset-shadow"),v=pn("text-shadow"),E=pn("drop-shadow"),S=pn("blur"),T=pn("perspective"),I=pn("aspect"),C=pn("ease"),N=pn("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],z=()=>[...L(),Ie,Se],K=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],P=()=>[Ie,Se,u],V=()=>[vc,"full","auto",...P()],F=()=>[Co,"none","subgrid",Ie,Se],U=()=>["auto",{span:["full",Co,Ie,Se]},Co,Ie,Se],j=()=>[Co,"auto",Ie,Se],M=()=>["auto","min","max","fr",Ie,Se],Z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],re=()=>["auto",...P()],se=()=>[vc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],$=()=>[t,Ie,Se],ie=()=>[...L(),oI,iI,{position:[Ie,Se]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],W=()=>["auto","cover","contain",Fz,Vz,{size:[Ie,Se]}],X=()=>[Zv,_d,La],ae=()=>["","none","full",h,Ie,Se],ve=()=>["",Ke,_d,La],Ae=()=>["solid","dashed","dotted","double"],xe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[Ke,Zv,oI,iI],be=()=>["","none",S,Ie,Se],De=()=>["none",Ke,Ie,Se],Ne=()=>["none",Ke,Ie,Se],$e=()=>[Ke,Ie,Se],We=()=>[vc,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ci],breakpoint:[Ci],color:[Rz],container:[Ci],"drop-shadow":[Ci],ease:["in","out","in-out"],font:[Oz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ci],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ci],shadow:[Ci],spacing:["px",Ke],text:[Ci],"text-shadow":[Ci],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",vc,Se,Ie,I]}],container:["container"],columns:[{columns:[Ke,Se,Ie,c]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:z()}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[Co,"auto",Ie,Se]}],basis:[{basis:[vc,"full","auto",c,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ke,vc,"auto","initial","none",Se]}],grow:[{grow:["",Ke,Ie,Se]}],shrink:[{shrink:["",Ke,Ie,Se]}],order:[{order:[Co,"first","last","none",Ie,Se]}],"grid-cols":[{"grid-cols":F()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":F()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...Z(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...Z()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:re()}],mx:[{mx:re()}],my:[{my:re()}],ms:[{ms:re()}],me:[{me:re()}],mt:[{mt:re()}],mr:[{mr:re()}],mb:[{mb:re()}],ml:[{ml:re()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[c,"screen",...se()]}],"min-w":[{"min-w":[c,"screen","none",...se()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[a]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,_d,La]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ie,e0]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Zv,Se]}],"font-family":[{font:[jz,Se,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ie,Se]}],"line-clamp":[{"line-clamp":[Ke,"none",Ie,e0]}],leading:[{leading:[i,...P()]}],"list-image":[{"list-image":["none",Ie,Se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ie,Se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ke,"from-font","auto",Ie,La]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[Ke,"auto",Ie,Se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ie,Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ie,Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:W()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Co,Ie,Se],radial:["",Ie,Se],conic:[Co,Ie,Se]},Uz,Lz]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:ae()}],"rounded-s":[{"rounded-s":ae()}],"rounded-e":[{"rounded-e":ae()}],"rounded-t":[{"rounded-t":ae()}],"rounded-r":[{"rounded-r":ae()}],"rounded-b":[{"rounded-b":ae()}],"rounded-l":[{"rounded-l":ae()}],"rounded-ss":[{"rounded-ss":ae()}],"rounded-se":[{"rounded-se":ae()}],"rounded-ee":[{"rounded-ee":ae()}],"rounded-es":[{"rounded-es":ae()}],"rounded-tl":[{"rounded-tl":ae()}],"rounded-tr":[{"rounded-tr":ae()}],"rounded-br":[{"rounded-br":ae()}],"rounded-bl":[{"rounded-bl":ae()}],"border-w":[{border:ve()}],"border-w-x":[{"border-x":ve()}],"border-w-y":[{"border-y":ve()}],"border-w-s":[{"border-s":ve()}],"border-w-e":[{"border-e":ve()}],"border-w-t":[{"border-t":ve()}],"border-w-r":[{"border-r":ve()}],"border-w-b":[{"border-b":ve()}],"border-w-l":[{"border-l":ve()}],"divide-x":[{"divide-x":ve()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ve()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ae(),"hidden","none"]}],"divide-style":[{divide:[...Ae(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...Ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ke,Ie,Se]}],"outline-w":[{outline:["",Ke,_d,La]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",p,Cp,kp]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",m,Cp,kp]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[Ke,La]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":ve()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",v,Cp,kp]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[Ke,Ie,Se]}],"mix-blend":[{"mix-blend":[...xe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":xe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[Ie,Se]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":L()}],"mask-image-conic-pos":[{"mask-conic":[Ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:W()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ie,Se]}],filter:[{filter:["","none",Ie,Se]}],blur:[{blur:be()}],brightness:[{brightness:[Ke,Ie,Se]}],contrast:[{contrast:[Ke,Ie,Se]}],"drop-shadow":[{"drop-shadow":["","none",E,Cp,kp]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",Ke,Ie,Se]}],"hue-rotate":[{"hue-rotate":[Ke,Ie,Se]}],invert:[{invert:["",Ke,Ie,Se]}],saturate:[{saturate:[Ke,Ie,Se]}],sepia:[{sepia:["",Ke,Ie,Se]}],"backdrop-filter":[{"backdrop-filter":["","none",Ie,Se]}],"backdrop-blur":[{"backdrop-blur":be()}],"backdrop-brightness":[{"backdrop-brightness":[Ke,Ie,Se]}],"backdrop-contrast":[{"backdrop-contrast":[Ke,Ie,Se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ke,Ie,Se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ke,Ie,Se]}],"backdrop-invert":[{"backdrop-invert":["",Ke,Ie,Se]}],"backdrop-opacity":[{"backdrop-opacity":[Ke,Ie,Se]}],"backdrop-saturate":[{"backdrop-saturate":[Ke,Ie,Se]}],"backdrop-sepia":[{"backdrop-sepia":["",Ke,Ie,Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ie,Se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ke,"initial",Ie,Se]}],ease:[{ease:["linear","initial",C,Ie,Se]}],delay:[{delay:[Ke,Ie,Se]}],animate:[{animate:["none",N,Ie,Se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[T,Ie,Se]}],"perspective-origin":[{"perspective-origin":z()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:Ne()}],"scale-x":[{"scale-x":Ne()}],"scale-y":[{"scale-y":Ne()}],"scale-z":[{"scale-z":Ne()}],"scale-3d":["scale-3d"],skew:[{skew:$e()}],"skew-x":[{"skew-x":$e()}],"skew-y":[{"skew-y":$e()}],transform:[{transform:[Ie,Se,"","none","gpu","cpu"]}],"transform-origin":[{origin:z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ie,Se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ie,Se]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[Ke,_d,La,e0]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Wz=Tz($z);function ot(...t){return Wz(eN(t))}const Hz=Lg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),He=x.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?iz:"button";return y.jsx(a,{className:ot(Hz({variant:e,size:n,className:t})),ref:i,...s})});He.displayName="Button";const kx=x.createContext({});function Cx(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const Px=typeof window<"u",dN=Px?x.useLayoutEffect:x.useEffect,jg=x.createContext(null);function Ax(t,e){t.indexOf(e)===-1&&t.push(e)}function Rx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Bi=(t,e,n)=>n>e?e:n<t?t:n;let Nx=()=>{};const zi={},hN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function fN(t){return typeof t=="object"&&t!==null}const pN=t=>/^0[^.\s]+$/u.test(t);function Dx(t){let e;return()=>(e===void 0&&(e=t()),e)}const Zr=t=>t,qz=(t,e)=>n=>e(t(n)),Wh=(...t)=>t.reduce(qz),ph=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Mx{constructor(){this.subscriptions=[]}add(e){return Ax(this.subscriptions,e),()=>Rx(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zs=t=>t*1e3,ei=t=>t/1e3;function mN(t,e){return e?t*(1e3/e):0}const gN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Kz=1e-7,Gz=12;function Yz(t,e,n,r,s){let i,a,c=0;do a=e+(n-e)/2,i=gN(a,r,s)-t,i>0?n=a:e=a;while(Math.abs(i)>Kz&&++c<Gz);return a}function Hh(t,e,n,r){if(t===e&&n===r)return Zr;const s=i=>Yz(i,0,1,t,n);return i=>i===0||i===1?i:gN(s(i),e,r)}const yN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,vN=t=>e=>1-t(1-e),wN=Hh(.33,1.53,.69,.99),Ox=vN(wN),_N=yN(Ox),xN=t=>(t*=2)<1?.5*Ox(t):.5*(2-Math.pow(2,-10*(t-1))),Vx=t=>1-Math.sin(Math.acos(t)),bN=vN(Vx),EN=yN(Vx),Qz=Hh(.42,0,1,1),Xz=Hh(0,0,.58,1),TN=Hh(.42,0,.58,1),Jz=t=>Array.isArray(t)&&typeof t[0]!="number",SN=t=>Array.isArray(t)&&typeof t[0]=="number",Zz={linear:Zr,easeIn:Qz,easeInOut:TN,easeOut:Xz,circIn:Vx,circInOut:EN,circOut:bN,backIn:Ox,backInOut:_N,backOut:wN,anticipate:xN},e$=t=>typeof t=="string",aI=t=>{if(SN(t)){Nx(t.length===4);const[e,n,r,s]=t;return Hh(e,n,r,s)}else if(e$(t))return Zz[t];return t},Pp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function t$(t,e){let n=new Set,r=new Set,s=!1,i=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(p){a.has(p)&&(h.schedule(p),t()),p(c)}const h={schedule:(p,m=!1,v=!1)=>{const S=v&&s?n:r;return m&&a.add(p),S.has(p)||S.add(p),p},cancel:p=>{r.delete(p),a.delete(p)},process:p=>{if(c=p,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(u),n.clear(),s=!1,i&&(i=!1,h.process(p))}};return h}const n$=40;function IN(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=Pp.reduce((R,L)=>(R[L]=t$(i),R),{}),{setup:c,read:u,resolveKeyframes:h,preUpdate:p,update:m,preRender:v,render:E,postRender:S}=a,T=()=>{const R=zi.useManualTiming?s.timestamp:performance.now();n=!1,zi.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(R-s.timestamp,n$),1)),s.timestamp=R,s.isProcessing=!0,c.process(s),u.process(s),h.process(s),p.process(s),m.process(s),v.process(s),E.process(s),S.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(T))},I=()=>{n=!0,r=!0,s.isProcessing||t(T)};return{schedule:Pp.reduce((R,L)=>{const z=a[L];return R[L]=(K,D=!1,P=!1)=>(n||I(),z.schedule(K,D,P)),R},{}),cancel:R=>{for(let L=0;L<Pp.length;L++)a[Pp[L]].cancel(R)},state:s,steps:a}}const{schedule:At,cancel:Xo,state:kn,steps:t0}=IN(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zr,!0);let im;function r$(){im=void 0}const mr={now:()=>(im===void 0&&mr.set(kn.isProcessing||zi.useManualTiming?kn.timestamp:performance.now()),im),set:t=>{im=t,queueMicrotask(r$)}},kN=t=>e=>typeof e=="string"&&e.startsWith(t),Lx=kN("--"),s$=kN("var(--"),jx=t=>s$(t)?i$.test(t.split("/*")[0].trim()):!1,i$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Eu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mh={...Eu,transform:t=>Bi(0,1,t)},Ap={...Eu,default:1},Hd=t=>Math.round(t*1e5)/1e5,Fx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function o$(t){return t==null}const a$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ux=(t,e)=>n=>!!(typeof n=="string"&&a$.test(n)&&n.startsWith(t)||e&&!o$(n)&&Object.prototype.hasOwnProperty.call(n,e)),CN=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,c]=r.match(Fx);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},l$=t=>Bi(0,255,t),n0={...Eu,transform:t=>Math.round(l$(t))},Qa={test:Ux("rgb","red"),parse:CN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+n0.transform(t)+", "+n0.transform(e)+", "+n0.transform(n)+", "+Hd(mh.transform(r))+")"};function c$(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const yw={test:Ux("#"),parse:c$,transform:Qa.transform},qh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ro=qh("deg"),ti=qh("%"),Fe=qh("px"),u$=qh("vh"),d$=qh("vw"),lI={...ti,parse:t=>ti.parse(t)/100,transform:t=>ti.transform(t*100)},Ac={test:Ux("hsl","hue"),parse:CN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ti.transform(Hd(e))+", "+ti.transform(Hd(n))+", "+Hd(mh.transform(r))+")"},tn={test:t=>Qa.test(t)||yw.test(t)||Ac.test(t),parse:t=>Qa.test(t)?Qa.parse(t):Ac.test(t)?Ac.parse(t):yw.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qa.transform(t):Ac.transform(t),getAnimatableNone:t=>{const e=tn.parse(t);return e.alpha=0,tn.transform(e)}},h$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function f$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Fx))==null?void 0:e.length)||0)+(((n=t.match(h$))==null?void 0:n.length)||0)>0}const PN="number",AN="color",p$="var",m$="var(",cI="${}",g$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gh(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const c=e.replace(g$,u=>(tn.test(u)?(r.color.push(i),s.push(AN),n.push(tn.parse(u))):u.startsWith(m$)?(r.var.push(i),s.push(p$),n.push(u)):(r.number.push(i),s.push(PN),n.push(parseFloat(u))),++i,cI)).split(cI);return{values:n,split:c,indexes:r,types:s}}function RN(t){return gh(t).values}function NN(t){const{split:e,types:n}=gh(t),r=e.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=e[a],s[a]!==void 0){const c=n[a];c===PN?i+=Hd(s[a]):c===AN?i+=tn.transform(s[a]):i+=s[a]}return i}}const y$=t=>typeof t=="number"?0:tn.test(t)?tn.getAnimatableNone(t):t;function v$(t){const e=RN(t);return NN(t)(e.map(y$))}const Jo={test:f$,parse:RN,createTransformer:NN,getAnimatableNone:v$};function r0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function w$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,a=0;if(!e)s=i=a=n;else{const c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;s=r0(u,c,t+1/3),i=r0(u,c,t),a=r0(u,c,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function $m(t,e){return n=>n>0?e:t}const jt=(t,e,n)=>t+(e-t)*n,s0=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},_$=[yw,Qa,Ac],x$=t=>_$.find(e=>e.test(t));function uI(t){const e=x$(t);if(!e)return!1;let n=e.parse(t);return e===Ac&&(n=w$(n)),n}const dI=(t,e)=>{const n=uI(t),r=uI(e);if(!n||!r)return $m(t,e);const s={...n};return i=>(s.red=s0(n.red,r.red,i),s.green=s0(n.green,r.green,i),s.blue=s0(n.blue,r.blue,i),s.alpha=jt(n.alpha,r.alpha,i),Qa.transform(s))},vw=new Set(["none","hidden"]);function b$(t,e){return vw.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function E$(t,e){return n=>jt(t,e,n)}function Bx(t){return typeof t=="number"?E$:typeof t=="string"?jx(t)?$m:tn.test(t)?dI:I$:Array.isArray(t)?DN:typeof t=="object"?tn.test(t)?dI:T$:$m}function DN(t,e){const n=[...t],r=n.length,s=t.map((i,a)=>Bx(i)(i,e[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function T$(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Bx(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function S$(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],a=t.indexes[i][r[i]],c=t.values[a]??0;n[s]=c,r[i]++}return n}const I$=(t,e)=>{const n=Jo.createTransformer(e),r=gh(t),s=gh(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?vw.has(t)&&!s.values.length||vw.has(e)&&!r.values.length?b$(t,e):Wh(DN(S$(r,s),s.values),n):$m(t,e)};function MN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?jt(t,e,n):Bx(t)(t,e)}const k$=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>At.update(e,n),stop:()=>Xo(e),now:()=>kn.isProcessing?kn.timestamp:mr.now()}},ON=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Wm=2e4;function zx(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Wm;)e+=n,r=t.next(e);return e>=Wm?1/0:e}function C$(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(zx(r),Wm);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:ei(s)}}const P$=5;function VN(t,e,n){const r=Math.max(e-P$,0);return mN(n-t(r),e-r)}const zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},i0=.001;function A$({duration:t=zt.duration,bounce:e=zt.bounce,velocity:n=zt.velocity,mass:r=zt.mass}){let s,i,a=1-e;a=Bi(zt.minDamping,zt.maxDamping,a),t=Bi(zt.minDuration,zt.maxDuration,ei(t)),a<1?(s=h=>{const p=h*a,m=p*t,v=p-n,E=ww(h,a),S=Math.exp(-m);return i0-v/E*S},i=h=>{const m=h*a*t,v=m*n+n,E=Math.pow(a,2)*Math.pow(h,2)*t,S=Math.exp(-m),T=ww(Math.pow(h,2),a);return(-s(h)+i0>0?-1:1)*((v-E)*S)/T}):(s=h=>{const p=Math.exp(-h*t),m=(h-n)*t+1;return-i0+p*m},i=h=>{const p=Math.exp(-h*t),m=(n-h)*(t*t);return p*m});const c=5/t,u=N$(s,i,c);if(t=Zs(t),isNaN(u))return{stiffness:zt.stiffness,damping:zt.damping,duration:t};{const h=Math.pow(u,2)*r;return{stiffness:h,damping:a*2*Math.sqrt(r*h),duration:t}}}const R$=12;function N$(t,e,n){let r=n;for(let s=1;s<R$;s++)r=r-t(r)/e(r);return r}function ww(t,e){return t*Math.sqrt(1-e*e)}const D$=["duration","bounce"],M$=["stiffness","damping","mass"];function hI(t,e){return e.some(n=>t[n]!==void 0)}function O$(t){let e={velocity:zt.velocity,stiffness:zt.stiffness,damping:zt.damping,mass:zt.mass,isResolvedFromDuration:!1,...t};if(!hI(t,M$)&&hI(t,D$))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Bi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:zt.mass,stiffness:s,damping:i}}else{const n=A$(t);e={...e,...n,mass:zt.mass},e.isResolvedFromDuration=!0}return e}function Hm(t=zt.visualDuration,e=zt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:i},{stiffness:u,damping:h,mass:p,duration:m,velocity:v,isResolvedFromDuration:E}=O$({...n,velocity:-ei(n.velocity||0)}),S=v||0,T=h/(2*Math.sqrt(u*p)),I=a-i,C=ei(Math.sqrt(u/p)),N=Math.abs(I)<5;r||(r=N?zt.restSpeed.granular:zt.restSpeed.default),s||(s=N?zt.restDelta.granular:zt.restDelta.default);let R;if(T<1){const z=ww(C,T);R=K=>{const D=Math.exp(-T*C*K);return a-D*((S+T*C*I)/z*Math.sin(z*K)+I*Math.cos(z*K))}}else if(T===1)R=z=>a-Math.exp(-C*z)*(I+(S+C*I)*z);else{const z=C*Math.sqrt(T*T-1);R=K=>{const D=Math.exp(-T*C*K),P=Math.min(z*K,300);return a-D*((S+T*C*I)*Math.sinh(P)+z*I*Math.cosh(P))/z}}const L={calculatedDuration:E&&m||null,next:z=>{const K=R(z);if(E)c.done=z>=m;else{let D=z===0?S:0;T<1&&(D=z===0?Zs(S):VN(R,z,K));const P=Math.abs(D)<=r,V=Math.abs(a-K)<=s;c.done=P&&V}return c.value=c.done?a:K,c},toString:()=>{const z=Math.min(zx(L),Wm),K=ON(D=>L.next(z*D).value,z,30);return z+"ms "+K},toTransition:()=>{}};return L}Hm.applyToOptions=t=>{const e=C$(t,100,Hm);return t.ease=e.ease,t.duration=Zs(e.duration),t.type="keyframes",t};function _w({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:c,max:u,restDelta:h=.5,restSpeed:p}){const m=t[0],v={done:!1,value:m},E=P=>c!==void 0&&P<c||u!==void 0&&P>u,S=P=>c===void 0?u:u===void 0||Math.abs(c-P)<Math.abs(u-P)?c:u;let T=n*e;const I=m+T,C=a===void 0?I:a(I);C!==I&&(T=C-m);const N=P=>-T*Math.exp(-P/r),R=P=>C+N(P),L=P=>{const V=N(P),F=R(P);v.done=Math.abs(V)<=h,v.value=v.done?C:F};let z,K;const D=P=>{E(v.value)&&(z=P,K=Hm({keyframes:[v.value,S(v.value)],velocity:VN(R,P,v.value),damping:s,stiffness:i,restDelta:h,restSpeed:p}))};return D(0),{calculatedDuration:null,next:P=>{let V=!1;return!K&&z===void 0&&(V=!0,L(P),D(P)),z!==void 0&&P>=z?K.next(P-z):(!V&&L(P),v)}}}function V$(t,e,n){const r=[],s=n||zi.mix||MN,i=t.length-1;for(let a=0;a<i;a++){let c=s(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||Zr:e;c=Wh(u,c)}r.push(c)}return r}function L$(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Nx(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=V$(e,r,s),u=c.length,h=p=>{if(a&&p<t[0])return e[0];let m=0;if(u>1)for(;m<t.length-2&&!(p<t[m+1]);m++);const v=ph(t[m],t[m+1],p);return c[m](v)};return n?p=>h(Bi(t[0],t[i-1],p)):h}function j$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ph(0,e,r);t.push(jt(n,1,s))}}function F$(t){const e=[0];return j$(e,t.length-1),e}function U$(t,e){return t.map(n=>n*e)}function B$(t,e){return t.map(()=>e||TN).splice(0,t.length-1)}function qd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Jz(r)?r.map(aI):aI(r),i={done:!1,value:e[0]},a=U$(n&&n.length===e.length?n:F$(e),t),c=L$(a,e,{ease:Array.isArray(s)?s:B$(e,s)});return{calculatedDuration:t,next:u=>(i.value=c(u),i.done=u>=t,i)}}const z$=t=>t!==null;function $x(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(z$),c=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!c||r===void 0?i[c]:r}const $$={decay:_w,inertia:_w,tween:qd,keyframes:qd,spring:Hm};function LN(t){typeof t.type=="string"&&(t.type=$$[t.type])}class Wx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const W$=t=>t/100;class Hx extends Wx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==mr.now()&&this.tick(mr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;LN(e);const{type:n=qd,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=e;let{keyframes:c}=e;const u=n||qd;u!==qd&&typeof c[0]!="number"&&(this.mixKeyframes=Wh(W$,MN(c[0],c[1])),c=[0,100]);const h=u({...e,keyframes:c});i==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...c].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=zx(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:v,repeatDelay:E,type:S,onUpdate:T,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-h*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>s;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let R=this.currentTime,L=r;if(m){const P=Math.min(this.currentTime,s)/c;let V=Math.floor(P),F=P%1;!F&&P>=1&&(F=1),F===1&&V--,V=Math.min(V,m+1),!!(V%2)&&(v==="reverse"?(F=1-F,E&&(F-=E/c)):v==="mirror"&&(L=a)),R=Bi(0,1,F)*c}const z=N?{done:!1,value:p[0]}:L.next(R);i&&(z.value=i(z.value));let{done:K}=z;!N&&u!==null&&(K=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return D&&S!==_w&&(z.value=$x(p,this.options,I,this.speed)),T&&T(z.value),D&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return ei(this.calculatedDuration)}get time(){return ei(this.currentTime)}set time(e){var n;e=Zs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(mr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ei(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=k$,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function H$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Xa=t=>t*180/Math.PI,xw=t=>{const e=Xa(Math.atan2(t[1],t[0]));return bw(e)},q$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:xw,rotateZ:xw,skewX:t=>Xa(Math.atan(t[1])),skewY:t=>Xa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bw=t=>(t=t%360,t<0&&(t+=360),t),fI=xw,pI=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),mI=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),K$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:pI,scaleY:mI,scale:t=>(pI(t)+mI(t))/2,rotateX:t=>bw(Xa(Math.atan2(t[6],t[5]))),rotateY:t=>bw(Xa(Math.atan2(-t[2],t[0]))),rotateZ:fI,rotate:fI,skewX:t=>Xa(Math.atan(t[4])),skewY:t=>Xa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Ew(t){return t.includes("scale")?1:0}function Tw(t,e){if(!t||t==="none")return Ew(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=K$,s=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=q$,s=c}if(!s)return Ew(e);const i=r[e],a=s[1].split(",").map(Y$);return typeof i=="function"?i(a):a[i]}const G$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Tw(n,e)};function Y$(t){return parseFloat(t.trim())}const Tu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Su=new Set(Tu),gI=t=>t===Eu||t===Fe,Q$=new Set(["x","y","z"]),X$=Tu.filter(t=>!Q$.has(t));function J$(t){const e=[];return X$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const sl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Tw(e,"x"),y:(t,{transform:e})=>Tw(e,"y")};sl.translateX=sl.x;sl.translateY=sl.y;const il=new Set;let Sw=!1,Iw=!1,kw=!1;function jN(){if(Iw){const t=Array.from(il).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=J$(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var c;(c=r.getValue(i))==null||c.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Iw=!1,Sw=!1,il.forEach(t=>t.complete(kw)),il.clear()}function FN(){il.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Iw=!0)})}function Z$(){kw=!0,FN(),jN(),kw=!1}class qx{constructor(e,n,r,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(il.add(this),Sw||(Sw=!0,At.read(FN),At.resolveKeyframes(jN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),a=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const c=r.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),s&&i===void 0&&s.set(e[0])}H$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),il.delete(this)}cancel(){this.state==="scheduled"&&(il.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const e7=t=>t.startsWith("--");function t7(t,e,n){e7(e)?t.style.setProperty(e,n):t.style[e]=n}const n7=Dx(()=>window.ScrollTimeline!==void 0),r7={};function s7(t,e){const n=Dx(t);return()=>r7[e]??n()}const UN=s7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Rd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,yI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rd([0,.65,.55,1]),circOut:Rd([.55,0,1,.45]),backIn:Rd([.31,.01,.66,-.59]),backOut:Rd([.33,1.53,.69,.99])};function BN(t,e){if(t)return typeof t=="function"?UN()?ON(t,e):"ease-out":SN(t)?Rd(t):Array.isArray(t)?t.map(n=>BN(n,e)||yI.easeOut):yI[t]}function i7(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:c="easeOut",times:u}={},h=void 0){const p={[e]:n};u&&(p.offset=u);const m=BN(c,s);Array.isArray(m)&&(p.easing=m);const v={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),t.animate(p,v)}function zN(t){return typeof t=="function"&&"applyToOptions"in t}function o7({type:t,...e}){return zN(t)&&UN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class a7 extends Wx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:c,onComplete:u}=e;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=e,Nx(typeof e.type!="string");const h=o7(e);this.animation=i7(n,r,s,h,i),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=$x(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):t7(n,r,p),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ei(Number(e))}get time(){return ei(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Zs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&n7()?(this.animation.timeline=e,Zr):n(this)}}const $N={anticipate:xN,backInOut:_N,circInOut:EN};function l7(t){return t in $N}function c7(t){typeof t.ease=="string"&&l7(t.ease)&&(t.ease=$N[t.ease])}const vI=10;class u7 extends a7{constructor(e){c7(e),LN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new Hx({...a,autoplay:!1}),u=Zs(this.finishedTime??this.time);n.setWithVelocity(c.sample(u-vI).value,c.sample(u).value,vI),c.stop()}}const wI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Jo.test(t)||t==="0")&&!t.startsWith("url("));function d7(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function h7(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],a=wI(s,e),c=wI(i,e);return!a||!c?!1:d7(t)||(n==="spring"||zN(n))&&r}function Cw(t){t.duration=0,t.type}const f7=new Set(["opacity","clipPath","filter","transform"]),p7=Dx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function m7(t){var p;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:a}=t;if(!(((p=e==null?void 0:e.owner)==null?void 0:p.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:h}=e.owner.getProps();return p7()&&n&&f7.has(n)&&(n!=="transform"||!h)&&!u&&!r&&s!=="mirror"&&i!==0&&a!=="inertia"}const g7=40;class y7 extends Wx{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:c,name:u,motionValue:h,element:p,...m}){var S;super(),this.stop=()=>{var T,I;this._animation&&(this._animation.stop(),(T=this.stopTimeline)==null||T.call(this)),(I=this.keyframeResolver)==null||I.cancel()},this.createdAt=mr.now();const v={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,name:u,motionValue:h,element:p,...m},E=(p==null?void 0:p.KeyframeResolver)||qx;this.keyframeResolver=new E(c,(T,I,C)=>this.onKeyframesResolved(T,I,v,!C),u,h,p),(S=this.keyframeResolver)==null||S.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:c,delay:u,isHandoff:h,onUpdate:p}=r;this.resolvedAt=mr.now(),h7(e,i,a,c)||((zi.instantAnimations||!u)&&(p==null||p($x(e,r,n))),e[0]=e[e.length-1],Cw(r),r.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>g7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},E=!h&&m7(v)?new u7({...v,element:v.motionValue.owner.current}):new Hx(v);E.finished.then(()=>this.notifyFinished()).catch(Zr),this.pendingTimeline&&(this.stopTimeline=E.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=E}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Z$()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const v7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function w7(t){const e=v7.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function WN(t,e,n=1){const[r,s]=w7(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return hN(a)?parseFloat(a):a}return jx(s)?WN(s,e,n+1):s}function Kx(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const HN=new Set(["width","height","top","left","right","bottom",...Tu]),_7={test:t=>t==="auto",parse:t=>t},qN=t=>e=>e.test(t),KN=[Eu,Fe,ti,Ro,d$,u$,_7],_I=t=>KN.find(qN(t));function x7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||pN(t):!0}const b7=new Set(["brightness","contrast","saturate","opacity"]);function E7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Fx)||[];if(!r)return t;const s=n.replace(r,"");let i=b7.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const T7=/\b([a-z-]*)\(.*?\)/gu,Pw={...Jo,getAnimatableNone:t=>{const e=t.match(T7);return e?e.map(E7).join(" "):t}},xI={...Eu,transform:Math.round},S7={rotate:Ro,rotateX:Ro,rotateY:Ro,rotateZ:Ro,scale:Ap,scaleX:Ap,scaleY:Ap,scaleZ:Ap,skew:Ro,skewX:Ro,skewY:Ro,distance:Fe,translateX:Fe,translateY:Fe,translateZ:Fe,x:Fe,y:Fe,z:Fe,perspective:Fe,transformPerspective:Fe,opacity:mh,originX:lI,originY:lI,originZ:Fe},Gx={borderWidth:Fe,borderTopWidth:Fe,borderRightWidth:Fe,borderBottomWidth:Fe,borderLeftWidth:Fe,borderRadius:Fe,radius:Fe,borderTopLeftRadius:Fe,borderTopRightRadius:Fe,borderBottomRightRadius:Fe,borderBottomLeftRadius:Fe,width:Fe,maxWidth:Fe,height:Fe,maxHeight:Fe,top:Fe,right:Fe,bottom:Fe,left:Fe,padding:Fe,paddingTop:Fe,paddingRight:Fe,paddingBottom:Fe,paddingLeft:Fe,margin:Fe,marginTop:Fe,marginRight:Fe,marginBottom:Fe,marginLeft:Fe,backgroundPositionX:Fe,backgroundPositionY:Fe,...S7,zIndex:xI,fillOpacity:mh,strokeOpacity:mh,numOctaves:xI},I7={...Gx,color:tn,backgroundColor:tn,outlineColor:tn,fill:tn,stroke:tn,borderColor:tn,borderTopColor:tn,borderRightColor:tn,borderBottomColor:tn,borderLeftColor:tn,filter:Pw,WebkitFilter:Pw},GN=t=>I7[t];function YN(t,e){let n=GN(t);return n!==Pw&&(n=Jo),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const k7=new Set(["auto","none","0"]);function C7(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!k7.has(i)&&gh(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=YN(n,s)}class P7 extends qx{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let h=e[u];if(typeof h=="string"&&(h=h.trim(),jx(h))){const p=WN(h,n.current);p!==void 0&&(e[u]=p),u===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!HN.has(r)||e.length!==2)return;const[s,i]=e,a=_I(s),c=_I(i);if(a!==c)if(gI(a)&&gI(c))for(let u=0;u<e.length;u++){const h=e[u];typeof h=="string"&&(e[u]=parseFloat(h))}else sl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||x7(e[s]))&&r.push(s);r.length&&C7(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,a=r[i];r[i]=sl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([u,h])=>{e.getValue(u).set(h)}),this.resolveNoneKeyframes()}}function A7(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const QN=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function XN(t){return fN(t)&&"offsetHeight"in t}const bI=30,R7=t=>!isNaN(parseFloat(t));class N7{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var i;const s=mr.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=mr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=R7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Mx);const r=this.events[e].add(n);return e==="change"?()=>{r(),At.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=mr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>bI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,bI);return mN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lu(t,e){return new N7(t,e)}const{schedule:Yx}=IN(queueMicrotask,!1),ys={x:!1,y:!1};function JN(){return ys.x||ys.y}function D7(t){return t==="x"||t==="y"?ys[t]?null:(ys[t]=!0,()=>{ys[t]=!1}):ys.x||ys.y?null:(ys.x=ys.y=!0,()=>{ys.x=ys.y=!1})}function ZN(t,e){const n=A7(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function EI(t){return!(t.pointerType==="touch"||JN())}function M7(t,e,n={}){const[r,s,i]=ZN(t,n),a=c=>{if(!EI(c))return;const{target:u}=c,h=e(u,c);if(typeof h!="function"||!u)return;const p=m=>{EI(m)&&(h(m),u.removeEventListener("pointerleave",p))};u.addEventListener("pointerleave",p,s)};return r.forEach(c=>{c.addEventListener("pointerenter",a,s)}),i}const e2=(t,e)=>e?t===e?!0:e2(t,e.parentElement):!1,Qx=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,O7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function V7(t){return O7.has(t.tagName)||t.tabIndex!==-1}const om=new WeakSet;function TI(t){return e=>{e.key==="Enter"&&t(e)}}function o0(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const L7=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=TI(()=>{if(om.has(n))return;o0(n,"down");const s=TI(()=>{o0(n,"up")}),i=()=>o0(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function SI(t){return Qx(t)&&!JN()}function j7(t,e,n={}){const[r,s,i]=ZN(t,n),a=c=>{const u=c.currentTarget;if(!SI(c))return;om.add(u);const h=e(u,c),p=(E,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),om.has(u)&&om.delete(u),SI(E)&&typeof h=="function"&&h(E,{success:S})},m=E=>{p(E,u===window||u===document||n.useGlobalTarget||e2(u,E.target))},v=E=>{p(E,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",v,s)};return r.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,s),XN(c)&&(c.addEventListener("focus",h=>L7(h,s)),!V7(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function t2(t){return fN(t)&&"ownerSVGElement"in t}function F7(t){return t2(t)&&t.tagName==="svg"}const jn=t=>!!(t&&t.getVelocity),U7=[...KN,tn,Jo],B7=t=>U7.find(qN(t)),Xx=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class z7 extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=XN(r)&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function $7({children:t,isPresent:e,anchorX:n,root:r}){const s=x.useId(),i=x.useRef(null),a=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=x.useContext(Xx);return x.useInsertionEffect(()=>{const{width:u,height:h,top:p,left:m,right:v}=a.current;if(e||!i.current||!u||!h)return;const E=n==="left"?`left: ${m}`:`right: ${v}`;i.current.dataset.motionPopId=s;const S=document.createElement("style");c&&(S.nonce=c);const T=r??document.head;return T.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{T.contains(S)&&T.removeChild(S)}},[e]),y.jsx(z7,{isPresent:e,childRef:i,sizeRef:a,children:x.cloneElement(t,{ref:i})})}const W7=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a,anchorX:c,root:u})=>{const h=Cx(H7),p=x.useId();let m=!0,v=x.useMemo(()=>(m=!1,{id:p,initial:e,isPresent:n,custom:s,onExitComplete:E=>{h.set(E,!0);for(const S of h.values())if(!S)return;r&&r()},register:E=>(h.set(E,!1),()=>h.delete(E))}),[n,h,r]);return i&&m&&(v={...v}),x.useMemo(()=>{h.forEach((E,S)=>h.set(S,!1))},[n]),x.useEffect(()=>{!n&&!h.size&&r&&r()},[n]),a==="popLayout"&&(t=y.jsx($7,{isPresent:n,anchorX:c,root:u,children:t})),y.jsx(jg.Provider,{value:v,children:t})};function H7(){return new Map}function n2(t=!0){const e=x.useContext(jg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=x.useId();x.useEffect(()=>{if(t)return s(i)},[t]);const a=x.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,a]:[!0]}const Rp=t=>t.key||"";function II(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const Kh=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:c="left",root:u})=>{const[h,p]=n2(a),m=x.useMemo(()=>II(t),[t]),v=a&&!h?[]:m.map(Rp),E=x.useRef(!0),S=x.useRef(m),T=Cx(()=>new Map),[I,C]=x.useState(m),[N,R]=x.useState(m);dN(()=>{E.current=!1,S.current=m;for(let K=0;K<N.length;K++){const D=Rp(N[K]);v.includes(D)?T.delete(D):T.get(D)!==!0&&T.set(D,!1)}},[N,v.length,v.join("-")]);const L=[];if(m!==I){let K=[...m];for(let D=0;D<N.length;D++){const P=N[D],V=Rp(P);v.includes(V)||(K.splice(D,0,P),L.push(P))}return i==="wait"&&L.length&&(K=L),R(II(K)),C(m),null}const{forceRender:z}=x.useContext(kx);return y.jsx(y.Fragment,{children:N.map(K=>{const D=Rp(K),P=a&&!h?!1:m===N||v.includes(D),V=()=>{if(T.has(D))T.set(D,!0);else return;let F=!0;T.forEach(U=>{U||(F=!1)}),F&&(z==null||z(),R(S.current),a&&(p==null||p()),r&&r())};return y.jsx(W7,{isPresent:P,initial:!E.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:u,onExitComplete:P?void 0:V,anchorX:c,children:K},D)})})},r2=x.createContext({strict:!1}),kI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cu={};for(const t in kI)cu[t]={isEnabled:e=>kI[t].some(n=>!!e[n])};function q7(t){for(const e in t)cu[e]={...cu[e],...t[e]}}const K7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||K7.has(t)}let s2=t=>!qm(t);function G7(t){typeof t=="function"&&(s2=e=>e.startsWith("on")?!qm(e):t(e))}try{G7(require("@emotion/is-prop-valid").default)}catch{}function Y7(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(s2(s)||n===!0&&qm(s)||!e&&!qm(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Fg=x.createContext({});function Ug(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function yh(t){return typeof t=="string"||Array.isArray(t)}const Jx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zx=["initial",...Jx];function Bg(t){return Ug(t.animate)||Zx.some(e=>yh(t[e]))}function i2(t){return!!(Bg(t)||t.variants)}function Q7(t,e){if(Bg(t)){const{initial:n,animate:r}=t;return{initial:n===!1||yh(n)?n:void 0,animate:yh(r)?r:void 0}}return t.inherit!==!1?e:{}}function X7(t){const{initial:e,animate:n}=Q7(t,x.useContext(Fg));return x.useMemo(()=>({initial:e,animate:n}),[CI(e),CI(n)])}function CI(t){return Array.isArray(t)?t.join(" "):t}const vh={};function J7(t){for(const e in t)vh[e]=t[e],Lx(e)&&(vh[e].isCSSVariable=!0)}function o2(t,{layout:e,layoutId:n}){return Su.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vh[t]||t==="opacity")}const Z7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eW=Tu.length;function tW(t,e,n){let r="",s=!0;for(let i=0;i<eW;i++){const a=Tu[i],c=t[a];if(c===void 0)continue;let u=!0;if(typeof c=="number"?u=c===(a.startsWith("scale")?1:0):u=parseFloat(c)===0,!u||n){const h=QN(c,Gx[a]);if(!u){s=!1;const p=Z7[a]||a;r+=`${p}(${h}) `}n&&(e[a]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function eb(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let a=!1,c=!1;for(const u in e){const h=e[u];if(Su.has(u)){a=!0;continue}else if(Lx(u)){s[u]=h;continue}else{const p=QN(h,Gx[u]);u.startsWith("origin")?(c=!0,i[u]=p):r[u]=p}}if(e.transform||(a||n?r.transform=tW(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:u="50%",originY:h="50%",originZ:p=0}=i;r.transformOrigin=`${u} ${h} ${p}`}}const tb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function a2(t,e,n){for(const r in e)!jn(e[r])&&!o2(r,n)&&(t[r]=e[r])}function nW({transformTemplate:t},e){return x.useMemo(()=>{const n=tb();return eb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rW(t,e){const n=t.style||{},r={};return a2(r,n,t),Object.assign(r,nW(t,e)),r}function sW(t,e){const n={},r=rW(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const iW={offset:"stroke-dashoffset",array:"stroke-dasharray"},oW={offset:"strokeDashoffset",array:"strokeDasharray"};function aW(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?iW:oW;t[i.offset]=Fe.transform(-r);const a=Fe.transform(e),c=Fe.transform(n);t[i.array]=`${a} ${c}`}function l2(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...c},u,h,p){if(eb(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:v}=t;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=(p==null?void 0:p.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&aW(m,s,i,a,!1)}const c2=()=>({...tb(),attrs:{}}),u2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function lW(t,e,n,r){const s=x.useMemo(()=>{const i=c2();return l2(i,e,u2(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};a2(i,t.style,t),s.style={...i,...s.style}}return s}const cW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nb(t){return typeof t!="string"||t.includes("-")?!1:!!(cW.indexOf(t)>-1||/[A-Z]/u.test(t))}function uW(t,e,n,{latestValues:r},s,i=!1){const c=(nb(t)?lW:sW)(e,r,s,t),u=Y7(e,typeof t=="string",i),h=t!==x.Fragment?{...u,...c,ref:n}:{},{children:p}=e,m=x.useMemo(()=>jn(p)?p.get():p,[p]);return x.createElement(t,{...h,children:m})}function PI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function rb(t,e,n,r){if(typeof e=="function"){const[s,i]=PI(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=PI(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function am(t){return jn(t)?t.get():t}function dW({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:hW(n,r,s,t),renderState:e()}}function hW(t,e,n,r){const s={},i=r(t,{});for(const v in i)s[v]=am(i[v]);let{initial:a,animate:c}=t;const u=Bg(t),h=i2(t);e&&h&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||a===!1;const m=p?c:a;if(m&&typeof m!="boolean"&&!Ug(m)){const v=Array.isArray(m)?m:[m];for(let E=0;E<v.length;E++){const S=rb(t,v[E]);if(S){const{transitionEnd:T,transition:I,...C}=S;for(const N in C){let R=C[N];if(Array.isArray(R)){const L=p?R.length-1:0;R=R[L]}R!==null&&(s[N]=R)}for(const N in T)s[N]=T[N]}}}return s}const d2=t=>(e,n)=>{const r=x.useContext(Fg),s=x.useContext(jg),i=()=>dW(t,e,r,s);return n?i():Cx(i)};function sb(t,e,n){var i;const{style:r}=t,s={};for(const a in r)(jn(r[a])||e.style&&jn(e.style[a])||o2(a,t)||((i=n==null?void 0:n.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=r[a]);return s}const fW=d2({scrapeMotionValuesFromProps:sb,createRenderState:tb});function h2(t,e,n){const r=sb(t,e,n);for(const s in t)if(jn(t[s])||jn(e[s])){const i=Tu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const pW=d2({scrapeMotionValuesFromProps:h2,createRenderState:c2}),mW=Symbol.for("motionComponentSymbol");function Rc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function gW(t,e,n){return x.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Rc(n)&&(n.current=r))},[e])}const ib=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yW="framerAppearId",f2="data-"+ib(yW),p2=x.createContext({});function vW(t,e,n,r,s){var T,I;const{visualElement:i}=x.useContext(Fg),a=x.useContext(r2),c=x.useContext(jg),u=x.useContext(Xx).reducedMotion,h=x.useRef(null);r=r||a.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:i,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=h.current,m=x.useContext(p2);p&&!p.projection&&s&&(p.type==="html"||p.type==="svg")&&wW(h.current,n,s,m);const v=x.useRef(!1);x.useInsertionEffect(()=>{p&&v.current&&p.update(n,c)});const E=n[f2],S=x.useRef(!!E&&!((T=window.MotionHandoffIsComplete)!=null&&T.call(window,E))&&((I=window.MotionHasOptimisedAnimation)==null?void 0:I.call(window,E)));return dN(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),S.current&&p.animationState&&p.animationState.animateChanges())}),x.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,E)}),S.current=!1),p.enteringChildren=void 0)}),p}function wW(t,e,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:c,layoutScroll:u,layoutRoot:h,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:m2(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||c&&Rc(c),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:u,layoutRoot:h})}function m2(t){if(t)return t.options.allowProjection!==!1?t.projection:m2(t.parent)}function a0(t,{forwardMotionProps:e=!1}={},n,r){n&&q7(n);const s=nb(t)?pW:fW;function i(c,u){let h;const p={...x.useContext(Xx),...c,layoutId:_W(c)},{isStatic:m}=p,v=X7(c),E=s(c,m);if(!m&&Px){xW();const S=bW(p);h=S.MeasureLayout,v.visualElement=vW(t,E,p,r,S.ProjectionNode)}return y.jsxs(Fg.Provider,{value:v,children:[h&&v.visualElement?y.jsx(h,{visualElement:v.visualElement,...p}):null,uW(t,c,gW(E,v.visualElement,u),E,m,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=x.forwardRef(i);return a[mW]=t,a}function _W({layoutId:t}){const e=x.useContext(kx).id;return e&&t!==void 0?e+"-"+t:t}function xW(t,e){x.useContext(r2).strict}function bW(t){const{drag:e,layout:n}=cu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function EW(t,e){if(typeof Proxy>"u")return a0;const n=new Map,r=(i,a)=>a0(i,a,t,e),s=(i,a)=>r(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?r:(n.has(a)||n.set(a,a0(a,void 0,t,e)),n.get(a))})}function g2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function TW({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function SW(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function l0(t){return t===void 0||t===1}function Aw({scale:t,scaleX:e,scaleY:n}){return!l0(t)||!l0(e)||!l0(n)}function $a(t){return Aw(t)||y2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function y2(t){return AI(t.x)||AI(t.y)}function AI(t){return t&&t!=="0%"}function Km(t,e,n){const r=t-n,s=e*r;return n+s}function RI(t,e,n,r,s){return s!==void 0&&(t=Km(t,s,r)),Km(t,n,r)+e}function Rw(t,e=0,n=1,r,s){t.min=RI(t.min,e,n,r,s),t.max=RI(t.max,e,n,r,s)}function v2(t,{x:e,y:n}){Rw(t.x,e.translate,e.scale,e.originPoint),Rw(t.y,n.translate,n.scale,n.originPoint)}const NI=.999999999999,DI=1.0000000000001;function IW(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,a;for(let c=0;c<s;c++){i=n[c],a=i.projectionDelta;const{visualElement:u}=i.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Dc(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,v2(t,a)),r&&$a(i.latestValues)&&Dc(t,i.latestValues))}e.x<DI&&e.x>NI&&(e.x=1),e.y<DI&&e.y>NI&&(e.y=1)}function Nc(t,e){t.min=t.min+e,t.max=t.max+e}function MI(t,e,n,r,s=.5){const i=jt(t.min,t.max,s);Rw(t,e,n,i,r)}function Dc(t,e){MI(t.x,e.x,e.scaleX,e.scale,e.originX),MI(t.y,e.y,e.scaleY,e.scale,e.originY)}function w2(t,e){return g2(SW(t.getBoundingClientRect(),e))}function kW(t,e,n){const r=w2(t,n),{scroll:s}=e;return s&&(Nc(r.x,s.offset.x),Nc(r.y,s.offset.y)),r}const OI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Mc=()=>({x:OI(),y:OI()}),VI=()=>({min:0,max:0}),Yt=()=>({x:VI(),y:VI()}),Nw={current:null},_2={current:!1};function CW(){if(_2.current=!0,!!Px)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Nw.current=t.matches;t.addEventListener("change",e),e()}else Nw.current=!1}const PW=new WeakMap;function AW(t,e,n){for(const r in e){const s=e[r],i=n[r];if(jn(s))t.addValue(r,s);else if(jn(i))t.addValue(r,lu(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,lu(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const LI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class RW{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=qx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=mr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,At.render(this.render,!1,!0))};const{latestValues:u,renderState:h}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!i,this.isControllingVariants=Bg(n),this.isVariantNode=i2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in m){const E=m[v];u[v]!==void 0&&jn(E)&&E.set(u[v])}}mount(e){var n;this.current=e,PW.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),_2.current||CW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Nw.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Xo(this.notifyUpdate),Xo(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Su.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&At.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in cu){const n=cu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<LI.length;r++){const s=LI[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=e[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=AW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=lu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(hN(r)||pN(r))?r=parseFloat(r):!B7(r)&&Jo.test(n)&&(r=YN(e,n)),this.setBaseTarget(e,jn(r)?r.get():r)),jn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=rb(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!jn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Mx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Yx.render(this.render)}}class x2 extends RW{constructor(){super(...arguments),this.KeyframeResolver=P7}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function b2(t,{style:e,vars:n},r,s){const i=t.style;let a;for(a in e)i[a]=e[a];s==null||s.applyProjectionStyles(i,r);for(a in n)i.setProperty(a,n[a])}function NW(t){return window.getComputedStyle(t)}class DW extends x2{constructor(){super(...arguments),this.type="html",this.renderInstance=b2}readValueFromInstance(e,n){var r;if(Su.has(n))return(r=this.projection)!=null&&r.isProjecting?Ew(n):G$(e,n);{const s=NW(e),i=(Lx(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return w2(e,n)}build(e,n,r){eb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return sb(e,n,r)}}const E2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function MW(t,e,n,r){b2(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(E2.has(s)?s:ib(s),e.attrs[s])}class OW extends x2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Yt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Su.has(n)){const r=GN(n);return r&&r.default||0}return n=E2.has(n)?n:ib(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return h2(e,n,r)}build(e,n,r){l2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){MW(e,n,r,s)}mount(e){this.isSVGTag=u2(e.tagName),super.mount(e)}}const VW=(t,e)=>nb(t)?new OW(e):new DW(e,{allowProjection:t!==x.Fragment});function Fc(t,e,n){const r=t.getProps();return rb(r,e,n!==void 0?n:r.custom,t)}const Dw=t=>Array.isArray(t);function LW(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,lu(n))}function jW(t){return Dw(t)?t[t.length-1]||0:t}function FW(t,e){const n=Fc(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const c=jW(i[a]);LW(t,a,c)}}function UW(t){return!!(jn(t)&&t.add)}function Mw(t,e){const n=t.getValue("willChange");if(UW(n))return n.add(e);if(!n&&zi.WillChange){const r=new zi.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function T2(t){return t.props[f2]}const BW=t=>t!==null;function zW(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(BW),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}const $W={type:"spring",stiffness:500,damping:25,restSpeed:10},WW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),HW={type:"keyframes",duration:.8},qW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},KW=(t,{keyframes:e})=>e.length>2?HW:Su.has(t)?t.startsWith("scale")?WW(e[1]):$W:qW;function GW({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:c,from:u,elapsed:h,...p}){return!!Object.keys(p).length}const ob=(t,e,n,r={},s,i)=>a=>{const c=Kx(r,t)||{},u=c.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Zs(u);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:i?void 0:s};GW(c)||Object.assign(p,KW(t,p)),p.duration&&(p.duration=Zs(p.duration)),p.repeatDelay&&(p.repeatDelay=Zs(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Cw(p),p.delay===0&&(m=!0)),(zi.instantAnimations||zi.skipAnimations)&&(m=!0,Cw(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!i&&e.get()!==void 0){const v=zW(p.keyframes,c);if(v!==void 0){At.update(()=>{p.onUpdate(v),p.onComplete()});return}}return c.isSync?new Hx(p):new y7(p)};function YW({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function S2(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(i=r);const u=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const p in c){const m=t.getValue(p,t.latestValues[p]??null),v=c[p];if(v===void 0||h&&YW(h,p))continue;const E={delay:n,...Kx(i||{},p)},S=m.get();if(S!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===S&&!E.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const C=T2(t);if(C){const N=window.MotionHandoffAnimation(C,p,At);N!==null&&(E.startTime=N,T=!0)}}Mw(t,p),m.start(ob(p,m,v,t.shouldReduceMotion&&HN.has(p)?{type:!1}:E,t,T));const I=m.animation;I&&u.push(I)}return a&&Promise.all(u).then(()=>{At.update(()=>{a&&FW(t,a)})}),u}function I2(t,e,n,r=0,s=1){const i=Array.from(t).sort((h,p)=>h.sortNodePosition(p)).indexOf(e),a=t.size,c=(a-1)*r;return typeof n=="function"?n(i,a):s===1?i*r:c-i*r}function Ow(t,e,n={}){var u;const r=Fc(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(S2(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:v}=s;return QW(t,e,h,p,m,v,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[h,p]=c==="beforeChildren"?[i,a]:[a,i];return h().then(()=>p())}else return Promise.all([i(),a(n.delay)])}function QW(t,e,n=0,r=0,s=0,i=1,a){const c=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),c.push(Ow(u,e,{...a,delay:n+(typeof r=="function"?0:r)+I2(t.variantChildren,u,r,s,i)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(c)}function XW(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Ow(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Ow(t,e,n);else{const s=typeof e=="function"?Fc(t,e,n.custom):e;r=Promise.all(S2(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function k2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const JW=Zx.length;function C2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?C2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<JW;n++){const r=Zx[n],s=t.props[r];(yh(s)||s===!1)&&(e[r]=s)}return e}const ZW=[...Jx].reverse(),eH=Jx.length;function tH(t){return e=>Promise.all(e.map(({animation:n,options:r})=>XW(t,n,r)))}function nH(t){let e=tH(t),n=jI(),r=!0;const s=u=>(h,p)=>{var v;const m=Fc(t,p,u==="exit"?(v=t.presenceContext)==null?void 0:v.custom:void 0);if(m){const{transition:E,transitionEnd:S,...T}=m;h={...h,...T,...S}}return h};function i(u){e=u(t)}function a(u){const{props:h}=t,p=C2(t.parent)||{},m=[],v=new Set;let E={},S=1/0;for(let I=0;I<eH;I++){const C=ZW[I],N=n[C],R=h[C]!==void 0?h[C]:p[C],L=yh(R),z=C===u?N.isActive:null;z===!1&&(S=I);let K=R===p[C]&&R!==h[C]&&L;if(K&&r&&t.manuallyAnimateOnMount&&(K=!1),N.protectedKeys={...E},!N.isActive&&z===null||!R&&!N.prevProp||Ug(R)||typeof R=="boolean")continue;const D=rH(N.prevProp,R);let P=D||C===u&&N.isActive&&!K&&L||I>S&&L,V=!1;const F=Array.isArray(R)?R:[R];let U=F.reduce(s(C),{});z===!1&&(U={});const{prevResolvedValues:j={}}=N,M={...j,...U},Z=se=>{P=!0,v.has(se)&&(V=!0,v.delete(se)),N.needsAnimating[se]=!0;const $=t.getValue(se);$&&($.liveStyle=!1)};for(const se in M){const $=U[se],ie=j[se];if(E.hasOwnProperty(se))continue;let le=!1;Dw($)&&Dw(ie)?le=!k2($,ie):le=$!==ie,le?$!=null?Z(se):v.add(se):$!==void 0&&v.has(se)?Z(se):N.protectedKeys[se]=!0}N.prevProp=R,N.prevResolvedValues=U,N.isActive&&(E={...E,...U}),r&&t.blockInitialAnimation&&(P=!1);const oe=K&&D;P&&(!oe||V)&&m.push(...F.map(se=>{const $={type:C};if(typeof se=="string"&&r&&!oe&&t.manuallyAnimateOnMount&&t.parent){const{parent:ie}=t,le=Fc(ie,se);if(ie.enteringChildren&&le){const{delayChildren:W}=le.transition||{};$.delay=I2(ie.enteringChildren,t,W)}}return{animation:se,options:$}}))}if(v.size){const I={};if(typeof h.initial!="boolean"){const C=Fc(t,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(I.transition=C.transition)}v.forEach(C=>{const N=t.getBaseTarget(C),R=t.getValue(C);R&&(R.liveStyle=!0),I[C]=N??null}),m.push({animation:I})}let T=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(m):Promise.resolve()}function c(u,h){var m;if(n[u].isActive===h)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(v=>{var E;return(E=v.animationState)==null?void 0:E.setActive(u,h)}),n[u].isActive=h;const p=a(u);for(const v in n)n[v].protectedKeys={};return p}return{animateChanges:a,setActive:c,setAnimateFunction:i,getState:()=>n,reset:()=>{n=jI(),r=!0}}}function rH(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!k2(e,t):!1}function ja(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jI(){return{animate:ja(!0),whileInView:ja(),whileHover:ja(),whileTap:ja(),whileDrag:ja(),whileFocus:ja(),exit:ja()}}class aa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class sH extends aa{constructor(e){super(e),e.animationState||(e.animationState=nH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ug(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let iH=0;class oH extends aa{constructor(){super(...arguments),this.id=iH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const aH={animation:{Feature:sH},exit:{Feature:oH}};function wh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Gh(t){return{point:{x:t.pageX,y:t.pageY}}}const lH=t=>e=>Qx(e)&&t(e,Gh(e));function Kd(t,e,n,r){return wh(t,e,lH(n),r)}const P2=1e-4,cH=1-P2,uH=1+P2,A2=.01,dH=0-A2,hH=0+A2;function Qn(t){return t.max-t.min}function fH(t,e,n){return Math.abs(t-e)<=n}function FI(t,e,n,r=.5){t.origin=r,t.originPoint=jt(e.min,e.max,t.origin),t.scale=Qn(n)/Qn(e),t.translate=jt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cH&&t.scale<=uH||isNaN(t.scale))&&(t.scale=1),(t.translate>=dH&&t.translate<=hH||isNaN(t.translate))&&(t.translate=0)}function Gd(t,e,n,r){FI(t.x,e.x,n.x,r?r.originX:void 0),FI(t.y,e.y,n.y,r?r.originY:void 0)}function UI(t,e,n){t.min=n.min+e.min,t.max=t.min+Qn(e)}function pH(t,e,n){UI(t.x,e.x,n.x),UI(t.y,e.y,n.y)}function BI(t,e,n){t.min=e.min-n.min,t.max=t.min+Qn(e)}function Yd(t,e,n){BI(t.x,e.x,n.x),BI(t.y,e.y,n.y)}function Gr(t){return[t("x"),t("y")]}const R2=({current:t})=>t?t.ownerDocument.defaultView:null,zI=(t,e)=>Math.abs(t-e);function mH(t,e){const n=zI(t.x,e.x),r=zI(t.y,e.y);return Math.sqrt(n**2+r**2)}class N2{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=u0(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,S=mH(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!S)return;const{point:T}=v,{timestamp:I}=kn;this.history.push({...T,timestamp:I});const{onStart:C,onMove:N}=this.handlers;E||(C&&C(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,v)},this.handlePointerMove=(v,E)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=c0(E,this.transformPagePoint),At.update(this.updatePoint,!0)},this.handlePointerUp=(v,E)=>{this.end();const{onEnd:S,onSessionEnd:T,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=u0(v.type==="pointercancel"?this.lastMoveEventInfo:c0(E,this.transformPagePoint),this.history);this.startEvent&&S&&S(v,C),T&&T(v,C)},!Qx(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=s||window;const c=Gh(e),u=c0(c,this.transformPagePoint),{point:h}=u,{timestamp:p}=kn;this.history=[{...h,timestamp:p}];const{onSessionStart:m}=n;m&&m(e,u0(u,this.history)),this.removeListeners=Wh(Kd(this.contextWindow,"pointermove",this.handlePointerMove),Kd(this.contextWindow,"pointerup",this.handlePointerUp),Kd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xo(this.updatePoint)}}function c0(t,e){return e?{point:e(t.point)}:t}function $I(t,e){return{x:t.x-e.x,y:t.y-e.y}}function u0({point:t},e){return{point:t,delta:$I(t,D2(e)),offset:$I(t,gH(e)),velocity:yH(e,.1)}}function gH(t){return t[0]}function D2(t){return t[t.length-1]}function yH(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=D2(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Zs(e)));)n--;if(!r)return{x:0,y:0};const i=ei(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function vH(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?jt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?jt(n,t,r.max):Math.min(t,n)),t}function WI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function wH(t,{top:e,left:n,bottom:r,right:s}){return{x:WI(t.x,n,s),y:WI(t.y,e,r)}}function HI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function _H(t,e){return{x:HI(t.x,e.x),y:HI(t.y,e.y)}}function xH(t,e){let n=.5;const r=Qn(t),s=Qn(e);return s>r?n=ph(e.min,e.max-r,t.min):r>s&&(n=ph(t.min,t.max-s,e.min)),Bi(0,1,n)}function bH(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Vw=.35;function EH(t=Vw){return t===!1?t=0:t===!0&&(t=Vw),{x:qI(t,"left","right"),y:qI(t,"top","bottom")}}function qI(t,e,n){return{min:KI(t,e),max:KI(t,n)}}function KI(t,e){return typeof t=="number"?t:t[e]||0}const TH=new WeakMap;class SH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gh(m).point)},a=(m,v)=>{const{drag:E,dragPropagation:S,onDragStart:T}=this.getProps();if(E&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=D7(E),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Gr(C=>{let N=this.getAxisMotionValue(C).get()||0;if(ti.test(N)){const{projection:R}=this.visualElement;if(R&&R.layout){const L=R.layout.layoutBox[C];L&&(N=Qn(L)*(parseFloat(N)/100))}}this.originPoint[C]=N}),T&&At.postRender(()=>T(m,v)),Mw(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},c=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:E,dragDirectionLock:S,onDirectionLock:T,onDrag:I}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:C}=v;if(S&&this.currentDirection===null){this.currentDirection=IH(C),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",v.point,C),this.updateAxis("y",v.point,C),this.visualElement.render(),I&&I(m,v)},u=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Gr(m=>{var v;return this.getAnimationState(m)==="paused"&&((v=this.getAxisMotionValue(m).animation)==null?void 0:v.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new N2(e,{onSessionStart:i,onStart:a,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:R2(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&At.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Np(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=vH(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Rc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=wH(r.layoutBox,e):this.constraints=!1,this.elastic=EH(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Gr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=bH(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Rc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=kW(r,s.root,this.visualElement.getTransformPagePoint());let a=_H(s.layout.layoutBox,i);if(n){const c=n(TW(a));this.hasMutatedConstraints=!!c,c&&(a=g2(c))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),u=this.constraints||{},h=Gr(p=>{if(!Np(p,n,this.currentDirection))return;let m=u&&u[p]||{};a&&(m={min:0,max:0});const v=s?200:1e6,E=s?40:1e7,S={type:"inertia",velocity:r?e[p]:0,bounceStiffness:v,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(p,S)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Mw(this.visualElement,e),r.start(ob(e,r,0,n,this.visualElement,!1))}stopAnimation(){Gr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Gr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Gr(n=>{const{drag:r}=this.getProps();if(!Np(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:c}=s.layout.layoutBox[n];i.set(e[n]-jt(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Rc(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Gr(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const u=c.get();s[a]=xH({min:u,max:u},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Gr(a=>{if(!Np(a,e,null))return;const c=this.getAxisMotionValue(a),{min:u,max:h}=this.constraints[a];c.set(jt(u,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;TH.set(this.visualElement,this);const e=this.visualElement.current,n=Kd(e,"pointerdown",u=>{const{drag:h,dragListener:p=!0}=this.getProps();h&&p&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Rc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),At.read(r);const a=wh(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h})=>{this.isDragging&&h&&(Gr(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=u[p].translate,m.set(m.get()+u[p].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Vw,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:c}}}function Np(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function IH(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kH extends aa{constructor(e){super(e),this.removeGroupControls=Zr,this.removeListeners=Zr,this.controls=new SH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zr}unmount(){this.removeGroupControls(),this.removeListeners()}}const GI=t=>(e,n)=>{t&&At.postRender(()=>t(e,n))};class CH extends aa{constructor(){super(...arguments),this.removePointerDownListener=Zr}onPointerDown(e){this.session=new N2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:R2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:GI(e),onStart:GI(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&At.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=Kd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YI(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Fe.test(t))t=parseFloat(t);else return t;const n=YI(t,e.target.x),r=YI(t,e.target.y);return`${n}% ${r}%`}},PH={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Jo.parse(t);if(s.length>5)return r;const i=Jo.createTransformer(t),a=typeof s[0]!="number"?1:0,c=n.x.scale*e.x,u=n.y.scale*e.y;s[0+a]/=c,s[1+a]/=u;const h=jt(c,u,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),i(s)}};let d0=!1;class AH extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;J7(RH),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),d0&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),lm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:a}=r;return a&&(a.isPresent=i,d0=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||At.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Yx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;d0=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function M2(t){const[e,n]=n2(),r=x.useContext(kx);return y.jsx(AH,{...t,layoutGroup:r,switchLayoutGroup:x.useContext(p2),isPresent:e,safeToRemove:n})}const RH={borderRadius:{...xd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xd,borderTopRightRadius:xd,borderBottomLeftRadius:xd,borderBottomRightRadius:xd,boxShadow:PH};function NH(t,e,n){const r=jn(t)?t:lu(t);return r.start(ob("",r,e,n)),r.animation}const DH=(t,e)=>t.depth-e.depth;class MH{constructor(){this.children=[],this.isDirty=!1}add(e){Ax(this.children,e),this.isDirty=!0}remove(e){Rx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DH),this.isDirty=!1,this.children.forEach(e)}}function OH(t,e){const n=mr.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Xo(r),t(i-e))};return At.setup(r,!0),()=>Xo(r)}const O2=["TopLeft","TopRight","BottomLeft","BottomRight"],VH=O2.length,QI=t=>typeof t=="string"?parseFloat(t):t,XI=t=>typeof t=="number"||Fe.test(t);function LH(t,e,n,r,s,i){s?(t.opacity=jt(0,n.opacity??1,jH(r)),t.opacityExit=jt(e.opacity??1,0,FH(r))):i&&(t.opacity=jt(e.opacity??1,n.opacity??1,r));for(let a=0;a<VH;a++){const c=`border${O2[a]}Radius`;let u=JI(e,c),h=JI(n,c);if(u===void 0&&h===void 0)continue;u||(u=0),h||(h=0),u===0||h===0||XI(u)===XI(h)?(t[c]=Math.max(jt(QI(u),QI(h),r),0),(ti.test(h)||ti.test(u))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=jt(e.rotate||0,n.rotate||0,r))}function JI(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const jH=V2(0,.5,bN),FH=V2(.5,.95,Zr);function V2(t,e,n){return r=>r<t?0:r>e?1:n(ph(t,e,r))}function ZI(t,e){t.min=e.min,t.max=e.max}function Kr(t,e){ZI(t.x,e.x),ZI(t.y,e.y)}function ek(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function tk(t,e,n,r,s){return t-=e,t=Km(t,1/n,r),s!==void 0&&(t=Km(t,1/s,r)),t}function UH(t,e=0,n=1,r=.5,s,i=t,a=t){if(ti.test(e)&&(e=parseFloat(e),e=jt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=jt(i.min,i.max,r);t===i&&(c-=e),t.min=tk(t.min,e,n,c,s),t.max=tk(t.max,e,n,c,s)}function nk(t,e,[n,r,s],i,a){UH(t,e[n],e[r],e[s],e.scale,i,a)}const BH=["x","scaleX","originX"],zH=["y","scaleY","originY"];function rk(t,e,n,r){nk(t.x,e,BH,n?n.x:void 0,r?r.x:void 0),nk(t.y,e,zH,n?n.y:void 0,r?r.y:void 0)}function sk(t){return t.translate===0&&t.scale===1}function L2(t){return sk(t.x)&&sk(t.y)}function ik(t,e){return t.min===e.min&&t.max===e.max}function $H(t,e){return ik(t.x,e.x)&&ik(t.y,e.y)}function ok(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function j2(t,e){return ok(t.x,e.x)&&ok(t.y,e.y)}function ak(t){return Qn(t.x)/Qn(t.y)}function lk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class WH{constructor(){this.members=[]}add(e){Ax(this.members,e),e.scheduleRender()}remove(e){if(Rx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HH(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:v,skewX:E,skewY:S}=n;h&&(r=`perspective(${h}px) ${r}`),p&&(r+=`rotate(${p}deg) `),m&&(r+=`rotateX(${m}deg) `),v&&(r+=`rotateY(${v}deg) `),E&&(r+=`skewX(${E}deg) `),S&&(r+=`skewY(${S}deg) `)}const c=t.x.scale*e.x,u=t.y.scale*e.y;return(c!==1||u!==1)&&(r+=`scale(${c}, ${u})`),r||"none"}const h0=["","X","Y","Z"],qH=1e3;let KH=0;function f0(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function F2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=T2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",At,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&F2(r)}function U2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},c=e==null?void 0:e()){this.id=KH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(QH),this.nodes.forEach(eq),this.nodes.forEach(tq),this.nodes.forEach(XH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new MH)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Mx),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const u=this.eventHandlers.get(a);u&&u.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=t2(a)&&!F7(a),this.instance=a;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||c)&&(this.isLayoutDirty=!0),t){let p,m=0;const v=()=>this.root.updateBlockedByResize=!1;At.read(()=>{m=window.innerWidth}),t(a,()=>{const E=window.innerWidth;E!==m&&(m=E,this.root.updateBlockedByResize=!0,p&&p(),p=OH(v,250),lm.hasAnimatedSinceResize&&(lm.hasAnimatedSinceResize=!1,this.nodes.forEach(dk)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||oq,{onLayoutAnimationStart:T,onLayoutAnimationComplete:I}=h.getProps(),C=!this.targetLayout||!j2(this.targetLayout,E),N=!m&&v;if(this.options.layoutRoot||this.resumeFrom||N||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Kx(S,"layout"),onPlay:T,onComplete:I};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(p,N)}else m||dk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Xo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nq),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&F2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:u}=this.options;if(c===void 0&&!u)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ck);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(uk);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ZH),this.nodes.forEach(GH),this.nodes.forEach(YH)):this.nodes.forEach(uk),this.clearAllSnapshots();const c=mr.now();kn.delta=Bi(0,1e3/60,c-kn.timestamp),kn.timestamp=c,kn.isProcessing=!0,t0.update.process(kn),t0.preRender.process(kn),t0.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(JH),this.sharedNodes.forEach(rq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,At.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){At.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qn(this.snapshot.measuredBox.x)&&!Qn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!L2(this.projectionDelta),u=this.getTransformTemplate(),h=u?u(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;a&&this.instance&&(c||$a(this.latestValues)||p)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let u=this.removeElementScroll(c);return a&&(u=this.removeTransform(u)),aq(u),{animationId:this.root.animationId,measuredBox:c,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:a}=this.options;if(!a)return Yt();const c=a.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(lq))){const{scroll:p}=this.root;p&&(Nc(c.x,p.offset.x),Nc(c.y,p.offset.y))}return c}removeElementScroll(a){var u;const c=Yt();if(Kr(c,a),(u=this.scroll)!=null&&u.wasRoot)return c;for(let h=0;h<this.path.length;h++){const p=this.path[h],{scroll:m,options:v}=p;p!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Kr(c,a),Nc(c.x,m.offset.x),Nc(c.y,m.offset.y))}return c}applyTransform(a,c=!1){const u=Yt();Kr(u,a);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Dc(u,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),$a(p.latestValues)&&Dc(u,p.latestValues)}return $a(this.latestValues)&&Dc(u,this.latestValues),u}removeTransform(a){const c=Yt();Kr(c,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];if(!h.instance||!$a(h.latestValues))continue;Aw(h.latestValues)&&h.updateSnapshot();const p=Yt(),m=h.measurePageBox();Kr(p,m),rk(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return $a(this.latestValues)&&rk(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var v;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=kn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),Yd(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Yt(),this.targetWithTransforms=Yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kr(this.target,this.layout.layoutBox),v2(this.target,this.targetDelta)):Kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),Yd(this.relativeTargetOrigin,this.target,E.target),Kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Aw(this.parent.latestValues)||y2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var S;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(S=this.parent)!=null&&S.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(u=!1),u)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Kr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;IW(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Yt());const{target:E}=a;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ek(this.prevProjectionDelta.x,this.projectionDelta.x),ek(this.prevProjectionDelta.y,this.projectionDelta.y)),Gd(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!lk(this.projectionDelta.x,this.prevProjectionDelta.x)||!lk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Mc(),this.projectionDelta=Mc(),this.projectionDeltaWithTransform=Mc()}setAnimationOrigin(a,c=!1){const u=this.snapshot,h=u?u.latestValues:{},p={...this.latestValues},m=Mc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Yt(),E=u?u.source:void 0,S=this.layout?this.layout.source:void 0,T=E!==S,I=this.getStack(),C=!I||I.members.length<=1,N=!!(T&&!C&&this.options.crossfade===!0&&!this.path.some(iq));this.animationProgress=0;let R;this.mixTargetDelta=L=>{const z=L/1e3;hk(m.x,a.x,z),hk(m.y,a.y,z),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yd(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sq(this.relativeTarget,this.relativeTargetOrigin,v,z),R&&$H(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Yt()),Kr(R,this.relativeTarget)),T&&(this.animationValues=p,LH(p,h,this.latestValues,z,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var c,u,h;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(h=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||h.stop(),this.pendingAnimation&&(Xo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=At.update(()=>{lm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lu(0)),this.currentAnimation=NH(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:p=>{this.mixTargetDelta(p),a.onUpdate&&a.onUpdate(p)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:u,layout:h,latestValues:p}=a;if(!(!c||!u||!h)){if(this!==a&&this.layout&&h&&B2(this.options.animationType,this.layout.layoutBox,h.layoutBox)){u=this.target||Yt();const m=Qn(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+m;const v=Qn(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+v}Kr(c,u),Dc(c,p),Gd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new WH),this.sharedNodes.get(a).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var c;const{layoutId:a}=this.options;return a?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:a}=this.options;return a?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:u}={}){const h=this.getStack();h&&h.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(c=!0),!c)return;const h={};u.z&&f0("z",a,h,this.animationValues);for(let p=0;p<h0.length;p++)f0(`rotate${h0[p]}`,a,h,this.animationValues),f0(`skew${h0[p]}`,a,h,this.animationValues);a.render();for(const p in h)a.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);a.scheduleRender()}applyProjectionStyles(a,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=am(c==null?void 0:c.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=am(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!$a(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=HH(this.projectionDeltaWithTransform,this.treeScale,p);u&&(m=u(p,m)),a.transform=m;const{x:v,y:E}=this.projectionDelta;a.transformOrigin=`${v.origin*100}% ${E.origin*100}% 0`,h.animationValues?a.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:a.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in vh){if(p[S]===void 0)continue;const{correct:T,applyTo:I,isCSSVariable:C}=vh[S],N=m==="none"?p[S]:T(p[S],h);if(I){const R=I.length;for(let L=0;L<R;L++)a[I[L]]=N}else C?this.options.visualElement.renderState.vars[S]=N:a[S]=N}this.options.layoutId&&(a.pointerEvents=h===this?am(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var c;return(c=a.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(ck),this.root.sharedNodes.clear()}}}function GH(t){t.updateLayout()}function YH(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Gr(m=>{const v=a?e.measuredBox[m]:e.layoutBox[m],E=Qn(v);v.min=r[m].min,v.max=v.min+E}):B2(i,e.layoutBox,r)&&Gr(m=>{const v=a?e.measuredBox[m]:e.layoutBox[m],E=Qn(r[m]);v.max=v.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+E)});const c=Mc();Gd(c,r,e.layoutBox);const u=Mc();a?Gd(u,t.applyTransform(s,!0),e.measuredBox):Gd(u,r,e.layoutBox);const h=!L2(c);let p=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:E}=m;if(v&&E){const S=Yt();Yd(S,e.layoutBox,v.layoutBox);const T=Yt();Yd(T,r,E.layoutBox),j2(S,T)||(p=!0),m.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=S,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function QH(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function XH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function JH(t){t.clearSnapshot()}function ck(t){t.clearMeasurements()}function uk(t){t.isLayoutDirty=!1}function ZH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function dk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eq(t){t.resolveTargetDelta()}function tq(t){t.calcProjection()}function nq(t){t.resetSkewAndRotation()}function rq(t){t.removeLeadSnapshot()}function hk(t,e,n){t.translate=jt(e.translate,0,n),t.scale=jt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function fk(t,e,n,r){t.min=jt(e.min,n.min,r),t.max=jt(e.max,n.max,r)}function sq(t,e,n,r){fk(t.x,e.x,n.x,r),fk(t.y,e.y,n.y,r)}function iq(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oq={duration:.45,ease:[.4,0,.1,1]},pk=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),mk=pk("applewebkit/")&&!pk("chrome/")?Math.round:Zr;function gk(t){t.min=mk(t.min),t.max=mk(t.max)}function aq(t){gk(t.x),gk(t.y)}function B2(t,e,n){return t==="position"||t==="preserve-aspect"&&!fH(ak(e),ak(n),.2)}function lq(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const cq=U2({attachResizeListener:(t,e)=>wh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),p0={current:void 0},z2=U2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!p0.current){const t=new cq({});t.mount(window),t.setOptions({layoutScroll:!0}),p0.current=t}return p0.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uq={pan:{Feature:CH},drag:{Feature:kH,ProjectionNode:z2,MeasureLayout:M2}};function yk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&At.postRender(()=>i(e,Gh(e)))}class dq extends aa{mount(){const{current:e}=this.node;e&&(this.unmount=M7(e,(n,r)=>(yk(this.node,r,"Start"),s=>yk(this.node,s,"End"))))}unmount(){}}class hq extends aa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wh(wh(this.node.current,"focus",()=>this.onFocus()),wh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vk(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&At.postRender(()=>i(e,Gh(e)))}class fq extends aa{mount(){const{current:e}=this.node;e&&(this.unmount=j7(e,(n,r)=>(vk(this.node,r,"Start"),(s,{success:i})=>vk(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lw=new WeakMap,m0=new WeakMap,pq=t=>{const e=Lw.get(t.target);e&&e(t)},mq=t=>{t.forEach(pq)};function gq({root:t,...e}){const n=t||document;m0.has(n)||m0.set(n,{});const r=m0.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(mq,{root:t,...e})),r[s]}function yq(t,e,n){const r=gq(e);return Lw.set(t,n),r.observe(t),()=>{Lw.delete(t),r.unobserve(t)}}const vq={some:0,all:1};class wq extends aa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:vq[s]},c=u=>{const{isIntersecting:h}=u;if(this.isInView===h||(this.isInView=h,i&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=h?p:m;v&&v(u)};return yq(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_q(e,n))&&this.startObserver()}unmount(){}}function _q({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xq={inView:{Feature:wq},tap:{Feature:fq},focus:{Feature:hq},hover:{Feature:dq}},bq={layout:{ProjectionNode:z2,MeasureLayout:M2}},Eq={...aH,...xq,...uq,...bq},oi=EW(Eq,VW);function Tq({matchName:t,onDismiss:e,onSeeMatches:n}){const r=ci(),s=()=>{n&&n(),r(mt("Matches")),e()};return y.jsxs(oi.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-pink-500 via-purple-500 to-indigo-600 text-white rounded-xl shadow-2xl",children:[y.jsx("button",{onClick:e,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:y.jsx(An,{className:"w-5 h-5"})}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Rj,{className:"w-10 h-10 text-yellow-300 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold",children:"It's a Match!"}),y.jsxs("p",{className:"text-sm opacity-90",children:["You and ",t," liked each other."]})]})]}),y.jsxs(He,{onClick:s,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["See Matches ",y.jsx(c_,{className:"w-4 h-4 ml-2"})]})]})}function Sq({senderName:t,senderSessionId:e,onDismiss:n,onView:r}){const s=ci(),i=()=>{r&&r(),s(mt(`Matches?openChat=${e}`)),n()};return y.jsxs(oi.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-blue-500 via-sky-500 to-cyan-600 text-white rounded-xl shadow-2xl",children:[y.jsx("button",{onClick:n,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:y.jsx(An,{className:"w-5 h-5"})}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx($c,{className:"w-10 h-10 text-white/80 flex-shrink-0"}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold",children:"New Message"}),y.jsxs("p",{className:"text-sm opacity-90",children:["You have a new message from ",t,"."]})]})]}),y.jsxs(He,{onClick:i,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["View Message ",y.jsx(c_,{className:"w-4 h-4 ml-2"})]})]})}const Zo=x.forwardRef(({className:t,type:e,...n},r)=>y.jsx("input",{type:e,className:ot("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Zo.displayName="Input";const uu=x.forwardRef(({className:t,...e},n)=>y.jsx("textarea",{className:ot("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));uu.displayName="Textarea";var Iq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nt=Iq.reduce((t,e)=>{const n=au(`Primitive.${e}`),r=x.forwardRef((s,i)=>{const{asChild:a,...c}=s,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...c,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function kq(t,e){t&&kh.flushSync(()=>t.dispatchEvent(e))}var Cq="Label",$2=x.forwardRef((t,e)=>y.jsx(nt.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));$2.displayName=Cq;var W2=$2;const Pq=Lg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),fr=x.forwardRef(({className:t,...e},n)=>y.jsx(W2,{ref:n,className:ot(Pq(),t),...e}));fr.displayName=W2.displayName;function Gm(t,[e,n]){return Math.min(n,Math.max(e,t))}function it(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Aq(t,e){const n=x.createContext(e),r=i=>{const{children:a,...c}=i,u=x.useMemo(()=>c,Object.values(c));return y.jsx(n.Provider,{value:u,children:a})};r.displayName=t+"Provider";function s(i){const a=x.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Iu(t,e=[]){let n=[];function r(i,a){const c=x.createContext(a),u=n.length;n=[...n,a];const h=m=>{var C;const{scope:v,children:E,...S}=m,T=((C=v==null?void 0:v[t])==null?void 0:C[u])||c,I=x.useMemo(()=>S,Object.values(S));return y.jsx(T.Provider,{value:I,children:E})};h.displayName=i+"Provider";function p(m,v){var T;const E=((T=v==null?void 0:v[t])==null?void 0:T[u])||c,S=x.useContext(E);if(S)return S;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[h,p]}const s=()=>{const i=n.map(a=>x.createContext(a));return function(c){const u=(c==null?void 0:c[t])||i;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:u}}),[c,u])}};return s.scopeName=t,[r,Rq(s,...e)]}function Rq(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((c,{useScope:u,scopeName:h})=>{const m=u(i)[`__scope${h}`];return{...c,...m}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function H2(t){const e=t+"CollectionProvider",[n,r]=Iu(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=T=>{const{scope:I,children:C}=T,N=me.useRef(null),R=me.useRef(new Map).current;return y.jsx(s,{scope:I,itemMap:R,collectionRef:N,children:C})};a.displayName=e;const c=t+"CollectionSlot",u=au(c),h=me.forwardRef((T,I)=>{const{scope:C,children:N}=T,R=i(c,C),L=ft(I,R.collectionRef);return y.jsx(u,{ref:L,children:N})});h.displayName=c;const p=t+"CollectionItemSlot",m="data-radix-collection-item",v=au(p),E=me.forwardRef((T,I)=>{const{scope:C,children:N,...R}=T,L=me.useRef(null),z=ft(I,L),K=i(p,C);return me.useEffect(()=>(K.itemMap.set(L,{ref:L,...R}),()=>void K.itemMap.delete(L))),y.jsx(v,{[m]:"",ref:z,children:N})});E.displayName=p;function S(T){const I=i(t+"CollectionConsumer",T);return me.useCallback(()=>{const N=I.collectionRef.current;if(!N)return[];const R=Array.from(N.querySelectorAll(`[${m}]`));return Array.from(I.itemMap.values()).sort((K,D)=>R.indexOf(K.ref.current)-R.indexOf(D.ref.current))},[I.collectionRef,I.itemMap])}return[{Provider:a,Slot:h,ItemSlot:E},S,r]}var Nq=x.createContext(void 0);function q2(t){const e=x.useContext(Nq);return t||e||"ltr"}function _l(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Dq(t,e=globalThis==null?void 0:globalThis.document){const n=_l(t);x.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Mq="DismissableLayer",jw="dismissableLayer.update",Oq="dismissableLayer.pointerDownOutside",Vq="dismissableLayer.focusOutside",wk,K2=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ab=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:c,...u}=t,h=x.useContext(K2),[p,m]=x.useState(null),v=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,E]=x.useState({}),S=ft(e,D=>m(D)),T=Array.from(h.layers),[I]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=T.indexOf(I),N=p?T.indexOf(p):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,L=N>=C,z=Fq(D=>{const P=D.target,V=[...h.branches].some(F=>F.contains(P));!L||V||(s==null||s(D),a==null||a(D),D.defaultPrevented||c==null||c())},v),K=Uq(D=>{const P=D.target;[...h.branches].some(F=>F.contains(P))||(i==null||i(D),a==null||a(D),D.defaultPrevented||c==null||c())},v);return Dq(D=>{N===h.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&c&&(D.preventDefault(),c()))},v),x.useEffect(()=>{if(p)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(wk=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),_k(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=wk)}},[p,v,n,h]),x.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),_k())},[p,h]),x.useEffect(()=>{const D=()=>E({});return document.addEventListener(jw,D),()=>document.removeEventListener(jw,D)},[]),y.jsx(nt.div,{...u,ref:S,style:{pointerEvents:R?L?"auto":"none":void 0,...t.style},onFocusCapture:it(t.onFocusCapture,K.onFocusCapture),onBlurCapture:it(t.onBlurCapture,K.onBlurCapture),onPointerDownCapture:it(t.onPointerDownCapture,z.onPointerDownCapture)})});ab.displayName=Mq;var Lq="DismissableLayerBranch",jq=x.forwardRef((t,e)=>{const n=x.useContext(K2),r=x.useRef(null),s=ft(e,r);return x.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(nt.div,{...t,ref:s})});jq.displayName=Lq;function Fq(t,e=globalThis==null?void 0:globalThis.document){const n=_l(t),r=x.useRef(!1),s=x.useRef(()=>{});return x.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let u=function(){G2(Oq,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=u,e.addEventListener("click",s.current,{once:!0})):u()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Uq(t,e=globalThis==null?void 0:globalThis.document){const n=_l(t),r=x.useRef(!1);return x.useEffect(()=>{const s=i=>{i.target&&!r.current&&G2(Vq,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _k(){const t=new CustomEvent(jw);document.dispatchEvent(t)}function G2(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?kq(s,i):s.dispatchEvent(i)}var g0=0;function Y2(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??xk()),document.body.insertAdjacentElement("beforeend",t[1]??xk()),g0++,()=>{g0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),g0--}},[])}function xk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var y0="focusScope.autoFocusOnMount",v0="focusScope.autoFocusOnUnmount",bk={bubbles:!1,cancelable:!0},Bq="FocusScope",lb=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[c,u]=x.useState(null),h=_l(s),p=_l(i),m=x.useRef(null),v=ft(e,T=>u(T)),E=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let T=function(R){if(E.paused||!c)return;const L=R.target;c.contains(L)?m.current=L:No(m.current,{select:!0})},I=function(R){if(E.paused||!c)return;const L=R.relatedTarget;L!==null&&(c.contains(L)||No(m.current,{select:!0}))},C=function(R){if(document.activeElement===document.body)for(const z of R)z.removedNodes.length>0&&No(c)};document.addEventListener("focusin",T),document.addEventListener("focusout",I);const N=new MutationObserver(C);return c&&N.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",T),document.removeEventListener("focusout",I),N.disconnect()}}},[r,c,E.paused]),x.useEffect(()=>{if(c){Tk.add(E);const T=document.activeElement;if(!c.contains(T)){const C=new CustomEvent(y0,bk);c.addEventListener(y0,h),c.dispatchEvent(C),C.defaultPrevented||(zq(Kq(Q2(c)),{select:!0}),document.activeElement===T&&No(c))}return()=>{c.removeEventListener(y0,h),setTimeout(()=>{const C=new CustomEvent(v0,bk);c.addEventListener(v0,p),c.dispatchEvent(C),C.defaultPrevented||No(T??document.body,{select:!0}),c.removeEventListener(v0,p),Tk.remove(E)},0)}}},[c,h,p,E]);const S=x.useCallback(T=>{if(!n&&!r||E.paused)return;const I=T.key==="Tab"&&!T.altKey&&!T.ctrlKey&&!T.metaKey,C=document.activeElement;if(I&&C){const N=T.currentTarget,[R,L]=$q(N);R&&L?!T.shiftKey&&C===L?(T.preventDefault(),n&&No(R,{select:!0})):T.shiftKey&&C===R&&(T.preventDefault(),n&&No(L,{select:!0})):C===N&&T.preventDefault()}},[n,r,E.paused]);return y.jsx(nt.div,{tabIndex:-1,...a,ref:v,onKeyDown:S})});lb.displayName=Bq;function zq(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(No(r,{select:e}),document.activeElement!==n)return}function $q(t){const e=Q2(t),n=Ek(e,t),r=Ek(e.reverse(),t);return[n,r]}function Q2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Ek(t,e){for(const n of t)if(!Wq(n,{upTo:e}))return n}function Wq(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Hq(t){return t instanceof HTMLInputElement&&"select"in t}function No(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Hq(t)&&e&&t.select()}}var Tk=qq();function qq(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Sk(t,e),t.unshift(e)},remove(e){var n;t=Sk(t,e),(n=t[0])==null||n.resume()}}}function Sk(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Kq(t){return t.filter(e=>e.tagName!=="A")}var Un=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},Gq=eC[" useId ".trim().toString()]||(()=>{}),Yq=0;function Uc(t){const[e,n]=x.useState(Gq());return Un(()=>{n(r=>r??String(Yq++))},[t]),e?`radix-${e}`:""}const Qq=["top","right","bottom","left"],ea=Math.min,kr=Math.max,Ym=Math.round,Dp=Math.floor,ni=t=>({x:t,y:t}),Xq={left:"right",right:"left",bottom:"top",top:"bottom"},Jq={start:"end",end:"start"};function Fw(t,e,n){return kr(t,ea(e,n))}function $i(t,e){return typeof t=="function"?t(e):t}function Wi(t){return t.split("-")[0]}function ku(t){return t.split("-")[1]}function cb(t){return t==="x"?"y":"x"}function ub(t){return t==="y"?"height":"width"}const Zq=new Set(["top","bottom"]);function qs(t){return Zq.has(Wi(t))?"y":"x"}function db(t){return cb(qs(t))}function eK(t,e,n){n===void 0&&(n=!1);const r=ku(t),s=db(t),i=ub(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=Qm(a)),[a,Qm(a)]}function tK(t){const e=Qm(t);return[Uw(t),e,Uw(e)]}function Uw(t){return t.replace(/start|end/g,e=>Jq[e])}const Ik=["left","right"],kk=["right","left"],nK=["top","bottom"],rK=["bottom","top"];function sK(t,e,n){switch(t){case"top":case"bottom":return n?e?kk:Ik:e?Ik:kk;case"left":case"right":return e?nK:rK;default:return[]}}function iK(t,e,n,r){const s=ku(t);let i=sK(Wi(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Uw)))),i}function Qm(t){return t.replace(/left|right|bottom|top/g,e=>Xq[e])}function oK(t){return{top:0,right:0,bottom:0,left:0,...t}}function X2(t){return typeof t!="number"?oK(t):{top:t,right:t,bottom:t,left:t}}function Xm(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Ck(t,e,n){let{reference:r,floating:s}=t;const i=qs(e),a=db(e),c=ub(a),u=Wi(e),h=i==="y",p=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,v=r[c]/2-s[c]/2;let E;switch(u){case"top":E={x:p,y:r.y-s.height};break;case"bottom":E={x:p,y:r.y+r.height};break;case"right":E={x:r.x+r.width,y:m};break;case"left":E={x:r.x-s.width,y:m};break;default:E={x:r.x,y:r.y}}switch(ku(e)){case"start":E[a]-=v*(n&&h?-1:1);break;case"end":E[a]+=v*(n&&h?-1:1);break}return E}const aK=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,c=i.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:p,y:m}=Ck(h,r,u),v=r,E={},S=0;for(let T=0;T<c.length;T++){const{name:I,fn:C}=c[T],{x:N,y:R,data:L,reset:z}=await C({x:p,y:m,initialPlacement:r,placement:v,strategy:s,middlewareData:E,rects:h,platform:a,elements:{reference:t,floating:e}});p=N??p,m=R??m,E={...E,[I]:{...E[I],...L}},z&&S<=50&&(S++,typeof z=="object"&&(z.placement&&(v=z.placement),z.rects&&(h=z.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):z.rects),{x:p,y:m}=Ck(h,v,u)),T=-1)}return{x:p,y:m,placement:v,strategy:s,middlewareData:E}};async function _h(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:c,strategy:u}=t,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:v=!1,padding:E=0}=$i(e,t),S=X2(E),I=c[v?m==="floating"?"reference":"floating":m],C=Xm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(I)))==null||n?I:I.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:h,rootBoundary:p,strategy:u})),N=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,R=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),L=await(i.isElement==null?void 0:i.isElement(R))?await(i.getScale==null?void 0:i.getScale(R))||{x:1,y:1}:{x:1,y:1},z=Xm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:N,offsetParent:R,strategy:u}):N);return{top:(C.top-z.top+S.top)/L.y,bottom:(z.bottom-C.bottom+S.bottom)/L.y,left:(C.left-z.left+S.left)/L.x,right:(z.right-C.right+S.right)/L.x}}const lK=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:c,middlewareData:u}=e,{element:h,padding:p=0}=$i(t,e)||{};if(h==null)return{};const m=X2(p),v={x:n,y:r},E=db(s),S=ub(E),T=await a.getDimensions(h),I=E==="y",C=I?"top":"left",N=I?"bottom":"right",R=I?"clientHeight":"clientWidth",L=i.reference[S]+i.reference[E]-v[E]-i.floating[S],z=v[E]-i.reference[E],K=await(a.getOffsetParent==null?void 0:a.getOffsetParent(h));let D=K?K[R]:0;(!D||!await(a.isElement==null?void 0:a.isElement(K)))&&(D=c.floating[R]||i.floating[S]);const P=L/2-z/2,V=D/2-T[S]/2-1,F=ea(m[C],V),U=ea(m[N],V),j=F,M=D-T[S]-U,Z=D/2-T[S]/2+P,oe=Fw(j,Z,M),re=!u.arrow&&ku(s)!=null&&Z!==oe&&i.reference[S]/2-(Z<j?F:U)-T[S]/2<0,se=re?Z<j?Z-j:Z-M:0;return{[E]:v[E]+se,data:{[E]:oe,centerOffset:Z-oe-se,...re&&{alignmentOffset:se}},reset:re}}}),cK=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:c,platform:u,elements:h}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:T=!0,...I}=$i(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const C=Wi(s),N=qs(c),R=Wi(c)===c,L=await(u.isRTL==null?void 0:u.isRTL(h.floating)),z=v||(R||!T?[Qm(c)]:tK(c)),K=S!=="none";!v&&K&&z.push(...iK(c,T,S,L));const D=[c,...z],P=await _h(e,I),V=[];let F=((r=i.flip)==null?void 0:r.overflows)||[];if(p&&V.push(P[C]),m){const Z=eK(s,a,L);V.push(P[Z[0]],P[Z[1]])}if(F=[...F,{placement:s,overflows:V}],!V.every(Z=>Z<=0)){var U,j;const Z=(((U=i.flip)==null?void 0:U.index)||0)+1,oe=D[Z];if(oe&&(!(m==="alignment"?N!==qs(oe):!1)||F.every($=>qs($.placement)===N?$.overflows[0]>0:!0)))return{data:{index:Z,overflows:F},reset:{placement:oe}};let re=(j=F.filter(se=>se.overflows[0]<=0).sort((se,$)=>se.overflows[1]-$.overflows[1])[0])==null?void 0:j.placement;if(!re)switch(E){case"bestFit":{var M;const se=(M=F.filter($=>{if(K){const ie=qs($.placement);return ie===N||ie==="y"}return!0}).map($=>[$.placement,$.overflows.filter(ie=>ie>0).reduce((ie,le)=>ie+le,0)]).sort(($,ie)=>$[1]-ie[1])[0])==null?void 0:M[0];se&&(re=se);break}case"initialPlacement":re=c;break}if(s!==re)return{reset:{placement:re}}}return{}}}};function Pk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ak(t){return Qq.some(e=>t[e]>=0)}const uK=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=$i(t,e);switch(r){case"referenceHidden":{const i=await _h(e,{...s,elementContext:"reference"}),a=Pk(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Ak(a)}}}case"escaped":{const i=await _h(e,{...s,altBoundary:!0}),a=Pk(i,n.floating);return{data:{escapedOffsets:a,escaped:Ak(a)}}}default:return{}}}}},J2=new Set(["left","top"]);async function dK(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Wi(n),c=ku(n),u=qs(n)==="y",h=J2.has(a)?-1:1,p=i&&u?-1:1,m=$i(e,t);let{mainAxis:v,crossAxis:E,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof S=="number"&&(E=c==="end"?S*-1:S),u?{x:E*p,y:v*h}:{x:v*h,y:E*p}}const hK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:c}=e,u=await dK(e,t);return a===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+u.x,y:i+u.y,data:{...u,placement:a}}}}},fK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:c={fn:I=>{let{x:C,y:N}=I;return{x:C,y:N}}},...u}=$i(t,e),h={x:n,y:r},p=await _h(e,u),m=qs(Wi(s)),v=cb(m);let E=h[v],S=h[m];if(i){const I=v==="y"?"top":"left",C=v==="y"?"bottom":"right",N=E+p[I],R=E-p[C];E=Fw(N,E,R)}if(a){const I=m==="y"?"top":"left",C=m==="y"?"bottom":"right",N=S+p[I],R=S-p[C];S=Fw(N,S,R)}const T=c.fn({...e,[v]:E,[m]:S});return{...T,data:{x:T.x-n,y:T.y-r,enabled:{[v]:i,[m]:a}}}}}},pK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:c=0,mainAxis:u=!0,crossAxis:h=!0}=$i(t,e),p={x:n,y:r},m=qs(s),v=cb(m);let E=p[v],S=p[m];const T=$i(c,e),I=typeof T=="number"?{mainAxis:T,crossAxis:0}:{mainAxis:0,crossAxis:0,...T};if(u){const R=v==="y"?"height":"width",L=i.reference[v]-i.floating[R]+I.mainAxis,z=i.reference[v]+i.reference[R]-I.mainAxis;E<L?E=L:E>z&&(E=z)}if(h){var C,N;const R=v==="y"?"width":"height",L=J2.has(Wi(s)),z=i.reference[m]-i.floating[R]+(L&&((C=a.offset)==null?void 0:C[m])||0)+(L?0:I.crossAxis),K=i.reference[m]+i.reference[R]+(L?0:((N=a.offset)==null?void 0:N[m])||0)-(L?I.crossAxis:0);S<z?S=z:S>K&&(S=K)}return{[v]:E,[m]:S}}}},mK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:c}=e,{apply:u=()=>{},...h}=$i(t,e),p=await _h(e,h),m=Wi(s),v=ku(s),E=qs(s)==="y",{width:S,height:T}=i.floating;let I,C;m==="top"||m==="bottom"?(I=m,C=v===(await(a.isRTL==null?void 0:a.isRTL(c.floating))?"start":"end")?"left":"right"):(C=m,I=v==="end"?"top":"bottom");const N=T-p.top-p.bottom,R=S-p.left-p.right,L=ea(T-p[I],N),z=ea(S-p[C],R),K=!e.middlewareData.shift;let D=L,P=z;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=R),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=N),K&&!v){const F=kr(p.left,0),U=kr(p.right,0),j=kr(p.top,0),M=kr(p.bottom,0);E?P=S-2*(F!==0||U!==0?F+U:kr(p.left,p.right)):D=T-2*(j!==0||M!==0?j+M:kr(p.top,p.bottom))}await u({...e,availableWidth:P,availableHeight:D});const V=await a.getDimensions(c.floating);return S!==V.width||T!==V.height?{reset:{rects:!0}}:{}}}};function zg(){return typeof window<"u"}function Cu(t){return Z2(t)?(t.nodeName||"").toLowerCase():"#document"}function Mr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function di(t){var e;return(e=(Z2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Z2(t){return zg()?t instanceof Node||t instanceof Mr(t).Node:!1}function Ts(t){return zg()?t instanceof Element||t instanceof Mr(t).Element:!1}function ai(t){return zg()?t instanceof HTMLElement||t instanceof Mr(t).HTMLElement:!1}function Rk(t){return!zg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Mr(t).ShadowRoot}const gK=new Set(["inline","contents"]);function Yh(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ss(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!gK.has(s)}const yK=new Set(["table","td","th"]);function vK(t){return yK.has(Cu(t))}const wK=[":popover-open",":modal"];function $g(t){return wK.some(e=>{try{return t.matches(e)}catch{return!1}})}const _K=["transform","translate","scale","rotate","perspective"],xK=["transform","translate","scale","rotate","perspective","filter"],bK=["paint","layout","strict","content"];function hb(t){const e=fb(),n=Ts(t)?Ss(t):t;return _K.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||xK.some(r=>(n.willChange||"").includes(r))||bK.some(r=>(n.contain||"").includes(r))}function EK(t){let e=ta(t);for(;ai(e)&&!du(e);){if(hb(e))return e;if($g(e))return null;e=ta(e)}return null}function fb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TK=new Set(["html","body","#document"]);function du(t){return TK.has(Cu(t))}function Ss(t){return Mr(t).getComputedStyle(t)}function Wg(t){return Ts(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ta(t){if(Cu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Rk(t)&&t.host||di(t);return Rk(e)?e.host:e}function eD(t){const e=ta(t);return du(e)?t.ownerDocument?t.ownerDocument.body:t.body:ai(e)&&Yh(e)?e:eD(e)}function xh(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=eD(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Mr(s);if(i){const c=Bw(a);return e.concat(a,a.visualViewport||[],Yh(s)?s:[],c&&n?xh(c):[])}return e.concat(s,xh(s,[],n))}function Bw(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function tD(t){const e=Ss(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ai(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,c=Ym(n)!==i||Ym(r)!==a;return c&&(n=i,r=a),{width:n,height:r,$:c}}function pb(t){return Ts(t)?t:t.contextElement}function Bc(t){const e=pb(t);if(!ai(e))return ni(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=tD(e);let a=(i?Ym(n.width):n.width)/r,c=(i?Ym(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!c||!Number.isFinite(c))&&(c=1),{x:a,y:c}}const SK=ni(0);function nD(t){const e=Mr(t);return!fb()||!e.visualViewport?SK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function IK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Mr(t)?!1:e}function xl(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=pb(t);let a=ni(1);e&&(r?Ts(r)&&(a=Bc(r)):a=Bc(t));const c=IK(i,n,r)?nD(i):ni(0);let u=(s.left+c.x)/a.x,h=(s.top+c.y)/a.y,p=s.width/a.x,m=s.height/a.y;if(i){const v=Mr(i),E=r&&Ts(r)?Mr(r):r;let S=v,T=Bw(S);for(;T&&r&&E!==S;){const I=Bc(T),C=T.getBoundingClientRect(),N=Ss(T),R=C.left+(T.clientLeft+parseFloat(N.paddingLeft))*I.x,L=C.top+(T.clientTop+parseFloat(N.paddingTop))*I.y;u*=I.x,h*=I.y,p*=I.x,m*=I.y,u+=R,h+=L,S=Mr(T),T=Bw(S)}}return Xm({width:p,height:m,x:u,y:h})}function mb(t,e){const n=Wg(t).scrollLeft;return e?e.left+n:xl(di(t)).left+n}function rD(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:mb(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function kK(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=di(r),c=e?$g(e.floating):!1;if(r===a||c&&i)return n;let u={scrollLeft:0,scrollTop:0},h=ni(1);const p=ni(0),m=ai(r);if((m||!m&&!i)&&((Cu(r)!=="body"||Yh(a))&&(u=Wg(r)),ai(r))){const E=xl(r);h=Bc(r),p.x=E.x+r.clientLeft,p.y=E.y+r.clientTop}const v=a&&!m&&!i?rD(a,u,!0):ni(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-u.scrollLeft*h.x+p.x+v.x,y:n.y*h.y-u.scrollTop*h.y+p.y+v.y}}function CK(t){return Array.from(t.getClientRects())}function PK(t){const e=di(t),n=Wg(t),r=t.ownerDocument.body,s=kr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=kr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+mb(t);const c=-n.scrollTop;return Ss(r).direction==="rtl"&&(a+=kr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:c}}function AK(t,e){const n=Mr(t),r=di(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,c=0,u=0;if(s){i=s.width,a=s.height;const h=fb();(!h||h&&e==="fixed")&&(c=s.offsetLeft,u=s.offsetTop)}return{width:i,height:a,x:c,y:u}}const RK=new Set(["absolute","fixed"]);function NK(t,e){const n=xl(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ai(t)?Bc(t):ni(1),a=t.clientWidth*i.x,c=t.clientHeight*i.y,u=s*i.x,h=r*i.y;return{width:a,height:c,x:u,y:h}}function Nk(t,e,n){let r;if(e==="viewport")r=AK(t,n);else if(e==="document")r=PK(di(t));else if(Ts(e))r=NK(e,n);else{const s=nD(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Xm(r)}function sD(t,e){const n=ta(t);return n===e||!Ts(n)||du(n)?!1:Ss(n).position==="fixed"||sD(n,e)}function DK(t,e){const n=e.get(t);if(n)return n;let r=xh(t,[],!1).filter(c=>Ts(c)&&Cu(c)!=="body"),s=null;const i=Ss(t).position==="fixed";let a=i?ta(t):t;for(;Ts(a)&&!du(a);){const c=Ss(a),u=hb(a);!u&&c.position==="fixed"&&(s=null),(i?!u&&!s:!u&&c.position==="static"&&!!s&&RK.has(s.position)||Yh(a)&&!u&&sD(t,a))?r=r.filter(p=>p!==a):s=c,a=ta(a)}return e.set(t,r),r}function MK(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?$g(e)?[]:DK(e,this._c):[].concat(n),r],c=a[0],u=a.reduce((h,p)=>{const m=Nk(e,p,s);return h.top=kr(m.top,h.top),h.right=ea(m.right,h.right),h.bottom=ea(m.bottom,h.bottom),h.left=kr(m.left,h.left),h},Nk(e,c,s));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function OK(t){const{width:e,height:n}=tD(t);return{width:e,height:n}}function VK(t,e,n){const r=ai(e),s=di(e),i=n==="fixed",a=xl(t,!0,i,e);let c={scrollLeft:0,scrollTop:0};const u=ni(0);function h(){u.x=mb(s)}if(r||!r&&!i)if((Cu(e)!=="body"||Yh(s))&&(c=Wg(e)),r){const E=xl(e,!0,i,e);u.x=E.x+e.clientLeft,u.y=E.y+e.clientTop}else s&&h();i&&!r&&s&&h();const p=s&&!r&&!i?rD(s,c):ni(0),m=a.left+c.scrollLeft-u.x-p.x,v=a.top+c.scrollTop-u.y-p.y;return{x:m,y:v,width:a.width,height:a.height}}function w0(t){return Ss(t).position==="static"}function Dk(t,e){if(!ai(t)||Ss(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return di(t)===n&&(n=n.ownerDocument.body),n}function iD(t,e){const n=Mr(t);if($g(t))return n;if(!ai(t)){let s=ta(t);for(;s&&!du(s);){if(Ts(s)&&!w0(s))return s;s=ta(s)}return n}let r=Dk(t,e);for(;r&&vK(r)&&w0(r);)r=Dk(r,e);return r&&du(r)&&w0(r)&&!hb(r)?n:r||EK(t)||n}const LK=async function(t){const e=this.getOffsetParent||iD,n=this.getDimensions,r=await n(t.floating);return{reference:VK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jK(t){return Ss(t).direction==="rtl"}const FK={convertOffsetParentRelativeRectToViewportRelativeRect:kK,getDocumentElement:di,getClippingRect:MK,getOffsetParent:iD,getElementRects:LK,getClientRects:CK,getDimensions:OK,getScale:Bc,isElement:Ts,isRTL:jK};function oD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function UK(t,e){let n=null,r;const s=di(t);function i(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function a(c,u){c===void 0&&(c=!1),u===void 0&&(u=1),i();const h=t.getBoundingClientRect(),{left:p,top:m,width:v,height:E}=h;if(c||e(),!v||!E)return;const S=Dp(m),T=Dp(s.clientWidth-(p+v)),I=Dp(s.clientHeight-(m+E)),C=Dp(p),R={rootMargin:-S+"px "+-T+"px "+-I+"px "+-C+"px",threshold:kr(0,ea(1,u))||1};let L=!0;function z(K){const D=K[0].intersectionRatio;if(D!==u){if(!L)return a();D?a(!1,D):r=setTimeout(()=>{a(!1,1e-7)},1e3)}D===1&&!oD(h,t.getBoundingClientRect())&&a(),L=!1}try{n=new IntersectionObserver(z,{...R,root:s.ownerDocument})}catch{n=new IntersectionObserver(z,R)}n.observe(t)}return a(!0),i}function BK(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,h=pb(t),p=s||i?[...h?xh(h):[],...xh(e)]:[];p.forEach(C=>{s&&C.addEventListener("scroll",n,{passive:!0}),i&&C.addEventListener("resize",n)});const m=h&&c?UK(h,n):null;let v=-1,E=null;a&&(E=new ResizeObserver(C=>{let[N]=C;N&&N.target===h&&E&&(E.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=E)==null||R.observe(e)})),n()}),h&&!u&&E.observe(h),E.observe(e));let S,T=u?xl(t):null;u&&I();function I(){const C=xl(t);T&&!oD(T,C)&&n(),T=C,S=requestAnimationFrame(I)}return n(),()=>{var C;p.forEach(N=>{s&&N.removeEventListener("scroll",n),i&&N.removeEventListener("resize",n)}),m==null||m(),(C=E)==null||C.disconnect(),E=null,u&&cancelAnimationFrame(S)}}const zK=hK,$K=fK,WK=cK,HK=mK,qK=uK,Mk=lK,KK=pK,GK=(t,e,n)=>{const r=new Map,s={platform:FK,...n},i={...s.platform,_c:r};return aK(t,e,{...s,platform:i})};var YK=typeof document<"u",QK=function(){},cm=YK?x.useLayoutEffect:QK;function Jm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Jm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Jm(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function aD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ok(t,e){const n=aD(t);return Math.round(e*n)/n}function _0(t){const e=x.useRef(t);return cm(()=>{e.current=t}),e}function XK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:c=!0,whileElementsMounted:u,open:h}=t,[p,m]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,E]=x.useState(r);Jm(v,r)||E(r);const[S,T]=x.useState(null),[I,C]=x.useState(null),N=x.useCallback($=>{$!==K.current&&(K.current=$,T($))},[]),R=x.useCallback($=>{$!==D.current&&(D.current=$,C($))},[]),L=i||S,z=a||I,K=x.useRef(null),D=x.useRef(null),P=x.useRef(p),V=u!=null,F=_0(u),U=_0(s),j=_0(h),M=x.useCallback(()=>{if(!K.current||!D.current)return;const $={placement:e,strategy:n,middleware:v};U.current&&($.platform=U.current),GK(K.current,D.current,$).then(ie=>{const le={...ie,isPositioned:j.current!==!1};Z.current&&!Jm(P.current,le)&&(P.current=le,kh.flushSync(()=>{m(le)}))})},[v,e,n,U,j]);cm(()=>{h===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,m($=>({...$,isPositioned:!1})))},[h]);const Z=x.useRef(!1);cm(()=>(Z.current=!0,()=>{Z.current=!1}),[]),cm(()=>{if(L&&(K.current=L),z&&(D.current=z),L&&z){if(F.current)return F.current(L,z,M);M()}},[L,z,M,F,V]);const oe=x.useMemo(()=>({reference:K,floating:D,setReference:N,setFloating:R}),[N,R]),re=x.useMemo(()=>({reference:L,floating:z}),[L,z]),se=x.useMemo(()=>{const $={position:n,left:0,top:0};if(!re.floating)return $;const ie=Ok(re.floating,p.x),le=Ok(re.floating,p.y);return c?{...$,transform:"translate("+ie+"px, "+le+"px)",...aD(re.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:le}},[n,c,re.floating,p.x,p.y]);return x.useMemo(()=>({...p,update:M,refs:oe,elements:re,floatingStyles:se}),[p,M,oe,re,se])}const JK=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Mk({element:r.current,padding:s}).fn(n):{}:r?Mk({element:r,padding:s}).fn(n):{}}}},ZK=(t,e)=>({...zK(t),options:[t,e]}),eG=(t,e)=>({...$K(t),options:[t,e]}),tG=(t,e)=>({...KK(t),options:[t,e]}),nG=(t,e)=>({...WK(t),options:[t,e]}),rG=(t,e)=>({...HK(t),options:[t,e]}),sG=(t,e)=>({...qK(t),options:[t,e]}),iG=(t,e)=>({...JK(t),options:[t,e]});var oG="Arrow",lD=x.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return y.jsx(nt.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});lD.displayName=oG;var aG=lD;function gb(t){const[e,n]=x.useState(void 0);return Un(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,c;if("borderBoxSize"in i){const u=i.borderBoxSize,h=Array.isArray(u)?u[0]:u;a=h.inlineSize,c=h.blockSize}else a=t.offsetWidth,c=t.offsetHeight;n({width:a,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var yb="Popper",[cD,uD]=Iu(yb),[lG,dD]=cD(yb),hD=t=>{const{__scopePopper:e,children:n}=t,[r,s]=x.useState(null);return y.jsx(lG,{scope:e,anchor:r,onAnchorChange:s,children:n})};hD.displayName=yb;var fD="PopperAnchor",pD=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=dD(fD,n),a=x.useRef(null),c=ft(e,a);return x.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:y.jsx(nt.div,{...s,ref:c})});pD.displayName=fD;var vb="PopperContent",[cG,uG]=cD(vb),mD=x.forwardRef((t,e)=>{var ue,be,De,Ne,$e,We;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:E="optimized",onPlaced:S,...T}=t,I=dD(vb,n),[C,N]=x.useState(null),R=ft(e,Et=>N(Et)),[L,z]=x.useState(null),K=gb(L),D=(K==null?void 0:K.width)??0,P=(K==null?void 0:K.height)??0,V=r+(i!=="center"?"-"+i:""),F=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},U=Array.isArray(h)?h:[h],j=U.length>0,M={padding:F,boundary:U.filter(hG),altBoundary:j},{refs:Z,floatingStyles:oe,placement:re,isPositioned:se,middlewareData:$}=XK({strategy:"fixed",placement:V,whileElementsMounted:(...Et)=>BK(...Et,{animationFrame:E==="always"}),elements:{reference:I.anchor},middleware:[ZK({mainAxis:s+P,alignmentAxis:a}),u&&eG({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?tG():void 0,...M}),u&&nG({...M}),rG({...M,apply:({elements:Et,rects:Ut,availableWidth:Jn,availableHeight:Zn})=>{const{width:bn,height:hi}=Ut.reference,qt=Et.floating.style;qt.setProperty("--radix-popper-available-width",`${Jn}px`),qt.setProperty("--radix-popper-available-height",`${Zn}px`),qt.setProperty("--radix-popper-anchor-width",`${bn}px`),qt.setProperty("--radix-popper-anchor-height",`${hi}px`)}}),L&&iG({element:L,padding:c}),fG({arrowWidth:D,arrowHeight:P}),v&&sG({strategy:"referenceHidden",...M})]}),[ie,le]=vD(re),W=_l(S);Un(()=>{se&&(W==null||W())},[se,W]);const X=(ue=$.arrow)==null?void 0:ue.x,ae=(be=$.arrow)==null?void 0:be.y,ve=((De=$.arrow)==null?void 0:De.centerOffset)!==0,[Ae,xe]=x.useState();return Un(()=>{C&&xe(window.getComputedStyle(C).zIndex)},[C]),y.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:se?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ae,"--radix-popper-transform-origin":[(Ne=$.transformOrigin)==null?void 0:Ne.x,($e=$.transformOrigin)==null?void 0:$e.y].join(" "),...((We=$.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:y.jsx(cG,{scope:n,placedSide:ie,onArrowChange:z,arrowX:X,arrowY:ae,shouldHideArrow:ve,children:y.jsx(nt.div,{"data-side":ie,"data-align":le,...T,ref:R,style:{...T.style,animation:se?void 0:"none"}})})})});mD.displayName=vb;var gD="PopperArrow",dG={top:"bottom",right:"left",bottom:"top",left:"right"},yD=x.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=uG(gD,r),a=dG[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(aG,{...s,ref:n,style:{...s.style,display:"block"}})})});yD.displayName=gD;function hG(t){return t!==null}var fG=t=>({name:"transformOrigin",options:t,fn(e){var I,C,N;const{placement:n,rects:r,middlewareData:s}=e,a=((I=s.arrow)==null?void 0:I.centerOffset)!==0,c=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[h,p]=vD(n),m={start:"0%",center:"50%",end:"100%"}[p],v=(((C=s.arrow)==null?void 0:C.x)??0)+c/2,E=(((N=s.arrow)==null?void 0:N.y)??0)+u/2;let S="",T="";return h==="bottom"?(S=a?m:`${v}px`,T=`${-u}px`):h==="top"?(S=a?m:`${v}px`,T=`${r.floating.height+u}px`):h==="right"?(S=`${-u}px`,T=a?m:`${E}px`):h==="left"&&(S=`${r.floating.width+u}px`,T=a?m:`${E}px`),{data:{x:S,y:T}}}});function vD(t){const[e,n="center"]=t.split("-");return[e,n]}var pG=hD,mG=pD,gG=mD,yG=yD,vG="Portal",wb=x.forwardRef((t,e)=>{var c;const{container:n,...r}=t,[s,i]=x.useState(!1);Un(()=>i(!0),[]);const a=n||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?wC.createPortal(y.jsx(nt.div,{...r,ref:e}),a):null});wb.displayName=vG;var wG=eC[" useInsertionEffect ".trim().toString()]||Un;function bh({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,a]=_G({defaultProp:e,onChange:n}),c=t!==void 0,u=c?t:s;{const p=x.useRef(t!==void 0);x.useEffect(()=>{const m=p.current;m!==c&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,r])}const h=x.useCallback(p=>{var m;if(c){const v=xG(p)?p(t):p;v!==t&&((m=a.current)==null||m.call(a,v))}else i(p)},[c,t,i,a]);return[u,h]}function _G({defaultProp:t,onChange:e}){const[n,r]=x.useState(t),s=x.useRef(n),i=x.useRef(e);return wG(()=>{i.current=e},[e]),x.useEffect(()=>{var a;s.current!==n&&((a=i.current)==null||a.call(i,n),s.current=n)},[n,s]),[n,r,i]}function xG(t){return typeof t=="function"}function _b(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var wD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bG="VisuallyHidden",EG=x.forwardRef((t,e)=>y.jsx(nt.span,{...t,ref:e,style:{...wD,...t.style}}));EG.displayName=bG;var TG=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},wc=new WeakMap,Mp=new WeakMap,Op={},x0=0,_D=function(t){return t&&(t.host||_D(t.parentNode))},SG=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=_D(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},IG=function(t,e,n,r){var s=SG(e,Array.isArray(t)?t:[t]);Op[n]||(Op[n]=new WeakMap);var i=Op[n],a=[],c=new Set,u=new Set(s),h=function(m){!m||c.has(m)||(c.add(m),h(m.parentNode))};s.forEach(h);var p=function(m){!m||u.has(m)||Array.prototype.forEach.call(m.children,function(v){if(c.has(v))p(v);else try{var E=v.getAttribute(r),S=E!==null&&E!=="false",T=(wc.get(v)||0)+1,I=(i.get(v)||0)+1;wc.set(v,T),i.set(v,I),a.push(v),T===1&&S&&Mp.set(v,!0),I===1&&v.setAttribute(n,"true"),S||v.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",v,C)}})};return p(e),c.clear(),x0++,function(){a.forEach(function(m){var v=wc.get(m)-1,E=i.get(m)-1;wc.set(m,v),i.set(m,E),v||(Mp.has(m)||m.removeAttribute(r),Mp.delete(m)),E||m.removeAttribute(n)}),x0--,x0||(wc=new WeakMap,wc=new WeakMap,Mp=new WeakMap,Op={})}},xD=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=TG(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),IG(r,s,n,"aria-hidden")):function(){return null}},zs=function(){return zs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zs.apply(this,arguments)};function bD(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function kG(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var um="right-scroll-bar-position",dm="width-before-scroll-bar",CG="with-scroll-bars-hidden",PG="--removed-body-scroll-bar-size";function b0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function AG(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var RG=typeof window<"u"?x.useLayoutEffect:x.useEffect,Vk=new WeakMap;function NG(t,e){var n=AG(null,function(r){return t.forEach(function(s){return b0(s,r)})});return RG(function(){var r=Vk.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(c){i.has(c)||b0(c,null)}),i.forEach(function(c){s.has(c)||b0(c,a)})}Vk.set(n,t)},[t]),n}function DG(t){return t}function MG(t,e){e===void 0&&(e=DG);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(c){return c!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(c){return i(c)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var c=n;n=[],c.forEach(i),a=n}var u=function(){var p=a;a=[],p.forEach(i)},h=function(){return Promise.resolve().then(u)};h(),n={push:function(p){a.push(p),h()},filter:function(p){return a=a.filter(p),n}}}};return s}function OG(t){t===void 0&&(t={});var e=MG(null);return e.options=zs({async:!0,ssr:!1},t),e}var ED=function(t){var e=t.sideCar,n=bD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return x.createElement(r,zs({},n))};ED.isSideCarExport=!0;function VG(t,e){return t.useMedium(e),ED}var TD=OG(),E0=function(){},Hg=x.forwardRef(function(t,e){var n=x.useRef(null),r=x.useState({onScrollCapture:E0,onWheelCapture:E0,onTouchMoveCapture:E0}),s=r[0],i=r[1],a=t.forwardProps,c=t.children,u=t.className,h=t.removeScrollBar,p=t.enabled,m=t.shards,v=t.sideCar,E=t.noRelative,S=t.noIsolation,T=t.inert,I=t.allowPinchZoom,C=t.as,N=C===void 0?"div":C,R=t.gapMode,L=bD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),z=v,K=NG([n,e]),D=zs(zs({},L),s);return x.createElement(x.Fragment,null,p&&x.createElement(z,{sideCar:TD,removeScrollBar:h,shards:m,noRelative:E,noIsolation:S,inert:T,setCallbacks:i,allowPinchZoom:!!I,lockRef:n,gapMode:R}),a?x.cloneElement(x.Children.only(c),zs(zs({},D),{ref:K})):x.createElement(N,zs({},D,{className:u,ref:K}),c))});Hg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hg.classNames={fullWidth:dm,zeroRight:um};var LG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=LG();return e&&t.setAttribute("nonce",e),t}function FG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function UG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var BG=function(){var t=0,e=null;return{add:function(n){t==0&&(e=jG())&&(FG(e,n),UG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},zG=function(){var t=BG();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},SD=function(){var t=zG(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},$G={left:0,top:0,right:0,gap:0},T0=function(t){return parseInt(t||"",10)||0},WG=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[T0(n),T0(r),T0(s)]},HG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return $G;var e=WG(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},qG=SD(),zc="data-scroll-locked",KG=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(CG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(zc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(um,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(dm,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(um," .").concat(um,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dm," .").concat(dm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zc,`] {
    `).concat(PG,": ").concat(c,`px;
  }
`)},Lk=function(){var t=parseInt(document.body.getAttribute(zc)||"0",10);return isFinite(t)?t:0},GG=function(){x.useEffect(function(){return document.body.setAttribute(zc,(Lk()+1).toString()),function(){var t=Lk()-1;t<=0?document.body.removeAttribute(zc):document.body.setAttribute(zc,t.toString())}},[])},YG=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;GG();var i=x.useMemo(function(){return HG(s)},[s]);return x.createElement(qG,{styles:KG(i,!e,s,n?"":"!important")})},zw=!1;if(typeof window<"u")try{var Vp=Object.defineProperty({},"passive",{get:function(){return zw=!0,!0}});window.addEventListener("test",Vp,Vp),window.removeEventListener("test",Vp,Vp)}catch{zw=!1}var _c=zw?{passive:!1}:!1,QG=function(t){return t.tagName==="TEXTAREA"},ID=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!QG(t)&&n[e]==="visible")},XG=function(t){return ID(t,"overflowY")},JG=function(t){return ID(t,"overflowX")},jk=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=kD(t,r);if(s){var i=CD(t,r),a=i[1],c=i[2];if(a>c)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ZG=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},eY=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},kD=function(t,e){return t==="v"?XG(e):JG(e)},CD=function(t,e){return t==="v"?ZG(e):eY(e)},tY=function(t,e){return t==="h"&&e==="rtl"?-1:1},nY=function(t,e,n,r,s){var i=tY(t,window.getComputedStyle(e).direction),a=i*r,c=n.target,u=e.contains(c),h=!1,p=a>0,m=0,v=0;do{if(!c)break;var E=CD(t,c),S=E[0],T=E[1],I=E[2],C=T-I-i*S;(S||C)&&kD(t,c)&&(m+=C,v+=S);var N=c.parentNode;c=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(p&&Math.abs(m)<1||!p&&Math.abs(v)<1)&&(h=!0),h},Lp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Fk=function(t){return[t.deltaX,t.deltaY]},Uk=function(t){return t&&"current"in t?t.current:t},rY=function(t,e){return t[0]===e[0]&&t[1]===e[1]},sY=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},iY=0,xc=[];function oY(t){var e=x.useRef([]),n=x.useRef([0,0]),r=x.useRef(),s=x.useState(iY++)[0],i=x.useState(SD)[0],a=x.useRef(t);x.useEffect(function(){a.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var T=kG([t.lockRef.current],(t.shards||[]).map(Uk),!0).filter(Boolean);return T.forEach(function(I){return I.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),T.forEach(function(I){return I.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var c=x.useCallback(function(T,I){if("touches"in T&&T.touches.length===2||T.type==="wheel"&&T.ctrlKey)return!a.current.allowPinchZoom;var C=Lp(T),N=n.current,R="deltaX"in T?T.deltaX:N[0]-C[0],L="deltaY"in T?T.deltaY:N[1]-C[1],z,K=T.target,D=Math.abs(R)>Math.abs(L)?"h":"v";if("touches"in T&&D==="h"&&K.type==="range")return!1;var P=jk(D,K);if(!P)return!0;if(P?z=D:(z=D==="v"?"h":"v",P=jk(D,K)),!P)return!1;if(!r.current&&"changedTouches"in T&&(R||L)&&(r.current=z),!z)return!0;var V=r.current||z;return nY(V,I,T,V==="h"?R:L)},[]),u=x.useCallback(function(T){var I=T;if(!(!xc.length||xc[xc.length-1]!==i)){var C="deltaY"in I?Fk(I):Lp(I),N=e.current.filter(function(z){return z.name===I.type&&(z.target===I.target||I.target===z.shadowParent)&&rY(z.delta,C)})[0];if(N&&N.should){I.cancelable&&I.preventDefault();return}if(!N){var R=(a.current.shards||[]).map(Uk).filter(Boolean).filter(function(z){return z.contains(I.target)}),L=R.length>0?c(I,R[0]):!a.current.noIsolation;L&&I.cancelable&&I.preventDefault()}}},[]),h=x.useCallback(function(T,I,C,N){var R={name:T,delta:I,target:C,should:N,shadowParent:aY(C)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(L){return L!==R})},1)},[]),p=x.useCallback(function(T){n.current=Lp(T),r.current=void 0},[]),m=x.useCallback(function(T){h(T.type,Fk(T),T.target,c(T,t.lockRef.current))},[]),v=x.useCallback(function(T){h(T.type,Lp(T),T.target,c(T,t.lockRef.current))},[]);x.useEffect(function(){return xc.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",u,_c),document.addEventListener("touchmove",u,_c),document.addEventListener("touchstart",p,_c),function(){xc=xc.filter(function(T){return T!==i}),document.removeEventListener("wheel",u,_c),document.removeEventListener("touchmove",u,_c),document.removeEventListener("touchstart",p,_c)}},[]);var E=t.removeScrollBar,S=t.inert;return x.createElement(x.Fragment,null,S?x.createElement(i,{styles:sY(s)}):null,E?x.createElement(YG,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function aY(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const lY=VG(TD,oY);var xb=x.forwardRef(function(t,e){return x.createElement(Hg,zs({},t,{ref:e,sideCar:lY}))});xb.classNames=Hg.classNames;var cY=[" ","Enter","ArrowUp","ArrowDown"],uY=[" ","Enter"],bl="Select",[qg,Kg,dY]=H2(bl),[Pu,YJ]=Iu(bl,[dY,uD]),Gg=uD(),[hY,la]=Pu(bl),[fY,pY]=Pu(bl),PD=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:c,onValueChange:u,dir:h,name:p,autoComplete:m,disabled:v,required:E,form:S}=t,T=Gg(e),[I,C]=x.useState(null),[N,R]=x.useState(null),[L,z]=x.useState(!1),K=q2(h),[D,P]=bh({prop:r,defaultProp:s??!1,onChange:i,caller:bl}),[V,F]=bh({prop:a,defaultProp:c,onChange:u,caller:bl}),U=x.useRef(null),j=I?S||!!I.closest("form"):!0,[M,Z]=x.useState(new Set),oe=Array.from(M).map(re=>re.props.value).join(";");return y.jsx(pG,{...T,children:y.jsxs(hY,{required:E,scope:e,trigger:I,onTriggerChange:C,valueNode:N,onValueNodeChange:R,valueNodeHasChildren:L,onValueNodeHasChildrenChange:z,contentId:Uc(),value:V,onValueChange:F,open:D,onOpenChange:P,dir:K,triggerPointerDownPosRef:U,disabled:v,children:[y.jsx(qg.Provider,{scope:e,children:y.jsx(fY,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(re=>{Z(se=>new Set(se).add(re))},[]),onNativeOptionRemove:x.useCallback(re=>{Z(se=>{const $=new Set(se);return $.delete(re),$})},[]),children:n})}),j?y.jsxs(ZD,{"aria-hidden":!0,required:E,tabIndex:-1,name:p,autoComplete:m,value:V,onChange:re=>F(re.target.value),disabled:v,form:S,children:[V===void 0?y.jsx("option",{value:""}):null,Array.from(M)]},oe):null]})})};PD.displayName=bl;var AD="SelectTrigger",RD=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Gg(n),a=la(AD,n),c=a.disabled||r,u=ft(e,a.onTriggerChange),h=Kg(n),p=x.useRef("touch"),[m,v,E]=tM(T=>{const I=h().filter(R=>!R.disabled),C=I.find(R=>R.value===a.value),N=nM(I,T,C);N!==void 0&&a.onValueChange(N.value)}),S=T=>{c||(a.onOpenChange(!0),E()),T&&(a.triggerPointerDownPosRef.current={x:Math.round(T.pageX),y:Math.round(T.pageY)})};return y.jsx(mG,{asChild:!0,...i,children:y.jsx(nt.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":eM(a.value)?"":void 0,...s,ref:u,onClick:it(s.onClick,T=>{T.currentTarget.focus(),p.current!=="mouse"&&S(T)}),onPointerDown:it(s.onPointerDown,T=>{p.current=T.pointerType;const I=T.target;I.hasPointerCapture(T.pointerId)&&I.releasePointerCapture(T.pointerId),T.button===0&&T.ctrlKey===!1&&T.pointerType==="mouse"&&(S(T),T.preventDefault())}),onKeyDown:it(s.onKeyDown,T=>{const I=m.current!=="";!(T.ctrlKey||T.altKey||T.metaKey)&&T.key.length===1&&v(T.key),!(I&&T.key===" ")&&cY.includes(T.key)&&(S(),T.preventDefault())})})})});RD.displayName=AD;var ND="SelectValue",DD=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...c}=t,u=la(ND,n),{onValueNodeHasChildrenChange:h}=u,p=i!==void 0,m=ft(e,u.onValueNodeChange);return Un(()=>{h(p)},[h,p]),y.jsx(nt.span,{...c,ref:m,style:{pointerEvents:"none"},children:eM(u.value)?y.jsx(y.Fragment,{children:a}):i})});DD.displayName=ND;var mY="SelectIcon",MD=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return y.jsx(nt.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});MD.displayName=mY;var gY="SelectPortal",OD=t=>y.jsx(wb,{asChild:!0,...t});OD.displayName=gY;var El="SelectContent",VD=x.forwardRef((t,e)=>{const n=la(El,t.__scopeSelect),[r,s]=x.useState();if(Un(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?kh.createPortal(y.jsx(LD,{scope:t.__scopeSelect,children:y.jsx(qg.Slot,{scope:t.__scopeSelect,children:y.jsx("div",{children:t.children})})}),i):null}return y.jsx(jD,{...t,ref:e})});VD.displayName=El;var vs=10,[LD,ca]=Pu(El),yY="SelectContentImpl",vY=au("SelectContent.RemoveScroll"),jD=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:c,sideOffset:u,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:v,collisionPadding:E,sticky:S,hideWhenDetached:T,avoidCollisions:I,...C}=t,N=la(El,n),[R,L]=x.useState(null),[z,K]=x.useState(null),D=ft(e,ue=>L(ue)),[P,V]=x.useState(null),[F,U]=x.useState(null),j=Kg(n),[M,Z]=x.useState(!1),oe=x.useRef(!1);x.useEffect(()=>{if(R)return xD(R)},[R]),Y2();const re=x.useCallback(ue=>{const[be,...De]=j().map(We=>We.ref.current),[Ne]=De.slice(-1),$e=document.activeElement;for(const We of ue)if(We===$e||(We==null||We.scrollIntoView({block:"nearest"}),We===be&&z&&(z.scrollTop=0),We===Ne&&z&&(z.scrollTop=z.scrollHeight),We==null||We.focus(),document.activeElement!==$e))return},[j,z]),se=x.useCallback(()=>re([P,R]),[re,P,R]);x.useEffect(()=>{M&&se()},[M,se]);const{onOpenChange:$,triggerPointerDownPosRef:ie}=N;x.useEffect(()=>{if(R){let ue={x:0,y:0};const be=Ne=>{var $e,We;ue={x:Math.abs(Math.round(Ne.pageX)-((($e=ie.current)==null?void 0:$e.x)??0)),y:Math.abs(Math.round(Ne.pageY)-(((We=ie.current)==null?void 0:We.y)??0))}},De=Ne=>{ue.x<=10&&ue.y<=10?Ne.preventDefault():R.contains(Ne.target)||$(!1),document.removeEventListener("pointermove",be),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",De,{capture:!0})}}},[R,$,ie]),x.useEffect(()=>{const ue=()=>$(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[$]);const[le,W]=tM(ue=>{const be=j().filter($e=>!$e.disabled),De=be.find($e=>$e.ref.current===document.activeElement),Ne=nM(be,ue,De);Ne&&setTimeout(()=>Ne.ref.current.focus())}),X=x.useCallback((ue,be,De)=>{const Ne=!oe.current&&!De;(N.value!==void 0&&N.value===be||Ne)&&(V(ue),Ne&&(oe.current=!0))},[N.value]),ae=x.useCallback(()=>R==null?void 0:R.focus(),[R]),ve=x.useCallback((ue,be,De)=>{const Ne=!oe.current&&!De;(N.value!==void 0&&N.value===be||Ne)&&U(ue)},[N.value]),Ae=r==="popper"?$w:FD,xe=Ae===$w?{side:c,sideOffset:u,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:v,collisionPadding:E,sticky:S,hideWhenDetached:T,avoidCollisions:I}:{};return y.jsx(LD,{scope:n,content:R,viewport:z,onViewportChange:K,itemRefCallback:X,selectedItem:P,onItemLeave:ae,itemTextRefCallback:ve,focusSelectedItem:se,selectedItemText:F,position:r,isPositioned:M,searchRef:le,children:y.jsx(xb,{as:vY,allowPinchZoom:!0,children:y.jsx(lb,{asChild:!0,trapped:N.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:it(s,ue=>{var be;(be=N.trigger)==null||be.focus({preventScroll:!0}),ue.preventDefault()}),children:y.jsx(ab,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:y.jsx(Ae,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:ue=>ue.preventDefault(),...C,...xe,onPlaced:()=>Z(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:it(C.onKeyDown,ue=>{const be=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!be&&ue.key.length===1&&W(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let Ne=j().filter($e=>!$e.disabled).map($e=>$e.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const $e=ue.target,We=Ne.indexOf($e);Ne=Ne.slice(We+1)}setTimeout(()=>re(Ne)),ue.preventDefault()}})})})})})})});jD.displayName=yY;var wY="SelectItemAlignedPosition",FD=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=la(El,n),a=ca(El,n),[c,u]=x.useState(null),[h,p]=x.useState(null),m=ft(e,D=>p(D)),v=Kg(n),E=x.useRef(!1),S=x.useRef(!0),{viewport:T,selectedItem:I,selectedItemText:C,focusSelectedItem:N}=a,R=x.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&h&&T&&I&&C){const D=i.trigger.getBoundingClientRect(),P=h.getBoundingClientRect(),V=i.valueNode.getBoundingClientRect(),F=C.getBoundingClientRect();if(i.dir!=="rtl"){const $e=F.left-P.left,We=V.left-$e,Et=D.left-We,Ut=D.width+Et,Jn=Math.max(Ut,P.width),Zn=window.innerWidth-vs,bn=Gm(We,[vs,Math.max(vs,Zn-Jn)]);c.style.minWidth=Ut+"px",c.style.left=bn+"px"}else{const $e=P.right-F.right,We=window.innerWidth-V.right-$e,Et=window.innerWidth-D.right-We,Ut=D.width+Et,Jn=Math.max(Ut,P.width),Zn=window.innerWidth-vs,bn=Gm(We,[vs,Math.max(vs,Zn-Jn)]);c.style.minWidth=Ut+"px",c.style.right=bn+"px"}const U=v(),j=window.innerHeight-vs*2,M=T.scrollHeight,Z=window.getComputedStyle(h),oe=parseInt(Z.borderTopWidth,10),re=parseInt(Z.paddingTop,10),se=parseInt(Z.borderBottomWidth,10),$=parseInt(Z.paddingBottom,10),ie=oe+re+M+$+se,le=Math.min(I.offsetHeight*5,ie),W=window.getComputedStyle(T),X=parseInt(W.paddingTop,10),ae=parseInt(W.paddingBottom,10),ve=D.top+D.height/2-vs,Ae=j-ve,xe=I.offsetHeight/2,ue=I.offsetTop+xe,be=oe+re+ue,De=ie-be;if(be<=ve){const $e=U.length>0&&I===U[U.length-1].ref.current;c.style.bottom="0px";const We=h.clientHeight-T.offsetTop-T.offsetHeight,Et=Math.max(Ae,xe+($e?ae:0)+We+se),Ut=be+Et;c.style.height=Ut+"px"}else{const $e=U.length>0&&I===U[0].ref.current;c.style.top="0px";const Et=Math.max(ve,oe+T.offsetTop+($e?X:0)+xe)+De;c.style.height=Et+"px",T.scrollTop=be-ve+T.offsetTop}c.style.margin=`${vs}px 0`,c.style.minHeight=le+"px",c.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>E.current=!0)}},[v,i.trigger,i.valueNode,c,h,T,I,C,i.dir,r]);Un(()=>R(),[R]);const[L,z]=x.useState();Un(()=>{h&&z(window.getComputedStyle(h).zIndex)},[h]);const K=x.useCallback(D=>{D&&S.current===!0&&(R(),N==null||N(),S.current=!1)},[R,N]);return y.jsx(xY,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:E,onScrollButtonChange:K,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:L},children:y.jsx(nt.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});FD.displayName=wY;var _Y="SelectPopperPosition",$w=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=vs,...i}=t,a=Gg(n);return y.jsx(gG,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$w.displayName=_Y;var[xY,bb]=Pu(El,{}),Ww="SelectViewport",UD=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=ca(Ww,n),a=bb(Ww,n),c=ft(e,i.onViewportChange),u=x.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(qg.Slot,{scope:n,children:y.jsx(nt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:it(s.onScroll,h=>{const p=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=a;if(v!=null&&v.current&&m){const E=Math.abs(u.current-p.scrollTop);if(E>0){const S=window.innerHeight-vs*2,T=parseFloat(m.style.minHeight),I=parseFloat(m.style.height),C=Math.max(T,I);if(C<S){const N=C+E,R=Math.min(S,N),L=N-R;m.style.height=R+"px",m.style.bottom==="0px"&&(p.scrollTop=L>0?L:0,m.style.justifyContent="flex-end")}}}u.current=p.scrollTop})})})]})});UD.displayName=Ww;var BD="SelectGroup",[bY,EY]=Pu(BD),TY=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Uc();return y.jsx(bY,{scope:n,id:s,children:y.jsx(nt.div,{role:"group","aria-labelledby":s,...r,ref:e})})});TY.displayName=BD;var zD="SelectLabel",$D=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=EY(zD,n);return y.jsx(nt.div,{id:s.id,...r,ref:e})});$D.displayName=zD;var Zm="SelectItem",[SY,WD]=Pu(Zm),HD=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,c=la(Zm,n),u=ca(Zm,n),h=c.value===r,[p,m]=x.useState(i??""),[v,E]=x.useState(!1),S=ft(e,N=>{var R;return(R=u.itemRefCallback)==null?void 0:R.call(u,N,r,s)}),T=Uc(),I=x.useRef("touch"),C=()=>{s||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(SY,{scope:n,value:r,disabled:s,textId:T,isSelected:h,onItemTextChange:x.useCallback(N=>{m(R=>R||((N==null?void 0:N.textContent)??"").trim())},[]),children:y.jsx(qg.ItemSlot,{scope:n,value:r,disabled:s,textValue:p,children:y.jsx(nt.div,{role:"option","aria-labelledby":T,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:S,onFocus:it(a.onFocus,()=>E(!0)),onBlur:it(a.onBlur,()=>E(!1)),onClick:it(a.onClick,()=>{I.current!=="mouse"&&C()}),onPointerUp:it(a.onPointerUp,()=>{I.current==="mouse"&&C()}),onPointerDown:it(a.onPointerDown,N=>{I.current=N.pointerType}),onPointerMove:it(a.onPointerMove,N=>{var R;I.current=N.pointerType,s?(R=u.onItemLeave)==null||R.call(u):I.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:it(a.onPointerLeave,N=>{var R;N.currentTarget===document.activeElement&&((R=u.onItemLeave)==null||R.call(u))}),onKeyDown:it(a.onKeyDown,N=>{var L;((L=u.searchRef)==null?void 0:L.current)!==""&&N.key===" "||(uY.includes(N.key)&&C(),N.key===" "&&N.preventDefault())})})})})});HD.displayName=Zm;var Nd="SelectItemText",qD=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=la(Nd,n),c=ca(Nd,n),u=WD(Nd,n),h=pY(Nd,n),[p,m]=x.useState(null),v=ft(e,C=>m(C),u.onItemTextChange,C=>{var N;return(N=c.itemTextRefCallback)==null?void 0:N.call(c,C,u.value,u.disabled)}),E=p==null?void 0:p.textContent,S=x.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:E},u.value),[u.disabled,u.value,E]),{onNativeOptionAdd:T,onNativeOptionRemove:I}=h;return Un(()=>(T(S),()=>I(S)),[T,I,S]),y.jsxs(y.Fragment,{children:[y.jsx(nt.span,{id:u.textId,...i,ref:v}),u.isSelected&&a.valueNode&&!a.valueNodeHasChildren?kh.createPortal(i.children,a.valueNode):null]})});qD.displayName=Nd;var KD="SelectItemIndicator",GD=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return WD(KD,n).isSelected?y.jsx(nt.span,{"aria-hidden":!0,...r,ref:e}):null});GD.displayName=KD;var Hw="SelectScrollUpButton",YD=x.forwardRef((t,e)=>{const n=ca(Hw,t.__scopeSelect),r=bb(Hw,t.__scopeSelect),[s,i]=x.useState(!1),a=ft(e,r.onScrollButtonChange);return Un(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollTop>0;i(h)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?y.jsx(XD,{...t,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});YD.displayName=Hw;var qw="SelectScrollDownButton",QD=x.forwardRef((t,e)=>{const n=ca(qw,t.__scopeSelect),r=bb(qw,t.__scopeSelect),[s,i]=x.useState(!1),a=ft(e,r.onScrollButtonChange);return Un(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=u.scrollHeight-u.clientHeight,p=Math.ceil(u.scrollTop)<h;i(p)};const u=n.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),s?y.jsx(XD,{...t,ref:a,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=n;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});QD.displayName=qw;var XD=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=ca("SelectScrollButton",n),a=x.useRef(null),c=Kg(n),u=x.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return x.useEffect(()=>()=>u(),[u]),Un(()=>{var p;const h=c().find(m=>m.ref.current===document.activeElement);(p=h==null?void 0:h.ref.current)==null||p.scrollIntoView({block:"nearest"})},[c]),y.jsx(nt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:it(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:it(s.onPointerMove,()=>{var h;(h=i.onItemLeave)==null||h.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:it(s.onPointerLeave,()=>{u()})})}),IY="SelectSeparator",JD=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return y.jsx(nt.div,{"aria-hidden":!0,...r,ref:e})});JD.displayName=IY;var Kw="SelectArrow",kY=x.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Gg(n),i=la(Kw,n),a=ca(Kw,n);return i.open&&a.position==="popper"?y.jsx(yG,{...s,...r,ref:e}):null});kY.displayName=Kw;var CY="SelectBubbleInput",ZD=x.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=x.useRef(null),i=ft(r,s),a=_b(e);return x.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==e&&p){const m=new Event("change",{bubbles:!0});p.call(c,e),c.dispatchEvent(m)}},[a,e]),y.jsx(nt.select,{...n,style:{...wD,...n.style},ref:i,defaultValue:e})});ZD.displayName=CY;function eM(t){return t===""||t===void 0}function tM(t){const e=_l(t),n=x.useRef(""),r=x.useRef(0),s=x.useCallback(a=>{const c=n.current+a;e(c),function u(h){n.current=h,window.clearTimeout(r.current),h!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),i=x.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function nM(t,e,n){const s=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=PY(t,Math.max(i,0));s.length===1&&(a=a.filter(h=>h!==n));const u=a.find(h=>h.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function PY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var AY=PD,rM=RD,RY=DD,NY=MD,DY=OD,sM=VD,MY=UD,iM=$D,oM=HD,OY=qD,VY=GD,aM=YD,lM=QD,cM=JD;const Bk=AY,zk=RY,Gw=x.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(rM,{ref:r,className:ot("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,y.jsx(NY,{asChild:!0,children:y.jsx(u_,{className:"h-4 w-4 opacity-50"})})]}));Gw.displayName=rM.displayName;const uM=x.forwardRef(({className:t,...e},n)=>y.jsx(aM,{ref:n,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:y.jsx(xC,{className:"h-4 w-4"})}));uM.displayName=aM.displayName;const dM=x.forwardRef(({className:t,...e},n)=>y.jsx(lM,{ref:n,className:ot("flex cursor-default items-center justify-center py-1",t),...e,children:y.jsx(u_,{className:"h-4 w-4"})}));dM.displayName=lM.displayName;const Yw=x.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>y.jsx(DY,{children:y.jsxs(sM,{ref:s,className:ot("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[y.jsx(uM,{}),y.jsx(MY,{className:ot("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),y.jsx(dM,{})]})}));Yw.displayName=sM.displayName;const LY=x.forwardRef(({className:t,...e},n)=>y.jsx(iM,{ref:n,className:ot("px-2 py-1.5 text-sm font-semibold",t),...e}));LY.displayName=iM.displayName;const Dd=x.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(oM,{ref:r,className:ot("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[y.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:y.jsx(VY,{children:y.jsx(oj,{className:"h-4 w-4"})})}),y.jsx(OY,{children:e})]}));Dd.displayName=oM.displayName;const jY=x.forwardRef(({className:t,...e},n)=>y.jsx(cM,{ref:n,className:ot("-mx-1 my-1 h-px bg-muted",t),...e}));jY.displayName=cM.displayName;function FY(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const UY=t=>{switch(t){case"success":return $Y;case"info":return HY;case"warning":return WY;case"error":return qY;default:return null}},BY=Array(12).fill(0),zY=({visible:t,className:e})=>me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},me.createElement("div",{className:"sonner-spinner"},BY.map((n,r)=>me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),$Y=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),HY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),KY=me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),GY=()=>{const[t,e]=me.useState(document.hidden);return me.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Qw=1;class YY{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Qw++,a=this.toasts.find(u=>u.id===i),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...e,id:i,title:r}),{...u,...e,id:i,dismissible:c,title:r}):u):this.addToast({title:r,...s,dismissible:c,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let i=r!==void 0,a;const c=s.then(async h=>{if(a=["resolve",h],me.isValidElement(h))i=!1,this.create({id:r,type:"default",message:h});else if(XY(h)&&!h.ok){i=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,S=typeof m=="object"&&!me.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...S})}else if(h instanceof Error){i=!1;const m=typeof n.error=="function"?await n.error(h):n.error,v=typeof n.description=="function"?await n.description(h):n.description,S=typeof m=="object"&&!me.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...S})}else if(n.success!==void 0){i=!1;const m=typeof n.success=="function"?await n.success(h):n.success,v=typeof n.description=="function"?await n.description(h):n.description,S=typeof m=="object"&&!me.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:v,...S})}}).catch(async h=>{if(a=["reject",h],n.error!==void 0){i=!1;const p=typeof n.error=="function"?await n.error(h):n.error,m=typeof n.description=="function"?await n.description(h):n.description,E=typeof p=="object"&&!me.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...E})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((h,p)=>c.then(()=>a[0]==="reject"?p(a[1]):h(a[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||Qw++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const hr=new YY,QY=(t,e)=>{const n=(e==null?void 0:e.id)||Qw++;return hr.addToast({title:t,...e,id:n}),n},XY=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",JY=QY,ZY=()=>hr.toasts,eQ=()=>hr.getActiveToasts(),xt=Object.assign(JY,{success:hr.success,info:hr.info,warning:hr.warning,error:hr.error,custom:hr.custom,message:hr.message,promise:hr.promise,dismiss:hr.dismiss,loading:hr.loading},{getHistory:ZY,getToasts:eQ});FY("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jp(t){return t.label!==void 0}const tQ=3,nQ="24px",rQ="16px",$k=4e3,sQ=356,iQ=14,oQ=45,aQ=200;function Fs(...t){return t.filter(Boolean).join(" ")}function lQ(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const cQ=t=>{var e,n,r,s,i,a,c,u,h;const{invert:p,toast:m,unstyled:v,interacting:E,setHeights:S,visibleToasts:T,heights:I,index:C,toasts:N,expanded:R,removeToast:L,defaultRichColors:z,closeButton:K,style:D,cancelButtonStyle:P,actionButtonStyle:V,className:F="",descriptionClassName:U="",duration:j,position:M,gap:Z,expandByDefault:oe,classNames:re,icons:se,closeButtonAriaLabel:$="Close toast"}=t,[ie,le]=me.useState(null),[W,X]=me.useState(null),[ae,ve]=me.useState(!1),[Ae,xe]=me.useState(!1),[ue,be]=me.useState(!1),[De,Ne]=me.useState(!1),[$e,We]=me.useState(!1),[Et,Ut]=me.useState(0),[Jn,Zn]=me.useState(0),bn=me.useRef(m.duration||j||$k),hi=me.useRef(null),qt=me.useRef(null),es=C===0,ts=C+1<=T,ln=m.type,gr=m.dismissible!==!1,Qi=m.className||"",ua=m.descriptionClassName||"",Tt=me.useMemo(()=>I.findIndex(Oe=>Oe.toastId===m.id)||0,[I,m.id]),Kt=me.useMemo(()=>{var Oe;return(Oe=m.closeButton)!=null?Oe:K},[m.closeButton,K]),Vr=me.useMemo(()=>m.duration||j||$k,[m.duration,j]),fi=me.useRef(0),Bn=me.useRef(0),Cs=me.useRef(0),er=me.useRef(null),[da,ha]=M.split("-"),Xi=me.useMemo(()=>I.reduce((Oe,St,It)=>It>=Tt?Oe:Oe+St.height,0),[I,Tt]),Ji=GY(),fa=m.invert||p,ns=ln==="loading";Bn.current=me.useMemo(()=>Tt*Z+Xi,[Tt,Xi]),me.useEffect(()=>{bn.current=Vr},[Vr]),me.useEffect(()=>{ve(!0)},[]),me.useEffect(()=>{const Oe=qt.current;if(Oe){const St=Oe.getBoundingClientRect().height;return Zn(St),S(It=>[{toastId:m.id,height:St,position:m.position},...It]),()=>S(It=>It.filter(cn=>cn.toastId!==m.id))}},[S,m.id]),me.useLayoutEffect(()=>{if(!ae)return;const Oe=qt.current,St=Oe.style.height;Oe.style.height="auto";const It=Oe.getBoundingClientRect().height;Oe.style.height=St,Zn(It),S(cn=>cn.find(Dt=>Dt.toastId===m.id)?cn.map(Dt=>Dt.toastId===m.id?{...Dt,height:It}:Dt):[{toastId:m.id,height:It,position:m.position},...cn])},[ae,m.title,m.description,S,m.id,m.jsx,m.action,m.cancel]);const zn=me.useCallback(()=>{xe(!0),Ut(Bn.current),S(Oe=>Oe.filter(St=>St.toastId!==m.id)),setTimeout(()=>{L(m)},aQ)},[m,L,S,Bn]);me.useEffect(()=>{if(m.promise&&ln==="loading"||m.duration===1/0||m.type==="loading")return;let Oe;return R||E||Ji?(()=>{if(Cs.current<fi.current){const cn=new Date().getTime()-fi.current;bn.current=bn.current-cn}Cs.current=new Date().getTime()})():(()=>{bn.current!==1/0&&(fi.current=new Date().getTime(),Oe=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),zn()},bn.current))})(),()=>clearTimeout(Oe)},[R,E,m,ln,Ji,zn]),me.useEffect(()=>{m.delete&&(zn(),m.onDismiss==null||m.onDismiss.call(m,m))},[zn,m.delete]);function Zi(){var Oe;if(se!=null&&se.loading){var St;return me.createElement("div",{className:Fs(re==null?void 0:re.loader,m==null||(St=m.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":ln==="loading"},se.loading)}return me.createElement(zY,{className:Fs(re==null?void 0:re.loader,m==null||(Oe=m.classNames)==null?void 0:Oe.loader),visible:ln==="loading"})}const tr=m.icon||(se==null?void 0:se[ln])||UY(ln);var yr,pi;return me.createElement("li",{tabIndex:0,ref:qt,className:Fs(F,Qi,re==null?void 0:re.toast,m==null||(e=m.classNames)==null?void 0:e.toast,re==null?void 0:re.default,re==null?void 0:re[ln],m==null||(n=m.classNames)==null?void 0:n[ln]),"data-sonner-toast":"","data-rich-colors":(yr=m.richColors)!=null?yr:z,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":ae,"data-promise":!!m.promise,"data-swiped":$e,"data-removed":Ae,"data-visible":ts,"data-y-position":da,"data-x-position":ha,"data-index":C,"data-front":es,"data-swiping":ue,"data-dismissible":gr,"data-type":ln,"data-invert":fa,"data-swipe-out":De,"data-swipe-direction":W,"data-expanded":!!(R||oe&&ae),style:{"--index":C,"--toasts-before":C,"--z-index":N.length-C,"--offset":`${Ae?Et:Bn.current}px`,"--initial-height":oe?"auto":`${Jn}px`,...D,...m.style},onDragEnd:()=>{be(!1),le(null),er.current=null},onPointerDown:Oe=>{Oe.button!==2&&(ns||!gr||(hi.current=new Date,Ut(Bn.current),Oe.target.setPointerCapture(Oe.pointerId),Oe.target.tagName!=="BUTTON"&&(be(!0),er.current={x:Oe.clientX,y:Oe.clientY})))},onPointerUp:()=>{var Oe,St,It;if(De||!gr)return;er.current=null;const cn=Number(((Oe=qt.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),nr=Number(((St=qt.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Dt=new Date().getTime()-((It=hi.current)==null?void 0:It.getTime()),Ze=ie==="x"?cn:nr,rs=Math.abs(Ze)/Dt;if(Math.abs(Ze)>=oQ||rs>.11){Ut(Bn.current),m.onDismiss==null||m.onDismiss.call(m,m),X(ie==="x"?cn>0?"right":"left":nr>0?"down":"up"),zn(),Ne(!0);return}else{var Mt,un;(Mt=qt.current)==null||Mt.style.setProperty("--swipe-amount-x","0px"),(un=qt.current)==null||un.style.setProperty("--swipe-amount-y","0px")}We(!1),be(!1),le(null)},onPointerMove:Oe=>{var St,It,cn;if(!er.current||!gr||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;const Dt=Oe.clientY-er.current.y,Ze=Oe.clientX-er.current.x;var rs;const Mt=(rs=t.swipeDirections)!=null?rs:lQ(M);!ie&&(Math.abs(Ze)>1||Math.abs(Dt)>1)&&le(Math.abs(Ze)>Math.abs(Dt)?"x":"y");let un={x:0,y:0};const Ps=rr=>1/(1.5+Math.abs(rr)/20);if(ie==="y"){if(Mt.includes("top")||Mt.includes("bottom"))if(Mt.includes("top")&&Dt<0||Mt.includes("bottom")&&Dt>0)un.y=Dt;else{const rr=Dt*Ps(Dt);un.y=Math.abs(rr)<Math.abs(Dt)?rr:Dt}}else if(ie==="x"&&(Mt.includes("left")||Mt.includes("right")))if(Mt.includes("left")&&Ze<0||Mt.includes("right")&&Ze>0)un.x=Ze;else{const rr=Ze*Ps(Ze);un.x=Math.abs(rr)<Math.abs(Ze)?rr:Ze}(Math.abs(un.x)>0||Math.abs(un.y)>0)&&We(!0),(It=qt.current)==null||It.style.setProperty("--swipe-amount-x",`${un.x}px`),(cn=qt.current)==null||cn.style.setProperty("--swipe-amount-y",`${un.y}px`)}},Kt&&!m.jsx&&ln!=="loading"?me.createElement("button",{"aria-label":$,"data-disabled":ns,"data-close-button":!0,onClick:ns||!gr?()=>{}:()=>{zn(),m.onDismiss==null||m.onDismiss.call(m,m)},className:Fs(re==null?void 0:re.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(pi=se==null?void 0:se.close)!=null?pi:KY):null,(ln||m.icon||m.promise)&&m.icon!==null&&((se==null?void 0:se[ln])!==null||m.icon)?me.createElement("div",{"data-icon":"",className:Fs(re==null?void 0:re.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Zi():null,m.type!=="loading"?tr:null):null,me.createElement("div",{"data-content":"",className:Fs(re==null?void 0:re.content,m==null||(i=m.classNames)==null?void 0:i.content)},me.createElement("div",{"data-title":"",className:Fs(re==null?void 0:re.title,m==null||(a=m.classNames)==null?void 0:a.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?me.createElement("div",{"data-description":"",className:Fs(U,ua,re==null?void 0:re.description,m==null||(c=m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),me.isValidElement(m.cancel)?m.cancel:m.cancel&&jp(m.cancel)?me.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:Oe=>{jp(m.cancel)&&gr&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,Oe),zn())},className:Fs(re==null?void 0:re.cancelButton,m==null||(u=m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,me.isValidElement(m.action)?m.action:m.action&&jp(m.action)?me.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||V,onClick:Oe=>{jp(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,Oe),!Oe.defaultPrevented&&zn())},className:Fs(re==null?void 0:re.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function Wk(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function uQ(t,e){const n={};return[t,e].forEach((r,s)=>{const i=s===1,a=i?"--mobile-offset":"--offset",c=i?rQ:nQ;function u(h){["top","right","bottom","left"].forEach(p=>{n[`${a}-${p}`]=typeof h=="number"?`${h}px`:h})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(h=>{r[h]===void 0?n[`${a}-${h}`]=c:n[`${a}-${h}`]=typeof r[h]=="number"?`${r[h]}px`:r[h]}):u(c)}),n}const dQ=me.forwardRef(function(e,n){const{invert:r,position:s="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:c,className:u,offset:h,mobileOffset:p,theme:m="light",richColors:v,duration:E,style:S,visibleToasts:T=tQ,toastOptions:I,dir:C=Wk(),gap:N=iQ,icons:R,containerAriaLabel:L="Notifications"}=e,[z,K]=me.useState([]),D=me.useMemo(()=>Array.from(new Set([s].concat(z.filter(W=>W.position).map(W=>W.position)))),[z,s]),[P,V]=me.useState([]),[F,U]=me.useState(!1),[j,M]=me.useState(!1),[Z,oe]=me.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),re=me.useRef(null),se=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=me.useRef(null),ie=me.useRef(!1),le=me.useCallback(W=>{K(X=>{var ae;return(ae=X.find(ve=>ve.id===W.id))!=null&&ae.delete||hr.dismiss(W.id),X.filter(({id:ve})=>ve!==W.id)})},[]);return me.useEffect(()=>hr.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{K(X=>X.map(ae=>ae.id===W.id?{...ae,delete:!0}:ae))});return}setTimeout(()=>{wC.flushSync(()=>{K(X=>{const ae=X.findIndex(ve=>ve.id===W.id);return ae!==-1?[...X.slice(0,ae),{...X[ae],...W},...X.slice(ae+1)]:[W,...X]})})})}),[z]),me.useEffect(()=>{if(m!=="system"){oe(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:X})=>{oe(X?"dark":"light")})}catch{W.addListener(({matches:ae})=>{try{oe(ae?"dark":"light")}catch(ve){console.error(ve)}})}},[m]),me.useEffect(()=>{z.length<=1&&U(!1)},[z]),me.useEffect(()=>{const W=X=>{var ae;if(i.every(xe=>X[xe]||X.code===xe)){var Ae;U(!0),(Ae=re.current)==null||Ae.focus()}X.code==="Escape"&&(document.activeElement===re.current||(ae=re.current)!=null&&ae.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[i]),me.useEffect(()=>{if(re.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,ie.current=!1)}},[re.current]),me.createElement("section",{ref:n,"aria-label":`${L} ${se}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((W,X)=>{var ae;const[ve,Ae]=W.split("-");return z.length?me.createElement("ol",{key:W,dir:C==="auto"?Wk():C,tabIndex:-1,ref:re,className:u,"data-sonner-toaster":!0,"data-sonner-theme":Z,"data-y-position":ve,"data-x-position":Ae,style:{"--front-toast-height":`${((ae=P[0])==null?void 0:ae.height)||0}px`,"--width":`${sQ}px`,"--gap":`${N}px`,...S,...uQ(h,p)},onBlur:xe=>{ie.current&&!xe.currentTarget.contains(xe.relatedTarget)&&(ie.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,$.current=xe.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{j||U(!1)},onDragEnd:()=>U(!1),onPointerDown:xe=>{xe.target instanceof HTMLElement&&xe.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},z.filter(xe=>!xe.position&&X===0||xe.position===W).map((xe,ue)=>{var be,De;return me.createElement(cQ,{key:xe.id,icons:R,index:ue,toast:xe,defaultRichColors:v,duration:(be=I==null?void 0:I.duration)!=null?be:E,className:I==null?void 0:I.className,descriptionClassName:I==null?void 0:I.descriptionClassName,invert:r,visibleToasts:T,closeButton:(De=I==null?void 0:I.closeButton)!=null?De:c,interacting:j,position:W,style:I==null?void 0:I.style,unstyled:I==null?void 0:I.unstyled,classNames:I==null?void 0:I.classNames,cancelButtonStyle:I==null?void 0:I.cancelButtonStyle,actionButtonStyle:I==null?void 0:I.actionButtonStyle,closeButtonAriaLabel:I==null?void 0:I.closeButtonAriaLabel,removeToast:le,toasts:z.filter(Ne=>Ne.position==xe.position),heights:P.filter(Ne=>Ne.position==xe.position),setHeights:V,expandByDefault:a,gap:N,expanded:F,swipeDirections:e.swipeDirections})})):null}))});function hQ({event:t,sessionId:e,onClose:n}){const[r,s]=x.useState({rating_profile_setup:"",rating_interests_helpful:"",rating_social_usefulness:"",met_match_in_person:"",open_to_other_event_types:"",match_experience_feedback:"",general_feedback:""}),[i,a]=x.useState(!1),[c,u]=x.useState({}),h=(E,S)=>{s(T=>({...T,[E]:S})),c[E]&&u(T=>({...T,[E]:null}))},p=()=>{const E={};return r.rating_profile_setup||(E.rating_profile_setup="Please rate the profile setup experience."),r.rating_interests_helpful||(E.rating_interests_helpful="Please rate how helpful interests were."),r.rating_social_usefulness||(E.rating_social_usefulness="Please rate the social interaction experience."),r.met_match_in_person||(E.met_match_in_person="Please let us know if you met someone in person."),r.open_to_other_event_types||(E.open_to_other_event_types="Please let us know about future event interest."),r.match_experience_feedback.trim()||(E.match_experience_feedback="Please share what we could improve."),u(E),Object.keys(E).length===0},m=async E=>{if(E.preventDefault(),!p()){xt.error("Please complete all required fields.");return}a(!0);try{await nz.create({event_id:t.id,session_id:e,rating_profile_setup:parseInt(r.rating_profile_setup),rating_interests_helpful:parseInt(r.rating_interests_helpful),rating_social_usefulness:parseInt(r.rating_social_usefulness),met_match_in_person:r.met_match_in_person==="true",open_to_other_event_types:r.open_to_other_event_types==="true",match_experience_feedback:r.match_experience_feedback.trim(),general_feedback:r.general_feedback.trim()||null}),localStorage.setItem(`feedback_given_for_${t.id}`,"true"),xt.success("Thanks for your feedback 💘"),n()}catch(S){console.error("Error submitting feedback:",S),xt.error("Failed to submit feedback. Please try again.")}finally{a(!1)}},v=({value:E,onChange:S,error:T})=>y.jsxs("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(I=>y.jsx("button",{type:"button",onClick:()=>S(I.toString()),className:`p-1 transition-colors ${parseInt(E)>=I?"text-yellow-500 hover:text-yellow-600":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:y.jsx(Yj,{className:`w-6 h-6 ${parseInt(E)>=I?"fill-current":""}`})},I)),T&&y.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs ml-2 mt-1",children:T})]});return y.jsx(Kh,{children:y.jsx(oi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",children:y.jsxs(oi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:y.jsx(ol,{className:"w-6 h-6 text-white"})}),y.jsx("button",{onClick:n,className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:y.jsx(An,{className:"w-5 h-5"})})]}),y.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:["Enjoyed Hooked at ",t.name,"? 💘"]}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Help us make the next one even better — takes 1 minute!"})]}),y.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx(fr,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to set up your profile? *"}),y.jsx(v,{value:r.rating_profile_setup,onChange:E=>h("rating_profile_setup",E),error:c.rating_profile_setup})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How helpful were profile interests in choosing who to like? *"}),y.jsx(v,{value:r.rating_interests_helpful,onChange:E=>h("rating_interests_helpful",E),error:c.rating_interests_helpful})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to interact with others? *"}),y.jsx(v,{value:r.rating_social_usefulness,onChange:E=>h("rating_social_usefulness",E),error:c.rating_social_usefulness})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Did you meet up with a match? *"}),y.jsxs(Bk,{value:r.met_match_in_person,onValueChange:E=>h("met_match_in_person",E),children:[y.jsx(Gw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:y.jsx(zk,{placeholder:"Select an option"})}),y.jsxs(Yw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[y.jsx(Dd,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),y.jsx(Dd,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),c.met_match_in_person&&y.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:c.met_match_in_person})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Would you use Hooked at other event types? *"}),y.jsxs(Bk,{value:r.open_to_other_event_types,onValueChange:E=>h("open_to_other_event_types",E),children:[y.jsx(Gw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:y.jsx(zk,{placeholder:"Select an option"})}),y.jsxs(Yw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[y.jsx(Dd,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),y.jsx(Dd,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),c.open_to_other_event_types&&y.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:c.open_to_other_event_types})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"What would you improve? *"}),y.jsx(uu,{value:r.match_experience_feedback,onChange:E=>h("match_experience_feedback",E.target.value),placeholder:"Tell us what could make the experience better...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"}),c.match_experience_feedback&&y.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:c.match_experience_feedback})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Other feedback?"}),y.jsx(uu,{value:r.general_feedback,onChange:E=>h("general_feedback",E.target.value),placeholder:"Anything else you'd like to share...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"})]}),y.jsx(He,{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-3",children:i?y.jsxs("div",{className:"flex items-center justify-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Feedback"})]})]})})})}var fQ=(t,e,n,r,s,i,a,c)=>{let u=document.documentElement,h=["light","dark"];function p(E){(Array.isArray(t)?t:[t]).forEach(S=>{let T=S==="class",I=T&&i?s.map(C=>i[C]||C):s;T?(u.classList.remove(...I),u.classList.add(i&&i[E]?i[E]:E)):u.setAttribute(S,E)}),m(E)}function m(E){c&&h.includes(E)&&(u.style.colorScheme=E)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)p(r);else try{let E=localStorage.getItem(e)||n,S=a&&E==="system"?v():E;p(S)}catch{}},pQ=x.createContext(void 0),mQ={setTheme:t=>{},themes:[]},gQ=()=>{var t;return(t=x.useContext(pQ))!=null?t:mQ};x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,themes:c,nonce:u,scriptProps:h})=>{let p=JSON.stringify([n,e,i,t,c,a,r,s]).slice(1,-1);return x.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${fQ.toString()})(${p})`}})});const yQ=({...t})=>{const{theme:e="system"}=gQ();return y.jsx(dQ,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function vQ({children:t,currentPageName:e}){const n=qi(),r=ci(),[s,i]=x.useState(!!(localStorage.getItem("currentEventId")&&localStorage.getItem("currentSessionId"))),[a,c]=x.useState(!1),[u,h]=x.useState(!1),[p,m]=x.useState(!1),[v,E]=x.useState({name:"",profileId:""}),[S,T]=x.useState(new Set),[I,C]=x.useState(!1),[N,R]=x.useState({name:"",senderSessionId:""}),[L,z]=x.useState(new Set),[K,D]=x.useState(!1),[P,V]=x.useState(null),[F,U]=x.useState(null),j=x.useCallback(async()=>{try{const Z=localStorage.getItem("currentEventId")||localStorage.getItem("last_event_id"),oe=localStorage.getItem("currentSessionId")||localStorage.getItem("last_session_id");if(!Z||!oe||localStorage.getItem(`feedback_given_for_${Z}`))return;const se=await ou.filter({id:Z});if(se.length===0)return;const $=se[0],ie=new Date().toISOString();$.expires_at&&ie>$.expires_at&&(V($),U(oe),D(!0),localStorage.setItem("last_event_id",Z),localStorage.setItem("last_session_id",oe))}catch(Z){console.error("Error checking feedback eligibility:",Z)}},[]);x.useEffect(()=>{j()},[j]);const M=x.useCallback(async()=>{const Z=localStorage.getItem("currentEventId"),oe=localStorage.getItem("currentSessionId"),re=!!(Z&&oe);if(i(re),!re){c(!1),h(!1),m(!1),C(!1),T(new Set),z(new Set);return}try{const se=await Pr.filter({liker_session_id:oe,event_id:Z,is_mutual:!0}),$=await Pr.filter({liked_session_id:oe,event_id:Z,is_mutual:!0});let ie=!1,le=null;if([...se,...$].forEach(X=>{const ae=X.liker_session_id===oe;(ae&&!X.liker_notified_of_match||!ae&&!X.liked_notified_of_match)&&(ie=!0,!le&&!S.has(X.id)&&(le={...X,otherUserSessionId:ae?X.liked_session_id:X.liker_session_id,type:ae?"liker":"liked"}))}),c(ie),le&&!p){const X=await Ir.filter({session_id:le.otherUserSessionId,event_id:Z});if(X.length>0){E({name:X[0].first_name,profileId:X[0].id}),m(!0),T(ve=>new Set([...ve,le.id]));const ae={};le.type==="liker"?ae.liker_notified_of_match=!0:ae.liked_notified_of_match=!0,await Pr.update(le.id,ae)}}const W=await Pc.filter({receiver_session_id:oe,event_id:Z,is_read:!1});if(h(W.length>0),W.length>0&&!I){const X=W.sort((ae,ve)=>new Date(ve.created_date)-new Date(ae.created_date))[0];if(!L.has(X.id)){const ae=await Ir.filter({session_id:X.sender_session_id,event_id:Z});ae.length>0&&(R({name:ae[0].first_name,senderSessionId:X.sender_session_id}),C(!0),z(ve=>new Set([...ve,X.id])))}}}catch(se){console.error("Error checking notifications:",se)}},[S,p,L,I]);return x.useEffect(()=>{M();const Z=setInterval(M,45e3);return()=>clearInterval(Z)},[M]),x.useEffect(()=>{M()},[n.pathname,M]),y.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[y.jsx(yQ,{position:"bottom-center",expand:!1,visibleToasts:1,closeButton:!1,duration:3e3,toastOptions:{style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)",borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",fontWeight:"500",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}}}),y.jsx("style",{children:`
        :root {
          --primary: #1a1d29;
          --accent: #ff6b6b;
          --secondary: #4f46e5;
          --muted: #64748b;
          --background: #ffffff;
          --card: #ffffff;
          --toast-bg: #ffffff;
          --toast-color: #000000;
          --toast-border: rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
          :root {
            --background: #111827;
            --card: #1f2937;
            --primary: #ffffff;
            --muted: #94a3b8;
            --toast-bg: #1f2937;
            --toast-color: #ffffff;
            --toast-border: rgba(255, 255, 255, 0.15);
          }
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          background: var(--background);
          color: var(--primary);
        }

        .glass-effect {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @media (prefers-color-scheme: dark) {
          .glass-effect {
            background: rgba(31, 41, 55, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
          }
        }

        .gradient-text {
          background: linear-gradient(135deg, var(--accent) 0%, var(--secondary) 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Modal overlay improvements */
        [data-radix-popper-content-wrapper],
        [data-state="open"][data-side] {
          z-index: 50;
        }

        /* Dark mode modal backgrounds */
        @media (prefers-color-scheme: dark) {
          .modal-content {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
            color: #ffffff !important;
          }

          .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7) !important;
          }
        }

        .modal-content {
          background-color: #ffffff;
          border: 1px solid #e5e7eb;
          border-radius: 16px;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .modal-overlay {
          background-color: rgba(0, 0, 0, 0.4);
        }

        /* Enhanced Toaster Styles */
        [data-sonner-toast] {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
          border: 1px solid var(--toast-border) !important;
          border-radius: 0.5rem !important;
          padding: 1rem !important;
          font-size: 0.875rem !important;
          font-weight: 500 !important;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1) !important;
          backdrop-filter: none !important;
        }

        [data-sonner-toast]:not([data-styled]) {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
        }

        /* Toaster container */
        [data-sonner-toaster] {
          max-width: 90vw;
        }

        [data-sonner-toast] [data-content] {
          color: var(--toast-color) !important;
        }

        [data-sonner-toast] [data-title] {
          color: var(--toast-color) !important;
          font-weight: 600 !important;
        }

        [data-sonner-toast] [data-description] {
          color: var(--toast-color) !important;
          opacity: 0.8;
        }
      `}),y.jsx("main",{className:"relative",children:t}),y.jsxs(Kh,{children:[p&&y.jsx(Tq,{matchName:v.name,onDismiss:()=>{m(!1)},onSeeMatches:()=>{m(!1),r(mt("Matches"))}}),I&&y.jsx(Sq,{senderName:N.name,senderSessionId:N.senderSessionId,onDismiss:()=>C(!1),onView:()=>{C(!1)}}),K&&P&&F&&y.jsx(hQ,{event:P,sessionId:F,onClose:()=>D(!1)})]})]})}function wQ(t,e){return x.useReducer((n,r)=>e[n][r]??n,t)}var Yg=t=>{const{present:e,children:n}=t,r=_Q(e),s=typeof n=="function"?n({present:r.isPresent}):x.Children.only(n),i=ft(r.ref,xQ(s));return typeof n=="function"||r.isPresent?x.cloneElement(s,{ref:i}):null};Yg.displayName="Presence";function _Q(t){const[e,n]=x.useState(),r=x.useRef(null),s=x.useRef(t),i=x.useRef("none"),a=t?"mounted":"unmounted",[c,u]=wQ(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const h=Fp(r.current);i.current=c==="mounted"?h:"none"},[c]),Un(()=>{const h=r.current,p=s.current;if(p!==t){const v=i.current,E=Fp(h);t?u("MOUNT"):E==="none"||(h==null?void 0:h.display)==="none"?u("UNMOUNT"):u(p&&v!==E?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,u]),Un(()=>{if(e){let h;const p=e.ownerDocument.defaultView??window,m=E=>{const T=Fp(r.current).includes(E.animationName);if(E.target===e&&T&&(u("ANIMATION_END"),!s.current)){const I=e.style.animationFillMode;e.style.animationFillMode="forwards",h=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=I)})}},v=E=>{E.target===e&&(i.current=Fp(r.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{p.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(h=>{r.current=h?getComputedStyle(h):null,n(h)},[])}}function Fp(t){return(t==null?void 0:t.animationName)||"none"}function xQ(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Qg="Dialog",[hM,QJ]=Iu(Qg),[bQ,Is]=hM(Qg),fM=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,c=x.useRef(null),u=x.useRef(null),[h,p]=bh({prop:r,defaultProp:s??!1,onChange:i,caller:Qg});return y.jsx(bQ,{scope:e,triggerRef:c,contentRef:u,contentId:Uc(),titleId:Uc(),descriptionId:Uc(),open:h,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(m=>!m),[p]),modal:a,children:n})};fM.displayName=Qg;var pM="DialogTrigger",EQ=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(pM,n),i=ft(e,s.triggerRef);return y.jsx(nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Sb(s.open),...r,ref:i,onClick:it(t.onClick,s.onOpenToggle)})});EQ.displayName=pM;var Eb="DialogPortal",[TQ,mM]=hM(Eb,{forceMount:void 0}),gM=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Is(Eb,e);return y.jsx(TQ,{scope:e,forceMount:n,children:x.Children.map(r,a=>y.jsx(Yg,{present:n||i.open,children:y.jsx(wb,{asChild:!0,container:s,children:a})}))})};gM.displayName=Eb;var eg="DialogOverlay",yM=x.forwardRef((t,e)=>{const n=mM(eg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Is(eg,t.__scopeDialog);return i.modal?y.jsx(Yg,{present:r||i.open,children:y.jsx(IQ,{...s,ref:e})}):null});yM.displayName=eg;var SQ=au("DialogOverlay.RemoveScroll"),IQ=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(eg,n);return y.jsx(xb,{as:SQ,allowPinchZoom:!0,shards:[s.contentRef],children:y.jsx(nt.div,{"data-state":Sb(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Tl="DialogContent",vM=x.forwardRef((t,e)=>{const n=mM(Tl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Is(Tl,t.__scopeDialog);return y.jsx(Yg,{present:r||i.open,children:i.modal?y.jsx(kQ,{...s,ref:e}):y.jsx(CQ,{...s,ref:e})})});vM.displayName=Tl;var kQ=x.forwardRef((t,e)=>{const n=Is(Tl,t.__scopeDialog),r=x.useRef(null),s=ft(e,n.contentRef,r);return x.useEffect(()=>{const i=r.current;if(i)return xD(i)},[]),y.jsx(wM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,c=a.button===0&&a.ctrlKey===!0;(a.button===2||c)&&i.preventDefault()}),onFocusOutside:it(t.onFocusOutside,i=>i.preventDefault())})}),CQ=x.forwardRef((t,e)=>{const n=Is(Tl,t.__scopeDialog),r=x.useRef(!1),s=x.useRef(!1);return y.jsx(wM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,c;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(c=n.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var u,h;(u=t.onInteractOutside)==null||u.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((h=n.triggerRef.current)==null?void 0:h.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),wM=x.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,c=Is(Tl,n),u=x.useRef(null),h=ft(e,u);return Y2(),y.jsxs(y.Fragment,{children:[y.jsx(lb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:y.jsx(ab,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Sb(c.open),...a,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(PQ,{titleId:c.titleId}),y.jsx(RQ,{contentRef:u,descriptionId:c.descriptionId})]})]})}),Tb="DialogTitle",_M=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(Tb,n);return y.jsx(nt.h2,{id:s.titleId,...r,ref:e})});_M.displayName=Tb;var xM="DialogDescription",bM=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(xM,n);return y.jsx(nt.p,{id:s.descriptionId,...r,ref:e})});bM.displayName=xM;var EM="DialogClose",TM=x.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Is(EM,n);return y.jsx(nt.button,{type:"button",...r,ref:e,onClick:it(t.onClick,()=>s.onOpenChange(!1))})});TM.displayName=EM;function Sb(t){return t?"open":"closed"}var SM="DialogTitleWarning",[XJ,IM]=Aq(SM,{contentName:Tl,titleName:Tb,docsSlug:"dialog"}),PQ=({titleId:t})=>{const e=IM(SM),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},AQ="DialogDescriptionWarning",RQ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IM(AQ).contentName}}.`;return x.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},NQ=fM,DQ=gM,kM=yM,CM=vM,PM=_M,AM=bM,MQ=TM;const Qh=NQ,OQ=DQ,RM=x.forwardRef(({className:t,...e},n)=>y.jsx(kM,{ref:n,className:ot("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));RM.displayName=kM.displayName;const VQ=x.forwardRef(({className:t,children:e,...n},r)=>y.jsxs(OQ,{children:[y.jsx(RM,{}),y.jsxs(CM,{ref:r,className:ot("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,y.jsxs(MQ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[y.jsx(An,{className:"h-4 w-4"}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));VQ.displayName=CM.displayName;const Xh=({className:t,...e})=>y.jsx("div",{className:ot("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Xh.displayName="DialogHeader";const Jh=x.forwardRef(({className:t,...e},n)=>y.jsx(PM,{ref:n,className:ot("text-lg font-semibold leading-none tracking-tight",t),...e}));Jh.displayName=PM.displayName;const LQ=x.forwardRef(({className:t,...e},n)=>y.jsx(AM,{ref:n,className:ot("text-sm text-muted-foreground",t),...e}));LQ.displayName=AM.displayName;function jQ({onScan:t,onClose:e,onSwitchToManual:n}){const r=x.useRef(null),[s,i]=x.useState(!0),[a,c]=x.useState(null),[u,h]=x.useState(null),p=x.useRef(null),m=x.useCallback(()=>{p.current&&(clearInterval(p.current),p.current=null),u&&(u.getTracks().forEach(I=>I.stop()),h(null))},[u]),v=x.useCallback(async I=>{if(I)try{const C=new window.BarcodeDetector({formats:["qr_code"]});p.current=setInterval(async()=>{if(!I||I.readyState<2)return;const N=await C.detect(I);if(N.length>0){const R=N[0].rawValue;m(),xt.success("Event found — joining now…"),t(R)}},500)}catch{c("QR scanning not supported on this browser. Please enter the code manually.")}},[t,m]),E=x.useCallback(async()=>{if(!("BarcodeDetector"in window)){c("QR scanning not supported on this browser. Please enter the code manually."),i(!1);return}try{i(!0),c(null);const I=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});h(I),r.current&&(r.current.srcObject=I,await r.current.play(),v(r.current)),i(!1)}catch(I){I.name==="NotAllowedError"||I.name==="PermissionDeniedError"?c("Please allow camera access to scan codes."):c("Could not start camera. Try entering the code manually."),i(!1)}},[v]);x.useEffect(()=>(E(),()=>{m()}),[E,m]);const S=()=>{m(),e()},T=()=>{m(),n()};return y.jsx(Qh,{open:!0,onOpenChange:S,children:y.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:y.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[y.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent p-4",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("h3",{className:"text-white flex items-center gap-2 font-semibold",children:[y.jsx(mm,{className:"w-5 h-5"}),"Scan Event QR Code"]}),y.jsx(He,{variant:"ghost",size:"icon",onClick:S,className:"text-white hover:bg-white/20 rounded-full",children:y.jsx(An,{className:"w-5 h-5"})})]})}),y.jsxs("div",{className:"relative aspect-square bg-black",children:[s&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:y.jsxs("div",{className:"text-white text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),y.jsx("p",{className:"text-sm",children:"Starting camera..."})]})}),a&&y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center",children:[y.jsx(mm,{className:"w-12 h-12 mx-auto mb-4 text-white opacity-50"}),y.jsx("p",{className:"text-white text-sm mb-4",children:a}),y.jsx(He,{variant:"outline",onClick:T,className:"text-white border-white hover:bg-white hover:text-black",children:"Enter Code Manually"})]}),y.jsx("video",{ref:r,playsInline:!0,muted:!0,className:`w-full h-full object-cover transition-opacity duration-300 ${s||a?"opacity-0":"opacity-100"}`}),!a&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:y.jsxs("div",{className:"relative w-64 h-64",children:[y.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-pink-500 rounded-tl-2xl"}),y.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-pink-500 rounded-tr-2xl"}),y.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-pink-500 rounded-bl-2xl"}),y.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-pink-500 rounded-br-2xl"})]})})]}),y.jsx("div",{className:"bg-white dark:bg-gray-900 p-4 text-center",children:y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Position the QR code inside the frame."})})]})})})}function FQ({onSubmit:t,onClose:e}){const[n,r]=x.useState(""),[s,i]=x.useState(!1),a=async c=>{c.preventDefault(),n.trim()&&(i(!0),await t(n.trim().toUpperCase()),i(!1))};return y.jsx(Qh,{open:!0,onOpenChange:e,children:y.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:y.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl",children:[y.jsxs(Xh,{className:"text-center pb-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("div",{className:"flex-1"}),y.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center",children:y.jsx(EC,{className:"w-8 h-8 text-white"})}),y.jsx("div",{className:"flex-1 flex justify-end",children:y.jsx(He,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:y.jsx(An,{className:"w-5 h-5"})})})]}),y.jsx(Jh,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Enter Event Code"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Enter the code provided by the event organizer"})]}),y.jsxs("form",{onSubmit:a,className:"space-y-6",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx(Zo,{type:"text",placeholder:"e.g., WED2025",value:n,onChange:c=>r(c.target.value.toUpperCase()),className:"text-center text-lg font-mono tracking-wider border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 rounded-xl py-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",autoFocus:!0}),y.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Codes are usually 6-8 characters"})]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(He,{type:"button",variant:"outline",onClick:e,className:"flex-1 rounded-xl py-3 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Cancel"}),y.jsx(He,{type:"submit",disabled:!n.trim()||s,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl py-3",children:s?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):y.jsxs(y.Fragment,{children:["Join Event",y.jsx(c_,{className:"w-4 h-4 ml-2"})]})})]})]})]})})})}const NM=()=>{const[t,e]=x.useState(Ho.getOnlineStatus()),[n,r]=x.useState(Ip()),[s,i]=x.useState(!1);x.useEffect(()=>{const h=()=>{e(!0),i(!0)},p=()=>{e(!1)},m=()=>{setTimeout(()=>{r(Ip()),i(!1)},1e3)};return window.addEventListener("online",h),window.addEventListener("offline",p),window.addEventListener("appOnline",m),e(Ho.getOnlineStatus()),r(Ip()),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",p),window.removeEventListener("appOnline",m)}},[]);const a=x.useCallback(async(h,p={})=>{try{return await XR(h,p)}catch(m){const v=fw(m);throw{...m,userMessage:v}}},[]),c=x.useCallback((h,p={})=>{const m=ez(h,p);return r(Ip()),m},[]),u=x.useCallback(async()=>{const h=await Ho.checkConnectivity();return e(h),h},[]);return{isOnline:t,offlineQueueLength:n,isProcessingQueue:s,executeWithRetry:a,queueForOffline:c,checkConnectivity:u,getErrorMessage:fw}},UQ=()=>{const[t,e]=x.useState(!1),[n,r]=x.useState(null),{executeWithRetry:s,queueForOffline:i,isOnline:a}=NM(),c=x.useCallback(async(p,m={})=>{e(!0),r(null);try{return await s(p,m)}catch(v){throw r(v),v}finally{e(!1)}},[s]),u=x.useCallback(async(p,m={})=>{if(!a)return{queued:!0,actionId:i(p,m)};try{return{success:!0,result:await c(p)}}catch(v){if(v.message.includes("No internet connection")||v.code==="unavailable")return{queued:!0,actionId:i(p,m),error:v};throw v}},[a,c,i]),h=x.useCallback(()=>{r(null)},[]);return{isLoading:t,error:n,executeOperation:c,executeOperationWithOfflineFallback:u,clearError:h}},BQ=()=>{const{isOnline:t,offlineQueueLength:e,isProcessingQueue:n}=NM(),r=x.useCallback(()=>t?n?{type:"processing",message:"Processing offline actions...",icon:"🔄"}:e>0?{type:"queued",message:`${e} action${e>1?"s":""} queued for when you're back online.`,icon:"📝"}:{type:"online",message:"You're online",icon:"🌐"}:{type:"offline",message:"You're offline. Some features may be limited.",icon:"📴"},[t,e,n]);return{isOnline:t,offlineQueueLength:e,isProcessingQueue:n,statusMessage:r()}},zQ=({className:t=""})=>{const{statusMessage:e,isOnline:n,offlineQueueLength:r}=BQ();if(n&&r===0)return null;const i=(()=>{switch(e.type){case"offline":return{bgColor:"bg-red-500",textColor:"text-white",icon:y.jsx(i4,{className:"w-4 h-4"})};case"processing":return{bgColor:"bg-blue-500",textColor:"text-white",icon:y.jsx(d_,{className:"w-4 h-4 animate-spin"})};case"queued":return{bgColor:"bg-yellow-500",textColor:"text-white",icon:y.jsx(sg,{className:"w-4 h-4"})};default:return{bgColor:"bg-green-500",textColor:"text-white",icon:y.jsx(a4,{className:"w-4 h-4"})}}})();return y.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${t}`,children:y.jsxs("div",{className:`${i.bgColor} ${i.textColor} px-4 py-2 text-sm font-medium flex items-center justify-center gap-2`,children:[i.icon,y.jsx("span",{children:e.message})]})})},$Q=({error:t,onRetry:e,onDismiss:n,autoDismiss:r=!0,dismissDelay:s=5e3,className:i=""})=>{const[a,c]=x.useState(!0),[u,h]=x.useState(!1);me.useEffect(()=>{if(r&&s>0){const E=setTimeout(()=>{p()},s);return()=>clearTimeout(E)}},[r,s]);const p=()=>{c(!1),setTimeout(()=>{n==null||n()},300)},m=async()=>{if(e){h(!0);try{await e(),p()}catch(E){console.error("Retry failed:",E)}finally{h(!1)}}},v=fw(t);return a?y.jsx("div",{className:`fixed top-4 right-4 z-50 max-w-sm w-full ${i}`,children:y.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 animate-in slide-in-from-right-2",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx(sg,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Something went wrong"}),y.jsx("p",{className:"text-sm text-red-700 mb-3",children:v}),y.jsxs("div",{className:"flex items-center gap-2",children:[e&&y.jsxs("button",{onClick:m,disabled:u,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-700 bg-red-100 rounded-md hover:bg-red-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[y.jsx(Vj,{className:`w-3 h-3 ${u?"animate-spin":""}`}),u?"Retrying...":"Try Again"]}),y.jsx("button",{onClick:p,className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-red-600 hover:text-red-800 transition-colors",children:"Dismiss"})]})]}),y.jsx("button",{onClick:p,className:"text-red-400 hover:text-red-600 transition-colors flex-shrink-0",children:y.jsx(An,{className:"w-4 h-4"})})]})})}):null};function Xw(){const t=ci(),[e,n]=x.useState(null),[r,s]=x.useState(!1),[i,a]=x.useState(!0),[c,u]=x.useState(null),{executeOperationWithOfflineFallback:h}=UQ();x.useEffect(()=>{m()},[]);const p=async(C=10,N=500)=>{for(let R=0;R<C;R++){try{const L=await rz.me();if(L&&L.email)return L}catch{}await new Promise(L=>setTimeout(L,N))}return null},m=async()=>{try{const C=localStorage.getItem("currentEventId"),N=localStorage.getItem("currentSessionId");if(C&&N){const L=await h(async()=>await ou.filter({id:C}),{operation:"Check existing event session"});if(L.success&&L.result.length>0){const z=L.result[0],K=new Date().toISOString();if(z.starts_at&&z.expires_at&&K>=z.starts_at&&K<=z.expires_at){t(mt("Discovery"));return}}}const R=await p();if(R){const L=new Date().toISOString(),z=await h(async()=>await ou.list(),{operation:"Fetch active events"});if(z.success){const D=z.result.find(P=>P.starts_at&&P.expires_at&&L>=P.starts_at&&L<=P.expires_at);if(D){const P=R.email.toLowerCase(),V=await h(async()=>await Ir.list(),{operation:"Fetch user profiles"});if(V.success){const U=V.result.filter(j=>j.event_id===D.id&&j.email===P);if(U.length>0){const j=U[0];localStorage.setItem("currentEventId",D.id),localStorage.setItem("currentSessionId",j.session_id),localStorage.setItem("currentEventCode",D.event_code),localStorage.setItem("currentProfileId",j.id),localStorage.setItem("currentProfileColor",j.profile_color||"#cccccc"),j.profile_photo_url&&localStorage.setItem("currentProfilePhotoUrl",j.profile_photo_url),console.log(`Restored profile for ${R.email} in active event ${D.name}`),setTimeout(()=>{t(mt("Discovery"))},300);return}}}}}}catch(C){console.error("Error during profile recovery check:",C),u(C)}a(!1)},v=C=>{try{const R=new URL(C).searchParams.get("code");R?(T(),t(mt(`join?code=${R.toUpperCase()}`))):alert("Invalid QR code: No event code found in URL.")}catch{typeof C=="string"&&C.trim().length>3?(T(),t(mt(`join?code=${C.toUpperCase()}`))):alert("Invalid QR code format.")}},E=C=>{T(),t(mt(`join?code=${C.toUpperCase()}`))},S=C=>{n(C)},T=()=>{n(null)},I=()=>{n("manualCodeEntry")};return i?y.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center px-6 py-8 relative overflow-hidden bg-white dark:bg-gray-900",children:[y.jsx("div",{className:"absolute inset-0 z-0",style:{background:"linear-gradient(135deg, rgba(251, 167, 213, 0.8) 0%, rgba(193, 135, 253, 0.8) 100%)"}}),y.jsxs("div",{className:"relative z-10 text-center",children:[y.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:y.jsx(ol,{className:"w-10 h-10 text-white"})}),y.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent mb-4",children:"Hooked"}),y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),y.jsx("p",{className:"text-white text-sm",children:"Checking for your event profile..."})]})]}):y.jsxs("div",{className:"min-h-screen flex flex-col justify-between items-center px-6 py-8 relative overflow-hidden bg-white dark:bg-gray-900",children:[y.jsx(zQ,{}),c&&y.jsx($Q,{error:c,onRetry:()=>{u(null),a(!0),m()},onDismiss:()=>u(null)}),y.jsx("div",{className:"absolute inset-0 z-0",style:{background:"linear-gradient(135deg, rgba(251, 167, 213, 0.8) 0%, rgba(193, 135, 253, 0.8) 100%)"}}),y.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 w-full max-w-sm mx-auto",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:y.jsx(ol,{className:"w-10 h-10 text-white"})}),y.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("h2",{className:"text-2xl font-medium text-white mb-4",children:"Meet singles at this event."}),y.jsx("button",{onClick:()=>s(!0),className:"text-white underline text-lg hover:opacity-80 transition-opacity",children:"See how it works"})]}),y.jsxs("div",{className:"space-y-4 w-full",children:[y.jsxs(He,{onClick:()=>S("qrScanner"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[y.jsx(Mj,{className:"w-5 h-5 mr-3"}),"Scan QR Code"]}),y.jsxs(He,{onClick:()=>S("manualCodeEntry"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[y.jsx(EC,{className:"w-5 h-5 mr-3"}),"Enter Code Manually"]})]})]}),y.jsx("div",{className:"relative z-10 text-center",children:y.jsxs("p",{className:"text-white text-sm leading-relaxed",children:["By creating a temporary profile, you agree to our"," ",y.jsx("a",{href:"https://hooked-app.com/terms",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Terms"})," ","and"," ",y.jsx("a",{href:"https://hooked-app.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Privacy Policy"}),"."]})}),r&&y.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-sm w-full max-h-[70vh] overflow-y-auto relative",children:[y.jsx("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:y.jsx(An,{className:"w-5 h-5"})}),y.jsxs("div",{className:"pr-8",children:[y.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"How it works"}),y.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 space-y-3 text-sm leading-relaxed",children:[y.jsx("li",{children:"• Scan the event's unique QR code"}),y.jsx("li",{children:"• Create a temporary profile (first name only)"}),y.jsx("li",{children:"• Discover other singles at this event"}),y.jsx("li",{children:"• Match and chat privately"}),y.jsx("li",{children:"• Everything expires when the event ends"})]})]})]})}),e==="qrScanner"&&y.jsx(jQ,{onScan:v,onClose:T,onSwitchToManual:I}),e==="manualCodeEntry"&&y.jsx(FQ,{onSubmit:E,onClose:T})]})}const WQ={UploadFile:sz},DM=WQ.UploadFile,nn=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("rounded-xl border bg-card text-card-foreground shadow",t),...e}));nn.displayName="Card";const Us=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("flex flex-col space-y-1.5 p-6",t),...e}));Us.displayName="CardHeader";const ws=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("font-semibold leading-none tracking-tight",t),...e}));ws.displayName="CardTitle";const HQ=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("text-sm text-muted-foreground",t),...e}));HQ.displayName="CardDescription";const rn=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("p-6 pt-0",t),...e}));rn.displayName="CardContent";const qQ=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("flex items-center p-6 pt-0",t),...e}));qQ.displayName="CardFooter";function KQ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})}function MM(){const t=ci(),[e,n]=x.useState(null),[r,s]=x.useState("manual"),[i,a]=x.useState({first_name:"",age:"",gender_identity:"",interested_in:"",profile_photo_url:""}),[c,u]=x.useState(!1),[h,p]=x.useState(!1),m={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}};x.useEffect(()=>{(async()=>{const T=localStorage.getItem("currentEventId");if(!T){t(mt("Home"));return}try{const I=await ou.filter({id:T});I.length>0?n(I[0]):t(mt("Home"))}catch(I){console.error("Error fetching event details:",I),t(mt("Home"))}})()},[t]);const v=async S=>{const T=S.target.files[0];if(T){if(!T.type.startsWith("image/")){xt.error("Please select an image file.");return}if(T.size>10*1024*1024){xt.error("Image must be smaller than 10MB.");return}p(!0);try{const{file_url:I}=await DM({file:T});a(C=>({...C,profile_photo_url:I})),xt.success("Photo uploaded successfully!")}catch(I){console.error("Error uploading photo:",I),xt.error("Failed to upload photo. Please try again.")}finally{p(!1)}}},E=async S=>{if(S.preventDefault(),!i.first_name||!i.age||!i.gender_identity||!i.interested_in){xt.error("Please fill in all fields.");return}if(!i.profile_photo_url){xt.error("Please upload a profile photo.");return}u(!0),s("processing");try{const T=KQ(),I="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),C=`user_${T}@hooked-app.com`;await Ir.create({event_id:e.id,session_id:T,first_name:i.first_name,email:C,age:parseInt(i.age),gender_identity:i.gender_identity,interested_in:i.interested_in,profile_color:I,profile_photo_url:i.profile_photo_url,is_visible:!0}),localStorage.setItem("currentSessionId",T),localStorage.setItem("currentProfileColor",I),localStorage.setItem("currentProfilePhotoUrl",i.profile_photo_url),xt.success("Profile created! Welcome to the event."),t(mt("Discovery"))}catch(T){console.error("Error creating profile:",T),xt.error("Failed to create profile. Please try again."),s("manual")}finally{u(!1)}};return y.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center px-4 py-8",children:y.jsx("div",{className:"w-full max-w-md",children:y.jsxs(Kh,{mode:"wait",children:[r==="manual"&&y.jsx(oi.div,{...m,children:y.jsxs(nn,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:[y.jsxs(Us,{className:"text-center",children:[y.jsx(ws,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Your Event Profile For:"}),y.jsx(ws,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(e==null?void 0:e.name)||"This Event"})]}),y.jsx(rn,{children:y.jsxs("form",{onSubmit:E,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Profile Photo *"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsxs("div",{className:"relative",children:[y.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:v,className:"hidden",disabled:h}),y.jsx("label",{htmlFor:"profile-photo-upload",className:"w-32 h-32 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-purple-400 transition-colors bg-gray-50 dark:bg-gray-700",children:h?y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}):i.profile_photo_url?y.jsx("img",{src:i.profile_photo_url,alt:"Profile preview",className:"w-full h-full rounded-full object-cover"}):y.jsxs("div",{className:"text-center",children:[y.jsx(t4,{className:"w-8 h-8 text-gray-400 dark:text-gray-500 mx-auto mb-2"}),y.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload Photo"})]})})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Required • Max 10MB"})]})]}),y.jsx("div",{children:y.jsx(Zo,{type:"text",placeholder:"First Name *",value:i.first_name,onChange:S=>a(T=>({...T,first_name:S.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",required:!0})}),y.jsx("div",{children:y.jsx(Zo,{type:"number",placeholder:"Age *",value:i.age,onChange:S=>a(T=>({...T,age:S.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",min:"18",max:"99",required:!0})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I am a... *"}),y.jsx("div",{className:"grid grid-cols-2 gap-3",children:["man","woman"].map(S=>y.jsx("button",{type:"button",onClick:()=>a(T=>({...T,gender_identity:S})),className:`py-3 px-4 rounded-xl border-2 transition-all font-medium ${i.gender_identity===S?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I'm interested in... *"}),y.jsx("div",{className:"grid grid-cols-3 gap-3",children:["men","women","everyone"].map(S=>y.jsx("button",{type:"button",onClick:()=>a(T=>({...T,interested_in:S})),className:`py-3 px-2 rounded-xl border-2 transition-all font-medium text-sm ${i.interested_in===S?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]}),y.jsx(He,{type:"submit",disabled:c||h,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white py-3 rounded-xl",children:c?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating Profile..."]}):"Join Event"})]})})]})},"manual"),r==="processing"&&y.jsx(oi.div,{...m,children:y.jsx(nn,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:y.jsxs(rn,{className:"p-8 text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Creating Your Profile"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Setting up your temporary profile for this event."})]})})},"processing")]})})})}const GQ=Lg("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ri({className:t,variant:e,...n}){return y.jsx("div",{className:ot(GQ({variant:e}),t),...n})}var OM=["PageUp","PageDown"],VM=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],LM={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Au="Slider",[Jw,YQ,QQ]=H2(Au),[jM,JJ]=Iu(Au,[QQ]),[XQ,Xg]=jM(Au),FM=x.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:i=1,orientation:a="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[r],value:p,onValueChange:m=()=>{},onValueCommit:v=()=>{},inverted:E=!1,form:S,...T}=t,I=x.useRef(new Set),C=x.useRef(0),R=a==="horizontal"?JQ:ZQ,[L=[],z]=bh({prop:p,defaultProp:h,onChange:U=>{var M;(M=[...I.current][C.current])==null||M.focus(),m(U)}}),K=x.useRef(L);function D(U){const j=sX(L,U);F(U,j)}function P(U){F(U,C.current)}function V(){const U=K.current[C.current];L[C.current]!==U&&v(L)}function F(U,j,{commit:M}={commit:!1}){const Z=lX(i),oe=cX(Math.round((U-r)/i)*i+r,Z),re=Gm(oe,[r,s]);z((se=[])=>{const $=nX(se,re,j);if(aX($,u*i)){C.current=$.indexOf(re);const ie=String($)!==String(se);return ie&&M&&v($),ie?$:se}else return se})}return y.jsx(XQ,{scope:t.__scopeSlider,name:n,disabled:c,min:r,max:s,valueIndexToChangeRef:C,thumbs:I.current,values:L,orientation:a,form:S,children:y.jsx(Jw.Provider,{scope:t.__scopeSlider,children:y.jsx(Jw.Slot,{scope:t.__scopeSlider,children:y.jsx(R,{"aria-disabled":c,"data-disabled":c?"":void 0,...T,ref:e,onPointerDown:it(T.onPointerDown,()=>{c||(K.current=L)}),min:r,max:s,inverted:E,onSlideStart:c?void 0:D,onSlideMove:c?void 0:P,onSlideEnd:c?void 0:V,onHomeKeyDown:()=>!c&&F(r,0,{commit:!0}),onEndKeyDown:()=>!c&&F(s,L.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:j})=>{if(!c){const oe=OM.includes(U.key)||U.shiftKey&&VM.includes(U.key)?10:1,re=C.current,se=L[re],$=i*oe*j;F(se+$,re,{commit:!0})}}})})})})});FM.displayName=Au;var[UM,BM]=jM(Au,{startEdge:"left",endEdge:"right",size:"width",direction:1}),JQ=x.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:i,onSlideStart:a,onSlideMove:c,onSlideEnd:u,onStepKeyDown:h,...p}=t,[m,v]=x.useState(null),E=ft(e,R=>v(R)),S=x.useRef(void 0),T=q2(s),I=T==="ltr",C=I&&!i||!I&&i;function N(R){const L=S.current||m.getBoundingClientRect(),z=[0,L.width],D=Ib(z,C?[n,r]:[r,n]);return S.current=L,D(R-L.left)}return y.jsx(UM,{scope:t.__scopeSlider,startEdge:C?"left":"right",endEdge:C?"right":"left",direction:C?1:-1,size:"width",children:y.jsx(zM,{dir:T,"data-orientation":"horizontal",...p,ref:E,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:R=>{const L=N(R.clientX);a==null||a(L)},onSlideMove:R=>{const L=N(R.clientX);c==null||c(L)},onSlideEnd:()=>{S.current=void 0,u==null||u()},onStepKeyDown:R=>{const z=LM[C?"from-left":"from-right"].includes(R.key);h==null||h({event:R,direction:z?-1:1})}})})}),ZQ=x.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:i,onSlideMove:a,onSlideEnd:c,onStepKeyDown:u,...h}=t,p=x.useRef(null),m=ft(e,p),v=x.useRef(void 0),E=!s;function S(T){const I=v.current||p.current.getBoundingClientRect(),C=[0,I.height],R=Ib(C,E?[r,n]:[n,r]);return v.current=I,R(T-I.top)}return y.jsx(UM,{scope:t.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:y.jsx(zM,{"data-orientation":"vertical",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:T=>{const I=S(T.clientY);i==null||i(I)},onSlideMove:T=>{const I=S(T.clientY);a==null||a(I)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:T=>{const C=LM[E?"from-bottom":"from-top"].includes(T.key);u==null||u({event:T,direction:C?-1:1})}})})}),zM=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:a,onEndKeyDown:c,onStepKeyDown:u,...h}=t,p=Xg(Au,n);return y.jsx(nt.span,{...h,ref:e,onKeyDown:it(t.onKeyDown,m=>{m.key==="Home"?(a(m),m.preventDefault()):m.key==="End"?(c(m),m.preventDefault()):OM.concat(VM).includes(m.key)&&(u(m),m.preventDefault())}),onPointerDown:it(t.onPointerDown,m=>{const v=m.target;v.setPointerCapture(m.pointerId),m.preventDefault(),p.thumbs.has(v)?v.focus():r(m)}),onPointerMove:it(t.onPointerMove,m=>{m.target.hasPointerCapture(m.pointerId)&&s(m)}),onPointerUp:it(t.onPointerUp,m=>{const v=m.target;v.hasPointerCapture(m.pointerId)&&(v.releasePointerCapture(m.pointerId),i(m))})})}),$M="SliderTrack",WM=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Xg($M,n);return y.jsx(nt.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});WM.displayName=$M;var Zw="SliderRange",HM=x.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Xg(Zw,n),i=BM(Zw,n),a=x.useRef(null),c=ft(e,a),u=s.values.length,h=s.values.map(v=>GM(v,s.min,s.max)),p=u>1?Math.min(...h):0,m=100-Math.max(...h);return y.jsx(nt.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:c,style:{...t.style,[i.startEdge]:p+"%",[i.endEdge]:m+"%"}})});HM.displayName=Zw;var e_="SliderThumb",qM=x.forwardRef((t,e)=>{const n=YQ(t.__scopeSlider),[r,s]=x.useState(null),i=ft(e,c=>s(c)),a=x.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return y.jsx(eX,{...t,ref:i,index:a})}),eX=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...i}=t,a=Xg(e_,n),c=BM(e_,n),[u,h]=x.useState(null),p=ft(e,N=>h(N)),m=u?a.form||!!u.closest("form"):!0,v=gb(u),E=a.values[r],S=E===void 0?0:GM(E,a.min,a.max),T=rX(r,a.values.length),I=v==null?void 0:v[c.size],C=I?iX(I,S,c.direction):0;return x.useEffect(()=>{if(u)return a.thumbs.add(u),()=>{a.thumbs.delete(u)}},[u,a.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${S}% + ${C}px)`},children:[y.jsx(Jw.ItemSlot,{scope:t.__scopeSlider,children:y.jsx(nt.span,{role:"slider","aria-label":t["aria-label"]||T,"aria-valuemin":a.min,"aria-valuenow":E,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...i,ref:p,style:E===void 0?{display:"none"}:t.style,onFocus:it(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),m&&y.jsx(KM,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:E},r)]})});qM.displayName=e_;var tX="RadioBubbleInput",KM=x.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const s=x.useRef(null),i=ft(s,r),a=_b(e);return x.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==e&&p){const m=new Event("input",{bubbles:!0});p.call(c,e),c.dispatchEvent(m)}},[a,e]),y.jsx(nt.input,{style:{display:"none"},...n,ref:i,defaultValue:e})});KM.displayName=tX;function nX(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,i)=>s-i)}function GM(t,e,n){const i=100/(n-e)*(t-e);return Gm(i,[0,100])}function rX(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function sX(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function iX(t,e,n){const r=t/2,i=Ib([0,50],[0,r]);return(r-i(e)*n)*n}function oX(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function aX(t,e){if(e>0){const n=oX(t);return Math.min(...n)>=e}return!0}function Ib(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function lX(t){return(String(t).split(".")[1]||"").length}function cX(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var YM=FM,uX=WM,dX=HM,hX=qM;const t_=x.forwardRef(({className:t,...e},n)=>y.jsxs(YM,{ref:n,className:ot("relative flex w-full touch-none select-none items-center",t),...e,children:[y.jsx(uX,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:y.jsx(dX,{className:"absolute h-full bg-primary"})}),y.jsx(hX,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));t_.displayName=YM.displayName;const fX=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing"],Hk=["yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function pX({filters:t,onFiltersChange:e,onClose:n}){const[r,s]=x.useState(t),[i,a]=x.useState(!1),c=p=>{s(m=>({...m,interests:m.interests.includes(p)?m.interests.filter(v=>v!==p):[...m.interests,p]}))},u=()=>{e(r),n()},h=()=>{const p={age_min:18,age_max:99,gender:"all",interests:[]};s(p),e(p),n()};return y.jsxs(Qh,{open:!0,onOpenChange:n,children:[y.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:y.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[y.jsx(Xh,{className:"mb-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs(Jh,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[y.jsx(bC,{className:"w-5 h-5"}),"Filter Profiles"]}),y.jsx(He,{variant:"ghost",size:"icon",onClick:n,className:"rounded-full text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:y.jsx(An,{className:"w-4 h-4"})})]})}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx(fr,{className:"text-base font-medium mb-4 block text-gray-900 dark:text-white",children:"Age Range"}),y.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[y.jsxs("span",{className:"text-sm font-medium text-pink-600 dark:text-pink-400",children:["Min Age: ",r.age_min]}),y.jsxs("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:["Max Age: ",r.age_max]})]}),y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Drag the handles to set your preferred age range"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(fr,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Minimum Age"}),y.jsx("div",{className:"relative",children:y.jsx(t_,{value:[r.age_min],onValueChange:([p])=>s(m=>({...m,age_min:p<m.age_max?p:m.age_max-1})),min:18,max:99,step:1,className:"age-slider-min"})})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Maximum Age"}),y.jsx("div",{className:"relative",children:y.jsx(t_,{value:[r.age_max],onValueChange:([p])=>s(m=>({...m,age_max:p>m.age_min?p:m.age_min+1})),min:18,max:99,step:1,className:"age-slider-max"})})]})]})]}),y.jsxs("div",{children:[y.jsx(fr,{className:"text-base font-medium mb-3 block text-gray-900 dark:text-white",children:"Must Share These Interests"}),y.jsxs("div",{className:"flex flex-wrap gap-2",children:[fX.map(p=>y.jsx(ri,{variant:r.interests.includes(p)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(p)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>c(p),children:p},p)),!i&&r.interests.filter(p=>Hk.includes(p)).map(p=>y.jsx(ri,{variant:"default",className:"cursor-pointer px-3 py-2 rounded-full transition-all bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",onClick:()=>c(p),children:p},`selected-${p}`))]}),y.jsx("div",{className:"text-center mt-3",children:y.jsx(He,{type:"button",variant:"ghost",size:"icon",onClick:()=>a(!i),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","aria-label":i?"Show less interests":"Show more interests",children:i?y.jsx(xC,{className:"w-5 h-5"}):y.jsx(u_,{className:"w-5 h-5"})})}),y.jsx(Kh,{children:i&&y.jsx(oi.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:y.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:Hk.map(p=>y.jsx(ri,{variant:r.interests.includes(p)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(p)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>c(p),children:p},p))})})}),r.interests.length>0&&y.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Showing only people who share at least one selected interest."})]}),y.jsxs("div",{className:"flex gap-3 pt-4",children:[y.jsx(He,{onClick:h,variant:"outline",className:"flex-1 rounded-xl border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Reset All"}),y.jsx(He,{onClick:u,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl",children:"Apply Filters"})]})]})]})}),y.jsx("style",{jsx:!0,children:`
        .age-slider-min [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #f87171 0%, #f87171 100%);
          border-radius: 3px;
        }
        
        .age-slider-max [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #a855f7 0%, #a855f7 100%);
          border-radius: 3px;
        }
        
        .age-slider-min [role="slider"],
        .age-slider-max [role="slider"] {
          width: 20px;
          height: 20px;
          background: white;
          border: 3px solid;
          border-radius: 50%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          transition: all 0.2s ease;
        }
        
        .age-slider-min [role="slider"] {
          border-color: #f87171;
        }
        
        .age-slider-max [role="slider"] {
          border-color: #a855f7;
        }
        
        .age-slider-min [role="slider"]:hover,
        .age-slider-max [role="slider"]:hover {
          transform: scale(1.1);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .age-slider-min [role="slider"]:focus,
        .age-slider-max [role="slider"]:focus {
          outline: none;
          transform: scale(1.15);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
      `})]})}function QM({profile:t,onClose:e,onLike:n,isLiked:r}){if(x.useEffect(()=>{const v=E=>{E.key==="Escape"&&e()};return document.addEventListener("keydown",v),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",v),document.body.style.overflow="auto"}},[e]),!t)return null;const{profile_photo_url:s,profile_color:i,first_name:a,age:c,height:u,interests:h,bio:p}=t,m=a?a[0].toUpperCase():"?";return y.jsx(Kh,{children:y.jsx(oi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",onClick:e,children:y.jsxs(oi.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"relative w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",onClick:v=>v.stopPropagation(),children:[y.jsxs("div",{className:"relative",children:[s?y.jsxs(y.Fragment,{children:[y.jsx("img",{src:s,alt:`${a}'s profile photo`,className:"w-full h-80 object-cover",loading:"lazy",onError:v=>{v.target.style.display="none";const E=v.target.nextElementSibling;E&&(E.style.display="flex")}}),y.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl absolute inset-0",style:{backgroundColor:i||"#cccccc",display:"none"},children:m})]}):y.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl",style:{backgroundColor:i||"#cccccc"},children:m}),y.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors z-10","aria-label":"Close profile",children:y.jsx(An,{className:"w-6 h-6"})})]}),y.jsxs("div",{className:"p-6 space-y-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:a}),y.jsxs("div",{className:"flex items-center gap-4 text-gray-600 dark:text-gray-400",children:[c&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(rj,{className:"w-4 h-4"}),y.jsxs("span",{children:[c," years old"]})]}),u&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(jj,{className:"w-4 h-4"}),y.jsxs("span",{children:[u," cm"]})]})]})]}),p&&y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"About"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:p})]}),h&&h.length>0&&y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Interests"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(v=>y.jsx(ri,{variant:"outline",className:"rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:v},v))})]}),y.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:y.jsxs(He,{onClick:n,disabled:r,className:`w-full rounded-xl py-3 transition-all ${r?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white"}`,children:[y.jsx(ol,{className:`w-5 h-5 mr-2 ${r?"":"hover:fill-current"}`}),r?"Already Liked":`Like ${a}`]})})]})]})})})}function XM(){const t=ci(),[e,n]=x.useState([]),[r,s]=x.useState(null),[i,a]=x.useState([]),[c,u]=x.useState(null),[h,p]=x.useState(null),[m,v]=x.useState({age_min:18,age_max:99,gender:"all",interests:[]}),[E,S]=x.useState(!1),[T,I]=x.useState(!0),[C,N]=x.useState(new Set),[R,L]=x.useState(null),[z,K]=x.useState(!0),D=x.useRef({profiles:null,likes:null});x.useEffect(()=>(F(),()=>{P()}),[]),x.useEffect(()=>{r&&e.length>=0&&U()},[e,m,r]),x.useEffect(()=>{const Z=()=>{K(!document.hidden)};return K(!document.hidden),document.addEventListener("visibilitychange",Z),()=>document.removeEventListener("visibilitychange",Z)},[]),x.useEffect(()=>{if(!(c!=null&&c.id)||!h){P();return}V()},[c==null?void 0:c.id,h]);const P=()=>{Object.values(D.current).forEach(Z=>{Z&&Z()}),D.current={profiles:null,likes:null},console.log("🧹 All Discovery listeners cleaned up")},V=()=>{P();try{D.current.profiles=Ir.onProfilesChange(c.id,Z=>{const oe=Z.filter($=>$.is_visible),re=oe.find($=>$.session_id===h),se=oe.filter($=>$.session_id!==h);s(re),n(se),re||(console.warn("Current user profile not found for session, redirecting."),t(mt("Home")))},{is_visible:!0}),D.current.likes=Pr.onLikesChange(c.id,h,Z=>{N(new Set(Z.map(oe=>oe.liked_session_id)))}),console.log("📡 Real-time listeners setup complete")}catch(Z){console.error("❌ Error setting up real-time listeners:",Z)}},F=async()=>{const Z=localStorage.getItem("currentEventId"),oe=localStorage.getItem("currentSessionId");if(!Z||!oe){t(mt("Home"));return}p(oe);try{const re=await ou.filter({id:Z});if(re.length>0)u(re[0]);else{t(mt("Home"));return}}catch(re){console.error("Error initializing session:",re)}I(!1)},U=()=>{if(!r){a([]);return}let Z=e.filter(oe=>{var $;const re=r.interested_in==="everyone"||r.interested_in==="men"&&oe.gender_identity==="man"||r.interested_in==="women"&&oe.gender_identity==="woman"||r.interested_in==="non-binary"&&oe.gender_identity==="non-binary",se=oe.interested_in==="everyone"||oe.interested_in==="men"&&r.gender_identity==="man"||oe.interested_in==="women"&&r.gender_identity==="woman"||oe.interested_in==="non-binary"&&r.gender_identity==="non-binary";return!(!re||!se||!(oe.age>=m.age_min&&oe.age<=m.age_max)||m.gender!=="all"&&oe.gender_identity!==m.gender||m.interests.length>0&&!(($=oe.interests)!=null&&$.some(ie=>m.interests.includes(ie))))});a(Z)},j=async Z=>{if(C.has(Z.session_id)||!r)return;const oe=localStorage.getItem("currentEventId"),re=r.session_id;try{N(ie=>new Set([...ie,Z.session_id]));const se=await Pr.create({event_id:oe,liker_session_id:re,liked_session_id:Z.session_id,is_mutual:!1,liker_notified_of_match:!1,liked_notified_of_match:!1}),$=await Pr.filter({event_id:oe,liker_session_id:Z.session_id,liked_session_id:re});if($.length>0){const ie=$[0];await Pr.update(se.id,{is_mutual:!0,liker_notified_of_match:!0}),await Pr.update(ie.id,{is_mutual:!0,liked_notified_of_match:!0}),alert(`🎉 It's a Match! You and ${Z.first_name} liked each other.`),t(mt("Matches"))}}catch(se){console.error("Error liking profile:",se),N($=>{const ie=new Set($);return ie.delete(Z.session_id),ie})}},M=Z=>{L(Z)};return x.useEffect(()=>{const Z=setInterval(()=>{},3e4);return()=>clearInterval(Z)},[]),T?y.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading singles at this event..."})]})}):y.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[y.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:y.jsx(ol,{className:"w-3 h-3 text-white"})}),y.jsx("span",{className:"font-semibold text-lg bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),y.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Singles at ",c==null?void 0:c.name]}),y.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[i.length," people discovered"]})]}),y.jsx(He,{onClick:()=>S(!0),variant:"outline",size:"icon",className:"rounded-full border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:y.jsx(bC,{className:"w-5 h-5"})})]}),y.jsx("div",{className:"grid grid-cols-3 gap-3",children:i.map(Z=>y.jsx("div",{className:"relative",children:y.jsx(nn,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer overflow-hidden bg-white dark:bg-gray-800",onClick:()=>M(Z),children:y.jsx(rn,{className:"p-0",children:y.jsxs("div",{className:"relative aspect-square",children:[Z.profile_photo_url?y.jsx("img",{src:Z.profile_photo_url,alt:`${Z.first_name}'s profile`,className:"w-full h-full object-cover",loading:"lazy",onError:oe=>{oe.target.style.display="none";const re=oe.target.nextElementSibling;re&&(re.style.display="flex")}}):null,y.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-semibold text-lg absolute inset-0",style:{backgroundColor:Z.profile_color||"#cccccc",display:Z.profile_photo_url?"none":"flex"},children:Z.first_name[0]}),y.jsx("button",{onClick:oe=>{oe.stopPropagation(),j(Z)},disabled:C.has(Z.session_id),className:`absolute top-2 right-2 p-2 rounded-full shadow-lg transition-all ${C.has(Z.session_id)?"bg-white/90 dark:bg-gray-800/90 text-pink-500 cursor-not-allowed":"bg-white/90 dark:bg-gray-800/90 text-gray-400 dark:text-gray-500 hover:bg-pink-50 dark:hover:bg-pink-900/20 hover:text-pink-500 hover:scale-110"}`,children:y.jsx(ol,{className:`w-4 h-4 ${C.has(Z.session_id)?"fill-current text-pink-500":"text-gray-400 dark:text-gray-500 hover:text-pink-500"}`})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:y.jsx("h3",{className:"font-semibold text-white text-sm truncate",children:Z.first_name})})]})})})},Z.id))}),i.length===0&&!T&&y.jsx(nn,{className:"border-0 shadow-lg mt-8 bg-white dark:bg-gray-800",children:y.jsxs(rn,{className:"p-8 text-center",children:[y.jsx(Wc,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),y.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"No singles found"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"Try adjusting your filters or check back later as more people join the event."}),y.jsx(He,{onClick:()=>S(!0),variant:"outline",className:"rounded-xl border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:"Adjust Filters"})]})}),E&&y.jsx(pX,{filters:m,onFiltersChange:v,onClose:()=>S(!1)}),R&&y.jsx(QM,{profile:R,onClose:()=>L(null),onLike:()=>{j(R),L(null)},isLiked:C.has(R.session_id)})]}),y.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:y.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:y.jsxs("div",{className:"flex justify-around",children:[y.jsxs("button",{onClick:()=>t(mt("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[y.jsx(pu,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs",children:"Profile"})]}),y.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[y.jsx(Wc,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs font-medium",children:"Discover"})]}),y.jsxs("button",{onClick:()=>t(mt("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[y.jsx($c,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs",children:"Matches"})]})]})})})]})}function ks(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Sl(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const JM=6048e5,mX=864e5;let gX={};function Jg(){return gX}function Eh(t,e){var c,u,h,p;const n=Jg(),r=(e==null?void 0:e.weekStartsOn)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.weekStartsOn)??0,s=ks(t),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function tg(t){return Eh(t,{weekStartsOn:1})}function ZM(t){const e=ks(t),n=e.getFullYear(),r=Sl(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=tg(r),i=Sl(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const a=tg(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function qk(t){const e=ks(t);return e.setHours(0,0,0,0),e}function Kk(t){const e=ks(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function yX(t,e){const n=qk(t),r=qk(e),s=+n-Kk(n),i=+r-Kk(r);return Math.round((s-i)/mX)}function vX(t){const e=ZM(t),n=Sl(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),tg(n)}function wX(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _X(t){if(!wX(t)&&typeof t!="number")return!1;const e=ks(t);return!isNaN(Number(e))}function xX(t){const e=ks(t),n=Sl(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const bX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},EX=(t,e,n)=>{let r;const s=bX[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function S0(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const TX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},IX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kX={date:S0({formats:TX,defaultWidth:"full"}),time:S0({formats:SX,defaultWidth:"full"}),dateTime:S0({formats:IX,defaultWidth:"full"})},CX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},PX=(t,e,n,r)=>CX[t];function bd(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,c=n!=null&&n.width?String(n.width):a;s=t.formattingValues[c]||t.formattingValues[a]}else{const a=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[c]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const AX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},RX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},NX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},MX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},OX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VX=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},LX={ordinalNumber:VX,era:bd({values:AX,defaultWidth:"wide"}),quarter:bd({values:RX,defaultWidth:"wide",argumentCallback:t=>t-1}),month:bd({values:NX,defaultWidth:"wide"}),day:bd({values:DX,defaultWidth:"wide"}),dayPeriod:bd({values:MX,defaultWidth:"wide",formattingValues:OX,defaultFormattingWidth:"wide"})};function Ed(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?FX(c,m=>m.test(a)):jX(c,m=>m.test(a));let h;h=t.valueCallback?t.valueCallback(u):u,h=n.valueCallback?n.valueCallback(h):h;const p=e.slice(a.length);return{value:h,rest:p}}}function jX(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function FX(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function UX(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;const c=e.slice(s.length);return{value:a,rest:c}}}const BX=/^(\d+)(th|st|nd|rd)?/i,zX=/\d+/i,$X={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},WX={any:[/^b/i,/^(a|c)/i]},HX={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qX={any:[/1/i,/2/i,/3/i,/4/i]},KX={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},GX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YX={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},QX={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XX={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},JX={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZX={ordinalNumber:UX({matchPattern:BX,parsePattern:zX,valueCallback:t=>parseInt(t,10)}),era:Ed({matchPatterns:$X,defaultMatchWidth:"wide",parsePatterns:WX,defaultParseWidth:"any"}),quarter:Ed({matchPatterns:HX,defaultMatchWidth:"wide",parsePatterns:qX,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ed({matchPatterns:KX,defaultMatchWidth:"wide",parsePatterns:GX,defaultParseWidth:"any"}),day:Ed({matchPatterns:YX,defaultMatchWidth:"wide",parsePatterns:QX,defaultParseWidth:"any"}),dayPeriod:Ed({matchPatterns:XX,defaultMatchWidth:"any",parsePatterns:JX,defaultParseWidth:"any"})},eJ={code:"en-US",formatDistance:EX,formatLong:kX,formatRelative:PX,localize:LX,match:ZX,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tJ(t){const e=ks(t);return yX(e,xX(e))+1}function nJ(t){const e=ks(t),n=+tg(e)-+vX(e);return Math.round(n/JM)+1}function eO(t,e){var p,m,v,E;const n=ks(t),r=n.getFullYear(),s=Jg(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(p=e==null?void 0:e.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((E=(v=s.locale)==null?void 0:v.options)==null?void 0:E.firstWeekContainsDate)??1,a=Sl(t,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const c=Eh(a,e),u=Sl(t,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const h=Eh(u,e);return n.getTime()>=c.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function rJ(t,e){var c,u,h,p;const n=Jg(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=eO(t,e),i=Sl(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Eh(i,e)}function sJ(t,e){const n=ks(t),r=+Eh(n,e)-+rJ(n,e);return Math.round(r/JM)+1}function ct(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Po={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ct(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ct(n+1,2)},d(t,e){return ct(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ct(t.getHours()%12||12,e.length)},H(t,e){return ct(t.getHours(),e.length)},m(t,e){return ct(t.getMinutes(),e.length)},s(t,e){return ct(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ct(s,e.length)}},bc={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Gk={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Po.y(t,e)},Y:function(t,e,n,r){const s=eO(t,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return ct(a,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ct(i,e.length)},R:function(t,e){const n=ZM(t);return ct(n,e.length)},u:function(t,e){const n=t.getFullYear();return ct(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ct(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ct(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Po.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ct(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=sJ(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ct(s,e.length)},I:function(t,e,n){const r=nJ(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ct(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Po.d(t,e)},D:function(t,e,n){const r=tJ(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ct(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ct(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ct(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ct(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=bc.noon:r===0?s=bc.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=bc.evening:r>=12?s=bc.afternoon:r>=4?s=bc.morning:s=bc.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Po.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Po.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ct(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ct(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Po.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Po.s(t,e)},S:function(t,e){return Po.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Qk(r);case"XXXX":case"XX":return Wa(r);case"XXXXX":case"XXX":default:return Wa(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Qk(r);case"xxxx":case"xx":return Wa(r);case"xxxxx":case"xxx":default:return Wa(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Yk(r,":");case"OOOO":default:return"GMT"+Wa(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Yk(r,":");case"zzzz":default:return"GMT"+Wa(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return ct(r,e.length)},T:function(t,e,n){const r=t.getTime();return ct(r,e.length)}};function Yk(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ct(i,2)}function Qk(t,e){return t%60===0?(t>0?"-":"+")+ct(Math.abs(t)/60,2):Wa(t,e)}function Wa(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ct(Math.trunc(r/60),2),i=ct(r%60,2);return n+s+e+i}const Xk=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},tO=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},iJ=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Xk(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Xk(r,e)).replace("{{time}}",tO(s,e))},oJ={p:tO,P:iJ},aJ=/^D+$/,lJ=/^Y+$/,cJ=["D","DD","YY","YYYY"];function uJ(t){return aJ.test(t)}function dJ(t){return lJ.test(t)}function hJ(t,e,n){const r=fJ(t,e,n);if(console.warn(r),cJ.includes(t))throw new RangeError(r)}function fJ(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gJ=/^'([^]*?)'?$/,yJ=/''/g,vJ=/[a-zA-Z]/;function wJ(t,e,n){var p,m,v,E;const r=Jg(),s=r.locale??eJ,i=r.firstWeekContainsDate??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=r.weekStartsOn??((E=(v=r.locale)==null?void 0:v.options)==null?void 0:E.weekStartsOn)??0,c=ks(t);if(!_X(c))throw new RangeError("Invalid time value");let u=e.match(mJ).map(S=>{const T=S[0];if(T==="p"||T==="P"){const I=oJ[T];return I(S,s.formatLong)}return S}).join("").match(pJ).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const T=S[0];if(T==="'")return{isToken:!1,value:_J(S)};if(Gk[T])return{isToken:!0,value:S};if(T.match(vJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(u=s.localize.preprocessor(c,u));const h={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return u.map(S=>{if(!S.isToken)return S.value;const T=S.value;(dJ(T)||uJ(T))&&hJ(T,e,String(t));const I=Gk[T[0]];return I(c,T,s.localize,h)}).join("")}function _J(t){const e=t.match(gJ);return e?e[1].replace(yJ,"'"):t}function xJ({matchName:t,onConfirm:e,onCancel:n,isSharing:r}){const[s,i]=x.useState({fullName:"",phoneNumber:""}),[a,c]=x.useState("confirm"),[u,h]=x.useState(!1),p=async()=>{var E,S,T,I;if(h(!0),navigator.contacts)try{const C=await navigator.contacts.select(["name","tel"]);if(C&&C.length>0){const N=C[0],R=((S=(E=N.name)==null?void 0:E[0])==null?void 0:S.formatted)||"",L=((I=(T=N.tel)==null?void 0:T[0])==null?void 0:I.value)||"";if(R&&L){i({fullName:R,phoneNumber:L}),v({fullName:R,phoneNumber:L}),h(!1);return}}}catch{console.log("Contact access not available or denied, falling back to manual entry")}c("enter"),h(!1)},m=()=>{!s.fullName.trim()||!s.phoneNumber.trim()||v(s)},v=async E=>{h(!0);try{await e(E),c("success"),setTimeout(()=>{n()},2e3)}catch(S){console.error("Error sharing contact info:",S),alert("Failed to share contact info. Please try again.")}h(!1)};return y.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:y.jsxs(oi.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl relative",children:[y.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:y.jsx(An,{className:"w-5 h-5"})}),a==="confirm"&&y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(gm,{className:"w-8 h-8 text-white"})}),y.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Share Contact Info?"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:["This will share your name and phone number with ",y.jsx("span",{className:"font-medium",children:t}),". This action cannot be undone."]}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx(He,{onClick:n,variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:u,children:"Not Yet"}),y.jsx(He,{onClick:p,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:u,children:u?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Share"})]})]}),a==="enter"&&y.jsxs("div",{children:[y.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(pu,{className:"w-8 h-8 text-white"})}),y.jsx("h3",{className:"font-semibold text-xl mb-2 text-center text-gray-900 dark:text-white",children:"Enter Your Contact Info"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center text-sm",children:["Please enter your details to share with ",t]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(fr,{htmlFor:"fullName",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),y.jsx(Zo,{id:"fullName",type:"text",placeholder:"Your full name",value:s.fullName,onChange:E=>i(S=>({...S,fullName:E.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx(fr,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),y.jsx(Zo,{id:"phoneNumber",type:"tel",placeholder:"Your phone number",value:s.phoneNumber,onChange:E=>i(S=>({...S,phoneNumber:E.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),y.jsxs("div",{className:"flex gap-3 mt-6",children:[y.jsx(He,{onClick:()=>c("confirm"),variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Back"}),y.jsx(He,{onClick:m,disabled:!s.fullName.trim()||!s.phoneNumber.trim()||u,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",children:u?y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Confirm Share"})]})]}),a==="success"&&y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(fj,{className:"w-8 h-8 text-white"})}),y.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Contact Info Shared!"}),y.jsxs("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:["Your contact information has been shared with ",t,". They can now see your name and phone number."]})]})]})})}function bJ({match:t,onClose:e}){var j;const[n,r]=x.useState([]),[s,i]=x.useState(""),[a,c]=x.useState(!0),[u,h]=x.useState(!1),[p,m]=x.useState(!1),[v,E]=x.useState(null),[S,T]=x.useState(!0),I=x.useRef(null),C=localStorage.getItem("currentSessionId"),N=localStorage.getItem("currentEventId"),R=`${C}_${t.session_id}`.split("").sort().join(""),[L,z]=x.useState(!1);x.useEffect(()=>{z(!1)},[t.session_id]);const K=x.useCallback(async()=>{try{const M=await Pc.filter({match_id:R,receiver_session_id:C,is_read:!1,event_id:N});M.length>0&&await Promise.all(M.map(Z=>Pc.update(Z.id,{is_read:!0})))}catch(M){console.error("Error marking messages as read:",M)}},[R,C,N]),D=x.useCallback(async()=>{try{const M=await Pc.filter({event_id:N,match_id:R},"created_date");r(M),K()}catch(M){console.error("Error loading messages:",M)}c(!1)},[N,R,K]);x.useEffect(()=>{const M=()=>{T(!document.hidden)};return document.addEventListener("visibilitychange",M),()=>document.removeEventListener("visibilitychange",M)},[]),x.useEffect(()=>{D(),V();const M=setInterval(()=>{S&&(D(),V())},3e4);return()=>clearInterval(M)},[S,D]),x.useEffect(()=>{P()},[n]);const P=()=>{var M;(M=I.current)==null||M.scrollIntoView({behavior:"smooth"})},V=async()=>{try{(await Jv.filter({event_id:N,match_id:R,sharer_session_id:C})).length>0&&m(!0);const Z=await Jv.filter({event_id:N,match_id:R,sharer_session_id:t.session_id,recipient_session_id:C});Z.length>0&&E(Z[0])}catch(M){console.error("Error loading contact shares:",M)}},F=async M=>{if(M.preventDefault(),!s.trim())return;const Z=s.trim();i("");try{const oe={id:`temp_${Date.now()}`,content:Z,sender_session_id:C,created_date:new Date().toISOString()};r(re=>[...re,oe]),await Pc.create({event_id:N,sender_session_id:C,receiver_session_id:t.session_id,content:Z,match_id:R,is_read:!1})}catch(oe){console.error("Error sending message:",oe),r(re=>re.filter(se=>!se.id.startsWith("temp_"))),i(Z)}},U=async M=>{try{await Jv.create({event_id:N,sharer_session_id:C,recipient_session_id:t.session_id,full_name:M.fullName,phone_number:M.phoneNumber,match_id:R}),m(!0),h(!1),V()}catch(Z){throw console.error("Error sharing contact info:",Z),Z}};return y.jsx(Qh,{open:!0,onOpenChange:e,children:y.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:y.jsxs("div",{className:"modal-content w-full max-w-sm h-[600px] bg-white dark:bg-gray-900 rounded-2xl flex flex-col shadow-2xl",children:[y.jsxs(Xh,{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-t-2xl",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[t.profile_photo_url&&!L?y.jsx("img",{src:t.profile_photo_url,alt:`${t.first_name}'s avatar`,className:"w-10 h-10 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700",loading:"lazy",onError:()=>z(!0)}):y.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:t.profile_color},children:t.first_name[0]}),y.jsxs("div",{children:[y.jsx(Jh,{className:"text-lg text-gray-900 dark:text-white",children:t.first_name}),y.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[y.jsx(d_,{className:"w-3 h-3 text-gray-400 dark:text-gray-500"}),y.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Expires at midnight"})]})]}),y.jsxs("div",{className:"flex gap-1",children:[!p&&y.jsx(He,{variant:"ghost",size:"icon",onClick:()=>h(!0),className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",title:"Share contact info",children:y.jsx(KT,{className:"w-4 h-4"})}),y.jsx(He,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:y.jsx(An,{className:"w-4 h-4"})})]})]}),y.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:(j=t.interests)==null?void 0:j.map(M=>y.jsx(ri,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-700 text-purple-600 dark:text-purple-300 bg-white dark:bg-gray-800",children:M},M))}),(p||v)&&y.jsxs("div",{className:"mt-3 space-y-2",children:[p&&y.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[y.jsx(KT,{className:"w-3 h-3"}),y.jsx("span",{children:"You shared your contact info"})]}),v&&y.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 mb-2",children:[y.jsx(gm,{className:"w-3 h-3"}),y.jsxs("span",{children:[t.first_name," shared their contact info"]})]}),y.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(pu,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),y.jsx("span",{className:"font-medium",children:v.full_name})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(gm,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),y.jsx("span",{className:"font-mono",children:v.phone_number})]})]})]})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-800",children:[a?y.jsx("div",{className:"flex justify-center py-8",children:y.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):n.length===0?y.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:y.jsxs("p",{className:"text-sm",children:["🎉 You matched! Say hello to ",t.first_name]})}):n.map(M=>y.jsx("div",{className:`flex ${M.sender_session_id===C?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`max-w-[80%] px-4 py-2 rounded-2xl ${M.sender_session_id===C?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[y.jsx("p",{className:"text-sm",children:M.content}),y.jsx("p",{className:`text-xs mt-1 ${M.sender_session_id===C?"text-purple-100":"text-gray-500 dark:text-gray-400"}`,children:wJ(new Date(M.created_date),"HH:mm")})]})},M.id)),y.jsx("div",{ref:I})]}),y.jsx("form",{onSubmit:F,className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 rounded-b-2xl",children:y.jsxs("div",{className:"flex gap-2",children:[y.jsx(Zo,{value:s,onChange:M=>i(M.target.value),placeholder:`Message ${t.first_name}...`,className:"flex-1 rounded-full border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),y.jsx(He,{type:"submit",disabled:!s.trim(),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-full",size:"icon",children:y.jsx(Bj,{className:"w-4 h-4"})})]})}),u&&y.jsx(xJ,{matchName:t.first_name,onConfirm:U,onCancel:()=>h(!1)})]})})})}function nO(){const t=ci(),[e,n]=x.useState([]),[r,s]=x.useState(null),[i,a]=x.useState(null),[c,u]=x.useState(!0),[h,p]=x.useState(!0),m=localStorage.getItem("currentSessionId"),v=localStorage.getItem("currentEventId"),E=x.useCallback(async T=>{if(!m||!v||T.length===0)return;const I=await Pr.filter({event_id:v,is_mutual:!0});for(const C of T){const N=I.find(L=>L.liker_session_id===m&&L.liked_session_id===C.session_id);if(N&&!N.liker_notified_of_match)try{await Pr.update(N.id,{liker_notified_of_match:!0})}catch(L){console.error("Error updating my like notification status:",L)}const R=I.find(L=>L.liker_session_id===C.session_id&&L.liked_session_id===m);if(R&&!R.liked_notified_of_match)try{await Pr.update(R.id,{liked_notified_of_match:!0})}catch(L){console.error("Error updating their like notification status:",L)}}},[m,v]),S=x.useCallback(async()=>{if(!m||!v){u(!1);return}try{const T=await Pr.filter({liker_session_id:m,event_id:v,is_mutual:!0}),I=await Pr.filter({liked_session_id:m,event_id:v,is_mutual:!0}),C=new Set([...T.map(L=>L.liked_session_id),...I.map(L=>L.liker_session_id)]);if(C.size===0){n([]),u(!1);return}const N=await Ir.filter({session_id:Array.from(C),event_id:v}),R=await Promise.all(N.map(async L=>{const z=[m,L.session_id].sort(),K=`${z[0]}_${z[1]}`,D=await Pc.filter({match_id:K,receiver_session_id:m,is_read:!1,event_id:v});return{...L,unreadCount:D.length}}));n(R.filter(Boolean)),N.length>0&&E(N)}catch(T){console.error("Error loading matches:",T)}u(!1)},[m,v,E]);return x.useEffect(()=>{const T=()=>{p(!document.hidden)};return document.addEventListener("visibilitychange",T),()=>document.removeEventListener("visibilitychange",T)},[]),x.useEffect(()=>{S();const T=setInterval(()=>{h&&S()},45e3);return()=>clearInterval(T)},[S,h]),x.useEffect(()=>{const I=new URLSearchParams(window.location.search).get("openChat");if(I&&e.length>0){const C=e.find(N=>N.session_id===I);C&&(s(C),window.history.replaceState({},document.title,window.location.pathname))}},[e]),c?y.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your matches..."})]})}):y.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[y.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:y.jsx(ol,{className:"w-8 h-8 text-white"})}),y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Matches"}),y.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.length," mutual ",e.length===1?"connection":"connections"," at this event"]})]}),y.jsxs("div",{className:"space-y-4",children:[e.map(T=>{var I,C;return y.jsx(nn,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-white dark:bg-gray-800",children:y.jsx(rn,{className:"p-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"relative",children:[T.profile_photo_url?y.jsxs(y.Fragment,{children:[y.jsx("img",{src:T.profile_photo_url,alt:`${T.first_name}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700 cursor-pointer hover:opacity-80 transition-opacity",loading:"lazy",onClick:()=>a(T),onError:N=>{N.target.style.display="none";const R=N.target.nextElementSibling;R&&(R.style.display="flex")}}),y.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity absolute inset-0 border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:T.profile_color,display:"none"},onClick:()=>a(T),children:T.first_name[0]})]}):y.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:T.profile_color},onClick:()=>a(T),children:T.first_name[0]}),y.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center shadow-md",children:y.jsx(qj,{className:"w-3 h-3 text-white"})})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:T.first_name}),y.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[T.age," years old"]}),y.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(I=T.interests)==null?void 0:I.slice(0,2).map(N=>y.jsx(ri,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:N},N)),((C=T.interests)==null?void 0:C.length)>2&&y.jsxs(ri,{variant:"outline",className:"text-xs rounded-full border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:["+",T.interests.length-2]})]})]})]}),y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(He,{onClick:()=>s(T),className:"bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full",size:"icon",children:y.jsx($c,{className:"w-5 h-5"})}),T.unreadCount>0&&y.jsx(ri,{className:"bg-red-500 text-white rounded-full px-2 py-0.5 text-xs",children:T.unreadCount})]})]})})},T.id)}),e.length===0&&!c&&y.jsx(nn,{className:"border-0 shadow-lg bg-white dark:bg-gray-800",children:y.jsxs(rn,{className:"p-8 text-center",children:[y.jsx(Wc,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),y.jsx("h3",{className:"font-semibold text-xl text-gray-900 dark:text-white mb-2",children:"No matches yet"}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start liking profiles to find your matches! When someone likes you back, they'll appear here."}),y.jsx(He,{onClick:()=>t(mt("Discovery")),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl px-6",children:"Discover Singles"})]})})]})]}),y.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:y.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:y.jsxs("div",{className:"flex justify-around",children:[y.jsxs("button",{onClick:()=>t(mt("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[y.jsx(pu,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs",children:"Profile"})]}),y.jsxs("button",{onClick:()=>t(mt("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[y.jsx(Wc,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs",children:"Discover"})]}),y.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[y.jsx($c,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs font-medium",children:"Matches"})]})]})})}),r&&y.jsx(bJ,{match:r,onClose:()=>{s(null),S()}}),i&&y.jsx(QM,{profile:i,onClose:()=>a(null),onLike:()=>{a(null)},isLiked:!0})]})}function EJ(){const t=ci(),[e,n]=x.useState(!0),[r,s]=x.useState(null);x.useEffect(()=>{i()},[]);const i=async()=>{try{const u=new URLSearchParams(window.location.search).get("code");if(!u){s("No event code provided in the URL."),n(!1);return}const h=await ou.filter({event_code:u.toUpperCase()});if(h.length===0){s("Invalid event code."),n(!1);return}const p=h[0],m=new Date().toISOString();if(!p.starts_at||!p.expires_at){s("This event is not configured correctly. Please contact the organizer."),n(!1);return}const v=p.starts_at<=m&&m<p.expires_at;if(m<p.starts_at){s("This event hasn't started yet. Try again soon!"),n(!1);return}if(m>=p.expires_at){s("This event has ended."),n(!1);return}localStorage.setItem("currentEventId",p.id),localStorage.setItem("currentEventCode",p.event_code);const E=localStorage.getItem("currentSessionId");if(E)try{if((await Ir.filter({session_id:E,event_id:p.id})).length>0){t(mt("Discovery"));return}}catch(S){console.warn("Error checking existing profile:",S)}t(mt("Consent"))}catch(c){console.error("Error processing event join:",c),s("Unable to process event access. Please try again."),n(!1)}},a=()=>{t(mt("Home"))};return e?y.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:y.jsx(nn,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:y.jsxs(rn,{className:"p-8 text-center",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Joining Event..."}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we verify your event access."})]})})}):r?y.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:y.jsx(nn,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:y.jsxs(rn,{className:"p-8 text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:y.jsx(sg,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to Join Event"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),y.jsx("div",{className:"flex gap-3",children:y.jsx(He,{onClick:a,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",children:"Return to Home"})})]})})}):y.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:y.jsx(nn,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:y.jsxs(rn,{className:"p-8 text-center",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Processing..."}),y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Redirecting you to the event."})]})})})}var Zg="Switch",[TJ,ZJ]=Iu(Zg),[SJ,IJ]=TJ(Zg),rO=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:c,value:u="on",onCheckedChange:h,form:p,...m}=t,[v,E]=x.useState(null),S=ft(e,R=>E(R)),T=x.useRef(!1),I=v?p||!!v.closest("form"):!0,[C,N]=bh({prop:s,defaultProp:i??!1,onChange:h,caller:Zg});return y.jsxs(SJ,{scope:n,checked:C,disabled:c,children:[y.jsx(nt.button,{type:"button",role:"switch","aria-checked":C,"aria-required":a,"data-state":aO(C),"data-disabled":c?"":void 0,disabled:c,value:u,...m,ref:S,onClick:it(t.onClick,R=>{N(L=>!L),I&&(T.current=R.isPropagationStopped(),T.current||R.stopPropagation())})}),I&&y.jsx(oO,{control:v,bubbles:!T.current,name:r,value:u,checked:C,required:a,disabled:c,form:p,style:{transform:"translateX(-100%)"}})]})});rO.displayName=Zg;var sO="SwitchThumb",iO=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=IJ(sO,n);return y.jsx(nt.span,{"data-state":aO(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});iO.displayName=sO;var kJ="SwitchBubbleInput",oO=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},i)=>{const a=x.useRef(null),c=ft(a,i),u=_b(n),h=gb(e);return x.useEffect(()=>{const p=a.current;if(!p)return;const m=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==n&&E){const S=new Event("click",{bubbles:r});E.call(p,n),p.dispatchEvent(S)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:c,style:{...s.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});oO.displayName=kJ;function aO(t){return t?"checked":"unchecked"}var lO=rO,CJ=iO;const cO=x.forwardRef(({className:t,...e},n)=>y.jsx(lO,{className:ot("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:y.jsx(CJ,{className:ot("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));cO.displayName=lO.displayName;const PJ=[{id:"inappropriate_behavior",label:"Inappropriate Behavior",description:"Offensive, rude, or inappropriate conduct",icon:Zj,color:"bg-red-100 text-red-700 border-red-200"},{id:"harassment",label:"Harassment",description:"Bullying, stalking, or unwanted contact",icon:Wj,color:"bg-orange-100 text-orange-700 border-orange-200"},{id:"fake_profile",label:"Fake Profile",description:"Impersonation or false information",icon:pu,color:"bg-yellow-100 text-yellow-700 border-yellow-200"},{id:"spam",label:"Spam",description:"Unwanted commercial messages or links",icon:$c,color:"bg-blue-100 text-blue-700 border-blue-200"},{id:"inappropriate_content",label:"Inappropriate Content",description:"Explicit, offensive, or adult content",icon:mm,color:"bg-purple-100 text-purple-700 border-purple-200"},{id:"underage_user",label:"Underage User",description:"User appears to be under 18",icon:Wc,color:"bg-pink-100 text-pink-700 border-pink-200"},{id:"commercial_activity",label:"Commercial Activity",description:"Business promotion or sales activity",icon:gm,color:"bg-green-100 text-green-700 border-green-200"},{id:"other",label:"Other",description:"Other concerns not listed above",icon:bj,color:"bg-gray-100 text-gray-700 border-gray-200"}];function AJ({isOpen:t,onClose:e,reportedUser:n,eventId:r,onReportSubmitted:s}){const[i,a]=x.useState("reason"),[c,u]=x.useState(null),[h,p]=x.useState(""),[m,v]=x.useState(!1),[E,S]=x.useState("");x.useEffect(()=>{t&&(a("reason"),u(null),p(""),S(""))},[t]);const T=R=>{u(R),a("details")},I=()=>{i==="details"?(a("reason"),u(null)):i==="confirmation"&&a("details")},C=async()=>{if(!c||!h.trim()){xt.error("Please select a reason and provide details.");return}v(!0);try{const R={reporterId:localStorage.getItem("currentSessionId"),reportedUserId:n.session_id,eventId:r,reason:c.id,description:h.trim(),evidence:E.trim()||void 0};await new Promise(L=>setTimeout(L,1e3)),console.log("Report submitted:",R),a("confirmation"),xt.success("Report submitted successfully"),s&&s(R)}catch(R){console.error("Error submitting report:",R),xt.error("Failed to submit report. Please try again.")}finally{v(!1)}},N=()=>{i==="confirmation"||(a("reason"),u(null),p(""),S("")),e()};return y.jsx(Qh,{open:t,onOpenChange:N,children:y.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4",children:y.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl",children:[y.jsx(Xh,{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[i!=="reason"&&y.jsx(He,{variant:"ghost",size:"icon",onClick:I,className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:y.jsx(cj,{className:"w-5 h-5"})}),y.jsxs("div",{children:[y.jsxs(Jh,{className:"text-lg text-gray-900 dark:text-white",children:[i==="reason"&&"Report User",i==="details"&&"Provide Details",i==="confirmation"&&"Report Submitted"]}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i==="reason"&&"Select a reason for reporting",i==="details"&&"Help us understand the issue",i==="confirmation"&&"Thank you for your report"]})]})]}),y.jsx(He,{variant:"ghost",size:"icon",onClick:N,className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:y.jsx(An,{className:"w-5 h-5"})})]})}),y.jsxs("div",{className:"p-6",children:[i==="reason"&&y.jsxs("div",{className:"space-y-4",children:[y.jsx(nn,{className:"border-gray-200 dark:border-gray-700",children:y.jsx(rn,{className:"p-4",children:y.jsxs("div",{className:"flex items-center gap-3",children:[n.profile_photo_url?y.jsx("img",{src:n.profile_photo_url,alt:n.first_name,className:"w-12 h-12 rounded-full object-cover"}):y.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:n.profile_color},children:n.first_name[0]}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:n.first_name}),y.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.age," years old"]})]})]})})}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Why are you reporting this user?"}),y.jsx("div",{className:"grid gap-2",children:PJ.map(R=>{const L=R.icon;return y.jsx("button",{onClick:()=>T(R),className:"w-full p-4 text-left border-2 border-gray-200 dark:border-gray-600 rounded-xl hover:border-purple-300 dark:hover:border-purple-400 transition-colors bg-white dark:bg-gray-800",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:`p-2 rounded-lg ${R.color}`,children:y.jsx(L,{className:"w-4 h-4"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:R.label}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:R.description})]})]})},R.id)})})]})]}),i==="details"&&y.jsxs("div",{className:"space-y-4",children:[y.jsx(nn,{className:"border-purple-200 dark:border-purple-700 bg-purple-50 dark:bg-purple-900/20",children:y.jsx(rn,{className:"p-4",children:y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:`p-2 rounded-lg ${c.color}`,children:y.jsx(c.icon,{className:"w-4 h-4"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:c.label}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.description})]})]})})}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Please provide details about what happened"}),y.jsx(uu,{value:h,onChange:R=>p(R.target.value),placeholder:"Describe the incident or behavior that concerns you...",className:"min-h-[120px] resize-none",maxLength:1e3}),y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h.length,"/1000 characters"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Additional context (optional)"}),y.jsx(uu,{value:E,onChange:R=>S(R.target.value),placeholder:"Any additional information, screenshots, or context that might help...",className:"min-h-[80px] resize-none",maxLength:500}),y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.length,"/500 characters"]})]}),y.jsx(He,{onClick:C,disabled:m||!h.trim(),className:"w-full bg-gradient-to-r from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white",children:m?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Submitting..."]}):"Submit Report"})]}),i==="confirmation"&&y.jsxs("div",{className:"text-center space-y-4",children:[y.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:y.jsx(Fa,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Report Submitted"}),y.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Thank you for helping keep our community safe. We will review your report and take appropriate action if necessary."})]}),y.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[y.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"What happens next?"}),y.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[y.jsx("li",{children:"• Our team will review the report within 24 hours"}),y.jsx("li",{children:"• We may contact you for additional information"}),y.jsx("li",{children:"• Appropriate action will be taken if violations are found"}),y.jsx("li",{children:"• Your report is confidential and anonymous"})]})]}),y.jsx(He,{onClick:N,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",children:"Close"})]})]})]})})})}const RJ=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing","yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function uO(){var U;const t=ci(),[e,n]=x.useState(null),[r,s]=x.useState(null),[i,a]=x.useState({bio:!1,interests:!1,height:!1}),[c,u]=x.useState({bio:"",interests:[],height:""}),[h,p]=x.useState(!0),[m,v]=x.useState(!1),[E,S]=x.useState(!1),[T,I]=x.useState([]),C=x.useCallback(async()=>{p(!0);try{const j=localStorage.getItem("currentEventId"),M=localStorage.getItem("currentSessionId");if(j&&M){const Z=await Ir.filter({event_id:j,session_id:M});if(Z.length>0){const oe=Z[0];s(oe),n(oe),u({bio:oe.about_me||"",interests:oe.interests||[],height:oe.height_cm?oe.height_cm.toString():""})}}}catch(j){console.error("Error loading profile data:",j),xt.error("Failed to load profile.")}finally{p(!1)}},[t]);x.useEffect(()=>{C()},[C]);const N=j=>{a(M=>({...M,[j]:!M[j]}))},R=j=>{u(M=>{const Z=M.interests.includes(j)?M.interests.filter(oe=>oe!==j):[...M.interests,j];return Z.length>3?(xt.warning("You can select up to 3 interests."),M):{...M,interests:Z}})},L=async j=>{try{if(!r)return;const Z={bio:"about_me",height:"height_cm"}[j]||j,oe=j==="height"?parseInt(c[j]):c[j];await Ir.update(r.id,{[Z]:oe}),xt.success(`${j.charAt(0).toUpperCase()+j.slice(1)} updated!`),N(j),await C()}catch(M){console.error(`Error updating ${j}:`,M),xt.error(`Failed to update ${j}.`)}},z=async j=>{const M=j.target.files[0];if(M&&r){v(!0);try{const{file_url:Z}=await DM({file:M});await Ir.update(r.id,{profile_photo_url:Z}),xt.success("Profile photo updated!"),await C()}catch(Z){console.error("Error uploading photo:",Z),xt.error("Failed to upload photo.")}finally{v(!1)}}},K=async()=>{if(r)try{const j=!r.is_visible;await Ir.update(r.id,{is_visible:j}),s(M=>({...M,is_visible:j})),xt.success(`Profile is now ${j?"visible":"hidden"}.`)}catch(j){console.error("Error updating visibility:",j),xt.error("Failed to update visibility.")}},D=async()=>{try{const j=localStorage.getItem("currentEventId");if(j){const M=await Ir.filter({event_id:j});I(M)}}catch(j){console.error("Error loading users for report:",j)}},P=()=>{S(!0),D()},V=j=>{console.log("Report submitted:",j)},F=async()=>{if(!(!r||!confirm("Are you sure you want to leave this event? This will delete your profile for this event and cannot be undone.")))try{await Ir.delete(r.id),localStorage.removeItem("currentEventId"),localStorage.removeItem("currentSessionId"),localStorage.removeItem("currentEventCode"),localStorage.removeItem("currentProfileColor"),localStorage.removeItem("currentProfilePhotoUrl"),xt.success("You have left the event."),t(mt("Home"))}catch(j){console.error("Error leaving event:",j),xt.error("Failed to leave event.")}};return h?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):y.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[y.jsx("style",{children:`
        .visibility-switch[data-state='checked'] {
          background-color: #34D399;
        }
        .visibility-switch[data-state='unchecked'] {
          background-color: #E5E7EB;
        }
        .dark .visibility-switch[data-state='unchecked'] {
          background-color: #4B5563;
        }
        .visibility-switch span {
          background-color: white !important;
        }
      `}),y.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[y.jsxs("div",{className:"text-center mb-8",children:[y.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-4",children:[y.jsxs("label",{htmlFor:"profile-photo-upload",className:"cursor-pointer group",children:[e.profile_photo_url?y.jsx("img",{src:e.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg"}):y.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center text-white font-semibold text-4xl",style:{backgroundColor:e.profile_color},children:e.full_name?e.full_name[0]:"?"}),y.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:y.jsx(mm,{className:"w-8 h-8 text-white"})})]}),y.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:z,className:"hidden",disabled:m}),m&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-white"})})]}),y.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.full_name}),y.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.age," years old"]})]}),y.jsxs(nn,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[y.jsxs(Us,{className:"flex flex-row items-center justify-between",children:[y.jsx(ws,{className:"text-lg text-gray-900 dark:text-white",children:"About Me"}),y.jsx(He,{variant:"ghost",size:"icon",onClick:()=>N("bio"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:i.bio?y.jsx(An,{className:"w-4 h-4"}):y.jsx(Mv,{className:"w-4 h-4"})})]}),y.jsx(rn,{children:i.bio?y.jsxs("div",{className:"space-y-4",children:[y.jsx(uu,{value:c.bio,onChange:j=>u(M=>({...M,bio:j.target.value})),placeholder:"Tell us a little about yourself...",className:"h-24 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),y.jsxs(He,{onClick:()=>L("bio"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[y.jsx(Dv,{className:"w-4 h-4 mr-2"})," Save Bio"]})]}):y.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.bio||"No bio yet. Add one!"})})]}),y.jsxs(nn,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[y.jsxs(Us,{className:"flex flex-row items-center justify-between",children:[y.jsx(ws,{className:"text-lg text-gray-900 dark:text-white",children:"Interests"}),y.jsx(He,{variant:"ghost",size:"icon",onClick:()=>N("interests"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:i.interests?y.jsx(An,{className:"w-4 h-4"}):y.jsx(Mv,{className:"w-4 h-4"})})]}),y.jsx(rn,{children:i.interests?y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"flex flex-wrap gap-2",children:RJ.map(j=>y.jsx(ri,{onClick:()=>R(j),className:`cursor-pointer px-3 py-2 rounded-full transition-all ${c.interests.includes(j)?"interest-chip-selected bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"interest-chip-default border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,children:j},j))}),y.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[c.interests.length," / 3 selected"]}),y.jsxs(He,{onClick:()=>L("interests"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[y.jsx(Dv,{className:"w-4 h-4 mr-2"})," Save Interests"]})]}):y.jsx("div",{className:"flex flex-wrap gap-2",children:((U=e.interests)==null?void 0:U.map(j=>y.jsx(ri,{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:j},j)))||y.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No interests added yet."})})})]}),y.jsxs(nn,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[y.jsxs(Us,{className:"flex flex-row items-center justify-between",children:[y.jsx(ws,{className:"text-lg text-gray-900 dark:text-white",children:"Height"}),y.jsx(He,{variant:"ghost",size:"icon",onClick:()=>N("height"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:i.height?y.jsx(An,{className:"w-4 h-4"}):y.jsx(Mv,{className:"w-4 h-4"})})]}),y.jsx(rn,{children:i.height?y.jsxs("div",{className:"space-y-4",children:[y.jsx(Zo,{type:"number",value:c.height,onChange:j=>u(M=>({...M,height:j.target.value})),placeholder:"Height in cm",className:"w-full height-input bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),y.jsxs(He,{onClick:()=>L("height"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[y.jsx(Dv,{className:"w-4 h-4 mr-2"})," Save Height"]})]}):y.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.height?`${e.height} cm`:"Not specified"})})]}),r&&y.jsxs(y.Fragment,{children:[y.jsxs(nn,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[y.jsxs(Us,{className:"flex flex-row items-center justify-between",children:[y.jsxs(ws,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[r.is_visible?y.jsx(wj,{className:"w-5 h-5 text-green-500"}):y.jsx(yj,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),"Event Visibility"]}),y.jsx(cO,{checked:r.is_visible,onCheckedChange:K,className:"visibility-switch"})]}),y.jsx(rn,{children:y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.is_visible?"Your profile is visible to others at the current event.":"You are currently hidden from other attendees."})})]}),y.jsxs(nn,{className:"border-0 shadow-lg border-red-100 dark:border-red-900/20 bg-white dark:bg-gray-800",children:[y.jsx(Us,{children:y.jsxs(ws,{className:"flex items-center gap-2 text-lg text-red-600 dark:text-red-400",children:[y.jsx(Ij,{className:"w-5 h-5"}),"Leave Event"]})}),y.jsxs(rn,{children:[y.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Permanently remove your profile from this event. This action cannot be undone."}),y.jsxs(He,{onClick:F,variant:"destructive",className:"w-full h-auto whitespace-normal",children:[y.jsx(Xj,{className:"w-4 h-4 mr-2"}),"Leave Event & Delete Event Profile"]})]})]})]}),y.jsxs(nn,{className:"border-0 shadow-lg mb-6 mt-8 bg-white dark:bg-gray-800",children:[y.jsx(Us,{children:y.jsxs(ws,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[y.jsx(sg,{className:"w-5 h-5 text-orange-500"}),"Safety & Reporting"]})}),y.jsxs(rn,{children:[y.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"If you encounter inappropriate behavior, you can report users to event moderators."}),y.jsx(He,{variant:"outline",className:"w-full border-orange-200 dark:border-orange-700 text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 bg-white dark:bg-gray-800",onClick:P,children:"Report a User"})]})]}),y.jsxs(nn,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[y.jsx(Us,{children:y.jsxs(ws,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[y.jsx(d_,{className:"w-5 h-5 text-blue-500"}),"Automatic Data Expiration"]})}),y.jsxs(rn,{children:[y.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your profile, matches, and chat messages will be automatically deleted when this event ends. No data is stored permanently."}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[y.jsx(Fa,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm",children:"Profile expires automatically"})]}),y.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[y.jsx(Fa,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm",children:"Messages deleted at midnight"})]}),y.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[y.jsx(Fa,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm",children:"No permanent account created"})]})]})]})]}),y.jsxs(nn,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[y.jsx(Us,{children:y.jsxs(ws,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[y.jsx(Cj,{className:"w-5 h-5 text-purple-500"}),"Email Data Usage"]})}),y.jsxs(rn,{children:[y.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your email address is only used for post-event feedback surveys and is never visible to other users at this event."}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[y.jsx(Fa,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm",children:"Only used for feedback requests"})]}),y.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[y.jsx(Fa,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm",children:"Never shared with other users"})]}),y.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[y.jsx(Fa,{className:"w-4 h-4"}),y.jsx("span",{className:"text-sm",children:"Not used for marketing purposes"})]})]})]})]})]}),y.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:y.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:y.jsxs("div",{className:"flex justify-around",children:[y.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[y.jsx(pu,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs font-medium",children:"Profile"})]}),y.jsxs("button",{onClick:()=>t(mt("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[y.jsx(Wc,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs",children:"Discover"})]}),y.jsxs("button",{onClick:()=>t(mt("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[y.jsx($c,{className:"w-6 h-6"}),y.jsx("span",{className:"text-xs",children:"Matches"})]})]})})}),y.jsx(AJ,{isOpen:E,onClose:()=>S(!1),reportedUser:T[0],eventId:localStorage.getItem("currentEventId"),onReportSubmitted:V})]})}const Jk={Home:Xw,Consent:MM,Discovery:XM,Matches:nO,join:EJ,Profile:uO};function NJ(t){t.endsWith("/")&&(t=t.slice(0,-1));let e=t.split("/").pop();return e.includes("?")&&(e=e.split("?")[0]),Object.keys(Jk).find(r=>r.toLowerCase()===e.toLowerCase())||Object.keys(Jk)[0]}function DJ(){const t=qi(),e=NJ(t.pathname);return y.jsx(vQ,{currentPageName:e,children:y.jsxs(wL,{children:[y.jsx(Ao,{path:"/",element:y.jsx(Xw,{})}),y.jsx(Ao,{path:"/Home",element:y.jsx(Xw,{})}),y.jsx(Ao,{path:"/Consent",element:y.jsx(MM,{})}),y.jsx(Ao,{path:"/Discovery",element:y.jsx(XM,{})}),y.jsx(Ao,{path:"/Matches",element:y.jsx(nO,{})}),y.jsx(Ao,{path:"/join",element:y.jsx("join",{})}),y.jsx(Ao,{path:"/Profile",element:y.jsx(uO,{})})]})})}function MJ(){return y.jsx(zL,{children:y.jsx(DJ,{})})}const OJ=20,VJ=1e6,Ni={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let I0=0;function LJ(){return I0=(I0+1)%Number.MAX_VALUE,I0.toString()}const k0=new Map,Zk=t=>{if(k0.has(t))return;const e=setTimeout(()=>{k0.delete(t),Qd({type:Ni.REMOVE_TOAST,toastId:t})},VJ);k0.set(t,e)},jJ=(t,e)=>{switch(e.type){case Ni.ADD_TOAST:return{...t,toasts:[e.toast,...t.toasts].slice(0,OJ)};case Ni.UPDATE_TOAST:return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case Ni.DISMISS_TOAST:{const{toastId:n}=e;return n?Zk(n):t.toasts.forEach(r=>{Zk(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case Ni.REMOVE_TOAST:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},hm=[];let fm={toasts:[]};function Qd(t){fm=jJ(fm,t),hm.forEach(e=>{e(fm)})}function FJ({...t}){const e=LJ(),n=s=>Qd({type:Ni.UPDATE_TOAST,toast:{...s,id:e}}),r=()=>Qd({type:Ni.DISMISS_TOAST,toastId:e});return Qd({type:Ni.ADD_TOAST,toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function UJ(){const[t,e]=x.useState(fm);return x.useEffect(()=>(hm.push(e),()=>{const n=hm.indexOf(e);n>-1&&hm.splice(n,1)}),[t]),{...t,toast:FJ,dismiss:n=>Qd({type:Ni.DISMISS_TOAST,toastId:n})}}const dO=x.forwardRef(({...t},e)=>y.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));dO.displayName="ToastProvider";const hO=x.forwardRef(({...t},e)=>y.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...t}));hO.displayName="ToastViewport";const BJ=Lg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fO=x.forwardRef(({className:t,variant:e,...n},r)=>y.jsx("div",{ref:r,className:ot(BJ({variant:e}),t),...n}));fO.displayName="Toast";const zJ=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));zJ.displayName="ToastAction";const pO=x.forwardRef(({className:t,...e},n)=>y.jsx("button",{ref:n,className:ot("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:y.jsx(An,{className:"h-4 w-4"})}));pO.displayName="ToastClose";const mO=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("text-sm font-semibold",t),...e}));mO.displayName="ToastTitle";const gO=x.forwardRef(({className:t,...e},n)=>y.jsx("div",{ref:n,className:ot("text-sm opacity-90",t),...e}));gO.displayName="ToastDescription";function $J(){const{toasts:t}=UJ();return y.jsxs(dO,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return y.jsxs(fO,{...i,children:[y.jsxs("div",{className:"grid gap-1",children:[n&&y.jsx(mO,{children:n}),r&&y.jsx(gO,{children:r})]}),s,y.jsx(pO,{})]},e)}),y.jsx(hO,{})]})}function WJ(){return y.jsxs(y.Fragment,{children:[y.jsx(MJ,{}),y.jsx($J,{})]})}PV.createRoot(document.getElementById("root")).render(y.jsx(WJ,{}));
