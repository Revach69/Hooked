var X8=Object.defineProperty;var Y8=(n,e,t)=>e in n?X8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var wy=(n,e,t)=>Y8(n,typeof e!="symbol"?e+"":e,t);function pS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ng(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vy={exports:{}},Sh={},_y={exports:{}},Bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ab;function Q8(){if(Ab)return Bt;Ab=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function T(ae){return ae===null||typeof ae!="object"?null:(ae=E&&ae[E]||ae["@@iterator"],typeof ae=="function"?ae:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,D={};function L(ae,he,Se){this.props=ae,this.context=he,this.refs=D,this.updater=Se||R}L.prototype.isReactComponent={},L.prototype.setState=function(ae,he){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,he,"setState")},L.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function G(){}G.prototype=L.prototype;function z(ae,he,Se){this.props=ae,this.context=he,this.refs=D,this.updater=Se||R}var W=z.prototype=new G;W.constructor=z,M(W,L.prototype),W.isPureReactComponent=!0;var Y=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function B(ae,he,Se){var Le,it={},Re=null,Pe=null;if(he!=null)for(Le in he.ref!==void 0&&(Pe=he.ref),he.key!==void 0&&(Re=""+he.key),he)Z.call(he,Le)&&!F.hasOwnProperty(Le)&&(it[Le]=he[Le]);var Ge=arguments.length-2;if(Ge===1)it.children=Se;else if(1<Ge){for(var at=Array(Ge),st=0;st<Ge;st++)at[st]=arguments[st+2];it.children=at}if(ae&&ae.defaultProps)for(Le in Ge=ae.defaultProps,Ge)it[Le]===void 0&&(it[Le]=Ge[Le]);return{$$typeof:n,type:ae,key:Re,ref:Pe,props:it,_owner:ie.current}}function H(ae,he){return{$$typeof:n,type:ae.type,key:he,ref:ae.ref,props:ae.props,_owner:ae._owner}}function ee(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===n}function ne(ae){var he={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(Se){return he[Se]})}var te=/\/+/g;function K(ae,he){return typeof ae=="object"&&ae!==null&&ae.key!=null?ne(""+ae.key):he.toString(36)}function we(ae,he,Se,Le,it){var Re=typeof ae;(Re==="undefined"||Re==="boolean")&&(ae=null);var Pe=!1;if(ae===null)Pe=!0;else switch(Re){case"string":case"number":Pe=!0;break;case"object":switch(ae.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=ae,it=it(Pe),ae=Le===""?"."+K(Pe,0):Le,Y(it)?(Se="",ae!=null&&(Se=ae.replace(te,"$&/")+"/"),we(it,he,Se,"",function(st){return st})):it!=null&&(ee(it)&&(it=H(it,Se+(!it.key||Pe&&Pe.key===it.key?"":(""+it.key).replace(te,"$&/")+"/")+ae)),he.push(it)),1;if(Pe=0,Le=Le===""?".":Le+":",Y(ae))for(var Ge=0;Ge<ae.length;Ge++){Re=ae[Ge];var at=Le+K(Re,Ge);Pe+=we(Re,he,Se,at,it)}else if(at=T(ae),typeof at=="function")for(ae=at.call(ae),Ge=0;!(Re=ae.next()).done;)Re=Re.value,at=Le+K(Re,Ge++),Pe+=we(Re,he,Se,at,it);else if(Re==="object")throw he=String(ae),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return Pe}function se(ae,he,Se){if(ae==null)return ae;var Le=[],it=0;return we(ae,Le,"","",function(Re){return he.call(Se,Re,it++)}),Le}function Ae(ae){if(ae._status===-1){var he=ae._result;he=he(),he.then(function(Se){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=Se)},function(Se){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=Se)}),ae._status===-1&&(ae._status=0,ae._result=he)}if(ae._status===1)return ae._result.default;throw ae._result}var xe={current:null},oe={transition:null},Te={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:oe,ReactCurrentOwner:ie};function Ne(){throw Error("act(...) is not supported in production builds of React.")}return Bt.Children={map:se,forEach:function(ae,he,Se){se(ae,function(){he.apply(this,arguments)},Se)},count:function(ae){var he=0;return se(ae,function(){he++}),he},toArray:function(ae){return se(ae,function(he){return he})||[]},only:function(ae){if(!ee(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},Bt.Component=L,Bt.Fragment=t,Bt.Profiler=i,Bt.PureComponent=z,Bt.StrictMode=r,Bt.Suspense=m,Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Te,Bt.act=Ne,Bt.cloneElement=function(ae,he,Se){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var Le=M({},ae.props),it=ae.key,Re=ae.ref,Pe=ae._owner;if(he!=null){if(he.ref!==void 0&&(Re=he.ref,Pe=ie.current),he.key!==void 0&&(it=""+he.key),ae.type&&ae.type.defaultProps)var Ge=ae.type.defaultProps;for(at in he)Z.call(he,at)&&!F.hasOwnProperty(at)&&(Le[at]=he[at]===void 0&&Ge!==void 0?Ge[at]:he[at])}var at=arguments.length-2;if(at===1)Le.children=Se;else if(1<at){Ge=Array(at);for(var st=0;st<at;st++)Ge[st]=arguments[st+2];Le.children=Ge}return{$$typeof:n,type:ae.type,key:it,ref:Re,props:Le,_owner:Pe}},Bt.createContext=function(ae){return ae={$$typeof:c,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:o,_context:ae},ae.Consumer=ae},Bt.createElement=B,Bt.createFactory=function(ae){var he=B.bind(null,ae);return he.type=ae,he},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(ae){return{$$typeof:h,render:ae}},Bt.isValidElement=ee,Bt.lazy=function(ae){return{$$typeof:w,_payload:{_status:-1,_result:ae},_init:Ae}},Bt.memo=function(ae,he){return{$$typeof:g,type:ae,compare:he===void 0?null:he}},Bt.startTransition=function(ae){var he=oe.transition;oe.transition={};try{ae()}finally{oe.transition=he}},Bt.unstable_act=Ne,Bt.useCallback=function(ae,he){return xe.current.useCallback(ae,he)},Bt.useContext=function(ae){return xe.current.useContext(ae)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(ae){return xe.current.useDeferredValue(ae)},Bt.useEffect=function(ae,he){return xe.current.useEffect(ae,he)},Bt.useId=function(){return xe.current.useId()},Bt.useImperativeHandle=function(ae,he,Se){return xe.current.useImperativeHandle(ae,he,Se)},Bt.useInsertionEffect=function(ae,he){return xe.current.useInsertionEffect(ae,he)},Bt.useLayoutEffect=function(ae,he){return xe.current.useLayoutEffect(ae,he)},Bt.useMemo=function(ae,he){return xe.current.useMemo(ae,he)},Bt.useReducer=function(ae,he,Se){return xe.current.useReducer(ae,he,Se)},Bt.useRef=function(ae){return xe.current.useRef(ae)},Bt.useState=function(ae){return xe.current.useState(ae)},Bt.useSyncExternalStore=function(ae,he,Se){return xe.current.useSyncExternalStore(ae,he,Se)},Bt.useTransition=function(){return xe.current.useTransition()},Bt.version="18.3.1",Bt}var Tb;function rv(){return Tb||(Tb=1,_y.exports=Q8()),_y.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cb;function Z8(){if(Cb)return Sh;Cb=1;var n=rv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(h,m,g){var w,E={},T=null,R=null;g!==void 0&&(T=""+g),m.key!==void 0&&(T=""+m.key),m.ref!==void 0&&(R=m.ref);for(w in m)r.call(m,w)&&!o.hasOwnProperty(w)&&(E[w]=m[w]);if(h&&h.defaultProps)for(w in m=h.defaultProps,m)E[w]===void 0&&(E[w]=m[w]);return{$$typeof:e,type:h,key:T,ref:R,props:E,_owner:i.current}}return Sh.Fragment=t,Sh.jsx=c,Sh.jsxs=c,Sh}var Sb;function J8(){return Sb||(Sb=1,vy.exports=Z8()),vy.exports}var A=J8(),P=rv();const ze=ng(P),mS=pS({__proto__:null,default:ze},[P]);var um={},Ey={exports:{}},as={},by={exports:{}},Iy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function eO(){return Rb||(Rb=1,function(n){function e(oe,Te){var Ne=oe.length;oe.push(Te);e:for(;0<Ne;){var ae=Ne-1>>>1,he=oe[ae];if(0<i(he,Te))oe[ae]=Te,oe[Ne]=he,Ne=ae;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var Te=oe[0],Ne=oe.pop();if(Ne!==Te){oe[0]=Ne;e:for(var ae=0,he=oe.length,Se=he>>>1;ae<Se;){var Le=2*(ae+1)-1,it=oe[Le],Re=Le+1,Pe=oe[Re];if(0>i(it,Ne))Re<he&&0>i(Pe,it)?(oe[ae]=Pe,oe[Re]=Ne,ae=Re):(oe[ae]=it,oe[Le]=Ne,ae=Le);else if(Re<he&&0>i(Pe,Ne))oe[ae]=Pe,oe[Re]=Ne,ae=Re;else break e}}return Te}function i(oe,Te){var Ne=oe.sortIndex-Te.sortIndex;return Ne!==0?Ne:oe.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],g=[],w=1,E=null,T=3,R=!1,M=!1,D=!1,L=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(oe){for(var Te=t(g);Te!==null;){if(Te.callback===null)r(g);else if(Te.startTime<=oe)r(g),Te.sortIndex=Te.expirationTime,e(m,Te);else break;Te=t(g)}}function Y(oe){if(D=!1,W(oe),!M)if(t(m)!==null)M=!0,Ae(Z);else{var Te=t(g);Te!==null&&xe(Y,Te.startTime-oe)}}function Z(oe,Te){M=!1,D&&(D=!1,G(B),B=-1),R=!0;var Ne=T;try{for(W(Te),E=t(m);E!==null&&(!(E.expirationTime>Te)||oe&&!ne());){var ae=E.callback;if(typeof ae=="function"){E.callback=null,T=E.priorityLevel;var he=ae(E.expirationTime<=Te);Te=n.unstable_now(),typeof he=="function"?E.callback=he:E===t(m)&&r(m),W(Te)}else r(m);E=t(m)}if(E!==null)var Se=!0;else{var Le=t(g);Le!==null&&xe(Y,Le.startTime-Te),Se=!1}return Se}finally{E=null,T=Ne,R=!1}}var ie=!1,F=null,B=-1,H=5,ee=-1;function ne(){return!(n.unstable_now()-ee<H)}function te(){if(F!==null){var oe=n.unstable_now();ee=oe;var Te=!0;try{Te=F(!0,oe)}finally{Te?K():(ie=!1,F=null)}}else ie=!1}var K;if(typeof z=="function")K=function(){z(te)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,se=we.port2;we.port1.onmessage=te,K=function(){se.postMessage(null)}}else K=function(){L(te,0)};function Ae(oe){F=oe,ie||(ie=!0,K())}function xe(oe,Te){B=L(function(){oe(n.unstable_now())},Te)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){M||R||(M=!0,Ae(Z))},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var Te=3;break;default:Te=T}var Ne=T;T=Te;try{return oe()}finally{T=Ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,Te){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Ne=T;T=oe;try{return Te()}finally{T=Ne}},n.unstable_scheduleCallback=function(oe,Te,Ne){var ae=n.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?ae+Ne:ae):Ne=ae,oe){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Ne+he,oe={id:w++,callback:Te,priorityLevel:oe,startTime:Ne,expirationTime:he,sortIndex:-1},Ne>ae?(oe.sortIndex=Ne,e(g,oe),t(m)===null&&oe===t(g)&&(D?(G(B),B=-1):D=!0,xe(Y,Ne-ae))):(oe.sortIndex=he,e(m,oe),M||R||(M=!0,Ae(Z))),oe},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(oe){var Te=T;return function(){var Ne=T;T=Te;try{return oe.apply(this,arguments)}finally{T=Ne}}}}(Iy)),Iy}var Nb;function tO(){return Nb||(Nb=1,by.exports=eO()),by.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kb;function nO(){if(kb)return as;kb=1;var n=rv(),e=tO();function t(a){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+a,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+a+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,d){c(a,d),c(a+"Capture",d)}function c(a,d){for(i[a]=d,a=0;a<d.length;a++)r.add(d[a])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function T(a){return m.call(E,a)?!0:m.call(w,a)?!1:g.test(a)?E[a]=!0:(w[a]=!0,!1)}function R(a,d,x,b){if(x!==null&&x.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:x!==null?!x.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function M(a,d,x,b){if(d===null||typeof d>"u"||R(a,d,x,b))return!0;if(b)return!1;if(x!==null)switch(x.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function D(a,d,x,b,S,k,$){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=S,this.mustUseProperty=x,this.propertyName=a,this.type=d,this.sanitizeURL=k,this.removeEmptyString=$}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){L[a]=new D(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var d=a[0];L[d]=new D(d,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){L[a]=new D(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){L[a]=new D(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){L[a]=new D(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){L[a]=new D(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){L[a]=new D(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){L[a]=new D(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){L[a]=new D(a,5,!1,a.toLowerCase(),null,!1,!1)});var G=/[\-:]([a-z])/g;function z(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var d=a.replace(G,z);L[d]=new D(d,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!1,!1)}),L.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){L[a]=new D(a,1,!1,a.toLowerCase(),null,!0,!0)});function W(a,d,x,b){var S=L.hasOwnProperty(d)?L[d]:null;(S!==null?S.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(M(d,x,S,b)&&(x=null),b||S===null?T(d)&&(x===null?a.removeAttribute(d):a.setAttribute(d,""+x)):S.mustUseProperty?a[S.propertyName]=x===null?S.type===3?!1:"":x:(d=S.attributeName,b=S.attributeNamespace,x===null?a.removeAttribute(d):(S=S.type,x=S===3||S===4&&x===!0?"":""+x,b?a.setAttributeNS(b,d,x):a.setAttribute(d,x))))}var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),ne=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),oe=Symbol.iterator;function Te(a){return a===null||typeof a!="object"?null:(a=oe&&a[oe]||a["@@iterator"],typeof a=="function"?a:null)}var Ne=Object.assign,ae;function he(a){if(ae===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);ae=d&&d[1]||""}return`
`+ae+a}var Se=!1;function Le(a,d){if(!a||Se)return"";Se=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(be){var b=be}Reflect.construct(a,[],d)}else{try{d.call()}catch(be){b=be}a.call(d.prototype)}else{try{throw Error()}catch(be){b=be}a()}}catch(be){if(be&&b&&typeof be.stack=="string"){for(var S=be.stack.split(`
`),k=b.stack.split(`
`),$=S.length-1,re=k.length-1;1<=$&&0<=re&&S[$]!==k[re];)re--;for(;1<=$&&0<=re;$--,re--)if(S[$]!==k[re]){if($!==1||re!==1)do if($--,re--,0>re||S[$]!==k[re]){var ce=`
`+S[$].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=$&&0<=re);break}}}finally{Se=!1,Error.prepareStackTrace=x}return(a=a?a.displayName||a.name:"")?he(a):""}function it(a){switch(a.tag){case 5:return he(a.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return a=Le(a.type,!1),a;case 11:return a=Le(a.type.render,!1),a;case 1:return a=Le(a.type,!0),a;default:return""}}function Re(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case F:return"Fragment";case ie:return"Portal";case H:return"Profiler";case B:return"StrictMode";case K:return"Suspense";case we:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case ne:return(a.displayName||"Context")+".Consumer";case ee:return(a._context.displayName||"Context")+".Provider";case te:var d=a.render;return a=a.displayName,a||(a=d.displayName||d.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case se:return d=a.displayName||null,d!==null?d:Re(a.type)||"Memo";case Ae:d=a._payload,a=a._init;try{return Re(a(d))}catch{}}return null}function Pe(a){var d=a.type;switch(a.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=d.render,a=a.displayName||a.name||"",d.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(d);case 8:return d===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ge(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function at(a){var d=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function st(a){var d=at(a)?"checked":"value",x=Object.getOwnPropertyDescriptor(a.constructor.prototype,d),b=""+a[d];if(!a.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var S=x.get,k=x.set;return Object.defineProperty(a,d,{configurable:!0,get:function(){return S.call(this)},set:function($){b=""+$,k.call(this,$)}}),Object.defineProperty(a,d,{enumerable:x.enumerable}),{getValue:function(){return b},setValue:function($){b=""+$},stopTracking:function(){a._valueTracker=null,delete a[d]}}}}function ct(a){a._valueTracker||(a._valueTracker=st(a))}function bt(a){if(!a)return!1;var d=a._valueTracker;if(!d)return!0;var x=d.getValue(),b="";return a&&(b=at(a)?a.checked?"true":"false":a.value),a=b,a!==x?(d.setValue(a),!0):!1}function ht(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function gn(a,d){var x=d.checked;return Ne({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:x??a._wrapperState.initialChecked})}function Bn(a,d){var x=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;x=Ge(d.value!=null?d.value:x),a._wrapperState={initialChecked:b,initialValue:x,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Dr(a,d){d=d.checked,d!=null&&W(a,"checked",d,!1)}function Qt(a,d){Dr(a,d);var x=Ge(d.value),b=d.type;if(x!=null)b==="number"?(x===0&&a.value===""||a.value!=x)&&(a.value=""+x):a.value!==""+x&&(a.value=""+x);else if(b==="submit"||b==="reset"){a.removeAttribute("value");return}d.hasOwnProperty("value")?pt(a,d.type,x):d.hasOwnProperty("defaultValue")&&pt(a,d.type,Ge(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(a.defaultChecked=!!d.defaultChecked)}function zt(a,d,x){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+a._wrapperState.initialValue,x||d===a.value||(a.value=d),a.defaultValue=d}x=a.name,x!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,x!==""&&(a.name=x)}function pt(a,d,x){(d!=="number"||ht(a.ownerDocument)!==a)&&(x==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+x&&(a.defaultValue=""+x))}var xi=Array.isArray;function Xe(a,d,x,b){if(a=a.options,d){d={};for(var S=0;S<x.length;S++)d["$"+x[S]]=!0;for(x=0;x<a.length;x++)S=d.hasOwnProperty("$"+a[x].value),a[x].selected!==S&&(a[x].selected=S),S&&b&&(a[x].defaultSelected=!0)}else{for(x=""+Ge(x),d=null,S=0;S<a.length;S++){if(a[S].value===x){a[S].selected=!0,b&&(a[S].defaultSelected=!0);return}d!==null||a[S].disabled||(d=a[S])}d!==null&&(d.selected=!0)}}function Xn(a,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ne({},d,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function wi(a,d){var x=d.value;if(x==null){if(x=d.children,d=d.defaultValue,x!=null){if(d!=null)throw Error(t(92));if(xi(x)){if(1<x.length)throw Error(t(93));x=x[0]}d=x}d==null&&(d=""),x=d}a._wrapperState={initialValue:Ge(x)}}function Yr(a,d){var x=Ge(d.value),b=Ge(d.defaultValue);x!=null&&(x=""+x,x!==a.value&&(a.value=x),d.defaultValue==null&&a.defaultValue!==x&&(a.defaultValue=x)),b!=null&&(a.defaultValue=""+b)}function no(a){var d=a.textContent;d===a._wrapperState.initialValue&&d!==""&&d!==null&&(a.value=d)}function Wt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yn(a,d){return a==null||a==="http://www.w3.org/1999/xhtml"?Wt(d):a==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Er,jn=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,x,b,S){MSApp.execUnsafeLocalFunction(function(){return a(d,x,b,S)})}:a}(function(a,d){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=d;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Er.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}});function Qr(a,d){if(d){var x=a.firstChild;if(x&&x===a.lastChild&&x.nodeType===3){x.nodeValue=d;return}}a.textContent=d}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(a){vi.forEach(function(d){d=d+a.charAt(0).toUpperCase()+a.substring(1),Fi[d]=Fi[a]})});function In(a,d,x){return d==null||typeof d=="boolean"||d===""?"":x||typeof d!="number"||d===0||Fi.hasOwnProperty(a)&&Fi[a]?(""+d).trim():d+"px"}function We(a,d){a=a.style;for(var x in d)if(d.hasOwnProperty(x)){var b=x.indexOf("--")===0,S=In(x,d[x],b);x==="float"&&(x="cssFloat"),b?a.setProperty(x,S):a[x]=S}}var An=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(a,d){if(d){if(An[a]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function pn(a,d){if(a.indexOf("-")===-1)return typeof d.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ai=null;function jr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ro=null,Ct=null,br=null;function Ls(a){if(a=fh(a)){if(typeof ro!="function")throw Error(t(280));var d=a.stateNode;d&&(d=Ip(d),ro(a.stateNode,a.type,d))}}function mt(a){Ct?br?br.push(a):br=[a]:Ct=a}function Gt(){if(Ct){var a=Ct,d=br;if(br=Ct=null,Ls(a),d)for(a=0;a<d.length;a++)Ls(d[a])}}function Tn(a,d){return a(d)}function $t(){}var Ir=!1;function Cn(a,d,x){if(Ir)return a(d,x);Ir=!0;try{return Tn(a,d,x)}finally{Ir=!1,(Ct!==null||br!==null)&&($t(),Gt())}}function Rt(a,d){var x=a.stateNode;if(x===null)return null;var b=Ip(x);if(b===null)return null;x=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(a=a.type,b=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!b;break e;default:a=!1}if(a)return null;if(x&&typeof x!="function")throw Error(t(231,d,typeof x));return x}var gs=!1;if(h)try{var cn={};Object.defineProperty(cn,"passive",{get:function(){gs=!0}}),window.addEventListener("test",cn,cn),window.removeEventListener("test",cn,cn)}catch{gs=!1}function ir(a,d,x,b,S,k,$,re,ce){var be=Array.prototype.slice.call(arguments,3);try{d.apply(x,be)}catch(Me){this.onError(Me)}}var Un=!1,dr=null,zn=!1,Ye=null,Ao={onError:function(a){Un=!0,dr=a}};function To(a,d,x,b,S,k,$,re,ce){Un=!1,dr=null,ir.apply(Ao,arguments)}function Ur(a,d,x,b,S,k,$,re,ce){if(To.apply(this,arguments),Un){if(Un){var be=dr;Un=!1,dr=null}else throw Error(t(198));zn||(zn=!0,Ye=be)}}function Zr(a){var d=a,x=a;if(a.alternate)for(;d.return;)d=d.return;else{a=d;do d=a,(d.flags&4098)!==0&&(x=d.return),a=d.return;while(a)}return d.tag===3?x:null}function Vs(a){if(a.tag===13){var d=a.memoizedState;if(d===null&&(a=a.alternate,a!==null&&(d=a.memoizedState)),d!==null)return d.dehydrated}return null}function _i(a){if(Zr(a)!==a)throw Error(t(188))}function Bi(a){var d=a.alternate;if(!d){if(d=Zr(a),d===null)throw Error(t(188));return d!==a?null:a}for(var x=a,b=d;;){var S=x.return;if(S===null)break;var k=S.alternate;if(k===null){if(b=S.return,b!==null){x=b;continue}break}if(S.child===k.child){for(k=S.child;k;){if(k===x)return _i(S),a;if(k===b)return _i(S),d;k=k.sibling}throw Error(t(188))}if(x.return!==b.return)x=S,b=k;else{for(var $=!1,re=S.child;re;){if(re===x){$=!0,x=S,b=k;break}if(re===b){$=!0,b=S,x=k;break}re=re.sibling}if(!$){for(re=k.child;re;){if(re===x){$=!0,x=k,b=S;break}if(re===b){$=!0,b=k,x=S;break}re=re.sibling}if(!$)throw Error(t(189))}}if(x.alternate!==b)throw Error(t(190))}if(x.tag!==3)throw Error(t(188));return x.stateNode.current===x?a:d}function ic(a){return a=Bi(a),a!==null?qa(a):null}function qa(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var d=qa(a);if(d!==null)return d;a=a.sibling}return null}var li=e.unstable_scheduleCallback,Ar=e.unstable_cancelCallback,yn=e.unstable_shouldYield,xu=e.unstable_requestPaint,Zt=e.unstable_now,Ka=e.unstable_getCurrentPriorityLevel,ke=e.unstable_ImmediatePriority,Co=e.unstable_UserBlockingPriority,Jt=e.unstable_NormalPriority,Fs=e.unstable_LowPriority,wu=e.unstable_IdlePriority,Ft=null,Nt=null;function Dt(a){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Ft,a,void 0,(a.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:Qn,la=Math.log,Xa=Math.LN2;function Qn(a){return a>>>=0,a===0?32:31-(la(a)/Xa|0)|0}var ji=64,Ya=4194304;function mn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ei(a,d){var x=a.pendingLanes;if(x===0)return 0;var b=0,S=a.suspendedLanes,k=a.pingedLanes,$=x&268435455;if($!==0){var re=$&~S;re!==0?b=mn(re):(k&=$,k!==0&&(b=mn(k)))}else $=x&~S,$!==0?b=mn($):k!==0&&(b=mn(k));if(b===0)return 0;if(d!==0&&d!==b&&(d&S)===0&&(S=b&-b,k=d&-d,S>=k||S===16&&(k&4194240)!==0))return d;if((b&4)!==0&&(b|=x&16),d=a.entangledLanes,d!==0)for(a=a.entanglements,d&=b;0<d;)x=31-zr(d),S=1<<x,b|=a[x],d&=~S;return b}function sh(a,d){switch(a){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(a,d){for(var x=a.suspendedLanes,b=a.pingedLanes,S=a.expirationTimes,k=a.pendingLanes;0<k;){var $=31-zr(k),re=1<<$,ce=S[$];ce===-1?((re&x)===0||(re&b)!==0)&&(S[$]=sh(re,d)):ce<=d&&(a.expiredLanes|=re),k&=~re}}function Ot(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Zn(){var a=ji;return ji<<=1,(ji&4194240)===0&&(ji=64),a}function pe(a){for(var d=[],x=0;31>x;x++)d.push(a);return d}function Q(a,d,x){a.pendingLanes|=d,d!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,d=31-zr(d),a[d]=x}function $e(a,d){var x=a.pendingLanes&~d;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=d,a.mutableReadLanes&=d,a.entangledLanes&=d,d=a.entanglements;var b=a.eventTimes;for(a=a.expirationTimes;0<x;){var S=31-zr(x),k=1<<S;d[S]=0,b[S]=-1,a[S]=-1,x&=~k}}function Rn(a,d){var x=a.entangledLanes|=d;for(a=a.entanglements;x;){var b=31-zr(x),S=1<<b;S&d|a[b]&d&&(a[b]|=d),x&=~S}}var It=0;function So(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Qa,Wr,ut,Sn,sc,oc=!1,Zi=[],hr=null,Ui=null,ys=null,Nn=new Map,Jr=new Map,Hr=[],xt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(a,d){switch(a){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Nn.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jr.delete(d.pointerId)}}function gt(a,d,x,b,S,k){return a===null||a.nativeEvent!==k?(a={blockedOn:d,domEventName:x,eventSystemFlags:b,nativeEvent:k,targetContainers:[S]},d!==null&&(d=fh(d),d!==null&&Wr(d)),a):(a.eventSystemFlags|=b,d=a.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),a)}function Tr(a,d,x,b,S){switch(d){case"focusin":return hr=gt(hr,a,d,x,b,S),!0;case"dragenter":return Ui=gt(Ui,a,d,x,b,S),!0;case"mouseover":return ys=gt(ys,a,d,x,b,S),!0;case"pointerover":var k=S.pointerId;return Nn.set(k,gt(Nn.get(k)||null,a,d,x,b,S)),!0;case"gotpointercapture":return k=S.pointerId,Jr.set(k,gt(Jr.get(k)||null,a,d,x,b,S)),!0}return!1}function _u(a){var d=uc(a.target);if(d!==null){var x=Zr(d);if(x!==null){if(d=x.tag,d===13){if(d=Vs(x),d!==null){a.blockedOn=d,sc(a.priority,function(){ut(x)});return}}else if(d===3&&x.stateNode.current.memoizedState.isDehydrated){a.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xs(a){if(a.blockedOn!==null)return!1;for(var d=a.targetContainers;0<d.length;){var x=ua(a.domEventName,a.eventSystemFlags,d[0],a.nativeEvent);if(x===null){x=a.nativeEvent;var b=new x.constructor(x.type,x);ai=b,x.target.dispatchEvent(b),ai=null}else return d=fh(x),d!==null&&Wr(d),a.blockedOn=x,!1;d.shift()}return!0}function Ro(a,d,x){xs(a)&&x.delete(d)}function Bs(){oc=!1,hr!==null&&xs(hr)&&(hr=null),Ui!==null&&xs(Ui)&&(Ui=null),ys!==null&&xs(ys)&&(ys=null),Nn.forEach(Ro),Jr.forEach(Ro)}function ws(a,d){a.blockedOn===d&&(a.blockedOn=null,oc||(oc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bs)))}function ci(a){function d(S){return ws(S,a)}if(0<Zi.length){ws(Zi[0],a);for(var x=1;x<Zi.length;x++){var b=Zi[x];b.blockedOn===a&&(b.blockedOn=null)}}for(hr!==null&&ws(hr,a),Ui!==null&&ws(Ui,a),ys!==null&&ws(ys,a),Nn.forEach(d),Jr.forEach(d),x=0;x<Hr.length;x++)b=Hr[x],b.blockedOn===a&&(b.blockedOn=null);for(;0<Hr.length&&(x=Hr[0],x.blockedOn===null);)_u(x),x.blockedOn===null&&Hr.shift()}var zi=Y.ReactCurrentBatchConfig,Ji=!0;function kn(a,d,x,b){var S=It,k=zi.transition;zi.transition=null;try{It=1,io(a,d,x,b)}finally{It=S,zi.transition=k}}function ca(a,d,x,b){var S=It,k=zi.transition;zi.transition=null;try{It=4,io(a,d,x,b)}finally{It=S,zi.transition=k}}function io(a,d,x,b){if(Ji){var S=ua(a,d,x,b);if(S===null)c1(a,d,b,fr,x),vu(a,b);else if(Tr(S,a,d,x,b))b.stopPropagation();else if(vu(a,b),d&4&&-1<xt.indexOf(a)){for(;S!==null;){var k=fh(S);if(k!==null&&Qa(k),k=ua(a,d,x,b),k===null&&c1(a,d,b,fr,x),k===S)break;S=k}S!==null&&b.stopPropagation()}else c1(a,d,b,null,x)}}var fr=null;function ua(a,d,x,b){if(fr=null,a=jr(b),a=uc(a),a!==null)if(d=Zr(a),d===null)a=null;else if(x=d.tag,x===13){if(a=Vs(d),a!==null)return a;a=null}else if(x===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;a=null}else d!==a&&(a=null);return fr=a,null}function Za(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ka()){case ke:return 1;case Co:return 4;case Jt:case Fs:return 16;case wu:return 536870912;default:return 16}default:return 16}}var Ii=null,Ja=null,Ai=null;function ac(){if(Ai)return Ai;var a,d=Ja,x=d.length,b,S="value"in Ii?Ii.value:Ii.textContent,k=S.length;for(a=0;a<x&&d[a]===S[a];a++);var $=x-a;for(b=1;b<=$&&d[x-b]===S[k-b];b++);return Ai=S.slice(a,1<b?1-b:void 0)}function en(a){var d=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&d===13&&(a=13)):a=d,a===10&&(a=13),32<=a||a===13?a:0}function vs(){return!0}function No(){return!1}function Dn(a){function d(x,b,S,k,$){this._reactName=x,this._targetInst=S,this.type=b,this.nativeEvent=k,this.target=$,this.currentTarget=null;for(var re in a)a.hasOwnProperty(re)&&(x=a[re],this[re]=x?x(k):k[re]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?vs:No,this.isPropagationStopped=No,this}return Ne(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),d}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_e=Dn(_s),_t=Ne({},_s,{view:0,detail:0}),Cr=Dn(_t),so,js,ko,da=Ne({},_t,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ko&&(ko&&a.type==="mousemove"?(so=a.screenX-ko.screenX,js=a.screenY-ko.screenY):js=so=0,ko=a),so)},movementY:function(a){return"movementY"in a?a.movementY:js}}),el=Dn(da),ha=Ne({},da,{dataTransfer:0}),Jn=Dn(ha),Po=Ne({},_t,{relatedTarget:0}),xn=Dn(Po),fa=Ne({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),ui=Dn(fa),sn=Ne({},_s,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ft=Dn(sn),Eu=Ne({},_s,{data:0}),un=Dn(Eu),es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wi(a){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(a):(a=bu[a])?!!d[a]:!1}function ts(){return Wi}var _=Ne({},_t,{key:function(a){if(a.key){var d=es[a.key]||a.key;if(d!=="Unidentified")return d}return a.type==="keypress"?(a=en(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?pr[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(a){return a.type==="keypress"?en(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?en(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),N=Dn(_),V=Ne({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X=Dn(V),me=Ne({},_t,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),Ie=Dn(me),He=Ne({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),dn=Dn(He),Wn=Ne({},da,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qt=Dn(Wn),Pn=[9,13,27,32],Hn=h&&"CompositionEvent"in window,Gn=null;h&&"documentMode"in document&&(Gn=document.documentMode);var Ti=h&&"TextEvent"in window&&!Gn,ei=h&&(!Hn||Gn&&8<Gn&&11>=Gn),tl=" ",Iu=!1;function xp(a,d){switch(a){case"keyup":return Pn.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oh(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var di=!1;function s1(a,d){switch(a){case"compositionend":return oh(d);case"keypress":return d.which!==32?null:(Iu=!0,tl);case"textInput":return a=d.data,a===tl&&Iu?null:a;default:return null}}function ah(a,d){if(di)return a==="compositionend"||!Hn&&xp(a,d)?(a=ac(),Ai=Ja=Ii=null,di=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return ei&&d.locale!=="ko"?null:d.data;default:return null}}var lc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d==="input"?!!lc[a.type]:d==="textarea"}function cc(a,d,x,b){mt(b),d=_p(d,"onChange"),0<d.length&&(x=new _e("onChange","change",null,x,b),a.push({event:x,listeners:d}))}var j=null,s=null;function l(a){U_(a,0)}function u(a){var d=Cu(a);if(bt(d))return a}function f(a,d){if(a==="change")return d}var p=!1;if(h){var y;if(h){var v="oninput"in document;if(!v){var I=document.createElement("div");I.setAttribute("oninput","return;"),v=typeof I.oninput=="function"}y=v}else y=!1;p=y&&(!document.documentMode||9<document.documentMode)}function C(){j&&(j.detachEvent("onpropertychange",O),s=j=null)}function O(a){if(a.propertyName==="value"&&u(s)){var d=[];cc(d,s,a,jr(a)),Cn(l,d)}}function U(a,d,x){a==="focusin"?(C(),j=d,s=x,j.attachEvent("onpropertychange",O)):a==="focusout"&&C()}function q(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return u(s)}function J(a,d){if(a==="click")return u(d)}function le(a,d){if(a==="input"||a==="change")return u(d)}function ue(a,d){return a===d&&(a!==0||1/a===1/d)||a!==a&&d!==d}var fe=typeof Object.is=="function"?Object.is:ue;function Ee(a,d){if(fe(a,d))return!0;if(typeof a!="object"||a===null||typeof d!="object"||d===null)return!1;var x=Object.keys(a),b=Object.keys(d);if(x.length!==b.length)return!1;for(b=0;b<x.length;b++){var S=x[b];if(!m.call(d,S)||!fe(a[S],d[S]))return!1}return!0}function Fe(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function je(a,d){var x=Fe(a);a=0;for(var b;x;){if(x.nodeType===3){if(b=a+x.textContent.length,a<=d&&b>=d)return{node:x,offset:d-a};a=b}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Fe(x)}}function Oe(a,d){return a&&d?a===d?!0:a&&a.nodeType===3?!1:d&&d.nodeType===3?Oe(a,d.parentNode):"contains"in a?a.contains(d):a.compareDocumentPosition?!!(a.compareDocumentPosition(d)&16):!1:!1}function Mt(){for(var a=window,d=ht();d instanceof a.HTMLIFrameElement;){try{var x=typeof d.contentWindow.location.href=="string"}catch{x=!1}if(x)a=d.contentWindow;else break;d=ht(a.document)}return d}function St(a){var d=a&&a.nodeName&&a.nodeName.toLowerCase();return d&&(d==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||d==="textarea"||a.contentEditable==="true")}function Ci(a){var d=Mt(),x=a.focusedElem,b=a.selectionRange;if(d!==x&&x&&x.ownerDocument&&Oe(x.ownerDocument.documentElement,x)){if(b!==null&&St(x)){if(d=b.start,a=b.end,a===void 0&&(a=d),"selectionStart"in x)x.selectionStart=d,x.selectionEnd=Math.min(a,x.value.length);else if(a=(d=x.ownerDocument||document)&&d.defaultView||window,a.getSelection){a=a.getSelection();var S=x.textContent.length,k=Math.min(b.start,S);b=b.end===void 0?k:Math.min(b.end,S),!a.extend&&k>b&&(S=b,b=k,k=S),S=je(x,k);var $=je(x,b);S&&$&&(a.rangeCount!==1||a.anchorNode!==S.node||a.anchorOffset!==S.offset||a.focusNode!==$.node||a.focusOffset!==$.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),a.removeAllRanges(),k>b?(a.addRange(d),a.extend($.node,$.offset)):(d.setEnd($.node,$.offset),a.addRange(d)))}}for(d=[],a=x;a=a.parentNode;)a.nodeType===1&&d.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<d.length;x++)a=d[x],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Es=h&&"documentMode"in document&&11>=document.documentMode,Sr=null,hn=null,sr=null,hi=!1;function pa(a,d,x){var b=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;hi||Sr==null||Sr!==ht(b)||(b=Sr,"selectionStart"in b&&St(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),sr&&Ee(sr,b)||(sr=b,b=_p(hn,"onSelect"),0<b.length&&(d=new _e("onSelect","select",null,d,x),a.push({event:d,listeners:b}),d.target=Sr)))}function oo(a,d){var x={};return x[a.toLowerCase()]=d.toLowerCase(),x["Webkit"+a]="webkit"+d,x["Moz"+a]="moz"+d,x}var nl={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionend:oo("Transition","TransitionEnd")},lh={},D_={};h&&(D_=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function wp(a){if(lh[a])return lh[a];if(!nl[a])return a;var d=nl[a],x;for(x in d)if(d.hasOwnProperty(x)&&x in D_)return lh[a]=d[x];return a}var O_=wp("animationend"),M_=wp("animationiteration"),L_=wp("animationstart"),V_=wp("transitionend"),F_=new Map,B_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(a,d){F_.set(a,d),o(d,[a])}for(var o1=0;o1<B_.length;o1++){var a1=B_[o1],i8=a1.toLowerCase(),s8=a1[0].toUpperCase()+a1.slice(1);rl(i8,"on"+s8)}rl(O_,"onAnimationEnd"),rl(M_,"onAnimationIteration"),rl(L_,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(V_,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ch));function j_(a,d,x){var b=a.type||"unknown-event";a.currentTarget=x,Ur(b,d,void 0,a),a.currentTarget=null}function U_(a,d){d=(d&4)!==0;for(var x=0;x<a.length;x++){var b=a[x],S=b.event;b=b.listeners;e:{var k=void 0;if(d)for(var $=b.length-1;0<=$;$--){var re=b[$],ce=re.instance,be=re.currentTarget;if(re=re.listener,ce!==k&&S.isPropagationStopped())break e;j_(S,re,be),k=ce}else for($=0;$<b.length;$++){if(re=b[$],ce=re.instance,be=re.currentTarget,re=re.listener,ce!==k&&S.isPropagationStopped())break e;j_(S,re,be),k=ce}}}if(zn)throw a=Ye,zn=!1,Ye=null,a}function $n(a,d){var x=d[m1];x===void 0&&(x=d[m1]=new Set);var b=a+"__bubble";x.has(b)||(z_(d,a,2,!1),x.add(b))}function l1(a,d,x){var b=0;d&&(b|=4),z_(x,a,b,d)}var vp="_reactListening"+Math.random().toString(36).slice(2);function uh(a){if(!a[vp]){a[vp]=!0,r.forEach(function(x){x!=="selectionchange"&&(o8.has(x)||l1(x,!1,a),l1(x,!0,a))});var d=a.nodeType===9?a:a.ownerDocument;d===null||d[vp]||(d[vp]=!0,l1("selectionchange",!1,d))}}function z_(a,d,x,b){switch(Za(d)){case 1:var S=kn;break;case 4:S=ca;break;default:S=io}x=S.bind(null,d,x,a),S=void 0,!gs||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),b?S!==void 0?a.addEventListener(d,x,{capture:!0,passive:S}):a.addEventListener(d,x,!0):S!==void 0?a.addEventListener(d,x,{passive:S}):a.addEventListener(d,x,!1)}function c1(a,d,x,b,S){var k=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var $=b.tag;if($===3||$===4){var re=b.stateNode.containerInfo;if(re===S||re.nodeType===8&&re.parentNode===S)break;if($===4)for($=b.return;$!==null;){var ce=$.tag;if((ce===3||ce===4)&&(ce=$.stateNode.containerInfo,ce===S||ce.nodeType===8&&ce.parentNode===S))return;$=$.return}for(;re!==null;){if($=uc(re),$===null)return;if(ce=$.tag,ce===5||ce===6){b=k=$;continue e}re=re.parentNode}}b=b.return}Cn(function(){var be=k,Me=jr(x),Ve=[];e:{var De=F_.get(a);if(De!==void 0){var Qe=_e,et=a;switch(a){case"keypress":if(en(x)===0)break e;case"keydown":case"keyup":Qe=N;break;case"focusin":et="focus",Qe=xn;break;case"focusout":et="blur",Qe=xn;break;case"beforeblur":case"afterblur":Qe=xn;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=el;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=Jn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=Ie;break;case O_:case M_:case L_:Qe=ui;break;case V_:Qe=dn;break;case"scroll":Qe=Cr;break;case"wheel":Qe=qt;break;case"copy":case"cut":case"paste":Qe=ft;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=X}var ot=(d&4)!==0,Rr=!ot&&a==="scroll",ye=ot?De!==null?De+"Capture":null:De;ot=[];for(var de=be,ve;de!==null;){ve=de;var Ue=ve.stateNode;if(ve.tag===5&&Ue!==null&&(ve=Ue,ye!==null&&(Ue=Rt(de,ye),Ue!=null&&ot.push(dh(de,Ue,ve)))),Rr)break;de=de.return}0<ot.length&&(De=new Qe(De,et,null,x,Me),Ve.push({event:De,listeners:ot}))}}if((d&7)===0){e:{if(De=a==="mouseover"||a==="pointerover",Qe=a==="mouseout"||a==="pointerout",De&&x!==ai&&(et=x.relatedTarget||x.fromElement)&&(uc(et)||et[ma]))break e;if((Qe||De)&&(De=Me.window===Me?Me:(De=Me.ownerDocument)?De.defaultView||De.parentWindow:window,Qe?(et=x.relatedTarget||x.toElement,Qe=be,et=et?uc(et):null,et!==null&&(Rr=Zr(et),et!==Rr||et.tag!==5&&et.tag!==6)&&(et=null)):(Qe=null,et=be),Qe!==et)){if(ot=el,Ue="onMouseLeave",ye="onMouseEnter",de="mouse",(a==="pointerout"||a==="pointerover")&&(ot=X,Ue="onPointerLeave",ye="onPointerEnter",de="pointer"),Rr=Qe==null?De:Cu(Qe),ve=et==null?De:Cu(et),De=new ot(Ue,de+"leave",Qe,x,Me),De.target=Rr,De.relatedTarget=ve,Ue=null,uc(Me)===be&&(ot=new ot(ye,de+"enter",et,x,Me),ot.target=ve,ot.relatedTarget=Rr,Ue=ot),Rr=Ue,Qe&&et)t:{for(ot=Qe,ye=et,de=0,ve=ot;ve;ve=Au(ve))de++;for(ve=0,Ue=ye;Ue;Ue=Au(Ue))ve++;for(;0<de-ve;)ot=Au(ot),de--;for(;0<ve-de;)ye=Au(ye),ve--;for(;de--;){if(ot===ye||ye!==null&&ot===ye.alternate)break t;ot=Au(ot),ye=Au(ye)}ot=null}else ot=null;Qe!==null&&W_(Ve,De,Qe,ot,!1),et!==null&&Rr!==null&&W_(Ve,Rr,et,ot,!0)}}e:{if(De=be?Cu(be):window,Qe=De.nodeName&&De.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&De.type==="file")var lt=f;else if(Kt(De))if(p)lt=le;else{lt=q;var wt=U}else(Qe=De.nodeName)&&Qe.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(lt=J);if(lt&&(lt=lt(a,be))){cc(Ve,lt,x,Me);break e}wt&&wt(a,De,be),a==="focusout"&&(wt=De._wrapperState)&&wt.controlled&&De.type==="number"&&pt(De,"number",De.value)}switch(wt=be?Cu(be):window,a){case"focusin":(Kt(wt)||wt.contentEditable==="true")&&(Sr=wt,hn=be,sr=null);break;case"focusout":sr=hn=Sr=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,pa(Ve,x,Me);break;case"selectionchange":if(Es)break;case"keydown":case"keyup":pa(Ve,x,Me)}var vt;if(Hn)e:{switch(a){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else di?xp(a,x)&&(Tt="onCompositionEnd"):a==="keydown"&&x.keyCode===229&&(Tt="onCompositionStart");Tt&&(ei&&x.locale!=="ko"&&(di||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&di&&(vt=ac()):(Ii=Me,Ja="value"in Ii?Ii.value:Ii.textContent,di=!0)),wt=_p(be,Tt),0<wt.length&&(Tt=new un(Tt,a,null,x,Me),Ve.push({event:Tt,listeners:wt}),vt?Tt.data=vt:(vt=oh(x),vt!==null&&(Tt.data=vt)))),(vt=Ti?s1(a,x):ah(a,x))&&(be=_p(be,"onBeforeInput"),0<be.length&&(Me=new un("onBeforeInput","beforeinput",null,x,Me),Ve.push({event:Me,listeners:be}),Me.data=vt))}U_(Ve,d)})}function dh(a,d,x){return{instance:a,listener:d,currentTarget:x}}function _p(a,d){for(var x=d+"Capture",b=[];a!==null;){var S=a,k=S.stateNode;S.tag===5&&k!==null&&(S=k,k=Rt(a,x),k!=null&&b.unshift(dh(a,k,S)),k=Rt(a,d),k!=null&&b.push(dh(a,k,S))),a=a.return}return b}function Au(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function W_(a,d,x,b,S){for(var k=d._reactName,$=[];x!==null&&x!==b;){var re=x,ce=re.alternate,be=re.stateNode;if(ce!==null&&ce===b)break;re.tag===5&&be!==null&&(re=be,S?(ce=Rt(x,k),ce!=null&&$.unshift(dh(x,ce,re))):S||(ce=Rt(x,k),ce!=null&&$.push(dh(x,ce,re)))),x=x.return}$.length!==0&&a.push({event:d,listeners:$})}var a8=/\r\n?/g,l8=/\u0000|\uFFFD/g;function H_(a){return(typeof a=="string"?a:""+a).replace(a8,`
`).replace(l8,"")}function Ep(a,d,x){if(d=H_(d),H_(a)!==d&&x)throw Error(t(425))}function bp(){}var u1=null,d1=null;function h1(a,d){return a==="textarea"||a==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var f1=typeof setTimeout=="function"?setTimeout:void 0,c8=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,u8=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(a){return G_.resolve(null).then(a).catch(d8)}:f1;function d8(a){setTimeout(function(){throw a})}function p1(a,d){var x=d,b=0;do{var S=x.nextSibling;if(a.removeChild(x),S&&S.nodeType===8)if(x=S.data,x==="/$"){if(b===0){a.removeChild(S),ci(d);return}b--}else x!=="$"&&x!=="$?"&&x!=="$!"||b++;x=S}while(x);ci(d)}function il(a){for(;a!=null;a=a.nextSibling){var d=a.nodeType;if(d===1||d===3)break;if(d===8){if(d=a.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return a}function $_(a){a=a.previousSibling;for(var d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="$"||x==="$!"||x==="$?"){if(d===0)return a;d--}else x==="/$"&&d++}a=a.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),Do="__reactFiber$"+Tu,hh="__reactProps$"+Tu,ma="__reactContainer$"+Tu,m1="__reactEvents$"+Tu,h8="__reactListeners$"+Tu,f8="__reactHandles$"+Tu;function uc(a){var d=a[Do];if(d)return d;for(var x=a.parentNode;x;){if(d=x[ma]||x[Do]){if(x=d.alternate,d.child!==null||x!==null&&x.child!==null)for(a=$_(a);a!==null;){if(x=a[Do])return x;a=$_(a)}return d}a=x,x=a.parentNode}return null}function fh(a){return a=a[Do]||a[ma],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Cu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Ip(a){return a[hh]||null}var g1=[],Su=-1;function sl(a){return{current:a}}function qn(a){0>Su||(a.current=g1[Su],g1[Su]=null,Su--)}function On(a,d){Su++,g1[Su]=a.current,a.current=d}var ol={},Si=sl(ol),ns=sl(!1),dc=ol;function Ru(a,d){var x=a.type.contextTypes;if(!x)return ol;var b=a.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var S={},k;for(k in x)S[k]=d[k];return b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=S),S}function rs(a){return a=a.childContextTypes,a!=null}function Ap(){qn(ns),qn(Si)}function q_(a,d,x){if(Si.current!==ol)throw Error(t(168));On(Si,d),On(ns,x)}function K_(a,d,x){var b=a.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return x;b=b.getChildContext();for(var S in b)if(!(S in d))throw Error(t(108,Pe(a)||"Unknown",S));return Ne({},x,b)}function Tp(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ol,dc=Si.current,On(Si,a),On(ns,ns.current),!0}function X_(a,d,x){var b=a.stateNode;if(!b)throw Error(t(169));x?(a=K_(a,d,dc),b.__reactInternalMemoizedMergedChildContext=a,qn(ns),qn(Si),On(Si,a)):qn(ns),On(ns,x)}var ga=null,Cp=!1,y1=!1;function Y_(a){ga===null?ga=[a]:ga.push(a)}function p8(a){Cp=!0,Y_(a)}function al(){if(!y1&&ga!==null){y1=!0;var a=0,d=It;try{var x=ga;for(It=1;a<x.length;a++){var b=x[a];do b=b(!0);while(b!==null)}ga=null,Cp=!1}catch(S){throw ga!==null&&(ga=ga.slice(a+1)),li(ke,al),S}finally{It=d,y1=!1}}return null}var Nu=[],ku=0,Sp=null,Rp=0,Us=[],zs=0,hc=null,ya=1,xa="";function fc(a,d){Nu[ku++]=Rp,Nu[ku++]=Sp,Sp=a,Rp=d}function Q_(a,d,x){Us[zs++]=ya,Us[zs++]=xa,Us[zs++]=hc,hc=a;var b=ya;a=xa;var S=32-zr(b)-1;b&=~(1<<S),x+=1;var k=32-zr(d)+S;if(30<k){var $=S-S%5;k=(b&(1<<$)-1).toString(32),b>>=$,S-=$,ya=1<<32-zr(d)+S|x<<S|b,xa=k+a}else ya=1<<k|x<<S|b,xa=a}function x1(a){a.return!==null&&(fc(a,1),Q_(a,1,0))}function w1(a){for(;a===Sp;)Sp=Nu[--ku],Nu[ku]=null,Rp=Nu[--ku],Nu[ku]=null;for(;a===hc;)hc=Us[--zs],Us[zs]=null,xa=Us[--zs],Us[zs]=null,ya=Us[--zs],Us[zs]=null}var bs=null,Is=null,er=!1,ao=null;function Z_(a,d){var x=$s(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=a,d=a.deletions,d===null?(a.deletions=[x],a.flags|=16):d.push(x)}function J_(a,d){switch(a.tag){case 5:var x=a.type;return d=d.nodeType!==1||x.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(a.stateNode=d,bs=a,Is=il(d.firstChild),!0):!1;case 6:return d=a.pendingProps===""||d.nodeType!==3?null:d,d!==null?(a.stateNode=d,bs=a,Is=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(x=hc!==null?{id:ya,overflow:xa}:null,a.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=$s(18,null,null,0),x.stateNode=d,x.return=a,a.child=x,bs=a,Is=null,!0):!1;default:return!1}}function v1(a){return(a.mode&1)!==0&&(a.flags&128)===0}function _1(a){if(er){var d=Is;if(d){var x=d;if(!J_(a,d)){if(v1(a))throw Error(t(418));d=il(x.nextSibling);var b=bs;d&&J_(a,d)?Z_(b,x):(a.flags=a.flags&-4097|2,er=!1,bs=a)}}else{if(v1(a))throw Error(t(418));a.flags=a.flags&-4097|2,er=!1,bs=a}}}function eE(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;bs=a}function Np(a){if(a!==bs)return!1;if(!er)return eE(a),er=!0,!1;var d;if((d=a.tag!==3)&&!(d=a.tag!==5)&&(d=a.type,d=d!=="head"&&d!=="body"&&!h1(a.type,a.memoizedProps)),d&&(d=Is)){if(v1(a))throw tE(),Error(t(418));for(;d;)Z_(a,d),d=il(d.nextSibling)}if(eE(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,d=0;a;){if(a.nodeType===8){var x=a.data;if(x==="/$"){if(d===0){Is=il(a.nextSibling);break e}d--}else x!=="$"&&x!=="$!"&&x!=="$?"||d++}a=a.nextSibling}Is=null}}else Is=bs?il(a.stateNode.nextSibling):null;return!0}function tE(){for(var a=Is;a;)a=il(a.nextSibling)}function Pu(){Is=bs=null,er=!1}function E1(a){ao===null?ao=[a]:ao.push(a)}var m8=Y.ReactCurrentBatchConfig;function ph(a,d,x){if(a=x.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(t(309));var b=x.stateNode}if(!b)throw Error(t(147,a));var S=b,k=""+a;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===k?d.ref:(d=function($){var re=S.refs;$===null?delete re[k]:re[k]=$},d._stringRef=k,d)}if(typeof a!="string")throw Error(t(284));if(!x._owner)throw Error(t(290,a))}return a}function kp(a,d){throw a=Object.prototype.toString.call(d),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":a))}function nE(a){var d=a._init;return d(a._payload)}function rE(a){function d(ye,de){if(a){var ve=ye.deletions;ve===null?(ye.deletions=[de],ye.flags|=16):ve.push(de)}}function x(ye,de){if(!a)return null;for(;de!==null;)d(ye,de),de=de.sibling;return null}function b(ye,de){for(ye=new Map;de!==null;)de.key!==null?ye.set(de.key,de):ye.set(de.index,de),de=de.sibling;return ye}function S(ye,de){return ye=ml(ye,de),ye.index=0,ye.sibling=null,ye}function k(ye,de,ve){return ye.index=ve,a?(ve=ye.alternate,ve!==null?(ve=ve.index,ve<de?(ye.flags|=2,de):ve):(ye.flags|=2,de)):(ye.flags|=1048576,de)}function $(ye){return a&&ye.alternate===null&&(ye.flags|=2),ye}function re(ye,de,ve,Ue){return de===null||de.tag!==6?(de=fy(ve,ye.mode,Ue),de.return=ye,de):(de=S(de,ve),de.return=ye,de)}function ce(ye,de,ve,Ue){var lt=ve.type;return lt===F?Me(ye,de,ve.props.children,Ue,ve.key):de!==null&&(de.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ae&&nE(lt)===de.type)?(Ue=S(de,ve.props),Ue.ref=ph(ye,de,ve),Ue.return=ye,Ue):(Ue=tm(ve.type,ve.key,ve.props,null,ye.mode,Ue),Ue.ref=ph(ye,de,ve),Ue.return=ye,Ue)}function be(ye,de,ve,Ue){return de===null||de.tag!==4||de.stateNode.containerInfo!==ve.containerInfo||de.stateNode.implementation!==ve.implementation?(de=py(ve,ye.mode,Ue),de.return=ye,de):(de=S(de,ve.children||[]),de.return=ye,de)}function Me(ye,de,ve,Ue,lt){return de===null||de.tag!==7?(de=_c(ve,ye.mode,Ue,lt),de.return=ye,de):(de=S(de,ve),de.return=ye,de)}function Ve(ye,de,ve){if(typeof de=="string"&&de!==""||typeof de=="number")return de=fy(""+de,ye.mode,ve),de.return=ye,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Z:return ve=tm(de.type,de.key,de.props,null,ye.mode,ve),ve.ref=ph(ye,null,de),ve.return=ye,ve;case ie:return de=py(de,ye.mode,ve),de.return=ye,de;case Ae:var Ue=de._init;return Ve(ye,Ue(de._payload),ve)}if(xi(de)||Te(de))return de=_c(de,ye.mode,ve,null),de.return=ye,de;kp(ye,de)}return null}function De(ye,de,ve,Ue){var lt=de!==null?de.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number")return lt!==null?null:re(ye,de,""+ve,Ue);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Z:return ve.key===lt?ce(ye,de,ve,Ue):null;case ie:return ve.key===lt?be(ye,de,ve,Ue):null;case Ae:return lt=ve._init,De(ye,de,lt(ve._payload),Ue)}if(xi(ve)||Te(ve))return lt!==null?null:Me(ye,de,ve,Ue,null);kp(ye,ve)}return null}function Qe(ye,de,ve,Ue,lt){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return ye=ye.get(ve)||null,re(de,ye,""+Ue,lt);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case Z:return ye=ye.get(Ue.key===null?ve:Ue.key)||null,ce(de,ye,Ue,lt);case ie:return ye=ye.get(Ue.key===null?ve:Ue.key)||null,be(de,ye,Ue,lt);case Ae:var wt=Ue._init;return Qe(ye,de,ve,wt(Ue._payload),lt)}if(xi(Ue)||Te(Ue))return ye=ye.get(ve)||null,Me(de,ye,Ue,lt,null);kp(de,Ue)}return null}function et(ye,de,ve,Ue){for(var lt=null,wt=null,vt=de,Tt=de=0,ri=null;vt!==null&&Tt<ve.length;Tt++){vt.index>Tt?(ri=vt,vt=null):ri=vt.sibling;var on=De(ye,vt,ve[Tt],Ue);if(on===null){vt===null&&(vt=ri);break}a&&vt&&on.alternate===null&&d(ye,vt),de=k(on,de,Tt),wt===null?lt=on:wt.sibling=on,wt=on,vt=ri}if(Tt===ve.length)return x(ye,vt),er&&fc(ye,Tt),lt;if(vt===null){for(;Tt<ve.length;Tt++)vt=Ve(ye,ve[Tt],Ue),vt!==null&&(de=k(vt,de,Tt),wt===null?lt=vt:wt.sibling=vt,wt=vt);return er&&fc(ye,Tt),lt}for(vt=b(ye,vt);Tt<ve.length;Tt++)ri=Qe(vt,ye,Tt,ve[Tt],Ue),ri!==null&&(a&&ri.alternate!==null&&vt.delete(ri.key===null?Tt:ri.key),de=k(ri,de,Tt),wt===null?lt=ri:wt.sibling=ri,wt=ri);return a&&vt.forEach(function(gl){return d(ye,gl)}),er&&fc(ye,Tt),lt}function ot(ye,de,ve,Ue){var lt=Te(ve);if(typeof lt!="function")throw Error(t(150));if(ve=lt.call(ve),ve==null)throw Error(t(151));for(var wt=lt=null,vt=de,Tt=de=0,ri=null,on=ve.next();vt!==null&&!on.done;Tt++,on=ve.next()){vt.index>Tt?(ri=vt,vt=null):ri=vt.sibling;var gl=De(ye,vt,on.value,Ue);if(gl===null){vt===null&&(vt=ri);break}a&&vt&&gl.alternate===null&&d(ye,vt),de=k(gl,de,Tt),wt===null?lt=gl:wt.sibling=gl,wt=gl,vt=ri}if(on.done)return x(ye,vt),er&&fc(ye,Tt),lt;if(vt===null){for(;!on.done;Tt++,on=ve.next())on=Ve(ye,on.value,Ue),on!==null&&(de=k(on,de,Tt),wt===null?lt=on:wt.sibling=on,wt=on);return er&&fc(ye,Tt),lt}for(vt=b(ye,vt);!on.done;Tt++,on=ve.next())on=Qe(vt,ye,Tt,on.value,Ue),on!==null&&(a&&on.alternate!==null&&vt.delete(on.key===null?Tt:on.key),de=k(on,de,Tt),wt===null?lt=on:wt.sibling=on,wt=on);return a&&vt.forEach(function(K8){return d(ye,K8)}),er&&fc(ye,Tt),lt}function Rr(ye,de,ve,Ue){if(typeof ve=="object"&&ve!==null&&ve.type===F&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case Z:e:{for(var lt=ve.key,wt=de;wt!==null;){if(wt.key===lt){if(lt=ve.type,lt===F){if(wt.tag===7){x(ye,wt.sibling),de=S(wt,ve.props.children),de.return=ye,ye=de;break e}}else if(wt.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ae&&nE(lt)===wt.type){x(ye,wt.sibling),de=S(wt,ve.props),de.ref=ph(ye,wt,ve),de.return=ye,ye=de;break e}x(ye,wt);break}else d(ye,wt);wt=wt.sibling}ve.type===F?(de=_c(ve.props.children,ye.mode,Ue,ve.key),de.return=ye,ye=de):(Ue=tm(ve.type,ve.key,ve.props,null,ye.mode,Ue),Ue.ref=ph(ye,de,ve),Ue.return=ye,ye=Ue)}return $(ye);case ie:e:{for(wt=ve.key;de!==null;){if(de.key===wt)if(de.tag===4&&de.stateNode.containerInfo===ve.containerInfo&&de.stateNode.implementation===ve.implementation){x(ye,de.sibling),de=S(de,ve.children||[]),de.return=ye,ye=de;break e}else{x(ye,de);break}else d(ye,de);de=de.sibling}de=py(ve,ye.mode,Ue),de.return=ye,ye=de}return $(ye);case Ae:return wt=ve._init,Rr(ye,de,wt(ve._payload),Ue)}if(xi(ve))return et(ye,de,ve,Ue);if(Te(ve))return ot(ye,de,ve,Ue);kp(ye,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"?(ve=""+ve,de!==null&&de.tag===6?(x(ye,de.sibling),de=S(de,ve),de.return=ye,ye=de):(x(ye,de),de=fy(ve,ye.mode,Ue),de.return=ye,ye=de),$(ye)):x(ye,de)}return Rr}var Du=rE(!0),iE=rE(!1),Pp=sl(null),Dp=null,Ou=null,b1=null;function I1(){b1=Ou=Dp=null}function A1(a){var d=Pp.current;qn(Pp),a._currentValue=d}function T1(a,d,x){for(;a!==null;){var b=a.alternate;if((a.childLanes&d)!==d?(a.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),a===x)break;a=a.return}}function Mu(a,d){Dp=a,b1=Ou=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&d)!==0&&(is=!0),a.firstContext=null)}function Ws(a){var d=a._currentValue;if(b1!==a)if(a={context:a,memoizedValue:d,next:null},Ou===null){if(Dp===null)throw Error(t(308));Ou=a,Dp.dependencies={lanes:0,firstContext:a}}else Ou=Ou.next=a;return d}var pc=null;function C1(a){pc===null?pc=[a]:pc.push(a)}function sE(a,d,x,b){var S=d.interleaved;return S===null?(x.next=x,C1(d)):(x.next=S.next,S.next=x),d.interleaved=x,wa(a,b)}function wa(a,d){a.lanes|=d;var x=a.alternate;for(x!==null&&(x.lanes|=d),x=a,a=a.return;a!==null;)a.childLanes|=d,x=a.alternate,x!==null&&(x.childLanes|=d),x=a,a=a.return;return x.tag===3?x.stateNode:null}var ll=!1;function S1(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oE(a,d){a=a.updateQueue,d.updateQueue===a&&(d.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function va(a,d){return{eventTime:a,lane:d,tag:0,payload:null,callback:null,next:null}}function cl(a,d,x){var b=a.updateQueue;if(b===null)return null;if(b=b.shared,(rn&2)!==0){var S=b.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),b.pending=d,wa(a,x)}return S=b.interleaved,S===null?(d.next=d,C1(b)):(d.next=S.next,S.next=d),b.interleaved=d,wa(a,x)}function Op(a,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}function aE(a,d){var x=a.updateQueue,b=a.alternate;if(b!==null&&(b=b.updateQueue,x===b)){var S=null,k=null;if(x=x.firstBaseUpdate,x!==null){do{var $={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};k===null?S=k=$:k=k.next=$,x=x.next}while(x!==null);k===null?S=k=d:k=k.next=d}else S=k=d;x={baseState:b.baseState,firstBaseUpdate:S,lastBaseUpdate:k,shared:b.shared,effects:b.effects},a.updateQueue=x;return}a=x.lastBaseUpdate,a===null?x.firstBaseUpdate=d:a.next=d,x.lastBaseUpdate=d}function Mp(a,d,x,b){var S=a.updateQueue;ll=!1;var k=S.firstBaseUpdate,$=S.lastBaseUpdate,re=S.shared.pending;if(re!==null){S.shared.pending=null;var ce=re,be=ce.next;ce.next=null,$===null?k=be:$.next=be,$=ce;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,re=Me.lastBaseUpdate,re!==$&&(re===null?Me.firstBaseUpdate=be:re.next=be,Me.lastBaseUpdate=ce))}if(k!==null){var Ve=S.baseState;$=0,Me=be=ce=null,re=k;do{var De=re.lane,Qe=re.eventTime;if((b&De)===De){Me!==null&&(Me=Me.next={eventTime:Qe,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var et=a,ot=re;switch(De=d,Qe=x,ot.tag){case 1:if(et=ot.payload,typeof et=="function"){Ve=et.call(Qe,Ve,De);break e}Ve=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=ot.payload,De=typeof et=="function"?et.call(Qe,Ve,De):et,De==null)break e;Ve=Ne({},Ve,De);break e;case 2:ll=!0}}re.callback!==null&&re.lane!==0&&(a.flags|=64,De=S.effects,De===null?S.effects=[re]:De.push(re))}else Qe={eventTime:Qe,lane:De,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Me===null?(be=Me=Qe,ce=Ve):Me=Me.next=Qe,$|=De;if(re=re.next,re===null){if(re=S.shared.pending,re===null)break;De=re,re=De.next,De.next=null,S.lastBaseUpdate=De,S.shared.pending=null}}while(!0);if(Me===null&&(ce=Ve),S.baseState=ce,S.firstBaseUpdate=be,S.lastBaseUpdate=Me,d=S.shared.interleaved,d!==null){S=d;do $|=S.lane,S=S.next;while(S!==d)}else k===null&&(S.shared.lanes=0);yc|=$,a.lanes=$,a.memoizedState=Ve}}function lE(a,d,x){if(a=d.effects,d.effects=null,a!==null)for(d=0;d<a.length;d++){var b=a[d],S=b.callback;if(S!==null){if(b.callback=null,b=x,typeof S!="function")throw Error(t(191,S));S.call(b)}}}var mh={},Oo=sl(mh),gh=sl(mh),yh=sl(mh);function mc(a){if(a===mh)throw Error(t(174));return a}function R1(a,d){switch(On(yh,d),On(gh,a),On(Oo,mh),a=d.nodeType,a){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Yn(null,"");break;default:a=a===8?d.parentNode:d,d=a.namespaceURI||null,a=a.tagName,d=Yn(d,a)}qn(Oo),On(Oo,d)}function Lu(){qn(Oo),qn(gh),qn(yh)}function cE(a){mc(yh.current);var d=mc(Oo.current),x=Yn(d,a.type);d!==x&&(On(gh,a),On(Oo,x))}function N1(a){gh.current===a&&(qn(Oo),qn(gh))}var or=sl(0);function Lp(a){for(var d=a;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||x.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var k1=[];function P1(){for(var a=0;a<k1.length;a++)k1[a]._workInProgressVersionPrimary=null;k1.length=0}var Vp=Y.ReactCurrentDispatcher,D1=Y.ReactCurrentBatchConfig,gc=0,ar=null,Gr=null,ti=null,Fp=!1,xh=!1,wh=0,g8=0;function Ri(){throw Error(t(321))}function O1(a,d){if(d===null)return!1;for(var x=0;x<d.length&&x<a.length;x++)if(!fe(a[x],d[x]))return!1;return!0}function M1(a,d,x,b,S,k){if(gc=k,ar=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Vp.current=a===null||a.memoizedState===null?v8:_8,a=x(b,S),xh){k=0;do{if(xh=!1,wh=0,25<=k)throw Error(t(301));k+=1,ti=Gr=null,d.updateQueue=null,Vp.current=E8,a=x(b,S)}while(xh)}if(Vp.current=Up,d=Gr!==null&&Gr.next!==null,gc=0,ti=Gr=ar=null,Fp=!1,d)throw Error(t(300));return a}function L1(){var a=wh!==0;return wh=0,a}function Mo(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ti===null?ar.memoizedState=ti=a:ti=ti.next=a,ti}function Hs(){if(Gr===null){var a=ar.alternate;a=a!==null?a.memoizedState:null}else a=Gr.next;var d=ti===null?ar.memoizedState:ti.next;if(d!==null)ti=d,Gr=a;else{if(a===null)throw Error(t(310));Gr=a,a={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},ti===null?ar.memoizedState=ti=a:ti=ti.next=a}return ti}function vh(a,d){return typeof d=="function"?d(a):d}function V1(a){var d=Hs(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=Gr,S=b.baseQueue,k=x.pending;if(k!==null){if(S!==null){var $=S.next;S.next=k.next,k.next=$}b.baseQueue=S=k,x.pending=null}if(S!==null){k=S.next,b=b.baseState;var re=$=null,ce=null,be=k;do{var Me=be.lane;if((gc&Me)===Me)ce!==null&&(ce=ce.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),b=be.hasEagerState?be.eagerState:a(b,be.action);else{var Ve={lane:Me,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};ce===null?(re=ce=Ve,$=b):ce=ce.next=Ve,ar.lanes|=Me,yc|=Me}be=be.next}while(be!==null&&be!==k);ce===null?$=b:ce.next=re,fe(b,d.memoizedState)||(is=!0),d.memoizedState=b,d.baseState=$,d.baseQueue=ce,x.lastRenderedState=b}if(a=x.interleaved,a!==null){S=a;do k=S.lane,ar.lanes|=k,yc|=k,S=S.next;while(S!==a)}else S===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function F1(a){var d=Hs(),x=d.queue;if(x===null)throw Error(t(311));x.lastRenderedReducer=a;var b=x.dispatch,S=x.pending,k=d.memoizedState;if(S!==null){x.pending=null;var $=S=S.next;do k=a(k,$.action),$=$.next;while($!==S);fe(k,d.memoizedState)||(is=!0),d.memoizedState=k,d.baseQueue===null&&(d.baseState=k),x.lastRenderedState=k}return[k,b]}function uE(){}function dE(a,d){var x=ar,b=Hs(),S=d(),k=!fe(b.memoizedState,S);if(k&&(b.memoizedState=S,is=!0),b=b.queue,B1(pE.bind(null,x,b,a),[a]),b.getSnapshot!==d||k||ti!==null&&ti.memoizedState.tag&1){if(x.flags|=2048,_h(9,fE.bind(null,x,b,S,d),void 0,null),ni===null)throw Error(t(349));(gc&30)!==0||hE(x,d,S)}return S}function hE(a,d,x){a.flags|=16384,a={getSnapshot:d,value:x},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.stores=[a]):(x=d.stores,x===null?d.stores=[a]:x.push(a))}function fE(a,d,x,b){d.value=x,d.getSnapshot=b,mE(d)&&gE(a)}function pE(a,d,x){return x(function(){mE(d)&&gE(a)})}function mE(a){var d=a.getSnapshot;a=a.value;try{var x=d();return!fe(a,x)}catch{return!0}}function gE(a){var d=wa(a,1);d!==null&&ho(d,a,1,-1)}function yE(a){var d=Mo();return typeof a=="function"&&(a=a()),d.memoizedState=d.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vh,lastRenderedState:a},d.queue=a,a=a.dispatch=w8.bind(null,ar,a),[d.memoizedState,a]}function _h(a,d,x,b){return a={tag:a,create:d,destroy:x,deps:b,next:null},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.lastEffect=a.next=a):(x=d.lastEffect,x===null?d.lastEffect=a.next=a:(b=x.next,x.next=a,a.next=b,d.lastEffect=a)),a}function xE(){return Hs().memoizedState}function Bp(a,d,x,b){var S=Mo();ar.flags|=a,S.memoizedState=_h(1|d,x,void 0,b===void 0?null:b)}function jp(a,d,x,b){var S=Hs();b=b===void 0?null:b;var k=void 0;if(Gr!==null){var $=Gr.memoizedState;if(k=$.destroy,b!==null&&O1(b,$.deps)){S.memoizedState=_h(d,x,k,b);return}}ar.flags|=a,S.memoizedState=_h(1|d,x,k,b)}function wE(a,d){return Bp(8390656,8,a,d)}function B1(a,d){return jp(2048,8,a,d)}function vE(a,d){return jp(4,2,a,d)}function _E(a,d){return jp(4,4,a,d)}function EE(a,d){if(typeof d=="function")return a=a(),d(a),function(){d(null)};if(d!=null)return a=a(),d.current=a,function(){d.current=null}}function bE(a,d,x){return x=x!=null?x.concat([a]):null,jp(4,4,EE.bind(null,d,a),x)}function j1(){}function IE(a,d){var x=Hs();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&O1(d,b[1])?b[0]:(x.memoizedState=[a,d],a)}function AE(a,d){var x=Hs();d=d===void 0?null:d;var b=x.memoizedState;return b!==null&&d!==null&&O1(d,b[1])?b[0]:(a=a(),x.memoizedState=[a,d],a)}function TE(a,d,x){return(gc&21)===0?(a.baseState&&(a.baseState=!1,is=!0),a.memoizedState=x):(fe(x,d)||(x=Zn(),ar.lanes|=x,yc|=x,a.baseState=!0),d)}function y8(a,d){var x=It;It=x!==0&&4>x?x:4,a(!0);var b=D1.transition;D1.transition={};try{a(!1),d()}finally{It=x,D1.transition=b}}function CE(){return Hs().memoizedState}function x8(a,d,x){var b=fl(a);if(x={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null},SE(a))RE(d,x);else if(x=sE(a,d,x,b),x!==null){var S=Gi();ho(x,a,b,S),NE(x,d,b)}}function w8(a,d,x){var b=fl(a),S={lane:b,action:x,hasEagerState:!1,eagerState:null,next:null};if(SE(a))RE(d,S);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=d.lastRenderedReducer,k!==null))try{var $=d.lastRenderedState,re=k($,x);if(S.hasEagerState=!0,S.eagerState=re,fe(re,$)){var ce=d.interleaved;ce===null?(S.next=S,C1(d)):(S.next=ce.next,ce.next=S),d.interleaved=S;return}}catch{}finally{}x=sE(a,d,S,b),x!==null&&(S=Gi(),ho(x,a,b,S),NE(x,d,b))}}function SE(a){var d=a.alternate;return a===ar||d!==null&&d===ar}function RE(a,d){xh=Fp=!0;var x=a.pending;x===null?d.next=d:(d.next=x.next,x.next=d),a.pending=d}function NE(a,d,x){if((x&4194240)!==0){var b=d.lanes;b&=a.pendingLanes,x|=b,d.lanes=x,Rn(a,x)}}var Up={readContext:Ws,useCallback:Ri,useContext:Ri,useEffect:Ri,useImperativeHandle:Ri,useInsertionEffect:Ri,useLayoutEffect:Ri,useMemo:Ri,useReducer:Ri,useRef:Ri,useState:Ri,useDebugValue:Ri,useDeferredValue:Ri,useTransition:Ri,useMutableSource:Ri,useSyncExternalStore:Ri,useId:Ri,unstable_isNewReconciler:!1},v8={readContext:Ws,useCallback:function(a,d){return Mo().memoizedState=[a,d===void 0?null:d],a},useContext:Ws,useEffect:wE,useImperativeHandle:function(a,d,x){return x=x!=null?x.concat([a]):null,Bp(4194308,4,EE.bind(null,d,a),x)},useLayoutEffect:function(a,d){return Bp(4194308,4,a,d)},useInsertionEffect:function(a,d){return Bp(4,2,a,d)},useMemo:function(a,d){var x=Mo();return d=d===void 0?null:d,a=a(),x.memoizedState=[a,d],a},useReducer:function(a,d,x){var b=Mo();return d=x!==void 0?x(d):d,b.memoizedState=b.baseState=d,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:d},b.queue=a,a=a.dispatch=x8.bind(null,ar,a),[b.memoizedState,a]},useRef:function(a){var d=Mo();return a={current:a},d.memoizedState=a},useState:yE,useDebugValue:j1,useDeferredValue:function(a){return Mo().memoizedState=a},useTransition:function(){var a=yE(!1),d=a[0];return a=y8.bind(null,a[1]),Mo().memoizedState=a,[d,a]},useMutableSource:function(){},useSyncExternalStore:function(a,d,x){var b=ar,S=Mo();if(er){if(x===void 0)throw Error(t(407));x=x()}else{if(x=d(),ni===null)throw Error(t(349));(gc&30)!==0||hE(b,d,x)}S.memoizedState=x;var k={value:x,getSnapshot:d};return S.queue=k,wE(pE.bind(null,b,k,a),[a]),b.flags|=2048,_h(9,fE.bind(null,b,k,x,d),void 0,null),x},useId:function(){var a=Mo(),d=ni.identifierPrefix;if(er){var x=xa,b=ya;x=(b&~(1<<32-zr(b)-1)).toString(32)+x,d=":"+d+"R"+x,x=wh++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=g8++,d=":"+d+"r"+x.toString(32)+":";return a.memoizedState=d},unstable_isNewReconciler:!1},_8={readContext:Ws,useCallback:IE,useContext:Ws,useEffect:B1,useImperativeHandle:bE,useInsertionEffect:vE,useLayoutEffect:_E,useMemo:AE,useReducer:V1,useRef:xE,useState:function(){return V1(vh)},useDebugValue:j1,useDeferredValue:function(a){var d=Hs();return TE(d,Gr.memoizedState,a)},useTransition:function(){var a=V1(vh)[0],d=Hs().memoizedState;return[a,d]},useMutableSource:uE,useSyncExternalStore:dE,useId:CE,unstable_isNewReconciler:!1},E8={readContext:Ws,useCallback:IE,useContext:Ws,useEffect:B1,useImperativeHandle:bE,useInsertionEffect:vE,useLayoutEffect:_E,useMemo:AE,useReducer:F1,useRef:xE,useState:function(){return F1(vh)},useDebugValue:j1,useDeferredValue:function(a){var d=Hs();return Gr===null?d.memoizedState=a:TE(d,Gr.memoizedState,a)},useTransition:function(){var a=F1(vh)[0],d=Hs().memoizedState;return[a,d]},useMutableSource:uE,useSyncExternalStore:dE,useId:CE,unstable_isNewReconciler:!1};function lo(a,d){if(a&&a.defaultProps){d=Ne({},d),a=a.defaultProps;for(var x in a)d[x]===void 0&&(d[x]=a[x]);return d}return d}function U1(a,d,x,b){d=a.memoizedState,x=x(b,d),x=x==null?d:Ne({},d,x),a.memoizedState=x,a.lanes===0&&(a.updateQueue.baseState=x)}var zp={isMounted:function(a){return(a=a._reactInternals)?Zr(a)===a:!1},enqueueSetState:function(a,d,x){a=a._reactInternals;var b=Gi(),S=fl(a),k=va(b,S);k.payload=d,x!=null&&(k.callback=x),d=cl(a,k,S),d!==null&&(ho(d,a,S,b),Op(d,a,S))},enqueueReplaceState:function(a,d,x){a=a._reactInternals;var b=Gi(),S=fl(a),k=va(b,S);k.tag=1,k.payload=d,x!=null&&(k.callback=x),d=cl(a,k,S),d!==null&&(ho(d,a,S,b),Op(d,a,S))},enqueueForceUpdate:function(a,d){a=a._reactInternals;var x=Gi(),b=fl(a),S=va(x,b);S.tag=2,d!=null&&(S.callback=d),d=cl(a,S,b),d!==null&&(ho(d,a,b,x),Op(d,a,b))}};function kE(a,d,x,b,S,k,$){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(b,k,$):d.prototype&&d.prototype.isPureReactComponent?!Ee(x,b)||!Ee(S,k):!0}function PE(a,d,x){var b=!1,S=ol,k=d.contextType;return typeof k=="object"&&k!==null?k=Ws(k):(S=rs(d)?dc:Si.current,b=d.contextTypes,k=(b=b!=null)?Ru(a,S):ol),d=new d(x,k),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=zp,a.stateNode=d,d._reactInternals=a,b&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=S,a.__reactInternalMemoizedMaskedChildContext=k),d}function DE(a,d,x,b){a=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,b),d.state!==a&&zp.enqueueReplaceState(d,d.state,null)}function z1(a,d,x,b){var S=a.stateNode;S.props=x,S.state=a.memoizedState,S.refs={},S1(a);var k=d.contextType;typeof k=="object"&&k!==null?S.context=Ws(k):(k=rs(d)?dc:Si.current,S.context=Ru(a,k)),S.state=a.memoizedState,k=d.getDerivedStateFromProps,typeof k=="function"&&(U1(a,d,k,x),S.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&zp.enqueueReplaceState(S,S.state,null),Mp(a,x,S,b),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308)}function Vu(a,d){try{var x="",b=d;do x+=it(b),b=b.return;while(b);var S=x}catch(k){S=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:d,stack:S,digest:null}}function W1(a,d,x){return{value:a,source:null,stack:x??null,digest:d??null}}function H1(a,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var b8=typeof WeakMap=="function"?WeakMap:Map;function OE(a,d,x){x=va(-1,x),x.tag=3,x.payload={element:null};var b=d.value;return x.callback=function(){Xp||(Xp=!0,sy=b),H1(a,d)},x}function ME(a,d,x){x=va(-1,x),x.tag=3;var b=a.type.getDerivedStateFromError;if(typeof b=="function"){var S=d.value;x.payload=function(){return b(S)},x.callback=function(){H1(a,d)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(x.callback=function(){H1(a,d),typeof b!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var $=d.stack;this.componentDidCatch(d.value,{componentStack:$!==null?$:""})}),x}function LE(a,d,x){var b=a.pingCache;if(b===null){b=a.pingCache=new b8;var S=new Set;b.set(d,S)}else S=b.get(d),S===void 0&&(S=new Set,b.set(d,S));S.has(x)||(S.add(x),a=V8.bind(null,a,d,x),d.then(a,a))}function VE(a){do{var d;if((d=a.tag===13)&&(d=a.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return a;a=a.return}while(a!==null);return null}function FE(a,d,x,b,S){return(a.mode&1)===0?(a===d?a.flags|=65536:(a.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=va(-1,1),d.tag=2,cl(x,d,1))),x.lanes|=1),a):(a.flags|=65536,a.lanes=S,a)}var I8=Y.ReactCurrentOwner,is=!1;function Hi(a,d,x,b){d.child=a===null?iE(d,null,x,b):Du(d,a.child,x,b)}function BE(a,d,x,b,S){x=x.render;var k=d.ref;return Mu(d,S),b=M1(a,d,x,b,k,S),x=L1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,_a(a,d,S)):(er&&x&&x1(d),d.flags|=1,Hi(a,d,b,S),d.child)}function jE(a,d,x,b,S){if(a===null){var k=x.type;return typeof k=="function"&&!hy(k)&&k.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=k,UE(a,d,k,b,S)):(a=tm(x.type,null,b,d,d.mode,S),a.ref=d.ref,a.return=d,d.child=a)}if(k=a.child,(a.lanes&S)===0){var $=k.memoizedProps;if(x=x.compare,x=x!==null?x:Ee,x($,b)&&a.ref===d.ref)return _a(a,d,S)}return d.flags|=1,a=ml(k,b),a.ref=d.ref,a.return=d,d.child=a}function UE(a,d,x,b,S){if(a!==null){var k=a.memoizedProps;if(Ee(k,b)&&a.ref===d.ref)if(is=!1,d.pendingProps=b=k,(a.lanes&S)!==0)(a.flags&131072)!==0&&(is=!0);else return d.lanes=a.lanes,_a(a,d,S)}return G1(a,d,x,b,S)}function zE(a,d,x){var b=d.pendingProps,S=b.children,k=a!==null?a.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(Bu,As),As|=x;else{if((x&1073741824)===0)return a=k!==null?k.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:a,cachePool:null,transitions:null},d.updateQueue=null,On(Bu,As),As|=a,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=k!==null?k.baseLanes:x,On(Bu,As),As|=b}else k!==null?(b=k.baseLanes|x,d.memoizedState=null):b=x,On(Bu,As),As|=b;return Hi(a,d,S,x),d.child}function WE(a,d){var x=d.ref;(a===null&&x!==null||a!==null&&a.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function G1(a,d,x,b,S){var k=rs(x)?dc:Si.current;return k=Ru(d,k),Mu(d,S),x=M1(a,d,x,b,k,S),b=L1(),a!==null&&!is?(d.updateQueue=a.updateQueue,d.flags&=-2053,a.lanes&=~S,_a(a,d,S)):(er&&b&&x1(d),d.flags|=1,Hi(a,d,x,S),d.child)}function HE(a,d,x,b,S){if(rs(x)){var k=!0;Tp(d)}else k=!1;if(Mu(d,S),d.stateNode===null)Hp(a,d),PE(d,x,b),z1(d,x,b,S),b=!0;else if(a===null){var $=d.stateNode,re=d.memoizedProps;$.props=re;var ce=$.context,be=x.contextType;typeof be=="object"&&be!==null?be=Ws(be):(be=rs(x)?dc:Si.current,be=Ru(d,be));var Me=x.getDerivedStateFromProps,Ve=typeof Me=="function"||typeof $.getSnapshotBeforeUpdate=="function";Ve||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(re!==b||ce!==be)&&DE(d,$,b,be),ll=!1;var De=d.memoizedState;$.state=De,Mp(d,b,$,S),ce=d.memoizedState,re!==b||De!==ce||ns.current||ll?(typeof Me=="function"&&(U1(d,x,Me,b),ce=d.memoizedState),(re=ll||kE(d,x,re,b,De,ce,be))?(Ve||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(d.flags|=4194308)):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ce),$.props=b,$.state=ce,$.context=be,b=re):(typeof $.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{$=d.stateNode,oE(a,d),re=d.memoizedProps,be=d.type===d.elementType?re:lo(d.type,re),$.props=be,Ve=d.pendingProps,De=$.context,ce=x.contextType,typeof ce=="object"&&ce!==null?ce=Ws(ce):(ce=rs(x)?dc:Si.current,ce=Ru(d,ce));var Qe=x.getDerivedStateFromProps;(Me=typeof Qe=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(re!==Ve||De!==ce)&&DE(d,$,b,ce),ll=!1,De=d.memoizedState,$.state=De,Mp(d,b,$,S);var et=d.memoizedState;re!==Ve||De!==et||ns.current||ll?(typeof Qe=="function"&&(U1(d,x,Qe,b),et=d.memoizedState),(be=ll||kE(d,x,be,b,De,et,ce)||!1)?(Me||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(b,et,ce),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(b,et,ce)),typeof $.componentDidUpdate=="function"&&(d.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof $.componentDidUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=et),$.props=b,$.state=et,$.context=ce,b=be):(typeof $.componentDidUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||re===a.memoizedProps&&De===a.memoizedState||(d.flags|=1024),b=!1)}return $1(a,d,x,b,k,S)}function $1(a,d,x,b,S,k){WE(a,d);var $=(d.flags&128)!==0;if(!b&&!$)return S&&X_(d,x,!1),_a(a,d,k);b=d.stateNode,I8.current=d;var re=$&&typeof x.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,a!==null&&$?(d.child=Du(d,a.child,null,k),d.child=Du(d,null,re,k)):Hi(a,d,re,k),d.memoizedState=b.state,S&&X_(d,x,!0),d.child}function GE(a){var d=a.stateNode;d.pendingContext?q_(a,d.pendingContext,d.pendingContext!==d.context):d.context&&q_(a,d.context,!1),R1(a,d.containerInfo)}function $E(a,d,x,b,S){return Pu(),E1(S),d.flags|=256,Hi(a,d,x,b),d.child}var q1={dehydrated:null,treeContext:null,retryLane:0};function K1(a){return{baseLanes:a,cachePool:null,transitions:null}}function qE(a,d,x){var b=d.pendingProps,S=or.current,k=!1,$=(d.flags&128)!==0,re;if((re=$)||(re=a!==null&&a.memoizedState===null?!1:(S&2)!==0),re?(k=!0,d.flags&=-129):(a===null||a.memoizedState!==null)&&(S|=1),On(or,S&1),a===null)return _1(d),a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((d.mode&1)===0?d.lanes=1:a.data==="$!"?d.lanes=8:d.lanes=1073741824,null):($=b.children,a=b.fallback,k?(b=d.mode,k=d.child,$={mode:"hidden",children:$},(b&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=$):k=nm($,b,0,null),a=_c(a,b,x,null),k.return=d,a.return=d,k.sibling=a,d.child=k,d.child.memoizedState=K1(x),d.memoizedState=q1,a):X1(d,$));if(S=a.memoizedState,S!==null&&(re=S.dehydrated,re!==null))return A8(a,d,$,b,re,S,x);if(k){k=b.fallback,$=d.mode,S=a.child,re=S.sibling;var ce={mode:"hidden",children:b.children};return($&1)===0&&d.child!==S?(b=d.child,b.childLanes=0,b.pendingProps=ce,d.deletions=null):(b=ml(S,ce),b.subtreeFlags=S.subtreeFlags&14680064),re!==null?k=ml(re,k):(k=_c(k,$,x,null),k.flags|=2),k.return=d,b.return=d,b.sibling=k,d.child=b,b=k,k=d.child,$=a.child.memoizedState,$=$===null?K1(x):{baseLanes:$.baseLanes|x,cachePool:null,transitions:$.transitions},k.memoizedState=$,k.childLanes=a.childLanes&~x,d.memoizedState=q1,b}return k=a.child,a=k.sibling,b=ml(k,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=x),b.return=d,b.sibling=null,a!==null&&(x=d.deletions,x===null?(d.deletions=[a],d.flags|=16):x.push(a)),d.child=b,d.memoizedState=null,b}function X1(a,d){return d=nm({mode:"visible",children:d},a.mode,0,null),d.return=a,a.child=d}function Wp(a,d,x,b){return b!==null&&E1(b),Du(d,a.child,null,x),a=X1(d,d.pendingProps.children),a.flags|=2,d.memoizedState=null,a}function A8(a,d,x,b,S,k,$){if(x)return d.flags&256?(d.flags&=-257,b=W1(Error(t(422))),Wp(a,d,$,b)):d.memoizedState!==null?(d.child=a.child,d.flags|=128,null):(k=b.fallback,S=d.mode,b=nm({mode:"visible",children:b.children},S,0,null),k=_c(k,S,$,null),k.flags|=2,b.return=d,k.return=d,b.sibling=k,d.child=b,(d.mode&1)!==0&&Du(d,a.child,null,$),d.child.memoizedState=K1($),d.memoizedState=q1,k);if((d.mode&1)===0)return Wp(a,d,$,null);if(S.data==="$!"){if(b=S.nextSibling&&S.nextSibling.dataset,b)var re=b.dgst;return b=re,k=Error(t(419)),b=W1(k,b,void 0),Wp(a,d,$,b)}if(re=($&a.childLanes)!==0,is||re){if(b=ni,b!==null){switch($&-$){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(b.suspendedLanes|$))!==0?0:S,S!==0&&S!==k.retryLane&&(k.retryLane=S,wa(a,S),ho(b,a,S,-1))}return dy(),b=W1(Error(t(421))),Wp(a,d,$,b)}return S.data==="$?"?(d.flags|=128,d.child=a.child,d=F8.bind(null,a),S._reactRetry=d,null):(a=k.treeContext,Is=il(S.nextSibling),bs=d,er=!0,ao=null,a!==null&&(Us[zs++]=ya,Us[zs++]=xa,Us[zs++]=hc,ya=a.id,xa=a.overflow,hc=d),d=X1(d,b.children),d.flags|=4096,d)}function KE(a,d,x){a.lanes|=d;var b=a.alternate;b!==null&&(b.lanes|=d),T1(a.return,d,x)}function Y1(a,d,x,b,S){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:x,tailMode:S}:(k.isBackwards=d,k.rendering=null,k.renderingStartTime=0,k.last=b,k.tail=x,k.tailMode=S)}function XE(a,d,x){var b=d.pendingProps,S=b.revealOrder,k=b.tail;if(Hi(a,d,b.children,x),b=or.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=d.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&KE(a,x,d);else if(a.tag===19)KE(a,x,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===d)break e;for(;a.sibling===null;){if(a.return===null||a.return===d)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}b&=1}if(On(or,b),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(x=d.child,S=null;x!==null;)a=x.alternate,a!==null&&Lp(a)===null&&(S=x),x=x.sibling;x=S,x===null?(S=d.child,d.child=null):(S=x.sibling,x.sibling=null),Y1(d,!1,S,x,k);break;case"backwards":for(x=null,S=d.child,d.child=null;S!==null;){if(a=S.alternate,a!==null&&Lp(a)===null){d.child=S;break}a=S.sibling,S.sibling=x,x=S,S=a}Y1(d,!0,x,null,k);break;case"together":Y1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Hp(a,d){(d.mode&1)===0&&a!==null&&(a.alternate=null,d.alternate=null,d.flags|=2)}function _a(a,d,x){if(a!==null&&(d.dependencies=a.dependencies),yc|=d.lanes,(x&d.childLanes)===0)return null;if(a!==null&&d.child!==a.child)throw Error(t(153));if(d.child!==null){for(a=d.child,x=ml(a,a.pendingProps),d.child=x,x.return=d;a.sibling!==null;)a=a.sibling,x=x.sibling=ml(a,a.pendingProps),x.return=d;x.sibling=null}return d.child}function T8(a,d,x){switch(d.tag){case 3:GE(d),Pu();break;case 5:cE(d);break;case 1:rs(d.type)&&Tp(d);break;case 4:R1(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,S=d.memoizedProps.value;On(Pp,b._currentValue),b._currentValue=S;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(On(or,or.current&1),d.flags|=128,null):(x&d.child.childLanes)!==0?qE(a,d,x):(On(or,or.current&1),a=_a(a,d,x),a!==null?a.sibling:null);On(or,or.current&1);break;case 19:if(b=(x&d.childLanes)!==0,(a.flags&128)!==0){if(b)return XE(a,d,x);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),On(or,or.current),b)break;return null;case 22:case 23:return d.lanes=0,zE(a,d,x)}return _a(a,d,x)}var YE,Q1,QE,ZE;YE=function(a,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Q1=function(){},QE=function(a,d,x,b){var S=a.memoizedProps;if(S!==b){a=d.stateNode,mc(Oo.current);var k=null;switch(x){case"input":S=gn(a,S),b=gn(a,b),k=[];break;case"select":S=Ne({},S,{value:void 0}),b=Ne({},b,{value:void 0}),k=[];break;case"textarea":S=Xn(a,S),b=Xn(a,b),k=[];break;default:typeof S.onClick!="function"&&typeof b.onClick=="function"&&(a.onclick=bp)}Ht(x,b);var $;x=null;for(be in S)if(!b.hasOwnProperty(be)&&S.hasOwnProperty(be)&&S[be]!=null)if(be==="style"){var re=S[be];for($ in re)re.hasOwnProperty($)&&(x||(x={}),x[$]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(i.hasOwnProperty(be)?k||(k=[]):(k=k||[]).push(be,null));for(be in b){var ce=b[be];if(re=S!=null?S[be]:void 0,b.hasOwnProperty(be)&&ce!==re&&(ce!=null||re!=null))if(be==="style")if(re){for($ in re)!re.hasOwnProperty($)||ce&&ce.hasOwnProperty($)||(x||(x={}),x[$]="");for($ in ce)ce.hasOwnProperty($)&&re[$]!==ce[$]&&(x||(x={}),x[$]=ce[$])}else x||(k||(k=[]),k.push(be,x)),x=ce;else be==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,re=re?re.__html:void 0,ce!=null&&re!==ce&&(k=k||[]).push(be,ce)):be==="children"?typeof ce!="string"&&typeof ce!="number"||(k=k||[]).push(be,""+ce):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(i.hasOwnProperty(be)?(ce!=null&&be==="onScroll"&&$n("scroll",a),k||re===ce||(k=[])):(k=k||[]).push(be,ce))}x&&(k=k||[]).push("style",x);var be=k;(d.updateQueue=be)&&(d.flags|=4)}},ZE=function(a,d,x,b){x!==b&&(d.flags|=4)};function Eh(a,d){if(!er)switch(a.tailMode){case"hidden":d=a.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?a.tail=null:x.sibling=null;break;case"collapsed":x=a.tail;for(var b=null;x!==null;)x.alternate!==null&&(b=x),x=x.sibling;b===null?d||a.tail===null?a.tail=null:a.tail.sibling=null:b.sibling=null}}function Ni(a){var d=a.alternate!==null&&a.alternate.child===a.child,x=0,b=0;if(d)for(var S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags&14680064,b|=S.flags&14680064,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)x|=S.lanes|S.childLanes,b|=S.subtreeFlags,b|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=b,a.childLanes=x,d}function C8(a,d,x){var b=d.pendingProps;switch(w1(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(d),null;case 1:return rs(d.type)&&Ap(),Ni(d),null;case 3:return b=d.stateNode,Lu(),qn(ns),qn(Si),P1(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(a===null||a.child===null)&&(Np(d)?d.flags|=4:a===null||a.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,ao!==null&&(ly(ao),ao=null))),Q1(a,d),Ni(d),null;case 5:N1(d);var S=mc(yh.current);if(x=d.type,a!==null&&d.stateNode!=null)QE(a,d,x,b,S),a.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(t(166));return Ni(d),null}if(a=mc(Oo.current),Np(d)){b=d.stateNode,x=d.type;var k=d.memoizedProps;switch(b[Do]=d,b[hh]=k,a=(d.mode&1)!==0,x){case"dialog":$n("cancel",b),$n("close",b);break;case"iframe":case"object":case"embed":$n("load",b);break;case"video":case"audio":for(S=0;S<ch.length;S++)$n(ch[S],b);break;case"source":$n("error",b);break;case"img":case"image":case"link":$n("error",b),$n("load",b);break;case"details":$n("toggle",b);break;case"input":Bn(b,k),$n("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!k.multiple},$n("invalid",b);break;case"textarea":wi(b,k),$n("invalid",b)}Ht(x,k),S=null;for(var $ in k)if(k.hasOwnProperty($)){var re=k[$];$==="children"?typeof re=="string"?b.textContent!==re&&(k.suppressHydrationWarning!==!0&&Ep(b.textContent,re,a),S=["children",re]):typeof re=="number"&&b.textContent!==""+re&&(k.suppressHydrationWarning!==!0&&Ep(b.textContent,re,a),S=["children",""+re]):i.hasOwnProperty($)&&re!=null&&$==="onScroll"&&$n("scroll",b)}switch(x){case"input":ct(b),zt(b,k,!0);break;case"textarea":ct(b),no(b);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(b.onclick=bp)}b=S,d.updateQueue=b,b!==null&&(d.flags|=4)}else{$=S.nodeType===9?S:S.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Wt(x)),a==="http://www.w3.org/1999/xhtml"?x==="script"?(a=$.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof b.is=="string"?a=$.createElement(x,{is:b.is}):(a=$.createElement(x),x==="select"&&($=a,b.multiple?$.multiple=!0:b.size&&($.size=b.size))):a=$.createElementNS(a,x),a[Do]=d,a[hh]=b,YE(a,d,!1,!1),d.stateNode=a;e:{switch($=pn(x,b),x){case"dialog":$n("cancel",a),$n("close",a),S=b;break;case"iframe":case"object":case"embed":$n("load",a),S=b;break;case"video":case"audio":for(S=0;S<ch.length;S++)$n(ch[S],a);S=b;break;case"source":$n("error",a),S=b;break;case"img":case"image":case"link":$n("error",a),$n("load",a),S=b;break;case"details":$n("toggle",a),S=b;break;case"input":Bn(a,b),S=gn(a,b),$n("invalid",a);break;case"option":S=b;break;case"select":a._wrapperState={wasMultiple:!!b.multiple},S=Ne({},b,{value:void 0}),$n("invalid",a);break;case"textarea":wi(a,b),S=Xn(a,b),$n("invalid",a);break;default:S=b}Ht(x,S),re=S;for(k in re)if(re.hasOwnProperty(k)){var ce=re[k];k==="style"?We(a,ce):k==="dangerouslySetInnerHTML"?(ce=ce?ce.__html:void 0,ce!=null&&jn(a,ce)):k==="children"?typeof ce=="string"?(x!=="textarea"||ce!=="")&&Qr(a,ce):typeof ce=="number"&&Qr(a,""+ce):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(i.hasOwnProperty(k)?ce!=null&&k==="onScroll"&&$n("scroll",a):ce!=null&&W(a,k,ce,$))}switch(x){case"input":ct(a),zt(a,b,!1);break;case"textarea":ct(a),no(a);break;case"option":b.value!=null&&a.setAttribute("value",""+Ge(b.value));break;case"select":a.multiple=!!b.multiple,k=b.value,k!=null?Xe(a,!!b.multiple,k,!1):b.defaultValue!=null&&Xe(a,!!b.multiple,b.defaultValue,!0);break;default:typeof S.onClick=="function"&&(a.onclick=bp)}switch(x){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ni(d),null;case 6:if(a&&d.stateNode!=null)ZE(a,d,a.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(t(166));if(x=mc(yh.current),mc(Oo.current),Np(d)){if(b=d.stateNode,x=d.memoizedProps,b[Do]=d,(k=b.nodeValue!==x)&&(a=bs,a!==null))switch(a.tag){case 3:Ep(b.nodeValue,x,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Ep(b.nodeValue,x,(a.mode&1)!==0)}k&&(d.flags|=4)}else b=(x.nodeType===9?x:x.ownerDocument).createTextNode(b),b[Do]=d,d.stateNode=b}return Ni(d),null;case 13:if(qn(or),b=d.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(er&&Is!==null&&(d.mode&1)!==0&&(d.flags&128)===0)tE(),Pu(),d.flags|=98560,k=!1;else if(k=Np(d),b!==null&&b.dehydrated!==null){if(a===null){if(!k)throw Error(t(318));if(k=d.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(t(317));k[Do]=d}else Pu(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ni(d),k=!1}else ao!==null&&(ly(ao),ao=null),k=!0;if(!k)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=x,d):(b=b!==null,b!==(a!==null&&a.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(a===null||(or.current&1)!==0?$r===0&&($r=3):dy())),d.updateQueue!==null&&(d.flags|=4),Ni(d),null);case 4:return Lu(),Q1(a,d),a===null&&uh(d.stateNode.containerInfo),Ni(d),null;case 10:return A1(d.type._context),Ni(d),null;case 17:return rs(d.type)&&Ap(),Ni(d),null;case 19:if(qn(or),k=d.memoizedState,k===null)return Ni(d),null;if(b=(d.flags&128)!==0,$=k.rendering,$===null)if(b)Eh(k,!1);else{if($r!==0||a!==null&&(a.flags&128)!==0)for(a=d.child;a!==null;){if($=Lp(a),$!==null){for(d.flags|=128,Eh(k,!1),b=$.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=x,x=d.child;x!==null;)k=x,a=b,k.flags&=14680066,$=k.alternate,$===null?(k.childLanes=0,k.lanes=a,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=$.childLanes,k.lanes=$.lanes,k.child=$.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=$.memoizedProps,k.memoizedState=$.memoizedState,k.updateQueue=$.updateQueue,k.type=$.type,a=$.dependencies,k.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),x=x.sibling;return On(or,or.current&1|2),d.child}a=a.sibling}k.tail!==null&&Zt()>ju&&(d.flags|=128,b=!0,Eh(k,!1),d.lanes=4194304)}else{if(!b)if(a=Lp($),a!==null){if(d.flags|=128,b=!0,x=a.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),Eh(k,!0),k.tail===null&&k.tailMode==="hidden"&&!$.alternate&&!er)return Ni(d),null}else 2*Zt()-k.renderingStartTime>ju&&x!==1073741824&&(d.flags|=128,b=!0,Eh(k,!1),d.lanes=4194304);k.isBackwards?($.sibling=d.child,d.child=$):(x=k.last,x!==null?x.sibling=$:d.child=$,k.last=$)}return k.tail!==null?(d=k.tail,k.rendering=d,k.tail=d.sibling,k.renderingStartTime=Zt(),d.sibling=null,x=or.current,On(or,b?x&1|2:x&1),d):(Ni(d),null);case 22:case 23:return uy(),b=d.memoizedState!==null,a!==null&&a.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(As&1073741824)!==0&&(Ni(d),d.subtreeFlags&6&&(d.flags|=8192)):Ni(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function S8(a,d){switch(w1(d),d.tag){case 1:return rs(d.type)&&Ap(),a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 3:return Lu(),qn(ns),qn(Si),P1(),a=d.flags,(a&65536)!==0&&(a&128)===0?(d.flags=a&-65537|128,d):null;case 5:return N1(d),null;case 13:if(qn(or),a=d.memoizedState,a!==null&&a.dehydrated!==null){if(d.alternate===null)throw Error(t(340));Pu()}return a=d.flags,a&65536?(d.flags=a&-65537|128,d):null;case 19:return qn(or),null;case 4:return Lu(),null;case 10:return A1(d.type._context),null;case 22:case 23:return uy(),null;case 24:return null;default:return null}}var Gp=!1,ki=!1,R8=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Fu(a,d){var x=a.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(b){mr(a,d,b)}else x.current=null}function Z1(a,d,x){try{x()}catch(b){mr(a,d,b)}}var JE=!1;function N8(a,d){if(u1=Ji,a=Mt(),St(a)){if("selectionStart"in a)var x={start:a.selectionStart,end:a.selectionEnd};else e:{x=(x=a.ownerDocument)&&x.defaultView||window;var b=x.getSelection&&x.getSelection();if(b&&b.rangeCount!==0){x=b.anchorNode;var S=b.anchorOffset,k=b.focusNode;b=b.focusOffset;try{x.nodeType,k.nodeType}catch{x=null;break e}var $=0,re=-1,ce=-1,be=0,Me=0,Ve=a,De=null;t:for(;;){for(var Qe;Ve!==x||S!==0&&Ve.nodeType!==3||(re=$+S),Ve!==k||b!==0&&Ve.nodeType!==3||(ce=$+b),Ve.nodeType===3&&($+=Ve.nodeValue.length),(Qe=Ve.firstChild)!==null;)De=Ve,Ve=Qe;for(;;){if(Ve===a)break t;if(De===x&&++be===S&&(re=$),De===k&&++Me===b&&(ce=$),(Qe=Ve.nextSibling)!==null)break;Ve=De,De=Ve.parentNode}Ve=Qe}x=re===-1||ce===-1?null:{start:re,end:ce}}else x=null}x=x||{start:0,end:0}}else x=null;for(d1={focusedElem:a,selectionRange:x},Ji=!1,Je=d;Je!==null;)if(d=Je,a=d.child,(d.subtreeFlags&1028)!==0&&a!==null)a.return=d,Je=a;else for(;Je!==null;){d=Je;try{var et=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var ot=et.memoizedProps,Rr=et.memoizedState,ye=d.stateNode,de=ye.getSnapshotBeforeUpdate(d.elementType===d.type?ot:lo(d.type,ot),Rr);ye.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var ve=d.stateNode.containerInfo;ve.nodeType===1?ve.textContent="":ve.nodeType===9&&ve.documentElement&&ve.removeChild(ve.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ue){mr(d,d.return,Ue)}if(a=d.sibling,a!==null){a.return=d.return,Je=a;break}Je=d.return}return et=JE,JE=!1,et}function bh(a,d,x){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var S=b=b.next;do{if((S.tag&a)===a){var k=S.destroy;S.destroy=void 0,k!==void 0&&Z1(d,x,k)}S=S.next}while(S!==b)}}function $p(a,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&a)===a){var b=x.create;x.destroy=b()}x=x.next}while(x!==d)}}function J1(a){var d=a.ref;if(d!==null){var x=a.stateNode;switch(a.tag){case 5:a=x;break;default:a=x}typeof d=="function"?d(a):d.current=a}}function eb(a){var d=a.alternate;d!==null&&(a.alternate=null,eb(d)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(d=a.stateNode,d!==null&&(delete d[Do],delete d[hh],delete d[m1],delete d[h8],delete d[f8])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function tb(a){return a.tag===5||a.tag===3||a.tag===4}function nb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||tb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ey(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.nodeType===8?x.parentNode.insertBefore(a,d):x.insertBefore(a,d):(x.nodeType===8?(d=x.parentNode,d.insertBefore(a,x)):(d=x,d.appendChild(a)),x=x._reactRootContainer,x!=null||d.onclick!==null||(d.onclick=bp));else if(b!==4&&(a=a.child,a!==null))for(ey(a,d,x),a=a.sibling;a!==null;)ey(a,d,x),a=a.sibling}function ty(a,d,x){var b=a.tag;if(b===5||b===6)a=a.stateNode,d?x.insertBefore(a,d):x.appendChild(a);else if(b!==4&&(a=a.child,a!==null))for(ty(a,d,x),a=a.sibling;a!==null;)ty(a,d,x),a=a.sibling}var fi=null,co=!1;function ul(a,d,x){for(x=x.child;x!==null;)rb(a,d,x),x=x.sibling}function rb(a,d,x){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Ft,x)}catch{}switch(x.tag){case 5:ki||Fu(x,d);case 6:var b=fi,S=co;fi=null,ul(a,d,x),fi=b,co=S,fi!==null&&(co?(a=fi,x=x.stateNode,a.nodeType===8?a.parentNode.removeChild(x):a.removeChild(x)):fi.removeChild(x.stateNode));break;case 18:fi!==null&&(co?(a=fi,x=x.stateNode,a.nodeType===8?p1(a.parentNode,x):a.nodeType===1&&p1(a,x),ci(a)):p1(fi,x.stateNode));break;case 4:b=fi,S=co,fi=x.stateNode.containerInfo,co=!0,ul(a,d,x),fi=b,co=S;break;case 0:case 11:case 14:case 15:if(!ki&&(b=x.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){S=b=b.next;do{var k=S,$=k.destroy;k=k.tag,$!==void 0&&((k&2)!==0||(k&4)!==0)&&Z1(x,d,$),S=S.next}while(S!==b)}ul(a,d,x);break;case 1:if(!ki&&(Fu(x,d),b=x.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=x.memoizedProps,b.state=x.memoizedState,b.componentWillUnmount()}catch(re){mr(x,d,re)}ul(a,d,x);break;case 21:ul(a,d,x);break;case 22:x.mode&1?(ki=(b=ki)||x.memoizedState!==null,ul(a,d,x),ki=b):ul(a,d,x);break;default:ul(a,d,x)}}function ib(a){var d=a.updateQueue;if(d!==null){a.updateQueue=null;var x=a.stateNode;x===null&&(x=a.stateNode=new R8),d.forEach(function(b){var S=B8.bind(null,a,b);x.has(b)||(x.add(b),b.then(S,S))})}}function uo(a,d){var x=d.deletions;if(x!==null)for(var b=0;b<x.length;b++){var S=x[b];try{var k=a,$=d,re=$;e:for(;re!==null;){switch(re.tag){case 5:fi=re.stateNode,co=!1;break e;case 3:fi=re.stateNode.containerInfo,co=!0;break e;case 4:fi=re.stateNode.containerInfo,co=!0;break e}re=re.return}if(fi===null)throw Error(t(160));rb(k,$,S),fi=null,co=!1;var ce=S.alternate;ce!==null&&(ce.return=null),S.return=null}catch(be){mr(S,d,be)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)sb(d,a),d=d.sibling}function sb(a,d){var x=a.alternate,b=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(uo(d,a),Lo(a),b&4){try{bh(3,a,a.return),$p(3,a)}catch(ot){mr(a,a.return,ot)}try{bh(5,a,a.return)}catch(ot){mr(a,a.return,ot)}}break;case 1:uo(d,a),Lo(a),b&512&&x!==null&&Fu(x,x.return);break;case 5:if(uo(d,a),Lo(a),b&512&&x!==null&&Fu(x,x.return),a.flags&32){var S=a.stateNode;try{Qr(S,"")}catch(ot){mr(a,a.return,ot)}}if(b&4&&(S=a.stateNode,S!=null)){var k=a.memoizedProps,$=x!==null?x.memoizedProps:k,re=a.type,ce=a.updateQueue;if(a.updateQueue=null,ce!==null)try{re==="input"&&k.type==="radio"&&k.name!=null&&Dr(S,k),pn(re,$);var be=pn(re,k);for($=0;$<ce.length;$+=2){var Me=ce[$],Ve=ce[$+1];Me==="style"?We(S,Ve):Me==="dangerouslySetInnerHTML"?jn(S,Ve):Me==="children"?Qr(S,Ve):W(S,Me,Ve,be)}switch(re){case"input":Qt(S,k);break;case"textarea":Yr(S,k);break;case"select":var De=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!k.multiple;var Qe=k.value;Qe!=null?Xe(S,!!k.multiple,Qe,!1):De!==!!k.multiple&&(k.defaultValue!=null?Xe(S,!!k.multiple,k.defaultValue,!0):Xe(S,!!k.multiple,k.multiple?[]:"",!1))}S[hh]=k}catch(ot){mr(a,a.return,ot)}}break;case 6:if(uo(d,a),Lo(a),b&4){if(a.stateNode===null)throw Error(t(162));S=a.stateNode,k=a.memoizedProps;try{S.nodeValue=k}catch(ot){mr(a,a.return,ot)}}break;case 3:if(uo(d,a),Lo(a),b&4&&x!==null&&x.memoizedState.isDehydrated)try{ci(d.containerInfo)}catch(ot){mr(a,a.return,ot)}break;case 4:uo(d,a),Lo(a);break;case 13:uo(d,a),Lo(a),S=a.child,S.flags&8192&&(k=S.memoizedState!==null,S.stateNode.isHidden=k,!k||S.alternate!==null&&S.alternate.memoizedState!==null||(iy=Zt())),b&4&&ib(a);break;case 22:if(Me=x!==null&&x.memoizedState!==null,a.mode&1?(ki=(be=ki)||Me,uo(d,a),ki=be):uo(d,a),Lo(a),b&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!Me&&(a.mode&1)!==0)for(Je=a,Me=a.child;Me!==null;){for(Ve=Je=Me;Je!==null;){switch(De=Je,Qe=De.child,De.tag){case 0:case 11:case 14:case 15:bh(4,De,De.return);break;case 1:Fu(De,De.return);var et=De.stateNode;if(typeof et.componentWillUnmount=="function"){b=De,x=De.return;try{d=b,et.props=d.memoizedProps,et.state=d.memoizedState,et.componentWillUnmount()}catch(ot){mr(b,x,ot)}}break;case 5:Fu(De,De.return);break;case 22:if(De.memoizedState!==null){lb(Ve);continue}}Qe!==null?(Qe.return=De,Je=Qe):lb(Ve)}Me=Me.sibling}e:for(Me=null,Ve=a;;){if(Ve.tag===5){if(Me===null){Me=Ve;try{S=Ve.stateNode,be?(k=S.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(re=Ve.stateNode,ce=Ve.memoizedProps.style,$=ce!=null&&ce.hasOwnProperty("display")?ce.display:null,re.style.display=In("display",$))}catch(ot){mr(a,a.return,ot)}}}else if(Ve.tag===6){if(Me===null)try{Ve.stateNode.nodeValue=be?"":Ve.memoizedProps}catch(ot){mr(a,a.return,ot)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===a)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===a)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===a)break e;Me===Ve&&(Me=null),Ve=Ve.return}Me===Ve&&(Me=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:uo(d,a),Lo(a),b&4&&ib(a);break;case 21:break;default:uo(d,a),Lo(a)}}function Lo(a){var d=a.flags;if(d&2){try{e:{for(var x=a.return;x!==null;){if(tb(x)){var b=x;break e}x=x.return}throw Error(t(160))}switch(b.tag){case 5:var S=b.stateNode;b.flags&32&&(Qr(S,""),b.flags&=-33);var k=nb(a);ty(a,k,S);break;case 3:case 4:var $=b.stateNode.containerInfo,re=nb(a);ey(a,re,$);break;default:throw Error(t(161))}}catch(ce){mr(a,a.return,ce)}a.flags&=-3}d&4096&&(a.flags&=-4097)}function k8(a,d,x){Je=a,ob(a)}function ob(a,d,x){for(var b=(a.mode&1)!==0;Je!==null;){var S=Je,k=S.child;if(S.tag===22&&b){var $=S.memoizedState!==null||Gp;if(!$){var re=S.alternate,ce=re!==null&&re.memoizedState!==null||ki;re=Gp;var be=ki;if(Gp=$,(ki=ce)&&!be)for(Je=S;Je!==null;)$=Je,ce=$.child,$.tag===22&&$.memoizedState!==null?cb(S):ce!==null?(ce.return=$,Je=ce):cb(S);for(;k!==null;)Je=k,ob(k),k=k.sibling;Je=S,Gp=re,ki=be}ab(a)}else(S.subtreeFlags&8772)!==0&&k!==null?(k.return=S,Je=k):ab(a)}}function ab(a){for(;Je!==null;){var d=Je;if((d.flags&8772)!==0){var x=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:ki||$p(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!ki)if(x===null)b.componentDidMount();else{var S=d.elementType===d.type?x.memoizedProps:lo(d.type,x.memoizedProps);b.componentDidUpdate(S,x.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var k=d.updateQueue;k!==null&&lE(d,k,b);break;case 3:var $=d.updateQueue;if($!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=d.child.stateNode;break;case 1:x=d.child.stateNode}lE(d,$,x)}break;case 5:var re=d.stateNode;if(x===null&&d.flags&4){x=re;var ce=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":ce.autoFocus&&x.focus();break;case"img":ce.src&&(x.src=ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var be=d.alternate;if(be!==null){var Me=be.memoizedState;if(Me!==null){var Ve=Me.dehydrated;Ve!==null&&ci(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ki||d.flags&512&&J1(d)}catch(De){mr(d,d.return,De)}}if(d===a){Je=null;break}if(x=d.sibling,x!==null){x.return=d.return,Je=x;break}Je=d.return}}function lb(a){for(;Je!==null;){var d=Je;if(d===a){Je=null;break}var x=d.sibling;if(x!==null){x.return=d.return,Je=x;break}Je=d.return}}function cb(a){for(;Je!==null;){var d=Je;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{$p(4,d)}catch(ce){mr(d,x,ce)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var S=d.return;try{b.componentDidMount()}catch(ce){mr(d,S,ce)}}var k=d.return;try{J1(d)}catch(ce){mr(d,k,ce)}break;case 5:var $=d.return;try{J1(d)}catch(ce){mr(d,$,ce)}}}catch(ce){mr(d,d.return,ce)}if(d===a){Je=null;break}var re=d.sibling;if(re!==null){re.return=d.return,Je=re;break}Je=d.return}}var P8=Math.ceil,qp=Y.ReactCurrentDispatcher,ny=Y.ReactCurrentOwner,Gs=Y.ReactCurrentBatchConfig,rn=0,ni=null,Or=null,pi=0,As=0,Bu=sl(0),$r=0,Ih=null,yc=0,Kp=0,ry=0,Ah=null,ss=null,iy=0,ju=1/0,Ea=null,Xp=!1,sy=null,dl=null,Yp=!1,hl=null,Qp=0,Th=0,oy=null,Zp=-1,Jp=0;function Gi(){return(rn&6)!==0?Zt():Zp!==-1?Zp:Zp=Zt()}function fl(a){return(a.mode&1)===0?1:(rn&2)!==0&&pi!==0?pi&-pi:m8.transition!==null?(Jp===0&&(Jp=Zn()),Jp):(a=It,a!==0||(a=window.event,a=a===void 0?16:Za(a.type)),a)}function ho(a,d,x,b){if(50<Th)throw Th=0,oy=null,Error(t(185));Q(a,x,b),((rn&2)===0||a!==ni)&&(a===ni&&((rn&2)===0&&(Kp|=x),$r===4&&pl(a,pi)),os(a,b),x===1&&rn===0&&(d.mode&1)===0&&(ju=Zt()+500,Cp&&al()))}function os(a,d){var x=a.callbackNode;bi(a,d);var b=Ei(a,a===ni?pi:0);if(b===0)x!==null&&Ar(x),a.callbackNode=null,a.callbackPriority=0;else if(d=b&-b,a.callbackPriority!==d){if(x!=null&&Ar(x),d===1)a.tag===0?p8(db.bind(null,a)):Y_(db.bind(null,a)),u8(function(){(rn&6)===0&&al()}),x=null;else{switch(So(b)){case 1:x=ke;break;case 4:x=Co;break;case 16:x=Jt;break;case 536870912:x=wu;break;default:x=Jt}x=wb(x,ub.bind(null,a))}a.callbackPriority=d,a.callbackNode=x}}function ub(a,d){if(Zp=-1,Jp=0,(rn&6)!==0)throw Error(t(327));var x=a.callbackNode;if(Uu()&&a.callbackNode!==x)return null;var b=Ei(a,a===ni?pi:0);if(b===0)return null;if((b&30)!==0||(b&a.expiredLanes)!==0||d)d=em(a,b);else{d=b;var S=rn;rn|=2;var k=fb();(ni!==a||pi!==d)&&(Ea=null,ju=Zt()+500,wc(a,d));do try{M8();break}catch(re){hb(a,re)}while(!0);I1(),qp.current=k,rn=S,Or!==null?d=0:(ni=null,pi=0,d=$r)}if(d!==0){if(d===2&&(S=Ot(a),S!==0&&(b=S,d=ay(a,S))),d===1)throw x=Ih,wc(a,0),pl(a,b),os(a,Zt()),x;if(d===6)pl(a,b);else{if(S=a.current.alternate,(b&30)===0&&!D8(S)&&(d=em(a,b),d===2&&(k=Ot(a),k!==0&&(b=k,d=ay(a,k))),d===1))throw x=Ih,wc(a,0),pl(a,b),os(a,Zt()),x;switch(a.finishedWork=S,a.finishedLanes=b,d){case 0:case 1:throw Error(t(345));case 2:vc(a,ss,Ea);break;case 3:if(pl(a,b),(b&130023424)===b&&(d=iy+500-Zt(),10<d)){if(Ei(a,0)!==0)break;if(S=a.suspendedLanes,(S&b)!==b){Gi(),a.pingedLanes|=a.suspendedLanes&S;break}a.timeoutHandle=f1(vc.bind(null,a,ss,Ea),d);break}vc(a,ss,Ea);break;case 4:if(pl(a,b),(b&4194240)===b)break;for(d=a.eventTimes,S=-1;0<b;){var $=31-zr(b);k=1<<$,$=d[$],$>S&&(S=$),b&=~k}if(b=S,b=Zt()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*P8(b/1960))-b,10<b){a.timeoutHandle=f1(vc.bind(null,a,ss,Ea),b);break}vc(a,ss,Ea);break;case 5:vc(a,ss,Ea);break;default:throw Error(t(329))}}}return os(a,Zt()),a.callbackNode===x?ub.bind(null,a):null}function ay(a,d){var x=Ah;return a.current.memoizedState.isDehydrated&&(wc(a,d).flags|=256),a=em(a,d),a!==2&&(d=ss,ss=x,d!==null&&ly(d)),a}function ly(a){ss===null?ss=a:ss.push.apply(ss,a)}function D8(a){for(var d=a;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var b=0;b<x.length;b++){var S=x[b],k=S.getSnapshot;S=S.value;try{if(!fe(k(),S))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function pl(a,d){for(d&=~ry,d&=~Kp,a.suspendedLanes|=d,a.pingedLanes&=~d,a=a.expirationTimes;0<d;){var x=31-zr(d),b=1<<x;a[x]=-1,d&=~b}}function db(a){if((rn&6)!==0)throw Error(t(327));Uu();var d=Ei(a,0);if((d&1)===0)return os(a,Zt()),null;var x=em(a,d);if(a.tag!==0&&x===2){var b=Ot(a);b!==0&&(d=b,x=ay(a,b))}if(x===1)throw x=Ih,wc(a,0),pl(a,d),os(a,Zt()),x;if(x===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=d,vc(a,ss,Ea),os(a,Zt()),null}function cy(a,d){var x=rn;rn|=1;try{return a(d)}finally{rn=x,rn===0&&(ju=Zt()+500,Cp&&al())}}function xc(a){hl!==null&&hl.tag===0&&(rn&6)===0&&Uu();var d=rn;rn|=1;var x=Gs.transition,b=It;try{if(Gs.transition=null,It=1,a)return a()}finally{It=b,Gs.transition=x,rn=d,(rn&6)===0&&al()}}function uy(){As=Bu.current,qn(Bu)}function wc(a,d){a.finishedWork=null,a.finishedLanes=0;var x=a.timeoutHandle;if(x!==-1&&(a.timeoutHandle=-1,c8(x)),Or!==null)for(x=Or.return;x!==null;){var b=x;switch(w1(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Ap();break;case 3:Lu(),qn(ns),qn(Si),P1();break;case 5:N1(b);break;case 4:Lu();break;case 13:qn(or);break;case 19:qn(or);break;case 10:A1(b.type._context);break;case 22:case 23:uy()}x=x.return}if(ni=a,Or=a=ml(a.current,null),pi=As=d,$r=0,Ih=null,ry=Kp=yc=0,ss=Ah=null,pc!==null){for(d=0;d<pc.length;d++)if(x=pc[d],b=x.interleaved,b!==null){x.interleaved=null;var S=b.next,k=x.pending;if(k!==null){var $=k.next;k.next=S,b.next=$}x.pending=b}pc=null}return a}function hb(a,d){do{var x=Or;try{if(I1(),Vp.current=Up,Fp){for(var b=ar.memoizedState;b!==null;){var S=b.queue;S!==null&&(S.pending=null),b=b.next}Fp=!1}if(gc=0,ti=Gr=ar=null,xh=!1,wh=0,ny.current=null,x===null||x.return===null){$r=1,Ih=d,Or=null;break}e:{var k=a,$=x.return,re=x,ce=d;if(d=pi,re.flags|=32768,ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var be=ce,Me=re,Ve=Me.tag;if((Me.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var De=Me.alternate;De?(Me.updateQueue=De.updateQueue,Me.memoizedState=De.memoizedState,Me.lanes=De.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var Qe=VE($);if(Qe!==null){Qe.flags&=-257,FE(Qe,$,re,k,d),Qe.mode&1&&LE(k,be,d),d=Qe,ce=be;var et=d.updateQueue;if(et===null){var ot=new Set;ot.add(ce),d.updateQueue=ot}else et.add(ce);break e}else{if((d&1)===0){LE(k,be,d),dy();break e}ce=Error(t(426))}}else if(er&&re.mode&1){var Rr=VE($);if(Rr!==null){(Rr.flags&65536)===0&&(Rr.flags|=256),FE(Rr,$,re,k,d),E1(Vu(ce,re));break e}}k=ce=Vu(ce,re),$r!==4&&($r=2),Ah===null?Ah=[k]:Ah.push(k),k=$;do{switch(k.tag){case 3:k.flags|=65536,d&=-d,k.lanes|=d;var ye=OE(k,ce,d);aE(k,ye);break e;case 1:re=ce;var de=k.type,ve=k.stateNode;if((k.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(dl===null||!dl.has(ve)))){k.flags|=65536,d&=-d,k.lanes|=d;var Ue=ME(k,re,d);aE(k,Ue);break e}}k=k.return}while(k!==null)}mb(x)}catch(lt){d=lt,Or===x&&x!==null&&(Or=x=x.return);continue}break}while(!0)}function fb(){var a=qp.current;return qp.current=Up,a===null?Up:a}function dy(){($r===0||$r===3||$r===2)&&($r=4),ni===null||(yc&268435455)===0&&(Kp&268435455)===0||pl(ni,pi)}function em(a,d){var x=rn;rn|=2;var b=fb();(ni!==a||pi!==d)&&(Ea=null,wc(a,d));do try{O8();break}catch(S){hb(a,S)}while(!0);if(I1(),rn=x,qp.current=b,Or!==null)throw Error(t(261));return ni=null,pi=0,$r}function O8(){for(;Or!==null;)pb(Or)}function M8(){for(;Or!==null&&!yn();)pb(Or)}function pb(a){var d=xb(a.alternate,a,As);a.memoizedProps=a.pendingProps,d===null?mb(a):Or=d,ny.current=null}function mb(a){var d=a;do{var x=d.alternate;if(a=d.return,(d.flags&32768)===0){if(x=C8(x,d,As),x!==null){Or=x;return}}else{if(x=S8(x,d),x!==null){x.flags&=32767,Or=x;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{$r=6,Or=null;return}}if(d=d.sibling,d!==null){Or=d;return}Or=d=a}while(d!==null);$r===0&&($r=5)}function vc(a,d,x){var b=It,S=Gs.transition;try{Gs.transition=null,It=1,L8(a,d,x,b)}finally{Gs.transition=S,It=b}return null}function L8(a,d,x,b){do Uu();while(hl!==null);if((rn&6)!==0)throw Error(t(327));x=a.finishedWork;var S=a.finishedLanes;if(x===null)return null;if(a.finishedWork=null,a.finishedLanes=0,x===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var k=x.lanes|x.childLanes;if($e(a,k),a===ni&&(Or=ni=null,pi=0),(x.subtreeFlags&2064)===0&&(x.flags&2064)===0||Yp||(Yp=!0,wb(Jt,function(){return Uu(),null})),k=(x.flags&15990)!==0,(x.subtreeFlags&15990)!==0||k){k=Gs.transition,Gs.transition=null;var $=It;It=1;var re=rn;rn|=4,ny.current=null,N8(a,x),sb(x,a),Ci(d1),Ji=!!u1,d1=u1=null,a.current=x,k8(x),xu(),rn=re,It=$,Gs.transition=k}else a.current=x;if(Yp&&(Yp=!1,hl=a,Qp=S),k=a.pendingLanes,k===0&&(dl=null),Dt(x.stateNode),os(a,Zt()),d!==null)for(b=a.onRecoverableError,x=0;x<d.length;x++)S=d[x],b(S.value,{componentStack:S.stack,digest:S.digest});if(Xp)throw Xp=!1,a=sy,sy=null,a;return(Qp&1)!==0&&a.tag!==0&&Uu(),k=a.pendingLanes,(k&1)!==0?a===oy?Th++:(Th=0,oy=a):Th=0,al(),null}function Uu(){if(hl!==null){var a=So(Qp),d=Gs.transition,x=It;try{if(Gs.transition=null,It=16>a?16:a,hl===null)var b=!1;else{if(a=hl,hl=null,Qp=0,(rn&6)!==0)throw Error(t(331));var S=rn;for(rn|=4,Je=a.current;Je!==null;){var k=Je,$=k.child;if((Je.flags&16)!==0){var re=k.deletions;if(re!==null){for(var ce=0;ce<re.length;ce++){var be=re[ce];for(Je=be;Je!==null;){var Me=Je;switch(Me.tag){case 0:case 11:case 15:bh(8,Me,k)}var Ve=Me.child;if(Ve!==null)Ve.return=Me,Je=Ve;else for(;Je!==null;){Me=Je;var De=Me.sibling,Qe=Me.return;if(eb(Me),Me===be){Je=null;break}if(De!==null){De.return=Qe,Je=De;break}Je=Qe}}}var et=k.alternate;if(et!==null){var ot=et.child;if(ot!==null){et.child=null;do{var Rr=ot.sibling;ot.sibling=null,ot=Rr}while(ot!==null)}}Je=k}}if((k.subtreeFlags&2064)!==0&&$!==null)$.return=k,Je=$;else e:for(;Je!==null;){if(k=Je,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:bh(9,k,k.return)}var ye=k.sibling;if(ye!==null){ye.return=k.return,Je=ye;break e}Je=k.return}}var de=a.current;for(Je=de;Je!==null;){$=Je;var ve=$.child;if(($.subtreeFlags&2064)!==0&&ve!==null)ve.return=$,Je=ve;else e:for($=de;Je!==null;){if(re=Je,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:$p(9,re)}}catch(lt){mr(re,re.return,lt)}if(re===$){Je=null;break e}var Ue=re.sibling;if(Ue!==null){Ue.return=re.return,Je=Ue;break e}Je=re.return}}if(rn=S,al(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Ft,a)}catch{}b=!0}return b}finally{It=x,Gs.transition=d}}return!1}function gb(a,d,x){d=Vu(x,d),d=OE(a,d,1),a=cl(a,d,1),d=Gi(),a!==null&&(Q(a,1,d),os(a,d))}function mr(a,d,x){if(a.tag===3)gb(a,a,x);else for(;d!==null;){if(d.tag===3){gb(d,a,x);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(dl===null||!dl.has(b))){a=Vu(x,a),a=ME(d,a,1),d=cl(d,a,1),a=Gi(),d!==null&&(Q(d,1,a),os(d,a));break}}d=d.return}}function V8(a,d,x){var b=a.pingCache;b!==null&&b.delete(d),d=Gi(),a.pingedLanes|=a.suspendedLanes&x,ni===a&&(pi&x)===x&&($r===4||$r===3&&(pi&130023424)===pi&&500>Zt()-iy?wc(a,0):ry|=x),os(a,d)}function yb(a,d){d===0&&((a.mode&1)===0?d=1:(d=Ya,Ya<<=1,(Ya&130023424)===0&&(Ya=4194304)));var x=Gi();a=wa(a,d),a!==null&&(Q(a,d,x),os(a,x))}function F8(a){var d=a.memoizedState,x=0;d!==null&&(x=d.retryLane),yb(a,x)}function B8(a,d){var x=0;switch(a.tag){case 13:var b=a.stateNode,S=a.memoizedState;S!==null&&(x=S.retryLane);break;case 19:b=a.stateNode;break;default:throw Error(t(314))}b!==null&&b.delete(d),yb(a,x)}var xb;xb=function(a,d,x){if(a!==null)if(a.memoizedProps!==d.pendingProps||ns.current)is=!0;else{if((a.lanes&x)===0&&(d.flags&128)===0)return is=!1,T8(a,d,x);is=(a.flags&131072)!==0}else is=!1,er&&(d.flags&1048576)!==0&&Q_(d,Rp,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;Hp(a,d),a=d.pendingProps;var S=Ru(d,Si.current);Mu(d,x),S=M1(null,d,b,a,S,x);var k=L1();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,rs(b)?(k=!0,Tp(d)):k=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S1(d),S.updater=zp,d.stateNode=S,S._reactInternals=d,z1(d,b,a,x),d=$1(null,d,b,!0,k,x)):(d.tag=0,er&&k&&x1(d),Hi(null,d,S,x),d=d.child),d;case 16:b=d.elementType;e:{switch(Hp(a,d),a=d.pendingProps,S=b._init,b=S(b._payload),d.type=b,S=d.tag=U8(b),a=lo(b,a),S){case 0:d=G1(null,d,b,a,x);break e;case 1:d=HE(null,d,b,a,x);break e;case 11:d=BE(null,d,b,a,x);break e;case 14:d=jE(null,d,b,lo(b.type,a),x);break e}throw Error(t(306,b,""))}return d;case 0:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:lo(b,S),G1(a,d,b,S,x);case 1:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:lo(b,S),HE(a,d,b,S,x);case 3:e:{if(GE(d),a===null)throw Error(t(387));b=d.pendingProps,k=d.memoizedState,S=k.element,oE(a,d),Mp(d,b,null,x);var $=d.memoizedState;if(b=$.element,k.isDehydrated)if(k={element:b,isDehydrated:!1,cache:$.cache,pendingSuspenseBoundaries:$.pendingSuspenseBoundaries,transitions:$.transitions},d.updateQueue.baseState=k,d.memoizedState=k,d.flags&256){S=Vu(Error(t(423)),d),d=$E(a,d,b,x,S);break e}else if(b!==S){S=Vu(Error(t(424)),d),d=$E(a,d,b,x,S);break e}else for(Is=il(d.stateNode.containerInfo.firstChild),bs=d,er=!0,ao=null,x=iE(d,null,b,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Pu(),b===S){d=_a(a,d,x);break e}Hi(a,d,b,x)}d=d.child}return d;case 5:return cE(d),a===null&&_1(d),b=d.type,S=d.pendingProps,k=a!==null?a.memoizedProps:null,$=S.children,h1(b,S)?$=null:k!==null&&h1(b,k)&&(d.flags|=32),WE(a,d),Hi(a,d,$,x),d.child;case 6:return a===null&&_1(d),null;case 13:return qE(a,d,x);case 4:return R1(d,d.stateNode.containerInfo),b=d.pendingProps,a===null?d.child=Du(d,null,b,x):Hi(a,d,b,x),d.child;case 11:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:lo(b,S),BE(a,d,b,S,x);case 7:return Hi(a,d,d.pendingProps,x),d.child;case 8:return Hi(a,d,d.pendingProps.children,x),d.child;case 12:return Hi(a,d,d.pendingProps.children,x),d.child;case 10:e:{if(b=d.type._context,S=d.pendingProps,k=d.memoizedProps,$=S.value,On(Pp,b._currentValue),b._currentValue=$,k!==null)if(fe(k.value,$)){if(k.children===S.children&&!ns.current){d=_a(a,d,x);break e}}else for(k=d.child,k!==null&&(k.return=d);k!==null;){var re=k.dependencies;if(re!==null){$=k.child;for(var ce=re.firstContext;ce!==null;){if(ce.context===b){if(k.tag===1){ce=va(-1,x&-x),ce.tag=2;var be=k.updateQueue;if(be!==null){be=be.shared;var Me=be.pending;Me===null?ce.next=ce:(ce.next=Me.next,Me.next=ce),be.pending=ce}}k.lanes|=x,ce=k.alternate,ce!==null&&(ce.lanes|=x),T1(k.return,x,d),re.lanes|=x;break}ce=ce.next}}else if(k.tag===10)$=k.type===d.type?null:k.child;else if(k.tag===18){if($=k.return,$===null)throw Error(t(341));$.lanes|=x,re=$.alternate,re!==null&&(re.lanes|=x),T1($,x,d),$=k.sibling}else $=k.child;if($!==null)$.return=k;else for($=k;$!==null;){if($===d){$=null;break}if(k=$.sibling,k!==null){k.return=$.return,$=k;break}$=$.return}k=$}Hi(a,d,S.children,x),d=d.child}return d;case 9:return S=d.type,b=d.pendingProps.children,Mu(d,x),S=Ws(S),b=b(S),d.flags|=1,Hi(a,d,b,x),d.child;case 14:return b=d.type,S=lo(b,d.pendingProps),S=lo(b.type,S),jE(a,d,b,S,x);case 15:return UE(a,d,d.type,d.pendingProps,x);case 17:return b=d.type,S=d.pendingProps,S=d.elementType===b?S:lo(b,S),Hp(a,d),d.tag=1,rs(b)?(a=!0,Tp(d)):a=!1,Mu(d,x),PE(d,b,S),z1(d,b,S,x),$1(null,d,b,!0,a,x);case 19:return XE(a,d,x);case 22:return zE(a,d,x)}throw Error(t(156,d.tag))};function wb(a,d){return li(a,d)}function j8(a,d,x,b){this.tag=a,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(a,d,x,b){return new j8(a,d,x,b)}function hy(a){return a=a.prototype,!(!a||!a.isReactComponent)}function U8(a){if(typeof a=="function")return hy(a)?1:0;if(a!=null){if(a=a.$$typeof,a===te)return 11;if(a===se)return 14}return 2}function ml(a,d){var x=a.alternate;return x===null?(x=$s(a.tag,d,a.key,a.mode),x.elementType=a.elementType,x.type=a.type,x.stateNode=a.stateNode,x.alternate=a,a.alternate=x):(x.pendingProps=d,x.type=a.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=a.flags&14680064,x.childLanes=a.childLanes,x.lanes=a.lanes,x.child=a.child,x.memoizedProps=a.memoizedProps,x.memoizedState=a.memoizedState,x.updateQueue=a.updateQueue,d=a.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=a.sibling,x.index=a.index,x.ref=a.ref,x}function tm(a,d,x,b,S,k){var $=2;if(b=a,typeof a=="function")hy(a)&&($=1);else if(typeof a=="string")$=5;else e:switch(a){case F:return _c(x.children,S,k,d);case B:$=8,S|=8;break;case H:return a=$s(12,x,d,S|2),a.elementType=H,a.lanes=k,a;case K:return a=$s(13,x,d,S),a.elementType=K,a.lanes=k,a;case we:return a=$s(19,x,d,S),a.elementType=we,a.lanes=k,a;case xe:return nm(x,S,k,d);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case ee:$=10;break e;case ne:$=9;break e;case te:$=11;break e;case se:$=14;break e;case Ae:$=16,b=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return d=$s($,x,d,S),d.elementType=a,d.type=b,d.lanes=k,d}function _c(a,d,x,b){return a=$s(7,a,b,d),a.lanes=x,a}function nm(a,d,x,b){return a=$s(22,a,b,d),a.elementType=xe,a.lanes=x,a.stateNode={isHidden:!1},a}function fy(a,d,x){return a=$s(6,a,null,d),a.lanes=x,a}function py(a,d,x){return d=$s(4,a.children!==null?a.children:[],a.key,d),d.lanes=x,d.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},d}function z8(a,d,x,b,S){this.tag=d,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pe(0),this.expirationTimes=pe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pe(0),this.identifierPrefix=b,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function my(a,d,x,b,S,k,$,re,ce){return a=new z8(a,d,x,re,ce),d===1?(d=1,k===!0&&(d|=8)):d=0,k=$s(3,null,null,d),a.current=k,k.stateNode=a,k.memoizedState={element:b,isDehydrated:x,cache:null,transitions:null,pendingSuspenseBoundaries:null},S1(k),a}function W8(a,d,x){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:b==null?null:""+b,children:a,containerInfo:d,implementation:x}}function vb(a){if(!a)return ol;a=a._reactInternals;e:{if(Zr(a)!==a||a.tag!==1)throw Error(t(170));var d=a;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(rs(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(a.tag===1){var x=a.type;if(rs(x))return K_(a,x,d)}return d}function _b(a,d,x,b,S,k,$,re,ce){return a=my(x,b,!0,a,S,k,$,re,ce),a.context=vb(null),x=a.current,b=Gi(),S=fl(x),k=va(b,S),k.callback=d??null,cl(x,k,S),a.current.lanes=S,Q(a,S,b),os(a,b),a}function rm(a,d,x,b){var S=d.current,k=Gi(),$=fl(S);return x=vb(x),d.context===null?d.context=x:d.pendingContext=x,d=va(k,$),d.payload={element:a},b=b===void 0?null:b,b!==null&&(d.callback=b),a=cl(S,d,$),a!==null&&(ho(a,S,$,k),Op(a,S,$)),$}function im(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Eb(a,d){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var x=a.retryLane;a.retryLane=x!==0&&x<d?x:d}}function gy(a,d){Eb(a,d),(a=a.alternate)&&Eb(a,d)}function H8(){return null}var bb=typeof reportError=="function"?reportError:function(a){console.error(a)};function yy(a){this._internalRoot=a}sm.prototype.render=yy.prototype.render=function(a){var d=this._internalRoot;if(d===null)throw Error(t(409));rm(a,d,null,null)},sm.prototype.unmount=yy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var d=a.containerInfo;xc(function(){rm(null,a,null,null)}),d[ma]=null}};function sm(a){this._internalRoot=a}sm.prototype.unstable_scheduleHydration=function(a){if(a){var d=Sn();a={blockedOn:null,target:a,priority:d};for(var x=0;x<Hr.length&&d!==0&&d<Hr[x].priority;x++);Hr.splice(x,0,a),x===0&&_u(a)}};function xy(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function om(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Ib(){}function G8(a,d,x,b,S){if(S){if(typeof b=="function"){var k=b;b=function(){var be=im($);k.call(be)}}var $=_b(d,b,a,0,null,!1,!1,"",Ib);return a._reactRootContainer=$,a[ma]=$.current,uh(a.nodeType===8?a.parentNode:a),xc(),$}for(;S=a.lastChild;)a.removeChild(S);if(typeof b=="function"){var re=b;b=function(){var be=im(ce);re.call(be)}}var ce=my(a,0,!1,null,null,!1,!1,"",Ib);return a._reactRootContainer=ce,a[ma]=ce.current,uh(a.nodeType===8?a.parentNode:a),xc(function(){rm(d,ce,x,b)}),ce}function am(a,d,x,b,S){var k=x._reactRootContainer;if(k){var $=k;if(typeof S=="function"){var re=S;S=function(){var ce=im($);re.call(ce)}}rm(d,$,a,S)}else $=G8(x,d,a,S,b);return im($)}Qa=function(a){switch(a.tag){case 3:var d=a.stateNode;if(d.current.memoizedState.isDehydrated){var x=mn(d.pendingLanes);x!==0&&(Rn(d,x|1),os(d,Zt()),(rn&6)===0&&(ju=Zt()+500,al()))}break;case 13:xc(function(){var b=wa(a,1);if(b!==null){var S=Gi();ho(b,a,1,S)}}),gy(a,1)}},Wr=function(a){if(a.tag===13){var d=wa(a,134217728);if(d!==null){var x=Gi();ho(d,a,134217728,x)}gy(a,134217728)}},ut=function(a){if(a.tag===13){var d=fl(a),x=wa(a,d);if(x!==null){var b=Gi();ho(x,a,d,b)}gy(a,d)}},Sn=function(){return It},sc=function(a,d){var x=It;try{return It=a,d()}finally{It=x}},ro=function(a,d,x){switch(d){case"input":if(Qt(a,x),d=x.name,x.type==="radio"&&d!=null){for(x=a;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<x.length;d++){var b=x[d];if(b!==a&&b.form===a.form){var S=Ip(b);if(!S)throw Error(t(90));bt(b),Qt(b,S)}}}break;case"textarea":Yr(a,x);break;case"select":d=x.value,d!=null&&Xe(a,!!x.multiple,d,!1)}},Tn=cy,$t=xc;var $8={usingClientEntryPoint:!1,Events:[fh,Cu,Ip,mt,Gt,cy]},Ch={findFiberByHostInstance:uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q8={bundleType:Ch.bundleType,version:Ch.version,rendererPackageName:Ch.rendererPackageName,rendererConfig:Ch.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=ic(a),a===null?null:a.stateNode},findFiberByHostInstance:Ch.findFiberByHostInstance||H8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lm.isDisabled&&lm.supportsFiber)try{Ft=lm.inject(q8),Nt=lm}catch{}}return as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$8,as.createPortal=function(a,d){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xy(d))throw Error(t(200));return W8(a,d,null,x)},as.createRoot=function(a,d){if(!xy(a))throw Error(t(299));var x=!1,b="",S=bb;return d!=null&&(d.unstable_strictMode===!0&&(x=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=my(a,1,!1,null,null,x,!1,b,S),a[ma]=d.current,uh(a.nodeType===8?a.parentNode:a),new yy(d)},as.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var d=a._reactInternals;if(d===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=ic(d),a=a===null?null:a.stateNode,a},as.flushSync=function(a){return xc(a)},as.hydrate=function(a,d,x){if(!om(d))throw Error(t(200));return am(null,a,d,!0,x)},as.hydrateRoot=function(a,d,x){if(!xy(a))throw Error(t(405));var b=x!=null&&x.hydratedSources||null,S=!1,k="",$=bb;if(x!=null&&(x.unstable_strictMode===!0&&(S=!0),x.identifierPrefix!==void 0&&(k=x.identifierPrefix),x.onRecoverableError!==void 0&&($=x.onRecoverableError)),d=_b(d,null,a,1,x??null,S,!1,k,$),a[ma]=d.current,uh(a),b)for(a=0;a<b.length;a++)x=b[a],S=x._getVersion,S=S(x._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[x,S]:d.mutableSourceEagerHydrationData.push(x,S);return new sm(d)},as.render=function(a,d,x){if(!om(d))throw Error(t(200));return am(null,a,d,!1,x)},as.unmountComponentAtNode=function(a){if(!om(a))throw Error(t(40));return a._reactRootContainer?(xc(function(){am(null,null,a,!1,function(){a._reactRootContainer=null,a[ma]=null})}),!0):!1},as.unstable_batchedUpdates=cy,as.unstable_renderSubtreeIntoContainer=function(a,d,x,b){if(!om(x))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return am(a,d,x,!1,b)},as.version="18.3.1-next-f1338f8080-20240426",as}var Pb;function gS(){if(Pb)return Ey.exports;Pb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ey.exports=nO(),Ey.exports}var Db;function rO(){if(Db)return um;Db=1;var n=gS();return um.createRoot=n.createRoot,um.hydrateRoot=n.hydrateRoot,um}var iO=rO();const sO=ng(iO);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ob="popstate";function oO(n={}){function e(r,i){let{pathname:o,search:c,hash:h}=r.location;return Tx("",{pathname:o,search:c,hash:h},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:gf(i)}return lO(e,t,null,n)}function ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ta(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aO(){return Math.random().toString(36).substring(2,10)}function Mb(n,e){return{usr:n.state,key:n.key,idx:e}}function Tx(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ud(e):e,state:t,key:e&&e.key||r||aO()}}function gf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ud(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function lO(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,h="POP",m=null,g=w();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function w(){return(c.state||{idx:null}).idx}function E(){h="POP";let L=w(),G=L==null?null:L-g;g=L,m&&m({action:h,location:D.location,delta:G})}function T(L,G){h="PUSH";let z=Tx(D.location,L,G);g=w()+1;let W=Mb(z,g),Y=D.createHref(z);try{c.pushState(W,"",Y)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;i.location.assign(Y)}o&&m&&m({action:h,location:D.location,delta:1})}function R(L,G){h="REPLACE";let z=Tx(D.location,L,G);g=w();let W=Mb(z,g),Y=D.createHref(z);c.replaceState(W,"",Y),o&&m&&m({action:h,location:D.location,delta:0})}function M(L){return cO(L)}let D={get action(){return h},get location(){return n(i,c)},listen(L){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(Ob,E),m=L,()=>{i.removeEventListener(Ob,E),m=null}},createHref(L){return e(i,L)},createURL:M,encodeLocation(L){let G=M(L);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:T,replace:R,go(L){return c.go(L)}};return D}function cO(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ur(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:gf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function yS(n,e,t="/"){return uO(n,e,t,!1)}function uO(n,e,t,r){let i=typeof e=="string"?Ud(e):e,o=Pa(i.pathname||"/",t);if(o==null)return null;let c=xS(n);dO(c);let h=null;for(let m=0;h==null&&m<c.length;++m){let g=EO(o);h=vO(c[m],g,r)}return h}function xS(n,e=[],t=[],r=""){let i=(o,c,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};m.relativePath.startsWith("/")&&(ur(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let g=Ra([r,m.relativePath]),w=t.concat(m);o.children&&o.children.length>0&&(ur(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),xS(o.children,e,w,g)),!(o.path==null&&!o.index)&&e.push({path:g,score:xO(g,o.index),routesMeta:w})};return n.forEach((o,c)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))i(o,c);else for(let m of wS(o.path))i(o,c,m)}),e}function wS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=wS(r.join("/")),h=[];return h.push(...c.map(m=>m===""?o:[o,m].join("/"))),i&&h.push(...c),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function dO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:wO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var hO=/^:[\w-]+$/,fO=3,pO=2,mO=1,gO=10,yO=-2,Lb=n=>n==="*";function xO(n,e){let t=n.split("/"),r=t.length;return t.some(Lb)&&(r+=yO),e&&(r+=pO),t.filter(i=>!Lb(i)).reduce((i,o)=>i+(hO.test(o)?fO:o===""?mO:gO),r)}function wO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function vO(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",c=[];for(let h=0;h<r.length;++h){let m=r[h],g=h===r.length-1,w=o==="/"?e:e.slice(o.length)||"/",E=u0({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},w),T=m.route;if(!E&&g&&t&&!r[r.length-1].route.index&&(E=u0({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},w)),!E)return null;Object.assign(i,E.params),c.push({params:i,pathname:Ra([o,E.pathname]),pathnameBase:TO(Ra([o,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(o=Ra([o,E.pathnameBase]))}return c}function u0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=_O(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((g,{paramName:w,isOptional:E},T)=>{if(w==="*"){let M=h[T]||"";c=o.slice(0,o.length-M.length).replace(/(.)\/+$/,"$1")}const R=h[T];return E&&!R?g[w]=void 0:g[w]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:o,pathnameBase:c,pattern:n}}function _O(n,e=!1,t=!0){ta(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,m)=>(r.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function EO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ta(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Pa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function bO(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ud(n):n;return{pathname:t?t.startsWith("/")?t:IO(t,e):e,search:CO(r),hash:SO(i)}}function IO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ay(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vS(n){let e=AO(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function _S(n,e,t,r=!1){let i;typeof n=="string"?i=Ud(n):(i={...n},ur(!i.pathname||!i.pathname.includes("?"),Ay("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),Ay("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),Ay("#","search","hash",i)));let o=n===""||i.pathname==="",c=o?"/":i.pathname,h;if(c==null)h=t;else{let E=e.length-1;if(!r&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;i.pathname=T.join("/")}h=E>=0?e[E]:"/"}let m=bO(i,h),g=c&&c!=="/"&&c.endsWith("/"),w=(o||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||w)&&(m.pathname+="/"),m}var Ra=n=>n.join("/").replace(/\/\/+/g,"/"),TO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),CO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,SO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function RO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var ES=["POST","PUT","PATCH","DELETE"];new Set(ES);var NO=["GET",...ES];new Set(NO);var zd=P.createContext(null);zd.displayName="DataRouter";var rg=P.createContext(null);rg.displayName="DataRouterState";P.createContext(!1);var bS=P.createContext({isTransitioning:!1});bS.displayName="ViewTransition";var kO=P.createContext(new Map);kO.displayName="Fetchers";var PO=P.createContext(null);PO.displayName="Await";var sa=P.createContext(null);sa.displayName="Navigation";var Gf=P.createContext(null);Gf.displayName="Location";var za=P.createContext({outlet:null,matches:[],isDataRoute:!1});za.displayName="Route";var iv=P.createContext(null);iv.displayName="RouteError";function DO(n,{relative:e}={}){ur($f(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(sa),{hash:i,pathname:o,search:c}=qf(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:Ra([t,o])),r.createHref({pathname:h,search:c,hash:i})}function $f(){return P.useContext(Gf)!=null}function Wa(){return ur($f(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Gf).location}var IS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AS(n){P.useContext(sa).static||P.useLayoutEffect(n)}function oa(){let{isDataRoute:n}=P.useContext(za);return n?$O():OO()}function OO(){ur($f(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(zd),{basename:e,navigator:t}=P.useContext(sa),{matches:r}=P.useContext(za),{pathname:i}=Wa(),o=JSON.stringify(vS(r)),c=P.useRef(!1);return AS(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(ta(c.current,IS),!c.current)return;if(typeof m=="number"){t.go(m);return}let w=_S(m,JSON.parse(o),i,g.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Ra([e,w.pathname])),(g.replace?t.replace:t.push)(w,g.state,g)},[e,t,o,i,n])}P.createContext(null);function qf(n,{relative:e}={}){let{matches:t}=P.useContext(za),{pathname:r}=Wa(),i=JSON.stringify(vS(t));return P.useMemo(()=>_S(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function MO(n,e){return TS(n,e)}function TS(n,e,t,r){var G;ur($f(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(sa),{matches:o}=P.useContext(za),c=o[o.length-1],h=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",w=c&&c.route;{let z=w&&w.path||"";CS(m,!w||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=Wa(),T;if(e){let z=typeof e=="string"?Ud(e):e;ur(g==="/"||((G=z.pathname)==null?void 0:G.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${z.pathname}" was given in the \`location\` prop.`),T=z}else T=E;let R=T.pathname||"/",M=R;if(g!=="/"){let z=g.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=yS(n,{pathname:M});ta(w||D!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),ta(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=jO(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Ra([g,i.encodeLocation?i.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:Ra([g,i.encodeLocation?i.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),o,t,r);return e&&L?P.createElement(Gf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},L):L}function LO(){let n=GO(),e=RO(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:i},t):null,c)}var VO=P.createElement(LO,null),FO=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(za.Provider,{value:this.props.routeContext},P.createElement(iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BO({routeContext:n,match:e,children:t}){let r=P.useContext(zd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(za.Provider,{value:n},t)}function jO(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let m=i.findIndex(g=>g.route.id&&(o==null?void 0:o[g.route.id])!==void 0);ur(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,h=-1;if(t)for(let m=0;m<i.length;m++){let g=i[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:w,errors:E}=t,T=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!E||E[g.route.id]===void 0);if(g.route.lazy||T){c=!0,h>=0?i=i.slice(0,h+1):i=[i[0]];break}}}return i.reduceRight((m,g,w)=>{let E,T=!1,R=null,M=null;t&&(E=o&&g.route.id?o[g.route.id]:void 0,R=g.route.errorElement||VO,c&&(h<0&&w===0?(CS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,M=null):h===w&&(T=!0,M=g.route.hydrateFallbackElement||null)));let D=e.concat(i.slice(0,w+1)),L=()=>{let G;return E?G=R:T?G=M:g.route.Component?G=P.createElement(g.route.Component,null):g.route.element?G=g.route.element:G=m,P.createElement(BO,{match:g,routeContext:{outlet:m,matches:D,isDataRoute:t!=null},children:G})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?P.createElement(FO,{location:t.location,revalidation:t.revalidation,component:R,error:E,children:L(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):L()},null)}function sv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UO(n){let e=P.useContext(zd);return ur(e,sv(n)),e}function zO(n){let e=P.useContext(rg);return ur(e,sv(n)),e}function WO(n){let e=P.useContext(za);return ur(e,sv(n)),e}function ov(n){let e=WO(n),t=e.matches[e.matches.length-1];return ur(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function HO(){return ov("useRouteId")}function GO(){var r;let n=P.useContext(iv),e=zO("useRouteError"),t=ov("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function $O(){let{router:n}=UO("useNavigate"),e=ov("useNavigate"),t=P.useRef(!1);return AS(()=>{t.current=!0}),P.useCallback(async(i,o={})=>{ta(t.current,IS),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var Vb={};function CS(n,e,t){!e&&!Vb[n]&&(Vb[n]=!0,ta(!1,t))}P.memo(qO);function qO({routes:n,future:e,state:t}){return TS(n,void 0,t,e)}function bl(n){ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KO({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){ur(!$f(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:c,navigator:i,static:o,future:{}}),[c,i,o]);typeof t=="string"&&(t=Ud(t));let{pathname:m="/",search:g="",hash:w="",state:E=null,key:T="default"}=t,R=P.useMemo(()=>{let M=Pa(m,c);return M==null?null:{location:{pathname:M,search:g,hash:w,state:E,key:T},navigationType:r}},[c,m,g,w,E,T,r]);return ta(R!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:P.createElement(sa.Provider,{value:h},P.createElement(Gf.Provider,{children:e,value:R}))}function XO({children:n,location:e}){return MO(Cx(n),e)}function Cx(n,e=[]){let t=[];return P.Children.forEach(n,(r,i)=>{if(!P.isValidElement(r))return;let o=[...e,i];if(r.type===P.Fragment){t.push.apply(t,Cx(r.props.children,o));return}ur(r.type===bl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ur(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=Cx(r.props.children,o)),t.push(c)}),t}var Lm="get",Vm="application/x-www-form-urlencoded";function ig(n){return n!=null&&typeof n.tagName=="string"}function YO(n){return ig(n)&&n.tagName.toLowerCase()==="button"}function QO(n){return ig(n)&&n.tagName.toLowerCase()==="form"}function ZO(n){return ig(n)&&n.tagName.toLowerCase()==="input"}function JO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function eM(n,e){return n.button===0&&(!e||e==="_self")&&!JO(n)}var dm=null;function tM(){if(dm===null)try{new FormData(document.createElement("form"),0),dm=!1}catch{dm=!0}return dm}var nM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ty(n){return n!=null&&!nM.has(n)?(ta(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vm}"`),null):n}function rM(n,e){let t,r,i,o,c;if(QO(n)){let h=n.getAttribute("action");r=h?Pa(h,e):null,t=n.getAttribute("method")||Lm,i=Ty(n.getAttribute("enctype"))||Vm,o=new FormData(n)}else if(YO(n)||ZO(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(r=m?Pa(m,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Lm,i=Ty(n.getAttribute("formenctype"))||Ty(h.getAttribute("enctype"))||Vm,o=new FormData(h,n),!tM()){let{name:g,type:w,value:E}=n;if(w==="image"){let T=g?`${g}.`:"";o.append(`${T}x`,"0"),o.append(`${T}y`,"0")}else g&&o.append(g,E)}}else{if(ig(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Lm,r=null,i=Vm,c=n}return o&&i==="text/plain"&&(c=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function av(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function iM(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Pa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function sM(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oM(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function aM(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await sM(o,t);return c.links?c.links():[]}return[]}));return dM(r.flat(1).filter(oM).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Fb(n,e,t,r,i,o){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,h=(m,g)=>{var w;return t[g].pathname!==m.pathname||((w=t[g].route.path)==null?void 0:w.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,g)=>c(m,g)||h(m,g)):o==="data"?e.filter((m,g)=>{var E;let w=r.routes[m.route.id];if(!w||!w.hasLoader)return!1;if(c(m,g)||h(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function lM(n,e,{includeHydrateFallback:t}={}){return cM(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function cM(n){return[...new Set(n)]}function uM(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function dM(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(uM(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function SS(){let n=P.useContext(zd);return av(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hM(){let n=P.useContext(rg);return av(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var lv=P.createContext(void 0);lv.displayName="FrameworkContext";function RS(){let n=P.useContext(lv);return av(n,"You must render this element inside a <HydratedRouter> element"),n}function fM(n,e){let t=P.useContext(lv),[r,i]=P.useState(!1),[o,c]=P.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:g,onMouseLeave:w,onTouchStart:E}=e,T=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let D=G=>{G.forEach(z=>{c(z.isIntersecting)})},L=new IntersectionObserver(D,{threshold:.5});return T.current&&L.observe(T.current),()=>{L.disconnect()}}},[n]),P.useEffect(()=>{if(r){let D=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(D)}}},[r]);let R=()=>{i(!0)},M=()=>{i(!1),c(!1)};return t?n!=="intent"?[o,T,{}]:[o,T,{onFocus:Rh(h,R),onBlur:Rh(m,M),onMouseEnter:Rh(g,R),onMouseLeave:Rh(w,M),onTouchStart:Rh(E,R)}]:[!1,T,{}]}function Rh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function pM({page:n,...e}){let{router:t}=SS(),r=P.useMemo(()=>yS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(gM,{page:n,matches:r,...e}):null}function mM(n){let{manifest:e,routeModules:t}=RS(),[r,i]=P.useState([]);return P.useEffect(()=>{let o=!1;return aM(n,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[n,e,t]),r}function gM({page:n,matches:e,...t}){let r=Wa(),{manifest:i,routeModules:o}=RS(),{basename:c}=SS(),{loaderData:h,matches:m}=hM(),g=P.useMemo(()=>Fb(n,e,m,i,r,"data"),[n,e,m,i,r]),w=P.useMemo(()=>Fb(n,e,m,i,r,"assets"),[n,e,m,i,r]),E=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,D=!1;if(e.forEach(G=>{var W;let z=i.routes[G.route.id];!z||!z.hasLoader||(!g.some(Y=>Y.route.id===G.route.id)&&G.route.id in h&&((W=o[G.route.id])!=null&&W.shouldRevalidate)||z.hasClientLoader?D=!0:M.add(G.route.id))}),M.size===0)return[];let L=iM(n,c,"data");return D&&M.size>0&&L.searchParams.set("_routes",e.filter(G=>M.has(G.route.id)).map(G=>G.route.id).join(",")),[L.pathname+L.search]},[c,h,r,i,g,e,n,o]),T=P.useMemo(()=>lM(w,i),[w,i]),R=mM(w);return P.createElement(P.Fragment,null,E.map(M=>P.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),T.map(M=>P.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),R.map(({key:M,link:D})=>P.createElement("link",{key:M,...D})))}function yM(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var NS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NS&&(window.__reactRouterVersion="7.7.1")}catch{}function xM({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=oO({window:t,v5Compat:!0}));let i=r.current,[o,c]=P.useState({action:i.action,location:i.location}),h=P.useCallback(m=>{P.startTransition(()=>c(m))},[c]);return P.useLayoutEffect(()=>i.listen(h),[i,h]),P.createElement(KO,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var kS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PS=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:c,state:h,target:m,to:g,preventScrollReset:w,viewTransition:E,...T},R){let{basename:M}=P.useContext(sa),D=typeof g=="string"&&kS.test(g),L,G=!1;if(typeof g=="string"&&D&&(L=g,NS))try{let H=new URL(window.location.href),ee=g.startsWith("//")?new URL(H.protocol+g):new URL(g),ne=Pa(ee.pathname,M);ee.origin===H.origin&&ne!=null?g=ne+ee.search+ee.hash:G=!0}catch{ta(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=DO(g,{relative:i}),[W,Y,Z]=fM(r,T),ie=EM(g,{replace:c,state:h,target:m,preventScrollReset:w,relative:i,viewTransition:E});function F(H){e&&e(H),H.defaultPrevented||ie(H)}let B=P.createElement("a",{...T,...Z,href:L||z,onClick:G||o?e:F,ref:yM(R,Y),target:m,"data-discover":!D&&t==="render"?"true":void 0});return W&&!D?P.createElement(P.Fragment,null,B,P.createElement(pM,{page:z})):B});PS.displayName="Link";var wM=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:h,children:m,...g},w){let E=qf(c,{relative:g.relative}),T=Wa(),R=P.useContext(rg),{navigator:M,basename:D}=P.useContext(sa),L=R!=null&&CM(E)&&h===!0,G=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,z=T.pathname,W=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(z=z.toLowerCase(),W=W?W.toLowerCase():null,G=G.toLowerCase()),W&&D&&(W=Pa(W,D)||W);const Y=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let Z=z===G||!i&&z.startsWith(G)&&z.charAt(Y)==="/",ie=W!=null&&(W===G||!i&&W.startsWith(G)&&W.charAt(G.length)==="/"),F={isActive:Z,isPending:ie,isTransitioning:L},B=Z?e:void 0,H;typeof r=="function"?H=r(F):H=[r,Z?"active":null,ie?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let ee=typeof o=="function"?o(F):o;return P.createElement(PS,{...g,"aria-current":B,className:H,ref:w,style:ee,to:c,viewTransition:h},typeof m=="function"?m(F):m)});wM.displayName="NavLink";var vM=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:c=Lm,action:h,onSubmit:m,relative:g,preventScrollReset:w,viewTransition:E,...T},R)=>{let M=AM(),D=TM(h,{relative:g}),L=c.toLowerCase()==="get"?"get":"post",G=typeof h=="string"&&kS.test(h),z=W=>{if(m&&m(W),W.defaultPrevented)return;W.preventDefault();let Y=W.nativeEvent.submitter,Z=(Y==null?void 0:Y.getAttribute("formmethod"))||c;M(Y||W.currentTarget,{fetcherKey:e,method:Z,navigate:t,replace:i,state:o,relative:g,preventScrollReset:w,viewTransition:E})};return P.createElement("form",{ref:R,method:L,action:D,onSubmit:r?m:z,...T,"data-discover":!G&&n==="render"?"true":void 0})});vM.displayName="Form";function _M(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DS(n){let e=P.useContext(zd);return ur(e,_M(n)),e}function EM(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:c}={}){let h=oa(),m=Wa(),g=qf(n,{relative:o});return P.useCallback(w=>{if(eM(w,e)){w.preventDefault();let E=t!==void 0?t:gf(m)===gf(g);h(n,{replace:E,state:r,preventScrollReset:i,relative:o,viewTransition:c})}},[m,h,g,t,r,e,n,i,o,c])}var bM=0,IM=()=>`__${String(++bM)}__`;function AM(){let{router:n}=DS("useSubmit"),{basename:e}=P.useContext(sa),t=HO();return P.useCallback(async(r,i={})=>{let{action:o,method:c,encType:h,formData:m,body:g}=rM(r,e);if(i.navigate===!1){let w=i.fetcherKey||IM();await n.fetch(w,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||c,formEncType:i.encType||h,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:m,body:g,formMethod:i.method||c,formEncType:i.encType||h,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function TM(n,{relative:e}={}){let{basename:t}=P.useContext(sa),r=P.useContext(za);ur(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...qf(n||".",{relative:e})},c=Wa();if(n==null){o.search=c.search;let h=new URLSearchParams(o.search),m=h.getAll("index");if(m.some(w=>w==="")){h.delete("index"),m.filter(E=>E).forEach(E=>h.append("index",E));let w=h.toString();o.search=w?`?${w}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ra([t,o.pathname])),gf(o)}function CM(n,{relative:e}={}){let t=P.useContext(bS);ur(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=DS("useViewTransitionState"),i=qf(n,{relative:e});if(!t.isTransitioning)return!1;let o=Pa(t.currentLocation.pathname,r)||t.currentLocation.pathname,c=Pa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return u0(i.pathname,c)!=null||u0(i.pathname,o)!=null}var Kf=gS();const OS=ng(Kf);function Ln(n){return"/"+n.toLowerCase().replace(/ /g,"-")}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...h},m)=>P.createElement("svg",{ref:m,...RM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:MS("lucide",i),...h},[...c.map(([g,w])=>P.createElement(g,w)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(n,e)=>{const t=P.forwardRef(({className:r,...i},o)=>P.createElement(NM,{ref:o,iconNode:e,className:MS(`lucide-${SM(n)}`,r),...i}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],cv=jt("ArrowRight",kM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],DM=jt("Calendar",PM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Sx=jt("Camera",OM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],LM=jt("Check",MM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uv=jt("ChevronDown",VM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],LS=jt("ChevronUp",FM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],dv=jt("CircleAlert",BM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],UM=jt("CircleCheckBig",jM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zu=jt("CircleCheck",zM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hv=jt("Clock",WM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],GM=jt("EyeOff",HM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qM=jt("Eye",$M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],VS=jt("Filter",KM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],FS=jt("Hash",XM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],vd=jt("Heart",YM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ZM=jt("House",QM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],e5=jt("LogOut",JM);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],n5=jt("Mail",t5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],yf=jt("MessageCircle",r5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],s5=jt("PartyPopper",i5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Rx=jt("Phone",o5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],l5=jt("QrCode",a5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],u5=jt("RefreshCw",c5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],h5=jt("Ruler",d5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cy=jt("Save",f5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],m5=jt("Send",p5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],Bb=jt("Share",g5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],x5=jt("Sparkles",y5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sy=jt("SquarePen",w5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_5=jt("Star",v5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],b5=jt("Trash2",E5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],A5=jt("TriangleAlert",I5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],C5=jt("Upload",T5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xf=jt("User",S5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],xf=jt("Users",R5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],k5=jt("WifiOff",N5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],D5=jt("Wifi",P5);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yi=jt("X",O5),M5=()=>{};var jb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},L5=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],c=n[t++],h=n[t++],m=((i&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},jS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],c=i+1<n.length,h=c?n[i+1]:0,m=i+2<n.length,g=m?n[i+2]:0,w=o>>2,E=(o&3)<<4|h>>4;let T=(h&15)<<2|g>>6,R=g&63;m||(R=64,c||(T=64)),r.push(t[w],t[E],t[T],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):L5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const g=i<n.length?t[n.charAt(i)]:64;++i;const E=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||h==null||g==null||E==null)throw new V5;const T=o<<2|h>>4;if(r.push(T),g!==64){const R=h<<4&240|g>>2;if(r.push(R),E!==64){const M=g<<6&192|E;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class V5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F5=function(n){const e=BS(n);return jS.encodeByteArray(e,!0)},d0=function(n){return F5(n).replace(/\./g,"")},US=function(n){try{return jS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=()=>zS().__FIREBASE_DEFAULTS__,j5=()=>{if(typeof process>"u"||typeof jb>"u")return;const n=jb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},U5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&US(n[1]);return e&&JSON.parse(e)},sg=()=>{try{return M5()||B5()||j5()||U5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},WS=n=>{var e,t;return(t=(e=sg())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},HS=n=>{const e=WS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},GS=()=>{var n;return(n=sg())==null?void 0:n.config},$S=n=>{var e;return(e=sg())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[d0(JSON.stringify(t)),d0(JSON.stringify(c)),""].join(".")}const Qh={};function W5(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qh))Qh[e]?n.emulator.push(e):n.prod.push(e);return n}function H5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ub=!1;function pv(n,e){if(typeof window>"u"||typeof document>"u"||!Xl(window.location.host)||Qh[n]===e||Qh[n]||Ub)return;Qh[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",o=W5().prod.length>0;function c(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ub=!0,c()},T}function w(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=H5(r),R=t("text"),M=document.getElementById(R)||document.createElement("span"),D=t("learnmore"),L=document.getElementById(D)||document.createElement("a"),G=t("preprendIcon"),z=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;h(W),w(L,D);const Y=g();m(z,G),W.append(z,M,L,Y),document.body.appendChild(W)}o?(M.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function KS(){var e;const n=(e=sg())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function q5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K5(){const n=Kr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YS(){return!KS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QS(){return!KS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function mv(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}function X5(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="FirebaseError";class to extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Y5,Object.setPrototypeOf(this,to.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?Q5(o,r):"Error",h=`${this.serviceName}: ${c} (${i}).`;return new to(i,h,r)}}function Q5(n,e){return n.replace(Z5,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Z5=/\{\$([^}]+)}/g;function J5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Bl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],c=e[i];if(zb(o)&&zb(c)){if(!Bl(o,c))return!1}else if(o!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function zb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Uh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function eL(n,e){const t=new tL(n,e);return t.subscribe.bind(t)}class tL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");nL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ry),i.error===void 0&&(i.error=Ry),i.complete===void 0&&(i.complete=Ry);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ry(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=1e3,iL=2,sL=14400*1e3,oL=.5;function Wb(n,e=rL,t=iL){const r=e*Math.pow(t,n),i=Math.round(oL*r*(Math.random()-.5)*2);return Math.min(sL,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(n){return n&&n._delegate?n._delegate:n}class eo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new z5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cL(e))try{this.getOrInitializeService({instanceIdentifier:Tc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tc){return this.instances.has(e)}getOptions(e=Tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);r===h&&c.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tc){return this.component?this.component.multipleInstances?e:Tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lL(n){return n===Tc?void 0:n}function cL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Xt||(Xt={}));const dL={debug:Xt.DEBUG,verbose:Xt.VERBOSE,info:Xt.INFO,warn:Xt.WARN,error:Xt.ERROR,silent:Xt.SILENT},hL=Xt.INFO,fL={[Xt.DEBUG]:"log",[Xt.VERBOSE]:"log",[Xt.INFO]:"info",[Xt.WARN]:"warn",[Xt.ERROR]:"error"},pL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=fL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=hL,this._logHandler=pL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xt.DEBUG,...e),this._logHandler(this,Xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xt.VERBOSE,...e),this._logHandler(this,Xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xt.INFO,...e),this._logHandler(this,Xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xt.WARN,...e),this._logHandler(this,Xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xt.ERROR,...e),this._logHandler(this,Xt.ERROR,...e)}}const mL=(n,e)=>e.some(t=>n instanceof t);let Hb,Gb;function gL(){return Hb||(Hb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yL(){return Gb||(Gb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const JS=new WeakMap,Nx=new WeakMap,eR=new WeakMap,Ny=new WeakMap,gv=new WeakMap;function xL(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Dl(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&JS.set(t,n)}).catch(()=>{}),gv.set(e,n),e}function wL(n){if(Nx.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});Nx.set(n,e)}let kx={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Nx.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Dl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vL(n){kx=n(kx)}function _L(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ky(this),e,...t);return eR.set(r,e.sort?e.sort():[e]),Dl(r)}:yL().includes(n)?function(...e){return n.apply(ky(this),e),Dl(JS.get(this))}:function(...e){return Dl(n.apply(ky(this),e))}}function EL(n){return typeof n=="function"?_L(n):(n instanceof IDBTransaction&&wL(n),mL(n,gL())?new Proxy(n,kx):n)}function Dl(n){if(n instanceof IDBRequest)return xL(n);if(Ny.has(n))return Ny.get(n);const e=EL(n);return e!==n&&(Ny.set(n,e),gv.set(e,n)),e}const ky=n=>gv.get(n);function tR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const c=indexedDB.open(n,e),h=Dl(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Dl(c.result),m.oldVersion,m.newVersion,Dl(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),h.then(m=>{o&&m.addEventListener("close",()=>o()),i&&m.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const bL=["get","getKey","getAll","getAllKeys","count"],IL=["put","add","delete","clear"],Py=new Map;function $b(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Py.get(e))return Py.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=IL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bL.includes(t)))return;const o=async function(c,...h){const m=this.transaction(c,i?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),i&&m.done]))[0]};return Py.set(e,o),o}vL(n=>({...n,get:(e,t,r)=>$b(e,t)||n.get(e,t,r),has:(e,t)=>!!$b(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function TL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Px="@firebase/app",qb="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new og("@firebase/app"),CL="@firebase/app-compat",SL="@firebase/analytics-compat",RL="@firebase/analytics",NL="@firebase/app-check-compat",kL="@firebase/app-check",PL="@firebase/auth",DL="@firebase/auth-compat",OL="@firebase/database",ML="@firebase/data-connect",LL="@firebase/database-compat",VL="@firebase/functions",FL="@firebase/functions-compat",BL="@firebase/installations",jL="@firebase/installations-compat",UL="@firebase/messaging",zL="@firebase/messaging-compat",WL="@firebase/performance",HL="@firebase/performance-compat",GL="@firebase/remote-config",$L="@firebase/remote-config-compat",qL="@firebase/storage",KL="@firebase/storage-compat",XL="@firebase/firestore",YL="@firebase/ai",QL="@firebase/firestore-compat",ZL="firebase",JL="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="[DEFAULT]",e9={[Px]:"fire-core",[CL]:"fire-core-compat",[RL]:"fire-analytics",[SL]:"fire-analytics-compat",[kL]:"fire-app-check",[NL]:"fire-app-check-compat",[PL]:"fire-auth",[DL]:"fire-auth-compat",[OL]:"fire-rtdb",[ML]:"fire-data-connect",[LL]:"fire-rtdb-compat",[VL]:"fire-fn",[FL]:"fire-fn-compat",[BL]:"fire-iid",[jL]:"fire-iid-compat",[UL]:"fire-fcm",[zL]:"fire-fcm-compat",[WL]:"fire-perf",[HL]:"fire-perf-compat",[GL]:"fire-rc",[$L]:"fire-rc-compat",[qL]:"fire-gcs",[KL]:"fire-gcs-compat",[XL]:"fire-fst",[QL]:"fire-fst-compat",[YL]:"fire-vertex","fire-js":"fire-js",[ZL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new Map,t9=new Map,Ox=new Map;function Kb(n,e){try{n.container.addComponent(e)}catch(t){Da.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wo(n){const e=n.name;if(Ox.has(e))return Da.debug(`There were multiple attempts to register component ${e}.`),!1;Ox.set(e,n);for(const t of h0.values())Kb(t,n);for(const t of t9.values())Kb(t,n);return!0}function Yl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rs(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ol=new fu("app","Firebase",n9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ol.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=JL;function Mx(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Dx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ol.create("bad-app-name",{appName:String(i)});if(t||(t=GS()),!t)throw Ol.create("no-options");const o=h0.get(i);if(o){if(Bl(t,o.options)&&Bl(r,o.config))return o;throw Ol.create("duplicate-app",{appName:i})}const c=new uL(i);for(const m of Ox.values())c.addComponent(m);const h=new r9(t,r,c);return h0.set(i,h),h}function ag(n=Dx){const e=h0.get(n);if(!e&&n===Dx&&GS())return Mx();if(!e)throw Ol.create("no-app",{appName:n});return e}function fs(n,e,t){let r=e9[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${r}" with version "${e}":`];i&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Da.warn(c.join(" "));return}wo(new eo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i9="firebase-heartbeat-database",s9=1,wf="firebase-heartbeat-store";let Dy=null;function nR(){return Dy||(Dy=tR(i9,s9,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ol.create("idb-open",{originalErrorMessage:n.message})})),Dy}async function o9(n){try{const t=(await nR()).transaction(wf),r=await t.objectStore(wf).get(rR(n));return await t.done,r}catch(e){if(e instanceof to)Da.warn(e.message);else{const t=Ol.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Da.warn(t.message)}}}async function Xb(n,e){try{const r=(await nR()).transaction(wf,"readwrite");await r.objectStore(wf).put(e,rR(n)),await r.done}catch(t){if(t instanceof to)Da.warn(t.message);else{const r=Ol.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Da.warn(r.message)}}}function rR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=1024,l9=30;class c9{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new d9(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Yb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>l9){const c=h9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Da.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yb(),{heartbeatsToSend:r,unsentEntries:i}=u9(this._heartbeatsCache.heartbeats),o=d0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Da.warn(t),""}}}function Yb(){return new Date().toISOString().substring(0,10)}function u9(n,e=a9){const t=[];let r=n.slice();for(const i of n){const o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Qb(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Qb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class d9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mv()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await o9(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qb(n){return d0(JSON.stringify({version:2,heartbeats:n})).length}function h9(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(n){wo(new eo("platform-logger",e=>new AL(e),"PRIVATE")),wo(new eo("heartbeat",e=>new c9(e),"PRIVATE")),fs(Px,qb,n),fs(Px,qb,"esm2020"),fs("fire-js","")}f9("");var p9="firebase",m9="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fs(p9,m9,"app");function iR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g9=iR,sR=new fu("auth","Firebase",iR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new og("@firebase/auth");function y9(n,...e){f0.logLevel<=Xt.WARN&&f0.warn(`Auth (${pu}): ${n}`,...e)}function Fm(n,...e){f0.logLevel<=Xt.ERROR&&f0.error(`Auth (${pu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(n,...e){throw yv(n,...e)}function Go(n,...e){return yv(n,...e)}function oR(n,e,t){const r={...g9(),[e]:t};return new fu("auth","Firebase",r).create(e,{appName:n.name})}function Na(n){return oR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return sR.create(n,...e)}function Et(n,e,...t){if(!n)throw yv(e,...t)}function Aa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fm(e),new Error(e)}function Oa(n,e){n||Aa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function x9(){return Zb()==="http:"||Zb()==="https:"}function Zb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x9()||XS()||"connection"in navigator)?navigator.onLine:!0}function v9(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oa(t>e,"Short delay should be less than long delay!"),this.isMobile=G5()||q5()}get(){return w9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n,e){Oa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],b9=new Qf(3e4,6e4);function Ql(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ha(n,e,t,r,i={}){return lR(n,i,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const h=Yf({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...o};return $5()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Xl(n.emulatorConfig.host)&&(g.credentials="include"),aR.fetch()(await cR(n,n.config.apiHost,t,h),g)})}async function lR(n,e,t){n._canInitEmulator=!1;const r={..._9,...e};try{const i=new A9(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw hm(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[m,g]=h.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw hm(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw hm(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw hm(n,"user-disabled",c);const w=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw oR(n,w,g);vo(n,w)}}catch(i){if(i instanceof to)throw i;vo(n,"network-request-failed",{message:String(i)})}}async function Zf(n,e,t,r,i={}){const o=await Ha(n,e,t,r,i);return"mfaPendingCredential"in o&&vo(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function cR(n,e,t,r){const i=`${e}${t}?${r}`,o=n,c=o.config.emulator?xv(n.config,i):`${n.config.apiScheme}://${i}`;return E9.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function I9(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class A9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Go(this.auth,"network-request-failed")),b9.get())})}}function hm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Go(n,e,r);return i.customData._tokenResponse=t,i}function Jb(n){return n!==void 0&&n.enterprise!==void 0}class T9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I9(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function C9(n,e){return Ha(n,"GET","/v2/recaptchaConfig",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S9(n,e){return Ha(n,"POST","/v1/accounts:delete",e)}async function p0(n,e){return Ha(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R9(n,e=!1){const t=Fn(n),r=await t.getIdToken(e),i=wv(r);Et(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Zh(Oy(i.auth_time)),issuedAtTime:Zh(Oy(i.iat)),expirationTime:Zh(Oy(i.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Oy(n){return Number(n)*1e3}function wv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Fm("JWT malformed, contained fewer than 3 sections"),null;try{const i=US(t);return i?JSON.parse(i):(Fm("Failed to decode base64 JWT payload"),null)}catch(i){return Fm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eI(n){const e=wv(n);return Et(e,"internal-error"),Et(typeof e.exp<"u","internal-error"),Et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _d(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof to&&N9(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function N9({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0(n){var E;const e=n.auth,t=await n.getIdToken(),r=await _d(n,p0(e,{idToken:t}));Et(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(E=i.providerUserInfo)!=null&&E.length?uR(i.providerUserInfo):[],c=D9(n.providerData,o),h=n.isAnonymous,m=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),g=h?m:!1,w={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Vx(i.createdAt,i.lastLoginAt),isAnonymous:g};Object.assign(n,w)}async function P9(n){const e=Fn(n);await m0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function D9(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function uR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O9(n,e){const t=await lR(n,{},async()=>{const r=Yf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=await cR(n,i,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:h,body:r};return n.emulatorConfig&&Xl(n.emulatorConfig.host)&&(m.credentials="include"),aR.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function M9(n,e){return Ha(n,"POST","/v2/accounts:revokeToken",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Et(e.idToken,"internal-error"),Et(typeof e.idToken<"u","internal-error"),Et(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Et(e.length!==0,"internal-error");const t=eI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await O9(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new hd;return r&&(Et(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Et(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(Et(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hd,this.toJSON())}_performRefresh(){return Aa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n,e){Et(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class yo{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new k9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await _d(this,this.stsTokenManager.getToken(this.auth,e));return Et(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return R9(this,e)}reload(){return P9(this)}_assign(e){this!==e&&(Et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await m0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rs(this.auth.app))return Promise.reject(Na(this.auth));const e=await this.getIdToken();return await _d(this,S9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:R,providerData:M,stsTokenManager:D}=t;Et(E&&D,e,"internal-error");const L=hd.fromJSON(this.name,D);Et(typeof E=="string",e,"internal-error"),yl(r,e.name),yl(i,e.name),Et(typeof T=="boolean",e,"internal-error"),Et(typeof R=="boolean",e,"internal-error"),yl(o,e.name),yl(c,e.name),yl(h,e.name),yl(m,e.name),yl(g,e.name),yl(w,e.name);const G=new yo({uid:E,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:R,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:L,createdAt:g,lastLoginAt:w});return M&&Array.isArray(M)&&(G.providerData=M.map(z=>({...z}))),m&&(G._redirectEventId=m),G}static async _fromIdTokenResponse(e,t,r=!1){const i=new hd;i.updateFromServerResponse(t);const o=new yo({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await m0(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Et(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?uR(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),h=new hd;h.updateFromIdToken(r);const m=new yo({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Vx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Map;function Ta(n){Oa(n instanceof Function,"Expected a class definition");let e=tI.get(n);return e?(Oa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dR.type="NONE";const nI=dR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(n,e,t){return`firebase:${n}:${e}:${t}`}class fd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Bm(this.userKey,i.apiKey,o),this.fullPersistenceKey=Bm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await p0(this.auth,{idToken:e}).catch(()=>{});return t?yo._fromGetAccountInfoResponse(this.auth,t,e):null}return yo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new fd(Ta(nI),e,r);const i=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let o=i[0]||Ta(nI);const c=Bm(r,e.config.apiKey,e.name);let h=null;for(const g of t)try{const w=await g._get(c);if(w){let E;if(typeof w=="string"){const T=await p0(e,{idToken:w}).catch(()=>{});if(!T)break;E=await yo._fromGetAccountInfoResponse(e,T,w)}else E=yo._fromJSON(e,w);g!==o&&(h=E),o=g;break}}catch{}const m=i.filter(g=>g._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new fd(o,e,r):(o=m[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==o)try{await g._remove(c)}catch{}})),new fd(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yR(e))return"Blackberry";if(xR(e))return"Webos";if(fR(e))return"Safari";if((e.includes("chrome/")||pR(e))&&!e.includes("edge/"))return"Chrome";if(gR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hR(n=Kr()){return/firefox\//i.test(n)}function fR(n=Kr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pR(n=Kr()){return/crios\//i.test(n)}function mR(n=Kr()){return/iemobile/i.test(n)}function gR(n=Kr()){return/android/i.test(n)}function yR(n=Kr()){return/blackberry/i.test(n)}function xR(n=Kr()){return/webos/i.test(n)}function vv(n=Kr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function L9(n=Kr()){var e;return vv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function V9(){return K5()&&document.documentMode===10}function wR(n=Kr()){return vv(n)||gR(n)||xR(n)||yR(n)||/windows phone/i.test(n)||mR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(n,e=[]){let t;switch(n){case"Browser":t=rI(Kr());break;case"Worker":t=`${rI(Kr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((c,h)=>{try{const m=e(o);c(m)}catch(m){h(m)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B9(n,e={}){return Ha(n,"GET","/v2/passwordPolicy",Ql(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9=6;class U9{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??j9,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iI(this),this.idTokenSubscription=new iI(this),this.beforeStateQueue=new F9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ta(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await fd.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await p0(this,{idToken:e}),r=await yo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Rs(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=r==null?void 0:r._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===h)&&(m!=null&&m.user)&&(r=m.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await m0(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=v9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rs(this.app))return Promise.reject(Na(this));const t=e?Fn(e):null;return t&&Et(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rs(this.app)?Promise.reject(Na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rs(this.app)?Promise.reject(Na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B9(this),t=new U9(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await M9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ta(e)||this._popupRedirectResolver;Et(t,this,"argument-error"),this.redirectPersistenceManager=await fd.create(this,[Ta(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Et(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,i);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&y9(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function mu(n){return Fn(n)}class iI{constructor(e){this.auth=e,this.observer=null,this.addObserver=eL(t=>this.observer=t)}get next(){return Et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function W9(n){lg=n}function _R(n){return lg.loadJS(n)}function H9(){return lg.recaptchaEnterpriseScript}function G9(){return lg.gapiScript}function $9(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class q9{constructor(){this.enterprise=new K9}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class K9{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const X9="recaptcha-enterprise",ER="NO_RECAPTCHA";class Y9{constructor(e){this.type=X9,this.auth=mu(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{C9(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new T9(m);return o.tenantId==null?o._agentRecaptchaConfig=g:o._tenantRecaptchaConfigs[o.tenantId]=g,c(g.siteKey)}}).catch(m=>{h(m)})})}function i(o,c,h){const m=window.grecaptcha;Jb(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(g=>{c(g)}).catch(()=>{c(ER)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new q9().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(h=>{if(!t&&Jb(window.grecaptcha))i(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=H9();m.length!==0&&(m+=h),_R(m).then(()=>{i(h,o,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function sI(n,e,t,r=!1,i=!1){const o=new Y9(n);let c;if(i)c=ER;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const m=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const m=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Fx(n,e,t,r,i){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sI(n,e,t,t==="getOobCode");return r(n,c)}else return r(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await sI(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q9(n,e){const t=Yl(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Bl(o,e??{}))return i;vo(i,"already-initialized")}return t.initialize({options:e})}function Z9(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ta);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function J9(n,e,t){const r=mu(n);Et(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=bR(e),{host:c,port:h}=e7(e),m=h===null?"":`:${h}`,g={url:`${o}//${c}${m}/`},w=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Et(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Et(Bl(g,r.config.emulator)&&Bl(w,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=w,r.settings.appVerificationDisabledForTesting=!0,Xl(c)?(fv(`${o}//${c}${m}`),pv("Auth",!0)):t7()}function bR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function e7(n){const e=bR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:oI(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:oI(c)}}}function oI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function t7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Aa("not implemented")}_getIdTokenResponse(e){return Aa("not implemented")}_linkToIdToken(e,t){return Aa("not implemented")}_getReauthenticationResolver(e){return Aa("not implemented")}}async function n7(n,e){return Ha(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r7(n,e){return Zf(n,"POST","/v1/accounts:signInWithPassword",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(n,e){return Zf(n,"POST","/v1/accounts:signInWithEmailLink",Ql(n,e))}async function s7(n,e){return Zf(n,"POST","/v1/accounts:signInWithEmailLink",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends _v{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new vf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fx(e,t,"signInWithPassword",r7);case"emailLink":return i7(e,{email:this._email,oobCode:this._password});default:vo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fx(e,r,"signUpPassword",n7);case"emailLink":return s7(e,{idToken:t,email:this._email,oobCode:this._password});default:vo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(n,e){return Zf(n,"POST","/v1/accounts:signInWithIdp",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7="http://localhost";class Kc extends _v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Kc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const c=new Kc(r,i);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return pd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,pd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pd(e,t)}buildRequest(){const e={requestUri:o7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l7(n){const e=jh(Uh(n)).link,t=e?jh(Uh(e)).deep_link_id:null,r=jh(Uh(n)).deep_link_id;return(r?jh(Uh(r)).link:null)||r||t||e||n}class Ev{constructor(e){const t=jh(Uh(e)),r=t.apiKey??null,i=t.oobCode??null,o=a7(t.mode??null);Et(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=l7(e);try{return new Ev(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this.providerId=Wd.PROVIDER_ID}static credential(e,t){return vf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Ev.parseLink(t);return Et(r,"argument-error"),vf._fromEmailAndCode(e,r.code,r.tenantId)}}Wd.PROVIDER_ID="password";Wd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends IR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Jf{constructor(){super("facebook.com")}static credential(e){return Kc._fromParams({providerId:Tl.PROVIDER_ID,signInMethod:Tl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tl.credentialFromTaggedObject(e)}static credentialFromError(e){return Tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tl.credential(e.oauthAccessToken)}catch{return null}}}Tl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Jf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Kc._fromParams({providerId:Cl.PROVIDER_ID,signInMethod:Cl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cl.credentialFromTaggedObject(e)}static credentialFromError(e){return Cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Cl.credential(t,r)}catch{return null}}}Cl.GOOGLE_SIGN_IN_METHOD="google.com";Cl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Jf{constructor(){super("github.com")}static credential(e){return Kc._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sl.credential(e.oauthAccessToken)}catch{return null}}}Sl.GITHUB_SIGN_IN_METHOD="github.com";Sl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl extends Jf{constructor(){super("twitter.com")}static credential(e,t){return Kc._fromParams({providerId:Rl.PROVIDER_ID,signInMethod:Rl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rl.credentialFromTaggedObject(e)}static credentialFromError(e){return Rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Rl.credential(t,r)}catch{return null}}}Rl.TWITTER_SIGN_IN_METHOD="twitter.com";Rl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c7(n,e){return Zf(n,"POST","/v1/accounts:signUp",Ql(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await yo._fromIdTokenResponse(e,r,i),c=aI(r);return new Xc({user:o,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=aI(r);return new Xc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function aI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends to{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,g0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new g0(e,t,r,i)}}function AR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?g0._fromErrorAndOperation(n,o,e,r):o})}async function u7(n,e,t=!1){const r=await _d(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Xc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d7(n,e,t=!1){const{auth:r}=n;if(Rs(r.app))return Promise.reject(Na(r));const i="reauthenticate";try{const o=await _d(n,AR(r,i,e,n),t);Et(o.idToken,r,"internal-error");const c=wv(o.idToken);Et(c,r,"internal-error");const{sub:h}=c;return Et(n.uid===h,r,"user-mismatch"),Xc._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&vo(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(n,e,t=!1){if(Rs(n.app))return Promise.reject(Na(n));const r="signIn",i=await AR(n,r,e),o=await Xc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function h7(n,e){return TR(mu(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(n){const e=mu(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function f7(n,e,t){if(Rs(n.app))return Promise.reject(Na(n));const r=mu(n),c=await Fx(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c7).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&CR(n),m}),h=await Xc._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(h.user),h}function p7(n,e,t){return Rs(n.app)?Promise.reject(Na(n)):h7(Fn(n),Wd.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&CR(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m7(n,e){return Ha(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g7(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Fn(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await _d(r,m7(r.auth,o));r.displayName=c.displayName||null,r.photoURL=c.photoUrl||null;const h=r.providerData.find(({providerId:m})=>m==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(c)}function y7(n,e,t,r){return Fn(n).onIdTokenChanged(e,t,r)}function x7(n,e,t){return Fn(n).beforeAuthStateChanged(e,t)}function w7(n,e,t,r){return Fn(n).onAuthStateChanged(e,t,r)}function v7(n){return Fn(n).signOut()}const y0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(y0,"1"),this.storage.removeItem(y0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=1e3,E7=10;class RR extends SR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,m)=>{this.notifyListeners(c,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);V9()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,E7):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},_7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}RR.type="LOCAL";const b7=RR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR extends SR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}NR.type="SESSION";const kR=NR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new cg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(c).map(async g=>g(t.origin,o)),m=await I7(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((h,m)=>{const g=bv("",20);i.port1.start();const w=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(w),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(T.data.response);break;default:clearTimeout(w),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(){return window}function T7(n){$o().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(){return typeof $o().WorkerGlobalScope<"u"&&typeof $o().importScripts=="function"}async function C7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S7(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function R7(){return PR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="firebaseLocalStorageDb",N7=1,x0="firebaseLocalStorage",OR="fbase_key";class ep{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ug(n,e){return n.transaction([x0],e?"readwrite":"readonly").objectStore(x0)}function k7(){const n=indexedDB.deleteDatabase(DR);return new ep(n).toPromise()}function Bx(){const n=indexedDB.open(DR,N7);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(x0,{keyPath:OR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(x0)?e(r):(r.close(),await k7(),e(await Bx()))})})}async function lI(n,e,t){const r=ug(n,!0).put({[OR]:e,value:t});return new ep(r).toPromise()}async function P7(n,e){const t=ug(n,!1).get(e),r=await new ep(t).toPromise();return r===void 0?null:r.value}function cI(n,e){const t=ug(n,!0).delete(e);return new ep(t).toPromise()}const D7=800,O7=3;class MR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bx(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>O7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cg._getInstance(R7()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await C7(),!this.activeServiceWorker)return;this.sender=new A7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bx();return await lI(e,y0,"1"),await cI(e,y0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>lI(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>P7(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=ug(i,!1).getAll();return new ep(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),D7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MR.type="LOCAL";const M7=MR;new Qf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(n,e){return e?Ta(e):(Et(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv extends _v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function V7(n){return TR(n.auth,new Iv(n),n.bypassAuthState)}function F7(n){const{auth:e,user:t}=n;return Et(t,e,"internal-error"),d7(t,new Iv(n),n.bypassAuthState)}async function B7(n){const{auth:e,user:t}=n;return Et(t,e,"internal-error"),u7(t,new Iv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V7;case"linkViaPopup":case"linkViaRedirect":return B7;case"reauthViaPopup":case"reauthViaRedirect":return F7;default:vo(this.auth,"internal-error")}}resolve(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=new Qf(2e3,1e4);class sd extends LR{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,sd.currentPopupAction&&sd.currentPopupAction.cancel(),sd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Et(e,this.auth,"internal-error"),e}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const e=bv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Go(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Go(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Go(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j7.get())};e()}}sd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7="pendingRedirect",jm=new Map;class z7 extends LR{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=jm.get(this.auth._key());if(!e){try{const r=await W7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}jm.set(this.auth._key(),e)}return this.bypassAuthState||jm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function W7(n,e){const t=$7(e),r=G7(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function H7(n,e){jm.set(n._key(),e)}function G7(n){return Ta(n._redirectPersistence)}function $7(n){return Bm(U7,n.config.apiKey,n.name)}async function q7(n,e,t=!1){if(Rs(n.app))return Promise.reject(Na(n));const r=mu(n),i=L7(r,e),c=await new z7(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K7=600*1e3;class X7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y7(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!VR(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Go(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K7&&this.cachedEventUids.clear(),this.cachedEventUids.has(uI(e))}saveEventToCache(e){this.cachedEventUids.add(uI(e)),this.lastProcessedEventTime=Date.now()}}function uI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function VR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Y7(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(n,e={}){return Ha(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J7=/^https?/;async function eV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Q7(n);for(const t of e)try{if(tV(t))return}catch{}vo(n,"unauthorized-domain")}function tV(n){const e=Lx(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!J7.test(t))return!1;if(Z7.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=new Qf(3e4,6e4);function dI(){const n=$o().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function rV(n){return new Promise((e,t)=>{var i,o,c;function r(){dI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dI(),t(Go(n,"network-request-failed"))},timeout:nV.get()})}if((o=(i=$o().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=$o().gapi)!=null&&c.load)r();else{const h=$9("iframefcb");return $o()[h]=()=>{gapi.load?r():t(Go(n,"network-request-failed"))},_R(`${G9()}?onload=${h}`).catch(m=>t(m))}}).catch(e=>{throw Um=null,e})}let Um=null;function iV(n){return Um=Um||rV(n),Um}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=new Qf(5e3,15e3),oV="__/auth/iframe",aV="emulator/auth/iframe",lV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uV(n){const e=n.config;Et(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xv(e,aV):`https://${n.config.authDomain}/${oV}`,r={apiKey:e.apiKey,appName:n.name,v:pu},i=cV.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Yf(r).slice(1)}`}async function dV(n){const e=await iV(n),t=$o().gapi;return Et(t,n,"internal-error"),e.open({where:document.body,url:uV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const c=Go(n,"network-request-failed"),h=$o().setTimeout(()=>{o(c)},sV.get());function m(){$o().clearTimeout(h),i(r)}r.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fV=500,pV=600,mV="_blank",gV="http://localhost";class hI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yV(n,e,t,r=fV,i=pV){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const m={...hV,width:r.toString(),height:i.toString(),top:o,left:c},g=Kr().toLowerCase();t&&(h=pR(g)?mV:t),hR(g)&&(e=e||gV,m.scrollbars="yes");const w=Object.entries(m).reduce((T,[R,M])=>`${T}${R}=${M},`,"");if(L9(g)&&h!=="_self")return xV(e||"",h),new hI(null);const E=window.open(e||"",h,w);Et(E,n,"popup-blocked");try{E.focus()}catch{}return new hI(E)}function xV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="__/auth/handler",vV="emulator/auth/handler",_V=encodeURIComponent("fac");async function fI(n,e,t,r,i,o){Et(n.config.authDomain,n,"auth-domain-config-required"),Et(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pu,eventId:i};if(e instanceof IR){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",J5(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))c[w]=E}if(e instanceof Jf){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const w of Object.keys(h))h[w]===void 0&&delete h[w];const m=await n._getAppCheckToken(),g=m?`#${_V}=${encodeURIComponent(m)}`:"";return`${EV(n)}?${Yf(h).slice(1)}${g}`}function EV({config:n}){return n.emulator?xv(n,vV):`https://${n.authDomain}/${wV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="webStorageSupport";class bV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kR,this._completeRedirectFn=q7,this._overrideRedirectResult=H7}async _openPopup(e,t,r,i){var c;Oa((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await fI(e,t,r,Lx(),i);return yV(e,o,bv())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await fI(e,t,r,Lx(),i);return T7(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Oa(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await dV(e),r=new X7(e);return t.register("authEvent",i=>(Et(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(My,{type:My},i=>{var c;const o=(c=i==null?void 0:i[0])==null?void 0:c[My];o!==void 0&&t(!!o),vo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=eV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wR()||fR()||vv()}}const IV=bV;var pI="@firebase/auth",mI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CV(n){wo(new eo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=r.options;Et(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vR(n)},g=new z9(r,i,o,m);return Z9(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wo(new eo("auth-internal",e=>{const t=mu(e.getProvider("auth").getImmediate());return(r=>new AV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fs(pI,mI,TV(n)),fs(pI,mI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=300,RV=$S("authIdTokenMaxAge")||SV;let gI=null;const NV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>RV)return;const i=t==null?void 0:t.token;gI!==i&&(gI=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function kV(n=ag()){const e=Yl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Q9(n,{popupRedirectResolver:IV,persistence:[M7,b7,kR]}),r=$S("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=NV(o.toString());x7(t,c,()=>c(t.currentUser)),y7(t,h=>c(h))}}const i=WS("auth");return i&&J9(t,`http://${i}`),t}function PV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}W9({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Go("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",PV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CV("Browser");var yI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ml,FR;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,B){function H(){}H.prototype=B.prototype,F.D=B.prototype,F.prototype=new H,F.prototype.constructor=F,F.C=function(ee,ne,te){for(var K=Array(arguments.length-2),we=2;we<arguments.length;we++)K[we-2]=arguments[we];return B.prototype[ne].apply(ee,K)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,B,H){H||(H=0);var ee=Array(16);if(typeof B=="string")for(var ne=0;16>ne;++ne)ee[ne]=B.charCodeAt(H++)|B.charCodeAt(H++)<<8|B.charCodeAt(H++)<<16|B.charCodeAt(H++)<<24;else for(ne=0;16>ne;++ne)ee[ne]=B[H++]|B[H++]<<8|B[H++]<<16|B[H++]<<24;B=F.g[0],H=F.g[1],ne=F.g[2];var te=F.g[3],K=B+(te^H&(ne^te))+ee[0]+3614090360&4294967295;B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[1]+3905402710&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[2]+606105819&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[3]+3250441966&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(te^H&(ne^te))+ee[4]+4118548399&4294967295,B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[5]+1200080426&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[6]+2821735955&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[7]+4249261313&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(te^H&(ne^te))+ee[8]+1770035416&4294967295,B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[9]+2336552879&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[10]+4294925233&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[11]+2304563134&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(te^H&(ne^te))+ee[12]+1804603682&4294967295,B=H+(K<<7&4294967295|K>>>25),K=te+(ne^B&(H^ne))+ee[13]+4254626195&4294967295,te=B+(K<<12&4294967295|K>>>20),K=ne+(H^te&(B^H))+ee[14]+2792965006&4294967295,ne=te+(K<<17&4294967295|K>>>15),K=H+(B^ne&(te^B))+ee[15]+1236535329&4294967295,H=ne+(K<<22&4294967295|K>>>10),K=B+(ne^te&(H^ne))+ee[1]+4129170786&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[6]+3225465664&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[11]+643717713&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[0]+3921069994&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(ne^te&(H^ne))+ee[5]+3593408605&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[10]+38016083&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[15]+3634488961&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[4]+3889429448&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(ne^te&(H^ne))+ee[9]+568446438&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[14]+3275163606&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[3]+4107603335&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[8]+1163531501&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(ne^te&(H^ne))+ee[13]+2850285829&4294967295,B=H+(K<<5&4294967295|K>>>27),K=te+(H^ne&(B^H))+ee[2]+4243563512&4294967295,te=B+(K<<9&4294967295|K>>>23),K=ne+(B^H&(te^B))+ee[7]+1735328473&4294967295,ne=te+(K<<14&4294967295|K>>>18),K=H+(te^B&(ne^te))+ee[12]+2368359562&4294967295,H=ne+(K<<20&4294967295|K>>>12),K=B+(H^ne^te)+ee[5]+4294588738&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[8]+2272392833&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[11]+1839030562&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[14]+4259657740&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(H^ne^te)+ee[1]+2763975236&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[4]+1272893353&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[7]+4139469664&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[10]+3200236656&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(H^ne^te)+ee[13]+681279174&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[0]+3936430074&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[3]+3572445317&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[6]+76029189&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(H^ne^te)+ee[9]+3654602809&4294967295,B=H+(K<<4&4294967295|K>>>28),K=te+(B^H^ne)+ee[12]+3873151461&4294967295,te=B+(K<<11&4294967295|K>>>21),K=ne+(te^B^H)+ee[15]+530742520&4294967295,ne=te+(K<<16&4294967295|K>>>16),K=H+(ne^te^B)+ee[2]+3299628645&4294967295,H=ne+(K<<23&4294967295|K>>>9),K=B+(ne^(H|~te))+ee[0]+4096336452&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[7]+1126891415&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[14]+2878612391&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[5]+4237533241&4294967295,H=ne+(K<<21&4294967295|K>>>11),K=B+(ne^(H|~te))+ee[12]+1700485571&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[3]+2399980690&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[10]+4293915773&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[1]+2240044497&4294967295,H=ne+(K<<21&4294967295|K>>>11),K=B+(ne^(H|~te))+ee[8]+1873313359&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[15]+4264355552&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[6]+2734768916&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[13]+1309151649&4294967295,H=ne+(K<<21&4294967295|K>>>11),K=B+(ne^(H|~te))+ee[4]+4149444226&4294967295,B=H+(K<<6&4294967295|K>>>26),K=te+(H^(B|~ne))+ee[11]+3174756917&4294967295,te=B+(K<<10&4294967295|K>>>22),K=ne+(B^(te|~H))+ee[2]+718787259&4294967295,ne=te+(K<<15&4294967295|K>>>17),K=H+(te^(ne|~B))+ee[9]+3951481745&4294967295,F.g[0]=F.g[0]+B&4294967295,F.g[1]=F.g[1]+(ne+(K<<21&4294967295|K>>>11))&4294967295,F.g[2]=F.g[2]+ne&4294967295,F.g[3]=F.g[3]+te&4294967295}r.prototype.u=function(F,B){B===void 0&&(B=F.length);for(var H=B-this.blockSize,ee=this.B,ne=this.h,te=0;te<B;){if(ne==0)for(;te<=H;)i(this,F,te),te+=this.blockSize;if(typeof F=="string"){for(;te<B;)if(ee[ne++]=F.charCodeAt(te++),ne==this.blockSize){i(this,ee),ne=0;break}}else for(;te<B;)if(ee[ne++]=F[te++],ne==this.blockSize){i(this,ee),ne=0;break}}this.h=ne,this.o+=B},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var B=1;B<F.length-8;++B)F[B]=0;var H=8*this.o;for(B=F.length-8;B<F.length;++B)F[B]=H&255,H/=256;for(this.u(F),F=Array(16),B=H=0;4>B;++B)for(var ee=0;32>ee;ee+=8)F[H++]=this.g[B]>>>ee&255;return F};function o(F,B){var H=h;return Object.prototype.hasOwnProperty.call(H,F)?H[F]:H[F]=B(F)}function c(F,B){this.h=B;for(var H=[],ee=!0,ne=F.length-1;0<=ne;ne--){var te=F[ne]|0;ee&&te==B||(H[ne]=te,ee=!1)}this.g=H}var h={};function m(F){return-128<=F&&128>F?o(F,function(B){return new c([B|0],0>B?-1:0)}):new c([F|0],0>F?-1:0)}function g(F){if(isNaN(F)||!isFinite(F))return E;if(0>F)return L(g(-F));for(var B=[],H=1,ee=0;F>=H;ee++)B[ee]=F/H|0,H*=4294967296;return new c(B,0)}function w(F,B){if(F.length==0)throw Error("number format error: empty string");if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(F.charAt(0)=="-")return L(w(F.substring(1),B));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var H=g(Math.pow(B,8)),ee=E,ne=0;ne<F.length;ne+=8){var te=Math.min(8,F.length-ne),K=parseInt(F.substring(ne,ne+te),B);8>te?(te=g(Math.pow(B,te)),ee=ee.j(te).add(g(K))):(ee=ee.j(H),ee=ee.add(g(K)))}return ee}var E=m(0),T=m(1),R=m(16777216);n=c.prototype,n.m=function(){if(D(this))return-L(this).m();for(var F=0,B=1,H=0;H<this.g.length;H++){var ee=this.i(H);F+=(0<=ee?ee:4294967296+ee)*B,B*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(M(this))return"0";if(D(this))return"-"+L(this).toString(F);for(var B=g(Math.pow(F,6)),H=this,ee="";;){var ne=Y(H,B).g;H=G(H,ne.j(B));var te=((0<H.g.length?H.g[0]:H.h)>>>0).toString(F);if(H=ne,M(H))return te+ee;for(;6>te.length;)te="0"+te;ee=te+ee}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function M(F){if(F.h!=0)return!1;for(var B=0;B<F.g.length;B++)if(F.g[B]!=0)return!1;return!0}function D(F){return F.h==-1}n.l=function(F){return F=G(this,F),D(F)?-1:M(F)?0:1};function L(F){for(var B=F.g.length,H=[],ee=0;ee<B;ee++)H[ee]=~F.g[ee];return new c(H,~F.h).add(T)}n.abs=function(){return D(this)?L(this):this},n.add=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0,ne=0;ne<=B;ne++){var te=ee+(this.i(ne)&65535)+(F.i(ne)&65535),K=(te>>>16)+(this.i(ne)>>>16)+(F.i(ne)>>>16);ee=K>>>16,te&=65535,K&=65535,H[ne]=K<<16|te}return new c(H,H[H.length-1]&-2147483648?-1:0)};function G(F,B){return F.add(L(B))}n.j=function(F){if(M(this)||M(F))return E;if(D(this))return D(F)?L(this).j(L(F)):L(L(this).j(F));if(D(F))return L(this.j(L(F)));if(0>this.l(R)&&0>F.l(R))return g(this.m()*F.m());for(var B=this.g.length+F.g.length,H=[],ee=0;ee<2*B;ee++)H[ee]=0;for(ee=0;ee<this.g.length;ee++)for(var ne=0;ne<F.g.length;ne++){var te=this.i(ee)>>>16,K=this.i(ee)&65535,we=F.i(ne)>>>16,se=F.i(ne)&65535;H[2*ee+2*ne]+=K*se,z(H,2*ee+2*ne),H[2*ee+2*ne+1]+=te*se,z(H,2*ee+2*ne+1),H[2*ee+2*ne+1]+=K*we,z(H,2*ee+2*ne+1),H[2*ee+2*ne+2]+=te*we,z(H,2*ee+2*ne+2)}for(ee=0;ee<B;ee++)H[ee]=H[2*ee+1]<<16|H[2*ee];for(ee=B;ee<2*B;ee++)H[ee]=0;return new c(H,0)};function z(F,B){for(;(F[B]&65535)!=F[B];)F[B+1]+=F[B]>>>16,F[B]&=65535,B++}function W(F,B){this.g=F,this.h=B}function Y(F,B){if(M(B))throw Error("division by zero");if(M(F))return new W(E,E);if(D(F))return B=Y(L(F),B),new W(L(B.g),L(B.h));if(D(B))return B=Y(F,L(B)),new W(L(B.g),B.h);if(30<F.g.length){if(D(F)||D(B))throw Error("slowDivide_ only works with positive integers.");for(var H=T,ee=B;0>=ee.l(F);)H=Z(H),ee=Z(ee);var ne=ie(H,1),te=ie(ee,1);for(ee=ie(ee,2),H=ie(H,2);!M(ee);){var K=te.add(ee);0>=K.l(F)&&(ne=ne.add(H),te=K),ee=ie(ee,1),H=ie(H,1)}return B=G(F,ne.j(B)),new W(ne,B)}for(ne=E;0<=F.l(B);){for(H=Math.max(1,Math.floor(F.m()/B.m())),ee=Math.ceil(Math.log(H)/Math.LN2),ee=48>=ee?1:Math.pow(2,ee-48),te=g(H),K=te.j(B);D(K)||0<K.l(F);)H-=ee,te=g(H),K=te.j(B);M(te)&&(te=T),ne=ne.add(te),F=G(F,K)}return new W(ne,F)}n.A=function(F){return Y(this,F).h},n.and=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0;ee<B;ee++)H[ee]=this.i(ee)&F.i(ee);return new c(H,this.h&F.h)},n.or=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0;ee<B;ee++)H[ee]=this.i(ee)|F.i(ee);return new c(H,this.h|F.h)},n.xor=function(F){for(var B=Math.max(this.g.length,F.g.length),H=[],ee=0;ee<B;ee++)H[ee]=this.i(ee)^F.i(ee);return new c(H,this.h^F.h)};function Z(F){for(var B=F.g.length+1,H=[],ee=0;ee<B;ee++)H[ee]=F.i(ee)<<1|F.i(ee-1)>>>31;return new c(H,F.h)}function ie(F,B){var H=B>>5;B%=32;for(var ee=F.g.length-H,ne=[],te=0;te<ee;te++)ne[te]=0<B?F.i(te+H)>>>B|F.i(te+H+1)<<32-B:F.i(te+H);return new c(ne,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,FR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=w,Ml=c}).apply(typeof yI<"u"?yI:typeof self<"u"?self:typeof window<"u"?window:{});var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BR,zh,jR,zm,jx,UR,zR,WR;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(_,N,V){return _==Array.prototype||_==Object.prototype||(_[N]=V.value),_};function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof fm=="object"&&fm];for(var N=0;N<_.length;++N){var V=_[N];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=t(this);function i(_,N){if(N)e:{var V=r;_=_.split(".");for(var X=0;X<_.length-1;X++){var me=_[X];if(!(me in V))break e;V=V[me]}_=_[_.length-1],X=V[_],N=N(X),N!=X&&N!=null&&e(V,_,{configurable:!0,writable:!0,value:N})}}function o(_,N){_ instanceof String&&(_+="");var V=0,X=!1,me={next:function(){if(!X&&V<_.length){var Ie=V++;return{value:N(Ie,_[Ie]),done:!1}}return X=!0,{done:!0,value:void 0}}};return me[Symbol.iterator]=function(){return me},me}i("Array.prototype.values",function(_){return _||function(){return o(this,function(N,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function m(_){var N=typeof _;return N=N!="object"?N:_?Array.isArray(_)?"array":N:"null",N=="array"||N=="object"&&typeof _.length=="number"}function g(_){var N=typeof _;return N=="object"&&_!=null||N=="function"}function w(_,N,V){return _.call.apply(_.bind,arguments)}function E(_,N,V){if(!_)throw Error();if(2<arguments.length){var X=Array.prototype.slice.call(arguments,2);return function(){var me=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(me,X),_.apply(N,me)}}return function(){return _.apply(N,arguments)}}function T(_,N,V){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:E,T.apply(null,arguments)}function R(_,N){var V=Array.prototype.slice.call(arguments,1);return function(){var X=V.slice();return X.push.apply(X,arguments),_.apply(this,X)}}function M(_,N){function V(){}V.prototype=N.prototype,_.aa=N.prototype,_.prototype=new V,_.prototype.constructor=_,_.Qb=function(X,me,Ie){for(var He=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)He[dn-2]=arguments[dn];return N.prototype[me].apply(X,He)}}function D(_){const N=_.length;if(0<N){const V=Array(N);for(let X=0;X<N;X++)V[X]=_[X];return V}return[]}function L(_,N){for(let V=1;V<arguments.length;V++){const X=arguments[V];if(m(X)){const me=_.length||0,Ie=X.length||0;_.length=me+Ie;for(let He=0;He<Ie;He++)_[me+He]=X[He]}else _.push(X)}}class G{constructor(N,V){this.i=N,this.j=V,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function z(_){return/^[\s\xa0]*$/.test(_)}function W(){var _=h.navigator;return _&&(_=_.userAgent)?_:""}function Y(_){return Y[" "](_),_}Y[" "]=function(){};var Z=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ie(_,N,V){for(const X in _)N.call(V,_[X],X,_)}function F(_,N){for(const V in _)N.call(void 0,_[V],V,_)}function B(_){const N={};for(const V in _)N[V]=_[V];return N}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(_,N){let V,X;for(let me=1;me<arguments.length;me++){X=arguments[me];for(V in X)_[V]=X[V];for(let Ie=0;Ie<H.length;Ie++)V=H[Ie],Object.prototype.hasOwnProperty.call(X,V)&&(_[V]=X[V])}}function ne(_){var N=1;_=_.split(":");const V=[];for(;0<N&&_.length;)V.push(_.shift()),N--;return _.length&&V.push(_.join(":")),V}function te(_){h.setTimeout(()=>{throw _},0)}function K(){var _=Te;let N=null;return _.g&&(N=_.g,_.g=_.g.next,_.g||(_.h=null),N.next=null),N}class we{constructor(){this.h=this.g=null}add(N,V){const X=se.get();X.set(N,V),this.h?this.h.next=X:this.g=X,this.h=X}}var se=new G(()=>new Ae,_=>_.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(N,V){this.h=N,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,oe=!1,Te=new we,Ne=()=>{const _=h.Promise.resolve(void 0);xe=()=>{_.then(ae)}};var ae=()=>{for(var _;_=K();){try{_.h.call(_.g)}catch(V){te(V)}var N=se;N.j(_),100>N.h&&(N.h++,_.next=N.g,N.g=_)}oe=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(_,N){this.type=_,this.g=this.target=N,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var _=!1,N=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const V=()=>{};h.addEventListener("test",V,N),h.removeEventListener("test",V,N)}catch{}return _}();function it(_,N){if(Se.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_){var V=this.type=_.type,X=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;if(this.target=_.target||_.srcElement,this.g=N,N=_.relatedTarget){if(Z){e:{try{Y(N.nodeName);var me=!0;break e}catch{}me=!1}me||(N=null)}}else V=="mouseover"?N=_.fromElement:V=="mouseout"&&(N=_.toElement);this.relatedTarget=N,X?(this.clientX=X.clientX!==void 0?X.clientX:X.pageX,this.clientY=X.clientY!==void 0?X.clientY:X.pageY,this.screenX=X.screenX||0,this.screenY=X.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=typeof _.pointerType=="string"?_.pointerType:Re[_.pointerType]||"",this.state=_.state,this.i=_,_.defaultPrevented&&it.aa.h.call(this)}}M(it,Se);var Re={2:"touch",3:"pen",4:"mouse"};it.prototype.h=function(){it.aa.h.call(this);var _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function at(_,N,V,X,me){this.listener=_,this.proxy=null,this.src=N,this.type=V,this.capture=!!X,this.ha=me,this.key=++Ge,this.da=this.fa=!1}function st(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function ct(_){this.src=_,this.g={},this.h=0}ct.prototype.add=function(_,N,V,X,me){var Ie=_.toString();_=this.g[Ie],_||(_=this.g[Ie]=[],this.h++);var He=ht(_,N,X,me);return-1<He?(N=_[He],V||(N.fa=!1)):(N=new at(N,this.src,Ie,!!X,me),N.fa=V,_.push(N)),N};function bt(_,N){var V=N.type;if(V in _.g){var X=_.g[V],me=Array.prototype.indexOf.call(X,N,void 0),Ie;(Ie=0<=me)&&Array.prototype.splice.call(X,me,1),Ie&&(st(N),_.g[V].length==0&&(delete _.g[V],_.h--))}}function ht(_,N,V,X){for(var me=0;me<_.length;++me){var Ie=_[me];if(!Ie.da&&Ie.listener==N&&Ie.capture==!!V&&Ie.ha==X)return me}return-1}var gn="closure_lm_"+(1e6*Math.random()|0),Bn={};function Dr(_,N,V,X,me){if(Array.isArray(N)){for(var Ie=0;Ie<N.length;Ie++)Dr(_,N[Ie],V,X,me);return null}return V=no(V),_&&_[Pe]?_.K(N,V,g(X)?!!X.capture:!1,me):Qt(_,N,V,!1,X,me)}function Qt(_,N,V,X,me,Ie){if(!N)throw Error("Invalid event type");var He=g(me)?!!me.capture:!!me,dn=wi(_);if(dn||(_[gn]=dn=new ct(_)),V=dn.add(N,V,X,He,Ie),V.proxy)return V;if(X=zt(),V.proxy=X,X.src=_,X.listener=V,_.addEventListener)Le||(me=He),me===void 0&&(me=!1),_.addEventListener(N.toString(),X,me);else if(_.attachEvent)_.attachEvent(Xe(N.toString()),X);else if(_.addListener&&_.removeListener)_.addListener(X);else throw Error("addEventListener and attachEvent are unavailable.");return V}function zt(){function _(V){return N.call(_.src,_.listener,V)}const N=Xn;return _}function pt(_,N,V,X,me){if(Array.isArray(N))for(var Ie=0;Ie<N.length;Ie++)pt(_,N[Ie],V,X,me);else X=g(X)?!!X.capture:!!X,V=no(V),_&&_[Pe]?(_=_.i,N=String(N).toString(),N in _.g&&(Ie=_.g[N],V=ht(Ie,V,X,me),-1<V&&(st(Ie[V]),Array.prototype.splice.call(Ie,V,1),Ie.length==0&&(delete _.g[N],_.h--)))):_&&(_=wi(_))&&(N=_.g[N.toString()],_=-1,N&&(_=ht(N,V,X,me)),(V=-1<_?N[_]:null)&&xi(V))}function xi(_){if(typeof _!="number"&&_&&!_.da){var N=_.src;if(N&&N[Pe])bt(N.i,_);else{var V=_.type,X=_.proxy;N.removeEventListener?N.removeEventListener(V,X,_.capture):N.detachEvent?N.detachEvent(Xe(V),X):N.addListener&&N.removeListener&&N.removeListener(X),(V=wi(N))?(bt(V,_),V.h==0&&(V.src=null,N[gn]=null)):st(_)}}}function Xe(_){return _ in Bn?Bn[_]:Bn[_]="on"+_}function Xn(_,N){if(_.da)_=!0;else{N=new it(N,this);var V=_.listener,X=_.ha||_.src;_.fa&&xi(_),_=V.call(X,N)}return _}function wi(_){return _=_[gn],_ instanceof ct?_:null}var Yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function no(_){return typeof _=="function"?_:(_[Yr]||(_[Yr]=function(N){return _.handleEvent(N)}),_[Yr])}function Wt(){he.call(this),this.i=new ct(this),this.M=this,this.F=null}M(Wt,he),Wt.prototype[Pe]=!0,Wt.prototype.removeEventListener=function(_,N,V,X){pt(this,_,N,V,X)};function Yn(_,N){var V,X=_.F;if(X)for(V=[];X;X=X.F)V.push(X);if(_=_.M,X=N.type||N,typeof N=="string")N=new Se(N,_);else if(N instanceof Se)N.target=N.target||_;else{var me=N;N=new Se(X,_),ee(N,me)}if(me=!0,V)for(var Ie=V.length-1;0<=Ie;Ie--){var He=N.g=V[Ie];me=Er(He,X,!0,N)&&me}if(He=N.g=_,me=Er(He,X,!0,N)&&me,me=Er(He,X,!1,N)&&me,V)for(Ie=0;Ie<V.length;Ie++)He=N.g=V[Ie],me=Er(He,X,!1,N)&&me}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var _=this.i,N;for(N in _.g){for(var V=_.g[N],X=0;X<V.length;X++)st(V[X]);delete _.g[N],_.h--}}this.F=null},Wt.prototype.K=function(_,N,V,X){return this.i.add(String(_),N,!1,V,X)},Wt.prototype.L=function(_,N,V,X){return this.i.add(String(_),N,!0,V,X)};function Er(_,N,V,X){if(N=_.i.g[String(N)],!N)return!0;N=N.concat();for(var me=!0,Ie=0;Ie<N.length;++Ie){var He=N[Ie];if(He&&!He.da&&He.capture==V){var dn=He.listener,Wn=He.ha||He.src;He.fa&&bt(_.i,He),me=dn.call(Wn,X)!==!1&&me}}return me&&!X.defaultPrevented}function jn(_,N,V){if(typeof _=="function")V&&(_=T(_,V));else if(_&&typeof _.handleEvent=="function")_=T(_.handleEvent,_);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:h.setTimeout(_,N||0)}function Qr(_){_.g=jn(()=>{_.g=null,_.i&&(_.i=!1,Qr(_))},_.l);const N=_.h;_.h=null,_.m.apply(null,N)}class Fi extends he{constructor(N,V){super(),this.m=N,this.l=V,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Qr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(_){he.call(this),this.h=_,this.g={}}M(vi,he);var In=[];function We(_){ie(_.g,function(N,V){this.g.hasOwnProperty(V)&&xi(N)},_),_.g={}}vi.prototype.N=function(){vi.aa.N.call(this),We(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var An=h.JSON.stringify,Ht=h.JSON.parse,pn=class{stringify(_){return h.JSON.stringify(_,void 0)}parse(_){return h.JSON.parse(_,void 0)}};function ai(){}ai.prototype.h=null;function jr(_){return _.h||(_.h=_.i())}function ro(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function br(){Se.call(this,"d")}M(br,Se);function Ls(){Se.call(this,"c")}M(Ls,Se);var mt={},Gt=null;function Tn(){return Gt=Gt||new Wt}mt.La="serverreachability";function $t(_){Se.call(this,mt.La,_)}M($t,Se);function Ir(_){const N=Tn();Yn(N,new $t(N))}mt.STAT_EVENT="statevent";function Cn(_,N){Se.call(this,mt.STAT_EVENT,_),this.stat=N}M(Cn,Se);function Rt(_){const N=Tn();Yn(N,new Cn(N,_))}mt.Ma="timingevent";function gs(_,N){Se.call(this,mt.Ma,_),this.size=N}M(gs,Se);function cn(_,N){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){_()},N)}function ir(){this.g=!0}ir.prototype.xa=function(){this.g=!1};function Un(_,N,V,X,me,Ie){_.info(function(){if(_.g)if(Ie)for(var He="",dn=Ie.split("&"),Wn=0;Wn<dn.length;Wn++){var qt=dn[Wn].split("=");if(1<qt.length){var Pn=qt[0];qt=qt[1];var Hn=Pn.split("_");He=2<=Hn.length&&Hn[1]=="type"?He+(Pn+"="+qt+"&"):He+(Pn+"=redacted&")}}else He=null;else He=Ie;return"XMLHTTP REQ ("+X+") [attempt "+me+"]: "+N+`
`+V+`
`+He})}function dr(_,N,V,X,me,Ie,He){_.info(function(){return"XMLHTTP RESP ("+X+") [ attempt "+me+"]: "+N+`
`+V+`
`+Ie+" "+He})}function zn(_,N,V,X){_.info(function(){return"XMLHTTP TEXT ("+N+"): "+Ao(_,V)+(X?" "+X:"")})}function Ye(_,N){_.info(function(){return"TIMEOUT: "+N})}ir.prototype.info=function(){};function Ao(_,N){if(!_.g)return N;if(!N)return null;try{var V=JSON.parse(N);if(V){for(_=0;_<V.length;_++)if(Array.isArray(V[_])){var X=V[_];if(!(2>X.length)){var me=X[1];if(Array.isArray(me)&&!(1>me.length)){var Ie=me[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var He=1;He<me.length;He++)me[He]=""}}}}return An(V)}catch{return N}}var To={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zr;function Vs(){}M(Vs,ai),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},Zr=new Vs;function _i(_,N,V,X){this.j=_,this.i=N,this.l=V,this.R=X||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bi}function Bi(){this.i=null,this.g="",this.h=!1}var ic={},qa={};function li(_,N,V){_.L=1,_.v=Rn(Ot(N)),_.m=V,_.P=!0,Ar(_,null)}function Ar(_,N){_.F=Date.now(),Zt(_),_.A=Ot(_.v);var V=_.A,X=_.R;Array.isArray(X)||(X=[String(X)]),Nn(V.i,"t",X),_.C=0,V=_.j.J,_.h=new Bi,_.g=Eu(_.j,V?N:null,!_.m),0<_.O&&(_.M=new Fi(T(_.Y,_,_.g),_.O)),N=_.U,V=_.g,X=_.ca;var me="readystatechange";Array.isArray(me)||(me&&(In[0]=me.toString()),me=In);for(var Ie=0;Ie<me.length;Ie++){var He=Dr(V,me[Ie],X||N.handleEvent,!1,N.h||N);if(!He)break;N.g[He.key]=He}N=_.H?B(_.H):{},_.m?(_.u||(_.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.A,_.u,_.m,N)):(_.u="GET",_.g.ea(_.A,_.u,null,N)),Ir(),Un(_.i,_.u,_.A,_.l,_.R,_.m)}_i.prototype.ca=function(_){_=_.target;const N=this.M;N&&Ai(_)==3?N.j():this.Y(_)},_i.prototype.Y=function(_){try{if(_==this.g)e:{const Hn=Ai(this.g);var N=this.g.Ba();const Gn=this.g.Z();if(!(3>Hn)&&(Hn!=3||this.g&&(this.h.h||this.g.oa()||ac(this.g)))){this.J||Hn!=4||N==7||(N==8||0>=Gn?Ir(3):Ir(2)),ke(this);var V=this.g.Z();this.X=V;t:if(yn(this)){var X=ac(this.g);_="";var me=X.length,Ie=Ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jt(this),Co(this);var He="";break t}this.h.i=new h.TextDecoder}for(N=0;N<me;N++)this.h.h=!0,_+=this.h.i.decode(X[N],{stream:!(Ie&&N==me-1)});X.length=0,this.h.g+=_,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=V==200,dr(this.i,this.u,this.A,this.l,this.R,Hn,V),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,Wn=this.g;if((dn=Wn.g?Wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(dn)){var qt=dn;break t}}qt=null}if(V=qt)zn(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fs(this,V);else{this.o=!1,this.s=3,Rt(12),Jt(this),Co(this);break e}}if(this.P){V=!0;let Ti;for(;!this.J&&this.C<He.length;)if(Ti=xu(this,He),Ti==qa){Hn==4&&(this.s=4,Rt(14),V=!1),zn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ti==ic){this.s=4,Rt(15),zn(this.i,this.l,He,"[Invalid Chunk]"),V=!1;break}else zn(this.i,this.l,Ti,null),Fs(this,Ti);if(yn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Hn!=4||He.length!=0||this.h.h||(this.s=1,Rt(16),V=!1),this.o=this.o&&V,!V)zn(this.i,this.l,He,"[Invalid Chunked Response]"),Jt(this),Co(this);else if(0<He.length&&!this.W){this.W=!0;var Pn=this.j;Pn.g==this&&Pn.ba&&!Pn.M&&(Pn.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),ha(Pn),Pn.M=!0,Rt(11))}}else zn(this.i,this.l,He,null),Fs(this,He);Hn==4&&Jt(this),this.o&&!this.J&&(Hn==4?xn(this.j,this):(this.o=!1,Zt(this)))}else en(this.g),V==400&&0<He.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Jt(this),Co(this)}}}catch{}finally{}};function yn(_){return _.g?_.u=="GET"&&_.L!=2&&_.j.Ca:!1}function xu(_,N){var V=_.C,X=N.indexOf(`
`,V);return X==-1?qa:(V=Number(N.substring(V,X)),isNaN(V)?ic:(X+=1,X+V>N.length?qa:(N=N.slice(X,X+V),_.C=X+V,N)))}_i.prototype.cancel=function(){this.J=!0,Jt(this)};function Zt(_){_.S=Date.now()+_.I,Ka(_,_.I)}function Ka(_,N){if(_.B!=null)throw Error("WatchDog timer not null");_.B=cn(T(_.ba,_),N)}function ke(_){_.B&&(h.clearTimeout(_.B),_.B=null)}_i.prototype.ba=function(){this.B=null;const _=Date.now();0<=_-this.S?(Ye(this.i,this.A),this.L!=2&&(Ir(),Rt(17)),Jt(this),this.s=2,Co(this)):Ka(this,this.S-_)};function Co(_){_.j.G==0||_.J||xn(_.j,_)}function Jt(_){ke(_);var N=_.M;N&&typeof N.ma=="function"&&N.ma(),_.M=null,We(_.U),_.g&&(N=_.g,_.g=null,N.abort(),N.ma())}function Fs(_,N){try{var V=_.j;if(V.G!=0&&(V.g==_||zr(V.h,_))){if(!_.K&&zr(V.h,_)&&V.G==3){try{var X=V.Da.g.parse(N)}catch{X=null}if(Array.isArray(X)&&X.length==3){var me=X;if(me[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<_.F)Po(V),_s(V);else break e;el(V),Rt(18)}}else V.za=me[1],0<V.za-V.T&&37500>me[2]&&V.F&&V.v==0&&!V.C&&(V.C=cn(T(V.Za,V),6e3));if(1>=Dt(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else ui(V,11)}else if((_.K||V.g==_)&&Po(V),!z(N))for(me=V.Da.g.parse(N),N=0;N<me.length;N++){let qt=me[N];if(V.T=qt[0],qt=qt[1],V.G==2)if(qt[0]=="c"){V.K=qt[1],V.ia=qt[2];const Pn=qt[3];Pn!=null&&(V.la=Pn,V.j.info("VER="+V.la));const Hn=qt[4];Hn!=null&&(V.Aa=Hn,V.j.info("SVER="+V.Aa));const Gn=qt[5];Gn!=null&&typeof Gn=="number"&&0<Gn&&(X=1.5*Gn,V.L=X,V.j.info("backChannelRequestTimeoutMs_="+X)),X=V;const Ti=_.g;if(Ti){const ei=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ei){var Ie=X.h;Ie.g||ei.indexOf("spdy")==-1&&ei.indexOf("quic")==-1&&ei.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(la(Ie,Ie.h),Ie.h=null))}if(X.D){const tl=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(X.ya=tl,$e(X.I,X.D,tl))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-_.F,V.j.info("Handshake RTT: "+V.R+"ms")),X=V;var He=_;if(X.qa=ft(X,X.J?X.ia:null,X.W),He.K){Xa(X.h,He);var dn=He,Wn=X.L;Wn&&(dn.I=Wn),dn.B&&(ke(dn),Zt(dn)),X.g=He}else da(X);0<V.i.length&&_t(V)}else qt[0]!="stop"&&qt[0]!="close"||ui(V,7);else V.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?ui(V,7):Dn(V):qt[0]!="noop"&&V.l&&V.l.ta(qt),V.v=0)}}Ir(4)}catch{}}var wu=class{constructor(_,N){this.g=_,this.map=N}};function Ft(_){this.l=_||10,h.PerformanceNavigationTiming?(_=h.performance.getEntriesByType("navigation"),_=0<_.length&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nt(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Dt(_){return _.h?1:_.g?_.g.size:0}function zr(_,N){return _.h?_.h==N:_.g?_.g.has(N):!1}function la(_,N){_.g?_.g.add(N):_.h=N}function Xa(_,N){_.h&&_.h==N?_.h=null:_.g&&_.g.has(N)&&_.g.delete(N)}Ft.prototype.cancel=function(){if(this.i=Qn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function Qn(_){if(_.h!=null)return _.i.concat(_.h.D);if(_.g!=null&&_.g.size!==0){let N=_.i;for(const V of _.g.values())N=N.concat(V.D);return N}return D(_.i)}function ji(_){if(_.V&&typeof _.V=="function")return _.V();if(typeof Map<"u"&&_ instanceof Map||typeof Set<"u"&&_ instanceof Set)return Array.from(_.values());if(typeof _=="string")return _.split("");if(m(_)){for(var N=[],V=_.length,X=0;X<V;X++)N.push(_[X]);return N}N=[],V=0;for(X in _)N[V++]=_[X];return N}function Ya(_){if(_.na&&typeof _.na=="function")return _.na();if(!_.V||typeof _.V!="function"){if(typeof Map<"u"&&_ instanceof Map)return Array.from(_.keys());if(!(typeof Set<"u"&&_ instanceof Set)){if(m(_)||typeof _=="string"){var N=[];_=_.length;for(var V=0;V<_;V++)N.push(V);return N}N=[],V=0;for(const X in _)N[V++]=X;return N}}}function mn(_,N){if(_.forEach&&typeof _.forEach=="function")_.forEach(N,void 0);else if(m(_)||typeof _=="string")Array.prototype.forEach.call(_,N,void 0);else for(var V=Ya(_),X=ji(_),me=X.length,Ie=0;Ie<me;Ie++)N.call(void 0,X[Ie],V&&V[Ie],_)}var Ei=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sh(_,N){if(_){_=_.split("&");for(var V=0;V<_.length;V++){var X=_[V].indexOf("="),me=null;if(0<=X){var Ie=_[V].substring(0,X);me=_[V].substring(X+1)}else Ie=_[V];N(Ie,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function bi(_){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,_ instanceof bi){this.h=_.h,Zn(this,_.j),this.o=_.o,this.g=_.g,pe(this,_.s),this.l=_.l;var N=_.i,V=new Zi;V.i=N.i,N.g&&(V.g=new Map(N.g),V.h=N.h),Q(this,V),this.m=_.m}else _&&(N=String(_).match(Ei))?(this.h=!1,Zn(this,N[1]||"",!0),this.o=It(N[2]||""),this.g=It(N[3]||"",!0),pe(this,N[4]),this.l=It(N[5]||"",!0),Q(this,N[6]||"",!0),this.m=It(N[7]||"")):(this.h=!1,this.i=new Zi(null,this.h))}bi.prototype.toString=function(){var _=[],N=this.j;N&&_.push(So(N,Wr,!0),":");var V=this.g;return(V||N=="file")&&(_.push("//"),(N=this.o)&&_.push(So(N,Wr,!0),"@"),_.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&_.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&_.push("/"),_.push(So(V,V.charAt(0)=="/"?Sn:ut,!0))),(V=this.i.toString())&&_.push("?",V),(V=this.m)&&_.push("#",So(V,oc)),_.join("")};function Ot(_){return new bi(_)}function Zn(_,N,V){_.j=V?It(N,!0):N,_.j&&(_.j=_.j.replace(/:$/,""))}function pe(_,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);_.s=N}else _.s=null}function Q(_,N,V){N instanceof Zi?(_.i=N,Hr(_.i,_.h)):(V||(N=So(N,sc)),_.i=new Zi(N,_.h))}function $e(_,N,V){_.i.set(N,V)}function Rn(_){return $e(_,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),_}function It(_,N){return _?N?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function So(_,N,V){return typeof _=="string"?(_=encodeURI(_).replace(N,Qa),V&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function Qa(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var Wr=/[#\/\?@]/g,ut=/[#\?:]/g,Sn=/[#\?]/g,sc=/[#\?@]/g,oc=/#/g;function Zi(_,N){this.h=this.g=null,this.i=_||null,this.j=!!N}function hr(_){_.g||(_.g=new Map,_.h=0,_.i&&sh(_.i,function(N,V){_.add(decodeURIComponent(N.replace(/\+/g," ")),V)}))}n=Zi.prototype,n.add=function(_,N){hr(this),this.i=null,_=Jr(this,_);var V=this.g.get(_);return V||this.g.set(_,V=[]),V.push(N),this.h+=1,this};function Ui(_,N){hr(_),N=Jr(_,N),_.g.has(N)&&(_.i=null,_.h-=_.g.get(N).length,_.g.delete(N))}function ys(_,N){return hr(_),N=Jr(_,N),_.g.has(N)}n.forEach=function(_,N){hr(this),this.g.forEach(function(V,X){V.forEach(function(me){_.call(N,me,X,this)},this)},this)},n.na=function(){hr(this);const _=Array.from(this.g.values()),N=Array.from(this.g.keys()),V=[];for(let X=0;X<N.length;X++){const me=_[X];for(let Ie=0;Ie<me.length;Ie++)V.push(N[X])}return V},n.V=function(_){hr(this);let N=[];if(typeof _=="string")ys(this,_)&&(N=N.concat(this.g.get(Jr(this,_))));else{_=Array.from(this.g.values());for(let V=0;V<_.length;V++)N=N.concat(_[V])}return N},n.set=function(_,N){return hr(this),this.i=null,_=Jr(this,_),ys(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[N]),this.h+=1,this},n.get=function(_,N){return _?(_=this.V(_),0<_.length?String(_[0]):N):N};function Nn(_,N,V){Ui(_,N),0<V.length&&(_.i=null,_.g.set(Jr(_,N),D(V)),_.h+=V.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],N=Array.from(this.g.keys());for(var V=0;V<N.length;V++){var X=N[V];const Ie=encodeURIComponent(String(X)),He=this.V(X);for(X=0;X<He.length;X++){var me=Ie;He[X]!==""&&(me+="="+encodeURIComponent(String(He[X]))),_.push(me)}}return this.i=_.join("&")};function Jr(_,N){return N=String(N),_.j&&(N=N.toLowerCase()),N}function Hr(_,N){N&&!_.j&&(hr(_),_.i=null,_.g.forEach(function(V,X){var me=X.toLowerCase();X!=me&&(Ui(this,X),Nn(this,me,V))},_)),_.j=N}function xt(_,N){const V=new ir;if(h.Image){const X=new Image;X.onload=R(gt,V,"TestLoadImage: loaded",!0,N,X),X.onerror=R(gt,V,"TestLoadImage: error",!1,N,X),X.onabort=R(gt,V,"TestLoadImage: abort",!1,N,X),X.ontimeout=R(gt,V,"TestLoadImage: timeout",!1,N,X),h.setTimeout(function(){X.ontimeout&&X.ontimeout()},1e4),X.src=_}else N(!1)}function vu(_,N){const V=new ir,X=new AbortController,me=setTimeout(()=>{X.abort(),gt(V,"TestPingServer: timeout",!1,N)},1e4);fetch(_,{signal:X.signal}).then(Ie=>{clearTimeout(me),Ie.ok?gt(V,"TestPingServer: ok",!0,N):gt(V,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(me),gt(V,"TestPingServer: error",!1,N)})}function gt(_,N,V,X,me){try{me&&(me.onload=null,me.onerror=null,me.onabort=null,me.ontimeout=null),X(V)}catch{}}function Tr(){this.g=new pn}function _u(_,N,V){const X=V||"";try{mn(_,function(me,Ie){let He=me;g(me)&&(He=An(me)),N.push(X+Ie+"="+encodeURIComponent(He))})}catch(me){throw N.push(X+"type="+encodeURIComponent("_badmap")),me}}function xs(_){this.l=_.Ub||null,this.j=_.eb||!1}M(xs,ai),xs.prototype.g=function(){return new Ro(this.l,this.j)},xs.prototype.i=function(_){return function(){return _}}({});function Ro(_,N){Wt.call(this),this.D=_,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Ro,Wt),n=Ro.prototype,n.open=function(_,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=_,this.A=N,this.readyState=1,ci(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};_&&(N.body=_),(this.D||h).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},n.Sa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bs(this)}else _.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bs(_){_.j.read().then(_.Pa.bind(_)).catch(_.ga.bind(_))}n.Pa=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var N=_.value?_.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!_.done}))&&(this.response=this.responseText+=N)}_.done?ws(this):ci(this),this.readyState==3&&Bs(this)}},n.Ra=function(_){this.g&&(this.response=this.responseText=_,ws(this))},n.Qa=function(_){this.g&&(this.response=_,ws(this))},n.ga=function(){this.g&&ws(this)};function ws(_){_.readyState=4,_.l=null,_.j=null,_.v=null,ci(_)}n.setRequestHeader=function(_,N){this.u.append(_,N)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],N=this.h.entries();for(var V=N.next();!V.done;)V=V.value,_.push(V[0]+": "+V[1]),V=N.next();return _.join(`\r
`)};function ci(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function zi(_){let N="";return ie(_,function(V,X){N+=X,N+=":",N+=V,N+=`\r
`}),N}function Ji(_,N,V){e:{for(X in V){var X=!1;break e}X=!0}X||(V=zi(V),typeof _=="string"?V!=null&&encodeURIComponent(String(V)):$e(_,N,V))}function kn(_){Wt.call(this),this.headers=new Map,this.o=_||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(kn,Wt);var ca=/^https?$/i,io=["POST","PUT"];n=kn.prototype,n.Ha=function(_){this.J=_},n.ea=function(_,N,V,X){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);N=N?N.toUpperCase():"GET",this.D=_,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zr.g(),this.v=this.o?jr(this.o):jr(Zr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(N,String(_),!0),this.B=!1}catch(Ie){fr(this,Ie);return}if(_=V||"",V=new Map(this.headers),X)if(Object.getPrototypeOf(X)===Object.prototype)for(var me in X)V.set(me,X[me]);else if(typeof X.keys=="function"&&typeof X.get=="function")for(const Ie of X.keys())V.set(Ie,X.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(X));X=Array.from(V.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),me=h.FormData&&_ instanceof h.FormData,!(0<=Array.prototype.indexOf.call(io,N,void 0))||X||me||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,He]of V)this.g.setRequestHeader(Ie,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ja(this),this.u=!0,this.g.send(_),this.u=!1}catch(Ie){fr(this,Ie)}};function fr(_,N){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=N,_.m=5,ua(_),Ii(_)}function ua(_){_.A||(_.A=!0,Yn(_,"complete"),Yn(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=_||7,Yn(this,"complete"),Yn(this,"abort"),Ii(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ii(this,!0)),kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Za(this):this.bb())},n.bb=function(){Za(this)};function Za(_){if(_.h&&typeof c<"u"&&(!_.v[1]||Ai(_)!=4||_.Z()!=2)){if(_.u&&Ai(_)==4)jn(_.Ea,0,_);else if(Yn(_,"readystatechange"),Ai(_)==4){_.h=!1;try{const He=_.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var V;if(!(V=N)){var X;if(X=He===0){var me=String(_.D).match(Ei)[1]||null;!me&&h.self&&h.self.location&&(me=h.self.location.protocol.slice(0,-1)),X=!ca.test(me?me.toLowerCase():"")}V=X}if(V)Yn(_,"complete"),Yn(_,"success");else{_.m=6;try{var Ie=2<Ai(_)?_.g.statusText:""}catch{Ie=""}_.l=Ie+" ["+_.Z()+"]",ua(_)}}finally{Ii(_)}}}}function Ii(_,N){if(_.g){Ja(_);const V=_.g,X=_.v[0]?()=>{}:null;_.g=null,_.v=null,N||Yn(_,"ready");try{V.onreadystatechange=X}catch{}}}function Ja(_){_.I&&(h.clearTimeout(_.I),_.I=null)}n.isActive=function(){return!!this.g};function Ai(_){return _.g?_.g.readyState:0}n.Z=function(){try{return 2<Ai(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(_){if(this.g){var N=this.g.responseText;return _&&N.indexOf(_)==0&&(N=N.substring(_.length)),Ht(N)}};function ac(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.H){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function en(_){const N={};_=(_.g&&2<=Ai(_)&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let X=0;X<_.length;X++){if(z(_[X]))continue;var V=ne(_[X]);const me=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ie=N[me]||[];N[me]=Ie,Ie.push(V)}F(N,function(X){return X.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(_,N,V){return V&&V.internalChannelParams&&V.internalChannelParams[_]||N}function No(_){this.Aa=0,this.i=[],this.j=new ir,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,_),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,_),this.cb=vs("retryDelaySeedMs",1e4,_),this.Wa=vs("forwardChannelMaxRetries",2,_),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,_),this.pa=_&&_.xmlHttpFactory||void 0,this.Xa=_&&_.Tb||void 0,this.Ca=_&&_.useFetchStreams||!1,this.L=void 0,this.J=_&&_.supportsCrossDomainXhr||!1,this.K="",this.h=new Ft(_&&_.concurrentRequestLimit),this.Da=new Tr,this.P=_&&_.fastHandshake||!1,this.O=_&&_.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=_&&_.Rb||!1,_&&_.xa&&this.j.xa(),_&&_.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&_&&_.detectBufferingProxy||!1,this.ja=void 0,_&&_.longPollingTimeout&&0<_.longPollingTimeout&&(this.ja=_.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=No.prototype,n.la=8,n.G=1,n.connect=function(_,N,V,X){Rt(0),this.W=_,this.H=N||{},V&&X!==void 0&&(this.H.OSID=V,this.H.OAID=X),this.F=this.X,this.I=ft(this,null,this.W),_t(this)};function Dn(_){if(_e(_),_.G==3){var N=_.U++,V=Ot(_.I);if($e(V,"SID",_.K),$e(V,"RID",N),$e(V,"TYPE","terminate"),js(_,V),N=new _i(_,_.j,N),N.L=2,N.v=Rn(Ot(V)),V=!1,h.navigator&&h.navigator.sendBeacon)try{V=h.navigator.sendBeacon(N.v.toString(),"")}catch{}!V&&h.Image&&(new Image().src=N.v,V=!0),V||(N.g=Eu(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Zt(N)}sn(_)}function _s(_){_.g&&(ha(_),_.g.cancel(),_.g=null)}function _e(_){_s(_),_.u&&(h.clearTimeout(_.u),_.u=null),Po(_),_.h.cancel(),_.s&&(typeof _.s=="number"&&h.clearTimeout(_.s),_.s=null)}function _t(_){if(!Nt(_.h)&&!_.s){_.s=!0;var N=_.Ga;xe||Ne(),oe||(xe(),oe=!0),Te.add(N,_),_.B=0}}function Cr(_,N){return Dt(_.h)>=_.h.j-(_.s?1:0)?!1:_.s?(_.i=N.D.concat(_.i),!0):_.G==1||_.G==2||_.B>=(_.Va?0:_.Wa)?!1:(_.s=cn(T(_.Ga,_,N),fa(_,_.B)),_.B++,!0)}n.Ga=function(_){if(this.s)if(this.s=null,this.G==1){if(!_){this.U=Math.floor(1e5*Math.random()),_=this.U++;const me=new _i(this,this.j,_);let Ie=this.o;if(this.S&&(Ie?(Ie=B(Ie),ee(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(me.H=Ie,Ie=null),this.P)e:{for(var N=0,V=0;V<this.i.length;V++){t:{var X=this.i[V];if("__data__"in X.map&&(X=X.map.__data__,typeof X=="string")){X=X.length;break t}X=void 0}if(X===void 0)break;if(N+=X,4096<N){N=V;break e}if(N===4096||V===this.i.length-1){N=V+1;break e}}N=1e3}else N=1e3;N=ko(this,me,N),V=Ot(this.I),$e(V,"RID",_),$e(V,"CVER",22),this.D&&$e(V,"X-HTTP-Session-Id",this.D),js(this,V),Ie&&(this.O?N="headers="+encodeURIComponent(String(zi(Ie)))+"&"+N:this.m&&Ji(V,this.m,Ie)),la(this.h,me),this.Ua&&$e(V,"TYPE","init"),this.P?($e(V,"$req",N),$e(V,"SID","null"),me.T=!0,li(me,V,null)):li(me,V,N),this.G=2}}else this.G==3&&(_?so(this,_):this.i.length==0||Nt(this.h)||so(this))};function so(_,N){var V;N?V=N.l:V=_.U++;const X=Ot(_.I);$e(X,"SID",_.K),$e(X,"RID",V),$e(X,"AID",_.T),js(_,X),_.m&&_.o&&Ji(X,_.m,_.o),V=new _i(_,_.j,V,_.B+1),_.m===null&&(V.H=_.o),N&&(_.i=N.D.concat(_.i)),N=ko(_,V,1e3),V.I=Math.round(.5*_.wa)+Math.round(.5*_.wa*Math.random()),la(_.h,V),li(V,X,N)}function js(_,N){_.H&&ie(_.H,function(V,X){$e(N,X,V)}),_.l&&mn({},function(V,X){$e(N,X,V)})}function ko(_,N,V){V=Math.min(_.i.length,V);var X=_.l?T(_.l.Na,_.l,_):null;e:{var me=_.i;let Ie=-1;for(;;){const He=["count="+V];Ie==-1?0<V?(Ie=me[0].g,He.push("ofs="+Ie)):Ie=0:He.push("ofs="+Ie);let dn=!0;for(let Wn=0;Wn<V;Wn++){let qt=me[Wn].g;const Pn=me[Wn].map;if(qt-=Ie,0>qt)Ie=Math.max(0,me[Wn].g-100),dn=!1;else try{_u(Pn,He,"req"+qt+"_")}catch{X&&X(Pn)}}if(dn){X=He.join("&");break e}}}return _=_.i.splice(0,V),N.D=_,X}function da(_){if(!_.g&&!_.u){_.Y=1;var N=_.Fa;xe||Ne(),oe||(xe(),oe=!0),Te.add(N,_),_.v=0}}function el(_){return _.g||_.u||3<=_.v?!1:(_.Y++,_.u=cn(T(_.Fa,_),fa(_,_.v)),_.v++,!0)}n.Fa=function(){if(this.u=null,Jn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var _=2*this.R;this.j.info("BP detection timer enabled: "+_),this.A=cn(T(this.ab,this),_)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),_s(this),Jn(this))};function ha(_){_.A!=null&&(h.clearTimeout(_.A),_.A=null)}function Jn(_){_.g=new _i(_,_.j,"rpc",_.Y),_.m===null&&(_.g.H=_.o),_.g.O=0;var N=Ot(_.qa);$e(N,"RID","rpc"),$e(N,"SID",_.K),$e(N,"AID",_.T),$e(N,"CI",_.F?"0":"1"),!_.F&&_.ja&&$e(N,"TO",_.ja),$e(N,"TYPE","xmlhttp"),js(_,N),_.m&&_.o&&Ji(N,_.m,_.o),_.L&&(_.g.I=_.L);var V=_.g;_=_.ia,V.L=1,V.v=Rn(Ot(N)),V.m=null,V.P=!0,Ar(V,_)}n.Za=function(){this.C!=null&&(this.C=null,_s(this),el(this),Rt(19))};function Po(_){_.C!=null&&(h.clearTimeout(_.C),_.C=null)}function xn(_,N){var V=null;if(_.g==N){Po(_),ha(_),_.g=null;var X=2}else if(zr(_.h,N))V=N.D,Xa(_.h,N),X=1;else return;if(_.G!=0){if(N.o)if(X==1){V=N.m?N.m.length:0,N=Date.now()-N.F;var me=_.B;X=Tn(),Yn(X,new gs(X,V)),_t(_)}else da(_);else if(me=N.s,me==3||me==0&&0<N.X||!(X==1&&Cr(_,N)||X==2&&el(_)))switch(V&&0<V.length&&(N=_.h,N.i=N.i.concat(V)),me){case 1:ui(_,5);break;case 4:ui(_,10);break;case 3:ui(_,6);break;default:ui(_,2)}}}function fa(_,N){let V=_.Ta+Math.floor(Math.random()*_.cb);return _.isActive()||(V*=2),V*N}function ui(_,N){if(_.j.info("Error code "+N),N==2){var V=T(_.fb,_),X=_.Xa;const me=!X;X=new bi(X||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Zn(X,"https"),Rn(X),me?xt(X.toString(),V):vu(X.toString(),V)}else Rt(2);_.G=0,_.l&&_.l.sa(N),sn(_),_e(_)}n.fb=function(_){_?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function sn(_){if(_.G=0,_.ka=[],_.l){const N=Qn(_.h);(N.length!=0||_.i.length!=0)&&(L(_.ka,N),L(_.ka,_.i),_.h.i.length=0,D(_.i),_.i.length=0),_.l.ra()}}function ft(_,N,V){var X=V instanceof bi?Ot(V):new bi(V);if(X.g!="")N&&(X.g=N+"."+X.g),pe(X,X.s);else{var me=h.location;X=me.protocol,N=N?N+"."+me.hostname:me.hostname,me=+me.port;var Ie=new bi(null);X&&Zn(Ie,X),N&&(Ie.g=N),me&&pe(Ie,me),V&&(Ie.l=V),X=Ie}return V=_.D,N=_.ya,V&&N&&$e(X,V,N),$e(X,"VER",_.la),js(_,X),X}function Eu(_,N,V){if(N&&!_.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=_.Ca&&!_.pa?new kn(new xs({eb:V})):new kn(_.pa),N.Ha(_.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function un(){}n=un.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function es(){}es.prototype.g=function(_,N){return new pr(_,N)};function pr(_,N){Wt.call(this),this.g=new No(N),this.l=_,this.h=N&&N.messageUrlParams||null,_=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(_?_["X-WebChannel-Content-Type"]=N.messageContentType:_={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(_?_["X-WebChannel-Client-Profile"]=N.va:_={"X-WebChannel-Client-Profile":N.va}),this.g.S=_,(_=N&&N.Sb)&&!z(_)&&(this.g.m=_),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!z(N)&&(this.g.D=N,_=this.h,_!==null&&N in _&&(_=this.h,N in _&&delete _[N])),this.j=new ts(this)}M(pr,Wt),pr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pr.prototype.close=function(){Dn(this.g)},pr.prototype.o=function(_){var N=this.g;if(typeof _=="string"){var V={};V.__data__=_,_=V}else this.u&&(V={},V.__data__=An(_),_=V);N.i.push(new wu(N.Ya++,_)),N.G==3&&_t(N)},pr.prototype.N=function(){this.g.l=null,delete this.j,Dn(this.g),delete this.g,pr.aa.N.call(this)};function bu(_){br.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var N=_.__sm__;if(N){e:{for(const V in N){_=V;break e}_=void 0}(this.i=_)&&(_=this.i,N=N!==null&&_ in N?N[_]:void 0),this.data=N}else this.data=_}M(bu,br);function Wi(){Ls.call(this),this.status=1}M(Wi,Ls);function ts(_){this.g=_}M(ts,un),ts.prototype.ua=function(){Yn(this.g,"a")},ts.prototype.ta=function(_){Yn(this.g,new bu(_))},ts.prototype.sa=function(_){Yn(this.g,new Wi)},ts.prototype.ra=function(){Yn(this.g,"b")},es.prototype.createWebChannel=es.prototype.g,pr.prototype.send=pr.prototype.o,pr.prototype.open=pr.prototype.m,pr.prototype.close=pr.prototype.close,WR=function(){return new es},zR=function(){return Tn()},UR=mt,jx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},To.NO_ERROR=0,To.TIMEOUT=8,To.HTTP_ERROR=6,zm=To,Ur.COMPLETE="complete",jR=Ur,ro.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,zh=ro,kn.prototype.listenOnce=kn.prototype.L,kn.prototype.getLastError=kn.prototype.Ka,kn.prototype.getLastErrorCode=kn.prototype.Ba,kn.prototype.getStatus=kn.prototype.Z,kn.prototype.getResponseJson=kn.prototype.Oa,kn.prototype.getResponseText=kn.prototype.oa,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Ha,BR=kn}).apply(typeof fm<"u"?fm:typeof self<"u"?self:typeof window<"u"?window:{});const xI="@firebase/firestore",wI="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};gi.UNAUTHENTICATED=new gi(null),gi.GOOGLE_CREDENTIALS=new gi("google-credentials-uid"),gi.FIRST_PARTY=new gi("first-party-uid"),gi.MOCK_USER=new gi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new og("@firebase/firestore");function ed(){return Yc.logLevel}function Be(n,...e){if(Yc.logLevel<=Xt.DEBUG){const t=e.map(Av);Yc.debug(`Firestore (${Hd}): ${n}`,...t)}}function qi(n,...e){if(Yc.logLevel<=Xt.ERROR){const t=e.map(Av);Yc.error(`Firestore (${Hd}): ${n}`,...t)}}function Qc(n,...e){if(Yc.logLevel<=Xt.WARN){const t=e.map(Av);Yc.warn(`Firestore (${Hd}): ${n}`,...t)}}function Av(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,HR(n,r,t)}function HR(n,e,t){let r=`FIRESTORE (${Hd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qi(r),new Error(r)}function dt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||HR(e,i,r)}function Pt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends to{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gi.UNAUTHENTICATED))}shutdown(){}}class OV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class MV{constructor(e){this.t=e,this.currentUser=gi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let r=this.i;const i=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let o=new qo;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new qo,e.enqueueRetryable(()=>i(this.currentUser))};const c=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await i(this.currentUser)})},h=m=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new qo)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new GR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new gi(e)}}class LV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new LV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(gi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const r=o=>{o.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=BV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function Ux(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Ly(i)===Ly(o)?kt(i,o):Ly(i)?1:-1}return kt(n.length,e.length)}const jV=55296,UV=57343;function Ly(n){const e=n.charCodeAt(0);return e>=jV&&e<=UV}function Ed(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $R(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="__name__";class Bo{constructor(e,t,r){t===void 0?t=0:t>e.length&&rt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&rt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Bo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bo?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Bo.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return kt(e.length,t.length)}static compareSegments(e,t){const r=Bo.isNumericId(e),i=Bo.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Bo.extractNumericId(e).compare(Bo.extractNumericId(t)):Ux(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ml.fromString(e.substring(4,e.length-2))}}class fn extends Bo{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const zV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Bo{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return zV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_I}static keyField(){return new lr([_I])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new qe(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new qe(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else h==="`"?(c=!c,i++):h!=="."||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new qe(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(fn.fromString(e))}static fromName(e){return new Ke(fn.fromString(e).popFirst(5))}static empty(){return new Ke(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new fn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,e,t){if(!t)throw new qe(Ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WV(n,e,t,r){if(e===!0&&r===!0)throw new qe(Ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EI(n){if(!Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bI(n){if(Ke.isDocumentKey(n))throw new qe(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":rt(12329,{type:typeof n})}function Ps(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new qe(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dg(n);throw new qe(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(n,e){const t={typeString:n};return e&&(t.value=e),t}function tp(n,e){if(!KR(n))throw new qe(Ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(i&&typeof c!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new qe(Ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=-62135596800,AI=1e6;class vn{static now(){return vn.fromMillis(Date.now())}static fromDate(e){return vn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*AI);return new vn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<II)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AI}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tp(e,vn._jsonSchema))return new vn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-II;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vn._jsonSchemaVersion="firestore/timestamp/1.0",vn._jsonSchema={type:Fr("string",vn._jsonSchemaVersion),seconds:Fr("number"),nanoseconds:Fr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new vn(0,0))}static max(){return new yt(new vn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f=-1;class w0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function zx(n){return n.fields.find(e=>e.kind===2)}function Cc(n){return n.fields.filter(e=>e.kind!==2)}w0.UNKNOWN_ID=-1;class Wm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ef{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ef(0,Ms.min())}}function HV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(r===1e9?new vn(t+1,0):new vn(t,r));return new Ms(i,Ke.empty(),e)}function XR(n){return new Ms(n.readTime,n.key,_f)}class Ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ms(yt.min(),Ke.empty(),_f)}static max(){return new Ms(yt.max(),Ke.empty(),_f)}}function Cv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ke.comparator(n.documentKey,e.documentKey),t!==0?t:kt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(n){if(n.code!==Ce.FAILED_PRECONDITION||n.message!==YR)throw n;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ge.reject(t)}static resolve(e){return new ge((t,r)=>{t(e)})}static reject(e){return new ge((t,r)=>{r(e)})}static waitFor(e){return new ge((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},m=>r(m))}),c=!0,o===i&&t()})}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next(i=>i?ge.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ge((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let m=0;m<o;m++){const g=m;t(e[g]).next(w=>{c[g]=w,++h,h===o&&r(c)},w=>i(w))}})}static doWhile(e,t){return new ge((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="SimpleDb";class hg{static open(e,t,r,i){try{return new hg(t,e.transaction(i,r))}catch(o){throw new Jh(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new qo,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Jh(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Sv(r.target.error);this.S.reject(new Jh(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Be(Cs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new $V(t)}}class Ll{static delete(e){return Be(Cs,"Removing database:",e),kc(zS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!mv())return!1;if(Ll.F())return!0;const e=Kr(),t=Ll.M(e),r=0<t&&t<10,i=ZR(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Ll.M(Kr())===12.2&&qi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Be(Cs,"Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const c=o.target.result;t(c)},i.onblocked=()=>{r(new Jh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const c=o.target.error;c.name==="VersionError"?r(new qe(Ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new qe(Ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new Jh(e,c))},i.onupgradeneeded=o=>{Be(Cs,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const c=o.target.result;this.N.k(c,i.transaction,o.oldVersion,this.version).next(()=>{Be(Cs,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const h=hg.open(this.db,e,o?"readonly":"readwrite",r),m=i(h).next(g=>(h.C(),g)).catch(g=>(h.abort(g),ge.reject(g))).toPromise();return m.catch(()=>{}),await h.D,m}catch(h){const m=h,g=m.name!=="FirebaseError"&&c<3;if(Be(Cs,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ZR(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class GV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return kc(this.U.delete())}}class Jh extends qe{constructor(e,t){super(Ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zl(n){return n.name==="IndexedDbTransactionError"}class $V{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Be(Cs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be(Cs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),kc(r)}add(e){return Be(Cs,"ADD",this.store.name,e,e),kc(this.store.add(e))}get(e){return kc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Be(Cs,"GET",this.store.name,e,t),t))}delete(e){return Be(Cs,"DELETE",this.store.name,e),kc(this.store.delete(e))}count(){return Be(Cs,"COUNT",this.store.name),kc(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new ge((c,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{c(m.target.result)}})}{const o=this.cursor(r),c=[];return this.H(o,(h,m)=>{c.push(m)}).next(()=>c)}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ge((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Z(e,t){Be(Cs,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(o,c,h)=>h.delete())}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ge((r,i)=>{t.onerror=o=>{const c=Sv(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}H(e,t){const r=[];return new ge((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const m=new GV(h),g=t(h.primaryKey,h.value,m);if(g instanceof ge){const w=g.catch(E=>(m.done(),ge.reject(E)));r.push(w)}m.isDone?i():m.G===null?h.continue():h.continue(m.G)}}).next(()=>ge.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function kc(n){return new ge((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Sv(r.target.error);t(i)}})}let TI=!1;function Sv(n){const e=Ll.M(Kr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TI||(TI=!0,setTimeout(()=>{throw r},0)),r}}return n}const ef="IndexBackfiller";class qV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Be(ef,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();Be(ef,`Documents written: ${t}`)}catch(t){Zl(t)?Be(ef,"Ignoring IndexedDB error during index backfill: ",t):await gu(t)}await this.re(6e4)})}}class KV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const r=new Set;let i=t,o=!0;return ge.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!r.has(c))return Be(ef,`Processing collection: ${c}`),this.oe(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this._e(i,o)).next(h=>(Be(ef,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}_e(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=XR(o);Cv(c,r)>0&&(r=c)}),new Ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ys.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=-1;function fg(n){return n==null}function bf(n){return n===0&&1/n==-1/0}function XV(n){return typeof n=="number"&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="";function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CI(e)),e=YV(n.get(t),e);return CI(e)}function YV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case v0:t+="";break;default:t+=o}}return t}function CI(n){return n+v0+""}function Uo(n){const e=n.length;if(dt(e>=2,64408,{path:n}),e===2)return dt(n.charAt(0)===v0&&n.charAt(1)==="",56145,{path:n}),fn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf(v0,o);switch((c<0||c>t)&&rt(50515,{path:n}),n.charAt(c+1)){case"":const h=n.substring(o,c);let m;i.length===0?m=h:(i+=h,m=i,i=""),r.push(m);break;case"":i+=n.substring(o,c),i+="\0";break;case"":i+=n.substring(o,c+1);break;default:rt(61167,{path:n})}o=c+2}return new fn(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="remoteDocuments",np="owner",Wu="owner",If="mutationQueues",QV="userId",go="mutations",SI="batchId",Mc="userMutationsIndex",RI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n,e){return[n,Li(e)]}function JR(n,e,t){return[n,Li(e),t]}const ZV={},bd="documentMutations",_0="remoteDocumentsV14",JV=["prefixPath","collectionGroup","readTime","documentId"],Gm="documentKeyIndex",eF=["prefixPath","collectionGroup","documentId"],eN="collectionGroupIndex",tF=["collectionGroup","readTime","prefixPath","documentId"],Af="remoteDocumentGlobal",Wx="remoteDocumentGlobalKey",Id="targets",tN="queryTargetsIndex",nF=["canonicalId","targetId"],Ad="targetDocuments",rF=["targetId","path"],Rv="documentTargetsIndex",iF=["path","targetId"],E0="targetGlobalKey",Uc="targetGlobal",Tf="collectionParents",sF=["collectionId","parent"],Td="clientMetadata",oF="clientId",pg="bundles",aF="bundleId",mg="namedQueries",lF="name",Nv="indexConfiguration",cF="indexId",Hx="collectionGroupIndex",uF="collectionGroup",tf="indexState",dF=["indexId","uid"],nN="sequenceNumberIndex",hF=["uid","sequenceNumber"],nf="indexEntries",fF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rN="documentKeyIndex",pF=["indexId","uid","orderedDocumentKey"],gg="documentOverlays",mF=["userId","collectionPath","documentId"],Gx="collectionPathOverlayIndex",gF=["userId","collectionPath","largestBatchId"],iN="collectionGroupOverlayIndex",yF=["userId","collectionGroup","largestBatchId"],kv="globals",xF="name",sN=[If,go,bd,Sc,Id,np,Uc,Ad,Td,Af,Tf,pg,mg],wF=[...sN,gg],oN=[If,go,bd,_0,Id,np,Uc,Ad,Td,Af,Tf,pg,mg,gg],aN=oN,Pv=[...aN,Nv,tf,nf],vF=Pv,lN=[...Pv,kv],_F=lN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends QR{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Xr(n,e){const t=Pt(n);return Ll.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Jl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pm(this.root,e,this.comparator,!1)}getReverseIterator(){return new pm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pm(this.root,e,this.comparator,!0)}}class pm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??yi.RED,this.left=i??yi.EMPTY,this.right=o??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new yi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw rt(27949);return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1;yi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt(57766)}get value(){throw rt(16141)}get color(){throw rt(16727)}get left(){throw rt(29726)}get right(){throw rt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kI(this.data.getIterator())}getIteratorFrom(e){return new kI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class kI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new ds([])}unionWith(e){let t=new En(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ed(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new uN("Invalid base64 string: "+o):o}}(e);return new Br(t)}static fromUint8Array(e){const t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new Br(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const EF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(dt(!!n,39018),typeof n=="string"){let e=0;const t=EF.exec(n);if(dt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function La(n){return typeof n=="string"?Br.fromBase64String(n):Br.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="server_timestamp",hN="__type__",fN="__previous_value__",pN="__local_write_time__";function Dv(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[hN])==null?void 0:r.stringValue)===dN}function yg(n){const e=n.mapValue.fields[fN];return Dv(e)?yg(e):e}function Cf(n){const e=Ma(n.mapValue.fields[pN].timestampValue);return new vn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e,t,r,i,o,c,h,m,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=w}}const b0="(default)";class Zc{constructor(e,t){this.projectId=e,this.database=t||b0}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===b0}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="__type__",mN="__max__",Pl={mapValue:{fields:{__type__:{stringValue:mN}}}},Mv="__vector__",Cd="value",$m={nullValue:"NULL_VALUE"};function jl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dv(n)?4:gN(n)?9007199254740991:xg(n)?10:11:rt(28295,{value:n})}function na(n,e){if(n===e)return!0;const t=jl(n);if(t!==jl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cf(n).isEqual(Cf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const c=Ma(i.timestampValue),h=Ma(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return La(i.bytesValue).isEqual(La(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return tr(i.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return tr(i.integerValue)===tr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const c=tr(i.doubleValue),h=tr(o.doubleValue);return c===h?bf(c)===bf(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Ed(n.arrayValue.values||[],e.arrayValue.values||[],na);case 10:case 11:return function(i,o){const c=i.mapValue.fields||{},h=o.mapValue.fields||{};if(NI(c)!==NI(h))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(h[m]===void 0||!na(c[m],h[m])))return!1;return!0}(n,e);default:return rt(52216,{left:n})}}function Sf(n,e){return(n.values||[]).find(t=>na(t,e))!==void 0}function Ul(n,e){if(n===e)return 0;const t=jl(n),r=jl(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(o,c){const h=tr(o.integerValue||o.doubleValue),m=tr(c.integerValue||c.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return PI(n.timestampValue,e.timestampValue);case 4:return PI(Cf(n),Cf(e));case 5:return Ux(n.stringValue,e.stringValue);case 6:return function(o,c){const h=La(o),m=La(c);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){const h=o.split("/"),m=c.split("/");for(let g=0;g<h.length&&g<m.length;g++){const w=kt(h[g],m[g]);if(w!==0)return w}return kt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){const h=kt(tr(o.latitude),tr(c.latitude));return h!==0?h:kt(tr(o.longitude),tr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return DI(n.arrayValue,e.arrayValue);case 10:return function(o,c){var T,R,M,D;const h=o.fields||{},m=c.fields||{},g=(T=h[Cd])==null?void 0:T.arrayValue,w=(R=m[Cd])==null?void 0:R.arrayValue,E=kt(((M=g==null?void 0:g.values)==null?void 0:M.length)||0,((D=w==null?void 0:w.values)==null?void 0:D.length)||0);return E!==0?E:DI(g,w)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===Pl.mapValue&&c===Pl.mapValue)return 0;if(o===Pl.mapValue)return 1;if(c===Pl.mapValue)return-1;const h=o.fields||{},m=Object.keys(h),g=c.fields||{},w=Object.keys(g);m.sort(),w.sort();for(let E=0;E<m.length&&E<w.length;++E){const T=Ux(m[E],w[E]);if(T!==0)return T;const R=Ul(h[m[E]],g[w[E]]);if(R!==0)return R}return kt(m.length,w.length)}(n.mapValue,e.mapValue);default:throw rt(23264,{he:t})}}function PI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kt(n,e);const t=Ma(n),r=Ma(e),i=kt(t.seconds,r.seconds);return i!==0?i:kt(t.nanos,r.nanos)}function DI(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Ul(t[i],r[i]);if(o)return o}return kt(t.length,r.length)}function Sd(n){return qx(n)}function qx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ma(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return La(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ke.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=qx(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const c of r)o?o=!1:i+=",",i+=`${c}:${qx(t.fields[c])}`;return i+"}"}(n.mapValue):rt(61005,{value:n})}function qm(n){switch(jl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yg(n);return e?16+qm(e):16;case 5:return 2*n.stringValue.length;case 6:return La(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+qm(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Jl(r.fields,(o,c)=>{i+=o.length+qm(c)}),i}(n.mapValue);default:throw rt(13486,{value:n})}}function Rf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kx(n){return!!n&&"integerValue"in n}function Nf(n){return!!n&&"arrayValue"in n}function OI(n){return!!n&&"nullValue"in n}function MI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Km(n){return!!n&&"mapValue"in n}function xg(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Ov])==null?void 0:r.stringValue)===Mv}function rf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Jl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rf(n.arrayValue.values[t]);return e}return{...n}}function gN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mN}const yN={mapValue:{fields:{[Ov]:{stringValue:Mv},[Cd]:{arrayValue:{}}}}};function IF(n){return"nullValue"in n?$m:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Rf(Zc.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?xg(n)?yN:{mapValue:{}}:rt(35942,{value:n})}function AF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Rf(Zc.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?yN:"mapValue"in n?xg(n)?{mapValue:{}}:Pl:rt(61959,{value:n})}function LI(n,e){const t=Ul(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function VI(n,e){const t=Ul(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Km(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rf(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=rf(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Km(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Km(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Jl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Oi(rf(this.value))}}function xN(n){const e=[];return Jl(n.fields,(t,r)=>{const i=new lr([t]);if(Km(r)){const o=xN(r.mapValue).fields;if(o.length===0)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,r,i,o,c,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new wr(e,0,yt.min(),yt.min(),yt.min(),Oi.empty(),0)}static newFoundDocument(e,t,r,i){return new wr(e,1,t,yt.min(),r,i,0)}static newNoDocument(e,t){return new wr(e,2,t,yt.min(),yt.min(),Oi.empty(),0)}static newUnknownDocument(e,t){return new wr(e,3,t,yt.min(),yt.min(),Oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,t){this.position=e,this.inclusive=t}}function FI(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(o.field.isKeyField()?r=Ke.comparator(Ke.fromName(c.referenceValue),t.key):r=Ul(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function BI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!na(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t="asc"){this.field=e,this.dir=t}}function TF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{}class Yt extends wN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CF(e,t,r):t==="array-contains"?new NF(e,r):t==="in"?new AN(e,r):t==="not-in"?new kF(e,r):t==="array-contains-any"?new PF(e,r):new Yt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SF(e,r):new RF(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ul(t,this.value)):t!==null&&jl(this.value)===jl(t)&&this.matchesComparison(Ul(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends wN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _n(e,t)}matches(e){return Nd(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nd(n){return n.op==="and"}function Xx(n){return n.op==="or"}function Lv(n){return vN(n)&&Nd(n)}function vN(n){for(const e of n.filters)if(e instanceof _n)return!1;return!0}function Yx(n){if(n instanceof Yt)return n.field.canonicalString()+n.op.toString()+Sd(n.value);if(Lv(n))return n.filters.map(e=>Yx(e)).join(",");{const e=n.filters.map(t=>Yx(t)).join(",");return`${n.op}(${e})`}}function _N(n,e){return n instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.field.isEqual(i.field)&&na(r.value,i.value)}(n,e):n instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,h)=>o&&_N(c,i.filters[h]),!0):!1}(n,e):void rt(19439)}function EN(n,e){const t=n.filters.concat(e);return _n.create(t,n.op)}function bN(n){return n instanceof Yt?function(t){return`${t.field.canonicalString()} ${t.op} ${Sd(t.value)}`}(n):n instanceof _n?function(t){return t.op.toString()+" {"+t.getFilters().map(bN).join(" ,")+"}"}(n):"Filter"}class CF extends Yt{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class SF extends Yt{constructor(e,t){super(e,"in",t),this.keys=IN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RF extends Yt{constructor(e,t){super(e,"not-in",t),this.keys=IN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function IN(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class NF extends Yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nf(t)&&Sf(t.arrayValue,this.value)}}class AN extends Yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sf(this.value.arrayValue,t)}}class kF extends Yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sf(this.value.arrayValue,t)}}class PF extends Yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function Qx(n,e=null,t=[],r=[],i=null,o=null,c=null){return new DF(n,e,t,r,i,o,c)}function Jc(n){const e=Pt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yx(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),fg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sd(r)).join(",")),e.Te=t}return e.Te}function rp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_N(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!BI(n.startAt,e.startAt)&&BI(n.endAt,e.endAt)}function I0(n){return Ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function A0(n,e){return n.filters.filter(t=>t instanceof Yt&&t.field.isEqual(e))}function jI(n,e,t){let r=$m,i=!0;for(const o of A0(n,e)){let c=$m,h=!0;switch(o.op){case"<":case"<=":c=IF(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=$m}LI({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];LI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}function UI(n,e,t){let r=Pl,i=!0;for(const o of A0(n,e)){let c=Pl,h=!0;switch(o.op){case">=":case">":c=AF(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=Pl}VI({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];VI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OF(n,e,t,r,i,o,c,h){return new Gd(n,e,t,r,i,o,c,h)}function ip(n){return new Gd(n)}function zI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TN(n){return n.collectionGroup!==null}function sf(n){const e=Pt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new En(lr.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new kf(o,r))}),t.has(lr.keyField().canonicalString())||e.Ie.push(new kf(lr.keyField(),r))}return e.Ie}function Zs(n){const e=Pt(n);return e.Ee||(e.Ee=MF(e,sf(n))),e.Ee}function MF(n,e){if(n.limitType==="F")return Qx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new kf(i.field,o)});const t=n.endAt?new Rd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rd(n.startAt.position,n.startAt.inclusive):null;return Qx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Zx(n,e){const t=n.filters.concat([e]);return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jx(n,e,t){return new Gd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wg(n,e){return rp(Zs(n),Zs(e))&&n.limitType===e.limitType}function CN(n){return`${Jc(Zs(n))}|lt:${n.limitType}`}function td(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bN(i)).join(", ")}]`),fg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Sd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Sd(i)).join(",")),`Target(${r})`}(Zs(n))}; limitType=${n.limitType})`}function sp(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ke.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of sf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,h,m){const g=FI(c,h,m);return c.inclusive?g<=0:g<0}(r.startAt,sf(r),i)||r.endAt&&!function(c,h,m){const g=FI(c,h,m);return c.inclusive?g>=0:g>0}(r.endAt,sf(r),i))}(n,e)}function LF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SN(n){return(e,t)=>{let r=!1;for(const i of sf(n)){const o=VF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function VF(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(o,c,h){const m=c.data.field(o),g=h.data.field(o);return m!==null&&g!==null?Ul(m,g):rt(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return cN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=new rr(Ke.comparator);function Ns(){return FF}const RN=new rr(Ke.comparator);function Wh(...n){let e=RN;for(const t of n)e=e.insert(t.key,t);return e}function NN(n){let e=RN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function zo(){return of()}function kN(){return of()}function of(){return new Ga(n=>n.toString(),(n,e)=>n.isEqual(e))}const BF=new rr(Ke.comparator),jF=new En(Ke.comparator);function Vt(...n){let e=jF;for(const t of n)e=e.add(t);return e}const UF=new En(kt);function zF(){return UF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function PN(n){return{integerValue:""+n}}function WF(n,e){return XV(e)?PN(e):Vv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this._=void 0}}function HF(n,e,t){return n instanceof kd?function(i,o){const c={fields:{[hN]:{stringValue:dN},[pN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Dv(o)&&(o=yg(o)),o&&(c.fields[fN]=o),{mapValue:c}}(t,e):n instanceof Pd?ON(n,e):n instanceof Dd?MN(n,e):function(i,o){const c=DN(i,o),h=WI(c)+WI(i.Ae);return Kx(c)&&Kx(i.Ae)?PN(h):Vv(i.serializer,h)}(n,e)}function GF(n,e,t){return n instanceof Pd?ON(n,e):n instanceof Dd?MN(n,e):t}function DN(n,e){return n instanceof Pf?function(r){return Kx(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class kd extends vg{}class Pd extends vg{constructor(e){super(),this.elements=e}}function ON(n,e){const t=LN(e);for(const r of n.elements)t.some(i=>na(i,r))||t.push(r);return{arrayValue:{values:t}}}class Dd extends vg{constructor(e){super(),this.elements=e}}function MN(n,e){let t=LN(e);for(const r of n.elements)t=t.filter(i=>!na(i,r));return{arrayValue:{values:t}}}class Pf extends vg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function WI(n){return tr(n.integerValue||n.doubleValue)}function LN(n){return Nf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t){this.field=e,this.transform=t}}function $F(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Pd&&i instanceof Pd||r instanceof Dd&&i instanceof Dd?Ed(r.elements,i.elements,na):r instanceof Pf&&i instanceof Pf?na(r.Ae,i.Ae):r instanceof kd&&i instanceof kd}(n.transform,e.transform)}class qF{constructor(e,t){this.version=e,this.transformResults=t}}class Ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _g{}function FN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Eg(n.key,Ki.none()):new $d(n.key,n.data,Ki.none());{const t=n.data,r=Oi.empty();let i=new En(lr.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new $a(n.key,r,new ds(i.toArray()),Ki.none())}}function KF(n,e,t){n instanceof $d?function(i,o,c){const h=i.value.clone(),m=GI(i.fieldTransforms,o,c.transformResults);h.setAll(m),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof $a?function(i,o,c){if(!Xm(i.precondition,o))return void o.convertToUnknownDocument(c.version);const h=GI(i.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(BN(i)),m.setAll(h),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function af(n,e,t,r){return n instanceof $d?function(o,c,h,m){if(!Xm(o.precondition,c))return h;const g=o.value.clone(),w=$I(o.fieldTransforms,m,c);return g.setAll(w),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof $a?function(o,c,h,m){if(!Xm(o.precondition,c))return h;const g=$I(o.fieldTransforms,m,c),w=c.data;return w.setAll(BN(o)),w.setAll(g),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(o,c,h){return Xm(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function XF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=DN(r.transform,i||null);o!=null&&(t===null&&(t=Oi.empty()),t.set(r.field,o))}return t||null}function HI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ed(r,i,(o,c)=>$F(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $d extends _g{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $a extends _g{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function BN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function GI(n,e,t){const r=new Map;dt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,GF(c,h,t[i]))}return r}function $I(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,HF(o,c,e))}return r}class Eg extends _g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jN extends _g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&KF(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=af(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=af(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kN();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const m=FN(c,h);m!==null&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Vt())}isEqual(e){return this.batchId===e.batchId&&Ed(this.mutations,e.mutations,(t,r)=>HI(t,r))&&Ed(this.baseMutations,e.baseMutations,(t,r)=>HI(t,r))}}class Bv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){dt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return BF}();const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new Bv(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr,tn;function QF(n){switch(n){case Ce.OK:return rt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return rt(15467,{code:n})}}function UN(n){if(n===void 0)return qi("GRPC error has no .code"),Ce.UNKNOWN;switch(n){case Mr.OK:return Ce.OK;case Mr.CANCELLED:return Ce.CANCELLED;case Mr.UNKNOWN:return Ce.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return Ce.INTERNAL;case Mr.UNAVAILABLE:return Ce.UNAVAILABLE;case Mr.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Mr.NOT_FOUND:return Ce.NOT_FOUND;case Mr.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Mr.ABORTED:return Ce.ABORTED;case Mr.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Mr.DATA_LOSS:return Ce.DATA_LOSS;default:return rt(39323,{code:n})}}(tn=Mr||(Mr={}))[tn.OK=0]="OK",tn[tn.CANCELLED=1]="CANCELLED",tn[tn.UNKNOWN=2]="UNKNOWN",tn[tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tn[tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tn[tn.NOT_FOUND=5]="NOT_FOUND",tn[tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",tn[tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",tn[tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",tn[tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tn[tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tn[tn.ABORTED=10]="ABORTED",tn[tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",tn[tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",tn[tn.INTERNAL=13]="INTERNAL",tn[tn.UNAVAILABLE=14]="UNAVAILABLE",tn[tn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=new Ml([4294967295,4294967295],0);function qI(n){const e=ZF().encode(n),t=new FR;return t.update(e),new Uint8Array(t.digest())}function KI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ml([t,r],0),new Ml([i,o],0)]}class Uv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hh(`Invalid padding: ${t}`);if(r<0)throw new Hh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hh(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ml.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ml.fromNumber(r)));return i.compare(JF)===1&&(i=new Ml([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=qI(e),[r,i]=KI(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);if(!this.we(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Uv(o,i,t);return r.forEach(h=>c.insert(h)),c}insert(e){if(this.ge===0)return;const t=qI(e),[r,i]=KI(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(r,i,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Hh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,op.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bg(yt.min(),i,new rr(kt),Ns(),Vt())}}class op{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new op(r,t,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class zN{constructor(e,t){this.targetId=e,this.Ce=t}}class WN{constructor(e,t,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class XI{constructor(){this.ve=0,this.Fe=YI(),this.Me=Br.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vt(),t=Vt(),r=Vt();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt(38017,{changeType:o})}}),new op(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=YI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eB{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ns(),this.Je=mm(),this.He=mm(),this.Ye=new rr(kt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:rt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(I0(o))if(r===0){const c=new Ke(o.path);this.et(t,c,wr.newNoDocument(c,yt.min()))}else dt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const h=this.ut(e),m=h?this.ct(h,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let c,h;try{c=La(r).toUint8Array()}catch(m){if(m instanceof uN)return Qc("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new Uv(c,i,o)}catch(m){return Qc(m instanceof Hh?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,c)=>{const h=this.ot(c);if(h){if(o.current&&I0(h.target)){const m=new Ke(h.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,wr.newNoDocument(m,e))}o.Be&&(t.set(c,o.ke()),o.qe())}});let r=Vt();this.He.forEach((o,c)=>{let h=!0;c.forEachWhile(m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(o))}),this.je.forEach((o,c)=>c.setReadTime(e));const i=new bg(e,t,this.Ye,this.je,r);return this.je=Ns(),this.Je=mm(),this.He=mm(),this.Ye=new rr(kt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new XI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new En(kt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new En(kt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XI),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mm(){return new rr(Ke.comparator)}function YI(){return new rr(Ke.comparator)}const tB={asc:"ASCENDING",desc:"DESCENDING"},nB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rB={and:"AND",or:"OR"};class iB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ew(n,e){return n.useProto3Json||fg(e)?e:{value:e}}function Od(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sB(n,e){return Od(n,e.toTimestamp())}function Qi(n){return dt(!!n,49232),yt.fromTimestamp(function(t){const r=Ma(t);return new vn(r.seconds,r.nanos)}(n))}function zv(n,e){return tw(n,e).canonicalString()}function tw(n,e){const t=function(i){return new fn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function GN(n){const e=fn.fromString(n);return dt(e3(e),10190,{key:e.toString()}),e}function T0(n,e){return zv(n.databaseId,e.path)}function zc(n,e){const t=GN(e);if(t.get(1)!==n.databaseId.projectId)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new qe(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(KN(t))}function $N(n,e){return zv(n.databaseId,e)}function qN(n){const e=GN(n);return e.length===4?fn.emptyPath():KN(e)}function nw(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KN(n){return dt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QI(n,e,t){return{name:T0(n,e),fields:t.value.mapValue.fields}}function oB(n,e,t){const r=zc(n,e.name),i=Qi(e.updateTime),o=e.createTime?Qi(e.createTime):yt.min(),c=new Oi({mapValue:{fields:e.fields}}),h=wr.newFoundDocument(r,i,o,c);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function aB(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:rt(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(g,w){return g.useProto3Json?(dt(w===void 0||typeof w=="string",58123),Br.fromBase64String(w||"")):(dt(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Br.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const w=g.code===void 0?Ce.UNKNOWN:UN(g.code);return new qe(w,g.message||"")}(c);t=new WN(r,i,o,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=zc(n,r.document.name),o=Qi(r.document.updateTime),c=r.document.createTime?Qi(r.document.createTime):yt.min(),h=new Oi({mapValue:{fields:r.document.fields}}),m=wr.newFoundDocument(i,o,c,h),g=r.targetIds||[],w=r.removedTargetIds||[];t=new Ym(g,w,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=zc(n,r.document),o=r.readTime?Qi(r.readTime):yt.min(),c=wr.newNoDocument(i,o),h=r.removedTargetIds||[];t=new Ym([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=zc(n,r.document),o=r.removedTargetIds||[];t=new Ym([],o,i,null)}else{if(!("filter"in e))return rt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,c=new YF(i,o),h=r.targetId;t=new zN(h,c)}}return t}function C0(n,e){let t;if(e instanceof $d)t={update:QI(n,e.key,e.value)};else if(e instanceof Eg)t={delete:T0(n,e.key)};else if(e instanceof $a)t={update:QI(n,e.key,e.data),updateMask:fB(e.fieldMask)};else{if(!(e instanceof jN))return rt(16599,{Vt:e.type});t={verify:T0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const h=c.transform;if(h instanceof kd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Pd)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Dd)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Pf)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw rt(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:sB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:rt(27497)}(n,e.precondition)),t}function rw(n,e){const t=e.currentDocument?function(o){return o.updateTime!==void 0?Ki.updateTime(Qi(o.updateTime)):o.exists!==void 0?Ki.exists(o.exists):Ki.none()}(e.currentDocument):Ki.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(c,h){let m=null;if("setToServerValue"in h)dt(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),m=new kd;else if("appendMissingElements"in h){const w=h.appendMissingElements.values||[];m=new Pd(w)}else if("removeAllFromArray"in h){const w=h.removeAllFromArray.values||[];m=new Dd(w)}else"increment"in h?m=new Pf(c,h.increment):rt(16584,{proto:h});const g=lr.fromServerFormat(h.fieldPath);return new VN(g,m)}(n,i)):[];if(e.update){e.update.name;const i=zc(n,e.update.name),o=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const g=m.fieldPaths||[];return new ds(g.map(w=>lr.fromServerFormat(w)))}(e.updateMask);return new $a(i,o,c,t,r)}return new $d(i,o,t,r)}if(e.delete){const i=zc(n,e.delete);return new Eg(i,t)}if(e.verify){const i=zc(n,e.verify);return new jN(i,t)}return rt(1463,{proto:e})}function lB(n,e){return n&&n.length>0?(dt(e!==void 0,14353),n.map(t=>function(i,o){let c=i.updateTime?Qi(i.updateTime):Qi(o);return c.isEqual(yt.min())&&(c=Qi(o)),new qF(c,i.transformResults||[])}(t,e))):[]}function XN(n,e){return{documents:[$N(n,e.path)]}}function YN(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$N(n,i);const o=function(g){if(g.length!==0)return JN(_n.create(g,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const c=function(g){if(g.length!==0)return g.map(w=>function(T){return{field:nd(T.field),direction:uB(T.dir)}}(w))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=ew(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:i}}function QN(n){let e=qN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){dt(r===1,65062);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let o=[];t.where&&(o=function(E){const T=ZN(E);return T instanceof _n&&Lv(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(T=>function(M){return new kf(rd(M.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(T))}(t.orderBy));let h=null;t.limit&&(h=function(E){let T;return T=typeof E=="object"?E.value:E,fg(T)?null:T}(t.limit));let m=null;t.startAt&&(m=function(E){const T=!!E.before,R=E.values||[];return new Rd(R,T)}(t.startAt));let g=null;return t.endAt&&(g=function(E){const T=!E.before,R=E.values||[];return new Rd(R,T)}(t.endAt)),OF(e,i,c,o,h,"F",m,g)}function cB(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=rd(t.unaryFilter.field);return Yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rd(t.unaryFilter.field);return Yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rd(t.unaryFilter.field);return Yt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rd(t.unaryFilter.field);return Yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return rt(61313);default:return rt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Yt.create(rd(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return rt(58110);default:return rt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return _n.create(t.compositeFilter.filters.map(r=>ZN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return rt(1026)}}(t.compositeFilter.op))}(n):rt(30097,{filter:n})}function uB(n){return tB[n]}function dB(n){return nB[n]}function hB(n){return rB[n]}function nd(n){return{fieldPath:n.canonicalString()}}function rd(n){return lr.fromServerFormat(n.fieldPath)}function JN(n){return n instanceof Yt?function(t){if(t.op==="=="){if(MI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NAN"}};if(OI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NAN"}};if(OI(t.value))return{unaryFilter:{field:nd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nd(t.field),op:dB(t.op),value:t.value}}}(n):n instanceof _n?function(t){const r=t.getFilters().map(i=>JN(i));return r.length===1?r[0]:{compositeFilter:{op:hB(t.op),filters:r}}}(n):rt(54877,{filter:n})}function fB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function e3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t,r,i,o=yt.min(),c=yt.min(),h=Br.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new Ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e){this.yt=e}}function pB(n,e){let t;if(e.document)t=oB(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),i=tu(e.noDocument.readTime);t=wr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt(56709);{const r=Ke.fromSegments(e.unknownDocument.path),i=tu(e.unknownDocument.version);t=wr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new vn(i[0],i[1]);return yt.fromTimestamp(o)}(e.readTime)),t}function ZI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:S0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,c){return{name:T0(o,c.key),fields:c.data.value.mapValue.fields,updateTime:Od(o,c.version.toTimestamp()),createTime:Od(o,c.createTime.toTimestamp())}}(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:eu(e.version)};else{if(!e.isUnknownDocument())return rt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:eu(e.version)}}return r}function S0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function eu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tu(n){const e=new vn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Pc(n,e){const t=(e.baseMutations||[]).map(o=>rw(n.yt,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const h=e.mutations[o+1];c.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>rw(n.yt,o)),i=vn.fromMillis(e.localWriteTimeMs);return new Fv(e.batchId,i,t,r)}function Gh(n){const e=tu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?tu(n.lastLimboFreeSnapshotVersion):yt.min();let r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){const c=o.documents.length;return dt(c===1,1966,{count:c}),Zs(ip(qN(o.documents[0])))}(n.query):function(o){return Zs(QN(o))}(n.query),new Ca(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Br.fromBase64String(n.resumeToken))}function n3(n,e){const t=eu(e.snapshotVersion),r=eu(e.lastLimboFreeSnapshotVersion);let i;i=I0(e.target)?XN(n.yt,e.target):YN(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jc(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function r3(n){const e=QN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jx(e,e.limit,"L"):e}function Vy(n,e){return new jv(e.largestBatchId,rw(n.yt,e.overlayMutation))}function JI(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}function eA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:eu(r.readTime),documentKey:Li(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{getBundleMetadata(e,t){return tA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:tu(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return tA(e).put(function(i){return{bundleId:i.id,createTime:eu(Qi(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return nA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:r3(o.bundledQuery),readTime:tu(o.readTime)}}(r)})}saveNamedQuery(e,t){return nA(e).put(function(i){return{name:i.name,readTime:eu(Qi(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function tA(n){return Xr(n,pg)}function nA(n){return Xr(n,mg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Ig(e,r)}getOverlay(e,t){return Nh(e).get(JI(this.userId,t)).next(r=>r?Vy(this.serializer,r):null)}getOverlays(e,t){const r=zo();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new jv(t,c);i.push(this.St(e,h))}),ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Li(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Nh(e).Z(Gx,h))}),ge.waitFor(o)}getOverlaysForCollection(e,t,r){const i=zo(),o=Li(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Nh(e).J(Gx,c).next(h=>{for(const m of h){const g=Vy(this.serializer,m);i.set(g.getKey(),g)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=zo();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nh(e).ee({index:iN,range:h},(m,g,w)=>{const E=Vy(this.serializer,g);o.size()<i||E.largestBatchId===c?(o.set(E.getKey(),E),c=E.largestBatchId):w.done()}).next(()=>o)}St(e,t){return Nh(e).put(function(i,o,c){const[h,m,g]=JI(o,c.mutation.key);return{userId:o,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:C0(i.yt,c.mutation)}}(this.serializer,this.userId,t))}}function Nh(n){return Xr(n,gg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{bt(e){return Xr(e,kv)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?Br.fromUint8Array(r):Br.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(tr(e.integerValue));else if("doubleValue"in e){const r=tr(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),bf(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ma(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(La(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?gN(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):xg(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):rt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var c,h;const r=e.fields||{};this.Ft(t,53);const i=Cd,o=((h=(c=r[i].arrayValue)==null?void 0:c.values)==null?void 0:h.length)||0;this.Ft(t,15),t.Mt(tr(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ke.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Dc.Kt=new Dc;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=255;function yB(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function rA(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const c=yB(255&r[o]);if(i+=c,c!==8)break}return i}(n);return Math.ceil(e/8)}class xB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=rA(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=rA(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Gu),this.sn(255)}_n(){this.an(Gu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(o){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,o,!1),new Uint8Array(c.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Gu?(this.sn(Gu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Gu?(this.an(Gu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class wB{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class vB{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class kh{constructor(){this.cn=new xB,this.ln=new wB(this.cn),this.hn=new vB(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Oc(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Qm(this.En),directionalValue:Qm(this.dn),orderedDocumentKey:Qm(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function xl(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=iA(n.En,e.En),t!==0?t:(t=iA(n.dn,e.dn),t!==0?t:Ke.comparator(n.In,e.In)))}function iA(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Qm(n){return QS()?function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r}(n):n}function sA(n){return typeof n!="string"?n:function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(n)}class oA{constructor(e){this.mn=new En((t,r)=>lr.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(dt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=zx(e);if(t!==void 0&&!this.wn(t))return!1;const r=Cc(e);let i=new Set,o=0,c=0;for(;o<r.length&&this.wn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!i.has(h.field.canonicalString())){const m=r[o];if(!this.Sn(h,m)||!this.bn(this.fn[c++],m))return!1}++o}for(;o<r.length;++o){const h=r[o];if(c>=this.fn.length||!this.bn(this.fn[c++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new En(lr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Wm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Wm(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Wm(r.field,r.dir==="asc"?0:1)));return new w0(w0.UNKNOWN_ID,this.collectionId,t,Ef.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n){var t,r;if(dt(n instanceof Yt||n instanceof _n,20012),n instanceof Yt){if(n instanceof AN){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map(o=>Yt.create(n.field,"==",o)))||[];return _n.create(i,"or")}return n}const e=n.filters.map(i=>i3(i));return _n.create(e,n.op)}function _B(n){if(n.getFilters().length===0)return[];const e=ow(i3(n));return dt(s3(e),7391),iw(e)||sw(e)?[e]:e.getFilters()}function iw(n){return n instanceof Yt}function sw(n){return n instanceof _n&&Lv(n)}function s3(n){return iw(n)||sw(n)||function(t){if(t instanceof _n&&Xx(t)){for(const r of t.getFilters())if(!iw(r)&&!sw(r))return!1;return!0}return!1}(n)}function ow(n){if(dt(n instanceof Yt||n instanceof _n,34018),n instanceof Yt)return n;if(n.filters.length===1)return ow(n.filters[0]);const e=n.filters.map(r=>ow(r));let t=_n.create(e,n.op);return t=R0(t),s3(t)?t:(dt(t instanceof _n,64498),dt(Nd(t),40251),dt(t.filters.length>1,57927),t.filters.reduce((r,i)=>Wv(r,i)))}function Wv(n,e){let t;return dt(n instanceof Yt||n instanceof _n,38388),dt(e instanceof Yt||e instanceof _n,25473),t=n instanceof Yt?e instanceof Yt?function(i,o){return _n.create([i,o],"and")}(n,e):aA(n,e):e instanceof Yt?aA(e,n):function(i,o){if(dt(i.filters.length>0&&o.filters.length>0,48005),Nd(i)&&Nd(o))return EN(i,o.getFilters());const c=Xx(i)?i:o,h=Xx(i)?o:i,m=c.filters.map(g=>Wv(g,h));return _n.create(m,"or")}(n,e),R0(t)}function aA(n,e){if(Nd(e))return EN(e,n.getFilters());{const t=e.filters.map(r=>Wv(n,r));return _n.create(t,"or")}}function R0(n){if(dt(n instanceof Yt||n instanceof _n,11850),n instanceof Yt)return n;const e=n.getFilters();if(e.length===1)return R0(e[0]);if(vN(n))return n;const t=e.map(i=>R0(i)),r=[];return t.forEach(i=>{i instanceof Yt?r.push(i):i instanceof _n&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_n.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(){this.Cn=new Hv}addToCollectionParentIndex(e,t){return this.Cn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Ms.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(Ms.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class Hv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new En(fn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new En(fn.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="IndexedDbIndexManager",gm=new Uint8Array(0);class bB{constructor(e,t){this.databaseId=t,this.vn=new Hv,this.Fn=new Ga(r=>Jc(r),(r,i)=>rp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const o={collectionId:r,parent:Li(i)};return cA(e).put(o)}return ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$R(t),""],!1,!0);return cA(e).J(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(Uo(c.parent))}return r})}addFieldIndex(e,t){const r=Ph(e),i=function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete i.indexId;const o=r.add(i);if(t.indexState){const c=qu(e);return o.next(h=>{c.put(eA(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Ph(e),i=qu(e),o=$u(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ph(e),r=$u(e),i=qu(e);return t.Z().next(()=>r.Z()).next(()=>i.Z())}createTargetIndexes(e,t){return ge.forEach(this.Mn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new oA(r).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=$u(e);let i=!0;const o=new Map;return ge.forEach(this.Mn(t),c=>this.xn(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=Vt();const h=[];return ge.forEach(o,(m,g)=>{Be(lA,`Using index ${function(W){return`id=${W.indexId}|cg=${W.collectionGroup}|f=${W.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(m)} to execute ${Jc(t)}`);const w=function(W,Y){const Z=zx(Y);if(Z===void 0)return null;for(const ie of A0(W,Z.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null}(g,m),E=function(W,Y){const Z=new Map;for(const ie of Cc(Y))for(const F of A0(W,ie.fieldPath))switch(F.op){case"==":case"in":Z.set(ie.fieldPath.canonicalString(),F.value);break;case"not-in":case"!=":return Z.set(ie.fieldPath.canonicalString(),F.value),Array.from(Z.values())}return null}(g,m),T=function(W,Y){const Z=[];let ie=!0;for(const F of Cc(Y)){const B=F.kind===0?jI(W,F.fieldPath,W.startAt):UI(W,F.fieldPath,W.startAt);Z.push(B.value),ie&&(ie=B.inclusive)}return new Rd(Z,ie)}(g,m),R=function(W,Y){const Z=[];let ie=!0;for(const F of Cc(Y)){const B=F.kind===0?UI(W,F.fieldPath,W.endAt):jI(W,F.fieldPath,W.endAt);Z.push(B.value),ie&&(ie=B.inclusive)}return new Rd(Z,ie)}(g,m),M=this.On(m,g,T),D=this.On(m,g,R),L=this.Nn(m,g,E),G=this.Bn(m.indexId,w,M,T.inclusive,D,R.inclusive,L);return ge.forEach(G,z=>r.Y(z,t.limit).next(W=>{W.forEach(Y=>{const Z=Ke.fromSegments(Y.documentKey);c.has(Z)||(c=c.add(Z),h.push(Z))})}))}).next(()=>h)}return ge.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=_B(_n.create(e.filters,"and")).map(r=>Qx(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,r,i,o,c,h){const m=(t!=null?t.length:1)*Math.max(r.length,o.length),g=m/(t!=null?t.length:1),w=[];for(let E=0;E<m;++E){const T=t?this.Ln(t[E/g]):gm,R=this.kn(e,T,r[E%g],i),M=this.qn(e,T,o[E%g],c),D=h.map(L=>this.kn(e,T,L,!0));w.push(...this.createRange(R,M,D))}return w}kn(e,t,r,i){const o=new Oc(e,Ke.empty(),t,r);return i?o:o.An()}qn(e,t,r,i){const o=new Oc(e,Ke.empty(),t,r);return i?o.An():o}xn(e,t){const r=new oA(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.yn(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;const i=this.Mn(t);return ge.forEach(i,o=>this.xn(e,o).next(c=>{c?r!==0&&c.fields.length<function(m){let g=new En(lr.comparator),w=!1;for(const E of m.filters)for(const T of E.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?w=!0:g=g.add(T.field));for(const E of m.orderBy)E.field.isKeyField()||(g=g.add(E.field));return g.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>function(c){return c.limit!==null}(t)&&i.length>1&&r===2?1:r)}Qn(e,t){const r=new kh;for(const i of Cc(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const c=r.Pn(i.kind);Dc.Kt.Dt(o,c)}return r.un()}Ln(e){const t=new kh;return Dc.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new kh;return Dc.Kt.Dt(Rf(this.databaseId,t),r.Pn(function(o){const c=Cc(o);return c.length===0?0:c[c.length-1].kind}(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new kh);let o=0;for(const c of Cc(e)){const h=r[o++];for(const m of i)if(this.Un(t,c.fieldPath)&&Nf(h))i=this.Kn(i,c,h);else{const g=m.Pn(c.kind);Dc.Kt.Dt(h,g)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const m=new kh;m.seed(h.un()),Dc.Kt.Dt(c,m.Pn(t.kind)),o.push(m)}return o}Un(e,t){return!!e.filters.find(r=>r instanceof Yt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Ph(e),i=qu(e);return(t?r.J(Hx,IDBKeyRange.bound(t,t)):r.J()).next(o=>{const c=[];return ge.forEach(o,h=>i.get([h.indexId,this.uid]).next(m=>{c.push(function(w,E){const T=E?new Ef(E.sequenceNumber,new Ms(tu(E.readTime),new Ke(Uo(E.documentKey)),E.largestBatchId)):Ef.empty(),R=w.fields.map(([M,D])=>new Wm(lr.fromServerFormat(M),D));return new w0(w.indexId,w.collectionGroup,R,T)}(h,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ph(e),o=qu(e);return this.Gn(e).next(c=>i.J(Hx,IDBKeyRange.bound(t,t)).next(h=>ge.forEach(h,m=>o.put(eA(m.indexId,this.uid,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ge.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?ge.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ge.forEach(h,m=>this.zn(e,i,m).next(g=>{const w=this.jn(o,m);return g.isEqual(w)?ge.resolve():this.Jn(e,o,m,g,w)}))))})}Hn(e,t,r,i){return $u(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return $u(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=$u(e);let o=new En(xl);return i.ee({index:rN,range:IDBKeyRange.only([r.indexId,this.uid,Qm(this.$n(r,t))])},(c,h)=>{o=o.add(new Oc(r.indexId,t,sA(h.arrayValue),sA(h.directionalValue)))}).next(()=>o)}jn(e,t){let r=new En(xl);const i=this.Qn(t,e);if(i==null)return r;const o=zx(t);if(o!=null){const c=e.data.field(o.fieldPath);if(Nf(c))for(const h of c.arrayValue.values||[])r=r.add(new Oc(t.indexId,e.key,this.Ln(h),i))}else r=r.add(new Oc(t.indexId,e.key,gm,i));return r}Jn(e,t,r,i,o){Be(lA,"Updating index entries for document '%s'",t.key);const c=[];return function(m,g,w,E,T){const R=m.getIterator(),M=g.getIterator();let D=Hu(R),L=Hu(M);for(;D||L;){let G=!1,z=!1;if(D&&L){const W=w(D,L);W<0?z=!0:W>0&&(G=!0)}else D!=null?z=!0:G=!0;G?(E(L),L=Hu(M)):z?(T(D),D=Hu(R)):(D=Hu(R),L=Hu(M))}}(i,o,xl,h=>{c.push(this.Hn(e,t,r,h))},h=>{c.push(this.Yn(e,t,r,h))}),ge.waitFor(c)}Gn(e){let t=1;return qu(e).ee({index:nN,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>xl(c,h)).filter((c,h,m)=>!h||xl(c,m[h-1])!==0);const i=[];i.push(e);for(const c of r){const h=xl(c,e),m=xl(c,t);if(h===0)i[0]=e.An();else if(h>0&&m<0)i.push(c),i.push(c.An());else if(m>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2){if(this.Zn(i[c],i[c+1]))return[];const h=i[c].Vn(this.uid,gm,Ke.empty()),m=i[c+1].Vn(this.uid,gm,Ke.empty());o.push(IDBKeyRange.bound(h,m))}return o}Zn(e,t){return xl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uA)}getMinOffset(e,t){return ge.mapArray(this.Mn(t),r=>this.xn(e,r).next(i=>i||rt(44426))).next(uA)}}function cA(n){return Xr(n,Tf)}function $u(n){return Xr(n,nf)}function Ph(n){return Xr(n,Nv)}function qu(n){return Xr(n,tf)}function uA(n){dt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Cv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ms(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o3=41943040;class Di{static withCacheSize(e){return new Di(e,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(n,e,t){const r=n.store(go),i=n.store(bd),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const m=r.ee({range:c},(w,E,T)=>(h++,T.delete()));o.push(m.next(()=>{dt(h===1,47070,{batchId:t.batchId})}));const g=[];for(const w of t.mutations){const E=JR(e,w.key.path,t.batchId);o.push(i.delete(E)),g.push(w.key)}return ge.waitFor(o).next(()=>g)}function N0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(o3,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);class Ag{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){dt(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Ag(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wl(e).ee({index:Mc,range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=id(e),c=wl(e);return c.add({}).next(h=>{dt(typeof h=="number",49019);const m=new Fv(h,t,r,i),g=function(R,M,D){const L=D.baseMutations.map(z=>C0(R.yt,z)),G=D.mutations.map(z=>C0(R.yt,z));return{userId:M,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:L,mutations:G}}(this.serializer,this.userId,m),w=[];let E=new En((T,R)=>kt(T.canonicalString(),R.canonicalString()));for(const T of i){const R=JR(this.userId,T.key.path,h);E=E.add(T.key.path.popLast()),w.push(c.put(g)),w.push(o.put(R,ZV))}return E.forEach(T=>{w.push(this.indexManager.addToCollectionParentIndex(e,T))}),e.addOnCommittedListener(()=>{this.Xn[h]=m.keys()}),ge.waitFor(w).next(()=>m)})}lookupMutationBatch(e,t){return wl(e).get(t).next(r=>r?(dt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Pc(this.serializer,r)):null)}er(e,t){return this.Xn[t]?ge.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return wl(e).ee({index:Mc,range:i},(c,h,m)=>{h.userId===this.userId&&(dt(h.batchId>=r,47524,{tr:r}),o=Pc(this.serializer,h)),m.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=jc;return wl(e).ee({index:Mc,range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,jc],[this.userId,Number.POSITIVE_INFINITY]);return wl(e).J(Mc,t).next(r=>r.map(i=>Pc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Hm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return id(e).ee({range:i},(c,h,m)=>{const[g,w,E]=c,T=Uo(w);if(g===this.userId&&t.path.isEqual(T))return wl(e).get(E).next(R=>{if(!R)throw rt(61480,{nr:c,batchId:E});dt(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:E}),o.push(Pc(this.serializer,R))});m.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);const i=[];return t.forEach(o=>{const c=Hm(this.userId,o.path),h=IDBKeyRange.lowerBound(c),m=id(e).ee({range:h},(g,w,E)=>{const[T,R,M]=g,D=Uo(R);T===this.userId&&o.path.isEqual(D)?r=r.add(M):E.done()});i.push(m)}),ge.waitFor(i).next(()=>this.rr(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=Hm(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new En(kt);return id(e).ee({range:c},(m,g,w)=>{const[E,T,R]=m,M=Uo(T);E===this.userId&&r.isPrefixOf(M)?M.length===i&&(h=h.add(R)):w.done()}).next(()=>this.rr(e,h))}rr(e,t){const r=[],i=[];return t.forEach(o=>{i.push(wl(e).get(o).next(c=>{if(c===null)throw rt(35274,{batchId:o});dt(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:o}),r.push(Pc(this.serializer,c))}))}),ge.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return a3(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),ge.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ge.resolve();const r=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),i=[];return id(e).ee({range:r},(o,c,h)=>{if(o[0]===this.userId){const m=Uo(o[1]);i.push(m)}else h.done()}).next(()=>{dt(i.length===0,56720,{sr:i.map(o=>o.canonicalString())})})})}containsKey(e,t){return l3(e,this.userId,t)}_r(e){return c3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:jc,lastStreamToken:""})}}function l3(n,e,t){const r=Hm(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return id(n).ee({range:o,X:!0},(h,m,g)=>{const[w,E,T]=h;w===e&&E===i&&(c=!0),g.done()}).next(()=>c)}function wl(n){return Xr(n,go)}function id(n){return Xr(n,bd)}function c3(n){return Xr(n,If)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nu(0)}static cr(){return new nu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const r=new nu(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>yt.fromTimestamp(new vn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.lr(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ku(e).delete(t.targetId)).next(()=>this.lr(e)).next(r=>(dt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ku(e).ee((c,h)=>{const m=Gh(h);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(i++,o.push(this.removeTargetData(e,m)))}).next(()=>ge.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ku(e).ee((r,i)=>{const o=Gh(i);t(o)})}lr(e){return hA(e).get(E0).next(t=>(dt(t!==null,2888),t))}hr(e,t){return hA(e).put(E0,t)}Pr(e,t){return Ku(e).put(n3(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Jc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ku(e).ee({range:i,index:tN},(c,h,m)=>{const g=Gh(h);rp(t,g.target)&&(o=g,m.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Nl(e);return t.forEach(c=>{const h=Li(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=Nl(e);return ge.forEach(t,o=>{const c=Li(o.path);return ge.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Nl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Nl(e);let o=Vt();return i.ee({range:r,X:!0},(c,h,m)=>{const g=Uo(c[1]),w=new Ke(g);o=o.add(w)}).next(()=>o)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[$R(r)],!1,!0);let o=0;return Nl(e).ee({index:Rv,X:!0,range:i},([c,h],m,g)=>{c!==0&&(o++,g.done())}).next(()=>o>0)}At(e,t){return Ku(e).get(t).next(r=>r?Gh(r):null)}}function Ku(n){return Xr(n,Id)}function hA(n){return Xr(n,Uc)}function Nl(n){return Xr(n,Ad)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="LruGarbageCollector",AB=1048576;function pA([n,e],[t,r]){const i=kt(n,t);return i===0?kt(e,r):i}class TB{constructor(e){this.Ir=e,this.buffer=new En(pA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class u3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Be(fA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zl(t)?Be(fA,"Ignoring IndexedDB error during garbage collection: ",t):await gu(t)}await this.Vr(3e5)})}}class CB{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(Ys.ce);const r=new TB(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(dA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dA):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,c,h,m,g;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),i=this.params.maximumSequenceNumbersToCollect):i=E,c=Date.now(),this.nthSequenceNumber(e,i))).next(E=>(r=E,h=Date.now(),this.removeTargets(e,r,t))).next(E=>(o=E,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(g=Date.now(),ed()<=Xt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${i} in `+(h-c)+`ms
	Removed ${o} targets in `+(m-h)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-w}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:E})))}}function d3(n,e){return new CB(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(e,t){this.db=e,this.garbageCollector=d3(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(r,i)=>t(i))}addReference(e,t,r){return ym(e,r)}removeReference(e,t,r){return ym(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ym(e,t)}br(e,t){return function(i,o){let c=!1;return c3(i).te(h=>l3(i,h,o).next(m=>(m&&(c=!0),ge.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Sr(e,(c,h)=>{if(h<=t){const m=this.br(e,c).next(g=>{if(!g)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,yt.min()),Nl(e).delete(function(E){return[0,Li(E.path)]}(c))))});i.push(m)}}).next(()=>ge.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ym(e,t)}Sr(e,t){const r=Nl(e);let i,o=Ys.ce;return r.ee({index:Rv},([c,h],{path:m,sequenceNumber:g})=>{c===0?(o!==Ys.ce&&t(new Ke(Uo(i)),o),o=g,i=m):o=Ys.ce}).next(()=>{o!==Ys.ce&&t(new Ke(Uo(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ym(n,e){return Nl(n).put(function(r,i){return{targetId:0,path:Li(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.changes=new Ga(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ec(e).put(r)}removeEntry(e,t,r){return Ec(e).delete(function(o,c){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],S0(c),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Dr(e,r)))}getEntry(e,t){let r=wr.newInvalidDocument(t);return Ec(e).ee({index:Gm,range:IDBKeyRange.only(Dh(t))},(i,o)=>{r=this.Cr(t,o)}).next(()=>r)}vr(e,t){let r={size:0,document:wr.newInvalidDocument(t)};return Ec(e).ee({index:Gm,range:IDBKeyRange.only(Dh(t))},(i,o)=>{r={document:this.Cr(t,o),size:N0(o)}}).next(()=>r)}getEntries(e,t){let r=Ns();return this.Fr(e,t,(i,o)=>{const c=this.Cr(i,o);r=r.insert(i,c)}).next(()=>r)}Mr(e,t){let r=Ns(),i=new rr(Ke.comparator);return this.Fr(e,t,(o,c)=>{const h=this.Cr(o,c);r=r.insert(o,h),i=i.insert(o,N0(c))}).next(()=>({documents:r,Or:i}))}Fr(e,t,r){if(t.isEmpty())return ge.resolve();let i=new En(yA);t.forEach(m=>i=i.add(m));const o=IDBKeyRange.bound(Dh(i.first()),Dh(i.last())),c=i.getIterator();let h=c.getNext();return Ec(e).ee({index:Gm,range:o},(m,g,w)=>{const E=Ke.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;h&&yA(h,E)<0;)r(h,null),h=c.getNext();h&&h.isEqual(E)&&(r(h,g),h=c.hasNext()?c.getNext():null),h?w.j(Dh(h)):w.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const c=t.path,h=[c.popLast().toArray(),c.lastSegment(),S0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ec(e).J(IDBKeyRange.bound(h,m,!0)).next(g=>{o==null||o.incrementDocumentReadCount(g.length);let w=Ns();for(const E of g){const T=this.Cr(Ke.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);T.isFoundDocument()&&(sp(t,T)||i.has(T.key))&&(w=w.insert(T.key,T))}return w})}getAllFromCollectionGroup(e,t,r,i){let o=Ns();const c=gA(t,r),h=gA(t,Ms.max());return Ec(e).ee({index:eN,range:IDBKeyRange.bound(c,h,!0)},(m,g,w)=>{const E=this.Cr(Ke.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);o=o.insert(E.key,E),o.size===i&&w.done()}).next(()=>o)}newChangeBuffer(e){return new NB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mA(e).get(Wx).next(t=>(dt(!!t,20021),t))}Dr(e,t){return mA(e).put(Wx,t)}Cr(e,t){if(t){const r=pB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(yt.min())))return r}return wr.newInvalidDocument(e)}}function f3(n){return new RB(n)}class NB extends h3{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Ga(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new En((o,c)=>kt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,h.readTime)),c.isValidDocument()){const m=ZI(this.Nr.serializer,c);i=i.add(o.path.popLast());const g=N0(m);r+=g-h.size,t.push(this.Nr.addEntry(e,o,m))}else if(r-=h.size,this.trackRemovals){const m=ZI(this.Nr.serializer,c.convertToNoDocument(yt.min()));t.push(this.Nr.addEntry(e,o,m))}}),i.forEach(o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Nr.updateMetadata(e,r)),ge.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:r,Or:i})=>(i.forEach((o,c)=>{this.Br.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function mA(n){return Xr(n,Af)}function Ec(n){return Xr(n,_0)}function Dh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gA(n,e){const t=e.documentKey.path.toArray();return[n,S0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function yA(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=kt(t[o],r[o]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&af(r.mutation,i,ds.empty(),vn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Vt()){const i=zo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=Wh();return o.forEach((h,m)=>{c=c.insert(h,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=zo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Vt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=Ns();const c=of(),h=function(){return of()}();return t.forEach((m,g)=>{const w=r.get(g.key);i.has(g.key)&&(w===void 0||w.mutation instanceof $a)?o=o.insert(g.key,g):w!==void 0?(c.set(g.key,w.mutation.getFieldMask()),af(w.mutation,g,w.mutation.getFieldMask(),vn.now())):c.set(g.key,ds.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((g,w)=>c.set(g,w)),t.forEach((g,w)=>h.set(g,new kB(w,c.get(g)??null))),h))}recalculateAndSaveOverlays(e,t){const r=of();let i=new rr((c,h)=>c-h),o=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let w=r.get(m)||ds.empty();w=h.applyToLocalView(g,w),r.set(m,w);const E=(i.get(h.batchId)||Vt()).add(m);i=i.insert(h.batchId,E)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,w=m.value,E=kN();w.forEach(T=>{if(!o.has(T)){const R=FN(t.get(T),r.get(T));R!==null&&E.set(T,R),o=o.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ge.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return Ke.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ge.resolve(zo());let h=_f,m=o;return c.next(g=>ge.forEach(g,(w,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),o.get(w)?ge.resolve():this.remoteDocumentCache.getEntry(e,w).next(T=>{m=m.insert(w,T)}))).next(()=>this.populateOverlays(e,g,o)).next(()=>this.computeViews(e,m,g,Vt())).next(w=>({batchId:h,changes:NN(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let i=Wh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let c=Wh();return this.indexManager.getCollectionParents(e,o).next(h=>ge.forEach(h,m=>{const g=function(E,T){return new Gd(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,g,r,i).next(w=>{w.forEach((E,T)=>{c=c.insert(E,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((m,g)=>{const w=g.getKey();c.get(w)===null&&(c=c.insert(w,wr.newInvalidDocument(w)))});let h=Wh();return c.forEach((m,g)=>{const w=o.get(m);w!==void 0&&af(w.mutation,g,ds.empty(),vn.now()),sp(t,g)&&(h=h.insert(m,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Qi(i.createTime)}}(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:r3(i.bundledQuery),readTime:Qi(i.readTime)}}(t)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(){this.overlays=new rr(Ke.comparator),this.qr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=zo();return ge.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=zo(),o=t.length+1,c=new Ke(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===o&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new rr((g,w)=>g-w);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let w=o.get(g.largestBatchId);w===null&&(w=zo(),o=o.insert(g.largestBatchId,w)),w.set(g.getKey(),g)}}const h=zo(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,w)=>h.set(g,w)),!(h.size()>=i)););return ge.resolve(h)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new jv(t,r));let o=this.qr.get(t);o===void 0&&(o=Vt(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(){this.sessionToken=Br.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.Qr=new En(ii.$r),this.Ur=new En(ii.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ii(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new ii(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Ke(new fn([])),r=new ii(t,e),i=new ii(t,e+1),o=[];return this.Ur.forEachInRange([r,i],c=>{this.Gr(c),o.push(c.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ke(new fn([])),r=new ii(t,e),i=new ii(t,e+1);let o=Vt();return this.Ur.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new ii(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ii{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ke.comparator(e.key,t.key)||kt(e.Yr,t.Yr)}static Kr(e,t){return kt(e.Yr,t.Yr)||Ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new En(ii.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Fv(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this.Zr=this.Zr.add(new ii(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ge.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?jc:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ii(t,0),i=new ii(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],c=>{const h=this.Xr(c.Yr);o.push(h)}),ge.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En(kt);return t.forEach(i=>{const o=new ii(i,0),c=new ii(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],h=>{r=r.add(h.Yr)})}),ge.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ke.isDocumentKey(o)||(o=o.child(""));const c=new ii(new Ke(o),0);let h=new En(kt);return this.Zr.forEachWhile(m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===i&&(h=h.add(m.Yr)),!0)},c),ge.resolve(this.ti(h))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){dt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ge.forEach(t.mutations,i=>{const o=new ii(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new ii(t,0),i=this.Zr.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(e){this.ri=e,this.docs=function(){return new rr(Ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=Ns();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():wr.newInvalidDocument(i))}),ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ns();const c=t.path,h=new Ke(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:w}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Cv(XR(w),r)<=0||(i.has(w.key)||sp(t,w))&&(o=o.insert(w.key,w.mutableCopy()))}return ge.resolve(o)}getAllFromCollectionGroup(e,t,r,i){rt(9500)}ii(e,t){return ge.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VB(this)}getSize(e){return ge.resolve(this.size)}}class VB extends h3{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e){this.persistence=e,this.si=new Ga(t=>Jc(t),rp),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new Gv,this.targetCount=0,this.ai=nu.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Pr(t),ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((c,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ge.waitFor(o).next(()=>i)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),ge.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ys(0),this.li=!1,this.li=!0,this.hi=new OB,this.referenceDelegate=e(this),this.Pi=new FB(this),this.indexManager=new EB,this.remoteDocumentCache=function(i){return new LB(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new t3(t),this.Ii=new PB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new DB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new MB(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new BB(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return ge.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class BB extends QR{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Ri=new Gv,this.Vi=null}static mi(e){return new Tg(e)}get fi(){if(this.Vi)return this.Vi;throw rt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,r=>{const i=Ke.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,yt.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class k0{constructor(e,t){this.persistence=e,this.pi=new Ga(r=>Li(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=d3(this,t)}static mi(e,t){return new k0(e,t)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ge.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ge.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,c=>this.br(e,c,t).next(h=>{h||(r++,o.removeEntry(c,yt.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qm(e.data.value)),t}br(e,t,r){return ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ge.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e){this.serializer=e}k(e,t,r,i){const o=new hg("createOrUpgrade",t);r<1&&i>=1&&(function(m){m.createObjectStore(np)}(e),function(m){m.createObjectStore(If,{keyPath:QV}),m.createObjectStore(go,{keyPath:SI,autoIncrement:!0}).createIndex(Mc,RI,{unique:!0}),m.createObjectStore(bd)}(e),xA(e),function(m){m.createObjectStore(Sc)}(e));let c=ge.resolve();return r<3&&i>=3&&(r!==0&&(function(m){m.deleteObjectStore(Ad),m.deleteObjectStore(Id),m.deleteObjectStore(Uc)}(e),xA(e)),c=c.next(()=>function(m){const g=m.store(Uc),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return g.put(E0,w)}(o))),r<4&&i>=4&&(r!==0&&(c=c.next(()=>function(m,g){return g.store(go).J().next(E=>{m.deleteObjectStore(go),m.createObjectStore(go,{keyPath:SI,autoIncrement:!0}).createIndex(Mc,RI,{unique:!0});const T=g.store(go),R=E.map(M=>T.put(M));return ge.waitFor(R)})}(e,o))),c=c.next(()=>{(function(m){m.createObjectStore(Td,{keyPath:oF})})(e)})),r<5&&i>=5&&(c=c.next(()=>this.yi(o))),r<6&&i>=6&&(c=c.next(()=>(function(m){m.createObjectStore(Af)}(e),this.wi(o)))),r<7&&i>=7&&(c=c.next(()=>this.Si(o))),r<8&&i>=8&&(c=c.next(()=>this.bi(e,o))),r<9&&i>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(c=c.next(()=>this.Di(o))),r<11&&i>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(pg,{keyPath:aF})})(e),function(m){m.createObjectStore(mg,{keyPath:lF})}(e)})),r<12&&i>=12&&(c=c.next(()=>{(function(m){const g=m.createObjectStore(gg,{keyPath:mF});g.createIndex(Gx,gF,{unique:!1}),g.createIndex(iN,yF,{unique:!1})})(e)})),r<13&&i>=13&&(c=c.next(()=>function(m){const g=m.createObjectStore(_0,{keyPath:JV});g.createIndex(Gm,eF),g.createIndex(eN,tF)}(e)).next(()=>this.Ci(e,o)).next(()=>e.deleteObjectStore(Sc))),r<14&&i>=14&&(c=c.next(()=>this.Fi(e,o))),r<15&&i>=15&&(c=c.next(()=>function(m){m.createObjectStore(Nv,{keyPath:cF,autoIncrement:!0}).createIndex(Hx,uF,{unique:!1}),m.createObjectStore(tf,{keyPath:dF}).createIndex(nN,hF,{unique:!1}),m.createObjectStore(nf,{keyPath:fF}).createIndex(rN,pF,{unique:!1})}(e))),r<16&&i>=16&&(c=c.next(()=>{t.objectStore(tf).clear()}).next(()=>{t.objectStore(nf).clear()})),r<17&&i>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(kv,{keyPath:xF})})(e)})),r<18&&i>=18&&QS()&&(c=c.next(()=>{t.objectStore(tf).clear()}).next(()=>{t.objectStore(nf).clear()})),c}wi(e){let t=0;return e.store(Sc).ee((r,i)=>{t+=N0(i)}).next(()=>{const r={byteSize:t};return e.store(Af).put(Wx,r)})}yi(e){const t=e.store(If),r=e.store(go);return t.J().next(i=>ge.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,jc],[o.userId,o.lastAcknowledgedBatchId]);return r.J(Mc,c).next(h=>ge.forEach(h,m=>{dt(m.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Pc(this.serializer,m);return a3(e,o.userId,g).next(()=>{})}))}))}Si(e){const t=e.store(Ad),r=e.store(Sc);return e.store(Uc).get(E0).next(i=>{const o=[];return r.ee((c,h)=>{const m=new fn(c),g=function(E){return[0,Li(E)]}(m);o.push(t.get(g).next(w=>w?ge.resolve():(E=>t.put({targetId:0,path:Li(E),sequenceNumber:i.highestListenSequenceNumber}))(m)))}).next(()=>ge.waitFor(o))})}bi(e,t){e.createObjectStore(Tf,{keyPath:sF});const r=t.store(Tf),i=new Hv,o=c=>{if(i.add(c)){const h=c.lastSegment(),m=c.popLast();return r.put({collectionId:h,parent:Li(m)})}};return t.store(Sc).ee({X:!0},(c,h)=>{const m=new fn(c);return o(m.popLast())}).next(()=>t.store(bd).ee({X:!0},([c,h,m],g)=>{const w=Uo(h);return o(w.popLast())}))}Di(e){const t=e.store(Id);return t.ee((r,i)=>{const o=Gh(i),c=n3(this.serializer,o);return t.put(c)})}Ci(e,t){const r=t.store(Sc),i=[];return r.ee((o,c)=>{const h=t.store(_0),m=function(E){return E.document?new Ke(fn.fromString(E.document.name).popFirst(5)):E.noDocument?Ke.fromSegments(E.noDocument.path):E.unknownDocument?Ke.fromSegments(E.unknownDocument.path):rt(36783)}(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(g))}).next(()=>ge.waitFor(i))}Fi(e,t){const r=t.store(go),i=f3(this.serializer),o=new $v(Tg.mi,this.serializer.yt);return r.J().next(c=>{const h=new Map;return c.forEach(m=>{let g=h.get(m.userId)??Vt();Pc(this.serializer,m).keys().forEach(w=>g=g.add(w)),h.set(m.userId,g)}),ge.forEach(h,(m,g)=>{const w=new gi(g),E=Ig.wt(this.serializer,w),T=o.getIndexManager(w),R=Ag.wt(w,this.serializer,T,o.referenceDelegate);return new p3(i,R,E,T).recalculateAndSaveOverlaysForDocumentKeys(new $x(t,Ys.ce),m).next()})})}}function xA(n){n.createObjectStore(Ad,{keyPath:rF}).createIndex(Rv,iF,{unique:!0}),n.createObjectStore(Id,{keyPath:"targetId"}).createIndex(tN,nF,{unique:!0}),n.createObjectStore(Uc)}const vl="IndexedDbPersistence",Fy=18e5,By=5e3,jy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UB="main";class qv{constructor(e,t,r,i,o,c,h,m,g,w,E=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=o,this.window=c,this.document=h,this.xi=g,this.Oi=w,this.Ni=E,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!qv.v())throw new qe(Ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SB(this,i),this.$i=t+UB,this.serializer=new t3(m),this.Ui=new Ll(this.$i,this.Ni,new jB(this.serializer)),this.hi=new gB,this.Pi=new IB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=f3(this.serializer),this.Ii=new mB,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,w===!1&&qi(vl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,jy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Ys(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Zl(e))return Be(vl,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be(vl,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Oh(e).get(Wu).next(t=>ge.resolve(this.es(t)))}ts(e){return xm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Fy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Xr(t,Td);return r.J().next(i=>{const o=this.ss(i,Fy),c=i.filter(h=>o.indexOf(h)===-1);return ge.forEach(c,h=>r.delete(h.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ge.resolve(!0):Oh(e).get(Wu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,By)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new qe(Ce.FAILED_PRECONDITION,jy);return!1}}return!(!this.networkEnabled||!this.inForeground)||xm(e).J().next(r=>this.ss(r,By).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(o||c&&h)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Be(vl,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[np,Td],e=>{const t=new $x(e,Ys.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>xm(e).J().next(t=>this.ss(t,Fy).map(r=>r.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Ag.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new bB(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Ig.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Be(vl,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=function(m){return m===18?_F:m===17?lN:m===16?vF:m===15?Pv:m===14?aN:m===13?oN:m===12?wF:m===11?sN:void rt(60245)}(this.Ni);let c;return this.Ui.runTransaction(e,i,o,h=>(c=new $x(h,this.ci?this.ci.next():Ys.ce),t==="readwrite-primary"?this.Hi(c).next(m=>!!m||this.Yi(c)).next(m=>{if(!m)throw qi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new qe(Ce.FAILED_PRECONDITION,YR);return r(c)}).next(m=>this.Xi(c).next(()=>m)):this.Is(c).next(()=>r(c)))).then(h=>(c.raiseOnCommittedEvent(),h))}Is(e){return Oh(e).get(Wu).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,By)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(Ce.FAILED_PRECONDITION,jy)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oh(e).put(Wu,t)}static v(){return Ll.v()}Zi(e){const t=Oh(e);return t.get(Wu).next(r=>this.es(r)?(Be(vl,"Releasing primary lease."),t.delete(Wu)):ge.resolve())}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(qi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;YS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Be(vl,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qi(vl,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){qi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oh(n){return Xr(n,np)}function xm(n){return Xr(n,Td)}function zB(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Vt(),i=Vt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Kv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return YS()?8:ZR(Kr())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new WB;return this.Ss(e,t,c).next(h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ed()<=Xt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(ed()<=Xt.DEBUG&&Be("QueryEngine","Query:",td(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ed()<=Xt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zs(t))):ge.resolve())}ys(e,t){if(zI(t))return ge.resolve(null);let r=Zs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Jx(t,null,"F"),r=Zs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=Vt(...o);return this.ps.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const g=this.Ds(t,h);return this.Cs(t,g,c,m.readTime)?this.ys(e,Jx(t,null,"F")):this.vs(e,g,t,m)}))})))}ws(e,t,r,i){return zI(t)||i.isEqual(yt.min())?ge.resolve(null):this.ps.getDocuments(e,r).next(o=>{const c=this.Ds(t,o);return this.Cs(t,c,r,i)?ge.resolve(null):(ed()<=Xt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),td(t)),this.vs(e,c,t,HV(i,_f)).next(h=>h))})}Ds(e,t){let r=new En(SN(e));return t.forEach((i,o)=>{sp(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ed()<=Xt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",td(t)),this.ps.getDocumentsMatchingQuery(e,t,Ms.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="LocalStore",HB=3e8;class GB{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new rr(kt),this.xs=new Ga(o=>Jc(o),rp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function g3(n,e,t,r){return new GB(n,e,t,r)}async function y3(n,e){const t=Pt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let m=Vt();for(const g of i){c.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}for(const g of o){h.push(g.batchId);for(const w of g.mutations)m=m.add(w.key)}return t.localDocuments.getDocuments(r,m).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:h}))})})}function $B(n,e){const t=Pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(h,m,g,w){const E=g.batch,T=E.keys();let R=ge.resolve();return T.forEach(M=>{R=R.next(()=>w.getEntry(m,M)).next(D=>{const L=g.docVersions.get(M);dt(L!==null,48541),D.version.compareTo(L)<0&&(E.applyToRemoteDocument(D,g),D.isValidDocument()&&(D.setReadTime(g.commitVersion),w.addEntry(D)))})}),R.next(()=>h.mutationQueue.removeMutationBatch(m,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let m=Vt();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function x3(n){const e=Pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function qB(n,e){const t=Pt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((w,E)=>{const T=i.get(E);if(!T)return;h.push(t.Pi.removeMatchingKeys(o,w.removedDocuments,E).next(()=>t.Pi.addMatchingKeys(o,w.addedDocuments,E)));let R=T.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(Br.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):w.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(w.resumeToken,r)),i=i.insert(E,R),function(D,L,G){return D.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=HB?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(T,R,w)&&h.push(t.Pi.updateTargetData(o,R))});let m=Ns(),g=Vt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,w))}),h.push(KB(o,c,e.documentUpdates).next(w=>{m=w.ks,g=w.qs})),!r.isEqual(yt.min())){const w=t.Pi.getLastRemoteSnapshotVersion(o).next(E=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(w)}return ge.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,m,g)).next(()=>m)}).then(o=>(t.Ms=i,o))}function KB(n,e,t){let r=Vt(),i=Vt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=Ns();return t.forEach((h,m)=>{const g=o.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(h,m.readTime),c=c.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(h,m)):Be(Xv,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)}),{ks:c,qs:i}})}function XB(n,e){const t=Pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jc),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YB(n,e){const t=Pt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,ge.resolve(i)):t.Pi.allocateTargetId(r).next(c=>(i=new Ca(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function aw(n,e,t){const r=Pt(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i))}catch(c){if(!Zl(c))throw c;Be(Xv,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function wA(n,e,t){const r=Pt(n);let i=yt.min(),o=Vt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,w){const E=Pt(m),T=E.xs.get(w);return T!==void 0?ge.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,w)}(r,c,Zs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,h.targetId).next(m=>{o=m})}).next(()=>r.Fs.getDocumentsMatchingQuery(c,e,t?i:yt.min(),t?o:Vt())).next(h=>(QB(r,LF(e),h),{documents:h,Qs:o})))}function QB(n,e,t){let r=n.Os.get(e)||yt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class vA{constructor(){this.activeTargetIds=zF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w3{constructor(){this.Mo=new vA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="ConnectivityMonitor";class EA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Be(_A,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Be(_A,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm=null;function lw(){return wm===null?wm=function(){return 268435456+Math.round(2147483648*Math.random())}():wm++,"0x"+wm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="RestConnection",JB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ej{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===b0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const c=lw(),h=this.zo(e,t.toUriEncodedString());Be(Uy,`Sending RPC '${e}' ${c}:`,h,r);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,i,o);const{host:g}=new URL(h),w=Xl(g);return this.Jo(e,h,m,r,w).then(E=>(Be(Uy,`Received RPC '${e}' ${c}: `,E),E),E=>{throw Qc(Uy,`RPC '${e}' ${c} failed with error: `,E,"url: ",h,"request:",r),E})}Ho(e,t,r,i,o,c){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=JB[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="WebChannelConnection";class nj extends ej{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const c=lw();return new Promise((h,m)=>{const g=new BR;g.setWithCredentials(!0),g.listenOnce(jR.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case zm.NO_ERROR:const E=g.getResponseJson();Be(Pi,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),h(E);break;case zm.TIMEOUT:Be(Pi,`RPC '${e}' ${c} timed out`),m(new qe(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case zm.HTTP_ERROR:const T=g.getStatus();if(Be(Pi,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const M=R==null?void 0:R.error;if(M&&M.status&&M.message){const D=function(G){const z=G.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(z)>=0?z:Ce.UNKNOWN}(M.status);m(new qe(D,M.message))}else m(new qe(Ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new qe(Ce.UNAVAILABLE,"Connection failed."));break;default:rt(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Be(Pi,`RPC '${e}' ${c} completed.`)}});const w=JSON.stringify(i);Be(Pi,`RPC '${e}' ${c} sending request:`,i),g.send(t,"POST",w,r,15)})}T_(e,t,r){const i=lw(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=WR(),h=zR(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Be(Pi,`Creating RPC '${e}' stream ${i}: ${w}`,m);const E=c.createWebChannel(w,m);this.I_(E);let T=!1,R=!1;const M=new tj({Yo:L=>{R?Be(Pi,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(T||(Be(Pi,`Opening RPC '${e}' stream ${i} transport.`),E.open(),T=!0),Be(Pi,`RPC '${e}' stream ${i} sending:`,L),E.send(L))},Zo:()=>E.close()}),D=(L,G,z)=>{L.listen(G,W=>{try{z(W)}catch(Y){setTimeout(()=>{throw Y},0)}})};return D(E,zh.EventType.OPEN,()=>{R||(Be(Pi,`RPC '${e}' stream ${i} transport opened.`),M.o_())}),D(E,zh.EventType.CLOSE,()=>{R||(R=!0,Be(Pi,`RPC '${e}' stream ${i} transport closed`),M.a_(),this.E_(E))}),D(E,zh.EventType.ERROR,L=>{R||(R=!0,Qc(Pi,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),M.a_(new qe(Ce.UNAVAILABLE,"The operation could not be completed")))}),D(E,zh.EventType.MESSAGE,L=>{var G;if(!R){const z=L.data[0];dt(!!z,16349);const W=z,Y=(W==null?void 0:W.error)||((G=W[0])==null?void 0:G.error);if(Y){Be(Pi,`RPC '${e}' stream ${i} received error:`,Y);const Z=Y.status;let ie=function(H){const ee=Mr[H];if(ee!==void 0)return UN(ee)}(Z),F=Y.message;ie===void 0&&(ie=Ce.INTERNAL,F="Unknown error status: "+Z+" with message "+Y.message),R=!0,M.a_(new qe(ie,F)),E.close()}else Be(Pi,`RPC '${e}' stream ${i} received:`,z),M.u_(z)}}),D(h,UR.STAT_EVENT,L=>{L.stat===jx.PROXY?Be(Pi,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===jx.NOPROXY&&Be(Pi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(){return typeof window<"u"?window:null}function Zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n){return new iB(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="PersistentStream";class _3{constructor(e,t,r,i,o,c,h,m){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new v3(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ce.RESOURCE_EXHAUSTED?(qi(t.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new qe(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Be(bA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Be(bA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ij extends _3{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aB(this.serializer,e),r=function(o){if(!("targetChange"in o))return yt.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?yt.min():c.readTime?Qi(c.readTime):yt.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=nw(this.serializer),t.addTarget=function(o,c){let h;const m=c.target;if(h=I0(m)?{documents:XN(o,m)}:{query:YN(o,m).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=HN(o,c.resumeToken);const g=ew(o,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(yt.min())>0){h.readTime=Od(o,c.snapshotVersion.toTimestamp());const g=ew(o,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const r=cB(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=nw(this.serializer),t.removeTarget=e,this.q_(t)}}class sj extends _3{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lB(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=nw(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>C0(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{}class aj extends oj{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Go(e,tw(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(Ce.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Ho(e,tw(t,r),i,c,h,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new qe(Ce.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class lj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qi(t),this.aa=!1):Be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="RemoteStore";class cj{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(c=>{r.enqueueAndForget(async()=>{yu(this)&&(Be(ru,"Restarting streams for network reachability change."),await async function(m){const g=Pt(m);g.Ea.add(4),await ap(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Sg(g)}(this))})}),this.Ra=new lj(r,i)}}async function Sg(n){if(yu(n))for(const e of n.da)await e(!0)}async function ap(n){for(const e of n.da)await e(!1)}function E3(n,e){const t=Pt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jv(t)?Zv(t):qd(t).O_()&&Qv(t,e))}function Yv(n,e){const t=Pt(n),r=qd(t);t.Ia.delete(e),r.O_()&&b3(t,e),t.Ia.size===0&&(r.O_()?r.L_():yu(t)&&t.Ra.set("Unknown"))}function Qv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qd(n).Y_(e)}function b3(n,e){n.Va.Ue(e),qd(n).Z_(e)}function Zv(n){n.Va=new eB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),qd(n).start(),n.Ra.ua()}function Jv(n){return yu(n)&&!qd(n).x_()&&n.Ia.size>0}function yu(n){return Pt(n).Ea.size===0}function I3(n){n.Va=void 0}async function uj(n){n.Ra.set("Online")}async function dj(n){n.Ia.forEach((e,t)=>{Qv(n,e)})}async function hj(n,e){I3(n),Jv(n)?(n.Ra.ha(e),Zv(n)):n.Ra.set("Unknown")}async function fj(n,e,t){if(n.Ra.set("Online"),e instanceof WN&&e.state===2&&e.cause)try{await async function(i,o){const c=o.cause;for(const h of o.targetIds)i.Ia.has(h)&&(await i.remoteSyncer.rejectListen(h,c),i.Ia.delete(h),i.Va.removeTarget(h))}(n,e)}catch(r){Be(ru,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await P0(n,r)}else if(e instanceof Ym?n.Va.Ze(e):e instanceof zN?n.Va.st(e):n.Va.tt(e),!t.isEqual(yt.min()))try{const r=await x3(n.localStore);t.compareTo(r)>=0&&await function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const w=o.Ia.get(g);w&&o.Ia.set(g,w.withResumeToken(m.resumeToken,c))}}),h.targetMismatches.forEach((m,g)=>{const w=o.Ia.get(m);if(!w)return;o.Ia.set(m,w.withResumeToken(Br.EMPTY_BYTE_STRING,w.snapshotVersion)),b3(o,m);const E=new Ca(w.target,m,g,w.sequenceNumber);Qv(o,E)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){Be(ru,"Failed to raise snapshot:",r),await P0(n,r)}}async function P0(n,e,t){if(!Zl(e))throw e;n.Ea.add(1),await ap(n),n.Ra.set("Offline"),t||(t=()=>x3(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Be(ru,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sg(n)})}function A3(n,e){return e().catch(t=>P0(n,t,e))}async function lp(n){const e=Pt(n),t=zl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jc;for(;pj(e);)try{const i=await XB(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,mj(e,i)}catch(i){await P0(e,i)}T3(e)&&C3(e)}function pj(n){return yu(n)&&n.Ta.length<10}function mj(n,e){n.Ta.push(e);const t=zl(n);t.O_()&&t.X_&&t.ea(e.mutations)}function T3(n){return yu(n)&&!zl(n).x_()&&n.Ta.length>0}function C3(n){zl(n).start()}async function gj(n){zl(n).ra()}async function yj(n){const e=zl(n);for(const t of n.Ta)e.ea(t.mutations)}async function xj(n,e,t){const r=n.Ta.shift(),i=Bv.from(r,e,t);await A3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await lp(n)}async function wj(n,e){e&&zl(n).X_&&await async function(r,i){if(function(c){return QF(c)&&c!==Ce.ABORTED}(i.code)){const o=r.Ta.shift();zl(r).B_(),await A3(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await lp(r)}}(n,e),T3(n)&&C3(n)}async function IA(n,e){const t=Pt(n);t.asyncQueue.verifyOperationInProgress(),Be(ru,"RemoteStore received new credentials");const r=yu(t);t.Ea.add(3),await ap(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sg(t)}async function vj(n,e){const t=Pt(n);e?(t.Ea.delete(2),await Sg(t)):e||(t.Ea.add(2),await ap(t),t.Ra.set("Unknown"))}function qd(n){return n.ma||(n.ma=function(t,r,i){const o=Pt(t);return o.sa(),new ij(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:uj.bind(null,n),t_:dj.bind(null,n),r_:hj.bind(null,n),H_:fj.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Jv(n)?Zv(n):n.Ra.set("Unknown")):(await n.ma.stop(),I3(n))})),n.ma}function zl(n){return n.fa||(n.fa=function(t,r,i){const o=Pt(t);return o.sa(),new sj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:gj.bind(null,n),r_:wj.bind(null,n),ta:yj.bind(null,n),na:xj.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await lp(n)):(await n.fa.stop(),n.Ta.length>0&&(Be(ru,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new e2(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function t2(n,e){if(qi("AsyncQueue",`${e}: ${n}`),Zl(n))return new qe(Ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{static emptySet(e){return new md(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=Wh(),this.sortedSet=new rr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof md)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new md;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.ga=new rr(Ke.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):rt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class Md{constructor(e,t,r,i,o,c,h,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,i,o){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new Md(e,t,md.emptySet(t),c,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ej{constructor(){this.queries=TA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Pt(t),o=i.queries;i.queries=TA(),o.forEach((c,h)=>{for(const m of h.Sa)m.onError(r)})})(this,new qe(Ce.ABORTED,"Firestore shutting down"))}}function TA(){return new Ga(n=>CN(n),wg)}async function n2(n,e){const t=Pt(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new _j,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const h=t2(c,`Initialization of query '${td(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&i2(t)}async function r2(n,e){const t=Pt(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function bj(n,e){const t=Pt(n);let r=!1;for(const i of e){const o=i.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(i)&&(r=!0);c.wa=i}}r&&i2(t)}function Ij(n,e,t){const r=Pt(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function i2(n){n.Ca.forEach(e=>{e.next()})}var cw,CA;(CA=cw||(cw={})).Ma="default",CA.Cache="cache";class s2{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Md(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.key=e}}class R3{constructor(e){this.key=e}}class Aj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=SN(e),this.tu=new md(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new AA,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const m=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,g=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,E)=>{const T=i.get(w),R=sp(this.query,E)?E:null,M=!!T&&this.mutatedKeys.has(T.key),D=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;T&&R?T.data.isEqual(R.data)?M!==D&&(r.track({type:3,doc:R}),L=!0):this.su(T,R)||(r.track({type:2,doc:R}),L=!0,(m&&this.eu(R,m)>0||g&&this.eu(R,g)<0)&&(h=!0)):!T&&R?(r.track({type:0,doc:R}),L=!0):T&&!R&&(r.track({type:1,doc:T}),L=!0,(m||g)&&(h=!0)),L&&(R?(c=c.add(R),o=D?o.add(w):o.delete(w)):(c=c.delete(w),o=o.delete(w)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),o=o.delete(w.key),r.track({type:1,doc:w})}return{tu:c,iu:r,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((w,E)=>function(R,M){const D=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt(20277,{Rt:L})}};return D(R)-D(M)}(w.type,E.type)||this.eu(w.doc,E.doc)),this.ou(r),i=i??!1;const h=t&&!i?this._u():[],m=this.Xa.size===0&&this.current&&!i?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Md(this.query,e.tu,o,c,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new R3(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new S3(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Vt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Md.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const o2="SyncEngine";class Tj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Cj{constructor(e){this.key=e,this.hu=!1}}class Sj{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ga(h=>CN(h),wg),this.Iu=new Map,this.Eu=new Set,this.du=new rr(Ke.comparator),this.Au=new Map,this.Ru=new Gv,this.Vu={},this.mu=new Map,this.fu=nu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Rj(n,e,t=!0){const r=M3(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await N3(r,e,t,!0),i}async function Nj(n,e){const t=M3(n);await N3(t,e,!0,!1)}async function N3(n,e,t,r){const i=await YB(n.localStore,Zs(e)),o=i.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return r&&(h=await kj(n,e,o,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&E3(n.remoteStore,i),h}async function kj(n,e,t,r,i){n.pu=(E,T,R)=>async function(D,L,G,z){let W=L.view.ru(G);W.Cs&&(W=await wA(D.localStore,L.query,!1).then(({documents:F})=>L.view.ru(F,W)));const Y=z&&z.targetChanges.get(L.targetId),Z=z&&z.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(W,D.isPrimaryClient,Y,Z);return RA(D,L.targetId,ie.au),ie.snapshot}(n,E,T,R);const o=await wA(n.localStore,e,!0),c=new Aj(e,o.Qs),h=c.ru(o.documents),m=op.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),g=c.applyChanges(h,n.isPrimaryClient,m);RA(n,t,g.au);const w=new Tj(e,t,c);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function Pj(n,e,t){const r=Pt(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(c=>!wg(c,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await aw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Yv(r.remoteStore,i.targetId),uw(r,i.targetId)}).catch(gu)):(uw(r,i.targetId),await aw(r.localStore,i.targetId,!0))}async function Dj(n,e){const t=Pt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yv(t.remoteStore,r.targetId))}async function Oj(n,e,t){const r=L3(n);try{const i=await function(c,h){const m=Pt(c),g=vn.now(),w=h.reduce((R,M)=>R.add(M.key),Vt());let E,T;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>{let M=Ns(),D=Vt();return m.Ns.getEntries(R,w).next(L=>{M=L,M.forEach((G,z)=>{z.isValidDocument()||(D=D.add(G))})}).next(()=>m.localDocuments.getOverlayedDocuments(R,M)).next(L=>{E=L;const G=[];for(const z of h){const W=XF(z,E.get(z.key).overlayedDocument);W!=null&&G.push(new $a(z.key,W,xN(W.value.mapValue),Ki.exists(!0)))}return m.mutationQueue.addMutationBatch(R,g,G,h)}).next(L=>{T=L;const G=L.applyToLocalDocumentSet(E,D);return m.documentOverlayCache.saveOverlays(R,L.batchId,G)})}).then(()=>({batchId:T.batchId,changes:NN(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,h,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new rr(kt)),g=g.insert(h,m),c.Vu[c.currentUser.toKey()]=g}(r,i.batchId,t),await cp(r,i.changes),await lp(r.remoteStore)}catch(i){const o=t2(i,"Failed to persist write");t.reject(o)}}async function k3(n,e){const t=Pt(n);try{const r=await qB(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.Au.get(o);c&&(dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?dt(c.hu,14607):i.removedDocuments.size>0&&(dt(c.hu,42227),c.hu=!1))}),await cp(t,r,e)}catch(r){await gu(r)}}function SA(n,e,t){const r=Pt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,c)=>{const h=c.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(c,h){const m=Pt(c);m.onlineState=h;let g=!1;m.queries.forEach((w,E)=>{for(const T of E.Sa)T.va(h)&&(g=!0)}),g&&i2(m)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mj(n,e,t){const r=Pt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let c=new rr(Ke.comparator);c=c.insert(o,wr.newNoDocument(o,yt.min()));const h=Vt().add(o),m=new bg(yt.min(),new Map,new rr(kt),c,h);await k3(r,m),r.du=r.du.remove(o),r.Au.delete(e),a2(r)}else await aw(r.localStore,e,!1).then(()=>uw(r,e,t)).catch(gu)}async function Lj(n,e){const t=Pt(n),r=e.batch.batchId;try{const i=await $B(t.localStore,e);D3(t,r,null),P3(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await cp(t,i)}catch(i){await gu(i)}}async function Vj(n,e,t){const r=Pt(n);try{const i=await function(c,h){const m=Pt(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let w;return m.mutationQueue.lookupMutationBatch(g,h).next(E=>(dt(E!==null,37113),w=E.keys(),m.mutationQueue.removeMutationBatch(g,E))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,w,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,w)).next(()=>m.localDocuments.getDocuments(g,w))})}(r.localStore,e);D3(r,e,t),P3(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await cp(r,i)}catch(i){await gu(i)}}function P3(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function D3(n,e,t){const r=Pt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function uw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||O3(n,r)})}function O3(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),a2(n))}function RA(n,e,t){for(const r of t)r instanceof S3?(n.Ru.addReference(r.key,e),Fj(n,r)):r instanceof R3?(Be(o2,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||O3(n,r.key)):rt(19791,{wu:r})}function Fj(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Be(o2,"New document in limbo: "+t),n.Eu.add(r),a2(n))}function a2(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ke(fn.fromString(e)),r=n.fu.next();n.Au.set(r,new Cj(t)),n.du=n.du.insert(t,r),E3(n.remoteStore,new Ca(Zs(ip(t.path)),r,"TargetPurposeLimboResolution",Ys.ce))}}async function cp(n,e,t){const r=Pt(n),i=[],o=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach((h,m)=>{c.push(r.pu(m,e,t).then(g=>{var w;if((g||t)&&r.isPrimaryClient){const E=g?!g.fromCache:(w=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:w.current;r.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){i.push(g);const E=Kv.As(m.targetId,g);o.push(E)}}))}),await Promise.all(c),r.Pu.H_(i),await async function(m,g){const w=Pt(m);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ge.forEach(g,T=>ge.forEach(T.Es,R=>w.persistence.referenceDelegate.addReference(E,T.targetId,R)).next(()=>ge.forEach(T.ds,R=>w.persistence.referenceDelegate.removeReference(E,T.targetId,R)))))}catch(E){if(!Zl(E))throw E;Be(Xv,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const R=w.Ms.get(T),M=R.snapshotVersion,D=R.withLastLimboFreeSnapshotVersion(M);w.Ms=w.Ms.insert(T,D)}}}(r.localStore,o))}async function Bj(n,e){const t=Pt(n);if(!t.currentUser.isEqual(e)){Be(o2,"User change. New user:",e.toKey());const r=await y3(t.localStore,e);t.currentUser=e,function(o,c){o.mu.forEach(h=>{h.forEach(m=>{m.reject(new qe(Ce.CANCELLED,c))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cp(t,r.Ls)}}function jj(n,e){const t=Pt(n),r=t.Au.get(e);if(r&&r.hu)return Vt().add(r.key);{let i=Vt();const o=t.Iu.get(e);if(!o)return i;for(const c of o){const h=t.Tu.get(c);i=i.unionWith(h.view.nu)}return i}}function M3(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=k3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mj.bind(null,e),e.Pu.H_=bj.bind(null,e.eventManager),e.Pu.yu=Ij.bind(null,e.eventManager),e}function L3(n){const e=Pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vj.bind(null,e),e}class Df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cg(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return g3(this.persistence,new m3,e.initialUser,this.serializer)}Cu(e){return new $v(Tg.mi,this.serializer)}Du(e){return new w3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Df.provider={build:()=>new Df};class Uj extends Df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof k0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new u3(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new $v(r=>k0.mi(r,t),this.serializer)}}class zj extends Df{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await L3(this.xu.syncEngine),await lp(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return g3(this.persistence,new m3,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new u3(r,e.asyncQueue,t)}Mu(e,t){const r=new KV(t,this.persistence);return new qV(e.asyncQueue,r)}Cu(e){const t=zB(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new qv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rj(),Zm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new w3}}class D0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>SA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bj.bind(null,this.syncEngine),await vj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ej}()}createDatastore(e){const t=Cg(e.databaseInfo.databaseId),r=function(o){return new nj(o)}(e.databaseInfo);return function(o,c,h,m){return new aj(o,c,h,m)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,c,h){return new cj(r,i,o,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>SA(this.syncEngine,t,0),function(){return EA.v()?new EA:new ZB}())}createSyncEngine(e,t){return function(i,o,c,h,m,g,w){const E=new Sj(i,o,c,h,m,g);return w&&(E.gu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Pt(i);Be(ru,"RemoteStore shutting down."),o.Ea.add(5),await ap(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}D0.provider={build:()=>new D0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl="FirestoreClient";class Wj{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gi.UNAUTHENTICATED,this.clientId=Tv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{Be(Wl,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(Be(Wl,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=t2(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zy(n,e){n.asyncQueue.verifyOperationInProgress(),Be(Wl,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await y3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function NA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Hj(n);Be(Wl,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>IA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>IA(e.remoteStore,i)),n._onlineComponents=e}async function Hj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be(Wl,"Using user provided OfflineComponentProvider");try{await zy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qc("Error using user provided cache. Falling back to memory cache: "+t),await zy(n,new Df)}}else Be(Wl,"Using default OfflineComponentProvider"),await zy(n,new Uj(void 0));return n._offlineComponents}async function V3(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be(Wl,"Using user provided OnlineComponentProvider"),await NA(n,n._uninitializedComponentsProvider._online)):(Be(Wl,"Using default OnlineComponentProvider"),await NA(n,new D0))),n._onlineComponents}function Gj(n){return V3(n).then(e=>e.syncEngine)}async function O0(n){const e=await V3(n),t=e.eventManager;return t.onListen=Rj.bind(null,e.syncEngine),t.onUnlisten=Pj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Nj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Dj.bind(null,e.syncEngine),t}function $j(n,e,t={}){const r=new qo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,m,g){const w=new l2({next:T=>{w.Nu(),c.enqueueAndForget(()=>r2(o,E));const R=T.docs.has(h);!R&&T.fromCache?g.reject(new qe(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&m&&m.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new s2(ip(h.path),w,{includeMetadataChanges:!0,qa:!0});return n2(o,E)}(await O0(n),n.asyncQueue,e,t,r)),r.promise}function qj(n,e,t={}){const r=new qo;return n.asyncQueue.enqueueAndForget(async()=>function(o,c,h,m,g){const w=new l2({next:T=>{w.Nu(),c.enqueueAndForget(()=>r2(o,E)),T.fromCache&&m.source==="server"?g.reject(new qe(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new s2(h,w,{includeMetadataChanges:!0,qa:!0});return n2(o,E)}(await O0(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="firestore.googleapis.com",PA=!0;class DA{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=B3,this.ssl=PA}else this.host=e.host,this.ssl=e.ssl??PA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AB)throw new qe(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F3(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new qe(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new DV;switch(r.type){case"firstParty":return new VV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=kA.get(t);r&&(Be("ComponentProvider","Removing Datastore"),kA.delete(t),r.terminate())}(this),Promise.resolve()}}function Kj(n,e,t,r={}){var g;n=Ps(n,Rg);const i=Xl(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;i&&(fv(`https://${h}`),pv("Firestore",!0)),o.host!==B3&&o.host!==h&&Qc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...o,host:h,ssl:i,emulatorOptions:r};if(!Bl(m,c)&&(n._setSettings(m),r.mockUserToken)){let w,E;if(typeof r.mockUserToken=="string")w=r.mockUserToken,E=gi.MOCK_USER;else{w=qS(r.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new qe(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new gi(T)}n._authCredentials=new OV(new GR(w,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ec(this.firestore,e,this._query)}}class Pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pr(this.firestore,e,this._key)}toJSON(){return{type:Pr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(tp(t,Pr._jsonSchema))return new Pr(e,r||null,new Ke(fn.fromString(t.referencePath)))}}Pr._jsonSchemaVersion="firestore/documentReference/1.0",Pr._jsonSchema={type:Fr("string",Pr._jsonSchemaVersion),referencePath:Fr("string")};class Vl extends ec{constructor(e,t,r){super(e,t,ip(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pr(this.firestore,null,new Ke(e))}withConverter(e){return new Vl(this.firestore,e,this._path)}}function ps(n,e,...t){if(n=Fn(n),qR("collection","path",e),n instanceof Rg){const r=fn.fromString(e,...t);return bI(r),new Vl(n,null,r)}{if(!(n instanceof Pr||n instanceof Vl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return bI(r),new Vl(n.firestore,null,r)}}function Qs(n,e,...t){if(n=Fn(n),arguments.length===1&&(e=Tv.newId()),qR("doc","path",e),n instanceof Rg){const r=fn.fromString(e,...t);return EI(r),new Pr(n,null,new Ke(r))}{if(!(n instanceof Pr||n instanceof Vl))throw new qe(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return EI(r),new Pr(n.firestore,n instanceof Vl?n.converter:null,new Ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="AsyncQueue";class MA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new v3(this,"async_queue_retry"),this._c=()=>{const r=Zm();r&&Be(OA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Zm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Zm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new qo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zl(e))throw e;Be(OA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,qi("INTERNAL UNHANDLED ERROR: ",LA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=e2.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&rt(47125,{Pc:LA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function LA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class Va extends Rg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new MA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MA(e),this._firestoreClient=void 0,await e}}}function Xj(n,e){const t=typeof n=="object"?n:ag(),r=typeof n=="string"?n:b0,i=Yl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=HS("firestore");o&&Kj(i,...o)}return i}function Ng(n){if(n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||j3(n),n._firestoreClient}function j3(n){var r,i,o;const e=n._freezeSettings(),t=function(h,m,g,w){return new bF(h,m,g,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,F3(w.experimentalLongPollingOptions),w.useFetchStreams,w.isUsingEmulator)}(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Wj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(n._componentsProvider))}function Yj(n,e){Qc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Qj(n,D0.provider,{build:r=>new zj(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function Qj(n,e,t){if((n=Ps(n,Va))._firestoreClient||n._terminated)throw new qe(Ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new qe(Ce.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},j3(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xs(Br.fromBase64String(e))}catch(t){throw new qe(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xs(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tp(e,Xs._jsonSchema))return Xs.fromBase64String(e.bytes)}}Xs._jsonSchemaVersion="firestore/bytes/1.0",Xs._jsonSchema={type:Fr("string",Xs._jsonSchemaVersion),bytes:Fr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new qe(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ko._jsonSchemaVersion}}static fromJSON(e){if(tp(e,Ko._jsonSchema))return new Ko(e.latitude,e.longitude)}}Ko._jsonSchemaVersion="firestore/geoPoint/1.0",Ko._jsonSchema={type:Fr("string",Ko._jsonSchemaVersion),latitude:Fr("number"),longitude:Fr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tp(e,Xo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Xo(e.vectorValues);throw new qe(Ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xo._jsonSchemaVersion="firestore/vectorValue/1.0",Xo._jsonSchema={type:Fr("string",Xo._jsonSchemaVersion),vectorValues:Fr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=/^__.*__$/;class Jj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $a(e,this.data,this.fieldMask,t,this.fieldTransforms):new $d(e,this.data,t,this.fieldTransforms)}}class U3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function z3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt(40011,{Ac:n})}}class c2{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new c2({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return M0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(z3(this.Ac)&&Zj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eU{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cg(e)}Cc(e,t,r,i=!1){return new c2({Ac:e,methodName:t,Dc:r,path:lr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function u2(n){const e=n._freezeSettings(),t=Cg(n._databaseId);return new eU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tU(n,e,t,r,i,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);h2("Data must be an object, but it was:",c,r);const h=W3(r,c);let m,g;if(o.merge)m=new ds(c.fieldMask),g=c.fieldTransforms;else if(o.mergeFields){const w=[];for(const E of o.mergeFields){const T=dw(e,E,t);if(!c.contains(T))throw new qe(Ce.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);G3(w,T)||w.push(T)}m=new ds(w),g=c.fieldTransforms.filter(E=>m.covers(E.field))}else m=null,g=c.fieldTransforms;return new Jj(new Oi(h),m,g)}class Dg extends Pg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dg}}class d2 extends Pg{_toFieldTransform(e){return new VN(e.path,new kd)}isEqual(e){return e instanceof d2}}function nU(n,e,t,r){const i=n.Cc(1,e,t);h2("Data must be an object, but it was:",i,r);const o=[],c=Oi.empty();Jl(r,(m,g)=>{const w=f2(e,m,t);g=Fn(g);const E=i.yc(w);if(g instanceof Dg)o.push(w);else{const T=up(g,E);T!=null&&(o.push(w),c.set(w,T))}});const h=new ds(o);return new U3(c,h,i.fieldTransforms)}function rU(n,e,t,r,i,o){const c=n.Cc(1,e,t),h=[dw(e,r,t)],m=[i];if(o.length%2!=0)throw new qe(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<o.length;T+=2)h.push(dw(e,o[T])),m.push(o[T+1]);const g=[],w=Oi.empty();for(let T=h.length-1;T>=0;--T)if(!G3(g,h[T])){const R=h[T];let M=m[T];M=Fn(M);const D=c.yc(R);if(M instanceof Dg)g.push(R);else{const L=up(M,D);L!=null&&(g.push(R),w.set(R,L))}}const E=new ds(g);return new U3(w,E,c.fieldTransforms)}function iU(n,e,t,r=!1){return up(t,n.Cc(r?4:3,e))}function up(n,e){if(H3(n=Fn(n)))return h2("Unsupported field value:",e,n),W3(n,e);if(n instanceof Pg)return function(r,i){if(!z3(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let c=0;for(const h of r){let m=up(h,i.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vn.fromDate(r);return{timestampValue:Od(i.serializer,o)}}if(r instanceof vn){const o=new vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Od(i.serializer,o)}}if(r instanceof Ko)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xs)return{bytesValue:HN(i.serializer,r._byteString)};if(r instanceof Pr){const o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xo)return function(c,h){return{mapValue:{fields:{[Ov]:{stringValue:Mv},[Cd]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return Vv(h.serializer,g)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${dg(r)}`)}(n,e)}function W3(n,e){const t={};return cN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jl(n,(r,i)=>{const o=up(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function H3(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vn||n instanceof Ko||n instanceof Xs||n instanceof Pr||n instanceof Pg||n instanceof Xo)}function h2(n,e,t){if(!H3(t)||!KR(t)){const r=dg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function dw(n,e,t){if((e=Fn(e))instanceof kg)return e._internalPath;if(typeof e=="string")return f2(n,e);throw M0("Field path arguments must be of type string or ",n,!1,void 0,t)}const sU=new RegExp("[~\\*/\\[\\]]");function f2(n,e,t){if(e.search(sU)>=0)throw M0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kg(...e.split("."))._internalPath}catch{throw M0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function M0(n,e,t,r,i){const o=r&&!r.isEmpty(),c=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new qe(Ce.INVALID_ARGUMENT,h+n+m)}function G3(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Og("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class oU extends $3{data(){return super.data()}}function Og(n,e){return typeof e=="string"?f2(n,e):e instanceof kg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new qe(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class p2{}class K3 extends p2{}function Vr(n,e,...t){let r=[];e instanceof p2&&r.push(e),r=r.concat(t),function(o){const c=o.filter(m=>m instanceof m2).length,h=o.filter(m=>m instanceof Mg).length;if(c>1||c>0&&h>0)throw new qe(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Mg extends K3{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mg(e,t,r)}_apply(e){const t=this._parse(e);return X3(e._query,t),new ec(e.firestore,e.converter,Zx(e._query,t))}_parse(e){const t=u2(e.firestore);return function(o,c,h,m,g,w,E){let T;if(g.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){jA(E,w);const M=[];for(const D of E)M.push(BA(m,o,D));T={arrayValue:{values:M}}}else T=BA(m,o,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||jA(E,w),T=iU(h,c,E,w==="in"||w==="not-in");return Yt.create(g,w,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kr(n,e,t){const r=e,i=Og("where",n);return Mg._create(i,r,t)}class m2 extends p2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new m2(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:_n.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let c=i;const h=o.getFlattenedFilters();for(const m of h)X3(c,m),c=Zx(c,m)}(e._query,t),new ec(e.firestore,e.converter,Zx(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class g2 extends K3{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new g2(e,t)}_apply(e){const t=function(i,o,c){if(i.startAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kf(o,c)}(e._query,this._field,this._direction);return new ec(e.firestore,e.converter,function(i,o){const c=i.explicitOrderBy.concat([o]);return new Gd(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function FA(n,e="asc"){const t=e,r=Og("orderBy",n);return g2._create(r,t)}function BA(n,e,t){if(typeof(t=Fn(t))=="string"){if(t==="")throw new qe(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TN(e)&&t.indexOf("/")!==-1)throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!Ke.isDocumentKey(r))throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rf(n,new Ke(r))}if(t instanceof Pr)return Rf(n,t._key);throw new qe(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dg(t)}.`)}function jA(n,e){if(!Array.isArray(n)||n.length===0)throw new qe(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function X3(n,e){const t=function(i,o){for(const c of i)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class aU{convertValue(e,t="none"){switch(jl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(La(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Jl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var r,i,o;const t=(o=(i=(r=e.fields)==null?void 0:r[Cd].arrayValue)==null?void 0:i.values)==null?void 0:o.map(c=>tr(c.doubleValue));return new Xo(t)}convertGeoPoint(e){return new Ko(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cf(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new vn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);dt(e3(r),9688,{name:e});const i=new Zc(r.get(1),r.get(3)),o=new Ke(r.popFirst(5));return i.isEqual(t)||qi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class $h{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends $3{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Og("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wc._jsonSchema={type:Fr("string",Wc._jsonSchemaVersion),bundleSource:Fr("string","DocumentSnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class Jm extends Wc{data(e={}){return super.data(e)}}class Hc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new $h(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Jm(this._firestore,this._userDataWriter,r.key,r,new $h(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(h=>{const m=new Jm(i._firestore,i._userDataWriter,h.doc.key,h.doc,new $h(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const m=new Jm(i._firestore,i._userDataWriter,h.doc.key,h.doc,new $h(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let g=-1,w=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),w=c.indexOf(h.doc.key)),{type:cU(h.type),doc:m,oldIndex:g,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(Ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(n){n=Ps(n,Pr);const e=Ps(n.firestore,Va);return $j(Ng(e),n._key).then(t=>Y3(e,n,t))}Hc._jsonSchemaVersion="firestore/querySnapshot/1.0",Hc._jsonSchema={type:Fr("string",Hc._jsonSchemaVersion),bundleSource:Fr("string","QuerySnapshot"),bundleName:Fr("string"),bundle:Fr("string")};class x2 extends aU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pr(this.firestore,null,t)}}function dp(n){n=Ps(n,ec);const e=Ps(n.firestore,Va),t=Ng(e),r=new x2(e);return q3(n._query),qj(t,n._query).then(i=>new Hc(e,r,n,i))}function L0(n,e,t,...r){n=Ps(n,Pr);const i=Ps(n.firestore,Va),o=u2(i);let c;return c=typeof(e=Fn(e))=="string"||e instanceof kg?rU(o,"updateDoc",n._key,e,t,r):nU(o,"updateDoc",n._key,e),w2(i,[c.toMutation(n._key,Ki.exists(!0))])}function Lg(n){return w2(Ps(n.firestore,Va),[new Eg(n._key,Ki.none())])}function Kd(n,e){const t=Ps(n.firestore,Va),r=Qs(n),i=lU(n.converter,e);return w2(t,[tU(u2(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ki.exists(!1))]).then(()=>r)}function uU(n,...e){var m,g,w;n=Fn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||VA(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(VA(e[r])){const E=e[r];e[r]=(m=E.next)==null?void 0:m.bind(E),e[r+1]=(g=E.error)==null?void 0:g.bind(E),e[r+2]=(w=E.complete)==null?void 0:w.bind(E)}let o,c,h;if(n instanceof Pr)c=Ps(n.firestore,Va),h=ip(n._key.path),o={next:E=>{e[r]&&e[r](Y3(c,n,E))},error:e[r+1],complete:e[r+2]};else{const E=Ps(n,ec);c=Ps(E.firestore,Va),h=E._query;const T=new x2(c);o={next:R=>{e[r]&&e[r](new Hc(c,T,E,R))},error:e[r+1],complete:e[r+2]},q3(n._query)}return function(T,R,M,D){const L=new l2(D),G=new s2(R,L,M);return T.asyncQueue.enqueueAndForget(async()=>n2(await O0(T),G)),()=>{L.Nu(),T.asyncQueue.enqueueAndForget(async()=>r2(await O0(T),G))}}(Ng(c),h,i,o)}function w2(n,e){return function(r,i){const o=new qo;return r.asyncQueue.enqueueAndForget(async()=>Oj(await Gj(r),i,o)),o.promise}(Ng(n),e)}function Y3(n,e,t){const r=t.docs.get(e._key),i=new x2(n);return new Wc(n,i,e._key,r,new $h(t.hasPendingWrites,t.fromCache),e.converter)}function xo(){return new d2("serverTimestamp")}(function(e,t=!0){(function(i){Hd=i})(pu),wo(new eo("firestore",(r,{instanceIdentifier:i,options:o})=>{const c=r.getProvider("app").getImmediate(),h=new Va(new MV(r.getProvider("auth-internal")),new FV(c,r.getProvider("app-check-internal")),function(g,w){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new qe(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(g.options.projectId,w)}(c,i),c);return o={useFetchStreams:t,...o},h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),fs(xI,wI,e),fs(xI,wI,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="firebasestorage.googleapis.com",Z3="storageBucket",dU=120*1e3,hU=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends to{constructor(e,t,r=0){super(Wy(e),`Firebase Storage: ${t} (${Wy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var vr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(vr||(vr={}));function Wy(n){return"storage/"+n}function v2(){const n="An unknown error occurred, please check the error payload for server response.";return new _r(vr.UNKNOWN,n)}function fU(n){return new _r(vr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function pU(n){return new _r(vr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mU(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _r(vr.UNAUTHENTICATED,n)}function gU(){return new _r(vr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yU(n){return new _r(vr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function xU(){return new _r(vr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wU(){return new _r(vr.CANCELED,"User canceled the upload/download.")}function vU(n){return new _r(vr.INVALID_URL,"Invalid URL '"+n+"'.")}function _U(n){return new _r(vr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function EU(){return new _r(vr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Z3+"' property when initializing the app?")}function bU(){return new _r(vr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IU(){return new _r(vr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function AU(n){return new _r(vr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hw(n){return new _r(vr.INVALID_ARGUMENT,n)}function J3(){return new _r(vr.APP_DELETED,"The Firebase app was deleted.")}function TU(n){return new _r(vr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lf(n,e){return new _r(vr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Mh(n){throw new _r(vr.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ks.makeFromUrl(e,t)}catch{return new ks(e,"")}if(r.path==="")return r;throw _U(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+i+c,"i"),m={bucket:1,path:3};function g(Y){Y.path_=decodeURIComponent(Y.path)}const w="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${w}/b/${i}/o${T}`,"i"),M={bucket:1,path:3},D=t===Q3?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",G=new RegExp(`^https?://${D}/${i}/${L}`,"i"),W=[{regex:h,indices:m,postModify:o},{regex:R,indices:M,postModify:g},{regex:G,indices:{bucket:1,path:2},postModify:g}];for(let Y=0;Y<W.length;Y++){const Z=W[Y],ie=Z.regex.exec(e);if(ie){const F=ie[Z.indices.bucket];let B=ie[Z.indices.path];B||(B=""),r=new ks(F,B),Z.postModify(r);break}}if(r==null)throw vU(e);return r}}class CU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(n,e,t){let r=1,i=null,o=null,c=!1,h=0;function m(){return h===2}let g=!1;function w(...L){g||(g=!0,e.apply(null,L))}function E(L){i=setTimeout(()=>{i=null,n(R,m())},L)}function T(){o&&clearTimeout(o)}function R(L,...G){if(g){T();return}if(L){T(),w.call(null,L,...G);return}if(m()||c){T(),w.call(null,L,...G);return}r<64&&(r*=2);let W;h===1?(h=2,W=0):W=(r+Math.random())*1e3,E(W)}let M=!1;function D(L){M||(M=!0,T(),!g&&(i!==null?(L||(h=2),clearTimeout(i),E(0)):L||(h=1)))}return E(0),o=setTimeout(()=>{c=!0,D(!0)},t),D}function RU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(n){return n!==void 0}function kU(n){return typeof n=="object"&&!Array.isArray(n)}function _2(n){return typeof n=="string"||n instanceof String}function UA(n){return E2()&&n instanceof Blob}function E2(){return typeof Blob<"u"}function zA(n,e,t,r){if(r<e)throw hw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hw(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ek(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Gc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gc||(Gc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DU{constructor(e,t,r,i,o,c,h,m,g,w,E,T=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=w,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,D)=>{this.resolve_=M,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const m=h.loaded,g=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===Gc.NO_ERROR,m=o.getStatus();if(!h||PU(m,this.additionalRetryCodes_)&&this.retry){const w=o.getErrorCode()===Gc.ABORT;r(!1,new vm(!1,null,w));return}const g=this.successCodes_.indexOf(m)!==-1;r(!0,new vm(g,o))})},t=(r,i)=>{const o=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());NU(m)?o(m):o()}catch(m){c(m)}else if(h!==null){const m=v2();m.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,m)):c(m)}else if(i.canceled){const m=this.appDelete_?J3():wU();c(m)}else{const m=xU();c(m)}};this.canceled_?t(!1,new vm(!1,null,!0)):this.backoffId_=SU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function OU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function MU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function VU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function FU(n,e,t,r,i,o,c=!0,h=!1){const m=ek(n.urlParams),g=n.url+m,w=Object.assign({},n.headers);return LU(w,e),OU(w,t),MU(w,o),VU(w,r),new DU(g,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jU(...n){const e=BU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(E2())return new Blob(n);throw new _r(vr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(n){if(typeof atob>"u")throw AU("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hy{constructor(e,t){this.data=e,this.contentType=t||null}}function WU(n,e){switch(n){case Wo.RAW:return new Hy(tk(e));case Wo.BASE64:case Wo.BASE64URL:return new Hy(nk(n,e));case Wo.DATA_URL:return new Hy(GU(e),$U(e))}throw v2()}function tk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=n.charCodeAt(++t);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function HU(n){let e;try{e=decodeURIComponent(n)}catch{throw lf(Wo.DATA_URL,"Malformed data URL.")}return tk(e)}function nk(n,e){switch(n){case Wo.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw lf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wo.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw lf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=zU(e)}catch(i){throw i.message.includes("polyfill")?i:lf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class rk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw lf(Wo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=qU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function GU(n){const e=new rk(n);return e.base64?nk(Wo.BASE64,e.rest):HU(e.rest)}function $U(n){return new rk(n).contentType}function qU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){let r=0,i="";UA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(UA(this.data_)){const r=this.data_,i=UU(r,e,t);return i===null?null:new kl(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new kl(r,!0)}}static getBlob(...e){if(E2()){const t=e.map(r=>r instanceof kl?r.data_:r);return new kl(jU.apply(null,t))}else{const t=e.map(c=>_2(c)?WU(Wo.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[o++]=c[h]}),new kl(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(n){let e;try{e=JSON.parse(n)}catch{return null}return kU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function XU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function sk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n,e){return e}class $i{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||YU}}let _m=null;function QU(n){return!_2(n)||n.length<2?n:sk(n)}function ok(){if(_m)return _m;const n=[];n.push(new $i("bucket")),n.push(new $i("generation")),n.push(new $i("metageneration")),n.push(new $i("name","fullPath",!0));function e(o,c){return QU(c)}const t=new $i("name");t.xform=e,n.push(t);function r(o,c){return c!==void 0?Number(c):c}const i=new $i("size");return i.xform=r,n.push(i),n.push(new $i("timeCreated")),n.push(new $i("updated")),n.push(new $i("md5Hash",null,!0)),n.push(new $i("cacheControl",null,!0)),n.push(new $i("contentDisposition",null,!0)),n.push(new $i("contentEncoding",null,!0)),n.push(new $i("contentLanguage",null,!0)),n.push(new $i("contentType",null,!0)),n.push(new $i("metadata","customMetadata",!0)),_m=n,_m}function ZU(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new ks(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function JU(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return ZU(r,n),r}function ak(n,e,t){const r=ik(e);return r===null?null:JU(n,r,t)}function ez(n,e,t,r){const i=ik(e);if(i===null||!_2(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(g=>{const w=n.bucket,E=n.fullPath,T="/b/"+c(w)+"/o/"+c(E),R=b2(T,t,r),M=ek({alt:"media",token:g});return R+M})[0]}function tz(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class lk{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(n){if(!n)throw v2()}function nz(n,e){function t(r,i){const o=ak(n,i,e);return ck(o!==null),o}return t}function rz(n,e){function t(r,i){const o=ak(n,i,e);return ck(o!==null),ez(o,i,n.host,n._protocol)}return t}function uk(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=gU():i=mU():t.getStatus()===402?i=pU(n.bucket):t.getStatus()===403?i=yU(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function iz(n){const e=uk(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=fU(n.path)),o.serverResponse=i.serverResponse,o}return t}function sz(n,e,t){const r=e.fullServerUrl(),i=b2(r,n.host,n._protocol),o="GET",c=n.maxOperationRetryTime,h=new lk(i,o,rz(n,t),c);return h.errorHandler=iz(e),h}function oz(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function az(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=oz(null,e)),r}function lz(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function h(){let W="";for(let Y=0;Y<2;Y++)W=W+Math.random().toString().slice(2);return W}const m=h();c["Content-Type"]="multipart/related; boundary="+m;const g=az(e,r,i),w=tz(g,t),E="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,T=`\r
--`+m+"--",R=kl.getBlob(E,r,T);if(R===null)throw bU();const M={name:g.fullPath},D=b2(o,n.host,n._protocol),L="POST",G=n.maxUploadRetryTime,z=new lk(D,L,nz(n,t),G);return z.urlParams=M,z.headers=c,z.body=R.uploadData(),z.errorHandler=uk(e),z}class cz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw Mh("cannot .send() more than once");if(Xl(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uz extends cz{initXhr(){this.xhr_.responseType="text"}}function dk(){return new uz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this._service=e,t instanceof ks?this._location=t:this._location=ks.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new iu(e,t)}get root(){const e=new ks(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sk(this._location.path)}get storage(){return this._service}get parent(){const e=KU(this._location.path);if(e===null)return null;const t=new ks(this._location.bucket,e);return new iu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw TU(e)}}function dz(n,e,t){n._throwIfRoot("uploadBytes");const r=lz(n.storage,n._location,ok(),new kl(e,!0),t);return n.storage.makeRequestWithTokens(r,dk).then(i=>({metadata:i,ref:n}))}function hz(n){n._throwIfRoot("getDownloadURL");const e=sz(n.storage,n._location,ok());return n.storage.makeRequestWithTokens(e,dk).then(t=>{if(t===null)throw IU();return t})}function fz(n,e){const t=XU(n._location.path,e),r=new ks(n._location.bucket,t);return new iu(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(n){return/^[A-Za-z]+:\/\//.test(n)}function mz(n,e){return new iu(n,e)}function hk(n,e){if(n instanceof I2){const t=n;if(t._bucket==null)throw EU();const r=new iu(t,t._bucket);return e!=null?hk(r,e):r}else return e!==void 0?fz(n,e):n}function gz(n,e){if(e&&pz(e)){if(n instanceof I2)return mz(n,e);throw hw("To use ref(service, url), the first argument must be a Storage instance.")}else return hk(n,e)}function WA(n,e){const t=e==null?void 0:e[Z3];return t==null?null:ks.makeFromBucketSpec(t,n)}function yz(n,e,t,r={}){n.host=`${e}:${t}`;const i=Xl(e);i&&(fv(`https://${n.host}/b`),pv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:qS(o,n.app.options.projectId))}class I2{constructor(e,t,r,i,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=Q3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dU,this._maxUploadRetryTime=hU,this._requests=new Set,i!=null?this._bucket=ks.makeFromBucketSpec(i,this._host):this._bucket=WA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ks.makeFromBucketSpec(this._url,e):this._bucket=WA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){zA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){zA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new iu(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new CU(J3());{const c=FU(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const HA="@firebase/storage",GA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="storage";function xz(n,e,t){return n=Fn(n),dz(n,e,t)}function wz(n){return n=Fn(n),hz(n)}function vz(n,e){return n=Fn(n),gz(n,e)}function _z(n=ag(),e){n=Fn(n);const r=Yl(n,fk).getImmediate({identifier:e}),i=HS("storage");return i&&Ez(r,...i),r}function Ez(n,e,t,r={}){yz(n,e,t,r)}function bz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new I2(t,r,i,e,pu)}function Iz(){wo(new eo(fk,bz,"PUBLIC").setMultipleInstances(!0)),fs(HA,GA,""),fs(HA,GA,"esm2020")}Iz();const pk="@firebase/installations",A2="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=1e4,gk=`w:${A2}`,yk="FIS_v2",Az="https://firebaseinstallations.googleapis.com/v1",Tz=3600*1e3,Cz="installations",Sz="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},su=new fu(Cz,Sz,Rz);function xk(n){return n instanceof to&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk({projectId:n}){return`${Az}/projects/${n}/installations`}function vk(n){return{token:n.token,requestStatus:2,expiresIn:kz(n.expiresIn),creationTime:Date.now()}}async function _k(n,e){const r=(await e.json()).error;return su.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Ek({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Nz(n,{refreshToken:e}){const t=Ek(n);return t.append("Authorization",Pz(e)),t}async function bk(n){const e=await n();return e.status>=500&&e.status<600?n():e}function kz(n){return Number(n.replace("s","000"))}function Pz(n){return`${yk} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=wk(n),i=Ek(n),o=e.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={fid:t,authVersion:yk,appId:n.appId,sdkVersion:gk},h={method:"POST",headers:i,body:JSON.stringify(c)},m=await bk(()=>fetch(r,h));if(m.ok){const g=await m.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:vk(g.authToken)}}else throw await _k("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=/^[cdef][\w-]{21}$/,fw="";function Lz(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Vz(n);return Mz.test(t)?t:fw}catch{return fw}}function Vz(n){return Oz(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Map;function Tk(n,e){const t=Vg(n);Ck(t,e),Fz(t,e)}function Ck(n,e){const t=Ak.get(n);if(t)for(const r of t)r(e)}function Fz(n,e){const t=Bz();t&&t.postMessage({key:n,fid:e}),jz()}let Lc=null;function Bz(){return!Lc&&"BroadcastChannel"in self&&(Lc=new BroadcastChannel("[Firebase] FID Change"),Lc.onmessage=n=>{Ck(n.data.key,n.data.fid)}),Lc}function jz(){Ak.size===0&&Lc&&(Lc.close(),Lc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz="firebase-installations-database",zz=1,ou="firebase-installations-store";let Gy=null;function T2(){return Gy||(Gy=tR(Uz,zz,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ou)}}})),Gy}async function V0(n,e){const t=Vg(n),i=(await T2()).transaction(ou,"readwrite"),o=i.objectStore(ou),c=await o.get(t);return await o.put(e,t),await i.done,(!c||c.fid!==e.fid)&&Tk(n,e.fid),e}async function Sk(n){const e=Vg(n),r=(await T2()).transaction(ou,"readwrite");await r.objectStore(ou).delete(e),await r.done}async function Fg(n,e){const t=Vg(n),i=(await T2()).transaction(ou,"readwrite"),o=i.objectStore(ou),c=await o.get(t),h=e(c);return h===void 0?await o.delete(t):await o.put(h,t),await i.done,h&&(!c||c.fid!==h.fid)&&Tk(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(n){let e;const t=await Fg(n.appConfig,r=>{const i=Wz(r),o=Hz(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===fw?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Wz(n){const e=n||{fid:Lz(),registrationStatus:0};return Rk(e)}function Hz(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(su.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Gz(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$z(n)}:{installationEntry:e}}async function Gz(n,e){try{const t=await Dz(n,e);return V0(n.appConfig,t)}catch(t){throw xk(t)&&t.customData.serverCode===409?await Sk(n.appConfig):await V0(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function $z(n){let e=await $A(n.appConfig);for(;e.registrationStatus===1;)await Ik(100),e=await $A(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await C2(n);return r||t}return e}function $A(n){return Fg(n,e=>{if(!e)throw su.create("installation-not-found");return Rk(e)})}function Rk(n){return qz(n)?{fid:n.fid,registrationStatus:0}:n}function qz(n){return n.registrationStatus===1&&n.registrationTime+mk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kz({appConfig:n,heartbeatServiceProvider:e},t){const r=Xz(n,t),i=Nz(n,t),o=e.getImmediate({optional:!0});if(o){const g=await o.getHeartbeatsHeader();g&&i.append("x-firebase-client",g)}const c={installation:{sdkVersion:gk,appId:n.appId}},h={method:"POST",headers:i,body:JSON.stringify(c)},m=await bk(()=>fetch(r,h));if(m.ok){const g=await m.json();return vk(g)}else throw await _k("Generate Auth Token",m)}function Xz(n,{fid:e}){return`${wk(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(n,e=!1){let t;const r=await Fg(n.appConfig,o=>{if(!Nk(o))throw su.create("not-registered");const c=o.authToken;if(!e&&Zz(c))return o;if(c.requestStatus===1)return t=Yz(n,e),o;{if(!navigator.onLine)throw su.create("app-offline");const h=eW(o);return t=Qz(n,h),h}});return t?await t:r.authToken}async function Yz(n,e){let t=await qA(n.appConfig);for(;t.authToken.requestStatus===1;)await Ik(100),t=await qA(n.appConfig);const r=t.authToken;return r.requestStatus===0?S2(n,e):r}function qA(n){return Fg(n,e=>{if(!Nk(e))throw su.create("not-registered");const t=e.authToken;return tW(t)?{...e,authToken:{requestStatus:0}}:e})}async function Qz(n,e){try{const t=await Kz(n,e),r={...e,authToken:t};return await V0(n.appConfig,r),t}catch(t){if(xk(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Sk(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await V0(n.appConfig,r)}throw t}}function Nk(n){return n!==void 0&&n.registrationStatus===2}function Zz(n){return n.requestStatus===2&&!Jz(n)}function Jz(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Tz}function eW(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function tW(n){return n.requestStatus===1&&n.requestTime+mk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nW(n){const e=n,{installationEntry:t,registrationPromise:r}=await C2(e);return r?r.catch(console.error):S2(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rW(n,e=!1){const t=n;return await iW(t),(await S2(t,e)).token}async function iW(n){const{registrationPromise:e}=await C2(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sW(n){if(!n||!n.options)throw $y("App Configuration");if(!n.name)throw $y("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw $y(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function $y(n){return su.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk="installations",oW="installations-internal",aW=n=>{const e=n.getProvider("app").getImmediate(),t=sW(e),r=Yl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lW=n=>{const e=n.getProvider("app").getImmediate(),t=Yl(e,kk).getImmediate();return{getId:()=>nW(t),getToken:i=>rW(t,i)}};function cW(){wo(new eo(kk,aW,"PUBLIC")),wo(new eo(oW,lW,"PRIVATE"))}cW();fs(pk,A2);fs(pk,A2,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="analytics",uW="firebase_id",dW="origin",hW=60*1e3,fW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",R2="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new og("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ds=new fu("analytics","Analytics",pW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(n){if(!n.startsWith(R2)){const e=Ds.create("invalid-gtag-resource",{gtagURL:n});return ms.warn(e.message),""}return n}function Pk(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function gW(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function yW(n,e){const t=gW("firebase-js-sdk-policy",{createScriptURL:mW}),r=document.createElement("script"),i=`${R2}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function xW(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function wW(n,e,t,r,i,o){const c=r[i];try{if(c)await e[c];else{const m=(await Pk(t)).find(g=>g.measurementId===i);m&&await e[m.appId]}}catch(h){ms.error(h)}n("config",i,o)}async function vW(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let c=i.send_to;Array.isArray(c)||(c=[c]);const h=await Pk(t);for(const m of c){const g=h.find(E=>E.measurementId===m),w=g&&e[g.appId];if(w)o.push(w);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){ms.error(o)}}function _W(n,e,t,r){async function i(o,...c){try{if(o==="event"){const[h,m]=c;await vW(n,e,t,h,m)}else if(o==="config"){const[h,m]=c;await wW(n,e,t,r,h,m)}else if(o==="consent"){const[h,m]=c;n("consent",h,m)}else if(o==="get"){const[h,m,g]=c;n("get",h,m,g)}else if(o==="set"){const[h]=c;n("set",h)}else n(o,...c)}catch(h){ms.error(h)}}return i}function EW(n,e,t,r,i){let o=function(...c){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=_W(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function bW(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(R2)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IW=30,AW=1e3;class TW{constructor(e={},t=AW){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Dk=new TW;function CW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function SW(n){var c;const{appId:e,apiKey:t}=n,r={method:"GET",headers:CW(t)},i=fW.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let h="";try{const m=await o.json();(c=m.error)!=null&&c.message&&(h=m.error.message)}catch{}throw Ds.create("config-fetch-failed",{httpStatus:o.status,responseMessage:h})}return o.json()}async function RW(n,e=Dk,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Ds.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Ds.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new PW;return setTimeout(async()=>{h.abort()},hW),Ok({appId:r,apiKey:i,measurementId:o},c,h,e)}async function Ok(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Dk){var h;const{appId:o,measurementId:c}=n;try{await NW(r,e)}catch(m){if(c)return ms.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:o,measurementId:c};throw m}try{const m=await SW(n);return i.deleteThrottleMetadata(o),m}catch(m){const g=m;if(!kW(g)){if(i.deleteThrottleMetadata(o),c)return ms.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:o,measurementId:c};throw m}const w=Number((h=g==null?void 0:g.customData)==null?void 0:h.httpStatus)===503?Wb(t,i.intervalMillis,IW):Wb(t,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+w,backoffCount:t+1};return i.setThrottleMetadata(o,E),ms.debug(`Calling attemptFetch again in ${w} millis`),Ok(n,E,r,i)}}function NW(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ds.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kW(n){if(!(n instanceof to)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class PW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function DW(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const o=await e,c={...r,send_to:o};n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OW(){if(mv())try{await ZS()}catch(n){return ms.warn(Ds.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ms.warn(Ds.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function MW(n,e,t,r,i,o,c){const h=RW(n);h.then(T=>{t[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&ms.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>ms.error(T)),e.push(h);const m=OW().then(T=>{if(T)return r.getId()}),[g,w]=await Promise.all([h,m]);bW(o)||yW(o,g.measurementId),i("js",new Date);const E=(c==null?void 0:c.config)??{};return E[dW]="firebase",E.update=!0,w!=null&&(E[uW]=w),i("config",g.measurementId,E),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e){this.app=e}_delete(){return delete cf[this.app.options.appId],Promise.resolve()}}let cf={},KA=[];const XA={};let qy="dataLayer",VW="gtag",YA,Mk,QA=!1;function FW(){const n=[];if(XS()&&n.push("This is a browser extension environment."),X5()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ds.create("invalid-analytics-context",{errorInfo:e});ms.warn(t.message)}}function BW(n,e,t){FW();const r=n.options.appId;if(!r)throw Ds.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ms.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ds.create("no-api-key");if(cf[r]!=null)throw Ds.create("already-exists",{id:r});if(!QA){xW(qy);const{wrappedGtag:o,gtagCore:c}=EW(cf,KA,XA,qy,VW);Mk=o,YA=c,QA=!0}return cf[r]=MW(n,KA,XA,e,YA,qy,t),new LW(n)}function jW(n=ag()){n=Fn(n);const e=Yl(n,F0);return e.isInitialized()?e.getImmediate():UW(n)}function UW(n,e={}){const t=Yl(n,F0);if(t.isInitialized()){const i=t.getImmediate();if(Bl(e,t.getOptions()))return i;throw Ds.create("already-initialized")}return t.initialize({options:e})}function zW(n,e,t,r){n=Fn(n),DW(Mk,cf[n.app.options.appId],e,t,r).catch(i=>ms.error(i))}const ZA="@firebase/analytics",JA="0.10.18";function WW(){wo(new eo(F0,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return BW(r,i,t)},"PUBLIC")),wo(new eo("analytics-internal",n,"PRIVATE")),fs(ZA,JA),fs(ZA,JA,"esm2020");function n(e){try{const t=e.getProvider(F0).getImmediate();return{logEvent:(r,i,o)=>zW(t,r,i,o)}}catch(t){throw Ds.create("interop-component-reg-failed",{reason:t})}}}WW();const eT={apiKey:"AIzaSyDkVAo_xXbBHy8FYwFtMQA66aju08qK_yE",authDomain:"hooked-69.firebaseapp.com",projectId:"hooked-69",storageBucket:"hooked-69.firebasestorage.app",messagingSenderId:"741889428835",appId:"1:741889428835:web:d5f88b43a503c9e6351756",measurementId:"G-6YHKXLN806"};let Ld;try{Ld=Mx(eT),console.log("✅ Firebase app initialized successfully")}catch(n){console.error("❌ Failed to initialize Firebase app:",n);try{Ld=Mx(eT,"fallback-app"),console.log("✅ Firebase app initialized with fallback name")}catch(e){throw console.error("❌ Failed to initialize Firebase app with fallback:",e),new Error("Firebase initialization failed completely")}}const bc=kV(Ld),Mn=Xj(Ld),HW=_z(Ld);let GW=null;if(typeof window<"u")try{GW=jW(Ld),console.log("✅ Firebase Analytics initialized")}catch(n){console.warn("⚠️ Analytics initialization failed:",n)}const $W=async()=>{try{await Yj(Mn,{synchronizeTabs:!0}),console.log("✅ Firestore offline persistence enabled")}catch(n){n.code==="failed-precondition"?console.warn("⚠️ Multiple tabs open, persistence can only be enabled in one tab at a time"):n.code==="unimplemented"?console.warn("⚠️ Browser doesn't support persistence"):console.error("❌ Error enabling Firestore persistence:",n)}};$W();const e0={activeListeners:new Map,registerListener(n,e){this.activeListeners.set(n,e),console.log(`📡 Registered listener: ${n} (total: ${this.activeListeners.size})`)},unregisterListener(n){const e=this.activeListeners.get(n);e&&(e(),this.activeListeners.delete(n),console.log(`🧹 Cleaned up listener: ${n} (remaining: ${this.activeListeners.size})`))},cleanupAllListeners(){console.log(`🧹 Cleaning up ${this.activeListeners.size} active listeners...`),this.activeListeners.forEach((n,e)=>{n(),console.log(`🧹 Cleaned up listener: ${e}`)}),this.activeListeners.clear(),console.log("✅ All listeners cleaned up")},getListenerCount(){return this.activeListeners.size}};typeof window<"u"&&(window.addEventListener("beforeunload",()=>{e0.cleanupAllListeners()}),document.addEventListener("visibilitychange",()=>{document.hidden&&console.log("📱 Tab hidden, listeners remain active for background updates")}));const qW=async()=>{try{console.log("🔍 Testing Firebase connection...");const n=await dp(ps(Mn,"events"));return console.log("✅ Firestore connection successful"),console.log(`📊 Found ${n.docs.length} events in database`),{success:!0,eventCount:n.docs.length,events:n.docs.map(e=>({id:e.id,...e.data()}))}}catch(n){return console.error("❌ Firebase connection test failed:",n),{success:!1,error:n.message}}};class KW{constructor(){this.isOnline=navigator.onLine,this.retryQueue=[],this.maxRetries=3,this.baseDelay=1e3,this.offlineActions=new Map,window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.checkConnectivity()}async checkConnectivity(){try{const e=await fetch("/favicon.png",{method:"HEAD",cache:"no-cache",timeout:5e3});this.isOnline=e.ok}catch{this.isOnline=!1}return this.isOnline=this.isOnline&&navigator.onLine,this.isOnline}async handleOnline(){console.log("🌐 Device is back online"),this.isOnline=!0,await this.processOfflineQueue(),window.dispatchEvent(new CustomEvent("appOnline"))}handleOffline(){console.log("📴 Device is offline"),this.isOnline=!1,window.dispatchEvent(new CustomEvent("appOffline"))}async retryOperation(e,t={}){const{maxRetries:r=this.maxRetries,baseDelay:i=this.baseDelay,operationName:o="Unknown operation",shouldRetry:c=this.shouldRetryError,onRetry:h=null}=t;let m;for(let g=1;g<=r;g++)try{if(!await this.checkConnectivity())throw new Error("No internet connection");return await e()}catch(w){if(m=w,this.logError(w,{operation:o,attempt:g,maxRetries:r,isOnline:this.isOnline}),!c(w,g))throw w;if(g<r){const E=this.calculateDelay(g,i);console.log(`⏳ Retrying ${o} in ${Math.round(E)}ms (attempt ${g}/${r})`),h&&h(w,g,E),await this.sleep(E)}}throw m}shouldRetryError(e,t){return e.code==="permission-denied"||e.code==="not-found"||e.code==="invalid-argument"||e.code==="auth/user-not-found"||e.code==="auth/wrong-password"||e.code==="auth/invalid-email"?!1:e.code==="unavailable"||e.code==="deadline-exceeded"||e.message.includes("network")||e.message.includes("timeout")||e.message.includes("No internet connection")||e.code>=500}calculateDelay(e,t){const r=t*Math.pow(2,e-1),i=Math.random()*1e3;return Math.min(r+i,1e4)}queueOfflineAction(e,t={}){const r={id:Date.now()+Math.random(),action:e,metadata:t,timestamp:new Date().toISOString()};return this.retryQueue.push(r),this.saveOfflineQueue(),console.log(`📝 Queued offline action: ${t.operation||"Unknown"}`),r.id}async processOfflineQueue(){if(this.retryQueue.length===0)return;console.log(`🔄 Processing ${this.retryQueue.length} queued actions`);const e=[...this.retryQueue];this.retryQueue=[];for(const t of e)try{await this.retryOperation(()=>t.action(),{operationName:`Offline action: ${t.metadata.operation||"Unknown"}`,maxRetries:2,baseDelay:2e3}),console.log(`✅ Successfully processed offline action: ${t.metadata.operation||"Unknown"}`)}catch(r){console.error("❌ Failed to process offline action:",r),this.shouldRetryError(r,1)&&this.retryQueue.push(t)}this.saveOfflineQueue()}saveOfflineQueue(){try{localStorage.setItem("hooked_offline_queue",JSON.stringify(this.retryQueue))}catch(e){console.error("Failed to save offline queue:",e)}}loadOfflineQueue(){try{const e=localStorage.getItem("hooked_offline_queue");e&&(this.retryQueue=JSON.parse(e),console.log(`📋 Loaded ${this.retryQueue.length} offline actions`))}catch(e){console.error("Failed to load offline queue:",e),this.retryQueue=[]}}getErrorMessage(e){if(!e)return"An unknown error occurred";if(e.message.includes("No internet connection")||e.code==="unavailable"||!navigator.onLine)return"No internet connection. Please check your network and try again.";switch(e.code){case"permission-denied":return"You don't have permission to perform this action.";case"not-found":return"The requested resource was not found.";case"already-exists":return"This resource already exists.";case"deadline-exceeded":return"The operation timed out. Please try again.";case"auth/user-not-found":return"User account not found.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-email":return"Invalid email address.";case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";default:return e.message||"An unexpected error occurred. Please try again."}}logError(e,t={}){const r={message:e.message,code:e.code,stack:e.stack,timestamp:new Date().toISOString(),isOnline:this.isOnline,userAgent:navigator.userAgent,url:window.location.href,...t};console.error("🚨 Error occurred:",r)}reportError(e){}sleep(e){return new Promise(t=>setTimeout(t,e))}getOnlineStatus(){return this.isOnline}getOfflineQueueLength(){return this.retryQueue.length}clearOfflineQueue(){this.retryQueue=[],this.saveOfflineQueue()}}const Fl=new KW;Fl.loadOfflineQueue();const Lk=(n,e={})=>Fl.retryOperation(n,e),XW=(n,e)=>Fl.queueOfflineAction(n,e),tT=n=>Fl.getErrorMessage(n),Em=()=>Fl.getOfflineQueueLength();async function Vn(n,e=3,t=1e3,r="Firebase operation"){return Lk(n,{maxRetries:e,baseDelay:t,operationName:r})}const Ky={async compressImage(n,e=800,t=.8){return new Promise(r=>{const i=document.createElement("canvas"),o=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:h,height:m}=c;h>e&&(m=m*e/h,h=e),i.width=h,i.height=m,o.drawImage(c,0,0,h,m),i.toBlob(r,"image/jpeg",t)},c.src=URL.createObjectURL(n)})},generateOptimizedFilename(n){const e=Date.now(),t=n.split(".").pop()||"jpg";return`optimized_${e}.${t}`},validateFile(n,e=5){const t=["image/jpeg","image/jpg","image/png","image/webp"],r=e*1024*1024;if(!t.includes(n.type))throw new Error("Invalid file type. Please upload a JPEG, PNG, or WebP image.");if(n.size>r)throw new Error(`File too large. Maximum size is ${e}MB.`);return!0}};class YW{constructor(){this.listeners=new Map,this.listenerCounts=new Map}createListener(e,t,r,i={}){this.cleanupListener(e);const o=uU(t,h=>{const m=h.docs.map(g=>({id:g.id,...g.data()}));r(m)},h=>{console.error(`❌ Listener error for ${e}:`,h),i.onError&&i.onError(h)});e0.registerListener(e,o),this.listeners.set(e,o);const c=this.listenerCounts.get(e)||0;return this.listenerCounts.set(e,c+1),console.log(`📡 Created listener: ${e} (count: ${c+1})`),o}cleanupListener(e){const t=this.listeners.get(e);t&&(t(),this.listeners.delete(e),e0.unregisterListener(e),console.log(`🧹 Cleaned up listener: ${e}`))}cleanupAll(){this.listeners.forEach((e,t)=>{e(),e0.unregisterListener(t)}),this.listeners.clear(),this.listenerCounts.clear(),console.log("🧹 All listeners cleaned up")}getStats(){return{activeListeners:this.listeners.size,listenerCounts:Object.fromEntries(this.listenerCounts)}}}const N2=new YW,Of={async create(n){return await Vn(async()=>({id:(await Kd(ps(Mn,"events"),{...n,created_at:xo(),updated_at:xo()})).id,...n}),3,1e3,"Event.create")},async filter(n={}){return await Vn(async()=>{let e=ps(Mn,"events");return n.id&&(e=Vr(e,kr("id","==",n.id))),n.event_code&&(e=Vr(e,kr("event_code","==",n.event_code))),n.starts_at&&(e=Vr(e,kr("starts_at",">=",n.starts_at))),n.expires_at&&(e=Vr(e,kr("expires_at","<=",n.expires_at))),(await dp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Event.filter")},async get(n){return await Vn(async()=>{const e=Qs(Mn,"events",n),t=await y2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Event.get")},async update(n,e){return await Vn(async()=>{const t=Qs(Mn,"events",n);await L0(t,{...e,updated_at:xo()})},3,1e3,"Event.update")},async delete(n){return await Vn(async()=>{const e=Qs(Mn,"events",n);await Lg(e)},3,1e3,"Event.delete")},async list(){return await this.filter()}},ka={async create(n){return await Vn(async()=>({id:(await Kd(ps(Mn,"event_profiles"),{...n,created_at:xo(),updated_at:xo()})).id,...n}),3,1e3,"EventProfile.create")},async filter(n={}){return await Vn(async()=>{let e=ps(Mn,"event_profiles");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.session_id&&(e=Vr(e,kr("session_id","==",n.session_id))),n.email&&(e=Vr(e,kr("email","==",n.email))),n.is_visible!==void 0&&(e=Vr(e,kr("is_visible","==",n.is_visible))),(await dp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"EventProfile.filter")},async get(n){return await Vn(async()=>{const e=Qs(Mn,"event_profiles",n),t=await y2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"EventProfile.get")},async update(n,e){return await Vn(async()=>{const t=Qs(Mn,"event_profiles",n);await L0(t,{...e,updated_at:xo()})},3,1e3,"EventProfile.update")},async delete(n){return await Vn(async()=>{const e=Qs(Mn,"event_profiles",n);await Lg(e)},3,1e3,"EventProfile.delete")},async toggleVisibility(n,e){return await Vn(async()=>{const t=Qs(Mn,"event_profiles",n);await L0(t,{is_visible:e,updated_at:xo()})},3,1e3,"EventProfile.toggleVisibility")},async list(){return await this.filter()},onProfilesChange(n,e,t={}){let r=Vr(ps(Mn,"event_profiles"),kr("event_id","==",n));t.is_visible!==void 0&&(r=Vr(r,kr("is_visible","==",t.is_visible)));const i=`profiles_${n}_${JSON.stringify(t)}`;return N2.createListener(i,r,e)}},us={async create(n){return await Vn(async()=>({id:(await Kd(ps(Mn,"likes"),{...n,created_at:xo()})).id,...n}),3,1e3,"Like.create")},async filter(n={}){return await Vn(async()=>{let e=ps(Mn,"likes");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.from_profile_id&&(e=Vr(e,kr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Vr(e,kr("to_profile_id","==",n.to_profile_id))),n.is_mutual!==void 0&&(e=Vr(e,kr("is_mutual","==",n.is_mutual))),(await dp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Like.filter")},async get(n){return await Vn(async()=>{const e=Qs(Mn,"likes",n),t=await y2(e);return t.exists()?{id:t.id,...t.data()}:null},3,1e3,"Like.get")},async update(n,e){return await Vn(async()=>{const t=Qs(Mn,"likes",n);await L0(t,e)},3,1e3,"Like.update")},async delete(n){return await Vn(async()=>{const e=Qs(Mn,"likes",n);await Lg(e)},3,1e3,"Like.delete")},async list(){return await this.filter()},onLikesChange(n,e,t){const r=Vr(ps(Mn,"likes"),kr("event_id","==",n),kr("liker_session_id","==",e)),i=`likes_${n}_${e}`;return N2.createListener(i,r,t)}},Vc={async create(n){return await Vn(async()=>({id:(await Kd(ps(Mn,"messages"),{...n,created_at:xo()})).id,...n}),3,1e3,"Message.create")},async filter(n={}){return await Vn(async()=>{let e=ps(Mn,"messages");return n.event_id&&(e=Vr(e,kr("event_id","==",n.event_id))),n.from_profile_id&&(e=Vr(e,kr("from_profile_id","==",n.from_profile_id))),n.to_profile_id&&(e=Vr(e,kr("to_profile_id","==",n.to_profile_id))),e=Vr(e,FA("created_at","desc")),(await dp(e)).docs.map(r=>({id:r.id,...r.data()}))},3,1e3,"Message.filter")},async delete(n){return await Vn(async()=>{const e=Qs(Mn,"messages",n);await Lg(e)},3,1e3,"Message.delete")},async list(){return await this.filter()},onMessagesChange(n,e,t){const r=Vr(ps(Mn,"messages"),kr("event_id","==",n),kr("from_profile_id","==",e),FA("created_at","asc")),i=`messages_${n}_${e}`;return N2.createListener(i,r,t)}},Xy={async create(n){return await Vn(async()=>({id:(await Kd(ps(Mn,"contact_shares"),{...n,created_at:xo()})).id,...n}),3,1e3,"ContactShare.create")},async list(){return await this.filter()}},QW={async create(n){return await Vn(async()=>({id:(await Kd(ps(Mn,"event_feedback"),{...n,created_at:xo()})).id,...n}),3,1e3,"EventFeedback.create")},async list(){return await this.filter()}},Yy={async signUp(n,e){return await Vn(async()=>(await f7(bc,n,e)).user,3,1e3,"User.signUp")},async signIn(n,e){return await Vn(async()=>(await p7(bc,n,e)).user,3,1e3,"User.signIn")},async signOut(){return await Vn(async()=>{await v7(bc)},3,1e3,"User.signOut")},async updateProfile(n){return await Vn(async()=>{const e=bc.currentUser;if(!e)throw new Error("No user signed in");await g7(e,n)},3,1e3,"User.updateProfile")},getCurrentUser(){return bc.currentUser},async me(){return bc.currentUser},onAuthStateChanged(n){return w7(bc,n)}},ZW=async(n,e={})=>await Vn(async()=>{Ky.validateFile(n,e.maxSizeMB||5);let t=n;if(n.type.startsWith("image/"))try{const h=await Ky.compressImage(n,e.maxWidth||800,e.quality||.8);t=new File([h],n.name,{type:"image/jpeg"}),console.log("✅ Image compressed successfully")}catch(h){console.warn("⚠️ Image compression failed, uploading original:",h)}const r=Ky.generateOptimizedFilename(n.name),i=vz(HW,`uploads/${Date.now()}_${r}`),o=await xz(i,t),c=await wz(o.ref);return console.log("✅ File uploaded successfully:",{originalSize:n.size,uploadedSize:t.size,compressionRatio:((n.size-t.size)/n.size*100).toFixed(1)+"%"}),{file_url:c}},3,1e3,"uploadFile");function nT(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Vk(...n){return e=>{let t=!1;const r=n.map(i=>{const o=nT(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():nT(n[i],null)}}}}function bn(...n){return P.useCallback(Vk(...n),n)}function Vd(n){const e=eH(n),t=P.forwardRef((r,i)=>{const{children:o,...c}=r,h=P.Children.toArray(o),m=h.find(nH);if(m){const g=m.props.children,w=h.map(E=>E===m?P.Children.count(g)>1?P.Children.only(null):P.isValidElement(g)?g.props.children:null:E);return A.jsx(e,{...c,ref:i,children:P.isValidElement(g)?P.cloneElement(g,void 0,w):null})}return A.jsx(e,{...c,ref:i,children:o})});return t.displayName=`${n}.Slot`,t}var JW=Vd("Slot");function eH(n){const e=P.forwardRef((t,r)=>{const{children:i,...o}=t;if(P.isValidElement(i)){const c=iH(i),h=rH(o,i.props);return i.type!==P.Fragment&&(h.ref=r?Vk(r,c):c),P.cloneElement(i,h)}return P.Children.count(i)>1?P.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var tH=Symbol("radix.slottable");function nH(n){return P.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===tH}function rH(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...h)=>{const m=o(...h);return i(...h),m}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function iH(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function Fk(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Fk(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Bk(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Fk(n))&&(r&&(r+=" "),r+=e);return r}const rT=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,iT=Bk,Bg=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return iT(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:o}=e,c=Object.keys(i).map(g=>{const w=t==null?void 0:t[g],E=o==null?void 0:o[g];if(w===null)return null;const T=rT(w)||rT(E);return i[g][T]}),h=t&&Object.entries(t).reduce((g,w)=>{let[E,T]=w;return T===void 0||(g[E]=T),g},{}),m=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((g,w)=>{let{class:E,className:T,...R}=w;return Object.entries(R).every(M=>{let[D,L]=M;return Array.isArray(L)?L.includes({...o,...h}[D]):{...o,...h}[D]===L})?[...g,E,T]:g},[]);return iT(n,c,m,t==null?void 0:t.class,t==null?void 0:t.className)},k2="-",sH=n=>{const e=aH(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const h=c.split(k2);return h[0]===""&&h.length!==1&&h.shift(),jk(h,e)||oH(c)},getConflictingClassGroupIds:(c,h)=>{const m=t[c]||[];return h&&r[c]?[...m,...r[c]]:m}}},jk=(n,e)=>{var c;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?jk(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(k2);return(c=e.validators.find(({validator:h})=>h(o)))==null?void 0:c.classGroupId},sT=/^\[(.+)\]$/,oH=n=>{if(sT.test(n)){const e=sT.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},aH=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)pw(t[i],r,i,e);return r},pw=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:oT(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(lH(i)){pw(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,c])=>{pw(c,oT(e,o),t,r)})})},oT=(n,e)=>{let t=n;return e.split(k2).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},lH=n=>n.isThemeGetter,cH=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,c)=>{t.set(o,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let c=t.get(o);if(c!==void 0)return c;if((c=r.get(o))!==void 0)return i(o,c),c},set(o,c){t.has(o)?t.set(o,c):i(o,c)}}},mw="!",gw=":",uH=gw.length,dH=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let c=0,h=0,m=0,g;for(let M=0;M<i.length;M++){let D=i[M];if(c===0&&h===0){if(D===gw){o.push(i.slice(m,M)),m=M+uH;continue}if(D==="/"){g=M;continue}}D==="["?c++:D==="]"?c--:D==="("?h++:D===")"&&h--}const w=o.length===0?i:i.substring(m),E=hH(w),T=E!==w,R=g&&g>m?g-m:void 0;return{modifiers:o,hasImportantModifier:T,baseClassName:E,maybePostfixModifierPosition:R}};if(e){const i=e+gw,o=r;r=c=>c.startsWith(i)?o(c.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},hH=n=>n.endsWith(mw)?n.substring(0,n.length-1):n.startsWith(mw)?n.substring(1):n,fH=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(c=>{c[0]==="["||e[c]?(i.push(...o.sort(),c),o=[]):o.push(c)}),i.push(...o.sort()),i}},pH=n=>({cache:cH(n.cacheSize),parseClassName:dH(n),sortModifiers:fH(n),...sH(n)}),mH=/\s+/,gH=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,c=[],h=n.trim().split(mH);let m="";for(let g=h.length-1;g>=0;g-=1){const w=h[g],{isExternal:E,modifiers:T,hasImportantModifier:R,baseClassName:M,maybePostfixModifierPosition:D}=t(w);if(E){m=w+(m.length>0?" "+m:m);continue}let L=!!D,G=r(L?M.substring(0,D):M);if(!G){if(!L){m=w+(m.length>0?" "+m:m);continue}if(G=r(M),!G){m=w+(m.length>0?" "+m:m);continue}L=!1}const z=o(T).join(":"),W=R?z+mw:z,Y=W+G;if(c.includes(Y))continue;c.push(Y);const Z=i(G,L);for(let ie=0;ie<Z.length;++ie){const F=Z[ie];c.push(W+F)}m=w+(m.length>0?" "+m:m)}return m};function yH(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Uk(e))&&(r&&(r+=" "),r+=t);return r}const Uk=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Uk(n[r]))&&(t&&(t+=" "),t+=e);return t};function xH(n,...e){let t,r,i,o=c;function c(m){const g=e.reduce((w,E)=>E(w),n());return t=pH(g),r=t.cache.get,i=t.cache.set,o=h,h(m)}function h(m){const g=r(m);if(g)return g;const w=gH(m,t);return i(m,w),w}return function(){return o(yH.apply(null,arguments))}}const qr=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},zk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Wk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wH=/^\d+\/\d+$/,vH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_H=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,bH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xu=n=>wH.test(n),Lt=n=>!!n&&!Number.isNaN(Number(n)),_l=n=>!!n&&Number.isInteger(Number(n)),Qy=n=>n.endsWith("%")&&Lt(n.slice(0,-1)),ba=n=>vH.test(n),AH=()=>!0,TH=n=>_H.test(n)&&!EH.test(n),Hk=()=>!1,CH=n=>bH.test(n),SH=n=>IH.test(n),RH=n=>!tt(n)&&!nt(n),NH=n=>Xd(n,qk,Hk),tt=n=>zk.test(n),Ic=n=>Xd(n,Kk,TH),Zy=n=>Xd(n,MH,Lt),aT=n=>Xd(n,Gk,Hk),kH=n=>Xd(n,$k,SH),bm=n=>Xd(n,Xk,CH),nt=n=>Wk.test(n),Lh=n=>Yd(n,Kk),PH=n=>Yd(n,LH),lT=n=>Yd(n,Gk),DH=n=>Yd(n,qk),OH=n=>Yd(n,$k),Im=n=>Yd(n,Xk,!0),Xd=(n,e,t)=>{const r=zk.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Yd=(n,e,t=!1)=>{const r=Wk.exec(n);return r?r[1]?e(r[1]):t:!1},Gk=n=>n==="position"||n==="percentage",$k=n=>n==="image"||n==="url",qk=n=>n==="length"||n==="size"||n==="bg-size",Kk=n=>n==="length",MH=n=>n==="number",LH=n=>n==="family-name",Xk=n=>n==="shadow",VH=()=>{const n=qr("color"),e=qr("font"),t=qr("text"),r=qr("font-weight"),i=qr("tracking"),o=qr("leading"),c=qr("breakpoint"),h=qr("container"),m=qr("spacing"),g=qr("radius"),w=qr("shadow"),E=qr("inset-shadow"),T=qr("text-shadow"),R=qr("drop-shadow"),M=qr("blur"),D=qr("perspective"),L=qr("aspect"),G=qr("ease"),z=qr("animate"),W=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Z=()=>[...Y(),nt,tt],ie=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],B=()=>[nt,tt,m],H=()=>[Xu,"full","auto",...B()],ee=()=>[_l,"none","subgrid",nt,tt],ne=()=>["auto",{span:["full",_l,nt,tt]},_l,nt,tt],te=()=>[_l,"auto",nt,tt],K=()=>["auto","min","max","fr",nt,tt],we=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],Ae=()=>["auto",...B()],xe=()=>[Xu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],oe=()=>[n,nt,tt],Te=()=>[...Y(),lT,aT,{position:[nt,tt]}],Ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ae=()=>["auto","cover","contain",DH,NH,{size:[nt,tt]}],he=()=>[Qy,Lh,Ic],Se=()=>["","none","full",g,nt,tt],Le=()=>["",Lt,Lh,Ic],it=()=>["solid","dashed","dotted","double"],Re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Lt,Qy,lT,aT],Ge=()=>["","none",M,nt,tt],at=()=>["none",Lt,nt,tt],st=()=>["none",Lt,nt,tt],ct=()=>[Lt,nt,tt],bt=()=>[Xu,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ba],breakpoint:[ba],color:[AH],container:[ba],"drop-shadow":[ba],ease:["in","out","in-out"],font:[RH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ba],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ba],shadow:[ba],spacing:["px",Lt],text:[ba],"text-shadow":[ba],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xu,tt,nt,L]}],container:["container"],columns:[{columns:[Lt,tt,nt,h]}],"break-after":[{"break-after":W()}],"break-before":[{"break-before":W()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Z()}],overflow:[{overflow:ie()}],"overflow-x":[{"overflow-x":ie()}],"overflow-y":[{"overflow-y":ie()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[_l,"auto",nt,tt]}],basis:[{basis:[Xu,"full","auto",h,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Lt,Xu,"auto","initial","none",tt]}],grow:[{grow:["",Lt,nt,tt]}],shrink:[{shrink:["",Lt,nt,tt]}],order:[{order:[_l,"first","last","none",nt,tt]}],"grid-cols":[{"grid-cols":ee()}],"col-start-end":[{col:ne()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":ee()}],"row-start-end":[{row:ne()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...we(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...we()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":we()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:Ae()}],mx:[{mx:Ae()}],my:[{my:Ae()}],ms:[{ms:Ae()}],me:[{me:Ae()}],mt:[{mt:Ae()}],mr:[{mr:Ae()}],mb:[{mb:Ae()}],ml:[{ml:Ae()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:xe()}],w:[{w:[h,"screen",...xe()]}],"min-w":[{"min-w":[h,"screen","none",...xe()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...xe()]}],h:[{h:["screen","lh",...xe()]}],"min-h":[{"min-h":["screen","lh","none",...xe()]}],"max-h":[{"max-h":["screen","lh",...xe()]}],"font-size":[{text:["base",t,Lh,Ic]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,nt,Zy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Qy,tt]}],"font-family":[{font:[PH,tt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,nt,tt]}],"line-clamp":[{"line-clamp":[Lt,"none",nt,Zy]}],leading:[{leading:[o,...B()]}],"list-image":[{"list-image":["none",nt,tt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nt,tt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:oe()}],"text-color":[{text:oe()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...it(),"wavy"]}],"text-decoration-thickness":[{decoration:[Lt,"from-font","auto",nt,Ic]}],"text-decoration-color":[{decoration:oe()}],"underline-offset":[{"underline-offset":[Lt,"auto",nt,tt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt,tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt,tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Te()}],"bg-repeat":[{bg:Ne()}],"bg-size":[{bg:ae()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_l,nt,tt],radial:["",nt,tt],conic:[_l,nt,tt]},OH,kH]}],"bg-color":[{bg:oe()}],"gradient-from-pos":[{from:he()}],"gradient-via-pos":[{via:he()}],"gradient-to-pos":[{to:he()}],"gradient-from":[{from:oe()}],"gradient-via":[{via:oe()}],"gradient-to":[{to:oe()}],rounded:[{rounded:Se()}],"rounded-s":[{"rounded-s":Se()}],"rounded-e":[{"rounded-e":Se()}],"rounded-t":[{"rounded-t":Se()}],"rounded-r":[{"rounded-r":Se()}],"rounded-b":[{"rounded-b":Se()}],"rounded-l":[{"rounded-l":Se()}],"rounded-ss":[{"rounded-ss":Se()}],"rounded-se":[{"rounded-se":Se()}],"rounded-ee":[{"rounded-ee":Se()}],"rounded-es":[{"rounded-es":Se()}],"rounded-tl":[{"rounded-tl":Se()}],"rounded-tr":[{"rounded-tr":Se()}],"rounded-br":[{"rounded-br":Se()}],"rounded-bl":[{"rounded-bl":Se()}],"border-w":[{border:Le()}],"border-w-x":[{"border-x":Le()}],"border-w-y":[{"border-y":Le()}],"border-w-s":[{"border-s":Le()}],"border-w-e":[{"border-e":Le()}],"border-w-t":[{"border-t":Le()}],"border-w-r":[{"border-r":Le()}],"border-w-b":[{"border-b":Le()}],"border-w-l":[{"border-l":Le()}],"divide-x":[{"divide-x":Le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...it(),"hidden","none"]}],"divide-style":[{divide:[...it(),"hidden","none"]}],"border-color":[{border:oe()}],"border-color-x":[{"border-x":oe()}],"border-color-y":[{"border-y":oe()}],"border-color-s":[{"border-s":oe()}],"border-color-e":[{"border-e":oe()}],"border-color-t":[{"border-t":oe()}],"border-color-r":[{"border-r":oe()}],"border-color-b":[{"border-b":oe()}],"border-color-l":[{"border-l":oe()}],"divide-color":[{divide:oe()}],"outline-style":[{outline:[...it(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Lt,nt,tt]}],"outline-w":[{outline:["",Lt,Lh,Ic]}],"outline-color":[{outline:oe()}],shadow:[{shadow:["","none",w,Im,bm]}],"shadow-color":[{shadow:oe()}],"inset-shadow":[{"inset-shadow":["none",E,Im,bm]}],"inset-shadow-color":[{"inset-shadow":oe()}],"ring-w":[{ring:Le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:oe()}],"ring-offset-w":[{"ring-offset":[Lt,Ic]}],"ring-offset-color":[{"ring-offset":oe()}],"inset-ring-w":[{"inset-ring":Le()}],"inset-ring-color":[{"inset-ring":oe()}],"text-shadow":[{"text-shadow":["none",T,Im,bm]}],"text-shadow-color":[{"text-shadow":oe()}],opacity:[{opacity:[Lt,nt,tt]}],"mix-blend":[{"mix-blend":[...Re(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Re()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Lt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":oe()}],"mask-image-linear-to-color":[{"mask-linear-to":oe()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":oe()}],"mask-image-t-to-color":[{"mask-t-to":oe()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":oe()}],"mask-image-r-to-color":[{"mask-r-to":oe()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":oe()}],"mask-image-b-to-color":[{"mask-b-to":oe()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":oe()}],"mask-image-l-to-color":[{"mask-l-to":oe()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":oe()}],"mask-image-x-to-color":[{"mask-x-to":oe()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":oe()}],"mask-image-y-to-color":[{"mask-y-to":oe()}],"mask-image-radial":[{"mask-radial":[nt,tt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":oe()}],"mask-image-radial-to-color":[{"mask-radial-to":oe()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Y()}],"mask-image-conic-pos":[{"mask-conic":[Lt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":oe()}],"mask-image-conic-to-color":[{"mask-conic-to":oe()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Te()}],"mask-repeat":[{mask:Ne()}],"mask-size":[{mask:ae()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nt,tt]}],filter:[{filter:["","none",nt,tt]}],blur:[{blur:Ge()}],brightness:[{brightness:[Lt,nt,tt]}],contrast:[{contrast:[Lt,nt,tt]}],"drop-shadow":[{"drop-shadow":["","none",R,Im,bm]}],"drop-shadow-color":[{"drop-shadow":oe()}],grayscale:[{grayscale:["",Lt,nt,tt]}],"hue-rotate":[{"hue-rotate":[Lt,nt,tt]}],invert:[{invert:["",Lt,nt,tt]}],saturate:[{saturate:[Lt,nt,tt]}],sepia:[{sepia:["",Lt,nt,tt]}],"backdrop-filter":[{"backdrop-filter":["","none",nt,tt]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[Lt,nt,tt]}],"backdrop-contrast":[{"backdrop-contrast":[Lt,nt,tt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Lt,nt,tt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Lt,nt,tt]}],"backdrop-invert":[{"backdrop-invert":["",Lt,nt,tt]}],"backdrop-opacity":[{"backdrop-opacity":[Lt,nt,tt]}],"backdrop-saturate":[{"backdrop-saturate":[Lt,nt,tt]}],"backdrop-sepia":[{"backdrop-sepia":["",Lt,nt,tt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nt,tt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Lt,"initial",nt,tt]}],ease:[{ease:["linear","initial",G,nt,tt]}],delay:[{delay:[Lt,nt,tt]}],animate:[{animate:["none",z,nt,tt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[D,nt,tt]}],"perspective-origin":[{"perspective-origin":Z()}],rotate:[{rotate:at()}],"rotate-x":[{"rotate-x":at()}],"rotate-y":[{"rotate-y":at()}],"rotate-z":[{"rotate-z":at()}],scale:[{scale:st()}],"scale-x":[{"scale-x":st()}],"scale-y":[{"scale-y":st()}],"scale-z":[{"scale-z":st()}],"scale-3d":["scale-3d"],skew:[{skew:ct()}],"skew-x":[{"skew-x":ct()}],"skew-y":[{"skew-y":ct()}],transform:[{transform:[nt,tt,"","none","gpu","cpu"]}],"transform-origin":[{origin:Z()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:bt()}],"translate-x":[{"translate-x":bt()}],"translate-y":[{"translate-y":bt()}],"translate-z":[{"translate-z":bt()}],"translate-none":["translate-none"],accent:[{accent:oe()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:oe()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt,tt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt,tt]}],fill:[{fill:["none",...oe()]}],"stroke-w":[{stroke:[Lt,Lh,Ic,Zy]}],stroke:[{stroke:["none",...oe()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},FH=xH(VH);function ln(...n){return FH(Bk(n))}const BH=Bg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ut=P.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},o)=>{const c=r?JW:"button";return A.jsx(c,{className:ln(BH({variant:e,size:t,className:n})),ref:o,...i})});Ut.displayName="Button";const P2=P.createContext({});function D2(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const O2=typeof window<"u",Yk=O2?P.useLayoutEffect:P.useEffect,jg=P.createContext(null);function M2(n,e){n.indexOf(e)===-1&&n.push(e)}function L2(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Fa=(n,e,t)=>t>e?e:t<n?n:t;let V2=()=>{};const Ba={},Qk=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Zk(n){return typeof n=="object"&&n!==null}const Jk=n=>/^0[^.\s]+$/u.test(n);function F2(n){let e;return()=>(e===void 0&&(e=n()),e)}const Js=n=>n,jH=(n,e)=>t=>e(n(t)),hp=(...n)=>n.reduce(jH),Mf=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class B2{constructor(){this.subscriptions=[]}add(e){return M2(this.subscriptions,e),()=>L2(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Yo=n=>n*1e3,Qo=n=>n/1e3;function eP(n,e){return e?n*(1e3/e):0}const tP=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,UH=1e-7,zH=12;function WH(n,e,t,r,i){let o,c,h=0;do c=e+(t-e)/2,o=tP(c,r,i)-n,o>0?t=c:e=c;while(Math.abs(o)>UH&&++h<zH);return c}function fp(n,e,t,r){if(n===e&&t===r)return Js;const i=o=>WH(o,0,1,n,t);return o=>o===0||o===1?o:tP(i(o),e,r)}const nP=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,rP=n=>e=>1-n(1-e),iP=fp(.33,1.53,.69,.99),j2=rP(iP),sP=nP(j2),oP=n=>(n*=2)<1?.5*j2(n):.5*(2-Math.pow(2,-10*(n-1))),U2=n=>1-Math.sin(Math.acos(n)),aP=rP(U2),lP=nP(U2),HH=fp(.42,0,1,1),GH=fp(0,0,.58,1),cP=fp(.42,0,.58,1),$H=n=>Array.isArray(n)&&typeof n[0]!="number",uP=n=>Array.isArray(n)&&typeof n[0]=="number",qH={linear:Js,easeIn:HH,easeInOut:cP,easeOut:GH,circIn:U2,circInOut:lP,circOut:aP,backIn:j2,backInOut:sP,backOut:iP,anticipate:oP},KH=n=>typeof n=="string",cT=n=>{if(uP(n)){V2(n.length===4);const[e,t,r,i]=n;return fp(e,t,r,i)}else if(KH(n))return qH[n];return n},Am=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function XH(n,e){let t=new Set,r=new Set,i=!1,o=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(w){c.has(w)&&(g.schedule(w),n()),w(h)}const g={schedule:(w,E=!1,T=!1)=>{const M=T&&i?t:r;return E&&c.add(w),M.has(w)||M.add(w),w},cancel:w=>{r.delete(w),c.delete(w)},process:w=>{if(h=w,i){o=!0;return}i=!0,[t,r]=[r,t],t.forEach(m),t.clear(),i=!1,o&&(o=!1,g.process(w))}};return g}const YH=40;function dP(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,c=Am.reduce((W,Y)=>(W[Y]=XH(o),W),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:w,update:E,preRender:T,render:R,postRender:M}=c,D=()=>{const W=Ba.useManualTiming?i.timestamp:performance.now();t=!1,Ba.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(W-i.timestamp,YH),1)),i.timestamp=W,i.isProcessing=!0,h.process(i),m.process(i),g.process(i),w.process(i),E.process(i),T.process(i),R.process(i),M.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(D))},L=()=>{t=!0,r=!0,i.isProcessing||n(D)};return{schedule:Am.reduce((W,Y)=>{const Z=c[Y];return W[Y]=(ie,F=!1,B=!1)=>(t||L(),Z.schedule(ie,F,B)),W},{}),cancel:W=>{for(let Y=0;Y<Am.length;Y++)c[Am[Y]].cancel(W)},state:i,steps:c}}const{schedule:nr,cancel:Hl,state:mi,steps:Jy}=dP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Js,!0);let t0;function QH(){t0=void 0}const hs={now:()=>(t0===void 0&&hs.set(mi.isProcessing||Ba.useManualTiming?mi.timestamp:performance.now()),t0),set:n=>{t0=n,queueMicrotask(QH)}},hP=n=>e=>typeof e=="string"&&e.startsWith(n),z2=hP("--"),ZH=hP("var(--"),W2=n=>ZH(n)?JH.test(n.split("/*")[0].trim()):!1,JH=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Qd={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lf={...Qd,transform:n=>Fa(0,1,n)},Tm={...Qd,default:1},uf=n=>Math.round(n*1e5)/1e5,H2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eG(n){return n==null}const tG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,G2=(n,e)=>t=>!!(typeof t=="string"&&tG.test(t)&&t.startsWith(n)||e&&!eG(t)&&Object.prototype.hasOwnProperty.call(t,e)),fP=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,o,c,h]=r.match(H2);return{[n]:parseFloat(i),[e]:parseFloat(o),[t]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},nG=n=>Fa(0,255,n),ex={...Qd,transform:n=>Math.round(nG(n))},Fc={test:G2("rgb","red"),parse:fP("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+ex.transform(n)+", "+ex.transform(e)+", "+ex.transform(t)+", "+uf(Lf.transform(r))+")"};function rG(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const yw={test:G2("#"),parse:rG,transform:Fc.transform},pp=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Il=pp("deg"),Zo=pp("%"),At=pp("px"),iG=pp("vh"),sG=pp("vw"),uT={...Zo,parse:n=>Zo.parse(n)/100,transform:n=>Zo.transform(n*100)},od={test:G2("hsl","hue"),parse:fP("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Zo.transform(uf(e))+", "+Zo.transform(uf(t))+", "+uf(Lf.transform(r))+")"},Lr={test:n=>Fc.test(n)||yw.test(n)||od.test(n),parse:n=>Fc.test(n)?Fc.parse(n):od.test(n)?od.parse(n):yw.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Fc.transform(n):od.transform(n),getAnimatableNone:n=>{const e=Lr.parse(n);return e.alpha=0,Lr.transform(e)}},oG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function aG(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(H2))==null?void 0:e.length)||0)+(((t=n.match(oG))==null?void 0:t.length)||0)>0}const pP="number",mP="color",lG="var",cG="var(",dT="${}",uG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vf(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let o=0;const h=e.replace(uG,m=>(Lr.test(m)?(r.color.push(o),i.push(mP),t.push(Lr.parse(m))):m.startsWith(cG)?(r.var.push(o),i.push(lG),t.push(m)):(r.number.push(o),i.push(pP),t.push(parseFloat(m))),++o,dT)).split(dT);return{values:t,split:h,indexes:r,types:i}}function gP(n){return Vf(n).values}function yP(n){const{split:e,types:t}=Vf(n),r=e.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],i[c]!==void 0){const h=t[c];h===pP?o+=uf(i[c]):h===mP?o+=Lr.transform(i[c]):o+=i[c]}return o}}const dG=n=>typeof n=="number"?0:Lr.test(n)?Lr.getAnimatableNone(n):n;function hG(n){const e=gP(n);return yP(n)(e.map(dG))}const Gl={test:aG,parse:gP,createTransformer:yP,getAnimatableNone:hG};function tx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function fG({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,o=0,c=0;if(!e)i=o=c=t;else{const h=t<.5?t*(1+e):t+e-t*e,m=2*t-h;i=tx(m,h,n+1/3),o=tx(m,h,n),c=tx(m,h,n-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function B0(n,e){return t=>t>0?e:n}const cr=(n,e,t)=>n+(e-n)*t,nx=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},pG=[yw,Fc,od],mG=n=>pG.find(e=>e.test(n));function hT(n){const e=mG(n);if(!e)return!1;let t=e.parse(n);return e===od&&(t=fG(t)),t}const fT=(n,e)=>{const t=hT(n),r=hT(e);if(!t||!r)return B0(n,e);const i={...t};return o=>(i.red=nx(t.red,r.red,o),i.green=nx(t.green,r.green,o),i.blue=nx(t.blue,r.blue,o),i.alpha=cr(t.alpha,r.alpha,o),Fc.transform(i))},xw=new Set(["none","hidden"]);function gG(n,e){return xw.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function yG(n,e){return t=>cr(n,e,t)}function $2(n){return typeof n=="number"?yG:typeof n=="string"?W2(n)?B0:Lr.test(n)?fT:vG:Array.isArray(n)?xP:typeof n=="object"?Lr.test(n)?fT:xG:B0}function xP(n,e){const t=[...n],r=t.length,i=n.map((o,c)=>$2(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)t[c]=i[c](o);return t}}function xG(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=$2(n[i])(n[i],e[i]));return i=>{for(const o in r)t[o]=r[o](i);return t}}function wG(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],c=n.indexes[o][r[o]],h=n.values[c]??0;t[i]=h,r[o]++}return t}const vG=(n,e)=>{const t=Gl.createTransformer(e),r=Vf(n),i=Vf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?xw.has(n)&&!i.values.length||xw.has(e)&&!r.values.length?gG(n,e):hp(xP(wG(r,i),i.values),t):B0(n,e)};function wP(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?cr(n,e,t):$2(n)(n,e)}const _G=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>nr.update(e,t),stop:()=>Hl(e),now:()=>mi.isProcessing?mi.timestamp:hs.now()}},vP=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let o=0;o<i;o++)r+=Math.round(n(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},j0=2e4;function q2(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<j0;)e+=t,r=n.next(e);return e>=j0?1/0:e}function EG(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(q2(r),j0);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:Qo(i)}}const bG=5;function _P(n,e,t){const r=Math.max(e-bG,0);return eP(t-n(r),e-r)}const yr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rx=.001;function IG({duration:n=yr.duration,bounce:e=yr.bounce,velocity:t=yr.velocity,mass:r=yr.mass}){let i,o,c=1-e;c=Fa(yr.minDamping,yr.maxDamping,c),n=Fa(yr.minDuration,yr.maxDuration,Qo(n)),c<1?(i=g=>{const w=g*c,E=w*n,T=w-t,R=ww(g,c),M=Math.exp(-E);return rx-T/R*M},o=g=>{const E=g*c*n,T=E*t+t,R=Math.pow(c,2)*Math.pow(g,2)*n,M=Math.exp(-E),D=ww(Math.pow(g,2),c);return(-i(g)+rx>0?-1:1)*((T-R)*M)/D}):(i=g=>{const w=Math.exp(-g*n),E=(g-t)*n+1;return-rx+w*E},o=g=>{const w=Math.exp(-g*n),E=(t-g)*(n*n);return w*E});const h=5/n,m=TG(i,o,h);if(n=Yo(n),isNaN(m))return{stiffness:yr.stiffness,damping:yr.damping,duration:n};{const g=Math.pow(m,2)*r;return{stiffness:g,damping:c*2*Math.sqrt(r*g),duration:n}}}const AG=12;function TG(n,e,t){let r=t;for(let i=1;i<AG;i++)r=r-n(r)/e(r);return r}function ww(n,e){return n*Math.sqrt(1-e*e)}const CG=["duration","bounce"],SG=["stiffness","damping","mass"];function pT(n,e){return e.some(t=>n[t]!==void 0)}function RG(n){let e={velocity:yr.velocity,stiffness:yr.stiffness,damping:yr.damping,mass:yr.mass,isResolvedFromDuration:!1,...n};if(!pT(n,SG)&&pT(n,CG))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,o=2*Fa(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:yr.mass,stiffness:i,damping:o}}else{const t=IG(n);e={...e,...t,mass:yr.mass},e.isResolvedFromDuration=!0}return e}function U0(n=yr.visualDuration,e=yr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const o=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],h={done:!1,value:o},{stiffness:m,damping:g,mass:w,duration:E,velocity:T,isResolvedFromDuration:R}=RG({...t,velocity:-Qo(t.velocity||0)}),M=T||0,D=g/(2*Math.sqrt(m*w)),L=c-o,G=Qo(Math.sqrt(m/w)),z=Math.abs(L)<5;r||(r=z?yr.restSpeed.granular:yr.restSpeed.default),i||(i=z?yr.restDelta.granular:yr.restDelta.default);let W;if(D<1){const Z=ww(G,D);W=ie=>{const F=Math.exp(-D*G*ie);return c-F*((M+D*G*L)/Z*Math.sin(Z*ie)+L*Math.cos(Z*ie))}}else if(D===1)W=Z=>c-Math.exp(-G*Z)*(L+(M+G*L)*Z);else{const Z=G*Math.sqrt(D*D-1);W=ie=>{const F=Math.exp(-D*G*ie),B=Math.min(Z*ie,300);return c-F*((M+D*G*L)*Math.sinh(B)+Z*L*Math.cosh(B))/Z}}const Y={calculatedDuration:R&&E||null,next:Z=>{const ie=W(Z);if(R)h.done=Z>=E;else{let F=Z===0?M:0;D<1&&(F=Z===0?Yo(M):_P(W,Z,ie));const B=Math.abs(F)<=r,H=Math.abs(c-ie)<=i;h.done=B&&H}return h.value=h.done?c:ie,h},toString:()=>{const Z=Math.min(q2(Y),j0),ie=vP(F=>Y.next(Z*F).value,Z,30);return Z+"ms "+ie},toTransition:()=>{}};return Y}U0.applyToOptions=n=>{const e=EG(n,100,U0);return n.ease=e.ease,n.duration=Yo(e.duration),n.type="keyframes",n};function vw({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:m,restDelta:g=.5,restSpeed:w}){const E=n[0],T={done:!1,value:E},R=B=>h!==void 0&&B<h||m!==void 0&&B>m,M=B=>h===void 0?m:m===void 0||Math.abs(h-B)<Math.abs(m-B)?h:m;let D=t*e;const L=E+D,G=c===void 0?L:c(L);G!==L&&(D=G-E);const z=B=>-D*Math.exp(-B/r),W=B=>G+z(B),Y=B=>{const H=z(B),ee=W(B);T.done=Math.abs(H)<=g,T.value=T.done?G:ee};let Z,ie;const F=B=>{R(T.value)&&(Z=B,ie=U0({keyframes:[T.value,M(T.value)],velocity:_P(W,B,T.value),damping:i,stiffness:o,restDelta:g,restSpeed:w}))};return F(0),{calculatedDuration:null,next:B=>{let H=!1;return!ie&&Z===void 0&&(H=!0,Y(B),F(B)),Z!==void 0&&B>=Z?ie.next(B-Z):(!H&&Y(B),T)}}}function NG(n,e,t){const r=[],i=t||Ba.mix||wP,o=n.length-1;for(let c=0;c<o;c++){let h=i(n[c],n[c+1]);if(e){const m=Array.isArray(e)?e[c]||Js:e;h=hp(m,h)}r.push(h)}return r}function kG(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const o=n.length;if(V2(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=NG(e,r,i),m=h.length,g=w=>{if(c&&w<n[0])return e[0];let E=0;if(m>1)for(;E<n.length-2&&!(w<n[E+1]);E++);const T=Mf(n[E],n[E+1],w);return h[E](T)};return t?w=>g(Fa(n[0],n[o-1],w)):g}function PG(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=Mf(0,e,r);n.push(cr(t,1,i))}}function DG(n){const e=[0];return PG(e,n.length-1),e}function OG(n,e){return n.map(t=>t*e)}function MG(n,e){return n.map(()=>e||cP).splice(0,n.length-1)}function df({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=$H(r)?r.map(cT):cT(r),o={done:!1,value:e[0]},c=OG(t&&t.length===e.length?t:DG(e),n),h=kG(c,e,{ease:Array.isArray(i)?i:MG(e,i)});return{calculatedDuration:n,next:m=>(o.value=h(m),o.done=m>=n,o)}}const LG=n=>n!==null;function K2(n,{repeat:e,repeatType:t="loop"},r,i=1){const o=n.filter(LG),h=i<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!h||r===void 0?o[h]:r}const VG={decay:vw,inertia:vw,tween:df,keyframes:df,spring:U0};function EP(n){typeof n.type=="string"&&(n.type=VG[n.type])}class X2{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const FG=n=>n/100;class Y2 extends X2{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==hs.now()&&this.tick(hs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;EP(e);const{type:t=df,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=e;let{keyframes:h}=e;const m=t||df;m!==df&&typeof h[0]!="number"&&(this.mixKeyframes=hp(FG,wP(h[0],h[1])),h=[0,100]);const g=m({...e,keyframes:h});o==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...h].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=q2(g));const{calculatedDuration:w}=g;this.calculatedDuration=w,this.resolvedDuration=w+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=g}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:w,repeat:E,repeatType:T,repeatDelay:R,type:M,onUpdate:D,finalKeyframe:L}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const G=this.currentTime-g*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?G<0:G>i;this.currentTime=Math.max(G,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let W=this.currentTime,Y=r;if(E){const B=Math.min(this.currentTime,i)/h;let H=Math.floor(B),ee=B%1;!ee&&B>=1&&(ee=1),ee===1&&H--,H=Math.min(H,E+1),!!(H%2)&&(T==="reverse"?(ee=1-ee,R&&(ee-=R/h)):T==="mirror"&&(Y=c)),W=Fa(0,1,ee)*h}const Z=z?{done:!1,value:w[0]}:Y.next(W);o&&(Z.value=o(Z.value));let{done:ie}=Z;!z&&m!==null&&(ie=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return F&&M!==vw&&(Z.value=K2(w,this.options,L,this.speed)),D&&D(Z.value),F&&this.finish(),Z}then(e,t){return this.finished.then(e,t)}get duration(){return Qo(this.calculatedDuration)}get time(){return Qo(this.currentTime)}set time(e){var t;e=Yo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(hs.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Qo(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=_G,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function BG(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Bc=n=>n*180/Math.PI,_w=n=>{const e=Bc(Math.atan2(n[1],n[0]));return Ew(e)},jG={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:_w,rotateZ:_w,skewX:n=>Bc(Math.atan(n[1])),skewY:n=>Bc(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Ew=n=>(n=n%360,n<0&&(n+=360),n),mT=_w,gT=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),yT=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),UG={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gT,scaleY:yT,scale:n=>(gT(n)+yT(n))/2,rotateX:n=>Ew(Bc(Math.atan2(n[6],n[5]))),rotateY:n=>Ew(Bc(Math.atan2(-n[2],n[0]))),rotateZ:mT,rotate:mT,skewX:n=>Bc(Math.atan(n[4])),skewY:n=>Bc(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function bw(n){return n.includes("scale")?1:0}function Iw(n,e){if(!n||n==="none")return bw(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=UG,i=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=jG,i=h}if(!i)return bw(e);const o=r[e],c=i[1].split(",").map(WG);return typeof o=="function"?o(c):c[o]}const zG=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Iw(t,e)};function WG(n){return parseFloat(n.trim())}const Zd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jd=new Set(Zd),xT=n=>n===Qd||n===At,HG=new Set(["x","y","z"]),GG=Zd.filter(n=>!HG.has(n));function $G(n){const e=[];return GG.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const $c={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Iw(e,"x"),y:(n,{transform:e})=>Iw(e,"y")};$c.translateX=$c.x;$c.translateY=$c.y;const qc=new Set;let Aw=!1,Tw=!1,Cw=!1;function bP(){if(Tw){const n=Array.from(qc).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=$G(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([o,c])=>{var h;(h=r.getValue(o))==null||h.set(c)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Tw=!1,Aw=!1,qc.forEach(n=>n.complete(Cw)),qc.clear()}function IP(){qc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Tw=!0)})}function qG(){Cw=!0,IP(),bP(),Cw=!1}class Q2{constructor(e,t,r,i,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(qc.add(this),Aw||(Aw=!0,nr.read(IP),nr.resolveKeyframes(bP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),c=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const h=r.readValue(t,c);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=c),i&&o===void 0&&i.set(e[0])}BG(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),qc.delete(this)}cancel(){this.state==="scheduled"&&(qc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const KG=n=>n.startsWith("--");function XG(n,e,t){KG(e)?n.style.setProperty(e,t):n.style[e]=t}const YG=F2(()=>window.ScrollTimeline!==void 0),QG={};function ZG(n,e){const t=F2(n);return()=>QG[e]??t()}const AP=ZG(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qh=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,wT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qh([0,.65,.55,1]),circOut:qh([.55,0,1,.45]),backIn:qh([.31,.01,.66,-.59]),backOut:qh([.33,1.53,.69,.99])};function TP(n,e){if(n)return typeof n=="function"?AP()?vP(n,e):"ease-out":uP(n)?qh(n):Array.isArray(n)?n.map(t=>TP(t,e)||wT.easeOut):wT[n]}function JG(n,e,t,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:h="easeOut",times:m}={},g=void 0){const w={[e]:t};m&&(w.offset=m);const E=TP(h,i);Array.isArray(E)&&(w.easing=E);const T={delay:r,duration:i,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return g&&(T.pseudoElement=g),n.animate(w,T)}function CP(n){return typeof n=="function"&&"applyToOptions"in n}function e$({type:n,...e}){return CP(n)&&AP()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class t$ extends X2{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:h,onComplete:m}=e;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=e,V2(typeof e.type!="string");const g=e$(e);this.animation=JG(t,r,i,g,o),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const w=K2(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(w):XG(t,r,w),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Qo(Number(e))}get time(){return Qo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Yo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&YG()?(this.animation.timeline=e,Js):t(this)}}const SP={anticipate:oP,backInOut:sP,circInOut:lP};function n$(n){return n in SP}function r$(n){typeof n.ease=="string"&&n$(n.ease)&&(n.ease=SP[n.ease])}const vT=10;class i$ extends t${constructor(e){r$(e),EP(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:o,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Y2({...c,autoplay:!1}),m=Yo(this.finishedTime??this.time);t.setWithVelocity(h.sample(m-vT).value,h.sample(m).value,vT),h.stop()}}const _T=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Gl.test(n)||n==="0")&&!n.startsWith("url("));function s$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function o$(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],c=_T(i,e),h=_T(o,e);return!c||!h?!1:s$(n)||(t==="spring"||CP(t))&&r}function Sw(n){n.duration=0,n.type}const a$=new Set(["opacity","clipPath","filter","transform"]),l$=F2(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function c$(n){var w;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:o,type:c}=n;if(!(((w=e==null?void 0:e.owner)==null?void 0:w.current)instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=e.owner.getProps();return l$()&&t&&a$.has(t)&&(t!=="transform"||!g)&&!m&&!r&&i!=="mirror"&&o!==0&&c!=="inertia"}const u$=40;class d$ extends X2{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",keyframes:h,name:m,motionValue:g,element:w,...E}){var M;super(),this.stop=()=>{var D,L;this._animation&&(this._animation.stop(),(D=this.stopTimeline)==null||D.call(this)),(L=this.keyframeResolver)==null||L.cancel()},this.createdAt=hs.now();const T={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:o,repeatType:c,name:m,motionValue:g,element:w,...E},R=(w==null?void 0:w.KeyframeResolver)||Q2;this.keyframeResolver=new R(h,(D,L,G)=>this.onKeyframesResolved(D,L,T,!G),m,g,w),(M=this.keyframeResolver)==null||M.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;const{name:o,type:c,velocity:h,delay:m,isHandoff:g,onUpdate:w}=r;this.resolvedAt=hs.now(),o$(e,o,c,h)||((Ba.instantAnimations||!m)&&(w==null||w(K2(e,r,t))),e[0]=e[e.length-1],Sw(r),r.repeat=0);const T={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>u$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},R=!g&&c$(T)?new i$({...T,element:T.motionValue.owner.current}):new Y2(T);R.finished.then(()=>this.notifyFinished()).catch(Js),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),qG()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const h$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function f$(n){const e=h$.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function RP(n,e,t=1){const[r,i]=f$(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return Qk(c)?parseFloat(c):c}return W2(i)?RP(i,e,t+1):i}function Z2(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const NP=new Set(["width","height","top","left","right","bottom",...Zd]),p$={test:n=>n==="auto",parse:n=>n},kP=n=>e=>e.test(n),PP=[Qd,At,Zo,Il,sG,iG,p$],ET=n=>PP.find(kP(n));function m$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Jk(n):!0}const g$=new Set(["brightness","contrast","saturate","opacity"]);function y$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(H2)||[];if(!r)return n;const i=t.replace(r,"");let o=g$.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+i+")"}const x$=/\b([a-z-]*)\(.*?\)/gu,Rw={...Gl,getAnimatableNone:n=>{const e=n.match(x$);return e?e.map(y$).join(" "):n}},bT={...Qd,transform:Math.round},w$={rotate:Il,rotateX:Il,rotateY:Il,rotateZ:Il,scale:Tm,scaleX:Tm,scaleY:Tm,scaleZ:Tm,skew:Il,skewX:Il,skewY:Il,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:Lf,originX:uT,originY:uT,originZ:At},J2={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,radius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,backgroundPositionX:At,backgroundPositionY:At,...w$,zIndex:bT,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:bT},v$={...J2,color:Lr,backgroundColor:Lr,outlineColor:Lr,fill:Lr,stroke:Lr,borderColor:Lr,borderTopColor:Lr,borderRightColor:Lr,borderBottomColor:Lr,borderLeftColor:Lr,filter:Rw,WebkitFilter:Rw},DP=n=>v$[n];function OP(n,e){let t=DP(n);return t!==Rw&&(t=Gl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const _$=new Set(["auto","none","0"]);function E$(n,e,t){let r=0,i;for(;r<n.length&&!i;){const o=n[r];typeof o=="string"&&!_$.has(o)&&Vf(o).values.length&&(i=n[r]),r++}if(i&&t)for(const o of e)n[o]=OP(t,i)}class b$ extends Q2{constructor(e,t,r,i,o){super(e,t,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let g=e[m];if(typeof g=="string"&&(g=g.trim(),W2(g))){const w=RP(g,t.current);w!==void 0&&(e[m]=w),m===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!NP.has(r)||e.length!==2)return;const[i,o]=e,c=ET(i),h=ET(o);if(c!==h)if(xT(c)&&xT(h))for(let m=0;m<e.length;m++){const g=e[m];typeof g=="string"&&(e[m]=parseFloat(g))}else $c[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||m$(e[i]))&&r.push(i);r.length&&E$(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$c[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var h;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,c=r[o];r[o]=$c[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([m,g])=>{e.getValue(m).set(g)}),this.resolveNoneKeyframes()}}function I$(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const MP=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function LP(n){return Zk(n)&&"offsetHeight"in n}const IT=30,A$=n=>!isNaN(parseFloat(n));class T${constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=hs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=hs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=A$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new B2);const r=this.events[e].add(t);return e==="change"?()=>{r(),nr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=hs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>IT)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,IT);return eP(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fd(n,e){return new T$(n,e)}const{schedule:e_}=dP(queueMicrotask,!1),fo={x:!1,y:!1};function VP(){return fo.x||fo.y}function C$(n){return n==="x"||n==="y"?fo[n]?null:(fo[n]=!0,()=>{fo[n]=!1}):fo.x||fo.y?null:(fo.x=fo.y=!0,()=>{fo.x=fo.y=!1})}function FP(n,e){const t=I$(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function AT(n){return!(n.pointerType==="touch"||VP())}function S$(n,e,t={}){const[r,i,o]=FP(n,t),c=h=>{if(!AT(h))return;const{target:m}=h,g=e(m,h);if(typeof g!="function"||!m)return;const w=E=>{AT(E)&&(g(E),m.removeEventListener("pointerleave",w))};m.addEventListener("pointerleave",w,i)};return r.forEach(h=>{h.addEventListener("pointerenter",c,i)}),o}const BP=(n,e)=>e?n===e?!0:BP(n,e.parentElement):!1,t_=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,R$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N$(n){return R$.has(n.tagName)||n.tabIndex!==-1}const n0=new WeakSet;function TT(n){return e=>{e.key==="Enter"&&n(e)}}function ix(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const k$=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=TT(()=>{if(n0.has(t))return;ix(t,"down");const i=TT(()=>{ix(t,"up")}),o=()=>ix(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function CT(n){return t_(n)&&!VP()}function P$(n,e,t={}){const[r,i,o]=FP(n,t),c=h=>{const m=h.currentTarget;if(!CT(h))return;n0.add(m);const g=e(m,h),w=(R,M)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",T),n0.has(m)&&n0.delete(m),CT(R)&&typeof g=="function"&&g(R,{success:M})},E=R=>{w(R,m===window||m===document||t.useGlobalTarget||BP(m,R.target))},T=R=>{w(R,!1)};window.addEventListener("pointerup",E,i),window.addEventListener("pointercancel",T,i)};return r.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",c,i),LP(h)&&(h.addEventListener("focus",g=>k$(g,i)),!N$(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function jP(n){return Zk(n)&&"ownerSVGElement"in n}function D$(n){return jP(n)&&n.tagName==="svg"}const Mi=n=>!!(n&&n.getVelocity),O$=[...PP,Lr,Gl],M$=n=>O$.find(kP(n)),n_=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class L$ extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=LP(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function V$({children:n,isPresent:e,anchorX:t,root:r}){const i=P.useId(),o=P.useRef(null),c=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=P.useContext(n_);return P.useInsertionEffect(()=>{const{width:m,height:g,top:w,left:E,right:T}=c.current;if(e||!o.current||!m||!g)return;const R=t==="left"?`left: ${E}`:`right: ${T}`;o.current.dataset.motionPopId=i;const M=document.createElement("style");h&&(M.nonce=h);const D=r??document.head;return D.appendChild(M),M.sheet&&M.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${w}px !important;
          }
        `),()=>{D.contains(M)&&D.removeChild(M)}},[e]),A.jsx(L$,{isPresent:e,childRef:o,sizeRef:c,children:P.cloneElement(n,{ref:o})})}const F$=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c,anchorX:h,root:m})=>{const g=D2(B$),w=P.useId();let E=!0,T=P.useMemo(()=>(E=!1,{id:w,initial:e,isPresent:t,custom:i,onExitComplete:R=>{g.set(R,!0);for(const M of g.values())if(!M)return;r&&r()},register:R=>(g.set(R,!1),()=>g.delete(R))}),[t,g,r]);return o&&E&&(T={...T}),P.useMemo(()=>{g.forEach((R,M)=>g.set(M,!1))},[t]),P.useEffect(()=>{!t&&!g.size&&r&&r()},[t]),c==="popLayout"&&(n=A.jsx(V$,{isPresent:t,anchorX:h,root:m,children:n})),A.jsx(jg.Provider,{value:T,children:n})};function B$(){return new Map}function UP(n=!0){const e=P.useContext(jg);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,o=P.useId();P.useEffect(()=>{if(n)return i(o)},[n]);const c=P.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,c]:[!0]}const Cm=n=>n.key||"";function ST(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const mp=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1,anchorX:h="left",root:m})=>{const[g,w]=UP(c),E=P.useMemo(()=>ST(n),[n]),T=c&&!g?[]:E.map(Cm),R=P.useRef(!0),M=P.useRef(E),D=D2(()=>new Map),[L,G]=P.useState(E),[z,W]=P.useState(E);Yk(()=>{R.current=!1,M.current=E;for(let ie=0;ie<z.length;ie++){const F=Cm(z[ie]);T.includes(F)?D.delete(F):D.get(F)!==!0&&D.set(F,!1)}},[z,T.length,T.join("-")]);const Y=[];if(E!==L){let ie=[...E];for(let F=0;F<z.length;F++){const B=z[F],H=Cm(B);T.includes(H)||(ie.splice(F,0,B),Y.push(B))}return o==="wait"&&Y.length&&(ie=Y),W(ST(ie)),G(E),null}const{forceRender:Z}=P.useContext(P2);return A.jsx(A.Fragment,{children:z.map(ie=>{const F=Cm(ie),B=c&&!g?!1:E===z||T.includes(F),H=()=>{if(D.has(F))D.set(F,!0);else return;let ee=!0;D.forEach(ne=>{ne||(ee=!1)}),ee&&(Z==null||Z(),W(M.current),c&&(w==null||w()),r&&r())};return A.jsx(F$,{isPresent:B,initial:!R.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:m,onExitComplete:B?void 0:H,anchorX:h,children:ie},F)})})},zP=P.createContext({strict:!1}),RT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bd={};for(const n in RT)Bd[n]={isEnabled:e=>RT[n].some(t=>!!e[t])};function j$(n){for(const e in n)Bd[e]={...Bd[e],...n[e]}}const U$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function z0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||U$.has(n)}let WP=n=>!z0(n);function z$(n){typeof n=="function"&&(WP=e=>e.startsWith("on")?!z0(e):n(e))}try{z$(require("@emotion/is-prop-valid").default)}catch{}function W$(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(WP(i)||t===!0&&z0(i)||!e&&!z0(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Ug=P.createContext({});function zg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Ff(n){return typeof n=="string"||Array.isArray(n)}const r_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],i_=["initial",...r_];function Wg(n){return zg(n.animate)||i_.some(e=>Ff(n[e]))}function HP(n){return!!(Wg(n)||n.variants)}function H$(n,e){if(Wg(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Ff(t)?t:void 0,animate:Ff(r)?r:void 0}}return n.inherit!==!1?e:{}}function G$(n){const{initial:e,animate:t}=H$(n,P.useContext(Ug));return P.useMemo(()=>({initial:e,animate:t}),[NT(e),NT(t)])}function NT(n){return Array.isArray(n)?n.join(" "):n}const Bf={};function $$(n){for(const e in n)Bf[e]=n[e],z2(e)&&(Bf[e].isCSSVariable=!0)}function GP(n,{layout:e,layoutId:t}){return Jd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Bf[n]||n==="opacity")}const q$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},K$=Zd.length;function X$(n,e,t){let r="",i=!0;for(let o=0;o<K$;o++){const c=Zd[o],h=n[c];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(c.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||t){const g=MP(h,J2[c]);if(!m){i=!1;const w=q$[c]||c;r+=`${w}(${g}) `}t&&(e[c]=g)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function s_(n,e,t){const{style:r,vars:i,transformOrigin:o}=n;let c=!1,h=!1;for(const m in e){const g=e[m];if(Jd.has(m)){c=!0;continue}else if(z2(m)){i[m]=g;continue}else{const w=MP(g,J2[m]);m.startsWith("origin")?(h=!0,o[m]=w):r[m]=w}}if(e.transform||(c||t?r.transform=X$(e,n.transform,t):r.transform&&(r.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:w=0}=o;r.transformOrigin=`${m} ${g} ${w}`}}const o_=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $P(n,e,t){for(const r in e)!Mi(e[r])&&!GP(r,t)&&(n[r]=e[r])}function Y$({transformTemplate:n},e){return P.useMemo(()=>{const t=o_();return s_(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Q$(n,e){const t=n.style||{},r={};return $P(r,t,n),Object.assign(r,Y$(n,e)),r}function Z$(n,e){const t={},r=Q$(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const J$={offset:"stroke-dashoffset",array:"stroke-dasharray"},eq={offset:"strokeDashoffset",array:"strokeDasharray"};function tq(n,e,t=1,r=0,i=!0){n.pathLength=1;const o=i?J$:eq;n[o.offset]=At.transform(-r);const c=At.transform(e),h=At.transform(t);n[o.array]=`${c} ${h}`}function qP(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...h},m,g,w){if(s_(n,h,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:T}=n;E.transform&&(T.transform=E.transform,delete E.transform),(T.transform||E.transformOrigin)&&(T.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),T.transform&&(T.transformBox=(w==null?void 0:w.transformBox)??"fill-box",delete E.transformBox),e!==void 0&&(E.x=e),t!==void 0&&(E.y=t),r!==void 0&&(E.scale=r),i!==void 0&&tq(E,i,o,c,!1)}const KP=()=>({...o_(),attrs:{}}),XP=n=>typeof n=="string"&&n.toLowerCase()==="svg";function nq(n,e,t,r){const i=P.useMemo(()=>{const o=KP();return qP(o,e,XP(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};$P(o,n.style,n),i.style={...o,...i.style}}return i}const rq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function a_(n){return typeof n!="string"||n.includes("-")?!1:!!(rq.indexOf(n)>-1||/[A-Z]/u.test(n))}function iq(n,e,t,{latestValues:r},i,o=!1){const h=(a_(n)?nq:Z$)(e,r,i,n),m=W$(e,typeof n=="string",o),g=n!==P.Fragment?{...m,...h,ref:t}:{},{children:w}=e,E=P.useMemo(()=>Mi(w)?w.get():w,[w]);return P.createElement(n,{...g,children:E})}function kT(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function l_(n,e,t,r){if(typeof e=="function"){const[i,o]=kT(r);e=e(t!==void 0?t:n.custom,i,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,o]=kT(r);e=e(t!==void 0?t:n.custom,i,o)}return e}function r0(n){return Mi(n)?n.get():n}function sq({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:oq(t,r,i,n),renderState:e()}}function oq(n,e,t,r){const i={},o=r(n,{});for(const T in o)i[T]=r0(o[T]);let{initial:c,animate:h}=n;const m=Wg(n),g=HP(n);e&&g&&!m&&n.inherit!==!1&&(c===void 0&&(c=e.initial),h===void 0&&(h=e.animate));let w=t?t.initial===!1:!1;w=w||c===!1;const E=w?h:c;if(E&&typeof E!="boolean"&&!zg(E)){const T=Array.isArray(E)?E:[E];for(let R=0;R<T.length;R++){const M=l_(n,T[R]);if(M){const{transitionEnd:D,transition:L,...G}=M;for(const z in G){let W=G[z];if(Array.isArray(W)){const Y=w?W.length-1:0;W=W[Y]}W!==null&&(i[z]=W)}for(const z in D)i[z]=D[z]}}}return i}const YP=n=>(e,t)=>{const r=P.useContext(Ug),i=P.useContext(jg),o=()=>sq(n,e,r,i);return t?o():D2(o)};function c_(n,e,t){var o;const{style:r}=n,i={};for(const c in r)(Mi(r[c])||e.style&&Mi(e.style[c])||GP(c,n)||((o=t==null?void 0:t.getValue(c))==null?void 0:o.liveStyle)!==void 0)&&(i[c]=r[c]);return i}const aq=YP({scrapeMotionValuesFromProps:c_,createRenderState:o_});function QP(n,e,t){const r=c_(n,e,t);for(const i in n)if(Mi(n[i])||Mi(e[i])){const o=Zd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=n[i]}return r}const lq=YP({scrapeMotionValuesFromProps:QP,createRenderState:KP}),cq=Symbol.for("motionComponentSymbol");function ad(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function uq(n,e,t){return P.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ad(t)&&(t.current=r))},[e])}const u_=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dq="framerAppearId",ZP="data-"+u_(dq),JP=P.createContext({});function hq(n,e,t,r,i){var D,L;const{visualElement:o}=P.useContext(Ug),c=P.useContext(zP),h=P.useContext(jg),m=P.useContext(n_).reducedMotion,g=P.useRef(null);r=r||c.renderer,!g.current&&r&&(g.current=r(n,{visualState:e,parent:o,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const w=g.current,E=P.useContext(JP);w&&!w.projection&&i&&(w.type==="html"||w.type==="svg")&&fq(g.current,t,i,E);const T=P.useRef(!1);P.useInsertionEffect(()=>{w&&T.current&&w.update(t,h)});const R=t[ZP],M=P.useRef(!!R&&!((D=window.MotionHandoffIsComplete)!=null&&D.call(window,R))&&((L=window.MotionHasOptimisedAnimation)==null?void 0:L.call(window,R)));return Yk(()=>{w&&(T.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),M.current&&w.animationState&&w.animationState.animateChanges())}),P.useEffect(()=>{w&&(!M.current&&w.animationState&&w.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{var G;(G=window.MotionHandoffMarkAsComplete)==null||G.call(window,R)}),M.current=!1),w.enteringChildren=void 0)}),w}function fq(n,e,t,r){const{layoutId:i,layout:o,drag:c,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:w}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:e4(n.parent)),n.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||h&&ad(h),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:w,layoutScroll:m,layoutRoot:g})}function e4(n){if(n)return n.options.allowProjection!==!1?n.projection:e4(n.parent)}function sx(n,{forwardMotionProps:e=!1}={},t,r){t&&j$(t);const i=a_(n)?lq:aq;function o(h,m){let g;const w={...P.useContext(n_),...h,layoutId:pq(h)},{isStatic:E}=w,T=G$(h),R=i(h,E);if(!E&&O2){mq();const M=gq(w);g=M.MeasureLayout,T.visualElement=hq(n,R,w,r,M.ProjectionNode)}return A.jsxs(Ug.Provider,{value:T,children:[g&&T.visualElement?A.jsx(g,{visualElement:T.visualElement,...w}):null,iq(n,h,uq(R,T.visualElement,m),R,E,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=P.forwardRef(o);return c[cq]=n,c}function pq({layoutId:n}){const e=P.useContext(P2).id;return e&&n!==void 0?e+"-"+n:n}function mq(n,e){P.useContext(zP).strict}function gq(n){const{drag:e,layout:t}=Bd;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function yq(n,e){if(typeof Proxy>"u")return sx;const t=new Map,r=(o,c)=>sx(o,c,n,e),i=(o,c)=>r(o,c);return new Proxy(i,{get:(o,c)=>c==="create"?r:(t.has(c)||t.set(c,sx(c,void 0,n,e)),t.get(c))})}function t4({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function xq({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function wq(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function ox(n){return n===void 0||n===1}function Nw({scale:n,scaleX:e,scaleY:t}){return!ox(n)||!ox(e)||!ox(t)}function Rc(n){return Nw(n)||n4(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function n4(n){return PT(n.x)||PT(n.y)}function PT(n){return n&&n!=="0%"}function W0(n,e,t){const r=n-t,i=e*r;return t+i}function DT(n,e,t,r,i){return i!==void 0&&(n=W0(n,i,r)),W0(n,t,r)+e}function kw(n,e=0,t=1,r,i){n.min=DT(n.min,e,t,r,i),n.max=DT(n.max,e,t,r,i)}function r4(n,{x:e,y:t}){kw(n.x,e.translate,e.scale,e.originPoint),kw(n.y,t.translate,t.scale,t.originPoint)}const OT=.999999999999,MT=1.0000000000001;function vq(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let o,c;for(let h=0;h<i;h++){o=t[h],c=o.projectionDelta;const{visualElement:m}=o.options;m&&m.props.style&&m.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&cd(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,r4(n,c)),r&&Rc(o.latestValues)&&cd(n,o.latestValues))}e.x<MT&&e.x>OT&&(e.x=1),e.y<MT&&e.y>OT&&(e.y=1)}function ld(n,e){n.min=n.min+e,n.max=n.max+e}function LT(n,e,t,r,i=.5){const o=cr(n.min,n.max,i);kw(n,e,t,o,r)}function cd(n,e){LT(n.x,e.x,e.scaleX,e.scale,e.originX),LT(n.y,e.y,e.scaleY,e.scale,e.originY)}function i4(n,e){return t4(wq(n.getBoundingClientRect(),e))}function _q(n,e,t){const r=i4(n,t),{scroll:i}=e;return i&&(ld(r.x,i.offset.x),ld(r.y,i.offset.y)),r}const VT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ud=()=>({x:VT(),y:VT()}),FT=()=>({min:0,max:0}),Nr=()=>({x:FT(),y:FT()}),Pw={current:null},s4={current:!1};function Eq(){if(s4.current=!0,!!O2)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Pw.current=n.matches;n.addEventListener("change",e),e()}else Pw.current=!1}const bq=new WeakMap;function Iq(n,e,t){for(const r in e){const i=e[r],o=t[r];if(Mi(i))n.addValue(r,i);else if(Mi(o))n.addValue(r,Fd(i,{owner:n}));else if(o!==i)if(n.hasValue(r)){const c=n.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=n.getStaticValue(r);n.addValue(r,Fd(c!==void 0?c:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const BT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Aq{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=hs.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,nr.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=c;this.latestValues=m,this.baseTarget={...m},this.initialValues=t.initial?{...m}:{},this.renderState=g,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Wg(t),this.isVariantNode=HP(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,...E}=this.scrapeMotionValuesFromProps(t,{},this);for(const T in E){const R=E[T];m[T]!==void 0&&Mi(R)&&R.set(m[T])}}mount(e){var t;this.current=e,bq.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),s4.current||Eq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Pw.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Hl(this.notifyUpdate),Hl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Jd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&nr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bd){const t=Bd[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<BT.length;r++){const i=BT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=e[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=Iq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Fd(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Qk(r)||Jk(r))?r=parseFloat(r):!M$(r)&&Gl.test(t)&&(r=OP(e,t)),this.setBaseTarget(e,Mi(r)?r.get():r)),Mi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const c=l_(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);c&&(r=c[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Mi(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new B2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){e_.render(this.render)}}class o4 extends Aq{constructor(){super(...arguments),this.KeyframeResolver=b$}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function a4(n,{style:e,vars:t},r,i){const o=n.style;let c;for(c in e)o[c]=e[c];i==null||i.applyProjectionStyles(o,r);for(c in t)o.setProperty(c,t[c])}function Tq(n){return window.getComputedStyle(n)}class Cq extends o4{constructor(){super(...arguments),this.type="html",this.renderInstance=a4}readValueFromInstance(e,t){var r;if(Jd.has(t))return(r=this.projection)!=null&&r.isProjecting?bw(t):zG(e,t);{const i=Tq(e),o=(z2(t)?i.getPropertyValue(t):i[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return i4(e,t)}build(e,t,r){s_(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return c_(e,t,r)}}const l4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Sq(n,e,t,r){a4(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(l4.has(i)?i:u_(i),e.attrs[i])}class Rq extends o4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Jd.has(t)){const r=DP(t);return r&&r.default||0}return t=l4.has(t)?t:u_(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return QP(e,t,r)}build(e,t,r){qP(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){Sq(e,t,r,i)}mount(e){this.isSVGTag=XP(e.tagName),super.mount(e)}}const Nq=(n,e)=>a_(n)?new Rq(e):new Cq(e,{allowProjection:n!==P.Fragment});function gd(n,e,t){const r=n.getProps();return l_(r,e,t!==void 0?t:r.custom,n)}const Dw=n=>Array.isArray(n);function kq(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Fd(t))}function Pq(n){return Dw(n)?n[n.length-1]||0:n}function Dq(n,e){const t=gd(n,e);let{transitionEnd:r={},transition:i={},...o}=t||{};o={...o,...r};for(const c in o){const h=Pq(o[c]);kq(n,c,h)}}function Oq(n){return!!(Mi(n)&&n.add)}function Ow(n,e){const t=n.getValue("willChange");if(Oq(t))return t.add(e);if(!t&&Ba.WillChange){const r=new Ba.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function c4(n){return n.props[ZP]}const Mq=n=>n!==null;function Lq(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Mq),o=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[o]}const Vq={type:"spring",stiffness:500,damping:25,restSpeed:10},Fq=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Bq={type:"keyframes",duration:.8},jq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Uq=(n,{keyframes:e})=>e.length>2?Bq:Jd.has(n)?n.startsWith("scale")?Fq(e[1]):Vq:jq;function zq({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:h,from:m,elapsed:g,...w}){return!!Object.keys(w).length}const d_=(n,e,t,r={},i,o)=>c=>{const h=Z2(r,n)||{},m=h.delay||r.delay||0;let{elapsed:g=0}=r;g=g-Yo(m);const w={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:o?void 0:i};zq(h)||Object.assign(w,Uq(n,w)),w.duration&&(w.duration=Yo(w.duration)),w.repeatDelay&&(w.repeatDelay=Yo(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let E=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(Sw(w),w.delay===0&&(E=!0)),(Ba.instantAnimations||Ba.skipAnimations)&&(E=!0,Sw(w),w.delay=0),w.allowFlatten=!h.type&&!h.ease,E&&!o&&e.get()!==void 0){const T=Lq(w.keyframes,h);if(T!==void 0){nr.update(()=>{w.onUpdate(T),w.onComplete()});return}}return h.isSync?new Y2(w):new d$(w)};function Wq({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function u4(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:c,...h}=e;r&&(o=r);const m=[],g=i&&n.animationState&&n.animationState.getState()[i];for(const w in h){const E=n.getValue(w,n.latestValues[w]??null),T=h[w];if(T===void 0||g&&Wq(g,w))continue;const R={delay:t,...Z2(o||{},w)},M=E.get();if(M!==void 0&&!E.isAnimating&&!Array.isArray(T)&&T===M&&!R.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const G=c4(n);if(G){const z=window.MotionHandoffAnimation(G,w,nr);z!==null&&(R.startTime=z,D=!0)}}Ow(n,w),E.start(d_(w,E,T,n.shouldReduceMotion&&NP.has(w)?{type:!1}:R,n,D));const L=E.animation;L&&m.push(L)}return c&&Promise.all(m).then(()=>{nr.update(()=>{c&&Dq(n,c)})}),m}function d4(n,e,t,r=0,i=1){const o=Array.from(n).sort((g,w)=>g.sortNodePosition(w)).indexOf(e),c=n.size,h=(c-1)*r;return typeof t=="function"?t(o,c):i===1?o*r:h-o*r}function Mw(n,e,t={}){var m;const r=gd(n,e,t.type==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const o=r?()=>Promise.all(u4(n,r,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(g=0)=>{const{delayChildren:w=0,staggerChildren:E,staggerDirection:T}=i;return Hq(n,e,g,w,E,T,t)}:()=>Promise.resolve(),{when:h}=i;if(h){const[g,w]=h==="beforeChildren"?[o,c]:[c,o];return g().then(()=>w())}else return Promise.all([o(),c(t.delay)])}function Hq(n,e,t=0,r=0,i=0,o=1,c){const h=[];for(const m of n.variantChildren)m.notify("AnimationStart",e),h.push(Mw(m,e,{...c,delay:t+(typeof r=="function"?0:r)+d4(n.variantChildren,m,r,i,o)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(h)}function Gq(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>Mw(n,o,t));r=Promise.all(i)}else if(typeof e=="string")r=Mw(n,e,t);else{const i=typeof e=="function"?gd(n,e,t.custom):e;r=Promise.all(u4(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function h4(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const $q=i_.length;function f4(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?f4(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<$q;t++){const r=i_[t],i=n.props[r];(Ff(i)||i===!1)&&(e[r]=i)}return e}const qq=[...r_].reverse(),Kq=r_.length;function Xq(n){return e=>Promise.all(e.map(({animation:t,options:r})=>Gq(n,t,r)))}function Yq(n){let e=Xq(n),t=jT(),r=!0;const i=m=>(g,w)=>{var T;const E=gd(n,w,m==="exit"?(T=n.presenceContext)==null?void 0:T.custom:void 0);if(E){const{transition:R,transitionEnd:M,...D}=E;g={...g,...D,...M}}return g};function o(m){e=m(n)}function c(m){const{props:g}=n,w=f4(n.parent)||{},E=[],T=new Set;let R={},M=1/0;for(let L=0;L<Kq;L++){const G=qq[L],z=t[G],W=g[G]!==void 0?g[G]:w[G],Y=Ff(W),Z=G===m?z.isActive:null;Z===!1&&(M=L);let ie=W===w[G]&&W!==g[G]&&Y;if(ie&&r&&n.manuallyAnimateOnMount&&(ie=!1),z.protectedKeys={...R},!z.isActive&&Z===null||!W&&!z.prevProp||zg(W)||typeof W=="boolean")continue;const F=Qq(z.prevProp,W);let B=F||G===m&&z.isActive&&!ie&&Y||L>M&&Y,H=!1;const ee=Array.isArray(W)?W:[W];let ne=ee.reduce(i(G),{});Z===!1&&(ne={});const{prevResolvedValues:te={}}=z,K={...te,...ne},we=xe=>{B=!0,T.has(xe)&&(H=!0,T.delete(xe)),z.needsAnimating[xe]=!0;const oe=n.getValue(xe);oe&&(oe.liveStyle=!1)};for(const xe in K){const oe=ne[xe],Te=te[xe];if(R.hasOwnProperty(xe))continue;let Ne=!1;Dw(oe)&&Dw(Te)?Ne=!h4(oe,Te):Ne=oe!==Te,Ne?oe!=null?we(xe):T.add(xe):oe!==void 0&&T.has(xe)?we(xe):z.protectedKeys[xe]=!0}z.prevProp=W,z.prevResolvedValues=ne,z.isActive&&(R={...R,...ne}),r&&n.blockInitialAnimation&&(B=!1);const se=ie&&F;B&&(!se||H)&&E.push(...ee.map(xe=>{const oe={type:G};if(typeof xe=="string"&&r&&!se&&n.manuallyAnimateOnMount&&n.parent){const{parent:Te}=n,Ne=gd(Te,xe);if(Te.enteringChildren&&Ne){const{delayChildren:ae}=Ne.transition||{};oe.delay=d4(Te.enteringChildren,n,ae)}}return{animation:xe,options:oe}}))}if(T.size){const L={};if(typeof g.initial!="boolean"){const G=gd(n,Array.isArray(g.initial)?g.initial[0]:g.initial);G&&G.transition&&(L.transition=G.transition)}T.forEach(G=>{const z=n.getBaseTarget(G),W=n.getValue(G);W&&(W.liveStyle=!0),L[G]=z??null}),E.push({animation:L})}let D=!!E.length;return r&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(E):Promise.resolve()}function h(m,g){var E;if(t[m].isActive===g)return Promise.resolve();(E=n.variantChildren)==null||E.forEach(T=>{var R;return(R=T.animationState)==null?void 0:R.setActive(m,g)}),t[m].isActive=g;const w=c(m);for(const T in t)t[T].protectedKeys={};return w}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>t,reset:()=>{t=jT(),r=!0}}}function Qq(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!h4(e,n):!1}function Ac(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jT(){return{animate:Ac(!0),whileInView:Ac(),whileHover:Ac(),whileTap:Ac(),whileDrag:Ac(),whileFocus:Ac(),exit:Ac()}}class tc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Zq extends tc{constructor(e){super(e),e.animationState||(e.animationState=Yq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();zg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Jq=0;class eK extends tc{constructor(){super(...arguments),this.id=Jq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const tK={animation:{Feature:Zq},exit:{Feature:eK}};function jf(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function gp(n){return{point:{x:n.pageX,y:n.pageY}}}const nK=n=>e=>t_(e)&&n(e,gp(e));function hf(n,e,t,r){return jf(n,e,nK(t),r)}const p4=1e-4,rK=1-p4,iK=1+p4,m4=.01,sK=0-m4,oK=0+m4;function Xi(n){return n.max-n.min}function aK(n,e,t){return Math.abs(n-e)<=t}function UT(n,e,t,r=.5){n.origin=r,n.originPoint=cr(e.min,e.max,n.origin),n.scale=Xi(t)/Xi(e),n.translate=cr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=rK&&n.scale<=iK||isNaN(n.scale))&&(n.scale=1),(n.translate>=sK&&n.translate<=oK||isNaN(n.translate))&&(n.translate=0)}function ff(n,e,t,r){UT(n.x,e.x,t.x,r?r.originX:void 0),UT(n.y,e.y,t.y,r?r.originY:void 0)}function zT(n,e,t){n.min=t.min+e.min,n.max=n.min+Xi(e)}function lK(n,e,t){zT(n.x,e.x,t.x),zT(n.y,e.y,t.y)}function WT(n,e,t){n.min=e.min-t.min,n.max=n.min+Xi(e)}function pf(n,e,t){WT(n.x,e.x,t.x),WT(n.y,e.y,t.y)}function Ks(n){return[n("x"),n("y")]}const g4=({current:n})=>n?n.ownerDocument.defaultView:null,HT=(n,e)=>Math.abs(n-e);function cK(n,e){const t=HT(n.x,e.x),r=HT(n.y,e.y);return Math.sqrt(t**2+r**2)}class y4{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=lx(this.lastMoveEventInfo,this.history),R=this.startEvent!==null,M=cK(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!R&&!M)return;const{point:D}=T,{timestamp:L}=mi;this.history.push({...D,timestamp:L});const{onStart:G,onMove:z}=this.handlers;R||(G&&G(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,T)},this.handlePointerMove=(T,R)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=ax(R,this.transformPagePoint),nr.update(this.updatePoint,!0)},this.handlePointerUp=(T,R)=>{this.end();const{onEnd:M,onSessionEnd:D,resumeAnimation:L}=this.handlers;if(this.dragSnapToOrigin&&L&&L(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const G=lx(T.type==="pointercancel"?this.lastMoveEventInfo:ax(R,this.transformPagePoint),this.history);this.startEvent&&M&&M(T,G),D&&D(T,G)},!t_(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const h=gp(e),m=ax(h,this.transformPagePoint),{point:g}=m,{timestamp:w}=mi;this.history=[{...g,timestamp:w}];const{onSessionStart:E}=t;E&&E(e,lx(m,this.history)),this.removeListeners=hp(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Hl(this.updatePoint)}}function ax(n,e){return e?{point:e(n.point)}:n}function GT(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lx({point:n},e){return{point:n,delta:GT(n,x4(e)),offset:GT(n,uK(e)),velocity:dK(e,.1)}}function uK(n){return n[0]}function x4(n){return n[n.length-1]}function dK(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=x4(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Yo(e)));)t--;if(!r)return{x:0,y:0};const o=Qo(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function hK(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?cr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?cr(t,n,r.max):Math.min(n,t)),n}function $T(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function fK(n,{top:e,left:t,bottom:r,right:i}){return{x:$T(n.x,t,i),y:$T(n.y,e,r)}}function qT(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function pK(n,e){return{x:qT(n.x,e.x),y:qT(n.y,e.y)}}function mK(n,e){let t=.5;const r=Xi(n),i=Xi(e);return i>r?t=Mf(e.min,e.max-r,n.min):r>i&&(t=Mf(n.min,n.max-i,e.min)),Fa(0,1,t)}function gK(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Lw=.35;function yK(n=Lw){return n===!1?n=0:n===!0&&(n=Lw),{x:KT(n,"left","right"),y:KT(n,"top","bottom")}}function KT(n,e,t){return{min:XT(n,e),max:XT(n,t)}}function XT(n,e){return typeof n=="number"?n:n[e]||0}const xK=new WeakMap;class wK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=E=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(gp(E).point)},c=(E,T)=>{const{drag:R,dragPropagation:M,onDragStart:D}=this.getProps();if(R&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=C$(R),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ks(G=>{let z=this.getAxisMotionValue(G).get()||0;if(Zo.test(z)){const{projection:W}=this.visualElement;if(W&&W.layout){const Y=W.layout.layoutBox[G];Y&&(z=Xi(Y)*(parseFloat(z)/100))}}this.originPoint[G]=z}),D&&nr.postRender(()=>D(E,T)),Ow(this.visualElement,"transform");const{animationState:L}=this.visualElement;L&&L.setActive("whileDrag",!0)},h=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T;const{dragPropagation:R,dragDirectionLock:M,onDirectionLock:D,onDrag:L}=this.getProps();if(!R&&!this.openDragLock)return;const{offset:G}=T;if(M&&this.currentDirection===null){this.currentDirection=vK(G),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",T.point,G),this.updateAxis("y",T.point,G),this.visualElement.render(),L&&L(E,T)},m=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T,this.stop(E,T),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Ks(E=>{var T;return this.getAnimationState(E)==="paused"&&((T=this.getAxisMotionValue(E).animation)==null?void 0:T.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new y4(e,{onSessionStart:o,onStart:c,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:r,contextWindow:g4(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&nr.postRender(()=>h(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Sm(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=hK(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&ad(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=fK(r.layoutBox,e):this.constraints=!1,this.elastic=yK(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ks(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=gK(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ad(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=_q(r,i.root,this.visualElement.getTransformPagePoint());let c=pK(i.layout.layoutBox,o);if(t){const h=t(xq(c));this.hasMutatedConstraints=!!h,h&&(c=t4(h))}return c}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=Ks(w=>{if(!Sm(w,t,this.currentDirection))return;let E=m&&m[w]||{};c&&(E={min:0,max:0});const T=i?200:1e6,R=i?40:1e7,M={type:"inertia",velocity:r?e[w]:0,bounceStiffness:T,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...o,...E};return this.startAxisValueAnimation(w,M)});return Promise.all(g).then(h)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Ow(this.visualElement,e),r.start(d_(e,r,0,t,this.visualElement,!1))}stopAnimation(){Ks(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ks(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ks(t=>{const{drag:r}=this.getProps();if(!Sm(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(t);if(i&&i.layout){const{min:c,max:h}=i.layout.layoutBox[t];o.set(e[t]-cr(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ad(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ks(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const m=h.get();i[c]=mK({min:m,max:m},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ks(c=>{if(!Sm(c,e,null))return;const h=this.getAxisMotionValue(c),{min:m,max:g}=this.constraints[c];h.set(cr(m,g,i[c]))})}addListeners(){if(!this.visualElement.current)return;xK.set(this.visualElement,this);const e=this.visualElement.current,t=hf(e,"pointerdown",m=>{const{drag:g,dragListener:w=!0}=this.getProps();g&&w&&this.start(m)}),r=()=>{const{dragConstraints:m}=this.getProps();ad(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nr.read(r);const c=jf(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(Ks(w=>{const E=this.getAxisMotionValue(w);E&&(this.originPoint[w]+=m[w].translate,E.set(E.get()+m[w].translate))}),this.visualElement.render())});return()=>{c(),t(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=Lw,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function Sm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function vK(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class _K extends tc{constructor(e){super(e),this.removeGroupControls=Js,this.removeListeners=Js,this.controls=new wK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Js}unmount(){this.removeGroupControls(),this.removeListeners()}}const YT=n=>(e,t)=>{n&&nr.postRender(()=>n(e,t))};class EK extends tc{constructor(){super(...arguments),this.removePointerDownListener=Js}onPointerDown(e){this.session=new y4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:g4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:YT(e),onStart:YT(t),onMove:r,onEnd:(o,c)=>{delete this.session,i&&nr.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const i0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function QT(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Vh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(At.test(n))n=parseFloat(n);else return n;const t=QT(n,e.target.x),r=QT(n,e.target.y);return`${t}% ${r}%`}},bK={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=Gl.parse(n);if(i.length>5)return r;const o=Gl.createTransformer(n),c=typeof i[0]!="number"?1:0,h=t.x.scale*e.x,m=t.y.scale*e.y;i[0+c]/=h,i[1+c]/=m;const g=cr(h,m,.5);return typeof i[2+c]=="number"&&(i[2+c]/=g),typeof i[3+c]=="number"&&(i[3+c]/=g),o(i)}};let cx=!1;class IK extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;$$(AK),o&&(t.group&&t.group.add(o),r&&r.register&&i&&r.register(o),cx&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),i0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:o}=this.props,{projection:c}=r;return c&&(c.isPresent=o,cx=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==o?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||nr.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),e_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;cx=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function w4(n){const[e,t]=UP(),r=P.useContext(P2);return A.jsx(IK,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(JP),isPresent:e,safeToRemove:t})}const AK={borderRadius:{...Vh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vh,borderTopRightRadius:Vh,borderBottomLeftRadius:Vh,borderBottomRightRadius:Vh,boxShadow:bK};function TK(n,e,t){const r=Mi(n)?n:Fd(n);return r.start(d_("",r,e,t)),r.animation}const CK=(n,e)=>n.depth-e.depth;class SK{constructor(){this.children=[],this.isDirty=!1}add(e){M2(this.children,e),this.isDirty=!0}remove(e){L2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(CK),this.isDirty=!1,this.children.forEach(e)}}function RK(n,e){const t=hs.now(),r=({timestamp:i})=>{const o=i-t;o>=e&&(Hl(r),n(o-e))};return nr.setup(r,!0),()=>Hl(r)}const v4=["TopLeft","TopRight","BottomLeft","BottomRight"],NK=v4.length,ZT=n=>typeof n=="string"?parseFloat(n):n,JT=n=>typeof n=="number"||At.test(n);function kK(n,e,t,r,i,o){i?(n.opacity=cr(0,t.opacity??1,PK(r)),n.opacityExit=cr(e.opacity??1,0,DK(r))):o&&(n.opacity=cr(e.opacity??1,t.opacity??1,r));for(let c=0;c<NK;c++){const h=`border${v4[c]}Radius`;let m=eC(e,h),g=eC(t,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||JT(m)===JT(g)?(n[h]=Math.max(cr(ZT(m),ZT(g),r),0),(Zo.test(g)||Zo.test(m))&&(n[h]+="%")):n[h]=g}(e.rotate||t.rotate)&&(n.rotate=cr(e.rotate||0,t.rotate||0,r))}function eC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const PK=_4(0,.5,aP),DK=_4(.5,.95,Js);function _4(n,e,t){return r=>r<n?0:r>e?1:t(Mf(n,e,r))}function tC(n,e){n.min=e.min,n.max=e.max}function qs(n,e){tC(n.x,e.x),tC(n.y,e.y)}function nC(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function rC(n,e,t,r,i){return n-=e,n=W0(n,1/t,r),i!==void 0&&(n=W0(n,1/i,r)),n}function OK(n,e=0,t=1,r=.5,i,o=n,c=n){if(Zo.test(e)&&(e=parseFloat(e),e=cr(c.min,c.max,e/100)-c.min),typeof e!="number")return;let h=cr(o.min,o.max,r);n===o&&(h-=e),n.min=rC(n.min,e,t,h,i),n.max=rC(n.max,e,t,h,i)}function iC(n,e,[t,r,i],o,c){OK(n,e[t],e[r],e[i],e.scale,o,c)}const MK=["x","scaleX","originX"],LK=["y","scaleY","originY"];function sC(n,e,t,r){iC(n.x,e,MK,t?t.x:void 0,r?r.x:void 0),iC(n.y,e,LK,t?t.y:void 0,r?r.y:void 0)}function oC(n){return n.translate===0&&n.scale===1}function E4(n){return oC(n.x)&&oC(n.y)}function aC(n,e){return n.min===e.min&&n.max===e.max}function VK(n,e){return aC(n.x,e.x)&&aC(n.y,e.y)}function lC(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function b4(n,e){return lC(n.x,e.x)&&lC(n.y,e.y)}function cC(n){return Xi(n.x)/Xi(n.y)}function uC(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class FK{constructor(){this.members=[]}add(e){M2(this.members,e),e.scheduleRender()}remove(e){if(L2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function BK(n,e,t){let r="";const i=n.x.translate/e.x,o=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:g,rotate:w,rotateX:E,rotateY:T,skewX:R,skewY:M}=t;g&&(r=`perspective(${g}px) ${r}`),w&&(r+=`rotate(${w}deg) `),E&&(r+=`rotateX(${E}deg) `),T&&(r+=`rotateY(${T}deg) `),R&&(r+=`skewX(${R}deg) `),M&&(r+=`skewY(${M}deg) `)}const h=n.x.scale*e.x,m=n.y.scale*e.y;return(h!==1||m!==1)&&(r+=`scale(${h}, ${m})`),r||"none"}const ux=["","X","Y","Z"],jK=1e3;let UK=0;function dx(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function I4(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=c4(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",nr,!(i||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&I4(r)}function A4({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},h=e==null?void 0:e()){this.id=UK++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(HK),this.nodes.forEach(KK),this.nodes.forEach(XK),this.nodes.forEach(GK)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new SK)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new B2),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const m=this.eventHandlers.get(c);m&&m.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=jP(c)&&!D$(c),this.instance=c;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),n){let w,E=0;const T=()=>this.root.updateBlockedByResize=!1;nr.read(()=>{E=window.innerWidth}),n(c,()=>{const R=window.innerWidth;R!==E&&(E=R,this.root.updateBlockedByResize=!0,w&&w(),w=RK(T,250),i0.hasAnimatedSinceResize&&(i0.hasAnimatedSinceResize=!1,this.nodes.forEach(fC)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeLayoutChanged:T,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||g.getDefaultTransition()||eX,{onLayoutAnimationStart:D,onLayoutAnimationComplete:L}=g.getProps(),G=!this.targetLayout||!b4(this.targetLayout,R),z=!E&&T;if(this.options.layoutRoot||this.resumeFrom||z||E&&(G||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const W={...Z2(M,"layout"),onPlay:D,onComplete:L};(g.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W),this.setAnimationOrigin(w,z)}else E||fC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(YK),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&I4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const E=this.path[w];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(hC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(qK),this.nodes.forEach(zK),this.nodes.forEach(WK)):this.nodes.forEach(hC),this.clearAllSnapshots();const h=hs.now();mi.delta=Fa(0,1e3/60,h-mi.timestamp),mi.timestamp=h,mi.isProcessing=!0,Jy.update.process(mi),Jy.preRender.process(mi),Jy.render.process(mi),mi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,e_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($K),this.sharedNodes.forEach(QK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Xi(this.snapshot.measuredBox.x)&&!Xi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const m=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:m,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!E4(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,w=g!==this.prevTransformTemplateValue;c&&this.instance&&(h||Rc(this.latestValues)||w)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return c&&(m=this.removeTransform(m)),tX(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:c}=this.options;if(!c)return Nr();const h=c.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(nX))){const{scroll:w}=this.root;w&&(ld(h.x,w.offset.x),ld(h.y,w.offset.y))}return h}removeElementScroll(c){var m;const h=Nr();if(qs(h,c),(m=this.scroll)!=null&&m.wasRoot)return h;for(let g=0;g<this.path.length;g++){const w=this.path[g],{scroll:E,options:T}=w;w!==this.root&&E&&T.layoutScroll&&(E.wasRoot&&qs(h,c),ld(h.x,E.offset.x),ld(h.y,E.offset.y))}return h}applyTransform(c,h=!1){const m=Nr();qs(m,c);for(let g=0;g<this.path.length;g++){const w=this.path[g];!h&&w.options.layoutScroll&&w.scroll&&w!==w.root&&cd(m,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),Rc(w.latestValues)&&cd(m,w.latestValues)}return Rc(this.latestValues)&&cd(m,this.latestValues),m}removeTransform(c){const h=Nr();qs(h,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!Rc(g.latestValues))continue;Nw(g.latestValues)&&g.updateSnapshot();const w=Nr(),E=g.measurePageBox();qs(w,E),sC(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,w)}return Rc(this.latestValues)&&sC(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var T;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=mi.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),pf(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nr(),this.targetWithTransforms=Nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qs(this.target,this.layout.layoutBox),r4(this.target,this.targetDelta)):qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nr(),this.relativeTargetOrigin=Nr(),pf(this.relativeTargetOrigin,this.target,R.target),qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Nw(this.parent.latestValues)||n4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var M;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let m=!0;if((this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===mi.timestamp&&(m=!1),m)return;const{layout:g,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||w))return;qs(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,T=this.treeScale.y;vq(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Nr());const{target:R}=c;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nC(this.prevProjectionDelta.x,this.projectionDelta.x),nC(this.prevProjectionDelta.y,this.projectionDelta.y)),ff(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==T||!uC(this.projectionDelta.x,this.prevProjectionDelta.x)||!uC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ud(),this.projectionDelta=ud(),this.projectionDeltaWithTransform=ud()}setAnimationOrigin(c,h=!1){const m=this.snapshot,g=m?m.latestValues:{},w={...this.latestValues},E=ud();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=Nr(),R=m?m.source:void 0,M=this.layout?this.layout.source:void 0,D=R!==M,L=this.getStack(),G=!L||L.members.length<=1,z=!!(D&&!G&&this.options.crossfade===!0&&!this.path.some(JK));this.animationProgress=0;let W;this.mixTargetDelta=Y=>{const Z=Y/1e3;pC(E.x,c.x,Z),pC(E.y,c.y,Z),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pf(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZK(this.relativeTarget,this.relativeTargetOrigin,T,Z),W&&VK(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=Nr()),qs(W,this.relativeTarget)),D&&(this.animationValues=w,kK(w,g,this.latestValues,Z,z,G)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,m,g;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(g=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||g.stop(),this.pendingAnimation&&(Hl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nr.update(()=>{i0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Fd(0)),this.currentAnimation=TK(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),c.onUpdate&&c.onUpdate(w)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jK),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:w}=c;if(!(!h||!m||!g)){if(this!==c&&this.layout&&g&&T4(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||Nr();const E=Xi(this.layout.layoutBox.x);m.x.min=c.target.x.min,m.x.max=m.x.min+E;const T=Xi(this.layout.layoutBox.y);m.y.min=c.target.y.min,m.y.max=m.y.min+T}qs(h,m),cd(h,w),ff(this.projectionDeltaWithTransform,this.layoutCorrected,h,w)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new FK),this.sharedNodes.get(c).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:m}=c;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&dx("z",c,g,this.animationValues);for(let w=0;w<ux.length;w++)dx(`rotate${ux[w]}`,c,g,this.animationValues),dx(`skew${ux[w]}`,c,g,this.animationValues);c.render();for(const w in g)c.setStaticValue(w,g[w]),this.animationValues&&(this.animationValues[w]=g[w]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=r0(h==null?void 0:h.pointerEvents)||"",c.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=r0(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Rc(this.latestValues)&&(c.transform=m?m({},""):"none",this.hasProjected=!1);return}c.visibility="";const w=g.animationValues||g.latestValues;this.applyTransformsToTarget();let E=BK(this.projectionDeltaWithTransform,this.treeScale,w);m&&(E=m(w,E)),c.transform=E;const{x:T,y:R}=this.projectionDelta;c.transformOrigin=`${T.origin*100}% ${R.origin*100}% 0`,g.animationValues?c.opacity=g===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:c.opacity=g===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const M in Bf){if(w[M]===void 0)continue;const{correct:D,applyTo:L,isCSSVariable:G}=Bf[M],z=E==="none"?w[M]:D(w[M],g);if(L){const W=L.length;for(let Y=0;Y<W;Y++)c[L[Y]]=z}else G?this.options.visualElement.renderState.vars[M]=z:c[M]=z}this.options.layoutId&&(c.pointerEvents=g===this?r0(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(dC),this.root.sharedNodes.clear()}}}function zK(n){n.updateLayout()}function WK(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:o}=n.options,c=e.source!==n.layout.source;o==="size"?Ks(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],R=Xi(T);T.min=r[E].min,T.max=T.min+R}):T4(o,e.layoutBox,r)&&Ks(E=>{const T=c?e.measuredBox[E]:e.layoutBox[E],R=Xi(r[E]);T.max=T.min+R,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[E].max=n.relativeTarget[E].min+R)});const h=ud();ff(h,r,e.layoutBox);const m=ud();c?ff(m,n.applyTransform(i,!0),e.measuredBox):ff(m,r,e.layoutBox);const g=!E4(h);let w=!1;if(!n.resumeFrom){const E=n.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:T,layout:R}=E;if(T&&R){const M=Nr();pf(M,e.layoutBox,T.layoutBox);const D=Nr();pf(D,r,R.layoutBox),b4(M,D)||(w=!0),E.options.layoutRoot&&(n.relativeTarget=D,n.relativeTargetOrigin=M,n.relativeParent=E)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:m,layoutDelta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:w})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function HK(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function GK(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function $K(n){n.clearSnapshot()}function dC(n){n.clearMeasurements()}function hC(n){n.isLayoutDirty=!1}function qK(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function fC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function KK(n){n.resolveTargetDelta()}function XK(n){n.calcProjection()}function YK(n){n.resetSkewAndRotation()}function QK(n){n.removeLeadSnapshot()}function pC(n,e,t){n.translate=cr(e.translate,0,t),n.scale=cr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mC(n,e,t,r){n.min=cr(e.min,t.min,r),n.max=cr(e.max,t.max,r)}function ZK(n,e,t,r){mC(n.x,e.x,t.x,r),mC(n.y,e.y,t.y,r)}function JK(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const eX={duration:.45,ease:[.4,0,.1,1]},gC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),yC=gC("applewebkit/")&&!gC("chrome/")?Math.round:Js;function xC(n){n.min=yC(n.min),n.max=yC(n.max)}function tX(n){xC(n.x),xC(n.y)}function T4(n,e,t){return n==="position"||n==="preserve-aspect"&&!aK(cC(e),cC(t),.2)}function nX(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const rX=A4({attachResizeListener:(n,e)=>jf(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hx={current:void 0},C4=A4({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!hx.current){const n=new rX({});n.mount(window),n.setOptions({layoutScroll:!0}),hx.current=n}return hx.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),iX={pan:{Feature:EK},drag:{Feature:_K,ProjectionNode:C4,MeasureLayout:w4}};function wC(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,o=r[i];o&&nr.postRender(()=>o(e,gp(e)))}class sX extends tc{mount(){const{current:e}=this.node;e&&(this.unmount=S$(e,(t,r)=>(wC(this.node,r,"Start"),i=>wC(this.node,i,"End"))))}unmount(){}}class oX extends tc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hp(jf(this.node.current,"focus",()=>this.onFocus()),jf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vC(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),o=r[i];o&&nr.postRender(()=>o(e,gp(e)))}class aX extends tc{mount(){const{current:e}=this.node;e&&(this.unmount=P$(e,(t,r)=>(vC(this.node,r,"Start"),(i,{success:o})=>vC(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vw=new WeakMap,fx=new WeakMap,lX=n=>{const e=Vw.get(n.target);e&&e(n)},cX=n=>{n.forEach(lX)};function uX({root:n,...e}){const t=n||document;fx.has(t)||fx.set(t,{});const r=fx.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(cX,{root:n,...e})),r[i]}function dX(n,e,t){const r=uX(e);return Vw.set(n,t),r.observe(n),()=>{Vw.delete(n),r.unobserve(n)}}const hX={some:0,all:1};class fX extends tc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:o}=e,c={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:hX[i]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,o&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:w,onViewportLeave:E}=this.node.getProps(),T=g?w:E;T&&T(m)};return dX(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(pX(e,t))&&this.startObserver()}unmount(){}}function pX({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const mX={inView:{Feature:fX},tap:{Feature:aX},focus:{Feature:oX},hover:{Feature:sX}},gX={layout:{ProjectionNode:C4,MeasureLayout:w4}},yX={...tK,...mX,...iX,...gX},ra=yq(yX,Nq);function xX({matchName:n,onDismiss:e,onSeeMatches:t}){const r=oa(),i=()=>{t&&t(),r(Ln("Matches")),e()};return A.jsxs(ra.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-pink-500 via-purple-500 to-indigo-600 text-white rounded-xl shadow-2xl",children:[A.jsx("button",{onClick:e,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:A.jsx(Yi,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(s5,{className:"w-10 h-10 text-yellow-300 flex-shrink-0"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold",children:"It's a Match!"}),A.jsxs("p",{className:"text-sm opacity-90",children:["You and ",n," liked each other."]})]})]}),A.jsxs(Ut,{onClick:i,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["See Matches ",A.jsx(cv,{className:"w-4 h-4 ml-2"})]})]})}function wX({senderName:n,senderSessionId:e,onDismiss:t,onView:r}){const i=oa(),o=()=>{r&&r(),i(Ln(`Matches?openChat=${e}`)),t()};return A.jsxs(ra.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},transition:{type:"spring",stiffness:200,damping:20},className:"fixed bottom-6 right-6 z-[100] w-full max-w-sm p-5 bg-gradient-to-br from-blue-500 via-sky-500 to-cyan-600 text-white rounded-xl shadow-2xl",children:[A.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1 text-white/70 hover:text-white","aria-label":"Dismiss notification",children:A.jsx(Yi,{className:"w-5 h-5"})}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx(yf,{className:"w-10 h-10 text-white/80 flex-shrink-0"}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-bold",children:"New Message"}),A.jsxs("p",{className:"text-sm opacity-90",children:["You have a new message from ",n,"."]})]})]}),A.jsxs(Ut,{onClick:o,className:"mt-4 w-full bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm border border-white/30",children:["View Message ",A.jsx(cv,{className:"w-4 h-4 ml-2"})]})]})}const $l=P.forwardRef(({className:n,type:e,...t},r)=>A.jsx("input",{type:e,className:ln("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));$l.displayName="Input";const H0=P.forwardRef(({className:n,...e},t)=>A.jsx("textarea",{className:ln("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...e}));H0.displayName="Textarea";var vX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],nn=vX.reduce((n,e)=>{const t=Vd(`Primitive.${e}`),r=P.forwardRef((i,o)=>{const{asChild:c,...h}=i,m=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),A.jsx(m,{...h,ref:o})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function _X(n,e){n&&Kf.flushSync(()=>n.dispatchEvent(e))}var EX="Label",S4=P.forwardRef((n,e)=>A.jsx(nn.label,{...n,ref:e,onMouseDown:t=>{var i;t.target.closest("button, input, select, textarea")||((i=n.onMouseDown)==null||i.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));S4.displayName=EX;var R4=S4;const bX=Bg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),cs=P.forwardRef(({className:n,...e},t)=>A.jsx(R4,{ref:t,className:ln(bX(),n),...e}));cs.displayName=R4.displayName;function G0(n,[e,t]){return Math.min(t,Math.max(e,n))}function an(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function IX(n,e){const t=P.createContext(e),r=o=>{const{children:c,...h}=o,m=P.useMemo(()=>h,Object.values(h));return A.jsx(t.Provider,{value:m,children:c})};r.displayName=n+"Provider";function i(o){const c=P.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${n}\``)}return[r,i]}function eh(n,e=[]){let t=[];function r(o,c){const h=P.createContext(c),m=t.length;t=[...t,c];const g=E=>{var G;const{scope:T,children:R,...M}=E,D=((G=T==null?void 0:T[n])==null?void 0:G[m])||h,L=P.useMemo(()=>M,Object.values(M));return A.jsx(D.Provider,{value:L,children:R})};g.displayName=o+"Provider";function w(E,T){var D;const R=((D=T==null?void 0:T[n])==null?void 0:D[m])||h,M=P.useContext(R);if(M)return M;if(c!==void 0)return c;throw new Error(`\`${E}\` must be used within \`${o}\``)}return[g,w]}const i=()=>{const o=t.map(c=>P.createContext(c));return function(h){const m=(h==null?void 0:h[n])||o;return P.useMemo(()=>({[`__scope${n}`]:{...h,[n]:m}}),[h,m])}};return i.scopeName=n,[r,AX(i,...e)]}function AX(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const c=r.reduce((h,{useScope:m,scopeName:g})=>{const E=m(o)[`__scope${g}`];return{...h,...E}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}function N4(n){const e=n+"CollectionProvider",[t,r]=eh(e),[i,o]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=D=>{const{scope:L,children:G}=D,z=ze.useRef(null),W=ze.useRef(new Map).current;return A.jsx(i,{scope:L,itemMap:W,collectionRef:z,children:G})};c.displayName=e;const h=n+"CollectionSlot",m=Vd(h),g=ze.forwardRef((D,L)=>{const{scope:G,children:z}=D,W=o(h,G),Y=bn(L,W.collectionRef);return A.jsx(m,{ref:Y,children:z})});g.displayName=h;const w=n+"CollectionItemSlot",E="data-radix-collection-item",T=Vd(w),R=ze.forwardRef((D,L)=>{const{scope:G,children:z,...W}=D,Y=ze.useRef(null),Z=bn(L,Y),ie=o(w,G);return ze.useEffect(()=>(ie.itemMap.set(Y,{ref:Y,...W}),()=>void ie.itemMap.delete(Y))),A.jsx(T,{[E]:"",ref:Z,children:z})});R.displayName=w;function M(D){const L=o(n+"CollectionConsumer",D);return ze.useCallback(()=>{const z=L.collectionRef.current;if(!z)return[];const W=Array.from(z.querySelectorAll(`[${E}]`));return Array.from(L.itemMap.values()).sort((ie,F)=>W.indexOf(ie.ref.current)-W.indexOf(F.ref.current))},[L.collectionRef,L.itemMap])}return[{Provider:c,Slot:g,ItemSlot:R},M,r]}var TX=P.createContext(void 0);function k4(n){const e=P.useContext(TX);return n||e||"ltr"}function au(n){const e=P.useRef(n);return P.useEffect(()=>{e.current=n}),P.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function CX(n,e=globalThis==null?void 0:globalThis.document){const t=au(n);P.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var SX="DismissableLayer",Fw="dismissableLayer.update",RX="dismissableLayer.pointerDownOutside",NX="dismissableLayer.focusOutside",_C,P4=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),h_=P.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:c,onDismiss:h,...m}=n,g=P.useContext(P4),[w,E]=P.useState(null),T=(w==null?void 0:w.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,R]=P.useState({}),M=bn(e,F=>E(F)),D=Array.from(g.layers),[L]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),G=D.indexOf(L),z=w?D.indexOf(w):-1,W=g.layersWithOutsidePointerEventsDisabled.size>0,Y=z>=G,Z=DX(F=>{const B=F.target,H=[...g.branches].some(ee=>ee.contains(B));!Y||H||(i==null||i(F),c==null||c(F),F.defaultPrevented||h==null||h())},T),ie=OX(F=>{const B=F.target;[...g.branches].some(ee=>ee.contains(B))||(o==null||o(F),c==null||c(F),F.defaultPrevented||h==null||h())},T);return CX(F=>{z===g.layers.size-1&&(r==null||r(F),!F.defaultPrevented&&h&&(F.preventDefault(),h()))},T),P.useEffect(()=>{if(w)return t&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(_C=T.body.style.pointerEvents,T.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(w)),g.layers.add(w),EC(),()=>{t&&g.layersWithOutsidePointerEventsDisabled.size===1&&(T.body.style.pointerEvents=_C)}},[w,T,t,g]),P.useEffect(()=>()=>{w&&(g.layers.delete(w),g.layersWithOutsidePointerEventsDisabled.delete(w),EC())},[w,g]),P.useEffect(()=>{const F=()=>R({});return document.addEventListener(Fw,F),()=>document.removeEventListener(Fw,F)},[]),A.jsx(nn.div,{...m,ref:M,style:{pointerEvents:W?Y?"auto":"none":void 0,...n.style},onFocusCapture:an(n.onFocusCapture,ie.onFocusCapture),onBlurCapture:an(n.onBlurCapture,ie.onBlurCapture),onPointerDownCapture:an(n.onPointerDownCapture,Z.onPointerDownCapture)})});h_.displayName=SX;var kX="DismissableLayerBranch",PX=P.forwardRef((n,e)=>{const t=P.useContext(P4),r=P.useRef(null),i=bn(e,r);return P.useEffect(()=>{const o=r.current;if(o)return t.branches.add(o),()=>{t.branches.delete(o)}},[t.branches]),A.jsx(nn.div,{...n,ref:i})});PX.displayName=kX;function DX(n,e=globalThis==null?void 0:globalThis.document){const t=au(n),r=P.useRef(!1),i=P.useRef(()=>{});return P.useEffect(()=>{const o=h=>{if(h.target&&!r.current){let m=function(){D4(RX,t,g,{discrete:!0})};const g={originalEvent:h};h.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=m,e.addEventListener("click",i.current,{once:!0})):m()}else e.removeEventListener("click",i.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function OX(n,e=globalThis==null?void 0:globalThis.document){const t=au(n),r=P.useRef(!1);return P.useEffect(()=>{const i=o=>{o.target&&!r.current&&D4(NX,t,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function EC(){const n=new CustomEvent(Fw);document.dispatchEvent(n)}function D4(n,e,t,{discrete:r}){const i=t.originalEvent.target,o=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?_X(i,o):i.dispatchEvent(o)}var px=0;function O4(){P.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??bC()),document.body.insertAdjacentElement("beforeend",n[1]??bC()),px++,()=>{px===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),px--}},[])}function bC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var mx="focusScope.autoFocusOnMount",gx="focusScope.autoFocusOnUnmount",IC={bubbles:!1,cancelable:!0},MX="FocusScope",f_=P.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...c}=n,[h,m]=P.useState(null),g=au(i),w=au(o),E=P.useRef(null),T=bn(e,D=>m(D)),R=P.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;P.useEffect(()=>{if(r){let D=function(W){if(R.paused||!h)return;const Y=W.target;h.contains(Y)?E.current=Y:Al(E.current,{select:!0})},L=function(W){if(R.paused||!h)return;const Y=W.relatedTarget;Y!==null&&(h.contains(Y)||Al(E.current,{select:!0}))},G=function(W){if(document.activeElement===document.body)for(const Z of W)Z.removedNodes.length>0&&Al(h)};document.addEventListener("focusin",D),document.addEventListener("focusout",L);const z=new MutationObserver(G);return h&&z.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",D),document.removeEventListener("focusout",L),z.disconnect()}}},[r,h,R.paused]),P.useEffect(()=>{if(h){TC.add(R);const D=document.activeElement;if(!h.contains(D)){const G=new CustomEvent(mx,IC);h.addEventListener(mx,g),h.dispatchEvent(G),G.defaultPrevented||(LX(UX(M4(h)),{select:!0}),document.activeElement===D&&Al(h))}return()=>{h.removeEventListener(mx,g),setTimeout(()=>{const G=new CustomEvent(gx,IC);h.addEventListener(gx,w),h.dispatchEvent(G),G.defaultPrevented||Al(D??document.body,{select:!0}),h.removeEventListener(gx,w),TC.remove(R)},0)}}},[h,g,w,R]);const M=P.useCallback(D=>{if(!t&&!r||R.paused)return;const L=D.key==="Tab"&&!D.altKey&&!D.ctrlKey&&!D.metaKey,G=document.activeElement;if(L&&G){const z=D.currentTarget,[W,Y]=VX(z);W&&Y?!D.shiftKey&&G===Y?(D.preventDefault(),t&&Al(W,{select:!0})):D.shiftKey&&G===W&&(D.preventDefault(),t&&Al(Y,{select:!0})):G===z&&D.preventDefault()}},[t,r,R.paused]);return A.jsx(nn.div,{tabIndex:-1,...c,ref:T,onKeyDown:M})});f_.displayName=MX;function LX(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(Al(r,{select:e}),document.activeElement!==t)return}function VX(n){const e=M4(n),t=AC(e,n),r=AC(e.reverse(),n);return[t,r]}function M4(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function AC(n,e){for(const t of n)if(!FX(t,{upTo:e}))return t}function FX(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function BX(n){return n instanceof HTMLInputElement&&"select"in n}function Al(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&BX(n)&&e&&n.select()}}var TC=jX();function jX(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=CC(n,e),n.unshift(e)},remove(e){var t;n=CC(n,e),(t=n[0])==null||t.resume()}}}function CC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function UX(n){return n.filter(e=>e.tagName!=="A")}var Vi=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},zX=mS[" useId ".trim().toString()]||(()=>{}),WX=0;function yd(n){const[e,t]=P.useState(zX());return Vi(()=>{t(r=>r??String(WX++))},[n]),e?`radix-${e}`:""}const HX=["top","right","bottom","left"],ql=Math.min,Ss=Math.max,$0=Math.round,Rm=Math.floor,Jo=n=>({x:n,y:n}),GX={left:"right",right:"left",bottom:"top",top:"bottom"},$X={start:"end",end:"start"};function Bw(n,e,t){return Ss(n,ql(e,t))}function ja(n,e){return typeof n=="function"?n(e):n}function Ua(n){return n.split("-")[0]}function th(n){return n.split("-")[1]}function p_(n){return n==="x"?"y":"x"}function m_(n){return n==="y"?"height":"width"}const qX=new Set(["top","bottom"]);function Ho(n){return qX.has(Ua(n))?"y":"x"}function g_(n){return p_(Ho(n))}function KX(n,e,t){t===void 0&&(t=!1);const r=th(n),i=g_(n),o=m_(i);let c=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(c=q0(c)),[c,q0(c)]}function XX(n){const e=q0(n);return[jw(n),e,jw(e)]}function jw(n){return n.replace(/start|end/g,e=>$X[e])}const SC=["left","right"],RC=["right","left"],YX=["top","bottom"],QX=["bottom","top"];function ZX(n,e,t){switch(n){case"top":case"bottom":return t?e?RC:SC:e?SC:RC;case"left":case"right":return e?YX:QX;default:return[]}}function JX(n,e,t,r){const i=th(n);let o=ZX(Ua(n),t==="start",r);return i&&(o=o.map(c=>c+"-"+i),e&&(o=o.concat(o.map(jw)))),o}function q0(n){return n.replace(/left|right|bottom|top/g,e=>GX[e])}function eY(n){return{top:0,right:0,bottom:0,left:0,...n}}function L4(n){return typeof n!="number"?eY(n):{top:n,right:n,bottom:n,left:n}}function K0(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function NC(n,e,t){let{reference:r,floating:i}=n;const o=Ho(e),c=g_(e),h=m_(c),m=Ua(e),g=o==="y",w=r.x+r.width/2-i.width/2,E=r.y+r.height/2-i.height/2,T=r[h]/2-i[h]/2;let R;switch(m){case"top":R={x:w,y:r.y-i.height};break;case"bottom":R={x:w,y:r.y+r.height};break;case"right":R={x:r.x+r.width,y:E};break;case"left":R={x:r.x-i.width,y:E};break;default:R={x:r.x,y:r.y}}switch(th(e)){case"start":R[c]-=T*(t&&g?-1:1);break;case"end":R[c]+=T*(t&&g?-1:1);break}return R}const tY=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:c}=t,h=o.filter(Boolean),m=await(c.isRTL==null?void 0:c.isRTL(e));let g=await c.getElementRects({reference:n,floating:e,strategy:i}),{x:w,y:E}=NC(g,r,m),T=r,R={},M=0;for(let D=0;D<h.length;D++){const{name:L,fn:G}=h[D],{x:z,y:W,data:Y,reset:Z}=await G({x:w,y:E,initialPlacement:r,placement:T,strategy:i,middlewareData:R,rects:g,platform:c,elements:{reference:n,floating:e}});w=z??w,E=W??E,R={...R,[L]:{...R[L],...Y}},Z&&M<=50&&(M++,typeof Z=="object"&&(Z.placement&&(T=Z.placement),Z.rects&&(g=Z.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:i}):Z.rects),{x:w,y:E}=NC(g,T,m)),D=-1)}return{x:w,y:E,placement:T,strategy:i,middlewareData:R}};async function Uf(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:c,elements:h,strategy:m}=n,{boundary:g="clippingAncestors",rootBoundary:w="viewport",elementContext:E="floating",altBoundary:T=!1,padding:R=0}=ja(e,n),M=L4(R),L=h[T?E==="floating"?"reference":"floating":E],G=K0(await o.getClippingRect({element:(t=await(o.isElement==null?void 0:o.isElement(L)))==null||t?L:L.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(h.floating)),boundary:g,rootBoundary:w,strategy:m})),z=E==="floating"?{x:r,y:i,width:c.floating.width,height:c.floating.height}:c.reference,W=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h.floating)),Y=await(o.isElement==null?void 0:o.isElement(W))?await(o.getScale==null?void 0:o.getScale(W))||{x:1,y:1}:{x:1,y:1},Z=K0(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:z,offsetParent:W,strategy:m}):z);return{top:(G.top-Z.top+M.top)/Y.y,bottom:(Z.bottom-G.bottom+M.bottom)/Y.y,left:(G.left-Z.left+M.left)/Y.x,right:(Z.right-G.right+M.right)/Y.x}}const nY=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:o,platform:c,elements:h,middlewareData:m}=e,{element:g,padding:w=0}=ja(n,e)||{};if(g==null)return{};const E=L4(w),T={x:t,y:r},R=g_(i),M=m_(R),D=await c.getDimensions(g),L=R==="y",G=L?"top":"left",z=L?"bottom":"right",W=L?"clientHeight":"clientWidth",Y=o.reference[M]+o.reference[R]-T[R]-o.floating[M],Z=T[R]-o.reference[R],ie=await(c.getOffsetParent==null?void 0:c.getOffsetParent(g));let F=ie?ie[W]:0;(!F||!await(c.isElement==null?void 0:c.isElement(ie)))&&(F=h.floating[W]||o.floating[M]);const B=Y/2-Z/2,H=F/2-D[M]/2-1,ee=ql(E[G],H),ne=ql(E[z],H),te=ee,K=F-D[M]-ne,we=F/2-D[M]/2+B,se=Bw(te,we,K),Ae=!m.arrow&&th(i)!=null&&we!==se&&o.reference[M]/2-(we<te?ee:ne)-D[M]/2<0,xe=Ae?we<te?we-te:we-K:0;return{[R]:T[R]+xe,data:{[R]:se,centerOffset:we-se-xe,...Ae&&{alignmentOffset:xe}},reset:Ae}}}),rY=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:o,rects:c,initialPlacement:h,platform:m,elements:g}=e,{mainAxis:w=!0,crossAxis:E=!0,fallbackPlacements:T,fallbackStrategy:R="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:D=!0,...L}=ja(n,e);if((t=o.arrow)!=null&&t.alignmentOffset)return{};const G=Ua(i),z=Ho(h),W=Ua(h)===h,Y=await(m.isRTL==null?void 0:m.isRTL(g.floating)),Z=T||(W||!D?[q0(h)]:XX(h)),ie=M!=="none";!T&&ie&&Z.push(...JX(h,D,M,Y));const F=[h,...Z],B=await Uf(e,L),H=[];let ee=((r=o.flip)==null?void 0:r.overflows)||[];if(w&&H.push(B[G]),E){const we=KX(i,c,Y);H.push(B[we[0]],B[we[1]])}if(ee=[...ee,{placement:i,overflows:H}],!H.every(we=>we<=0)){var ne,te;const we=(((ne=o.flip)==null?void 0:ne.index)||0)+1,se=F[we];if(se&&(!(E==="alignment"?z!==Ho(se):!1)||ee.every(oe=>Ho(oe.placement)===z?oe.overflows[0]>0:!0)))return{data:{index:we,overflows:ee},reset:{placement:se}};let Ae=(te=ee.filter(xe=>xe.overflows[0]<=0).sort((xe,oe)=>xe.overflows[1]-oe.overflows[1])[0])==null?void 0:te.placement;if(!Ae)switch(R){case"bestFit":{var K;const xe=(K=ee.filter(oe=>{if(ie){const Te=Ho(oe.placement);return Te===z||Te==="y"}return!0}).map(oe=>[oe.placement,oe.overflows.filter(Te=>Te>0).reduce((Te,Ne)=>Te+Ne,0)]).sort((oe,Te)=>oe[1]-Te[1])[0])==null?void 0:K[0];xe&&(Ae=xe);break}case"initialPlacement":Ae=h;break}if(i!==Ae)return{reset:{placement:Ae}}}return{}}}};function kC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function PC(n){return HX.some(e=>n[e]>=0)}const iY=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...i}=ja(n,e);switch(r){case"referenceHidden":{const o=await Uf(e,{...i,elementContext:"reference"}),c=kC(o,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:PC(c)}}}case"escaped":{const o=await Uf(e,{...i,altBoundary:!0}),c=kC(o,t.floating);return{data:{escapedOffsets:c,escaped:PC(c)}}}default:return{}}}}},V4=new Set(["left","top"]);async function sY(n,e){const{placement:t,platform:r,elements:i}=n,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),c=Ua(t),h=th(t),m=Ho(t)==="y",g=V4.has(c)?-1:1,w=o&&m?-1:1,E=ja(e,n);let{mainAxis:T,crossAxis:R,alignmentAxis:M}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return h&&typeof M=="number"&&(R=h==="end"?M*-1:M),m?{x:R*w,y:T*g}:{x:T*g,y:R*w}}const oY=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:o,placement:c,middlewareData:h}=e,m=await sY(e,n);return c===((t=h.offset)==null?void 0:t.placement)&&(r=h.arrow)!=null&&r.alignmentOffset?{}:{x:i+m.x,y:o+m.y,data:{...m,placement:c}}}}},aY=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:c=!1,limiter:h={fn:L=>{let{x:G,y:z}=L;return{x:G,y:z}}},...m}=ja(n,e),g={x:t,y:r},w=await Uf(e,m),E=Ho(Ua(i)),T=p_(E);let R=g[T],M=g[E];if(o){const L=T==="y"?"top":"left",G=T==="y"?"bottom":"right",z=R+w[L],W=R-w[G];R=Bw(z,R,W)}if(c){const L=E==="y"?"top":"left",G=E==="y"?"bottom":"right",z=M+w[L],W=M-w[G];M=Bw(z,M,W)}const D=h.fn({...e,[T]:R,[E]:M});return{...D,data:{x:D.x-t,y:D.y-r,enabled:{[T]:o,[E]:c}}}}}},lY=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:i,rects:o,middlewareData:c}=e,{offset:h=0,mainAxis:m=!0,crossAxis:g=!0}=ja(n,e),w={x:t,y:r},E=Ho(i),T=p_(E);let R=w[T],M=w[E];const D=ja(h,e),L=typeof D=="number"?{mainAxis:D,crossAxis:0}:{mainAxis:0,crossAxis:0,...D};if(m){const W=T==="y"?"height":"width",Y=o.reference[T]-o.floating[W]+L.mainAxis,Z=o.reference[T]+o.reference[W]-L.mainAxis;R<Y?R=Y:R>Z&&(R=Z)}if(g){var G,z;const W=T==="y"?"width":"height",Y=V4.has(Ua(i)),Z=o.reference[E]-o.floating[W]+(Y&&((G=c.offset)==null?void 0:G[E])||0)+(Y?0:L.crossAxis),ie=o.reference[E]+o.reference[W]+(Y?0:((z=c.offset)==null?void 0:z[E])||0)-(Y?L.crossAxis:0);M<Z?M=Z:M>ie&&(M=ie)}return{[T]:R,[E]:M}}}},cY=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:i,rects:o,platform:c,elements:h}=e,{apply:m=()=>{},...g}=ja(n,e),w=await Uf(e,g),E=Ua(i),T=th(i),R=Ho(i)==="y",{width:M,height:D}=o.floating;let L,G;E==="top"||E==="bottom"?(L=E,G=T===(await(c.isRTL==null?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(G=E,L=T==="end"?"top":"bottom");const z=D-w.top-w.bottom,W=M-w.left-w.right,Y=ql(D-w[L],z),Z=ql(M-w[G],W),ie=!e.middlewareData.shift;let F=Y,B=Z;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(B=W),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(F=z),ie&&!T){const ee=Ss(w.left,0),ne=Ss(w.right,0),te=Ss(w.top,0),K=Ss(w.bottom,0);R?B=M-2*(ee!==0||ne!==0?ee+ne:Ss(w.left,w.right)):F=D-2*(te!==0||K!==0?te+K:Ss(w.top,w.bottom))}await m({...e,availableWidth:B,availableHeight:F});const H=await c.getDimensions(h.floating);return M!==H.width||D!==H.height?{reset:{rects:!0}}:{}}}};function Hg(){return typeof window<"u"}function nh(n){return F4(n)?(n.nodeName||"").toLowerCase():"#document"}function Os(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function aa(n){var e;return(e=(F4(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function F4(n){return Hg()?n instanceof Node||n instanceof Os(n).Node:!1}function _o(n){return Hg()?n instanceof Element||n instanceof Os(n).Element:!1}function ia(n){return Hg()?n instanceof HTMLElement||n instanceof Os(n).HTMLElement:!1}function DC(n){return!Hg()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Os(n).ShadowRoot}const uY=new Set(["inline","contents"]);function yp(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=Eo(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!uY.has(i)}const dY=new Set(["table","td","th"]);function hY(n){return dY.has(nh(n))}const fY=[":popover-open",":modal"];function Gg(n){return fY.some(e=>{try{return n.matches(e)}catch{return!1}})}const pY=["transform","translate","scale","rotate","perspective"],mY=["transform","translate","scale","rotate","perspective","filter"],gY=["paint","layout","strict","content"];function y_(n){const e=x_(),t=_o(n)?Eo(n):n;return pY.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||mY.some(r=>(t.willChange||"").includes(r))||gY.some(r=>(t.contain||"").includes(r))}function yY(n){let e=Kl(n);for(;ia(e)&&!jd(e);){if(y_(e))return e;if(Gg(e))return null;e=Kl(e)}return null}function x_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xY=new Set(["html","body","#document"]);function jd(n){return xY.has(nh(n))}function Eo(n){return Os(n).getComputedStyle(n)}function $g(n){return _o(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Kl(n){if(nh(n)==="html")return n;const e=n.assignedSlot||n.parentNode||DC(n)&&n.host||aa(n);return DC(e)?e.host:e}function B4(n){const e=Kl(n);return jd(e)?n.ownerDocument?n.ownerDocument.body:n.body:ia(e)&&yp(e)?e:B4(e)}function zf(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=B4(n),o=i===((r=n.ownerDocument)==null?void 0:r.body),c=Os(i);if(o){const h=Uw(c);return e.concat(c,c.visualViewport||[],yp(i)?i:[],h&&t?zf(h):[])}return e.concat(i,zf(i,[],t))}function Uw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function j4(n){const e=Eo(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ia(n),o=i?n.offsetWidth:t,c=i?n.offsetHeight:r,h=$0(t)!==o||$0(r)!==c;return h&&(t=o,r=c),{width:t,height:r,$:h}}function w_(n){return _o(n)?n:n.contextElement}function xd(n){const e=w_(n);if(!ia(e))return Jo(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:o}=j4(e);let c=(o?$0(t.width):t.width)/r,h=(o?$0(t.height):t.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!h||!Number.isFinite(h))&&(h=1),{x:c,y:h}}const wY=Jo(0);function U4(n){const e=Os(n);return!x_()||!e.visualViewport?wY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vY(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Os(n)?!1:e}function lu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),o=w_(n);let c=Jo(1);e&&(r?_o(r)&&(c=xd(r)):c=xd(n));const h=vY(o,t,r)?U4(o):Jo(0);let m=(i.left+h.x)/c.x,g=(i.top+h.y)/c.y,w=i.width/c.x,E=i.height/c.y;if(o){const T=Os(o),R=r&&_o(r)?Os(r):r;let M=T,D=Uw(M);for(;D&&r&&R!==M;){const L=xd(D),G=D.getBoundingClientRect(),z=Eo(D),W=G.left+(D.clientLeft+parseFloat(z.paddingLeft))*L.x,Y=G.top+(D.clientTop+parseFloat(z.paddingTop))*L.y;m*=L.x,g*=L.y,w*=L.x,E*=L.y,m+=W,g+=Y,M=Os(D),D=Uw(M)}}return K0({width:w,height:E,x:m,y:g})}function v_(n,e){const t=$g(n).scrollLeft;return e?e.left+t:lu(aa(n)).left+t}function z4(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:v_(n,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function _Y(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const o=i==="fixed",c=aa(r),h=e?Gg(e.floating):!1;if(r===c||h&&o)return t;let m={scrollLeft:0,scrollTop:0},g=Jo(1);const w=Jo(0),E=ia(r);if((E||!E&&!o)&&((nh(r)!=="body"||yp(c))&&(m=$g(r)),ia(r))){const R=lu(r);g=xd(r),w.x=R.x+r.clientLeft,w.y=R.y+r.clientTop}const T=c&&!E&&!o?z4(c,m,!0):Jo(0);return{width:t.width*g.x,height:t.height*g.y,x:t.x*g.x-m.scrollLeft*g.x+w.x+T.x,y:t.y*g.y-m.scrollTop*g.y+w.y+T.y}}function EY(n){return Array.from(n.getClientRects())}function bY(n){const e=aa(n),t=$g(n),r=n.ownerDocument.body,i=Ss(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Ss(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+v_(n);const h=-t.scrollTop;return Eo(r).direction==="rtl"&&(c+=Ss(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:c,y:h}}function IY(n,e){const t=Os(n),r=aa(n),i=t.visualViewport;let o=r.clientWidth,c=r.clientHeight,h=0,m=0;if(i){o=i.width,c=i.height;const g=x_();(!g||g&&e==="fixed")&&(h=i.offsetLeft,m=i.offsetTop)}return{width:o,height:c,x:h,y:m}}const AY=new Set(["absolute","fixed"]);function TY(n,e){const t=lu(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,o=ia(n)?xd(n):Jo(1),c=n.clientWidth*o.x,h=n.clientHeight*o.y,m=i*o.x,g=r*o.y;return{width:c,height:h,x:m,y:g}}function OC(n,e,t){let r;if(e==="viewport")r=IY(n,t);else if(e==="document")r=bY(aa(n));else if(_o(e))r=TY(e,t);else{const i=U4(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return K0(r)}function W4(n,e){const t=Kl(n);return t===e||!_o(t)||jd(t)?!1:Eo(t).position==="fixed"||W4(t,e)}function CY(n,e){const t=e.get(n);if(t)return t;let r=zf(n,[],!1).filter(h=>_o(h)&&nh(h)!=="body"),i=null;const o=Eo(n).position==="fixed";let c=o?Kl(n):n;for(;_o(c)&&!jd(c);){const h=Eo(c),m=y_(c);!m&&h.position==="fixed"&&(i=null),(o?!m&&!i:!m&&h.position==="static"&&!!i&&AY.has(i.position)||yp(c)&&!m&&W4(n,c))?r=r.filter(w=>w!==c):i=h,c=Kl(c)}return e.set(n,r),r}function SY(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const c=[...t==="clippingAncestors"?Gg(e)?[]:CY(e,this._c):[].concat(t),r],h=c[0],m=c.reduce((g,w)=>{const E=OC(e,w,i);return g.top=Ss(E.top,g.top),g.right=ql(E.right,g.right),g.bottom=ql(E.bottom,g.bottom),g.left=Ss(E.left,g.left),g},OC(e,h,i));return{width:m.right-m.left,height:m.bottom-m.top,x:m.left,y:m.top}}function RY(n){const{width:e,height:t}=j4(n);return{width:e,height:t}}function NY(n,e,t){const r=ia(e),i=aa(e),o=t==="fixed",c=lu(n,!0,o,e);let h={scrollLeft:0,scrollTop:0};const m=Jo(0);function g(){m.x=v_(i)}if(r||!r&&!o)if((nh(e)!=="body"||yp(i))&&(h=$g(e)),r){const R=lu(e,!0,o,e);m.x=R.x+e.clientLeft,m.y=R.y+e.clientTop}else i&&g();o&&!r&&i&&g();const w=i&&!r&&!o?z4(i,h):Jo(0),E=c.left+h.scrollLeft-m.x-w.x,T=c.top+h.scrollTop-m.y-w.y;return{x:E,y:T,width:c.width,height:c.height}}function yx(n){return Eo(n).position==="static"}function MC(n,e){if(!ia(n)||Eo(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return aa(n)===t&&(t=t.ownerDocument.body),t}function H4(n,e){const t=Os(n);if(Gg(n))return t;if(!ia(n)){let i=Kl(n);for(;i&&!jd(i);){if(_o(i)&&!yx(i))return i;i=Kl(i)}return t}let r=MC(n,e);for(;r&&hY(r)&&yx(r);)r=MC(r,e);return r&&jd(r)&&yx(r)&&!y_(r)?t:r||yY(n)||t}const kY=async function(n){const e=this.getOffsetParent||H4,t=this.getDimensions,r=await t(n.floating);return{reference:NY(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function PY(n){return Eo(n).direction==="rtl"}const DY={convertOffsetParentRelativeRectToViewportRelativeRect:_Y,getDocumentElement:aa,getClippingRect:SY,getOffsetParent:H4,getElementRects:kY,getClientRects:EY,getDimensions:RY,getScale:xd,isElement:_o,isRTL:PY};function G4(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function OY(n,e){let t=null,r;const i=aa(n);function o(){var h;clearTimeout(r),(h=t)==null||h.disconnect(),t=null}function c(h,m){h===void 0&&(h=!1),m===void 0&&(m=1),o();const g=n.getBoundingClientRect(),{left:w,top:E,width:T,height:R}=g;if(h||e(),!T||!R)return;const M=Rm(E),D=Rm(i.clientWidth-(w+T)),L=Rm(i.clientHeight-(E+R)),G=Rm(w),W={rootMargin:-M+"px "+-D+"px "+-L+"px "+-G+"px",threshold:Ss(0,ql(1,m))||1};let Y=!0;function Z(ie){const F=ie[0].intersectionRatio;if(F!==m){if(!Y)return c();F?c(!1,F):r=setTimeout(()=>{c(!1,1e-7)},1e3)}F===1&&!G4(g,n.getBoundingClientRect())&&c(),Y=!1}try{t=new IntersectionObserver(Z,{...W,root:i.ownerDocument})}catch{t=new IntersectionObserver(Z,W)}t.observe(n)}return c(!0),o}function MY(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:h=typeof IntersectionObserver=="function",animationFrame:m=!1}=r,g=w_(n),w=i||o?[...g?zf(g):[],...zf(e)]:[];w.forEach(G=>{i&&G.addEventListener("scroll",t,{passive:!0}),o&&G.addEventListener("resize",t)});const E=g&&h?OY(g,t):null;let T=-1,R=null;c&&(R=new ResizeObserver(G=>{let[z]=G;z&&z.target===g&&R&&(R.unobserve(e),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var W;(W=R)==null||W.observe(e)})),t()}),g&&!m&&R.observe(g),R.observe(e));let M,D=m?lu(n):null;m&&L();function L(){const G=lu(n);D&&!G4(D,G)&&t(),D=G,M=requestAnimationFrame(L)}return t(),()=>{var G;w.forEach(z=>{i&&z.removeEventListener("scroll",t),o&&z.removeEventListener("resize",t)}),E==null||E(),(G=R)==null||G.disconnect(),R=null,m&&cancelAnimationFrame(M)}}const LY=oY,VY=aY,FY=rY,BY=cY,jY=iY,LC=nY,UY=lY,zY=(n,e,t)=>{const r=new Map,i={platform:DY,...t},o={...i.platform,_c:r};return tY(n,e,{...i,platform:o})};var WY=typeof document<"u",HY=function(){},s0=WY?P.useLayoutEffect:HY;function X0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!X0(n[r],e[r]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=t;r--!==0;){const o=i[r];if(!(o==="_owner"&&n.$$typeof)&&!X0(n[o],e[o]))return!1}return!0}return n!==n&&e!==e}function $4(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function VC(n,e){const t=$4(n);return Math.round(e*t)/t}function xx(n){const e=P.useRef(n);return s0(()=>{e.current=n}),e}function GY(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:c}={},transform:h=!0,whileElementsMounted:m,open:g}=n,[w,E]=P.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[T,R]=P.useState(r);X0(T,r)||R(r);const[M,D]=P.useState(null),[L,G]=P.useState(null),z=P.useCallback(oe=>{oe!==ie.current&&(ie.current=oe,D(oe))},[]),W=P.useCallback(oe=>{oe!==F.current&&(F.current=oe,G(oe))},[]),Y=o||M,Z=c||L,ie=P.useRef(null),F=P.useRef(null),B=P.useRef(w),H=m!=null,ee=xx(m),ne=xx(i),te=xx(g),K=P.useCallback(()=>{if(!ie.current||!F.current)return;const oe={placement:e,strategy:t,middleware:T};ne.current&&(oe.platform=ne.current),zY(ie.current,F.current,oe).then(Te=>{const Ne={...Te,isPositioned:te.current!==!1};we.current&&!X0(B.current,Ne)&&(B.current=Ne,Kf.flushSync(()=>{E(Ne)}))})},[T,e,t,ne,te]);s0(()=>{g===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,E(oe=>({...oe,isPositioned:!1})))},[g]);const we=P.useRef(!1);s0(()=>(we.current=!0,()=>{we.current=!1}),[]),s0(()=>{if(Y&&(ie.current=Y),Z&&(F.current=Z),Y&&Z){if(ee.current)return ee.current(Y,Z,K);K()}},[Y,Z,K,ee,H]);const se=P.useMemo(()=>({reference:ie,floating:F,setReference:z,setFloating:W}),[z,W]),Ae=P.useMemo(()=>({reference:Y,floating:Z}),[Y,Z]),xe=P.useMemo(()=>{const oe={position:t,left:0,top:0};if(!Ae.floating)return oe;const Te=VC(Ae.floating,w.x),Ne=VC(Ae.floating,w.y);return h?{...oe,transform:"translate("+Te+"px, "+Ne+"px)",...$4(Ae.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Te,top:Ne}},[t,h,Ae.floating,w.x,w.y]);return P.useMemo(()=>({...w,update:K,refs:se,elements:Ae,floatingStyles:xe}),[w,K,se,Ae,xe])}const $Y=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:i}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?LC({element:r.current,padding:i}).fn(t):{}:r?LC({element:r,padding:i}).fn(t):{}}}},qY=(n,e)=>({...LY(n),options:[n,e]}),KY=(n,e)=>({...VY(n),options:[n,e]}),XY=(n,e)=>({...UY(n),options:[n,e]}),YY=(n,e)=>({...FY(n),options:[n,e]}),QY=(n,e)=>({...BY(n),options:[n,e]}),ZY=(n,e)=>({...jY(n),options:[n,e]}),JY=(n,e)=>({...$Y(n),options:[n,e]});var eQ="Arrow",q4=P.forwardRef((n,e)=>{const{children:t,width:r=10,height:i=5,...o}=n;return A.jsx(nn.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:A.jsx("polygon",{points:"0,0 30,0 15,10"})})});q4.displayName=eQ;var tQ=q4;function __(n){const[e,t]=P.useState(void 0);return Vi(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let c,h;if("borderBoxSize"in o){const m=o.borderBoxSize,g=Array.isArray(m)?m[0]:m;c=g.inlineSize,h=g.blockSize}else c=n.offsetWidth,h=n.offsetHeight;t({width:c,height:h})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var E_="Popper",[K4,X4]=eh(E_),[nQ,Y4]=K4(E_),Q4=n=>{const{__scopePopper:e,children:t}=n,[r,i]=P.useState(null);return A.jsx(nQ,{scope:e,anchor:r,onAnchorChange:i,children:t})};Q4.displayName=E_;var Z4="PopperAnchor",J4=P.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...i}=n,o=Y4(Z4,t),c=P.useRef(null),h=bn(e,c);return P.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||c.current)}),r?null:A.jsx(nn.div,{...i,ref:h})});J4.displayName=Z4;var b_="PopperContent",[rQ,iQ]=K4(b_),eD=P.forwardRef((n,e)=>{var Pe,Ge,at,st,ct,bt;const{__scopePopper:t,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:c=0,arrowPadding:h=0,avoidCollisions:m=!0,collisionBoundary:g=[],collisionPadding:w=0,sticky:E="partial",hideWhenDetached:T=!1,updatePositionStrategy:R="optimized",onPlaced:M,...D}=n,L=Y4(b_,t),[G,z]=P.useState(null),W=bn(e,ht=>z(ht)),[Y,Z]=P.useState(null),ie=__(Y),F=(ie==null?void 0:ie.width)??0,B=(ie==null?void 0:ie.height)??0,H=r+(o!=="center"?"-"+o:""),ee=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},ne=Array.isArray(g)?g:[g],te=ne.length>0,K={padding:ee,boundary:ne.filter(oQ),altBoundary:te},{refs:we,floatingStyles:se,placement:Ae,isPositioned:xe,middlewareData:oe}=GY({strategy:"fixed",placement:H,whileElementsMounted:(...ht)=>MY(...ht,{animationFrame:R==="always"}),elements:{reference:L.anchor},middleware:[qY({mainAxis:i+B,alignmentAxis:c}),m&&KY({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?XY():void 0,...K}),m&&YY({...K}),QY({...K,apply:({elements:ht,rects:gn,availableWidth:Bn,availableHeight:Dr})=>{const{width:Qt,height:zt}=gn.reference,pt=ht.floating.style;pt.setProperty("--radix-popper-available-width",`${Bn}px`),pt.setProperty("--radix-popper-available-height",`${Dr}px`),pt.setProperty("--radix-popper-anchor-width",`${Qt}px`),pt.setProperty("--radix-popper-anchor-height",`${zt}px`)}}),Y&&JY({element:Y,padding:h}),aQ({arrowWidth:F,arrowHeight:B}),T&&ZY({strategy:"referenceHidden",...K})]}),[Te,Ne]=rD(Ae),ae=au(M);Vi(()=>{xe&&(ae==null||ae())},[xe,ae]);const he=(Pe=oe.arrow)==null?void 0:Pe.x,Se=(Ge=oe.arrow)==null?void 0:Ge.y,Le=((at=oe.arrow)==null?void 0:at.centerOffset)!==0,[it,Re]=P.useState();return Vi(()=>{G&&Re(window.getComputedStyle(G).zIndex)},[G]),A.jsx("div",{ref:we.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:xe?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:it,"--radix-popper-transform-origin":[(st=oe.transformOrigin)==null?void 0:st.x,(ct=oe.transformOrigin)==null?void 0:ct.y].join(" "),...((bt=oe.hide)==null?void 0:bt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:A.jsx(rQ,{scope:t,placedSide:Te,onArrowChange:Z,arrowX:he,arrowY:Se,shouldHideArrow:Le,children:A.jsx(nn.div,{"data-side":Te,"data-align":Ne,...D,ref:W,style:{...D.style,animation:xe?void 0:"none"}})})})});eD.displayName=b_;var tD="PopperArrow",sQ={top:"bottom",right:"left",bottom:"top",left:"right"},nD=P.forwardRef(function(e,t){const{__scopePopper:r,...i}=e,o=iQ(tD,r),c=sQ[o.placedSide];return A.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:A.jsx(tQ,{...i,ref:t,style:{...i.style,display:"block"}})})});nD.displayName=tD;function oQ(n){return n!==null}var aQ=n=>({name:"transformOrigin",options:n,fn(e){var L,G,z;const{placement:t,rects:r,middlewareData:i}=e,c=((L=i.arrow)==null?void 0:L.centerOffset)!==0,h=c?0:n.arrowWidth,m=c?0:n.arrowHeight,[g,w]=rD(t),E={start:"0%",center:"50%",end:"100%"}[w],T=(((G=i.arrow)==null?void 0:G.x)??0)+h/2,R=(((z=i.arrow)==null?void 0:z.y)??0)+m/2;let M="",D="";return g==="bottom"?(M=c?E:`${T}px`,D=`${-m}px`):g==="top"?(M=c?E:`${T}px`,D=`${r.floating.height+m}px`):g==="right"?(M=`${-m}px`,D=c?E:`${R}px`):g==="left"&&(M=`${r.floating.width+m}px`,D=c?E:`${R}px`),{data:{x:M,y:D}}}});function rD(n){const[e,t="center"]=n.split("-");return[e,t]}var lQ=Q4,cQ=J4,uQ=eD,dQ=nD,hQ="Portal",I_=P.forwardRef((n,e)=>{var h;const{container:t,...r}=n,[i,o]=P.useState(!1);Vi(()=>o(!0),[]);const c=t||i&&((h=globalThis==null?void 0:globalThis.document)==null?void 0:h.body);return c?OS.createPortal(A.jsx(nn.div,{...r,ref:e}),c):null});I_.displayName=hQ;var fQ=mS[" useInsertionEffect ".trim().toString()]||Vi;function Wf({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,o,c]=pQ({defaultProp:e,onChange:t}),h=n!==void 0,m=h?n:i;{const w=P.useRef(n!==void 0);P.useEffect(()=>{const E=w.current;E!==h&&console.warn(`${r} is changing from ${E?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),w.current=h},[h,r])}const g=P.useCallback(w=>{var E;if(h){const T=mQ(w)?w(n):w;T!==n&&((E=c.current)==null||E.call(c,T))}else o(w)},[h,n,o,c]);return[m,g]}function pQ({defaultProp:n,onChange:e}){const[t,r]=P.useState(n),i=P.useRef(t),o=P.useRef(e);return fQ(()=>{o.current=e},[e]),P.useEffect(()=>{var c;i.current!==t&&((c=o.current)==null||c.call(o,t),i.current=t)},[t,i]),[t,r,o]}function mQ(n){return typeof n=="function"}function A_(n){const e=P.useRef({value:n,previous:n});return P.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var iD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),gQ="VisuallyHidden",yQ=P.forwardRef((n,e)=>A.jsx(nn.span,{...n,ref:e,style:{...iD,...n.style}}));yQ.displayName=gQ;var xQ=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Yu=new WeakMap,Nm=new WeakMap,km={},wx=0,sD=function(n){return n&&(n.host||sD(n.parentNode))},wQ=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=sD(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},vQ=function(n,e,t,r){var i=wQ(e,Array.isArray(n)?n:[n]);km[t]||(km[t]=new WeakMap);var o=km[t],c=[],h=new Set,m=new Set(i),g=function(E){!E||h.has(E)||(h.add(E),g(E.parentNode))};i.forEach(g);var w=function(E){!E||m.has(E)||Array.prototype.forEach.call(E.children,function(T){if(h.has(T))w(T);else try{var R=T.getAttribute(r),M=R!==null&&R!=="false",D=(Yu.get(T)||0)+1,L=(o.get(T)||0)+1;Yu.set(T,D),o.set(T,L),c.push(T),D===1&&M&&Nm.set(T,!0),L===1&&T.setAttribute(t,"true"),M||T.setAttribute(r,"true")}catch(G){console.error("aria-hidden: cannot operate on ",T,G)}})};return w(e),h.clear(),wx++,function(){c.forEach(function(E){var T=Yu.get(E)-1,R=o.get(E)-1;Yu.set(E,T),o.set(E,R),T||(Nm.has(E)||E.removeAttribute(r),Nm.delete(E)),R||E.removeAttribute(t)}),wx--,wx||(Yu=new WeakMap,Yu=new WeakMap,Nm=new WeakMap,km={})}},oD=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),i=xQ(n);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),vQ(r,i,t,"aria-hidden")):function(){return null}},jo=function(){return jo=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},jo.apply(this,arguments)};function aD(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _Q(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return n.concat(o||Array.prototype.slice.call(e))}var o0="right-scroll-bar-position",a0="width-before-scroll-bar",EQ="with-scroll-bars-hidden",bQ="--removed-body-scroll-bar-size";function vx(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function IQ(n,e){var t=P.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var i=t.value;i!==r&&(t.value=r,t.callback(r,i))}}}})[0];return t.callback=e,t.facade}var AQ=typeof window<"u"?P.useLayoutEffect:P.useEffect,FC=new WeakMap;function TQ(n,e){var t=IQ(null,function(r){return n.forEach(function(i){return vx(i,r)})});return AQ(function(){var r=FC.get(t);if(r){var i=new Set(r),o=new Set(n),c=t.current;i.forEach(function(h){o.has(h)||vx(h,null)}),o.forEach(function(h){i.has(h)||vx(h,c)})}FC.set(t,n)},[n]),t}function CQ(n){return n}function SQ(n,e){e===void 0&&(e=CQ);var t=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(o){var c=e(o,r);return t.push(c),function(){t=t.filter(function(h){return h!==c})}},assignSyncMedium:function(o){for(r=!0;t.length;){var c=t;t=[],c.forEach(o)}t={push:function(h){return o(h)},filter:function(){return t}}},assignMedium:function(o){r=!0;var c=[];if(t.length){var h=t;t=[],h.forEach(o),c=t}var m=function(){var w=c;c=[],w.forEach(o)},g=function(){return Promise.resolve().then(m)};g(),t={push:function(w){c.push(w),g()},filter:function(w){return c=c.filter(w),t}}}};return i}function RQ(n){n===void 0&&(n={});var e=SQ(null);return e.options=jo({async:!0,ssr:!1},n),e}var lD=function(n){var e=n.sideCar,t=aD(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,jo({},t))};lD.isSideCarExport=!0;function NQ(n,e){return n.useMedium(e),lD}var cD=RQ(),_x=function(){},qg=P.forwardRef(function(n,e){var t=P.useRef(null),r=P.useState({onScrollCapture:_x,onWheelCapture:_x,onTouchMoveCapture:_x}),i=r[0],o=r[1],c=n.forwardProps,h=n.children,m=n.className,g=n.removeScrollBar,w=n.enabled,E=n.shards,T=n.sideCar,R=n.noRelative,M=n.noIsolation,D=n.inert,L=n.allowPinchZoom,G=n.as,z=G===void 0?"div":G,W=n.gapMode,Y=aD(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Z=T,ie=TQ([t,e]),F=jo(jo({},Y),i);return P.createElement(P.Fragment,null,w&&P.createElement(Z,{sideCar:cD,removeScrollBar:g,shards:E,noRelative:R,noIsolation:M,inert:D,setCallbacks:o,allowPinchZoom:!!L,lockRef:t,gapMode:W}),c?P.cloneElement(P.Children.only(h),jo(jo({},F),{ref:ie})):P.createElement(z,jo({},F,{className:m,ref:ie}),h))});qg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qg.classNames={fullWidth:a0,zeroRight:o0};var kQ=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PQ(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=kQ();return e&&n.setAttribute("nonce",e),n}function DQ(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function OQ(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var MQ=function(){var n=0,e=null;return{add:function(t){n==0&&(e=PQ())&&(DQ(e,t),OQ(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},LQ=function(){var n=MQ();return function(e,t){P.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},uD=function(){var n=LQ(),e=function(t){var r=t.styles,i=t.dynamic;return n(r,i),null};return e},VQ={left:0,top:0,right:0,gap:0},Ex=function(n){return parseInt(n||"",10)||0},FQ=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[Ex(t),Ex(r),Ex(i)]},BQ=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return VQ;var e=FQ(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},jQ=uD(),wd="data-scroll-locked",UQ=function(n,e,t,r){var i=n.left,o=n.top,c=n.right,h=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(EQ,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(h,"px ").concat(r,`;
  }
  body[`).concat(wd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(h,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(o0,` {
    right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(a0,` {
    margin-right: `).concat(h,"px ").concat(r,`;
  }
  
  .`).concat(o0," .").concat(o0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(a0," .").concat(a0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wd,`] {
    `).concat(bQ,": ").concat(h,`px;
  }
`)},BC=function(){var n=parseInt(document.body.getAttribute(wd)||"0",10);return isFinite(n)?n:0},zQ=function(){P.useEffect(function(){return document.body.setAttribute(wd,(BC()+1).toString()),function(){var n=BC()-1;n<=0?document.body.removeAttribute(wd):document.body.setAttribute(wd,n.toString())}},[])},WQ=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,i=r===void 0?"margin":r;zQ();var o=P.useMemo(function(){return BQ(i)},[i]);return P.createElement(jQ,{styles:UQ(o,!e,i,t?"":"!important")})},zw=!1;if(typeof window<"u")try{var Pm=Object.defineProperty({},"passive",{get:function(){return zw=!0,!0}});window.addEventListener("test",Pm,Pm),window.removeEventListener("test",Pm,Pm)}catch{zw=!1}var Qu=zw?{passive:!1}:!1,HQ=function(n){return n.tagName==="TEXTAREA"},dD=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!HQ(n)&&t[e]==="visible")},GQ=function(n){return dD(n,"overflowY")},$Q=function(n){return dD(n,"overflowX")},jC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=hD(n,r);if(i){var o=fD(n,r),c=o[1],h=o[2];if(c>h)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},qQ=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},KQ=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},hD=function(n,e){return n==="v"?GQ(e):$Q(e)},fD=function(n,e){return n==="v"?qQ(e):KQ(e)},XQ=function(n,e){return n==="h"&&e==="rtl"?-1:1},YQ=function(n,e,t,r,i){var o=XQ(n,window.getComputedStyle(e).direction),c=o*r,h=t.target,m=e.contains(h),g=!1,w=c>0,E=0,T=0;do{if(!h)break;var R=fD(n,h),M=R[0],D=R[1],L=R[2],G=D-L-o*M;(M||G)&&hD(n,h)&&(E+=G,T+=M);var z=h.parentNode;h=z&&z.nodeType===Node.DOCUMENT_FRAGMENT_NODE?z.host:z}while(!m&&h!==document.body||m&&(e.contains(h)||e===h));return(w&&Math.abs(E)<1||!w&&Math.abs(T)<1)&&(g=!0),g},Dm=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},UC=function(n){return[n.deltaX,n.deltaY]},zC=function(n){return n&&"current"in n?n.current:n},QQ=function(n,e){return n[0]===e[0]&&n[1]===e[1]},ZQ=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},JQ=0,Zu=[];function eZ(n){var e=P.useRef([]),t=P.useRef([0,0]),r=P.useRef(),i=P.useState(JQ++)[0],o=P.useState(uD)[0],c=P.useRef(n);P.useEffect(function(){c.current=n},[n]),P.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var D=_Q([n.lockRef.current],(n.shards||[]).map(zC),!0).filter(Boolean);return D.forEach(function(L){return L.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),D.forEach(function(L){return L.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var h=P.useCallback(function(D,L){if("touches"in D&&D.touches.length===2||D.type==="wheel"&&D.ctrlKey)return!c.current.allowPinchZoom;var G=Dm(D),z=t.current,W="deltaX"in D?D.deltaX:z[0]-G[0],Y="deltaY"in D?D.deltaY:z[1]-G[1],Z,ie=D.target,F=Math.abs(W)>Math.abs(Y)?"h":"v";if("touches"in D&&F==="h"&&ie.type==="range")return!1;var B=jC(F,ie);if(!B)return!0;if(B?Z=F:(Z=F==="v"?"h":"v",B=jC(F,ie)),!B)return!1;if(!r.current&&"changedTouches"in D&&(W||Y)&&(r.current=Z),!Z)return!0;var H=r.current||Z;return YQ(H,L,D,H==="h"?W:Y)},[]),m=P.useCallback(function(D){var L=D;if(!(!Zu.length||Zu[Zu.length-1]!==o)){var G="deltaY"in L?UC(L):Dm(L),z=e.current.filter(function(Z){return Z.name===L.type&&(Z.target===L.target||L.target===Z.shadowParent)&&QQ(Z.delta,G)})[0];if(z&&z.should){L.cancelable&&L.preventDefault();return}if(!z){var W=(c.current.shards||[]).map(zC).filter(Boolean).filter(function(Z){return Z.contains(L.target)}),Y=W.length>0?h(L,W[0]):!c.current.noIsolation;Y&&L.cancelable&&L.preventDefault()}}},[]),g=P.useCallback(function(D,L,G,z){var W={name:D,delta:L,target:G,should:z,shadowParent:tZ(G)};e.current.push(W),setTimeout(function(){e.current=e.current.filter(function(Y){return Y!==W})},1)},[]),w=P.useCallback(function(D){t.current=Dm(D),r.current=void 0},[]),E=P.useCallback(function(D){g(D.type,UC(D),D.target,h(D,n.lockRef.current))},[]),T=P.useCallback(function(D){g(D.type,Dm(D),D.target,h(D,n.lockRef.current))},[]);P.useEffect(function(){return Zu.push(o),n.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:T}),document.addEventListener("wheel",m,Qu),document.addEventListener("touchmove",m,Qu),document.addEventListener("touchstart",w,Qu),function(){Zu=Zu.filter(function(D){return D!==o}),document.removeEventListener("wheel",m,Qu),document.removeEventListener("touchmove",m,Qu),document.removeEventListener("touchstart",w,Qu)}},[]);var R=n.removeScrollBar,M=n.inert;return P.createElement(P.Fragment,null,M?P.createElement(o,{styles:ZQ(i)}):null,R?P.createElement(WQ,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function tZ(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const nZ=NQ(cD,eZ);var T_=P.forwardRef(function(n,e){return P.createElement(qg,jo({},n,{ref:e,sideCar:nZ}))});T_.classNames=qg.classNames;var rZ=[" ","Enter","ArrowUp","ArrowDown"],iZ=[" ","Enter"],cu="Select",[Kg,Xg,sZ]=N4(cu),[rh,pne]=eh(cu,[sZ,X4]),Yg=X4(),[oZ,nc]=rh(cu),[aZ,lZ]=rh(cu),pD=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:i,onOpenChange:o,value:c,defaultValue:h,onValueChange:m,dir:g,name:w,autoComplete:E,disabled:T,required:R,form:M}=n,D=Yg(e),[L,G]=P.useState(null),[z,W]=P.useState(null),[Y,Z]=P.useState(!1),ie=k4(g),[F,B]=Wf({prop:r,defaultProp:i??!1,onChange:o,caller:cu}),[H,ee]=Wf({prop:c,defaultProp:h,onChange:m,caller:cu}),ne=P.useRef(null),te=L?M||!!L.closest("form"):!0,[K,we]=P.useState(new Set),se=Array.from(K).map(Ae=>Ae.props.value).join(";");return A.jsx(lQ,{...D,children:A.jsxs(oZ,{required:R,scope:e,trigger:L,onTriggerChange:G,valueNode:z,onValueNodeChange:W,valueNodeHasChildren:Y,onValueNodeHasChildrenChange:Z,contentId:yd(),value:H,onValueChange:ee,open:F,onOpenChange:B,dir:ie,triggerPointerDownPosRef:ne,disabled:T,children:[A.jsx(Kg.Provider,{scope:e,children:A.jsx(aZ,{scope:n.__scopeSelect,onNativeOptionAdd:P.useCallback(Ae=>{we(xe=>new Set(xe).add(Ae))},[]),onNativeOptionRemove:P.useCallback(Ae=>{we(xe=>{const oe=new Set(xe);return oe.delete(Ae),oe})},[]),children:t})}),te?A.jsxs(FD,{"aria-hidden":!0,required:R,tabIndex:-1,name:w,autoComplete:E,value:H,onChange:Ae=>ee(Ae.target.value),disabled:T,form:M,children:[H===void 0?A.jsx("option",{value:""}):null,Array.from(K)]},se):null]})})};pD.displayName=cu;var mD="SelectTrigger",gD=P.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...i}=n,o=Yg(t),c=nc(mD,t),h=c.disabled||r,m=bn(e,c.onTriggerChange),g=Xg(t),w=P.useRef("touch"),[E,T,R]=jD(D=>{const L=g().filter(W=>!W.disabled),G=L.find(W=>W.value===c.value),z=UD(L,D,G);z!==void 0&&c.onValueChange(z.value)}),M=D=>{h||(c.onOpenChange(!0),R()),D&&(c.triggerPointerDownPosRef.current={x:Math.round(D.pageX),y:Math.round(D.pageY)})};return A.jsx(cQ,{asChild:!0,...o,children:A.jsx(nn.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:h,"data-disabled":h?"":void 0,"data-placeholder":BD(c.value)?"":void 0,...i,ref:m,onClick:an(i.onClick,D=>{D.currentTarget.focus(),w.current!=="mouse"&&M(D)}),onPointerDown:an(i.onPointerDown,D=>{w.current=D.pointerType;const L=D.target;L.hasPointerCapture(D.pointerId)&&L.releasePointerCapture(D.pointerId),D.button===0&&D.ctrlKey===!1&&D.pointerType==="mouse"&&(M(D),D.preventDefault())}),onKeyDown:an(i.onKeyDown,D=>{const L=E.current!=="";!(D.ctrlKey||D.altKey||D.metaKey)&&D.key.length===1&&T(D.key),!(L&&D.key===" ")&&rZ.includes(D.key)&&(M(),D.preventDefault())})})})});gD.displayName=mD;var yD="SelectValue",xD=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,children:o,placeholder:c="",...h}=n,m=nc(yD,t),{onValueNodeHasChildrenChange:g}=m,w=o!==void 0,E=bn(e,m.onValueNodeChange);return Vi(()=>{g(w)},[g,w]),A.jsx(nn.span,{...h,ref:E,style:{pointerEvents:"none"},children:BD(m.value)?A.jsx(A.Fragment,{children:c}):o})});xD.displayName=yD;var cZ="SelectIcon",wD=P.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...i}=n;return A.jsx(nn.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});wD.displayName=cZ;var uZ="SelectPortal",vD=n=>A.jsx(I_,{asChild:!0,...n});vD.displayName=uZ;var uu="SelectContent",_D=P.forwardRef((n,e)=>{const t=nc(uu,n.__scopeSelect),[r,i]=P.useState();if(Vi(()=>{i(new DocumentFragment)},[]),!t.open){const o=r;return o?Kf.createPortal(A.jsx(ED,{scope:n.__scopeSelect,children:A.jsx(Kg.Slot,{scope:n.__scopeSelect,children:A.jsx("div",{children:n.children})})}),o):null}return A.jsx(bD,{...n,ref:e})});_D.displayName=uu;var po=10,[ED,rc]=rh(uu),dZ="SelectContentImpl",hZ=Vd("SelectContent.RemoveScroll"),bD=P.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:c,side:h,sideOffset:m,align:g,alignOffset:w,arrowPadding:E,collisionBoundary:T,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L,...G}=n,z=nc(uu,t),[W,Y]=P.useState(null),[Z,ie]=P.useState(null),F=bn(e,Pe=>Y(Pe)),[B,H]=P.useState(null),[ee,ne]=P.useState(null),te=Xg(t),[K,we]=P.useState(!1),se=P.useRef(!1);P.useEffect(()=>{if(W)return oD(W)},[W]),O4();const Ae=P.useCallback(Pe=>{const[Ge,...at]=te().map(bt=>bt.ref.current),[st]=at.slice(-1),ct=document.activeElement;for(const bt of Pe)if(bt===ct||(bt==null||bt.scrollIntoView({block:"nearest"}),bt===Ge&&Z&&(Z.scrollTop=0),bt===st&&Z&&(Z.scrollTop=Z.scrollHeight),bt==null||bt.focus(),document.activeElement!==ct))return},[te,Z]),xe=P.useCallback(()=>Ae([B,W]),[Ae,B,W]);P.useEffect(()=>{K&&xe()},[K,xe]);const{onOpenChange:oe,triggerPointerDownPosRef:Te}=z;P.useEffect(()=>{if(W){let Pe={x:0,y:0};const Ge=st=>{var ct,bt;Pe={x:Math.abs(Math.round(st.pageX)-(((ct=Te.current)==null?void 0:ct.x)??0)),y:Math.abs(Math.round(st.pageY)-(((bt=Te.current)==null?void 0:bt.y)??0))}},at=st=>{Pe.x<=10&&Pe.y<=10?st.preventDefault():W.contains(st.target)||oe(!1),document.removeEventListener("pointermove",Ge),Te.current=null};return Te.current!==null&&(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",at,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ge),document.removeEventListener("pointerup",at,{capture:!0})}}},[W,oe,Te]),P.useEffect(()=>{const Pe=()=>oe(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[oe]);const[Ne,ae]=jD(Pe=>{const Ge=te().filter(ct=>!ct.disabled),at=Ge.find(ct=>ct.ref.current===document.activeElement),st=UD(Ge,Pe,at);st&&setTimeout(()=>st.ref.current.focus())}),he=P.useCallback((Pe,Ge,at)=>{const st=!se.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&(H(Pe),st&&(se.current=!0))},[z.value]),Se=P.useCallback(()=>W==null?void 0:W.focus(),[W]),Le=P.useCallback((Pe,Ge,at)=>{const st=!se.current&&!at;(z.value!==void 0&&z.value===Ge||st)&&ne(Pe)},[z.value]),it=r==="popper"?Ww:ID,Re=it===Ww?{side:h,sideOffset:m,align:g,alignOffset:w,arrowPadding:E,collisionBoundary:T,collisionPadding:R,sticky:M,hideWhenDetached:D,avoidCollisions:L}:{};return A.jsx(ED,{scope:t,content:W,viewport:Z,onViewportChange:ie,itemRefCallback:he,selectedItem:B,onItemLeave:Se,itemTextRefCallback:Le,focusSelectedItem:xe,selectedItemText:ee,position:r,isPositioned:K,searchRef:Ne,children:A.jsx(T_,{as:hZ,allowPinchZoom:!0,children:A.jsx(f_,{asChild:!0,trapped:z.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:an(i,Pe=>{var Ge;(Ge=z.trigger)==null||Ge.focus({preventScroll:!0}),Pe.preventDefault()}),children:A.jsx(h_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>z.onOpenChange(!1),children:A.jsx(it,{role:"listbox",id:z.contentId,"data-state":z.open?"open":"closed",dir:z.dir,onContextMenu:Pe=>Pe.preventDefault(),...G,...Re,onPlaced:()=>we(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...G.style},onKeyDown:an(G.onKeyDown,Pe=>{const Ge=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Ge&&Pe.key.length===1&&ae(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let st=te().filter(ct=>!ct.disabled).map(ct=>ct.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(st=st.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const ct=Pe.target,bt=st.indexOf(ct);st=st.slice(bt+1)}setTimeout(()=>Ae(st)),Pe.preventDefault()}})})})})})})});bD.displayName=dZ;var fZ="SelectItemAlignedPosition",ID=P.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...i}=n,o=nc(uu,t),c=rc(uu,t),[h,m]=P.useState(null),[g,w]=P.useState(null),E=bn(e,F=>w(F)),T=Xg(t),R=P.useRef(!1),M=P.useRef(!0),{viewport:D,selectedItem:L,selectedItemText:G,focusSelectedItem:z}=c,W=P.useCallback(()=>{if(o.trigger&&o.valueNode&&h&&g&&D&&L&&G){const F=o.trigger.getBoundingClientRect(),B=g.getBoundingClientRect(),H=o.valueNode.getBoundingClientRect(),ee=G.getBoundingClientRect();if(o.dir!=="rtl"){const ct=ee.left-B.left,bt=H.left-ct,ht=F.left-bt,gn=F.width+ht,Bn=Math.max(gn,B.width),Dr=window.innerWidth-po,Qt=G0(bt,[po,Math.max(po,Dr-Bn)]);h.style.minWidth=gn+"px",h.style.left=Qt+"px"}else{const ct=B.right-ee.right,bt=window.innerWidth-H.right-ct,ht=window.innerWidth-F.right-bt,gn=F.width+ht,Bn=Math.max(gn,B.width),Dr=window.innerWidth-po,Qt=G0(bt,[po,Math.max(po,Dr-Bn)]);h.style.minWidth=gn+"px",h.style.right=Qt+"px"}const ne=T(),te=window.innerHeight-po*2,K=D.scrollHeight,we=window.getComputedStyle(g),se=parseInt(we.borderTopWidth,10),Ae=parseInt(we.paddingTop,10),xe=parseInt(we.borderBottomWidth,10),oe=parseInt(we.paddingBottom,10),Te=se+Ae+K+oe+xe,Ne=Math.min(L.offsetHeight*5,Te),ae=window.getComputedStyle(D),he=parseInt(ae.paddingTop,10),Se=parseInt(ae.paddingBottom,10),Le=F.top+F.height/2-po,it=te-Le,Re=L.offsetHeight/2,Pe=L.offsetTop+Re,Ge=se+Ae+Pe,at=Te-Ge;if(Ge<=Le){const ct=ne.length>0&&L===ne[ne.length-1].ref.current;h.style.bottom="0px";const bt=g.clientHeight-D.offsetTop-D.offsetHeight,ht=Math.max(it,Re+(ct?Se:0)+bt+xe),gn=Ge+ht;h.style.height=gn+"px"}else{const ct=ne.length>0&&L===ne[0].ref.current;h.style.top="0px";const ht=Math.max(Le,se+D.offsetTop+(ct?he:0)+Re)+at;h.style.height=ht+"px",D.scrollTop=Ge-Le+D.offsetTop}h.style.margin=`${po}px 0`,h.style.minHeight=Ne+"px",h.style.maxHeight=te+"px",r==null||r(),requestAnimationFrame(()=>R.current=!0)}},[T,o.trigger,o.valueNode,h,g,D,L,G,o.dir,r]);Vi(()=>W(),[W]);const[Y,Z]=P.useState();Vi(()=>{g&&Z(window.getComputedStyle(g).zIndex)},[g]);const ie=P.useCallback(F=>{F&&M.current===!0&&(W(),z==null||z(),M.current=!1)},[W,z]);return A.jsx(mZ,{scope:t,contentWrapper:h,shouldExpandOnScrollRef:R,onScrollButtonChange:ie,children:A.jsx("div",{ref:m,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Y},children:A.jsx(nn.div,{...i,ref:E,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});ID.displayName=fZ;var pZ="SelectPopperPosition",Ww=P.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:i=po,...o}=n,c=Yg(t);return A.jsx(uQ,{...c,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ww.displayName=pZ;var[mZ,C_]=rh(uu,{}),Hw="SelectViewport",AD=P.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...i}=n,o=rc(Hw,t),c=C_(Hw,t),h=bn(e,o.onViewportChange),m=P.useRef(0);return A.jsxs(A.Fragment,{children:[A.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),A.jsx(Kg.Slot,{scope:t,children:A.jsx(nn.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:h,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:an(i.onScroll,g=>{const w=g.currentTarget,{contentWrapper:E,shouldExpandOnScrollRef:T}=c;if(T!=null&&T.current&&E){const R=Math.abs(m.current-w.scrollTop);if(R>0){const M=window.innerHeight-po*2,D=parseFloat(E.style.minHeight),L=parseFloat(E.style.height),G=Math.max(D,L);if(G<M){const z=G+R,W=Math.min(M,z),Y=z-W;E.style.height=W+"px",E.style.bottom==="0px"&&(w.scrollTop=Y>0?Y:0,E.style.justifyContent="flex-end")}}}m.current=w.scrollTop})})})]})});AD.displayName=Hw;var TD="SelectGroup",[gZ,yZ]=rh(TD),xZ=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=yd();return A.jsx(gZ,{scope:t,id:i,children:A.jsx(nn.div,{role:"group","aria-labelledby":i,...r,ref:e})})});xZ.displayName=TD;var CD="SelectLabel",SD=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=yZ(CD,t);return A.jsx(nn.div,{id:i.id,...r,ref:e})});SD.displayName=CD;var Y0="SelectItem",[wZ,RD]=rh(Y0),ND=P.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:i=!1,textValue:o,...c}=n,h=nc(Y0,t),m=rc(Y0,t),g=h.value===r,[w,E]=P.useState(o??""),[T,R]=P.useState(!1),M=bn(e,z=>{var W;return(W=m.itemRefCallback)==null?void 0:W.call(m,z,r,i)}),D=yd(),L=P.useRef("touch"),G=()=>{i||(h.onValueChange(r),h.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return A.jsx(wZ,{scope:t,value:r,disabled:i,textId:D,isSelected:g,onItemTextChange:P.useCallback(z=>{E(W=>W||((z==null?void 0:z.textContent)??"").trim())},[]),children:A.jsx(Kg.ItemSlot,{scope:t,value:r,disabled:i,textValue:w,children:A.jsx(nn.div,{role:"option","aria-labelledby":D,"data-highlighted":T?"":void 0,"aria-selected":g&&T,"data-state":g?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:M,onFocus:an(c.onFocus,()=>R(!0)),onBlur:an(c.onBlur,()=>R(!1)),onClick:an(c.onClick,()=>{L.current!=="mouse"&&G()}),onPointerUp:an(c.onPointerUp,()=>{L.current==="mouse"&&G()}),onPointerDown:an(c.onPointerDown,z=>{L.current=z.pointerType}),onPointerMove:an(c.onPointerMove,z=>{var W;L.current=z.pointerType,i?(W=m.onItemLeave)==null||W.call(m):L.current==="mouse"&&z.currentTarget.focus({preventScroll:!0})}),onPointerLeave:an(c.onPointerLeave,z=>{var W;z.currentTarget===document.activeElement&&((W=m.onItemLeave)==null||W.call(m))}),onKeyDown:an(c.onKeyDown,z=>{var Y;((Y=m.searchRef)==null?void 0:Y.current)!==""&&z.key===" "||(iZ.includes(z.key)&&G(),z.key===" "&&z.preventDefault())})})})})});ND.displayName=Y0;var Kh="SelectItemText",kD=P.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:i,...o}=n,c=nc(Kh,t),h=rc(Kh,t),m=RD(Kh,t),g=lZ(Kh,t),[w,E]=P.useState(null),T=bn(e,G=>E(G),m.onItemTextChange,G=>{var z;return(z=h.itemTextRefCallback)==null?void 0:z.call(h,G,m.value,m.disabled)}),R=w==null?void 0:w.textContent,M=P.useMemo(()=>A.jsx("option",{value:m.value,disabled:m.disabled,children:R},m.value),[m.disabled,m.value,R]),{onNativeOptionAdd:D,onNativeOptionRemove:L}=g;return Vi(()=>(D(M),()=>L(M)),[D,L,M]),A.jsxs(A.Fragment,{children:[A.jsx(nn.span,{id:m.textId,...o,ref:T}),m.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Kf.createPortal(o.children,c.valueNode):null]})});kD.displayName=Kh;var PD="SelectItemIndicator",DD=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return RD(PD,t).isSelected?A.jsx(nn.span,{"aria-hidden":!0,...r,ref:e}):null});DD.displayName=PD;var Gw="SelectScrollUpButton",OD=P.forwardRef((n,e)=>{const t=rc(Gw,n.__scopeSelect),r=C_(Gw,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Vi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=m.scrollTop>0;o(g)};const m=t.viewport;return h(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?A.jsx(LD,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:m}=t;h&&m&&(h.scrollTop=h.scrollTop-m.offsetHeight)}}):null});OD.displayName=Gw;var $w="SelectScrollDownButton",MD=P.forwardRef((n,e)=>{const t=rc($w,n.__scopeSelect),r=C_($w,n.__scopeSelect),[i,o]=P.useState(!1),c=bn(e,r.onScrollButtonChange);return Vi(()=>{if(t.viewport&&t.isPositioned){let h=function(){const g=m.scrollHeight-m.clientHeight,w=Math.ceil(m.scrollTop)<g;o(w)};const m=t.viewport;return h(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[t.viewport,t.isPositioned]),i?A.jsx(LD,{...n,ref:c,onAutoScroll:()=>{const{viewport:h,selectedItem:m}=t;h&&m&&(h.scrollTop=h.scrollTop+m.offsetHeight)}}):null});MD.displayName=$w;var LD=P.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...i}=n,o=rc("SelectScrollButton",t),c=P.useRef(null),h=Xg(t),m=P.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return P.useEffect(()=>()=>m(),[m]),Vi(()=>{var w;const g=h().find(E=>E.ref.current===document.activeElement);(w=g==null?void 0:g.ref.current)==null||w.scrollIntoView({block:"nearest"})},[h]),A.jsx(nn.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:an(i.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(r,50))}),onPointerMove:an(i.onPointerMove,()=>{var g;(g=o.onItemLeave)==null||g.call(o),c.current===null&&(c.current=window.setInterval(r,50))}),onPointerLeave:an(i.onPointerLeave,()=>{m()})})}),vZ="SelectSeparator",VD=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return A.jsx(nn.div,{"aria-hidden":!0,...r,ref:e})});VD.displayName=vZ;var qw="SelectArrow",_Z=P.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,i=Yg(t),o=nc(qw,t),c=rc(qw,t);return o.open&&c.position==="popper"?A.jsx(dQ,{...i,...r,ref:e}):null});_Z.displayName=qw;var EZ="SelectBubbleInput",FD=P.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(r,i),c=A_(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const m=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(c!==e&&w){const E=new Event("change",{bubbles:!0});w.call(h,e),h.dispatchEvent(E)}},[c,e]),A.jsx(nn.select,{...t,style:{...iD,...t.style},ref:o,defaultValue:e})});FD.displayName=EZ;function BD(n){return n===""||n===void 0}function jD(n){const e=au(n),t=P.useRef(""),r=P.useRef(0),i=P.useCallback(c=>{const h=t.current+c;e(h),function m(g){t.current=g,window.clearTimeout(r.current),g!==""&&(r.current=window.setTimeout(()=>m(""),1e3))}(h)},[e]),o=P.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return P.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,i,o]}function UD(n,e,t){const i=e.length>1&&Array.from(e).every(g=>g===e[0])?e[0]:e,o=t?n.indexOf(t):-1;let c=bZ(n,Math.max(o,0));i.length===1&&(c=c.filter(g=>g!==t));const m=c.find(g=>g.textValue.toLowerCase().startsWith(i.toLowerCase()));return m!==t?m:void 0}function bZ(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var IZ=pD,zD=gD,AZ=xD,TZ=wD,CZ=vD,WD=_D,SZ=AD,HD=SD,GD=ND,RZ=kD,NZ=DD,$D=OD,qD=MD,KD=VD;const WC=IZ,HC=AZ,Kw=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(zD,{ref:r,className:ln("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,A.jsx(TZ,{asChild:!0,children:A.jsx(uv,{className:"h-4 w-4 opacity-50"})})]}));Kw.displayName=zD.displayName;const XD=P.forwardRef(({className:n,...e},t)=>A.jsx($D,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:A.jsx(LS,{className:"h-4 w-4"})}));XD.displayName=$D.displayName;const YD=P.forwardRef(({className:n,...e},t)=>A.jsx(qD,{ref:t,className:ln("flex cursor-default items-center justify-center py-1",n),...e,children:A.jsx(uv,{className:"h-4 w-4"})}));YD.displayName=qD.displayName;const Xw=P.forwardRef(({className:n,children:e,position:t="popper",...r},i)=>A.jsx(CZ,{children:A.jsxs(WD,{ref:i,className:ln("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[A.jsx(XD,{}),A.jsx(SZ,{className:ln("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),A.jsx(YD,{})]})}));Xw.displayName=WD.displayName;const kZ=P.forwardRef(({className:n,...e},t)=>A.jsx(HD,{ref:t,className:ln("px-2 py-1.5 text-sm font-semibold",n),...e}));kZ.displayName=HD.displayName;const Xh=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(GD,{ref:r,className:ln("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[A.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:A.jsx(NZ,{children:A.jsx(LM,{className:"h-4 w-4"})})}),A.jsx(RZ,{children:e})]}));Xh.displayName=GD.displayName;const PZ=P.forwardRef(({className:n,...e},t)=>A.jsx(KD,{ref:t,className:ln("-mx-1 my-1 h-px bg-muted",n),...e}));PZ.displayName=KD.displayName;function DZ(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const OZ=n=>{switch(n){case"success":return VZ;case"info":return BZ;case"warning":return FZ;case"error":return jZ;default:return null}},MZ=Array(12).fill(0),LZ=({visible:n,className:e})=>ze.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ze.createElement("div",{className:"sonner-spinner"},MZ.map((t,r)=>ze.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),VZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),FZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),BZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),jZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ze.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UZ=ze.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ze.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ze.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),zZ=()=>{const[n,e]=ze.useState(document.hidden);return ze.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Yw=1;class WZ{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Yw++,c=this.toasts.find(m=>m.id===o),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),c?this.toasts=this.toasts.map(m=>m.id===o?(this.publish({...m,...e,id:o,title:r}),{...m,...e,id:o,dismissible:h,title:r}):m):this.addToast({title:r,...i,dismissible:h,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,c;const h=i.then(async g=>{if(c=["resolve",g],ze.isValidElement(g))o=!1,this.create({id:r,type:"default",message:g});else if(GZ(g)&&!g.ok){o=!1;const E=typeof t.error=="function"?await t.error(`HTTP error! status: ${g.status}`):t.error,T=typeof t.description=="function"?await t.description(`HTTP error! status: ${g.status}`):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"error",description:T,...M})}else if(g instanceof Error){o=!1;const E=typeof t.error=="function"?await t.error(g):t.error,T=typeof t.description=="function"?await t.description(g):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"error",description:T,...M})}else if(t.success!==void 0){o=!1;const E=typeof t.success=="function"?await t.success(g):t.success,T=typeof t.description=="function"?await t.description(g):t.description,M=typeof E=="object"&&!ze.isValidElement(E)?E:{message:E};this.create({id:r,type:"success",description:T,...M})}}).catch(async g=>{if(c=["reject",g],t.error!==void 0){o=!1;const w=typeof t.error=="function"?await t.error(g):t.error,E=typeof t.description=="function"?await t.description(g):t.description,R=typeof w=="object"&&!ze.isValidElement(w)?w:{message:w};this.create({id:r,type:"error",description:E,...R})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),m=()=>new Promise((g,w)=>h.then(()=>c[0]==="reject"?w(c[1]):g(c[1])).catch(w));return typeof r!="string"&&typeof r!="number"?{unwrap:m}:Object.assign(r,{unwrap:m})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Yw++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ls=new WZ,HZ=(n,e)=>{const t=(e==null?void 0:e.id)||Yw++;return ls.addToast({title:n,...e,id:t}),t},GZ=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",$Z=HZ,qZ=()=>ls.toasts,KZ=()=>ls.getActiveToasts(),xr=Object.assign($Z,{success:ls.success,info:ls.info,warning:ls.warning,error:ls.error,custom:ls.custom,message:ls.message,promise:ls.promise,dismiss:ls.dismiss,loading:ls.loading},{getHistory:qZ,getToasts:KZ});DZ("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Om(n){return n.label!==void 0}const XZ=3,YZ="24px",QZ="16px",GC=4e3,ZZ=356,JZ=14,eJ=45,tJ=200;function Vo(...n){return n.filter(Boolean).join(" ")}function nJ(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const rJ=n=>{var e,t,r,i,o,c,h,m,g;const{invert:w,toast:E,unstyled:T,interacting:R,setHeights:M,visibleToasts:D,heights:L,index:G,toasts:z,expanded:W,removeToast:Y,defaultRichColors:Z,closeButton:ie,style:F,cancelButtonStyle:B,actionButtonStyle:H,className:ee="",descriptionClassName:ne="",duration:te,position:K,gap:we,expandByDefault:se,classNames:Ae,icons:xe,closeButtonAriaLabel:oe="Close toast"}=n,[Te,Ne]=ze.useState(null),[ae,he]=ze.useState(null),[Se,Le]=ze.useState(!1),[it,Re]=ze.useState(!1),[Pe,Ge]=ze.useState(!1),[at,st]=ze.useState(!1),[ct,bt]=ze.useState(!1),[ht,gn]=ze.useState(0),[Bn,Dr]=ze.useState(0),Qt=ze.useRef(E.duration||te||GC),zt=ze.useRef(null),pt=ze.useRef(null),xi=G===0,Xe=G+1<=D,Xn=E.type,wi=E.dismissible!==!1,Yr=E.className||"",no=E.descriptionClassName||"",Wt=ze.useMemo(()=>L.findIndex(mt=>mt.toastId===E.id)||0,[L,E.id]),Yn=ze.useMemo(()=>{var mt;return(mt=E.closeButton)!=null?mt:ie},[E.closeButton,ie]),Er=ze.useMemo(()=>E.duration||te||GC,[E.duration,te]),jn=ze.useRef(0),Qr=ze.useRef(0),Fi=ze.useRef(0),vi=ze.useRef(null),[In,We]=K.split("-"),An=ze.useMemo(()=>L.reduce((mt,Gt,Tn)=>Tn>=Wt?mt:mt+Gt.height,0),[L,Wt]),Ht=zZ(),pn=E.invert||w,ai=Xn==="loading";Qr.current=ze.useMemo(()=>Wt*we+An,[Wt,An]),ze.useEffect(()=>{Qt.current=Er},[Er]),ze.useEffect(()=>{Le(!0)},[]),ze.useEffect(()=>{const mt=pt.current;if(mt){const Gt=mt.getBoundingClientRect().height;return Dr(Gt),M(Tn=>[{toastId:E.id,height:Gt,position:E.position},...Tn]),()=>M(Tn=>Tn.filter($t=>$t.toastId!==E.id))}},[M,E.id]),ze.useLayoutEffect(()=>{if(!Se)return;const mt=pt.current,Gt=mt.style.height;mt.style.height="auto";const Tn=mt.getBoundingClientRect().height;mt.style.height=Gt,Dr(Tn),M($t=>$t.find(Cn=>Cn.toastId===E.id)?$t.map(Cn=>Cn.toastId===E.id?{...Cn,height:Tn}:Cn):[{toastId:E.id,height:Tn,position:E.position},...$t])},[Se,E.title,E.description,M,E.id,E.jsx,E.action,E.cancel]);const jr=ze.useCallback(()=>{Re(!0),gn(Qr.current),M(mt=>mt.filter(Gt=>Gt.toastId!==E.id)),setTimeout(()=>{Y(E)},tJ)},[E,Y,M,Qr]);ze.useEffect(()=>{if(E.promise&&Xn==="loading"||E.duration===1/0||E.type==="loading")return;let mt;return W||R||Ht?(()=>{if(Fi.current<jn.current){const $t=new Date().getTime()-jn.current;Qt.current=Qt.current-$t}Fi.current=new Date().getTime()})():(()=>{Qt.current!==1/0&&(jn.current=new Date().getTime(),mt=setTimeout(()=>{E.onAutoClose==null||E.onAutoClose.call(E,E),jr()},Qt.current))})(),()=>clearTimeout(mt)},[W,R,E,Xn,Ht,jr]),ze.useEffect(()=>{E.delete&&(jr(),E.onDismiss==null||E.onDismiss.call(E,E))},[jr,E.delete]);function ro(){var mt;if(xe!=null&&xe.loading){var Gt;return ze.createElement("div",{className:Vo(Ae==null?void 0:Ae.loader,E==null||(Gt=E.classNames)==null?void 0:Gt.loader,"sonner-loader"),"data-visible":Xn==="loading"},xe.loading)}return ze.createElement(LZ,{className:Vo(Ae==null?void 0:Ae.loader,E==null||(mt=E.classNames)==null?void 0:mt.loader),visible:Xn==="loading"})}const Ct=E.icon||(xe==null?void 0:xe[Xn])||OZ(Xn);var br,Ls;return ze.createElement("li",{tabIndex:0,ref:pt,className:Vo(ee,Yr,Ae==null?void 0:Ae.toast,E==null||(e=E.classNames)==null?void 0:e.toast,Ae==null?void 0:Ae.default,Ae==null?void 0:Ae[Xn],E==null||(t=E.classNames)==null?void 0:t[Xn]),"data-sonner-toast":"","data-rich-colors":(br=E.richColors)!=null?br:Z,"data-styled":!(E.jsx||E.unstyled||T),"data-mounted":Se,"data-promise":!!E.promise,"data-swiped":ct,"data-removed":it,"data-visible":Xe,"data-y-position":In,"data-x-position":We,"data-index":G,"data-front":xi,"data-swiping":Pe,"data-dismissible":wi,"data-type":Xn,"data-invert":pn,"data-swipe-out":at,"data-swipe-direction":ae,"data-expanded":!!(W||se&&Se),style:{"--index":G,"--toasts-before":G,"--z-index":z.length-G,"--offset":`${it?ht:Qr.current}px`,"--initial-height":se?"auto":`${Bn}px`,...F,...E.style},onDragEnd:()=>{Ge(!1),Ne(null),vi.current=null},onPointerDown:mt=>{mt.button!==2&&(ai||!wi||(zt.current=new Date,gn(Qr.current),mt.target.setPointerCapture(mt.pointerId),mt.target.tagName!=="BUTTON"&&(Ge(!0),vi.current={x:mt.clientX,y:mt.clientY})))},onPointerUp:()=>{var mt,Gt,Tn;if(at||!wi)return;vi.current=null;const $t=Number(((mt=pt.current)==null?void 0:mt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ir=Number(((Gt=pt.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Cn=new Date().getTime()-((Tn=zt.current)==null?void 0:Tn.getTime()),Rt=Te==="x"?$t:Ir,gs=Math.abs(Rt)/Cn;if(Math.abs(Rt)>=eJ||gs>.11){gn(Qr.current),E.onDismiss==null||E.onDismiss.call(E,E),he(Te==="x"?$t>0?"right":"left":Ir>0?"down":"up"),jr(),st(!0);return}else{var cn,ir;(cn=pt.current)==null||cn.style.setProperty("--swipe-amount-x","0px"),(ir=pt.current)==null||ir.style.setProperty("--swipe-amount-y","0px")}bt(!1),Ge(!1),Ne(null)},onPointerMove:mt=>{var Gt,Tn,$t;if(!vi.current||!wi||((Gt=window.getSelection())==null?void 0:Gt.toString().length)>0)return;const Cn=mt.clientY-vi.current.y,Rt=mt.clientX-vi.current.x;var gs;const cn=(gs=n.swipeDirections)!=null?gs:nJ(K);!Te&&(Math.abs(Rt)>1||Math.abs(Cn)>1)&&Ne(Math.abs(Rt)>Math.abs(Cn)?"x":"y");let ir={x:0,y:0};const Un=dr=>1/(1.5+Math.abs(dr)/20);if(Te==="y"){if(cn.includes("top")||cn.includes("bottom"))if(cn.includes("top")&&Cn<0||cn.includes("bottom")&&Cn>0)ir.y=Cn;else{const dr=Cn*Un(Cn);ir.y=Math.abs(dr)<Math.abs(Cn)?dr:Cn}}else if(Te==="x"&&(cn.includes("left")||cn.includes("right")))if(cn.includes("left")&&Rt<0||cn.includes("right")&&Rt>0)ir.x=Rt;else{const dr=Rt*Un(Rt);ir.x=Math.abs(dr)<Math.abs(Rt)?dr:Rt}(Math.abs(ir.x)>0||Math.abs(ir.y)>0)&&bt(!0),(Tn=pt.current)==null||Tn.style.setProperty("--swipe-amount-x",`${ir.x}px`),($t=pt.current)==null||$t.style.setProperty("--swipe-amount-y",`${ir.y}px`)}},Yn&&!E.jsx&&Xn!=="loading"?ze.createElement("button",{"aria-label":oe,"data-disabled":ai,"data-close-button":!0,onClick:ai||!wi?()=>{}:()=>{jr(),E.onDismiss==null||E.onDismiss.call(E,E)},className:Vo(Ae==null?void 0:Ae.closeButton,E==null||(r=E.classNames)==null?void 0:r.closeButton)},(Ls=xe==null?void 0:xe.close)!=null?Ls:UZ):null,(Xn||E.icon||E.promise)&&E.icon!==null&&((xe==null?void 0:xe[Xn])!==null||E.icon)?ze.createElement("div",{"data-icon":"",className:Vo(Ae==null?void 0:Ae.icon,E==null||(i=E.classNames)==null?void 0:i.icon)},E.promise||E.type==="loading"&&!E.icon?E.icon||ro():null,E.type!=="loading"?Ct:null):null,ze.createElement("div",{"data-content":"",className:Vo(Ae==null?void 0:Ae.content,E==null||(o=E.classNames)==null?void 0:o.content)},ze.createElement("div",{"data-title":"",className:Vo(Ae==null?void 0:Ae.title,E==null||(c=E.classNames)==null?void 0:c.title)},E.jsx?E.jsx:typeof E.title=="function"?E.title():E.title),E.description?ze.createElement("div",{"data-description":"",className:Vo(ne,no,Ae==null?void 0:Ae.description,E==null||(h=E.classNames)==null?void 0:h.description)},typeof E.description=="function"?E.description():E.description):null),ze.isValidElement(E.cancel)?E.cancel:E.cancel&&Om(E.cancel)?ze.createElement("button",{"data-button":!0,"data-cancel":!0,style:E.cancelButtonStyle||B,onClick:mt=>{Om(E.cancel)&&wi&&(E.cancel.onClick==null||E.cancel.onClick.call(E.cancel,mt),jr())},className:Vo(Ae==null?void 0:Ae.cancelButton,E==null||(m=E.classNames)==null?void 0:m.cancelButton)},E.cancel.label):null,ze.isValidElement(E.action)?E.action:E.action&&Om(E.action)?ze.createElement("button",{"data-button":!0,"data-action":!0,style:E.actionButtonStyle||H,onClick:mt=>{Om(E.action)&&(E.action.onClick==null||E.action.onClick.call(E.action,mt),!mt.defaultPrevented&&jr())},className:Vo(Ae==null?void 0:Ae.actionButton,E==null||(g=E.classNames)==null?void 0:g.actionButton)},E.action.label):null)};function $C(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function iJ(n,e){const t={};return[n,e].forEach((r,i)=>{const o=i===1,c=o?"--mobile-offset":"--offset",h=o?QZ:YZ;function m(g){["top","right","bottom","left"].forEach(w=>{t[`${c}-${w}`]=typeof g=="number"?`${g}px`:g})}typeof r=="number"||typeof r=="string"?m(r):typeof r=="object"?["top","right","bottom","left"].forEach(g=>{r[g]===void 0?t[`${c}-${g}`]=h:t[`${c}-${g}`]=typeof r[g]=="number"?`${r[g]}px`:r[g]}):m(h)}),t}const sJ=ze.forwardRef(function(e,t){const{invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:c,closeButton:h,className:m,offset:g,mobileOffset:w,theme:E="light",richColors:T,duration:R,style:M,visibleToasts:D=XZ,toastOptions:L,dir:G=$C(),gap:z=JZ,icons:W,containerAriaLabel:Y="Notifications"}=e,[Z,ie]=ze.useState([]),F=ze.useMemo(()=>Array.from(new Set([i].concat(Z.filter(ae=>ae.position).map(ae=>ae.position)))),[Z,i]),[B,H]=ze.useState([]),[ee,ne]=ze.useState(!1),[te,K]=ze.useState(!1),[we,se]=ze.useState(E!=="system"?E:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ae=ze.useRef(null),xe=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),oe=ze.useRef(null),Te=ze.useRef(!1),Ne=ze.useCallback(ae=>{ie(he=>{var Se;return(Se=he.find(Le=>Le.id===ae.id))!=null&&Se.delete||ls.dismiss(ae.id),he.filter(({id:Le})=>Le!==ae.id)})},[]);return ze.useEffect(()=>ls.subscribe(ae=>{if(ae.dismiss){requestAnimationFrame(()=>{ie(he=>he.map(Se=>Se.id===ae.id?{...Se,delete:!0}:Se))});return}setTimeout(()=>{OS.flushSync(()=>{ie(he=>{const Se=he.findIndex(Le=>Le.id===ae.id);return Se!==-1?[...he.slice(0,Se),{...he[Se],...ae},...he.slice(Se+1)]:[ae,...he]})})})}),[Z]),ze.useEffect(()=>{if(E!=="system"){se(E);return}if(E==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;const ae=window.matchMedia("(prefers-color-scheme: dark)");try{ae.addEventListener("change",({matches:he})=>{se(he?"dark":"light")})}catch{ae.addListener(({matches:Se})=>{try{se(Se?"dark":"light")}catch(Le){console.error(Le)}})}},[E]),ze.useEffect(()=>{Z.length<=1&&ne(!1)},[Z]),ze.useEffect(()=>{const ae=he=>{var Se;if(o.every(Re=>he[Re]||he.code===Re)){var it;ne(!0),(it=Ae.current)==null||it.focus()}he.code==="Escape"&&(document.activeElement===Ae.current||(Se=Ae.current)!=null&&Se.contains(document.activeElement))&&ne(!1)};return document.addEventListener("keydown",ae),()=>document.removeEventListener("keydown",ae)},[o]),ze.useEffect(()=>{if(Ae.current)return()=>{oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null,Te.current=!1)}},[Ae.current]),ze.createElement("section",{ref:t,"aria-label":`${Y} ${xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((ae,he)=>{var Se;const[Le,it]=ae.split("-");return Z.length?ze.createElement("ol",{key:ae,dir:G==="auto"?$C():G,tabIndex:-1,ref:Ae,className:m,"data-sonner-toaster":!0,"data-sonner-theme":we,"data-y-position":Le,"data-x-position":it,style:{"--front-toast-height":`${((Se=B[0])==null?void 0:Se.height)||0}px`,"--width":`${ZZ}px`,"--gap":`${z}px`,...M,...iJ(g,w)},onBlur:Re=>{Te.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(Te.current=!1,oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||Te.current||(Te.current=!0,oe.current=Re.relatedTarget)},onMouseEnter:()=>ne(!0),onMouseMove:()=>ne(!0),onMouseLeave:()=>{te||ne(!1)},onDragEnd:()=>ne(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},Z.filter(Re=>!Re.position&&he===0||Re.position===ae).map((Re,Pe)=>{var Ge,at;return ze.createElement(rJ,{key:Re.id,icons:W,index:Pe,toast:Re,defaultRichColors:T,duration:(Ge=L==null?void 0:L.duration)!=null?Ge:R,className:L==null?void 0:L.className,descriptionClassName:L==null?void 0:L.descriptionClassName,invert:r,visibleToasts:D,closeButton:(at=L==null?void 0:L.closeButton)!=null?at:h,interacting:te,position:ae,style:L==null?void 0:L.style,unstyled:L==null?void 0:L.unstyled,classNames:L==null?void 0:L.classNames,cancelButtonStyle:L==null?void 0:L.cancelButtonStyle,actionButtonStyle:L==null?void 0:L.actionButtonStyle,closeButtonAriaLabel:L==null?void 0:L.closeButtonAriaLabel,removeToast:Ne,toasts:Z.filter(st=>st.position==Re.position),heights:B.filter(st=>st.position==Re.position),setHeights:H,expandByDefault:c,gap:z,expanded:ee,swipeDirections:e.swipeDirections})})):null}))});function oJ({event:n,sessionId:e,onClose:t}){const[r,i]=P.useState({rating_profile_setup:"",rating_interests_helpful:"",rating_social_usefulness:"",met_match_in_person:"",open_to_other_event_types:"",match_experience_feedback:"",general_feedback:""}),[o,c]=P.useState(!1),[h,m]=P.useState({}),g=(R,M)=>{i(D=>({...D,[R]:M})),h[R]&&m(D=>({...D,[R]:null}))},w=()=>{const R={};return r.rating_profile_setup||(R.rating_profile_setup="Please rate the profile setup experience."),r.rating_interests_helpful||(R.rating_interests_helpful="Please rate how helpful interests were."),r.rating_social_usefulness||(R.rating_social_usefulness="Please rate the social interaction experience."),r.met_match_in_person||(R.met_match_in_person="Please let us know if you met someone in person."),r.open_to_other_event_types||(R.open_to_other_event_types="Please let us know about future event interest."),r.match_experience_feedback.trim()||(R.match_experience_feedback="Please share what we could improve."),m(R),Object.keys(R).length===0},E=async R=>{if(R.preventDefault(),!w()){xr.error("Please complete all required fields.");return}c(!0);try{await QW.create({event_id:n.id,session_id:e,rating_profile_setup:parseInt(r.rating_profile_setup),rating_interests_helpful:parseInt(r.rating_interests_helpful),rating_social_usefulness:parseInt(r.rating_social_usefulness),met_match_in_person:r.met_match_in_person==="true",open_to_other_event_types:r.open_to_other_event_types==="true",match_experience_feedback:r.match_experience_feedback.trim(),general_feedback:r.general_feedback.trim()||null}),localStorage.setItem(`feedback_given_for_${n.id}`,"true"),xr.success("Thanks for your feedback 💘"),t()}catch(M){console.error("Error submitting feedback:",M),xr.error("Failed to submit feedback. Please try again.")}finally{c(!1)}},T=({value:R,onChange:M,error:D})=>A.jsxs("div",{className:"flex gap-1",children:[[1,2,3,4,5].map(L=>A.jsx("button",{type:"button",onClick:()=>M(L.toString()),className:`p-1 transition-colors ${parseInt(R)>=L?"text-yellow-500 hover:text-yellow-600":"text-gray-300 dark:text-gray-600 hover:text-yellow-400"}`,children:A.jsx(_5,{className:`w-6 h-6 ${parseInt(R)>=L?"fill-current":""}`})},L)),D&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs ml-2 mt-1",children:D})]});return A.jsx(mp,{children:A.jsx(ra.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",children:A.jsxs(ra.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto",children:[A.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:A.jsx(vd,{className:"w-6 h-6 text-white"})}),A.jsx("button",{onClick:t,className:"p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:A.jsx(Yi,{className:"w-5 h-5"})})]}),A.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:["Enjoyed Hooked at ",n.name,"? 💘"]}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Help us make the next one even better — takes 1 minute!"})]}),A.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to set up your profile? *"}),A.jsx(T,{value:r.rating_profile_setup,onChange:R=>g("rating_profile_setup",R),error:h.rating_profile_setup})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How helpful were profile interests in choosing who to like? *"}),A.jsx(T,{value:r.rating_interests_helpful,onChange:R=>g("rating_interests_helpful",R),error:h.rating_interests_helpful})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"How easy was it to interact with others? *"}),A.jsx(T,{value:r.rating_social_usefulness,onChange:R=>g("rating_social_usefulness",R),error:h.rating_social_usefulness})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Did you meet up with a match? *"}),A.jsxs(WC,{value:r.met_match_in_person,onValueChange:R=>g("met_match_in_person",R),children:[A.jsx(Kw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:A.jsx(HC,{placeholder:"Select an option"})}),A.jsxs(Xw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[A.jsx(Xh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),A.jsx(Xh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.met_match_in_person&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.met_match_in_person})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Would you use Hooked at other event types? *"}),A.jsxs(WC,{value:r.open_to_other_event_types,onValueChange:R=>g("open_to_other_event_types",R),children:[A.jsx(Kw,{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white border-gray-300 dark:border-gray-600",children:A.jsx(HC,{placeholder:"Select an option"})}),A.jsxs(Xw,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600",children:[A.jsx(Xh,{value:"true",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Yes"}),A.jsx(Xh,{value:"false",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"No"})]})]}),h.open_to_other_event_types&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.open_to_other_event_types})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"What would you improve? *"}),A.jsx(H0,{value:r.match_experience_feedback,onChange:R=>g("match_experience_feedback",R.target.value),placeholder:"Tell us what could make the experience better...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"}),h.match_experience_feedback&&A.jsx("p",{className:"text-red-500 dark:text-red-400 text-xs mt-1",children:h.match_experience_feedback})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-gray-700 dark:text-gray-200 mb-2 block",children:"Other feedback?"}),A.jsx(H0,{value:r.general_feedback,onChange:R=>g("general_feedback",R.target.value),placeholder:"Anything else you'd like to share...",className:"h-20 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-400 border-gray-300 dark:border-gray-600"})]}),A.jsx(Ut,{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-3",children:o?A.jsxs("div",{className:"flex items-center justify-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Feedback"})]})]})})})}var aJ=(n,e,t,r,i,o,c,h)=>{let m=document.documentElement,g=["light","dark"];function w(R){(Array.isArray(n)?n:[n]).forEach(M=>{let D=M==="class",L=D&&o?i.map(G=>o[G]||G):i;D?(m.classList.remove(...L),m.classList.add(o&&o[R]?o[R]:R)):m.setAttribute(M,R)}),E(R)}function E(R){h&&g.includes(R)&&(m.style.colorScheme=R)}function T(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)w(r);else try{let R=localStorage.getItem(e)||t,M=c&&R==="system"?T():R;w(M)}catch{}},lJ=P.createContext(void 0),cJ={setTheme:n=>{},themes:[]},uJ=()=>{var n;return(n=P.useContext(lJ))!=null?n:cJ};P.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:c,themes:h,nonce:m,scriptProps:g})=>{let w=JSON.stringify([t,e,o,n,h,c,r,i]).slice(1,-1);return P.createElement("script",{...g,suppressHydrationWarning:!0,nonce:typeof window>"u"?m:"",dangerouslySetInnerHTML:{__html:`(${aJ.toString()})(${w})`}})});const dJ=({...n})=>{const{theme:e="system"}=uJ();return A.jsx(sJ,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};function hJ({children:n,currentPageName:e}){const t=Wa(),r=oa(),[i,o]=P.useState(!!(localStorage.getItem("currentEventId")&&localStorage.getItem("currentSessionId"))),[c,h]=P.useState(!1),[m,g]=P.useState(!1),[w,E]=P.useState(!1),[T,R]=P.useState({name:"",profileId:""}),[M,D]=P.useState(new Set),[L,G]=P.useState(!1),[z,W]=P.useState({name:"",senderSessionId:""}),[Y,Z]=P.useState(new Set),[ie,F]=P.useState(!1),[B,H]=P.useState(null),[ee,ne]=P.useState(null),te=P.useCallback(async()=>{try{const we=localStorage.getItem("currentEventId")||localStorage.getItem("last_event_id"),se=localStorage.getItem("currentSessionId")||localStorage.getItem("last_session_id");if(!we||!se||localStorage.getItem(`feedback_given_for_${we}`))return;const xe=await Of.filter({id:we});if(xe.length===0)return;const oe=xe[0],Te=new Date().toISOString();oe.expires_at&&Te>oe.expires_at&&(H(oe),ne(se),F(!0),localStorage.setItem("last_event_id",we),localStorage.setItem("last_session_id",se))}catch(we){console.error("Error checking feedback eligibility:",we)}},[]);P.useEffect(()=>{te()},[te]);const K=P.useCallback(async()=>{const we=localStorage.getItem("currentEventId"),se=localStorage.getItem("currentSessionId"),Ae=!!(we&&se);if(o(Ae),!Ae){h(!1),g(!1),E(!1),G(!1),D(new Set),Z(new Set);return}try{const xe=await us.filter({liker_session_id:se,event_id:we,is_mutual:!0}),oe=await us.filter({liked_session_id:se,event_id:we,is_mutual:!0});let Te=!1,Ne=null;if([...xe,...oe].forEach(he=>{const Se=he.liker_session_id===se;(Se&&!he.liker_notified_of_match||!Se&&!he.liked_notified_of_match)&&(Te=!0,!Ne&&!M.has(he.id)&&(Ne={...he,otherUserSessionId:Se?he.liked_session_id:he.liker_session_id,type:Se?"liker":"liked"}))}),h(Te),Ne&&!w){const he=await ka.filter({session_id:Ne.otherUserSessionId,event_id:we});if(he.length>0){R({name:he[0].first_name,profileId:he[0].id}),E(!0),D(Le=>new Set([...Le,Ne.id]));const Se={};Ne.type==="liker"?Se.liker_notified_of_match=!0:Se.liked_notified_of_match=!0,await us.update(Ne.id,Se)}}const ae=await Vc.filter({receiver_session_id:se,event_id:we,is_read:!1});if(g(ae.length>0),ae.length>0&&!L){const he=ae.sort((Se,Le)=>new Date(Le.created_date)-new Date(Se.created_date))[0];if(!Y.has(he.id)){const Se=await ka.filter({session_id:he.sender_session_id,event_id:we});Se.length>0&&(W({name:Se[0].first_name,senderSessionId:he.sender_session_id}),G(!0),Z(Le=>new Set([...Le,he.id])))}}}catch(xe){console.error("Error checking notifications:",xe)}},[M,w,Y,L]);return P.useEffect(()=>{K();const we=setInterval(K,45e3);return()=>clearInterval(we)},[K]),P.useEffect(()=>{K()},[t.pathname,K]),A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[A.jsx(dJ,{position:"bottom-center",expand:!1,visibleToasts:1,closeButton:!1,duration:3e3,toastOptions:{style:{background:"var(--toast-bg)",color:"var(--toast-color)",border:"1px solid var(--toast-border)",borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",fontWeight:"500",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)"}}}),A.jsx("style",{children:`
        :root {
          --primary: #1a1d29;
          --accent: #ff6b6b;
          --secondary: #4f46e5;
          --muted: #64748b;
          --background: #ffffff;
          --card: #ffffff;
          --toast-bg: #ffffff;
          --toast-color: #000000;
          --toast-border: rgba(0, 0, 0, 0.1);
        }

        @media (prefers-color-scheme: dark) {
          :root {
            --background: #111827;
            --card: #1f2937;
            --primary: #ffffff;
            --muted: #94a3b8;
            --toast-bg: #1f2937;
            --toast-color: #ffffff;
            --toast-border: rgba(255, 255, 255, 0.15);
          }
        }

        body {
          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
          background: var(--background);
          color: var(--primary);
        }

        .glass-effect {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @media (prefers-color-scheme: dark) {
          .glass-effect {
            background: rgba(31, 41, 55, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
          }
        }

        .gradient-text {
          background: linear-gradient(135deg, var(--accent) 0%, var(--secondary) 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Modal overlay improvements */
        [data-radix-popper-content-wrapper],
        [data-state="open"][data-side] {
          z-index: 50;
        }

        /* Dark mode modal backgrounds */
        @media (prefers-color-scheme: dark) {
          .modal-content {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
            color: #ffffff !important;
          }

          .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7) !important;
          }
        }

        .modal-content {
          background-color: #ffffff;
          border: 1px solid #e5e7eb;
          border-radius: 16px;
          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .modal-overlay {
          background-color: rgba(0, 0, 0, 0.4);
        }

        /* Enhanced Toaster Styles */
        [data-sonner-toast] {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
          border: 1px solid var(--toast-border) !important;
          border-radius: 0.5rem !important;
          padding: 1rem !important;
          font-size: 0.875rem !important;
          font-weight: 500 !important;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1) !important;
          backdrop-filter: none !important;
        }

        [data-sonner-toast]:not([data-styled]) {
          background-color: var(--toast-bg) !important;
          color: var(--toast-color) !important;
        }

        /* Toaster container */
        [data-sonner-toaster] {
          max-width: 90vw;
        }

        [data-sonner-toast] [data-content] {
          color: var(--toast-color) !important;
        }

        [data-sonner-toast] [data-title] {
          color: var(--toast-color) !important;
          font-weight: 600 !important;
        }

        [data-sonner-toast] [data-description] {
          color: var(--toast-color) !important;
          opacity: 0.8;
        }
      `}),A.jsx("main",{className:"relative",children:n}),A.jsxs(mp,{children:[w&&A.jsx(xX,{matchName:T.name,onDismiss:()=>{E(!1)},onSeeMatches:()=>{E(!1),r(Ln("Matches"))}}),L&&A.jsx(wX,{senderName:z.name,senderSessionId:z.senderSessionId,onDismiss:()=>G(!1),onView:()=>{G(!1)}}),ie&&B&&ee&&A.jsx(oJ,{event:B,sessionId:ee,onClose:()=>F(!1)})]})]})}function fJ(n,e){return P.useReducer((t,r)=>e[t][r]??t,n)}var Qg=n=>{const{present:e,children:t}=n,r=pJ(e),i=typeof t=="function"?t({present:r.isPresent}):P.Children.only(t),o=bn(r.ref,mJ(i));return typeof t=="function"||r.isPresent?P.cloneElement(i,{ref:o}):null};Qg.displayName="Presence";function pJ(n){const[e,t]=P.useState(),r=P.useRef(null),i=P.useRef(n),o=P.useRef("none"),c=n?"mounted":"unmounted",[h,m]=fJ(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const g=Mm(r.current);o.current=h==="mounted"?g:"none"},[h]),Vi(()=>{const g=r.current,w=i.current;if(w!==n){const T=o.current,R=Mm(g);n?m("MOUNT"):R==="none"||(g==null?void 0:g.display)==="none"?m("UNMOUNT"):m(w&&T!==R?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,m]),Vi(()=>{if(e){let g;const w=e.ownerDocument.defaultView??window,E=R=>{const D=Mm(r.current).includes(R.animationName);if(R.target===e&&D&&(m("ANIMATION_END"),!i.current)){const L=e.style.animationFillMode;e.style.animationFillMode="forwards",g=w.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=L)})}},T=R=>{R.target===e&&(o.current=Mm(r.current))};return e.addEventListener("animationstart",T),e.addEventListener("animationcancel",E),e.addEventListener("animationend",E),()=>{w.clearTimeout(g),e.removeEventListener("animationstart",T),e.removeEventListener("animationcancel",E),e.removeEventListener("animationend",E)}}else m("ANIMATION_END")},[e,m]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:P.useCallback(g=>{r.current=g?getComputedStyle(g):null,t(g)},[])}}function Mm(n){return(n==null?void 0:n.animationName)||"none"}function mJ(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Zg="Dialog",[QD,mne]=eh(Zg),[gJ,bo]=QD(Zg),ZD=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:i,onOpenChange:o,modal:c=!0}=n,h=P.useRef(null),m=P.useRef(null),[g,w]=Wf({prop:r,defaultProp:i??!1,onChange:o,caller:Zg});return A.jsx(gJ,{scope:e,triggerRef:h,contentRef:m,contentId:yd(),titleId:yd(),descriptionId:yd(),open:g,onOpenChange:w,onOpenToggle:P.useCallback(()=>w(E=>!E),[w]),modal:c,children:t})};ZD.displayName=Zg;var JD="DialogTrigger",yJ=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=bo(JD,t),o=bn(e,i.triggerRef);return A.jsx(nn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":N_(i.open),...r,ref:o,onClick:an(n.onClick,i.onOpenToggle)})});yJ.displayName=JD;var S_="DialogPortal",[xJ,e6]=QD(S_,{forceMount:void 0}),t6=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:i}=n,o=bo(S_,e);return A.jsx(xJ,{scope:e,forceMount:t,children:P.Children.map(r,c=>A.jsx(Qg,{present:t||o.open,children:A.jsx(I_,{asChild:!0,container:i,children:c})}))})};t6.displayName=S_;var Q0="DialogOverlay",n6=P.forwardRef((n,e)=>{const t=e6(Q0,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=bo(Q0,n.__scopeDialog);return o.modal?A.jsx(Qg,{present:r||o.open,children:A.jsx(vJ,{...i,ref:e})}):null});n6.displayName=Q0;var wJ=Vd("DialogOverlay.RemoveScroll"),vJ=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=bo(Q0,t);return A.jsx(T_,{as:wJ,allowPinchZoom:!0,shards:[i.contentRef],children:A.jsx(nn.div,{"data-state":N_(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),du="DialogContent",r6=P.forwardRef((n,e)=>{const t=e6(du,n.__scopeDialog),{forceMount:r=t.forceMount,...i}=n,o=bo(du,n.__scopeDialog);return A.jsx(Qg,{present:r||o.open,children:o.modal?A.jsx(_J,{...i,ref:e}):A.jsx(EJ,{...i,ref:e})})});r6.displayName=du;var _J=P.forwardRef((n,e)=>{const t=bo(du,n.__scopeDialog),r=P.useRef(null),i=bn(e,t.contentRef,r);return P.useEffect(()=>{const o=r.current;if(o)return oD(o)},[]),A.jsx(i6,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:an(n.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:an(n.onPointerDownOutside,o=>{const c=o.detail.originalEvent,h=c.button===0&&c.ctrlKey===!0;(c.button===2||h)&&o.preventDefault()}),onFocusOutside:an(n.onFocusOutside,o=>o.preventDefault())})}),EJ=P.forwardRef((n,e)=>{const t=bo(du,n.__scopeDialog),r=P.useRef(!1),i=P.useRef(!1);return A.jsx(i6,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,h;(c=n.onCloseAutoFocus)==null||c.call(n,o),o.defaultPrevented||(r.current||(h=t.triggerRef.current)==null||h.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var m,g;(m=n.onInteractOutside)==null||m.call(n,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const c=o.target;((g=t.triggerRef.current)==null?void 0:g.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),i6=P.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...c}=n,h=bo(du,t),m=P.useRef(null),g=bn(e,m);return O4(),A.jsxs(A.Fragment,{children:[A.jsx(f_,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:A.jsx(h_,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":N_(h.open),...c,ref:g,onDismiss:()=>h.onOpenChange(!1)})}),A.jsxs(A.Fragment,{children:[A.jsx(bJ,{titleId:h.titleId}),A.jsx(AJ,{contentRef:m,descriptionId:h.descriptionId})]})]})}),R_="DialogTitle",s6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=bo(R_,t);return A.jsx(nn.h2,{id:i.titleId,...r,ref:e})});s6.displayName=R_;var o6="DialogDescription",a6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=bo(o6,t);return A.jsx(nn.p,{id:i.descriptionId,...r,ref:e})});a6.displayName=o6;var l6="DialogClose",c6=P.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,i=bo(l6,t);return A.jsx(nn.button,{type:"button",...r,ref:e,onClick:an(n.onClick,()=>i.onOpenChange(!1))})});c6.displayName=l6;function N_(n){return n?"open":"closed"}var u6="DialogTitleWarning",[gne,d6]=IX(u6,{contentName:du,titleName:R_,docsSlug:"dialog"}),bJ=({titleId:n})=>{const e=d6(u6),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return P.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},IJ="DialogDescriptionWarning",AJ=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${d6(IJ).contentName}}.`;return P.useEffect(()=>{var o;const i=(o=n.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},TJ=ZD,CJ=t6,h6=n6,f6=r6,p6=s6,m6=a6,SJ=c6;const Jg=TJ,RJ=CJ,g6=P.forwardRef(({className:n,...e},t)=>A.jsx(h6,{ref:t,className:ln("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));g6.displayName=h6.displayName;const NJ=P.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(RJ,{children:[A.jsx(g6,{}),A.jsxs(f6,{ref:r,className:ln("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,A.jsxs(SJ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[A.jsx(Yi,{className:"h-4 w-4"}),A.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));NJ.displayName=f6.displayName;const e1=({className:n,...e})=>A.jsx("div",{className:ln("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});e1.displayName="DialogHeader";const t1=P.forwardRef(({className:n,...e},t)=>A.jsx(p6,{ref:t,className:ln("text-lg font-semibold leading-none tracking-tight",n),...e}));t1.displayName=p6.displayName;const kJ=P.forwardRef(({className:n,...e},t)=>A.jsx(m6,{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));kJ.displayName=m6.displayName;var Ze;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ze||(Ze={}));var qC=new Map([[Ze.QR_CODE,"QR_CODE"],[Ze.AZTEC,"AZTEC"],[Ze.CODABAR,"CODABAR"],[Ze.CODE_39,"CODE_39"],[Ze.CODE_93,"CODE_93"],[Ze.CODE_128,"CODE_128"],[Ze.DATA_MATRIX,"DATA_MATRIX"],[Ze.MAXICODE,"MAXICODE"],[Ze.ITF,"ITF"],[Ze.EAN_13,"EAN_13"],[Ze.EAN_8,"EAN_8"],[Ze.PDF_417,"PDF_417"],[Ze.RSS_14,"RSS_14"],[Ze.RSS_EXPANDED,"RSS_EXPANDED"],[Ze.UPC_A,"UPC_A"],[Ze.UPC_E,"UPC_E"],[Ze.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),KC;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(KC||(KC={}));function PJ(n){return Object.values(Ze).includes(n)}var Z0;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Z0||(Z0={}));var DJ=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Z0.SCAN_TYPE_CAMERA,Z0.SCAN_TYPE_FILE],n}(),y6=function(){function n(e,t){this.format=e,this.formatName=t}return n.prototype.toString=function(){return this.formatName},n.create=function(e){if(!qC.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new n(e,qC.get(e))},n}(),XC=function(){function n(){}return n.createFromText=function(e){var t={text:e};return{decodedText:e,result:t}},n.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},n}(),Qw;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Qw||(Qw={}));var OJ=function(){function n(){}return n.createFrom=function(e){return{errorMessage:e,type:Qw.UNKWOWN_ERROR}},n}(),MJ=function(){function n(e){this.verbose=e}return n.prototype.log=function(e){this.verbose&&console.log(e)},n.prototype.warn=function(e){this.verbose&&console.warn(e)},n.prototype.logError=function(e,t){(this.verbose||t===!0)&&console.error(e)},n.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},n}();function Ia(n){return typeof n>"u"||n===null}var dd=function(){function n(){}return n.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},n.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),x6=function(){function n(){}return n.isMediaStreamConstraintsValid=function(e,t){if(typeof e!="object"){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(e),h=0,m=c;h<m.length;h++){var g=m[h];if(o.has(g))return t.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},n}(),Yh={exports:{}},LJ=Yh.exports,YC;function VJ(){return YC||(YC=1,function(n,e){(function(t,r){r(e)})(LJ,function(t){function r(j){return j==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,s){j.__proto__=s}||function(j,s){for(var l in s)s.hasOwnProperty(l)&&(j[l]=s[l])};function o(j,s){i(j,s);function l(){this.constructor=j}j.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}function c(j,s){var l=Object.setPrototypeOf;l?l(j,s):j.__proto__=s}function h(j,s){s===void 0&&(s=j.constructor);var l=Error.captureStackTrace;l&&l(j,s)}var m=function(j){o(s,j);function s(l){var u=this.constructor,f=j.call(this,l)||this;return Object.defineProperty(f,"name",{value:u.name,enumerable:!1}),c(f,u.prototype),h(f),f}return s}(Error);class g extends m{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class E extends g{}E.kind="IllegalArgumentException";class T{constructor(s){if(this.binarizer=s,s===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,l){return this.binarizer.getBlackRow(s,l)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,l,u,f){const p=this.binarizer.getLuminanceSource().crop(s,l,u,f);return new T(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends g{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class M{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class D{static arraycopy(s,l,u,f,p){for(;p--;)u[f++]=s[l++]}static currentTimeMillis(){return Date.now()}}class L extends g{}L.kind="IndexOutOfBoundsException";class G extends L{constructor(s=void 0,l=void 0){super(l),this.index=s,this.message=l}}G.kind="ArrayIndexOutOfBoundsException";class z{static fill(s,l){for(let u=0,f=s.length;u<f;u++)s[u]=l}static fillWithin(s,l,u,f){z.rangeCheck(s.length,l,u);for(let p=l;p<u;p++)s[p]=f}static rangeCheck(s,l,u){if(l>u)throw new E("fromIndex("+l+") > toIndex("+u+")");if(l<0)throw new G(l);if(u>s)throw new G(u)}static asList(...s){return s}static create(s,l,u){return Array.from({length:s}).map(p=>Array.from({length:l}).fill(u))}static createInt32Array(s,l,u){return Array.from({length:s}).map(p=>Int32Array.from({length:l}).fill(u))}static equals(s,l){if(!s||!l||!s.length||!l.length||s.length!==l.length)return!1;for(let u=0,f=s.length;u<f;u++)if(s[u]!==l[u])return!1;return!0}static hashCode(s){if(s===null)return 0;let l=1;for(const u of s)l=31*l+u;return l}static fillUint8Array(s,l){for(let u=0;u!==s.length;u++)s[u]=l}static copyOf(s,l){return s.slice(0,l)}static copyOfUint8Array(s,l){if(s.length<=l){const u=new Uint8Array(l);return u.set(s),u}return s.slice(0,l)}static copyOfRange(s,l,u){const f=u-l,p=new Int32Array(f);return D.arraycopy(s,l,p,0,f),p}static binarySearch(s,l,u){u===void 0&&(u=z.numberComparator);let f=0,p=s.length-1;for(;f<=p;){const y=p+f>>1,v=u(l,s[y]);if(v>0)f=y+1;else if(v<0)p=y-1;else return y}return-f-1}static numberComparator(s,l){return s-l}}class W{static numberOfTrailingZeros(s){let l;if(s===0)return 32;let u=31;return l=s<<16,l!==0&&(u-=16,s=l),l=s<<8,l!==0&&(u-=8,s=l),l=s<<4,l!==0&&(u-=4,s=l),l=s<<2,l!==0&&(u-=2,s=l),u-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let l=1;return s>>>16||(l+=16,s<<=16),s>>>24||(l+=8,s<<=8),s>>>28||(l+=4,s<<=4),s>>>30||(l+=2,s<<=2),l-=s>>>31,l}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,l){return Math.trunc(s/l)}static parseInt(s,l=void 0){return parseInt(s,l)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Y{constructor(s,l){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,l==null?this.bits=Y.makeArray(s):this.bits=l)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const l=Y.makeArray(s);D.arraycopy(this.bits,0,l,0,this.bits.length),this.bits=l}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),p=u[f];p&=~((1<<(s&31))-1);const y=u.length;for(;p===0;){if(++f===y)return l;p=u[f]}const v=f*32+W.numberOfTrailingZeros(p);return v>l?l:v}getNextUnset(s){const l=this.size;if(s>=l)return l;const u=this.bits;let f=Math.floor(s/32),p=~u[f];p&=~((1<<(s&31))-1);const y=u.length;for(;p===0;){if(++f===y)return l;p=~u[f]}const v=f*32+W.numberOfTrailingZeros(p);return v>l?l:v}setBulk(s,l){this.bits[Math.floor(s/32)]=l}setRange(s,l){if(l<s||s<0||l>this.size)throw new E;if(l===s)return;l--;const u=Math.floor(s/32),f=Math.floor(l/32),p=this.bits;for(let y=u;y<=f;y++){const v=y>u?0:s&31,C=(2<<(y<f?31:l&31))-(1<<v);p[y]|=C}}clear(){const s=this.bits.length,l=this.bits;for(let u=0;u<s;u++)l[u]=0}isRange(s,l,u){if(l<s||s<0||l>this.size)throw new E;if(l===s)return!0;l--;const f=Math.floor(s/32),p=Math.floor(l/32),y=this.bits;for(let v=f;v<=p;v++){const I=v>f?0:s&31,O=(2<<(v<p?31:l&31))-(1<<I)&4294967295;if((y[v]&O)!==(u?O:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,l){if(l<0||l>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+l);for(let u=l;u>0;u--)this.appendBit((s>>u-1&1)===1)}appendBitArray(s){const l=s.size;this.ensureCapacity(this.size+l);for(let u=0;u<l;u++)this.appendBit(s.get(u))}xor(s){if(this.size!==s.size)throw new E("Sizes don't match");const l=this.bits;for(let u=0,f=l.length;u<f;u++)l[u]^=s.bits[u]}toBytes(s,l,u,f){for(let p=0;p<f;p++){let y=0;for(let v=0;v<8;v++)this.get(s)&&(y|=1<<7-v),s++;l[u+p]=y}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),l=Math.floor((this.size-1)/32),u=l+1,f=this.bits;for(let p=0;p<u;p++){let y=f[p];y=y>>1&1431655765|(y&1431655765)<<1,y=y>>2&858993459|(y&858993459)<<2,y=y>>4&252645135|(y&252645135)<<4,y=y>>8&16711935|(y&16711935)<<8,y=y>>16&65535|(y&65535)<<16,s[l-p]=y}if(this.size!==u*32){const p=u*32-this.size;let y=s[0]>>>p;for(let v=1;v<u;v++){const I=s[v];y|=I<<32-p,s[v-1]=y,y=I>>>p}s[u-1]=y}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof Y))return!1;const l=s;return this.size===l.size&&z.equals(this.bits,l.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let s="";for(let l=0,u=this.size;l<u;l++)(l&7)===0&&(s+=" "),s+=this.get(l)?"X":".";return s}clone(){return new Y(this.size,this.bits.slice())}}var Z;(function(j){j[j.OTHER=0]="OTHER",j[j.PURE_BARCODE=1]="PURE_BARCODE",j[j.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",j[j.TRY_HARDER=3]="TRY_HARDER",j[j.CHARACTER_SET=4]="CHARACTER_SET",j[j.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",j[j.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",j[j.ASSUME_GS1=7]="ASSUME_GS1",j[j.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",j[j.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",j[j.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var ie=Z;class F extends g{static getFormatInstance(){return new F}}F.kind="FormatException";var B;(function(j){j[j.Cp437=0]="Cp437",j[j.ISO8859_1=1]="ISO8859_1",j[j.ISO8859_2=2]="ISO8859_2",j[j.ISO8859_3=3]="ISO8859_3",j[j.ISO8859_4=4]="ISO8859_4",j[j.ISO8859_5=5]="ISO8859_5",j[j.ISO8859_6=6]="ISO8859_6",j[j.ISO8859_7=7]="ISO8859_7",j[j.ISO8859_8=8]="ISO8859_8",j[j.ISO8859_9=9]="ISO8859_9",j[j.ISO8859_10=10]="ISO8859_10",j[j.ISO8859_11=11]="ISO8859_11",j[j.ISO8859_13=12]="ISO8859_13",j[j.ISO8859_14=13]="ISO8859_14",j[j.ISO8859_15=14]="ISO8859_15",j[j.ISO8859_16=15]="ISO8859_16",j[j.SJIS=16]="SJIS",j[j.Cp1250=17]="Cp1250",j[j.Cp1251=18]="Cp1251",j[j.Cp1252=19]="Cp1252",j[j.Cp1256=20]="Cp1256",j[j.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",j[j.UTF8=22]="UTF8",j[j.ASCII=23]="ASCII",j[j.Big5=24]="Big5",j[j.GB18030=25]="GB18030",j[j.EUC_KR=26]="EUC_KR"})(B||(B={}));class H{constructor(s,l,u,...f){this.valueIdentifier=s,this.name=u,typeof l=="number"?this.values=Int32Array.from([l]):this.values=l,this.otherEncodingNames=f,H.VALUE_IDENTIFIER_TO_ECI.set(s,this),H.NAME_TO_ECI.set(u,this);const p=this.values;for(let y=0,v=p.length;y!==v;y++){const I=p[y];H.VALUES_TO_ECI.set(I,this)}for(const y of f)H.NAME_TO_ECI.set(y,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new F("incorect value");const l=H.VALUES_TO_ECI.get(s);if(l===void 0)throw new F("incorect value");return l}static getCharacterSetECIByName(s){const l=H.NAME_TO_ECI.get(s);if(l===void 0)throw new F("incorect value");return l}equals(s){if(!(s instanceof H))return!1;const l=s;return this.getName()===l.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(B.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(B.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(B.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(B.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(B.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(B.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(B.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(B.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(B.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(B.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(B.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(B.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(B.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(B.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(B.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(B.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(B.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(B.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(B.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(B.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(B.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(B.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(B.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(B.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(B.Big5,28,"Big5"),H.GB18030=new H(B.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(B.EUC_KR,30,"EUC_KR","EUC-KR");class ee extends g{}ee.kind="UnsupportedOperationException";class ne{static decode(s,l){const u=this.encodingName(l);return this.customDecoder?this.customDecoder(s,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(s,u):new TextDecoder(u).decode(s)}static shouldDecodeOnFallback(s){return!ne.isBrowser()&&s==="ISO-8859-1"}static encode(s,l){const u=this.encodingName(l);return this.customEncoder?this.customEncoder(s,u):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof H?s:H.getCharacterSetECIByName(s)}static decodeFallback(s,l){const u=this.encodingCharacterSet(l);if(ne.isDecodeFallbackSupported(u)){let f="";for(let p=0,y=s.length;p<y;p++){let v=s[p].toString(16);v.length<2&&(v="0"+v),f+="%"+v}return decodeURIComponent(f)}if(u.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new ee(`Encoding ${this.encodingName(l)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(H.UTF8)||s.equals(H.ISO8859_1)||s.equals(H.ASCII)}static encodeFallback(s){const u=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let p=0;p<u.length;p++)f.push(u[p].charCodeAt(0));return new Uint8Array(f)}}class te{static castAsNonUtf8Char(s,l=null){const u=l?l.getName():this.ISO88591;return ne.decode(new Uint8Array([s]),u)}static guessEncoding(s,l){if(l!=null&&l.get(ie.CHARACTER_SET)!==void 0)return l.get(ie.CHARACTER_SET).toString();const u=s.length;let f=!0,p=!0,y=!0,v=0,I=0,C=0,O=0,U=0,q=0,J=0,le=0,ue=0,fe=0,Ee=0;const Fe=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let je=0;je<u&&(f||p||y);je++){const Oe=s[je]&255;y&&(v>0?(Oe&128)===0?y=!1:v--:(Oe&128)!==0&&((Oe&64)===0?y=!1:(v++,(Oe&32)===0?I++:(v++,(Oe&16)===0?C++:(v++,(Oe&8)===0?O++:y=!1))))),f&&(Oe>127&&Oe<160?f=!1:Oe>159&&(Oe<192||Oe===215||Oe===247)&&Ee++),p&&(U>0?Oe<64||Oe===127||Oe>252?p=!1:U--:Oe===128||Oe===160||Oe>239?p=!1:Oe>160&&Oe<224?(q++,le=0,J++,J>ue&&(ue=J)):Oe>127?(U++,J=0,le++,le>fe&&(fe=le)):(J=0,le=0))}return y&&v>0&&(y=!1),p&&U>0&&(p=!1),y&&(Fe||I+C+O>0)?te.UTF8:p&&(te.ASSUME_SHIFT_JIS||ue>=3||fe>=3)?te.SHIFT_JIS:f&&p?ue===2&&q===2||Ee*10>=u?te.SHIFT_JIS:te.ISO88591:f?te.ISO88591:p?te.SHIFT_JIS:y?te.UTF8:te.PLATFORM_DEFAULT_ENCODING}static format(s,...l){let u=-1;function f(y,v,I,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let q=O?parseInt(O.substr(1)):void 0,J;switch(U){case"s":J=l[u];break;case"c":J=l[u][0];break;case"f":J=parseFloat(l[u]).toFixed(y);break;case"p":J=parseFloat(l[u]).toPrecision(y);break;case"e":J=parseFloat(l[u]).toExponential(y);break;case"x":J=parseInt(l[u]).toString(q||16);break;case"d":J=parseFloat(parseInt(l[u],q||10).toPrecision(y)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(q);let le=parseInt(I),ue=I&&I[0]+""=="0"?"0":" ";for(;J.length<le;)J=v!==void 0?J+ue:ue+J;return J}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(p,f)}static getBytes(s,l){return ne.encode(s,l)}static getCharCode(s,l=0){return s.charCodeAt(l)}static getCharAt(s){return String.fromCharCode(s)}}te.SHIFT_JIS=H.SJIS.getName(),te.GB2312="GB2312",te.ISO88591=H.ISO8859_1.getName(),te.EUC_JP="EUC_JP",te.UTF8=H.UTF8.getName(),te.PLATFORM_DEFAULT_ENCODING=te.UTF8,te.ASSUME_SHIFT_JIS=!1;class K{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=te.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,l,u){for(let f=l;l<l+u;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+1)}substring(s,l){return this.value.substring(s,l)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,l){this.value=this.value.substr(0,s)+l+this.value.substr(s+l.length)}}class we{constructor(s,l,u,f){if(this.width=s,this.height=l,this.rowSize=u,this.bits=f,l==null&&(l=s),this.height=l,s<1||l<1)throw new E("Both dimensions must be greater than 0");u==null&&(u=Math.floor((s+31)/32)),this.rowSize=u,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const l=s.length,u=s[0].length,f=new we(u,l);for(let p=0;p<l;p++){const y=s[p];for(let v=0;v<u;v++)y[v]&&f.set(v,p)}return f}static parseFromString(s,l,u){if(s===null)throw new E("stringRepresentation cannot be null");const f=new Array(s.length);let p=0,y=0,v=-1,I=0,C=0;for(;C<s.length;)if(s.charAt(C)===`
`||s.charAt(C)==="\r"){if(p>y){if(v===-1)v=p-y;else if(p-y!==v)throw new E("row lengths do not match");y=p,I++}C++}else if(s.substring(C,C+l.length)===l)C+=l.length,f[p]=!0,p++;else if(s.substring(C,C+u.length)===u)C+=u.length,f[p]=!1,p++;else throw new E("illegal character encountered: "+s.substring(C));if(p>y){if(v===-1)v=p-y;else if(p-y!==v)throw new E("row lengths do not match");I++}const O=new we(v,I);for(let U=0;U<p;U++)f[U]&&O.set(Math.floor(U%v),Math.floor(U/v));return O}get(s,l){const u=l*this.rowSize+Math.floor(s/32);return(this.bits[u]>>>(s&31)&1)!==0}set(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]|=1<<(s&31)&4294967295}unset(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]&=~(1<<(s&31)&4294967295)}flip(s,l){const u=l*this.rowSize+Math.floor(s/32);this.bits[u]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new E("input matrix dimensions do not match");const l=new Y(Math.floor(this.width/32)+1),u=this.rowSize,f=this.bits;for(let p=0,y=this.height;p<y;p++){const v=p*u,I=s.getRow(p,l).getBitArray();for(let C=0;C<u;C++)f[v+C]^=I[C]}}clear(){const s=this.bits,l=s.length;for(let u=0;u<l;u++)s[u]=0}setRegion(s,l,u,f){if(l<0||s<0)throw new E("Left and top must be nonnegative");if(f<1||u<1)throw new E("Height and width must be at least 1");const p=s+u,y=l+f;if(y>this.height||p>this.width)throw new E("The region must fit inside the matrix");const v=this.rowSize,I=this.bits;for(let C=l;C<y;C++){const O=C*v;for(let U=s;U<p;U++)I[O+Math.floor(U/32)]|=1<<(U&31)&4294967295}}getRow(s,l){l==null||l.getSize()<this.width?l=new Y(this.width):l.clear();const u=this.rowSize,f=this.bits,p=s*u;for(let y=0;y<u;y++)l.setBulk(y*32,f[p+y]);return l}setRow(s,l){D.arraycopy(l.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),l=this.getHeight();let u=new Y(s),f=new Y(s);for(let p=0,y=Math.floor((l+1)/2);p<y;p++)u=this.getRow(p,u),f=this.getRow(l-1-p,f),u.reverse(),f.reverse(),this.setRow(p,f),this.setRow(l-1-p,u)}getEnclosingRectangle(){const s=this.width,l=this.height,u=this.rowSize,f=this.bits;let p=s,y=l,v=-1,I=-1;for(let C=0;C<l;C++)for(let O=0;O<u;O++){const U=f[C*u+O];if(U!==0){if(C<y&&(y=C),C>I&&(I=C),O*32<p){let q=0;for(;(U<<31-q&4294967295)===0;)q++;O*32+q<p&&(p=O*32+q)}if(O*32+31>v){let q=31;for(;!(U>>>q);)q--;O*32+q>v&&(v=O*32+q)}}}return v<p||I<y?null:Int32Array.from([p,y,v-p+1,I-y+1])}getTopLeftOnBit(){const s=this.rowSize,l=this.bits;let u=0;for(;u<l.length&&l[u]===0;)u++;if(u===l.length)return null;const f=u/s;let p=u%s*32;const y=l[u];let v=0;for(;(y<<31-v&4294967295)===0;)v++;return p+=v,Int32Array.from([p,f])}getBottomRightOnBit(){const s=this.rowSize,l=this.bits;let u=l.length-1;for(;u>=0&&l[u]===0;)u--;if(u<0)return null;const f=Math.floor(u/s);let p=Math.floor(u%s)*32;const y=l[u];let v=31;for(;!(y>>>v);)v--;return p+=v,Int32Array.from([p,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof we))return!1;const l=s;return this.width===l.width&&this.height===l.height&&this.rowSize===l.rowSize&&z.equals(this.bits,l.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+z.hashCode(this.bits),s}toString(s="X ",l="  ",u=`
`){return this.buildToString(s,l,u)}buildToString(s,l,u){let f=new K;for(let p=0,y=this.height;p<y;p++){for(let v=0,I=this.width;v<I;v++)f.append(this.get(v,p)?s:l);f.append(u)}return f.toString()}clone(){return new we(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends g{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class Ae extends M{constructor(s){super(s),this.luminances=Ae.EMPTY,this.buckets=new Int32Array(Ae.LUMINANCE_BUCKETS)}getBlackRow(s,l){const u=this.getLuminanceSource(),f=u.getWidth();l==null||l.getSize()<f?l=new Y(f):l.clear(),this.initArrays(f);const p=u.getRow(s,this.luminances),y=this.buckets;for(let I=0;I<f;I++)y[(p[I]&255)>>Ae.LUMINANCE_SHIFT]++;const v=Ae.estimateBlackPoint(y);if(f<3)for(let I=0;I<f;I++)(p[I]&255)<v&&l.set(I);else{let I=p[0]&255,C=p[1]&255;for(let O=1;O<f-1;O++){const U=p[O+1]&255;(C*4-I-U)/2<v&&l.set(O),I=C,C=U}}return l}getBlackMatrix(){const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight(),f=new we(l,u);this.initArrays(l);const p=this.buckets;for(let I=1;I<5;I++){const C=Math.floor(u*I/5),O=s.getRow(C,this.luminances),U=Math.floor(l*4/5);for(let q=Math.floor(l/5);q<U;q++){const J=O[q]&255;p[J>>Ae.LUMINANCE_SHIFT]++}}const y=Ae.estimateBlackPoint(p),v=s.getMatrix();for(let I=0;I<u;I++){const C=I*l;for(let O=0;O<l;O++)(v[C+O]&255)<y&&f.set(O,I)}return f}createBinarizer(s){return new Ae(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const l=this.buckets;for(let u=0;u<Ae.LUMINANCE_BUCKETS;u++)l[u]=0}static estimateBlackPoint(s){const l=s.length;let u=0,f=0,p=0;for(let O=0;O<l;O++)s[O]>p&&(f=O,p=s[O]),s[O]>u&&(u=s[O]);let y=0,v=0;for(let O=0;O<l;O++){const U=O-f,q=s[O]*U*U;q>v&&(y=O,v=q)}if(f>y){const O=f;f=y,y=O}if(y-f<=l/16)throw new se;let I=y-1,C=-1;for(let O=y-1;O>f;O--){const U=O-f,q=U*U*(y-O)*(u-s[O]);q>C&&(I=O,C=q)}return I<<Ae.LUMINANCE_SHIFT}}Ae.LUMINANCE_BITS=5,Ae.LUMINANCE_SHIFT=8-Ae.LUMINANCE_BITS,Ae.LUMINANCE_BUCKETS=1<<Ae.LUMINANCE_BITS,Ae.EMPTY=Uint8ClampedArray.from([0]);class xe extends Ae{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),l=s.getWidth(),u=s.getHeight();if(l>=xe.MINIMUM_DIMENSION&&u>=xe.MINIMUM_DIMENSION){const f=s.getMatrix();let p=l>>xe.BLOCK_SIZE_POWER;(l&xe.BLOCK_SIZE_MASK)!==0&&p++;let y=u>>xe.BLOCK_SIZE_POWER;(u&xe.BLOCK_SIZE_MASK)!==0&&y++;const v=xe.calculateBlackPoints(f,p,y,l,u),I=new we(l,u);xe.calculateThresholdForBlock(f,p,y,l,u,v,I),this.matrix=I}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new xe(s)}static calculateThresholdForBlock(s,l,u,f,p,y,v){const I=p-xe.BLOCK_SIZE,C=f-xe.BLOCK_SIZE;for(let O=0;O<u;O++){let U=O<<xe.BLOCK_SIZE_POWER;U>I&&(U=I);const q=xe.cap(O,2,u-3);for(let J=0;J<l;J++){let le=J<<xe.BLOCK_SIZE_POWER;le>C&&(le=C);const ue=xe.cap(J,2,l-3);let fe=0;for(let Fe=-2;Fe<=2;Fe++){const je=y[q+Fe];fe+=je[ue-2]+je[ue-1]+je[ue]+je[ue+1]+je[ue+2]}const Ee=fe/25;xe.thresholdBlock(s,le,U,Ee,f,v)}}}static cap(s,l,u){return s<l?l:s>u?u:s}static thresholdBlock(s,l,u,f,p,y){for(let v=0,I=u*p+l;v<xe.BLOCK_SIZE;v++,I+=p)for(let C=0;C<xe.BLOCK_SIZE;C++)(s[I+C]&255)<=f&&y.set(l+C,u+v)}static calculateBlackPoints(s,l,u,f,p){const y=p-xe.BLOCK_SIZE,v=f-xe.BLOCK_SIZE,I=new Array(u);for(let C=0;C<u;C++){I[C]=new Int32Array(l);let O=C<<xe.BLOCK_SIZE_POWER;O>y&&(O=y);for(let U=0;U<l;U++){let q=U<<xe.BLOCK_SIZE_POWER;q>v&&(q=v);let J=0,le=255,ue=0;for(let Ee=0,Fe=O*f+q;Ee<xe.BLOCK_SIZE;Ee++,Fe+=f){for(let je=0;je<xe.BLOCK_SIZE;je++){const Oe=s[Fe+je]&255;J+=Oe,Oe<le&&(le=Oe),Oe>ue&&(ue=Oe)}if(ue-le>xe.MIN_DYNAMIC_RANGE)for(Ee++,Fe+=f;Ee<xe.BLOCK_SIZE;Ee++,Fe+=f)for(let je=0;je<xe.BLOCK_SIZE;je++)J+=s[Fe+je]&255}let fe=J>>xe.BLOCK_SIZE_POWER*2;if(ue-le<=xe.MIN_DYNAMIC_RANGE&&(fe=le/2,C>0&&U>0)){const Ee=(I[C-1][U]+2*I[C][U-1]+I[C-1][U-1])/4;le<Ee&&(fe=Ee)}I[C][U]=fe}}return I}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class oe{constructor(s,l){this.width=s,this.height=l}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,l,u,f){throw new ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ee("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let l=new K;for(let u=0;u<this.height;u++){const f=this.getRow(u,s);for(let p=0;p<this.width;p++){const y=f[p]&255;let v;y<64?v="#":y<128?v="+":y<192?v=".":v=" ",l.append(v)}l.append(`
`)}return l.toString()}}class Te extends oe{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,l){const u=this.delegate.getRow(s,l),f=this.getWidth();for(let p=0;p<f;p++)u[p]=255-(u[p]&255);return u}getMatrix(){const s=this.delegate.getMatrix(),l=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(l);for(let f=0;f<l;f++)u[f]=255-(s[f]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(s,l,u,f){return new Te(this.delegate.crop(s,l,u,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class Ne extends oe{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=Ne.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const l=s.getContext("2d").getImageData(0,0,s.width,s.height);return Ne.toGrayscaleBuffer(l.data,s.width,s.height)}static toGrayscaleBuffer(s,l,u){const f=new Uint8ClampedArray(l*u);for(let p=0,y=0,v=s.length;p<v;p+=4,y++){let I;if(s[p+3]===0)I=255;else{const O=s[p],U=s[p+1],q=s[p+2];I=306*O+601*U+117*q+512>>10}f[y]=I}return f}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth(),f=s*u;return l===null?l=this.buffer.slice(f,f+u):(l.length<u&&(l=new Uint8ClampedArray(u)),l.set(this.buffer.slice(f,f+u))),l}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,l,u,f){return super.crop(s,l,u,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const l=this.getTempCanvasElement(),u=l.getContext("2d"),f=s*Ne.DEGREE_TO_RADIANS,p=this.canvas.width,y=this.canvas.height,v=Math.ceil(Math.abs(Math.cos(f))*p+Math.abs(Math.sin(f))*y),I=Math.ceil(Math.abs(Math.sin(f))*p+Math.abs(Math.cos(f))*y);return l.width=v,l.height=I,u.translate(v/2,I/2),u.rotate(f),u.drawImage(this.canvas,p/-2,y/-2),this.buffer=Ne.makeBufferFromCanvasImageData(l),this}invert(){return new Te(this)}}Ne.DEGREE_TO_RADIANS=Math.PI/180;class ae{constructor(s,l,u){this.deviceId=s,this.label=l,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||cm||self||window||void 0)&&(globalThis||cm||self||window||void 0).__awaiter||function(j,s,l,u){function f(p){return p instanceof l?p:new l(function(y){y(p)})}return new(l||(l=Promise))(function(p,y){function v(O){try{C(u.next(O))}catch(U){y(U)}}function I(O){try{C(u.throw(O))}catch(U){y(U)}}function C(O){O.done?p(O.value):f(O.value).then(v,I)}C((u=u.apply(j,s||[])).next())})};class Se{constructor(s,l=500,u){this.reader=s,this.timeBetweenScansMillis=l,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),l=[];for(const u of s){const f=u.kind==="video"?"videoinput":u.kind;if(f!=="videoinput")continue;const p=u.deviceId||u.id,y=u.label||`Video device ${l.length+1}`,v=u.groupId,I={deviceId:p,label:y,kind:f,groupId:v};l.push(I)}return l})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(l=>new ae(l.deviceId,l.label))})}findDeviceById(s){return he(this,void 0,void 0,function*(){const l=yield this.listVideoInputDevices();return l?l.find(u=>u.deviceId===s):null})}decodeFromInputVideoDevice(s,l){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,l)})}decodeOnceFromVideoDevice(s,l){return he(this,void 0,void 0,function*(){this.reset();let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeOnceFromConstraints(f,l)})}decodeOnceFromConstraints(s,l){return he(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(u,l)})}decodeOnceFromStream(s,l){return he(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,l);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(s,l,u){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,l,u)})}decodeFromVideoDevice(s,l,u){return he(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const p={video:f};return yield this.decodeFromConstraints(p,l,u)})}decodeFromConstraints(s,l,u){return he(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,l,u)})}decodeFromStream(s,l,u){return he(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,l);return yield this.decodeContinuously(f,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,l){return he(this,void 0,void 0,function*(){const u=this.prepareVideoElement(l);return this.addVideoSource(u,s),this.videoElement=u,this.stream=s,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(s){return new Promise((l,u)=>this.playVideoOnLoad(s,()=>l()))}playVideoOnLoad(s,l){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",l),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,l){const u=document.getElementById(s);if(!u)throw new w(`element with id '${s}' not found`);if(u.nodeName.toLowerCase()!==l.toLowerCase())throw new w(`element with id '${s}' must be an ${l} element`);return u}decodeFromImage(s,l){if(!s&&!l)throw new w("either imageElement with a src set or an url must be provided");return l&&!s?this.decodeFromImageUrl(l):this.decodeFromImageElement(s)}decodeFromVideo(s,l){if(!s&&!l)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrl(l):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,l,u){if(s===void 0&&l===void 0)throw new w("Either an element with a src set or an URL must be provided");return l&&!s?this.decodeFromVideoUrlContinuously(l,u):this.decodeFromVideoElementContinuously(s,u)}decodeFromImageElement(s){if(!s)throw new w("An image element must be provided.");this.reset();const l=this.prepareImageElement(s);this.imageElement=l;let u;return this.isImageLoaded(l)?u=this.decodeOnce(l,!1,!0):u=this._decodeOnLoadImage(l),u}decodeFromVideoElement(s){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(l)}decodeFromVideoElementContinuously(s,l){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(u,l)}_decodeFromVideoElementSetup(s){if(!s)throw new w("A video element must be provided.");this.reset();const l=this.prepareVideoElement(s);return this.videoElement=l,l}decodeFromImageUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareImageElement();this.imageElement=l;const u=this._decodeOnLoadImage(l);return l.src=s,u}decodeFromVideoUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElement(l);return l.src=s,u}decodeFromVideoUrlContinuously(s,l){if(!s)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(u,l);return u.src=s,f}_decodeOnLoadImage(s){return new Promise((l,u)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(l,u),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,l){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,l)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let l;return typeof s>"u"&&(l=document.createElement("img"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(l=s),l}prepareVideoElement(s){let l;return!s&&typeof document<"u"&&(l=document.createElement("video"),l.width=200,l.height=200),typeof s=="string"&&(l=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(l=s),l.setAttribute("autoplay","true"),l.setAttribute("muted","true"),l.setAttribute("playsinline","true"),l}decodeOnce(s,l=!0,u=!0){this._stopAsyncDecode=!1;const f=(p,y)=>{if(this._stopAsyncDecode){y(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const v=this.decode(s);p(v)}catch(v){const I=l&&v instanceof se,O=(v instanceof R||v instanceof F)&&u;if(I||O)return setTimeout(f,this._timeBetweenDecodingAttempts,p,y);y(v)}};return new Promise((p,y)=>f(p,y))}decodeContinuously(s,l){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);l(f,null),setTimeout(u,this.timeBetweenScansMillis)}catch(f){l(null,f);const p=f instanceof R||f instanceof F,y=f instanceof se;(p||y)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(s){const l=this.createBinaryBitmap(s);return this.decodeBitmap(l)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,l,u){l||(l={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}drawImageOnCanvas(s,l,u=this.captureCanvasContext){l||(l={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,l.sx,l.sy,l.sWidth,l.sHeight,l.dx,l.dy,l.dWidth,l.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const l=this.getCaptureCanvas(s),u=new Ne(l),f=new xe(u);return new T(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const l=this.createCaptureCanvas(s);this.captureCanvas=l}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const l=document.createElement("canvas");let u,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(u=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(u=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),l.style.width=u+"px",l.style.height=f+"px",l.width=u,l.height=f,l}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,l){try{s.srcObject=l}catch{s.src=URL.createObjectURL(l)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Le{constructor(s,l,u=l==null?0:8*l.length,f,p,y=D.currentTimeMillis()){this.text=s,this.rawBytes=l,this.numBits=u,this.resultPoints=f,this.format=p,this.timestamp=y,this.text=s,this.rawBytes=l,u==null?this.numBits=l==null?0:8*l.length:this.numBits=u,this.resultPoints=f,this.format=p,this.resultMetadata=null,y==null?this.timestamp=D.currentTimeMillis():this.timestamp=y}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,l){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,l)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const l=this.resultPoints;if(l===null)this.resultPoints=s;else if(s!==null&&s.length>0){const u=new Array(l.length+s.length);D.arraycopy(l,0,u,0,l.length),D.arraycopy(s,0,u,l.length,s.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var it;(function(j){j[j.AZTEC=0]="AZTEC",j[j.CODABAR=1]="CODABAR",j[j.CODE_39=2]="CODE_39",j[j.CODE_93=3]="CODE_93",j[j.CODE_128=4]="CODE_128",j[j.DATA_MATRIX=5]="DATA_MATRIX",j[j.EAN_8=6]="EAN_8",j[j.EAN_13=7]="EAN_13",j[j.ITF=8]="ITF",j[j.MAXICODE=9]="MAXICODE",j[j.PDF_417=10]="PDF_417",j[j.QR_CODE=11]="QR_CODE",j[j.RSS_14=12]="RSS_14",j[j.RSS_EXPANDED=13]="RSS_EXPANDED",j[j.UPC_A=14]="UPC_A",j[j.UPC_E=15]="UPC_E",j[j.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(it||(it={}));var Re=it,Pe;(function(j){j[j.OTHER=0]="OTHER",j[j.ORIENTATION=1]="ORIENTATION",j[j.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",j[j.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",j[j.ISSUE_NUMBER=4]="ISSUE_NUMBER",j[j.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",j[j.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",j[j.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",j[j.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",j[j.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",j[j.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pe||(Pe={}));var Ge=Pe;class at{constructor(s,l,u,f,p=-1,y=-1){this.rawBytes=s,this.text=l,this.byteSegments=u,this.ecLevel=f,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=y,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class st{exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}static addOrSubtract(s,l){return s^l}}class ct{constructor(s,l){if(l.length===0)throw new E;this.field=s;const u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const l=this.coefficients;let u;if(s===1){u=0;for(let y=0,v=l.length;y!==v;y++){const I=l[y];u=st.addOrSubtract(u,I)}return u}u=l[0];const f=l.length,p=this.field;for(let y=1;y<f;y++)u=st.addOrSubtract(p.multiply(s,u),l[y]);return u}addOrSubtract(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){const y=l;l=u,u=y}let f=new Int32Array(u.length);const p=u.length-l.length;D.arraycopy(u,0,f,0,p);for(let y=p;y<u.length;y++)f[y]=st.addOrSubtract(l[y-p],u[y]);return new ct(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const l=this.coefficients,u=l.length,f=s.coefficients,p=f.length,y=new Int32Array(u+p-1),v=this.field;for(let I=0;I<u;I++){const C=l[I];for(let O=0;O<p;O++)y[I+O]=st.addOrSubtract(y[I+O],v.multiply(C,f[O]))}return new ct(v,y)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const l=this.coefficients.length,u=this.field,f=new Int32Array(l),p=this.coefficients;for(let y=0;y<l;y++)f[y]=u.multiply(p[y],s);return new ct(u,f)}multiplyByMonomial(s,l){if(s<0)throw new E;if(l===0)return this.field.getZero();const u=this.coefficients,f=u.length,p=new Int32Array(f+s),y=this.field;for(let v=0;v<f;v++)p[v]=y.multiply(u[v],l);return new ct(y,p)}divide(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new E("Divide by 0");const l=this.field;let u=l.getZero(),f=this;const p=s.getCoefficient(s.getDegree()),y=l.inverse(p);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const v=f.getDegree()-s.getDegree(),I=l.multiply(f.getCoefficient(f.getDegree()),y),C=s.multiplyByMonomial(v,I),O=l.buildMonomial(v,I);u=u.addOrSubtract(O),f=f.addOrSubtract(C)}return[u,f]}toString(){let s="";for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);if(u!==0){if(u<0?(s+=" - ",u=-u):s.length>0&&(s+=" + "),l===0||u!==1){const f=this.field.log(u);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}l!==0&&(l===1?s+="x":(s+="x^",s+=l))}}return s}}class bt extends g{}bt.kind="ArithmeticException";class ht extends st{constructor(s,l,u){super(),this.primitive=s,this.size=l,this.generatorBase=u;const f=new Int32Array(l);let p=1;for(let v=0;v<l;v++)f[v]=p,p*=2,p>=l&&(p^=s,p&=l-1);this.expTable=f;const y=new Int32Array(l);for(let v=0;v<l-1;v++)y[f[v]]=v;this.logTable=y,this.zero=new ct(this,Int32Array.from([0])),this.one=new ct(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new E;if(l===0)return this.zero;const u=new Int32Array(s+1);return u[0]=l,new ct(this,u)}inverse(s){if(s===0)throw new bt;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class gn extends g{}gn.kind="ReedSolomonException";class Bn extends g{}Bn.kind="IllegalStateException";class Dr{constructor(s){this.field=s}decode(s,l){const u=this.field,f=new ct(u,s),p=new Int32Array(l);let y=!0;for(let J=0;J<l;J++){const le=f.evaluateAt(u.exp(J+u.getGeneratorBase()));p[p.length-1-J]=le,le!==0&&(y=!1)}if(y)return;const v=new ct(u,p),I=this.runEuclideanAlgorithm(u.buildMonomial(l,1),v,l),C=I[0],O=I[1],U=this.findErrorLocations(C),q=this.findErrorMagnitudes(O,U);for(let J=0;J<U.length;J++){const le=s.length-1-u.log(U[J]);if(le<0)throw new gn("Bad error location");s[le]=ht.addOrSubtract(s[le],q[J])}}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){const J=s;s=l,l=J}const f=this.field;let p=s,y=l,v=f.getZero(),I=f.getOne();for(;y.getDegree()>=(u/2|0);){let J=p,le=v;if(p=y,v=I,p.isZero())throw new gn("r_{i-1} was zero");y=J;let ue=f.getZero();const fe=p.getCoefficient(p.getDegree()),Ee=f.inverse(fe);for(;y.getDegree()>=p.getDegree()&&!y.isZero();){const Fe=y.getDegree()-p.getDegree(),je=f.multiply(y.getCoefficient(y.getDegree()),Ee);ue=ue.addOrSubtract(f.buildMonomial(Fe,je)),y=y.addOrSubtract(p.multiplyByMonomial(Fe,je))}if(I=ue.multiply(v).addOrSubtract(le),y.getDegree()>=p.getDegree())throw new Bn("Division algorithm failed to reduce polynomial?")}const C=I.getCoefficient(0);if(C===0)throw new gn("sigmaTilde(0) was zero");const O=f.inverse(C),U=I.multiplyScalar(O),q=y.multiplyScalar(O);return[U,q]}findErrorLocations(s){const l=s.getDegree();if(l===1)return Int32Array.from([s.getCoefficient(1)]);const u=new Int32Array(l);let f=0;const p=this.field;for(let y=1;y<p.getSize()&&f<l;y++)s.evaluateAt(y)===0&&(u[f]=p.inverse(y),f++);if(f!==l)throw new gn("Error locator degree does not match number of roots");return u}findErrorMagnitudes(s,l){const u=l.length,f=new Int32Array(u),p=this.field;for(let y=0;y<u;y++){const v=p.inverse(l[y]);let I=1;for(let C=0;C<u;C++)if(y!==C){const O=p.multiply(l[C],v),U=(O&1)===0?O|1:O&-2;I=p.multiply(I,U)}f[y]=p.multiply(s.evaluateAt(v),p.inverse(I)),p.getGeneratorBase()!==0&&(f[y]=p.multiply(f[y],v))}return f}}var Qt;(function(j){j[j.UPPER=0]="UPPER",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.DIGIT=3]="DIGIT",j[j.PUNCT=4]="PUNCT",j[j.BINARY=5]="BINARY"})(Qt||(Qt={}));class zt{decode(s){this.ddata=s;let l=s.getBits(),u=this.extractBits(l),f=this.correctBits(u),p=zt.convertBoolArrayToByteArray(f),y=zt.getEncodedData(f),v=new at(p,y,null,null);return v.setNumBits(f.length),v}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let l=s.length,u=Qt.UPPER,f=Qt.UPPER,p="",y=0;for(;y<l;)if(f===Qt.BINARY){if(l-y<5)break;let v=zt.readCode(s,y,5);if(y+=5,v===0){if(l-y<11)break;v=zt.readCode(s,y,11)+31,y+=11}for(let I=0;I<v;I++){if(l-y<8){y=l;break}const C=zt.readCode(s,y,8);p+=te.castAsNonUtf8Char(C),y+=8}f=u}else{let v=f===Qt.DIGIT?4:5;if(l-y<v)break;let I=zt.readCode(s,y,v);y+=v;let C=zt.getCharacter(f,I);C.startsWith("CTRL_")?(u=f,f=zt.getTable(C.charAt(5)),C.charAt(6)==="L"&&(u=f)):(p+=C,f=u)}return p}static getTable(s){switch(s){case"L":return Qt.LOWER;case"P":return Qt.PUNCT;case"M":return Qt.MIXED;case"D":return Qt.DIGIT;case"B":return Qt.BINARY;case"U":default:return Qt.UPPER}}static getCharacter(s,l){switch(s){case Qt.UPPER:return zt.UPPER_TABLE[l];case Qt.LOWER:return zt.LOWER_TABLE[l];case Qt.MIXED:return zt.MIXED_TABLE[l];case Qt.PUNCT:return zt.PUNCT_TABLE[l];case Qt.DIGIT:return zt.DIGIT_TABLE[l];default:throw new Bn("Bad table")}}correctBits(s){let l,u;this.ddata.getNbLayers()<=2?(u=6,l=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,l=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,l=ht.AZTEC_DATA_10):(u=12,l=ht.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),p=s.length/u;if(p<f)throw new F;let y=s.length%u,v=new Int32Array(p);for(let q=0;q<p;q++,y+=u)v[q]=zt.readCode(s,y,u);try{new Dr(l).decode(v,p-f)}catch(q){throw new F(q)}let I=(1<<u)-1,C=0;for(let q=0;q<f;q++){let J=v[q];if(J===0||J===I)throw new F;(J===1||J===I-1)&&C++}let O=new Array(f*u-C),U=0;for(let q=0;q<f;q++){let J=v[q];if(J===1||J===I-1)O.fill(J>1,U,U+u-1),U+=u-1;else for(let le=u-1;le>=0;--le)O[U++]=(J&1<<le)!==0}return O}extractBits(s){let l=this.ddata.isCompact(),u=this.ddata.getNbLayers(),f=(l?11:14)+u*4,p=new Int32Array(f),y=new Array(this.totalBitsInLayer(u,l));if(l)for(let v=0;v<p.length;v++)p[v]=v;else{let v=f+1+2*W.truncDivision(W.truncDivision(f,2)-1,15),I=f/2,C=W.truncDivision(v,2);for(let O=0;O<I;O++){let U=O+W.truncDivision(O,15);p[I-O-1]=C-U-1,p[I+O]=C+U+1}}for(let v=0,I=0;v<u;v++){let C=(u-v)*4+(l?9:12),O=v*2,U=f-1-O;for(let q=0;q<C;q++){let J=q*2;for(let le=0;le<2;le++)y[I+J+le]=s.get(p[O+le],p[O+q]),y[I+2*C+J+le]=s.get(p[O+q],p[U-le]),y[I+4*C+J+le]=s.get(p[U-le],p[U-q]),y[I+6*C+J+le]=s.get(p[U-q],p[O+le])}I+=C*8}return y}static readCode(s,l,u){let f=0;for(let p=l;p<l+u;p++)f<<=1,s[p]&&(f|=1);return f}static readByte(s,l){let u=s.length-l;return u>=8?zt.readCode(s,l,8):zt.readCode(s,l,u)<<8-u}static convertBoolArrayToByteArray(s){let l=new Uint8Array((s.length+7)/8);for(let u=0;u<l.length;u++)l[u]=zt.readByte(s,8*u);return l}totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pt{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,l,u,f){const p=s-u,y=l-f;return Math.sqrt(p*p+y*y)}static sum(s){let l=0;for(let u=0,f=s.length;u!==f;u++){const p=s[u];l+=p}return l}}class xi{static floatToIntBits(s){return s}}xi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Xe{constructor(s,l){this.x=s,this.y=l}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Xe){const l=s;return this.x===l.x&&this.y===l.y}return!1}hashCode(){return 31*xi.floatToIntBits(this.x)+xi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const l=this.distance(s[0],s[1]),u=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let p,y,v;if(u>=l&&u>=f?(y=s[0],p=s[1],v=s[2]):f>=u&&f>=l?(y=s[1],p=s[0],v=s[2]):(y=s[2],p=s[0],v=s[1]),this.crossProductZ(p,y,v)<0){const I=p;p=v,v=I}s[0]=p,s[1]=y,s[2]=v}static distance(s,l){return pt.distance(s.x,s.y,l.x,l.y)}static crossProductZ(s,l,u){const f=l.x,p=l.y;return(u.x-f)*(s.y-p)-(u.y-p)*(s.x-f)}}class Xn{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class wi extends Xn{constructor(s,l,u,f,p){super(s,l),this.compact=u,this.nbDatablocks=f,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Yr{constructor(s,l,u,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),l==null&&(l=Yr.INIT_SIZE),u==null&&(u=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const p=l/2|0;if(this.leftInit=u-p,this.rightInit=u+p,this.upInit=f-p,this.downInit=f+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let s=this.leftInit,l=this.rightInit,u=this.upInit,f=this.downInit,p=!1,y=!0,v=!1,I=!1,C=!1,O=!1,U=!1;const q=this.width,J=this.height;for(;y;){y=!1;let le=!0;for(;(le||!I)&&l<q;)le=this.containsBlackPoint(u,f,l,!1),le?(l++,y=!0,I=!0):I||l++;if(l>=q){p=!0;break}let ue=!0;for(;(ue||!C)&&f<J;)ue=this.containsBlackPoint(s,l,f,!0),ue?(f++,y=!0,C=!0):C||f++;if(f>=J){p=!0;break}let fe=!0;for(;(fe||!O)&&s>=0;)fe=this.containsBlackPoint(u,f,s,!1),fe?(s--,y=!0,O=!0):O||s--;if(s<0){p=!0;break}let Ee=!0;for(;(Ee||!U)&&u>=0;)Ee=this.containsBlackPoint(s,l,u,!0),Ee?(u--,y=!0,U=!0):U||u--;if(u<0){p=!0;break}y&&(v=!0)}if(!p&&v){const le=l-s;let ue=null;for(let je=1;ue===null&&je<le;je++)ue=this.getBlackPointOnSegment(s,f-je,s+je,f);if(ue==null)throw new se;let fe=null;for(let je=1;fe===null&&je<le;je++)fe=this.getBlackPointOnSegment(s,u+je,s+je,u);if(fe==null)throw new se;let Ee=null;for(let je=1;Ee===null&&je<le;je++)Ee=this.getBlackPointOnSegment(l,u+je,l-je,u);if(Ee==null)throw new se;let Fe=null;for(let je=1;Fe===null&&je<le;je++)Fe=this.getBlackPointOnSegment(l,f-je,l-je,f);if(Fe==null)throw new se;return this.centerEdges(Fe,ue,Ee,fe)}else throw new se}getBlackPointOnSegment(s,l,u,f){const p=pt.round(pt.distance(s,l,u,f)),y=(u-s)/p,v=(f-l)/p,I=this.image;for(let C=0;C<p;C++){const O=pt.round(s+C*y),U=pt.round(l+C*v);if(I.get(O,U))return new Xe(O,U)}return null}centerEdges(s,l,u,f){const p=s.getX(),y=s.getY(),v=l.getX(),I=l.getY(),C=u.getX(),O=u.getY(),U=f.getX(),q=f.getY(),J=Yr.CORR;return p<this.width/2?[new Xe(U-J,q+J),new Xe(v+J,I+J),new Xe(C-J,O-J),new Xe(p+J,y-J)]:[new Xe(U+J,q+J),new Xe(v+J,I-J),new Xe(C-J,O+J),new Xe(p-J,y-J)]}containsBlackPoint(s,l,u,f){const p=this.image;if(f){for(let y=s;y<=l;y++)if(p.get(y,u))return!0}else for(let y=s;y<=l;y++)if(p.get(u,y))return!0;return!1}}Yr.INIT_SIZE=10,Yr.CORR=1;class no{static checkAndNudgePoints(s,l){const u=s.getWidth(),f=s.getHeight();let p=!0;for(let y=0;y<l.length&&p;y+=2){const v=Math.floor(l[y]),I=Math.floor(l[y+1]);if(v<-1||v>u||I<-1||I>f)throw new se;p=!1,v===-1?(l[y]=0,p=!0):v===u&&(l[y]=u-1,p=!0),I===-1?(l[y+1]=0,p=!0):I===f&&(l[y+1]=f-1,p=!0)}p=!0;for(let y=l.length-2;y>=0&&p;y-=2){const v=Math.floor(l[y]),I=Math.floor(l[y+1]);if(v<-1||v>u||I<-1||I>f)throw new se;p=!1,v===-1?(l[y]=0,p=!0):v===u&&(l[y]=u-1,p=!0),I===-1?(l[y+1]=0,p=!0):I===f&&(l[y+1]=f-1,p=!0)}}}class Wt{constructor(s,l,u,f,p,y,v,I,C){this.a11=s,this.a21=l,this.a31=u,this.a12=f,this.a22=p,this.a32=y,this.a13=v,this.a23=I,this.a33=C}static quadrilateralToQuadrilateral(s,l,u,f,p,y,v,I,C,O,U,q,J,le,ue,fe){const Ee=Wt.quadrilateralToSquare(s,l,u,f,p,y,v,I);return Wt.squareToQuadrilateral(C,O,U,q,J,le,ue,fe).times(Ee)}transformPoints(s){const l=s.length,u=this.a11,f=this.a12,p=this.a13,y=this.a21,v=this.a22,I=this.a23,C=this.a31,O=this.a32,U=this.a33;for(let q=0;q<l;q+=2){const J=s[q],le=s[q+1],ue=p*J+I*le+U;s[q]=(u*J+y*le+C)/ue,s[q+1]=(f*J+v*le+O)/ue}}transformPointsWithValues(s,l){const u=this.a11,f=this.a12,p=this.a13,y=this.a21,v=this.a22,I=this.a23,C=this.a31,O=this.a32,U=this.a33,q=s.length;for(let J=0;J<q;J++){const le=s[J],ue=l[J],fe=p*le+I*ue+U;s[J]=(u*le+y*ue+C)/fe,l[J]=(f*le+v*ue+O)/fe}}static squareToQuadrilateral(s,l,u,f,p,y,v,I){const C=s-u+p-v,O=l-f+y-I;if(C===0&&O===0)return new Wt(u-s,p-u,s,f-l,y-f,l,0,0,1);{const U=u-p,q=v-p,J=f-y,le=I-y,ue=U*le-q*J,fe=(C*le-q*O)/ue,Ee=(U*O-C*J)/ue;return new Wt(u-s+fe*u,v-s+Ee*v,s,f-l+fe*f,I-l+Ee*I,l,fe,Ee,1)}}static quadrilateralToSquare(s,l,u,f,p,y,v,I){return Wt.squareToQuadrilateral(s,l,u,f,p,y,v,I).buildAdjoint()}buildAdjoint(){return new Wt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Wt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Yn extends no{sampleGrid(s,l,u,f,p,y,v,I,C,O,U,q,J,le,ue,fe,Ee,Fe,je){const Oe=Wt.quadrilateralToQuadrilateral(f,p,y,v,I,C,O,U,q,J,le,ue,fe,Ee,Fe,je);return this.sampleGridWithTransform(s,l,u,Oe)}sampleGridWithTransform(s,l,u,f){if(l<=0||u<=0)throw new se;const p=new we(l,u),y=new Float32Array(2*l);for(let v=0;v<u;v++){const I=y.length,C=v+.5;for(let O=0;O<I;O+=2)y[O]=O/2+.5,y[O+1]=C;f.transformPoints(y),no.checkAndNudgePoints(s,y);try{for(let O=0;O<I;O+=2)s.get(Math.floor(y[O]),Math.floor(y[O+1]))&&p.set(O/2,v)}catch{throw new se}}return p}}class Er{static setGridSampler(s){Er.gridSampler=s}static getInstance(){return Er.gridSampler}}Er.gridSampler=new Yn;class jn{constructor(s,l){this.x=s,this.y=l}toResultPoint(){return new Xe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Qr{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let l=this.getMatrixCenter(),u=this.getBullsEyeCorners(l);if(s){let y=u[0];u[0]=u[2],u[2]=y}this.extractParameters(u);let f=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),p=this.getMatrixCornerPoints(u);return new wi(f,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new se;let l=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(s[0],s[1],l),this.sampleLine(s[1],s[2],l),this.sampleLine(s[2],s[3],l),this.sampleLine(s[3],s[0],l)]);this.shift=this.getRotation(u,l);let f=0;for(let y=0;y<4;y++){let v=u[(this.shift+y)%4];this.compact?(f<<=7,f+=v>>1&127):(f<<=10,f+=(v>>2&992)+(v>>1&31))}let p=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(s,l){let u=0;s.forEach((f,p,y)=>{let v=(f>>l-2<<1)+(f&1);u=(u<<3)+v}),u=((u&1)<<11)+(u>>1);for(let f=0;f<4;f++)if(W.bitCount(u^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new se}getCorrectedParameterData(s,l){let u,f;l?(u=7,f=2):(u=10,f=4);let p=u-f,y=new Int32Array(u);for(let I=u-1;I>=0;--I)y[I]=s&15,s>>=4;try{new Dr(ht.AZTEC_PARAM).decode(y,p)}catch{throw new se}let v=0;for(let I=0;I<f;I++)v=(v<<4)+y[I];return v}getBullsEyeCorners(s){let l=s,u=s,f=s,p=s,y=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let U=this.getFirstDifferent(l,y,1,-1),q=this.getFirstDifferent(u,y,1,1),J=this.getFirstDifferent(f,y,-1,1),le=this.getFirstDifferent(p,y,-1,-1);if(this.nbCenterLayers>2){let ue=this.distancePoint(le,U)*this.nbCenterLayers/(this.distancePoint(p,l)*(this.nbCenterLayers+2));if(ue<.75||ue>1.25||!this.isWhiteOrBlackRectangle(U,q,J,le))break}l=U,u=q,f=J,p=le,y=!y}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let v=new Xe(l.getX()+.5,l.getY()-.5),I=new Xe(u.getX()+.5,u.getY()+.5),C=new Xe(f.getX()-.5,f.getY()+.5),O=new Xe(p.getX()-.5,p.getY()-.5);return this.expandSquare([v,I,C,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,l,u,f;try{let v=new Yr(this.image).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{let I=this.image.getWidth()/2,C=this.image.getHeight()/2;s=this.getFirstDifferent(new jn(I+7,C-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new jn(I+7,C+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new jn(I-7,C+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new jn(I-7,C-7),!1,-1,-1).toResultPoint()}let p=pt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=pt.round((s.getY()+f.getY()+l.getY()+u.getY())/4);try{let v=new Yr(this.image,15,p,y).detect();s=v[0],l=v[1],u=v[2],f=v[3]}catch{s=this.getFirstDifferent(new jn(p+7,y-7),!1,1,-1).toResultPoint(),l=this.getFirstDifferent(new jn(p+7,y+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new jn(p-7,y+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new jn(p-7,y-7),!1,-1,-1).toResultPoint()}return p=pt.round((s.getX()+f.getX()+l.getX()+u.getX())/4),y=pt.round((s.getY()+f.getY()+l.getY()+u.getY())/4),new jn(p,y)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,l,u,f,p){let y=Er.getInstance(),v=this.getDimension(),I=v/2-this.nbCenterLayers,C=v/2+this.nbCenterLayers;return y.sampleGrid(s,v,v,I,I,C,I,C,C,I,C,l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY(),p.getX(),p.getY())}sampleLine(s,l,u){let f=0,p=this.distanceResultPoint(s,l),y=p/u,v=s.getX(),I=s.getY(),C=y*(l.getX()-s.getX())/p,O=y*(l.getY()-s.getY())/p;for(let U=0;U<u;U++)this.image.get(pt.round(v+U*C),pt.round(I+U*O))&&(f|=1<<u-U-1);return f}isWhiteOrBlackRectangle(s,l,u,f){let p=3;s=new jn(s.getX()-p,s.getY()+p),l=new jn(l.getX()-p,l.getY()-p),u=new jn(u.getX()+p,u.getY()-p),f=new jn(f.getX()+p,f.getY()+p);let y=this.getColor(f,s);if(y===0)return!1;let v=this.getColor(s,l);return v!==y||(v=this.getColor(l,u),v!==y)?!1:(v=this.getColor(u,f),v===y)}getColor(s,l){let u=this.distancePoint(s,l),f=(l.getX()-s.getX())/u,p=(l.getY()-s.getY())/u,y=0,v=s.getX(),I=s.getY(),C=this.image.get(s.getX(),s.getY()),O=Math.ceil(u);for(let q=0;q<O;q++)v+=f,I+=p,this.image.get(pt.round(v),pt.round(I))!==C&&y++;let U=y/u;return U>.1&&U<.9?0:U<=.1===C?1:-1}getFirstDifferent(s,l,u,f){let p=s.getX()+u,y=s.getY()+f;for(;this.isValid(p,y)&&this.image.get(p,y)===l;)p+=u,y+=f;for(p-=u,y-=f;this.isValid(p,y)&&this.image.get(p,y)===l;)p+=u;for(p-=u;this.isValid(p,y)&&this.image.get(p,y)===l;)y+=f;return y-=f,new jn(p,y)}expandSquare(s,l,u){let f=u/(2*l),p=s[0].getX()-s[2].getX(),y=s[0].getY()-s[2].getY(),v=(s[0].getX()+s[2].getX())/2,I=(s[0].getY()+s[2].getY())/2,C=new Xe(v+f*p,I+f*y),O=new Xe(v-f*p,I-f*y);p=s[1].getX()-s[3].getX(),y=s[1].getY()-s[3].getY(),v=(s[1].getX()+s[3].getX())/2,I=(s[1].getY()+s[3].getY())/2;let U=new Xe(v+f*p,I+f*y),q=new Xe(v-f*p,I-f*y);return[C,U,O,q]}isValid(s,l){return s>=0&&s<this.image.getWidth()&&l>0&&l<this.image.getHeight()}isValidPoint(s){let l=pt.round(s.getX()),u=pt.round(s.getY());return this.isValid(l,u)}distancePoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}distanceResultPoint(s,l){return pt.distance(s.getX(),s.getY(),l.getX(),l.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Fi{decode(s,l=null){let u=null,f=new Qr(s.getBlackMatrix()),p=null,y=null;try{let O=f.detectMirror(!1);p=O.getPoints(),this.reportFoundResultPoints(l,p),y=new zt().decode(O)}catch(O){u=O}if(y==null)try{let O=f.detectMirror(!0);p=O.getPoints(),this.reportFoundResultPoints(l,p),y=new zt().decode(O)}catch(O){throw u??O}let v=new Le(y.getText(),y.getRawBytes(),y.getNumBits(),p,Re.AZTEC,D.currentTimeMillis()),I=y.getByteSegments();I!=null&&v.putMetadata(Ge.BYTE_SEGMENTS,I);let C=y.getECLevel();return C!=null&&v.putMetadata(Ge.ERROR_CORRECTION_LEVEL,C),v}reportFoundResultPoints(s,l){if(s!=null){let u=s.get(ie.NEED_RESULT_POINT_CALLBACK);u!=null&&l.forEach((f,p,y)=>{u.foundPossibleResultPoint(f)})}}reset(){}}class vi extends Se{constructor(s=500){super(new Fi,s)}}class In{decode(s,l){try{return this.doDecode(s,l)}catch{if(l&&l.get(ie.TRY_HARDER)===!0&&s.isRotateSupported()){const p=s.rotateCounterClockwise(),y=this.doDecode(p,l),v=y.getResultMetadata();let I=270;v!==null&&v.get(Ge.ORIENTATION)===!0&&(I=I+v.get(Ge.ORIENTATION)%360),y.putMetadata(Ge.ORIENTATION,I);const C=y.getResultPoints();if(C!==null){const O=p.getHeight();for(let U=0;U<C.length;U++)C[U]=new Xe(O-C[U].getY()-1,C[U].getX())}return y}else throw new se}}reset(){}doDecode(s,l){const u=s.getWidth(),f=s.getHeight();let p=new Y(u);const y=l&&l.get(ie.TRY_HARDER)===!0,v=Math.max(1,f>>(y?8:5));let I;y?I=f:I=15;const C=Math.trunc(f/2);for(let O=0;O<I;O++){const U=Math.trunc((O+1)/2),q=(O&1)===0,J=C+v*(q?U:-U);if(J<0||J>=f)break;try{p=s.getBlackRow(J,p)}catch{continue}for(let le=0;le<2;le++){if(le===1&&(p.reverse(),l&&l.get(ie.NEED_RESULT_POINT_CALLBACK)===!0)){const ue=new Map;l.forEach((fe,Ee)=>ue.set(Ee,fe)),ue.delete(ie.NEED_RESULT_POINT_CALLBACK),l=ue}try{const ue=this.decodeRow(J,p,l);if(le===1){ue.putMetadata(Ge.ORIENTATION,180);const fe=ue.getResultPoints();fe!==null&&(fe[0]=new Xe(u-fe[0].getX()-1,fe[0].getY()),fe[1]=new Xe(u-fe[1].getX()-1,fe[1].getY()))}return ue}catch{}}}throw new se}static recordPattern(s,l,u){const f=u.length;for(let C=0;C<f;C++)u[C]=0;const p=s.getSize();if(l>=p)throw new se;let y=!s.get(l),v=0,I=l;for(;I<p;){if(s.get(I)!==y)u[v]++;else{if(++v===f)break;u[v]=1,y=!y}I++}if(!(v===f||v===f-1&&I===p))throw new se}static recordPatternInReverse(s,l,u){let f=u.length,p=s.get(l);for(;l>0&&f>=0;)s.get(--l)!==p&&(f--,p=!p);if(f>=0)throw new se;In.recordPattern(s,l+1,u)}static patternMatchVariance(s,l,u){const f=s.length;let p=0,y=0;for(let C=0;C<f;C++)p+=s[C],y+=l[C];if(p<y)return Number.POSITIVE_INFINITY;const v=p/y;u*=v;let I=0;for(let C=0;C<f;C++){const O=s[C],U=l[C]*v,q=O>U?O-U:U-O;if(q>u)return Number.POSITIVE_INFINITY;I+=q}return I/p}}class We extends In{static findStartPattern(s){const l=s.getSize(),u=s.getNextSet(0);let f=0,p=Int32Array.from([0,0,0,0,0,0]),y=u,v=!1;const I=6;for(let C=u;C<l;C++)if(s.get(C)!==v)p[f]++;else{if(f===I-1){let O=We.MAX_AVG_VARIANCE,U=-1;for(let q=We.CODE_START_A;q<=We.CODE_START_C;q++){const J=In.patternMatchVariance(p,We.CODE_PATTERNS[q],We.MAX_INDIVIDUAL_VARIANCE);J<O&&(O=J,U=q)}if(U>=0&&s.isRange(Math.max(0,y-(C-y)/2),y,!1))return Int32Array.from([y,C,U]);y+=p[0]+p[1],p=p.slice(2,p.length-1),p[f-1]=0,p[f]=0,f--}else f++;p[f]=1,v=!v}throw new se}static decodeCode(s,l,u){In.recordPattern(s,u,l);let f=We.MAX_AVG_VARIANCE,p=-1;for(let y=0;y<We.CODE_PATTERNS.length;y++){const v=We.CODE_PATTERNS[y],I=this.patternMatchVariance(l,v,We.MAX_INDIVIDUAL_VARIANCE);I<f&&(f=I,p=y)}if(p>=0)return p;throw new se}decodeRow(s,l,u){const f=u&&u.get(ie.ASSUME_GS1)===!0,p=We.findStartPattern(l),y=p[2];let v=0;const I=new Uint8Array(20);I[v++]=y;let C;switch(y){case We.CODE_START_A:C=We.CODE_CODE_A;break;case We.CODE_START_B:C=We.CODE_CODE_B;break;case We.CODE_START_C:C=We.CODE_CODE_C;break;default:throw new F}let O=!1,U=!1,q="",J=p[0],le=p[1];const ue=Int32Array.from([0,0,0,0,0,0]);let fe=0,Ee=0,Fe=y,je=0,Oe=!0,Mt=!1,St=!1;for(;!O;){const oo=U;switch(U=!1,fe=Ee,Ee=We.decodeCode(l,ue,le),I[v++]=Ee,Ee!==We.CODE_STOP&&(Oe=!0),Ee!==We.CODE_STOP&&(je++,Fe+=je*Ee),J=le,le+=ue.reduce((nl,lh)=>nl+lh,0),Ee){case We.CODE_START_A:case We.CODE_START_B:case We.CODE_START_C:throw new F}switch(C){case We.CODE_CODE_A:if(Ee<64)St===Mt?q+=String.fromCharCode(32+Ee):q+=String.fromCharCode(32+Ee+128),St=!1;else if(Ee<96)St===Mt?q+=String.fromCharCode(Ee-64):q+=String.fromCharCode(Ee+64),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_A:!Mt&&St?(Mt=!0,St=!1):Mt&&St?(Mt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_B;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_B:if(Ee<96)St===Mt?q+=String.fromCharCode(32+Ee):q+=String.fromCharCode(32+Ee+128),St=!1;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_FNC_2:case We.CODE_FNC_3:break;case We.CODE_FNC_4_B:!Mt&&St?(Mt=!0,St=!1):Mt&&St?(Mt=!1,St=!1):St=!0;break;case We.CODE_SHIFT:U=!0,C=We.CODE_CODE_A;break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_C:C=We.CODE_CODE_C;break;case We.CODE_STOP:O=!0;break}break;case We.CODE_CODE_C:if(Ee<100)Ee<10&&(q+="0"),q+=Ee;else switch(Ee!==We.CODE_STOP&&(Oe=!1),Ee){case We.CODE_FNC_1:f&&(q.length===0?q+="]C1":q+="");break;case We.CODE_CODE_A:C=We.CODE_CODE_A;break;case We.CODE_CODE_B:C=We.CODE_CODE_B;break;case We.CODE_STOP:O=!0;break}break}oo&&(C=C===We.CODE_CODE_A?We.CODE_CODE_B:We.CODE_CODE_A)}const Ci=le-J;if(le=l.getNextUnset(le),!l.isRange(le,Math.min(l.getSize(),le+(le-J)/2),!1))throw new se;if(Fe-=je*fe,Fe%103!==fe)throw new R;const Es=q.length;if(Es===0)throw new se;Es>0&&Oe&&(C===We.CODE_CODE_C?q=q.substring(0,Es-2):q=q.substring(0,Es-1));const Sr=(p[1]+p[0])/2,hn=J+Ci/2,sr=I.length,hi=new Uint8Array(sr);for(let oo=0;oo<sr;oo++)hi[oo]=I[oo];const pa=[new Xe(Sr,s),new Xe(hn,s)];return new Le(q,hi,0,pa,Re.CODE_128,new Date().getTime())}}We.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],We.MAX_AVG_VARIANCE=.25,We.MAX_INDIVIDUAL_VARIANCE=.7,We.CODE_SHIFT=98,We.CODE_CODE_C=99,We.CODE_CODE_B=100,We.CODE_CODE_A=101,We.CODE_FNC_1=102,We.CODE_FNC_2=97,We.CODE_FNC_3=96,We.CODE_FNC_4_A=101,We.CODE_FNC_4_B=100,We.CODE_START_A=103,We.CODE_START_B=104,We.CODE_START_C=105,We.CODE_STOP=106;class An extends In{constructor(s=!1,l=!1){super(),this.usingCheckDigit=s,this.extendedMode=l,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,l,u){let f=this.counters;f.fill(0),this.decodeRowResult="";let p=An.findAsteriskPattern(l,f),y=l.getNextSet(p[1]),v=l.getSize(),I,C;do{An.recordPattern(l,y,f);let ue=An.toNarrowWidePattern(f);if(ue<0)throw new se;I=An.patternToChar(ue),this.decodeRowResult+=I,C=y;for(let fe of f)y+=fe;y=l.getNextSet(y)}while(I!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let ue of f)O+=ue;let U=y-C-O;if(y!==v&&U*2<O)throw new se;if(this.usingCheckDigit){let ue=this.decodeRowResult.length-1,fe=0;for(let Ee=0;Ee<ue;Ee++)fe+=An.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ee));if(this.decodeRowResult.charAt(ue)!==An.ALPHABET_STRING.charAt(fe%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,ue)}if(this.decodeRowResult.length===0)throw new se;let q;this.extendedMode?q=An.decodeExtended(this.decodeRowResult):q=this.decodeRowResult;let J=(p[1]+p[0])/2,le=C+O/2;return new Le(q,null,0,[new Xe(J,s),new Xe(le,s)],Re.CODE_39,new Date().getTime())}static findAsteriskPattern(s,l){let u=s.getSize(),f=s.getNextSet(0),p=0,y=f,v=!1,I=l.length;for(let C=f;C<u;C++)if(s.get(C)!==v)l[p]++;else{if(p===I-1){if(this.toNarrowWidePattern(l)===An.ASTERISK_ENCODING&&s.isRange(Math.max(0,y-Math.floor((C-y)/2)),y,!1))return[y,C];y+=l[0]+l[1],l.copyWithin(0,2,2+p-1),l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,v=!v}throw new se}static toNarrowWidePattern(s){let l=s.length,u=0,f;do{let p=2147483647;for(let I of s)I<p&&I>u&&(p=I);u=p,f=0;let y=0,v=0;for(let I=0;I<l;I++){let C=s[I];C>u&&(v|=1<<l-1-I,f++,y+=C)}if(f===3){for(let I=0;I<l&&f>0;I++){let C=s[I];if(C>u&&(f--,C*2>=y))return-1}return v}}while(f>3);return-1}static patternToChar(s){for(let l=0;l<An.CHARACTER_ENCODINGS.length;l++)if(An.CHARACTER_ENCODINGS[l]===s)return An.ALPHABET_STRING.charAt(l);if(s===An.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(s){let l=s.length,u="";for(let f=0;f<l;f++){let p=s.charAt(f);if(p==="+"||p==="$"||p==="%"||p==="/"){let y=s.charAt(f+1),v="\0";switch(p){case"+":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)+32);else throw new F;break;case"$":if(y>="A"&&y<="Z")v=String.fromCharCode(y.charCodeAt(0)-64);else throw new F;break;case"%":if(y>="A"&&y<="E")v=String.fromCharCode(y.charCodeAt(0)-38);else if(y>="F"&&y<="J")v=String.fromCharCode(y.charCodeAt(0)-11);else if(y>="K"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)+16);else if(y>="P"&&y<="T")v=String.fromCharCode(y.charCodeAt(0)+43);else if(y==="U")v="\0";else if(y==="V")v="@";else if(y==="W")v="`";else if(y==="X"||y==="Y"||y==="Z")v="";else throw new F;break;case"/":if(y>="A"&&y<="O")v=String.fromCharCode(y.charCodeAt(0)-32);else if(y==="Z")v=":";else throw new F;break}u+=v,f++}else u+=p}return u}}An.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",An.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],An.ASTERISK_ENCODING=148;class Ht extends In{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,l,u){let f=this.decodeStart(l),p=this.decodeEnd(l),y=new K;Ht.decodeMiddle(l,f[1],p[0],y);let v=y.toString(),I=null;u!=null&&(I=u.get(ie.ALLOWED_LENGTHS)),I==null&&(I=Ht.DEFAULT_ALLOWED_LENGTHS);let C=v.length,O=!1,U=0;for(let le of I){if(C===le){O=!0;break}le>U&&(U=le)}if(!O&&C>U&&(O=!0),!O)throw new F;const q=[new Xe(f[1],s),new Xe(p[0],s)];return new Le(v,null,0,q,Re.ITF,new Date().getTime())}static decodeMiddle(s,l,u,f){let p=new Int32Array(10),y=new Int32Array(5),v=new Int32Array(5);for(p.fill(0),y.fill(0),v.fill(0);l<u;){In.recordPattern(s,l,p);for(let C=0;C<5;C++){let O=2*C;y[C]=p[O],v[C]=p[O+1]}let I=Ht.decodeDigit(y);f.append(I.toString()),I=this.decodeDigit(v),f.append(I.toString()),p.forEach(function(C){l+=C})}}decodeStart(s){let l=Ht.skipWhiteSpace(s),u=Ht.findGuardPattern(s,l,Ht.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(s,u[0]),u}validateQuietZone(s,l){let u=this.narrowLineWidth*10;u=u<l?u:l;for(let f=l-1;u>0&&f>=0&&!s.get(f);f--)u--;if(u!==0)throw new se}static skipWhiteSpace(s){const l=s.getSize(),u=s.getNextSet(0);if(u===l)throw new se;return u}decodeEnd(s){s.reverse();try{let l=Ht.skipWhiteSpace(s),u;try{u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[0])}catch(p){p instanceof se&&(u=Ht.findGuardPattern(s,l,Ht.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,u[0]);let f=u[0];return u[0]=s.getSize()-u[1],u[1]=s.getSize()-f,u}finally{s.reverse()}}static findGuardPattern(s,l,u){let f=u.length,p=new Int32Array(f),y=s.getSize(),v=!1,I=0,C=l;p.fill(0);for(let O=l;O<y;O++)if(s.get(O)!==v)p[I]++;else{if(I===f-1){if(In.patternMatchVariance(p,u,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return[C,O];C+=p[0]+p[1],D.arraycopy(p,2,p,0,I-1),p[I-1]=0,p[I]=0,I--}else I++;p[I]=1,v=!v}throw new se}static decodeDigit(s){let l=Ht.MAX_AVG_VARIANCE,u=-1,f=Ht.PATTERNS.length;for(let p=0;p<f;p++){let y=Ht.PATTERNS[p],v=In.patternMatchVariance(s,y,Ht.MAX_INDIVIDUAL_VARIANCE);v<l?(l=v,u=p):v===l&&(u=-1)}if(u>=0)return u%10;throw new se}}Ht.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ht.MAX_AVG_VARIANCE=.38,Ht.MAX_INDIVIDUAL_VARIANCE=.5,Ht.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ht.START_PATTERN=Int32Array.from([1,1,1,1]),Ht.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class pn extends In{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let l=!1,u,f=0,p=Int32Array.from([0,0,0]);for(;!l;){p=Int32Array.from([0,0,0]),u=pn.findGuardPattern(s,f,!1,this.START_END_PATTERN,p);let y=u[0];f=u[1];let v=y-(f-y);v>=0&&(l=s.isRange(v,y,!1))}return u}static checkChecksum(s){return pn.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return pn.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}u*=3;for(let f=l-2;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}return(1e3-u)%10}static decodeEnd(s,l){return pn.findGuardPattern(s,l,!1,pn.START_END_PATTERN,new Int32Array(pn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,l,u,f){return this.findGuardPattern(s,l,u,f,new Int32Array(f.length))}static findGuardPattern(s,l,u,f,p){let y=s.getSize();l=u?s.getNextUnset(l):s.getNextSet(l);let v=0,I=l,C=f.length,O=u;for(let U=l;U<y;U++)if(s.get(U)!==O)p[v]++;else{if(v===C-1){if(In.patternMatchVariance(p,f,pn.MAX_INDIVIDUAL_VARIANCE)<pn.MAX_AVG_VARIANCE)return Int32Array.from([I,U]);I+=p[0]+p[1];let q=p.slice(2,p.length-1);for(let J=0;J<v-1;J++)p[J]=q[J];p[v-1]=0,p[v]=0,v--}else v++;p[v]=1,O=!O}throw new se}static decodeDigit(s,l,u,f){this.recordPattern(s,u,l);let p=this.MAX_AVG_VARIANCE,y=-1,v=f.length;for(let I=0;I<v;I++){let C=f[I],O=In.patternMatchVariance(l,C,pn.MAX_INDIVIDUAL_VARIANCE);O<p&&(p=O,y=I)}if(y>=0)return y;throw new se}}pn.MAX_AVG_VARIANCE=.48,pn.MAX_INDIVIDUAL_VARIANCE=.7,pn.START_END_PATTERN=Int32Array.from([1,1,1]),pn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),pn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ai{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(l,u,f),y=f.toString(),v=ai.parseExtensionString(y),I=[new Xe((u[0]+u[1])/2,s),new Xe(p,s)],C=new Le(y,null,0,I,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let C=0;C<5&&y<p;C++){let O=pn.decodeDigit(s,f,y,pn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<4-C),C!==4&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==5)throw new se;let I=this.determineCheckDigit(v);if(ai.extensionChecksum(u.toString())!==I)throw new se;return y}static extensionChecksum(s){let l=s.length,u=0;for(let f=l-2;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;u*=3;for(let f=l-1;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(s){for(let l=0;l<10;l++)if(s===this.CHECK_DIGIT_ENCODINGS[l])return l;throw new se}static parseExtensionString(s){if(s.length!==5)return null;let l=ai.parseExtension5String(s);return l==null?null:new Map([[Ge.SUGGESTED_PRICE,l]])}static parseExtension5String(s){let l;switch(s.charAt(0)){case"0":l="£";break;case"5":l="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}l="";break;default:l="";break}let u=parseInt(s.substring(1)),f=(u/100).toString(),p=u%100,y=p<10?"0"+p:p.toString();return l+f+"."+y}}class jr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,l,u){let f=this.decodeRowStringBuffer,p=this.decodeMiddle(l,u,f),y=f.toString(),v=jr.parseExtensionString(y),I=[new Xe((u[0]+u[1])/2,s),new Xe(p,s)],C=new Le(y,null,0,I,Re.UPC_EAN_EXTENSION,new Date().getTime());return v!=null&&C.putAllMetadata(v),C}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let I=0;I<2&&y<p;I++){let C=pn.decodeDigit(s,f,y,pn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+C%10);for(let O of f)y+=O;C>=10&&(v|=1<<1-I),I!==1&&(y=s.getNextSet(y),y=s.getNextUnset(y))}if(u.length!==2)throw new se;if(parseInt(u.toString())%4!==v)throw new se;return y}static parseExtensionString(s){return s.length!==2?null:new Map([[Ge.ISSUE_NUMBER,parseInt(s)]])}}class ro{static decodeRow(s,l,u){let f=pn.findGuardPattern(l,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ai().decodeRow(s,l,f)}catch{return new jr().decodeRow(s,l,f)}}}ro.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ct extends pn{constructor(){super(),this.decodeRowStringBuffer="",Ct.L_AND_G_PATTERNS=Ct.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let l=Ct.L_PATTERNS[s-10],u=new Int32Array(l.length);for(let f=0;f<l.length;f++)u[f]=l[l.length-f-1];Ct.L_AND_G_PATTERNS[s]=u}}decodeRow(s,l,u){let f=Ct.findStartGuardPattern(l),p=u==null?null:u.get(ie.NEED_RESULT_POINT_CALLBACK);if(p!=null){const Oe=new Xe((f[0]+f[1])/2,s);p.foundPossibleResultPoint(Oe)}let y=this.decodeMiddle(l,f,this.decodeRowStringBuffer),v=y.rowOffset,I=y.resultString;if(p!=null){const Oe=new Xe(v,s);p.foundPossibleResultPoint(Oe)}let C=this.decodeEnd(l,v);if(p!=null){const Oe=new Xe((C[0]+C[1])/2,s);p.foundPossibleResultPoint(Oe)}let O=C[1],U=O+(O-C[0]);if(U>=l.getSize()||!l.isRange(O,U,!1))throw new se;let q=I.toString();if(q.length<8)throw new F;if(!Ct.checkChecksum(q))throw new R;let J=(f[1]+f[0])/2,le=(C[1]+C[0])/2,ue=this.getBarcodeFormat(),fe=[new Xe(J,s),new Xe(le,s)],Ee=new Le(q,null,0,fe,ue,new Date().getTime()),Fe=0;try{let Oe=ro.decodeRow(s,l,C[1]);Ee.putMetadata(Ge.UPC_EAN_EXTENSION,Oe.getText()),Ee.putAllMetadata(Oe.getResultMetadata()),Ee.addResultPoints(Oe.getResultPoints()),Fe=Oe.getText().length}catch{}let je=u==null?null:u.get(ie.ALLOWED_EAN_EXTENSIONS);if(je!=null){let Oe=!1;for(let Mt in je)if(Fe.toString()===Mt){Oe=!0;break}if(!Oe)throw new se}return Ee}decodeEnd(s,l){return Ct.findGuardPattern(s,l,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return Ct.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let l=s.length;if(l===0)return!1;let u=parseInt(s.charAt(l-1),10);return Ct.getStandardUPCEANChecksum(s.substring(0,l-1))===u}static getStandardUPCEANChecksum(s){let l=s.length,u=0;for(let f=l-1;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}u*=3;for(let f=l-2;f>=0;f-=2){let p=s.charAt(f).charCodeAt(0)-48;if(p<0||p>9)throw new F;u+=p}return(1e3-u)%10}}class br extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1],v=0;for(let C=0;C<6&&y<p;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}u=br.determineFirstDigit(u,v),y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&y<p;C++){let O=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+O);for(let U of f)y+=U}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_13}static determineFirstDigit(s,l){for(let u=0;u<10;u++)if(l===this.FIRST_DIGIT_ENCODINGS[u])return s=String.fromCharCode(48+u)+s,s;throw new se}}br.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ls extends Ct{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y=l[1];for(let I=0;I<4&&y<p;I++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}y=Ct.findGuardPattern(s,y,!0,Ct.MIDDLE_PATTERN,new Int32Array(Ct.MIDDLE_PATTERN.length).fill(0))[1];for(let I=0;I<4&&y<p;I++){let C=Ct.decodeDigit(s,f,y,Ct.L_PATTERNS);u+=String.fromCharCode(48+C);for(let O of f)y+=O}return{rowOffset:y,resultString:u}}getBarcodeFormat(){return Re.EAN_8}}class mt extends Ct{constructor(){super(...arguments),this.ean13Reader=new br}getBarcodeFormat(){return Re.UPC_A}decode(s,l){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,l,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,l,u))}decodeMiddle(s,l,u){return this.ean13Reader.decodeMiddle(s,l,u)}maybeReturnResult(s){let l=s.getText();if(l.charAt(0)==="0"){let u=new Le(l.substring(1),null,null,s.getResultPoints(),Re.UPC_A);return s.getResultMetadata()!=null&&u.putAllMetadata(s.getResultMetadata()),u}else throw new se}reset(){this.ean13Reader.reset()}}class Gt extends Ct{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,l,u){const f=this.decodeMiddleCounters.map(C=>C);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const p=s.getSize();let y=l[1],v=0;for(let C=0;C<6&&y<p;C++){const O=Gt.decodeDigit(s,f,y,Gt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let U of f)y+=U;O>=10&&(v|=1<<5-C)}let I=Gt.determineNumSysAndCheckDigit(u,v);return{rowOffset:y,resultString:I}}decodeEnd(s,l){return Gt.findGuardPatternWithoutCounters(s,l,!0,Gt.MIDDLE_END_PATTERN)}checkChecksum(s){return Ct.checkChecksum(Gt.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,l){for(let u=0;u<=1;u++)for(let f=0;f<10;f++)if(l===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][f]){let p=String.fromCharCode(48+u),y=String.fromCharCode(48+f);return p+s+y}throw se.getNotFoundInstance()}getBarcodeFormat(){return Re.UPC_E}static convertUPCEtoUPCA(s){const l=s.slice(1,7).split("").map(p=>p.charCodeAt(0)),u=new K;u.append(s.charAt(0));let f=l[5];switch(f){case 0:case 1:case 2:u.appendChars(l,0,2),u.append(f),u.append("0000"),u.appendChars(l,2,3);break;case 3:u.appendChars(l,0,3),u.append("00000"),u.appendChars(l,3,2);break;case 4:u.appendChars(l,0,4),u.append("00000"),u.append(l[4]);break;default:u.appendChars(l,0,5),u.append("0000"),u.append(f);break}return s.length>=8&&u.append(s.charAt(7)),u.toString()}}Gt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Gt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Tn extends In{constructor(s){super();let l=s==null?null:s.get(ie.POSSIBLE_FORMATS),u=[];r(l)?(u.push(new br),u.push(new mt),u.push(new Ls),u.push(new Gt)):(l.indexOf(Re.EAN_13)>-1&&u.push(new br),l.indexOf(Re.UPC_A)>-1&&u.push(new mt),l.indexOf(Re.EAN_8)>-1&&u.push(new Ls),l.indexOf(Re.UPC_E)>-1&&u.push(new Gt)),this.readers=u}decodeRow(s,l,u){for(let f of this.readers)try{const p=f.decodeRow(s,l,u),y=p.getBarcodeFormat()===Re.EAN_13&&p.getText().charAt(0)==="0",v=u==null?null:u.get(ie.POSSIBLE_FORMATS),I=v==null||v.includes(Re.UPC_A);if(y&&I){const C=p.getRawBytes(),O=new Le(p.getText().substring(1),C,C?C.length:null,p.getResultPoints(),Re.UPC_A);return O.putAllMetadata(p.getResultMetadata()),O}return p}catch{}throw new se}reset(){for(let s of this.readers)s.reset()}}class $t extends In{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,l){for(let u=0;u<l.length;u++)if(In.patternMatchVariance(s,l[u],$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE)return u;throw new se}static count(s){return pt.sum(new Int32Array(s))}static increment(s,l){let u=0,f=l[0];for(let p=1;p<s.length;p++)l[p]>f&&(f=l[p],u=p);s[u]++}static decrement(s,l){let u=0,f=l[0];for(let p=1;p<s.length;p++)l[p]<f&&(f=l[p],u=p);s[u]--}static isFinderPattern(s){let l=s[0]+s[1],u=l+s[2]+s[3],f=l/u;if(f>=$t.MIN_FINDER_PATTERN_RATIO&&f<=$t.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;for(let v of s)v>y&&(y=v),v<p&&(p=v);return y<10*p}return!1}}$t.MAX_AVG_VARIANCE=.2,$t.MAX_INDIVIDUAL_VARIANCE=.45,$t.MIN_FINDER_PATTERN_RATIO=9.5/12,$t.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(s,l){this.value=s,this.checksumPortion=l}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Ir))return!1;const l=s;return this.value===l.value&&this.checksumPortion===l.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Cn{constructor(s,l,u,f,p){this.value=s,this.startEnd=l,this.value=s,this.startEnd=l,this.resultPoints=new Array,this.resultPoints.push(new Xe(u,p)),this.resultPoints.push(new Xe(f,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Cn))return!1;const l=s;return this.value===l.value}hashCode(){return this.value}}class Rt{constructor(){}static getRSSvalue(s,l,u){let f=0;for(let I of s)f+=I;let p=0,y=0,v=s.length;for(let I=0;I<v-1;I++){let C;for(C=1,y|=1<<I;C<s[I];C++,y&=~(1<<I)){let O=Rt.combins(f-C-1,v-I-2);if(u&&y===0&&f-C-(v-I-1)>=v-I-1&&(O-=Rt.combins(f-C-(v-I),v-I-2)),v-I-1>1){let U=0;for(let q=f-C-(v-I-2);q>l;q--)U+=Rt.combins(f-C-q-1,v-I-3);O-=U*(v-1-I)}else f-C>l&&O--;p+=O}f-=C}return p}static combins(s,l){let u,f;s-l>l?(f=l,u=s-l):(f=s-l,u=l);let p=1,y=1;for(let v=s;v>u;v--)p*=v,y<=f&&(p/=y,y++);for(;y<=f;)p/=y,y++;return p}}class gs{static buildBitArray(s){let l=s.length*2-1;s[s.length-1].getRightChar()==null&&(l-=1);let u=12*l,f=new Y(u),p=0,v=s[0].getRightChar().getValue();for(let I=11;I>=0;--I)(v&1<<I)!=0&&f.set(p),p++;for(let I=1;I<s.length;++I){let C=s[I],O=C.getLeftChar().getValue();for(let U=11;U>=0;--U)(O&1<<U)!=0&&f.set(p),p++;if(C.getRightChar()!=null){let U=C.getRightChar().getValue();for(let q=11;q>=0;--q)(U&1<<q)!=0&&f.set(p),p++}}return f}}class cn{constructor(s,l){l?this.decodedInformation=null:(this.finished=s,this.decodedInformation=l)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ir{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Un extends ir{constructor(s,l){super(s),this.value=l}getValue(){return this.value}isFNC1(){return this.value===Un.FNC1}}Un.FNC1="$";class dr extends ir{constructor(s,l,u){super(s),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=l}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class zn extends ir{constructor(s,l,u){if(super(s),l<0||l>10||u<0||u>10)throw new F;this.firstDigit=l,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===zn.FNC1}isSecondDigitFNC1(){return this.secondDigit===zn.FNC1}isAnyFNC1(){return this.firstDigit===zn.FNC1||this.secondDigit===zn.FNC1}}zn.FNC1=10;class Ye{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new se;let l=s.substring(0,2);for(let p of Ye.TWO_DIGIT_DATA_LENGTH)if(p[0]===l)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(2,p[2],s):Ye.processFixedAI(2,p[1],s);if(s.length<3)throw new se;let u=s.substring(0,3);for(let p of Ye.THREE_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(3,p[2],s):Ye.processFixedAI(3,p[1],s);for(let p of Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,p[2],s):Ye.processFixedAI(4,p[1],s);if(s.length<4)throw new se;let f=s.substring(0,4);for(let p of Ye.FOUR_DIGIT_DATA_LENGTH)if(p[0]===f)return p[1]===Ye.VARIABLE_LENGTH?Ye.processVariableAI(4,p[2],s):Ye.processFixedAI(4,p[1],s);throw new se}static processFixedAI(s,l,u){if(u.length<s)throw new se;let f=u.substring(0,s);if(u.length<s+l)throw new se;let p=u.substring(s,s+l),y=u.substring(s+l),v="("+f+")"+p,I=Ye.parseFieldsInGeneralPurpose(y);return I==null?v:v+I}static processVariableAI(s,l,u){let f=u.substring(0,s),p;u.length<s+l?p=u.length:p=s+l;let y=u.substring(s,p),v=u.substring(p),I="("+f+")"+y,C=Ye.parseFieldsInGeneralPurpose(v);return C==null?I:I+C}}Ye.VARIABLE_LENGTH=[],Ye.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ye.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ye.VARIABLE_LENGTH,20],["22",Ye.VARIABLE_LENGTH,29],["30",Ye.VARIABLE_LENGTH,8],["37",Ye.VARIABLE_LENGTH,8],["90",Ye.VARIABLE_LENGTH,30],["91",Ye.VARIABLE_LENGTH,30],["92",Ye.VARIABLE_LENGTH,30],["93",Ye.VARIABLE_LENGTH,30],["94",Ye.VARIABLE_LENGTH,30],["95",Ye.VARIABLE_LENGTH,30],["96",Ye.VARIABLE_LENGTH,30],["97",Ye.VARIABLE_LENGTH,3],["98",Ye.VARIABLE_LENGTH,30],["99",Ye.VARIABLE_LENGTH,30]],Ye.THREE_DIGIT_DATA_LENGTH=[["240",Ye.VARIABLE_LENGTH,30],["241",Ye.VARIABLE_LENGTH,30],["242",Ye.VARIABLE_LENGTH,6],["250",Ye.VARIABLE_LENGTH,30],["251",Ye.VARIABLE_LENGTH,30],["253",Ye.VARIABLE_LENGTH,17],["254",Ye.VARIABLE_LENGTH,20],["400",Ye.VARIABLE_LENGTH,30],["401",Ye.VARIABLE_LENGTH,30],["402",17],["403",Ye.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ye.VARIABLE_LENGTH,20],["421",Ye.VARIABLE_LENGTH,15],["422",3],["423",Ye.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ye.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ye.VARIABLE_LENGTH,15],["391",Ye.VARIABLE_LENGTH,18],["392",Ye.VARIABLE_LENGTH,15],["393",Ye.VARIABLE_LENGTH,18],["703",Ye.VARIABLE_LENGTH,30]],Ye.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ye.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ye.VARIABLE_LENGTH,20],["8003",Ye.VARIABLE_LENGTH,30],["8004",Ye.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ye.VARIABLE_LENGTH,30],["8008",Ye.VARIABLE_LENGTH,12],["8018",18],["8020",Ye.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ye.VARIABLE_LENGTH,70],["8200",Ye.VARIABLE_LENGTH,70]];class Ao{constructor(s){this.buffer=new K,this.information=s}decodeAllCodes(s,l){let u=l,f=null;do{let p=this.decodeGeneralPurposeField(u,f),y=Ye.parseFieldsInGeneralPurpose(p.getNewString());if(y!=null&&s.append(y),p.isRemaining()?f=""+p.getRemainingValue():f=null,u===p.getNewPosition())break;u=p.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let l=s;l<s+3;++l)if(this.information.get(l))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(s,4);return p===0?new zn(this.information.getSize(),zn.FNC1,zn.FNC1):new zn(this.information.getSize(),p-1,zn.FNC1)}let l=this.extractNumericValueFromBitArray(s,7),u=(l-8)/11,f=(l-8)%11;return new zn(s+7,u,f)}extractNumericValueFromBitArray(s,l){return Ao.extractNumericValueFromBitArray(this.information,s,l)}static extractNumericValueFromBitArray(s,l,u){let f=0;for(let p=0;p<u;++p)s.get(l+p)&&(f|=1<<u-p-1);return f}decodeGeneralPurposeField(s,l){this.buffer.setLengthToZero(),l!=null&&this.buffer.append(l),this.current.setPosition(s);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new dr(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new dr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,l;do{let u=this.current.getPosition();if(this.current.isAlpha()?(l=this.parseAlphaBlock(),s=l.isFinished()):this.current.isIsoIec646()?(l=this.parseIsoIec646Block(),s=l.isFinished()):(l=this.parseNumericBlock(),s=l.isFinished()),!(u!==this.current.getPosition())&&!s)break}while(!s);return l.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let l;return s.isSecondDigitFNC1()?l=new dr(this.current.getPosition(),this.buffer.toString()):l=new dr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new cn(!0,l)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new cn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new cn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let l=new dr(this.current.getPosition(),this.buffer.toString());return new cn(!0,l)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new cn(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new Un(s+5,Un.FNC1);if(l>=5&&l<15)return new Un(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<90)return new Un(s+7,""+(u+1));if(u>=90&&u<116)return new Un(s+7,""+(u+7));let f=this.extractNumericValueFromBitArray(s,8),p;switch(f){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new F}return new Un(s+8,p)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,5);if(l>=5&&l<16)return!0;if(s+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,6);return u>=16&&u<63}decodeAlphanumeric(s){let l=this.extractNumericValueFromBitArray(s,5);if(l===15)return new Un(s+5,Un.FNC1);if(l>=5&&l<15)return new Un(s+5,"0"+(l-5));let u=this.extractNumericValueFromBitArray(s,6);if(u>=32&&u<58)return new Un(s+6,""+(u+33));let f;switch(u){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new Bn("Decoding invalid alphanumeric value: "+u)}return new Un(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<5&&l+s<this.information.getSize();++l)if(l===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+l))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let l=s;l<s+3;++l)if(this.information.get(l))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let l=0;l<4&&l+s<this.information.getSize();++l)if(this.information.get(s+l))return!1;return!0}}class To{constructor(s){this.information=s,this.generalDecoder=new Ao(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ur extends To{constructor(s){super(s)}encodeCompressedGtin(s,l){s.append("(01)");let u=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,l,u)}encodeCompressedGtinWithoutAI(s,l,u){for(let f=0;f<4;++f){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(l+10*f,10);p/100===0&&s.append("0"),p/10===0&&s.append("0"),s.append(p)}Ur.appendCheckDigit(s,u)}static appendCheckDigit(s,l){let u=0;for(let f=0;f<13;f++){let p=s.charAt(f+l).charCodeAt(0)-48;u+=(f&1)===0?3*p:p}u=10-u%10,u===10&&(u=0),s.append(u)}}Ur.GTIN_SIZE=40;class Zr extends Ur{constructor(s){super(s)}parseInformation(){let s=new K;s.append("(01)");let l=s.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(Zr.HEADER_SIZE,4);return s.append(u),this.encodeCompressedGtinWithoutAI(s,Zr.HEADER_SIZE+4,l),this.getGeneralDecoder().decodeAllCodes(s,Zr.HEADER_SIZE+44)}}Zr.HEADER_SIZE=4;class Vs extends To{constructor(s){super(s)}parseInformation(){let s=new K;return this.getGeneralDecoder().decodeAllCodes(s,Vs.HEADER_SIZE)}}Vs.HEADER_SIZE=5;class _i extends Ur{constructor(s){super(s)}encodeCompressedWeight(s,l,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(l,u);this.addWeightCode(s,f);let p=this.checkWeight(f),y=1e5;for(let v=0;v<5;++v)p/y===0&&s.append("0"),y/=10;s.append(p)}}class Bi extends _i{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Bi.HEADER_SIZE+_i.GTIN_SIZE+Bi.WEIGHT_SIZE)throw new se;let s=new K;return this.encodeCompressedGtin(s,Bi.HEADER_SIZE),this.encodeCompressedWeight(s,Bi.HEADER_SIZE+_i.GTIN_SIZE,Bi.WEIGHT_SIZE),s.toString()}}Bi.HEADER_SIZE=5,Bi.WEIGHT_SIZE=15;class ic extends Bi{constructor(s){super(s)}addWeightCode(s,l){s.append("(3103)")}checkWeight(s){return s}}class qa extends Bi{constructor(s){super(s)}addWeightCode(s,l){l<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class li extends Ur{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<li.HEADER_SIZE+Ur.GTIN_SIZE)throw new se;let s=new K;this.encodeCompressedGtin(s,li.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(li.HEADER_SIZE+Ur.GTIN_SIZE,li.LAST_DIGIT_SIZE);s.append("(392"),s.append(l),s.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(li.HEADER_SIZE+Ur.GTIN_SIZE+li.LAST_DIGIT_SIZE,null);return s.append(u.getNewString()),s.toString()}}li.HEADER_SIZE=8,li.LAST_DIGIT_SIZE=2;class Ar extends Ur{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Ar.HEADER_SIZE+Ur.GTIN_SIZE)throw new se;let s=new K;this.encodeCompressedGtin(s,Ar.HEADER_SIZE);let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Ur.GTIN_SIZE,Ar.LAST_DIGIT_SIZE);s.append("(393"),s.append(l),s.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(Ar.HEADER_SIZE+Ur.GTIN_SIZE+Ar.LAST_DIGIT_SIZE,Ar.FIRST_THREE_DIGITS_SIZE);u/100==0&&s.append("0"),u/10==0&&s.append("0"),s.append(u);let f=this.getGeneralDecoder().decodeGeneralPurposeField(Ar.HEADER_SIZE+Ur.GTIN_SIZE+Ar.LAST_DIGIT_SIZE+Ar.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}Ar.HEADER_SIZE=8,Ar.LAST_DIGIT_SIZE=2,Ar.FIRST_THREE_DIGITS_SIZE=10;class yn extends _i{constructor(s,l,u){super(s),this.dateCode=u,this.firstAIdigits=l}parseInformation(){if(this.getInformation().getSize()!=yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE+yn.DATE_SIZE)throw new se;let s=new K;return this.encodeCompressedGtin(s,yn.HEADER_SIZE),this.encodeCompressedWeight(s,yn.HEADER_SIZE+yn.GTIN_SIZE,yn.WEIGHT_SIZE),this.encodeCompressedDate(s,yn.HEADER_SIZE+yn.GTIN_SIZE+yn.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(l,yn.DATE_SIZE);if(u==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=u%32;u/=32;let p=u%12+1;u/=12;let y=u;y/10==0&&s.append("0"),s.append(y),p/10==0&&s.append("0"),s.append(p),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,l){s.append("("),s.append(this.firstAIdigits),s.append(l/1e5),s.append(")")}checkWeight(s){return s%1e5}}yn.HEADER_SIZE=8,yn.WEIGHT_SIZE=20,yn.DATE_SIZE=16;function xu(j){try{if(j.get(1))return new Zr(j);if(!j.get(2))return new Vs(j);switch(Ao.extractNumericValueFromBitArray(j,1,4)){case 4:return new ic(j);case 5:return new qa(j)}switch(Ao.extractNumericValueFromBitArray(j,1,5)){case 12:return new li(j);case 13:return new Ar(j)}switch(Ao.extractNumericValueFromBitArray(j,1,7)){case 56:return new yn(j,"310","11");case 57:return new yn(j,"320","11");case 58:return new yn(j,"310","13");case 59:return new yn(j,"320","13");case 60:return new yn(j,"310","15");case 61:return new yn(j,"320","15");case 62:return new yn(j,"310","17");case 63:return new yn(j,"320","17")}}catch(s){throw console.log(s),new Bn("unknown decoder: "+j)}}class Zt{constructor(s,l,u,f){this.leftchar=s,this.rightchar=l,this.finderpattern=u,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,l){return s instanceof Zt?Zt.equalsOrNull(s.leftchar,l.leftchar)&&Zt.equalsOrNull(s.rightchar,l.rightchar)&&Zt.equalsOrNull(s.finderpattern,l.finderpattern):!1}static equalsOrNull(s,l){return s===null?l===null:Zt.equals(s,l)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ka{constructor(s,l,u){this.pairs=s,this.rowNumber=l,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,l){return s instanceof Ka?this.checkEqualitity(s,l)&&s.wasReversed===l.wasReversed:!1}checkEqualitity(s,l){if(!s||!l)return;let u;return s.forEach((f,p)=>{l.forEach(y=>{f.getLeftChar().getValue()===y.getLeftChar().getValue()&&f.getRightChar().getValue()===y.getRightChar().getValue()&&f.getFinderPatter().getValue()===y.getFinderPatter().getValue()&&(u=!0)})}),u}}class ke extends $t{constructor(s){super(...arguments),this.pairs=new Array(ke.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,l,u){this.pairs.length=0,this.startFromEven=!1;try{return ke.constructResult(this.decodeRow2pairs(s,l))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,ke.constructResult(this.decodeRow2pairs(s,l))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,l){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(l,this.pairs,s))}catch(p){if(p instanceof se){if(!this.pairs.length)throw new se;u=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new se}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let l=null;try{l=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return s&&(this.rows=this.rows.reverse()),l}checkRows(s,l){for(let u=l;u<this.rows.length;u++){let f=this.rows[u];this.pairs.length=0;for(let y of s)this.pairs.push(y.getPairs());if(this.pairs.push(f.getPairs()),!ke.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(s);p.push(f);try{return this.checkRows(p,u+1)}catch(y){this.verbose&&console.log(y)}}throw new se}static isValidSequence(s){for(let l of ke.FINDER_PATTERN_SEQUENCES){if(s.length>l.length)continue;let u=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=l[f]){u=!1;break}if(u)return!0}return!1}storeRow(s,l){let u=0,f=!1,p=!1;for(;u<this.rows.length;){let y=this.rows[u];if(y.getRowNumber()>s){p=y.isEquivalent(this.pairs);break}f=y.isEquivalent(this.pairs),u++}p||f||ke.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Ka(this.pairs,s,l)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,l){for(let u of l)if(u.getPairs().length!==s.length){for(let f of u.getPairs())for(let p of s)if(Zt.equals(f,p))break}}static isPartialRow(s,l){for(let u of l){let f=!0;for(let p of s){let y=!1;for(let v of u.getPairs())if(p.equals(v)){y=!0;break}if(!y){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let l=gs.buildBitArray(s),f=xu(l).parseInformation(),p=s[0].getFinderPattern().getResultPoints(),y=s[s.length-1].getFinderPattern().getResultPoints(),v=[p[0],p[1],y[0],y[1]];return new Le(f,null,null,v,Re.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),l=s.getLeftChar(),u=s.getRightChar();if(u==null)return!1;let f=u.getChecksumPortion(),p=2;for(let v=1;v<this.pairs.size();++v){let I=this.pairs.get(v);f+=I.getLeftChar().getChecksumPortion(),p++;let C=I.getRightChar();C!=null&&(f+=C.getChecksumPortion(),p++)}return f%=211,211*(p-4)+f==l.getValue()}static getNextSecondBar(s,l){let u;return s.get(l)?(u=s.getNextUnset(l),u=s.getNextSet(u)):(u=s.getNextSet(l),u=s.getNextUnset(u)),u}retrieveNextPair(s,l,u){let f=l.length%2==0;this.startFromEven&&(f=!f);let p,y=!0,v=-1;do this.findNextPair(s,l,v),p=this.parseFoundFinderPattern(s,u,f),p==null?v=ke.getNextSecondBar(s,this.startEnd[0]):y=!1;while(y);let I=this.decodeDataCharacter(s,p,f,!0);if(!this.isEmptyPair(l)&&l[l.length-1].mustBeLast())throw new se;let C;try{C=this.decodeDataCharacter(s,p,f,!1)}catch(O){C=null,this.verbose&&console.log(O)}return new Zt(I,C,p,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,l,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let p=s.getSize(),y;u>=0?y=u:this.isEmptyPair(l)?y=0:y=l[l.length-1].getFinderPattern().getStartEnd()[1];let v=l.length%2!=0;this.startFromEven&&(v=!v);let I=!1;for(;y<p&&(I=!s.get(y),!!I);)y++;let C=0,O=y;for(let U=y;U<p;U++)if(s.get(U)!=I)f[C]++;else{if(C==3){if(v&&ke.reverseCounters(f),ke.isFinderPattern(f)){this.startEnd[0]=O,this.startEnd[1]=U;return}v&&ke.reverseCounters(f),O+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,C--}else C++;f[C]=1,I=!I}throw new se}static reverseCounters(s){let l=s.length;for(let u=0;u<l/2;++u){let f=s[u];s[u]=s[l-u-1],s[l-u-1]=f}}parseFoundFinderPattern(s,l,u){let f,p,y;if(u){let C=this.startEnd[0]-1;for(;C>=0&&!s.get(C);)C--;C++,f=this.startEnd[0]-C,p=C,y=this.startEnd[1]}else p=this.startEnd[0],y=s.getNextUnset(this.startEnd[1]+1),f=y-this.startEnd[1];let v=this.getDecodeFinderCounters();D.arraycopy(v,0,v,1,v.length-1),v[0]=f;let I;try{I=this.parseFinderValue(v,ke.FINDER_PATTERNS)}catch{return null}return new Cn(I,[p,y],p,y,l)}decodeDataCharacter(s,l,u,f){let p=this.getDataCharacterCounters();for(let hn=0;hn<p.length;hn++)p[hn]=0;if(f)ke.recordPatternInReverse(s,l.getStartEnd()[0],p);else{ke.recordPattern(s,l.getStartEnd()[1],p);for(let hn=0,sr=p.length-1;hn<sr;hn++,sr--){let hi=p[hn];p[hn]=p[sr],p[sr]=hi}}let y=17,v=pt.sum(new Int32Array(p))/y,I=(l.getStartEnd()[1]-l.getStartEnd()[0])/15;if(Math.abs(v-I)/I>.3)throw new se;let C=this.getOddCounts(),O=this.getEvenCounts(),U=this.getOddRoundingErrors(),q=this.getEvenRoundingErrors();for(let hn=0;hn<p.length;hn++){let sr=1*p[hn]/v,hi=sr+.5;if(hi<1){if(sr<.3)throw new se;hi=1}else if(hi>8){if(sr>8.7)throw new se;hi=8}let pa=hn/2;(hn&1)==0?(C[pa]=hi,U[pa]=sr-hi):(O[pa]=hi,q[pa]=sr-hi)}this.adjustOddEvenCounts(y);let J=4*l.getValue()+(u?0:2)+(f?0:1)-1,le=0,ue=0;for(let hn=C.length-1;hn>=0;hn--){if(ke.isNotA1left(l,u,f)){let sr=ke.WEIGHTS[J][2*hn];ue+=C[hn]*sr}le+=C[hn]}let fe=0;for(let hn=O.length-1;hn>=0;hn--)if(ke.isNotA1left(l,u,f)){let sr=ke.WEIGHTS[J][2*hn+1];fe+=O[hn]*sr}let Ee=ue+fe;if((le&1)!=0||le>13||le<4)throw new se;let Fe=(13-le)/2,je=ke.SYMBOL_WIDEST[Fe],Oe=9-je,Mt=Rt.getRSSvalue(C,je,!0),St=Rt.getRSSvalue(O,Oe,!1),Ci=ke.EVEN_TOTAL_SUBSET[Fe],Es=ke.GSUM[Fe],Sr=Mt*Ci+St+Es;return new Ir(Sr,Ee)}static isNotA1left(s,l,u){return!(s.getValue()==0&&l&&u)}adjustOddEvenCounts(s){let l=pt.sum(new Int32Array(this.getOddCounts())),u=pt.sum(new Int32Array(this.getEvenCounts())),f=!1,p=!1;l>13?p=!0:l<4&&(f=!0);let y=!1,v=!1;u>13?v=!0:u<4&&(y=!0);let I=l+u-s,C=(l&1)==1,O=(u&1)==0;if(I==1)if(C){if(O)throw new se;p=!0}else{if(!O)throw new se;v=!0}else if(I==-1)if(C){if(O)throw new se;f=!0}else{if(!O)throw new se;y=!0}else if(I==0){if(C){if(!O)throw new se;l<u?(f=!0,v=!0):(p=!0,y=!0)}else if(O)throw new se}else throw new se;if(f){if(p)throw new se;ke.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&ke.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(v)throw new se;ke.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&ke.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ke.SYMBOL_WIDEST=[7,5,4,3,1],ke.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ke.GSUM=[0,348,1388,2948,3988],ke.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ke.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ke.FINDER_PAT_A=0,ke.FINDER_PAT_B=1,ke.FINDER_PAT_C=2,ke.FINDER_PAT_D=3,ke.FINDER_PAT_E=4,ke.FINDER_PAT_F=5,ke.FINDER_PATTERN_SEQUENCES=[[ke.FINDER_PAT_A,ke.FINDER_PAT_A],[ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B],[ke.FINDER_PAT_A,ke.FINDER_PAT_C,ke.FINDER_PAT_B,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_C],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_E,ke.FINDER_PAT_B,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F],[ke.FINDER_PAT_A,ke.FINDER_PAT_A,ke.FINDER_PAT_B,ke.FINDER_PAT_B,ke.FINDER_PAT_C,ke.FINDER_PAT_D,ke.FINDER_PAT_D,ke.FINDER_PAT_E,ke.FINDER_PAT_E,ke.FINDER_PAT_F,ke.FINDER_PAT_F]],ke.MAX_PAIRS=11;class Co extends Ir{constructor(s,l,u){super(s,l),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Jt extends $t{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,l,u){const f=this.decodePair(l,!1,s,u);Jt.addOrTally(this.possibleLeftPairs,f),l.reverse();let p=this.decodePair(l,!0,s,u);Jt.addOrTally(this.possibleRightPairs,p),l.reverse();for(let y of this.possibleLeftPairs)if(y.getCount()>1){for(let v of this.possibleRightPairs)if(v.getCount()>1&&Jt.checkChecksum(y,v))return Jt.constructResult(y,v)}throw new se}static addOrTally(s,l){if(l==null)return;let u=!1;for(let f of s)if(f.getValue()===l.getValue()){f.incrementCount(),u=!0;break}u||s.push(l)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,l){let u=4537077*s.getValue()+l.getValue(),f=new String(u).toString(),p=new K;for(let C=13-f.length;C>0;C--)p.append("0");p.append(f);let y=0;for(let C=0;C<13;C++){let O=p.charAt(C).charCodeAt(0)-48;y+=(C&1)===0?3*O:O}y=10-y%10,y===10&&(y=0),p.append(y.toString());let v=s.getFinderPattern().getResultPoints(),I=l.getFinderPattern().getResultPoints();return new Le(p.toString(),null,0,[v[0],v[1],I[0],I[1]],Re.RSS_14,new Date().getTime())}static checkChecksum(s,l){let u=(s.getChecksumPortion()+16*l.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+l.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,u===f}decodePair(s,l,u,f){try{let p=this.findFinderPattern(s,l),y=this.parseFoundFinderPattern(s,u,l,p),v=f==null?null:f.get(ie.NEED_RESULT_POINT_CALLBACK);if(v!=null){let O=(p[0]+p[1])/2;l&&(O=s.getSize()-1-O),v.foundPossibleResultPoint(new Xe(O,u))}let I=this.decodeDataCharacter(s,y,!0),C=this.decodeDataCharacter(s,y,!1);return new Co(1597*I.getValue()+C.getValue(),I.getChecksumPortion()+4*C.getChecksumPortion(),y)}catch{return null}}decodeDataCharacter(s,l,u){let f=this.getDataCharacterCounters();for(let fe=0;fe<f.length;fe++)f[fe]=0;if(u)In.recordPatternInReverse(s,l.getStartEnd()[0],f);else{In.recordPattern(s,l.getStartEnd()[1]+1,f);for(let fe=0,Ee=f.length-1;fe<Ee;fe++,Ee--){let Fe=f[fe];f[fe]=f[Ee],f[Ee]=Fe}}let p=u?16:15,y=pt.sum(new Int32Array(f))/p,v=this.getOddCounts(),I=this.getEvenCounts(),C=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let fe=0;fe<f.length;fe++){let Ee=f[fe]/y,Fe=Math.floor(Ee+.5);Fe<1?Fe=1:Fe>8&&(Fe=8);let je=Math.floor(fe/2);(fe&1)===0?(v[je]=Fe,C[je]=Ee-Fe):(I[je]=Fe,O[je]=Ee-Fe)}this.adjustOddEvenCounts(u,p);let U=0,q=0;for(let fe=v.length-1;fe>=0;fe--)q*=9,q+=v[fe],U+=v[fe];let J=0,le=0;for(let fe=I.length-1;fe>=0;fe--)J*=9,J+=I[fe],le+=I[fe];let ue=q+3*J;if(u){if((U&1)!==0||U>12||U<4)throw new se;let fe=(12-U)/2,Ee=Jt.OUTSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!1),Oe=Rt.getRSSvalue(I,Fe,!0),Mt=Jt.OUTSIDE_EVEN_TOTAL_SUBSET[fe],St=Jt.OUTSIDE_GSUM[fe];return new Ir(je*Mt+Oe+St,ue)}else{if((le&1)!==0||le>10||le<4)throw new se;let fe=(10-le)/2,Ee=Jt.INSIDE_ODD_WIDEST[fe],Fe=9-Ee,je=Rt.getRSSvalue(v,Ee,!0),Oe=Rt.getRSSvalue(I,Fe,!1),Mt=Jt.INSIDE_ODD_TOTAL_SUBSET[fe],St=Jt.INSIDE_GSUM[fe];return new Ir(Oe*Mt+je+St,ue)}}findFinderPattern(s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=s.getSize(),p=!1,y=0;for(;y<f&&(p=!s.get(y),l!==p);)y++;let v=0,I=y;for(let C=y;C<f;C++)if(s.get(C)!==p)u[v]++;else{if(v===3){if($t.isFinderPattern(u))return[I,C];I+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,p=!p}throw new se}parseFoundFinderPattern(s,l,u,f){let p=s.get(f[0]),y=f[0]-1;for(;y>=0&&p!==s.get(y);)y--;y++;const v=f[0]-y,I=this.getDecodeFinderCounters(),C=new Int32Array(I.length);D.arraycopy(I,0,C,1,I.length-1),C[0]=v;const O=this.parseFinderValue(C,Jt.FINDER_PATTERNS);let U=y,q=f[1];return u&&(U=s.getSize()-1-U,q=s.getSize()-1-q),new Cn(O,[y,f[1]],U,q,l)}adjustOddEvenCounts(s,l){let u=pt.sum(new Int32Array(this.getOddCounts())),f=pt.sum(new Int32Array(this.getEvenCounts())),p=!1,y=!1,v=!1,I=!1;s?(u>12?y=!0:u<4&&(p=!0),f>12?I=!0:f<4&&(v=!0)):(u>11?y=!0:u<5&&(p=!0),f>10?I=!0:f<4&&(v=!0));let C=u+f-l,O=(u&1)===(s?1:0),U=(f&1)===1;if(C===1)if(O){if(U)throw new se;y=!0}else{if(!U)throw new se;I=!0}else if(C===-1)if(O){if(U)throw new se;p=!0}else{if(!U)throw new se;v=!0}else if(C===0){if(O){if(!U)throw new se;u<f?(p=!0,I=!0):(y=!0,v=!0)}else if(U)throw new se}else throw new se;if(p){if(y)throw new se;$t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(y&&$t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(I)throw new se;$t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}I&&$t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Jt.OUTSIDE_GSUM=[0,161,961,2015,2715],Jt.INSIDE_GSUM=[0,336,1036,1516],Jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Jt.INSIDE_ODD_WIDEST=[2,4,6,8],Jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Fs extends In{constructor(s,l){super(),this.readers=[],this.verbose=l===!0;const u=s?s.get(ie.POSSIBLE_FORMATS):null,f=s&&s.get(ie.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(Re.EAN_13)||u.includes(Re.UPC_A)||u.includes(Re.EAN_8)||u.includes(Re.UPC_E))&&this.readers.push(new Tn(s)),u.includes(Re.CODE_39)&&this.readers.push(new An(f)),u.includes(Re.CODE_128)&&this.readers.push(new We),u.includes(Re.ITF)&&this.readers.push(new Ht),u.includes(Re.RSS_14)&&this.readers.push(new Jt),u.includes(Re.RSS_EXPANDED)&&this.readers.push(new ke(this.verbose))):(this.readers.push(new Tn(s)),this.readers.push(new An),this.readers.push(new Tn(s)),this.readers.push(new We),this.readers.push(new Ht),this.readers.push(new Jt),this.readers.push(new ke(this.verbose)))}decodeRow(s,l,u){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,l,u)}catch{}throw new se}reset(){this.readers.forEach(s=>s.reset())}}class wu extends Se{constructor(s=500,l){super(new Fs(l),s,l)}}class Ft{constructor(s,l,u){this.ecCodewords=s,this.ecBlocks=[l],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Nt{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Dt{constructor(s,l,u,f,p,y){this.versionNumber=s,this.symbolSizeRows=l,this.symbolSizeColumns=u,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=p,this.ecBlocks=y;let v=0;const I=y.getECCodewords(),C=y.getECBlocks();for(let O of C)v+=O.getCount()*(O.getDataCodewords()+I);this.totalCodewords=v}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,l){if((s&1)!==0||(l&1)!==0)throw new F;for(let u of Dt.VERSIONS)if(u.symbolSizeRows===s&&u.symbolSizeColumns===l)return u;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Dt(1,10,10,8,8,new Ft(5,new Nt(1,3))),new Dt(2,12,12,10,10,new Ft(7,new Nt(1,5))),new Dt(3,14,14,12,12,new Ft(10,new Nt(1,8))),new Dt(4,16,16,14,14,new Ft(12,new Nt(1,12))),new Dt(5,18,18,16,16,new Ft(14,new Nt(1,18))),new Dt(6,20,20,18,18,new Ft(18,new Nt(1,22))),new Dt(7,22,22,20,20,new Ft(20,new Nt(1,30))),new Dt(8,24,24,22,22,new Ft(24,new Nt(1,36))),new Dt(9,26,26,24,24,new Ft(28,new Nt(1,44))),new Dt(10,32,32,14,14,new Ft(36,new Nt(1,62))),new Dt(11,36,36,16,16,new Ft(42,new Nt(1,86))),new Dt(12,40,40,18,18,new Ft(48,new Nt(1,114))),new Dt(13,44,44,20,20,new Ft(56,new Nt(1,144))),new Dt(14,48,48,22,22,new Ft(68,new Nt(1,174))),new Dt(15,52,52,24,24,new Ft(42,new Nt(2,102))),new Dt(16,64,64,14,14,new Ft(56,new Nt(2,140))),new Dt(17,72,72,16,16,new Ft(36,new Nt(4,92))),new Dt(18,80,80,18,18,new Ft(48,new Nt(4,114))),new Dt(19,88,88,20,20,new Ft(56,new Nt(4,144))),new Dt(20,96,96,22,22,new Ft(68,new Nt(4,174))),new Dt(21,104,104,24,24,new Ft(56,new Nt(6,136))),new Dt(22,120,120,18,18,new Ft(68,new Nt(6,175))),new Dt(23,132,132,20,20,new Ft(62,new Nt(8,163))),new Dt(24,144,144,22,22,new Ft(62,new Nt(8,156),new Nt(2,155))),new Dt(25,8,18,6,16,new Ft(7,new Nt(1,5))),new Dt(26,8,32,6,14,new Ft(11,new Nt(1,10))),new Dt(27,12,26,10,24,new Ft(14,new Nt(1,16))),new Dt(28,12,36,10,16,new Ft(18,new Nt(1,22))),new Dt(29,16,36,14,16,new Ft(24,new Nt(1,32))),new Dt(30,16,48,14,22,new Ft(28,new Nt(1,49)))]}}Dt.VERSIONS=Dt.buildVersions();class zr{constructor(s){const l=s.getHeight();if(l<8||l>144||(l&1)!==0)throw new F;this.version=zr.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new we(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const l=s.getHeight(),u=s.getWidth();return Dt.getVersionForDimensions(l,u)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let l=0,u=4,f=0;const p=this.mappingBitMatrix.getHeight(),y=this.mappingBitMatrix.getWidth();let v=!1,I=!1,C=!1,O=!1;do if(u===p&&f===0&&!v)s[l++]=this.readCorner1(p,y)&255,u-=2,f+=2,v=!0;else if(u===p-2&&f===0&&(y&3)!==0&&!I)s[l++]=this.readCorner2(p,y)&255,u-=2,f+=2,I=!0;else if(u===p+4&&f===2&&(y&7)===0&&!C)s[l++]=this.readCorner3(p,y)&255,u-=2,f+=2,C=!0;else if(u===p-2&&f===0&&(y&7)===4&&!O)s[l++]=this.readCorner4(p,y)&255,u-=2,f+=2,O=!0;else{do u<p&&f>=0&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,p,y)&255),u-=2,f+=2;while(u>=0&&f<y);u+=1,f+=3;do u>=0&&f<y&&!this.readMappingMatrix.get(f,u)&&(s[l++]=this.readUtah(u,f,p,y)&255),u+=2,f-=2;while(u<p&&f>=0);u+=3,f+=1}while(u<p||f<y);if(l!==this.version.getTotalCodewords())throw new F;return s}readModule(s,l,u,f){return s<0&&(s+=u,l+=4-(u+4&7)),l<0&&(l+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(l,s),this.mappingBitMatrix.get(l,s)}readUtah(s,l,u,f){let p=0;return this.readModule(s-2,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s-2,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s-1,l,u,f)&&(p|=1),p<<=1,this.readModule(s,l-2,u,f)&&(p|=1),p<<=1,this.readModule(s,l-1,u,f)&&(p|=1),p<<=1,this.readModule(s,l,u,f)&&(p|=1),p}readCorner1(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,1,s,l)&&(u|=1),u<<=1,this.readModule(s-1,2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}readCorner2(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-4,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner3(s,l){let u=0;return this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(0,l-3,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-3,s,l)&&(u|=1),u<<=1,this.readModule(1,l-2,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u}readCorner4(s,l){let u=0;return this.readModule(s-3,0,s,l)&&(u|=1),u<<=1,this.readModule(s-2,0,s,l)&&(u|=1),u<<=1,this.readModule(s-1,0,s,l)&&(u|=1),u<<=1,this.readModule(0,l-2,s,l)&&(u|=1),u<<=1,this.readModule(0,l-1,s,l)&&(u|=1),u<<=1,this.readModule(1,l-1,s,l)&&(u|=1),u<<=1,this.readModule(2,l-1,s,l)&&(u|=1),u<<=1,this.readModule(3,l-1,s,l)&&(u|=1),u}extractDataRegion(s){const l=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(s.getHeight()!==l)throw new E("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),y=l/f|0,v=u/p|0,I=y*f,C=v*p,O=new we(C,I);for(let U=0;U<y;++U){const q=U*f;for(let J=0;J<v;++J){const le=J*p;for(let ue=0;ue<f;++ue){const fe=U*(f+2)+1+ue,Ee=q+ue;for(let Fe=0;Fe<p;++Fe){const je=J*(p+2)+1+Fe;if(s.get(je,fe)){const Oe=le+Fe;O.set(Oe,Ee)}}}}}return O}}class la{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l){const u=l.getECBlocks();let f=0;const p=u.getECBlocks();for(let ue of p)f+=ue.getCount();const y=new Array(f);let v=0;for(let ue of p)for(let fe=0;fe<ue.getCount();fe++){const Ee=ue.getDataCodewords(),Fe=u.getECCodewords()+Ee;y[v++]=new la(Ee,new Uint8Array(Fe))}const C=y[0].codewords.length-u.getECCodewords(),O=C-1;let U=0;for(let ue=0;ue<O;ue++)for(let fe=0;fe<v;fe++)y[fe].codewords[ue]=s[U++];const q=l.getVersionNumber()===24,J=q?8:v;for(let ue=0;ue<J;ue++)y[ue].codewords[C-1]=s[U++];const le=y[0].codewords.length;for(let ue=C;ue<le;ue++)for(let fe=0;fe<v;fe++){const Ee=q?(fe+8)%v:fe,Fe=q&&Ee>7?ue-1:ue;y[Ee].codewords[Fe]=s[U++]}if(U!==s.length)throw new E;return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Xa{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new E(""+s);let l=0,u=this.bitOffset,f=this.byteOffset;const p=this.bytes;if(u>0){const y=8-u,v=s<y?s:y,I=y-v,C=255>>8-v<<I;l=(p[f]&C)>>I,s-=v,u+=v,u===8&&(u=0,f++)}if(s>0){for(;s>=8;)l=l<<8|p[f]&255,f++,s-=8;if(s>0){const y=8-s,v=255>>y<<y;l=l<<s|(p[f]&v)>>y,u+=s}}return this.bitOffset=u,this.byteOffset=f,l}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Qn;(function(j){j[j.PAD_ENCODE=0]="PAD_ENCODE",j[j.ASCII_ENCODE=1]="ASCII_ENCODE",j[j.C40_ENCODE=2]="C40_ENCODE",j[j.TEXT_ENCODE=3]="TEXT_ENCODE",j[j.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",j[j.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",j[j.BASE256_ENCODE=6]="BASE256_ENCODE"})(Qn||(Qn={}));class ji{static decode(s){const l=new Xa(s),u=new K,f=new K,p=new Array;let y=Qn.ASCII_ENCODE;do if(y===Qn.ASCII_ENCODE)y=this.decodeAsciiSegment(l,u,f);else{switch(y){case Qn.C40_ENCODE:this.decodeC40Segment(l,u);break;case Qn.TEXT_ENCODE:this.decodeTextSegment(l,u);break;case Qn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(l,u);break;case Qn.EDIFACT_ENCODE:this.decodeEdifactSegment(l,u);break;case Qn.BASE256_ENCODE:this.decodeBase256Segment(l,u,p);break;default:throw new F}y=Qn.ASCII_ENCODE}while(y!==Qn.PAD_ENCODE&&l.available()>0);return f.length()>0&&u.append(f.toString()),new at(s,u.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(s,l,u){let f=!1;do{let p=s.readBits(8);if(p===0)throw new F;if(p<=128)return f&&(p+=128),l.append(String.fromCharCode(p-1)),Qn.ASCII_ENCODE;if(p===129)return Qn.PAD_ENCODE;if(p<=229){const y=p-130;y<10&&l.append("0"),l.append(""+y)}else switch(p){case 230:return Qn.C40_ENCODE;case 231:return Qn.BASE256_ENCODE;case 232:l.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:l.append("[)>05"),u.insert(0,"");break;case 237:l.append("[)>06"),u.insert(0,"");break;case 238:return Qn.ANSIX12_ENCODE;case 239:return Qn.TEXT_ENCODE;case 240:return Qn.EDIFACT_ENCODE;case 241:break;default:if(p!==254||s.available()!==0)throw new F;break}}while(s.available()>0);return Qn.ASCII_ENCODE}static decodeC40Segment(s,l){let u=!1;const f=[];let p=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const I=f[v];switch(p){case 0:if(I<3)p=I+1;else if(I<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new F;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),p=0;break;case 2:if(I<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new F}p=0;break;case 3:u?(l.append(String.fromCharCode(I+224)),u=!1):l.append(String.fromCharCode(I+96)),p=0;break;default:throw new F}}}while(s.available()>0)}static decodeTextSegment(s,l){let u=!1,f=[],p=0;do{if(s.available()===8)return;const y=s.readBits(8);if(y===254)return;this.parseTwoBytes(y,s.readBits(8),f);for(let v=0;v<3;v++){const I=f[v];switch(p){case 0:if(I<3)p=I+1;else if(I<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else throw new F;break;case 1:u?(l.append(String.fromCharCode(I+128)),u=!1):l.append(String.fromCharCode(I)),p=0;break;case 2:if(I<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C)}else switch(I){case 27:l.append("");break;case 30:u=!0;break;default:throw new F}p=0;break;case 3:if(I<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[I];u?(l.append(String.fromCharCode(C.charCodeAt(0)+128)),u=!1):l.append(C),p=0}else throw new F;break;default:throw new F}}}while(s.available()>0)}static decodeAnsiX12Segment(s,l){const u=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let p=0;p<3;p++){const y=u[p];switch(y){case 0:l.append("\r");break;case 1:l.append("*");break;case 2:l.append(">");break;case 3:l.append(" ");break;default:if(y<14)l.append(String.fromCharCode(y+44));else if(y<40)l.append(String.fromCharCode(y+51));else throw new F;break}}}while(s.available()>0)}static parseTwoBytes(s,l,u){let f=(s<<8)+l-1,p=Math.floor(f/1600);u[0]=p,f-=p*1600,p=Math.floor(f/40),u[1]=p,u[2]=f-p*40}static decodeEdifactSegment(s,l){do{if(s.available()<=16)return;for(let u=0;u<4;u++){let f=s.readBits(6);if(f===31){const p=8-s.getBitOffset();p!==8&&s.readBits(p);return}(f&32)===0&&(f|=64),l.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,l,u){let f=1+s.getByteOffset();const p=this.unrandomize255State(s.readBits(8),f++);let y;if(p===0?y=s.available()/8|0:p<250?y=p:y=250*(p-249)+this.unrandomize255State(s.readBits(8),f++),y<0)throw new F;const v=new Uint8Array(y);for(let I=0;I<y;I++){if(s.available()<8)throw new F;v[I]=this.unrandomize255State(s.readBits(8),f++)}u.push(v);try{l.append(ne.decode(v,te.ISO88591))}catch(I){throw new Bn("Platform does not support required encoding: "+I.message)}}static unrandomize255State(s,l){const u=149*l%255+1,f=s-u;return f>=0?f:f+256}}ji.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ji.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ji.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ji.TEXT_SHIFT2_SET_CHARS=ji.C40_SHIFT2_SET_CHARS,ji.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ya{constructor(){this.rsDecoder=new Dr(ht.DATA_MATRIX_FIELD_256)}decode(s){const l=new zr(s),u=l.getVersion(),f=l.readCodewords(),p=la.getDataBlocks(f,u);let y=0;for(let C of p)y+=C.getNumDataCodewords();const v=new Uint8Array(y),I=p.length;for(let C=0;C<I;C++){const O=p[C],U=O.getCodewords(),q=O.getNumDataCodewords();this.correctErrors(U,q);for(let J=0;J<q;J++)v[J*I+C]=U[J]}return ji.decode(v)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class mn{constructor(s){this.image=s,this.rectangleDetector=new Yr(this.image)}detect(){const s=this.rectangleDetector.detect();let l=this.detectSolid1(s);if(l=this.detectSolid2(l),l[3]=this.correctTopRight(l),!l[3])throw new se;l=this.shiftToModuleCenter(l);const u=l[0],f=l[1],p=l[2],y=l[3];let v=this.transitionsBetween(u,y)+1,I=this.transitionsBetween(p,y)+1;(v&1)===1&&(v+=1),(I&1)===1&&(I+=1),4*v<7*I&&4*I<7*v&&(v=I=Math.max(v,I));let C=mn.sampleGrid(this.image,u,f,p,y,v,I);return new Xn(C,[u,f,p,y])}static shiftPoint(s,l,u){let f=(l.getX()-s.getX())/(u+1),p=(l.getY()-s.getY())/(u+1);return new Xe(s.getX()+f,s.getY()+p)}static moveAway(s,l,u){let f=s.getX(),p=s.getY();return f<l?f-=1:f+=1,p<u?p-=1:p+=1,new Xe(f,p)}detectSolid1(s){let l=s[0],u=s[1],f=s[3],p=s[2],y=this.transitionsBetween(l,u),v=this.transitionsBetween(u,f),I=this.transitionsBetween(f,p),C=this.transitionsBetween(p,l),O=y,U=[p,l,u,f];return O>v&&(O=v,U[0]=l,U[1]=u,U[2]=f,U[3]=p),O>I&&(O=I,U[0]=u,U[1]=f,U[2]=p,U[3]=l),O>C&&(U[0]=f,U[1]=p,U[2]=l,U[3]=u),U}detectSolid2(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p),v=mn.shiftPoint(u,f,(y+1)*4),I=mn.shiftPoint(f,u,(y+1)*4),C=this.transitionsBetween(v,l),O=this.transitionsBetween(I,p);return C<O?(s[0]=l,s[1]=u,s[2]=f,s[3]=p):(s[0]=u,s[1]=f,s[2]=p,s[3]=l),s}correctTopRight(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p),v=this.transitionsBetween(u,p),I=mn.shiftPoint(l,u,(v+1)*4),C=mn.shiftPoint(f,u,(y+1)*4);y=this.transitionsBetween(I,p),v=this.transitionsBetween(C,p);let O=new Xe(p.getX()+(f.getX()-u.getX())/(y+1),p.getY()+(f.getY()-u.getY())/(y+1)),U=new Xe(p.getX()+(l.getX()-u.getX())/(v+1),p.getY()+(l.getY()-u.getY())/(v+1));if(!this.isValid(O))return this.isValid(U)?U:null;if(!this.isValid(U))return O;let q=this.transitionsBetween(I,O)+this.transitionsBetween(C,O),J=this.transitionsBetween(I,U)+this.transitionsBetween(C,U);return q>J?O:U}shiftToModuleCenter(s){let l=s[0],u=s[1],f=s[2],p=s[3],y=this.transitionsBetween(l,p)+1,v=this.transitionsBetween(f,p)+1,I=mn.shiftPoint(l,u,v*4),C=mn.shiftPoint(f,u,y*4);y=this.transitionsBetween(I,p)+1,v=this.transitionsBetween(C,p)+1,(y&1)===1&&(y+=1),(v&1)===1&&(v+=1);let O=(l.getX()+u.getX()+f.getX()+p.getX())/4,U=(l.getY()+u.getY()+f.getY()+p.getY())/4;l=mn.moveAway(l,O,U),u=mn.moveAway(u,O,U),f=mn.moveAway(f,O,U),p=mn.moveAway(p,O,U);let q,J;return I=mn.shiftPoint(l,u,v*4),I=mn.shiftPoint(I,p,y*4),q=mn.shiftPoint(u,l,v*4),q=mn.shiftPoint(q,f,y*4),C=mn.shiftPoint(f,p,v*4),C=mn.shiftPoint(C,u,y*4),J=mn.shiftPoint(p,f,v*4),J=mn.shiftPoint(J,l,y*4),[I,q,C,J]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,l,u,f,p,y,v){return Er.getInstance().sampleGrid(s,y,v,.5,.5,y-.5,.5,y-.5,v-.5,.5,v-.5,l.getX(),l.getY(),p.getX(),p.getY(),f.getX(),f.getY(),u.getX(),u.getY())}transitionsBetween(s,l){let u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),p=Math.trunc(l.getX()),y=Math.trunc(l.getY()),v=Math.abs(y-f)>Math.abs(p-u);if(v){let ue=u;u=f,f=ue,ue=p,p=y,y=ue}let I=Math.abs(p-u),C=Math.abs(y-f),O=-I/2,U=f<y?1:-1,q=u<p?1:-1,J=0,le=this.image.get(v?f:u,v?u:f);for(let ue=u,fe=f;ue!==p;ue+=q){let Ee=this.image.get(v?fe:ue,v?ue:fe);if(Ee!==le&&(J++,le=Ee),O+=C,O>0){if(fe===y)break;fe+=U,O-=I}}return J}}class Ei{constructor(){this.decoder=new Ya}decode(s,l=null){let u,f;if(l!=null&&l.has(ie.PURE_BARCODE)){const C=Ei.extractPureBits(s.getBlackMatrix());u=this.decoder.decode(C),f=Ei.NO_POINTS}else{const C=new mn(s.getBlackMatrix()).detect();u=this.decoder.decode(C.getBits()),f=C.getPoints()}const p=u.getRawBytes(),y=new Le(u.getText(),p,8*p.length,f,Re.DATA_MATRIX,D.currentTimeMillis()),v=u.getByteSegments();v!=null&&y.putMetadata(Ge.BYTE_SEGMENTS,v);const I=u.getECLevel();return I!=null&&y.putMetadata(Ge.ERROR_CORRECTION_LEVEL,I),y}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l==null||u==null)throw new se;const f=this.moduleSize(l,s);let p=l[1];const y=u[1];let v=l[0];const C=(u[0]-v+1)/f,O=(y-p+1)/f;if(C<=0||O<=0)throw new se;const U=f/2;p+=U,v+=U;const q=new we(C,O);for(let J=0;J<O;J++){const le=p+J*f;for(let ue=0;ue<C;ue++)s.get(v+ue*f,le)&&q.set(ue,J)}return q}static moduleSize(s,l){const u=l.getWidth();let f=s[0];const p=s[1];for(;f<u&&l.get(f,p);)f++;if(f===u)throw new se;const y=f-s[0];if(y===0)throw new se;return y}}Ei.NO_POINTS=[];class sh extends Se{constructor(s=500){super(new Ei,s)}}var bi;(function(j){j[j.L=0]="L",j[j.M=1]="M",j[j.Q=2]="Q",j[j.H=3]="H"})(bi||(bi={}));class Ot{constructor(s,l,u){this.value=s,this.stringValue=l,this.bits=u,Ot.FOR_BITS.set(u,this),Ot.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Ot.L;case"M":return Ot.M;case"Q":return Ot.Q;case"H":return Ot.H;default:throw new w(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Ot))return!1;const l=s;return this.value===l.value}static forBits(s){if(s<0||s>=Ot.FOR_BITS.size)throw new E;return Ot.FOR_BITS.get(s)}}Ot.FOR_BITS=new Map,Ot.FOR_VALUE=new Map,Ot.L=new Ot(bi.L,"L",1),Ot.M=new Ot(bi.M,"M",0),Ot.Q=new Ot(bi.Q,"Q",3),Ot.H=new Ot(bi.H,"H",2);class Zn{constructor(s){this.errorCorrectionLevel=Ot.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,l){return W.bitCount(s^l)}static decodeFormatInformation(s,l){const u=Zn.doDecodeFormatInformation(s,l);return u!==null?u:Zn.doDecodeFormatInformation(s^Zn.FORMAT_INFO_MASK_QR,l^Zn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,l){let u=Number.MAX_SAFE_INTEGER,f=0;for(const p of Zn.FORMAT_INFO_DECODE_LOOKUP){const y=p[0];if(y===s||y===l)return new Zn(p[1]);let v=Zn.numBitsDiffering(s,y);v<u&&(f=p[1],u=v),s!==l&&(v=Zn.numBitsDiffering(l,y),v<u&&(f=p[1],u=v))}return u<=3?new Zn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof Zn))return!1;const l=s;return this.errorCorrectionLevel===l.errorCorrectionLevel&&this.dataMask===l.dataMask}}Zn.FORMAT_INFO_MASK_QR=21522,Zn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class pe{constructor(s,...l){this.ecCodewordsPerBlock=s,this.ecBlocks=l}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const l=this.ecBlocks;for(const u of l)s+=u.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Q{constructor(s,l){this.count=s,this.dataCodewords=l}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(s,l,...u){this.versionNumber=s,this.alignmentPatternCenters=l,this.ecBlocks=u;let f=0;const p=u[0].getECCodewordsPerBlock(),y=u[0].getECBlocks();for(const v of y)f+=v.getCount()*(v.getDataCodewords()+p);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new F;try{return this.getVersionForNumber((s-17)/4)}catch{throw new F}}static getVersionForNumber(s){if(s<1||s>40)throw new E;return $e.VERSIONS[s-1]}static decodeVersionInformation(s){let l=Number.MAX_SAFE_INTEGER,u=0;for(let f=0;f<$e.VERSION_DECODE_INFO.length;f++){const p=$e.VERSION_DECODE_INFO[f];if(p===s)return $e.getVersionForNumber(f+7);const y=Zn.numBitsDiffering(s,p);y<l&&(u=f+7,l=y)}return l<=3?$e.getVersionForNumber(u):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),l=new we(s);l.setRegion(0,0,9,9),l.setRegion(s-8,0,8,9),l.setRegion(0,s-8,9,8);const u=this.alignmentPatternCenters.length;for(let f=0;f<u;f++){const p=this.alignmentPatternCenters[f]-2;for(let y=0;y<u;y++)f===0&&(y===0||y===u-1)||f===u-1&&y===0||l.setRegion(this.alignmentPatternCenters[y]-2,p,5,5)}return l.setRegion(6,9,1,s-17),l.setRegion(9,6,s-17,1),this.versionNumber>6&&(l.setRegion(s-11,0,3,6),l.setRegion(0,s-11,6,3)),l}toString(){return""+this.versionNumber}}$e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$e.VERSIONS=[new $e(1,new Int32Array(0),new pe(7,new Q(1,19)),new pe(10,new Q(1,16)),new pe(13,new Q(1,13)),new pe(17,new Q(1,9))),new $e(2,Int32Array.from([6,18]),new pe(10,new Q(1,34)),new pe(16,new Q(1,28)),new pe(22,new Q(1,22)),new pe(28,new Q(1,16))),new $e(3,Int32Array.from([6,22]),new pe(15,new Q(1,55)),new pe(26,new Q(1,44)),new pe(18,new Q(2,17)),new pe(22,new Q(2,13))),new $e(4,Int32Array.from([6,26]),new pe(20,new Q(1,80)),new pe(18,new Q(2,32)),new pe(26,new Q(2,24)),new pe(16,new Q(4,9))),new $e(5,Int32Array.from([6,30]),new pe(26,new Q(1,108)),new pe(24,new Q(2,43)),new pe(18,new Q(2,15),new Q(2,16)),new pe(22,new Q(2,11),new Q(2,12))),new $e(6,Int32Array.from([6,34]),new pe(18,new Q(2,68)),new pe(16,new Q(4,27)),new pe(24,new Q(4,19)),new pe(28,new Q(4,15))),new $e(7,Int32Array.from([6,22,38]),new pe(20,new Q(2,78)),new pe(18,new Q(4,31)),new pe(18,new Q(2,14),new Q(4,15)),new pe(26,new Q(4,13),new Q(1,14))),new $e(8,Int32Array.from([6,24,42]),new pe(24,new Q(2,97)),new pe(22,new Q(2,38),new Q(2,39)),new pe(22,new Q(4,18),new Q(2,19)),new pe(26,new Q(4,14),new Q(2,15))),new $e(9,Int32Array.from([6,26,46]),new pe(30,new Q(2,116)),new pe(22,new Q(3,36),new Q(2,37)),new pe(20,new Q(4,16),new Q(4,17)),new pe(24,new Q(4,12),new Q(4,13))),new $e(10,Int32Array.from([6,28,50]),new pe(18,new Q(2,68),new Q(2,69)),new pe(26,new Q(4,43),new Q(1,44)),new pe(24,new Q(6,19),new Q(2,20)),new pe(28,new Q(6,15),new Q(2,16))),new $e(11,Int32Array.from([6,30,54]),new pe(20,new Q(4,81)),new pe(30,new Q(1,50),new Q(4,51)),new pe(28,new Q(4,22),new Q(4,23)),new pe(24,new Q(3,12),new Q(8,13))),new $e(12,Int32Array.from([6,32,58]),new pe(24,new Q(2,92),new Q(2,93)),new pe(22,new Q(6,36),new Q(2,37)),new pe(26,new Q(4,20),new Q(6,21)),new pe(28,new Q(7,14),new Q(4,15))),new $e(13,Int32Array.from([6,34,62]),new pe(26,new Q(4,107)),new pe(22,new Q(8,37),new Q(1,38)),new pe(24,new Q(8,20),new Q(4,21)),new pe(22,new Q(12,11),new Q(4,12))),new $e(14,Int32Array.from([6,26,46,66]),new pe(30,new Q(3,115),new Q(1,116)),new pe(24,new Q(4,40),new Q(5,41)),new pe(20,new Q(11,16),new Q(5,17)),new pe(24,new Q(11,12),new Q(5,13))),new $e(15,Int32Array.from([6,26,48,70]),new pe(22,new Q(5,87),new Q(1,88)),new pe(24,new Q(5,41),new Q(5,42)),new pe(30,new Q(5,24),new Q(7,25)),new pe(24,new Q(11,12),new Q(7,13))),new $e(16,Int32Array.from([6,26,50,74]),new pe(24,new Q(5,98),new Q(1,99)),new pe(28,new Q(7,45),new Q(3,46)),new pe(24,new Q(15,19),new Q(2,20)),new pe(30,new Q(3,15),new Q(13,16))),new $e(17,Int32Array.from([6,30,54,78]),new pe(28,new Q(1,107),new Q(5,108)),new pe(28,new Q(10,46),new Q(1,47)),new pe(28,new Q(1,22),new Q(15,23)),new pe(28,new Q(2,14),new Q(17,15))),new $e(18,Int32Array.from([6,30,56,82]),new pe(30,new Q(5,120),new Q(1,121)),new pe(26,new Q(9,43),new Q(4,44)),new pe(28,new Q(17,22),new Q(1,23)),new pe(28,new Q(2,14),new Q(19,15))),new $e(19,Int32Array.from([6,30,58,86]),new pe(28,new Q(3,113),new Q(4,114)),new pe(26,new Q(3,44),new Q(11,45)),new pe(26,new Q(17,21),new Q(4,22)),new pe(26,new Q(9,13),new Q(16,14))),new $e(20,Int32Array.from([6,34,62,90]),new pe(28,new Q(3,107),new Q(5,108)),new pe(26,new Q(3,41),new Q(13,42)),new pe(30,new Q(15,24),new Q(5,25)),new pe(28,new Q(15,15),new Q(10,16))),new $e(21,Int32Array.from([6,28,50,72,94]),new pe(28,new Q(4,116),new Q(4,117)),new pe(26,new Q(17,42)),new pe(28,new Q(17,22),new Q(6,23)),new pe(30,new Q(19,16),new Q(6,17))),new $e(22,Int32Array.from([6,26,50,74,98]),new pe(28,new Q(2,111),new Q(7,112)),new pe(28,new Q(17,46)),new pe(30,new Q(7,24),new Q(16,25)),new pe(24,new Q(34,13))),new $e(23,Int32Array.from([6,30,54,78,102]),new pe(30,new Q(4,121),new Q(5,122)),new pe(28,new Q(4,47),new Q(14,48)),new pe(30,new Q(11,24),new Q(14,25)),new pe(30,new Q(16,15),new Q(14,16))),new $e(24,Int32Array.from([6,28,54,80,106]),new pe(30,new Q(6,117),new Q(4,118)),new pe(28,new Q(6,45),new Q(14,46)),new pe(30,new Q(11,24),new Q(16,25)),new pe(30,new Q(30,16),new Q(2,17))),new $e(25,Int32Array.from([6,32,58,84,110]),new pe(26,new Q(8,106),new Q(4,107)),new pe(28,new Q(8,47),new Q(13,48)),new pe(30,new Q(7,24),new Q(22,25)),new pe(30,new Q(22,15),new Q(13,16))),new $e(26,Int32Array.from([6,30,58,86,114]),new pe(28,new Q(10,114),new Q(2,115)),new pe(28,new Q(19,46),new Q(4,47)),new pe(28,new Q(28,22),new Q(6,23)),new pe(30,new Q(33,16),new Q(4,17))),new $e(27,Int32Array.from([6,34,62,90,118]),new pe(30,new Q(8,122),new Q(4,123)),new pe(28,new Q(22,45),new Q(3,46)),new pe(30,new Q(8,23),new Q(26,24)),new pe(30,new Q(12,15),new Q(28,16))),new $e(28,Int32Array.from([6,26,50,74,98,122]),new pe(30,new Q(3,117),new Q(10,118)),new pe(28,new Q(3,45),new Q(23,46)),new pe(30,new Q(4,24),new Q(31,25)),new pe(30,new Q(11,15),new Q(31,16))),new $e(29,Int32Array.from([6,30,54,78,102,126]),new pe(30,new Q(7,116),new Q(7,117)),new pe(28,new Q(21,45),new Q(7,46)),new pe(30,new Q(1,23),new Q(37,24)),new pe(30,new Q(19,15),new Q(26,16))),new $e(30,Int32Array.from([6,26,52,78,104,130]),new pe(30,new Q(5,115),new Q(10,116)),new pe(28,new Q(19,47),new Q(10,48)),new pe(30,new Q(15,24),new Q(25,25)),new pe(30,new Q(23,15),new Q(25,16))),new $e(31,Int32Array.from([6,30,56,82,108,134]),new pe(30,new Q(13,115),new Q(3,116)),new pe(28,new Q(2,46),new Q(29,47)),new pe(30,new Q(42,24),new Q(1,25)),new pe(30,new Q(23,15),new Q(28,16))),new $e(32,Int32Array.from([6,34,60,86,112,138]),new pe(30,new Q(17,115)),new pe(28,new Q(10,46),new Q(23,47)),new pe(30,new Q(10,24),new Q(35,25)),new pe(30,new Q(19,15),new Q(35,16))),new $e(33,Int32Array.from([6,30,58,86,114,142]),new pe(30,new Q(17,115),new Q(1,116)),new pe(28,new Q(14,46),new Q(21,47)),new pe(30,new Q(29,24),new Q(19,25)),new pe(30,new Q(11,15),new Q(46,16))),new $e(34,Int32Array.from([6,34,62,90,118,146]),new pe(30,new Q(13,115),new Q(6,116)),new pe(28,new Q(14,46),new Q(23,47)),new pe(30,new Q(44,24),new Q(7,25)),new pe(30,new Q(59,16),new Q(1,17))),new $e(35,Int32Array.from([6,30,54,78,102,126,150]),new pe(30,new Q(12,121),new Q(7,122)),new pe(28,new Q(12,47),new Q(26,48)),new pe(30,new Q(39,24),new Q(14,25)),new pe(30,new Q(22,15),new Q(41,16))),new $e(36,Int32Array.from([6,24,50,76,102,128,154]),new pe(30,new Q(6,121),new Q(14,122)),new pe(28,new Q(6,47),new Q(34,48)),new pe(30,new Q(46,24),new Q(10,25)),new pe(30,new Q(2,15),new Q(64,16))),new $e(37,Int32Array.from([6,28,54,80,106,132,158]),new pe(30,new Q(17,122),new Q(4,123)),new pe(28,new Q(29,46),new Q(14,47)),new pe(30,new Q(49,24),new Q(10,25)),new pe(30,new Q(24,15),new Q(46,16))),new $e(38,Int32Array.from([6,32,58,84,110,136,162]),new pe(30,new Q(4,122),new Q(18,123)),new pe(28,new Q(13,46),new Q(32,47)),new pe(30,new Q(48,24),new Q(14,25)),new pe(30,new Q(42,15),new Q(32,16))),new $e(39,Int32Array.from([6,26,54,82,110,138,166]),new pe(30,new Q(20,117),new Q(4,118)),new pe(28,new Q(40,47),new Q(7,48)),new pe(30,new Q(43,24),new Q(22,25)),new pe(30,new Q(10,15),new Q(67,16))),new $e(40,Int32Array.from([6,30,58,86,114,142,170]),new pe(30,new Q(19,118),new Q(6,119)),new pe(28,new Q(18,47),new Q(31,48)),new pe(30,new Q(34,24),new Q(34,25)),new pe(30,new Q(20,15),new Q(61,16)))];var Rn;(function(j){j[j.DATA_MASK_000=0]="DATA_MASK_000",j[j.DATA_MASK_001=1]="DATA_MASK_001",j[j.DATA_MASK_010=2]="DATA_MASK_010",j[j.DATA_MASK_011=3]="DATA_MASK_011",j[j.DATA_MASK_100=4]="DATA_MASK_100",j[j.DATA_MASK_101=5]="DATA_MASK_101",j[j.DATA_MASK_110=6]="DATA_MASK_110",j[j.DATA_MASK_111=7]="DATA_MASK_111"})(Rn||(Rn={}));class It{constructor(s,l){this.value=s,this.isMasked=l}unmaskBitMatrix(s,l){for(let u=0;u<l;u++)for(let f=0;f<l;f++)this.isMasked(u,f)&&s.flip(f,u)}}It.values=new Map([[Rn.DATA_MASK_000,new It(Rn.DATA_MASK_000,(j,s)=>(j+s&1)===0)],[Rn.DATA_MASK_001,new It(Rn.DATA_MASK_001,(j,s)=>(j&1)===0)],[Rn.DATA_MASK_010,new It(Rn.DATA_MASK_010,(j,s)=>s%3===0)],[Rn.DATA_MASK_011,new It(Rn.DATA_MASK_011,(j,s)=>(j+s)%3===0)],[Rn.DATA_MASK_100,new It(Rn.DATA_MASK_100,(j,s)=>(Math.floor(j/2)+Math.floor(s/3)&1)===0)],[Rn.DATA_MASK_101,new It(Rn.DATA_MASK_101,(j,s)=>j*s%6===0)],[Rn.DATA_MASK_110,new It(Rn.DATA_MASK_110,(j,s)=>j*s%6<3)],[Rn.DATA_MASK_111,new It(Rn.DATA_MASK_111,(j,s)=>(j+s+j*s%3&1)===0)]]);class So{constructor(s){const l=s.getHeight();if(l<21||(l&3)!==1)throw new F;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let p=0;p<6;p++)s=this.copyBit(p,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let p=5;p>=0;p--)s=this.copyBit(8,p,s);const l=this.bitMatrix.getHeight();let u=0;const f=l-7;for(let p=l-1;p>=f;p--)u=this.copyBit(8,p,u);for(let p=l-8;p<l;p++)u=this.copyBit(p,8,u);if(this.parsedFormatInfo=Zn.decodeFormatInformation(s,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),l=Math.floor((s-17)/4);if(l<=6)return $e.getVersionForNumber(l);let u=0;const f=s-11;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(v,y,u);let p=$e.decodeVersionInformation(u);if(p!==null&&p.getDimensionForVersion()===s)return this.parsedVersion=p,p;u=0;for(let y=5;y>=0;y--)for(let v=s-9;v>=f;v--)u=this.copyBit(y,v,u);if(p=$e.decodeVersionInformation(u),p!==null&&p.getDimensionForVersion()===s)return this.parsedVersion=p,p;throw new F}copyBit(s,l,u){return(this.isMirror?this.bitMatrix.get(l,s):this.bitMatrix.get(s,l))?u<<1|1:u<<1}readCodewords(){const s=this.readFormatInformation(),l=this.readVersion(),u=It.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,f);const p=l.buildFunctionPattern();let y=!0;const v=new Uint8Array(l.getTotalCodewords());let I=0,C=0,O=0;for(let U=f-1;U>0;U-=2){U===6&&U--;for(let q=0;q<f;q++){const J=y?f-1-q:q;for(let le=0;le<2;le++)p.get(U-le,J)||(O++,C<<=1,this.bitMatrix.get(U-le,J)&&(C|=1),O===8&&(v[I++]=C,O=0,C=0))}y=!y}if(I!==l.getTotalCodewords())throw new F;return v}remask(){if(this.parsedFormatInfo===null)return;const s=It.values[this.parsedFormatInfo.getDataMask()],l=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,l)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let l=0,u=s.getWidth();l<u;l++)for(let f=l+1,p=s.getHeight();f<p;f++)s.get(l,f)!==s.get(f,l)&&(s.flip(f,l),s.flip(l,f))}}class Qa{constructor(s,l){this.numDataCodewords=s,this.codewords=l}static getDataBlocks(s,l,u){if(s.length!==l.getTotalCodewords())throw new E;const f=l.getECBlocksForLevel(u);let p=0;const y=f.getECBlocks();for(const le of y)p+=le.getCount();const v=new Array(p);let I=0;for(const le of y)for(let ue=0;ue<le.getCount();ue++){const fe=le.getDataCodewords(),Ee=f.getECCodewordsPerBlock()+fe;v[I++]=new Qa(fe,new Uint8Array(Ee))}const C=v[0].codewords.length;let O=v.length-1;for(;O>=0&&v[O].codewords.length!==C;)O--;O++;const U=C-f.getECCodewordsPerBlock();let q=0;for(let le=0;le<U;le++)for(let ue=0;ue<I;ue++)v[ue].codewords[le]=s[q++];for(let le=O;le<I;le++)v[le].codewords[U]=s[q++];const J=v[0].codewords.length;for(let le=U;le<J;le++)for(let ue=0;ue<I;ue++){const fe=ue<O?le:le+1;v[ue].codewords[fe]=s[q++]}return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Wr;(function(j){j[j.TERMINATOR=0]="TERMINATOR",j[j.NUMERIC=1]="NUMERIC",j[j.ALPHANUMERIC=2]="ALPHANUMERIC",j[j.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",j[j.BYTE=4]="BYTE",j[j.ECI=5]="ECI",j[j.KANJI=6]="KANJI",j[j.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",j[j.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",j[j.HANZI=9]="HANZI"})(Wr||(Wr={}));class ut{constructor(s,l,u,f){this.value=s,this.stringValue=l,this.characterCountBitsForVersions=u,this.bits=f,ut.FOR_BITS.set(f,this),ut.FOR_VALUE.set(s,this)}static forBits(s){const l=ut.FOR_BITS.get(s);if(l===void 0)throw new E;return l}getCharacterCountBits(s){const l=s.getVersionNumber();let u;return l<=9?u=0:l<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof ut))return!1;const l=s;return this.value===l.value}toString(){return this.stringValue}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.TERMINATOR=new ut(Wr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ut.NUMERIC=new ut(Wr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ut.ALPHANUMERIC=new ut(Wr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ut.STRUCTURED_APPEND=new ut(Wr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ut.BYTE=new ut(Wr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ut.ECI=new ut(Wr.ECI,"ECI",Int32Array.from([0,0,0]),7),ut.KANJI=new ut(Wr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ut.FNC1_FIRST_POSITION=new ut(Wr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ut.FNC1_SECOND_POSITION=new ut(Wr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ut.HANZI=new ut(Wr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Sn{static decode(s,l,u,f){const p=new Xa(s);let y=new K;const v=new Array;let I=-1,C=-1;try{let O=null,U=!1,q;do{if(p.available()<4)q=ut.TERMINATOR;else{const J=p.readBits(4);q=ut.forBits(J)}switch(q){case ut.TERMINATOR:break;case ut.FNC1_FIRST_POSITION:case ut.FNC1_SECOND_POSITION:U=!0;break;case ut.STRUCTURED_APPEND:if(p.available()<16)throw new F;I=p.readBits(8),C=p.readBits(8);break;case ut.ECI:const J=Sn.parseECIValue(p);if(O=H.getCharacterSetECIByValue(J),O===null)throw new F;break;case ut.HANZI:const le=p.readBits(4),ue=p.readBits(q.getCharacterCountBits(l));le===Sn.GB2312_SUBSET&&Sn.decodeHanziSegment(p,y,ue);break;default:const fe=p.readBits(q.getCharacterCountBits(l));switch(q){case ut.NUMERIC:Sn.decodeNumericSegment(p,y,fe);break;case ut.ALPHANUMERIC:Sn.decodeAlphanumericSegment(p,y,fe,U);break;case ut.BYTE:Sn.decodeByteSegment(p,y,fe,O,v,f);break;case ut.KANJI:Sn.decodeKanjiSegment(p,y,fe);break;default:throw new F}break}}while(q!==ut.TERMINATOR)}catch{throw new F}return new at(s,y.toString(),v.length===0?null:v,u===null?null:u.toString(),I,C)}static decodeHanziSegment(s,l,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let p=0;for(;u>0;){const y=s.readBits(13);let v=y/96<<8&4294967295|y%96;v<959?v+=41377:v+=42657,f[p]=v>>8&255,f[p+1]=v&255,p+=2,u--}try{l.append(ne.decode(f,te.GB2312))}catch(y){throw new F(y)}}static decodeKanjiSegment(s,l,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let p=0;for(;u>0;){const y=s.readBits(13);let v=y/192<<8&4294967295|y%192;v<7936?v+=33088:v+=49472,f[p]=v>>8,f[p+1]=v,p+=2,u--}try{l.append(ne.decode(f,te.SHIFT_JIS))}catch(y){throw new F(y)}}static decodeByteSegment(s,l,u,f,p,y){if(8*u>s.available())throw new F;const v=new Uint8Array(u);for(let C=0;C<u;C++)v[C]=s.readBits(8);let I;f===null?I=te.guessEncoding(v,y):I=f.getName();try{l.append(ne.decode(v,I))}catch(C){throw new F(C)}p.push(v)}static toAlphaNumericChar(s){if(s>=Sn.ALPHANUMERIC_CHARS.length)throw new F;return Sn.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,l,u,f){const p=l.length();for(;u>1;){if(s.available()<11)throw new F;const y=s.readBits(11);l.append(Sn.toAlphaNumericChar(Math.floor(y/45))),l.append(Sn.toAlphaNumericChar(y%45)),u-=2}if(u===1){if(s.available()<6)throw new F;l.append(Sn.toAlphaNumericChar(s.readBits(6)))}if(f)for(let y=p;y<l.length();y++)l.charAt(y)==="%"&&(y<l.length()-1&&l.charAt(y+1)==="%"?l.deleteCharAt(y+1):l.setCharAt(y,""))}static decodeNumericSegment(s,l,u){for(;u>=3;){if(s.available()<10)throw new F;const f=s.readBits(10);if(f>=1e3)throw new F;l.append(Sn.toAlphaNumericChar(Math.floor(f/100))),l.append(Sn.toAlphaNumericChar(Math.floor(f/10)%10)),l.append(Sn.toAlphaNumericChar(f%10)),u-=3}if(u===2){if(s.available()<7)throw new F;const f=s.readBits(7);if(f>=100)throw new F;l.append(Sn.toAlphaNumericChar(Math.floor(f/10))),l.append(Sn.toAlphaNumericChar(f%10))}else if(u===1){if(s.available()<4)throw new F;const f=s.readBits(4);if(f>=10)throw new F;l.append(Sn.toAlphaNumericChar(f))}}static parseECIValue(s){const l=s.readBits(8);if((l&128)===0)return l&127;if((l&192)===128){const u=s.readBits(8);return(l&63)<<8&4294967295|u}if((l&224)===192){const u=s.readBits(16);return(l&31)<<16&4294967295|u}throw new F}}Sn.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Sn.GB2312_SUBSET=1;class sc{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const l=s[0];s[0]=s[2],s[2]=l}}class oc{constructor(){this.rsDecoder=new Dr(ht.QR_CODE_FIELD_256)}decodeBooleanArray(s,l){return this.decodeBitMatrix(we.parseFromBooleanArray(s),l)}decodeBitMatrix(s,l){const u=new So(s);let f=null;try{return this.decodeBitMatrixParser(u,l)}catch(p){f=p}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const p=this.decodeBitMatrixParser(u,l);return p.setOther(new sc(!0)),p}catch(p){throw f!==null?f:p}}decodeBitMatrixParser(s,l){const u=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),p=s.readCodewords(),y=Qa.getDataBlocks(p,u,f);let v=0;for(const O of y)v+=O.getNumDataCodewords();const I=new Uint8Array(v);let C=0;for(const O of y){const U=O.getCodewords(),q=O.getNumDataCodewords();this.correctErrors(U,q);for(let J=0;J<q;J++)I[C++]=U[J]}return Sn.decode(I,u,f,l)}correctErrors(s,l){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-l)}catch{throw new R}for(let f=0;f<l;f++)s[f]=u[f]}}class Zi extends Xe{constructor(s,l,u){super(s,l),this.estimatedModuleSize=u}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=(this.getX()+l)/2,p=(this.getY()+s)/2,y=(this.estimatedModuleSize+u)/2;return new Zi(f,p,y)}}class hr{constructor(s,l,u,f,p,y,v){this.image=s,this.startX=l,this.startY=u,this.width=f,this.height=p,this.moduleSize=y,this.resultPointCallback=v,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,l=this.height,u=this.width,f=s+u,p=this.startY+l/2,y=new Int32Array(3),v=this.image;for(let I=0;I<l;I++){const C=p+((I&1)===0?Math.floor((I+1)/2):-Math.floor((I+1)/2));y[0]=0,y[1]=0,y[2]=0;let O=s;for(;O<f&&!v.get(O,C);)O++;let U=0;for(;O<f;){if(v.get(O,C))if(U===1)y[1]++;else if(U===2){if(this.foundPatternCross(y)){const q=this.handlePossibleCenter(y,C,O);if(q!==null)return q}y[0]=y[2],y[1]=1,y[2]=0,U=1}else y[++U]++;else U===1&&U++,y[U]++;O++}if(this.foundPatternCross(y)){const q=this.handlePossibleCenter(y,C,f);if(q!==null)return q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(s,l){return l-s[2]-s[1]/2}foundPatternCross(s){const l=this.moduleSize,u=l/2;for(let f=0;f<3;f++)if(Math.abs(l-s[f])>=u)return!1;return!0}crossCheckVertical(s,l,u,f){const p=this.image,y=p.getHeight(),v=this.crossCheckStateCount;v[0]=0,v[1]=0,v[2]=0;let I=s;for(;I>=0&&p.get(l,I)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&!p.get(l,I)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&p.get(l,I)&&v[1]<=u;)v[1]++,I++;if(I===y||v[1]>u)return NaN;for(;I<y&&!p.get(l,I)&&v[2]<=u;)v[2]++,I++;if(v[2]>u)return NaN;const C=v[0]+v[1]+v[2];return 5*Math.abs(C-f)>=2*f?NaN:this.foundPatternCross(v)?hr.centerFromEnd(v,I):NaN}handlePossibleCenter(s,l,u){const f=s[0]+s[1]+s[2],p=hr.centerFromEnd(s,u),y=this.crossCheckVertical(l,p,2*s[1],f);if(!isNaN(y)){const v=(s[0]+s[1]+s[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(v,y,p))return C.combineEstimate(y,p,v);const I=new Zi(p,y,v);this.possibleCenters.push(I),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(I)}return null}}class Ui extends Xe{constructor(s,l,u,f){super(s,l),this.estimatedModuleSize=u,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,l,u){if(Math.abs(l-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,l,u){const f=this.count+1,p=(this.count*this.getX()+l)/f,y=(this.count*this.getY()+s)/f,v=(this.count*this.estimatedModuleSize+u)/f;return new Ui(p,y,v,f)}}class ys{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nn{constructor(s,l){this.image=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=l}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const l=s!=null&&s.get(ie.TRY_HARDER)!==void 0,u=s!=null&&s.get(ie.PURE_BARCODE)!==void 0,f=this.image,p=f.getHeight(),y=f.getWidth();let v=Math.floor(3*p/(4*Nn.MAX_MODULES));(v<Nn.MIN_SKIP||l)&&(v=Nn.MIN_SKIP);let I=!1;const C=new Int32Array(5);for(let U=v-1;U<p&&!I;U+=v){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let q=0;for(let J=0;J<y;J++)if(f.get(J,U))(q&1)===1&&q++,C[q]++;else if((q&1)===0)if(q===4)if(Nn.foundPatternCross(C)){if(this.handlePossibleCenter(C,U,J,u)===!0)if(v=2,this.hasSkipped===!0)I=this.haveMultiplyConfirmedCenters();else{const ue=this.findRowSkip();ue>C[2]&&(U+=ue-C[2]-v,J=y-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,q=3;continue}q=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,q=3;else C[++q]++;else C[q]++;Nn.foundPatternCross(C)&&this.handlePossibleCenter(C,U,y,u)===!0&&(v=C[0],this.hasSkipped&&(I=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Xe.orderBestPatterns(O),new ys(O)}static centerFromEnd(s,l){return l-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let l=0;for(let p=0;p<5;p++){const y=s[p];if(y===0)return!1;l+=y}if(l<7)return!1;const u=l/7,f=u/2;return Math.abs(u-s[0])<f&&Math.abs(u-s[1])<f&&Math.abs(3*u-s[2])<3*f&&Math.abs(u-s[3])<f&&Math.abs(u-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,l,u,f){const p=this.getCrossCheckStateCount();let y=0;const v=this.image;for(;s>=y&&l>=y&&v.get(l-y,s-y);)p[2]++,y++;if(s<y||l<y)return!1;for(;s>=y&&l>=y&&!v.get(l-y,s-y)&&p[1]<=u;)p[1]++,y++;if(s<y||l<y||p[1]>u)return!1;for(;s>=y&&l>=y&&v.get(l-y,s-y)&&p[0]<=u;)p[0]++,y++;if(p[0]>u)return!1;const I=v.getHeight(),C=v.getWidth();for(y=1;s+y<I&&l+y<C&&v.get(l+y,s+y);)p[2]++,y++;if(s+y>=I||l+y>=C)return!1;for(;s+y<I&&l+y<C&&!v.get(l+y,s+y)&&p[3]<u;)p[3]++,y++;if(s+y>=I||l+y>=C||p[3]>=u)return!1;for(;s+y<I&&l+y<C&&v.get(l+y,s+y)&&p[4]<u;)p[4]++,y++;if(p[4]>=u)return!1;const O=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(O-f)<2*f&&Nn.foundPatternCross(p)}crossCheckVertical(s,l,u,f){const p=this.image,y=p.getHeight(),v=this.getCrossCheckStateCount();let I=s;for(;I>=0&&p.get(l,I);)v[2]++,I--;if(I<0)return NaN;for(;I>=0&&!p.get(l,I)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&p.get(l,I)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&p.get(l,I);)v[2]++,I++;if(I===y)return NaN;for(;I<y&&!p.get(l,I)&&v[3]<u;)v[3]++,I++;if(I===y||v[3]>=u)return NaN;for(;I<y&&p.get(l,I)&&v[4]<u;)v[4]++,I++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=2*f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,I):NaN}crossCheckHorizontal(s,l,u,f){const p=this.image,y=p.getWidth(),v=this.getCrossCheckStateCount();let I=s;for(;I>=0&&p.get(I,l);)v[2]++,I--;if(I<0)return NaN;for(;I>=0&&!p.get(I,l)&&v[1]<=u;)v[1]++,I--;if(I<0||v[1]>u)return NaN;for(;I>=0&&p.get(I,l)&&v[0]<=u;)v[0]++,I--;if(v[0]>u)return NaN;for(I=s+1;I<y&&p.get(I,l);)v[2]++,I++;if(I===y)return NaN;for(;I<y&&!p.get(I,l)&&v[3]<u;)v[3]++,I++;if(I===y||v[3]>=u)return NaN;for(;I<y&&p.get(I,l)&&v[4]<u;)v[4]++,I++;if(v[4]>=u)return NaN;const C=v[0]+v[1]+v[2]+v[3]+v[4];return 5*Math.abs(C-f)>=f?NaN:Nn.foundPatternCross(v)?Nn.centerFromEnd(v,I):NaN}handlePossibleCenter(s,l,u,f){const p=s[0]+s[1]+s[2]+s[3]+s[4];let y=Nn.centerFromEnd(s,u),v=this.crossCheckVertical(l,Math.floor(y),s[2],p);if(!isNaN(v)&&(y=this.crossCheckHorizontal(Math.floor(y),Math.floor(v),s[2],p),!isNaN(y)&&(!f||this.crossCheckDiagonal(Math.floor(v),Math.floor(y),s[2],p)))){const I=p/7;let C=!1;const O=this.possibleCenters;for(let U=0,q=O.length;U<q;U++){const J=O[U];if(J.aboutEquals(I,v,y)){O[U]=J.combineEstimate(v,y,I),C=!0;break}}if(!C){const U=new Ui(y,v,I);O.push(U),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(U)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let l=null;for(const u of this.possibleCenters)if(u.getCount()>=Nn.CENTER_QUORUM)if(l==null)l=u;else return this.hasSkipped=!0,Math.floor((Math.abs(l.getX()-u.getX())-Math.abs(l.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,l=0;const u=this.possibleCenters.length;for(const y of this.possibleCenters)y.getCount()>=Nn.CENTER_QUORUM&&(s++,l+=y.getEstimatedModuleSize());if(s<3)return!1;const f=l/u;let p=0;for(const y of this.possibleCenters)p+=Math.abs(y.getEstimatedModuleSize()-f);return p<=.05*l}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new se;const l=this.possibleCenters;let u;if(s>3){let f=0,p=0;for(const I of this.possibleCenters){const C=I.getEstimatedModuleSize();f+=C,p+=C*C}u=f/s;let y=Math.sqrt(p/s-u*u);l.sort((I,C)=>{const O=Math.abs(C.getEstimatedModuleSize()-u),U=Math.abs(I.getEstimatedModuleSize()-u);return O<U?-1:O>U?1:0});const v=Math.max(.2*u,y);for(let I=0;I<l.length&&l.length>3;I++){const C=l[I];Math.abs(C.getEstimatedModuleSize()-u)>v&&(l.splice(I,1),I--)}}if(l.length>3){let f=0;for(const p of l)f+=p.getEstimatedModuleSize();u=f/l.length,l.sort((p,y)=>{if(y.getCount()===p.getCount()){const v=Math.abs(y.getEstimatedModuleSize()-u),I=Math.abs(p.getEstimatedModuleSize()-u);return v<I?1:v>I?-1:0}else return y.getCount()-p.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]}}Nn.CENTER_QUORUM=2,Nn.MIN_SKIP=3,Nn.MAX_MODULES=57;class Jr{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(ie.NEED_RESULT_POINT_CALLBACK);const u=new Nn(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(u)}processFinderPatternInfo(s){const l=s.getTopLeft(),u=s.getTopRight(),f=s.getBottomLeft(),p=this.calculateModuleSize(l,u,f);if(p<1)throw new se("No pattern found in proccess finder.");const y=Jr.computeDimension(l,u,f,p),v=$e.getProvisionalVersionForDimension(y),I=v.getDimensionForVersion()-7;let C=null;if(v.getAlignmentPatternCenters().length>0){const J=u.getX()-l.getX()+f.getX(),le=u.getY()-l.getY()+f.getY(),ue=1-3/I,fe=Math.floor(l.getX()+ue*(J-l.getX())),Ee=Math.floor(l.getY()+ue*(le-l.getY()));for(let Fe=4;Fe<=16;Fe<<=1)try{C=this.findAlignmentInRegion(p,fe,Ee,Fe);break}catch(je){if(!(je instanceof se))throw je}}const O=Jr.createTransform(l,u,f,C,y),U=Jr.sampleGrid(this.image,O,y);let q;return C===null?q=[f,l,u]:q=[f,l,u,C],new Xn(U,q)}static createTransform(s,l,u,f,p){const y=p-3.5;let v,I,C,O;return f!==null?(v=f.getX(),I=f.getY(),C=y-3,O=C):(v=l.getX()-s.getX()+u.getX(),I=l.getY()-s.getY()+u.getY(),C=y,O=y),Wt.quadrilateralToQuadrilateral(3.5,3.5,y,3.5,C,O,3.5,y,s.getX(),s.getY(),l.getX(),l.getY(),v,I,u.getX(),u.getY())}static sampleGrid(s,l,u){return Er.getInstance().sampleGridWithTransform(s,u,u,l)}static computeDimension(s,l,u,f){const p=pt.round(Xe.distance(s,l)/f),y=pt.round(Xe.distance(s,u)/f);let v=Math.floor((p+y)/2)+7;switch(v&3){case 0:v++;break;case 2:v--;break;case 3:throw new se("Dimensions could be not found.")}return v}calculateModuleSize(s,l,u){return(this.calculateModuleSizeOneWay(s,l)+this.calculateModuleSizeOneWay(s,u))/2}calculateModuleSizeOneWay(s,l){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(l.getX()),Math.floor(l.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(l.getX()),Math.floor(l.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(u)?f/7:isNaN(f)?u/7:(u+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,l,u,f){let p=this.sizeOfBlackWhiteBlackRun(s,l,u,f),y=1,v=s-(u-s);v<0?(y=s/(s-v),v=0):v>=this.image.getWidth()&&(y=(this.image.getWidth()-1-s)/(v-s),v=this.image.getWidth()-1);let I=Math.floor(l-(f-l)*y);return y=1,I<0?(y=l/(l-I),I=0):I>=this.image.getHeight()&&(y=(this.image.getHeight()-1-l)/(I-l),I=this.image.getHeight()-1),v=Math.floor(s+(v-s)*y),p+=this.sizeOfBlackWhiteBlackRun(s,l,v,I),p-1}sizeOfBlackWhiteBlackRun(s,l,u,f){const p=Math.abs(f-l)>Math.abs(u-s);if(p){let J=s;s=l,l=J,J=u,u=f,f=J}const y=Math.abs(u-s),v=Math.abs(f-l);let I=-y/2;const C=s<u?1:-1,O=l<f?1:-1;let U=0;const q=u+C;for(let J=s,le=l;J!==q;J+=C){const ue=p?le:J,fe=p?J:le;if(U===1===this.image.get(ue,fe)){if(U===2)return pt.distance(J,le,s,l);U++}if(I+=v,I>0){if(le===f)break;le+=O,I-=y}}return U===2?pt.distance(u+C,f,s,l):NaN}findAlignmentInRegion(s,l,u,f){const p=Math.floor(f*s),y=Math.max(0,l-p),v=Math.min(this.image.getWidth()-1,l+p);if(v-y<s*3)throw new se("Alignment top exceeds estimated module size.");const I=Math.max(0,u-p),C=Math.min(this.image.getHeight()-1,u+p);if(C-I<s*3)throw new se("Alignment bottom exceeds estimated module size.");return new hr(this.image,y,I,v-y,C-I,s,this.resultPointCallback).find()}}class Hr{constructor(){this.decoder=new oc}getDecoder(){return this.decoder}decode(s,l){let u,f;if(l!=null&&l.get(ie.PURE_BARCODE)!==void 0){const I=Hr.extractPureBits(s.getBlackMatrix());u=this.decoder.decodeBitMatrix(I,l),f=Hr.NO_POINTS}else{const I=new Jr(s.getBlackMatrix()).detect(l);u=this.decoder.decodeBitMatrix(I.getBits(),l),f=I.getPoints()}u.getOther()instanceof sc&&u.getOther().applyMirroredCorrection(f);const p=new Le(u.getText(),u.getRawBytes(),void 0,f,Re.QR_CODE,void 0),y=u.getByteSegments();y!==null&&p.putMetadata(Ge.BYTE_SEGMENTS,y);const v=u.getECLevel();return v!==null&&p.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v),u.hasStructuredAppend()&&(p.putMetadata(Ge.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),p.putMetadata(Ge.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),p}reset(){}static extractPureBits(s){const l=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(l===null||u===null)throw new se;const f=this.moduleSize(l,s);let p=l[1],y=u[1],v=l[0],I=u[0];if(v>=I||p>=y)throw new se;if(y-p!==I-v&&(I=v+(y-p),I>=s.getWidth()))throw new se;const C=Math.round((I-v+1)/f),O=Math.round((y-p+1)/f);if(C<=0||O<=0)throw new se;if(O!==C)throw new se;const U=Math.floor(f/2);p+=U,v+=U;const q=v+Math.floor((C-1)*f)-I;if(q>0){if(q>U)throw new se;v-=q}const J=p+Math.floor((O-1)*f)-y;if(J>0){if(J>U)throw new se;p-=J}const le=new we(C,O);for(let ue=0;ue<O;ue++){const fe=p+Math.floor(ue*f);for(let Ee=0;Ee<C;Ee++)s.get(v+Math.floor(Ee*f),fe)&&le.set(Ee,ue)}return le}static moduleSize(s,l){const u=l.getHeight(),f=l.getWidth();let p=s[0],y=s[1],v=!0,I=0;for(;p<f&&y<u;){if(v!==l.get(p,y)){if(++I===5)break;v=!v}p++,y++}if(p===f||y===u)throw new se;return(p-s[0])/7}}Hr.NO_POINTS=new Array;class xt{PDF417Common(){}static getBitCountSum(s){return pt.sum(s)}static toIntArray(s){if(s==null||!s.length)return xt.EMPTY_INT_ARRAY;const l=new Int32Array(s.length);let u=0;for(const f of s)l[u++]=f;return l}static getCodeword(s){const l=z.binarySearch(xt.SYMBOL_TABLE,s&262143);return l<0?-1:(xt.CODEWORD_TABLE[l]-1)%xt.NUMBER_OF_CODEWORDS}}xt.NUMBER_OF_CODEWORDS=929,xt.MAX_CODEWORDS_IN_BARCODE=xt.NUMBER_OF_CODEWORDS-1,xt.MIN_ROWS_IN_BARCODE=3,xt.MAX_ROWS_IN_BARCODE=90,xt.MODULES_IN_CODEWORD=17,xt.MODULES_IN_STOP_PATTERN=18,xt.BARS_IN_MODULE=8,xt.EMPTY_INT_ARRAY=new Int32Array([]),xt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class vu{constructor(s,l){this.bits=s,this.points=l}getBits(){return this.bits}getPoints(){return this.points}}class gt{static detectMultiple(s,l,u){let f=s.getBlackMatrix(),p=gt.detect(u,f);return p.length||(f=f.clone(),f.rotate180(),p=gt.detect(u,f)),new vu(f,p)}static detect(s,l){const u=new Array;let f=0,p=0,y=!1;for(;f<l.getHeight();){const v=gt.findVertices(l,f,p);if(v[0]==null&&v[3]==null){if(!y)break;y=!1,p=0;for(const I of u)I[1]!=null&&(f=Math.trunc(Math.max(f,I[1].getY()))),I[3]!=null&&(f=Math.max(f,Math.trunc(I[3].getY())));f+=gt.ROW_STEP;continue}if(y=!0,u.push(v),!s)break;v[2]!=null?(p=Math.trunc(v[2].getX()),f=Math.trunc(v[2].getY())):(p=Math.trunc(v[4].getX()),f=Math.trunc(v[4].getY()))}return u}static findVertices(s,l,u){const f=s.getHeight(),p=s.getWidth(),y=new Array(8);return gt.copyToResult(y,gt.findRowsWithPattern(s,f,p,l,u,gt.START_PATTERN),gt.INDEXES_START_PATTERN),y[4]!=null&&(u=Math.trunc(y[4].getX()),l=Math.trunc(y[4].getY())),gt.copyToResult(y,gt.findRowsWithPattern(s,f,p,l,u,gt.STOP_PATTERN),gt.INDEXES_STOP_PATTERN),y}static copyToResult(s,l,u){for(let f=0;f<u.length;f++)s[u[f]]=l[f]}static findRowsWithPattern(s,l,u,f,p,y){const v=new Array(4);let I=!1;const C=new Int32Array(y.length);for(;f<l;f+=gt.ROW_STEP){let U=gt.findGuardPattern(s,p,f,u,!1,y,C);if(U!=null){for(;f>0;){const q=gt.findGuardPattern(s,p,--f,u,!1,y,C);if(q!=null)U=q;else{f++;break}}v[0]=new Xe(U[0],f),v[1]=new Xe(U[1],f),I=!0;break}}let O=f+1;if(I){let U=0,q=Int32Array.from([Math.trunc(v[0].getX()),Math.trunc(v[1].getX())]);for(;O<l;O++){const J=gt.findGuardPattern(s,q[0],O,u,!1,y,C);if(J!=null&&Math.abs(q[0]-J[0])<gt.MAX_PATTERN_DRIFT&&Math.abs(q[1]-J[1])<gt.MAX_PATTERN_DRIFT)q=J,U=0;else{if(U>gt.SKIPPED_ROW_COUNT_MAX)break;U++}}O-=U+1,v[2]=new Xe(q[0],O),v[3]=new Xe(q[1],O)}return O-f<gt.BARCODE_MIN_HEIGHT&&z.fill(v,null),v}static findGuardPattern(s,l,u,f,p,y,v){z.fillWithin(v,0,v.length,0);let I=l,C=0;for(;s.get(I,u)&&I>0&&C++<gt.MAX_PIXEL_DRIFT;)I--;let O=I,U=0,q=y.length;for(let J=p;O<f;O++)if(s.get(O,u)!==J)v[U]++;else{if(U===q-1){if(gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return new Int32Array([I,O]);I+=v[0]+v[1],D.arraycopy(v,2,v,0,U-1),v[U-1]=0,v[U]=0,U--}else U++;v[U]=1,J=!J}return U===q-1&&gt.patternMatchVariance(v,y,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE?new Int32Array([I,O-1]):null}static patternMatchVariance(s,l,u){let f=s.length,p=0,y=0;for(let C=0;C<f;C++)p+=s[C],y+=l[C];if(p<y)return 1/0;let v=p/y;u*=v;let I=0;for(let C=0;C<f;C++){let O=s[C],U=l[C]*v,q=O>U?O-U:U-O;if(q>u)return 1/0;I+=q}return I/p}}gt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),gt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),gt.MAX_AVG_VARIANCE=.42,gt.MAX_INDIVIDUAL_VARIANCE=.8,gt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),gt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),gt.MAX_PIXEL_DRIFT=3,gt.MAX_PATTERN_DRIFT=5,gt.SKIPPED_ROW_COUNT_MAX=25,gt.ROW_STEP=5,gt.BARCODE_MIN_HEIGHT=10;class Tr{constructor(s,l){if(l.length===0)throw new E;this.field=s;let u=l.length;if(u>1&&l[0]===0){let f=1;for(;f<u&&l[f]===0;)f++;f===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-f),D.arraycopy(l,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=l}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let p of this.coefficients)f=this.field.add(f,p);return f}let l=this.coefficients[0],u=this.coefficients.length;for(let f=1;f<u;f++)l=this.field.add(this.field.multiply(s,l),this.coefficients[f]);return l}add(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let l=this.coefficients,u=s.coefficients;if(l.length>u.length){let y=l;l=u,u=y}let f=new Int32Array(u.length),p=u.length-l.length;D.arraycopy(u,0,f,0,p);for(let y=p;y<u.length;y++)f[y]=this.field.add(l[y-p],u[y]);return new Tr(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Tr?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Tr(this.field,new Int32Array([0]));let l=this.coefficients,u=l.length,f=s.coefficients,p=f.length,y=new Int32Array(u+p-1);for(let v=0;v<u;v++){let I=l[v];for(let C=0;C<p;C++)y[v+C]=this.field.add(y[v+C],this.field.multiply(I,f[C]))}return new Tr(this.field,y)}negative(){let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.subtract(0,this.coefficients[u]);return new Tr(this.field,l)}multiplyScalar(s){if(s===0)return new Tr(this.field,new Int32Array([0]));if(s===1)return this;let l=this.coefficients.length,u=new Int32Array(l);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new Tr(this.field,u)}multiplyByMonomial(s,l){if(s<0)throw new E;if(l===0)return new Tr(this.field,new Int32Array([0]));let u=this.coefficients.length,f=new Int32Array(u+s);for(let p=0;p<u;p++)f[p]=this.field.multiply(this.coefficients[p],l);return new Tr(this.field,f)}toString(){let s=new K;for(let l=this.getDegree();l>=0;l--){let u=this.getCoefficient(l);u!==0&&(u<0?(s.append(" - "),u=-u):s.length()>0&&s.append(" + "),(l===0||u!==1)&&s.append(u),l!==0&&(l===1?s.append("x"):(s.append("x^"),s.append(l))))}return s.toString()}}class _u{add(s,l){return(s+l)%this.modulus}subtract(s,l){return(this.modulus+s-l)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}inverse(s){if(s===0)throw new bt;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,l){return s===0||l===0?0:this.expTable[(this.logTable[s]+this.logTable[l])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class xs extends _u{constructor(s,l){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let u=1;for(let f=0;f<s;f++)this.expTable[f]=u,u=u*l%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new Tr(this,new Int32Array([0])),this.one=new Tr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,l){if(s<0)throw new E;if(l===0)return this.zero;let u=new Int32Array(s+1);return u[0]=l,new Tr(this,u)}}xs.PDF417_GF=new xs(xt.NUMBER_OF_CODEWORDS,3);class Ro{constructor(){this.field=xs.PDF417_GF}decode(s,l,u){let f=new Tr(this.field,s),p=new Int32Array(l),y=!1;for(let le=l;le>0;le--){let ue=f.evaluateAt(this.field.exp(le));p[l-le]=ue,ue!==0&&(y=!0)}if(!y)return 0;let v=this.field.getOne();if(u!=null)for(const le of u){let ue=this.field.exp(s.length-1-le),fe=new Tr(this.field,new Int32Array([this.field.subtract(0,ue),1]));v=v.multiply(fe)}let I=new Tr(this.field,p),C=this.runEuclideanAlgorithm(this.field.buildMonomial(l,1),I,l),O=C[0],U=C[1],q=this.findErrorLocations(O),J=this.findErrorMagnitudes(U,O,q);for(let le=0;le<q.length;le++){let ue=s.length-1-this.field.log(q[le]);if(ue<0)throw R.getChecksumInstance();s[ue]=this.field.subtract(s[ue],J[le])}return q.length}runEuclideanAlgorithm(s,l,u){if(s.getDegree()<l.getDegree()){let q=s;s=l,l=q}let f=s,p=l,y=this.field.getZero(),v=this.field.getOne();for(;p.getDegree()>=Math.round(u/2);){let q=f,J=y;if(f=p,y=v,f.isZero())throw R.getChecksumInstance();p=q;let le=this.field.getZero(),ue=f.getCoefficient(f.getDegree()),fe=this.field.inverse(ue);for(;p.getDegree()>=f.getDegree()&&!p.isZero();){let Ee=p.getDegree()-f.getDegree(),Fe=this.field.multiply(p.getCoefficient(p.getDegree()),fe);le=le.add(this.field.buildMonomial(Ee,Fe)),p=p.subtract(f.multiplyByMonomial(Ee,Fe))}v=le.multiply(y).subtract(J).negative()}let I=v.getCoefficient(0);if(I===0)throw R.getChecksumInstance();let C=this.field.inverse(I),O=v.multiply(C),U=p.multiply(C);return[O,U]}findErrorLocations(s){let l=s.getDegree(),u=new Int32Array(l),f=0;for(let p=1;p<this.field.getSize()&&f<l;p++)s.evaluateAt(p)===0&&(u[f]=this.field.inverse(p),f++);if(f!==l)throw R.getChecksumInstance();return u}findErrorMagnitudes(s,l,u){let f=l.getDegree(),p=new Int32Array(f);for(let C=1;C<=f;C++)p[f-C]=this.field.multiply(C,l.getCoefficient(C));let y=new Tr(this.field,p),v=u.length,I=new Int32Array(v);for(let C=0;C<v;C++){let O=this.field.inverse(u[C]),U=this.field.subtract(0,s.evaluateAt(O)),q=this.field.inverse(y.evaluateAt(O));I[C]=this.field.multiply(U,q)}return I}}class Bs{constructor(s,l,u,f,p){s instanceof Bs?this.constructor_2(s):this.constructor_1(s,l,u,f,p)}constructor_1(s,l,u,f,p){const y=l==null||u==null,v=f==null||p==null;if(y&&v)throw new se;y?(l=new Xe(0,f.getY()),u=new Xe(0,p.getY())):v&&(f=new Xe(s.getWidth()-1,l.getY()),p=new Xe(s.getWidth()-1,u.getY())),this.image=s,this.topLeft=l,this.bottomLeft=u,this.topRight=f,this.bottomRight=p,this.minX=Math.trunc(Math.min(l.getX(),u.getX())),this.maxX=Math.trunc(Math.max(f.getX(),p.getX())),this.minY=Math.trunc(Math.min(l.getY(),f.getY())),this.maxY=Math.trunc(Math.max(u.getY(),p.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,l){return s==null?l:l==null?s:new Bs(s.image,s.topLeft,s.bottomLeft,l.topRight,l.bottomRight)}addMissingRows(s,l,u){let f=this.topLeft,p=this.bottomLeft,y=this.topRight,v=this.bottomRight;if(s>0){let I=u?this.topLeft:this.topRight,C=Math.trunc(I.getY()-s);C<0&&(C=0);let O=new Xe(I.getX(),C);u?f=O:y=O}if(l>0){let I=u?this.bottomLeft:this.bottomRight,C=Math.trunc(I.getY()+l);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let O=new Xe(I.getX(),C);u?p=O:v=O}return new Bs(this.image,f,p,y,v)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ws{constructor(s,l,u,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=l,this.rowCountLowerPart=u,this.rowCount=l+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ci{constructor(){this.buffer=""}static form(s,l){let u=-1;function f(y,v,I,C,O,U){if(y==="%%")return"%";if(l[++u]===void 0)return;y=C?parseInt(C.substr(1)):void 0;let q=O?parseInt(O.substr(1)):void 0,J;switch(U){case"s":J=l[u];break;case"c":J=l[u][0];break;case"f":J=parseFloat(l[u]).toFixed(y);break;case"p":J=parseFloat(l[u]).toPrecision(y);break;case"e":J=parseFloat(l[u]).toExponential(y);break;case"x":J=parseInt(l[u]).toString(q||16);break;case"d":J=parseFloat(parseInt(l[u],q||10).toPrecision(y)).toFixed(0);break}J=typeof J=="object"?JSON.stringify(J):(+J).toString(q);let le=parseInt(I),ue=I&&I[0]+""=="0"?"0":" ";for(;J.length<le;)J=v!==void 0?J+ue:ue+J;return J}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(p,f)}format(s,...l){this.buffer+=ci.form(s,l)}toString(){return this.buffer}}class zi{constructor(s){this.boundingBox=new Bs(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let l=this.getCodeword(s);if(l!=null)return l;for(let u=1;u<zi.MAX_NEARBY_DISTANCE;u++){let f=this.imageRowToCodewordIndex(s)-u;if(f>=0&&(l=this.codewords[f],l!=null)||(f=this.imageRowToCodewordIndex(s)+u,f<this.codewords.length&&(l=this.codewords[f],l!=null)))return l}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,l){this.codewords[this.imageRowToCodewordIndex(s)]=l}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new ci;let l=0;for(const u of this.codewords){if(u==null){s.format("%3d:    |   %n",l++);continue}s.format("%3d: %3d|%3d%n",l++,u.getRowNumber(),u.getValue())}return s.toString()}}zi.MAX_NEARBY_DISTANCE=5;class Ji{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let l=this.values.get(s);l==null&&(l=0),l++,this.values.set(s,l)}getValue(){let s=-1,l=new Array;for(const[u,f]of this.values.entries()){const p={getKey:()=>u,getValue:()=>f};p.getValue()>s?(s=p.getValue(),l=[],l.push(p.getKey())):p.getValue()===s&&l.push(p.getKey())}return xt.toIntArray(l)}getConfidence(s){return this.values.get(s)}}class kn extends zi{constructor(s,l){super(s),this._isLeft=l}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let l=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(l,s);let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),p=this._isLeft?u.getBottomLeft():u.getBottomRight(),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.imageRowToCodewordIndex(Math.trunc(p.getY())),I=-1,C=1,O=0;for(let U=y;U<v;U++){if(l[U]==null)continue;let q=l[U],J=q.getRowNumber()-I;if(J===0)O++;else if(J===1)C=Math.max(C,O),O=1,I=q.getRowNumber();else if(J<0||q.getRowNumber()>=s.getRowCount()||J>U)l[U]=null;else{let le;C>2?le=(C-2)*J:le=J;let ue=le>=U;for(let fe=1;fe<=le&&!ue;fe++)ue=l[U-fe]!=null;ue?l[U]=null:(I=q.getRowNumber(),O=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let l=new Int32Array(s.getRowCount());for(let u of this.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=l.length)continue;l[f]++}return l}adjustIncompleteIndicatorColumnRowNumbers(s){let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),v=this.getCodewords(),I=-1;for(let C=p;C<y;C++){if(v[C]==null)continue;let O=v[C];O.setRowNumberAsRowIndicatorColumn();let U=O.getRowNumber()-I;U===0||(U===1?I=O.getRowNumber():O.getRowNumber()>=s.getRowCount()?v[C]=null:I=O.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),l=new Ji,u=new Ji,f=new Ji,p=new Ji;for(let v of s){if(v==null)continue;v.setRowNumberAsRowIndicatorColumn();let I=v.getValue()%30,C=v.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:u.setValue(I*3+1);break;case 1:p.setValue(I/3),f.setValue(I%3);break;case 2:l.setValue(I+1);break}}if(l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||p.getValue().length===0||l.getValue()[0]<1||u.getValue()[0]+f.getValue()[0]<xt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+f.getValue()[0]>xt.MAX_ROWS_IN_BARCODE)return null;let y=new ws(l.getValue()[0],u.getValue()[0],f.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(s,y),y}removeIncorrectCodewords(s,l){for(let u=0;u<s.length;u++){let f=s[u];if(s[u]==null)continue;let p=f.getValue()%30,y=f.getRowNumber();if(y>l.getRowCount()){s[u]=null;continue}switch(this._isLeft||(y+=2),y%3){case 0:p*3+1!==l.getRowCountUpperPart()&&(s[u]=null);break;case 1:(Math.trunc(p/3)!==l.getErrorCorrectionLevel()||p%3!==l.getRowCountLowerPart())&&(s[u]=null);break;case 2:p+1!==l.getColumnCount()&&(s[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ca{constructor(s,l){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=l,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=xt.MAX_CODEWORDS_IN_BARCODE,l;do l=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<l);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let l=1;l<this.barcodeColumnCount+1;l++){let u=this.detectionResultColumns[l].getCodewords();for(let f=0;f<u.length;f++)u[f]!=null&&(u[f].hasValidRowNumber()||this.adjustRowNumbers(l,f,u))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<s.length;u++)if(s[u]!=null&&l[u]!=null&&s[u].getRowNumber()===l[u].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let p=this.detectionResultColumns[f].getCodewords()[u];p!=null&&(p.setRowNumber(s[u].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,l=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),p=0;for(let y=this.barcodeColumnCount+1;y>0&&p<this.ADJUST_ROW_NUMBER_SKIP;y--){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(p=ca.adjustRowNumberIfValid(f,p,v),v.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,l=this.detectionResultColumns[0].getCodewords();for(let u=0;u<l.length;u++){if(l[u]==null)continue;let f=l[u].getRowNumber(),p=0;for(let y=1;y<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;y++){let v=this.detectionResultColumns[y].getCodewords()[u];v!=null&&(p=ca.adjustRowNumberIfValid(f,p,v),v.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,l,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(s)?(u.setRowNumber(s),l=0):++l),l}adjustRowNumbers(s,l,u){if(!this.detectionResultColumns[s-1])return;let f=u[l],p=this.detectionResultColumns[s-1].getCodewords(),y=p;this.detectionResultColumns[s+1]!=null&&(y=this.detectionResultColumns[s+1].getCodewords());let v=new Array(14);v[2]=p[l],v[3]=y[l],l>0&&(v[0]=u[l-1],v[4]=p[l-1],v[5]=y[l-1]),l>1&&(v[8]=u[l-2],v[10]=p[l-2],v[11]=y[l-2]),l<u.length-1&&(v[1]=u[l+1],v[6]=p[l+1],v[7]=y[l+1]),l<u.length-2&&(v[9]=u[l+2],v[12]=p[l+2],v[13]=y[l+2]);for(let I of v)if(ca.adjustRowNumber(f,I))return}static adjustRowNumber(s,l){return l==null?!1:l.hasValidRowNumber()&&l.getBucket()===s.getBucket()?(s.setRowNumber(l.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,l){this.detectionResultColumns[s]=l}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let l=new ci;for(let u=0;u<s.getCodewords().length;u++){l.format("CW %3d:",u);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){l.format("    |   ");continue}let p=this.detectionResultColumns[f].getCodewords()[u];if(p==null){l.format("    |   ");continue}l.format(" %3d|%3d",p.getRowNumber(),p.getValue())}l.format("%n")}return l.toString()}}class io{constructor(s,l,u,f){this.rowNumber=io.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(l),this.bucket=Math.trunc(u),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==io.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}io.BARCODE_ROW_UNKNOWN=-1;class fr{static initialize(){for(let s=0;s<xt.SYMBOL_TABLE.length;s++){let l=xt.SYMBOL_TABLE[s],u=l&1;for(let f=0;f<xt.BARS_IN_MODULE;f++){let p=0;for(;(l&1)===u;)p+=1,l>>=1;u=l&1,fr.RATIOS_TABLE[s]||(fr.RATIOS_TABLE[s]=new Array(xt.BARS_IN_MODULE)),fr.RATIOS_TABLE[s][xt.BARS_IN_MODULE-f-1]=Math.fround(p/xt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let l=fr.getDecodedCodewordValue(fr.sampleBitCounts(s));return l!==-1?l:fr.getClosestDecodedValue(s)}static sampleBitCounts(s){let l=pt.sum(s),u=new Int32Array(xt.BARS_IN_MODULE),f=0,p=0;for(let y=0;y<xt.MODULES_IN_CODEWORD;y++){let v=l/(2*xt.MODULES_IN_CODEWORD)+y*l/xt.MODULES_IN_CODEWORD;p+s[f]<=v&&(p+=s[f],f++),u[f]++}return u}static getDecodedCodewordValue(s){let l=fr.getBitValue(s);return xt.getCodeword(l)===-1?-1:l}static getBitValue(s){let l=0;for(let u=0;u<s.length;u++)for(let f=0;f<s[u];f++)l=l<<1|(u%2===0?1:0);return Math.trunc(l)}static getClosestDecodedValue(s){let l=pt.sum(s),u=new Array(xt.BARS_IN_MODULE);if(l>1)for(let y=0;y<u.length;y++)u[y]=Math.fround(s[y]/l);let f=xi.MAX_VALUE,p=-1;this.bSymbolTableReady||fr.initialize();for(let y=0;y<fr.RATIOS_TABLE.length;y++){let v=0,I=fr.RATIOS_TABLE[y];for(let C=0;C<xt.BARS_IN_MODULE;C++){let O=Math.fround(I[C]-u[C]);if(v+=Math.fround(O*O),v>=f)break}v<f&&(f=v,p=xt.SYMBOL_TABLE[y])}return p}}fr.bSymbolTableReady=!1,fr.RATIOS_TABLE=new Array(xt.SYMBOL_TABLE.length).map(j=>new Array(xt.BARS_IN_MODULE));class ua{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Za{static parseLong(s,l=void 0){return parseInt(s,l)}}class Ii extends g{}Ii.kind="NullPointerException";class Ja{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,l,u){if(s==null)throw new Ii;if(l<0||l>s.length||u<0||l+u>s.length||l+u<0)throw new L;if(u===0)return;for(let f=0;f<u;f++)this.write(s[l+f])}flush(){}close(){}}class Ai extends g{}class ac extends Ja{constructor(s=32){if(super(),this.count=0,s<0)throw new E("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let u=this.buf.length<<1;if(u-s<0&&(u=s),u<0){if(s<0)throw new Ai;u=W.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,u)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,l,u){if(l<0||l>s.length||u<0||l+u-s.length>0)throw new L;this.ensureCapacity(this.count+u),D.arraycopy(s,l,this.buf,this.count,u),this.count+=u}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var en;(function(j){j[j.ALPHA=0]="ALPHA",j[j.LOWER=1]="LOWER",j[j.MIXED=2]="MIXED",j[j.PUNCT=3]="PUNCT",j[j.ALPHA_SHIFT=4]="ALPHA_SHIFT",j[j.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(en||(en={}));function vs(){if(typeof window<"u")return window.BigInt||null;if(typeof cm<"u")return cm.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let No;function Dn(j){if(typeof No>"u"&&(No=vs()),No===null)throw new Error("BigInt is not supported!");return No(j)}function _s(){let j=[];j[0]=Dn(1);let s=Dn(900);j[1]=s;for(let l=2;l<16;l++)j[l]=j[l-1]*s;return j}class _e{static decode(s,l){let u=new K(""),f=H.ISO8859_1;u.enableDecoding(f);let p=1,y=s[p++],v=new ua;for(;p<s[0];){switch(y){case _e.TEXT_COMPACTION_MODE_LATCH:p=_e.textCompaction(s,p,u);break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:p=_e.byteCompaction(y,s,f,p,u);break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[p++]);break;case _e.NUMERIC_COMPACTION_MODE_LATCH:p=_e.numericCompaction(s,p,u);break;case _e.ECI_CHARSET:H.getCharacterSetECIByValue(s[p++]);break;case _e.ECI_GENERAL_PURPOSE:p+=2;break;case _e.ECI_USER_DEFINED:p++;break;case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=_e.decodeMacroBlock(s,p,v);break;case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:throw new F;default:p--,p=_e.textCompaction(s,p,u);break}if(p<s.length)y=s[p++];else throw F.getFormatInstance()}if(u.length()===0)throw F.getFormatInstance();let I=new at(null,u.toString(),null,l);return I.setOther(v),I}static decodeMacroBlock(s,l,u){if(l+_e.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw F.getFormatInstance();let f=new Int32Array(_e.NUMBER_OF_SEQUENCE_CODEWORDS);for(let v=0;v<_e.NUMBER_OF_SEQUENCE_CODEWORDS;v++,l++)f[v]=s[l];u.setSegmentIndex(W.parseInt(_e.decodeBase900toBase10(f,_e.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new K;l=_e.textCompaction(s,l,p),u.setFileId(p.toString());let y=-1;for(s[l]===_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(y=l+1);l<s[0];)switch(s[l]){case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(l++,s[l]){case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let v=new K;l=_e.textCompaction(s,l+1,v),u.setFileName(v.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let I=new K;l=_e.textCompaction(s,l+1,I),u.setSender(I.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new K;l=_e.textCompaction(s,l+1,C),u.setAddressee(C.toString());break;case _e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new K;l=_e.numericCompaction(s,l+1,O),u.setSegmentCount(W.parseInt(O.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let U=new K;l=_e.numericCompaction(s,l+1,U),u.setTimestamp(Za.parseLong(U.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let q=new K;l=_e.numericCompaction(s,l+1,q),u.setChecksum(W.parseInt(q.toString()));break;case _e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let J=new K;l=_e.numericCompaction(s,l+1,J),u.setFileSize(Za.parseLong(J.toString()));break;default:throw F.getFormatInstance()}break;case _e.MACRO_PDF417_TERMINATOR:l++,u.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(y!==-1){let v=l-y;u.isLastSegment()&&v--,u.setOptionalData(z.copyOfRange(s,y,y+v))}return l}static textCompaction(s,l,u){let f=new Int32Array((s[0]-l)*2),p=new Int32Array((s[0]-l)*2),y=0,v=!1;for(;l<s[0]&&!v;){let I=s[l++];if(I<_e.TEXT_COMPACTION_MODE_LATCH)f[y]=I/30,f[y+1]=I%30,y+=2;else switch(I){case _e.TEXT_COMPACTION_MODE_LATCH:f[y++]=_e.TEXT_COMPACTION_MODE_LATCH;break;case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,v=!0;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[y]=_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,I=s[l++],p[y]=I,y++;break}}return _e.decodeTextCompaction(f,p,y,u),l}static decodeTextCompaction(s,l,u,f){let p=en.ALPHA,y=en.ALPHA,v=0;for(;v<u;){let I=s[v],C="";switch(p){case en.ALPHA:if(I<26)C=String.fromCharCode(65+I);else switch(I){case 26:C=" ";break;case _e.LL:p=en.LOWER;break;case _e.ML:p=en.MIXED;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.LOWER:if(I<26)C=String.fromCharCode(97+I);else switch(I){case 26:C=" ";break;case _e.AS:y=p,p=en.ALPHA_SHIFT;break;case _e.ML:p=en.MIXED;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.MIXED:if(I<_e.PL)C=_e.MIXED_CHARS[I];else switch(I){case _e.PL:p=en.PUNCT;break;case 26:C=" ";break;case _e.LL:p=en.LOWER;break;case _e.AL:p=en.ALPHA;break;case _e.PS:y=p,p=en.PUNCT_SHIFT;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.PUNCT:if(I<_e.PAL)C=_e.PUNCT_CHARS[I];else switch(I){case _e.PAL:p=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.ALPHA_SHIFT:if(p=y,I<26)C=String.fromCharCode(65+I);else switch(I){case 26:C=" ";break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break;case en.PUNCT_SHIFT:if(p=y,I<_e.PAL)C=_e.PUNCT_CHARS[I];else switch(I){case _e.PAL:p=en.ALPHA;break;case _e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(l[v]);break;case _e.TEXT_COMPACTION_MODE_LATCH:p=en.ALPHA;break}break}C!==""&&f.append(C),v++}}static byteCompaction(s,l,u,f,p){let y=new ac,v=0,I=0,C=!1;switch(s){case _e.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),U=l[f++];for(;f<l[0]&&!C;)switch(O[v++]=U,I=900*I+U,U=l[f++],U){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break;default:if(v%5===0&&v>0){for(let q=0;q<6;++q)y.write(Number(Dn(I)>>Dn(8*(5-q))));I=0,v=0}break}f===l[0]&&U<_e.TEXT_COMPACTION_MODE_LATCH&&(O[v++]=U);for(let q=0;q<v;q++)y.write(O[q]);break;case _e.BYTE_COMPACTION_MODE_LATCH_6:for(;f<l[0]&&!C;){let q=l[f++];if(q<_e.TEXT_COMPACTION_MODE_LATCH)v++,I=900*I+q;else switch(q){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.NUMERIC_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:f--,C=!0;break}if(v%5===0&&v>0){for(let J=0;J<6;++J)y.write(Number(Dn(I)>>Dn(8*(5-J))));I=0,v=0}}break}return p.append(ne.decode(y.toByteArray(),u)),f}static numericCompaction(s,l,u){let f=0,p=!1,y=new Int32Array(_e.MAX_NUMERIC_CODEWORDS);for(;l<s[0]&&!p;){let v=s[l++];if(l===s[0]&&(p=!0),v<_e.TEXT_COMPACTION_MODE_LATCH)y[f]=v,f++;else switch(v){case _e.TEXT_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH:case _e.BYTE_COMPACTION_MODE_LATCH_6:case _e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case _e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case _e.MACRO_PDF417_TERMINATOR:l--,p=!0;break}(f%_e.MAX_NUMERIC_CODEWORDS===0||v===_e.NUMERIC_COMPACTION_MODE_LATCH||p)&&f>0&&(u.append(_e.decodeBase900toBase10(y,f)),f=0)}return l}static decodeBase900toBase10(s,l){let u=Dn(0);for(let p=0;p<l;p++)u+=_e.EXP900[l-p-1]*Dn(s[p]);let f=u.toString();if(f.charAt(0)!=="1")throw new F;return f.substring(1)}}_e.TEXT_COMPACTION_MODE_LATCH=900,_e.BYTE_COMPACTION_MODE_LATCH=901,_e.NUMERIC_COMPACTION_MODE_LATCH=902,_e.BYTE_COMPACTION_MODE_LATCH_6=924,_e.ECI_USER_DEFINED=925,_e.ECI_GENERAL_PURPOSE=926,_e.ECI_CHARSET=927,_e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,_e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,_e.MACRO_PDF417_TERMINATOR=922,_e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,_e.MAX_NUMERIC_CODEWORDS=15,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,_e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,_e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,_e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,_e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,_e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,_e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,_e.PL=25,_e.LL=27,_e.AS=27,_e.ML=28,_e.AL=28,_e.PS=29,_e.PAL=29,_e.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,_e.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",_e.EXP900=vs()?_s():[],_e.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _t{constructor(){}static decode(s,l,u,f,p,y,v){let I=new Bs(s,l,u,f,p),C=null,O=null,U;for(let le=!0;;le=!1){if(l!=null&&(C=_t.getRowIndicatorColumn(s,I,l,!0,y,v)),f!=null&&(O=_t.getRowIndicatorColumn(s,I,f,!1,y,v)),U=_t.merge(C,O),U==null)throw se.getNotFoundInstance();let ue=U.getBoundingBox();if(le&&ue!=null&&(ue.getMinY()<I.getMinY()||ue.getMaxY()>I.getMaxY()))I=ue;else break}U.setBoundingBox(I);let q=U.getBarcodeColumnCount()+1;U.setDetectionResultColumn(0,C),U.setDetectionResultColumn(q,O);let J=C!=null;for(let le=1;le<=q;le++){let ue=J?le:q-le;if(U.getDetectionResultColumn(ue)!==void 0)continue;let fe;ue===0||ue===q?fe=new kn(I,ue===0):fe=new zi(I),U.setDetectionResultColumn(ue,fe);let Ee=-1,Fe=Ee;for(let je=I.getMinY();je<=I.getMaxY();je++){if(Ee=_t.getStartColumn(U,ue,je,J),Ee<0||Ee>I.getMaxX()){if(Fe===-1)continue;Ee=Fe}let Oe=_t.detectCodeword(s,I.getMinX(),I.getMaxX(),J,Ee,je,y,v);Oe!=null&&(fe.setCodeword(je,Oe),Fe=Ee,y=Math.min(y,Oe.getWidth()),v=Math.max(v,Oe.getWidth()))}}return _t.createDecoderResult(U)}static merge(s,l){if(s==null&&l==null)return null;let u=_t.getBarcodeMetadata(s,l);if(u==null)return null;let f=Bs.merge(_t.adjustBoundingBox(s),_t.adjustBoundingBox(l));return new ca(u,f)}static adjustBoundingBox(s){if(s==null)return null;let l=s.getRowHeights();if(l==null)return null;let u=_t.getMax(l),f=0;for(let v of l)if(f+=u-v,v>0)break;let p=s.getCodewords();for(let v=0;f>0&&p[v]==null;v++)f--;let y=0;for(let v=l.length-1;v>=0&&(y+=u-l[v],!(l[v]>0));v--);for(let v=p.length-1;y>0&&p[v]==null;v--)y--;return s.getBoundingBox().addMissingRows(f,y,s.isLeft())}static getMax(s){let l=-1;for(let u of s)l=Math.max(l,u);return l}static getBarcodeMetadata(s,l){let u;if(s==null||(u=s.getBarcodeMetadata())==null)return l==null?null:l.getBarcodeMetadata();let f;return l==null||(f=l.getBarcodeMetadata())==null?u:u.getColumnCount()!==f.getColumnCount()&&u.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&u.getRowCount()!==f.getRowCount()?null:u}static getRowIndicatorColumn(s,l,u,f,p,y){let v=new kn(l,f);for(let I=0;I<2;I++){let C=I===0?1:-1,O=Math.trunc(Math.trunc(u.getX()));for(let U=Math.trunc(Math.trunc(u.getY()));U<=l.getMaxY()&&U>=l.getMinY();U+=C){let q=_t.detectCodeword(s,0,s.getWidth(),f,O,U,p,y);q!=null&&(v.setCodeword(U,q),f?O=q.getStartX():O=q.getEndX())}}return v}static adjustCodewordCount(s,l){let u=l[0][1],f=u.getValue(),p=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-_t.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(p<1||p>xt.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();u.setValue(p)}else f[0]!==p&&u.setValue(p)}static createDecoderResult(s){let l=_t.createBarcodeMatrix(s);_t.adjustCodewordCount(s,l);let u=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),p=[],y=new Array;for(let I=0;I<s.getBarcodeRowCount();I++)for(let C=0;C<s.getBarcodeColumnCount();C++){let O=l[I][C+1].getValue(),U=I*s.getBarcodeColumnCount()+C;O.length===0?u.push(U):O.length===1?f[U]=O[0]:(y.push(U),p.push(O))}let v=new Array(p.length);for(let I=0;I<v.length;I++)v[I]=p[I];return _t.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,xt.toIntArray(u),xt.toIntArray(y),v)}static createDecoderResultFromAmbiguousValues(s,l,u,f,p){let y=new Int32Array(f.length),v=100;for(;v-- >0;){for(let I=0;I<y.length;I++)l[f[I]]=p[I][y[I]];try{return _t.decodeCodewords(l,s,u)}catch(I){if(!(I instanceof R))throw I}if(y.length===0)throw R.getChecksumInstance();for(let I=0;I<y.length;I++)if(y[I]<p[I].length-1){y[I]++;break}else if(y[I]=0,I===y.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(s){let l=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<l.length;f++)for(let p=0;p<l[f].length;p++)l[f][p]=new Ji;let u=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let p of f.getCodewords())if(p!=null){let y=p.getRowNumber();if(y>=0){if(y>=l.length)continue;l[y][u].setValue(p.getValue())}}}u++}return l}static isValidBarcodeColumn(s,l){return l>=0&&l<=s.getBarcodeColumnCount()+1}static getStartColumn(s,l,u,f){let p=f?1:-1,y=null;if(_t.isValidBarcodeColumn(s,l-p)&&(y=s.getDetectionResultColumn(l-p).getCodeword(u)),y!=null)return f?y.getEndX():y.getStartX();if(y=s.getDetectionResultColumn(l).getCodewordNearby(u),y!=null)return f?y.getStartX():y.getEndX();if(_t.isValidBarcodeColumn(s,l-p)&&(y=s.getDetectionResultColumn(l-p).getCodewordNearby(u)),y!=null)return f?y.getEndX():y.getStartX();let v=0;for(;_t.isValidBarcodeColumn(s,l-p);){l-=p;for(let I of s.getDetectionResultColumn(l).getCodewords())if(I!=null)return(f?I.getEndX():I.getStartX())+p*v*(I.getEndX()-I.getStartX());v++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,l,u,f,p,y,v,I){p=_t.adjustCodewordStartColumn(s,l,u,f,p,y);let C=_t.getModuleBitCount(s,l,u,f,p,y);if(C==null)return null;let O,U=pt.sum(C);if(f)O=p+U;else{for(let le=0;le<C.length/2;le++){let ue=C[le];C[le]=C[C.length-1-le],C[C.length-1-le]=ue}O=p,p=O-U}if(!_t.checkCodewordSkew(U,v,I))return null;let q=fr.getDecodedValue(C),J=xt.getCodeword(q);return J===-1?null:new io(p,O,_t.getCodewordBucketNumber(q),J)}static getModuleBitCount(s,l,u,f,p,y){let v=p,I=new Int32Array(8),C=0,O=f?1:-1,U=f;for(;(f?v<u:v>=l)&&C<I.length;)s.get(v,y)===U?(I[C]++,v+=O):(C++,U=!U);return C===I.length||v===(f?u:l)&&C===I.length-1?I:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,l,u,f,p,y){let v=p,I=f?-1:1;for(let C=0;C<2;C++){for(;(f?v>=l:v<u)&&f===s.get(v,y);){if(Math.abs(p-v)>_t.CODEWORD_SKEW_SIZE)return p;v+=I}I=-I,f=!f}return v}static checkCodewordSkew(s,l,u){return l-_t.CODEWORD_SKEW_SIZE<=s&&s<=u+_t.CODEWORD_SKEW_SIZE}static decodeCodewords(s,l,u){if(s.length===0)throw F.getFormatInstance();let f=1<<l+1,p=_t.correctErrors(s,u,f);_t.verifyCodewordCount(s,f);let y=_e.decode(s,""+l);return y.setErrorsCorrected(p),y.setErasures(u.length),y}static correctErrors(s,l,u){if(l!=null&&l.length>u/2+_t.MAX_ERRORS||u<0||u>_t.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return _t.errorCorrection.decode(s,u,l)}static verifyCodewordCount(s,l){if(s.length<4)throw F.getFormatInstance();let u=s[0];if(u>s.length)throw F.getFormatInstance();if(u===0)if(l<s.length)s[0]=s.length-l;else throw F.getFormatInstance()}static getBitCountForCodeword(s){let l=new Int32Array(8),u=0,f=l.length-1;for(;!((s&1)!==u&&(u=s&1,f--,f<0));)l[f]++,s>>=1;return l}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return _t.getCodewordBucketNumber(_t.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let l=new ci;for(let u=0;u<s.length;u++){l.format("Row %2d: ",u);for(let f=0;f<s[u].length;f++){let p=s[u][f];p.getValue().length===0?l.format("        ",null):l.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}l.format("%n")}return l.toString()}}_t.CODEWORD_SKEW_SIZE=2,_t.MAX_ERRORS=3,_t.MAX_EC_CODEWORDS=512,_t.errorCorrection=new Ro;class Cr{decode(s,l=null){let u=Cr.decode(s,l,!1);if(u==null||u.length===0||u[0]==null)throw se.getNotFoundInstance();return u[0]}decodeMultiple(s,l=null){try{return Cr.decode(s,l,!0)}catch(u){throw u instanceof F||u instanceof R?se.getNotFoundInstance():u}}static decode(s,l,u){const f=new Array,p=gt.detectMultiple(s,l,u);for(const y of p.getPoints()){const v=_t.decode(p.getBits(),y[4],y[5],y[6],y[7],Cr.getMinCodewordWidth(y),Cr.getMaxCodewordWidth(y)),I=new Le(v.getText(),v.getRawBytes(),void 0,y,Re.PDF_417);I.putMetadata(Ge.ERROR_CORRECTION_LEVEL,v.getECLevel());const C=v.getOther();C!=null&&I.putMetadata(Ge.PDF417_EXTRA_METADATA,C),f.push(I)}return f.map(y=>y)}static getMaxWidth(s,l){return s==null||l==null?0:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMinWidth(s,l){return s==null||l==null?W.MAX_VALUE:Math.trunc(Math.abs(s.getX()-l.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Cr.getMaxWidth(s[0],s[4]),Cr.getMaxWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.max(Cr.getMaxWidth(s[1],s[5]),Cr.getMaxWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Cr.getMinWidth(s[0],s[4]),Cr.getMinWidth(s[6],s[2])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN),Math.min(Cr.getMinWidth(s[1],s[5]),Cr.getMinWidth(s[7],s[3])*xt.MODULES_IN_CODEWORD/xt.MODULES_IN_STOP_PATTERN)))}reset(){}}class so extends g{}so.kind="ReaderException";class js{constructor(s,l){this.verbose=s===!0,l&&this.setHints(l)}decode(s,l){return l&&this.setHints(l),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const l=!r(s)&&s.get(ie.TRY_HARDER)===!0,u=r(s)?null:s.get(ie.POSSIBLE_FORMATS),f=new Array;if(!r(u)){const p=u.some(y=>y===Re.UPC_A||y===Re.UPC_E||y===Re.EAN_13||y===Re.EAN_8||y===Re.CODABAR||y===Re.CODE_39||y===Re.CODE_93||y===Re.CODE_128||y===Re.ITF||y===Re.RSS_14||y===Re.RSS_EXPANDED);p&&!l&&f.push(new Fs(s,this.verbose)),u.includes(Re.QR_CODE)&&f.push(new Hr),u.includes(Re.DATA_MATRIX)&&f.push(new Ei),u.includes(Re.AZTEC)&&f.push(new Fi),u.includes(Re.PDF_417)&&f.push(new Cr),p&&l&&f.push(new Fs(s,this.verbose))}f.length===0&&(l||f.push(new Fs(s,this.verbose)),f.push(new Hr),f.push(new Ei),f.push(new Fi),f.push(new Cr),l&&f.push(new Fs(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new so("No readers where selected, nothing can be read.");for(const l of this.readers)try{return l.decode(s,this.hints)}catch(u){if(u instanceof so)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class ko extends Se{constructor(s=null,l=500){const u=new js;u.setHints(s),super(u,l)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class da extends Se{constructor(s=500){super(new Cr,s)}}class el extends Se{constructor(s=500){super(new Hr,s)}}var ha;(function(j){j[j.ERROR_CORRECTION=0]="ERROR_CORRECTION",j[j.CHARACTER_SET=1]="CHARACTER_SET",j[j.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",j[j.MIN_SIZE=3]="MIN_SIZE",j[j.MAX_SIZE=4]="MAX_SIZE",j[j.MARGIN=5]="MARGIN",j[j.PDF417_COMPACT=6]="PDF417_COMPACT",j[j.PDF417_COMPACTION=7]="PDF417_COMPACTION",j[j.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",j[j.AZTEC_LAYERS=9]="AZTEC_LAYERS",j[j.QR_VERSION=10]="QR_VERSION"})(ha||(ha={}));var Jn=ha;class Po{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new ct(s,Int32Array.from([1])))}buildGenerator(s){const l=this.cachedGenerators;if(s>=l.length){let u=l[l.length-1];const f=this.field;for(let p=l.length;p<=s;p++){const y=u.multiply(new ct(f,Int32Array.from([1,f.exp(p-1+f.getGeneratorBase())])));l.push(y),u=y}}return l[s]}encode(s,l){if(l===0)throw new E("No error correction bytes");const u=s.length-l;if(u<=0)throw new E("No data bytes provided");const f=this.buildGenerator(l),p=new Int32Array(u);D.arraycopy(s,0,p,0,u);let y=new ct(this.field,p);y=y.multiplyByMonomial(l,1);const I=y.divide(f)[1].getCoefficients(),C=l-I.length;for(let O=0;O<C;O++)s[u+O]=0;D.arraycopy(I,0,s,u+C,I.length)}}class xn{constructor(){}static applyMaskPenaltyRule1(s){return xn.applyMaskPenaltyRule1Internal(s,!0)+xn.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let y=0;y<p-1;y++){const v=u[y];for(let I=0;I<f-1;I++){const C=v[I];C===v[I+1]&&C===u[y+1][I]&&C===u[y+1][I+1]&&l++}}return xn.N2*l}static applyMaskPenaltyRule3(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let y=0;y<p;y++)for(let v=0;v<f;v++){const I=u[y];v+6<f&&I[v]===1&&I[v+1]===0&&I[v+2]===1&&I[v+3]===1&&I[v+4]===1&&I[v+5]===0&&I[v+6]===1&&(xn.isWhiteHorizontal(I,v-4,v)||xn.isWhiteHorizontal(I,v+7,v+11))&&l++,y+6<p&&u[y][v]===1&&u[y+1][v]===0&&u[y+2][v]===1&&u[y+3][v]===1&&u[y+4][v]===1&&u[y+5][v]===0&&u[y+6][v]===1&&(xn.isWhiteVertical(u,v,y-4,y)||xn.isWhiteVertical(u,v,y+7,y+11))&&l++}return l*xn.N3}static isWhiteHorizontal(s,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let f=l;f<u;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,l,u,f){u=Math.max(u,0),f=Math.min(f,s.length);for(let p=u;p<f;p++)if(s[p][l]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let l=0;const u=s.getArray(),f=s.getWidth(),p=s.getHeight();for(let I=0;I<p;I++){const C=u[I];for(let O=0;O<f;O++)C[O]===1&&l++}const y=s.getHeight()*s.getWidth();return Math.floor(Math.abs(l*2-y)*10/y)*xn.N4}static getDataMaskBit(s,l,u){let f,p;switch(s){case 0:f=u+l&1;break;case 1:f=u&1;break;case 2:f=l%3;break;case 3:f=(u+l)%3;break;case 4:f=Math.floor(u/2)+Math.floor(l/3)&1;break;case 5:p=u*l,f=(p&1)+p%3;break;case 6:p=u*l,f=(p&1)+p%3&1;break;case 7:p=u*l,f=p%3+(u+l&1)&1;break;default:throw new E("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,l){let u=0;const f=l?s.getHeight():s.getWidth(),p=l?s.getWidth():s.getHeight(),y=s.getArray();for(let v=0;v<f;v++){let I=0,C=-1;for(let O=0;O<p;O++){const U=l?y[v][O]:y[O][v];U===C?I++:(I>=5&&(u+=xn.N1+(I-5)),I=1,C=U)}I>=5&&(u+=xn.N1+(I-5))}return u}}xn.N1=3,xn.N2=3,xn.N3=40,xn.N4=10;class fa{constructor(s,l){this.width=s,this.height=l;const u=new Array(l);for(let f=0;f!==l;f++)u[f]=new Uint8Array(s);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(s,l){return this.bytes[l][s]}getArray(){return this.bytes}setNumber(s,l,u){this.bytes[l][s]=u}setBoolean(s,l,u){this.bytes[l][s]=u?1:0}clear(s){for(const l of this.bytes)z.fill(l,s)}equals(s){if(!(s instanceof fa))return!1;const l=s;if(this.width!==l.width||this.height!==l.height)return!1;for(let u=0,f=this.height;u<f;++u){const p=this.bytes[u],y=l.bytes[u];for(let v=0,I=this.width;v<I;++v)if(p[v]!==y[v])return!1}return!0}toString(){const s=new K;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l];for(let p=0,y=this.width;p<y;++p)switch(f[p]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class ui{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new K;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<ui.NUM_MASK_PATTERNS}}ui.NUM_MASK_PATTERNS=8;class sn extends g{}sn.kind="WriterException";class ft{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,l,u,f,p){ft.clearMatrix(p),ft.embedBasicPatterns(u,p),ft.embedTypeInfo(l,f,p),ft.maybeEmbedVersionInfo(u,p),ft.embedDataBits(s,f,p)}static embedBasicPatterns(s,l){ft.embedPositionDetectionPatternsAndSeparators(l),ft.embedDarkDotAtLeftBottomCorner(l),ft.maybeEmbedPositionAdjustmentPatterns(s,l),ft.embedTimingPatterns(l)}static embedTypeInfo(s,l,u){const f=new Y;ft.makeTypeInfoBits(s,l,f);for(let p=0,y=f.getSize();p<y;++p){const v=f.get(f.getSize()-1-p),I=ft.TYPE_INFO_COORDINATES[p],C=I[0],O=I[1];if(u.setBoolean(C,O,v),p<8){const U=u.getWidth()-p-1;u.setBoolean(U,8,v)}else{const q=u.getHeight()-7+(p-8);u.setBoolean(8,q,v)}}}static maybeEmbedVersionInfo(s,l){if(s.getVersionNumber()<7)return;const u=new Y;ft.makeVersionInfoBits(s,u);let f=17;for(let p=0;p<6;++p)for(let y=0;y<3;++y){const v=u.get(f);f--,l.setBoolean(p,l.getHeight()-11+y,v),l.setBoolean(l.getHeight()-11+y,p,v)}}static embedDataBits(s,l,u){let f=0,p=-1,y=u.getWidth()-1,v=u.getHeight()-1;for(;y>0;){for(y===6&&(y-=1);v>=0&&v<u.getHeight();){for(let I=0;I<2;++I){const C=y-I;if(!ft.isEmpty(u.get(C,v)))continue;let O;f<s.getSize()?(O=s.get(f),++f):O=!1,l!==255&&xn.getDataMaskBit(l,C,v)&&(O=!O),u.setBoolean(C,v,O)}v+=p}p=-p,v+=p,y-=2}if(f!==s.getSize())throw new sn("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-W.numberOfLeadingZeros(s)}static calculateBCHCode(s,l){if(l===0)throw new E("0 polynomial");const u=ft.findMSBSet(l);for(s<<=u-1;ft.findMSBSet(s)>=u;)s^=l<<ft.findMSBSet(s)-u;return s}static makeTypeInfoBits(s,l,u){if(!ui.isValidMaskPattern(l))throw new sn("Invalid mask pattern");const f=s.getBits()<<3|l;u.appendBits(f,5);const p=ft.calculateBCHCode(f,ft.TYPE_INFO_POLY);u.appendBits(p,10);const y=new Y;if(y.appendBits(ft.TYPE_INFO_MASK_PATTERN,15),u.xor(y),u.getSize()!==15)throw new sn("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(s,l){l.appendBits(s.getVersionNumber(),6);const u=ft.calculateBCHCode(s.getVersionNumber(),ft.VERSION_INFO_POLY);if(l.appendBits(u,12),l.getSize()!==18)throw new sn("should not happen but we got: "+l.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let l=8;l<s.getWidth()-8;++l){const u=(l+1)%2;ft.isEmpty(s.get(l,6))&&s.setNumber(l,6,u),ft.isEmpty(s.get(6,l))&&s.setNumber(6,l,u)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new sn;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,l,u){for(let f=0;f<8;++f){if(!ft.isEmpty(u.get(s+f,l)))throw new sn;u.setNumber(s+f,l,0)}}static embedVerticalSeparationPattern(s,l,u){for(let f=0;f<7;++f){if(!ft.isEmpty(u.get(s,l+f)))throw new sn;u.setNumber(s,l+f,0)}}static embedPositionAdjustmentPattern(s,l,u){for(let f=0;f<5;++f){const p=ft.POSITION_ADJUSTMENT_PATTERN[f];for(let y=0;y<5;++y)u.setNumber(s+y,l+f,p[y])}}static embedPositionDetectionPattern(s,l,u){for(let f=0;f<7;++f){const p=ft.POSITION_DETECTION_PATTERN[f];for(let y=0;y<7;++y)u.setNumber(s+y,l+f,p[y])}}static embedPositionDetectionPatternsAndSeparators(s){const l=ft.POSITION_DETECTION_PATTERN[0].length;ft.embedPositionDetectionPattern(0,0,s),ft.embedPositionDetectionPattern(s.getWidth()-l,0,s),ft.embedPositionDetectionPattern(0,s.getWidth()-l,s);const u=8;ft.embedHorizontalSeparationPattern(0,u-1,s),ft.embedHorizontalSeparationPattern(s.getWidth()-u,u-1,s),ft.embedHorizontalSeparationPattern(0,s.getWidth()-u,s);const f=7;ft.embedVerticalSeparationPattern(f,0,s),ft.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),ft.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,l){if(s.getVersionNumber()<2)return;const u=s.getVersionNumber()-1,f=ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let p=0,y=f.length;p!==y;p++){const v=f[p];if(v>=0)for(let I=0;I!==y;I++){const C=f[I];C>=0&&ft.isEmpty(l.get(C,v))&&ft.embedPositionAdjustmentPattern(C-2,v-2,l)}}}}ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ft.VERSION_INFO_POLY=7973,ft.TYPE_INFO_POLY=1335,ft.TYPE_INFO_MASK_PATTERN=21522;class Eu{constructor(s,l){this.dataBytes=s,this.errorCorrectionBytes=l}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class un{constructor(){}static calculateMaskPenalty(s){return xn.applyMaskPenaltyRule1(s)+xn.applyMaskPenaltyRule2(s)+xn.applyMaskPenaltyRule3(s)+xn.applyMaskPenaltyRule4(s)}static encode(s,l,u=null){let f=un.DEFAULT_BYTE_MODE_ENCODING;const p=u!==null&&u.get(Jn.CHARACTER_SET)!==void 0;p&&(f=u.get(Jn.CHARACTER_SET).toString());const y=this.chooseMode(s,f),v=new Y;if(y===ut.BYTE&&(p||un.DEFAULT_BYTE_MODE_ENCODING!==f)){const je=H.getCharacterSetECIByName(f);je!==void 0&&this.appendECI(je,v)}this.appendModeInfo(y,v);const I=new Y;this.appendBytes(s,y,I,f);let C;if(u!==null&&u.get(Jn.QR_VERSION)!==void 0){const je=Number.parseInt(u.get(Jn.QR_VERSION).toString(),10);C=$e.getVersionForNumber(je);const Oe=this.calculateBitsNeeded(y,v,I,C);if(!this.willFit(Oe,C,l))throw new sn("Data too big for requested version")}else C=this.recommendVersion(l,y,v,I);const O=new Y;O.appendBitArray(v);const U=y===ut.BYTE?I.getSizeInBytes():s.length;this.appendLengthInfo(U,C,y,O),O.appendBitArray(I);const q=C.getECBlocksForLevel(l),J=C.getTotalCodewords()-q.getTotalECCodewords();this.terminateBits(J,O);const le=this.interleaveWithECBytes(O,C.getTotalCodewords(),J,q.getNumBlocks()),ue=new ui;ue.setECLevel(l),ue.setMode(y),ue.setVersion(C);const fe=C.getDimensionForVersion(),Ee=new fa(fe,fe),Fe=this.chooseMaskPattern(le,l,C,Ee);return ue.setMaskPattern(Fe),ft.buildMatrix(le,l,C,Fe,Ee),ue.setMatrix(Ee),ue}static recommendVersion(s,l,u,f){const p=this.calculateBitsNeeded(l,u,f,$e.getVersionForNumber(1)),y=this.chooseVersion(p,s),v=this.calculateBitsNeeded(l,u,f,y);return this.chooseVersion(v,s)}static calculateBitsNeeded(s,l,u,f){return l.getSize()+s.getCharacterCountBits(f)+u.getSize()}static getAlphanumericCode(s){return s<un.ALPHANUMERIC_TABLE.length?un.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,l=null){if(H.SJIS.getName()===l&&this.isOnlyDoubleByteKanji(s))return ut.KANJI;let u=!1,f=!1;for(let p=0,y=s.length;p<y;++p){const v=s.charAt(p);if(un.isDigit(v))u=!0;else if(this.getAlphanumericCode(v.charCodeAt(0))!==-1)f=!0;else return ut.BYTE}return f?ut.ALPHANUMERIC:u?ut.NUMERIC:ut.BYTE}static isOnlyDoubleByteKanji(s){let l;try{l=ne.encode(s,H.SJIS)}catch{return!1}const u=l.length;if(u%2!==0)return!1;for(let f=0;f<u;f+=2){const p=l[f]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(s,l,u,f){let p=Number.MAX_SAFE_INTEGER,y=-1;for(let v=0;v<ui.NUM_MASK_PATTERNS;v++){ft.buildMatrix(s,l,u,v,f);let I=this.calculateMaskPenalty(f);I<p&&(p=I,y=v)}return y}static chooseVersion(s,l){for(let u=1;u<=40;u++){const f=$e.getVersionForNumber(u);if(un.willFit(s,f,l))return f}throw new sn("Data too big")}static willFit(s,l,u){const f=l.getTotalCodewords(),y=l.getECBlocksForLevel(u).getTotalECCodewords(),v=f-y,I=(s+7)/8;return v>=I}static terminateBits(s,l){const u=s*8;if(l.getSize()>u)throw new sn("data bits cannot fit in the QR Code"+l.getSize()+" > "+u);for(let y=0;y<4&&l.getSize()<u;++y)l.appendBit(!1);const f=l.getSize()&7;if(f>0)for(let y=f;y<8;y++)l.appendBit(!1);const p=s-l.getSizeInBytes();for(let y=0;y<p;++y)l.appendBits((y&1)===0?236:17,8);if(l.getSize()!==u)throw new sn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,l,u,f,p,y){if(f>=u)throw new sn("Block ID too large");const v=s%u,I=u-v,C=Math.floor(s/u),O=C+1,U=Math.floor(l/u),q=U+1,J=C-U,le=O-q;if(J!==le)throw new sn("EC bytes mismatch");if(u!==I+v)throw new sn("RS blocks mismatch");if(s!==(U+J)*I+(q+le)*v)throw new sn("Total bytes mismatch");f<I?(p[0]=U,y[0]=J):(p[0]=q,y[0]=le)}static interleaveWithECBytes(s,l,u,f){if(s.getSizeInBytes()!==u)throw new sn("Number of bits and data bytes does not match");let p=0,y=0,v=0;const I=new Array;for(let O=0;O<f;++O){const U=new Int32Array(1),q=new Int32Array(1);un.getNumDataBytesAndNumECBytesForBlockID(l,u,f,O,U,q);const J=U[0],le=new Uint8Array(J);s.toBytes(8*p,le,0,J);const ue=un.generateECBytes(le,q[0]);I.push(new Eu(le,ue)),y=Math.max(y,J),v=Math.max(v,ue.length),p+=U[0]}if(u!==p)throw new sn("Data bytes does not match offset");const C=new Y;for(let O=0;O<y;++O)for(const U of I){const q=U.getDataBytes();O<q.length&&C.appendBits(q[O],8)}for(let O=0;O<v;++O)for(const U of I){const q=U.getErrorCorrectionBytes();O<q.length&&C.appendBits(q[O],8)}if(l!==C.getSizeInBytes())throw new sn("Interleaving error: "+l+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(s,l){const u=s.length,f=new Int32Array(u+l);for(let y=0;y<u;y++)f[y]=s[y]&255;new Po(ht.QR_CODE_FIELD_256).encode(f,l);const p=new Uint8Array(l);for(let y=0;y<l;y++)p[y]=f[u+y];return p}static appendModeInfo(s,l){l.appendBits(s.getBits(),4)}static appendLengthInfo(s,l,u,f){const p=u.getCharacterCountBits(l);if(s>=1<<p)throw new sn(s+" is bigger than "+((1<<p)-1));f.appendBits(s,p)}static appendBytes(s,l,u,f){switch(l){case ut.NUMERIC:un.appendNumericBytes(s,u);break;case ut.ALPHANUMERIC:un.appendAlphanumericBytes(s,u);break;case ut.BYTE:un.append8BitBytes(s,u,f);break;case ut.KANJI:un.appendKanjiBytes(s,u);break;default:throw new sn("Invalid mode: "+l)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const l=un.getDigit(s);return l>=0&&l<=9}static appendNumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const p=un.getDigit(s.charAt(f));if(f+2<u){const y=un.getDigit(s.charAt(f+1)),v=un.getDigit(s.charAt(f+2));l.appendBits(p*100+y*10+v,10),f+=3}else if(f+1<u){const y=un.getDigit(s.charAt(f+1));l.appendBits(p*10+y,7),f+=2}else l.appendBits(p,4),f++}}static appendAlphanumericBytes(s,l){const u=s.length;let f=0;for(;f<u;){const p=un.getAlphanumericCode(s.charCodeAt(f));if(p===-1)throw new sn;if(f+1<u){const y=un.getAlphanumericCode(s.charCodeAt(f+1));if(y===-1)throw new sn;l.appendBits(p*45+y,11),f+=2}else l.appendBits(p,6),f++}}static append8BitBytes(s,l,u){let f;try{f=ne.encode(s,u)}catch(p){throw new sn(p)}for(let p=0,y=f.length;p!==y;p++){const v=f[p];l.appendBits(v,8)}}static appendKanjiBytes(s,l){let u;try{u=ne.encode(s,H.SJIS)}catch(p){throw new sn(p)}const f=u.length;for(let p=0;p<f;p+=2){const y=u[p]&255,v=u[p+1]&255,I=y<<8&4294967295|v;let C=-1;if(I>=33088&&I<=40956?C=I-33088:I>=57408&&I<=60351&&(C=I-49472),C===-1)throw new sn("Invalid byte sequence");const O=(C>>8)*192+(C&255);l.appendBits(O,13)}}static appendECI(s,l){l.appendBits(ut.ECI.getBits(),4),l.appendBits(s.getValue(),8)}}un.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),un.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class es{write(s,l,u,f=null){if(s.length===0)throw new E("Found empty contents");if(l<0||u<0)throw new E("Requested dimensions are too small: "+l+"x"+u);let p=Ot.L,y=es.QUIET_ZONE_SIZE;f!==null&&(f.get(Jn.ERROR_CORRECTION)!==void 0&&(p=Ot.fromString(f.get(Jn.ERROR_CORRECTION).toString())),f.get(Jn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Jn.MARGIN).toString(),10)));const v=un.encode(s,p,f);return this.renderResult(v,l,u,y)}writeToDom(s,l,u,f,p=null){typeof s=="string"&&(s=document.querySelector(s));const y=this.write(l,u,f,p);s&&s.appendChild(y)}renderResult(s,l,u,f){const p=s.getMatrix();if(p===null)throw new Bn;const y=p.getWidth(),v=p.getHeight(),I=y+f*2,C=v+f*2,O=Math.max(l,I),U=Math.max(u,C),q=Math.min(Math.floor(O/I),Math.floor(U/C)),J=Math.floor((O-y*q)/2),le=Math.floor((U-v*q)/2),ue=this.createSVGElement(O,U);for(let fe=0,Ee=le;fe<v;fe++,Ee+=q)for(let Fe=0,je=J;Fe<y;Fe++,je+=q)if(p.get(Fe,fe)===1){const Oe=this.createSvgRectElement(je,Ee,q,q);ue.appendChild(Oe)}return ue}createSVGElement(s,l){const u=document.createElementNS(es.SVG_NS,"svg");return u.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width",l.toString()),u}createSvgRectElement(s,l,u,f){const p=document.createElementNS(es.SVG_NS,"rect");return p.setAttributeNS(null,"x",s.toString()),p.setAttributeNS(null,"y",l.toString()),p.setAttributeNS(null,"height",u.toString()),p.setAttributeNS(null,"width",f.toString()),p.setAttributeNS(null,"fill","#000000"),p}}es.QUIET_ZONE_SIZE=4,es.SVG_NS="http://www.w3.org/2000/svg";class pr{encode(s,l,u,f,p){if(s.length===0)throw new E("Found empty contents");if(l!==Re.QR_CODE)throw new E("Can only encode QR_CODE, but got "+l);if(u<0||f<0)throw new E(`Requested dimensions are too small: ${u}x${f}`);let y=Ot.L,v=pr.QUIET_ZONE_SIZE;p!==null&&(p.get(Jn.ERROR_CORRECTION)!==void 0&&(y=Ot.fromString(p.get(Jn.ERROR_CORRECTION).toString())),p.get(Jn.MARGIN)!==void 0&&(v=Number.parseInt(p.get(Jn.MARGIN).toString(),10)));const I=un.encode(s,y,p);return pr.renderResult(I,u,f,v)}static renderResult(s,l,u,f){const p=s.getMatrix();if(p===null)throw new Bn;const y=p.getWidth(),v=p.getHeight(),I=y+f*2,C=v+f*2,O=Math.max(l,I),U=Math.max(u,C),q=Math.min(Math.floor(O/I),Math.floor(U/C)),J=Math.floor((O-y*q)/2),le=Math.floor((U-v*q)/2),ue=new we(O,U);for(let fe=0,Ee=le;fe<v;fe++,Ee+=q)for(let Fe=0,je=J;Fe<y;Fe++,je+=q)p.get(Fe,fe)===1&&ue.setRegion(je,Ee,q,q);return ue}}pr.QUIET_ZONE_SIZE=4;class bu{encode(s,l,u,f,p){let y;switch(l){case Re.QR_CODE:y=new pr;break;default:throw new E("No encoder available for format "+l)}return y.encode(s,l,u,f,p)}}class Wi extends oe{constructor(s,l,u,f,p,y,v,I){if(super(y,v),this.yuvData=s,this.dataWidth=l,this.dataHeight=u,this.left=f,this.top=p,f+y>l||p+v>u)throw new E("Crop rectangle does not fit within image data.");I&&this.reverseHorizontal(y,v)}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.yuvData,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.yuvData;const u=s*l,f=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.yuvData,p,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.yuvData,p,f,v,s),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new Wi(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+l,u,f,!1)}renderThumbnail(){const s=this.getWidth()/Wi.THUMBNAIL_SCALE_FACTOR,l=this.getHeight()/Wi.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(s*l),f=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let y=0;y<l;y++){const v=y*s;for(let I=0;I<s;I++){const C=f[p+I*Wi.THUMBNAIL_SCALE_FACTOR]&255;u[v+I]=4278190080|C*65793}p+=this.dataWidth*Wi.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Wi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Wi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,l){const u=this.yuvData;for(let f=0,p=this.top*this.dataWidth+this.left;f<l;f++,p+=this.dataWidth){const y=p+s/2;for(let v=p,I=p+s-1;v<y;v++,I--){const C=u[v];u[v]=u[I],u[I]=C}}}invert(){return new Te(this)}}Wi.THUMBNAIL_SCALE_FACTOR=2;class ts extends oe{constructor(s,l,u,f,p,y,v){if(super(l,u),this.dataWidth=f,this.dataHeight=p,this.left=y,this.top=v,s.BYTES_PER_ELEMENT===4){const I=l*u,C=new Uint8ClampedArray(I);for(let O=0;O<I;O++){const U=s[O],q=U>>16&255,J=U>>7&510,le=U&255;C[O]=(q+J+le)/4&255}this.luminances=C}else this.luminances=s;if(f===void 0&&(this.dataWidth=l),p===void 0&&(this.dataHeight=u),y===void 0&&(this.left=0),v===void 0&&(this.top=0),this.left+l>this.dataWidth||this.top+u>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(s,l){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(l==null||l.length<u)&&(l=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return D.arraycopy(this.luminances,f,l,0,u),l}getMatrix(){const s=this.getWidth(),l=this.getHeight();if(s===this.dataWidth&&l===this.dataHeight)return this.luminances;const u=s*l,f=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return D.arraycopy(this.luminances,p,f,0,u),f;for(let y=0;y<l;y++){const v=y*s;D.arraycopy(this.luminances,p,f,v,s),p+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,l,u,f){return new ts(this.luminances,u,f,this.dataWidth,this.dataHeight,this.left+s,this.top+l)}invert(){return new Te(this)}}class _ extends H{static forName(s){return this.getCharacterSetECIByName(s)}}class N{}N.ISO_8859_1=H.ISO8859_1;class V{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class X{static singletonList(s){return[s]}static min(s,l){return s.sort(l)[0]}}class me{constructor(s){this.previous=s}getPrevious(){return this.previous}}class Ie extends me{constructor(s,l,u){super(s),this.value=l,this.bitCount=u}appendTo(s,l){s.appendBits(this.value,this.bitCount)}add(s,l){return new Ie(this,s,l)}addBinaryShift(s,l){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ie(this,s,l)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+W.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class He extends Ie{constructor(s,l,u){super(s,0,0),this.binaryShiftStart=l,this.binaryShiftByteCount=u}appendTo(s,l){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):u===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(l[this.binaryShiftStart+u],8)}addBinaryShift(s,l){return new He(this,s,l)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function dn(j,s,l){return new He(j,s,l)}function Wn(j,s,l){return new Ie(j,s,l)}const qt=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pn=0,Hn=1,Gn=2,Ti=3,ei=4,tl=new Ie(null,0,0),Iu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xp(j){for(let s of j)z.fill(s,-1);return j[Pn][ei]=0,j[Hn][ei]=0,j[Hn][Pn]=28,j[Ti][ei]=0,j[Gn][ei]=0,j[Gn][Pn]=15,j}const oh=xp(z.createInt32Array(6,6));class di{constructor(s,l,u,f){this.token=s,this.mode=l,this.binaryShiftByteCount=u,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,l){let u=this.bitCount,f=this.token;if(s!==this.mode){let y=Iu[this.mode][s];f=Wn(f,y&65535,y>>16),u+=y>>16}let p=s===Gn?4:5;return f=Wn(f,l,p),new di(f,s,0,u+p)}shiftAndAppend(s,l){let u=this.token,f=this.mode===Gn?4:5;return u=Wn(u,oh[this.mode][s],f),u=Wn(u,l,5),new di(u,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let l=this.token,u=this.mode,f=this.bitCount;if(this.mode===ei||this.mode===Gn){let v=Iu[u][Pn];l=Wn(l,v&65535,v>>16),f+=v>>16,u=Pn}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,y=new di(l,u,this.binaryShiftByteCount+1,f+p);return y.binaryShiftByteCount===2078&&(y=y.endBinaryShift(s+1)),y}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let l=this.token;return l=dn(l,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new di(l,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let l=this.bitCount+(Iu[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?l+=di.calculateBinaryShiftCost(s)-di.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(l+=10),l<=s.bitCount}toBitArray(s){let l=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())l.unshift(f);let u=new Y;for(const f of l)f.appendTo(u,s);return u}toString(){return te.format("%s bits=%d bytes=%d",qt[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}di.INITIAL_STATE=new di(tl,Pn,0,0);function s1(j){const s=te.getCharCode(" "),l=te.getCharCode("."),u=te.getCharCode(",");j[Pn][s]=1;const f=te.getCharCode("Z"),p=te.getCharCode("A");for(let q=p;q<=f;q++)j[Pn][q]=q-p+2;j[Hn][s]=1;const y=te.getCharCode("z"),v=te.getCharCode("a");for(let q=v;q<=y;q++)j[Hn][q]=q-v+2;j[Gn][s]=1;const I=te.getCharCode("9"),C=te.getCharCode("0");for(let q=C;q<=I;q++)j[Gn][q]=q-C+2;j[Gn][u]=12,j[Gn][l]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let q=0;q<O.length;q++)j[Ti][te.getCharCode(O[q])]=q;const U=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let q=0;q<U.length;q++)te.getCharCode(U[q])>0&&(j[ei][te.getCharCode(U[q])]=q);return j}const ah=s1(z.createInt32Array(5,256));class lc{constructor(s){this.text=s}encode(){const s=te.getCharCode(" "),l=te.getCharCode(`
`);let u=X.singletonList(di.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let y,v=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case te.getCharCode("\r"):y=v===l?2:0;break;case te.getCharCode("."):y=v===s?3:0;break;case te.getCharCode(","):y=v===s?4:0;break;case te.getCharCode(":"):y=v===s?5:0;break;default:y=0}y>0?(u=lc.updateStateListForPair(u,p,y),p++):u=this.updateStateListForChar(u,p)}return X.min(u,(p,y)=>p.getBitCount()-y.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,l){const u=[];for(let f of s)this.updateStateForChar(f,l,u);return lc.simplifyStates(u)}updateStateForChar(s,l,u){let f=this.text[l]&255,p=ah[s.getMode()][f]>0,y=null;for(let v=0;v<=ei;v++){let I=ah[v][f];if(I>0){if(y==null&&(y=s.endBinaryShift(l)),!p||v===s.getMode()||v===Gn){const C=y.latchAndAppend(v,I);u.push(C)}if(!p&&oh[s.getMode()][v]>=0){const C=y.shiftAndAppend(v,I);u.push(C)}}}if(s.getBinaryShiftByteCount()>0||ah[s.getMode()][f]===0){let v=s.addBinaryShiftChar(l);u.push(v)}}static updateStateListForPair(s,l,u){const f=[];for(let p of s)this.updateStateForPair(p,l,u,f);return this.simplifyStates(f)}static updateStateForPair(s,l,u,f){let p=s.endBinaryShift(l);if(f.push(p.latchAndAppend(ei,u)),s.getMode()!==ei&&f.push(p.shiftAndAppend(ei,u)),u===3||u===4){let y=p.latchAndAppend(Gn,16-u).latchAndAppend(Gn,1);f.push(y)}if(s.getBinaryShiftByteCount()>0){let y=s.addBinaryShiftChar(l).addBinaryShiftChar(l+1);f.push(y)}}static simplifyStates(s){let l=[];for(const u of s){let f=!0;for(const p of l){if(p.isBetterThanOrEqualTo(u)){f=!1;break}u.isBetterThanOrEqualTo(p)&&(l=l.filter(y=>y!==p))}f&&l.push(u)}return l}}class Kt{constructor(){}static encodeBytes(s){return Kt.encode(s,Kt.DEFAULT_EC_PERCENT,Kt.DEFAULT_AZTEC_LAYERS)}static encode(s,l,u){let f=new lc(s).encode(),p=W.truncDivision(f.getSize()*l,100)+11,y=f.getSize()+p,v,I,C,O,U;if(u!==Kt.DEFAULT_AZTEC_LAYERS){if(v=u<0,I=Math.abs(u),I>(v?Kt.MAX_NB_BITS_COMPACT:Kt.MAX_NB_BITS))throw new E(te.format("Illegal value %s for layers",u));C=Kt.totalBitsInLayer(I,v),O=Kt.WORD_SIZE[I];let Oe=C-C%O;if(U=Kt.stuffBits(f,O),U.getSize()+p>Oe)throw new E("Data to large for user specified layer");if(v&&U.getSize()>O*64)throw new E("Data to large for user specified layer")}else{O=0,U=null;for(let Oe=0;;Oe++){if(Oe>Kt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(v=Oe<=3,I=v?Oe+1:Oe,C=Kt.totalBitsInLayer(I,v),y>C)continue;(U==null||O!==Kt.WORD_SIZE[I])&&(O=Kt.WORD_SIZE[I],U=Kt.stuffBits(f,O));let Mt=C-C%O;if(!(v&&U.getSize()>O*64)&&U.getSize()+p<=Mt)break}}let q=Kt.generateCheckWords(U,C,O),J=U.getSize()/O,le=Kt.generateModeMessage(v,I,J),ue=(v?11:14)+I*4,fe=new Int32Array(ue),Ee;if(v){Ee=ue;for(let Oe=0;Oe<fe.length;Oe++)fe[Oe]=Oe}else{Ee=ue+1+2*W.truncDivision(W.truncDivision(ue,2)-1,15);let Oe=W.truncDivision(ue,2),Mt=W.truncDivision(Ee,2);for(let St=0;St<Oe;St++){let Ci=St+W.truncDivision(St,15);fe[Oe-St-1]=Mt-Ci-1,fe[Oe+St]=Mt+Ci+1}}let Fe=new we(Ee);for(let Oe=0,Mt=0;Oe<I;Oe++){let St=(I-Oe)*4+(v?9:12);for(let Ci=0;Ci<St;Ci++){let Es=Ci*2;for(let Sr=0;Sr<2;Sr++)q.get(Mt+Es+Sr)&&Fe.set(fe[Oe*2+Sr],fe[Oe*2+Ci]),q.get(Mt+St*2+Es+Sr)&&Fe.set(fe[Oe*2+Ci],fe[ue-1-Oe*2-Sr]),q.get(Mt+St*4+Es+Sr)&&Fe.set(fe[ue-1-Oe*2-Sr],fe[ue-1-Oe*2-Ci]),q.get(Mt+St*6+Es+Sr)&&Fe.set(fe[ue-1-Oe*2-Ci],fe[Oe*2+Sr])}Mt+=St*8}if(Kt.drawModeMessage(Fe,v,Ee,le),v)Kt.drawBullsEye(Fe,W.truncDivision(Ee,2),5);else{Kt.drawBullsEye(Fe,W.truncDivision(Ee,2),7);for(let Oe=0,Mt=0;Oe<W.truncDivision(ue,2)-1;Oe+=15,Mt+=16)for(let St=W.truncDivision(Ee,2)&1;St<Ee;St+=2)Fe.set(W.truncDivision(Ee,2)-Mt,St),Fe.set(W.truncDivision(Ee,2)+Mt,St),Fe.set(St,W.truncDivision(Ee,2)-Mt),Fe.set(St,W.truncDivision(Ee,2)+Mt)}let je=new V;return je.setCompact(v),je.setSize(Ee),je.setLayers(I),je.setCodeWords(J),je.setMatrix(Fe),je}static drawBullsEye(s,l,u){for(let f=0;f<u;f+=2)for(let p=l-f;p<=l+f;p++)s.set(p,l-f),s.set(p,l+f),s.set(l-f,p),s.set(l+f,p);s.set(l-u,l-u),s.set(l-u+1,l-u),s.set(l-u,l-u+1),s.set(l+u,l-u),s.set(l+u,l-u+1),s.set(l+u,l+u-1)}static generateModeMessage(s,l,u){let f=new Y;return s?(f.appendBits(l-1,2),f.appendBits(u-1,6),f=Kt.generateCheckWords(f,28,4)):(f.appendBits(l-1,5),f.appendBits(u-1,11),f=Kt.generateCheckWords(f,40,4)),f}static drawModeMessage(s,l,u,f){let p=W.truncDivision(u,2);if(l)for(let y=0;y<7;y++){let v=p-3+y;f.get(y)&&s.set(v,p-5),f.get(y+7)&&s.set(p+5,v),f.get(20-y)&&s.set(v,p+5),f.get(27-y)&&s.set(p-5,v)}else for(let y=0;y<10;y++){let v=p-5+y+W.truncDivision(y,5);f.get(y)&&s.set(v,p-7),f.get(y+10)&&s.set(p+7,v),f.get(29-y)&&s.set(v,p+7),f.get(39-y)&&s.set(p-7,v)}}static generateCheckWords(s,l,u){let f=s.getSize()/u,p=new Po(Kt.getGF(u)),y=W.truncDivision(l,u),v=Kt.bitsToWords(s,u,y);p.encode(v,y-f);let I=l%u,C=new Y;C.appendBits(0,I);for(const O of Array.from(v))C.appendBits(O,u);return C}static bitsToWords(s,l,u){let f=new Int32Array(u),p,y;for(p=0,y=s.getSize()/l;p<y;p++){let v=0;for(let I=0;I<l;I++)v|=s.get(p*l+I)?1<<l-I-1:0;f[p]=v}return f}static getGF(s){switch(s){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new E("Unsupported word size "+s)}}static stuffBits(s,l){let u=new Y,f=s.getSize(),p=(1<<l)-2;for(let y=0;y<f;y+=l){let v=0;for(let I=0;I<l;I++)(y+I>=f||s.get(y+I))&&(v|=1<<l-1-I);(v&p)===p?(u.appendBits(v&p,l),y--):(v&p)===0?(u.appendBits(v|1,l),y--):u.appendBits(v,l)}return u}static totalBitsInLayer(s,l){return((l?88:112)+16*s)*s}}Kt.DEFAULT_EC_PERCENT=33,Kt.DEFAULT_AZTEC_LAYERS=0,Kt.MAX_NB_BITS=32,Kt.MAX_NB_BITS_COMPACT=4,Kt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class cc{encode(s,l,u,f){return this.encodeWithHints(s,l,u,f,null)}encodeWithHints(s,l,u,f,p){let y=N.ISO_8859_1,v=Kt.DEFAULT_EC_PERCENT,I=Kt.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(Jn.CHARACTER_SET)&&(y=_.forName(p.get(Jn.CHARACTER_SET).toString())),p.has(Jn.ERROR_CORRECTION)&&(v=W.parseInt(p.get(Jn.ERROR_CORRECTION).toString())),p.has(Jn.AZTEC_LAYERS)&&(I=W.parseInt(p.get(Jn.AZTEC_LAYERS).toString()))),cc.encodeLayers(s,l,u,f,y,v,I)}static encodeLayers(s,l,u,f,p,y,v){if(l!==Re.AZTEC)throw new E("Can only encode AZTEC, but got "+l);let I=Kt.encode(te.getBytes(s,p),y,v);return cc.renderResult(I,u,f)}static renderResult(s,l,u){let f=s.getMatrix();if(f==null)throw new Bn;let p=f.getWidth(),y=f.getHeight(),v=Math.max(l,p),I=Math.max(u,y),C=Math.min(v/p,I/y),O=(v-p*C)/2,U=(I-y*C)/2,q=new we(v,I);for(let J=0,le=U;J<y;J++,le+=C)for(let ue=0,fe=O;ue<p;ue++,fe+=C)f.get(ue,J)&&q.setRegion(fe,le,C,C);return q}}t.AbstractExpandedDecoder=To,t.ArgumentException=w,t.ArithmeticException=bt,t.AztecCode=V,t.AztecCodeReader=Fi,t.AztecCodeWriter=cc,t.AztecDecoder=zt,t.AztecDetector=Qr,t.AztecDetectorResult=wi,t.AztecEncoder=Kt,t.AztecHighLevelEncoder=lc,t.AztecPoint=jn,t.BarcodeFormat=Re,t.Binarizer=M,t.BinaryBitmap=T,t.BitArray=Y,t.BitMatrix=we,t.BitSource=Xa,t.BrowserAztecCodeReader=vi,t.BrowserBarcodeReader=wu,t.BrowserCodeReader=Se,t.BrowserDatamatrixCodeReader=sh,t.BrowserMultiFormatReader=ko,t.BrowserPDF417Reader=da,t.BrowserQRCodeReader=el,t.BrowserQRCodeSvgWriter=es,t.CharacterSetECI=H,t.ChecksumException=R,t.Code128Reader=We,t.Code39Reader=An,t.DataMatrixDecodedBitStreamParser=ji,t.DataMatrixReader=Ei,t.DecodeHintType=ie,t.DecoderResult=at,t.DefaultGridSampler=Yn,t.DetectorResult=Xn,t.EAN13Reader=br,t.EncodeHintType=Jn,t.Exception=g,t.FormatException=F,t.GenericGF=ht,t.GenericGFPoly=ct,t.GlobalHistogramBinarizer=Ae,t.GridSampler=no,t.GridSamplerInstance=Er,t.HTMLCanvasElementLuminanceSource=Ne,t.HybridBinarizer=xe,t.ITFReader=Ht,t.IllegalArgumentException=E,t.IllegalStateException=Bn,t.InvertedLuminanceSource=Te,t.LuminanceSource=oe,t.MathUtils=pt,t.MultiFormatOneDReader=Fs,t.MultiFormatReader=js,t.MultiFormatWriter=bu,t.NotFoundException=se,t.OneDReader=In,t.PDF417DecodedBitStreamParser=_e,t.PDF417DecoderErrorCorrection=Ro,t.PDF417Reader=Cr,t.PDF417ResultMetadata=ua,t.PerspectiveTransform=Wt,t.PlanarYUVLuminanceSource=Wi,t.QRCodeByteMatrix=fa,t.QRCodeDataMask=It,t.QRCodeDecodedBitStreamParser=Sn,t.QRCodeDecoderErrorCorrectionLevel=Ot,t.QRCodeDecoderFormatInformation=Zn,t.QRCodeEncoder=un,t.QRCodeEncoderQRCode=ui,t.QRCodeMaskUtil=xn,t.QRCodeMatrixUtil=ft,t.QRCodeMode=ut,t.QRCodeReader=Hr,t.QRCodeVersion=$e,t.QRCodeWriter=pr,t.RGBLuminanceSource=ts,t.RSS14Reader=Jt,t.RSSExpandedReader=ke,t.ReaderException=so,t.ReedSolomonDecoder=Dr,t.ReedSolomonEncoder=Po,t.ReedSolomonException=gn,t.Result=Le,t.ResultMetadataType=Ge,t.ResultPoint=Xe,t.StringUtils=te,t.UnsupportedOperationException=ee,t.VideoInputDevice=ae,t.WhiteRectangleDetector=Yr,t.WriterException=sn,t.ZXingArrays=z,t.ZXingCharset=_,t.ZXingInteger=W,t.ZXingStandardCharsets=N,t.ZXingStringBuilder=K,t.ZXingStringEncoding=ne,t.ZXingSystem=D,t.createAbstractExpandedDecoder=xu,Object.defineProperty(t,"__esModule",{value:!0})})}(Yh,Yh.exports)),Yh.exports}var Kn=VJ();const FJ=ng(Kn),BJ=pS({__proto__:null,default:FJ},[Kn]);var QC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,Kn.BarcodeFormat.QR_CODE],[Ze.AZTEC,Kn.BarcodeFormat.AZTEC],[Ze.CODABAR,Kn.BarcodeFormat.CODABAR],[Ze.CODE_39,Kn.BarcodeFormat.CODE_39],[Ze.CODE_93,Kn.BarcodeFormat.CODE_93],[Ze.CODE_128,Kn.BarcodeFormat.CODE_128],[Ze.DATA_MATRIX,Kn.BarcodeFormat.DATA_MATRIX],[Ze.MAXICODE,Kn.BarcodeFormat.MAXICODE],[Ze.ITF,Kn.BarcodeFormat.ITF],[Ze.EAN_13,Kn.BarcodeFormat.EAN_13],[Ze.EAN_8,Kn.BarcodeFormat.EAN_8],[Ze.PDF_417,Kn.BarcodeFormat.PDF_417],[Ze.RSS_14,Kn.BarcodeFormat.RSS_14],[Ze.RSS_EXPANDED,Kn.BarcodeFormat.RSS_EXPANDED],[Ze.UPC_A,Kn.BarcodeFormat.UPC_A],[Ze.UPC_E,Kn.BarcodeFormat.UPC_E],[Ze.UPC_EAN_EXTENSION,Kn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!BJ)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(Kn.DecodeHintType.POSSIBLE_FORMATS,i),o.set(Kn.DecodeHintType.TRY_HARDER,!1),this.hints=o}return n.prototype.decodeAsync=function(e){var t=this;return new Promise(function(r,i){try{r(t.decode(e))}catch(o){i(o)}})},n.prototype.decode=function(e){var t=new Kn.MultiFormatReader(this.verbose,this.hints),r=new Kn.HTMLCanvasElementLuminanceSource(e),i=new Kn.BinaryBitmap(new Kn.HybridBinarizer(r)),o=t.decode(i);return{text:o.text,format:y6.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createZXingFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return t},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),jJ=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},UJ=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},ZC=function(){function n(e,t,r){if(this.formatMap=new Map([[Ze.QR_CODE,"qr_code"],[Ze.AZTEC,"aztec"],[Ze.CODABAR,"codabar"],[Ze.CODE_39,"code_39"],[Ze.CODE_93,"code_93"],[Ze.CODE_128,"code_128"],[Ze.DATA_MATRIX,"data_matrix"],[Ze.ITF,"itf"],[Ze.EAN_13,"ean_13"],[Ze.EAN_8,"ean_8"],[Ze.PDF_417,"pdf417"],[Ze.UPC_A,"upc_a"],[Ze.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},n.prototype.decodeAsync=function(e){return jJ(this,void 0,void 0,function(){var t,r;return UJ(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(t=i.sent(),!t||t.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(t),[2,{text:r.rawValue,format:y6.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,i=0,o=e;i<o.length;i++){var c=o[i],h=c.boundingBox.width*c.boundingBox.height;h>r&&(r=h,t=c)}if(!t)throw"No largest barcode found";return t},n.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?t.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},n.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},n.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,r,i){e.set(t,r)}),e},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),JC=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},eS=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},zJ=function(){function n(e,t,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&ZC.isSupported()?(this.primaryDecoder=new ZC(e,r,i),this.secondaryDecoder=new QC(e,r,i)):this.primaryDecoder=new QC(e,r,i)}return n.prototype.decodeAsync=function(e){return JC(this,void 0,void 0,function(){var t;return eS(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(e){return JC(this,void 0,void 0,function(){var t,r;return eS(this,function(i){switch(i.label){case 0:t=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){var i=r[t];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),k_=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),J0=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},eg=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},w6=function(){function n(e,t){this.name=e,this.track=t}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},n.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var t=e[this.name];return t}return null},n}(),WJ=function(n){k_(e,n);function e(t,r){return n.call(this,t,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var r={};r[this.name]=t;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities(),r=t[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(w6),HJ=function(n){k_(e,n);function e(t){return n.call(this,"zoom",t)||this}return e}(WJ),GJ=function(n){k_(e,n);function e(t){return n.call(this,"torch",t)||this}return e}(w6),$J=function(){function n(e){this.track=e}return n.prototype.zoomFeature=function(){return new HJ(this.track)},n.prototype.torchFeature=function(){return new GJ(this.track)},n}(),qJ=function(){function n(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return n.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},n.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(e,t,r,i){return J0(this,void 0,void 0,function(){var o,c;return eg(this,function(h){switch(h.label){case 0:return o=new n(e,t,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(e){return J0(this,void 0,void 0,function(){return eg(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,r){var i=e.mediaStream.getVideoTracks(),o=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(h){e.mediaStream.removeTrack(h),h.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},n.prototype.getCapabilities=function(){return new $J(this.getFirstTrackOrFail())},n}(),KJ=function(){function n(e){this.mediaStream=e}return n.prototype.render=function(e,t,r){return J0(this,void 0,void 0,function(){return eg(this,function(i){return[2,qJ.create(e,this.mediaStream,t,r)]})})},n.create=function(e){return J0(this,void 0,void 0,function(){var t,r;return eg(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return r=i.sent(),[2,new n(r)]}})})},n}(),tS=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},nS=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},XJ=function(){function n(){}return n.failIfNotSupported=function(){return tS(this,void 0,void 0,function(){return nS(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(e){return tS(this,void 0,void 0,function(){return nS(this,function(t){return[2,KJ.create(e)]})})},n}(),YJ=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(w){try{g(r.next(w))}catch(E){c(E)}}function m(w){try{g(r.throw(w))}catch(E){c(E)}}function g(w){w.done?o(w.value):i(w.value).then(h,m)}g((r=r.apply(n,e||[])).next())})},QJ=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(w){return m([g,w])}}function m(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(t=0)),t;)try{if(r=1,i&&(o=g[0]&2?i.return:g[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,g[1])).done)return o;switch(i=0,o&&(g=[g[0]&2,o.value]),g[0]){case 0:case 1:o=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,i=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3])){t.label=g[1];break}if(g[0]===6&&t.label<o[1]){t.label=o[1],o=g;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(g);break}o[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(w){g=[6,w],i=0}finally{r=o=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},ZJ=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var e=dd.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(e=dd.insecureContextCameraQueryError()),Promise.reject(e)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},n.getCamerasFromMediaDevices=function(){return YJ(this,void 0,void 0,function(){var e,t,r,i,o,c,h;return QJ(this,function(m){switch(m.label){case 0:return e=function(g){for(var w=g.getVideoTracks(),E=0,T=w;E<T.length;E++){var R=T[E];R.enabled=!1,R.stop(),g.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=m.sent(),i=[],o=0,c=r;o<c.length;o++)h=c[o],h.kind==="videoinput"&&i.push({id:h.deviceId,label:h.label});return e(t),[2,i]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){var r=function(o){for(var c=[],h=0,m=o;h<m.length;h++){var g=m[h];g.kind==="video"&&c.push({id:g.id,label:g.label})}e(c)},i=MediaStreamTrack;i.getSources(r)})},n}(),gr;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(gr||(gr={}));var JJ=function(){function n(){this.state=gr.NOT_STARTED,this.onGoingTransactionNewState=gr.UNKNOWN}return n.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},n.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=gr.UNKNOWN,this.directTransition(e)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===gr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=gr.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==gr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(e){switch(this.state){case gr.UNKNOWN:throw"Transition from unknown is not allowed";case gr.NOT_STARTED:this.failIfNewStateIs(e,[gr.PAUSED]);break;case gr.SCANNING:break;case gr.PAUSED:break}},n.prototype.failIfNewStateIs=function(e,t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},n}(),eee=function(){function n(e){this.stateManager=e}return n.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},n.prototype.directTransition=function(e){this.stateManager.directTransition(e)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===gr.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==gr.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===gr.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===gr.PAUSED},n}(),tee=function(){function n(){}return n.create=function(){return new eee(new JJ)},n}(),nee=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ts=function(n){nee(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(DJ),ree=function(){function n(e,t){this.logger=t,this.fps=Ts.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ts.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?x6.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Ia(this.qrbox)},n.create=function(e,t){return new n(e,t)},n}(),rS=function(){function n(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof t=="boolean"?this.verbose=t===!0:t&&(r=t,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new MJ(this.verbose),this.qrcode=new zJ(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=tee.create()}return n.prototype.start=function(e,t,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var h=ree.create(t,this.logger);this.clearElement();var m=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=m,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Ts.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var E=this,T=this.stateManagerProxy.startTransition(gr.SCANNING);return new Promise(function(R,M){var D=g?h.videoConstraints:E.createVideoConstraints(e);if(!D){T.cancel(),M("videoConstraints should be defined");return}var L={};(!g||h.aspectRatio)&&(L.aspectRatio=h.aspectRatio);var G={onRenderSurfaceReady:function(z,W){E.setupUi(z,W,h),E.isScanning=!0,E.foreverScan(h,r,c)}};XJ.failIfNotSupported().then(function(z){z.create(D).then(function(W){return W.render(o.element,L,G).then(function(Y){E.renderedCamera=Y,T.execute(),R(null)}).catch(function(Y){T.cancel(),M(Y)})}).catch(function(W){T.cancel(),M(dd.errorGettingUserMedia(W))})}).catch(function(z){T.cancel(),M(dd.cameraStreamingNotSupported())})})},n.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(gr.PAUSED),this.showPausedState(),(Ia(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(gr.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){t();return}this.renderedCamera.resume(function(){t()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(gr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(Ts.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),t.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(r){return r.decodedText})},n.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ia(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var h=c.width,m=c.height,g=document.getElementById(r.elementId),w=g.clientWidth?g.clientWidth:Ts.DEFAULT_WIDTH,E=Math.max(g.clientHeight?g.clientHeight:m,Ts.FILE_SCAN_MIN_HEIGHT),T=r.computeCanvasDrawConfig(h,m,w,E);if(t){var R=r.createCanvasElement(w,E,"qr-canvas-visible");R.style.display="inline-block",g.appendChild(R);var M=R.getContext("2d");if(!M)throw"Unable to get 2d context from canvas";M.canvas.width=w,M.canvas.height=E,M.drawImage(c,0,0,h,m,T.x,T.y,T.width,T.height)}var D=Ts.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(c.width,T.width),G=Math.max(c.height,T.height),z=L+2*D,W=G+2*D,Y=r.createCanvasElement(z,W);g.appendChild(Y);var Z=Y.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=z,Z.canvas.height=W,Z.drawImage(c,0,0,h,m,D,D,L,G);try{r.qrcode.decodeRobustlyAsync(Y).then(function(ie){i(XC.createFromQrcodeResult(ie))}).catch(o)}catch(ie){o("QR code parse error, error = ".concat(ie))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return ZJ.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(e){if(e){if(!x6.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(e){var t=[Ze.QR_CODE,Ze.AZTEC,Ze.CODABAR,Ze.CODE_39,Ze.CODE_93,Ze.CODE_128,Ze.DATA_MATRIX,Ze.MAXICODE,Ze.ITF,Ze.EAN_13,Ze.EAN_8,Ze.PDF_417,Ze.RSS_14,Ze.RSS_EXPANDED,Ze.UPC_A,Ze.UPC_E,Ze.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var c=o[i];PJ(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},n.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ia(e))return!0;if(!Ia(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ia(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return Ia(t.useBarCodeDetectorIfSupported)?!0:t.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(e,t,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,t,o),h=function(g){if(g<Ts.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ts.MIN_QR_BOX_SIZE,"px.")},m=function(g){return g>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};h(c.width),h(c.height),c.width=m(c.width)},n.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(e,t,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,t)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},n.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var i=Ia(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,t,i);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=t,h={x:0,y:0,width:e,height:t},m=c?this.getShadedRegionBounds(e,t,o):h,g=this.createCanvasElement(m.width,m.height),w={willReadFrequently:!0},E=g.getContext("2d",w);E.canvas.width=m.width,E.canvas.height=m.height,this.element.append(g),c&&this.possiblyInsertShadingElement(this.element,e,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=E,this.canvasElement=g},n.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=dd.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},n.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,XC.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=dd.codeParseError(i);return t(o,OJ.createFrom(o)),!1})},n.prototype.foreverScan=function(e,t,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*c,g=this.qrRegion.height*h,w=this.qrRegion.x*c,E=this.qrRegion.y*h;this.context.drawImage(o,w,E,m,g,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,t,r)},i.getTimeoutFps(e.fps))};this.scanContext(t,r).then(function(R){!R&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(t,r).finally(function(){T()})):T()}).catch(function(R){i.logger.logError("Error happend while scanning context",R),T()})}},n.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var t="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(M){if(M in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(M,"'")},h=Object.keys(e);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var m=Object.keys(e)[0];if(m!==t&&m!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(m===t){var g=e.facingMode;if(typeof g=="string"){if(c(g))return{facingMode:g}}else if(typeof g=="object")if(o in g){if(c(g["".concat(o)]))return{facingMode:{exact:g["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var E=e.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(o in E)return{deviceId:{exact:E["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var T=typeof E;throw"Invalid type of 'deviceId' = ".concat(T)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},n.prototype.computeCanvasDrawConfig=function(e,t,r,i){if(e<=r&&t<=i){var o=(r-e)/2,c=(i-t)/2;return{x:o,y:c,width:e,height:t}}else{var h=e,m=t;return e>r&&(t=r/e*t,e=r),t>i&&(e=i/t*e,t=i),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(m)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,i)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},n.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Ts.BORDER_SHADER_MATCH_COLOR:Ts.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(e,t,r){var i=e,o=t,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=Ia(r)?"qr-canvas":r,c},n.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},n.prototype.possiblyInsertShadingElement=function(e,t,r,i){if(!(t-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(t-i.width)/2,h=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Ts.SHADED_REGION_ELEMENT_ID),t-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var m=5,g=40;this.insertShaderBorders(o,g,m,-m,null,0,!0),this.insertShaderBorders(o,g,m,-m,null,0,!1),this.insertShaderBorders(o,g,m,null,-m,0,!0),this.insertShaderBorders(o,g,m,null,-m,0,!1),this.insertShaderBorders(o,m,g+m,-m,null,-m,!0),this.insertShaderBorders(o,m,g+m,null,-m,-m,!0),this.insertShaderBorders(o,m,g+m,-m,null,-m,!1),this.insertShaderBorders(o,m,g+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(o)}},n.prototype.insertShaderBorders=function(e,t,r,i,o,c,h){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Ts.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(t,"px"),m.style.height="".concat(r,"px"),i!==null&&(m.style.top="".concat(i,"px")),o!==null&&(m.style.bottom="".concat(o,"px")),h?m.style.left="".concat(c,"px"):m.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(e){return 1e3/e},n}(),iS;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(iS||(iS={}));function iee({onScan:n,onClose:e,onSwitchToManual:t}){const[r,i]=P.useState(!0),[o,c]=P.useState(null),[h,m]=P.useState(!1),g=P.useRef(null);P.useRef(null);const w=P.useCallback(()=>{g.current&&h?g.current.stop().then(()=>{m(!1)}).catch(M=>{console.error("Error stopping scanner:",M),m(!1)}):m(!1)},[h]),E=P.useCallback(async()=>{try{i(!0),c(null);const M=await rS.getCameras();if(M&&M.length===0){c("No camera found. Please enter the code manually."),i(!1);return}g.current=new rS("qr-reader"),await g.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1},(D,L)=>{w(),xr.success("Event found — joining now…"),n(D)},D=>{}),m(!0),i(!1)}catch(M){console.error("Scanner error:",M),M.name==="NotAllowedError"||M.name==="PermissionDeniedError"?c("Please allow camera access to scan codes."):M.name==="NotFoundError"?c("No camera found. Please enter the code manually."):c("Could not start camera. Try entering the code manually."),i(!1)}},[n,w]);P.useEffect(()=>(E(),()=>{try{w()}catch(M){console.error("Error during component cleanup:",M),m(!1)}}),[E,w]);const T=()=>{try{w()}catch(M){console.error("Error during scanner cleanup:",M)}e()},R=()=>{try{w()}catch(M){console.error("Error during scanner cleanup:",M)}t()};return A.jsx(Jg,{open:!0,onOpenChange:T,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl overflow-hidden shadow-2xl",children:[A.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/80 to-transparent p-4",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("h3",{className:"text-white flex items-center gap-2 font-semibold",children:[A.jsx(Sx,{className:"w-5 h-5"}),"Scan Event QR Code"]}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:T,className:"text-white hover:bg-white/20 rounded-full",children:A.jsx(Yi,{className:"w-5 h-5"})})]})}),A.jsxs("div",{className:"relative aspect-square bg-black",children:[r&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:A.jsxs("div",{className:"text-white text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),A.jsx("p",{className:"text-sm",children:"Starting camera..."})]})}),o&&A.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-20",children:[A.jsx(Sx,{className:"w-12 h-12 mx-auto mb-4 text-white opacity-50"}),A.jsx("p",{className:"text-white text-sm mb-4",children:o}),A.jsx(Ut,{variant:"outline",onClick:R,className:"text-white border-white hover:bg-white hover:text-black",children:"Enter Code Manually"})]}),A.jsx("div",{id:"qr-reader",className:`w-full h-full ${r||o?"opacity-0":"opacity-100"}`}),!o&&!r&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:A.jsxs("div",{className:"relative w-64 h-64",children:[A.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-pink-500 rounded-tl-2xl"}),A.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-pink-500 rounded-tr-2xl"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-pink-500 rounded-bl-2xl"}),A.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-pink-500 rounded-br-2xl"})]})})]}),A.jsx("div",{className:"bg-white dark:bg-gray-900 p-4 text-center",children:A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Position the QR code inside the frame."})})]})})})}function see({onSubmit:n,onClose:e}){const[t,r]=P.useState(""),[i,o]=P.useState(!1),c=async h=>{h.preventDefault(),t.trim()&&(o(!0),await n(t.trim().toUpperCase()),o(!1))};return A.jsx(Jg,{open:!0,onOpenChange:e,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl",children:[A.jsxs(e1,{className:"text-center pb-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("div",{className:"flex-1"}),A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center",children:A.jsx(FS,{className:"w-8 h-8 text-white"})}),A.jsx("div",{className:"flex-1 flex justify-end",children:A.jsx(Ut,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:A.jsx(Yi,{className:"w-5 h-5"})})})]}),A.jsx(t1,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Enter Event Code"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Enter the code provided by the event organizer"})]}),A.jsxs("form",{onSubmit:c,className:"space-y-6",children:[A.jsxs("div",{className:"space-y-2",children:[A.jsx($l,{type:"text",placeholder:"e.g., WED2025",value:t,onChange:h=>r(h.target.value.toUpperCase()),className:"text-center text-lg font-mono tracking-wider border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 rounded-xl py-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",autoFocus:!0}),A.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:"Codes are usually 6-8 characters"})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx(Ut,{type:"button",variant:"outline",onClick:e,className:"flex-1 rounded-xl py-3 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Cancel"}),A.jsx(Ut,{type:"submit",disabled:!t.trim()||i,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl py-3",children:i?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):A.jsxs(A.Fragment,{children:["Join Event",A.jsx(cv,{className:"w-4 h-4 ml-2"})]})})]})]})]})})})}function Zw(){const n=oa(),[e,t]=P.useState(null),[r,i]=P.useState(!1),o=w=>{try{const T=new URL(w).searchParams.get("code");T?(m(),n(Ln(`join?code=${T.toUpperCase()}`))):alert("Invalid QR code: No event code found in URL.")}catch{typeof w=="string"&&w.trim().length>3?(m(),n(Ln(`join?code=${w.toUpperCase()}`))):alert("Invalid QR code format.")}},c=w=>{m(),n(Ln(`join?code=${w.toUpperCase()}`))},h=w=>{t(w)},m=()=>{t(null)},g=()=>{t("manualCodeEntry")};return A.jsxs("div",{className:"min-h-screen flex flex-col justify-between items-center px-6 py-8 relative overflow-hidden bg-white dark:bg-gray-900",children:[A.jsx("div",{className:"absolute inset-0 z-0",style:{background:"linear-gradient(135deg, rgba(251, 167, 213, 0.8) 0%, rgba(193, 135, 253, 0.8) 100%)"}}),A.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 w-full max-w-sm mx-auto",children:[A.jsxs("div",{className:"text-center mb-12",children:[A.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:A.jsx(vd,{className:"w-10 h-10 text-white"})}),A.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("h2",{className:"text-2xl font-medium text-white mb-4",children:"Meet singles at this event."}),A.jsx("button",{onClick:()=>i(!0),className:"text-white underline text-lg hover:opacity-80 transition-opacity",children:"See how it works"})]}),A.jsxs("div",{className:"space-y-4 w-full",children:[A.jsxs(Ut,{onClick:()=>h("qrScanner"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[A.jsx(l5,{className:"w-5 h-5 mr-3"}),"Scan QR Code"]}),A.jsxs(Ut,{onClick:()=>h("manualCodeEntry"),className:"w-full bg-white hover:bg-gray-50 text-black font-medium py-4 rounded-full shadow-lg transition-all",children:[A.jsx(FS,{className:"w-5 h-5 mr-3"}),"Enter Code Manually"]})]})]}),A.jsx("div",{className:"relative z-10 text-center",children:A.jsxs("p",{className:"text-white text-sm leading-relaxed",children:["By creating a temporary profile, you agree to our"," ",A.jsx("a",{href:"https://hooked-app.com/terms",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Terms"})," ","and"," ",A.jsx("a",{href:"https://hooked-app.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"underline hover:opacity-80 transition-opacity",children:"Privacy Policy"}),"."]})}),r&&A.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-sm w-full max-h-[70vh] overflow-y-auto relative",children:[A.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(Yi,{className:"w-5 h-5"})}),A.jsxs("div",{className:"pr-8",children:[A.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"How it works"}),A.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 space-y-3 text-sm leading-relaxed",children:[A.jsx("li",{children:"• Scan the event's unique QR code"}),A.jsx("li",{children:"• Create a temporary profile (first name only)"}),A.jsx("li",{children:"• Discover other singles at this event"}),A.jsx("li",{children:"• Match and chat privately"}),A.jsx("li",{children:"• Everything expires when the event ends"})]})]})]})}),e==="qrScanner"&&A.jsx(iee,{onScan:o,onClose:m,onSwitchToManual:g}),e==="manualCodeEntry"&&A.jsx(see,{onSubmit:c,onClose:m})]})}const oee={UploadFile:ZW},v6=oee.UploadFile,si=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("rounded-xl border bg-card text-card-foreground shadow",n),...e}));si.displayName="Card";const Fo=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("flex flex-col space-y-1.5 p-6",n),...e}));Fo.displayName="CardHeader";const mo=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("font-semibold leading-none tracking-tight",n),...e}));mo.displayName="CardTitle";const aee=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm text-muted-foreground",n),...e}));aee.displayName="CardDescription";const oi=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("p-6 pt-0",n),...e}));oi.displayName="CardContent";const lee=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("flex items-center p-6 pt-0",n),...e}));lee.displayName="CardFooter";function cee(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var e=Math.random()*16|0,t=n=="x"?e:e&3|8;return t.toString(16)})}function _6(){const n=oa(),[e,t]=P.useState(null),[r,i]=P.useState("manual"),[o,c]=P.useState({first_name:"",age:"",gender_identity:"",interested_in:"",profile_photo_url:""}),[h,m]=P.useState(!1),[g,w]=P.useState(!1),E={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}};P.useEffect(()=>{(async()=>{const D=localStorage.getItem("currentEventId");if(!D){n(Ln("Home"));return}try{const L=await Of.filter({id:D});L.length>0?t(L[0]):n(Ln("Home"))}catch(L){console.error("Error fetching event details:",L),n(Ln("Home"))}})()},[n]);const T=async M=>{const D=M.target.files[0];if(D){if(!D.type.startsWith("image/")){xr.error("Please select an image file.");return}if(D.size>10*1024*1024){xr.error("Image must be smaller than 10MB.");return}w(!0);try{const{file_url:L}=await v6({file:D});c(G=>({...G,profile_photo_url:L})),xr.success("Photo uploaded successfully!")}catch(L){console.error("Error uploading photo:",L),xr.error("Failed to upload photo. Please try again.")}finally{w(!1)}}},R=async M=>{if(M.preventDefault(),!o.first_name||!o.age||!o.gender_identity||!o.interested_in){xr.error("Please fill in all fields.");return}if(!o.profile_photo_url){xr.error("Please upload a profile photo.");return}m(!0),i("processing");try{const D=cee(),L="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),G=`user_${D}@hooked-app.com`;await ka.create({event_id:e.id,session_id:D,first_name:o.first_name,email:G,age:parseInt(o.age),gender_identity:o.gender_identity,interested_in:o.interested_in,profile_color:L,profile_photo_url:o.profile_photo_url,is_visible:!0}),localStorage.setItem("currentSessionId",D),localStorage.setItem("currentProfileColor",L),localStorage.setItem("currentProfilePhotoUrl",o.profile_photo_url),xr.success("Profile created! Welcome to the event."),n(Ln("Discovery"))}catch(D){console.error("Error creating profile:",D),xr.error("Failed to create profile. Please try again."),i("manual")}finally{m(!1)}};return A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center px-4 py-8",children:A.jsx("div",{className:"w-full max-w-md",children:A.jsxs(mp,{mode:"wait",children:[r==="manual"&&A.jsx(ra.div,{...E,children:A.jsxs(si,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:[A.jsxs(Fo,{className:"text-center",children:[A.jsx(mo,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Create Your Event Profile For:"}),A.jsx(mo,{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(e==null?void 0:e.name)||"This Event"})]}),A.jsx(oi,{children:A.jsxs("form",{onSubmit:R,className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Profile Photo *"}),A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsxs("div",{className:"relative",children:[A.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:g}),A.jsx("label",{htmlFor:"profile-photo-upload",className:"w-32 h-32 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-purple-400 transition-colors bg-gray-50 dark:bg-gray-700",children:g?A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}):o.profile_photo_url?A.jsx("img",{src:o.profile_photo_url,alt:"Profile preview",className:"w-full h-full rounded-full object-cover"}):A.jsxs("div",{className:"text-center",children:[A.jsx(C5,{className:"w-8 h-8 text-gray-400 dark:text-gray-500 mx-auto mb-2"}),A.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload Photo"})]})})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Required • Max 10MB"})]})]}),A.jsx("div",{children:A.jsx($l,{type:"text",placeholder:"First Name *",value:o.first_name,onChange:M=>c(D=>({...D,first_name:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",required:!0})}),A.jsx("div",{children:A.jsx($l,{type:"number",placeholder:"Age *",value:o.age,onChange:M=>c(D=>({...D,age:M.target.value})),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500",min:"18",max:"99",required:!0})}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I am a... *"}),A.jsx("div",{className:"grid grid-cols-2 gap-3",children:["man","woman"].map(M=>A.jsx("button",{type:"button",onClick:()=>c(D=>({...D,gender_identity:M})),className:`py-3 px-4 rounded-xl border-2 transition-all font-medium ${o.gender_identity===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"I'm interested in... *"}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:["men","women","everyone"].map(M=>A.jsx("button",{type:"button",onClick:()=>c(D=>({...D,interested_in:M})),className:`py-3 px-2 rounded-xl border-2 transition-all font-medium text-sm ${o.interested_in===M?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800"}`,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),A.jsx(Ut,{type:"submit",disabled:h||g,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white py-3 rounded-xl",children:h?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating Profile..."]}):"Join Event"})]})})]})},"manual"),r==="processing"&&A.jsx(ra.div,{...E,children:A.jsx(si,{className:"border-0 shadow-xl bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Creating Your Profile"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Setting up your temporary profile for this event."})]})})},"processing")]})})})}const uee=Bg("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ea({className:n,variant:e,...t}){return A.jsx("div",{className:ln(uee({variant:e}),n),...t})}var E6=["PageUp","PageDown"],b6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ih="Slider",[Jw,dee,hee]=N4(ih),[A6,yne]=eh(ih,[hee]),[fee,n1]=A6(ih),T6=P.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:o=1,orientation:c="horizontal",disabled:h=!1,minStepsBetweenThumbs:m=0,defaultValue:g=[r],value:w,onValueChange:E=()=>{},onValueCommit:T=()=>{},inverted:R=!1,form:M,...D}=n,L=P.useRef(new Set),G=P.useRef(0),W=c==="horizontal"?pee:mee,[Y=[],Z]=Wf({prop:w,defaultProp:g,onChange:ne=>{var K;(K=[...L.current][G.current])==null||K.focus(),E(ne)}}),ie=P.useRef(Y);function F(ne){const te=vee(Y,ne);ee(ne,te)}function B(ne){ee(ne,G.current)}function H(){const ne=ie.current[G.current];Y[G.current]!==ne&&T(Y)}function ee(ne,te,{commit:K}={commit:!1}){const we=Iee(o),se=Aee(Math.round((ne-r)/o)*o+r,we),Ae=G0(se,[r,i]);Z((xe=[])=>{const oe=xee(xe,Ae,te);if(bee(oe,m*o)){G.current=oe.indexOf(Ae);const Te=String(oe)!==String(xe);return Te&&K&&T(oe),Te?oe:xe}else return xe})}return A.jsx(fee,{scope:n.__scopeSlider,name:t,disabled:h,min:r,max:i,valueIndexToChangeRef:G,thumbs:L.current,values:Y,orientation:c,form:M,children:A.jsx(Jw.Provider,{scope:n.__scopeSlider,children:A.jsx(Jw.Slot,{scope:n.__scopeSlider,children:A.jsx(W,{"aria-disabled":h,"data-disabled":h?"":void 0,...D,ref:e,onPointerDown:an(D.onPointerDown,()=>{h||(ie.current=Y)}),min:r,max:i,inverted:R,onSlideStart:h?void 0:F,onSlideMove:h?void 0:B,onSlideEnd:h?void 0:H,onHomeKeyDown:()=>!h&&ee(r,0,{commit:!0}),onEndKeyDown:()=>!h&&ee(i,Y.length-1,{commit:!0}),onStepKeyDown:({event:ne,direction:te})=>{if(!h){const se=E6.includes(ne.key)||ne.shiftKey&&b6.includes(ne.key)?10:1,Ae=G.current,xe=Y[Ae],oe=o*se*te;ee(xe+oe,Ae,{commit:!0})}}})})})})});T6.displayName=ih;var[C6,S6]=A6(ih,{startEdge:"left",endEdge:"right",size:"width",direction:1}),pee=P.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:o,onSlideStart:c,onSlideMove:h,onSlideEnd:m,onStepKeyDown:g,...w}=n,[E,T]=P.useState(null),R=bn(e,W=>T(W)),M=P.useRef(void 0),D=k4(i),L=D==="ltr",G=L&&!o||!L&&o;function z(W){const Y=M.current||E.getBoundingClientRect(),Z=[0,Y.width],F=P_(Z,G?[t,r]:[r,t]);return M.current=Y,F(W-Y.left)}return A.jsx(C6,{scope:n.__scopeSlider,startEdge:G?"left":"right",endEdge:G?"right":"left",direction:G?1:-1,size:"width",children:A.jsx(R6,{dir:D,"data-orientation":"horizontal",...w,ref:R,style:{...w.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:W=>{const Y=z(W.clientX);c==null||c(Y)},onSlideMove:W=>{const Y=z(W.clientX);h==null||h(Y)},onSlideEnd:()=>{M.current=void 0,m==null||m()},onStepKeyDown:W=>{const Z=I6[G?"from-left":"from-right"].includes(W.key);g==null||g({event:W,direction:Z?-1:1})}})})}),mee=P.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:h,onStepKeyDown:m,...g}=n,w=P.useRef(null),E=bn(e,w),T=P.useRef(void 0),R=!i;function M(D){const L=T.current||w.current.getBoundingClientRect(),G=[0,L.height],W=P_(G,R?[r,t]:[t,r]);return T.current=L,W(D-L.top)}return A.jsx(C6,{scope:n.__scopeSlider,startEdge:R?"bottom":"top",endEdge:R?"top":"bottom",size:"height",direction:R?1:-1,children:A.jsx(R6,{"data-orientation":"vertical",...g,ref:E,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:D=>{const L=M(D.clientY);o==null||o(L)},onSlideMove:D=>{const L=M(D.clientY);c==null||c(L)},onSlideEnd:()=>{T.current=void 0,h==null||h()},onStepKeyDown:D=>{const G=I6[R?"from-bottom":"from-top"].includes(D.key);m==null||m({event:D,direction:G?-1:1})}})})}),R6=P.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:c,onEndKeyDown:h,onStepKeyDown:m,...g}=n,w=n1(ih,t);return A.jsx(nn.span,{...g,ref:e,onKeyDown:an(n.onKeyDown,E=>{E.key==="Home"?(c(E),E.preventDefault()):E.key==="End"?(h(E),E.preventDefault()):E6.concat(b6).includes(E.key)&&(m(E),E.preventDefault())}),onPointerDown:an(n.onPointerDown,E=>{const T=E.target;T.setPointerCapture(E.pointerId),E.preventDefault(),w.thumbs.has(T)?T.focus():r(E)}),onPointerMove:an(n.onPointerMove,E=>{E.target.hasPointerCapture(E.pointerId)&&i(E)}),onPointerUp:an(n.onPointerUp,E=>{const T=E.target;T.hasPointerCapture(E.pointerId)&&(T.releasePointerCapture(E.pointerId),o(E))})})}),N6="SliderTrack",k6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=n1(N6,t);return A.jsx(nn.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});k6.displayName=N6;var ev="SliderRange",P6=P.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=n1(ev,t),o=S6(ev,t),c=P.useRef(null),h=bn(e,c),m=i.values.length,g=i.values.map(T=>M6(T,i.min,i.max)),w=m>1?Math.min(...g):0,E=100-Math.max(...g);return A.jsx(nn.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:h,style:{...n.style,[o.startEdge]:w+"%",[o.endEdge]:E+"%"}})});P6.displayName=ev;var tv="SliderThumb",D6=P.forwardRef((n,e)=>{const t=dee(n.__scopeSlider),[r,i]=P.useState(null),o=bn(e,h=>i(h)),c=P.useMemo(()=>r?t().findIndex(h=>h.ref.current===r):-1,[t,r]);return A.jsx(gee,{...n,ref:o,index:c})}),gee=P.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...o}=n,c=n1(tv,t),h=S6(tv,t),[m,g]=P.useState(null),w=bn(e,z=>g(z)),E=m?c.form||!!m.closest("form"):!0,T=__(m),R=c.values[r],M=R===void 0?0:M6(R,c.min,c.max),D=wee(r,c.values.length),L=T==null?void 0:T[h.size],G=L?_ee(L,M,h.direction):0;return P.useEffect(()=>{if(m)return c.thumbs.add(m),()=>{c.thumbs.delete(m)}},[m,c.thumbs]),A.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[h.startEdge]:`calc(${M}% + ${G}px)`},children:[A.jsx(Jw.ItemSlot,{scope:n.__scopeSlider,children:A.jsx(nn.span,{role:"slider","aria-label":n["aria-label"]||D,"aria-valuemin":c.min,"aria-valuenow":R,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...o,ref:w,style:R===void 0?{display:"none"}:n.style,onFocus:an(n.onFocus,()=>{c.valueIndexToChangeRef.current=r})})}),E&&A.jsx(O6,{name:i??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:R},r)]})});D6.displayName=tv;var yee="RadioBubbleInput",O6=P.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=P.useRef(null),o=bn(i,r),c=A_(e);return P.useEffect(()=>{const h=i.current;if(!h)return;const m=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(m,"value").set;if(c!==e&&w){const E=new Event("input",{bubbles:!0});w.call(h,e),h.dispatchEvent(E)}},[c,e]),A.jsx(nn.input,{style:{display:"none"},...t,ref:o,defaultValue:e})});O6.displayName=yee;function xee(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,o)=>i-o)}function M6(n,e,t){const o=100/(t-e)*(n-e);return G0(o,[0,100])}function wee(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function vee(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function _ee(n,e,t){const r=n/2,o=P_([0,50],[0,r]);return(r-o(e)*t)*t}function Eee(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function bee(n,e){if(e>0){const t=Eee(n);return Math.min(...t)>=e}return!0}function P_(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function Iee(n){return(String(n).split(".")[1]||"").length}function Aee(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var L6=T6,Tee=k6,Cee=P6,See=D6;const nv=P.forwardRef(({className:n,...e},t)=>A.jsxs(L6,{ref:t,className:ln("relative flex w-full touch-none select-none items-center",n),...e,children:[A.jsx(Tee,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:A.jsx(Cee,{className:"absolute h-full bg-primary"})}),A.jsx(See,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));nv.displayName=L6.displayName;const Ree=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing"],sS=["yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function Nee({filters:n,onFiltersChange:e,onClose:t}){const[r,i]=P.useState(n),[o,c]=P.useState(!1),h=w=>{i(E=>({...E,interests:E.interests.includes(w)?E.interests.filter(T=>T!==w):[...E.interests,w]}))},m=()=>{e(r),t()},g=()=>{const w={age_min:18,age_max:99,gender:"all",interests:[]};i(w),e(w),t()};return A.jsxs(Jg,{open:!0,onOpenChange:t,children:[A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[A.jsx(e1,{className:"mb-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs(t1,{className:"flex items-center gap-2 text-gray-900 dark:text-white",children:[A.jsx(VS,{className:"w-5 h-5"}),"Filter Profiles"]}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:A.jsx(Yi,{className:"w-4 h-4"})})]})}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-base font-medium mb-4 block text-gray-900 dark:text-white",children:"Age Range"}),A.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[A.jsxs("span",{className:"text-sm font-medium text-pink-600 dark:text-pink-400",children:["Min Age: ",r.age_min]}),A.jsxs("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:["Max Age: ",r.age_max]})]}),A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"Drag the handles to set your preferred age range"}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Minimum Age"}),A.jsx("div",{className:"relative",children:A.jsx(nv,{value:[r.age_min],onValueChange:([w])=>i(E=>({...E,age_min:w<E.age_max?w:E.age_max-1})),min:18,max:99,step:1,className:"age-slider-min"})})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 block",children:"Maximum Age"}),A.jsx("div",{className:"relative",children:A.jsx(nv,{value:[r.age_max],onValueChange:([w])=>i(E=>({...E,age_max:w>E.age_min?w:E.age_min+1})),min:18,max:99,step:1,className:"age-slider-max"})})]})]})]}),A.jsxs("div",{children:[A.jsx(cs,{className:"text-base font-medium mb-3 block text-gray-900 dark:text-white",children:"Must Share These Interests"}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ree.map(w=>A.jsx(ea,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w)),!o&&r.interests.filter(w=>sS.includes(w)).map(w=>A.jsx(ea,{variant:"default",className:"cursor-pointer px-3 py-2 rounded-full transition-all bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",onClick:()=>h(w),children:w},`selected-${w}`))]}),A.jsx("div",{className:"text-center mt-3",children:A.jsx(Ut,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(!o),className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full","aria-label":o?"Show less interests":"Show more interests",children:o?A.jsx(LS,{className:"w-5 h-5"}):A.jsx(uv,{className:"w-5 h-5"})})}),A.jsx(mp,{children:o&&A.jsx(ra.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:A.jsx("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:sS.map(w=>A.jsx(ea,{variant:r.interests.includes(w)?"default":"outline",className:`cursor-pointer px-3 py-2 rounded-full transition-all ${r.interests.includes(w)?"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,onClick:()=>h(w),children:w},w))})})}),r.interests.length>0&&A.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Showing only people who share at least one selected interest."})]}),A.jsxs("div",{className:"flex gap-3 pt-4",children:[A.jsx(Ut,{onClick:g,variant:"outline",className:"flex-1 rounded-xl border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800",children:"Reset All"}),A.jsx(Ut,{onClick:m,className:"flex-1 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl",children:"Apply Filters"})]})]})]})}),A.jsx("style",{jsx:!0,children:`
        .age-slider-min [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #f87171 0%, #f87171 100%);
          border-radius: 3px;
        }
        
        .age-slider-max [data-orientation="horizontal"] {
          height: 6px;
          background: linear-gradient(to right, #a855f7 0%, #a855f7 100%);
          border-radius: 3px;
        }
        
        .age-slider-min [role="slider"],
        .age-slider-max [role="slider"] {
          width: 20px;
          height: 20px;
          background: white;
          border: 3px solid;
          border-radius: 50%;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          transition: all 0.2s ease;
        }
        
        .age-slider-min [role="slider"] {
          border-color: #f87171;
        }
        
        .age-slider-max [role="slider"] {
          border-color: #a855f7;
        }
        
        .age-slider-min [role="slider"]:hover,
        .age-slider-max [role="slider"]:hover {
          transform: scale(1.1);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .age-slider-min [role="slider"]:focus,
        .age-slider-max [role="slider"]:focus {
          outline: none;
          transform: scale(1.15);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
      `})]})}function V6({profile:n,onClose:e,onLike:t,isLiked:r}){if(P.useEffect(()=>{const T=R=>{R.key==="Escape"&&e()};return document.addEventListener("keydown",T),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",T),document.body.style.overflow="auto"}},[e]),!n)return null;const{profile_photo_url:i,profile_color:o,first_name:c,age:h,height:m,interests:g,bio:w}=n,E=c?c[0].toUpperCase():"?";return A.jsx(mp,{children:A.jsx(ra.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 dark:bg-black/80 backdrop-blur-sm p-4",onClick:e,children:A.jsxs(ra.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:300,damping:25},className:"relative w-full max-w-sm bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",onClick:T=>T.stopPropagation(),children:[A.jsxs("div",{className:"relative",children:[i?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:i,alt:`${c}'s profile photo`,className:"w-full h-80 object-cover",loading:"lazy",onError:T=>{T.target.style.display="none";const R=T.target.nextElementSibling;R&&(R.style.display="flex")}}),A.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl absolute inset-0",style:{backgroundColor:o||"#cccccc",display:"none"},children:E})]}):A.jsx("div",{className:"w-full h-80 flex items-center justify-center text-white font-bold text-6xl",style:{backgroundColor:o||"#cccccc"},children:E}),A.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full text-white transition-colors z-10","aria-label":"Close profile",children:A.jsx(Yi,{className:"w-6 h-6"})})]}),A.jsxs("div",{className:"p-6 space-y-6",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:c}),A.jsxs("div",{className:"flex items-center gap-4 text-gray-600 dark:text-gray-400",children:[h&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(DM,{className:"w-4 h-4"}),A.jsxs("span",{children:[h," years old"]})]}),m&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx(h5,{className:"w-4 h-4"}),A.jsxs("span",{children:[m," cm"]})]})]})]}),w&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"About"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:w})]}),g&&g.length>0&&A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Interests"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(T=>A.jsx(ea,{variant:"outline",className:"rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:T},T))})]}),A.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:A.jsxs(Ut,{onClick:t,disabled:r,className:`w-full rounded-xl py-3 transition-all ${r?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white"}`,children:[A.jsx(vd,{className:`w-5 h-5 mr-2 ${r?"":"hover:fill-current"}`}),r?"Already Liked":`Like ${c}`]})})]})]})})})}function F6(){const n=oa(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState([]),[h,m]=P.useState(null),[g,w]=P.useState(null),[E,T]=P.useState({age_min:18,age_max:99,gender:"all",interests:[]}),[R,M]=P.useState(!1),[D,L]=P.useState(!0),[G,z]=P.useState(new Set),[W,Y]=P.useState(null),[Z,ie]=P.useState(!0),F=P.useRef({profiles:null,likes:null});P.useEffect(()=>(ee(),()=>{B()}),[]),P.useEffect(()=>{r&&e.length>=0&&ne()},[e,E,r]),P.useEffect(()=>{const we=()=>{ie(!document.hidden)};return ie(!document.hidden),document.addEventListener("visibilitychange",we),()=>document.removeEventListener("visibilitychange",we)},[]),P.useEffect(()=>{if(!(h!=null&&h.id)||!g){B();return}H()},[h==null?void 0:h.id,g]);const B=()=>{Object.values(F.current).forEach(we=>{we&&we()}),F.current={profiles:null,likes:null},console.log("🧹 All Discovery listeners cleaned up")},H=()=>{B();try{F.current.profiles=ka.onProfilesChange(h.id,we=>{const se=we.filter(oe=>oe.is_visible),Ae=se.find(oe=>oe.session_id===g),xe=se.filter(oe=>oe.session_id!==g);i(Ae),t(xe),Ae||(console.warn("Current user profile not found for session, redirecting."),n(Ln("Home")))},{is_visible:!0}),F.current.likes=us.onLikesChange(h.id,g,we=>{z(new Set(we.map(se=>se.liked_session_id)))}),console.log("📡 Real-time listeners setup complete")}catch(we){console.error("❌ Error setting up real-time listeners:",we)}},ee=async()=>{const we=localStorage.getItem("currentEventId"),se=localStorage.getItem("currentSessionId");if(!we||!se){n(Ln("Home"));return}w(se);try{const Ae=await Of.filter({id:we});if(Ae.length>0)m(Ae[0]);else{n(Ln("Home"));return}}catch(Ae){console.error("Error initializing session:",Ae)}L(!1)},ne=()=>{if(!r){c([]);return}let we=e.filter(se=>{var oe;const Ae=r.interested_in==="everyone"||r.interested_in==="men"&&se.gender_identity==="man"||r.interested_in==="women"&&se.gender_identity==="woman"||r.interested_in==="non-binary"&&se.gender_identity==="non-binary",xe=se.interested_in==="everyone"||se.interested_in==="men"&&r.gender_identity==="man"||se.interested_in==="women"&&r.gender_identity==="woman"||se.interested_in==="non-binary"&&r.gender_identity==="non-binary";return!(!Ae||!xe||!(se.age>=E.age_min&&se.age<=E.age_max)||E.gender!=="all"&&se.gender_identity!==E.gender||E.interests.length>0&&!((oe=se.interests)!=null&&oe.some(Te=>E.interests.includes(Te))))});c(we)},te=async we=>{if(G.has(we.session_id)||!r)return;const se=localStorage.getItem("currentEventId"),Ae=r.session_id;try{z(Te=>new Set([...Te,we.session_id]));const xe=await us.create({event_id:se,liker_session_id:Ae,liked_session_id:we.session_id,is_mutual:!1,liker_notified_of_match:!1,liked_notified_of_match:!1}),oe=await us.filter({event_id:se,liker_session_id:we.session_id,liked_session_id:Ae});if(oe.length>0){const Te=oe[0];await us.update(xe.id,{is_mutual:!0,liker_notified_of_match:!0}),await us.update(Te.id,{is_mutual:!0,liked_notified_of_match:!0}),alert(`🎉 It's a Match! You and ${we.first_name} liked each other.`),n(Ln("Matches"))}}catch(xe){console.error("Error liking profile:",xe),z(oe=>{const Te=new Set(oe);return Te.delete(we.session_id),Te})}},K=we=>{Y(we)};return P.useEffect(()=>{const we=setInterval(()=>{},3e4);return()=>clearInterval(we)},[]),D?A.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading singles at this event..."})]})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-pink-500 to-purple-600 rounded-full flex items-center justify-center",children:A.jsx(vd,{className:"w-3 h-3 text-white"})}),A.jsx("span",{className:"font-semibold text-lg bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"Hooked"})]}),A.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Singles at ",h==null?void 0:h.name]}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[o.length," people discovered"]})]}),A.jsx(Ut,{onClick:()=>M(!0),variant:"outline",size:"icon",className:"rounded-full border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:A.jsx(VS,{className:"w-5 h-5"})})]}),A.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map(we=>A.jsx("div",{className:"relative",children:A.jsx(si,{className:"border-0 shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer overflow-hidden bg-white dark:bg-gray-800",onClick:()=>K(we),children:A.jsx(oi,{className:"p-0",children:A.jsxs("div",{className:"relative aspect-square",children:[we.profile_photo_url?A.jsx("img",{src:we.profile_photo_url,alt:`${we.first_name}'s profile`,className:"w-full h-full object-cover",loading:"lazy",onError:se=>{se.target.style.display="none";const Ae=se.target.nextElementSibling;Ae&&(Ae.style.display="flex")}}):null,A.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-semibold text-lg absolute inset-0",style:{backgroundColor:we.profile_color||"#cccccc",display:we.profile_photo_url?"none":"flex"},children:we.first_name[0]}),A.jsx("button",{onClick:se=>{se.stopPropagation(),te(we)},disabled:G.has(we.session_id),className:`absolute top-2 right-2 p-2 rounded-full shadow-lg transition-all ${G.has(we.session_id)?"bg-white/90 dark:bg-gray-800/90 text-pink-500 cursor-not-allowed":"bg-white/90 dark:bg-gray-800/90 text-gray-400 dark:text-gray-500 hover:bg-pink-50 dark:hover:bg-pink-900/20 hover:text-pink-500 hover:scale-110"}`,children:A.jsx(vd,{className:`w-4 h-4 ${G.has(we.session_id)?"fill-current text-pink-500":"text-gray-400 dark:text-gray-500 hover:text-pink-500"}`})}),A.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3",children:A.jsx("h3",{className:"font-semibold text-white text-sm truncate",children:we.first_name})})]})})})},we.id))}),o.length===0&&!D&&A.jsx(si,{className:"border-0 shadow-lg mt-8 bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx(xf,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),A.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"No singles found"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"Try adjusting your filters or check back later as more people join the event."}),A.jsx(Ut,{onClick:()=>M(!0),variant:"outline",className:"rounded-xl border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 bg-white dark:bg-gray-800",children:"Adjust Filters"})]})}),R&&A.jsx(Nee,{filters:E,onFiltersChange:T,onClose:()=>M(!1)}),W&&A.jsx(V6,{profile:W,onClose:()=>Y(null),onLike:()=>{te(W),Y(null)},isLiked:G.has(W.session_id)})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{onClick:()=>n(Ln("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(Xf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Profile"})]}),A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(xf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Discover"})]}),A.jsxs("button",{onClick:()=>n(Ln("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(yf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Matches"})]})]})})})]})}function Io(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function hu(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}const B6=6048e5,kee=864e5;let Pee={};function r1(){return Pee}function Hf(n,e){var h,m,g,w;const t=r1(),r=(e==null?void 0:e.weekStartsOn)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.weekStartsOn)??0,i=Io(n),o=i.getDay(),c=(o<r?7:0)+o-r;return i.setDate(i.getDate()-c),i.setHours(0,0,0,0),i}function tg(n){return Hf(n,{weekStartsOn:1})}function j6(n){const e=Io(n),t=e.getFullYear(),r=hu(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const i=tg(r),o=hu(n,0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);const c=tg(o);return e.getTime()>=i.getTime()?t+1:e.getTime()>=c.getTime()?t:t-1}function oS(n){const e=Io(n);return e.setHours(0,0,0,0),e}function aS(n){const e=Io(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Dee(n,e){const t=oS(n),r=oS(e),i=+t-aS(t),o=+r-aS(r);return Math.round((i-o)/kee)}function Oee(n){const e=j6(n),t=hu(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),tg(t)}function Mee(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Lee(n){if(!Mee(n)&&typeof n!="number")return!1;const e=Io(n);return!isNaN(Number(e))}function Vee(n){const e=Io(n),t=hu(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Fee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Bee=(n,e,t)=>{let r;const i=Fee[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function bx(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const jee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Uee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wee={date:bx({formats:jee,defaultWidth:"full"}),time:bx({formats:Uee,defaultWidth:"full"}),dateTime:bx({formats:zee,defaultWidth:"full"})},Hee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Gee=(n,e,t,r)=>Hee[n];function Fh(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const c=n.defaultFormattingWidth||n.defaultWidth,h=t!=null&&t.width?String(t.width):c;i=n.formattingValues[h]||n.formattingValues[c]}else{const c=n.defaultWidth,h=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[h]||n.values[c]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const $ee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Xee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Qee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Zee=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Jee={ordinalNumber:Zee,era:Fh({values:$ee,defaultWidth:"wide"}),quarter:Fh({values:qee,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Fh({values:Kee,defaultWidth:"wide"}),day:Fh({values:Xee,defaultWidth:"wide"}),dayPeriod:Fh({values:Yee,defaultWidth:"wide",formattingValues:Qee,defaultFormattingWidth:"wide"})};function Bh(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const c=o[0],h=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(h)?tte(h,E=>E.test(c)):ete(h,E=>E.test(c));let g;g=n.valueCallback?n.valueCallback(m):m,g=t.valueCallback?t.valueCallback(g):g;const w=e.slice(c.length);return{value:g,rest:w}}}function ete(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function tte(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function nte(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let c=n.valueCallback?n.valueCallback(o[0]):o[0];c=t.valueCallback?t.valueCallback(c):c;const h=e.slice(i.length);return{value:c,rest:h}}}const rte=/^(\d+)(th|st|nd|rd)?/i,ite=/\d+/i,ste={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ote={any:[/^b/i,/^(a|c)/i]},ate={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lte={any:[/1/i,/2/i,/3/i,/4/i]},cte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ute={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mte={ordinalNumber:nte({matchPattern:rte,parsePattern:ite,valueCallback:n=>parseInt(n,10)}),era:Bh({matchPatterns:ste,defaultMatchWidth:"wide",parsePatterns:ote,defaultParseWidth:"any"}),quarter:Bh({matchPatterns:ate,defaultMatchWidth:"wide",parsePatterns:lte,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Bh({matchPatterns:cte,defaultMatchWidth:"wide",parsePatterns:ute,defaultParseWidth:"any"}),day:Bh({matchPatterns:dte,defaultMatchWidth:"wide",parsePatterns:hte,defaultParseWidth:"any"}),dayPeriod:Bh({matchPatterns:fte,defaultMatchWidth:"any",parsePatterns:pte,defaultParseWidth:"any"})},gte={code:"en-US",formatDistance:Bee,formatLong:Wee,formatRelative:Gee,localize:Jee,match:mte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function yte(n){const e=Io(n);return Dee(e,Vee(e))+1}function xte(n){const e=Io(n),t=+tg(e)-+Oee(e);return Math.round(t/B6)+1}function U6(n,e){var w,E,T,R;const t=Io(n),r=t.getFullYear(),i=r1(),o=(e==null?void 0:e.firstWeekContainsDate)??((E=(w=e==null?void 0:e.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)??i.firstWeekContainsDate??((R=(T=i.locale)==null?void 0:T.options)==null?void 0:R.firstWeekContainsDate)??1,c=hu(n,0);c.setFullYear(r+1,0,o),c.setHours(0,0,0,0);const h=Hf(c,e),m=hu(n,0);m.setFullYear(r,0,o),m.setHours(0,0,0,0);const g=Hf(m,e);return t.getTime()>=h.getTime()?r+1:t.getTime()>=g.getTime()?r:r-1}function wte(n,e){var h,m,g,w;const t=r1(),r=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((w=(g=t.locale)==null?void 0:g.options)==null?void 0:w.firstWeekContainsDate)??1,i=U6(n,e),o=hu(n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),Hf(o,e)}function vte(n,e){const t=Io(n),r=+Hf(t,e)-+wte(t,e);return Math.round(r/B6)+1}function wn(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const El={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return wn(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):wn(t+1,2)},d(n,e){return wn(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return wn(n.getHours()%12||12,e.length)},H(n,e){return wn(n.getHours(),e.length)},m(n,e){return wn(n.getMinutes(),e.length)},s(n,e){return wn(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return wn(i,e.length)}},Ju={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lS={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return El.y(n,e)},Y:function(n,e,t,r){const i=U6(n,r),o=i>0?i:1-i;if(e==="YY"){const c=o%100;return wn(c,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):wn(o,e.length)},R:function(n,e){const t=j6(n);return wn(t,e.length)},u:function(n,e){const t=n.getFullYear();return wn(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return wn(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return wn(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return El.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return wn(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=vte(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):wn(i,e.length)},I:function(n,e,t){const r=xte(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):wn(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):El.d(n,e)},D:function(n,e,t){const r=yte(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):wn(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return wn(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return wn(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return wn(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ju.noon:r===0?i=Ju.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ju.evening:r>=12?i=Ju.afternoon:r>=4?i=Ju.morning:i=Ju.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return El.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):El.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):wn(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):El.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):El.s(n,e)},S:function(n,e){return El.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return uS(r);case"XXXX":case"XX":return Nc(r);case"XXXXX":case"XXX":default:return Nc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return uS(r);case"xxxx":case"xx":return Nc(r);case"xxxxx":case"xxx":default:return Nc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+cS(r,":");case"OOOO":default:return"GMT"+Nc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+cS(r,":");case"zzzz":default:return"GMT"+Nc(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return wn(r,e.length)},T:function(n,e,t){const r=n.getTime();return wn(r,e.length)}};function cS(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+wn(o,2)}function uS(n,e){return n%60===0?(n>0?"-":"+")+wn(Math.abs(n)/60,2):Nc(n,e)}function Nc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=wn(Math.trunc(r/60),2),o=wn(r%60,2);return t+i+e+o}const dS=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},z6=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},_te=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return dS(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",dS(r,e)).replace("{{time}}",z6(i,e))},Ete={p:z6,P:_te},bte=/^D+$/,Ite=/^Y+$/,Ate=["D","DD","YY","YYYY"];function Tte(n){return bte.test(n)}function Cte(n){return Ite.test(n)}function Ste(n,e,t){const r=Rte(n,e,t);if(console.warn(r),Ate.includes(n))throw new RangeError(r)}function Rte(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Nte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Pte=/^'([^]*?)'?$/,Dte=/''/g,Ote=/[a-zA-Z]/;function Mte(n,e,t){var w,E,T,R;const r=r1(),i=r.locale??gte,o=r.firstWeekContainsDate??((E=(w=r.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)??1,c=r.weekStartsOn??((R=(T=r.locale)==null?void 0:T.options)==null?void 0:R.weekStartsOn)??0,h=Io(n);if(!Lee(h))throw new RangeError("Invalid time value");let m=e.match(kte).map(M=>{const D=M[0];if(D==="p"||D==="P"){const L=Ete[D];return L(M,i.formatLong)}return M}).join("").match(Nte).map(M=>{if(M==="''")return{isToken:!1,value:"'"};const D=M[0];if(D==="'")return{isToken:!1,value:Lte(M)};if(lS[D])return{isToken:!0,value:M};if(D.match(Ote))throw new RangeError("Format string contains an unescaped latin alphabet character `"+D+"`");return{isToken:!1,value:M}});i.localize.preprocessor&&(m=i.localize.preprocessor(h,m));const g={firstWeekContainsDate:o,weekStartsOn:c,locale:i};return m.map(M=>{if(!M.isToken)return M.value;const D=M.value;(Cte(D)||Tte(D))&&Ste(D,e,String(n));const L=lS[D[0]];return L(h,D,i.localize,g)}).join("")}function Lte(n){const e=n.match(Pte);return e?e[1].replace(Dte,"'"):n}function Vte({matchName:n,onConfirm:e,onCancel:t,isSharing:r}){const[i,o]=P.useState({fullName:"",phoneNumber:""}),[c,h]=P.useState("confirm"),[m,g]=P.useState(!1),w=async()=>{var R,M,D,L;if(g(!0),navigator.contacts)try{const G=await navigator.contacts.select(["name","tel"]);if(G&&G.length>0){const z=G[0],W=((M=(R=z.name)==null?void 0:R[0])==null?void 0:M.formatted)||"",Y=((L=(D=z.tel)==null?void 0:D[0])==null?void 0:L.value)||"";if(W&&Y){o({fullName:W,phoneNumber:Y}),T({fullName:W,phoneNumber:Y}),g(!1);return}}}catch{console.log("Contact access not available or denied, falling back to manual entry")}h("enter"),g(!1)},E=()=>{!i.fullName.trim()||!i.phoneNumber.trim()||T(i)},T=async R=>{g(!0);try{await e(R),h("success"),setTimeout(()=>{t()},2e3)}catch(M){console.error("Error sharing contact info:",M),alert("Failed to share contact info. Please try again.")}g(!1)};return A.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 dark:bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",children:A.jsxs(ra.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm shadow-2xl relative",children:[A.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Close",children:A.jsx(Yi,{className:"w-5 h-5"})}),c==="confirm"&&A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Rx,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Share Contact Info?"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:["This will share your name and phone number with ",A.jsx("span",{className:"font-medium",children:n}),". This action cannot be undone."]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx(Ut,{onClick:t,variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",disabled:m,children:"Not Yet"}),A.jsx(Ut,{onClick:w,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:m,children:m?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Share"})]})]}),c==="enter"&&A.jsxs("div",{children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Xf,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-center text-gray-900 dark:text-white",children:"Enter Your Contact Info"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-center text-sm",children:["Please enter your details to share with ",n]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsx(cs,{htmlFor:"fullName",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),A.jsx($l,{id:"fullName",type:"text",placeholder:"Your full name",value:i.fullName,onChange:R=>o(M=>({...M,fullName:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",autoFocus:!0})]}),A.jsxs("div",{children:[A.jsx(cs,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Phone Number"}),A.jsx($l,{id:"phoneNumber",type:"tel",placeholder:"Your phone number",value:i.phoneNumber,onChange:R=>o(M=>({...M,phoneNumber:R.target.value})),className:"mt-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 focus:border-blue-400 dark:focus:border-blue-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),A.jsxs("div",{className:"flex gap-3 mt-6",children:[A.jsx(Ut,{onClick:()=>h("confirm"),variant:"outline",className:"flex-1 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Back"}),A.jsx(Ut,{onClick:E,disabled:!i.fullName.trim()||!i.phoneNumber.trim()||m,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",children:m?A.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Confirm Share"})]})]}),c==="success"&&A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(UM,{className:"w-8 h-8 text-white"})}),A.jsx("h3",{className:"font-semibold text-xl mb-2 text-gray-900 dark:text-white",children:"Contact Info Shared!"}),A.jsxs("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:["Your contact information has been shared with ",n,". They can now see your name and phone number."]})]})]})})}function Fte({match:n,onClose:e}){var te;const[t,r]=P.useState([]),[i,o]=P.useState(""),[c,h]=P.useState(!0),[m,g]=P.useState(!1),[w,E]=P.useState(!1),[T,R]=P.useState(null),[M,D]=P.useState(!0),L=P.useRef(null),G=localStorage.getItem("currentSessionId"),z=localStorage.getItem("currentEventId"),W=`${G}_${n.session_id}`.split("").sort().join(""),[Y,Z]=P.useState(!1);P.useEffect(()=>{Z(!1)},[n.session_id]);const ie=P.useCallback(async()=>{try{const K=await Vc.filter({match_id:W,receiver_session_id:G,is_read:!1,event_id:z});K.length>0&&await Promise.all(K.map(we=>Vc.update(we.id,{is_read:!0})))}catch(K){console.error("Error marking messages as read:",K)}},[W,G,z]),F=P.useCallback(async()=>{try{const K=await Vc.filter({event_id:z,match_id:W},"created_date");r(K),ie()}catch(K){console.error("Error loading messages:",K)}h(!1)},[z,W,ie]);P.useEffect(()=>{const K=()=>{D(!document.hidden)};return document.addEventListener("visibilitychange",K),()=>document.removeEventListener("visibilitychange",K)},[]),P.useEffect(()=>{F(),H();const K=setInterval(()=>{M&&(F(),H())},3e4);return()=>clearInterval(K)},[M,F]),P.useEffect(()=>{B()},[t]);const B=()=>{var K;(K=L.current)==null||K.scrollIntoView({behavior:"smooth"})},H=async()=>{try{(await Xy.filter({event_id:z,match_id:W,sharer_session_id:G})).length>0&&E(!0);const we=await Xy.filter({event_id:z,match_id:W,sharer_session_id:n.session_id,recipient_session_id:G});we.length>0&&R(we[0])}catch(K){console.error("Error loading contact shares:",K)}},ee=async K=>{if(K.preventDefault(),!i.trim())return;const we=i.trim();o("");try{const se={id:`temp_${Date.now()}`,content:we,sender_session_id:G,created_date:new Date().toISOString()};r(Ae=>[...Ae,se]),await Vc.create({event_id:z,sender_session_id:G,receiver_session_id:n.session_id,content:we,match_id:W,is_read:!1})}catch(se){console.error("Error sending message:",se),r(Ae=>Ae.filter(xe=>!xe.id.startsWith("temp_"))),o(we)}},ne=async K=>{try{await Xy.create({event_id:z,sharer_session_id:G,recipient_session_id:n.session_id,full_name:K.fullName,phone_number:K.phoneNumber,match_id:W}),E(!0),g(!1),H()}catch(we){throw console.error("Error sharing contact info:",we),we}};return A.jsx(Jg,{open:!0,onOpenChange:e,children:A.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 dark:bg-black/70 flex items-center justify-center p-4 modal-overlay",children:A.jsxs("div",{className:"modal-content w-full max-w-sm h-[600px] bg-white dark:bg-gray-900 rounded-2xl flex flex-col shadow-2xl",children:[A.jsxs(e1,{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-pink-50 to-purple-50 dark:from-pink-900/20 dark:to-purple-900/20 rounded-t-2xl",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[n.profile_photo_url&&!Y?A.jsx("img",{src:n.profile_photo_url,alt:`${n.first_name}'s avatar`,className:"w-10 h-10 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700",loading:"lazy",onError:()=>Z(!0)}):A.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:n.profile_color},children:n.first_name[0]}),A.jsxs("div",{children:[A.jsx(t1,{className:"text-lg text-gray-900 dark:text-white",children:n.first_name}),A.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[A.jsx(hv,{className:"w-3 h-3 text-gray-400 dark:text-gray-500"}),A.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Expires at midnight"})]})]}),A.jsxs("div",{className:"flex gap-1",children:[!w&&A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>g(!0),className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",title:"Share contact info",children:A.jsx(Bb,{className:"w-4 h-4"})}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:e,className:"rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800",children:A.jsx(Yi,{className:"w-4 h-4"})})]})]}),A.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:(te=n.interests)==null?void 0:te.map(K=>A.jsx(ea,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-700 text-purple-600 dark:text-purple-300 bg-white dark:bg-gray-800",children:K},K))}),(w||T)&&A.jsxs("div",{className:"mt-3 space-y-2",children:[w&&A.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[A.jsx(Bb,{className:"w-3 h-3"}),A.jsx("span",{children:"You shared your contact info"})]}),T&&A.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[A.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 dark:text-blue-400 mb-2",children:[A.jsx(Rx,{className:"w-3 h-3"}),A.jsxs("span",{children:[n.first_name," shared their contact info"]})]}),A.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx(Xf,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),A.jsx("span",{className:"font-medium",children:T.full_name})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Rx,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"}),A.jsx("span",{className:"font-mono",children:T.phone_number})]})]})]})]})]}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-800",children:[c?A.jsx("div",{className:"flex justify-center py-8",children:A.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):t.length===0?A.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:A.jsxs("p",{className:"text-sm",children:["🎉 You matched! Say hello to ",n.first_name]})}):t.map(K=>A.jsx("div",{className:`flex ${K.sender_session_id===G?"justify-end":"justify-start"}`,children:A.jsxs("div",{className:`max-w-[80%] px-4 py-2 rounded-2xl ${K.sender_session_id===G?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[A.jsx("p",{className:"text-sm",children:K.content}),A.jsx("p",{className:`text-xs mt-1 ${K.sender_session_id===G?"text-purple-100":"text-gray-500 dark:text-gray-400"}`,children:Mte(new Date(K.created_date),"HH:mm")})]})},K.id)),A.jsx("div",{ref:L})]}),A.jsx("form",{onSubmit:ee,className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 rounded-b-2xl",children:A.jsxs("div",{className:"flex gap-2",children:[A.jsx($l,{value:i,onChange:K=>o(K.target.value),placeholder:`Message ${n.first_name}...`,className:"flex-1 rounded-full border-2 border-gray-200 dark:border-gray-600 focus:border-purple-400 dark:focus:border-purple-400 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsx(Ut,{type:"submit",disabled:!i.trim(),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-full",size:"icon",children:A.jsx(m5,{className:"w-4 h-4"})})]})}),m&&A.jsx(Vte,{matchName:n.first_name,onConfirm:ne,onCancel:()=>g(!1)})]})})})}function W6(){const n=oa(),[e,t]=P.useState([]),[r,i]=P.useState(null),[o,c]=P.useState(null),[h,m]=P.useState(!0),[g,w]=P.useState(!0),E=localStorage.getItem("currentSessionId"),T=localStorage.getItem("currentEventId"),R=P.useRef({matches:null,messages:null}),M=P.useCallback(async z=>{if(!E||!T||z.length===0)return;const W=await us.filter({event_id:T,is_mutual:!0});for(const Y of z){const Z=W.find(F=>F.liker_session_id===E&&F.liked_session_id===Y.session_id);if(Z&&!Z.liker_notified_of_match)try{await us.update(Z.id,{liker_notified_of_match:!0})}catch(F){console.error("Error updating my like notification status:",F)}const ie=W.find(F=>F.liker_session_id===Y.session_id&&F.liked_session_id===E);if(ie&&!ie.liked_notified_of_match)try{await us.update(ie.id,{liked_notified_of_match:!0})}catch(F){console.error("Error updating their like notification status:",F)}}},[E,T]),D=P.useCallback(async()=>{if(!E||!T){m(!1);return}try{const z=await us.filter({liker_session_id:E,event_id:T,is_mutual:!0}),W=await us.filter({liked_session_id:E,event_id:T,is_mutual:!0}),Y=new Set([...z.map(F=>F.liked_session_id),...W.map(F=>F.liker_session_id)]);if(Y.size===0){t([]),m(!1);return}const Z=await ka.filter({session_id:Array.from(Y),event_id:T}),ie=await Promise.all(Z.map(async F=>{const B=[E,F.session_id].sort(),H=`${B[0]}_${B[1]}`,ee=await Vc.filter({match_id:H,receiver_session_id:E,is_read:!1,event_id:T});return{...F,unreadCount:ee.length}}));t(ie.filter(Boolean)),Z.length>0&&M(Z)}catch(z){console.error("Error loading matches:",z)}m(!1)},[E,T,M]),L=()=>{Object.values(R.current).forEach(z=>{z&&z()}),R.current={matches:null,messages:null},console.log("🧹 All Matches listeners cleaned up")},G=P.useCallback(()=>{if(!E||!T){L();return}L();try{R.current.matches=us.onLikesChange(T,E,async z=>{z.filter(Y=>Y.is_mutual).length>0&&await D()}),R.current.messages=Vc.onMessagesChange(T,E,async z=>{await D()}),console.log("📡 Matches real-time listeners setup complete")}catch(z){console.error("❌ Error setting up Matches real-time listeners:",z)}},[E,T,D]);return P.useEffect(()=>(D(),G(),()=>{L()}),[D,G]),P.useEffect(()=>{const z=()=>{w(!document.hidden)};return document.addEventListener("visibilitychange",z),()=>document.removeEventListener("visibilitychange",z)},[]),P.useEffect(()=>{const W=new URLSearchParams(window.location.search).get("openChat");if(W&&e.length>0){const Y=e.find(Z=>Z.session_id===W);Y&&(i(Y),window.history.replaceState({},document.title,window.location.pathname))}},[e]),P.useEffect(()=>{const z=setInterval(()=>{},3e4);return()=>clearInterval(z)},[]),h?A.jsx("div",{className:"min-h-screen flex items-center justify-center pb-20 bg-white dark:bg-gray-900",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-pink-600 mx-auto mb-4"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Loading your matches..."})]})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:A.jsx(vd,{className:"w-8 h-8 text-white"})}),A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Matches"}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.length," mutual ",e.length===1?"connection":"connections"," at this event"]})]}),A.jsxs("div",{className:"space-y-4",children:[e.map(z=>{var W,Y;return A.jsx(si,{className:"border-0 shadow-lg hover:shadow-xl transition-all duration-300 bg-white dark:bg-gray-800",children:A.jsx(oi,{className:"p-6",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("div",{className:"relative",children:[z.profile_photo_url?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:z.profile_photo_url,alt:`${z.first_name}'s avatar`,className:"w-16 h-16 rounded-full object-cover border-2 border-purple-200 dark:border-purple-700 cursor-pointer hover:opacity-80 transition-opacity",loading:"lazy",onClick:()=>c(z),onError:Z=>{Z.target.style.display="none";const ie=Z.target.nextElementSibling;ie&&(ie.style.display="flex")}}),A.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity absolute inset-0 border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color,display:"none"},onClick:()=>c(z),children:z.first_name[0]})]}):A.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-semibold text-xl cursor-pointer hover:opacity-80 transition-opacity border-2 border-purple-200 dark:border-purple-700",style:{backgroundColor:z.profile_color},onClick:()=>c(z),children:z.first_name[0]}),A.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center shadow-md",children:A.jsx(x5,{className:"w-3 h-3 text-white"})})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:z.first_name}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:[z.age," years old"]}),A.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[(W=z.interests)==null?void 0:W.slice(0,2).map(Z=>A.jsx(ea,{variant:"outline",className:"text-xs rounded-full border-purple-200 dark:border-purple-600 text-purple-600 dark:text-purple-300 bg-purple-50 dark:bg-purple-900/30",children:Z},Z)),((Y=z.interests)==null?void 0:Y.length)>2&&A.jsxs(ea,{variant:"outline",className:"text-xs rounded-full border-gray-200 dark:border-gray-600 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800",children:["+",z.interests.length-2]})]})]})]}),A.jsxs("div",{className:"flex flex-col items-center gap-2",children:[A.jsx(Ut,{onClick:()=>i(z),className:"bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-full",size:"icon",children:A.jsx(yf,{className:"w-5 h-5"})}),z.unreadCount>0&&A.jsx(ea,{className:"bg-red-500 text-white rounded-full px-2 py-0.5 text-xs",children:z.unreadCount})]})]})})},z.id)}),e.length===0&&!h&&A.jsx(si,{className:"border-0 shadow-lg bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx(xf,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),A.jsx("h3",{className:"font-semibold text-xl text-gray-900 dark:text-white mb-2",children:"No matches yet"}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Start liking profiles to find your matches! When someone likes you back, they'll appear here."}),A.jsx(Ut,{onClick:()=>n(Ln("Discovery")),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white rounded-xl px-6",children:"Discover Singles"})]})})]})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{onClick:()=>n(Ln("Profile")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(Xf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Profile"})]}),A.jsxs("button",{onClick:()=>n(Ln("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(xf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Discover"})]}),A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(yf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Matches"})]})]})})}),r&&A.jsx(Fte,{match:r,onClose:()=>{i(null),D()}}),o&&A.jsx(V6,{profile:o,onClose:()=>c(null),onLike:()=>{c(null)},isLiked:!0})]})}function Bte(){const n=oa(),[e,t]=P.useState(!0),[r,i]=P.useState(null);P.useEffect(()=>{o()},[]);const o=async()=>{try{console.log("Starting event join process...");const h=await qW();if(console.log("Firebase connection test result:",h),!h.success){i(`Firebase connection failed: ${h.error}`),t(!1);return}const g=new URLSearchParams(window.location.search).get("code");if(console.log("Event code from URL:",g),!g){i("No event code provided in the URL."),t(!1);return}console.log("Fetching events with code:",g.toUpperCase());const w=await Of.list();console.log("All events in database:",w);const E=await Of.filter({event_code:g.toUpperCase()});if(console.log("Found events:",E),E.length===0){i(`Event code "${g.toUpperCase()}" not found. Please check the code and try again.`),t(!1);return}const T=E[0],R=new Date().toISOString();if(!T.starts_at||!T.expires_at){i("This event is not configured correctly. Please contact the organizer."),t(!1);return}const M=T.starts_at<=R&&R<T.expires_at;if(R<T.starts_at){i("This event hasn't started yet. Try again soon!"),t(!1);return}if(R>=T.expires_at){i("This event has ended."),t(!1);return}localStorage.setItem("currentEventId",T.id),localStorage.setItem("currentEventCode",T.event_code);const D=localStorage.getItem("currentSessionId");if(D)try{if((await ka.filter({session_id:D,event_id:T.id})).length>0){n(Ln("Discovery"));return}}catch(L){console.warn("Error checking existing profile:",L)}n(Ln("Consent"))}catch(h){console.error("Error processing event join:",h),console.error("Error details:",{message:h.message,stack:h.stack,name:h.name}),i(`Unable to process event access: ${h.message}. Please try again.`),t(!1)}},c=()=>{n(Ln("Home"))};return e?A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(si,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-6"}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Joining Event..."}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we verify your event access."})]})})}):r?A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(si,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-6",children:A.jsx(dv,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Unable to Join Event"}),A.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r}),A.jsx("div",{className:"flex gap-3",children:A.jsx(Ut,{onClick:c,className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white",children:"Return to Home"})})]})})}):A.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex items-center justify-center p-4",children:A.jsx(si,{className:"border-0 shadow-xl max-w-md w-full bg-white dark:bg-gray-800",children:A.jsxs(oi,{className:"p-8 text-center",children:[A.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Processing..."}),A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Redirecting you to the event."})]})})})}var i1="Switch",[jte,xne]=eh(i1),[Ute,zte]=jte(i1),H6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:i,defaultChecked:o,required:c,disabled:h,value:m="on",onCheckedChange:g,form:w,...E}=n,[T,R]=P.useState(null),M=bn(e,W=>R(W)),D=P.useRef(!1),L=T?w||!!T.closest("form"):!0,[G,z]=Wf({prop:i,defaultProp:o??!1,onChange:g,caller:i1});return A.jsxs(Ute,{scope:t,checked:G,disabled:h,children:[A.jsx(nn.button,{type:"button",role:"switch","aria-checked":G,"aria-required":c,"data-state":K6(G),"data-disabled":h?"":void 0,disabled:h,value:m,...E,ref:M,onClick:an(n.onClick,W=>{z(Y=>!Y),L&&(D.current=W.isPropagationStopped(),D.current||W.stopPropagation())})}),L&&A.jsx(q6,{control:T,bubbles:!D.current,name:r,value:m,checked:G,required:c,disabled:h,form:w,style:{transform:"translateX(-100%)"}})]})});H6.displayName=i1;var G6="SwitchThumb",$6=P.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,i=zte(G6,t);return A.jsx(nn.span,{"data-state":K6(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});$6.displayName=G6;var Wte="SwitchBubbleInput",q6=P.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...i},o)=>{const c=P.useRef(null),h=bn(c,o),m=A_(t),g=__(e);return P.useEffect(()=>{const w=c.current;if(!w)return;const E=window.HTMLInputElement.prototype,R=Object.getOwnPropertyDescriptor(E,"checked").set;if(m!==t&&R){const M=new Event("click",{bubbles:r});R.call(w,t),w.dispatchEvent(M)}},[m,t,r]),A.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:h,style:{...i.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});q6.displayName=Wte;function K6(n){return n?"checked":"unchecked"}var X6=H6,Hte=$6;const Y6=P.forwardRef(({className:n,...e},t)=>A.jsx(X6,{className:ln("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:A.jsx(Hte,{className:ln("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));Y6.displayName=X6.displayName;const Gte=["music","tech","food","books","travel","art","fitness","nature","movies","business","photography","dancing","yoga","gaming","comedy","startups","fashion","spirituality","volunteering","crypto","cocktails","politics","hiking","design","podcasts","pets","wellness"];function Q6(){var Y;const n=oa(),[e,t]=P.useState(null),[r,i]=P.useState(null),[o,c]=P.useState({bio:!1,interests:!1,height:!1}),[h,m]=P.useState({bio:"",interests:[],height:""}),[g,w]=P.useState(!0),[E,T]=P.useState(!1),R=P.useCallback(async()=>{w(!0);try{const Z=await Yy.me();if(!Z){n(Ln("Home"));return}t(Z),m({bio:Z.bio||"",interests:Z.interests||[],height:Z.height||""});const ie=localStorage.getItem("currentEventId"),F=localStorage.getItem("currentSessionId");if(ie&&F){const B=await ka.filter({event_id:ie,session_id:F});B.length>0&&i(B[0])}}catch(Z){console.error("Error loading profile data:",Z),xr.error("Failed to load profile.")}finally{w(!1)}},[n]);P.useEffect(()=>{R()},[R]);const M=Z=>{c(ie=>({...ie,[Z]:!ie[Z]}))},D=Z=>{m(ie=>{const F=ie.interests.includes(Z)?ie.interests.filter(B=>B!==Z):[...ie.interests,Z];return F.length>3?(xr.warning("You can select up to 3 interests."),ie):{...ie,interests:F}})},L=async Z=>{try{await Yy.updateMyUserData({[Z]:h[Z]}),xr.success(`${Z.charAt(0).toUpperCase()+Z.slice(1)} updated!`),M(Z),await R()}catch(ie){console.error(`Error updating ${Z}:`,ie),xr.error(`Failed to update ${Z}.`)}},G=async Z=>{const ie=Z.target.files[0];if(ie){T(!0);try{const{file_url:F}=await v6({file:ie});await Yy.updateMyUserData({profile_photo_url:F}),xr.success("Profile photo updated!"),await R()}catch(F){console.error("Error uploading photo:",F),xr.error("Failed to upload photo.")}finally{T(!1)}}},z=async()=>{if(r)try{const Z=!r.is_visible;await ka.update(r.id,{is_visible:Z}),i(ie=>({...ie,is_visible:Z})),xr.success(`Profile is now ${Z?"visible":"hidden"}.`)}catch(Z){console.error("Error updating visibility:",Z),xr.error("Failed to update visibility.")}},W=async()=>{if(!(!r||!confirm("Are you sure you want to leave this event? This will delete your profile for this event and cannot be undone.")))try{await ka.delete(r.id),localStorage.removeItem("currentEventId"),localStorage.removeItem("currentSessionId"),localStorage.removeItem("currentEventCode"),localStorage.removeItem("currentProfileColor"),localStorage.removeItem("currentProfilePhotoUrl"),xr.success("You have left the event."),n(Ln("Home"))}catch(Z){console.error("Error leaving event:",Z),xr.error("Failed to leave event.")}};return g?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-gray-900",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):A.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pb-20",children:[A.jsx("style",{children:`
        .visibility-switch[data-state='checked'] {
          background-color: #34D399;
        }
        .visibility-switch[data-state='unchecked'] {
          background-color: #E5E7EB;
        }
        .dark .visibility-switch[data-state='unchecked'] {
          background-color: #4B5563;
        }
        .visibility-switch span {
          background-color: white !important;
        }
      `}),A.jsxs("div",{className:"max-w-md mx-auto px-4 py-8",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-4",children:[A.jsxs("label",{htmlFor:"profile-photo-upload",className:"cursor-pointer group",children:[e.profile_photo_url?A.jsx("img",{src:e.profile_photo_url,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white dark:border-gray-800 shadow-lg"}):A.jsx("div",{className:"w-24 h-24 rounded-full flex items-center justify-center text-white font-semibold text-4xl",style:{backgroundColor:e.profile_color},children:e.full_name?e.full_name[0]:"?"}),A.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:A.jsx(Sx,{className:"w-8 h-8 text-white"})})]}),A.jsx("input",{id:"profile-photo-upload",type:"file",accept:"image/*",onChange:G,className:"hidden",disabled:E}),E&&A.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-white"})})]}),A.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e.full_name}),A.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:[e.age," years old"]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Fo,{className:"flex flex-row items-center justify-between",children:[A.jsx(mo,{className:"text-lg text-gray-900 dark:text-white",children:"About Me"}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>M("bio"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.bio?A.jsx(Yi,{className:"w-4 h-4"}):A.jsx(Sy,{className:"w-4 h-4"})})]}),A.jsx(oi,{children:o.bio?A.jsxs("div",{className:"space-y-4",children:[A.jsx(H0,{value:h.bio,onChange:Z=>m(ie=>({...ie,bio:Z.target.value})),placeholder:"Tell us a little about yourself...",className:"h-24 bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsxs(Ut,{onClick:()=>L("bio"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(Cy,{className:"w-4 h-4 mr-2"})," Save Bio"]})]}):A.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.bio||"No bio yet. Add one!"})})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Fo,{className:"flex flex-row items-center justify-between",children:[A.jsx(mo,{className:"text-lg text-gray-900 dark:text-white",children:"Interests"}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>M("interests"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.interests?A.jsx(Yi,{className:"w-4 h-4"}):A.jsx(Sy,{className:"w-4 h-4"})})]}),A.jsx(oi,{children:o.interests?A.jsxs("div",{className:"space-y-4",children:[A.jsx("div",{className:"flex flex-wrap gap-2",children:Gte.map(Z=>A.jsx(ea,{onClick:()=>D(Z),className:`cursor-pointer px-3 py-2 rounded-full transition-all ${h.interests.includes(Z)?"interest-chip-selected bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700":"interest-chip-default border-2 border-gray-200 dark:border-gray-600 hover:border-purple-300 dark:hover:border-purple-400 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 bg-white dark:bg-gray-800"}`,children:Z},Z))}),A.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h.interests.length," / 3 selected"]}),A.jsxs(Ut,{onClick:()=>L("interests"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(Cy,{className:"w-4 h-4 mr-2"})," Save Interests"]})]}):A.jsx("div",{className:"flex flex-wrap gap-2",children:((Y=e.interests)==null?void 0:Y.map(Z=>A.jsx(ea,{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:Z},Z)))||A.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No interests added yet."})})})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Fo,{className:"flex flex-row items-center justify-between",children:[A.jsx(mo,{className:"text-lg text-gray-900 dark:text-white",children:"Height"}),A.jsx(Ut,{variant:"ghost",size:"icon",onClick:()=>M("height"),className:"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100",children:o.height?A.jsx(Yi,{className:"w-4 h-4"}):A.jsx(Sy,{className:"w-4 h-4"})})]}),A.jsx(oi,{children:o.height?A.jsxs("div",{className:"space-y-4",children:[A.jsx($l,{type:"number",value:h.height,onChange:Z=>m(ie=>({...ie,height:Z.target.value})),placeholder:"Height in cm",className:"w-full height-input bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),A.jsxs(Ut,{onClick:()=>L("height"),className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white rounded-xl py-2",children:[A.jsx(Cy,{className:"w-4 h-4 mr-2"})," Save Height"]})]}):A.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:e.height?`${e.height} cm`:"Not specified"})})]}),r&&A.jsxs(A.Fragment,{children:[A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsxs(Fo,{className:"flex flex-row items-center justify-between",children:[A.jsxs(mo,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[r.is_visible?A.jsx(qM,{className:"w-5 h-5 text-green-500"}):A.jsx(GM,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),"Event Visibility"]}),A.jsx(Y6,{checked:r.is_visible,onCheckedChange:z,className:"visibility-switch"})]}),A.jsx(oi,{children:A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.is_visible?"Your profile is visible to others at the current event.":"You are currently hidden from other attendees."})})]}),A.jsxs(si,{className:"border-0 shadow-lg border-red-100 dark:border-red-900/20 bg-white dark:bg-gray-800",children:[A.jsx(Fo,{children:A.jsxs(mo,{className:"flex items-center gap-2 text-lg text-red-600 dark:text-red-400",children:[A.jsx(e5,{className:"w-5 h-5"}),"Leave Event"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"Permanently remove your profile from this event. This action cannot be undone."}),A.jsxs(Ut,{onClick:W,variant:"destructive",className:"w-full h-auto whitespace-normal",children:[A.jsx(b5,{className:"w-4 h-4 mr-2"}),"Leave Event & Delete Event Profile"]})]})]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 mt-8 bg-white dark:bg-gray-800",children:[A.jsx(Fo,{children:A.jsxs(mo,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(dv,{className:"w-5 h-5 text-orange-500"}),"Safety & Reporting"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"If you encounter inappropriate behavior, you can report users to event moderators."}),A.jsx(Ut,{variant:"outline",className:"w-full border-orange-200 dark:border-orange-700 text-orange-600 dark:text-orange-400 hover:bg-orange-50 dark:hover:bg-orange-900/20 bg-white dark:bg-gray-800",onClick:()=>{alert("Report functionality will be implemented soon.")},children:"Report a User"})]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsx(Fo,{children:A.jsxs(mo,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(hv,{className:"w-5 h-5 text-blue-500"}),"Automatic Data Expiration"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your profile, matches, and chat messages will be automatically deleted when this event ends. No data is stored permanently."}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(zu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Profile expires automatically"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(zu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Messages deleted at midnight"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[A.jsx(zu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"No permanent account created"})]})]})]})]}),A.jsxs(si,{className:"border-0 shadow-lg mb-6 bg-white dark:bg-gray-800",children:[A.jsx(Fo,{children:A.jsxs(mo,{className:"flex items-center gap-2 text-lg text-gray-900 dark:text-white",children:[A.jsx(n5,{className:"w-5 h-5 text-purple-500"}),"Email Data Usage"]})}),A.jsxs(oi,{children:[A.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Your email address is only used for post-event feedback surveys and is never visible to other users at this event."}),A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(zu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Only used for feedback requests"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(zu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Never shared with other users"})]}),A.jsxs("div",{className:"flex items-center gap-2 text-purple-600 dark:text-purple-400",children:[A.jsx(zu,{className:"w-4 h-4"}),A.jsx("span",{className:"text-sm",children:"Not used for marketing purposes"})]})]})]})]})]}),A.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 z-30",children:A.jsx("div",{className:"max-w-md mx-auto px-4 py-3",children:A.jsxs("div",{className:"flex justify-around",children:[A.jsxs("button",{className:"flex flex-col items-center gap-1 py-2 px-4 text-purple-600 dark:text-purple-400",children:[A.jsx(Xf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs font-medium",children:"Profile"})]}),A.jsxs("button",{onClick:()=>n(Ln("Discovery")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(xf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Discover"})]}),A.jsxs("button",{onClick:()=>n(Ln("Matches")),className:"flex flex-col items-center gap-1 py-2 px-4 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[A.jsx(yf,{className:"w-6 h-6"}),A.jsx("span",{className:"text-xs",children:"Matches"})]})]})})})]})}const hS={Home:Zw,Consent:_6,Discovery:F6,Matches:W6,join:Bte,Profile:Q6};function $te(n){n.endsWith("/")&&(n=n.slice(0,-1));let e=n.split("/").pop();return e.includes("?")&&(e=e.split("?")[0]),Object.keys(hS).find(r=>r.toLowerCase()===e.toLowerCase())||Object.keys(hS)[0]}function qte(){const n=Wa(),e=$te(n.pathname);return A.jsx(hJ,{currentPageName:e,children:A.jsxs(XO,{children:[A.jsx(bl,{path:"/",element:A.jsx(Zw,{})}),A.jsx(bl,{path:"/Home",element:A.jsx(Zw,{})}),A.jsx(bl,{path:"/Consent",element:A.jsx(_6,{})}),A.jsx(bl,{path:"/Discovery",element:A.jsx(F6,{})}),A.jsx(bl,{path:"/Matches",element:A.jsx(W6,{})}),A.jsx(bl,{path:"/join",element:A.jsx("join",{})}),A.jsx(bl,{path:"/Profile",element:A.jsx(Q6,{})})]})})}function Kte(){return A.jsx(xM,{children:A.jsx(qte,{})})}const Xte=20,Yte=1e6,Sa={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let Ix=0;function Qte(){return Ix=(Ix+1)%Number.MAX_VALUE,Ix.toString()}const Ax=new Map,fS=n=>{if(Ax.has(n))return;const e=setTimeout(()=>{Ax.delete(n),mf({type:Sa.REMOVE_TOAST,toastId:n})},Yte);Ax.set(n,e)},Zte=(n,e)=>{switch(e.type){case Sa.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,Xte)};case Sa.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case Sa.DISMISS_TOAST:{const{toastId:t}=e;return t?fS(t):n.toasts.forEach(r=>{fS(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case Sa.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},l0=[];let c0={toasts:[]};function mf(n){c0=Zte(c0,n),l0.forEach(e=>{e(c0)})}function Jte({...n}){const e=Qte(),t=i=>mf({type:Sa.UPDATE_TOAST,toast:{...i,id:e}}),r=()=>mf({type:Sa.DISMISS_TOAST,toastId:e});return mf({type:Sa.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function ene(){const[n,e]=P.useState(c0);return P.useEffect(()=>(l0.push(e),()=>{const t=l0.indexOf(e);t>-1&&l0.splice(t,1)}),[n]),{...n,toast:Jte,dismiss:t=>mf({type:Sa.DISMISS_TOAST,toastId:t})}}const Z6=P.forwardRef(({...n},e)=>A.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));Z6.displayName="ToastProvider";const J6=P.forwardRef(({...n},e)=>A.jsx("div",{ref:e,className:"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",...n}));J6.displayName="ToastViewport";const tne=Bg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),e8=P.forwardRef(({className:n,variant:e,...t},r)=>A.jsx("div",{ref:r,className:ln(tne({variant:e}),n),...t}));e8.displayName="Toast";const nne=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));nne.displayName="ToastAction";const t8=P.forwardRef(({className:n,...e},t)=>A.jsx("button",{ref:t,className:ln("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:A.jsx(Yi,{className:"h-4 w-4"})}));t8.displayName="ToastClose";const n8=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm font-semibold",n),...e}));n8.displayName="ToastTitle";const r8=P.forwardRef(({className:n,...e},t)=>A.jsx("div",{ref:t,className:ln("text-sm opacity-90",n),...e}));r8.displayName="ToastDescription";function rne(){const{toasts:n}=ene();return A.jsxs(Z6,{children:[n.map(function({id:e,title:t,description:r,action:i,...o}){return A.jsxs(e8,{...o,children:[A.jsxs("div",{className:"grid gap-1",children:[t&&A.jsx(n8,{children:t}),r&&A.jsx(r8,{children:r})]}),i,A.jsx(t8,{})]},e)}),A.jsx(J6,{})]})}class ine extends ze.Component{constructor(t){super(t);wy(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});wy(this,"handleGoHome",()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("🚨 Error Boundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}reportError(t,r){const i={message:t.message,stack:t.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent};console.log("Would report error:",i)}render(){return this.state.hasError?A.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(A5,{className:"w-8 h-8 text-red-600"})}),A.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),A.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Don't worry, your data is safe."}),A.jsxs("div",{className:"space-y-3",children:[A.jsxs("button",{onClick:this.handleRetry,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[A.jsx(u5,{className:"w-4 h-4"}),"Try Again"]}),A.jsxs("button",{onClick:this.handleGoHome,className:"w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[A.jsx(ZM,{className:"w-4 h-4"}),"Go to Home"]})]}),!1]})}):this.props.children}}const sne=()=>{const[n,e]=P.useState(Fl.getOnlineStatus()),[t,r]=P.useState(Em()),[i,o]=P.useState(!1);P.useEffect(()=>{const g=()=>{e(!0),o(!0)},w=()=>{e(!1)},E=()=>{setTimeout(()=>{r(Em()),o(!1)},1e3)};return window.addEventListener("online",g),window.addEventListener("offline",w),window.addEventListener("appOnline",E),e(Fl.getOnlineStatus()),r(Em()),()=>{window.removeEventListener("online",g),window.removeEventListener("offline",w),window.removeEventListener("appOnline",E)}},[]);const c=P.useCallback(async(g,w={})=>{try{return await Lk(g,w)}catch(E){const T=tT(E);throw{...E,userMessage:T}}},[]),h=P.useCallback((g,w={})=>{const E=XW(g,w);return r(Em()),E},[]),m=P.useCallback(async()=>{const g=await Fl.checkConnectivity();return e(g),g},[]);return{isOnline:n,offlineQueueLength:t,isProcessingQueue:i,executeWithRetry:c,queueForOffline:h,checkConnectivity:m,getErrorMessage:tT}},one=()=>{const{isOnline:n,offlineQueueLength:e,isProcessingQueue:t}=sne(),r=P.useCallback(()=>n?t?{type:"processing",message:"Processing offline actions...",icon:"🔄"}:e>0?{type:"queued",message:`${e} action${e>1?"s":""} queued for when you're back online.`,icon:"📝"}:{type:"online",message:"You're online",icon:"🌐"}:{type:"offline",message:"You're offline. Some features may be limited.",icon:"📴"},[n,e,t]);return{isOnline:n,offlineQueueLength:e,isProcessingQueue:t,statusMessage:r()}},ane=({className:n=""})=>{const{statusMessage:e,isOnline:t,offlineQueueLength:r}=one();if(t&&r===0)return null;const o=(()=>{switch(e.type){case"offline":return{bgColor:"bg-red-500",textColor:"text-white",icon:A.jsx(k5,{className:"w-4 h-4"})};case"processing":return{bgColor:"bg-blue-500",textColor:"text-white",icon:A.jsx(hv,{className:"w-4 h-4 animate-spin"})};case"queued":return{bgColor:"bg-yellow-500",textColor:"text-white",icon:A.jsx(dv,{className:"w-4 h-4"})};default:return{bgColor:"bg-green-500",textColor:"text-white",icon:A.jsx(D5,{className:"w-4 h-4"})}}})();return A.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 ${n}`,children:A.jsxs("div",{className:`${o.bgColor} ${o.textColor} px-4 py-2 text-sm font-medium flex items-center justify-center gap-2`,children:[o.icon,A.jsx("span",{children:e.message})]})})};function lne(){return A.jsxs(ine,{children:[A.jsx(ane,{}),A.jsx(Kte,{}),A.jsx(rne,{}),!1]})}sO.createRoot(document.getElementById("root")).render(A.jsx(lne,{}));
